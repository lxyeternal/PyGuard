Run started:2025-05-25 16:03:53.604207

Test results:
>> Issue: [B836:rmtree] shutil.rmtree
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/completion.py:39
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b836_rmtree.html
38	            if os.path.isdir(path):
39	                shutil.rmtree(path)
40	            else:

--------------------------------------------------
>> Issue: [B840:executor] concurrent.futures.Executor
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/data_preparation.py:87
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b840_executor.html
86	    # Compute PET in parallel
87	    with ProcessPoolExecutor(max_workers=max_workers) as executor:
88	        results = list(executor.map(_compute_pet, tasks))

--------------------------------------------------
>> Issue: [B836:rmtree] shutil.rmtree
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/initialisation.py:71
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b836_rmtree.html
70	    elif os.path.isdir(path):
71	        shutil.rmtree(path)
72	

--------------------------------------------------
>> Issue: [B836:rmtree] shutil.rmtree
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/initialisation.py:102
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b836_rmtree.html
101	                elif os.path.isdir(filepath):
102	                    shutil.rmtree(filepath)
103	                logger.debug(f"Removed {filepath}")

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/initialisation.py:204
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
203	            with open(nml_file, "r+") as f:
204	                text = f.read().replace(
205	                    "timeStep_model_outputs = -1", "timeStep_model_outputs = 1"

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/initialisation.py:208
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
207	                f.seek(0)
208	                f.write(text)
209	                f.truncate()

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mhm_setup.py:45
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
44	    with open(mhm_nml, "r") as f:
45	        content = f.read()
46	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mhm_setup.py:73
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
72	    with open(mhm_nml, "w") as f:
73	        f.write(content)
74	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mhm_setup.py:95
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
94	    with open(header_path, "w") as f:
95	        f.write(f"ncols         {ncols}\n")
96	        f.write(f"nrows         {nrows}\n")

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mhm_setup.py:96
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
95	        f.write(f"ncols         {ncols}\n")
96	        f.write(f"nrows         {nrows}\n")
97	        f.write("xllcorner     -180\n")

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mhm_setup.py:97
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
96	        f.write(f"nrows         {nrows}\n")
97	        f.write("xllcorner     -180\n")
98	        f.write("yllcorner     -56\n")

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mhm_setup.py:98
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
97	        f.write("xllcorner     -180\n")
98	        f.write("yllcorner     -56\n")
99	        f.write(f"cellsize      {cellsize}\n")

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mhm_setup.py:99
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
98	        f.write("yllcorner     -56\n")
99	        f.write(f"cellsize      {cellsize}\n")
100	        f.write("NODATA_value  -9999\n")

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mhm_setup.py:100
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
99	        f.write(f"cellsize      {cellsize}\n")
100	        f.write("NODATA_value  -9999\n")
101	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mhm_setup.py:365
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
364	    with open(nml_path, "w") as f:
365	        f.write(template.lstrip())
366	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mhm_setup.py:484
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
483	    with open(nml_path, "w") as f:
484	        f.write(template.lstrip())
485	

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mhm_setup.py:496
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
495	    # Template for mhm.nml
496	    template = r"""
497	! Modified,
498	! Rohini Kumar,            Aug 2013  - added "fracSealed_cityArea" in the LCover namelist
499	!                                    - added new namelist "LAI_data_information"
500	!                                    - added new directory paths for soil and geology LUTs
501	!                                      which are common to all modeled domains
502	! Luis Samaniego,          Nov 2013  - process description
503	! Matthias  Zink,          Mar 2014  - added evaluation and inflow gauge namelists
504	! Rohini Kumar,            May 2014  - options for different cordinate system for the model run
505	! Stephan Thober,          May 2014  - added switch for chunk read in
506	! Stephan Thober,          Jun 2014  - reorganized restart flags, added flag for performing mpr
507	! Kumar R., Rakovec O.     Sep 2014  - added KGE estimator (OF number 9)
508	! Matthias Zink,           Nov 2014  - added multiple options for process 5 - PET
509	! Matthias Zink,           Dec 2014  - adopted inflow gauges to ignore headwater cells
510	! Matthias Zink,           Mar 2015  - added optional soil mositure read in for calibration
511	! Stephan Thober,          Nov 2016  - added adaptive timestep scheme for routing
512	! Rohini  Kumar,           Dec 2017  - added LAI option to read long term mean monthly fields
513	! Zink M. Demirel M.C.,    Mar 2017  - added Jarvis soil water stress function at SM process(3)=2
514	! Demirel M.C., Stisen S., May 2017  - added FC dependency on root fraction coef. at SM process(3)=3
515	! Demirel M.C., Stisen S., Jun 2017  - added PET correction based on LAI at PET process(5)=-1
516	! O. Rakovec, R. Kumar     Nov 2017  - added project description for the netcdf outputs
517	! Robert Schweppe          Apr 2018  - reorganized namelists depending on relation to processes (MPR, mHM, mRM)
518	! S. Thober, B. Guse       May 2018  - added weighted NSE
519	! Lennart Schueler         May 2018  - added new paths for bankfull discharge for gw coupling
520	! Lennart Schueler         Jun 2018  - added flag for writing river head output
521	! Stephan Thober           May 2019  - added adaptive timestep scheme for routing with varying celerity
522	! Demirel M.C., Stisen S., Jun 2020  - added Feddes and global FC dependency on root fraction coef. at SM process(3)=4
523	
524	!******************************************************************************************
525	! PROJECT DESCRIPTION (mandatory)
526	!******************************************************************************************
527	!-----------------------------------------------------------------------------
528	!> Provide details on the model simulations, to appear in the netcdf output attributes
529	!-----------------------------------------------------------------------------
530	&project_description
531	!> project name
532	project_details="mHM Levatnte run 2005"
533	!> any specific description of simulation
534	setup_description="global model run - 5 days data"
535	!> e.g. hindcast simulation, seasonal forecast, climate projection
536	simulation_type="historical simulation"
537	!> convention used for dataset
538	Conventions="XXX"
539	!> contact details, incl. PI name, modellers
540	contact="mHM developers (email:mhm-developers@ufz.de)"
541	!> developing institution, specific mHM revision, latest release version (automatically included)
542	mHM_details="Helmholtz Center for Environmental Research - UFZ, Department Computational Hydrosystems, Stochastic Hydrology Group"
543	!> some details on data/model run version (creation date is included automatically)
544	history="model run version 1"
545	/
546	
547	!******************************************************************************************
548	!
549	!******************************************************************************************
550	! MAIN (mandatory)
551	!******************************************************************************************
552	!> Main namelist
553	!> Most of the variables (if not all) given in this namelist are common
554	!> to all domains to be modeled.
555	&mainconfig
556	!-----------------------------------------------------------------------------
557	!> input data & model run cordinate system
558	!> 0 -> regular   X & Y   coordinate system (e.g., GK-4 or Lambert equal area system)
559	!> 1 -> regular lat & lon coordinate system
560	!-----------------------------------------------------------------------------
561	iFlag_cordinate_sys = 1
562	!-----------------------------------------------------------------------------
563	!> Number of domains to be modeled.
564	!> Number given here should correspond to one given in "gaugeinfo.txt" file.
565	!> All gauging stations within those domains will be taken for the optimization.
566	!> IF routing process is ON then give nDomains = 1, for this case, mHM will internally
567	!> discard gauging station information.
568	!-----------------------------------------------------------------------------
569	nDomains             = 1
570	!-----------------------------------------------------------------------------
571	!> resolution of Level-1 hydrological simulations in mHM [m or degree] per domain
572	!> NOTE: if iFlag_cordinate_sys = 0, then resolution_Hydrology is in [m]
573	!>       if iFlag_cordinate_sys = 1, then resolution_Hydrology is in [degree-decimal]
574	!-----------------------------------------------------------------------------
575	resolution_Hydrology(1) = 0.1
576	!----------------------------------------------------------------------------
577	!> specify same index for domains to share L0_data to save memory
578	!> the index must MONOTONICALLY increase. Index can be repeated. e.g., 1,1,2,2,3
579	!> but not 1,2,1. The correct way should be: 1,1,2.
580	!-----------------------------------------------------------------------------
581	L0Domain(1) = 1
582	!-----------------------------------------------------------------------------
583	!> flag for writing restart output
584	!-----------------------------------------------------------------------------
585	write_restart = .TRUE.
586	!-----------------------------------------------------------------------------
587	!> read domain specific optional data
588	!-----------------------------------------------------------------------------
589	!> (0) default: the program decides. If you are confused, choose 0
590	!> (1) runoff
591	!> (2) sm
592	!> (3) tws
593	!> (4) neutons
594	!> (5) et
595	!> (6) et & tws
596	read_opt_domain_data(1) = 0
597	/
598	
599	!******************************************************************************************
600	! main config for mHM and mRM (mHM and mRM-related)
601	!******************************************************************************************
602	&mainconfig_mhm_mrm
603	!-----------------------------------------------------------------------------
604	! DIRECTORIES
605	!-----------------------------------------------------------------------------
606	!> Number in brackets indicates domain number.
607	!> directory where restart input is located
608	mhm_file_RestartIn(1)     = "input/restart/mHM_restart_001.nc"
609	mrm_file_RestartIn(1)     = "input/restart/mRM_restart_001.nc"
610	!-----------------------------------------------------------------------------
611	!> resolution of Level-11 discharge routing [m or degree] per domain
612	!> this  level-11 discharge routing resolution must be >= and multiple of the
613	!> level-1 hydrological simulations resolution
614	!> NOTE: if iFlag_cordinate_sys = 0, then resolution_Routing is in [m]
615	!>       if iFlag_cordinate_sys = 1, then resolution_Routing is in [degree-decimal]
616	!-----------------------------------------------------------------------------
617	resolution_Routing(1) = 0.1
618	!-----------------------------------------------------------------------------
619	!> model run timestep [h] either 1 or 24
620	!-----------------------------------------------------------------------------
621	timestep = 1
622	!-----------------------------------------------------------------------------
623	!> flags for reading restart output
624	!> mrm_read_river_network is an optional flag
625	!> mrm_read_river_network = .True. allows to read the river network for mRM
626	!> read_restart = .True. forces mrm_read_river_network = .True.
627	!> read_old_style_restart_bounds = .True. if you want to use an old-style restart file created by mhm<=v5.11
628	!-----------------------------------------------------------------------------
629	read_restart  = .True.
630	mrm_read_river_network = .False.
631	read_old_style_restart_bounds = .False.
632	!----------------------------------------------------------------------------
633	!> flag for optimization: .TRUE.: optimization
634	!>                    or .FALSE.: no optimazition
635	!-----------------------------------------------------------------------------
636	optimize = .FALSE.
637	!> Optimization shall be restarted from ./mo_<opti_method>.restart file, which
638	!> should be located next to the mhm executable (mhm)
639	optimize_restart = .FALSE.
640	!> (0) MCMC                (requires single-objective (SO) function)
641	!> (1) DDS                 (requires single-objective (SO) function)
642	!> (2) Simulated Annealing (requires single-objective (SO) function)
643	!> (3) SCE                 (requires single-objective (SO) function)
644	!> additional settings for the different methods can be provided below in namelist Optimization
645	opti_method = 1
646	!> (1)  SO: Q:   1.0 - NSE
647	!> (2)  SO: Q:   1.0 - lnNSE
648	!> (3)  SO: Q:   1.0 - 0.5*(NSE+lnNSE)
649	!> (4)  SO: Q:  -1.0 * loglikelihood with trend removed from absolute errors and then lag(1)-autocorrelation removed
650	!> (5)  SO: Q:   ((1-NSE)**6+(1-lnNSE)**6)**(1/6)
651	!> (6)  SO: Q:   SSE
652	!> (7)  SO: Q:  -1.0 * loglikelihood with trend removed from absolute errors
653	!> (8)  SO: Q:  -1.0 * loglikelihood with trend removed from the relative errors and then lag(1)-autocorrelation removed
654	!> (9)  SO: Q:  1.0 - KGE (Kling-Gupta efficiency measure)
655	!> (10) SO: SM: 1.0 - KGE of catchment average soilmoisture
656	!> (11) SO: SM: 1.0 - Pattern dissimilarity (PD) of spatially distributed soil moisture
657	!> (12) SO: SM: Sum of squared errors (SSE) of spatially distributed standard score (normalization) of soil moisture
658	!> (13) SO: SM: 1.0 - average temporal correlation of spatially distributed soil moisture
659	!> (14) SO: Q:  sum[((1.0-KGE_i)/ nGauges)**6]**(1/6) > combination of KGE of every gauging station based on a power-6 norm
660	!> (15) SO: Q + domain_avg_TWS: [1.0-KGE(Q)]*RMSE(domain_avg_TWS) - objective function using Q and domain average (standard score) TWS
661	!> (16) (reserved) please use the next number when implementing a new one
662	!>      MO: Q:  1st objective: (1) = 1.0 - NSE
663	!>          Q:  2nd objective: (2) = 1.0 - lnNSE
664	!> (17) SO: N:  1.0 - KGE of spatio-temporal neutron data, catchment-average
665	!> (18) (reserved) please use the next number when implementing a new one
666	!>      MO: Q:  1st objective: 1.0 - lnNSE(Q_highflow)  (95% percentile)
667	!>          Q:  2nd objective: 1.0 - lnNSE(Q_lowflow)   (5% of data range)
668	!> (19) (reserved) please use the next number when implementing a new one
669	!>      MO: Q:  1st objective: 1.0 - lnNSE(Q_highflow)  (non-low flow)
670	!>          Q:  2nd objective: 1.0 - lnNSE(Q_lowflow)   (5% of data range)
671	!> (20) (reserved) please use the next number when implementing a new one
672	!>      MO: Q:  1st objective: absolute difference in FDC's low-segment volume
673	!>          Q:  2nd objective: 1.0 - NSE of discharge of months DJF
674	!> (21) (reserved) please use the next number when implementing a new one
675	!>      SO: Q:  ( (1.0-lnNSE(Q_highflow))**6 + (1.0-lnNSE(Q_lowflow))**6 )**(1/6)
676	!>              where Q_highflow and Q_lowflow are calculated like in objective (19)
677	!> (22-26) (reserved MC/JM/ST) please use the next number when implementing a new one
678	!> (27) SO: ET: 1.0 - KGE of catchment average evapotranspiration
679	!> (28) SO: Q + SM: weighted OF using SM (OF12) and Q (OF14) equally weighted
680	!> further functions can be implemented in mo_objective_function and mo_mrm_objective_function
681	!> (29) SO: Q + ET: weighted OF using ET (OF27) and Q (OF14) equally weighted
682	!> (30) SO: Q + domain_avg_ET: [1.0-KGE(Q)]*RMSE(domain_avg_ET) - objective function using Q and domain average ET (standard score)$
683	!> (31) SO: Q: 1  - weighted NSE (NSE is weighted with observed discharge)
684	!> (32) SO: objective_sse_boxcox
685	!> (33) MO: objective_q_et_tws_kge_catchment_avg
686	!> (34) SO: Q: (1 + |BFI_o - BFI_s|)(1 - KGE)
687	!>             BFI_s = mean_t(<q_2>) / mean_t(<q_total>)
688	!>             BFI_o = given in separate namelist per domain
689	!>             <.> is a spatial average
690	
691	!> further functions can be implemented in mo_objective_function and mo_mrm_objective_function
692	opti_function = 10
693	/
694	
695	!******************************************************************************************
696	! main config for mRM (mRM-related)
697	!******************************************************************************************
698	&mainconfig_mrm
699	!-----------------------------------------------------------------------------
700	!> use ALMA convention for input and output variables
701	!> see http://www.lmd.jussieu.fr/~polcher/ALMA/convention_3.html
702	!> .False. -> default mHM units
703	!> .True.  -> ALMA convention
704	!> CAUTION: at the moment, only Qall as input for mRM is affected
705	!-----------------------------------------------------------------------------
706	ALMA_convention = .TRUE.
707	!-----------------------------------------------------------------------------
708	!> for using mRM as the routing module for input other than from mHM
709	!> additional specifications for filename and netCDF variable can be made
710	!> default behaviour:
711	!> none given: get variable 'total_runoff' from file 'total_runoff.nc'
712	!> varnametotalrunoff given: get variable '${varnametotalrunoff}' from file '${varnametotalrunoff}.nc'
713	!> filenametotalrunoff given: get variable 'total_runoff' from file '${filenametotalrunoff}.nc'
714	!> both given: get variable '${varnametotalrunoff}' from file '${filenametotalrunoff}.nc'
715	!-----------------------------------------------------------------------------
716	varnametotalrunoff = 'total_runoff'
717	filenametotalrunoff = 'total_runoff'
718	!> couple mRM to a groundwater model
719	gw_coupling = .false.
720	/
721	
722	!******************************************************************************************
723	! main config for river temperature routing
724	!******************************************************************************************
725	&config_riv_temp
726	!-----------------------------------------------------------------------------
727	!> calculate river temperature
728	!-----------------------------------------------------------------------------
729	!> albedo of open water (0.15 for tilt angle between 10 and 20 degrees -> Wanders et.al. 2019)
730	albedo_water = 0.15
731	!> priestley taylor alpha parameter for PET on open water (1.26 -> Gordon Bonan 2015)
732	pt_a_water = 1.26
733	!> emissivity of water (0.96 -> Wanders et.al. 2019)
734	emissivity_water = 0.96
735	!> emissivity of water (20.0 -> Wanders et.al. 2019)
736	turb_heat_ex_coeff = 20.0
737	!> max number of iterations for resulting river temperature
738	max_iter = 50
739	!> convergence criteria for interative solver for resulting river temperature
740	!> given as difference for iteratively estimated temperature in K
741	delta_iter = 1.0e-02
742	!> maximal step allowed in iteration in K
743	step_iter = 5.0
744	!> file name for river widths
745	riv_widths_file = 'Q_bkfl'
746	!> variable name for river widths
747	riv_widths_name = 'P_bkfl'
748	!> directory where river widths can be found (only for river temperature routing)
749	dir_riv_widths(1) = 'test_domain/input/optional_data/'
750	dir_riv_widths(2) = 'test_domain_2/input/optional_data/'
751	/
752	
753	!******************************************************************************************
754	! DIRECTORIES
755	!******************************************************************************************
756	!> Namelist with all directories for common file as well as separate file for every domain.
757	!> Number in brackets indicates domain number.
758	!> This number HAS TO correspond with the number of domain given in the "mainconfig"
759	!> namelist as well as the indices given in "evaluation_gauges" namelist.
760	!******************************************************************************************
761	! directories (mandatory)
762	!******************************************************************************************
763	&directories_general
764	!> all directories are common to all domains
765	!> config run out file common to all modeled domains should be written to directory
766	dirConfigOut = "output/"
767	!
768	!> directory where common input files should be located for all modeled domains
769	!> (only for *_classdefinition files)
770	dirCommonFiles = "test_domain/input/morph_test/"
771	!
772	!**** for Domain 1
773	!> directory where morphological files are located
774	dir_Morpho(1)        = "test_domain/input/morph_test/"
775	!> directory where land cover files are located
776	dir_LCover(1)        = "test_domain/input/luse/"
777	!> directory where restart output should be written
778	mhm_file_RestartOut(1)    = "output/mHM_restart_001.nc"
779	mrm_file_RestartOut(1)    = "output/mRM_restart_001.nc"
780	!> directory where output should be written
781	dir_Out(1)           = "output/"
782	!> file containing latitude and longitude on the resolution_Hydrology
783	file_LatLon(1)       = "input/latlon_1.nc"
784	/
785	!******************************************************************************************
786	! directories (mHM-related)
787	!******************************************************************************************
788	&directories_mHM
789	!
790	!> input format specification for the meteorological forcings: 'nc' only possible
791	!> this format is common to all domains to be modeled
792	inputFormat_meteo_forcings = "nc"
793	bound_error = .FALSE.
794	!
795	!-----------------------------------------------------
796	!> domain wise directory paths
797	!-----------------------------------------------------
798	!
799	!**** for Domain 1
800	!> directory where meteorological input is located
801	dir_Precipitation(1) = "input/meteo/"
802	dir_Temperature(1)   = "input/meteo/"
803	!> paths depending on PET process (processCase(5))
804	!>  -1 - PET is input, LAI driven correction
805	!>   0 - PET is input, aspect driven correction
806	!>   1 - Hargreaves-Sammani method
807	!>   2 - Priestley-Taylor mehtod
808	!>   3 - Penman-Monteith method
809	!> if processCase(5) == 0  input directory of pet has to be specified
810	dir_ReferenceET(1)     = "input/meteo/"
811	!> if processCase(5) == 1  input directory of minimum and maximum temperature has to be specified
812	dir_MinTemperature(1)  = "test_domain/input/meteo/"
813	dir_MaxTemperature(1)  = "test_domain/input/meteo/"
814	!> if processCase(5) == 2  input directory of net-radiation has to be specified
815	dir_NetRadiation(1)    = "test_domain/input/meteo/"
816	!> if processCase(5) == 3  input directory of absolute vapour pressure (eabs) and windspeed has to be specified
817	dir_absVapPressure(1)  = "test_domain/input/meteo/"
818	dir_windspeed(1)       = "test_domain/input/meteo/"
819	!> if processCase(11) == 1  input directory of (long/short-wave)radiation has to be specified
820	dir_Radiation(1)    = "test_domain/input/meteo/"
821	!
822	!> switch to control read input frequency of the gridded meteo input,
823	!> i.e. precipitation, potential evapotransiration, and temperature
824	!>      >0: after each <timeStep_model_inputs> days
825	!>       0: only at beginning of the run
826	!>      -1: daily
827	!>      -2: monthly
828	!>      -3: yearly
829	!> if timestep_model_inputs is non-zero, than it has to be non-zero
830	!> for all domains
831	time_step_model_inputs(1) = 0
832	/
833	!******************************************************************************************
834	! directories (mRM-related)
835	!******************************************************************************************
836	&directories_mRM
837	!
838	!-----------------------------------------------------
839	!> domain wise directory paths
840	!-----------------------------------------------------
841	!
842	!> directory where discharge files are located
843	dir_Gauges(1)        = "test_domain/input/gauge/"
844	dir_Gauges(2)        = "test_domain_2/input/gauge/"
845	!> directory where simulated runoff can be found (only required if coupling mode equals 0)
846	dir_Total_Runoff(1) = 'test_domain/output_b1/'
847	dir_Total_Runoff(2) = 'test_domain_2/output/'
848	!> directory where runoff at bankfull conditions can be found (only for coupling to groundwater model)
849	dir_Bankfull_Runoff(1) = 'test_domain/input/optional_data/'
850	dir_Bankfull_Runoff(2) = 'test_domain_2/input/optional_data/'
851	/
852	
853	!******************************************************************************************
854	! Optional input (mHM-related)
855	!******************************************************************************************
856	!> data which are optionally needed for optimization
857	&optional_data
858	!> soil moisture data
859	!> currently mhm can be calibrated against the fraction of moisture
860	!> down to a specific mhm soil layer (integral over the layers)
861	!> here soil moisture is defined as fraction between water content within the
862	!> soil column and saturated water content (porosity).
863	!
864	!> directory to soil moisture data
865	! expected file name: sm.nc, expected variable name: sm
866	dir_soil_moisture(1)   = "test_domain/input/optional_data/"
867	!> number of mHM soil layers (nSoilHorizons_mHM) which the soil moisture
868	!> input is representative for (counted top to down)
869	nSoilHorizons_sm_input = 1
870	!> time stepping of the soil moisture input
871	!>     -1: daily   SM values
872	!>     -2: monthly SM values
873	!>     -3: yearly  SM values
874	!-----------------------------
875	timeStep_sm_input = -2
876	!
877	!> directory to neutron data
878	! expected file name: neutrons.nc, expected variable name: neutrons
879	dir_neutrons(1)        = "test_domain/input/optional_data/"
880	
881	!> evapotranspiration data
882	!
883	!> directory to evapotranspiration data
884	! expected file name: et.nc, expected variable name: et
885	dir_evapotranspiration(1)   = "test_domain/input/optional_data/"
886	
887	!> time stepping of the et input
888	!>     -1: daily   ET values
889	!>     -2: monthly ET values
890	!>     -3: yearly  ET values
891	!-----------------------------
892	timeStep_et_input = -2
893	
894	!> domain average total water storage (tws)
895	!> file name including path with timeseries of GRACE-based data
896	! expected file name: twsa.nc, expected variable name: twsa
897	dir_tws(1)   = "test_domain/input/optional_data/"
898	
899	!> time stepping of the tws input
900	!>     -1: daily   TWS values
901	!>     -2: monthly TWS values
902	!>     -3: yearly  TWS values
903	!-----------------------------
904	timeStep_tws_input = -2
905	/
906	
907	!******************************************************************************************
908	! PROCESSES (mandatory)
909	!******************************************************************************************
910	!> This matrix manages which processes and process descriptions are used for simulation.
911	!> The number of processes and its corresponding numbering are fixed. The process description can be
912	!> chosen from the options listed above the name of the particular process case. This number has to be
913	!> given for processCase(*).
914	!
915	&processSelection
916	!> interception
917	!> 1 - maximum Interception
918	processCase(1) = 1
919	!> snow
920	!> 1 - degree-day approach
921	processCase(2) = 1
922	!> soil moisture
923	!> 1 - Feddes equation for ET reduction, multi-layer infiltration capacity approach, Brooks-Corey like
924	!> 2 - Jarvis equation for ET reduction, multi-layer infiltration capacity approach, Brooks-Corey like
925	!> 3 - Jarvis equation for ET reduction and global FC dependency on root fraction coefficient
926	!> 4 - Feddes equation for ET reduction and global FC dependency on root fraction coefficient
927	processCase(3) = 1
928	!> directRunoff
929	!> 1 - linear reservoir exceedance approach
930	processCase(4) = 1
931	!> potential evapotranspiration (PET)
932	!>  -1 - PET is input, LAI driven correction
933	!>   0 - PET is input, aspect driven correction
934	!>   1 - Hargreaves-Sammani method
935	!>   2 - Priestley-Taylor mehtod
936	!>   3 - Penman-Monteith method
937	processCase(5) = 0
938	!> interflow
939	!> 1 - storage reservoir with one outflow threshold and nonlinear response
940	processCase(6) = 1
941	!> percolation
942	!> 1 - GW  assumed as linear reservoir
943	processCase(7) = 1
944	!> routing
945	!> 0 - deactivated
946	!> 1 - Muskingum approach
947	!> 2 - adaptive timestep, constant celerity
948	!> 3 - adaptive timestep, spatially varying celerity
949	processCase(8) = 0
950	!> baseflow
951	!> 1 - recession parameters (not regionalized yet)
952	processCase(9) = 1
953	!> ground albedo of cosmic-ray neutrons
954	!> THIS IS WORK IN PROGRESS, DO NOT USE FOR RESEARCH
955	!> 0 - deactivated
956	!> 1 - inverse N0 based on Desilets et al. 2010
957	!> 2 - COSMIC forward operator by Shuttleworth et al. 2013
958	processCase(10) = 0
959	!> river temperature routing (needs routing)
960	!> 0 - deactivated
961	!> 1 - following: Beek et al., 2012
962	processCase(11) = 0
963	/
964	
965	!******************************************************************************************
966	! LAND COVER (mandatory)
967	!******************************************************************************************
968	&LCover
969	!> Variables given in this namelist are common to all domains to be modeled.
970	!> Please make sure that the land cover periods are covering the simulation period.
971	!> number of land cover scenes to be used
972	!> The land cover scene periods are shared by all catchments.
973	!> The names should be equal for all domains. The land cover scnes have to be ordered
974	!> chronologically
975	  nLCoverScene = 1
976	  LCoverYearStart(1) = 1900
977	  LCoverYearEnd(1)   = 2098
978	  LCoverfName(1)     = 'lc.asc' ! doesn't matter
979	/
980	
981	!******************************************************************************************
982	! Time periods (mHM and mRM-related)
983	!******************************************************************************************
984	&time_periods
985	!-----------------------------------------------------------------------------
986	!> specification of number of warming days [d] and the simulation period.
987	!> All dynamic data sets(e.g., meteo. forcings, landcover scenes) should start
988	!> from warming days and ends at the last day of the evaluation period.
989	!
990	!>     1---------2-------------------3
991	!>
992	!>     1-> Starting of the effective modeling period (including the warming days)
993	!>     2-> Starting of the given simulation period
994	!>     3-> Ending   of the given simulation period   (= end of the effective modeling period)
995	!
996	!> IF you want to run the model from 2002/01/01 (Starting of the given simulation
997	!>    period=2) to 2003/12/31 (End of the given simulation period=3) with 365 warming
998	!>    day, which is 2001/01/01 = 1), THEN all dynamic datasets should be given for
999	!>    the effective modeling period of 2001/01/01 to 2003/12/31.
1000	!-----------------------------------------------------------------------------
1001	warming_Days(1)    = 0
1002	!> first year of wanted simulation period
1003	eval_Per(1)%yStart = 1992
1004	!> first month of wanted simulation period
1005	eval_Per(1)%mStart = 01
1006	!> first day   of wanted simulation period
1007	eval_Per(1)%dStart = 01
1008	!> last year   of wanted simulation period
1009	eval_Per(1)%yEnd   = 1991
1010	!> last month  of wanted simulation period
1011	eval_Per(1)%mEnd   = 01
1012	!> last day    of wanted simulation period
1013	eval_Per(1)%dEnd   = 31
1014	/
1015	
1016	!******************************************************************************************
1017	! INPUT SOIL DATABASE AND mHM LAYERING (MPR-related)
1018	!******************************************************************************************
1019	!> Namelist controlling the layer information of the soil database
1020	!> Variables given in this namelist are common to all domains to be modeled.
1021	&soildata
1022	!----------------------------------------------------------------------------------------------------------
1023	!> iFlag_soilDB:
1024	!>            flag to handle multiple types of soil databases and their processing within the mHM.
1025	!>            This flag is unique and valid for all domains.
1026	!>            Depending on the choice of this flag you need to process your soil database differently.
1027	!
1028	!> iFlag_soilDB = 0:
1029	!>            Read and process the soil database in a classical mHM format which requires:
1030	!>               i) a single gridded ASCII file of soil-id (soil_class.asc - hard coded file name)
1031	!>              ii) a single soil look-up-table file (soil_classdefinition.txt) with information of
1032	!>                  soil textural properties for every horizon.
1033	!
1034	!>            Here mHM is quite flexible to handle multiple soil layers as specified in "nSoilHorizons_mHM"
1035	!>            and depths provided in "soil_Depth(:)".
1036	!
1037	!>            The tillage depth is flexible in this case.
1038	!
1039	!>            The depth of last mHM modeling layer is determined according the information given in the
1040	!>            input soil database, which could vary spatially depending on the soil type. Therefore the
1041	!>            user should not provide the depth of the last modeling layer. For example if you choose
1042	!>            nSoilHorizons_mHM = 3, then soil_Depth should be given for only soil_Depth(1) and soil_Depth(2).
1043	!>            Any additional depth related information would be discarded
1044	!
1045	!> iFlag_soilDB = 1:
1046	!>            Handle the harmonised horizon specific soil information, requires
1047	!>               i) multiple (horizon specific) gridded ASCII files containing info of soil-ids.
1048	!>                 (e.g., soil_class_horizon001.asc, soil_class_horizon002.asc, ....)
1049	!>                 File names are automatically generated within mHM as per the given soil_Depth(:).
1050	!>                 The format follows the FORTRAN coding style: "soil_class_horizon_"XX".asc"
1051	!>                 where XX represents the horizon id with 2 spaces allocated for this number
1052	!>                 and the empty spaces are (trailed) filled with Zeros. FORTRAN CODE I2.2
1053	!>                 The horizon is numbered sequentially from top to bottom soil layers.
1054	!>                 E.g., for 1st horizon it is soil_class_horizon_01.asc,
1055	!>                 for 2nd it is soil_class_horizon_02.asc, ... and so on.
1056	!
1057	!>              ii) a single soil look-up-table file with information of soil textural properties for each soil type.
1058	!>                  Note that there should be no horizon specific information in this LUT file
1059	!>                  (soil_classdefinition_iFlag_soilDB_1.txt - filename is hard coded).
1060	!
1061	!>            The modeling soil horizons is as per the input data (i.e. for which the gridded ASCII files are available).
1062	!
1063	!>            The depth of the last mHM horizon should be specified. It is fixed and uniform across the entire modeling domain.
1064	!
1065	!>            The tillage depth should conform with one of the horizon (lower) layer depths.
1066	!
1067	!>            There is an overhead cost of reading and storing multiple (horizon specific) gridded ASCII files
1068	!
1069	!> Note: For both cases: The present model code mHM can handle maximum of 10 soil horizons (hard coded).
1070	!>        To increase this number, edit the variable "maxNoSoilHorizons" in the "/src/mhm/mo_mhm_constants.f90" file
1071	!
1072	!----------------------------------------------------------------------------------------------------------
1073	iFlag_soilDB = 1
1074	!
1075	!> [mm] soil depth down to which organic matter is possible
1076	tillageDepth =300.00
1077	!
1078	!> No. of soil horizons to be modeled
1079	nSoilHorizons_mHM = 3
1080	!
1081	! soil depth information
1082	!> IF (iFlag_soilDB = 0)
1083	!>    Provide below the soil_Depth() for 1,2,..,*n-1* soil horizons. Depth of the last layer(n) is taken from the soil LUT
1084	!> IF (iFlag_soilDB = 1)
1085	!>    Provide below the soil_Depth() for every 1,2..n-1,*n* soil horizons. You must have soil_class-id gridded file for each layer
1086	!>    Also check your tillage layer depth. It should conform with one of the below specified soil_Depth.
1087	!
1088	!> Soil_Horizon   Depth[mm]      ! bottom depth of soil horizons w.r.t. ground surface (positive downwards)
1089	soil_Depth(1) = 300.00
1090	soil_Depth(2) = 1000.00
1091	soil_Depth(3) = 2000.00
1092	/
1093	
1094	!******************************************************************************************
1095	! INFORMATION RELATED TO LAI DATA (MPR-related)
1096	!******************************************************************************************
1097	&LAI_data_information
1098	!
1099	!-----------------------------------------------------------------------------------
1100	!> Flag timeStep_LAI_input identifies how LAI is read in mHM.
1101	!> This flag is unique and valid for all domains.
1102	!
1103	!> timeStep_LAI_input
1104	!>
1105	!>  0: read LAI from long term monthly mean lookup table (related to land cover file).
1106	!>     The filename (LAI_classdefinition.txt) for the LUT is hard coded in mo_file.f90
1107	!>         Information regarding long-term monthly mean LAI for land cover classes
1108	!>         appearing in all modeled domains should be included in this LUT file.
1109	!>         This is an unique file applicable to all domains to be modeled.
1110	!>     The respective plant functional type is in LAI_class.asc, which must be also given
1111	!>         and should be located in each domain's morph directory.
1112	!>
1113	!>  < 0: Read gridded LAI files.
1114	!>     -1: gridded LAI are daily values
1115	!>     -2: gridded LAI are monthly values
1116	!>     -3: gridded LAI are yearly values
1117	!
1118	!>  1: read mean monthly gridded LAI values.
1119	!>     must be a separate *.nc file for every (modeled) domains.
1120	!-----------------------------------------------------------------------------------
1121	timeStep_LAI_input = 0
1122	!> input file format of gridded file (if timeStep_LAI_input < 0)
1123	!>     nc  - assume one file with name lai.nc
1124	!> input file format of gridded file (if timeStep_LAI_input == 1)
1125	!>     nc  - assume one file with name lai.nc with 12 monthly grids of mean LAI estimates
1126	inputFormat_gridded_LAI = "nc"
1127	/
1128	
1129	!
1130	!******************************************************************************************
1131	! LCover information (MPR-related)
1132	!******************************************************************************************
1133	&LCover_MPR
1134	!>fraction of area within city assumed to be fully sealed [0.0-1.0]
1135	fracSealed_cityArea = 0.6
1136	/
1137	
1138	!******************************************************************************************
1139	! LAI gridded time series folder definition (optional, MPR-related)
1140	!******************************************************************************************
1141	! this is only needed for timeStep_LAI_input != 0
1142	&directories_MPR
1143	!> directory where gridded LAI files are located
1144	dir_gridded_LAI(1)   = "test_domain/input/lai/"
1145	!> directory where gridded LAI files are located
1146	dir_gridded_LAI(2)   = "test_domain/input/lai/"
1147	/
1148	
1149	!******************************************************************************************
1150	! Specifcation of evaluation and inflow gauges (mRM-related)
1151	!******************************************************************************************
1152	!> namelist controlling the gauging station information
1153	!> The ID has to correspond to the ID's given in the 'gaugelocation.asc' and
1154	!> to the filename containing the time series
1155	&evaluation_gauges
1156	!> Gauges for model evaluation
1157	!
1158	!> Total number of gauges (sum of all gauges in all subbains)
1159	nGaugesTotal = 2
1160	!> structure of gauge_id(i,j) & gauge_filename(i,j):
1161	!> 1st dimension is the number of the subdomain i
1162	!> 2nd dimension is the number of the gauge j within the subdomain i
1163	!> numbering has to be consecutive
1164	!
1165	!> domain 1
1166	!> number of gauges for subdomain (1)
1167	NoGauges_domain(1)   = 1
1168	!> in subdomain(1), this is the id of gauge(1)  --> (1,1)
1169	Gauge_id(1,1)       = 398
1170	!> name of file with timeseries for subdomain(1) at gauge(1) --> (1,1)
1171	gauge_filename(1,1) = "00398.txt"
1172	!
1173	!> domain 2
1174	!> number of gauges for subdomain (2)
1175	NoGauges_domain(2)       = 1
1176	!> in subdomain(2), this is the id of gauge(1) --> (2,1)
1177	Gauge_id(2,1)           = 45
1178	!> name of file with timeseries for subdomain(2) at gauge(1) --> (2,1)
1179	Gauge_filename(2,1)     = "45.txt"
1180	/
1181	
1182	&inflow_gauges
1183	!> Gauges / gridpoints used for inflow to the model domain
1184	!> e.g. in the case of upstream/headwater areas which are
1185	!>      not included in the model domain
1186	!
1187	!> Total number of inflow gauges (sum of all gauges in all subdomains)
1188	nInflowGaugesTotal = 0
1189	!> structure of gauge_id(i,j) & gauge_filename(i,j):
1190	!> 1st dimension is the number of the subdomain i
1191	!> 2nd dimension is the number of the gauge j within the subdomain i
1192	!> numbering has to be consecutive
1193	!
1194	!> domain 1
1195	!> number of gauges for subdomain (1)
1196	NoInflowGauges_domain(1)   = 0
1197	!> id of inflow gauge(1) for subdomain(1) --> (1,1)
1198	InflowGauge_id(1,1)       = -9
1199	!> name of file with timeseries of inflow gauge(1) for subdomain(1) --> (1,1)
1200	InflowGauge_filename(1,1) = ""
1201	!> consider flows from upstream/headwater cells of inflow gauge(1) for subdomain(1) --> (1,1)
1202	InflowGauge_Headwater(1,1) = .FALSE.
1203	/
1204	
1205	!******************************************************************************************
1206	! ANNUAL CYCLE PAN EVAPORATION (mHM-related)
1207	!******************************************************************************************
1208	&panEvapo
1209	! MONTH       Jan     Feb     Mar     Apr    May    Jun    Jul    Aug    Sep    Oct    Nov    Dec
1210	!> monthly free pan evaporation
1211	evap_coeff =  1.30,   1.20,   0.72,   0.75,  1.00,  1.00,  1.00,  1.00,  1.00,  1.00,  1.00,  1.50
1212	/
1213	
1214	!******************************************************************************************
1215	! ANNUAL CYCLE METEOROLOGICAL FORCINGS (mHM-related)
1216	!******************************************************************************************
1217	&nightDayRatio
1218	!> Alternatively to night day ratios, explicit weights for pet and average temperature can
1219	!> be read. The dimension for the weights are in FORTRAN-notation (rows, colums, months=12, hours=24)
1220	!> and in C-notation (hours=24, months=12, colums, rows).
1221	!> The array for temperature weights is called tavg_weight in the file: <dir_Temperature>/tavg_weight.nc
1222	!> The array for pet weights is called pet_weight in the file: <dir_ReferenceET>/pet_weight.nc
1223	!> The array for precipitation weights is called pet_weight in the file: <dir_Precipitation>/pre_weight.nc
1224	!> If read_meteo_weights is False than night fractions below are used
1225	read_meteo_weights = .FALSE.
1226	!> night ratio for precipitation
1227	!> only night values required because day values are the opposite
1228	fnight_prec  =  0.46,   0.50,   0.52,   0.51,  0.48,  0.50,  0.49,  0.48,  0.52,  0.56,  0.50,  0.47
1229	!> night ratio for PET
1230	fnight_pet   =  0.10,   0.10,   0.10,   0.10,  0.10,  0.10,  0.10,  0.10,  0.10,  0.10,  0.10,  0.10
1231	!> night correction factor for temperature
1232	fnight_temp  = -0.76,  -1.30,  -1.88,  -2.38, -2.72, -2.75, -2.74, -3.04, -2.44, -1.60, -0.94, -0.53
1233	!> night ratio for ssrd (shortwave rad. for river temperature)
1234	fnight_ssrd   =  0.0,   0.0,   0.0,   0.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0,  0.0
1235	!> night ratio for strd (longwave rad. for river temperature)
1236	fnight_strd   =  0.45,   0.45,   0.45,   0.45,  0.45,  0.45,  0.45,  0.45,  0.45,  0.45,  0.45,  0.45
1237	/
1238	
1239	!******************************************************************************************
1240	! SETTINGS FOR OPTIMIZATION (mHM and mRM-related)
1241	!******************************************************************************************
1242	&Optimization
1243	!  -------------------------------------
1244	!> General:
1245	!  -------------------------------------
1246	!> number of iteration steps by parameterset
1247	nIterations = 7
1248	!> seed of random number gemerator (default: -9)
1249	!> if default: seed is obtained from system clock
1250	seed = 1235876
1251	!  -------------------------------------
1252	!> DDS specific:
1253	!  -------------------------------------
1254	!> perturbation rate r (default: 0.2)
1255	dds_r = 0.2
1256	!  -------------------------------------
1257	!> SA specific:
1258	!  -------------------------------------
1259	!> Initial Temperature (default: -9.0)
1260	!> if default: temperature is determined by algorithm of Ben-Ameur (2004)
1261	sa_temp = -9.0
1262	!  -------------------------------------
1263	!> SCE specific:
1264	!  -------------------------------------
1265	!> Number of Complexes (default: -9)
1266	!> if default: ngs = 2
1267	sce_ngs = 2
1268	!> Points per Complex (default: -9)
1269	!> if default: npg = 2n+1
1270	sce_npg = -9
1271	!> Points per Sub-Complex (default: -9)
1272	!> if default: nps = n+1
1273	sce_nps = -9
1274	!  -------------------------------------
1275	!> MCMC specific:
1276	!  -------------------------------------
1277	!> .true.:  use MCMC for optimisation and estimation of parameter uncertainty
1278	!> .false.: use MCMC for estimation of parameter uncertainty
1279	mcmc_opti = .false.
1280	!> Parameters of error model if mcmc_opti=.false.
1281	!> e.g. for opti_function=8: two parameters a and b: err = a + b*Q
1282	mcmc_error_params = 0.01, 0.6
1283	/
1284	
1285	!******************************************************************************************
1286	! SETTINGS FOR OPTIMIZATION for baseflow-index (opti_function = 34)
1287	!******************************************************************************************
1288	&baseflow_config
1289	!> Calculate BFI from discharge time series with the Eckhardt filter
1290	!> Eckhardt et al. (2008, doi: 10.1016/j.jhydrol.2008.01.005)
1291	!> This option **requires** one gauge per domain at the outlet of the basin.
1292	BFI_calc = .true.
1293	!> baseflow index per domain. Only needed if not calculated (BFI_calc = .false.)
1294	!> You can overwrite single BFI values to not calculate them internally (if BFI_calc = .true.).
1295	! BFI_obs(1) = 0.124
1296	! BFI_obs(2) = 0.256
1297	"""
1298	
1299	    # Write the template
1300	    with open(nml_path, "w") as f:

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mhm_setup.py:1301
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1300	    with open(nml_path, "w") as f:
1301	        f.write(template.lstrip())

--------------------------------------------------
>> Issue: [B810:chmod] os.chmod
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mrm.py:185
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b810_chmod.html
184	    run_script = os.path.join(current_mrm_dir, "run_parallel_mrm.sh")
185	    os.chmod(run_script, os.stat(run_script).st_mode | stat.S_IEXEC)
186	

--------------------------------------------------
>> Issue: [B315:blacklist] os.chmod
   Severity: Medium   Confidence: High
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mrm.py:185
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b313-b320-os-chmod
184	    run_script = os.path.join(current_mrm_dir, "run_parallel_mrm.sh")
185	    os.chmod(run_script, os.stat(run_script).st_mode | stat.S_IEXEC)
186	

--------------------------------------------------
>> Issue: [B839:pool] multiprocessing.Pool
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mrm_setup.py:60
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b839_pool.html
59	            startup += "{}\n".format(xx)
60	        pool = mp.Pool(processes=self.global_threads)
61	        pool.map(self.run_program, self.args_list)

--------------------------------------------------
>> Issue: [B323:blacklist] multiprocessing_Pool
   Severity: Medium   Confidence: High
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mrm_setup.py:60
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b323-multiprocessing-pool
59	            startup += "{}\n".format(xx)
60	        pool = mp.Pool(processes=self.global_threads)
61	        pool.map(self.run_program, self.args_list)

--------------------------------------------------
>> Issue: [B840:executor] concurrent.futures.Executor
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mrm_setup.py:154
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b840_executor.html
153	    # run all merges in parallel
154	    with ProcessPoolExecutor(max_workers=max_workers) as executor:
155	        futures = [executor.submit(mosaic_two_tiles, a, b, c) for a, b, c in jobs]

--------------------------------------------------
>> Issue: [B840:executor] concurrent.futures.Executor
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mrm_setup.py:183
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b840_executor.html
182	    # parallel initial merges
183	    with ProcessPoolExecutor(max_workers=max_workers) as executor:
184	        futures = [executor.submit(mosaic_two_tiles, a, b, c) for a, b, c in initial_jobs]

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/mrm_setup.py:428
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
427	    with open(script_path, "w") as f:
428	        f.write(f"""#!/bin/bash
429	subdomain_id=${{1?The subdomain ID must be specified}}
430	n_gauges=${{2?The number of gauges must be specified}}
431	grdc_fpaths="${{3-:XXX}}"
432	grdc_ids="${{4-:0}}"
433	
434	subdomain="subdomain_${{subdomain_id}}"
435	restartFile="{mrm_restart_dir}/${{subdomain}}/{ini_date}_mRM_restart.nc"
436	networkFile="{mrm_network_dir}/subdomain_river_network_${{subdomain_id}}.nc"
437	
438	    #  -- make workdir subdomains ----------------------
439	    mkdir -p {current_mrm_dir}/${{subdomain}}
440	
441	    #  -- link files -----------------------------------
442	    cd {current_mrm_dir}/${{subdomain}}
443	
444	    #  -- total runoff file ----------------------------
445	    mkdir -p input
446	    target_mhm_outfile={mhm_outfile}
447	    ln -fs ${{target_mhm_outfile}} input/total_runoff.nc
448	
449	    #  -- morph files --------------------------------
450	    mkdir -p input/morph
451	    ln -fs ${{networkFile}} input/morph/river_network.nc
452	    ln -fs {mrm_id_gauges_file}/idgauges.asc input/morph/idgauges.asc # required name
453	
454	    #  -- meteo files --------------------------------
455	    mkdir -p input
456	    # linking input forcings
457	    ln -fs {forcings_dir}/mHM_{ini_date}_to_{end_date}_pre.nc input/pre.nc
458	    ln -fs {forcings_dir}/mHM_{ini_date}_to_{end_date}_pet.nc input/pet.nc
459	    mkdir -p input/restart
460	    cd input/restart
461	    ln -fs ${{restartFile}}
462	    cd -
463	    mkdir -p output
464	
465	    #  -- set eval variables for namelist -------------
466	    ystart={ini_year}
467	    yend={end_year}
468	    mstart={ini_month}
469	    mend={end_month}
470	    dstart={ini_day}
471	    dend={end_day}
472	
473	    #  -- make mrm nam -----------------------------
474	    cat > {current_mrm_dir}/${{subdomain}}/mrm.nml << MRMNML
475	&directories_general
476	    dir_lcover = '../data/input/test_domain/input/'
477	    dir_morpho = 'input/morph/river_network.nc'
478	    dir_out = 'output/'
479	    dircommonfiles = 'output/'
480	    dirconfigout = 'output/'
481	    file_latlon = '${{networkFile}}'
482	    mhm_file_restartout = 'output/mHM_restart_001.nc'
483	    mrm_file_restartout = 'output/mRM_restart_{next_date}.nc'
484	/
485	
486	&directories_mrm
487	    dir_bankfull_runoff = 'test_basin/input/optional_data/'
488	    dir_gauges = ''
489	    dir_total_runoff = 'input/'
490	/
491	
492	&evaluation_gauges
493	    gauge_filename(1,:) = ${{grdc_fpaths}}
494	    gauge_id(1,:) = ${{grdc_ids}}
495	    ngaugestotal = ${{n_gauges}}
496	    nogauges_domain = ${{n_gauges}}
497	/
498	
499	&inflow_gauges
500	    inflowgauge_filename(1,:) = ''
501	    inflowgauge_headwater = .FALSE.
502	    inflowgauge_id = -9
503	    ninflowgaugestotal = 0
504	    noinflowgauges_domain = 0
505	/
506	
507	&lcover
508	    lcoveryearend = 2100
509	    lcoveryearstart = 1900
510	    lcoverfname = 'XXX'
511	    nlcoverscene = 1
512	/
513	
514	&mainconfig
515	    iflag_cordinate_sys = 1
516	    l0domain = 1
517	    ndomains = 1
518	    read_opt_domain_data = 0
519	    resolution_hydrology = 0.1
520	    write_restart = .TRUE.
521	/
522	
523	&mainconfig_mhm_mrm
524	    mrm_file_restartin = 'input/restart/{ini_date}_mRM_restart.nc'
525	    opti_function = 3
526	    opti_method = 1
527	    optimize = .FALSE.
528	    optimize_restart = .FALSE.
529	    read_restart = True
530	    resolution_routing = {resolution}
531	    timestep = {time_step}
532	/
533	
534	&mainconfig_mrm
535	    alma_convention = .FALSE.
536	    filenamepetrunoff = 'pet'
537	    filenameprerunoff = 'pre'
538	    filenametotalrunoff = 'total_runoff'
539	    gw_coupling = .FALSE.
540	    varnamepetrunoff = 'pet'
541	    varnameprerunoff = 'pre'
542	    varnametotalrunoff = 'Q'
543	/
544	
545	&optimization
546	    dds_r = 0.2
547	    mcmc_error_params = 0.01,
548	                        0.6
549	    mcmc_opti = .FALSE.
550	    niterations = 7
551	    sa_temp = -9.0
552	    sce_ngs = 2
553	    sce_npg = -9
554	    sce_nps = -9
555	    seed = 1235876
556	/
557	
558	&optional_data
559	    dir_evapotranspiration = 'test_basin/input/optional_data/'
560	    dir_neutrons = 'test_basin/input/optional_data/'
561	    dir_soil_moisture = 'test_basin/input/optional_data/'
562	    file_tws = 'test_basin/input/optional_data/tws_basin_1.txt'
563	    nsoilhorizons_sm_input = 1
564	    timestep_et_input = -2
565	    timestep_sm_input = -2
566	/
567	
568	&processselection
569	    processcase = 1, 1,
570	                1, 1,
571	                0, 1,
572	                1, 2,
573	                1, 0
574	/
575	
576	&project_description
577	    contact = 'Stephan Thober (email: stephan.thober@ufz.de'
578	    conventions = 'tbd'
579	    history = ''
580	    mhm_details = 'Helmholtz Center for Environmental Research - UFZ, Department Computational Hydrosystems'
581	    project_details = 'Climate DT project'
582	    setup_description = 'model run for Climate DT project'
583	    simulation_type = 'simulation'
584	/
585	
586	&time_periods
587	    eval_per%dend = ${{dend}}
588	    eval_per%dstart = ${{dstart}}
589	    eval_per%mend = ${{mend}}
590	    eval_per%mstart = ${{mstart}}
591	    eval_per%yend = ${{yend}}
592	    eval_per%ystart = ${{ystart}}
593	    warming_days = 0
594	/
595	MRMNML
596	
597	cat > {current_mrm_dir}/${{subdomain}}/mrm_outputs.nml << MRMOUTPUT
598	&nloutputresults
599	    outputflxstate_mrm = .True.
600	    timestep_model_outputs_mrm = {timestep_model_outputs_mrm}
601	/
602	MRMOUTPUT
603	
604	cat > {current_mrm_dir}/${{subdomain}}/mrm_parameter.nml << MRMPARAMETER
605	&routing1
606	    muskingumattenuation_riverslope = 0.01, 0.5, 0.3, 1.0, 1.0
607	    muskingumtraveltime_constant = 0.31, 0.35, 0.325, 1.0, 1.0
608	    muskingumtraveltime_impervious = 0.09, 0.11, 0.1, 1.0, 1.0
609	    muskingumtraveltime_riverlength = 0.07, 0.08, 0.075, 1.0, 1.0
610	    muskingumtraveltime_riverslope = 1.95, 2.1, 2.0, 1.0, 1.0
611	/
612	
613	&routing2
614	    streamflow_celerity = 0.1, 15.0, 1.5, 0.0, 1.0
615	/
616	
617	&routing3
618	    g1 = 0.1, 100.0, 30.0, 0.0, 1.0
619	    g2 = 0.1, 0.9, 0.6, 0.0, 1.0
620	/
621	MRMPARAMETER
622	
623	{get_runtime} {executable_mrm} > mrm_{ini_date}_to_{end_date}.log 2>&1
624	""")

--------------------------------------------------
>> Issue: [B840:executor] concurrent.futures.Executor
   Severity: High   Confidence: Medium
   Location: /home2/blue/Documents/PyPIAgent/Dataset/latest/unzip_benign/hydroland/hydroland/preprocessing.py:109
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b840_executor.html
108	    # use two workers to process both jobs concurrently
109	    with ProcessPoolExecutor(max_workers=2) as executor:
110	        futures = [executor.submit(_prep_data_job, j) for j in jobs]

--------------------------------------------------

Code scanned:
	Total lines of code: 3038
	Total lines skipped (#nosec): 0

Run metrics:
	Total issues (by severity):
		Undefined: 0.0
		Low: 0.0
		Medium: 3.0
		High: 23.0
	Total issues (by confidence):
		Undefined: 0.0
		Low: 0.0
		Medium: 24.0
		High: 2.0
Files skipped (0):
