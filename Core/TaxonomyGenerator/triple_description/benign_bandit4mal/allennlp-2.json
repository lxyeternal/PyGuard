{
  "metadata": {
    "package_name": "allennlp-2",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign_bandit4mal/allennlp-2.10.1.json",
    "dataset_type": "benign_bandit4mal"
  },
  "code_files": [
    {
      "pyfile": "train_fixtures.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/allennlp-2.10.1/allennlp-2.10.1/scripts/train_fixtures.py",
      "line_number": "27",
      "type_description": "B836:rmtree",
      "context_snippet": "import glob\nimport logging\nimport os\nimport re\nimport shutil\nimport sys\nimport tempfile\n\nsys.path.insert(0, os.path.dirname(os.path.abspath(os.path.join(__file__, os.pardir))))\nfrom allennlp.commands.test_install import _get_module_root\nfrom allennlp.commands.train import train_model_from_file, train_model\nfrom allennlp.common import Params\nfrom allennlp.common.util import pushd\n\n\ndef train_fixture(config_prefix: str, config_filename: str = \"experiment.json\") -> None:\n    config_file = config_prefix + config_filename\n    serialization_dir = config_prefix + \"serialization\"\n    # Train model doesn't like it if we have incomplete serialization\n    # directories, so remove them if they exist.\n    if os.path.exists(serialization_dir):\n        shutil.rmtree(serialization_dir)\n\n    # train the model\n    train_model_from_file(config_file, serialization_dir)\n\n    # remove unnecessary files\n    shutil.rmtree(os.path.join(serialization_dir, \"log\"))\n\n    for filename in glob.glob(os.path.join(serialization_dir, \"*\")):\n        if (\n            filename.endswith(\".log\")\n            or filename.endswith(\".json\")\n            or re.search(r\"epoch_[0-9]+\\.th$\", filename)\n        ):\n            os.remove(filename)\n",
      "hash_value": "bc299c775c0d5eec71f7421d740a01c4",
      "severity": "High",
      "confidence": "Medium",
      "code_snippets": [
        {
          "snippet": "import glob\nimport logging\nimport os\nimport re\nimport shutil\nimport sys\nimport tempfile\n\nsys.path.insert(0, os.path.dirname(os.path.abspath(os.path.join(__file__, os.pardir))))\nfrom allennlp.commands.test_install import _get_module_root\nfrom allennlp.commands.train import train_model_from_file, train_model\nfrom allennlp.common import Params\nfrom allennlp.common.util import pushd\n\n\ndef train_fixture(config_prefix: str, config_filename: str = \"experiment.json\") -> None:\n    config_file = config_prefix + config_filename\n    serialization_dir = config_prefix + \"serialization\"\n    # Train model doesn't like it if we have incomplete serialization\n    # directories, so remove them if they exist.\n    if os.path.exists(serialization_dir):\n        shutil.rmtree(serialization_dir)\n\n    # train the model\n    train_model_from_file(config_file, serialization_dir)\n\n    # remove unnecessary files\n    shutil.rmtree(os.path.join(serialization_dir, \"log\"))\n\n    for filename in glob.glob(os.path.join(serialization_dir, \"*\")):\n        if (\n            filename.endswith(\".log\")\n            or filename.endswith(\".json\")\n            or re.search(r\"epoch_[0-9]+\\.th$\", filename)\n        ):\n            os.remove(filename)\n",
          "triple_sequences": [
            {
              "action_api": "os.path.exists()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "serialization_dir",
              "object_description": "Directory path",
              "object_id": "directory_path",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "shutil.rmtree()",
              "action_description": "Recursively deletes directory and its contents",
              "action_id": "delete_directory",
              "object": "serialization_dir",
              "object_description": "Directory path",
              "object_id": "directory_path",
              "intention_description": "Delete directory content",
              "intention_id": "delete_directory_content"
            },
            {
              "action_api": "train_model_from_file()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "config_file, serialization_dir",
              "object_description": "",
              "object_id": "",
              "intention_description": "Execute command",
              "intention_id": "execute_command"
            },
            {
              "action_api": "os.path.join()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "serialization_dir, \"log\"",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "shutil.rmtree()",
              "action_description": "Recursively deletes directory and its contents",
              "action_id": "delete_directory",
              "object": "os.path.join(serialization_dir, \"log\")",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Delete directory content",
              "intention_id": "delete_directory_content"
            },
            {
              "action_api": "glob.glob()",
              "action_description": "List directory contents",
              "action_id": "list_directory_contents",
              "object": "os.path.join(serialization_dir, \"*\")",
              "object_description": "Directory path",
              "object_id": "directory_path",
              "intention_description": "List files in directory",
              "intention_id": "list_directory_files"
            },
            {
              "action_api": "str.endswith()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": ".log / .json",
              "object_description": "File extension",
              "object_id": "file_extension",
              "intention_description": "Detect image file",
              "intention_id": "detect_image_file"
            },
            {
              "action_api": "re.search()",
              "action_description": "Compiles regular expression pattern",
              "action_id": "compile_regex",
              "object": "r\"epoch_[0-9]+\\.th$\", filename",
              "object_description": "Regular expression and file content",
              "object_id": "regex_file_content",
              "intention_description": "Detect image file",
              "intention_id": "detect_image_file"
            },
            {
              "action_api": "os.remove()",
              "action_description": "Deletes specified file from filesystem",
              "action_id": "delete_file",
              "object": "filename",
              "object_description": "Local file",
              "object_id": "local_file",
              "intention_description": "Delete file",
              "intention_id": "delete_file"
            }
          ]
        }
      ]
    }
  ]
}