{
  "metadata": {
    "package_name": "obspy-1",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign_bandit4mal/obspy-1.4.1.json",
    "dataset_type": "benign_bandit4mal"
  },
  "code_files": [
    {
      "pyfile": "test_core.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/obspy-1.4.1/obspy-1.4.1/obspy/io/wav/tests/test_core.py",
      "line_number": "112",
      "type_description": "B814:read",
      "context_snippet": "def test_write_stream_via_obspy(self, testdata):\n    \"\"\"\n    Write streams, i.e. multiple files via obspy.core.Trace\n    \"\"\"\n    data = np.array([111, 111, 111, 111, 111, 109, 106, 103, 103,\n                     110, 121, 132, 139])\n    with NamedTemporaryFile() as fh:\n        testfile = fh.name\n        self.file = testdata['3cssan.reg.8.1.RNON.wav']\n        tr = read(self.file, format='WAV')[0]\n        np.testing.assert_array_equal(tr.data[:13], data)\n        # write\n        st2 = Stream([Trace(), Trace()])\n        st2[0].data = tr.data.copy()       # copy the data\n        st2[1].data = tr.data.copy() // 2  # be sure data are different\n        st2.write(testfile, format='WAV', framerate=7000)\n        try:\n            # read without giving the WAV format option\n            base, ext = os.path.splitext(testfile)\n            testfile0 = \"%s%03d%s\" % (base, 0, ext)\n            testfile1 = \"%s%03d%s\" % (base, 1, ext)\n            tr30 = read(testfile0)[0]\n            tr31 = read(testfile1)[0]\n            assert tr30.stats == tr.stats\n            assert tr31.stats == tr.stats\n            np.testing.assert_array_equal(tr30.data[:13], data)\n            np.testing.assert_array_equal(tr31.data[:13], data // 2)\n        finally:\n            os.remove(testfile0)\n            os.remove(testfile1)",
      "hash_value": "9c41871272ab9da7d3e2e4b3d0e9f807",
      "severity": "High",
      "confidence": "Medium",
      "code_snippets": [
        {
          "snippet": "def test_write_stream_via_obspy(self, testdata):\n    \"\"\"\n    Write streams, i.e. multiple files via obspy.core.Trace\n    \"\"\"\n    data = np.array([111, 111, 111, 111, 111, 109, 106, 103, 103,\n                     110, 121, 132, 139])\n    with NamedTemporaryFile() as fh:\n        testfile = fh.name\n        self.file = testdata['3cssan.reg.8.1.RNON.wav']\n        tr = read(self.file, format='WAV')[0]\n        np.testing.assert_array_equal(tr.data[:13], data)\n        # write\n        st2 = Stream([Trace(), Trace()])\n        st2[0].data = tr.data.copy()       # copy the data\n        st2[1].data = tr.data.copy() // 2  # be sure data are different\n        st2.write(testfile, format='WAV', framerate=7000)\n        try:\n            # read without giving the WAV format option\n            base, ext = os.path.splitext(testfile)\n            testfile0 = \"%s%03d%s\" % (base, 0, ext)\n            testfile1 = \"%s%03d%s\" % (base, 1, ext)\n            tr30 = read(testfile0)[0]\n            tr31 = read(testfile1)[0]\n            assert tr30.stats == tr.stats\n            assert tr31.stats == tr.stats\n            np.testing.assert_array_equal(tr30.data[:13], data)\n            np.testing.assert_array_equal(tr31.data[:13], data // 2)\n        finally:\n            os.remove(testfile0)\n            os.remove(testfile1)",
          "triple_sequences": [
            {
              "action_api": "NamedTemporaryFile()",
              "action_description": "Creates temporary file that is not deleted on close",
              "action_id": "create_temp_file",
              "object": "",
              "object_description": "Temporary file path",
              "object_id": "temporary_file_path",
              "intention_description": "Create temporary file",
              "intention_id": "create_temporary_file"
            },
            {
              "action_api": "read()",
              "action_description": "File opening operations for reading (normal reading, binary reading)",
              "action_id": "basic_read_operations",
              "object": "self.file, format='WAV'",
              "object_description": "Local file",
              "object_id": "local_file",
              "intention_description": "Open file for reading",
              "intention_id": "open_file_reading"
            },
            {
              "action_api": "np.testing.assert_array_equal()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "tr.data[:13], data",
              "object_description": "",
              "object_id": "",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "tr.data.copy()",
              "action_description": "Copies memory from source to destination buffer",
              "action_id": "copy_memory",
              "object": "tr.data",
              "object_description": "Character code array",
              "object_id": "character_code_array",
              "intention_description": "Prepare data for further processing",
              "intention_id": "prepare_data_processing"
            },
            {
              "action_api": "st2.write()",
              "action_description": "File opening operations for writing (normal writing, binary writing)",
              "action_id": "basic_write_operations",
              "object": "testfile, format='WAV', framerate=7000",
              "object_description": "Temporary file path",
              "object_id": "temporary_file_path",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "os.path.splitext()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "testfile",
              "object_description": "Temporary file path",
              "object_id": "temporary_file_path",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "read()",
              "action_description": "File opening operations for reading (normal reading, binary reading)",
              "action_id": "basic_read_operations",
              "object": "testfile0",
              "object_description": "Temporary file path",
              "object_id": "temporary_file_path",
              "intention_description": "Open file for reading",
              "intention_id": "open_file_reading"
            },
            {
              "action_api": "read()",
              "action_description": "File opening operations for reading (normal reading, binary reading)",
              "action_id": "basic_read_operations",
              "object": "testfile1",
              "object_description": "Temporary file path",
              "object_id": "temporary_file_path",
              "intention_description": "Open file for reading",
              "intention_id": "open_file_reading"
            },
            {
              "action_api": "np.testing.assert_array_equal()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "tr30.data[:13], data",
              "object_description": "",
              "object_id": "",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "np.testing.assert_array_equal()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "tr31.data[:13], data // 2",
              "object_description": "",
              "object_id": "",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "os.remove()",
              "action_description": "Deletes specified file from filesystem",
              "action_id": "delete_file",
              "object": "testfile0",
              "object_description": "Temporary file path",
              "object_id": "temporary_file_path",
              "intention_description": "Delete file",
              "intention_id": "delete_file"
            },
            {
              "action_api": "os.remove()",
              "action_description": "Deletes specified file from filesystem",
              "action_id": "delete_file",
              "object": "testfile1",
              "object_description": "Temporary file path",
              "object_id": "temporary_file_path",
              "intention_description": "Delete file",
              "intention_id": "delete_file"
            }
          ]
        }
      ]
    }
  ]
}