{
  "metadata": {
    "package_name": "opentelemetry_instrumentation_httpx-0",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign_bandit4mal/opentelemetry_instrumentation_httpx-0.53b0.json",
    "dataset_type": "benign_bandit4mal"
  },
  "code_files": [
    {
      "pyfile": "test_httpx_integration.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/opentelemetry_instrumentation_httpx-0.53b0/opentelemetry_instrumentation_httpx-0.53b0/tests/test_httpx_integration.py",
      "line_number": "285",
      "type_description": "B825:request",
      "context_snippet": "def test_basic_new_semconv(self):\n    url = \"http://mock:8080/status/200\"\n    respx.get(url).mock(\n        httpx.Response(\n            200,\n            text=\"Hello!\",\n            extensions={\"http_version\": b\"HTTP/1.1\"},\n        )\n    )\n    result = self.perform_request(url)\n    self.assertEqual(result.text, \"Hello!\")\n    span = self.assert_span()\n\n    self.assertIs(span.kind, trace.SpanKind.CLIENT)\n    self.assertEqual(span.name, \"GET\")\n\n    self.assertEqual(\n        span.instrumentation_scope.schema_url,\n        SpanAttributes.SCHEMA_URL,\n    )\n    self.assertEqual(\n        dict(span.attributes),\n        {\n            HTTP_REQUEST_METHOD: \"GET\",\n            URL_FULL: url,\n            SERVER_ADDRESS: \"mock\",\n            NETWORK_PEER_ADDRESS: \"mock\",\n            HTTP_RESPONSE_STATUS_CODE: 200,\n            NETWORK_PROTOCOL_VERSION: \"1.1\",\n            SERVER_PORT: 8080,\n            NETWORK_PEER_PORT: 8080,\n        },\n    )\n\n    self.assertIs(span.status.status_code, trace.StatusCode.UNSET)\n\n    self.assertEqualSpanInstrumentationScope(\n        span, opentelemetry.instrumentation.httpx\n    )",
      "hash_value": "ba292165eb331806ef9da542f4bef41b",
      "severity": "High",
      "confidence": "Medium",
      "code_snippets": [
        {
          "snippet": "def test_basic_new_semconv(self):\n    url = \"http://mock:8080/status/200\"\n    respx.get(url).mock(\n        httpx.Response(\n            200,\n            text=\"Hello!\",\n            extensions={\"http_version\": b\"HTTP/1.1\"},\n        )\n    )\n    result = self.perform_request(url)\n    self.assertEqual(result.text, \"Hello!\")\n    span = self.assert_span()\n\n    self.assertIs(span.kind, trace.SpanKind.CLIENT)\n    self.assertEqual(span.name, \"GET\")\n\n    self.assertEqual(\n        span.instrumentation_scope.schema_url,\n        SpanAttributes.SCHEMA_URL,\n    )\n    self.assertEqual(\n        dict(span.attributes),\n        {\n            HTTP_REQUEST_METHOD: \"GET\",\n            URL_FULL: url,\n            SERVER_ADDRESS: \"mock\",\n            NETWORK_PEER_ADDRESS: \"mock\",\n            HTTP_RESPONSE_STATUS_CODE: 200,\n            NETWORK_PROTOCOL_VERSION: \"1.1\",\n            SERVER_PORT: 8080,\n            NETWORK_PEER_PORT: 8080,\n        },\n    )\n\n    self.assertIs(span.status.status_code, trace.StatusCode.UNSET)\n\n    self.assertEqualSpanInstrumentationScope(\n        span, opentelemetry.instrumentation.httpx\n    )",
          "triple_sequences": [
            {
              "action_api": "respx.get()",
              "action_description": "Creates HTTP request object with specified URL, data, and headers",
              "action_id": "create_http_request",
              "object": "http://mock:8080/status/200",
              "object_description": "URL string",
              "object_id": "url_string",
              "intention_description": "Prepare URL for HTTP request",
              "intention_id": "prepare_url_http_request"
            },
            {
              "action_api": "httpx.Response()",
              "action_description": "Process HTTP response content",
              "action_id": "process_http_response",
              "object": "200, text=\"Hello!\", extensions={\"http_version\": b\"HTTP/1.1\"}",
              "object_description": "HTTP response content from remote server",
              "object_id": "http_response_remote_content",
              "intention_description": "Decode downloaded content",
              "intention_id": "decode_downloaded_content"
            },
            {
              "action_api": "self.perform_request()",
              "action_description": "Sends HTTP request",
              "action_id": "send_http_request",
              "object": "http://mock:8080/status/200",
              "object_description": "URL string",
              "object_id": "url_string",
              "intention_description": "Download remote content",
              "intention_id": "download_remote_content"
            },
            {
              "action_api": "self.assertEqual()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "result.text, \"Hello!\"",
              "object_description": "",
              "object_id": "",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "self.assert_span()",
              "action_description": "Retrieves HTTP response status code",
              "action_id": "get_http_status",
              "object": "",
              "object_description": "",
              "object_id": "",
              "intention_description": "Extract structured data from file",
              "intention_id": "extract_structured_file_data"
            },
            {
              "action_api": "self.assertIs()",
              "action_description": "Checks if specified path exists and is a file",
              "action_id": "check_file_is_file",
              "object": "span.kind, trace.SpanKind.CLIENT",
              "object_description": "",
              "object_id": "",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "self.assertEqual()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "span.name, \"GET\"",
              "object_description": "",
              "object_id": "",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "self.assertEqual()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "span.instrumentation_scope.schema_url, SpanAttributes.SCHEMA_URL",
              "object_description": "",
              "object_id": "",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "self.assertEqual()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "dict(span.attributes), {HTTP_REQUEST_METHOD: \"GET\", URL_FULL: url, SERVER_ADDRESS: \"mock\", NETWORK_PEER_ADDRESS: \"mock\", HTTP_RESPONSE_STATUS_CODE: 200, NETWORK_PROTOCOL_VERSION: \"1.1\", SERVER_PORT: 8080, NETWORK_PEER_PORT: 8080}",
              "object_description": "",
              "object_id": "",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "self.assertIs()",
              "action_description": "Checks if specified path exists and is a file",
              "action_id": "check_file_is_file",
              "object": "span.status.status_code, trace.StatusCode.UNSET",
              "object_description": "",
              "object_id": "",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "self.assertEqualSpanInstrumentationScope()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "span, opentelemetry.instrumentation.httpx",
              "object_description": "",
              "object_id": "",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            }
          ]
        }
      ]
    }
  ]
}