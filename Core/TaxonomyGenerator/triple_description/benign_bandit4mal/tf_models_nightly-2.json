{
  "metadata": {
    "package_name": "tf_models_nightly-2",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign_bandit4mal/tf_models_nightly-2.20.0.dev20250411-py2.py3-none-any.json",
    "dataset_type": "benign_bandit4mal"
  },
  "code_files": [
    {
      "pyfile": "data_download.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/tf_models_nightly-2.20.0.dev20250411-py2.py3-none-any/official/legacy/transformer/data_download.py",
      "line_number": "205",
      "type_description": "B834:open",
      "context_snippet": "def download_and_extract(path, url, input_filename, target_filename):\n  \"\"\"Extract files from downloaded compressed archive file.\n\n  Args:\n    path: string directory where the files will be downloaded\n    url: url containing the compressed input and target files\n    input_filename: name of file containing data in source language\n    target_filename: name of file containing data in target language\n\n  Returns:\n    Full paths to extracted input and target files.\n\n  Raises:\n    OSError: if the download/extraction fails.\n  \"\"\"\n  # Check if extracted files already exist in path\n  input_file = find_file(path, input_filename)\n  target_file = find_file(path, target_filename)\n  if input_file and target_file:\n    logging.info(\"Already downloaded and extracted %s.\", url)\n    return input_file, target_file\n\n  # Download archive file if it doesn't already exist.\n  compressed_file = download_from_url(path, url)\n\n  # Extract compressed files\n  logging.info(\"Extracting %s.\", compressed_file)\n  with tarfile.open(compressed_file, \"r:gz\") as corpus_tar:\n    corpus_tar.extractall(path)\n\n  # Return file paths of the requested files.\n  input_file = find_file(path, input_filename)\n  target_file = find_file(path, target_filename)\n\n  if input_file and target_file:\n    return input_file, target_file\n\n  raise OSError(\"Download/extraction failed for url %s to path %s\" %\n                (url, path))",
      "hash_value": "b21414f6b1a3e000ffd5ac0ebcf73da0",
      "severity": "High",
      "confidence": "Medium",
      "code_snippets": [
        {
          "snippet": "def download_and_extract(path, url, input_filename, target_filename):\n  \"\"\"Extract files from downloaded compressed archive file.\n\n  Args:\n    path: string directory where the files will be downloaded\n    url: url containing the compressed input and target files\n    input_filename: name of file containing data in source language\n    target_filename: name of file containing data in target language\n\n  Returns:\n    Full paths to extracted input and target files.\n\n  Raises:\n    OSError: if the download/extraction fails.\n  \"\"\"\n  # Check if extracted files already exist in path\n  input_file = find_file(path, input_filename)\n  target_file = find_file(path, target_filename)\n  if input_file and target_file:\n    logging.info(\"Already downloaded and extracted %s.\", url)\n    return input_file, target_file\n\n  # Download archive file if it doesn't already exist.\n  compressed_file = download_from_url(path, url)\n\n  # Extract compressed files\n  logging.info(\"Extracting %s.\", compressed_file)\n  with tarfile.open(compressed_file, \"r:gz\") as corpus_tar:\n    corpus_tar.extractall(path)\n\n  # Return file paths of the requested files.\n  input_file = find_file(path, input_filename)\n  target_file = find_file(path, target_filename)\n\n  if input_file and target_file:\n    return input_file, target_file\n\n  raise OSError(\"Download/extraction failed for url %s to path %s\" %\n                (url, path))",
          "triple_sequences": [
            {
              "action_api": "find_file()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "path, input_filename",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Determine file presence",
              "intention_id": "determine_file_presence"
            },
            {
              "action_api": "find_file()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "path, target_filename",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Determine file presence",
              "intention_id": "determine_file_presence"
            },
            {
              "action_api": "download_from_url()",
              "action_description": "Downloads file from URL to local path",
              "action_id": "download_file_url",
              "object": "path, url",
              "object_description": "External domain",
              "object_id": "external_domain",
              "intention_description": "Download remote content",
              "intention_id": "download_remote_content"
            },
            {
              "action_api": "tarfile.open()",
              "action_description": "Opens ZIP archive for reading",
              "action_id": "open_zip_read",
              "object": "compressed_file, \"r:gz\"",
              "object_description": "ZIP archive file",
              "object_id": "zip_archive",
              "intention_description": "Open database for reading",
              "intention_id": "open_database_reading"
            },
            {
              "action_api": "corpus_tar.extractall()",
              "action_description": "Extracts all files from ZIP archive to specified directory",
              "action_id": "extract_zip_files",
              "object": "path",
              "object_description": "Directory path",
              "object_id": "directory_path",
              "intention_description": "Decompress downloaded archive",
              "intention_id": "decompress_downloaded_archive"
            },
            {
              "action_api": "find_file()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "path, input_filename",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Determine file presence",
              "intention_id": "determine_file_presence"
            },
            {
              "action_api": "find_file()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "path, target_filename",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Determine file presence",
              "intention_id": "determine_file_presence"
            }
          ]
        }
      ]
    }
  ]
}