{
  "metadata": {
    "package_name": "sympy-1",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign_bandit4mal/sympy-1.13.3.json",
    "dataset_type": "benign_bandit4mal"
  },
  "code_files": [
    {
      "pyfile": "runtests.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/sympy-1.13.3/sympy-1.13.3/sympy/testing/runtests.py",
      "line_number": "2288",
      "type_description": "B815:write",
      "context_snippet": "def finish(self):\n    self._t_end = clock()\n    self.write(\"\\n\")\n    global text, linelen\n    text = \"tests finished: %d passed, \" % self._passed\n    linelen = len(text)\n\n    def add_text(mytext):\n        global text, linelen\n        \"\"\"Break new text if too long.\"\"\"\n        if linelen + len(mytext) > self.terminal_width:\n            text += '\\n'\n            linelen = 0\n        text += mytext\n        linelen += len(mytext)\n\n    if len(self._failed) > 0:\n        add_text(\"%d failed, \" % len(self._failed))\n    if len(self._failed_doctest) > 0:\n        add_text(\"%d failed, \" % len(self._failed_doctest))\n    if self._skipped > 0:\n        add_text(\"%d skipped, \" % self._skipped)\n    if self._xfailed > 0:\n        add_text(\"%d expected to fail, \" % self._xfailed)\n    if len(self._xpassed) > 0:\n        add_text(\"%d expected to fail but passed, \" % len(self._xpassed))\n    if len(self._exceptions) > 0:\n        add_text(\"%d exceptions, \" % len(self._exceptions))\n    add_text(\"in %.2f seconds\" % (self._t_end - self._t_start))\n\n    if self.slow_test_functions:\n        self.write_center('slowest tests', '_')\n        sorted_slow = sorted(self.slow_test_functions, key=lambda r: r[1])\n        for slow_func_name, taken in sorted_slow:\n            print('%s - Took %.3f seconds' % (slow_func_name, taken))\n\n    if self.fast_test_functions:\n        self.write_center('unexpectedly fast tests', '_')\n        sorted_fast = sorted(self.fast_test_functions,\n                             key=lambda r: r[1])\n        for fast_func_name, taken in sorted_fast:\n            print('%s - Took %.3f seconds' % (fast_func_name, taken))\n\n    if len(self._xpassed) > 0:\n        self.write_center(\"xpassed tests\", \"_\")\n        for e in self._xpassed:\n            self.write(\"%s: %s\\n\" % (e[0], e[1]))\n        self.write(\"\\n\")\n\n    if self._tb_style != \"no\" and len(self._exceptions) > 0:\n        for e in self._exceptions:\n            filename, f, (t, val, tb) = e\n            self.write_center(\"\", \"_\")\n            if f is None:\n                s = \"%s\" % filename\n            else:\n                s = \"%s:%s\" % (filename, f.__name__)\n            self.write_center(s, \"_\")\n            self.write_exception(t, val, tb)\n        self.write(\"\\n\")\n\n    if self._tb_style != \"no\" and len(self._failed) > 0:\n        for e in self._failed:\n            filename, f, (t, val, tb) = e\n            self.write_center(\"\", \"_\")\n            self.write_center(\"%s::%s\" % (filename, f.__name__), \"_\")\n            self.write_exception(t, val, tb)\n        self.write(\"\\n\")\n\n    if self._tb_style != \"no\" and len(self._failed_doctest) > 0:\n        for e in self._failed_doctest:\n            filename, msg = e\n            self.write_center(\"\", \"_\")\n            self.write_center(\"%s\" % filename, \"_\")\n            self.write(msg)\n        self.write(\"\\n\")\n\n    self.write_center(text)\n    ok = len(self._failed) == 0 and len(self._exceptions) == 0 and \\\n        len(self._failed_doctest) == 0\n    if not ok:\n        self.write(\"DO *NOT* COMMIT!\\n\")\n    return ok",
      "hash_value": "8d31c3df6a60aa88dfd865d78b900dd0",
      "severity": "High",
      "confidence": "Medium",
      "code_snippets": [
        {
          "snippet": "def finish(self):\n    self._t_end = clock()\n    self.write(\"\\n\")\n    global text, linelen\n    text = \"tests finished: %d passed, \" % self._passed\n    linelen = len(text)\n\n    def add_text(mytext):\n        global text, linelen\n        \"\"\"Break new text if too long.\"\"\"\n        if linelen + len(mytext) > self.terminal_width:\n            text += '\\n'\n            linelen = 0\n        text += mytext\n        linelen += len(mytext)\n\n    if len(self._failed) > 0:\n        add_text(\"%d failed, \" % len(self._failed))\n    if len(self._failed_doctest) > 0:\n        add_text(\"%d failed, \" % len(self._failed_doctest))\n    if self._skipped > 0:\n        add_text(\"%d skipped, \" % self._skipped)\n    if self._xfailed > 0:\n        add_text(\"%d expected to fail, \" % self._xfailed)\n    if len(self._xpassed) > 0:\n        add_text(\"%d expected to fail but passed, \" % len(self._xpassed))\n    if len(self._exceptions) > 0:\n        add_text(\"%d exceptions, \" % len(self._exceptions))\n    add_text(\"in %.2f seconds\" % (self._t_end - self._t_start))\n\n    if self.slow_test_functions:\n        self.write_center('slowest tests', '_')\n        sorted_slow = sorted(self.slow_test_functions, key=lambda r: r[1])\n        for slow_func_name, taken in sorted_slow:\n            print('%s - Took %.3f seconds' % (slow_func_name, taken))\n\n    if self.fast_test_functions:\n        self.write_center('unexpectedly fast tests', '_')\n        sorted_fast = sorted(self.fast_test_functions,\n                             key=lambda r: r[1])\n        for fast_func_name, taken in sorted_fast:\n            print('%s - Took %.3f seconds' % (fast_func_name, taken))\n\n    if len(self._xpassed) > 0:\n        self.write_center(\"xpassed tests\", \"_\")\n        for e in self._xpassed:\n            self.write(\"%s: %s\\n\" % (e[0], e[1]))\n        self.write(\"\\n\")\n\n    if self._tb_style != \"no\" and len(self._exceptions) > 0:\n        for e in self._exceptions:\n            filename, f, (t, val, tb) = e\n            self.write_center(\"\", \"_\")\n            if f is None:\n                s = \"%s\" % filename\n            else:\n                s = \"%s:%s\" % (filename, f.__name__)\n            self.write_center(s, \"_\")\n            self.write_exception(t, val, tb)\n        self.write(\"\\n\")\n\n    if self._tb_style != \"no\" and len(self._failed) > 0:\n        for e in self._failed:\n            filename, f, (t, val, tb) = e\n            self.write_center(\"\", \"_\")\n            self.write_center(\"%s::%s\" % (filename, f.__name__), \"_\")\n            self.write_exception(t, val, tb)\n        self.write(\"\\n\")\n\n    if self._tb_style != \"no\" and len(self._failed_doctest) > 0:\n        for e in self._failed_doctest:\n            filename, msg = e\n            self.write_center(\"\", \"_\")\n            self.write_center(\"%s\" % filename, \"_\")\n            self.write(msg)\n        self.write(\"\\n\")\n\n    self.write_center(text)\n    ok = len(self._failed) == 0 and len(self._exceptions) == 0 and \\\n        len(self._failed_doctest) == 0\n    if not ok:\n        self.write(\"DO *NOT* COMMIT!\\n\")\n    return ok",
          "triple_sequences": [
            {
              "action_api": "clock()",
              "action_description": "Returns current time",
              "action_id": "get_current_time",
              "object": "",
              "object_description": "",
              "object_id": "",
              "intention_description": "Get datetime epoch",
              "intention_id": "get_datetime_epoch"
            },
            {
              "action_api": "self.write()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\\n",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "len()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "text",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Prepare string processing",
              "intention_id": "prepare_string_processing"
            },
            {
              "action_api": "add_text()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"%d failed, \" % len(self._failed)",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "add_text()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"%d failed, \" % len(self._failed_doctest)",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "add_text()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"%d skipped, \" % self._skipped",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "add_text()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"%d expected to fail, \" % self._xfailed",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "add_text()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"%d expected to fail but passed, \" % len(self._xpassed)",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "add_text()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"%d exceptions, \" % len(self._exceptions)",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "add_text()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"in %.2f seconds\" % (self._t_end - self._t_start)",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write_center()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "'slowest tests', '_'",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "sorted()",
              "action_description": "Generate product of sequence",
              "action_id": "generate_sequence_product",
              "object": "self.slow_test_functions, key=lambda r: r[1]",
              "object_description": "Function and arguments",
              "object_id": "function_with_arguments",
              "intention_description": "Generate product of sequence",
              "intention_id": "generate_sequence_product"
            },
            {
              "action_api": "print()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "'%s - Took %.3f seconds' % (slow_func_name, taken)",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write_center()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "'unexpectedly fast tests', '_'",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "sorted()",
              "action_description": "Generate product of sequence",
              "action_id": "generate_sequence_product",
              "object": "self.fast_test_functions, key=lambda r: r[1]",
              "object_description": "Function and arguments",
              "object_id": "function_with_arguments",
              "intention_description": "Generate product of sequence",
              "intention_id": "generate_sequence_product"
            },
            {
              "action_api": "print()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "'%s - Took %.3f seconds' % (fast_func_name, taken)",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write_center()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"xpassed tests\", \"_\"",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"%s: %s\\n\" % (e[0], e[1])",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\\n",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write_center()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"\", \"_\"",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write_center()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "s, \"_\"",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write_exception()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "t, val, tb",
              "object_description": "Error message text",
              "object_id": "error_message",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\\n",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write_center()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"\", \"_\"",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write_center()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"%s::%s\" % (filename, f.__name__), \"_\"",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write_exception()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "t, val, tb",
              "object_description": "Error message text",
              "object_id": "error_message",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\\n",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write_center()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"\", \"_\"",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write_center()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"%s\" % filename, \"_\"",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "msg",
              "object_description": "Error message text",
              "object_id": "error_message",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\\n",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write_center()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "text",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "self.write()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"DO *NOT* COMMIT!\\n\"",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            }
          ]
        }
      ]
    }
  ]
}