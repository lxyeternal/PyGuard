{
  "metadata": {
    "package_name": "dvc-3",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign_bandit4mal/dvc-3.59.1.json",
    "dataset_type": "benign_bandit4mal"
  },
  "code_files": [
    {
      "pyfile": "test_data.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/dvc-3.59.1/dvc-3.59.1/tests/func/api/test_data.py",
      "line_number": "88",
      "type_description": "B814:read",
      "context_snippet": "def test_open_external(tmp_dir, erepo_dir, cloud):\n    erepo_dir.add_remote(config=cloud.config)\n\n    with erepo_dir.chdir():\n        erepo_dir.dvc_gen(\"version\", \"master\", commit=\"add version\")\n\n        with erepo_dir.branch(\"branch\", new=\"True\"):\n            # NOTE: need file to be other size for Mac\n            erepo_dir.dvc_gen(\"version\", \"branchver\", commit=\"add version\")\n\n    assert erepo_dir.dvc.push(all_branches=True) == 2\n\n    # Remove cache to force download\n    remove(erepo_dir.dvc.cache.local.path)\n\n    # Using file url to force clone to tmp repo\n    repo_url = f\"file://{erepo_dir.as_posix()}\"\n    with api.open(\"version\", repo=repo_url) as fd:\n        assert fd.read() == \"master\"\n\n    assert api.read(\"version\", repo=repo_url, rev=\"branch\") == \"branchver\"",
      "hash_value": "af3a9f37a702ea9932641e0479b580ab",
      "severity": "High",
      "confidence": "Medium",
      "code_snippets": [
        {
          "snippet": "def test_open_external(tmp_dir, erepo_dir, cloud):\n    erepo_dir.add_remote(config=cloud.config)\n\n    with erepo_dir.chdir():\n        erepo_dir.dvc_gen(\"version\", \"master\", commit=\"add version\")\n\n        with erepo_dir.branch(\"branch\", new=\"True\"):\n            # NOTE: need file to be other size for Mac\n            erepo_dir.dvc_gen(\"version\", \"branchver\", commit=\"add version\")\n\n    assert erepo_dir.dvc.push(all_branches=True) == 2\n\n    # Remove cache to force download\n    remove(erepo_dir.dvc.cache.local.path)\n\n    # Using file url to force clone to tmp repo\n    repo_url = f\"file://{erepo_dir.as_posix()}\"\n    with api.open(\"version\", repo=repo_url) as fd:\n        assert fd.read() == \"master\"\n\n    assert api.read(\"version\", repo=repo_url, rev=\"branch\") == \"branchver\"",
          "triple_sequences": [
            {
              "action_api": "erepo_dir.add_remote()",
              "action_description": "Configures proxy handler for HTTP requests",
              "action_id": "configure_proxy_handler",
              "object": "config=cloud.config",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Prepare directory path",
              "intention_id": "prepare_directory_path"
            },
            {
              "action_api": "erepo_dir.chdir()",
              "action_description": "Changes current working directory",
              "action_id": "change_working_dir",
              "object": "erepo_dir",
              "object_description": "Custom directory",
              "object_id": "custom_directory",
              "intention_description": "Change working directory",
              "intention_id": "change_working_directory"
            },
            {
              "action_api": "erepo_dir.dvc_gen()",
              "action_description": "Creates directory, ignoring if it already exists",
              "action_id": "create_directory",
              "object": "\"version\", \"master\", commit=\"add version\"",
              "object_description": "Directory path with file",
              "object_id": "directory_path_with_file",
              "intention_description": "Prepare file writing",
              "intention_id": "prepare_file_writing"
            },
            {
              "action_api": "erepo_dir.branch()",
              "action_description": "Creates directory, ignoring if it already exists",
              "action_id": "create_directory",
              "object": "\"branch\", new=\"True\"",
              "object_description": "Directory path",
              "object_id": "directory_path",
              "intention_description": "Prepare directory path",
              "intention_id": "prepare_directory_path"
            },
            {
              "action_api": "erepo_dir.dvc_gen()",
              "action_description": "Creates directory, ignoring if it already exists",
              "action_id": "create_directory",
              "object": "\"version\", \"branchver\", commit=\"add version\"",
              "object_description": "Directory path with file",
              "object_id": "directory_path_with_file",
              "intention_description": "Prepare file writing",
              "intention_id": "prepare_file_writing"
            },
            {
              "action_api": "erepo_dir.dvc.push()",
              "action_description": "Sends HTTP request",
              "action_id": "send_http_request",
              "object": "all_branches=True",
              "object_description": "Custom directory",
              "object_id": "custom_directory",
              "intention_description": "Transmit_data_http_post",
              "intention_id": "transmit_data_http_post"
            },
            {
              "action_api": "remove()",
              "action_description": "Deletes specified file from filesystem",
              "action_id": "delete_file",
              "object": "erepo_dir.dvc.cache.local.path",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Delete file",
              "intention_id": "delete_file"
            },
            {
              "action_api": "api.open()",
              "action_description": "File opening operations for reading (normal reading, binary reading)",
              "action_id": "basic_read_operations",
              "object": "\"version\", repo=repo_url",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Open file for reading",
              "intention_id": "open_file_reading"
            },
            {
              "action_api": "fd.read()",
              "action_description": "File opening operations for reading (normal reading, binary reading)",
              "action_id": "basic_read_operations",
              "object": "",
              "object_description": "",
              "object_id": "",
              "intention_description": "Read file content",
              "intention_id": "read_file_content"
            },
            {
              "action_api": "api.read()",
              "action_description": "File opening operations for reading (normal reading, binary reading)",
              "action_id": "basic_read_operations",
              "object": "\"version\", repo=repo_url, rev=\"branch\"",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Read file content",
              "intention_id": "read_file_content"
            }
          ]
        }
      ]
    }
  ]
}