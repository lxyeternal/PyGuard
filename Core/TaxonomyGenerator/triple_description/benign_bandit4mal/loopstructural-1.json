{
  "metadata": {
    "package_name": "loopstructural-1",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign_bandit4mal/loopstructural-1.6.11.json",
    "dataset_type": "benign_bandit4mal"
  },
  "code_files": [
    {
      "pyfile": "exporters.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/loopstructural-1.6.11/loopstructural-1.6.11/LoopStructural/export/exporters.py",
      "line_number": "277",
      "type_description": "B815:write",
      "context_snippet": "def _write_feat_surfs_gocad(surf, file_name):\n    \"\"\"\n    Writes out a GOCAD TSURF file for each surface in list\n\n    Parameters\n    ----------\n    surf_list: [ SimpleNamespace() ... ]\n        Details of the surfaces, as a list of SimpleNamespace() objects. Fields are:\n            verts: vertices, numpy ndarray with dtype = float64 & shape = (N,3)\n            faces: faces, numpy ndarray with dtype = int32 & shape = (M,3)\n            values: values, numpy ndarray with dtype = float32 & shape = (N,)\n            normals: normals, numpy ndarray with dtype = float32 & shape = (N,3)\n            name: name of feature e.g. fault or supergroup, string\n\n    file_name: string\n        Desired filename\n\n    Returns\n    -------\n    True if successful\n\n    \"\"\"\n    from pathlib import Path\n\n    file_name = Path(file_name).with_suffix(\".ts\")\n    with open(f\"{file_name}\", \"w\") as fd:\n        fd.write(\n            f\"\"\"GOCAD TSurf 1 \nHEADER {{\n*solid*color: #ffa500\nivolmap: false\nimap: false\nname: {surf.name}\n}}\nGOCAD_ORIGINAL_COORDINATE_SYSTEM\nNAME Default\nPROJECTION Unknown\nDATUM Unknown\nAXIS_NAME X Y Z\nAXIS_UNIT m m m\nZPOSITIVE Elevation\nEND_ORIGINAL_COORDINATE_SYSTEM\nGEOLOGICAL_FEATURE {surf.name}\nGEOLOGICAL_TYPE fault\nPROPERTY_CLASS_HEADER X {{\nkind: X\nunit: m\n}}\nPROPERTY_CLASS_HEADER Y {{\nkind: Y\nunit: m\n}}\nPROPERTY_CLASS_HEADER Z {{\nkind: Z\nunit: m\nis_z: on\n}}\nPROPERTY_CLASS_HEADER vector3d {{\nkind: Length\nunit: m\n}}\nTFACE\n\"\"\"\n        )\n        v_idx = 1\n        v_map = {}\n        for idx, vert in enumerate(surf.vertices):\n            if not np.isnan(vert[0]) and not np.isnan(vert[1]) and not np.isnan(vert[2]):\n                fd.write(f\"VRTX {v_idx:} {vert[0]} {vert[1]} {vert[2]} \\n\")\n                v_map[idx] = v_idx\n                v_idx += 1\n        for face in surf.triangles:\n            if face[0] in v_map and face[1] in v_map and face[2] in v_map:\n                fd.write(f\"TRGL {v_map[face[0]]} {v_map[face[1]]} {v_map[face[2]]} \\n\")\n        fd.write(\"END\\n\")\n    return True",
      "hash_value": "96a9a5ec138380708b2a11a607f01927",
      "severity": "High",
      "confidence": "Medium",
      "code_snippets": [
        {
          "snippet": "def _write_feat_surfs_gocad(surf, file_name):\n    \"\"\"\n    Writes out a GOCAD TSURF file for each surface in list\n\n    Parameters\n    ----------\n    surf_list: [ SimpleNamespace() ... ]\n        Details of the surfaces, as a list of SimpleNamespace() objects. Fields are:\n            verts: vertices, numpy ndarray with dtype = float64 & shape = (N,3)\n            faces: faces, numpy ndarray with dtype = int32 & shape = (M,3)\n            values: values, numpy ndarray with dtype = float32 & shape = (N,)\n            normals: normals, numpy ndarray with dtype = float32 & shape = (N,3)\n            name: name of feature e.g. fault or supergroup, string\n\n    file_name: string\n        Desired filename\n\n    Returns\n    -------\n    True if successful\n\n    \"\"\"\n    from pathlib import Path\n\n    file_name = Path(file_name).with_suffix(\".ts\")\n    with open(f\"{file_name}\", \"w\") as fd:\n        fd.write(\n            f\"\"\"GOCAD TSurf 1 \nHEADER {{\n*solid*color: #ffa500\nivolmap: false\nimap: false\nname: {surf.name}\n}}\nGOCAD_ORIGINAL_COORDINATE_SYSTEM\nNAME Default\nPROJECTION Unknown\nDATUM Unknown\nAXIS_NAME X Y Z\nAXIS_UNIT m m m\nZPOSITIVE Elevation\nEND_ORIGINAL_COORDINATE_SYSTEM\nGEOLOGICAL_FEATURE {surf.name}\nGEOLOGICAL_TYPE fault\nPROPERTY_CLASS_HEADER X {{\nkind: X\nunit: m\n}}\nPROPERTY_CLASS_HEADER Y {{\nkind: Y\nunit: m\n}}\nPROPERTY_CLASS_HEADER Z {{\nkind: Z\nunit: m\nis_z: on\n}}\nPROPERTY_CLASS_HEADER vector3d {{\nkind: Length\nunit: m\n}}\nTFACE\n\"\"\"\n        )\n        v_idx = 1\n        v_map = {}\n        for idx, vert in enumerate(surf.vertices):\n            if not np.isnan(vert[0]) and not np.isnan(vert[1]) and not np.isnan(vert[2]):\n                fd.write(f\"VRTX {v_idx:} {vert[0]} {vert[1]} {vert[2]} \\n\")\n                v_map[idx] = v_idx\n                v_idx += 1\n        for face in surf.triangles:\n            if face[0] in v_map and face[1] in v_map and face[2] in v_map:\n                fd.write(f\"TRGL {v_map[face[0]]} {v_map[face[1]]} {v_map[face[2]]} \\n\")\n        fd.write(\"END\\n\")\n    return True",
          "triple_sequences": [
            {
              "action_api": "Path()",
              "action_description": "Path object and status operations (creating Path objects, retrieving file status)",
              "action_id": "path_object_operations",
              "object": "file_name",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Prepare path for file operations",
              "intention_id": "prepare_path_file_operations"
            },
            {
              "action_api": "Path.with_suffix()",
              "action_description": "Path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": ".ts",
              "object_description": "File extension string",
              "object_id": "file_extension",
              "intention_description": "Prepare path for file operations",
              "intention_id": "prepare_path_file_operations"
            },
            {
              "action_api": "open()",
              "action_description": "File opening operations for writing (normal writing, binary writing)",
              "action_id": "basic_write_operations",
              "object": "f\"{file_name}\"",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Open file for writing",
              "intention_id": "open_file_writing"
            },
            {
              "action_api": "fd.write()",
              "action_description": "File opening operations for writing (normal writing, binary writing)",
              "action_id": "basic_write_operations",
              "object": "GOCAD TSurf 1 ... (header and metadata string)",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "fd.write()",
              "action_description": "File opening operations for writing (normal writing, binary writing)",
              "action_id": "basic_write_operations",
              "object": "VRTX {v_idx:} {vert[0]} {vert[1]} {vert[2]} \\n",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "fd.write()",
              "action_description": "File opening operations for writing (normal writing, binary writing)",
              "action_id": "basic_write_operations",
              "object": "TRGL {v_map[face[0]]} {v_map[face[1]]} {v_map[face[2]]} \\n",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "fd.write()",
              "action_description": "File opening operations for writing (normal writing, binary writing)",
              "action_id": "basic_write_operations",
              "object": "END\\n",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            }
          ]
        }
      ]
    }
  ]
}