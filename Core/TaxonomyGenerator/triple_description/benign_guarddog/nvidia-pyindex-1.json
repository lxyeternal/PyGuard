{
  "metadata": {
    "package_name": "nvidia-pyindex-1",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign/nvidia-pyindex-1.0.9.json",
    "dataset_type": "benign"
  },
  "code_files": [
    {
      "pyfile": "setup.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/nvidia-pyindex-1.0.9/nvidia-pyindex-1.0.9/setup.py",
      "line_number": "60",
      "type_description": "code-execution",
      "context_snippet": "import os\nimport shlex\nimport subprocess\nfrom nvidia_pyindex.utils import get_configuration_files\nfrom nvidia_pyindex.utils import get_configuration_files_by_priority\n\ndef _install_nvidia_pypi_index():\n    try:\n        subprocess.call(\n            shlex.split(\"nvidia_pyindex uninstall\"),\n            shell=True,\n            stdout=subprocess.DEVNULL,\n            stderr=subprocess.DEVNULL\n        )\n    except:\n        pass\n\n    debug_mode = bool(os.environ.get(\"DEBUG_MODE\", False))\n\n    config_filedict = get_configuration_files()\n    config_filelist = get_configuration_files_by_priority()\n\n    print(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\")\n    print(\"Setting User Pip Configuration ...\")\n    print(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\")\n    print(\"\\n######################\\n\")\n\n    pre_existing_configfile = None\n    for config_file in config_filelist:\n        try:\n            if os.path.isfile(config_file):\n                print(\"Editing pip conf file: %s ...\" % config_file)\n                maybe_edit_pip_config_file(\n                    config_file,\n                    config_filedict=config_filedict,\n                    debug_mode=debug_mode\n                )\n                pre_existing_configfile = config_file\n                break\n        except (FileNotFoundError, PermissionError) as e:\n            print(\"Error: {}: {}\".format(e.__class__.__name__, str(e)))\n            pass\n\n    if pre_existing_configfile is None:\n        for config_file in config_filelist:\n            print(\"\\nProcessing pip conf file: %s ...\" % config_file)\n            try:\n                if not os.path.exists(config_file):\n                    print(\"Creating pip conf file: %s ...\" % config_file)\n                    create_pip_config_file(\n                        filepath=config_file,\n                        config_filedict=config_filedict\n                    )\n            except (FileNotFoundError, PermissionError) as e:\n                print(\"Error: {}: {}\".format(e.__class__.__name__, str(e)))\n                pass\n    else:\n        with open(pre_existing_configfile, 'r') as _file:\n            original_content = _file.readlines()\n\n        for config_file in config_filelist:\n            print(\"\\nProcessing pip conf file: %s ...\" % config_file)\n            try:\n\n                try:\n                    with open(config_file, 'r') as _file:\n                        backup_content = _file.readlines()\n                except:\n                    pass\n\n                try:\n                    os.remove(config_file)\n                    os.remove(config_file.old)\n                    with open(\"%s.old\" % config_file, 'w') as _file:\n                        _file.writelines(backup_content)\n                except:\n                    pass\n\n                with open(config_file, 'w') as _file:\n                    _file.writelines(original_content)\n\n            except (FileNotFoundError, PermissionError) as e:\n                print(\"Error: {}: {}\".format(e.__class__.__name__, str(e)))\n                pass\n\n    print(\"\\n######################\\n\")\n\n    time.sleep(2)  # allow readable logs in verbose logs. Please do not delete.",
      "hash_value": "3b78934bb3111ddfe6e4ab00ff341804",
      "detection_index": 1,
      "code_snippets": [
        {
          "snippet": "import os\nimport shlex\nimport subprocess\nfrom nvidia_pyindex.utils import get_configuration_files\nfrom nvidia_pyindex.utils import get_configuration_files_by_priority\n\ndef _install_nvidia_pypi_index():\n    try:\n        subprocess.call(\n            shlex.split(\"nvidia_pyindex uninstall\"),\n            shell=True,\n            stdout=subprocess.DEVNULL,\n            stderr=subprocess.DEVNULL\n        )\n    except:\n        pass\n\n    debug_mode = bool(os.environ.get(\"DEBUG_MODE\", False))\n\n    config_filedict = get_configuration_files()\n    config_filelist = get_configuration_files_by_priority()\n\n    print(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\")\n    print(\"Setting User Pip Configuration ...\")\n    print(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\")\n    print(\"\\n######################\\n\")\n\n    pre_existing_configfile = None\n    for config_file in config_filelist:\n        try:\n            if os.path.isfile(config_file):\n                print(\"Editing pip conf file: %s ...\" % config_file)\n                maybe_edit_pip_config_file(\n                    config_file,\n                    config_filedict=config_filedict,\n                    debug_mode=debug_mode\n                )\n                pre_existing_configfile = config_file\n                break\n        except (FileNotFoundError, PermissionError) as e:\n            print(\"Error: {}: {}\".format(e.__class__.__name__, str(e)))\n            pass\n\n    if pre_existing_configfile is None:\n        for config_file in config_filelist:\n            print(\"\\nProcessing pip conf file: %s ...\" % config_file)\n            try:\n                if not os.path.exists(config_file):\n                    print(\"Creating pip conf file: %s ...\" % config_file)\n                    create_pip_config_file(\n                        filepath=config_file,\n                        config_filedict=config_filedict\n                    )\n            except (FileNotFoundError, PermissionError) as e:\n                print(\"Error: {}: {}\".format(e.__class__.__name__, str(e)))\n                pass\n    else:\n        with open(pre_existing_configfile, 'r') as _file:\n            original_content = _file.readlines()\n\n        for config_file in config_filelist:\n            print(\"\\nProcessing pip conf file: %s ...\" % config_file)\n            try:\n\n                try:\n                    with open(config_file, 'r') as _file:\n                        backup_content = _file.readlines()\n                except:\n                    pass\n\n                try:\n                    os.remove(config_file)\n                    os.remove(config_file.old)\n                    with open(\"%s.old\" % config_file, 'w') as _file:\n                        _file.writelines(backup_content)\n                except:\n                    pass\n\n                with open(config_file, 'w') as _file:\n                    _file.writelines(original_content)\n\n            except (FileNotFoundError, PermissionError) as e:\n                print(\"Error: {}: {}\".format(e.__class__.__name__, str(e)))\n                pass\n\n    print(\"\\n######################\\n\")\n\n    time.sleep(2)  # allow readable logs in verbose logs. Please do not delete.",
          "triple_sequences": [
            {
              "action_api": "subprocess.call()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "shlex.split(\"nvidia_pyindex uninstall\")",
              "object_description": "Shell command",
              "object_id": "shell_command",
              "intention_description": "Execute command",
              "intention_id": "execute_command"
            },
            {
              "action_api": "os.environ.get()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "\"DEBUG_MODE\"",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "get_configuration_files()",
              "action_description": "Instantiates Setup class",
              "action_id": "init_setup_class",
              "object": "",
              "object_description": "",
              "object_id": "",
              "intention_description": "Access configuration value",
              "intention_id": "access_configuration_value"
            },
            {
              "action_api": "get_configuration_files_by_priority()",
              "action_description": "Instantiates Setup class",
              "action_id": "init_setup_class",
              "object": "",
              "object_description": "",
              "object_id": "",
              "intention_description": "Access configuration value",
              "intention_id": "access_configuration_value"
            },
            {
              "action_api": "os.path.isfile()",
              "action_description": "Checks if specified path exists and is a file",
              "action_id": "check_file_is_file",
              "object": "config_file",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "maybe_edit_pip_config_file()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "config_file, config_filedict=config_filedict, debug_mode=debug_mode",
              "object_description": "Function and arguments",
              "object_id": "function_with_arguments",
              "intention_description": "Access configuration value",
              "intention_id": "access_configuration_value"
            },
            {
              "action_api": "os.path.exists()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "config_file",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "create_pip_config_file()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "filepath=config_file, config_filedict=config_filedict",
              "object_description": "Function and arguments",
              "object_id": "function_with_arguments",
              "intention_description": "Access configuration value",
              "intention_id": "access_configuration_value"
            },
            {
              "action_api": "open()",
              "action_description": "File opening operations for reading (normal reading, binary reading)",
              "action_id": "basic_read_operations",
              "object": "pre_existing_configfile, 'r'",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Read file content",
              "intention_id": "read_file_content"
            },
            {
              "action_api": "file.readlines()",
              "action_description": "File opening operations for reading (normal reading, binary reading)",
              "action_id": "basic_read_operations",
              "object": "",
              "object_description": "",
              "object_id": "",
              "intention_description": "Read file content",
              "intention_id": "read_file_content"
            },
            {
              "action_api": "open()",
              "action_description": "File opening operations for reading (normal reading, binary reading)",
              "action_id": "basic_read_operations",
              "object": "config_file, 'r'",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Read file content",
              "intention_id": "read_file_content"
            },
            {
              "action_api": "file.readlines()",
              "action_description": "File opening operations for reading (normal reading, binary reading)",
              "action_id": "basic_read_operations",
              "object": "",
              "object_description": "",
              "object_id": "",
              "intention_description": "Read file content",
              "intention_id": "read_file_content"
            },
            {
              "action_api": "os.remove()",
              "action_description": "Deletes specified file from filesystem",
              "action_id": "delete_file",
              "object": "config_file",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Delete file",
              "intention_id": "delete_file"
            },
            {
              "action_api": "os.remove()",
              "action_description": "Deletes specified file from filesystem",
              "action_id": "delete_file",
              "object": "config_file.old",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Delete file",
              "intention_id": "delete_file"
            },
            {
              "action_api": "open()",
              "action_description": "File opening operations for writing (normal writing, binary writing)",
              "action_id": "basic_write_operations",
              "object": "\"%s.old\" % config_file, 'w'",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Open file for writing",
              "intention_id": "open_file_writing"
            },
            {
              "action_api": "file.writelines()",
              "action_description": "File opening operations for writing (normal writing, binary writing)",
              "action_id": "basic_write_operations",
              "object": "backup_content",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "open()",
              "action_description": "File opening operations for writing (normal writing, binary writing)",
              "action_id": "basic_write_operations",
              "object": "config_file, 'w'",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Open file for writing",
              "intention_id": "open_file_writing"
            },
            {
              "action_api": "file.writelines()",
              "action_description": "File opening operations for writing (normal writing, binary writing)",
              "action_id": "basic_write_operations",
              "object": "original_content",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            },
            {
              "action_api": "time.sleep()",
              "action_description": "Suspends execution",
              "action_id": "suspend_execution",
              "object": "2",
              "object_description": "Delay duration in seconds",
              "object_id": "delay_duration",
              "intention_description": "Delay next operation",
              "intention_id": "delay_next_operation"
            }
          ]
        }
      ]
    }
  ]
}