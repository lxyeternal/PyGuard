{
  "metadata": {
    "package_name": "pydoop-2",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign/pydoop-2.0.0.json",
    "dataset_type": "benign"
  },
  "code_files": [
    {
      "pyfile": "setup.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/pydoop-2.0.0/pydoop-2.0.0/setup.py",
      "line_number": "229",
      "type_description": "code-execution",
      "context_snippet": "class JavaBuilder(object):\n\n    def __init__(self, build_temp, build_lib):\n        self.build_temp = build_temp\n        self.build_lib = build_lib\n        self.java_libs = [JavaLib()]\n\n    def run(self):\n        for jlib in self.java_libs:\n            self.__build_java_lib(jlib)\n\n    def __build_java_lib(self, jlib):\n        package_path = os.path.join(self.build_lib, \"pydoop\")\n        compile_cmd = \"javac\"\n        if jlib.classpath:\n            classpath = [jlib.classpath]\n            for src in jlib.dependencies:\n                dest = os.path.join(package_path, os.path.basename(src))\n                shutil.copyfile(src, dest)\n                classpath.append(dest)\n            compile_cmd += \" -classpath %s\" % (':'.join(classpath))\n        else:\n            log.warn(\n                \"WARNING: could not set classpath, java code may not compile\"\n            )\n        class_dir = os.path.join(\n            self.build_temp, \"pipes\"\n        )\n        jar_path = os.path.join(package_path, jlib.jar_name)\n        if not os.path.exists(class_dir):\n            os.mkdir(class_dir)\n        compile_cmd += \" -d '%s'\" % class_dir\n        log.info(\"Compiling Java classes\")\n        for f in jlib.java_files:\n            compile_cmd += \" %s\" % f\n        ret = os.system(compile_cmd)\n        if ret:\n            raise DistutilsSetupError(\n                \"Error compiling java component.  Command: %s\" % compile_cmd\n            )\n        log.info(\"Copying properties file\")\n        for p in jlib.properties:\n            prop_file_dest = os.path.join(class_dir, p[0])\n            shutil.copyfile(p[1], prop_file_dest)\n        log.info(\"Making Jar: %s\", jar_path)\n        package_cmd = \"jar -cf %(jar_path)s -C %(class_dir)s ./it\" % {\n            'jar_path': jar_path, 'class_dir': class_dir\n        }\n        log.info(\"Packaging Java classes\")\n        log.info(\"Command: %s\", package_cmd)\n        ret = os.system(package_cmd)\n        if ret:\n            raise DistutilsSetupError(\n                \"Error packaging java component.  Command: %s\" % package_cmd\n            )",
      "hash_value": "9a3805661d08704d5e66150bf0b11885",
      "detection_index": 1,
      "code_snippets": [
        {
          "snippet": "class JavaBuilder(object):\n\n    def __init__(self, build_temp, build_lib):\n        self.build_temp = build_temp\n        self.build_lib = build_lib\n        self.java_libs = [JavaLib()]\n\n    def run(self):\n        for jlib in self.java_libs:\n            self.__build_java_lib(jlib)\n\n    def __build_java_lib(self, jlib):\n        package_path = os.path.join(self.build_lib, \"pydoop\")\n        compile_cmd = \"javac\"\n        if jlib.classpath:\n            classpath = [jlib.classpath]\n            for src in jlib.dependencies:\n                dest = os.path.join(package_path, os.path.basename(src))\n                shutil.copyfile(src, dest)\n                classpath.append(dest)\n            compile_cmd += \" -classpath %s\" % (':'.join(classpath))\n        else:\n            log.warn(\n                \"WARNING: could not set classpath, java code may not compile\"\n            )\n        class_dir = os.path.join(\n            self.build_temp, \"pipes\"\n        )\n        jar_path = os.path.join(package_path, jlib.jar_name)\n        if not os.path.exists(class_dir):\n            os.mkdir(class_dir)\n        compile_cmd += \" -d '%s'\" % class_dir\n        log.info(\"Compiling Java classes\")\n        for f in jlib.java_files:\n            compile_cmd += \" %s\" % f\n        ret = os.system(compile_cmd)\n        if ret:\n            raise DistutilsSetupError(\n                \"Error compiling java component.  Command: %s\" % compile_cmd\n            )\n        log.info(\"Copying properties file\")\n        for p in jlib.properties:\n            prop_file_dest = os.path.join(class_dir, p[0])\n            shutil.copyfile(p[1], prop_file_dest)\n        log.info(\"Making Jar: %s\", jar_path)\n        package_cmd = \"jar -cf %(jar_path)s -C %(class_dir)s ./it\" % {\n            'jar_path': jar_path, 'class_dir': class_dir\n        }\n        log.info(\"Packaging Java classes\")\n        log.info(\"Command: %s\", package_cmd)\n        ret = os.system(package_cmd)\n        if ret:\n            raise DistutilsSetupError(\n                \"Error packaging java component.  Command: %s\" % package_cmd\n            )",
          "triple_sequences": [
            {
              "action_api": "os.path.join()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "self.build_lib, \"pydoop\"",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "os.path.basename()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "src",
              "object_description": "Local file or directory name",
              "object_id": "local_file_or_directory_name",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "os.path.join()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "package_path, os.path.basename(src)",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "shutil.copyfile()",
              "action_description": "Copies file to destination",
              "action_id": "copy_file",
              "object": "src, dest",
              "object_description": "Local file or directory",
              "object_id": "local_file_or_directory",
              "intention_description": "Copy file to temporary directory",
              "intention_id": "copy_file_temp_directory"
            },
            {
              "action_api": "os.path.join()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "self.build_temp, \"pipes\"",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "os.path.join()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "package_path, jlib.jar_name",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "os.path.exists()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "class_dir",
              "object_description": "Directory path",
              "object_id": "directory_path",
              "intention_description": "Check if file or directory exists",
              "intention_id": "check_file_existence"
            },
            {
              "action_api": "os.mkdir()",
              "action_description": "Creates directory, ignoring if it already exists",
              "action_id": "create_directory",
              "object": "class_dir",
              "object_description": "Directory path",
              "object_id": "directory_path",
              "intention_description": "Ensure directory exists",
              "intention_id": "ensure_directory_exists"
            },
            {
              "action_api": "os.system()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "compile_cmd",
              "object_description": "Shell command",
              "object_id": "shell_command",
              "intention_description": "Execute command",
              "intention_id": "execute_command"
            },
            {
              "action_api": "os.path.join()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "class_dir, p[0]",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "shutil.copyfile()",
              "action_description": "Copies file to destination",
              "action_id": "copy_file",
              "object": "p[1], prop_file_dest",
              "object_description": "Local file or directory",
              "object_id": "local_file_or_directory",
              "intention_description": "Copy file to temporary directory",
              "intention_id": "copy_file_temp_directory"
            },
            {
              "action_api": "os.system()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "package_cmd",
              "object_description": "Shell command",
              "object_id": "shell_command",
              "intention_description": "Execute command",
              "intention_id": "execute_command"
            }
          ]
        }
      ]
    }
  ]
}