{
  "metadata": {
    "package_name": "pyproj-3",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign/pyproj-3.7.1.json",
    "dataset_type": "benign"
  },
  "code_files": [
    {
      "pyfile": "setup.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/pyproj-3.7.1/pyproj-3.7.1/setup.py",
      "line_number": "43",
      "type_description": "code-execution",
      "context_snippet": "import os\nimport platform\nimport re\nimport shutil\nimport subprocess\nimport sys\nfrom pathlib import Path\n\nPROJ_VERSION_SEARCH = re.compile(r\".*Rel\\.\\s+(?P<version>\\d+\\.\\d+\\.\\d+).*\")\nVERSION_SEARCH = re.compile(r\".*(?P<version>\\d+\\.\\d+\\.\\d+).*\")\n\ndef _parse_version(version: str) -> tuple[int, int, int]:\n    match = VERSION_SEARCH.search(version)\n    if not match:\n        raise SystemExit(\n            f\"PROJ version unable to be determined from {version}. \"\n            \"Please set the PROJ_VERSION environment variable.\"\n        )\n    return tuple(\n        int(ver) for ver in match.groupdict()[\"version\"].split(\".\", maxsplit=2)\n    )\n\ndef get_proj_version(proj_dir: Path) -> tuple[int, int, int]:\n    \"\"\"\n    Determine PROJ version.\n\n    Prefer PROJ_VERSION environment variable.\n    If PROJ_VERSION is not set, try to determine the version from the PROJ executable.\n    \"\"\"\n    proj_version = os.environ.get(\"PROJ_VERSION\")\n    if proj_version:\n        return _parse_version(proj_version)\n    proj = proj_dir / \"bin\" / \"proj\"\n    proj_ver = subprocess.check_output(str(proj), stderr=subprocess.STDOUT).decode(\n        \"ascii\"\n    )\n    match = PROJ_VERSION_SEARCH.search(proj_ver)\n    if not match:\n        raise SystemExit(\n            \"PROJ version unable to be determined. \"\n            \"Please set the PROJ_VERSION environment variable.\"\n        )\n    return _parse_version(match.groupdict()[\"version\"])",
      "hash_value": "ad1d7fa8512e3446beb8ee554b9b68b6",
      "detection_index": 1,
      "code_snippets": [
        {
          "snippet": "import os\nimport platform\nimport re\nimport shutil\nimport subprocess\nimport sys\nfrom pathlib import Path\n\nPROJ_VERSION_SEARCH = re.compile(r\".*Rel\\.\\s+(?P<version>\\d+\\.\\d+\\.\\d+).*\")\nVERSION_SEARCH = re.compile(r\".*(?P<version>\\d+\\.\\d+\\.\\d+).*\")\n\ndef _parse_version(version: str) -> tuple[int, int, int]:\n    match = VERSION_SEARCH.search(version)\n    if not match:\n        raise SystemExit(\n            f\"PROJ version unable to be determined from {version}. \"\n            \"Please set the PROJ_VERSION environment variable.\"\n        )\n    return tuple(\n        int(ver) for ver in match.groupdict()[\"version\"].split(\".\", maxsplit=2)\n    )\n\ndef get_proj_version(proj_dir: Path) -> tuple[int, int, int]:\n    \"\"\"\n    Determine PROJ version.\n\n    Prefer PROJ_VERSION environment variable.\n    If PROJ_VERSION is not set, try to determine the version from the PROJ executable.\n    \"\"\"\n    proj_version = os.environ.get(\"PROJ_VERSION\")\n    if proj_version:\n        return _parse_version(proj_version)\n    proj = proj_dir / \"bin\" / \"proj\"\n    proj_ver = subprocess.check_output(str(proj), stderr=subprocess.STDOUT).decode(\n        \"ascii\"\n    )\n    match = PROJ_VERSION_SEARCH.search(proj_ver)\n    if not match:\n        raise SystemExit(\n            \"PROJ version unable to be determined. \"\n            \"Please set the PROJ_VERSION environment variable.\"\n        )\n    return _parse_version(match.groupdict()[\"version\"])",
          "triple_sequences": [
            {
              "action_api": "os.environ.get()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "PROJ_VERSION",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "subprocess.check_output()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "str(proj)",
              "object_description": "Shell command",
              "object_id": "shell_command",
              "intention_description": "Collect command output",
              "intention_id": "collect_command_output"
            },
            {
              "action_api": "str.decode()",
              "action_description": "Decodes bytes using default codec",
              "action_id": "decode_bytes_default",
              "object": "\"ascii\"",
              "object_description": "Character encoding type",
              "object_id": "character_encoding_type",
              "intention_description": "Decode command output",
              "intention_id": "decode_command_output"
            },
            {
              "action_api": "PROJ_VERSION_SEARCH.search()",
              "action_description": "Compiles regular expression pattern",
              "action_id": "compile_regex",
              "object": "proj_ver",
              "object_description": "Regex file content",
              "object_id": "regex_file_content",
              "intention_description": "Prepare string for further processing",
              "intention_id": "prepare_string_processing"
            },
            {
              "action_api": "VERSION_SEARCH.search()",
              "action_description": "Compiles regular expression pattern",
              "action_id": "compile_regex",
              "object": "version",
              "object_description": "Regex file content",
              "object_id": "regex_file_content",
              "intention_description": "Prepare string for further processing",
              "intention_id": "prepare_string_processing"
            },
            {
              "action_api": "match.groupdict()",
              "action_description": "Compiles regular expression pattern",
              "action_id": "compile_regex",
              "object": "",
              "object_description": "",
              "object_id": "",
              "intention_description": "Prepare string for further processing",
              "intention_id": "prepare_string_processing"
            },
            {
              "action_api": "str.split()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "\".\"",
              "object_description": "Space delimiter",
              "object_id": "space_delimiter",
              "intention_description": "Prepare string for further processing",
              "intention_id": "prepare_string_processing"
            },
            {
              "action_api": "int()",
              "action_description": "Converts integer to Unicode character",
              "action_id": "convert_int_to_char",
              "object": "ver",
              "object_description": "Character from numeric key string",
              "object_id": "character_from_numeric_key",
              "intention_description": "Convert string to integer",
              "intention_id": "convert_string_to_integer"
            }
          ]
        }
      ]
    }
  ]
}