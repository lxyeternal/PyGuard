{
  "metadata": {
    "package_name": "p4python-2024",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign/p4python-2024.2.2682690.json",
    "dataset_type": "benign"
  },
  "code_files": [
    {
      "pyfile": "setup.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/p4python-2024.2.2682690/p4python-2024.2.2682690/setup.py",
      "line_number": "160",
      "type_description": "code-execution",
      "context_snippet": "class p4build_ext(build_ext_module):\n    \"\"\"Subclass of build subcommand for passing paths to compiler and linker\"\"\"\n\n    user_options = build_ext_module.user_options + [\n        ('ssl=', None, 'specify ssl library directory'),\n        ('apidir=', None, 'specify root of p4api directory'),\n    ]\n\n    def initialize_options(self, *args, **kwargs):\n        self.apidir = os.getenv(\"apidir\", None)\n        self.ssl = os.getenv(\"ssl\", None)\n        build_ext_module.initialize_options(self, *args, **kwargs)\n\n    def get_config(self, option):\n        config = ConfigParser()\n        config.read(P4_CONFIG_FILE)\n        dir = \"\"\n        if config.has_section(P4_CONFIG_SECTION):\n            if config.has_option(P4_CONFIG_SECTION, option):\n                dir = config.get(P4_CONFIG_SECTION, option)\n        return dir\n\n    def finalize_options(self):\n        global p4_api_dir, p4_ssl_dir\n\n        # options passed to \"build\" are copied into globals for use in \"build_ext\"\n        if p4_api_dir:\n            self.apidir = p4_api_dir\n\n        if p4_ssl_dir:\n            self.ssl = p4_ssl_dir\n\n        # if we didn't get values from the command line, check the config file\n        if not self.apidir:\n            self.apidir = self.get_config(P4_CONFIG_P4APIDIR)\n\n        if not self.ssl:\n            self.ssl = self.get_config(P4_CONFIG_SSLDIR)\n\n        build_ext_module.finalize_options(self)\n\n    def is_super(self):\n        rv = subprocess.check_output(\"id -u\", shell=True)\n        if int(rv) != 0:\n            return False\n        return True",
      "hash_value": "ab3c4c140520bd94a8409435900000f3",
      "detection_index": 1,
      "code_snippets": [
        {
          "snippet": "class p4build_ext(build_ext_module):\n    \"\"\"Subclass of build subcommand for passing paths to compiler and linker\"\"\"\n\n    user_options = build_ext_module.user_options + [\n        ('ssl=', None, 'specify ssl library directory'),\n        ('apidir=', None, 'specify root of p4api directory'),\n    ]\n\n    def initialize_options(self, *args, **kwargs):\n        self.apidir = os.getenv(\"apidir\", None)\n        self.ssl = os.getenv(\"ssl\", None)\n        build_ext_module.initialize_options(self, *args, **kwargs)\n\n    def get_config(self, option):\n        config = ConfigParser()\n        config.read(P4_CONFIG_FILE)\n        dir = \"\"\n        if config.has_section(P4_CONFIG_SECTION):\n            if config.has_option(P4_CONFIG_SECTION, option):\n                dir = config.get(P4_CONFIG_SECTION, option)\n        return dir\n\n    def finalize_options(self):\n        global p4_api_dir, p4_ssl_dir\n\n        # options passed to \"build\" are copied into globals for use in \"build_ext\"\n        if p4_api_dir:\n            self.apidir = p4_api_dir\n\n        if p4_ssl_dir:\n            self.ssl = p4_ssl_dir\n\n        # if we didn't get values from the command line, check the config file\n        if not self.apidir:\n            self.apidir = self.get_config(P4_CONFIG_P4APIDIR)\n\n        if not self.ssl:\n            self.ssl = self.get_config(P4_CONFIG_SSLDIR)\n\n        build_ext_module.finalize_options(self)\n\n    def is_super(self):\n        rv = subprocess.check_output(\"id -u\", shell=True)\n        if int(rv) != 0:\n            return False\n        return True",
          "triple_sequences": [
            {
              "action_api": "os.getenv()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "\"apidir\", None",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "os.getenv()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "\"ssl\", None",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "ConfigParser()",
              "action_description": "Instantiates configuration parser object",
              "action_id": "init_setup_class",
              "object": "",
              "object_description": "",
              "object_id": "",
              "intention_description": "Access configuration value",
              "intention_id": "access_configuration_value"
            },
            {
              "action_api": "config.read()",
              "action_description": "Opens file for reading",
              "action_id": "basic_read_operations",
              "object": "P4_CONFIG_FILE",
              "object_description": "System configuration file",
              "object_id": "system_config_file",
              "intention_description": "Access file content",
              "intention_id": "access_file_content"
            },
            {
              "action_api": "config.has_section()",
              "action_description": "Checks if specified path exists and is a directory",
              "action_id": "check_directory_exists",
              "object": "P4_CONFIG_SECTION",
              "object_description": "Directory path",
              "object_id": "directory_path",
              "intention_description": "Determine directory presence",
              "intention_id": "determine_directory_presence"
            },
            {
              "action_api": "config.has_option()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "P4_CONFIG_SECTION, option",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Determine file presence",
              "intention_id": "determine_file_presence"
            },
            {
              "action_api": "config.get()",
              "action_description": "Retrieves value and data type for registry value",
              "action_id": "get_registry_value",
              "object": "P4_CONFIG_SECTION, option",
              "object_description": "Registry value",
              "object_id": "registry_value",
              "intention_description": "Access configuration value",
              "intention_id": "access_configuration_value"
            },
            {
              "action_api": "subprocess.check_output()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "\"id -u\", shell=True",
              "object_description": "Shell command",
              "object_id": "shell_command",
              "intention_description": "Determine if user is administrator",
              "intention_id": "determine_administrator_status"
            },
            {
              "action_api": "int()",
              "action_description": "Converts string to integer",
              "action_id": "convert_char_to_int",
              "object": "rv",
              "object_description": "",
              "object_id": "",
              "intention_description": "Convert string to integer",
              "intention_id": "convert_string_to_integer"
            }
          ]
        }
      ]
    }
  ]
}