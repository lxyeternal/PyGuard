{
  "metadata": {
    "package_name": "unav-0",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign/unav-0.1.40.json",
    "dataset_type": "benign"
  },
  "code_files": [
    {
      "pyfile": "d2net.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/unav-0.1.40/unav-0.1.40/unav/third_party/local_feature/SuperPoint_SuperGlue/extractors/d2net.py",
      "line_number": "27",
      "type_description": "shady-links",
      "context_snippet": "import sys\nfrom pathlib import Path\nimport subprocess\nimport logging\nimport torch\n\nfrom unav.third_party.local_feature.SuperPoint_SuperGlue.utils.base_model import BaseModel\n\nd2net_path = Path(__file__).parent / '../../third_party/d2net'\nsys.path.append(str(d2net_path))\nfrom lib.model_test import D2Net as _D2Net\nfrom lib.pyramid import process_multiscale\n\n\nclass D2Net(BaseModel):\n    default_conf = {\n        'model_name': 'd2_tf.pth',\n        'use_relu': True,\n        'multiscale': False,\n    }\n    required_inputs = ['image']\n\n    def _init(self, conf):\n        model_file = d2net_path / 'models' / conf['model_name']\n        if not model_file.exists():\n            model_file.parent.mkdir(exist_ok=True)\n            cmd = ['wget', 'https://dsmn.ml/files/d2-net/'+conf['model_name'],\n                   '-O', str(model_file)]\n            ret = subprocess.call(cmd)\n            if ret != 0:\n                logging.warning(\n                    f'Cannot download the D2-Net model with `{cmd}`.')\n                exit(ret)\n\n        self.net = _D2Net(\n            model_file=model_file,\n            use_relu=conf['use_relu'],\n            use_cuda=False)",
      "hash_value": "5015d2745bbc2f6d3e93196fd5e96c16",
      "detection_index": 1,
      "code_snippets": [
        {
          "snippet": "import sys\nfrom pathlib import Path\nimport subprocess\nimport logging\nimport torch\n\nfrom unav.third_party.local_feature.SuperPoint_SuperGlue.utils.base_model import BaseModel\n\nd2net_path = Path(__file__).parent / '../../third_party/d2net'\nsys.path.append(str(d2net_path))\nfrom lib.model_test import D2Net as _D2Net\nfrom lib.pyramid import process_multiscale\n\n\nclass D2Net(BaseModel):\n    default_conf = {\n        'model_name': 'd2_tf.pth',\n        'use_relu': True,\n        'multiscale': False,\n    }\n    required_inputs = ['image']\n\n    def _init(self, conf):\n        model_file = d2net_path / 'models' / conf['model_name']\n        if not model_file.exists():\n            model_file.parent.mkdir(exist_ok=True)\n            cmd = ['wget', 'https://dsmn.ml/files/d2-net/'+conf['model_name'],\n                   '-O', str(model_file)]\n            ret = subprocess.call(cmd)\n            if ret != 0:\n                logging.warning(\n                    f'Cannot download the D2-Net model with `{cmd}`.')\n                exit(ret)\n\n        self.net = _D2Net(\n            model_file=model_file,\n            use_relu=conf['use_relu'],\n            use_cuda=False)",
          "triple_sequences": [
            {
              "action_api": "Path.exists()",
              "action_description": "Checks if specified path exists in filesystem",
              "action_id": "check_path_exists",
              "object": "model_file",
              "object_description": "Local file",
              "object_id": "local_file",
              "intention_description": "Determine_file_presence",
              "intention_id": "determine_file_presence"
            },
            {
              "action_api": "Path.mkdir()",
              "action_description": "Creates directory, ignoring if it already exists",
              "action_id": "create_directory",
              "object": "model_file.parent",
              "object_description": "Custom directory",
              "object_id": "custom_directory",
              "intention_description": "Ensure directory exists",
              "intention_id": "ensure_directory_exists"
            },
            {
              "action_api": "subprocess.call()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "['wget', 'https://dsmn.ml/files/d2-net/'+conf['model_name'], '-O', str(model_file)]",
              "object_description": "Shell command",
              "object_id": "shell_command",
              "intention_description": "Download remote content",
              "intention_id": "download_remote_content"
            },
            {
              "action_api": "logging.warning()",
              "action_description": "Writes log message to file or console",
              "action_id": "write_file_content",
              "object": "f'Cannot download the D2-Net model with `{cmd}`.'",
              "object_description": "Error message text",
              "object_id": "error_message",
              "intention_description": "Access command error output",
              "intention_id": "access_command_error_output"
            },
            {
              "action_api": "exit()",
              "action_description": "Exits program",
              "action_id": "exit_program",
              "object": "ret",
              "object_description": "Error message text",
              "object_id": "error_message",
              "intention_description": "Terminate program execution",
              "intention_id": "terminate_program_execution"
            },
            {
              "action_api": "_D2Net()",
              "action_description": "Instantiates D2Net class",
              "action_id": "init_grabber_class",
              "object": "model_file=model_file, use_relu=conf['use_relu'], use_cuda=False",
              "object_description": "Function and arguments",
              "object_id": "function_with_arguments",
              "intention_description": "Initialize shell object",
              "intention_id": "initialize_shell_object"
            }
          ]
        }
      ]
    }
  ]
}