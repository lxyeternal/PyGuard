{
  "metadata": {
    "package_name": "mecab_python3-1",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign/mecab_python3-1.0.11.dev9.json",
    "dataset_type": "benign"
  },
  "code_files": [
    {
      "pyfile": "setup.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/mecab_python3-1.0.11.dev9/mecab_python3-1.0.11.dev9/setup.py",
      "line_number": "95",
      "type_description": "code-execution",
      "context_snippet": "import os\nimport subprocess\nimport sys\n\ndef maybe_build_libmecab_and_adjust_flags(ext):\n    if USE_BUNDLED_LIBMECAB:\n        subprocess.check_call([\n            sys.executable,\n            os.path.join(SRCDIR, \"scripts/build-bundled-libmecab.py\"),\n            SRCDIR\n        ])\n        inc_dir  = [os.path.join(SRCDIR, \"build/libmecab/mecab/src\")]\n        lib_dirs = [os.path.join(SRCDIR, \"build/libmecab/mecab/src\")]\n\n        # mecab-config --libs-only-l will produce the list of\n        # libraries needed to link with a hypothetical *shared*\n        # libmecab; we built a *static* libmecab, so what we actually\n        # need is -lmecab + the value of the LIBS substitution\n        # variable from the Makefile.\n        libs = [\"mecab\"]\n        with open(os.path.join(SRCDIR, \"build/libmecab/mecab/Makefile\"),\n                  \"rt\") as fp:\n            for line in fp:\n                if line.startswith(\"LIBS =\"):\n                    for lib in line.partition(\"=\")[2].split():\n                        if lib[:2] == \"-l\":\n                            libs.append(lib[2:])\n                    break\n\n    else:\n        # Ensure use of the \"C\" locale when invoking mecab-config.\n        # (\"C.UTF-8\" would be better if available, but there's no\n        # good way to find out whether it's available.)\n        clocale_env = {}\n        for k, v in os.environ.items():\n            if not (k.startswith(\"LC_\") or k == \"LANG\" or k == \"LANGUAGE\"):\n                clocale_env[k] = v\n        clocale_env[\"LC_ALL\"] = \"C\"\n\n        def mecab_config(arg):\n            output = subprocess.check_output([\"mecab-config\", arg],\n                                             env=clocale_env)\n            if not isinstance(output, str):\n                output = output.decode(\"utf-8\")\n            return output.split()\n\n        inc_dir  = mecab_config(\"--inc-dir\")\n        lib_dirs = mecab_config(\"--libs-only-L\")\n        libs     = mecab_config(\"--libs-only-l\")\n\n    swig_opts = [\"-O\", \"-builtin\", \"-c++\"]\n\n    if sys.version_info.major >= 3:\n        swig_opts.append(\"-py3\")\n\n    swig_opts.extend(\"-I\"+d for d in inc_dir)\n\n    ext.include_dirs = inc_dir\n    ext.library_dirs = lib_dirs\n    ext.libraries    = libs\n    ext.swig_opts    = swig_opts\n    ext.extra_compile_args = [\"-Wno-unused-variable\"]\n\n    sys.stderr.write(\"Extension build configuration adjusted:\\n\"\n                     \" include_dirs = {!r}\\n\"\n                     \" library_dirs = {!r}\\n\"\n                     \" libraries    = {!r}\\n\"\n                     \" swig_opts    = {!r}\\n\"\n                     .format(inc_dir, lib_dirs, libs, swig_opts))",
      "hash_value": "636911285a7128f95890e62cc93481d9",
      "detection_index": 1,
      "code_snippets": [
        {
          "snippet": "import os\nimport subprocess\nimport sys\n\ndef maybe_build_libmecab_and_adjust_flags(ext):\n    if USE_BUNDLED_LIBMECAB:\n        subprocess.check_call([\n            sys.executable,\n            os.path.join(SRCDIR, \"scripts/build-bundled-libmecab.py\"),\n            SRCDIR\n        ])\n        inc_dir  = [os.path.join(SRCDIR, \"build/libmecab/mecab/src\")]\n        lib_dirs = [os.path.join(SRCDIR, \"build/libmecab/mecab/src\")]\n\n        # mecab-config --libs-only-l will produce the list of\n        # libraries needed to link with a hypothetical *shared*\n        # libmecab; we built a *static* libmecab, so what we actually\n        # need is -lmecab + the value of the LIBS substitution\n        # variable from the Makefile.\n        libs = [\"mecab\"]\n        with open(os.path.join(SRCDIR, \"build/libmecab/mecab/Makefile\"),\n                  \"rt\") as fp:\n            for line in fp:\n                if line.startswith(\"LIBS =\"):\n                    for lib in line.partition(\"=\")[2].split():\n                        if lib[:2] == \"-l\":\n                            libs.append(lib[2:])\n                    break\n\n    else:\n        # Ensure use of the \"C\" locale when invoking mecab-config.\n        # (\"C.UTF-8\" would be better if available, but there's no\n        # good way to find out whether it's available.)\n        clocale_env = {}\n        for k, v in os.environ.items():\n            if not (k.startswith(\"LC_\") or k == \"LANG\" or k == \"LANGUAGE\"):\n                clocale_env[k] = v\n        clocale_env[\"LC_ALL\"] = \"C\"\n\n        def mecab_config(arg):\n            output = subprocess.check_output([\"mecab-config\", arg],\n                                             env=clocale_env)\n            if not isinstance(output, str):\n                output = output.decode(\"utf-8\")\n            return output.split()\n\n        inc_dir  = mecab_config(\"--inc-dir\")\n        lib_dirs = mecab_config(\"--libs-only-L\")\n        libs     = mecab_config(\"--libs-only-l\")\n\n    swig_opts = [\"-O\", \"-builtin\", \"-c++\"]\n\n    if sys.version_info.major >= 3:\n        swig_opts.append(\"-py3\")\n\n    swig_opts.extend(\"-I\"+d for d in inc_dir)\n\n    ext.include_dirs = inc_dir\n    ext.library_dirs = lib_dirs\n    ext.libraries    = libs\n    ext.swig_opts    = swig_opts\n    ext.extra_compile_args = [\"-Wno-unused-variable\"]\n\n    sys.stderr.write(\"Extension build configuration adjusted:\\n\"\n                     \" include_dirs = {!r}\\n\"\n                     \" library_dirs = {!r}\\n\"\n                     \" libraries    = {!r}\\n\"\n                     \" swig_opts    = {!r}\\n\"\n                     .format(inc_dir, lib_dirs, libs, swig_opts))",
          "triple_sequences": [
            {
              "action_api": "subprocess.check_call()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "[sys.executable, os.path.join(SRCDIR, \"scripts/build-bundled-libmecab.py\"), SRCDIR]",
              "object_description": "Shell command",
              "object_id": "shell_command",
              "intention_description": "Execute command",
              "intention_id": "execute_command"
            },
            {
              "action_api": "os.path.join()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "SRCDIR, \"scripts/build-bundled-libmecab.py\"",
              "object_description": "Path segment",
              "object_id": "path_segment",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "os.path.join()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "SRCDIR, \"build/libmecab/mecab/src\"",
              "object_description": "Path segment",
              "object_id": "path_segment",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "open()",
              "action_description": "File opening operations for reading (normal reading, binary reading)",
              "action_id": "basic_read_operations",
              "object": "os.path.join(SRCDIR, \"build/libmecab/mecab/Makefile\"), \"rt\"",
              "object_description": "File path",
              "object_id": "file_path",
              "intention_description": "Open file for reading",
              "intention_id": "open_file_reading"
            },
            {
              "action_api": "os.environ.items()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "subprocess.check_output()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "[\"mecab-config\", arg], env=clocale_env",
              "object_description": "Shell command",
              "object_id": "shell_command",
              "intention_description": "Execute command",
              "intention_id": "execute_command"
            },
            {
              "action_api": "str.decode()",
              "action_description": "Decodes bytes using default codec",
              "action_id": "decode_bytes_default",
              "object": "\"utf-8\"",
              "object_description": "Character encoding type",
              "object_id": "character_encoding_type",
              "intention_description": "Decode bytes to string",
              "intention_id": "decode_bytes_to_string"
            },
            {
              "action_api": "sys.stderr.write()",
              "action_description": "Writes file content",
              "action_id": "basic_write_operations",
              "object": "\"Extension build configuration adjusted:\\n include_dirs = {!r}\\n library_dirs = {!r}\\n libraries    = {!r}\\n swig_opts    = {!r}\\n\".format(inc_dir, lib_dirs, libs, swig_opts)",
              "object_description": "File text",
              "object_id": "file_text",
              "intention_description": "Write file content",
              "intention_id": "write_file_content"
            }
          ]
        }
      ]
    }
  ]
}