{
  "metadata": {
    "package_name": "apsw-3",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign/apsw-3.49.1.0.json",
    "dataset_type": "benign"
  },
  "code_files": [
    {
      "pyfile": "setup.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/apsw-3.49.1.0/apsw-3.49.1.0/setup.py",
      "line_number": "198",
      "type_description": "code-execution",
      "context_snippet": "class build_test_extension(Command):\n    description = \"Compiles APSW test loadable extension\"\n\n    user_options = []\n\n    def initialize_options(self):\n        pass\n\n    def finalize_options(self):\n        pass\n\n    def run(self):\n        name = \"testextension.sqlext\"\n\n        def v(n):\n            return sysconfig.get_config_var(n)\n\n        # unixy platforms have this, and is necessary to match the 32/64 bitness of Python itself\n        if v(\"CC\"):\n            cc = f\"{ v('CC') } { v('CFLAGS') } { v('CCSHARED') } -Isqlite3 -c src/testextension.c\"\n            ld = f\"{ v('LDSHARED') } testextension.o -o { name }\"\n\n            for cmd in cc, ld:\n                print(cmd)\n                subprocess.run(cmd, shell=True, check=True)\n        else:\n            # windows mostly\n            compiler = distutils.ccompiler.new_compiler(verbose=True)\n            compiler.add_include_dir(\"sqlite3\")\n            compiler.add_include_dir(\".\")\n            preargs = [\"/Gd\"] if \"msvc\" in str(compiler.__class__).lower() else [\"-fPIC\"]\n            objs = compiler.compile([\"src/testextension.c\"], extra_preargs=preargs)\n            compiler.link_shared_object(objs, name)\n",
      "hash_value": "455aa53cd49891577094083f3eaea8b7",
      "detection_index": 1,
      "code_snippets": [
        {
          "snippet": "class build_test_extension(Command):\n    description = \"Compiles APSW test loadable extension\"\n\n    user_options = []\n\n    def initialize_options(self):\n        pass\n\n    def finalize_options(self):\n        pass\n\n    def run(self):\n        name = \"testextension.sqlext\"\n\n        def v(n):\n            return sysconfig.get_config_var(n)\n\n        # unixy platforms have this, and is necessary to match the 32/64 bitness of Python itself\n        if v(\"CC\"):\n            cc = f\"{ v('CC') } { v('CFLAGS') } { v('CCSHARED') } -Isqlite3 -c src/testextension.c\"\n            ld = f\"{ v('LDSHARED') } testextension.o -o { name }\"\n\n            for cmd in cc, ld:\n                print(cmd)\n                subprocess.run(cmd, shell=True, check=True)\n        else:\n            # windows mostly\n            compiler = distutils.ccompiler.new_compiler(verbose=True)\n            compiler.add_include_dir(\"sqlite3\")\n            compiler.add_include_dir(\".\")\n            preargs = [\"/Gd\"] if \"msvc\" in str(compiler.__class__).lower() else [\"-fPIC\"]\n            objs = compiler.compile([\"src/testextension.c\"], extra_preargs=preargs)\n            compiler.link_shared_object(objs, name)\n",
          "triple_sequences": [
            {
              "action_api": "sysconfig.get_config_var()",
              "action_description": "Retrieves operating system information",
              "action_id": "get_os_info",
              "object": "CC",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Access configuration value",
              "intention_id": "access_configuration_value"
            },
            {
              "action_api": "sysconfig.get_config_var()",
              "action_description": "Retrieves operating system information",
              "action_id": "get_os_info",
              "object": "CFLAGS",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Access configuration value",
              "intention_id": "access_configuration_value"
            },
            {
              "action_api": "sysconfig.get_config_var()",
              "action_description": "Retrieves operating system information",
              "action_id": "get_os_info",
              "object": "CCSHARED",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Access configuration value",
              "intention_id": "access_configuration_value"
            },
            {
              "action_api": "print()",
              "action_description": "Prints output to standard output",
              "action_id": "get_stdout_stream",
              "object": "cmd",
              "object_description": "",
              "object_id": "",
              "intention_description": "Collect command output",
              "intention_id": "collect_command_output"
            },
            {
              "action_api": "subprocess.run()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "cmd",
              "object_description": "Shell command",
              "object_id": "shell_command",
              "intention_description": "Execute command",
              "intention_id": "execute_command"
            },
            {
              "action_api": "distutils.ccompiler.new_compiler()",
              "action_description": "Instantiates Setup class",
              "action_id": "init_setup_class",
              "object": "verbose=True",
              "object_description": "",
              "object_id": "",
              "intention_description": "Import required module",
              "intention_id": "import_required_module"
            },
            {
              "action_api": "compiler.add_include_dir()",
              "action_description": "Adds field to multipart HTTP request",
              "action_id": "add_multipart_field",
              "object": "sqlite3",
              "object_description": "Directory path",
              "object_id": "directory_path",
              "intention_description": "Prepare directory path",
              "intention_id": "prepare_directory_path"
            },
            {
              "action_api": "compiler.add_include_dir()",
              "action_description": "Adds field to multipart HTTP request",
              "action_id": "add_multipart_field",
              "object": ".",
              "object_description": "Directory path",
              "object_id": "directory_path",
              "intention_description": "Prepare directory path",
              "intention_id": "prepare_directory_path"
            },
            {
              "action_api": "compiler.compile()",
              "action_description": "Compiles source code string into executable code object",
              "action_id": "compile_code_object",
              "object": "[\"src/testextension.c\"]",
              "object_description": "Script file path",
              "object_id": "script_file_path",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "compiler.link_shared_object()",
              "action_description": "Compiles source code string into executable code object",
              "action_id": "compile_code_object",
              "object": "objs, name",
              "object_description": "Compiled Python code string",
              "object_id": "compiled_python_code",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            }
          ]
        }
      ]
    }
  ]
}