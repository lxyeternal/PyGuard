{
  "metadata": {
    "package_name": "jq-1",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign/jq-1.8.0.json",
    "dataset_type": "benign"
  },
  "code_files": [
    {
      "pyfile": "setup.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/jq-1.8.0/jq-1.8.0/setup.py",
      "line_number": "71",
      "type_description": "code-execution",
      "context_snippet": "import os\nimport shlex\nimport subprocess\nimport sys\nimport sysconfig\n\ndef _dep_build_path(relative_path):\n    return os.path.join(os.path.abspath(os.path.join(os.path.dirname(__file__), \"_deps/build\")), relative_path)\n\njq_lib_tarball_path = os.path.join(os.path.abspath(os.path.join(os.path.dirname(__file__), \"deps\")), \"jq-1.7.1.tar.gz\")\njq_lib_dir = _dep_build_path(\"jq-1.7.1\")\n\nclass jq_with_deps_build_ext(build_ext):\n    def _build_lib(self, tarball_path, lib_dir, commands):\n        self._extract_tarball(\n            tarball_path=tarball_path,\n            lib_dir=lib_dir,\n        )\n\n        macosx_deployment_target = sysconfig.get_config_var(\"MACOSX_DEPLOYMENT_TARGET\")\n        if macosx_deployment_target:\n            os.environ['MACOSX_DEPLOYMENT_TARGET'] = str(macosx_deployment_target)\n\n        def run_command(args):\n            print(\"Executing: %s\" % ' '.join(args))\n\n            if os.name == \"nt\":\n                command = [\"msys2.cmd\", \"-c\", \" \".join(shlex.quote(arg) for arg in args)]\n            else:\n                command = args\n\n            subprocess.check_call(command, cwd=lib_dir)\n\n        for command in commands:\n            run_command(command)",
      "hash_value": "4c46bcdbbe9a2f84e40206a7608845e3",
      "detection_index": 1,
      "code_snippets": [
        {
          "snippet": "import os\nimport shlex\nimport subprocess\nimport sys\nimport sysconfig\n\ndef _dep_build_path(relative_path):\n    return os.path.join(os.path.abspath(os.path.join(os.path.dirname(__file__), \"_deps/build\")), relative_path)\n\njq_lib_tarball_path = os.path.join(os.path.abspath(os.path.join(os.path.dirname(__file__), \"deps\")), \"jq-1.7.1.tar.gz\")\njq_lib_dir = _dep_build_path(\"jq-1.7.1\")\n\nclass jq_with_deps_build_ext(build_ext):\n    def _build_lib(self, tarball_path, lib_dir, commands):\n        self._extract_tarball(\n            tarball_path=tarball_path,\n            lib_dir=lib_dir,\n        )\n\n        macosx_deployment_target = sysconfig.get_config_var(\"MACOSX_DEPLOYMENT_TARGET\")\n        if macosx_deployment_target:\n            os.environ['MACOSX_DEPLOYMENT_TARGET'] = str(macosx_deployment_target)\n\n        def run_command(args):\n            print(\"Executing: %s\" % ' '.join(args))\n\n            if os.name == \"nt\":\n                command = [\"msys2.cmd\", \"-c\", \" \".join(shlex.quote(arg) for arg in args)]\n            else:\n                command = args\n\n            subprocess.check_call(command, cwd=lib_dir)\n\n        for command in commands:\n            run_command(command)",
          "triple_sequences": [
            {
              "action_api": "os.path.dirname()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "__file__",
              "object_description": "Script file path",
              "object_id": "script_file_path",
              "intention_description": "Get script file path",
              "intention_id": "get_script_file_path"
            },
            {
              "action_api": "os.path.join()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "os.path.dirname(__file__), \"_deps/build\"",
              "object_description": "Script file path and directory path segment",
              "object_id": "script_file_path",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "os.path.abspath()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "os.path.join(os.path.dirname(__file__), \"_deps/build\")",
              "object_description": "Directory path",
              "object_id": "directory_path",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "os.path.join()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "os.path.abspath(os.path.join(os.path.dirname(__file__), \"_deps/build\")), relative_path",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "os.path.dirname()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "__file__",
              "object_description": "Script file path",
              "object_id": "script_file_path",
              "intention_description": "Get script file path",
              "intention_id": "get_script_file_path"
            },
            {
              "action_api": "os.path.join()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "os.path.dirname(__file__), \"deps\"",
              "object_description": "Script file path and directory path segment",
              "object_id": "script_file_path",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "os.path.abspath()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "os.path.join(os.path.dirname(__file__), \"deps\")",
              "object_description": "Directory path",
              "object_id": "directory_path",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "os.path.join()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "os.path.abspath(os.path.join(os.path.dirname(__file__), \"deps\")), \"jq-1.7.1.tar.gz\"",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "_dep_build_path()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "\"jq-1.7.1\"",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Construct file or directory path",
              "intention_id": "construct_file_path"
            },
            {
              "action_api": "self._extract_tarball()",
              "action_description": "Extracts all files from ZIP archive to specified directory",
              "action_id": "extract_zip_files",
              "object": "tarball_path=tarball_path, lib_dir=lib_dir",
              "object_description": "Directory path and file name",
              "object_id": "directory_path_with_file",
              "intention_description": "Decompress downloaded archive",
              "intention_id": "decompress_downloaded_archive"
            },
            {
              "action_api": "sysconfig.get_config_var()",
              "action_description": "Retrieves operating system information",
              "action_id": "get_os_info",
              "object": "\"MACOSX_DEPLOYMENT_TARGET\"",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Access configuration value",
              "intention_id": "access_configuration_value"
            },
            {
              "action_api": "os.environ.__setitem__()",
              "action_description": "Sets value for registry key",
              "action_id": "set_registry_value",
              "object": "'MACOSX_DEPLOYMENT_TARGET', str(macosx_deployment_target)",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "shlex.quote()",
              "action_description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
              "action_id": "path_string_operations",
              "object": "arg",
              "object_description": "",
              "object_id": "",
              "intention_description": "Prepare argument for shortcut",
              "intention_id": "prepare_shortcut_argument"
            },
            {
              "action_api": "subprocess.check_call()",
              "action_description": "Executes shell command",
              "action_id": "execute_shell_command",
              "object": "command, cwd=lib_dir",
              "object_description": "Shell command",
              "object_id": "shell_command",
              "intention_description": "Execute command",
              "intention_id": "execute_command"
            }
          ]
        }
      ]
    }
  ]
}