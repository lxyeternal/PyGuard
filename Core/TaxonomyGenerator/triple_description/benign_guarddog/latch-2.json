{
  "metadata": {
    "package_name": "latch-2",
    "original_json_path": "/home2/blue/Documents/PyPIAgent/Codes/code_contexral/codesnippets/benign/latch-2.58.2.json",
    "dataset_type": "benign"
  },
  "code_files": [
    {
      "pyfile": "messages.py",
      "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/latch-2.58.2/latch-2.58.2/src/latch/functions/messages.py",
      "line_number": "56",
      "type_description": "exfiltrate-sensitive-data",
      "context_snippet": "import os\nfrom typing import Any, Dict\n\nimport requests\n\nNUCLEUS_URL = os.environ.get(\"LATCH_CLI_NUCLEUS_URL\", \"https://nucleus.latch.bio\")\nADD_MESSAGE_ENDPOINT = f\"{NUCLEUS_URL}/sdk/add-task-execution-message\"\n\n\ndef message(typ: str, data: Dict[str, Any]) -> None:\n    \"\"\"Display a message prominently on the Latch console during and after a\n    task execution.\n\n    The Latch platform first processes this message internally, then displays it\n    under your task's execution page.\n\n    Args:\n        typ:\n            A message type that determines how your message is displayed.\n            Currently one of 'info', 'warning', or 'error'.\n        data:\n            The data displayed on the Latch console, formatted as follows:\n            ```{'title': ..., 'body': ...}```.\n\n    Raises:\n        RuntimeError: If an internal error occurs while processing the message.\n\n    Example usage: ::\n\n        @small_task\n        def task():\n\n            ...\n\n            try:\n                ...\n            catch ValueError:\n                title = 'Invalid sample ID column selected'\n                body = 'Your file indicates that sample columns a, b are valid'\n                message(type='error', data={'title': title, 'body': body})\n\n            ...\n    \"\"\"\n    task_project = os.environ.get(\"FLYTE_INTERNAL_TASK_PROJECT\")\n    task_domain = os.environ.get(\"FLYTE_INTERNAL_TASK_DOMAIN\")\n    task_name = os.environ.get(\"FLYTE_INTERNAL_TASK_NAME\")\n    task_version = os.environ.get(\"FLYTE_INTERNAL_TASK_VERSION\")\n    task_attempt_number = os.environ.get(\"FLYTE_ATTEMPT_NUMBER\")\n    execution_token = os.environ.get(\"FLYTE_INTERNAL_EXECUTION_ID\")\n    array_index = os.environ.get(\"FLYTE_K8S_ARRAY_INDEX\")\n\n    if task_project is None:\n        print(f\"Local execution message:\\n[{typ}]: {data}\")\n        return\n\n    response = requests.post(\n        url=ADD_MESSAGE_ENDPOINT,\n        json={\n            \"execution_token\": execution_token,\n            \"task\": {\n                \"project\": task_project,\n                \"domain\": task_domain,\n                \"name\": task_name,\n                \"version\": task_version,\n            },\n            \"task_attempt_number\": task_attempt_number,\n            \"task_array_index\": array_index,\n            \"type\": typ,\n            \"data\": data,\n        },\n    )\n\n    if response.status_code != 200:\n        raise RuntimeError(\"Could not add task execution message to Latch.\")",
      "hash_value": "1f9beade20dae33b5a2d59f5fa3edda6",
      "detection_index": 1,
      "code_snippets": [
        {
          "snippet": "import os\nfrom typing import Any, Dict\n\nimport requests\n\nNUCLEUS_URL = os.environ.get(\"LATCH_CLI_NUCLEUS_URL\", \"https://nucleus.latch.bio\")\nADD_MESSAGE_ENDPOINT = f\"{NUCLEUS_URL}/sdk/add-task-execution-message\"\n\n\ndef message(typ: str, data: Dict[str, Any]) -> None:\n    \"\"\"Display a message prominently on the Latch console during and after a\n    task execution.\n\n    The Latch platform first processes this message internally, then displays it\n    under your task's execution page.\n\n    Args:\n        typ:\n            A message type that determines how your message is displayed.\n            Currently one of 'info', 'warning', or 'error'.\n        data:\n            The data displayed on the Latch console, formatted as follows:\n            ```{'title': ..., 'body': ...}```.\n\n    Raises:\n        RuntimeError: If an internal error occurs while processing the message.\n\n    Example usage: ::\n\n        @small_task\n        def task():\n\n            ...\n\n            try:\n                ...\n            catch ValueError:\n                title = 'Invalid sample ID column selected'\n                body = 'Your file indicates that sample columns a, b are valid'\n                message(type='error', data={'title': title, 'body': body})\n\n            ...\n    \"\"\"\n    task_project = os.environ.get(\"FLYTE_INTERNAL_TASK_PROJECT\")\n    task_domain = os.environ.get(\"FLYTE_INTERNAL_TASK_DOMAIN\")\n    task_name = os.environ.get(\"FLYTE_INTERNAL_TASK_NAME\")\n    task_version = os.environ.get(\"FLYTE_INTERNAL_TASK_VERSION\")\n    task_attempt_number = os.environ.get(\"FLYTE_ATTEMPT_NUMBER\")\n    execution_token = os.environ.get(\"FLYTE_INTERNAL_EXECUTION_ID\")\n    array_index = os.environ.get(\"FLYTE_K8S_ARRAY_INDEX\")\n\n    if task_project is None:\n        print(f\"Local execution message:\\n[{typ}]: {data}\")\n        return\n\n    response = requests.post(\n        url=ADD_MESSAGE_ENDPOINT,\n        json={\n            \"execution_token\": execution_token,\n            \"task\": {\n                \"project\": task_project,\n                \"domain\": task_domain,\n                \"name\": task_name,\n                \"version\": task_version,\n            },\n            \"task_attempt_number\": task_attempt_number,\n            \"task_array_index\": array_index,\n            \"type\": typ,\n            \"data\": data,\n        },\n    )\n\n    if response.status_code != 200:\n        raise RuntimeError(\"Could not add task execution message to Latch.\")",
          "triple_sequences": [
            {
              "action_api": "os.environ.get()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "\"LATCH_CLI_NUCLEUS_URL\"",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "os.environ.get()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "\"FLYTE_INTERNAL_TASK_PROJECT\"",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "os.environ.get()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "\"FLYTE_INTERNAL_TASK_DOMAIN\"",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "os.environ.get()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "\"FLYTE_INTERNAL_TASK_NAME\"",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "os.environ.get()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "\"FLYTE_INTERNAL_TASK_VERSION\"",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "os.environ.get()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "\"FLYTE_ATTEMPT_NUMBER\"",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "os.environ.get()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "\"FLYTE_INTERNAL_EXECUTION_ID\"",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "os.environ.get()",
              "action_description": "Retrieves value of environment variable",
              "action_id": "get_env_var",
              "object": "\"FLYTE_K8S_ARRAY_INDEX\"",
              "object_description": "Environment variable",
              "object_id": "environment_variable",
              "intention_description": "Collect environment variable",
              "intention_id": "collect_environment_variable"
            },
            {
              "action_api": "print()",
              "action_description": "Prints output to standard output",
              "action_id": "get_stdout_stream",
              "object": "f\"Local execution message:\\n[{typ}]: {data}\"",
              "object_description": "",
              "object_id": "",
              "intention_description": "Access attribute value",
              "intention_id": "access_attribute_value"
            },
            {
              "action_api": "requests.post()",
              "action_description": "Sends HTTP request",
              "action_id": "send_http_request",
              "object": "url=ADD_MESSAGE_ENDPOINT, json={...}",
              "object_description": "API endpoint",
              "object_id": "api_endpoint",
              "intention_description": "Transmit data HTTP POST",
              "intention_id": "transmit_data_http_post"
            },
            {
              "action_api": "response.status_code",
              "action_description": "Retrieves HTTP response status code",
              "action_id": "get_http_status",
              "object": "",
              "object_description": "",
              "object_id": "",
              "intention_description": "Access attribute value",
              "intention_id": "access_attribute_value"
            },
            {
              "action_api": "raise RuntimeError()",
              "action_description": "Raises HTTPError if response status code indicates error",
              "action_id": "raise_http_error",
              "object": "\"Could not add task execution message to Latch.\"",
              "object_description": "Error message text",
              "object_id": "error_message",
              "intention_description": "Terminate program execution",
              "intention_id": "terminate_program_execution"
            }
          ]
        }
      ]
    }
  ]
}