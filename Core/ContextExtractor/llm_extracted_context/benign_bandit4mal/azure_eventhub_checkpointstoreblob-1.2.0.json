[
  {
    "metadata": {
      "package_name": "azure_eventhub_checkpointstoreblob-1.2.0",
      "total_matches": 1,
      "processing_date": "2025-05-18 01:49:40"
    }
  },
  {
    "pyfile": "_blob_operations.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/azure_eventhub_checkpointstoreblob-1.2.0/azure_eventhub_checkpointstoreblob-1.2.0/azure/eventhub/extensions/checkpointstoreblob/_vendor/storage/blob/_generated/aio/operations/_blob_operations.py",
    "line_number": "396",
    "type_description": "B835:load",
    "severity": "High",
    "confidence": "Medium",
    "original_snippet": "395\n396\t        deserialized = response.stream_download(self._client._pipeline, decompress=_decompress)\n397",
    "context_snippet": "    @distributed_trace_async\n    async def download(\n        self,\n        snapshot: Optional[str] = None,\n        version_id: Optional[str] = None,\n        timeout: Optional[int] = None,\n        range: Optional[str] = None,\n        range_get_content_md5: Optional[bool] = None,\n        range_get_content_crc64: Optional[bool] = None,\n        structured_body_type: Optional[str] = None,\n        request_id_parameter: Optional[str] = None,\n        lease_access_conditions: Optional[_models.LeaseAccessConditions] = None,\n        cpk_info: Optional[_models.CpkInfo] = None,\n        modified_access_conditions: Optional[_models.ModifiedAccessConditions] = None,\n        **kwargs: Any\n    ) -> AsyncIterator[bytes]:\n        # pylint: disable=line-too-long\n        \"\"\"The Download operation reads or downloads a blob from the system, including its metadata and\n        properties. You can also call Download to read a snapshot.\n\n        ...\n        \"\"\"\n        error_map: MutableMapping[int, Type[HttpResponseError]] = {  # pylint: disable=unsubscriptable-object\n            401: ClientAuthenticationError,\n            404: ResourceNotFoundError,\n            409: ResourceExistsError,\n            304: ResourceNotModifiedError,\n        }\n        error_map.update(kwargs.pop(\"error_map\", {}) or {})\n\n        _headers = kwargs.pop(\"headers\", {}) or {}\n        _params = kwargs.pop(\"params\", {}) or {}\n\n        cls: ClsType[AsyncIterator[bytes]] = kwargs.pop(\"cls\", None)\n\n        _lease_id = None\n        _encryption_key = None\n        _encryption_key_sha256 = None\n        _encryption_algorithm = None\n        _if_modified_since = None\n        _if_unmodified_since = None\n        _if_match = None\n        _if_none_match = None\n        _if_tags = None\n        if lease_access_conditions is not None:\n            _lease_id = lease_access_conditions.lease_id\n        if cpk_info is not None:\n            _encryption_algorithm = cpk_info.encryption_algorithm\n            _encryption_key = cpk_info.encryption_key\n            _encryption_key_sha256 = cpk_info.encryption_key_sha256\n        if modified_access_conditions is not None:\n            _if_match = modified_access_conditions.if_match\n            _if_modified_since = modified_access_conditions.if_modified_since\n            _if_none_match = modified_access_conditions.if_none_match\n            _if_tags = modified_access_conditions.if_tags\n            _if_unmodified_since = modified_access_conditions.if_unmodified_since\n\n        _request = build_download_request(\n            url=self._config.url,\n            snapshot=snapshot,\n            version_id=version_id,\n            timeout=timeout,\n            range=range,\n            lease_id=_lease_id,\n            range_get_content_md5=range_get_content_md5,\n            range_get_content_crc64=range_get_content_crc64,\n            structured_body_type=structured_body_type,\n            encryption_key=_encryption_key,\n            encryption_key_sha256=_encryption_key_sha256,\n            encryption_algorithm=_encryption_algorithm,\n            if_modified_since=_if_modified_since,\n            if_unmodified_since=_if_unmodified_since,\n            if_match=_if_match,\n            if_none_match=_if_none_match,\n            if_tags=_if_tags,\n            request_id_parameter=request_id_parameter,\n            version=self._config.version,\n            headers=_headers,\n            params=_params,\n        )\n        _request.url = self._client.format_url(_request.url)\n\n        _decompress = kwargs.pop(\"decompress\", True)\n        _stream = True\n        pipeline_response: PipelineResponse = await self._client._pipeline.run(  # pylint: disable=protected-access\n            _request, stream=_stream, **kwargs\n        )\n\n        response = pipeline_response.http_response\n\n        if response.status_code not in [200, 206]:\n            try:\n                await response.read()  # Load the body in memory and close the socket\n            except (StreamConsumedError, StreamClosedError):\n                pass\n            map_error(status_code=response.status_code, response=response, error_map=error_map)\n            error = self._deserialize.failsafe_deserialize(_models.StorageError, pipeline_response)\n            raise HttpResponseError(response=response, model=error)\n\n        response_headers = {}\n        if response.status_code == 200:\n            response_headers[\"Last-Modified\"] = self._deserialize(\"rfc-1123\", response.headers.get(\"Last-Modified\"))\n            response_headers[\"x-ms-creation-time\"] = self._deserialize(\n                \"rfc-1123\", response.headers.get(\"x-ms-creation-time\")\n            )\n            response_headers[\"x-ms-meta\"] = self._deserialize(\"{str}\", response.headers.get(\"x-ms-meta\"))\n            response_headers[\"x-ms-or-policy-id\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-or-policy-id\"))\n            response_headers[\"x-ms-or\"] = self._deserialize(\"{str}\", response.headers.get(\"x-ms-or\"))\n            response_headers[\"Content-Length\"] = self._deserialize(\"int\", response.headers.get(\"Content-Length\"))\n            response_headers[\"Content-Type\"] = self._deserialize(\"str\", response.headers.get(\"Content-Type\"))\n            response_headers[\"Content-Range\"] = self._deserialize(\"str\", response.headers.get(\"Content-Range\"))\n            response_headers[\"ETag\"] = self._deserialize(\"str\", response.headers.get(\"ETag\"))\n            response_headers[\"Content-MD5\"] = self._deserialize(\"bytearray\", response.headers.get(\"Content-MD5\"))\n            response_headers[\"Content-Encoding\"] = self._deserialize(\"str\", response.headers.get(\"Content-Encoding\"))\n            response_headers[\"Cache-Control\"] = self._deserialize(\"str\", response.headers.get(\"Cache-Control\"))\n            response_headers[\"Content-Disposition\"] = self._deserialize(\n                \"str\", response.headers.get(\"Content-Disposition\")\n            )\n            response_headers[\"Content-Language\"] = self._deserialize(\"str\", response.headers.get(\"Content-Language\"))\n            response_headers[\"x-ms-blob-sequence-number\"] = self._deserialize(\n                \"int\", response.headers.get(\"x-ms-blob-sequence-number\")\n            )\n            response_headers[\"x-ms-blob-type\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-blob-type\"))\n            response_headers[\"x-ms-copy-completion-time\"] = self._deserialize(\n                \"rfc-1123\", response.headers.get(\"x-ms-copy-completion-time\")\n            )\n            response_headers[\"x-ms-copy-status-description\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-copy-status-description\")\n            )\n            response_headers[\"x-ms-copy-id\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-copy-id\"))\n            response_headers[\"x-ms-copy-progress\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-copy-progress\")\n            )\n            response_headers[\"x-ms-copy-source\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-copy-source\"))\n            response_headers[\"x-ms-copy-status\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-copy-status\"))\n            response_headers[\"x-ms-lease-duration\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-lease-duration\")\n            )\n            response_headers[\"x-ms-lease-state\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-lease-state\"))\n            response_headers[\"x-ms-lease-status\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-lease-status\"))\n            response_headers[\"x-ms-client-request-id\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-client-request-id\")\n            )\n            response_headers[\"x-ms-request-id\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-request-id\"))\n            response_headers[\"x-ms-version\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-version\"))\n            response_headers[\"x-ms-version-id\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-version-id\"))\n            response_headers[\"x-ms-is-current-version\"] = self._deserialize(\n                \"bool\", response.headers.get(\"x-ms-is-current-version\")\n            )\n            response_headers[\"Accept-Ranges\"] = self._deserialize(\"str\", response.headers.get(\"Accept-Ranges\"))\n            response_headers[\"Date\"] = self._deserialize(\"rfc-1123\", response.headers.get(\"Date\"))\n            response_headers[\"x-ms-blob-committed-block-count\"] = self._deserialize(\n                \"int\", response.headers.get(\"x-ms-blob-committed-block-count\")\n            )\n            response_headers[\"x-ms-server-encrypted\"] = self._deserialize(\n                \"bool\", response.headers.get(\"x-ms-server-encrypted\")\n            )\n            response_headers[\"x-ms-encryption-key-sha256\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-encryption-key-sha256\")\n            )\n            response_headers[\"x-ms-encryption-scope\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-encryption-scope\")\n            )\n            response_headers[\"x-ms-blob-content-md5\"] = self._deserialize(\n                \"bytearray\", response.headers.get(\"x-ms-blob-content-md5\")\n            )\n            response_headers[\"x-ms-tag-count\"] = self._deserialize(\"int\", response.headers.get(\"x-ms-tag-count\"))\n            response_headers[\"x-ms-blob-sealed\"] = self._deserialize(\"bool\", response.headers.get(\"x-ms-blob-sealed\"))\n            response_headers[\"x-ms-last-access-time\"] = self._deserialize(\n                \"rfc-1123\", response.headers.get(\"x-ms-last-access-time\")\n            )\n            response_headers[\"x-ms-immutability-policy-until-date\"] = self._deserialize(\n                \"rfc-1123\", response.headers.get(\"x-ms-immutability-policy-until-date\")\n            )\n            response_headers[\"x-ms-immutability-policy-mode\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-immutability-policy-mode\")\n            )\n            response_headers[\"x-ms-legal-hold\"] = self._deserialize(\"bool\", response.headers.get(\"x-ms-legal-hold\"))\n            response_headers[\"x-ms-structured-body\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-structured-body\")\n            )\n            response_headers[\"x-ms-structured-content-length\"] = self._deserialize(\n                \"int\", response.headers.get(\"x-ms-structured-content-length\")\n            )\n\n        if response.status_code == 206:\n            response_headers[\"Last-Modified\"] = self._deserialize(\"rfc-1123\", response.headers.get(\"Last-Modified\"))\n            response_headers[\"x-ms-creation-time\"] = self._deserialize(\n                \"rfc-1123\", response.headers.get(\"x-ms-creation-time\")\n            )\n            response_headers[\"x-ms-meta\"] = self._deserialize(\"{str}\", response.headers.get(\"x-ms-meta\"))\n            response_headers[\"x-ms-or-policy-id\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-or-policy-id\"))\n            response_headers[\"x-ms-or\"] = self._deserialize(\"{str}\", response.headers.get(\"x-ms-or\"))\n            response_headers[\"Content-Length\"] = self._deserialize(\"int\", response.headers.get(\"Content-Length\"))\n            response_headers[\"Content-Type\"] = self._deserialize(\"str\", response.headers.get(\"Content-Type\"))\n            response_headers[\"Content-Range\"] = self._deserialize(\"str\", response.headers.get(\"Content-Range\"))\n            response_headers[\"ETag\"] = self._deserialize(\"str\", response.headers.get(\"ETag\"))\n            response_headers[\"Content-MD5\"] = self._deserialize(\"bytearray\", response.headers.get(\"Content-MD5\"))\n            response_headers[\"Content-Encoding\"] = self._deserialize(\"str\", response.headers.get(\"Content-Encoding\"))\n            response_headers[\"Cache-Control\"] = self._deserialize(\"str\", response.headers.get(\"Cache-Control\"))\n            response_headers[\"Content-Disposition\"] = self._deserialize(\n                \"str\", response.headers.get(\"Content-Disposition\")\n            )\n            response_headers[\"Content-Language\"] = self._deserialize(\"str\", response.headers.get(\"Content-Language\"))\n            response_headers[\"x-ms-blob-sequence-number\"] = self._deserialize(\n                \"int\", response.headers.get(\"x-ms-blob-sequence-number\")\n            )\n            response_headers[\"x-ms-blob-type\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-blob-type\"))\n            response_headers[\"x-ms-content-crc64\"] = self._deserialize(\n                \"bytearray\", response.headers.get(\"x-ms-content-crc64\")\n            )\n            response_headers[\"x-ms-copy-completion-time\"] = self._deserialize(\n                \"rfc-1123\", response.headers.get(\"x-ms-copy-completion-time\")\n            )\n            response_headers[\"x-ms-copy-status-description\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-copy-status-description\")\n            )\n            response_headers[\"x-ms-copy-id\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-copy-id\"))\n            response_headers[\"x-ms-copy-progress\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-copy-progress\")\n            )\n            response_headers[\"x-ms-copy-source\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-copy-source\"))\n            response_headers[\"x-ms-copy-status\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-copy-status\"))\n            response_headers[\"x-ms-lease-duration\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-lease-duration\")\n            )\n            response_headers[\"x-ms-lease-state\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-lease-state\"))\n            response_headers[\"x-ms-lease-status\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-lease-status\"))\n            response_headers[\"x-ms-client-request-id\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-client-request-id\")\n            )\n            response_headers[\"x-ms-request-id\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-request-id\"))\n            response_headers[\"x-ms-version\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-version\"))\n            response_headers[\"x-ms-version-id\"] = self._deserialize(\"str\", response.headers.get(\"x-ms-version-id\"))\n            response_headers[\"x-ms-is-current-version\"] = self._deserialize(\n                \"bool\", response.headers.get(\"x-ms-is-current-version\")\n            )\n            response_headers[\"Accept-Ranges\"] = self._deserialize(\"str\", response.headers.get(\"Accept-Ranges\"))\n            response_headers[\"Date\"] = self._deserialize(\"rfc-1123\", response.headers.get(\"Date\"))\n            response_headers[\"x-ms-blob-committed-block-count\"] = self._deserialize(\n                \"int\", response.headers.get(\"x-ms-blob-committed-block-count\")\n            )\n            response_headers[\"x-ms-server-encrypted\"] = self._deserialize(\n                \"bool\", response.headers.get(\"x-ms-server-encrypted\")\n            )\n            response_headers[\"x-ms-encryption-key-sha256\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-encryption-key-sha256\")\n            )\n            response_headers[\"x-ms-encryption-scope\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-encryption-scope\")\n            )\n            response_headers[\"x-ms-blob-content-md5\"] = self._deserialize(\n                \"bytearray\", response.headers.get(\"x-ms-blob-content-md5\")\n            )\n            response_headers[\"x-ms-tag-count\"] = self._deserialize(\"int\", response.headers.get(\"x-ms-tag-count\"))\n            response_headers[\"x-ms-blob-sealed\"] = self._deserialize(\"bool\", response.headers.get(\"x-ms-blob-sealed\"))\n            response_headers[\"x-ms-last-access-time\"] = self._deserialize(\n                \"rfc-1123\", response.headers.get(\"x-ms-last-access-time\")\n            )\n            response_headers[\"x-ms-immutability-policy-until-date\"] = self._deserialize(\n                \"rfc-1123\", response.headers.get(\"x-ms-immutability-policy-until-date\")\n            )\n            response_headers[\"x-ms-immutability-policy-mode\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-immutability-policy-mode\")\n            )\n            response_headers[\"x-ms-legal-hold\"] = self._deserialize(\"bool\", response.headers.get(\"x-ms-legal-hold\"))\n            response_headers[\"x-ms-structured-body\"] = self._deserialize(\n                \"str\", response.headers.get(\"x-ms-structured-body\")\n            )\n            response_headers[\"x-ms-structured-content-length\"] = self._deserialize(\n                \"int\", response.headers.get(\"x-ms-structured-content-length\")\n            )\n\n        deserialized = response.stream_download(self._client._pipeline, decompress=_decompress)\n\n        if cls:\n            return cls(pipeline_response, deserialized, response_headers)  # type: ignore\n\n        return deserialized  # type: ignore\n",
    "hash_value": "58f97b29b524c287af51c1cfa84159d0"
  }
]