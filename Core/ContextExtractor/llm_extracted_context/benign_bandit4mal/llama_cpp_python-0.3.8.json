[
  {
    "metadata": {
      "package_name": "llama_cpp_python-0.3.8",
      "total_matches": 1,
      "processing_date": "2025-05-18 01:49:40"
    }
  },
  {
    "pyfile": "test_completion.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/llama_cpp_python-0.3.8/llama_cpp_python-0.3.8/vendor/llama.cpp/examples/server/tests/unit/test_completion.py",
    "line_number": "204",
    "type_description": "B822:request",
    "severity": "High",
    "confidence": "Medium",
    "original_snippet": "203\t    prompt_str = \"I believe the meaning of life is\"\n204\t    res = server.make_request(\"POST\", \"/tokenize\", data={\n205\t        \"content\": prompt_str,\n206\t        \"add_special\": True,\n207\t    })",
    "context_snippet": "def test_completion_with_tokens_input():\n    global server\n    server.temperature = 0.0\n    server.start()\n    prompt_str = \"I believe the meaning of life is\"\n    res = server.make_request(\"POST\", \"/tokenize\", data={\n        \"content\": prompt_str,\n        \"add_special\": True,\n    })\n    assert res.status_code == 200\n    tokens = res.body[\"tokens\"]\n\n    # single completion\n    res = server.make_request(\"POST\", \"/completion\", data={\n        \"prompt\": tokens,\n    })\n    assert res.status_code == 200\n    assert type(res.body[\"content\"]) == str\n\n    # batch completion\n    res = server.make_request(\"POST\", \"/completion\", data={\n        \"prompt\": [tokens, tokens],\n    })\n    assert res.status_code == 200\n    assert type(res.body) == list\n    assert len(res.body) == 2\n    assert res.body[0][\"content\"] == res.body[1][\"content\"]\n\n    # mixed string and tokens\n    res = server.make_request(\"POST\", \"/completion\", data={\n        \"prompt\": [tokens, prompt_str],\n    })\n    assert res.status_code == 200\n    assert type(res.body) == list\n    assert len(res.body) == 2\n    assert res.body[0][\"content\"] == res.body[1][\"content\"]\n\n    # mixed string and tokens in one sequence\n    res = server.make_request(\"POST\", \"/completion\", data={\n        \"prompt\": [1, 2, 3, 4, 5, 6, prompt_str, 7, 8, 9, 10, prompt_str],\n    })\n    assert res.status_code == 200\n    assert type(res.body[\"content\"]) == str",
    "hash_value": "dae9bb3236db34d9e00bbe09098b30c4"
  }
]