[
  {
    "metadata": {
      "package_name": "latch-2.58.2",
      "total_matches": 1,
      "processing_date": "2025-05-18 01:49:40"
    }
  },
  {
    "pyfile": "ctx.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/latch-2.58.2/latch-2.58.2/src/latch_cli/centromere/ctx.py",
    "line_number": "316",
    "type_description": "B817:system",
    "severity": "High",
    "confidence": "Medium",
    "original_snippet": "315\n316\t                            system = platform.system()\n317\t                            if system in {",
    "context_snippet": "if metadata_root is None:\n    metadata_root = pkg_root / \"latch_metadata\"\nself.metadata_root = metadata_root\n\nmeta_file = load_snakemake_metadata(pkg_root, metadata_root)\nif meta_file is not None:\n    click.echo(\n        f\"Using metadata file {click.style(meta_file, italic=True)}\"\n    )\nelse:\n    new_meta = pkg_root / \"latch_metadata\" / \"__init__.py\"\n    click.echo(\"Trying to extract metadata from the Snakefile\")\n    try:\n        snakemake_workflow_extractor(pkg_root, metadata_root, snakefile)\n    except (ImportError, FileNotFoundError):\n        traceback.print_exc()\n        click.secho(\n            \"\\n\\n\\n\"\n            + \"The above error occured when reading \"\n            + \"the Snakefile to extract workflow metadata.\",\n            bold=True,\n            fg=\"red\",\n        )\n        click.secho(\n            \"\\nIt is possible to avoid including the Snakefile\"\n            \" prior to registration by providing a\"\n            \" `latch_metadata.py` file in the workflow root.\\nThis\"\n            \" way it is not necessary to install dependencies or\"\n            \" ensure that Snakemake inputs locally.\",\n            fg=\"red\",\n        )\n        click.secho(\"\\nExample \", fg=\"red\", nl=False)\n\n        snakemake_metadata_example = get_snakemake_metadata_example(\n            pkg_root.name\n        )\n        click.secho(f\"`{new_meta}`\", bold=True, fg=\"red\", nl=False)\n        click.secho(\n            f\" file:\\n```\\n{snakemake_metadata_example}```\", fg=\"red\"\n        )\n        if click.confirm(\n            click.style(\n                \"Generate example metadata file now?\",\n                bold=True,\n                fg=\"red\",\n            ),\n            default=True,\n        ):\n            new_meta.write_text(snakemake_metadata_example)\n\n            import platform\n\n            system = platform.system()\n            if system in {\n                \"Windows\",\n                \"Linux\",\n                \"Darwin\",\n            } and click.confirm(\n                click.style(\n                    \"Open the generated file?\", bold=True, fg=\"red\"\n                ),\n                default=True,\n            ):\n                import subprocess\n\n                if system == \"Linux\":\n                    res = subprocess.run([\n                        \"xdg-open\",\n                        new_meta,\n                    ]).returncode\n                elif system == \"Darwin\":\n                    res = subprocess.run([\"open\", new_meta]).returncode\n                elif system == \"Windows\":\n                    import os\n\n                    res = os.system(str(new_meta.resolve()))\n                else:\n                    res = None\n\n                if res is not None and res != 0:\n                    click.secho(\"Failed to open file\", fg=\"red\")\n        sys.exit(1)",
    "hash_value": "a95262d129ecff770cb33d1156504c07"
  }
]