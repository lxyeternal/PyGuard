[
  {
    "metadata": {
      "package_name": "launchable-1.98.0",
      "total_matches": 1,
      "processing_date": "2025-05-18 01:49:39"
    }
  },
  {
    "pyfile": "test_raw.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/launchable-1.98.0/launchable-1.98.0/tests/test_runners/test_raw.py",
    "line_number": "302",
    "type_description": "B832:write",
    "severity": "High",
    "confidence": "Medium",
    "original_snippet": "301\t            with open(test_path_file, 'w') as f:\n302\t                f.write('\\n'.join([\n303\t                    '<?xml version=\"1.0\" encoding=\"UTF-8\"?>',\n304\t                    '<testsuites name=\"test_suite_name1\" tests=\"1\" failures=\"0\" errors=\"0\" time=\"10.123\">',\n305\t                    f'  <testsuite name=\"test_suite_name2\" errors=\"0\" failures=\"0\" skipped=\"0\" timestamp=\"{timestamp1}\" time=\"10.123\" tests=\"1\">',   # noqa: E501\n306\t                    '    <testcase classname=\"test_class_name\" name=\"test_case_name\" time=\"10.123\">',\n307\t                    '    </testcase>',\n308\t                    '  </testsuite>',\n309\t                    '</testsuites>',\n310\t                ]) + '\\n')\n311",
    "context_snippet": "@responses.activate\n@mock.patch.dict(os.environ, {\"LAUNCHABLE_TOKEN\": CliTestCase.launchable_token})\ndef test_record_tests_junit_xml(self):\n    with tempfile.TemporaryDirectory() as tempdir:\n        test_path_file = os.path.join(tempdir, 'tests.xml')\n        test_path_file2 = os.path.join(tempdir, 'tests_2.xml')\n        # These timestamp variables are defined for testing timezone.\n        timestamp1 = dateutil.parser.parse(\"2021-10-05T12:34:00\")\n        timestamp2 = dateutil.parser.parse(\"2021-10-05T12:34:56\")\n        with open(test_path_file, 'w') as f:\n            f.write('\\n'.join([\n                '<?xml version=\"1.0\" encoding=\"UTF-8\"?>',\n                '<testsuites name=\"test_suite_name1\" tests=\"1\" failures=\"0\" errors=\"0\" time=\"10.123\">',\n                f'  <testsuite name=\"test_suite_name2\" errors=\"0\" failures=\"0\" skipped=\"0\" timestamp=\"{timestamp1}\" time=\"10.123\" tests=\"1\">',   # noqa: E501\n                '    <testcase classname=\"test_class_name\" name=\"test_case_name\" time=\"10.123\">',\n                '    </testcase>',\n                '  </testsuite>',\n                '</testsuites>',\n            ]) + '\\n')\n\n        with open(test_path_file2, 'w') as f2:\n            f2.write('\\n'.join([\n                '<?xml version=\"1.0\" encoding=\"UTF-8\"?>',\n                '<testsuites name=\"test_suite_name3\" tests=\"1\" failures=\"0\" errors=\"0\" time=\"12.345\">',\n                f'  <testsuite name=\"test_suite_name4\" errors=\"0\" failures=\"0\" skipped=\"0\" timestamp=\"{timestamp2}\" time=\"12.345\" tests=\"1\">',   # noqa: E501\n                '    <testcase classname=\"test_class_name2\" name=\"test_case_name2\" time=\"12.345\">',\n                '    </testcase>',\n                '  </testsuite>',\n                '</testsuites>',\n            ]) + '\\n')\n\n        # emulate launchable record build\n        write_build(self.build_name)\n\n        result = self.cli('record', 'tests', 'raw', test_path_file, test_path_file2, mix_stderr=False)\n        if result.exit_code != 0:\n            self.assertEqual(\n                result.exit_code,\n                0,\n                \"Exit code is not 0. The output is\\n\" + result.output + \"\\n\" + result.stderr)\n\n        # Check request body\n        payload = json.loads(gzip.decompress(self.find_request('/events').request.body).decode())\n        del payload['metadata']\n        self.assert_json_orderless_equal(payload, {\n            'events': [\n                {\n                    'testPath': [\n                        {'type': 'class', 'name': 'test_class_name'},\n                        {'type': 'testcase', 'name': 'test_case_name'},\n                    ],\n                    'duration': 10.123,\n                    'status': 1,\n                    'stdout': '',\n                    'stderr': '',\n                    'createdAt': timestamp1.replace(tzinfo=tzlocal()).isoformat(),\n                    'data': None,\n                    'type': 'case',\n                },\n                {\n                    'testPath': [\n                        {'type': 'class', 'name': 'test_class_name2'},\n                        {'type': 'testcase', 'name': 'test_case_name2'},\n                    ],\n                    'duration': 12.345,\n                    'status': 1,\n                    'stdout': '',\n                    'stderr': '',\n                    'createdAt': timestamp2.replace(tzinfo=tzlocal()).isoformat(),\n                    'data': None,\n                    'type': 'case',\n                },\n            ],\n            \"testRunner\": \"raw\",\n            \"group\": \"\",\n            \"noBuild\": False,\n            \"flavors\": [],\n            \"testSuite\": \"\",\n        })",
    "hash_value": "e312b041c1b43859509e5685e9141286"
  }
]