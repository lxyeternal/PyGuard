[
  {
    "metadata": {
      "package_name": "leafmap-0.43.5",
      "total_matches": 1,
      "processing_date": "2025-05-18 01:49:40"
    }
  },
  {
    "pyfile": "common.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/leafmap-0.43.5/leafmap-0.43.5/leafmap/common.py",
    "line_number": "13662",
    "type_description": "B834:open",
    "severity": "High",
    "confidence": "Medium",
    "original_snippet": "13661\n13662\t            with open(filename, \"wb\") as file:\n13663\t                for data in r.iter_content(block_size):",
    "context_snippet": "def gedi_download_file(\n    url: str, filename: str = None, username: str = None, password: str = None\n) -> None:\n    \"\"\"\n    Downloads a file from the given URL and saves it to the specified filename.\n    If no filename is provided, the name of the file from the URL will be used.\n\n    Args:\n        url (str): The URL of the file to download.\n            e.g., https://daac.ornl.gov/daacdata/gedi/GEDI_L4A_AGB_Density_V2_1/data/GEDI04_A_2019298202754_O04921_01_T02899_02_002_02_V002.h5\n        filename (str, optional): The name of the file to save the downloaded content to. Defaults to None.\n        username (str, optional): Username for authentication. Can also be set using the EARTHDATA_USERNAME environment variable. Defaults to None.\n            Create an account at https://urs.earthdata.nasa.gov\n        password (str, optional): Password for authentication. Can also be set using the EARTHDATA_PASSWORD environment variable. Defaults to None.\n\n    Returns:\n        None\n    \"\"\"\n    import requests\n    from tqdm import tqdm\n    from urllib.parse import urlparse\n\n    if username is None:\n        username = os.environ.get(\"EARTHDATA_USERNAME\", None)\n    if password is None:\n        password = os.environ.get(\"EARTHDATA_PASSWORD\", None)\n\n    if username is None or password is None:\n        raise ValueError(\n            \"Username and password must be provided. Create an account at https://urs.earthdata.nasa.gov.\"\n        )\n\n    with requests.Session() as session:\n        r1 = session.request(\"get\", url, stream=True)\n        r = session.get(r1.url, auth=(username, password), stream=True)\n        print(r.status_code)\n\n        if r.status_code == 200:\n            total_size = int(r.headers.get(\"content-length\", 0))\n            block_size = 1024  # 1 KB\n\n            # Use the filename from the URL if not provided\n            if not filename:\n                parsed_url = urlparse(url)\n                filename = parsed_url.path.split(\"/\")[-1]\n\n            progress_bar = tqdm(total=total_size, unit=\"B\", unit_scale=True)\n\n            with open(filename, \"wb\") as file:\n                for data in r.iter_content(block_size):\n                    progress_bar.update(len(data))\n                    file.write(data)\n\n            progress_bar.close()\n",
    "hash_value": "16be97e15b516fc7312c4168b7e36179"
  }
]