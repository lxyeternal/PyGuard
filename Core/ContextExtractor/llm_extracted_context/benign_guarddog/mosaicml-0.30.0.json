[
  {
    "metadata": {
      "package_name": "mosaicml-0.30.0",
      "report_path": "/home2/blue/Documents/PyPIAgent/Codes/tool_detect/detect_output/study/guarddog/benign/mosaicml-0.30.0.txt",
      "total_matches": 2
    }
  },
  {
    "pyfile": "setup.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/mosaicml-0.30.0/mosaicml-0.30.0/setup.py",
    "line_number": "241",
    "type_description": "cmd-overwrite",
    "original_snippet": "setup(\nname=package_name,\nversion=composer_version,\nauthor='MosaicML',\nauthor_email='team@mosaicml.com',\ndescription=(\n'Composer is a PyTorch library that enables you to train ' +\n'neural networks faster,...velop},\n)",
    "context_snippet": "import os\nimport site\nimport sys\nimport textwrap\n\nimport setuptools\nfrom setuptools import setup\nfrom setuptools.command.develop import develop as develop_orig\n\n# Read the composer version\n# Cannot import from `composer.__version__` since that will not be available when building or installing the package\nwith open(os.path.join(os.path.dirname(__file__), 'composer', '_version.py')) as f:\n    version_globals = {}\n    version_locals = {}\n    exec(f.read(), version_globals, version_locals)\n    composer_version = version_locals['__version__']\n\n_IS_ROOT = os.getuid() == 0\n_IS_USER = '--user' in sys.argv[1:]\n_IS_VIRTUALENV = 'VIRTUAL_ENV' in os.environ\n\n# ... (many lines omitted for brevity, see full code above) ...\n\npackage_name = os.environ.get('COMPOSER_PACKAGE_NAME', 'mosaicml')\n\nif package_name != 'mosaicml':\n    print(f'`Building composer as `{package_name}`)', file=sys.stderr)\n\nsetup(\n    name=package_name,\n    version=composer_version,\n    author='MosaicML',\n    author_email='team@mosaicml.com',\n    description=(\n        'Composer is a PyTorch library that enables you to train ' +\n        'neural networks faster, at lower cost, and to higher accuracy.'\n    ),\n    long_description=long_description,\n    long_description_content_type='text/markdown',\n    url='https://github.com/mosaicml/composer',\n    include_package_data=True,\n    package_data={\n        'composer': composer_data_files,\n    },\n    packages=setuptools.find_packages(exclude=['docker*', 'examples*', 'scripts*', 'tests*']),\n    classifiers=[\n        'Programming Language :: Python :: 3',\n        'Programming Language :: Python :: 3.10',\n        'Programming Language :: Python :: 3.11',\n        'Programming Language :: Python :: 3.12',\n    ],\n    install_requires=install_requires,\n    entry_points={\n        'console_scripts': [\n            'composer = composer.cli.launcher:main',\n            'composer_collect_env = composer.utils.collect_env:main',\n            'composer_validate_remote_path = composer.utils.file_helpers:validate_remote_path',\n        ],\n    },\n    extras_require=extra_deps,\n    dependency_links=['https://developer.download.nvidia.com/compute/redist'],\n    python_requires='>=3.10',\n    ext_package='composer',\n    cmdclass={'develop': develop},\n)\n",
    "hash_value": "43f5817a24863363623d8f1276749279",
    "detection_index": 1
  },
  {
    "pyfile": "lambda_eval_client.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/mosaicml-0.30.0/mosaicml-0.30.0/composer/utils/eval_client/lambda_eval_client.py",
    "line_number": "48",
    "type_description": "exfiltrate-sensitive-data",
    "original_snippet": "response = requests.post(\nos.environ['CODE_EVAL_URL'],\ndata=json.dumps(payload),\nheaders={'x-api-key': os.environ['CODE_EVAL_APIKEY']},\n)",
    "context_snippet": "import json\nimport logging\nimport os\n\nimport requests\n\nfrom composer.utils.eval_client.eval_client import EvalClient\n\nclass LambdaEvalClient(EvalClient):\n    \"\"\"Utility for creating a client for and invoking an AWS Lambda.\"\"\"\n\n    def __init__(self) -> None:\n        \"\"\"Checks that the requisite environment variables are in the EvalClient.\n\n        There must be CODE_EVAL_URL for the URL of the lambda API and CODE_EVAL_APIKEY\n        for the API key of the lambda API.\n        \"\"\"\n        if 'CODE_EVAL_URL' not in os.environ or 'CODE_EVAL_APIKEY' not in os.environ:\n            raise Exception(\n                'Please set environment variable CODE_EVAL_URL to the URL of the lambda API '\n                'and CODE_EVAL_APIKEY to the API key of the API gateway.',\n            )\n        log.debug('Running code eval on lambda.')\n\n    def invoke(self, payload: list[list[list[dict[str, str]]]]) -> list[list[list[bool]]]:\n        \"\"\"Invoke a batch of provided payloads for code evaluations.\"\"\"\n        ret = []\n        for prompt_group in payload:\n            ret_prompt_group = []\n            for generation_group in prompt_group:\n                ret_generation_group = []\n                for test_case in generation_group:\n                    ret_generation_group.append(self.invoke_helper(test_case))\n                ret_prompt_group.append(ret_generation_group)\n            ret.append(ret_prompt_group)\n        return ret\n\n    def invoke_helper(self, payload: dict[str, str]) -> bool:\n        \"\"\"Invoke a provided dictionary payload to the client.\"\"\"\n        response = requests.post(\n            os.environ['CODE_EVAL_URL'],\n            data=json.dumps(payload),\n            headers={'x-api-key': os.environ['CODE_EVAL_APIKEY']},\n        )\n        response = response.json()\n        return 'statusCode' in response and response['statusCode'] == 200",
    "hash_value": "a3d1685d234eba4215c981b8427de7f7",
    "detection_index": 1
  }
]