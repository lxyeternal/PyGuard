Run started:2025-04-12 19:25:47.736539

Test results:
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/benches/test_flax.py:34
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
33	    with open(filename, "rb") as f:
34	        data = f.read()
35	        flax_weights = msgpack_restore(data)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/benches/test_flax.py:44
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
43	        serialized = msgpack_serialize(weights)
44	        f.write(serialized)
45	        result = benchmark(load, f.name)

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/benches/test_flax.py:44
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
43	        serialized = msgpack_serialize(weights)
44	        f.write(serialized)
45	        result = benchmark(load, f.name)

--------------------------------------------------
>> Issue: [B812:system] os.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/benches/test_mlx.py:6
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b812_system.html
5	
6	if platform.system() == "Darwin":
7	    import mlx.core as mx

--------------------------------------------------
>> Issue: [B817:system] platform.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/benches/test_mlx.py:6
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b817_system.html
5	
6	if platform.system() == "Darwin":
7	    import mlx.core as mx

--------------------------------------------------
>> Issue: [B308:blacklist] platform.system
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/benches/test_mlx.py:6
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b308-platform-system
5	
6	if platform.system() == "Darwin":
7	    import mlx.core as mx

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/convert.py:16
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
15	
16	COMMIT_DESCRIPTION = """
17	This is an automated PR created with https://huggingface.co/spaces/safetensors/convert
18	
19	This new file is equivalent to `pytorch_model.bin` but safe in the sense that
20	no arbitrary code can be put into it.
21	
22	These files also happen to load much faster than their pytorch counterpart:
23	https://colab.research.google.com/github/huggingface/notebooks/blob/main/safetensors_doc/en/speed.ipynb
24	
25	The widgets on your model page will run using this model even if this is not merged
26	making sure the file actually works.
27	
28	If you find any issues: please report here: https://huggingface.co/spaces/safetensors/convert/discussions
29	
30	Feel free to ignore this PR.
31	"""
32	
33	ConversionResult = Tuple[List["CommitOperationAdd"], List[Tuple[str, "Exception"]]]

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/convert.py:61
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
60	                raise RuntimeError(
61	                    f"Error while trying to find names to remove to save state dict, but found no suitable name to keep for saving amongst: {shared}. None is covering the entire storage.Refusing to save/load the model since you could be storing much more memory than needed. Please refer to https://huggingface.co/docs/safetensors/torch_shared_tensors for more information. Or open an issue."
62	                )

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/convert.py:291
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
290	            elif pr is not None and not force:
291	                url = f"https://huggingface.co/{model_id}/discussions/{pr.num}"
292	                new_pr = pr

--------------------------------------------------
>> Issue: [B836:rmtree] shutil.rmtree
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/convert.py:325
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b836_rmtree.html
324	        finally:
325	            shutil.rmtree(folder)
326	        return new_pr, errors

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/convert.py:364
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
363	        txt = input(
364	            "This conversion script will unpickle a pickled file, which is inherently unsafe. If you do not trust this file, we invite you to use"
365	            " https://huggingface.co/spaces/safetensors/convert or google colab or other hosted solution to avoid potential issues with this file."
366	            " Continue [Y/n] ?"

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/fuzz.py:21
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
20	    with tempfile.NamedTemporaryFile() as f:
21	        f.write(data)
22	        f.seek(0)

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/py_src/safetensors/torch.py:103
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
102	            raise RuntimeError(
103	                "Error while trying to find names to remove to save state dict, but found no suitable name to keep"
104	                f" for saving amongst: {shared}. None is covering the entire storage.Refusing to save/load the model"
105	                " since you could be storing much more memory than needed. Please refer to"

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/py_src/safetensors/torch.py:489
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
488	        raise RuntimeError(
489	            f"""
490	            Some tensors share memory, this will lead to duplicate memory on disk and potential differences when loading them again: {failing}.
491	            A potential way to correctly save your model is to use `save_model`.

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/stub.py:153
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
152	        with open(filename, "r") as f:
153	            data = f.read()
154	            assert data == pyi_content, f"The content of {filename} seems outdated, please run `python stub.py`"

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/stub.py:157
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
156	        with open(filename, "w") as f:
157	            f.write(pyi_content)
158	

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/stub.py:176
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
175	            with open(filename, "r") as f:
176	                data = f.read()
177	                assert data == py_content, f"The content of {filename} seems outdated, please run `python stub.py`"

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/stub.py:180
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
179	            with open(filename, "w") as f:
180	                f.write(py_content)
181	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/stub.py:183
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
182	    for name, submodule in submodules:
183	        write(submodule, os.path.join(directory, name), f"{name}", check=check)
184	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/stub.py:193
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
192	
193	    write(
194	        safetensors._safetensors_rust,
195	        "py_src/safetensors/",
196	        "safetensors",
197	        check=args.check,
198	    )

--------------------------------------------------
>> Issue: [B817:system] platform.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_flax_comparison.py:5
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b817_system.html
4	
5	if platform.system() != "Windows":
6	    # This platform is not supported, we don't want to crash on import

--------------------------------------------------
>> Issue: [B308:blacklist] platform.system
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_flax_comparison.py:5
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b308-platform-system
4	
5	if platform.system() != "Windows":
6	    # This platform is not supported, we don't want to crash on import

--------------------------------------------------
>> Issue: [B817:system] platform.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_flax_comparison.py:16
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b817_system.html
15	# Jax doesn't not exist on Windows
16	@unittest.skipIf(platform.system() == "Windows", "Flax is not available on Windows")
17	class LoadTestCase(unittest.TestCase):

--------------------------------------------------
>> Issue: [B308:blacklist] platform.system
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_flax_comparison.py:16
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b308-platform-system
15	# Jax doesn't not exist on Windows
16	@unittest.skipIf(platform.system() == "Windows", "Flax is not available on Windows")
17	class LoadTestCase(unittest.TestCase):

--------------------------------------------------
>> Issue: [B817:system] platform.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_mlx_comparison.py:6
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b817_system.html
5	HAS_MLX = False
6	if platform.system() == "Darwin":
7	    # This platform is not supported, we don't want to crash on import

--------------------------------------------------
>> Issue: [B308:blacklist] platform.system
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_mlx_comparison.py:6
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b308-platform-system
5	HAS_MLX = False
6	if platform.system() == "Darwin":
7	    # This platform is not supported, we don't want to crash on import

--------------------------------------------------
>> Issue: [B817:system] platform.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_mlx_comparison.py:21
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b817_system.html
20	# MLX only exists on Mac
21	@unittest.skipIf(platform.system() != "Darwin", "Mlx is not available on non Mac")
22	@unittest.skipIf(not HAS_MLX, "Mlx is not available.")

--------------------------------------------------
>> Issue: [B308:blacklist] platform.system
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_mlx_comparison.py:21
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b308-platform-system
20	# MLX only exists on Mac
21	@unittest.skipIf(platform.system() != "Darwin", "Mlx is not available on non Mac")
22	@unittest.skipIf(not HAS_MLX, "Mlx is not available.")

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_simple.py:29
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
28	        save_file({"test": data}, "serialization.safetensors")
29	        out = open("serialization.safetensors", "rb").read()
30	        self.assertEqual(

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_simple.py:45
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
44	        save_file({"test": data}, "serialization.safetensors")
45	        out = open("serialization.safetensors", "rb").read()
46	        self.assertEqual(

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_simple.py:66
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
65	        with tempfile.NamedTemporaryFile() as f:
66	            f.write(serialized)
67	            f.seek(0)

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_simple.py:66
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
65	        with tempfile.NamedTemporaryFile() as f:
66	            f.write(serialized)
67	            f.seek(0)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_simple.py:168
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
167	        with open("./out.safetensors", "w") as g:
168	            g.write("something")
169	

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/bindings/python/tests/test_simple.py:168
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
167	        with open("./out.safetensors", "w") as g:
168	            g.write("something")
169	

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/py_src/safetensors/torch.py:103
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
102	            raise RuntimeError(
103	                "Error while trying to find names to remove to save state dict, but found no suitable name to keep"
104	                f" for saving amongst: {shared}. None is covering the entire storage.Refusing to save/load the model"
105	                " since you could be storing much more memory than needed. Please refer to"

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/safetensors-0.5.3/safetensors-0.5.3/py_src/safetensors/torch.py:489
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
488	        raise RuntimeError(
489	            f"""
490	            Some tensors share memory, this will lead to duplicate memory on disk and potential differences when loading them again: {failing}.
491	            A potential way to correctly save your model is to use `save_model`.

--------------------------------------------------

Code scanned:
	Total lines of code: 3709
	Total lines skipped (#nosec): 0

Run metrics:
	Total issues (by severity):
		Undefined: 0.0
		Low: 0.0
		Medium: 13.0
		High: 23.0
	Total issues (by confidence):
		Undefined: 0.0
		Low: 0.0
		Medium: 31.0
		High: 5.0
Files skipped (0):
