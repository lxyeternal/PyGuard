Run started:2025-04-12 10:54:07.028708

Test results:
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/__init__.py:6
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
5	
6	print("Warning: onnxruntime_tools is deprecated. Use onnxruntime or onnxruntime-gpu instead. For more information, see https://github.com/microsoft/onnxruntime/blob/master/onnxruntime/python/tools/transformers/README.md.\n")

--------------------------------------------------
>> Issue: [B840:executor] concurrent.futures.Executor
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/benchmark_helper.py:308
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b840_executor.html
307	    from concurrent.futures import ThreadPoolExecutor
308	    with ThreadPoolExecutor() as executor:
309	        monitor = MemoryMonitor()

--------------------------------------------------
>> Issue: [B838:process] multiprocessing.Process
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/bert_perf_test.py:150
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b838_process.html
149	def launch_test(model_setting, test_setting, perf_results, all_inputs, intra_op_num_threads):
150	    process = multiprocessing.Process(target=run_one_test,
151	                                      args=(model_setting, test_setting, perf_results, all_inputs, intra_op_num_threads))
152	    process.start()

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/bert_test_data.py:121
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
120	        with open(os.path.join(dir, 'input_{}.pb'.format(index)), 'wb') as f:
121	            f.write(tensor.SerializeToString())
122	        index += 1

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/bert_test_data.py:311
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
310	    with open(onnx_file, "rb") as f:
311	        model.ParseFromString(f.read())
312	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/bert_test_data.py:408
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
407	            with open(os.path.join(dir, 'output_{}.pb'.format(i)), 'wb') as f:
408	                f.write(tensor_result.SerializeToString())
409	

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:12
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
11	    "bert-base-uncased":
12	    ("bert", "BertConfig", "", "https://storage.googleapis.com/bert_models/2018_10_18/uncased_L-12_H-768_A-12.zip"),
13	    "bert-base-cased":
14	    ("bert", "BertConfig", "", "https://storage.googleapis.com/bert_models/2019_05_30/wwm_cased_L-24_H-1024_A-16.zip"),

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:14
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
13	    "bert-base-cased":
14	    ("bert", "BertConfig", "", "https://storage.googleapis.com/bert_models/2019_05_30/wwm_cased_L-24_H-1024_A-16.zip"),
15	    "bert-large-uncased":
16	    ("bert", "BertConfig", "", "https://storage.googleapis.com/bert_models/2018_10_18/uncased_L-24_H-1024_A-16.zip"),

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:16
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
15	    "bert-large-uncased":
16	    ("bert", "BertConfig", "", "https://storage.googleapis.com/bert_models/2018_10_18/uncased_L-24_H-1024_A-16.zip"),
17	    "albert-base": ("albert", "AlbertConfig", "", "https://storage.googleapis.com/albert_models/albert_base_v1.tar.gz"),

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:17
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
16	    ("bert", "BertConfig", "", "https://storage.googleapis.com/bert_models/2018_10_18/uncased_L-24_H-1024_A-16.zip"),
17	    "albert-base": ("albert", "AlbertConfig", "", "https://storage.googleapis.com/albert_models/albert_base_v1.tar.gz"),
18	    "albert-large":
19	    ("albert", "AlbertConfig", "", "https://storage.googleapis.com/albert_models/albert_large_v1.tar.gz"),

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:19
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
18	    "albert-large":
19	    ("albert", "AlbertConfig", "", "https://storage.googleapis.com/albert_models/albert_large_v1.tar.gz"),
20	    "gpt-2-117M": ("gpt2", "GPT2Config", "GPT2Model", "https://storage.googleapis.com/gpt-2/models/117M"),

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:20
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
19	    ("albert", "AlbertConfig", "", "https://storage.googleapis.com/albert_models/albert_large_v1.tar.gz"),
20	    "gpt-2-117M": ("gpt2", "GPT2Config", "GPT2Model", "https://storage.googleapis.com/gpt-2/models/117M"),
21	    "gpt-2-124M": ("gpt2", "GPT2Config", "GPT2Model", "https://storage.googleapis.com/gpt-2/models/124M")

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:21
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
20	    "gpt-2-117M": ("gpt2", "GPT2Config", "GPT2Model", "https://storage.googleapis.com/gpt-2/models/117M"),
21	    "gpt-2-124M": ("gpt2", "GPT2Config", "GPT2Model", "https://storage.googleapis.com/gpt-2/models/124M")
22	}

--------------------------------------------------
>> Issue: [B820:get] requests.get
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:26
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b820_get.html
25	def download_compressed_file(tf_ckpt_url, ckpt_dir):
26	    r = requests.get(tf_ckpt_url)
27	    compressed_file_name = tf_ckpt_url.split("/")[-1]

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:30
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
29	    with open(compressed_file_dir, 'wb') as f:
30	        f.write(r.content)
31	    return compressed_file_dir

--------------------------------------------------
>> Issue: [B834:open] tarfile.open
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:75
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b834_open.html
74	        import tarfile
75	        with tarfile.open(tar_dir, 'r') as tar_ref:
76	            tar_ref.extractall(ckpt_dir)

--------------------------------------------------
>> Issue: [B820:get] requests.get
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:83
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b820_get.html
82	        for filename in ['checkpoint', 'model.ckpt.data-00000-of-00001', 'model.ckpt.index', 'model.ckpt.meta']:
83	            r = requests.get(tf_ckpt_url + "/" + filename)
84	            with open(os.path.join(ckpt_dir, filename), 'wb') as f:

--------------------------------------------------
>> Issue: [B834:open] tarfile.open
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:84
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b834_open.html
83	            r = requests.get(tf_ckpt_url + "/" + filename)
84	            with open(os.path.join(ckpt_dir, filename), 'wb') as f:
85	                f.write(r.content)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/convert_tf_models_to_pytorch.py:85
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
84	            with open(os.path.join(ckpt_dir, filename), 'wb') as f:
85	                f.write(r.content)
86	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/gpt2_tester.py:181
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
180	            with open(os.path.join(path, 'input_{}.pb'.format(i)), 'wb') as f:
181	                f.write(tensor.SerializeToString())
182	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/gpt2_tester.py:188
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
187	            with open(os.path.join(path, 'output_{}.pb'.format(i)), 'wb') as f:
188	                f.write(tensor.SerializeToString())
189	

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/longformer/generate_test_data.py:73
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
72	    with open(onnx_file, "rb") as f:
73	        model.ParseFromString(f.read())
74	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/onnx_model.py:695
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
694	            with open(output_path, "w") as out:
695	                out.write(str(self.model))
696	        else:

--------------------------------------------------
>> Issue: [B836:rmtree] shutil.rmtree
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/parity_check_helper.py:65
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b836_rmtree.html
64	        import shutil
65	        shutil.rmtree(outputs_path)
66	    dir_path.mkdir(parents=True, exist_ok=True)

--------------------------------------------------
>> Issue: [B838:process] multiprocessing.Process
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/parity_check_helper.py:68
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b838_process.html
67	
68	    process = multiprocessing.Process(target=inference, args=(model_path, dummy_inputs, outputs_path, use_gpu))
69	    process.start()

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/parity_check_helper.py:85
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
84	            tensor = TensorProto()
85	            tensor.ParseFromString(f.read())
86	            array = numpy_helper.to_array(tensor)

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/parity_check_helper.py:89
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
88	                tensor_other = TensorProto()
89	                tensor_other.ParseFromString(f.read())
90	                array_other = numpy_helper.to_array(tensor_other)

--------------------------------------------------
>> Issue: [B812:system] os.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/parity_check_helper.py:127
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b812_system.html
126	    # Get GPT-2 model from huggingface using convert_to_onnx.py
127	    os.system('python convert_to_onnx.py -m gpt2 --output gpt2_fp32.onnx -o -p fp32 --use_gpu')
128	    os.system('python convert_to_onnx.py -m gpt2 --output gpt2_fp16.onnx -o -p fp16 --use_gpu')

--------------------------------------------------
>> Issue: [B316:blacklist] os.system
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/parity_check_helper.py:127
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b313-b320-os-system
126	    # Get GPT-2 model from huggingface using convert_to_onnx.py
127	    os.system('python convert_to_onnx.py -m gpt2 --output gpt2_fp32.onnx -o -p fp32 --use_gpu')
128	    os.system('python convert_to_onnx.py -m gpt2 --output gpt2_fp16.onnx -o -p fp16 --use_gpu')

--------------------------------------------------
>> Issue: [B812:system] os.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/parity_check_helper.py:128
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b812_system.html
127	    os.system('python convert_to_onnx.py -m gpt2 --output gpt2_fp32.onnx -o -p fp32 --use_gpu')
128	    os.system('python convert_to_onnx.py -m gpt2 --output gpt2_fp16.onnx -o -p fp16 --use_gpu')
129	

--------------------------------------------------
>> Issue: [B316:blacklist] os.system
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/parity_check_helper.py:128
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b313-b320-os-system
127	    os.system('python convert_to_onnx.py -m gpt2 --output gpt2_fp32.onnx -o -p fp32 --use_gpu')
128	    os.system('python convert_to_onnx.py -m gpt2 --output gpt2_fp16.onnx -o -p fp16 --use_gpu')
129	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/shape_optimizer.py:189
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
188	        with open(temp_model_path, "wb") as out:
189	            out.write(self.model.SerializeToString())
190	        sess_options = onnxruntime.SessionOptions()

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/shape_optimizer.py:189
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
188	        with open(temp_model_path, "wb") as out:
189	            out.write(self.model.SerializeToString())
190	        sess_options = onnxruntime.SessionOptions()

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/shape_optimizer.py:306
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
305	            with open(output_path, "wb") as out:
306	                out.write(self.model.SerializeToString())
307	

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/shape_optimizer.py:306
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
305	            with open(output_path, "wb") as out:
306	                out.write(self.model.SerializeToString())
307	

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/onnxruntime_tools/transformers/shape_optimizer.py:350
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
349	    with open(args.input, "rb") as input_file:
350	        model.ParseFromString(input_file.read())
351	    onnx_model = OnnxModel(model)

--------------------------------------------------
>> Issue: [B836:rmtree] shutil.rmtree
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/setup.py:23
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b836_rmtree.html
22	    if dist_dir.exists():
23	        shutil.rmtree(dist_dir)
24	    ignore = shutil.ignore_patterns('test_*.py')

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/setup.py:57
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
56	    with open(readme_path, encoding='utf-8') as f:
57	        description = f.read()
58	        start_pos = description.find('# Introduction')

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/onnxruntime_tools-1.7.0/onnxruntime_tools-1.7.0/setup.py:81
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
80	    author_email='onnx@microsoft.com',
81	    url='https://github.com/microsoft/onnxruntime',
82	    packages=packages,

--------------------------------------------------

Code scanned:
	Total lines of code: 12724
	Total lines skipped (#nosec): 0

Run metrics:
	Total issues (by severity):
		Undefined: 0.0
		Low: 0.0
		Medium: 11.0
		High: 28.0
	Total issues (by confidence):
		Undefined: 0.0
		Low: 0.0
		Medium: 37.0
		High: 2.0
Files skipped (0):
