Run started:2025-04-12 17:24:24.904756

Test results:
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/contrib/cldis.py:66
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
65	                with open(os.path.join(tmp_dir, "cl.ptx"), "w") as f:
66	                    f.write(res)
67	                tgt = re.findall(r".target sm_[0-9]*", res, re.MULTILINE)[0]

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/contrib/cldis.py:66
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
65	                with open(os.path.join(tmp_dir, "cl.ptx"), "w") as f:
66	                    f.write(res)
67	                tgt = re.findall(r".target sm_[0-9]*", res, re.MULTILINE)[0]

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/contrib/cldis.py:88
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
87	        with open(cl_file) as f:
88	            cl_str = f.read()
89	        output = sys.argv[2] if len(sys.argv) >= 3 else None

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/contrib/fortran-to-opencl/translate.py:1411
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1410	def f2cl_files(source_file, target_file, **kwargs):
1411	    mod = f2cl(open(source_file).read(), **kwargs)
1412	    open(target_file, "w").write(mod)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/contrib/fortran-to-opencl/translate.py:1412
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1411	    mod = f2cl(open(source_file).read(), **kwargs)
1412	    open(target_file, "w").write(mod)
1413	

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/doc/conf.py:5
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
4	_conf_url = \
5	        "https://raw.githubusercontent.com/inducer/sphinxconfig/main/sphinxconfig.py"
6	with urlopen(_conf_url) as _inf:
7	    exec(compile(_inf.read(), _conf_url, "exec"), globals())

--------------------------------------------------
>> Issue: [B818:urlopen] urllib.request.urlopen
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/doc/conf.py:6
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b818_urlopen.html
5	        "https://raw.githubusercontent.com/inducer/sphinxconfig/main/sphinxconfig.py"
6	with urlopen(_conf_url) as _inf:
7	    exec(compile(_inf.read(), _conf_url, "exec"), globals())

--------------------------------------------------
>> Issue: [B800:exec_used] exec
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/doc/conf.py:7
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b800_exec_used.html
6	with urlopen(_conf_url) as _inf:
7	    exec(compile(_inf.read(), _conf_url, "exec"), globals())
8	

--------------------------------------------------
>> Issue: [B800:exec_used] exec
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/doc/conf.py:16
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b800_exec_used.html
15	    ver_src = ver_file.read()
16	exec(compile(ver_src, "../pyopencl/version.py", "exec"), ver_dic)
17	version = ".".join(str(x) for x in ver_dic["VERSION"])

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/doc/conf.py:22
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
21	intersphinx_mapping = {
22	    "python": ("https://docs.python.org/3", None),
23	    "numpy": ("https://numpy.org/doc/stable/", None),

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/doc/conf.py:23
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
22	    "python": ("https://docs.python.org/3", None),
23	    "numpy": ("https://numpy.org/doc/stable/", None),
24	    "mako": ("https://docs.makotemplates.org/en/latest", None),

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/doc/conf.py:24
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
23	    "numpy": ("https://numpy.org/doc/stable/", None),
24	    "mako": ("https://docs.makotemplates.org/en/latest", None),
25	    "pytools": ("https://documen.tician.de/pytools", None),

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/doc/conf.py:25
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
24	    "mako": ("https://docs.makotemplates.org/en/latest", None),
25	    "pytools": ("https://documen.tician.de/pytools", None),
26	}

--------------------------------------------------
>> Issue: [B803:gethostname] socket.gethostname
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/examples/black-hole-accretion.py:2221
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b803_gethostname.html
2220	
2221	    Hostname = gethostname()
2222	    Date = time.strftime("%Y%m%d_%H%M%S")

--------------------------------------------------
>> Issue: [B302:blacklist] socket.gethostname
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/examples/black-hole-accretion.py:2221
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b302-socket-gethostname
2220	
2221	    Hostname = gethostname()
2222	    Date = time.strftime("%Y%m%d_%H%M%S")

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/examples/n-body.py:35
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
34	
35	BlobOpenCL = """
36	#define TFP32 0
37	#define TFP64 1
38	
39	#define TFORCE 0
40	#define TPOTENTIAL 1
41	
42	#define NONE 0
43	#define NEGEXP 1
44	#define CORRAD 2
45	
46	#if TYPE == TFP32
47	#define MYFLOAT4 float4
48	#define MYFLOAT8 float8
49	#define MYFLOAT float
50	#define DISTANCE fast_distance
51	#else
52	#define MYFLOAT4 double4
53	#define MYFLOAT8 double8
54	#define MYFLOAT double
55	#define DISTANCE distance
56	#if defined(cl_khr_fp64)  // Khronos extension available?
57	#pragma OPENCL EXTENSION cl_khr_fp64 : enable
58	#endif
59	#endif
60	
61	#define znew  ((zmwc=36969*(zmwc&65535)+(zmwc>>16))<<16)
62	#define wnew  ((wmwc=18000*(wmwc&65535)+(wmwc>>16))&65535)
63	#define MWC   (znew+wnew)
64	#define SHR3  (jsr=(jsr=(jsr=jsr^(jsr<<17))^(jsr>>13))^(jsr<<5))
65	#define CONG  (jcong=69069*jcong+1234567)
66	#define KISS  ((MWC^CONG)+SHR3)
67	
68	#define MWCfp (MYFLOAT)(MWC * 2.3283064365386963e-10f)
69	#define KISSfp (MYFLOAT)(KISS * 2.3283064365386963e-10f)
70	#define SHR3fp (MYFLOAT)(SHR3 * 2.3283064365386963e-10f)
71	#define CONGfp (MYFLOAT)(CONG * 2.3283064365386963e-10f)
72	
73	#define PI (MYFLOAT)3.141592653589793238e0f
74	
75	#define SMALL_NUM (MYFLOAT)1.e-9f
76	
77	#define CoreRadius (MYFLOAT)(1.e0f)
78	
79	// Create my own Distance implementation: distance buggy on Oland AMD chipset
80	
81	MYFLOAT MyDistance(MYFLOAT4 n,MYFLOAT4 m)
82	{
83	    private MYFLOAT x2,y2,z2;
84	    x2=n.s0-m.s0;
85	    x2*=x2;
86	    y2=n.s1-m.s1;
87	    y2*=y2;
88	    z2=n.s2-m.s2;
89	    z2*=z2;
90	    return(sqrt(x2+y2+z2));
91	}
92	
93	// Potential between 2 m,n bodies
94	MYFLOAT PairPotential(MYFLOAT4 m,MYFLOAT4 n)
95	#if ARTEVASION == NEGEXP
96	// Add exp(-r) to numerator to avoid divergence for low distances
97	{
98	    MYFLOAT r=DISTANCE(n,m);
99	    return((-1.e0f+exp(-r))/r);
100	}
101	#elif ARTEVASION == CORRAD
102	// Add Core Radius to avoid divergence for low distances
103	{
104	    MYFLOAT r=DISTANCE(n,m);
105	    return(-1.e0f/sqrt(r*r+CoreRadius*CoreRadius));
106	}
107	#else
108	// Classical potential in 1/r
109	{
110	//    return((MYFLOAT)(-1.e0f)/(MyDistance(m,n)));
111	    return((MYFLOAT)(-1.e0f)/(DISTANCE(n,m)));
112	}
113	#endif
114	
115	// Interaction based of Force as gradient of Potential
116	MYFLOAT4 Interaction(MYFLOAT4 m,MYFLOAT4 n)
117	#if INTERACTION == TFORCE
118	#if ARTEVASION == NEGEXP
119	// Force gradient of potential, set as (1-exp(-r))/r
120	{
121	    private MYFLOAT r=MyDistance(n,m);
122	    private MYFLOAT num=1.e0f+exp(-r)*(r-1.e0f);
123	    return((n-m)*num/(MYFLOAT)(r*r*r));
124	}
125	#elif ARTEVASION == CORRAD
126	// Force gradient of potential, (Core Radius) set as 1/sqrt(r**2+CoreRadius**2)
127	{
128	    private MYFLOAT r=MyDistance(n,m);
129	    private MYFLOAT den=sqrt(r*r+CoreRadius*CoreRadius);
130	    return((n-m)/(MYFLOAT)(den*den*den));
131	}
132	#else
133	// Simplest implementation of force (equals to acceleration)
134	// seems to bo bad (numerous artevasions)
135	// MYFLOAT4 InteractionForce(MYFLOAT4 m,MYFLOAT4 n)
136	{
137	    private MYFLOAT r=MyDistance(n,m);
138	    return((n-m)/(MYFLOAT)(r*r*r));
139	}
140	#endif
141	#else
142	// Force definited as gradient of potential
143	// Estimate potential and proximate potential to estimate force
144	{
145	    // 1/1024 seems to be a good factor: larger one provides bad results
146	    private MYFLOAT epsilon=(MYFLOAT)(1.e0f/1024);
147	    private MYFLOAT4 er=normalize(n-m);
148	    private MYFLOAT4 dr=er*(MYFLOAT)epsilon;
149	
150	    return(er/epsilon*(PairPotential(m,n)-PairPotential(m+dr,n)));
151	}
152	#endif
153	
154	MYFLOAT AtomicPotential(__global MYFLOAT4* clDataX,int gid)
155	{
156	    private MYFLOAT potential=(MYFLOAT)0.e0f;
157	    private MYFLOAT4 x=clDataX[gid];
158	
159	    for (int i=0;i<get_global_size(0);i++)
160	    {
161	        if (gid != i)
162	        potential+=PairPotential(x,clDataX[i]);
163	    }
164	
165	    barrier(CLK_GLOBAL_MEM_FENCE);
166	    return(potential);
167	}
168	
169	MYFLOAT AtomicPotentialCoM(__global MYFLOAT4* clDataX,__global MYFLOAT4* clCoM,int gid) // # noqa: E501
170	{
171	    return(PairPotential(clDataX[gid],clCoM[0]));
172	}
173	
174	// Elements from : http://doswa.com/2009/01/02/fourth-order-runge-kutta-numerical-integration.html
175	
176	MYFLOAT8 AtomicRungeKutta(__global MYFLOAT4* clDataInX,__global MYFLOAT4* clDataInV,int gid,MYFLOAT dt)
177	{
178	    private MYFLOAT4 a0,v0,x0,a1,v1,x1,a2,v2,x2,a3,v3,x3,a4,v4,x4,xf,vf;
179	    MYFLOAT4 DT=dt*(MYFLOAT4)(1.e0f,1.e0f,1.e0f,1.e0f);
180	
181	    a0=(MYFLOAT4)(0.e0f,0.e0f,0.e0f,0.e0f);
182	    v0=(MYFLOAT4)clDataInV[gid];
183	    x0=(MYFLOAT4)clDataInX[gid];
184	    int N = get_global_size(0);
185	
186	    for (private int i=0;i<N;i++)
187	    {
188	        if (gid != i)
189	        a0+=Interaction(x0,clDataInX[i]);
190	    }
191	
192	    a1=(MYFLOAT4)(0.e0f,0.e0f,0.e0f,0.e0f);
193	    v1=a0*dt+v0;
194	    x1=v0*dt+x0;
195	    for (private int j=0;j<N;j++)
196	    {
197	        if (gid != j)
198	        a1+=Interaction(x1,clDataInX[j]);
199	    }
200	
201	    a2=(MYFLOAT4)(0.e0f,0.e0f,0.e0f,0.e0f);
202	    v2=a1*(MYFLOAT)(dt/2.e0f)+v0;
203	    x2=v1*(MYFLOAT)(dt/2.e0f)+x0;
204	    for (private int k=0;k<N;k++)
205	    {
206	        if (gid != k)
207	        a2+=Interaction(x2,clDataInX[k]);
208	    }
209	
210	    a3=(MYFLOAT4)(0.e0f,0.e0f,0.e0f,0.e0f);
211	    v3=a2*(MYFLOAT)(dt/2.e0f)+v0;
212	    x3=v2*(MYFLOAT)(dt/2.e0f)+x0;
213	    for (private int l=0;l<N;l++)
214	    {
215	        if (gid != l)
216	        a3+=Interaction(x3,clDataInX[l]);
217	    }
218	
219	    a4=(MYFLOAT4)(0.e0f,0.e0f,0.e0f,0.e0f);
220	    v4=a3*dt+v0;
221	    x4=v3*dt+x0;
222	    for (private int m=0;m<N;m++)
223	    {
224	        if (gid != m)
225	        a4+=Interaction(x4,clDataInX[m]);
226	    }
227	
228	    xf=x0+dt*(v1+(MYFLOAT)2.e0f*(v2+v3)+v4)/(MYFLOAT)6.e0f;
229	    vf=v0+dt*(a1+(MYFLOAT)2.e0f*(a2+a3)+a4)/(MYFLOAT)6.e0f;
230	
231	    return((MYFLOAT8)(xf.s0,xf.s1,xf.s2,0.e0f,vf.s0,vf.s1,vf.s2,0.e0f));
232	}
233	
234	MYFLOAT8 AtomicHeun(__global MYFLOAT4* clDataInX,__global MYFLOAT4* clDataInV,int gid,MYFLOAT dt)
235	{
236	    private MYFLOAT4 x0,v0,a0,x1,v1,a1,xf,vf;
237	    MYFLOAT4 Dt=dt*(MYFLOAT4)(1.e0f,1.e0f,1.e0f,1.e0f);
238	
239	    x0=(MYFLOAT4)clDataInX[gid];
240	    v0=(MYFLOAT4)clDataInV[gid];
241	    a0=(MYFLOAT4)(0.e0f,0.e0f,0.e0f,0.e0f);
242	
243	    for (private int i=0;i<get_global_size(0);i++)
244	    {
245	        if (gid != i)
246	        a0+=Interaction(x0,clDataInX[i]);
247	    }
248	
249	    a1=(MYFLOAT4)(0.e0f,0.e0f,0.e0f,0.e0f);
250	    //v1=v0+dt*a0;
251	    //x1=x0+dt*v0;
252	    v1=dt*a0+v0;
253	    x1=dt*v0+x0;
254	
255	    for (private int j=0;j<get_global_size(0);j++)
256	    {
257	        if (gid != j)
258	        a1+=Interaction(x1,clDataInX[j]);
259	    }
260	
261	    vf=v0+dt*(a0+a1)/(MYFLOAT)2.e0f;
262	    xf=x0+dt*(v0+v1)/(MYFLOAT)2.e0f;
263	
264	    return((MYFLOAT8)(xf.s0,xf.s1,xf.s2,0.e0f,vf.s0,vf.s1,vf.s2,0.e0f));
265	}
266	
267	MYFLOAT8 AtomicImplicitEuler(__global MYFLOAT4* clDataInX,__global MYFLOAT4* clDataInV,int gid,MYFLOAT dt)
268	{
269	    MYFLOAT4 x0,v0,a,xf,vf;
270	
271	    x0=(MYFLOAT4)clDataInX[gid];
272	    v0=(MYFLOAT4)clDataInV[gid];
273	    a=(MYFLOAT4)(0.e0f,0.e0f,0.e0f,0.e0f);
274	
275	    for (private int i=0;i<get_global_size(0);i++)
276	    {
277	        if (gid != i)
278	          a+=Interaction(x0,clDataInX[i]);
279	    }
280	
281	    vf=v0+dt*a;
282	    xf=x0+dt*vf;
283	
284	    return((MYFLOAT8)(xf.s0,xf.s1,xf.s2,0.e0f,vf.s0,vf.s1,vf.s2,0.e0f));
285	}
286	
287	MYFLOAT8 AtomicExplicitEuler(__global MYFLOAT4* clDataInX,__global MYFLOAT4* clDataInV,int gid,MYFLOAT dt)
288	{
289	    MYFLOAT4 x0,v0,a,xf,vf;
290	
291	    x0=(MYFLOAT4)clDataInX[gid];
292	    v0=(MYFLOAT4)clDataInV[gid];
293	    a=(MYFLOAT4)(0.e0f,0.e0f,0.e0f,0.e0f);
294	
295	    for (private int i=0;i<get_global_size(0);i++)
296	    {
297	        if (gid != i)
298	        a+=Interaction(x0,clDataInX[i]);
299	    }
300	
301	    vf=v0+dt*a;
302	    xf=x0+dt*v0;
303	
304	    return((MYFLOAT8)(xf.s0,xf.s1,xf.s2,0.e0f,vf.s0,vf.s1,vf.s2,0.e0f));
305	}
306	
307	__kernel void InBallSplutterPoints(__global MYFLOAT4* clDataX,
308	                                   MYFLOAT diameter,uint seed_z,uint seed_w)
309	{
310	    private int gid=get_global_id(0);
311	    private uint zmwc=seed_z+gid;
312	    private uint wmwc=seed_w+(gid+1)%2;
313	    private MYFLOAT Heat;
314	
315	    for (int i=0;i<gid;i++)
316	    {
317	        Heat=MWCfp;
318	    }
319	
320	// More accurate distribution based on spherical coordinates
321	// Disactivated because of AMD Oland GPU crash on launch
322	//     private MYFLOAT Radius,Theta,Phi,PosX,PosY,PosZ,SinTheta;
323	//     Radius=MWCfp*diameter/2.e0f;
324	//     Theta=(MYFLOAT)acos((float)(-2.e0f*MWCfp+1.0e0f));
325	//     Phi=(MYFLOAT)(2.e0f*PI*MWCfp);
326	//     SinTheta=sin((float)Theta);
327	//     PosX=cos((float)Phi)*Radius*SinTheta;
328	//     PosY=sin((float)Phi)*Radius*SinTheta;
329	//     PosZ=cos((float)Theta)*Radius;
330	//     clDataX[gid]=(MYFLOAT4)(PosX,PosY,PosZ,0.e0f);
331	
332	    private MYFLOAT Radius=diameter/2.e0f;
333	    private MYFLOAT Length=diameter;
334	    private MYFLOAT4 Position;
335	    while (Length>Radius) {
336	       Position=(MYFLOAT4)((MWCfp-0.5e0f)*diameter,(MWCfp-0.5e0f)*diameter,(MWCfp-0.5e0f)*diameter,0.e0f);
337	       Length=(MYFLOAT)length((MYFLOAT4)Position);
338	    }
339	
340	    clDataX[gid]=Position;
341	
342	    barrier(CLK_GLOBAL_MEM_FENCE);
343	}
344	
345	__kernel void InBoxSplutterPoints(__global MYFLOAT4* clDataX, MYFLOAT box,
346	                             uint seed_z,uint seed_w)
347	{
348	    int gid=get_global_id(0);
349	    uint zmwc=seed_z+gid;
350	    uint wmwc=seed_w-gid;
351	    private MYFLOAT Heat;
352	
353	    for (int i=0;i<gid;i++)
354	    {
355	        Heat=MWCfp;
356	    }
357	
358	    clDataX[gid]=(MYFLOAT4)((MWCfp-0.5e0f)*box,(MWCfp-0.5e0f)*box,(MWCfp-0.5e0f)*box,0.e0f);
359	
360	    barrier(CLK_GLOBAL_MEM_FENCE);
361	}
362	
363	__kernel void SplutterStress(__global MYFLOAT4* clDataX,__global MYFLOAT4* clDataV,__global MYFLOAT4* clCoM, MYFLOAT velocity,uint seed_z,uint seed_w)
364	{
365	    int gid = get_global_id(0);
366	    MYFLOAT N = (MYFLOAT)get_global_size(0);
367	    uint zmwc=seed_z+(uint)gid;
368	    uint wmwc=seed_w-(uint)gid;
369	    MYFLOAT4 CrossVector,SpeedVector,FromCoM;
370	    MYFLOAT Heat,ThetaA,PhiA,ThetaB,PhiB,Length,tA,tB,Polar;
371	
372	    for (int i=0;i<gid;i++)
373	    {
374	        Heat=MWCfp;
375	    }
376	
377	    // cast to float for sin,cos are NEEDED by Mesa FP64 implementation!
378	    // Implementation on AMD Oland are probably broken in float
379	
380	    FromCoM=(MYFLOAT4)(clDataX[gid]-clCoM[0]);
381	    Length=length(FromCoM);
382	    //Theta=acos(FromCoM.z/Length);
383	    //Phi=atan(FromCoM.y/FromCoM.x);
384	    // First tangential vector to sphere of length radius
385	    ThetaA=acos(FromCoM.x/Length)+5.e-1f*PI;
386	    PhiA=atan(FromCoM.y/FromCoM.z);
387	    // Second tangential vector to sphere of length radius
388	    ThetaB=acos((float)(FromCoM.x/Length));
389	    PhiB=atan((float)(FromCoM.y/FromCoM.z))+5.e-1f*PI;
390	    // (x,y) random coordinates to plane tangential to sphere
391	    Polar=MWCfp*2.e0f*PI;
392	    tA=cos((float)Polar);
393	    tB=sin((float)Polar);
394	
395	    // Exception for 2 particules to ovoid shifting
396	    if (get_global_size(0)==2) {
397	       CrossVector=(MYFLOAT4)(1.e0f,1.e0f,1.e0f,0.e0f);
398	    } else {
399	       CrossVector.s0=tA*cos((float)ThetaA)+tB*cos((float)ThetaB);
400	       CrossVector.s1=tA*sin((float)ThetaA)*sin((float)PhiA)+tB*sin((float)ThetaB)*sin((float)PhiB);
401	       CrossVector.s2=tA*sin((float)ThetaA)*cos((float)PhiA)+tB*sin((float)ThetaB)*cos((float)PhiB);
402	       CrossVector.s3=0.e0f;
403	    }
404	
405	    if (velocity<SMALL_NUM) {
406	       SpeedVector=(MYFLOAT4)normalize(cross(FromCoM,CrossVector))*sqrt((-AtomicPotential(clDataX,gid)/(MYFLOAT)2.e0f));
407	    }
408	    else
409	    {
410	
411	       SpeedVector=(MYFLOAT4)((MWCfp-5e-1f)*velocity,(MWCfp-5e-1f)*velocity,
412	                              (MWCfp-5e-1f)*velocity,0.e0f);
413	    }
414	    clDataV[gid]=SpeedVector;
415	    barrier(CLK_GLOBAL_MEM_FENCE);
416	}
417	
418	__kernel void RungeKutta(__global MYFLOAT4* clDataX,__global MYFLOAT4* clDataV,MYFLOAT h)
419	{
420	    private int gid = get_global_id(0);
421	    private MYFLOAT8 clDataGid;
422	
423	    clDataGid=AtomicRungeKutta(clDataX,clDataV,gid,h);
424	    barrier(CLK_GLOBAL_MEM_FENCE);
425	    clDataX[gid]=clDataGid.s0123;
426	    clDataV[gid]=clDataGid.s4567;
427	}
428	
429	__kernel void Heun(__global MYFLOAT4* clDataX,__global MYFLOAT4* clDataV,MYFLOAT h)
430	{
431	    private int gid = get_global_id(0);
432	    private MYFLOAT8 clDataGid;
433	
434	    clDataGid=AtomicHeun(clDataX,clDataV,gid,h);
435	    barrier(CLK_GLOBAL_MEM_FENCE);
436	    clDataX[gid]=clDataGid.s0123;
437	    clDataV[gid]=clDataGid.s4567;
438	}
439	
440	__kernel void ImplicitEuler(__global MYFLOAT4* clDataX,__global MYFLOAT4* clDataV,MYFLOAT h)
441	{
442	    private int gid = get_global_id(0);
443	    private MYFLOAT8 clDataGid;
444	
445	    clDataGid=AtomicImplicitEuler(clDataX,clDataV,gid,h);
446	    barrier(CLK_GLOBAL_MEM_FENCE);
447	    clDataX[gid]=clDataGid.s0123;
448	    clDataV[gid]=clDataGid.s4567;
449	}
450	
451	__kernel void ExplicitEuler(__global MYFLOAT4* clDataX,__global MYFLOAT4* clDataV,MYFLOAT h)
452	{
453	    private int gid = get_global_id(0);
454	    private MYFLOAT8 clDataGid;
455	
456	    clDataGid=AtomicExplicitEuler(clDataX,clDataV,gid,h);
457	    barrier(CLK_GLOBAL_MEM_FENCE);
458	    clDataX[gid]=clDataGid.s0123;
459	    clDataV[gid]=clDataGid.s4567;
460	}
461	
462	__kernel void CoMPotential(__global MYFLOAT4* clDataX,__global MYFLOAT4* clCoM,__global MYFLOAT* clPotential)
463	{
464	    int gid = get_global_id(0);
465	
466	    clPotential[gid]=PairPotential(clDataX[gid],clCoM[0]);
467	}
468	
469	__kernel void Potential(__global MYFLOAT4* clDataX,__global MYFLOAT* clPotential)
470	{
471	    int gid = get_global_id(0);
472	
473	    MYFLOAT potential=(MYFLOAT)0.e0f;
474	    MYFLOAT4 x=clDataX[gid];
475	
476	    for (int i=0;i<get_global_size(0);i++)
477	    {
478	        if (gid != i)
479	        potential+=PairPotential(x,clDataX[i]);
480	    }
481	
482	    barrier(CLK_GLOBAL_MEM_FENCE);
483	    clPotential[gid]=potential*(MYFLOAT)5.e-1f;
484	}
485	
486	__kernel void CenterOfMass(__global MYFLOAT4* clDataX,__global MYFLOAT4* clCoM,int Size)
487	{
488	    MYFLOAT4 CoM=clDataX[0];
489	
490	    for (int i=1;i<Size;i++)
491	    {
492	        CoM+=clDataX[i];
493	    }
494	
495	    barrier(CLK_GLOBAL_MEM_FENCE);
496	    clCoM[0]=(MYFLOAT4)(CoM.s0,CoM.s1,CoM.s2,0.e0f)/(MYFLOAT)Size;
497	}
498	
499	__kernel void Kinetic(__global MYFLOAT4* clDataV,__global MYFLOAT* clKinetic)
500	{
501	    int gid = get_global_id(0);
502	
503	    barrier(CLK_GLOBAL_MEM_FENCE);
504	    MYFLOAT d=(MYFLOAT)length(clDataV[gid]);
505	    clKinetic[gid]=(MYFLOAT)5.e-1f*(MYFLOAT)(d*d);
506	}
507	
508	"""
509	
510	
511	def MainOpenCL(clDataX, clDataV, Step, Method):

--------------------------------------------------
>> Issue: [B803:gethostname] socket.gethostname
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/examples/pi-monte-carlo.py:1114
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b803_gethostname.html
1113	                Metrology,
1114	                gethostname(),
1115	            ),

--------------------------------------------------
>> Issue: [B302:blacklist] socket.gethostname
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/examples/pi-monte-carlo.py:1114
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b302-socket-gethostname
1113	                Metrology,
1114	                gethostname(),
1115	            ),

--------------------------------------------------
>> Issue: [B803:gethostname] socket.gethostname
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/examples/pi-monte-carlo.py:1159
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b803_gethostname.html
1158	                Metrology,
1159	                gethostname(),
1160	            ),

--------------------------------------------------
>> Issue: [B302:blacklist] socket.gethostname
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/examples/pi-monte-carlo.py:1159
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b302-socket-gethostname
1158	                Metrology,
1159	                gethostname(),
1160	            ),

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/pyopencl/__init__.py:557
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
556	                try:
557	                    srcfile.write(source)
558	                finally:

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/pyopencl/__init__.py:557
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
556	                try:
557	                    srcfile.write(source)
558	                finally:

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/pyopencl/cache.py:193
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
192	                    try:
193	                        included_src = src_file.read()
194	                    finally:

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/pyopencl/cache.py:228
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
227	    try:
228	        contents = inf.read()
229	    finally:

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/pyopencl/cache.py:320
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
319	            try:
320	                binary = binary_file.read()
321	            finally:

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/pyopencl/cache.py:466
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
465	                    with open(source_path, "w") as outf:
466	                        outf.write(src)
467	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/pyopencl/cache.py:469
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
468	                    with open(binary_path, "wb") as outf:
469	                        outf.write(binary)
470	

--------------------------------------------------
>> Issue: [B802:b64encode] base64.b64encode
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/pyopencl/capture_call.py:151
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b802_b64encode.html
150	        with Indentation(cg):
151	            val = b64encode(compress(memoryview(val))).decode()
152	            i = 0

--------------------------------------------------
>> Issue: [B301:blacklist] base64.b64encode
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/pyopencl/capture_call.py:151
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b301-base64-b64encode
150	        with Indentation(cg):
151	            val = b64encode(compress(memoryview(val))).decode()
152	            i = 0

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/pyopencl/clrandom.py:26
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
25	
26	__doc__ = """
27	PyOpenCL includes and uses some of the `Random123 random number generators
28	<https://www.deshawresearch.com/resources.html>`__ by D.E. Shaw
29	Research. In addition to being usable through the convenience functions above,
30	they are available in any piece of code compiled through PyOpenCL by::
31	
32	    #include <pyopencl-random123/philox.cl>
33	    #include <pyopencl-random123/threefry.cl>
34	
35	See the `Philox source
36	<https://github.com/inducer/pyopencl/blob/main/pyopencl/cl/pyopencl-random123/philox.cl>`__
37	and the `Threefry source
38	<https://github.com/inducer/pyopencl/blob/main/pyopencl/cl/pyopencl-random123/threefry.cl>`__
39	for some documentation if you're planning on using Random123 directly.
40	
41	.. autoclass:: PhiloxGenerator
42	
43	.. autoclass:: ThreefryGenerator
44	
45	.. autofunction:: rand
46	.. autofunction:: fill_rand
47	
48	"""
49	
50	# }}}
51	
52	import numpy as np

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/pyopencl/compyte/array.py:204
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
203	            raise NotImplementedError(
204	                    "as_strided won't work on non-builtin arrays for now. "
205	                    "See https://github.com/numpy/numpy/issues/2466")
206	

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/pyopencl/scan.py:9
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
8	
9	__license__ = """
10	Licensed under the Apache License, Version 2.0 (the "License");
11	you may not use this file except in compliance with the License.
12	You may obtain a copy of the License at
13	
14	    https://www.apache.org/licenses/LICENSE-2.0
15	
16	Unless required by applicable law or agreed to in writing, software
17	distributed under the License is distributed on an "AS IS" BASIS,
18	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
19	See the License for the specific language governing permissions and
20	limitations under the License.
21	
22	Derived from code within the Thrust project, https://github.com/NVIDIA/thrust
23	"""
24	
25	import logging

--------------------------------------------------
>> Issue: [B800:exec_used] exec
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_algorithm.py:1183
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b800_exec_used.html
1182	    if len(sys.argv) > 1:
1183	        exec(sys.argv[1])
1184	    else:

--------------------------------------------------
>> Issue: [B817:system] platform.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_array.py:234
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b817_system.html
233	    if dev.platform.vendor == "Intel(R) Corporation" \
234	            and platform.system() == "Windows":
235	        pytest.xfail("large array fail with out-of-host memory with"

--------------------------------------------------
>> Issue: [B308:blacklist] platform.system
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_array.py:234
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b308-platform-system
233	    if dev.platform.vendor == "Intel(R) Corporation" \
234	            and platform.system() == "Windows":
235	        pytest.xfail("large array fail with out-of-host memory with"

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_array.py:1153
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
1152	    if queue.device.platform.name == "Intel(R) OpenCL":
1153	        pytest.skip("Intel CL regularly crashes on this test case "
1154	            "-- https://github.com/conda-forge/"

--------------------------------------------------
>> Issue: [B836:rmtree] shutil.rmtree
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_array.py:2391
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b836_rmtree.html
2390	
2391	        shutil.rmtree(xdg_dir)
2392	

--------------------------------------------------
>> Issue: [B800:exec_used] exec
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_array.py:2416
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b800_exec_used.html
2415	    if len(sys.argv) > 1:
2416	        exec(sys.argv[1])
2417	    else:

--------------------------------------------------
>> Issue: [B800:exec_used] exec
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_arrays_in_structs.py:98
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b800_exec_used.html
97	    if len(sys.argv) > 1:
98	        exec(sys.argv[1])
99	    else:

--------------------------------------------------
>> Issue: [B800:exec_used] exec
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_clmath.py:527
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b800_exec_used.html
526	    if len(sys.argv) > 1:
527	        exec(sys.argv[1])
528	    else:

--------------------------------------------------
>> Issue: [B800:exec_used] exec
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_clrandom.py:73
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b800_exec_used.html
72	    if len(sys.argv) > 1:
73	        exec(sys.argv[1])
74	    else:

--------------------------------------------------
>> Issue: [B800:exec_used] exec
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_enqueue_copy.py:269
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b800_exec_used.html
268	    if len(sys.argv) > 1:
269	        exec(sys.argv[1])
270	    else:

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_wrapper.py:866
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
865	    evt = cl.UserEvent(ctx)
866	    Thread(target=event_waiter1, args=(evt, 1)).start()
867	    sleep(.05)

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_wrapper.py:877
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
876	    evt = cl.UserEvent(ctx)
877	    Thread(target=event_waiter2, args=(evt, 2)).start()
878	    sleep(.05)

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_wrapper.py:1108
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1107	    with open(spv_filename, "rb") as spv_file:
1108	        spv = spv_file.read()
1109	

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_wrapper.py:1385
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1384	
1385	    t1 = threading.Thread(target=create_arrays_thread)
1386	    t2 = threading.Thread(target=create_arrays_thread)

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_wrapper.py:1386
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1385	    t1 = threading.Thread(target=create_arrays_thread)
1386	    t2 = threading.Thread(target=create_arrays_thread)
1387	

--------------------------------------------------
>> Issue: [B800:exec_used] exec
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_wrapper.py:1466
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b800_exec_used.html
1465	    compile_dict = {}
1466	    exec(compile(sio.getvalue(), "captured.py", "exec"), compile_dict)
1467	    compile_dict["main"]()

--------------------------------------------------
>> Issue: [B800:exec_used] exec
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/pyopencl-2025.1/pyopencl-2025.1/test/test_wrapper.py:1566
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b800_exec_used.html
1565	    if len(sys.argv) > 1:
1566	        exec(sys.argv[1])
1567	    else:

--------------------------------------------------

Code scanned:
	Total lines of code: 22143
	Total lines skipped (#nosec): 0

Run metrics:
	Total issues (by severity):
		Undefined: 0.0
		Low: 0.0
		Medium: 25.0
		High: 24.0
	Total issues (by confidence):
		Undefined: 0.0
		Low: 0.0
		Medium: 34.0
		High: 15.0
Files skipped (0):
