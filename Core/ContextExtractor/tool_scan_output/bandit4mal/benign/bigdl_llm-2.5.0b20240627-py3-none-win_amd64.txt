Run started:2025-04-12 12:45:08.651133

Test results:
>> Issue: [B841:cdll] ctypes.CDLL
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/ggml/model/bloom/bloom_cpp.py:90
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b841_cdll.html
89	            try:
90	                return ctypes.CDLL(str(_lib_path))
91	            except Exception as e:

--------------------------------------------------
>> Issue: [B841:cdll] ctypes.CDLL
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/ggml/model/gptneox/gptneox_cpp.py:91
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b841_cdll.html
90	            try:
91	                return ctypes.CDLL(str(_lib_path), **cdll_args)
92	            except Exception as e:

--------------------------------------------------
>> Issue: [B841:cdll] ctypes.CDLL
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/ggml/model/llama/llama_cpp.py:98
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b841_cdll.html
97	            try:
98	                return ctypes.CDLL(str(_lib_path), **cdll_args)
99	            except Exception as e:

--------------------------------------------------
>> Issue: [B841:cdll] ctypes.CDLL
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/ggml/model/starcoder/starcoder_cpp.py:90
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b841_cdll.html
89	            try:
90	                return ctypes.CDLL(str(_lib_path))
91	            except Exception as e:

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/gptq/convert/convert_gptq_to_ggml.py:37
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
36	    sname = dst_name.encode('utf-8')
37	    fout.write(struct.pack("iii", len(shape), len(sname), ftype_cur))
38	    fout.write(struct.pack("i" * len(shape), *shape[::-1]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/gptq/convert/convert_gptq_to_ggml.py:38
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
37	    fout.write(struct.pack("iii", len(shape), len(sname), ftype_cur))
38	    fout.write(struct.pack("i" * len(shape), *shape[::-1]))
39	    fout.write(sname)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/gptq/convert/convert_gptq_to_ggml.py:39
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
38	    fout.write(struct.pack("i" * len(shape), *shape[::-1]))
39	    fout.write(sname)
40	    fout.seek((fout.tell() + 31) & -32)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/gptq/convert/convert_gptq_to_ggml.py:209
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
208	
209	    fout.write(b"ggjt"[::-1])  # magic: ggmf in hex
210	    values = [3,  # file version

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/gptq/convert/convert_gptq_to_ggml.py:218
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
217	              4]
218	    fout.write(struct.pack("i" * len(values), *values))
219	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/gptq/convert/convert_gptq_to_ggml.py:235
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
234	            text = tokenizer.id_to_piece(i).replace("\u2581", " ").encode("utf-8")
235	        fout.write(struct.pack("i", len(text)))
236	        fout.write(text)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/gptq/convert/convert_gptq_to_ggml.py:236
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
235	        fout.write(struct.pack("i", len(text)))
236	        fout.write(text)
237	        fout.write(struct.pack("f", tokenizer.get_score(i)))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/gptq/convert/convert_gptq_to_ggml.py:237
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
236	        fout.write(text)
237	        fout.write(struct.pack("f", tokenizer.get_score(i)))
238	

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/bigdl_worker.py:293
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
292	    parser.add_argument("--port", type=int, default=21002)
293	    parser.add_argument("--worker-address", type=str, default="http://localhost:21002")
294	    parser.add_argument(

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/bigdl_worker.py:295
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
294	    parser.add_argument(
295	        "--controller-address", type=str, default="http://localhost:21001"
296	    )

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/model_worker.py:113
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
112	        self.register_to_controller()
113	        self.heart_beat_thread = threading.Thread(
114	            target=heart_beat_worker, args=(self,)
115	        )

--------------------------------------------------
>> Issue: [B821:post] requests.post
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/model_worker.py:127
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b821_post.html
126	        }
127	        r = requests.post(url, json=data)
128	        invalidInputError(r.status_code == 200, "Error register to Controller")

--------------------------------------------------
>> Issue: [B821:post] requests.post
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/model_worker.py:142
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b821_post.html
141	            try:
142	                ret = requests.post(
143	                    url,
144	                    json={
145	                        "worker_name": self.worker_addr,
146	                        "queue_length": self.get_queue_length(),
147	                    },
148	                    timeout=5,
149	                )

--------------------------------------------------
>> Issue: [B821:post] requests.post
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/model_worker.py:394
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b821_post.html
393	
394	@app.post("/worker_generate_stream")
395	async def api_generate_stream(request: Request):

--------------------------------------------------
>> Issue: [B821:post] requests.post
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/model_worker.py:403
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b821_post.html
402	
403	@app.post("/worker_generate")
404	async def api_generate(request: Request):

--------------------------------------------------
>> Issue: [B821:post] requests.post
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/model_worker.py:412
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b821_post.html
411	
412	@app.post("/worker_get_embeddings")
413	async def api_get_embeddings(request: Request):

--------------------------------------------------
>> Issue: [B821:post] requests.post
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/model_worker.py:421
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b821_post.html
420	
421	@app.post("/worker_get_status")
422	async def api_get_status(request: Request):

--------------------------------------------------
>> Issue: [B821:post] requests.post
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/model_worker.py:426
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b821_post.html
425	
426	@app.post("/count_token")
427	async def api_count_token(request: Request):

--------------------------------------------------
>> Issue: [B821:post] requests.post
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/model_worker.py:432
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b821_post.html
431	
432	@app.post("/worker_get_conv_template")
433	async def api_get_conv(request: Request):

--------------------------------------------------
>> Issue: [B821:post] requests.post
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/model_worker.py:437
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b821_post.html
436	
437	@app.post("/model_details")
438	async def api_model_details(request: Request):

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/model_worker.py:447
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
446	    parser.add_argument("--port", type=int, default=21002)
447	    parser.add_argument("--worker-address", type=str, default="http://localhost:21002")
448	    parser.add_argument(

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/model_worker.py:449
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
448	    parser.add_argument(
449	        "--controller-address", type=str, default="http://localhost:21001"
450	    )

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/vllm_worker.py:225
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
224	    parser.add_argument("--port", type=int, default=21002)
225	    parser.add_argument("--worker-address", type=str, default="http://localhost:21002")
226	    parser.add_argument(

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/serving/fastchat/vllm_worker.py:227
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
226	    parser.add_argument(
227	        "--controller-address", type=str, default="http://localhost:21001"
228	    )

--------------------------------------------------
>> Issue: [B812:system] os.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/convert.py:1233
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b812_system.html
1232	    elif model.config.model_type == "whisper" and lightweight_bmm:
1233	        if platform.system().lower() == 'windows':
1234	            from bigdl.llm.transformers.bmm import SafeBMM

--------------------------------------------------
>> Issue: [B817:system] platform.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/convert.py:1233
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b817_system.html
1232	    elif model.config.model_type == "whisper" and lightweight_bmm:
1233	        if platform.system().lower() == 'windows':
1234	            from bigdl.llm.transformers.bmm import SafeBMM

--------------------------------------------------
>> Issue: [B308:blacklist] platform.system
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/convert.py:1233
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b308-platform-system
1232	    elif model.config.model_type == "whisper" and lightweight_bmm:
1233	        if platform.system().lower() == 'windows':
1234	            from bigdl.llm.transformers.bmm import SafeBMM

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/baichuan.py:94
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
93	    with NamedTemporaryFile(delete=False) as f:
94	        f.write(proto)
95	        f.close()

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/baichuan.py:94
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
93	    with NamedTemporaryFile(delete=False) as f:
94	        f.write(proto)
95	        f.close()

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/llama.py:96
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
95	    with NamedTemporaryFile(delete=False) as f:
96	        f.write(proto)
97	        f.close()

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/llama.py:96
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
95	    with NamedTemporaryFile(delete=False) as f:
96	        f.write(proto)
97	        f.close()

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/mistral.py:97
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
96	    with NamedTemporaryFile(delete=False) as f:
97	        f.write(proto)
98	        f.close()

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/mistral.py:97
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
96	    with NamedTemporaryFile(delete=False) as f:
97	        f.write(proto)
98	        f.close()

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/mixtral.py:104
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
103	    with NamedTemporaryFile(delete=False) as f:
104	        f.write(proto)
105	        f.close()

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/mixtral.py:104
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
103	    with NamedTemporaryFile(delete=False) as f:
104	        f.write(proto)
105	        f.close()

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/model_implement/baichuan/tokenization_baichuan.py:173
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
172	                content_spiece_model = self.sp_model.serialized_model_proto()
173	                fi.write(content_spiece_model)
174	

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/model_implement/yuan2/yuan_hf_model.py:455
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
454	
455	YUAN_START_DOCSTRING = r"""
456	    This model inherits from [`PreTrainedModel`]. Check the superclass documentation for the generic methods the
457	    library implements for all its model (such as downloading or saving, resizing the input embeddings, pruning heads
458	    etc.)
459	    This model is also a PyTorch [torch.nn.Module](https://pytorch.org/docs/stable/nn.html#torch.nn.Module) subclass.
460	    Use it as a regular PyTorch Module and refer to the PyTorch documentation for all matter related to general usage
461	    and behavior.
462	    Parameters:
463	        config ([`YuanConfig`]):
464	            Model configuration class with all the parameters of the model. Initializing with a config file does not
465	            load the weights associated with the model, only the configuration. Check out the
466	            [`~PreTrainedModel.from_pretrained`] method to load the model weights.
467	"""
468	
469	
470	@add_start_docstrings(
471	    "The bare Yuan Model outputting raw hidden-states without any specific head on top.",
472	   YUAN_START_DOCSTRING,
473	)
474	class YuanPreTrainedModel(PreTrainedModel):

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/model_implement/yuan2/yuan_hf_model.py:498
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
497	
498	YUAN_INPUTS_DOCSTRING = r"""
499	    Args:
500	        input_ids (`torch.LongTensor` of shape `(batch_size, sequence_length)`):
501	            Indices of input sequence tokens in the vocabulary. Padding will be ignored by default should you provide
502	            it.
503	            Indices can be obtained using [`AutoTokenizer`]. See [`PreTrainedTokenizer.encode`] and
504	            [`PreTrainedTokenizer.__call__`] for details.
505	            [What are input IDs?](../glossary#input-ids)
506	        attention_mask (`torch.Tensor` of shape `(batch_size, sequence_length)`, *optional*):
507	            Mask to avoid performing attention on padding token indices. Mask values selected in `[0, 1]`:
508	            - 1 for tokens that are **not masked**,
509	            - 0 for tokens that are **masked**.
510	            [What are attention masks?](../glossary#attention-mask)
511	            Indices can be obtained using [`AutoTokenizer`]. See [`PreTrainedTokenizer.encode`] and
512	            [`PreTrainedTokenizer.__call__`] for details.
513	            If `past_key_values` is used, optionally only the last `decoder_input_ids` have to be input (see
514	            `past_key_values`).
515	            If you want to change padding behavior, you should read [`modeling_opt._prepare_decoder_attention_mask`]
516	            and modify to your needs. See diagram 1 in [the paper](https://arxiv.org/abs/1910.13461) for more
517	            information on the default strategy.
518	            - 1 indicates the head is **not masked**,
519	            - 0 indicates the head is **masked**.
520	        position_ids (`torch.LongTensor` of shape `(batch_size, sequence_length)`, *optional*):
521	            Indices of positions of each input sequence tokens in the position embeddings. Selected in the range `[0,
522	            config.n_positions - 1]`.
523	            [What are position IDs?](../glossary#position-ids)
524	        past_key_values (`tuple(tuple(torch.FloatTensor))`, *optional*, returned when `use_cache=True` is passed or when `config.use_cache=True`):
525	            Tuple of `tuple(torch.FloatTensor)` of length `config.n_layers`, with each tuple having 2 tensors of shape
526	            `(batch_size, num_heads, sequence_length, embed_size_per_head)`) and 2 additional tensors of shape
527	            `(batch_size, num_heads, encoder_sequence_length, embed_size_per_head)`.
528	            Contains pre-computed hidden-states (key and values in the self-attention blocks and in the cross-attention
529	            blocks) that can be used (see `past_key_values` input) to speed up sequential decoding.
530	            If `past_key_values` are used, the user can optionally input only the last `decoder_input_ids` (those that
531	            don't have their past key value states given to this model) of shape `(batch_size, 1)` instead of all
532	            `decoder_input_ids` of shape `(batch_size, sequence_length)`.
533	        inputs_embeds (`torch.FloatTensor` of shape `(batch_size, sequence_length, hidden_size)`, *optional*):
534	            Optionally, instead of passing `input_ids` you can choose to directly pass an embedded representation. This
535	            is useful if you want more control over how to convert `input_ids` indices into associated vectors than the
536	            model's internal embedding lookup matrix.
537	        use_cache (`bool`, *optional*):
538	            If set to `True`, `past_key_values` key value states are returned and can be used to speed up decoding (see
539	            `past_key_values`).
540	        output_attentions (`bool`, *optional*):
541	            Whether or not to return the attentions tensors of all attention layers. See `attentions` under returned
542	            tensors for more detail.
543	        output_hidden_states (`bool`, *optional*):
544	            Whether or not to return the hidden states of all layers. See `hidden_states` under returned tensors for
545	            more detail.
546	        return_dict (`bool`, *optional*):
547	            Whether or not to return a [`~utils.ModelOutput`] instead of a plain tuple.
548	"""
549	
550	
551	@add_start_docstrings(
552	    "The bare Yuan Model outputting raw hidden-states without any specific head on top.",
553	    YUAN_START_DOCSTRING,
554	)
555	class YuanModel(YuanPreTrainedModel):

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/yuan2.py:118
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
117	    with NamedTemporaryFile(delete=False) as f:
118	        f.write(proto)
119	        f.close()

--------------------------------------------------
>> Issue: [B832:write] tempfile_NamedTemporaryFile_write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/gguf/models/yuan2.py:118
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b832_write.html
117	    with NamedTemporaryFile(delete=False) as f:
118	        f.write(proto)
119	        f.close()

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/utils.py:121
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
120	    with open(index_filename, "r") as f:
121	        index = json.loads(f.read())
122	

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/utils.py:191
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
190	    imatrix = open(imatrix_file, 'rb')
191	    n_entries = imatrix.read(4)
192	    n_entries = int.from_bytes(n_entries, 'little')

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/utils.py:197
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
196	    for i in range(n_entries):
197	        cur_len = imatrix.read(4)
198	        cur_len = int.from_bytes(cur_len, 'little')

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/utils.py:199
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
198	        cur_len = int.from_bytes(cur_len, 'little')
199	        cur_name = str(imatrix.read(cur_len), encoding='utf-8')
200	        # cur_name looks like blk.14.attn_output.weight for llama / mistral,

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/utils.py:218
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
217	            module_name += '_' + exp_id
218	        ncall = imatrix.read(4)
219	        ncall = int.from_bytes(ncall, 'little')

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/utils.py:220
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
219	        ncall = int.from_bytes(ncall, 'little')
220	        nval = imatrix.read(4)
221	        nval = int.from_bytes(nval, 'little')

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/transformers/utils.py:224
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
223	                          f"failed reading number of values for entry {i}")
224	        byte_data = imatrix.read(4 * nval)
225	        idata = np.frombuffer(byte_data, dtype=np.float32)

--------------------------------------------------
>> Issue: [B817:system] platform.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_chatglm.py:68
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b817_system.html
67	
68	if platform.system() == "Darwin":
69	    # cpm_kernels doesn't support macOS but transformers will check missing packages, so mock it

--------------------------------------------------
>> Issue: [B308:blacklist] platform.system
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_chatglm.py:68
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b308-platform-system
67	
68	if platform.system() == "Darwin":
69	    # cpm_kernels doesn't support macOS but transformers will check missing packages, so mock it

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:314
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
313	        if self.vocabtype == "bpe":
314	            self.sentencepiece_tokenizer = json.loads(open(str(fname_tokenizer)).read())
315	        else:

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:742
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
741	            if self.data_type.have_g_idx:
742	                sys.stderr.write(
743	                    "Error: Input uses the newer GPTQ-for-LLaMa format (using g_idx), "
744	                    "which is not yet natively supported by GGML. For now "

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:961
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
960	            size = elm_count * dtype.itemsize
961	            data = fp.read(size)
962	            invalidInputError(len(data) == size, "Fail to load.")

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1023
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1022	def lazy_load_safetensors_file(fp: IO[bytes], path: Path) -> ModelPlus:
1023	    header_size, = struct.unpack('<Q', fp.read(8))
1024	    header = json.loads(fp.read(header_size))

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1024
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1023	    header_size, = struct.unpack('<Q', fp.read(8))
1024	    header = json.loads(fp.read(header_size))
1025	    # Use mmap for the actual data to avoid race conditions with the file offset.

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1048
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1047	def must_read(fp: IO[bytes], length: int) -> bytes:
1048	    ret = fp.read(length)
1049	    invalidInputError(len(ret) >= length, "Unexpectedly reached end of file.")

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1054
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1053	def lazy_load_ggml_file(fp: io.BufferedReader, path: Path) -> ModelPlus:
1054	    magic = must_read(fp, 4)[::-1]
1055	    if magic in (b'ggmf', b'ggjt'):

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1056
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1055	    if magic in (b'ggmf', b'ggjt'):
1056	        version, = struct.unpack("i", must_read(fp, 4))
1057	        invalidInputError(version == 1, "Fail to load ggml files.")

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1062
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1061	    n_vocab, n_embd, n_mult, n_head, n_layer, rot, file_type = \
1062	        struct.unpack('<7i', must_read(fp, 28))
1063	

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1074
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1073	            fp.seek(20, io.SEEK_CUR)
1074	            is_gpt4all = fp.read(21) == b'tok_embeddings.weight'
1075	            fp.seek(orig_pos)

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1079
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1078	
1079	        length, = struct.unpack("i", must_read(fp, 4))
1080	        text = must_read(fp, length)

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1080
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1079	        length, = struct.unpack("i", must_read(fp, 4))
1080	        text = must_read(fp, length)
1081	        if magic != b'ggml':

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1082
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1081	        if magic != b'ggml':
1082	            score, = struct.unpack("f", must_read(fp, 4))
1083	            tokens.append((text, score))

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1095
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1094	        # this is a function so that variables captured in `load` don't change
1095	        shape_len, name_len, ftype = struct.unpack("iii", must_read(fp, 12))
1096	        invalidInputError(0 <= shape_len <= 3, "Fail to read tensors.")

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1097
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1096	        invalidInputError(0 <= shape_len <= 3, "Fail to read tensors.")
1097	        shape = list(struct.unpack(f"{shape_len}i", must_read(fp, 4 * shape_len)))
1098	        shape = shape[::-1]

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1099
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1098	        shape = shape[::-1]
1099	        name = must_read(fp, name_len).decode('utf-8')
1100	        data_type = FTYPE_TO_DATA_TYPE[ftype]

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1127
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1126	
1127	    while fp.read(1) != b'':
1128	        fp.seek(-1, io.SEEK_CUR)

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1137
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
1136	    fp = open(path, 'rb')
1137	    first8 = fp.read(8)
1138	    fp.seek(0)

--------------------------------------------------
>> Issue: [B840:executor] concurrent.futures.Executor
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1162
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b840_executor.html
1161	    output value buffered per thread.'''
1162	    with concurrent.futures.ThreadPoolExecutor() as executor:
1163	        futures = []

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1200
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1199	    def write_file_header(self, params: Params, file_type: GGMLFileType) -> None:
1200	        self.fout.write(b"ggjt"[::-1])  # magic
1201	        values = [

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1211
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1210	        ]
1211	        self.fout.write(struct.pack("i" * len(values), *values))
1212	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1215
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1214	        sname = name.encode('utf-8')
1215	        self.fout.write(struct.pack("iii", len(shape), len(sname), DATA_TYPE_TO_FTYPE[data_type]))
1216	        self.fout.write(struct.pack("i" * len(shape), *shape[::-1]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1216
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1215	        self.fout.write(struct.pack("iii", len(shape), len(sname), DATA_TYPE_TO_FTYPE[data_type]))
1216	        self.fout.write(struct.pack("i" * len(shape), *shape[::-1]))
1217	        self.fout.write(sname)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1217
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1216	        self.fout.write(struct.pack("i" * len(shape), *shape[::-1]))
1217	        self.fout.write(sname)
1218	        self.fout.seek((self.fout.tell() + 31) & -32)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1222
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1221	        for text, score in vocab.all_tokens():
1222	            self.fout.write(struct.pack("i", len(text)))
1223	            self.fout.write(text)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1223
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1222	            self.fout.write(struct.pack("i", len(text)))
1223	            self.fout.write(text)
1224	            self.fout.write(struct.pack("f", score))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1224
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1223	            self.fout.write(text)
1224	            self.fout.write(struct.pack("f", score))
1225	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1398
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1397	    if ret in model_paths:
1398	        sys.stderr.write(
1399	            f"Error: Default output path ({ret}) would overwrite the input. "
1400	            "Please explicitly specify a path using --outfile.\n")

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1455
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1454	    hparams["multiple_of"] = 1
1455	    fout.write(struct.pack("i", ggml_file_magic))  # magic: ggmf in hex
1456	    fout.write(struct.pack("i", ggml_file_version))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1456
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1455	    fout.write(struct.pack("i", ggml_file_magic))  # magic: ggmf in hex
1456	    fout.write(struct.pack("i", ggml_file_version))
1457	    fout.write(struct.pack("i", hparams["vocab_size"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1457
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1456	    fout.write(struct.pack("i", ggml_file_version))
1457	    fout.write(struct.pack("i", hparams["vocab_size"]))
1458	    fout.write(struct.pack("i", hparams["max_position_embeddings"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1458
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1457	    fout.write(struct.pack("i", hparams["vocab_size"]))
1458	    fout.write(struct.pack("i", hparams["max_position_embeddings"]))
1459	    fout.write(struct.pack("i", hparams["hidden_size"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1459
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1458	    fout.write(struct.pack("i", hparams["max_position_embeddings"]))
1459	    fout.write(struct.pack("i", hparams["hidden_size"]))
1460	    fout.write(struct.pack("i", hparams["num_attention_heads"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1460
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1459	    fout.write(struct.pack("i", hparams["hidden_size"]))
1460	    fout.write(struct.pack("i", hparams["num_attention_heads"]))
1461	    fout.write(struct.pack("i", hparams["num_hidden_layers"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1461
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1460	    fout.write(struct.pack("i", hparams["num_attention_heads"]))
1461	    fout.write(struct.pack("i", hparams["num_hidden_layers"]))
1462	    fout.write(struct.pack("i", int((hparams["hidden_size"] / hparams["num_attention_heads"])

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1462
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1461	    fout.write(struct.pack("i", hparams["num_hidden_layers"]))
1462	    fout.write(struct.pack("i", int((hparams["hidden_size"] / hparams["num_attention_heads"])
1463	                                    * hparams["rotary_pct"])))  # rotary_dim
1464	    fout.write(struct.pack("i", int(hparams["use_parallel_residual"])))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1464
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1463	                                    * hparams["rotary_pct"])))  # rotary_dim
1464	    fout.write(struct.pack("i", int(hparams["use_parallel_residual"])))
1465	    fout.write(struct.pack("i", ftype))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1465
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1464	    fout.write(struct.pack("i", int(hparams["use_parallel_residual"])))
1465	    fout.write(struct.pack("i", ftype))
1466	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1475
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1474	            text = tokenizer.decode([i]).encode('utf-8')
1475	        fout.write(struct.pack("i", len(text)))
1476	        fout.write(text)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1476
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1475	        fout.write(struct.pack("i", len(text)))
1476	        fout.write(text)
1477	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1505
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1504	        str = name.encode('utf-8')
1505	        fout.write(struct.pack("iii", n_dims, len(str), ftype_cur))
1506	        for i in range(n_dims):

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1507
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1506	        for i in range(n_dims):
1507	            fout.write(struct.pack("i", data.shape[n_dims - 1 - i]))
1508	        fout.write(str)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1508
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1507	            fout.write(struct.pack("i", data.shape[n_dims - 1 - i]))
1508	        fout.write(str)
1509	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1549
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1548	    hparams["multiple_of"] = 1
1549	    fout.write(struct.pack("i", 0x67676d6c))  # magic: ggml in hex
1550	    fout.write(struct.pack("i", hparams["vocab_size"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1550
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1549	    fout.write(struct.pack("i", 0x67676d6c))  # magic: ggml in hex
1550	    fout.write(struct.pack("i", hparams["vocab_size"]))
1551	    # fout.write(struct.pack("i", hparams["seq_length"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1552
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1551	    # fout.write(struct.pack("i", hparams["seq_length"]))
1552	    fout.write(struct.pack("i", hparams["hidden_size"]))
1553	    fout.write(struct.pack("i", hparams["multiple_of"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1553
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1552	    fout.write(struct.pack("i", hparams["hidden_size"]))
1553	    fout.write(struct.pack("i", hparams["multiple_of"]))
1554	    fout.write(struct.pack("i", hparams["n_head"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1554
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1553	    fout.write(struct.pack("i", hparams["multiple_of"]))
1554	    fout.write(struct.pack("i", hparams["n_head"]))
1555	    fout.write(struct.pack("i", hparams["n_layer"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1555
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1554	    fout.write(struct.pack("i", hparams["n_head"]))
1555	    fout.write(struct.pack("i", hparams["n_layer"]))
1556	    fout.write(struct.pack("i", ftype))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1556
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1555	    fout.write(struct.pack("i", hparams["n_layer"]))
1556	    fout.write(struct.pack("i", ftype))
1557	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1561
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1560	        text = tokenizer.decode([i]).encode('utf-8')
1561	        fout.write(struct.pack("i", len(text)))
1562	        fout.write(text)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1562
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1561	        fout.write(struct.pack("i", len(text)))
1562	        fout.write(text)
1563	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1598
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1597	        str = name.encode('utf-8')
1598	        fout.write(struct.pack("iii", n_dims, len(str), ftype_cur))
1599	        for i in range(n_dims):

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1600
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1599	        for i in range(n_dims):
1600	            fout.write(struct.pack("i", data.shape[n_dims - 1 - i]))
1601	        fout.write(str)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1601
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1600	            fout.write(struct.pack("i", data.shape[n_dims - 1 - i]))
1601	        fout.write(str)
1602	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1637
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1636	
1637	    fout.write(struct.pack("i", 0x67676d6c))  # magic: ggml in hex
1638	    vocab_size = hparams["vocab_size"]

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1639
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1638	    vocab_size = hparams["vocab_size"]
1639	    fout.write(struct.pack("i", vocab_size))
1640	    # fout.write(struct.pack("i", len(encoder)))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1641
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1640	    # fout.write(struct.pack("i", len(encoder)))
1641	    fout.write(struct.pack("i", hparams["n_positions"]))
1642	    fout.write(struct.pack("i", hparams["n_embd"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1642
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1641	    fout.write(struct.pack("i", hparams["n_positions"]))
1642	    fout.write(struct.pack("i", hparams["n_embd"]))
1643	    fout.write(struct.pack("i", hparams["n_head"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1643
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1642	    fout.write(struct.pack("i", hparams["n_embd"]))
1643	    fout.write(struct.pack("i", hparams["n_head"]))
1644	    fout.write(struct.pack("i", hparams["n_layer"]))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1644
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1643	    fout.write(struct.pack("i", hparams["n_head"]))
1644	    fout.write(struct.pack("i", hparams["n_layer"]))
1645	    fout.write(struct.pack("i", ftype))

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1645
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1644	    fout.write(struct.pack("i", hparams["n_layer"]))
1645	    fout.write(struct.pack("i", ftype))
1646	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1650
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1649	
1650	    fout.write(struct.pack("i", vocab_size))
1651	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1656
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1655	        text = bytearray([byte_decoder[c] for c in key])
1656	        fout.write(struct.pack("i", len(text)))
1657	        fout.write(text)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1657
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1656	        fout.write(struct.pack("i", len(text)))
1657	        fout.write(text)
1658	        counter += 1

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1662
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1661	    while counter < vocab_size:
1662	        fout.write(struct.pack("i", len(text)))
1663	        fout.write(text)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1663
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1662	        fout.write(struct.pack("i", len(text)))
1663	        fout.write(text)
1664	        counter += 1

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1768
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1767	        str = name.encode('utf-8')
1768	        fout.write(struct.pack("iii", n_dims, len(str), ftype_cur))
1769	        for i in range(n_dims):

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1770
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1769	        for i in range(n_dims):
1770	            fout.write(struct.pack("i", data.shape[n_dims - 1 - i]))
1771	        fout.write(str)

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/convert_util.py:1771
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
1770	            fout.write(struct.pack("i", data.shape[n_dims - 1 - i]))
1771	        fout.write(str)
1772	

--------------------------------------------------
>> Issue: [B812:system] os.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/glibc_checker.py:30
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b812_system.html
29	    def is_linux():
30	        return platform.system() == "Linux"
31	

--------------------------------------------------
>> Issue: [B817:system] platform.system
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/glibc_checker.py:30
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b817_system.html
29	    def is_linux():
30	        return platform.system() == "Linux"
31	

--------------------------------------------------
>> Issue: [B308:blacklist] platform.system
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_benign/bigdl_llm-2.5.0b20240627-py3-none-win_amd64/bigdl/llm/utils/glibc_checker.py:30
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b308-platform-system
29	    def is_linux():
30	        return platform.system() == "Linux"
31	

--------------------------------------------------

Code scanned:
	Total lines of code: 32412
	Total lines skipped (#nosec): 0

Run metrics:
	Total issues (by severity):
		Undefined: 0.0
		Low: 0.0
		Medium: 11.0
		High: 115.0
	Total issues (by confidence):
		Undefined: 0.0
		Low: 0.0
		Medium: 123.0
		High: 3.0
Files skipped (0):
