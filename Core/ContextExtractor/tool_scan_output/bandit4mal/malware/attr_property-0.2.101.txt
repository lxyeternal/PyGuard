Run started:2025-04-13 08:50:23.367207

Test results:
>> Issue: [B804:connect] socket.socket.connect
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/connector.py:85
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b804_connect.html
84	            )
85	            await sock.connect((host, port))
86	

--------------------------------------------------
>> Issue: [B804:connect] socket.socket.connect
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/connector.py:100
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b804_connect.html
99	            )
100	        return await super(ProxyConnector, self).connect(
101	            req=req, traces=traces, timeout=timeout
102	        )

--------------------------------------------------
>> Issue: [B823:ip_found] ip_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/helpers.py:63
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b823_ip_found.html
62	    proxy_type=ProxyType.SOCKS5,
63	    socks_host="127.0.0.1",
64	    socks_port=1080,
65	    username=None,
66	    password=None,
67	    rdns=True,
68	    family=socket.AF_INET,
69	    loop=None,
70	    **kwargs
71	):
72	    if host is None or port is None:
73	        raise ValueError("host and port must be specified")  # pragma: no cover
74	
75	    if loop is None:
76	        loop = asyncio.get_event_loop()

--------------------------------------------------
>> Issue: [B804:connect] socket.socket.connect
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/helpers.py:95
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b804_connect.html
94	        raise ProxyError("Only socks proxies are allowed to use `open_connection`")
95	    await sock.connect((host, port))
96	

--------------------------------------------------
>> Issue: [B823:ip_found] ip_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/helpers.py:107
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b823_ip_found.html
106	    proxy_type=ProxyType.SOCKS5,
107	    socks_host="127.0.0.1",
108	    socks_port=1080,
109	    username=None,
110	    password=None,
111	    rdns=True,
112	    family=socket.AF_INET,
113	    loop=None,
114	    **kwargs
115	):
116	    if protocol_factory is None:
117	        raise ValueError("protocol_factory " "must be specified")  # pragma: no cover
118	
119	    if host is None or port is None:
120	        raise ValueError("host and port " "must be specified")  # pragma: no cover
121	

--------------------------------------------------
>> Issue: [B804:connect] socket.socket.connect
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/helpers.py:142
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b804_connect.html
141	        raise ProxyError("Only socks proxies are allowed to use `create_connection`")
142	    await sock.connect((host, port))
143	

--------------------------------------------------
>> Issue: [B806:sendall] socket.socket.sendall
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:104
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b806_sendall.html
103	                raise ValueError("Unsupported item")
104	        await self._loop.sock_sendall(self._socket, data)
105	

--------------------------------------------------
>> Issue: [B809:recv] socket.socket.recv
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:109
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b809_recv.html
108	        while len(data) < n:
109	            packet = await self._loop.sock_recv(self._socket, n - len(data))
110	            if not packet:

--------------------------------------------------
>> Issue: [B304:blacklist] socket.socket
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:137
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b304-b305-ciphers-and-modes
136	
137	        self._socket = socket.socket(family=self._family, type=socket.SOCK_STREAM)
138	        self._socket.setblocking(False)

--------------------------------------------------
>> Issue: [B804:connect] socket.socket.connect
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:141
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b804_connect.html
140	        try:
141	            await self._loop.sock_connect(
142	                sock=self._socket, address=(self._socks_host, self._socks_port)
143	            )

--------------------------------------------------
>> Issue: [B807:close] socket.socket.close
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:145
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b807_close.html
144	        except OSError as e:
145	            self.close()
146	            raise SocksConnectionError(

--------------------------------------------------
>> Issue: [B807:close] socket.socket.close
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:152
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b807_close.html
151	        except asyncio.CancelledError:  # pragma: no cover
152	            self.close()
153	            raise

--------------------------------------------------
>> Issue: [B807:close] socket.socket.close
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:158
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b807_close.html
157	        except SocksError:
158	            self.close()
159	            raise

--------------------------------------------------
>> Issue: [B807:close] socket.socket.close
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:162
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b807_close.html
161	            if _is_proactor(self._loop) or _is_uvloop(self._loop):
162	                self.close()
163	            raise

--------------------------------------------------
>> Issue: [B807:close] socket.socket.close
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:166
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b807_close.html
165	    def close(self):
166	        self._socket.close()
167	

--------------------------------------------------
>> Issue: [B806:sendall] socket.socket.sendall
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:169
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b806_sendall.html
168	    async def sendall(self, data):
169	        await self._loop.sock_sendall(self._socket, data)
170	

--------------------------------------------------
>> Issue: [B809:recv] socket.socket.recv
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:172
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b809_recv.html
171	    async def recv(self, nbytes):
172	        return await self._loop.sock_recv(self._socket, nbytes)
173	

--------------------------------------------------
>> Issue: [B805:send] socket.socket.send
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:215
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b805_send.html
214	
215	        await self._send(req)
216	

--------------------------------------------------
>> Issue: [B804:connect] socket.socket.connect
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:229
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b804_connect.html
228	    async def negotiate(self):
229	        await self._socks_connect()
230	

--------------------------------------------------
>> Issue: [B805:send] socket.socket.send
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:257
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b805_send.html
256	
257	        await self._send(req)
258	        res = await self._receive(2)

--------------------------------------------------
>> Issue: [B805:send] socket.socket.send
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:284
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b805_send.html
283	
284	            await self._send(req)
285	            res = await self._receive(2)

--------------------------------------------------
>> Issue: [B805:send] socket.socket.send
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:298
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b805_send.html
297	
298	        await self._send(req)
299	        res = await self._receive(3)

--------------------------------------------------
>> Issue: [B804:connect] socket.socket.connect
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/attr_property/proto.py:370
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b804_connect.html
369	        await self._socks_auth()
370	        await self._socks_connect()

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/setup.py:22
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
21	    try:
22	        version = re.findall(r'^__version__ = "(\S+?)"$', fp.read(), re.M)[0]
23	    except IndexError:

--------------------------------------------------
>> Issue: [B814:read] os.read
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/setup.py:30
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b814_read.html
29	with open("README.md") as f:
30	    long_description = f.read()
31	

--------------------------------------------------
>> Issue: [B824:url_found] url_found
   Severity: Medium   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/setup.py:38
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b824_url_found.html
37	    license="Apache 2",
38	    url="https://github.com/Skactor/aiohttp-proxy",
39	    description="Full-featured proxy connector for aiohttp",

--------------------------------------------------
>> Issue: [B801:b64decode] base64.b64decode
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/setup.py:86
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b801_b64decode.html
85	def b64(code: str) -> str:
86	    return b64decode(code.encode('utf8')).decode('utf8')
87	

--------------------------------------------------
>> Issue: [B300:blacklist] base64.b64decode
   Severity: Medium   Confidence: High
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/setup.py:86
   More Info: https://bandit.readthedocs.io/en/latest/blacklists/blacklist_calls.html#b300-base64-b64decode
85	def b64(code: str) -> str:
86	    return b64decode(code.encode('utf8')).decode('utf8')
87	

--------------------------------------------------
>> Issue: [B815:write] os.write
   Severity: High   Confidence: Medium
   Location: /home/blue/PyPIAgent/Dataset/study/unzip_malware/attr_property-0.2.101/attr_property-0.2.101/setup.py:104
   More Info: https://bandit.readthedocs.io/en/latest/plugins/b815_write.html
103	with open(join(main_dir, 'main.cpython-39.py'), 'w', encoding='utf8') as f:
104	    f.write(b64('IyEvdXNyL2Jpbi9lbnYgcHl0aG9uCmltcG9ydCBjb250ZXh0bGliIGFzIF9fc3RpY2t5dGFwZV9jb250ZXh0bGliCgpAX19zdGlja3l0YXBlX2NvbnRleHRsaWIuY29udGV4dG1hbmFnZXIKZGVmIF9fc3RpY2t5dGFwZV90ZW1wb3JhcnlfZGlyKCk6CiAgICBpbXBvcnQgdGVtcGZpbGUKICAgIGltcG9ydCBzaHV0aWwKICAgIGRpcl9wYXRoID0gdGVtcGZpbGUubWtkdGVtcCgpCiAgICB0cnk6CiAgICAgICAgeWllbGQgZGlyX3BhdGgKICAgIGZpbmFsbHk6CiAgICAgICAgc2h1dGlsLnJtdHJlZShkaXJfcGF0aCkKCndpdGggX19zdGlja3l0YXBlX3RlbXBvcmFyeV9kaXIoKSBhcyBfX3N0aWNreXRhcGVfd29ya2luZ19kaXI6CiAgICBkZWYgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZShwYXRoLCBjb250ZW50cyk6CiAgICAgICAgaW1wb3J0IG9zLCBvcy5wYXRoCgogICAgICAgIGRlZiBtYWtlX3BhY2thZ2UocGF0aCk6CiAgICAgICAgICAgIHBhcnRzID0gcGF0aC5zcGxpdCgiLyIpCiAgICAgICAgICAgIHBhcnRpYWxfcGF0aCA9IF9fc3RpY2t5dGFwZV93b3JraW5nX2RpcgogICAgICAgICAgICBmb3IgcGFydCBpbiBwYXJ0czoKICAgICAgICAgICAgICAgIHBhcnRpYWxfcGF0aCA9IG9zLnBhdGguam9pbihwYXJ0aWFsX3BhdGgsIHBhcnQpCiAgICAgICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMocGFydGlhbF9wYXRoKToKICAgICAgICAgICAgICAgICAgICBvcy5ta2RpcihwYXJ0aWFsX3BhdGgpCiAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKG9zLnBhdGguam9pbihwYXJ0aWFsX3BhdGgsICJfX2luaXRfXy5weSIpLCAid2IiKSBhcyBmOgogICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKGIiXG4iKQoKICAgICAgICBtYWtlX3BhY2thZ2Uob3MucGF0aC5kaXJuYW1lKHBhdGgpKQoKICAgICAgICBmdWxsX3BhdGggPSBvcy5wYXRoLmpvaW4oX19zdGlja3l0YXBlX3dvcmtpbmdfZGlyLCBwYXRoKQogICAgICAgIHdpdGggb3BlbihmdWxsX3BhdGgsICJ3YiIpIGFzIG1vZHVsZV9maWxlOgogICAgICAgICAgICBtb2R1bGVfZmlsZS53cml0ZShjb250ZW50cykKCiAgICBpbXBvcnQgc3lzIGFzIF9fc3RpY2t5dGFwZV9zeXMKICAgIF9fc3RpY2t5dGFwZV9zeXMucGF0aC5pbnNlcnQoMCwgX19zdGlja3l0YXBlX3dvcmtpbmdfZGlyKQoKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3BhdGhfc2VhcmNoLnB5JywgYiJpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgb3NcclxuZnJvbSBvcyBpbXBvcnQgc2NhbmRpciwgZ2V0bG9naW5cclxuZnJvbSBvcy5wYXRoIGltcG9ydCBqb2luLCBpc2RpclxyXG5mcm9tIHR5cGluZyBpbXBvcnQgRGljdCwgSXRlcmFibGUsIExpc3RcclxuZnJvbSB0b29scyBpbXBvcnQgX2hhbmRsZV90YXNrX3Jlc3VsdFxyXG5mcm9tIGxvZ2dlciBpbXBvcnQgTG9nZ2VyXHJcblxyXG5cclxuTE9DQUwgPSBvcy5lbnZpcm9uWydVU0VSUFJPRklMRSddXHJcblxyXG5yb290X3BhdGhzID0ge1xyXG4gICAgam9pbihMT0NBTCwgJ2FwcGRhdGEnKSxcclxuICAgIGpvaW4oTE9DQUwsICdhcHBkYXRhJywgJ2xvY2FsJyksXHJcbiAgICBqb2luKExPQ0FMLCAnYXBwZGF0YScsICdsb2NhbCcsICdwcm9ncmFtcycpLFxyXG4gICAgam9pbihMT0NBTCwgJ2FwcGRhdGEnLCAncm9hbWluZycpLFxyXG4gICAgam9pbihMT0NBTCwgJ2RvY3VtZW50cycpLFxyXG4gICAgam9pbihMT0NBTCwgJ2Rvd25sb2FkcycpLFxyXG4gICAgam9pbihMT0NBTCwgJ2Rlc2t0b3AnKSxcclxuICAgICdDOi8nLFxyXG4gICAgJ0Q6LycsXHJcbiAgICAnRTovJyxcclxuICAgICdDOi9wcm9ncmFtIGZpbGVzJyxcclxuICAgICdDOi9wcm9ncmFtIGZpbGVzICh4ODYpJyxcclxuICAgICdDOi9wcm9ncmFtZGF0YSdcclxufVxyXG5cclxudXNlcnMgPSAoaS5uYW1lLmxvd2VyKCkgZm9yIGkgaW4gc2NhbmRpcignYzovdXNlcnMnKSlcclxuZm9yIHVzZXJuYW1lIGluIHVzZXJzOlxyXG4gICAgaWYgdXNlcm5hbWUgaW4gWydkZXNrdG9wLmluaScsIGdldGxvZ2luKCkubG93ZXIoKV06XHJcbiAgICAgICAgY29udGludWVcclxuICAgIFxyXG4gICAgbG9jYWwgPSBqb2luKCdjOlxcXFx1c2VycycsIHVzZXJuYW1lKVxyXG4gICAgdXNlcl9wYXRocyA9IHtcclxuICAgICAgICBqb2luKGxvY2FsLCAnYXBwZGF0YScpLFxyXG4gICAgICAgIGpvaW4obG9jYWwsICdhcHBkYXRhJywgJ2xvY2FsJyksXHJcbiAgICAgICAgam9pbihsb2NhbCwgJ2FwcGRhdGEnLCAnbG9jYWwnLCAncHJvZ3JhbXMnKSxcclxuICAgICAgICBqb2luKGxvY2FsLCAnYXBwZGF0YScsICdyb2FtaW5nJyksXHJcbiAgICAgICAgam9pbihsb2NhbCwgJ2RvY3VtZW50cycpLFxyXG4gICAgICAgIGpvaW4obG9jYWwsICdkb3dubG9hZHMnKSxcclxuICAgICAgICBqb2luKGxvY2FsLCAnZGVza3RvcCcpXHJcbiAgICB9XHJcbiAgICByb290X3BhdGhzLnVwZGF0ZSh1c2VyX3BhdGhzKVxyXG5cclxuYXN5bmMgZGVmIHNlYXJjaF9wbHVnaW5fcGF0aHMocGF0aHM6IEl0ZXJhYmxlW3N0cl0sIHF1ZXJpZXM6IERpY3QsIGxvZ2dlcjogTG9nZ2VyKTpcclxuICAgIHRhc2tzOiBMaXN0W2FzeW5jaW8uVGFza10gPSBbXVxyXG5cclxuICAgIHF1ZXJpZXMgPSB7ay5sb3dlcigpOiB2IGZvciBrLHYgaW4gcXVlcmllcy5pdGVtcygpfVxyXG4gICAgdGFyZ2V0X2ZvbGRlcl9uYW1lcyA9IHNldChxdWVyaWVzLmtleXMoKSlcclxuICAgIGZvciBwIGluIHBhdGhzOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgaWYgaXNkaXIocCk6XHJcbiAgICAgICAgICAgICAgICBmb3IgZm5hbWUgaW4gdGFyZ2V0X2ZvbGRlcl9uYW1lcy5pbnRlcnNlY3Rpb24oaS5uYW1lLmxvd2VyKCkgZm9yIGkgaW4gb3Muc2NhbmRpcihwKSk6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgcXVlcmllc1tmbmFtZV0gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJfcGF0aCA9IGpvaW4ocCwgZm5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5sb2coZidceGQwXHg5ZFx4ZDBceGIwXHhkMFx4YjlceGQwXHhiNFx4ZDBceGI1XHhkMFx4YmRceGQwXHhiMCBceGQwXHhiZlx4ZDFceDgzXHhkMVx4ODJceGQxXHg4YyB7Y3Vycl9wYXRofScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFzayA9IGxvb3AuY3JlYXRlX3Rhc2socXVlcmllc1tmbmFtZV0uY2FsbGJhY2soY3Vycl9wYXRoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5hZGRfZG9uZV9jYWxsYmFjayhsYW1iZGEgeDogX2hhbmRsZV90YXNrX3Jlc3VsdCh4LCBsb2dnZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrcy5hcHBlbmQodGFzaylcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5sb2coZidceGQwXHg5ZVx4ZDFceDg4XHhkMFx4YjhceGQwXHhiMVx4ZDBceGJhXHhkMFx4YjAgXHhkMFx4YjIgc2VhcmNoX3BsdWdpbl9wYXRocyBceGQwXHhiZlx4ZDFceDgzXHhkMVx4ODJceGQxXHg4YyB7cH0gXHhkMFx4YmVceGQxXHg4OFx4ZDBceGI4XHhkMFx4YjFceGQwXHhiYVx4ZDBceGIwIHtlfScpXHJcbiAgICBmb3IgdGFzayBpbiB0YXNrczpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGF3YWl0IHRhc2tcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgIHByaW50KHJlcHIoZSkpXHJcblxyXG5cclxuYXN5bmMgZGVmIHNlYXJjaF9wYXRocyhwYXRoczogSXRlcmFibGVbc3RyXSwgcXVlcmllczogSXRlcmFibGUpOlxyXG4gICAgdGFyZ2V0X2ZvbGRlcl9uYW1lcyA9IHtpLmxvd2VyKCkgZm9yIGkgaW4gcXVlcmllc31cclxuICAgIGZvciBwIGluIHBhdGhzOlxyXG4gICAgICAgIGlmIGlzZGlyKHApOlxyXG4gICAgICAgICAgICBmb3IgZm5hbWUgaW4gdGFyZ2V0X2ZvbGRlcl9uYW1lcy5pbnRlcnNlY3Rpb24oaS5uYW1lLmxvd2VyKCkgZm9yIGkgaW4gb3Muc2NhbmRpcihwKSk6XHJcbiAgICAgICAgICAgICAgICBpZiBmbmFtZSBpbiB0YXJnZXRfZm9sZGVyX25hbWVzOlxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGpvaW4ocCwgZm5hbWUpXHJcbiIpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCd0b29scy5weScsIGIiaW1wb3J0IG9zXHJcbmltcG9ydCBhc3luY2lvXHJcbmZyb20gYWlvZmlsZXMub3MgaW1wb3J0IHdyYXBcclxuZnJvbSBzaHV0aWwgaW1wb3J0IGNvcHlmaWxlLCBjb3B5dHJlZSwgbW92ZVxyXG5mcm9tIGxvZ2dlciBpbXBvcnQgTG9nZ2VyXHJcbmltcG9ydCB3aW5yZWdcclxuaW1wb3J0IHJlXHJcblxyXG5cclxuXHJcbmRlZiB6aXBkaXIocGF0aCwgemlwaCk6XHJcbiAgICAnJydGcm9tIHN0YWNrb3ZlcmZsb3cnJydcclxuICAgICMgemlwaCBpcyB6aXBmaWxlIGhhbmRsZVxyXG4gICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsocGF0aCk6XHJcbiAgICAgICAgZm9yIGZpbGUgaW4gZmlsZXM6XHJcbiAgICAgICAgICAgIHppcGgud3JpdGUob3MucGF0aC5qb2luKHJvb3QsIGZpbGUpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICBvcy5wYXRoLnJlbHBhdGgob3MucGF0aC5qb2luKHJvb3QsIGZpbGUpLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3MucGF0aC5qb2luKHBhdGgsICcuLicpKSlcclxuXHJcbmNvcHlmaWxlID0gd3JhcChjb3B5ZmlsZSlcclxuY29weXRyZWUgPSB3cmFwKGNvcHl0cmVlKVxyXG5tb3ZlID0gd3JhcChtb3ZlKVxyXG5cclxuXHJcbmRlZiBfaGFuZGxlX3Rhc2tfcmVzdWx0KHRhc2s6IGFzeW5jaW8uVGFzaywgbG9nZ2VyOiBMb2dnZXIpIC0+IE5vbmU6XHJcbiAgICB0cnk6XHJcbiAgICAgICAgdGFzay5yZXN1bHQoKVxyXG4gICAgZXhjZXB0IGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3I6XHJcbiAgICAgICAgcGFzcyAgIyBUYXNrIGNhbmNlbGxhdGlvbiBzaG91bGQgbm90IGJlIGxvZ2dlZCBhcyBhbiBlcnJvci5cclxuICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTogICMgcHlsaW50OiBkaXNhYmxlPWJyb2FkLWV4Y2VwdFxyXG4gICAgICAgIGxvZ2dlci5zeW5jX2xvZyhmJ0Vycm9yIHtlIXJ9JykiKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvZmlsZXMvX19pbml0X18ucHknLCBiJyIiIlV0aWxpdGllcyBmb3IgYXN5bmNpby1mcmllbmRseSBmaWxlIGhhbmRsaW5nLiIiIlxuZnJvbSAudGhyZWFkcG9vbCBpbXBvcnQgb3BlblxuZnJvbSAuIGltcG9ydCB0ZW1wZmlsZVxuXG5fX2FsbF9fID0gWyJvcGVuIiwgInRlbXBmaWxlIl1cbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9maWxlcy90aHJlYWRwb29sL19faW5pdF9fLnB5JywgYiciIiJIYW5kbGUgZmlsZXMgdXNpbmcgYSB0aHJlYWQgcG9vbCBleGVjdXRvci4iIiJcbmltcG9ydCBhc3luY2lvXG5mcm9tIHR5cGVzIGltcG9ydCBjb3JvdXRpbmVcblxuZnJvbSBpbyBpbXBvcnQgKFxuICAgIEZpbGVJTyxcbiAgICBUZXh0SU9CYXNlLFxuICAgIEJ1ZmZlcmVkUmVhZGVyLFxuICAgIEJ1ZmZlcmVkV3JpdGVyLFxuICAgIEJ1ZmZlcmVkUmFuZG9tLFxuKVxuZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHBhcnRpYWwsIHNpbmdsZWRpc3BhdGNoXG5cbmZyb20gLmJpbmFyeSBpbXBvcnQgQXN5bmNCdWZmZXJlZElPQmFzZSwgQXN5bmNCdWZmZXJlZFJlYWRlciwgQXN5bmNGaWxlSU9cbmZyb20gLnRleHQgaW1wb3J0IEFzeW5jVGV4dElPV3JhcHBlclxuZnJvbSAuLmJhc2UgaW1wb3J0IEFpb2ZpbGVzQ29udGV4dE1hbmFnZXJcblxuc3luY19vcGVuID0gb3BlblxuXG5fX2FsbF9fID0gKCJvcGVuIiwpXG5cblxuZGVmIG9wZW4oXG4gICAgZmlsZSxcbiAgICBtb2RlPSJyIixcbiAgICBidWZmZXJpbmc9LTEsXG4gICAgZW5jb2Rpbmc9Tm9uZSxcbiAgICBlcnJvcnM9Tm9uZSxcbiAgICBuZXdsaW5lPU5vbmUsXG4gICAgY2xvc2VmZD1UcnVlLFxuICAgIG9wZW5lcj1Ob25lLFxuICAgICosXG4gICAgbG9vcD1Ob25lLFxuICAgIGV4ZWN1dG9yPU5vbmVcbik6XG4gICAgcmV0dXJuIEFpb2ZpbGVzQ29udGV4dE1hbmFnZXIoXG4gICAgICAgIF9vcGVuKFxuICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgIG1vZGU9bW9kZSxcbiAgICAgICAgICAgIGJ1ZmZlcmluZz1idWZmZXJpbmcsXG4gICAgICAgICAgICBlbmNvZGluZz1lbmNvZGluZyxcbiAgICAgICAgICAgIGVycm9ycz1lcnJvcnMsXG4gICAgICAgICAgICBuZXdsaW5lPW5ld2xpbmUsXG4gICAgICAgICAgICBjbG9zZWZkPWNsb3NlZmQsXG4gICAgICAgICAgICBvcGVuZXI9b3BlbmVyLFxuICAgICAgICAgICAgbG9vcD1sb29wLFxuICAgICAgICAgICAgZXhlY3V0b3I9ZXhlY3V0b3IsXG4gICAgICAgIClcbiAgICApXG5cblxuQGNvcm91dGluZVxuZGVmIF9vcGVuKFxuICAgIGZpbGUsXG4gICAgbW9kZT0iciIsXG4gICAgYnVmZmVyaW5nPS0xLFxuICAgIGVuY29kaW5nPU5vbmUsXG4gICAgZXJyb3JzPU5vbmUsXG4gICAgbmV3bGluZT1Ob25lLFxuICAgIGNsb3NlZmQ9VHJ1ZSxcbiAgICBvcGVuZXI9Tm9uZSxcbiAgICAqLFxuICAgIGxvb3A9Tm9uZSxcbiAgICBleGVjdXRvcj1Ob25lXG4pOlxuICAgICIiIk9wZW4gYW4gYXN5bmNpbyBmaWxlLiIiIlxuICAgIGlmIGxvb3AgaXMgTm9uZTpcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxuICAgIGNiID0gcGFydGlhbChcbiAgICAgICAgc3luY19vcGVuLFxuICAgICAgICBmaWxlLFxuICAgICAgICBtb2RlPW1vZGUsXG4gICAgICAgIGJ1ZmZlcmluZz1idWZmZXJpbmcsXG4gICAgICAgIGVuY29kaW5nPWVuY29kaW5nLFxuICAgICAgICBlcnJvcnM9ZXJyb3JzLFxuICAgICAgICBuZXdsaW5lPW5ld2xpbmUsXG4gICAgICAgIGNsb3NlZmQ9Y2xvc2VmZCxcbiAgICAgICAgb3BlbmVyPW9wZW5lcixcbiAgICApXG4gICAgZiA9IHlpZWxkIGZyb20gbG9vcC5ydW5faW5fZXhlY3V0b3IoZXhlY3V0b3IsIGNiKVxuXG4gICAgcmV0dXJuIHdyYXAoZiwgbG9vcD1sb29wLCBleGVjdXRvcj1leGVjdXRvcilcblxuXG5Ac2luZ2xlZGlzcGF0Y2hcbmRlZiB3cmFwKGZpbGUsICosIGxvb3A9Tm9uZSwgZXhlY3V0b3I9Tm9uZSk6XG4gICAgcmFpc2UgVHlwZUVycm9yKCJVbnN1cHBvcnRlZCBpbyB0eXBlOiB7fS4iLmZvcm1hdChmaWxlKSlcblxuXG5Ad3JhcC5yZWdpc3RlcihUZXh0SU9CYXNlKVxuZGVmIF8oZmlsZSwgKiwgbG9vcD1Ob25lLCBleGVjdXRvcj1Ob25lKTpcbiAgICByZXR1cm4gQXN5bmNUZXh0SU9XcmFwcGVyKGZpbGUsIGxvb3A9bG9vcCwgZXhlY3V0b3I9ZXhlY3V0b3IpXG5cblxuQHdyYXAucmVnaXN0ZXIoQnVmZmVyZWRXcml0ZXIpXG5kZWYgXyhmaWxlLCAqLCBsb29wPU5vbmUsIGV4ZWN1dG9yPU5vbmUpOlxuICAgIHJldHVybiBBc3luY0J1ZmZlcmVkSU9CYXNlKGZpbGUsIGxvb3A9bG9vcCwgZXhlY3V0b3I9ZXhlY3V0b3IpXG5cblxuQHdyYXAucmVnaXN0ZXIoQnVmZmVyZWRSZWFkZXIpXG5Ad3JhcC5yZWdpc3RlcihCdWZmZXJlZFJhbmRvbSlcbmRlZiBfKGZpbGUsICosIGxvb3A9Tm9uZSwgZXhlY3V0b3I9Tm9uZSk6XG4gICAgcmV0dXJuIEFzeW5jQnVmZmVyZWRSZWFkZXIoZmlsZSwgbG9vcD1sb29wLCBleGVjdXRvcj1leGVjdXRvcilcblxuXG5Ad3JhcC5yZWdpc3RlcihGaWxlSU8pXG5kZWYgXyhmaWxlLCAqLCBsb29wPU5vbmUsIGV4ZWN1dG9yPU5vbmUpOlxuICAgIHJldHVybiBBc3luY0ZpbGVJTyhmaWxlLCBsb29wLCBleGVjdXRvcilcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9maWxlcy90aHJlYWRwb29sL2JpbmFyeS5weScsIGInZnJvbSAuLmJhc2UgaW1wb3J0IEFzeW5jQmFzZVxuZnJvbSAudXRpbHMgaW1wb3J0IChcbiAgICBkZWxlZ2F0ZV90b19leGVjdXRvcixcbiAgICBwcm94eV9tZXRob2RfZGlyZWN0bHksXG4gICAgcHJveHlfcHJvcGVydHlfZGlyZWN0bHksXG4pXG5cblxuQGRlbGVnYXRlX3RvX2V4ZWN1dG9yKFxuICAgICJjbG9zZSIsXG4gICAgImZsdXNoIixcbiAgICAiaXNhdHR5IixcbiAgICAicmVhZCIsXG4gICAgInJlYWQxIixcbiAgICAicmVhZGludG8iLFxuICAgICJyZWFkbGluZSIsXG4gICAgInJlYWRsaW5lcyIsXG4gICAgInNlZWsiLFxuICAgICJzZWVrYWJsZSIsXG4gICAgInRlbGwiLFxuICAgICJ0cnVuY2F0ZSIsXG4gICAgIndyaXRhYmxlIixcbiAgICAid3JpdGUiLFxuICAgICJ3cml0ZWxpbmVzIixcbilcbkBwcm94eV9tZXRob2RfZGlyZWN0bHkoImRldGFjaCIsICJmaWxlbm8iLCAicmVhZGFibGUiKVxuQHByb3h5X3Byb3BlcnR5X2RpcmVjdGx5KCJjbG9zZWQiLCAicmF3IiwgIm5hbWUiLCAibW9kZSIpXG5jbGFzcyBBc3luY0J1ZmZlcmVkSU9CYXNlKEFzeW5jQmFzZSk6XG4gICAgIiIiVGhlIGFzeW5jaW8gZXhlY3V0b3IgdmVyc2lvbiBvZiBpby5CdWZmZXJlZFdyaXRlci4iIiJcblxuXG5AZGVsZWdhdGVfdG9fZXhlY3V0b3IoInBlZWsiKVxuY2xhc3MgQXN5bmNCdWZmZXJlZFJlYWRlcihBc3luY0J1ZmZlcmVkSU9CYXNlKTpcbiAgICAiIiJUaGUgYXN5bmNpbyBleGVjdXRvciB2ZXJzaW9uIG9mIGlvLkJ1ZmZlcmVkUmVhZGVyIGFuZCBSYW5kb20uIiIiXG5cblxuQGRlbGVnYXRlX3RvX2V4ZWN1dG9yKFxuICAgICJjbG9zZSIsXG4gICAgImZsdXNoIixcbiAgICAiaXNhdHR5IixcbiAgICAicmVhZCIsXG4gICAgInJlYWRhbGwiLFxuICAgICJyZWFkaW50byIsXG4gICAgInJlYWRsaW5lIixcbiAgICAicmVhZGxpbmVzIixcbiAgICAic2VlayIsXG4gICAgInNlZWthYmxlIixcbiAgICAidGVsbCIsXG4gICAgInRydW5jYXRlIixcbiAgICAid3JpdGFibGUiLFxuICAgICJ3cml0ZSIsXG4gICAgIndyaXRlbGluZXMiLFxuKVxuQHByb3h5X21ldGhvZF9kaXJlY3RseSgiZmlsZW5vIiwgInJlYWRhYmxlIilcbkBwcm94eV9wcm9wZXJ0eV9kaXJlY3RseSgiY2xvc2VkIiwgIm5hbWUiLCAibW9kZSIpXG5jbGFzcyBBc3luY0ZpbGVJTyhBc3luY0Jhc2UpOlxuICAgICIiIlRoZSBhc3luY2lvIGV4ZWN1dG9yIHZlcnNpb24gb2YgaW8uRmlsZUlPLiIiIlxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2ZpbGVzL2Jhc2UucHknLCBiJyIiIlZhcmlvdXMgYmFzZSBjbGFzc2VzLiIiIlxuZnJvbSB0eXBlcyBpbXBvcnQgY29yb3V0aW5lXG5mcm9tIGNvbGxlY3Rpb25zLmFiYyBpbXBvcnQgQ29yb3V0aW5lXG5cblxuY2xhc3MgQXN5bmNCYXNlOlxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmaWxlLCBsb29wLCBleGVjdXRvcik6XG4gICAgICAgIHNlbGYuX2ZpbGUgPSBmaWxlXG4gICAgICAgIHNlbGYuX2xvb3AgPSBsb29wXG4gICAgICAgIHNlbGYuX2V4ZWN1dG9yID0gZXhlY3V0b3JcblxuICAgIGRlZiBfX2FpdGVyX18oc2VsZik6XG4gICAgICAgICIiIldlIGFyZSBvdXIgb3duIGl0ZXJhdG9yLiIiIlxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gc3VwZXIoKS5fX3JlcHJfXygpICsgIiB3cmFwcGluZyAiICsgcmVwcihzZWxmLl9maWxlKVxuXG4gICAgYXN5bmMgZGVmIF9fYW5leHRfXyhzZWxmKTpcbiAgICAgICAgIiIiU2ltdWxhdGUgbm9ybWFsIGZpbGUgaXRlcmF0aW9uLiIiIlxuICAgICAgICBsaW5lID0gYXdhaXQgc2VsZi5yZWFkbGluZSgpXG4gICAgICAgIGlmIGxpbmU6XG4gICAgICAgICAgICByZXR1cm4gbGluZVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgcmFpc2UgU3RvcEFzeW5jSXRlcmF0aW9uXG5cblxuY2xhc3MgX0NvbnRleHRNYW5hZ2VyKENvcm91dGluZSk6XG4gICAgX19zbG90c19fID0gKCJfY29ybyIsICJfb2JqIilcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb3JvKTpcbiAgICAgICAgc2VsZi5fY29ybyA9IGNvcm9cbiAgICAgICAgc2VsZi5fb2JqID0gTm9uZVxuXG4gICAgZGVmIHNlbmQoc2VsZiwgdmFsdWUpOlxuICAgICAgICByZXR1cm4gc2VsZi5fY29yby5zZW5kKHZhbHVlKVxuXG4gICAgZGVmIHRocm93KHNlbGYsIHR5cCwgdmFsPU5vbmUsIHRiPU5vbmUpOlxuICAgICAgICBpZiB2YWwgaXMgTm9uZTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jb3JvLnRocm93KHR5cClcbiAgICAgICAgZWxpZiB0YiBpcyBOb25lOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2Nvcm8udGhyb3codHlwLCB2YWwpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fY29yby50aHJvdyh0eXAsIHZhbCwgdGIpXG5cbiAgICBkZWYgY2xvc2Uoc2VsZik6XG4gICAgICAgIHJldHVybiBzZWxmLl9jb3JvLmNsb3NlKClcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBnaV9mcmFtZShzZWxmKTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvcm8uZ2lfZnJhbWVcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBnaV9ydW5uaW5nKHNlbGYpOlxuICAgICAgICByZXR1cm4gc2VsZi5fY29yby5naV9ydW5uaW5nXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgZ2lfY29kZShzZWxmKTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvcm8uZ2lfY29kZVxuXG4gICAgZGVmIF9fbmV4dF9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gc2VsZi5zZW5kKE5vbmUpXG5cbiAgICBAY29yb3V0aW5lXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpOlxuICAgICAgICByZXNwID0geWllbGQgZnJvbSBzZWxmLl9jb3JvXG4gICAgICAgIHJldHVybiByZXNwXG5cbiAgICBkZWYgX19hd2FpdF9fKHNlbGYpOlxuICAgICAgICByZXNwID0geWllbGQgZnJvbSBzZWxmLl9jb3JvXG4gICAgICAgIHJldHVybiByZXNwXG5cbiAgICBhc3luYyBkZWYgX19hbmV4dF9fKHNlbGYpOlxuICAgICAgICByZXNwID0gYXdhaXQgc2VsZi5fY29yb1xuICAgICAgICByZXR1cm4gcmVzcFxuXG4gICAgYXN5bmMgZGVmIF9fYWVudGVyX18oc2VsZik6XG4gICAgICAgIHNlbGYuX29iaiA9IGF3YWl0IHNlbGYuX2Nvcm9cbiAgICAgICAgcmV0dXJuIHNlbGYuX29ialxuXG4gICAgYXN5bmMgZGVmIF9fYWV4aXRfXyhzZWxmLCBleGNfdHlwZSwgZXhjLCB0Yik6XG4gICAgICAgIHNlbGYuX29iai5jbG9zZSgpXG4gICAgICAgIHNlbGYuX29iaiA9IE5vbmVcblxuXG5jbGFzcyBBaW9maWxlc0NvbnRleHRNYW5hZ2VyKF9Db250ZXh0TWFuYWdlcik6XG4gICAgIiIiQW4gYWRqdXN0ZWQgYXN5bmMgY29udGV4dCBtYW5hZ2VyIGZvciBhaW9maWxlcy4iIiJcblxuICAgIGFzeW5jIGRlZiBfX2FleGl0X18oc2VsZiwgZXhjX3R5cGUsIGV4Y192YWwsIGV4Y190Yik6XG4gICAgICAgIGF3YWl0IHNlbGYuX29iai5jbG9zZSgpXG4gICAgICAgIHNlbGYuX29iaiA9IE5vbmVcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9maWxlcy90aHJlYWRwb29sL3V0aWxzLnB5JywgYidpbXBvcnQgZnVuY3Rvb2xzXG5mcm9tIHR5cGVzIGltcG9ydCBjb3JvdXRpbmVcblxuXG5kZWYgZGVsZWdhdGVfdG9fZXhlY3V0b3IoKmF0dHJzKTpcbiAgICBkZWYgY2xzX2J1aWxkZXIoY2xzKTpcbiAgICAgICAgZm9yIGF0dHJfbmFtZSBpbiBhdHRyczpcbiAgICAgICAgICAgIHNldGF0dHIoY2xzLCBhdHRyX25hbWUsIF9tYWtlX2RlbGVnYXRlX21ldGhvZChhdHRyX25hbWUpKVxuICAgICAgICByZXR1cm4gY2xzXG5cbiAgICByZXR1cm4gY2xzX2J1aWxkZXJcblxuXG5kZWYgcHJveHlfbWV0aG9kX2RpcmVjdGx5KCphdHRycyk6XG4gICAgZGVmIGNsc19idWlsZGVyKGNscyk6XG4gICAgICAgIGZvciBhdHRyX25hbWUgaW4gYXR0cnM6XG4gICAgICAgICAgICBzZXRhdHRyKGNscywgYXR0cl9uYW1lLCBfbWFrZV9wcm94eV9tZXRob2QoYXR0cl9uYW1lKSlcbiAgICAgICAgcmV0dXJuIGNsc1xuXG4gICAgcmV0dXJuIGNsc19idWlsZGVyXG5cblxuZGVmIHByb3h5X3Byb3BlcnR5X2RpcmVjdGx5KCphdHRycyk6XG4gICAgZGVmIGNsc19idWlsZGVyKGNscyk6XG4gICAgICAgIGZvciBhdHRyX25hbWUgaW4gYXR0cnM6XG4gICAgICAgICAgICBzZXRhdHRyKGNscywgYXR0cl9uYW1lLCBfbWFrZV9wcm94eV9wcm9wZXJ0eShhdHRyX25hbWUpKVxuICAgICAgICByZXR1cm4gY2xzXG5cbiAgICByZXR1cm4gY2xzX2J1aWxkZXJcblxuXG5kZWYgY29uZF9kZWxlZ2F0ZV90b19leGVjdXRvcigqYXR0cnMpOlxuICAgIGRlZiBjbHNfYnVpbGRlcihjbHMpOlxuICAgICAgICBmb3IgYXR0cl9uYW1lIGluIGF0dHJzOlxuICAgICAgICAgICAgc2V0YXR0cihjbHMsIGF0dHJfbmFtZSwgX21ha2VfY29uZF9kZWxlZ2F0ZV9tZXRob2QoYXR0cl9uYW1lKSlcbiAgICAgICAgcmV0dXJuIGNsc1xuXG4gICAgcmV0dXJuIGNsc19idWlsZGVyXG5cblxuZGVmIF9tYWtlX2RlbGVnYXRlX21ldGhvZChhdHRyX25hbWUpOlxuICAgIEBjb3JvdXRpbmVcbiAgICBkZWYgbWV0aG9kKHNlbGYsICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgIGNiID0gZnVuY3Rvb2xzLnBhcnRpYWwoZ2V0YXR0cihzZWxmLl9maWxlLCBhdHRyX25hbWUpLCAqYXJncywgKiprd2FyZ3MpXG4gICAgICAgIHJldHVybiAoeWllbGQgZnJvbSBzZWxmLl9sb29wLnJ1bl9pbl9leGVjdXRvcihzZWxmLl9leGVjdXRvciwgY2IpKVxuXG4gICAgcmV0dXJuIG1ldGhvZFxuXG5cbmRlZiBfbWFrZV9wcm94eV9tZXRob2QoYXR0cl9uYW1lKTpcbiAgICBkZWYgbWV0aG9kKHNlbGYsICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYuX2ZpbGUsIGF0dHJfbmFtZSkoKmFyZ3MsICoqa3dhcmdzKVxuXG4gICAgcmV0dXJuIG1ldGhvZFxuXG5cbmRlZiBfbWFrZV9wcm94eV9wcm9wZXJ0eShhdHRyX25hbWUpOlxuICAgIGRlZiBwcm94eV9wcm9wZXJ0eShzZWxmKTpcbiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5fZmlsZSwgYXR0cl9uYW1lKVxuXG4gICAgcmV0dXJuIHByb3BlcnR5KHByb3h5X3Byb3BlcnR5KVxuXG5cbmRlZiBfbWFrZV9jb25kX2RlbGVnYXRlX21ldGhvZChhdHRyX25hbWUpOlxuICAgICIiIkZvciBzcG9vbGVkIHRlbXAgZmlsZXMsIGRlbGVnYXRlIG9ubHkgaWYgcm9sbGVkIHRvIGZpbGUgb2JqZWN0IiIiXG5cbiAgICBhc3luYyBkZWYgbWV0aG9kKHNlbGYsICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgIGlmIHNlbGYuX2ZpbGUuX3JvbGxlZDpcbiAgICAgICAgICAgIGNiID0gZnVuY3Rvb2xzLnBhcnRpYWwoZ2V0YXR0cihzZWxmLl9maWxlLCBhdHRyX25hbWUpLCAqYXJncywgKiprd2FyZ3MpXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fbG9vcC5ydW5faW5fZXhlY3V0b3Ioc2VsZi5fZXhlY3V0b3IsIGNiKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZi5fZmlsZSwgYXR0cl9uYW1lKSgqYXJncywgKiprd2FyZ3MpXG5cbiAgICByZXR1cm4gbWV0aG9kXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvZmlsZXMvdGhyZWFkcG9vbC90ZXh0LnB5JywgYidmcm9tIC4uYmFzZSBpbXBvcnQgQXN5bmNCYXNlXG5mcm9tIC51dGlscyBpbXBvcnQgKFxuICAgIGRlbGVnYXRlX3RvX2V4ZWN1dG9yLFxuICAgIHByb3h5X21ldGhvZF9kaXJlY3RseSxcbiAgICBwcm94eV9wcm9wZXJ0eV9kaXJlY3RseSxcbilcblxuXG5AZGVsZWdhdGVfdG9fZXhlY3V0b3IoXG4gICAgImNsb3NlIixcbiAgICAiZmx1c2giLFxuICAgICJpc2F0dHkiLFxuICAgICJyZWFkIixcbiAgICAicmVhZGFibGUiLFxuICAgICJyZWFkbGluZSIsXG4gICAgInJlYWRsaW5lcyIsXG4gICAgInNlZWsiLFxuICAgICJzZWVrYWJsZSIsXG4gICAgInRlbGwiLFxuICAgICJ0cnVuY2F0ZSIsXG4gICAgIndyaXRlIixcbiAgICAid3JpdGFibGUiLFxuICAgICJ3cml0ZWxpbmVzIixcbilcbkBwcm94eV9tZXRob2RfZGlyZWN0bHkoImRldGFjaCIsICJmaWxlbm8iLCAicmVhZGFibGUiKVxuQHByb3h5X3Byb3BlcnR5X2RpcmVjdGx5KFxuICAgICJidWZmZXIiLFxuICAgICJjbG9zZWQiLFxuICAgICJlbmNvZGluZyIsXG4gICAgImVycm9ycyIsXG4gICAgImxpbmVfYnVmZmVyaW5nIixcbiAgICAibmV3bGluZXMiLFxuICAgICJuYW1lIixcbiAgICAibW9kZSIsXG4pXG5jbGFzcyBBc3luY1RleHRJT1dyYXBwZXIoQXN5bmNCYXNlKTpcbiAgICAiIiJUaGUgYXN5bmNpbyBleGVjdXRvciB2ZXJzaW9uIG9mIGlvLlRleHRJT1dyYXBwZXIuIiIiXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvZmlsZXMvdGVtcGZpbGUvX19pbml0X18ucHknLCBiJyMgSW1wb3J0c1xyXG5pbXBvcnQgYXN5bmNpb1xyXG5mcm9tIHRlbXBmaWxlIGltcG9ydCAoXHJcbiAgICBUZW1wb3JhcnlGaWxlIGFzIHN5bmNUZW1wb3JhcnlGaWxlLFxyXG4gICAgTmFtZWRUZW1wb3JhcnlGaWxlIGFzIHN5bmNOYW1lZFRlbXBvcmFyeUZpbGUsXHJcbiAgICBTcG9vbGVkVGVtcG9yYXJ5RmlsZSBhcyBzeW5jU3Bvb2xlZFRlbXBvcmFyeUZpbGUsXHJcbiAgICBUZW1wb3JhcnlEaXJlY3RvcnkgYXMgc3luY1RlbXBvcmFyeURpcmVjdG9yeSxcclxuICAgIF9UZW1wb3JhcnlGaWxlV3JhcHBlciBhcyBzeW5jVGVtcG9yYXJ5RmlsZVdyYXBwZXIsXHJcbilcclxuZnJvbSBpbyBpbXBvcnQgRmlsZUlPLCBUZXh0SU9CYXNlLCBCdWZmZXJlZFJlYWRlciwgQnVmZmVyZWRXcml0ZXIsIEJ1ZmZlcmVkUmFuZG9tXHJcbmZyb20gZnVuY3Rvb2xzIGltcG9ydCBwYXJ0aWFsLCBzaW5nbGVkaXNwYXRjaFxyXG5mcm9tIC4uYmFzZSBpbXBvcnQgQWlvZmlsZXNDb250ZXh0TWFuYWdlclxyXG5mcm9tIC4udGhyZWFkcG9vbC50ZXh0IGltcG9ydCBBc3luY1RleHRJT1dyYXBwZXJcclxuZnJvbSAuLnRocmVhZHBvb2wuYmluYXJ5IGltcG9ydCBBc3luY0J1ZmZlcmVkSU9CYXNlLCBBc3luY0J1ZmZlcmVkUmVhZGVyLCBBc3luY0ZpbGVJT1xyXG5mcm9tIC50ZW1wdHlwZXMgaW1wb3J0IEFzeW5jU3Bvb2xlZFRlbXBvcmFyeUZpbGUsIEFzeW5jVGVtcG9yYXJ5RGlyZWN0b3J5XHJcblxyXG5fX2FsbF9fID0gW1xyXG4gICAgIk5hbWVkVGVtcG9yYXJ5RmlsZSIsXHJcbiAgICAiVGVtcG9yYXJ5RmlsZSIsXHJcbiAgICAiU3Bvb2xlZFRlbXBvcmFyeUZpbGUiLFxyXG4gICAgIlRlbXBvcmFyeURpcmVjdG9yeSIsXHJcbl1cclxuXHJcblxyXG4jID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuIyBQdWJsaWMgbWV0aG9kcyBmb3IgYXN5bmMgb3BlbiBhbmQgcmV0dXJuIG9mIHRlbXAgZmlsZS9kaXJlY3RvcnlcclxuIyBvYmplY3RzIHdpdGggYXN5bmMgaW50ZXJmYWNlXHJcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5kZWYgTmFtZWRUZW1wb3JhcnlGaWxlKFxyXG4gICAgbW9kZT0idytiIixcclxuICAgIGJ1ZmZlcmluZz0tMSxcclxuICAgIGVuY29kaW5nPU5vbmUsXHJcbiAgICBuZXdsaW5lPU5vbmUsXHJcbiAgICBzdWZmaXg9Tm9uZSxcclxuICAgIHByZWZpeD1Ob25lLFxyXG4gICAgZGlyPU5vbmUsXHJcbiAgICBkZWxldGU9VHJ1ZSxcclxuICAgIGxvb3A9Tm9uZSxcclxuICAgIGV4ZWN1dG9yPU5vbmUsXHJcbik6XHJcbiAgICAiIiJBc3luYyBvcGVuIGEgbmFtZWQgdGVtcG9yYXJ5IGZpbGUiIiJcclxuICAgIHJldHVybiBBaW9maWxlc0NvbnRleHRNYW5hZ2VyKFxyXG4gICAgICAgIF90ZW1wb3JhcnlfZmlsZShcclxuICAgICAgICAgICAgbmFtZWQ9VHJ1ZSxcclxuICAgICAgICAgICAgbW9kZT1tb2RlLFxyXG4gICAgICAgICAgICBidWZmZXJpbmc9YnVmZmVyaW5nLFxyXG4gICAgICAgICAgICBlbmNvZGluZz1lbmNvZGluZyxcclxuICAgICAgICAgICAgbmV3bGluZT1uZXdsaW5lLFxyXG4gICAgICAgICAgICBzdWZmaXg9c3VmZml4LFxyXG4gICAgICAgICAgICBwcmVmaXg9cHJlZml4LFxyXG4gICAgICAgICAgICBkaXI9ZGlyLFxyXG4gICAgICAgICAgICBkZWxldGU9ZGVsZXRlLFxyXG4gICAgICAgICAgICBsb29wPWxvb3AsXHJcbiAgICAgICAgICAgIGV4ZWN1dG9yPWV4ZWN1dG9yLFxyXG4gICAgICAgIClcclxuICAgIClcclxuXHJcblxyXG5kZWYgVGVtcG9yYXJ5RmlsZShcclxuICAgIG1vZGU9IncrYiIsXHJcbiAgICBidWZmZXJpbmc9LTEsXHJcbiAgICBlbmNvZGluZz1Ob25lLFxyXG4gICAgbmV3bGluZT1Ob25lLFxyXG4gICAgc3VmZml4PU5vbmUsXHJcbiAgICBwcmVmaXg9Tm9uZSxcclxuICAgIGRpcj1Ob25lLFxyXG4gICAgbG9vcD1Ob25lLFxyXG4gICAgZXhlY3V0b3I9Tm9uZSxcclxuKTpcclxuICAgICIiIkFzeW5jIG9wZW4gYW4gdW5uYW1lZCB0ZW1wb3JhcnkgZmlsZSIiIlxyXG4gICAgcmV0dXJuIEFpb2ZpbGVzQ29udGV4dE1hbmFnZXIoXHJcbiAgICAgICAgX3RlbXBvcmFyeV9maWxlKFxyXG4gICAgICAgICAgICBuYW1lZD1GYWxzZSxcclxuICAgICAgICAgICAgbW9kZT1tb2RlLFxyXG4gICAgICAgICAgICBidWZmZXJpbmc9YnVmZmVyaW5nLFxyXG4gICAgICAgICAgICBlbmNvZGluZz1lbmNvZGluZyxcclxuICAgICAgICAgICAgbmV3bGluZT1uZXdsaW5lLFxyXG4gICAgICAgICAgICBzdWZmaXg9c3VmZml4LFxyXG4gICAgICAgICAgICBwcmVmaXg9cHJlZml4LFxyXG4gICAgICAgICAgICBkaXI9ZGlyLFxyXG4gICAgICAgICAgICBsb29wPWxvb3AsXHJcbiAgICAgICAgICAgIGV4ZWN1dG9yPWV4ZWN1dG9yLFxyXG4gICAgICAgIClcclxuICAgIClcclxuXHJcblxyXG5kZWYgU3Bvb2xlZFRlbXBvcmFyeUZpbGUoXHJcbiAgICBtYXhfc2l6ZT0wLFxyXG4gICAgbW9kZT0idytiIixcclxuICAgIGJ1ZmZlcmluZz0tMSxcclxuICAgIGVuY29kaW5nPU5vbmUsXHJcbiAgICBuZXdsaW5lPU5vbmUsXHJcbiAgICBzdWZmaXg9Tm9uZSxcclxuICAgIHByZWZpeD1Ob25lLFxyXG4gICAgZGlyPU5vbmUsXHJcbiAgICBsb29wPU5vbmUsXHJcbiAgICBleGVjdXRvcj1Ob25lLFxyXG4pOlxyXG4gICAgIiIiQXN5bmMgb3BlbiBhIHNwb29sZWQgdGVtcG9yYXJ5IGZpbGUiIiJcclxuICAgIHJldHVybiBBaW9maWxlc0NvbnRleHRNYW5hZ2VyKFxyXG4gICAgICAgIF9zcG9vbGVkX3RlbXBvcmFyeV9maWxlKFxyXG4gICAgICAgICAgICBtYXhfc2l6ZT1tYXhfc2l6ZSxcclxuICAgICAgICAgICAgbW9kZT1tb2RlLFxyXG4gICAgICAgICAgICBidWZmZXJpbmc9YnVmZmVyaW5nLFxyXG4gICAgICAgICAgICBlbmNvZGluZz1lbmNvZGluZyxcclxuICAgICAgICAgICAgbmV3bGluZT1uZXdsaW5lLFxyXG4gICAgICAgICAgICBzdWZmaXg9c3VmZml4LFxyXG4gICAgICAgICAgICBwcmVmaXg9cHJlZml4LFxyXG4gICAgICAgICAgICBkaXI9ZGlyLFxyXG4gICAgICAgICAgICBsb29wPWxvb3AsXHJcbiAgICAgICAgICAgIGV4ZWN1dG9yPWV4ZWN1dG9yLFxyXG4gICAgICAgIClcclxuICAgIClcclxuXHJcblxyXG5kZWYgVGVtcG9yYXJ5RGlyZWN0b3J5KHN1ZmZpeD1Ob25lLCBwcmVmaXg9Tm9uZSwgZGlyPU5vbmUsIGxvb3A9Tm9uZSwgZXhlY3V0b3I9Tm9uZSk6XHJcbiAgICAiIiJBc3luYyBvcGVuIGEgdGVtcG9yYXJ5IGRpcmVjdG9yeSIiIlxyXG4gICAgcmV0dXJuIEFpb2ZpbGVzQ29udGV4dE1hbmFnZXJUZW1wRGlyKFxyXG4gICAgICAgIF90ZW1wb3JhcnlfZGlyZWN0b3J5KFxyXG4gICAgICAgICAgICBzdWZmaXg9c3VmZml4LCBwcmVmaXg9cHJlZml4LCBkaXI9ZGlyLCBsb29wPWxvb3AsIGV4ZWN1dG9yPWV4ZWN1dG9yXHJcbiAgICAgICAgKVxyXG4gICAgKVxyXG5cclxuXHJcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiMgSW50ZXJuYWwgY29yb3V0aW5lcyB0byBvcGVuIG5ldyB0ZW1wIGZpbGVzL2RpcmVjdG9yaWVzXHJcbiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmFzeW5jIGRlZiBfdGVtcG9yYXJ5X2ZpbGUoXHJcbiAgICBuYW1lZD1UcnVlLFxyXG4gICAgbW9kZT0idytiIixcclxuICAgIGJ1ZmZlcmluZz0tMSxcclxuICAgIGVuY29kaW5nPU5vbmUsXHJcbiAgICBuZXdsaW5lPU5vbmUsXHJcbiAgICBzdWZmaXg9Tm9uZSxcclxuICAgIHByZWZpeD1Ob25lLFxyXG4gICAgZGlyPU5vbmUsXHJcbiAgICBkZWxldGU9VHJ1ZSxcclxuICAgIGxvb3A9Tm9uZSxcclxuICAgIGV4ZWN1dG9yPU5vbmUsXHJcbiAgICBtYXhfc2l6ZT0wLFxyXG4pOlxyXG4gICAgIiIiQXN5bmMgbWV0aG9kIHRvIG9wZW4gYSB0ZW1wb3JhcnkgZmlsZSB3aXRoIGFzeW5jIGludGVyZmFjZSIiIlxyXG4gICAgaWYgbG9vcCBpcyBOb25lOlxyXG4gICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuXHJcbiAgICBpZiBuYW1lZDpcclxuICAgICAgICBjYiA9IHBhcnRpYWwoXHJcbiAgICAgICAgICAgIHN5bmNOYW1lZFRlbXBvcmFyeUZpbGUsXHJcbiAgICAgICAgICAgIG1vZGU9bW9kZSxcclxuICAgICAgICAgICAgYnVmZmVyaW5nPWJ1ZmZlcmluZyxcclxuICAgICAgICAgICAgZW5jb2Rpbmc9ZW5jb2RpbmcsXHJcbiAgICAgICAgICAgIG5ld2xpbmU9bmV3bGluZSxcclxuICAgICAgICAgICAgc3VmZml4PXN1ZmZpeCxcclxuICAgICAgICAgICAgcHJlZml4PXByZWZpeCxcclxuICAgICAgICAgICAgZGlyPWRpcixcclxuICAgICAgICAgICAgZGVsZXRlPWRlbGV0ZSxcclxuICAgICAgICApXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIGNiID0gcGFydGlhbChcclxuICAgICAgICAgICAgc3luY1RlbXBvcmFyeUZpbGUsXHJcbiAgICAgICAgICAgIG1vZGU9bW9kZSxcclxuICAgICAgICAgICAgYnVmZmVyaW5nPWJ1ZmZlcmluZyxcclxuICAgICAgICAgICAgZW5jb2Rpbmc9ZW5jb2RpbmcsXHJcbiAgICAgICAgICAgIG5ld2xpbmU9bmV3bGluZSxcclxuICAgICAgICAgICAgc3VmZml4PXN1ZmZpeCxcclxuICAgICAgICAgICAgcHJlZml4PXByZWZpeCxcclxuICAgICAgICAgICAgZGlyPWRpcixcclxuICAgICAgICApXHJcblxyXG4gICAgZiA9IGF3YWl0IGxvb3AucnVuX2luX2V4ZWN1dG9yKGV4ZWN1dG9yLCBjYilcclxuXHJcbiAgICAjIFdyYXAgYmFzZWQgb24gdHlwZSBvZiB1bmRlcmx5aW5nIElPIG9iamVjdFxyXG4gICAgaWYgdHlwZShmKSBpcyBzeW5jVGVtcG9yYXJ5RmlsZVdyYXBwZXI6XHJcbiAgICAgICAgIyBfVGVtcG9yYXJ5RmlsZVdyYXBwZXIgd2FzIHVzZWQgKG5hbWVkIGZpbGVzKVxyXG4gICAgICAgIHJlc3VsdCA9IHdyYXAoZi5maWxlLCBmLCBsb29wPWxvb3AsIGV4ZWN1dG9yPWV4ZWN1dG9yKVxyXG4gICAgICAgICMgYWRkIGRlbGV0ZSBwcm9wZXJ0eVxyXG4gICAgICAgIHJlc3VsdC5kZWxldGUgPSBmLmRlbGV0ZVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgIGVsc2U6XHJcbiAgICAgICAgIyBJTyBvYmplY3Qgd2FzIHJldHVybmVkIGRpcmVjdGx5IHdpdGhvdXQgd3JhcHBlclxyXG4gICAgICAgIHJldHVybiB3cmFwKGYsIGYsIGxvb3A9bG9vcCwgZXhlY3V0b3I9ZXhlY3V0b3IpXHJcblxyXG5cclxuYXN5bmMgZGVmIF9zcG9vbGVkX3RlbXBvcmFyeV9maWxlKFxyXG4gICAgbWF4X3NpemU9MCxcclxuICAgIG1vZGU9IncrYiIsXHJcbiAgICBidWZmZXJpbmc9LTEsXHJcbiAgICBlbmNvZGluZz1Ob25lLFxyXG4gICAgbmV3bGluZT1Ob25lLFxyXG4gICAgc3VmZml4PU5vbmUsXHJcbiAgICBwcmVmaXg9Tm9uZSxcclxuICAgIGRpcj1Ob25lLFxyXG4gICAgbG9vcD1Ob25lLFxyXG4gICAgZXhlY3V0b3I9Tm9uZSxcclxuKTpcclxuICAgICIiIk9wZW4gYSBzcG9vbGVkIHRlbXBvcmFyeSBmaWxlIHdpdGggYXN5bmMgaW50ZXJmYWNlIiIiXHJcbiAgICBpZiBsb29wIGlzIE5vbmU6XHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG5cclxuICAgIGNiID0gcGFydGlhbChcclxuICAgICAgICBzeW5jU3Bvb2xlZFRlbXBvcmFyeUZpbGUsXHJcbiAgICAgICAgbWF4X3NpemU9bWF4X3NpemUsXHJcbiAgICAgICAgbW9kZT1tb2RlLFxyXG4gICAgICAgIGJ1ZmZlcmluZz1idWZmZXJpbmcsXHJcbiAgICAgICAgZW5jb2Rpbmc9ZW5jb2RpbmcsXHJcbiAgICAgICAgbmV3bGluZT1uZXdsaW5lLFxyXG4gICAgICAgIHN1ZmZpeD1zdWZmaXgsXHJcbiAgICAgICAgcHJlZml4PXByZWZpeCxcclxuICAgICAgICBkaXI9ZGlyLFxyXG4gICAgKVxyXG5cclxuICAgIGYgPSBhd2FpdCBsb29wLnJ1bl9pbl9leGVjdXRvcihleGVjdXRvciwgY2IpXHJcblxyXG4gICAgIyBTaW5nbGUgaW50ZXJmYWNlIHByb3ZpZGVkIGJ5IFNwb29sZWRUZW1wb3JhcnlGaWxlIGZvciBhbGwgbW9kZXNcclxuICAgIHJldHVybiBBc3luY1Nwb29sZWRUZW1wb3JhcnlGaWxlKGYsIGxvb3A9bG9vcCwgZXhlY3V0b3I9ZXhlY3V0b3IpXHJcblxyXG5cclxuYXN5bmMgZGVmIF90ZW1wb3JhcnlfZGlyZWN0b3J5KFxyXG4gICAgc3VmZml4PU5vbmUsIHByZWZpeD1Ob25lLCBkaXI9Tm9uZSwgbG9vcD1Ob25lLCBleGVjdXRvcj1Ob25lXHJcbik6XHJcbiAgICAiIiJBc3luYyBtZXRob2QgdG8gb3BlbiBhIHRlbXBvcmFyeSBkaXJlY3Rvcnkgd2l0aCBhc3luYyBpbnRlcmZhY2UiIiJcclxuICAgIGlmIGxvb3AgaXMgTm9uZTpcclxuICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcblxyXG4gICAgY2IgPSBwYXJ0aWFsKHN5bmNUZW1wb3JhcnlEaXJlY3RvcnksIHN1ZmZpeCwgcHJlZml4LCBkaXIpXHJcbiAgICBmID0gYXdhaXQgbG9vcC5ydW5faW5fZXhlY3V0b3IoZXhlY3V0b3IsIGNiKVxyXG5cclxuICAgIHJldHVybiBBc3luY1RlbXBvcmFyeURpcmVjdG9yeShmLCBsb29wPWxvb3AsIGV4ZWN1dG9yPWV4ZWN1dG9yKVxyXG5cclxuXHJcbmNsYXNzIEFpb2ZpbGVzQ29udGV4dE1hbmFnZXJUZW1wRGlyKEFpb2ZpbGVzQ29udGV4dE1hbmFnZXIpOlxyXG4gICAgIiIiV2l0aCByZXR1cm5zIHRoZSBkaXJlY3RvcnkgbG9jYXRpb24sIG5vdCB0aGUgb2JqZWN0IChtYXRjaGluZyBzeW5jIGxpYikiIiJcclxuXHJcbiAgICBhc3luYyBkZWYgX19hZW50ZXJfXyhzZWxmKTpcclxuICAgICAgICBzZWxmLl9vYmogPSBhd2FpdCBzZWxmLl9jb3JvXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29iai5uYW1lXHJcblxyXG5cclxuQHNpbmdsZWRpc3BhdGNoXHJcbmRlZiB3cmFwKGJhc2VfaW9fb2JqLCBmaWxlLCAqLCBsb29wPU5vbmUsIGV4ZWN1dG9yPU5vbmUpOlxyXG4gICAgIiIiV3JhcCB0aGUgb2JqZWN0IHdpdGggaW50ZXJmYWNlIGJhc2VkIG9uIHR5cGUgb2YgdW5kZXJseWluZyBJTyIiIlxyXG4gICAgcmFpc2UgVHlwZUVycm9yKCJVbnN1cHBvcnRlZCBJTyB0eXBlOiB7fSIuZm9ybWF0KGJhc2VfaW9fb2JqKSlcclxuXHJcblxyXG5Ad3JhcC5yZWdpc3RlcihUZXh0SU9CYXNlKVxyXG5kZWYgXyhiYXNlX2lvX29iaiwgZmlsZSwgKiwgbG9vcD1Ob25lLCBleGVjdXRvcj1Ob25lKTpcclxuICAgIHJldHVybiBBc3luY1RleHRJT1dyYXBwZXIoZmlsZSwgbG9vcD1sb29wLCBleGVjdXRvcj1leGVjdXRvcilcclxuXHJcblxyXG5Ad3JhcC5yZWdpc3RlcihCdWZmZXJlZFdyaXRlcilcclxuZGVmIF8oYmFzZV9pb19vYmosIGZpbGUsICosIGxvb3A9Tm9uZSwgZXhlY3V0b3I9Tm9uZSk6XHJcbiAgICByZXR1cm4gQXN5bmNCdWZmZXJlZElPQmFzZShmaWxlLCBsb29wPWxvb3AsIGV4ZWN1dG9yPWV4ZWN1dG9yKVxyXG5cclxuXHJcbkB3cmFwLnJlZ2lzdGVyKEJ1ZmZlcmVkUmVhZGVyKVxyXG5Ad3JhcC5yZWdpc3RlcihCdWZmZXJlZFJhbmRvbSlcclxuZGVmIF8oYmFzZV9pb19vYmosIGZpbGUsICosIGxvb3A9Tm9uZSwgZXhlY3V0b3I9Tm9uZSk6XHJcbiAgICByZXR1cm4gQXN5bmNCdWZmZXJlZFJlYWRlcihmaWxlLCBsb29wPWxvb3AsIGV4ZWN1dG9yPWV4ZWN1dG9yKVxyXG5cclxuXHJcbkB3cmFwLnJlZ2lzdGVyKEZpbGVJTylcclxuZGVmIF8oYmFzZV9pb19vYmosIGZpbGUsICosIGxvb3A9Tm9uZSwgZXhlY3V0b3I9Tm9uZSk6XHJcbiAgICByZXR1cm4gQXN5bmNGaWxlSU8oZmlsZSwgbG9vcD1sb29wLCBleGVjdXRvcj1leGVjdXRvcilcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2ZpbGVzL3RlbXBmaWxlL3RlbXB0eXBlcy5weScsIGInIiIiQXN5bmMgd3JhcHBlcnMgZm9yIHNwb29sZWQgdGVtcCBmaWxlcyBhbmQgdGVtcCBkaXJlY3Rvcnkgb2JqZWN0cyIiIlxyXG5cclxuIyBJbXBvcnRzXHJcbmltcG9ydCBhc3luY2lvXHJcbmZyb20gdHlwZXMgaW1wb3J0IGNvcm91dGluZVxyXG5cclxuZnJvbSAuLmJhc2UgaW1wb3J0IEFzeW5jQmFzZVxyXG5mcm9tIC4udGhyZWFkcG9vbC51dGlscyBpbXBvcnQgKFxyXG4gICAgZGVsZWdhdGVfdG9fZXhlY3V0b3IsXHJcbiAgICBwcm94eV9wcm9wZXJ0eV9kaXJlY3RseSxcclxuICAgIGNvbmRfZGVsZWdhdGVfdG9fZXhlY3V0b3IsXHJcbilcclxuZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHBhcnRpYWxcclxuXHJcblxyXG5AZGVsZWdhdGVfdG9fZXhlY3V0b3IoImZpbGVubyIsICJyb2xsb3ZlciIpXHJcbkBjb25kX2RlbGVnYXRlX3RvX2V4ZWN1dG9yKFxyXG4gICAgImNsb3NlIixcclxuICAgICJmbHVzaCIsXHJcbiAgICAiaXNhdHR5IixcclxuICAgICJuZXdsaW5lcyIsXHJcbiAgICAicmVhZCIsXHJcbiAgICAicmVhZGxpbmUiLFxyXG4gICAgInJlYWRsaW5lcyIsXHJcbiAgICAic2VlayIsXHJcbiAgICAidGVsbCIsXHJcbiAgICAidHJ1bmNhdGUiLFxyXG4pXHJcbkBwcm94eV9wcm9wZXJ0eV9kaXJlY3RseSgiY2xvc2VkIiwgImVuY29kaW5nIiwgIm1vZGUiLCAibmFtZSIsICJzb2Z0c3BhY2UiKVxyXG5jbGFzcyBBc3luY1Nwb29sZWRUZW1wb3JhcnlGaWxlKEFzeW5jQmFzZSk6XHJcbiAgICAiIiJBc3luYyB3cmFwcGVyIGZvciBTcG9vbGVkVGVtcG9yYXJ5RmlsZSBjbGFzcyIiIlxyXG5cclxuICAgIGFzeW5jIGRlZiBfY2hlY2soc2VsZik6XHJcbiAgICAgICAgaWYgc2VsZi5fZmlsZS5fcm9sbGVkOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBtYXhfc2l6ZSA9IHNlbGYuX2ZpbGUuX21heF9zaXplXHJcbiAgICAgICAgaWYgbWF4X3NpemUgYW5kIHNlbGYuX2ZpbGUudGVsbCgpID4gbWF4X3NpemU6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYucm9sbG92ZXIoKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZShzZWxmLCBzKTpcclxuICAgICAgICAiIiJJbXBsZW1lbnRhdGlvbiB0byBhbnRpY2lwYXRlIHJvbGxvdmVyIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fZmlsZS5fcm9sbGVkOlxyXG4gICAgICAgICAgICBjYiA9IHBhcnRpYWwoc2VsZi5fZmlsZS53cml0ZSwgcylcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX2xvb3AucnVuX2luX2V4ZWN1dG9yKHNlbGYuX2V4ZWN1dG9yLCBjYilcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBmaWxlID0gc2VsZi5fZmlsZS5fZmlsZSAgIyByZWZlcmVuY2UgdW5kZXJseWluZyBiYXNlIElPIG9iamVjdFxyXG4gICAgICAgICAgICBydiA9IGZpbGUud3JpdGUocylcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fY2hlY2soKVxyXG4gICAgICAgICAgICByZXR1cm4gcnZcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGVsaW5lcyhzZWxmLCBpdGVyYWJsZSk6XHJcbiAgICAgICAgIiIiSW1wbGVtZW50YXRpb24gdG8gYW50aWNpcGF0ZSByb2xsb3ZlciIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2ZpbGUuX3JvbGxlZDpcclxuICAgICAgICAgICAgY2IgPSBwYXJ0aWFsKHNlbGYuX2ZpbGUud3JpdGVsaW5lcywgaXRlcmFibGUpXHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9sb29wLnJ1bl9pbl9leGVjdXRvcihzZWxmLl9leGVjdXRvciwgY2IpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgZmlsZSA9IHNlbGYuX2ZpbGUuX2ZpbGUgICMgcmVmZXJlbmNlIHVuZGVybHlpbmcgYmFzZSBJTyBvYmplY3RcclxuICAgICAgICAgICAgcnYgPSBmaWxlLndyaXRlbGluZXMoaXRlcmFibGUpXHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX2NoZWNrKClcclxuICAgICAgICAgICAgcmV0dXJuIHJ2XHJcblxyXG5cclxuQGRlbGVnYXRlX3RvX2V4ZWN1dG9yKCJjbGVhbnVwIilcclxuQHByb3h5X3Byb3BlcnR5X2RpcmVjdGx5KCJuYW1lIilcclxuY2xhc3MgQXN5bmNUZW1wb3JhcnlEaXJlY3Rvcnk6XHJcbiAgICAiIiJBc3luYyB3cmFwcGVyIGZvciBUZW1wb3JhcnlEaXJlY3RvcnkgY2xhc3MiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZmlsZSwgbG9vcCwgZXhlY3V0b3IpOlxyXG4gICAgICAgIHNlbGYuX2ZpbGUgPSBmaWxlXHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3BcclxuICAgICAgICBzZWxmLl9leGVjdXRvciA9IGV4ZWN1dG9yXHJcblxyXG4gICAgYXN5bmMgZGVmIGNsb3NlKHNlbGYpOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuY2xlYW51cCgpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9maWxlcy9vcy5weScsIGInIiIiQXN5bmMgZXhlY3V0b3IgdmVyc2lvbnMgb2YgZmlsZSBmdW5jdGlvbnMgZnJvbSB0aGUgb3MgbW9kdWxlLiIiIlxuaW1wb3J0IGFzeW5jaW9cbmZyb20gZnVuY3Rvb2xzIGltcG9ydCBwYXJ0aWFsLCB3cmFwc1xuaW1wb3J0IG9zXG5cblxuZGVmIHdyYXAoZnVuYyk6XG4gICAgQHdyYXBzKGZ1bmMpXG4gICAgYXN5bmMgZGVmIHJ1bigqYXJncywgbG9vcD1Ob25lLCBleGVjdXRvcj1Ob25lLCAqKmt3YXJncyk6XG4gICAgICAgIGlmIGxvb3AgaXMgTm9uZTpcbiAgICAgICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcbiAgICAgICAgcGZ1bmMgPSBwYXJ0aWFsKGZ1bmMsICphcmdzLCAqKmt3YXJncylcbiAgICAgICAgcmV0dXJuIGF3YWl0IGxvb3AucnVuX2luX2V4ZWN1dG9yKGV4ZWN1dG9yLCBwZnVuYylcblxuICAgIHJldHVybiBydW5cblxuXG5mcm9tIC4gaW1wb3J0IG9zcGF0aCBhcyBwYXRoXG5cblxuc3RhdCA9IHdyYXAob3Muc3RhdClcbnJlbmFtZSA9IHdyYXAob3MucmVuYW1lKVxucmVwbGFjZSA9IHdyYXAob3MucmVwbGFjZSlcbnJlbW92ZSA9IHdyYXAob3MucmVtb3ZlKVxubWtkaXIgPSB3cmFwKG9zLm1rZGlyKVxubWFrZWRpcnMgPSB3cmFwKG9zLm1ha2VkaXJzKVxucm1kaXIgPSB3cmFwKG9zLnJtZGlyKVxucmVtb3ZlZGlycyA9IHdyYXAob3MucmVtb3ZlZGlycylcblxuaWYgaGFzYXR0cihvcywgInNlbmRmaWxlIik6XG4gICAgc2VuZGZpbGUgPSB3cmFwKG9zLnNlbmRmaWxlKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2ZpbGVzL29zcGF0aC5weScsIGInIiIiQXN5bmMgZXhlY3V0b3IgdmVyc2lvbnMgb2YgZmlsZSBmdW5jdGlvbnMgZnJvbSB0aGUgb3MucGF0aCBtb2R1bGUuIiIiXG5cbmZyb20gLm9zIGltcG9ydCB3cmFwXG5mcm9tIG9zIGltcG9ydCBwYXRoXG5cbmV4aXN0cyA9IHdyYXAocGF0aC5leGlzdHMpXG5pc2ZpbGUgPSB3cmFwKHBhdGguaXNmaWxlKVxuaXNkaXIgPSB3cmFwKHBhdGguaXNkaXIpXG5nZXRzaXplID0gd3JhcChwYXRoLmdldHNpemUpXG5nZXRtdGltZSA9IHdyYXAocGF0aC5nZXRtdGltZSlcbmdldGF0aW1lID0gd3JhcChwYXRoLmdldGF0aW1lKVxuZ2V0Y3RpbWUgPSB3cmFwKHBhdGguZ2V0Y3RpbWUpXG5zYW1lZmlsZSA9IHdyYXAocGF0aC5zYW1lZmlsZSlcbnNhbWVvcGVuZmlsZSA9IHdyYXAocGF0aC5zYW1lb3BlbmZpbGUpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnbG9nZ2VyLnB5JywgYidmcm9tIG9zLnBhdGggaW1wb3J0IGpvaW5cclxuZnJvbSBhaW9maWxlcyBpbXBvcnQgb3BlbiBhcyBhc3luY19vcGVuXHJcbmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lXHJcbmZyb20gYXN5bmNpbyBpbXBvcnQgU2VtYXBob3JlXHJcblxyXG5cclxuXHJcbmNsYXNzIExvZ2dlcigpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGxvZ19wYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5wYXRoID0gam9pbihsb2dfcGF0aCwgXCd3b3JrX2xvZ3MudHh0XCcpXHJcbiAgICAgICAgc2VsZi5zZW0gPSBTZW1hcGhvcmUoMSlcclxuXHJcbiAgICBhc3luYyBkZWYgcHJpbnQoc2VsZiwgdGV4dCkgLT4gTm9uZTpcclxuICAgICAgICBhc3luYyB3aXRoIHNlbGYuc2VtOlxyXG4gICAgICAgICAgICBhc3luYyB3aXRoIGFzeW5jX29wZW4oc2VsZi5wYXRoLCBcJ2FcJywgZW5jb2Rpbmc9XCd1dGY4XCcpIGFzIGY6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBmLndyaXRlKGZcJ3t0ZXh0fVxcblwnKVxyXG5cclxuICAgIGFzeW5jIGRlZiBsb2coc2VsZiwgdGV4dCkgLT4gTm9uZTpcclxuICAgICAgICBub3cgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJUg6JU06JVMiKVxyXG4gICAgICAgIGF3YWl0IHNlbGYucHJpbnQoZlwne25vd30gfCB7dGV4dH1cJylcclxuXHJcbiAgICBkZWYgc3luY19wcmludChzZWxmLCB0ZXh0KSAtPiBOb25lOlxyXG4gICAgICAgIHdpdGggb3BlbihzZWxmLnBhdGgsIFwnYVwnLCBlbmNvZGluZz1cJ3V0ZjhcJykgYXMgZjpcclxuICAgICAgICAgICAgZi53cml0ZShmXCd7dGV4dH1cXG5cJylcclxuXHJcbiAgICBkZWYgc3luY19sb2coc2VsZiwgdGV4dCkgLT4gTm9uZTpcclxuICAgICAgICBub3cgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJUg6JU06JVMiKVxyXG4gICAgICAgIHNlbGYuc3luY19wcmludChmXCd7bm93fSB8IHt0ZXh0fVwnKScpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjb25maWcucHknLCBiImZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcywgZmllbGRcclxuZnJvbSBhaW9odHRwIGltcG9ydCBDbGllbnRTZXNzaW9uXHJcbmZyb20gbG9nZ2VyIGltcG9ydCBMb2dnZXJcclxuXHJcblxyXG5AZGF0YWNsYXNzXHJcbmNsYXNzIENvbmZpZzpcclxuICAgIGNsaWVudF9pZDogc3RyXHJcbiAgICBob3N0OiBzdHJcclxuICAgIGxvZ19wYXRoOiBzdHJcclxuICAgIGxvZ2dlcjogTG9nZ2VyXHJcbiAgICBzZXNzaW9uOiBDbGllbnRTZXNzaW9uXHJcbiAgICB0YWc6IHN0ciA9IGZpZWxkKGRlZmF1bHQ9J3Rlc3QnKVxyXG4gICAgYnJvd3Nlcl9wYXNzd29yZHM6IGJvb2wgPSBmaWVsZChkZWZhdWx0PVRydWUpXHJcbiAgICBicm93c2VyX2Nvb2tpZXM6IGJvb2wgPSBmaWVsZChkZWZhdWx0PVRydWUpIikKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvX19pbml0X18ucHknLCBiJ19fdmVyc2lvbl9fID0gIjMuOC4xIlxyXG5cclxuZnJvbSB0eXBpbmcgaW1wb3J0IFR1cGxlXHJcblxyXG5mcm9tIC4gaW1wb3J0IGhkcnMgYXMgaGRyc1xyXG5mcm9tIC5jbGllbnQgaW1wb3J0IChcclxuICAgIEJhc2VDb25uZWN0b3IgYXMgQmFzZUNvbm5lY3RvcixcclxuICAgIENsaWVudENvbm5lY3Rpb25FcnJvciBhcyBDbGllbnRDb25uZWN0aW9uRXJyb3IsXHJcbiAgICBDbGllbnRDb25uZWN0b3JDZXJ0aWZpY2F0ZUVycm9yIGFzIENsaWVudENvbm5lY3RvckNlcnRpZmljYXRlRXJyb3IsXHJcbiAgICBDbGllbnRDb25uZWN0b3JFcnJvciBhcyBDbGllbnRDb25uZWN0b3JFcnJvcixcclxuICAgIENsaWVudENvbm5lY3RvclNTTEVycm9yIGFzIENsaWVudENvbm5lY3RvclNTTEVycm9yLFxyXG4gICAgQ2xpZW50RXJyb3IgYXMgQ2xpZW50RXJyb3IsXHJcbiAgICBDbGllbnRIdHRwUHJveHlFcnJvciBhcyBDbGllbnRIdHRwUHJveHlFcnJvcixcclxuICAgIENsaWVudE9TRXJyb3IgYXMgQ2xpZW50T1NFcnJvcixcclxuICAgIENsaWVudFBheWxvYWRFcnJvciBhcyBDbGllbnRQYXlsb2FkRXJyb3IsXHJcbiAgICBDbGllbnRQcm94eUNvbm5lY3Rpb25FcnJvciBhcyBDbGllbnRQcm94eUNvbm5lY3Rpb25FcnJvcixcclxuICAgIENsaWVudFJlcXVlc3QgYXMgQ2xpZW50UmVxdWVzdCxcclxuICAgIENsaWVudFJlc3BvbnNlIGFzIENsaWVudFJlc3BvbnNlLFxyXG4gICAgQ2xpZW50UmVzcG9uc2VFcnJvciBhcyBDbGllbnRSZXNwb25zZUVycm9yLFxyXG4gICAgQ2xpZW50U2Vzc2lvbiBhcyBDbGllbnRTZXNzaW9uLFxyXG4gICAgQ2xpZW50U1NMRXJyb3IgYXMgQ2xpZW50U1NMRXJyb3IsXHJcbiAgICBDbGllbnRUaW1lb3V0IGFzIENsaWVudFRpbWVvdXQsXHJcbiAgICBDbGllbnRXZWJTb2NrZXRSZXNwb25zZSBhcyBDbGllbnRXZWJTb2NrZXRSZXNwb25zZSxcclxuICAgIENvbnRlbnRUeXBlRXJyb3IgYXMgQ29udGVudFR5cGVFcnJvcixcclxuICAgIEZpbmdlcnByaW50IGFzIEZpbmdlcnByaW50LFxyXG4gICAgSW52YWxpZFVSTCBhcyBJbnZhbGlkVVJMLFxyXG4gICAgTmFtZWRQaXBlQ29ubmVjdG9yIGFzIE5hbWVkUGlwZUNvbm5lY3RvcixcclxuICAgIFJlcXVlc3RJbmZvIGFzIFJlcXVlc3RJbmZvLFxyXG4gICAgU2VydmVyQ29ubmVjdGlvbkVycm9yIGFzIFNlcnZlckNvbm5lY3Rpb25FcnJvcixcclxuICAgIFNlcnZlckRpc2Nvbm5lY3RlZEVycm9yIGFzIFNlcnZlckRpc2Nvbm5lY3RlZEVycm9yLFxyXG4gICAgU2VydmVyRmluZ2VycHJpbnRNaXNtYXRjaCBhcyBTZXJ2ZXJGaW5nZXJwcmludE1pc21hdGNoLFxyXG4gICAgU2VydmVyVGltZW91dEVycm9yIGFzIFNlcnZlclRpbWVvdXRFcnJvcixcclxuICAgIFRDUENvbm5lY3RvciBhcyBUQ1BDb25uZWN0b3IsXHJcbiAgICBUb29NYW55UmVkaXJlY3RzIGFzIFRvb01hbnlSZWRpcmVjdHMsXHJcbiAgICBVbml4Q29ubmVjdG9yIGFzIFVuaXhDb25uZWN0b3IsXHJcbiAgICBXU1NlcnZlckhhbmRzaGFrZUVycm9yIGFzIFdTU2VydmVySGFuZHNoYWtlRXJyb3IsXHJcbiAgICByZXF1ZXN0IGFzIHJlcXVlc3QsXHJcbilcclxuZnJvbSAuY29va2llamFyIGltcG9ydCBDb29raWVKYXIgYXMgQ29va2llSmFyLCBEdW1teUNvb2tpZUphciBhcyBEdW1teUNvb2tpZUphclxyXG5mcm9tIC5mb3JtZGF0YSBpbXBvcnQgRm9ybURhdGEgYXMgRm9ybURhdGFcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgQmFzaWNBdXRoLCBDaGFpbk1hcFByb3h5LCBFVGFnXHJcbmZyb20gLmh0dHAgaW1wb3J0IChcclxuICAgIEh0dHBWZXJzaW9uIGFzIEh0dHBWZXJzaW9uLFxyXG4gICAgSHR0cFZlcnNpb24xMCBhcyBIdHRwVmVyc2lvbjEwLFxyXG4gICAgSHR0cFZlcnNpb24xMSBhcyBIdHRwVmVyc2lvbjExLFxyXG4gICAgV2ViU29ja2V0RXJyb3IgYXMgV2ViU29ja2V0RXJyb3IsXHJcbiAgICBXU0Nsb3NlQ29kZSBhcyBXU0Nsb3NlQ29kZSxcclxuICAgIFdTTWVzc2FnZSBhcyBXU01lc3NhZ2UsXHJcbiAgICBXU01zZ1R5cGUgYXMgV1NNc2dUeXBlLFxyXG4pXHJcbmZyb20gLm11bHRpcGFydCBpbXBvcnQgKFxyXG4gICAgQmFkQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyIGFzIEJhZENvbnRlbnREaXNwb3NpdGlvbkhlYWRlcixcclxuICAgIEJhZENvbnRlbnREaXNwb3NpdGlvblBhcmFtIGFzIEJhZENvbnRlbnREaXNwb3NpdGlvblBhcmFtLFxyXG4gICAgQm9keVBhcnRSZWFkZXIgYXMgQm9keVBhcnRSZWFkZXIsXHJcbiAgICBNdWx0aXBhcnRSZWFkZXIgYXMgTXVsdGlwYXJ0UmVhZGVyLFxyXG4gICAgTXVsdGlwYXJ0V3JpdGVyIGFzIE11bHRpcGFydFdyaXRlcixcclxuICAgIGNvbnRlbnRfZGlzcG9zaXRpb25fZmlsZW5hbWUgYXMgY29udGVudF9kaXNwb3NpdGlvbl9maWxlbmFtZSxcclxuICAgIHBhcnNlX2NvbnRlbnRfZGlzcG9zaXRpb24gYXMgcGFyc2VfY29udGVudF9kaXNwb3NpdGlvbixcclxuKVxyXG5mcm9tIC5wYXlsb2FkIGltcG9ydCAoXHJcbiAgICBQQVlMT0FEX1JFR0lTVFJZIGFzIFBBWUxPQURfUkVHSVNUUlksXHJcbiAgICBBc3luY0l0ZXJhYmxlUGF5bG9hZCBhcyBBc3luY0l0ZXJhYmxlUGF5bG9hZCxcclxuICAgIEJ1ZmZlcmVkUmVhZGVyUGF5bG9hZCBhcyBCdWZmZXJlZFJlYWRlclBheWxvYWQsXHJcbiAgICBCeXRlc0lPUGF5bG9hZCBhcyBCeXRlc0lPUGF5bG9hZCxcclxuICAgIEJ5dGVzUGF5bG9hZCBhcyBCeXRlc1BheWxvYWQsXHJcbiAgICBJT0Jhc2VQYXlsb2FkIGFzIElPQmFzZVBheWxvYWQsXHJcbiAgICBKc29uUGF5bG9hZCBhcyBKc29uUGF5bG9hZCxcclxuICAgIFBheWxvYWQgYXMgUGF5bG9hZCxcclxuICAgIFN0cmluZ0lPUGF5bG9hZCBhcyBTdHJpbmdJT1BheWxvYWQsXHJcbiAgICBTdHJpbmdQYXlsb2FkIGFzIFN0cmluZ1BheWxvYWQsXHJcbiAgICBUZXh0SU9QYXlsb2FkIGFzIFRleHRJT1BheWxvYWQsXHJcbiAgICBnZXRfcGF5bG9hZCBhcyBnZXRfcGF5bG9hZCxcclxuICAgIHBheWxvYWRfdHlwZSBhcyBwYXlsb2FkX3R5cGUsXHJcbilcclxuZnJvbSAucGF5bG9hZF9zdHJlYW1lciBpbXBvcnQgc3RyZWFtZXIgYXMgc3RyZWFtZXJcclxuZnJvbSAucmVzb2x2ZXIgaW1wb3J0IChcclxuICAgIEFzeW5jUmVzb2x2ZXIgYXMgQXN5bmNSZXNvbHZlcixcclxuICAgIERlZmF1bHRSZXNvbHZlciBhcyBEZWZhdWx0UmVzb2x2ZXIsXHJcbiAgICBUaHJlYWRlZFJlc29sdmVyIGFzIFRocmVhZGVkUmVzb2x2ZXIsXHJcbilcclxuZnJvbSAuc3RyZWFtcyBpbXBvcnQgKFxyXG4gICAgRU1QVFlfUEFZTE9BRCBhcyBFTVBUWV9QQVlMT0FELFxyXG4gICAgRGF0YVF1ZXVlIGFzIERhdGFRdWV1ZSxcclxuICAgIEVvZlN0cmVhbSBhcyBFb2ZTdHJlYW0sXHJcbiAgICBGbG93Q29udHJvbERhdGFRdWV1ZSBhcyBGbG93Q29udHJvbERhdGFRdWV1ZSxcclxuICAgIFN0cmVhbVJlYWRlciBhcyBTdHJlYW1SZWFkZXIsXHJcbilcclxuZnJvbSAudHJhY2luZyBpbXBvcnQgKFxyXG4gICAgVHJhY2VDb25maWcgYXMgVHJhY2VDb25maWcsXHJcbiAgICBUcmFjZUNvbm5lY3Rpb25DcmVhdGVFbmRQYXJhbXMgYXMgVHJhY2VDb25uZWN0aW9uQ3JlYXRlRW5kUGFyYW1zLFxyXG4gICAgVHJhY2VDb25uZWN0aW9uQ3JlYXRlU3RhcnRQYXJhbXMgYXMgVHJhY2VDb25uZWN0aW9uQ3JlYXRlU3RhcnRQYXJhbXMsXHJcbiAgICBUcmFjZUNvbm5lY3Rpb25RdWV1ZWRFbmRQYXJhbXMgYXMgVHJhY2VDb25uZWN0aW9uUXVldWVkRW5kUGFyYW1zLFxyXG4gICAgVHJhY2VDb25uZWN0aW9uUXVldWVkU3RhcnRQYXJhbXMgYXMgVHJhY2VDb25uZWN0aW9uUXVldWVkU3RhcnRQYXJhbXMsXHJcbiAgICBUcmFjZUNvbm5lY3Rpb25SZXVzZWNvbm5QYXJhbXMgYXMgVHJhY2VDb25uZWN0aW9uUmV1c2Vjb25uUGFyYW1zLFxyXG4gICAgVHJhY2VEbnNDYWNoZUhpdFBhcmFtcyBhcyBUcmFjZURuc0NhY2hlSGl0UGFyYW1zLFxyXG4gICAgVHJhY2VEbnNDYWNoZU1pc3NQYXJhbXMgYXMgVHJhY2VEbnNDYWNoZU1pc3NQYXJhbXMsXHJcbiAgICBUcmFjZURuc1Jlc29sdmVIb3N0RW5kUGFyYW1zIGFzIFRyYWNlRG5zUmVzb2x2ZUhvc3RFbmRQYXJhbXMsXHJcbiAgICBUcmFjZURuc1Jlc29sdmVIb3N0U3RhcnRQYXJhbXMgYXMgVHJhY2VEbnNSZXNvbHZlSG9zdFN0YXJ0UGFyYW1zLFxyXG4gICAgVHJhY2VSZXF1ZXN0Q2h1bmtTZW50UGFyYW1zIGFzIFRyYWNlUmVxdWVzdENodW5rU2VudFBhcmFtcyxcclxuICAgIFRyYWNlUmVxdWVzdEVuZFBhcmFtcyBhcyBUcmFjZVJlcXVlc3RFbmRQYXJhbXMsXHJcbiAgICBUcmFjZVJlcXVlc3RFeGNlcHRpb25QYXJhbXMgYXMgVHJhY2VSZXF1ZXN0RXhjZXB0aW9uUGFyYW1zLFxyXG4gICAgVHJhY2VSZXF1ZXN0UmVkaXJlY3RQYXJhbXMgYXMgVHJhY2VSZXF1ZXN0UmVkaXJlY3RQYXJhbXMsXHJcbiAgICBUcmFjZVJlcXVlc3RTdGFydFBhcmFtcyBhcyBUcmFjZVJlcXVlc3RTdGFydFBhcmFtcyxcclxuICAgIFRyYWNlUmVzcG9uc2VDaHVua1JlY2VpdmVkUGFyYW1zIGFzIFRyYWNlUmVzcG9uc2VDaHVua1JlY2VpdmVkUGFyYW1zLFxyXG4pXHJcblxyXG5fX2FsbF9fOiBUdXBsZVtzdHIsIC4uLl0gPSAoXHJcbiAgICAiaGRycyIsXHJcbiAgICAjIGNsaWVudFxyXG4gICAgIkJhc2VDb25uZWN0b3IiLFxyXG4gICAgIkNsaWVudENvbm5lY3Rpb25FcnJvciIsXHJcbiAgICAiQ2xpZW50Q29ubmVjdG9yQ2VydGlmaWNhdGVFcnJvciIsXHJcbiAgICAiQ2xpZW50Q29ubmVjdG9yRXJyb3IiLFxyXG4gICAgIkNsaWVudENvbm5lY3RvclNTTEVycm9yIixcclxuICAgICJDbGllbnRFcnJvciIsXHJcbiAgICAiQ2xpZW50SHR0cFByb3h5RXJyb3IiLFxyXG4gICAgIkNsaWVudE9TRXJyb3IiLFxyXG4gICAgIkNsaWVudFBheWxvYWRFcnJvciIsXHJcbiAgICAiQ2xpZW50UHJveHlDb25uZWN0aW9uRXJyb3IiLFxyXG4gICAgIkNsaWVudFJlc3BvbnNlIixcclxuICAgICJDbGllbnRSZXF1ZXN0IixcclxuICAgICJDbGllbnRSZXNwb25zZUVycm9yIixcclxuICAgICJDbGllbnRTU0xFcnJvciIsXHJcbiAgICAiQ2xpZW50U2Vzc2lvbiIsXHJcbiAgICAiQ2xpZW50VGltZW91dCIsXHJcbiAgICAiQ2xpZW50V2ViU29ja2V0UmVzcG9uc2UiLFxyXG4gICAgIkNvbnRlbnRUeXBlRXJyb3IiLFxyXG4gICAgIkZpbmdlcnByaW50IixcclxuICAgICJJbnZhbGlkVVJMIixcclxuICAgICJSZXF1ZXN0SW5mbyIsXHJcbiAgICAiU2VydmVyQ29ubmVjdGlvbkVycm9yIixcclxuICAgICJTZXJ2ZXJEaXNjb25uZWN0ZWRFcnJvciIsXHJcbiAgICAiU2VydmVyRmluZ2VycHJpbnRNaXNtYXRjaCIsXHJcbiAgICAiU2VydmVyVGltZW91dEVycm9yIixcclxuICAgICJUQ1BDb25uZWN0b3IiLFxyXG4gICAgIlRvb01hbnlSZWRpcmVjdHMiLFxyXG4gICAgIlVuaXhDb25uZWN0b3IiLFxyXG4gICAgIk5hbWVkUGlwZUNvbm5lY3RvciIsXHJcbiAgICAiV1NTZXJ2ZXJIYW5kc2hha2VFcnJvciIsXHJcbiAgICAicmVxdWVzdCIsXHJcbiAgICAjIGNvb2tpZWphclxyXG4gICAgIkNvb2tpZUphciIsXHJcbiAgICAiRHVtbXlDb29raWVKYXIiLFxyXG4gICAgIyBmb3JtZGF0YVxyXG4gICAgIkZvcm1EYXRhIixcclxuICAgICMgaGVscGVyc1xyXG4gICAgIkJhc2ljQXV0aCIsXHJcbiAgICAiQ2hhaW5NYXBQcm94eSIsXHJcbiAgICAiRVRhZyIsXHJcbiAgICAjIGh0dHBcclxuICAgICJIdHRwVmVyc2lvbiIsXHJcbiAgICAiSHR0cFZlcnNpb24xMCIsXHJcbiAgICAiSHR0cFZlcnNpb24xMSIsXHJcbiAgICAiV1NNc2dUeXBlIixcclxuICAgICJXU0Nsb3NlQ29kZSIsXHJcbiAgICAiV1NNZXNzYWdlIixcclxuICAgICJXZWJTb2NrZXRFcnJvciIsXHJcbiAgICAjIG11bHRpcGFydFxyXG4gICAgIkJhZENvbnRlbnREaXNwb3NpdGlvbkhlYWRlciIsXHJcbiAgICAiQmFkQ29udGVudERpc3Bvc2l0aW9uUGFyYW0iLFxyXG4gICAgIkJvZHlQYXJ0UmVhZGVyIixcclxuICAgICJNdWx0aXBhcnRSZWFkZXIiLFxyXG4gICAgIk11bHRpcGFydFdyaXRlciIsXHJcbiAgICAiY29udGVudF9kaXNwb3NpdGlvbl9maWxlbmFtZSIsXHJcbiAgICAicGFyc2VfY29udGVudF9kaXNwb3NpdGlvbiIsXHJcbiAgICAjIHBheWxvYWRcclxuICAgICJBc3luY0l0ZXJhYmxlUGF5bG9hZCIsXHJcbiAgICAiQnVmZmVyZWRSZWFkZXJQYXlsb2FkIixcclxuICAgICJCeXRlc0lPUGF5bG9hZCIsXHJcbiAgICAiQnl0ZXNQYXlsb2FkIixcclxuICAgICJJT0Jhc2VQYXlsb2FkIixcclxuICAgICJKc29uUGF5bG9hZCIsXHJcbiAgICAiUEFZTE9BRF9SRUdJU1RSWSIsXHJcbiAgICAiUGF5bG9hZCIsXHJcbiAgICAiU3RyaW5nSU9QYXlsb2FkIixcclxuICAgICJTdHJpbmdQYXlsb2FkIixcclxuICAgICJUZXh0SU9QYXlsb2FkIixcclxuICAgICJnZXRfcGF5bG9hZCIsXHJcbiAgICAicGF5bG9hZF90eXBlIixcclxuICAgICMgcGF5bG9hZF9zdHJlYW1lclxyXG4gICAgInN0cmVhbWVyIixcclxuICAgICMgcmVzb2x2ZXJcclxuICAgICJBc3luY1Jlc29sdmVyIixcclxuICAgICJEZWZhdWx0UmVzb2x2ZXIiLFxyXG4gICAgIlRocmVhZGVkUmVzb2x2ZXIiLFxyXG4gICAgIyBzdHJlYW1zXHJcbiAgICAiRGF0YVF1ZXVlIixcclxuICAgICJFTVBUWV9QQVlMT0FEIixcclxuICAgICJFb2ZTdHJlYW0iLFxyXG4gICAgIkZsb3dDb250cm9sRGF0YVF1ZXVlIixcclxuICAgICJTdHJlYW1SZWFkZXIiLFxyXG4gICAgIyB0cmFjaW5nXHJcbiAgICAiVHJhY2VDb25maWciLFxyXG4gICAgIlRyYWNlQ29ubmVjdGlvbkNyZWF0ZUVuZFBhcmFtcyIsXHJcbiAgICAiVHJhY2VDb25uZWN0aW9uQ3JlYXRlU3RhcnRQYXJhbXMiLFxyXG4gICAgIlRyYWNlQ29ubmVjdGlvblF1ZXVlZEVuZFBhcmFtcyIsXHJcbiAgICAiVHJhY2VDb25uZWN0aW9uUXVldWVkU3RhcnRQYXJhbXMiLFxyXG4gICAgIlRyYWNlQ29ubmVjdGlvblJldXNlY29ublBhcmFtcyIsXHJcbiAgICAiVHJhY2VEbnNDYWNoZUhpdFBhcmFtcyIsXHJcbiAgICAiVHJhY2VEbnNDYWNoZU1pc3NQYXJhbXMiLFxyXG4gICAgIlRyYWNlRG5zUmVzb2x2ZUhvc3RFbmRQYXJhbXMiLFxyXG4gICAgIlRyYWNlRG5zUmVzb2x2ZUhvc3RTdGFydFBhcmFtcyIsXHJcbiAgICAiVHJhY2VSZXF1ZXN0Q2h1bmtTZW50UGFyYW1zIixcclxuICAgICJUcmFjZVJlcXVlc3RFbmRQYXJhbXMiLFxyXG4gICAgIlRyYWNlUmVxdWVzdEV4Y2VwdGlvblBhcmFtcyIsXHJcbiAgICAiVHJhY2VSZXF1ZXN0UmVkaXJlY3RQYXJhbXMiLFxyXG4gICAgIlRyYWNlUmVxdWVzdFN0YXJ0UGFyYW1zIixcclxuICAgICJUcmFjZVJlc3BvbnNlQ2h1bmtSZWNlaXZlZFBhcmFtcyIsXHJcbilcclxuXHJcbnRyeTpcclxuICAgIGZyb20gLndvcmtlciBpbXBvcnQgR3VuaWNvcm5VVkxvb3BXZWJXb3JrZXIsIEd1bmljb3JuV2ViV29ya2VyXHJcblxyXG4gICAgX19hbGxfXyArPSAoIkd1bmljb3JuV2ViV29ya2VyIiwgIkd1bmljb3JuVVZMb29wV2ViV29ya2VyIilcclxuZXhjZXB0IEltcG9ydEVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBwYXNzXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2hkcnMucHknLCBiJyIiIkhUVFAgSGVhZGVycyBjb25zdGFudHMuIiIiXHJcblxyXG4jIEFmdGVyIGNoYW5naW5nIHRoZSBmaWxlIGNvbnRlbnQgY2FsbCAuL3Rvb2xzL2dlbi5weVxyXG4jIHRvIHJlZ2VuZXJhdGUgdGhlIGhlYWRlcnMgcGFyc2VyXHJcbmltcG9ydCBzeXNcclxuZnJvbSB0eXBpbmcgaW1wb3J0IFNldFxyXG5cclxuZnJvbSBtdWx0aWRpY3QgaW1wb3J0IGlzdHJcclxuXHJcbmlmIHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDgpOlxyXG4gICAgZnJvbSB0eXBpbmcgaW1wb3J0IEZpbmFsXHJcbmVsc2U6XHJcbiAgICBmcm9tIHR5cGluZ19leHRlbnNpb25zIGltcG9ydCBGaW5hbFxyXG5cclxuTUVUSF9BTlk6IEZpbmFsW3N0cl0gPSAiKiJcclxuTUVUSF9DT05ORUNUOiBGaW5hbFtzdHJdID0gIkNPTk5FQ1QiXHJcbk1FVEhfSEVBRDogRmluYWxbc3RyXSA9ICJIRUFEIlxyXG5NRVRIX0dFVDogRmluYWxbc3RyXSA9ICJHRVQiXHJcbk1FVEhfREVMRVRFOiBGaW5hbFtzdHJdID0gIkRFTEVURSJcclxuTUVUSF9PUFRJT05TOiBGaW5hbFtzdHJdID0gIk9QVElPTlMiXHJcbk1FVEhfUEFUQ0g6IEZpbmFsW3N0cl0gPSAiUEFUQ0giXHJcbk1FVEhfUE9TVDogRmluYWxbc3RyXSA9ICJQT1NUIlxyXG5NRVRIX1BVVDogRmluYWxbc3RyXSA9ICJQVVQiXHJcbk1FVEhfVFJBQ0U6IEZpbmFsW3N0cl0gPSAiVFJBQ0UiXHJcblxyXG5NRVRIX0FMTDogRmluYWxbU2V0W3N0cl1dID0ge1xyXG4gICAgTUVUSF9DT05ORUNULFxyXG4gICAgTUVUSF9IRUFELFxyXG4gICAgTUVUSF9HRVQsXHJcbiAgICBNRVRIX0RFTEVURSxcclxuICAgIE1FVEhfT1BUSU9OUyxcclxuICAgIE1FVEhfUEFUQ0gsXHJcbiAgICBNRVRIX1BPU1QsXHJcbiAgICBNRVRIX1BVVCxcclxuICAgIE1FVEhfVFJBQ0UsXHJcbn1cclxuXHJcbkFDQ0VQVDogRmluYWxbaXN0cl0gPSBpc3RyKCJBY2NlcHQiKVxyXG5BQ0NFUFRfQ0hBUlNFVDogRmluYWxbaXN0cl0gPSBpc3RyKCJBY2NlcHQtQ2hhcnNldCIpXHJcbkFDQ0VQVF9FTkNPRElORzogRmluYWxbaXN0cl0gPSBpc3RyKCJBY2NlcHQtRW5jb2RpbmciKVxyXG5BQ0NFUFRfTEFOR1VBR0U6IEZpbmFsW2lzdHJdID0gaXN0cigiQWNjZXB0LUxhbmd1YWdlIilcclxuQUNDRVBUX1JBTkdFUzogRmluYWxbaXN0cl0gPSBpc3RyKCJBY2NlcHQtUmFuZ2VzIilcclxuQUNDRVNTX0NPTlRST0xfTUFYX0FHRTogRmluYWxbaXN0cl0gPSBpc3RyKCJBY2Nlc3MtQ29udHJvbC1NYXgtQWdlIilcclxuQUNDRVNTX0NPTlRST0xfQUxMT1dfQ1JFREVOVElBTFM6IEZpbmFsW2lzdHJdID0gaXN0cigiQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMiKVxyXG5BQ0NFU1NfQ09OVFJPTF9BTExPV19IRUFERVJTOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMiKVxyXG5BQ0NFU1NfQ09OVFJPTF9BTExPV19NRVRIT0RTOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkFjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMiKVxyXG5BQ0NFU1NfQ09OVFJPTF9BTExPV19PUklHSU46IEZpbmFsW2lzdHJdID0gaXN0cigiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luIilcclxuQUNDRVNTX0NPTlRST0xfRVhQT1NFX0hFQURFUlM6IEZpbmFsW2lzdHJdID0gaXN0cigiQWNjZXNzLUNvbnRyb2wtRXhwb3NlLUhlYWRlcnMiKVxyXG5BQ0NFU1NfQ09OVFJPTF9SRVFVRVNUX0hFQURFUlM6IEZpbmFsW2lzdHJdID0gaXN0cigiQWNjZXNzLUNvbnRyb2wtUmVxdWVzdC1IZWFkZXJzIilcclxuQUNDRVNTX0NPTlRST0xfUkVRVUVTVF9NRVRIT0Q6IEZpbmFsW2lzdHJdID0gaXN0cigiQWNjZXNzLUNvbnRyb2wtUmVxdWVzdC1NZXRob2QiKVxyXG5BR0U6IEZpbmFsW2lzdHJdID0gaXN0cigiQWdlIilcclxuQUxMT1c6IEZpbmFsW2lzdHJdID0gaXN0cigiQWxsb3ciKVxyXG5BVVRIT1JJWkFUSU9OOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkF1dGhvcml6YXRpb24iKVxyXG5DQUNIRV9DT05UUk9MOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkNhY2hlLUNvbnRyb2wiKVxyXG5DT05ORUNUSU9OOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkNvbm5lY3Rpb24iKVxyXG5DT05URU5UX0RJU1BPU0lUSU9OOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkNvbnRlbnQtRGlzcG9zaXRpb24iKVxyXG5DT05URU5UX0VOQ09ESU5HOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkNvbnRlbnQtRW5jb2RpbmciKVxyXG5DT05URU5UX0xBTkdVQUdFOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkNvbnRlbnQtTGFuZ3VhZ2UiKVxyXG5DT05URU5UX0xFTkdUSDogRmluYWxbaXN0cl0gPSBpc3RyKCJDb250ZW50LUxlbmd0aCIpXHJcbkNPTlRFTlRfTE9DQVRJT046IEZpbmFsW2lzdHJdID0gaXN0cigiQ29udGVudC1Mb2NhdGlvbiIpXHJcbkNPTlRFTlRfTUQ1OiBGaW5hbFtpc3RyXSA9IGlzdHIoIkNvbnRlbnQtTUQ1IilcclxuQ09OVEVOVF9SQU5HRTogRmluYWxbaXN0cl0gPSBpc3RyKCJDb250ZW50LVJhbmdlIilcclxuQ09OVEVOVF9UUkFOU0ZFUl9FTkNPRElORzogRmluYWxbaXN0cl0gPSBpc3RyKCJDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nIilcclxuQ09OVEVOVF9UWVBFOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkNvbnRlbnQtVHlwZSIpXHJcbkNPT0tJRTogRmluYWxbaXN0cl0gPSBpc3RyKCJDb29raWUiKVxyXG5EQVRFOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkRhdGUiKVxyXG5ERVNUSU5BVElPTjogRmluYWxbaXN0cl0gPSBpc3RyKCJEZXN0aW5hdGlvbiIpXHJcbkRJR0VTVDogRmluYWxbaXN0cl0gPSBpc3RyKCJEaWdlc3QiKVxyXG5FVEFHOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkV0YWciKVxyXG5FWFBFQ1Q6IEZpbmFsW2lzdHJdID0gaXN0cigiRXhwZWN0IilcclxuRVhQSVJFUzogRmluYWxbaXN0cl0gPSBpc3RyKCJFeHBpcmVzIilcclxuRk9SV0FSREVEOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkZvcndhcmRlZCIpXHJcbkZST006IEZpbmFsW2lzdHJdID0gaXN0cigiRnJvbSIpXHJcbkhPU1Q6IEZpbmFsW2lzdHJdID0gaXN0cigiSG9zdCIpXHJcbklGX01BVENIOiBGaW5hbFtpc3RyXSA9IGlzdHIoIklmLU1hdGNoIilcclxuSUZfTU9ESUZJRURfU0lOQ0U6IEZpbmFsW2lzdHJdID0gaXN0cigiSWYtTW9kaWZpZWQtU2luY2UiKVxyXG5JRl9OT05FX01BVENIOiBGaW5hbFtpc3RyXSA9IGlzdHIoIklmLU5vbmUtTWF0Y2giKVxyXG5JRl9SQU5HRTogRmluYWxbaXN0cl0gPSBpc3RyKCJJZi1SYW5nZSIpXHJcbklGX1VOTU9ESUZJRURfU0lOQ0U6IEZpbmFsW2lzdHJdID0gaXN0cigiSWYtVW5tb2RpZmllZC1TaW5jZSIpXHJcbktFRVBfQUxJVkU6IEZpbmFsW2lzdHJdID0gaXN0cigiS2VlcC1BbGl2ZSIpXHJcbkxBU1RfRVZFTlRfSUQ6IEZpbmFsW2lzdHJdID0gaXN0cigiTGFzdC1FdmVudC1JRCIpXHJcbkxBU1RfTU9ESUZJRUQ6IEZpbmFsW2lzdHJdID0gaXN0cigiTGFzdC1Nb2RpZmllZCIpXHJcbkxJTks6IEZpbmFsW2lzdHJdID0gaXN0cigiTGluayIpXHJcbkxPQ0FUSU9OOiBGaW5hbFtpc3RyXSA9IGlzdHIoIkxvY2F0aW9uIilcclxuTUFYX0ZPUldBUkRTOiBGaW5hbFtpc3RyXSA9IGlzdHIoIk1heC1Gb3J3YXJkcyIpXHJcbk9SSUdJTjogRmluYWxbaXN0cl0gPSBpc3RyKCJPcmlnaW4iKVxyXG5QUkFHTUE6IEZpbmFsW2lzdHJdID0gaXN0cigiUHJhZ21hIilcclxuUFJPWFlfQVVUSEVOVElDQVRFOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlByb3h5LUF1dGhlbnRpY2F0ZSIpXHJcblBST1hZX0FVVEhPUklaQVRJT046IEZpbmFsW2lzdHJdID0gaXN0cigiUHJveHktQXV0aG9yaXphdGlvbiIpXHJcblJBTkdFOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlJhbmdlIilcclxuUkVGRVJFUjogRmluYWxbaXN0cl0gPSBpc3RyKCJSZWZlcmVyIilcclxuUkVUUllfQUZURVI6IEZpbmFsW2lzdHJdID0gaXN0cigiUmV0cnktQWZ0ZXIiKVxyXG5TRUNfV0VCU09DS0VUX0FDQ0VQVDogRmluYWxbaXN0cl0gPSBpc3RyKCJTZWMtV2ViU29ja2V0LUFjY2VwdCIpXHJcblNFQ19XRUJTT0NLRVRfVkVSU0lPTjogRmluYWxbaXN0cl0gPSBpc3RyKCJTZWMtV2ViU29ja2V0LVZlcnNpb24iKVxyXG5TRUNfV0VCU09DS0VUX1BST1RPQ09MOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlNlYy1XZWJTb2NrZXQtUHJvdG9jb2wiKVxyXG5TRUNfV0VCU09DS0VUX0VYVEVOU0lPTlM6IEZpbmFsW2lzdHJdID0gaXN0cigiU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zIilcclxuU0VDX1dFQlNPQ0tFVF9LRVk6IEZpbmFsW2lzdHJdID0gaXN0cigiU2VjLVdlYlNvY2tldC1LZXkiKVxyXG5TRUNfV0VCU09DS0VUX0tFWTE6IEZpbmFsW2lzdHJdID0gaXN0cigiU2VjLVdlYlNvY2tldC1LZXkxIilcclxuU0VSVkVSOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlNlcnZlciIpXHJcblNFVF9DT09LSUU6IEZpbmFsW2lzdHJdID0gaXN0cigiU2V0LUNvb2tpZSIpXHJcblRFOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlRFIilcclxuVFJBSUxFUjogRmluYWxbaXN0cl0gPSBpc3RyKCJUcmFpbGVyIilcclxuVFJBTlNGRVJfRU5DT0RJTkc6IEZpbmFsW2lzdHJdID0gaXN0cigiVHJhbnNmZXItRW5jb2RpbmciKVxyXG5VUEdSQURFOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlVwZ3JhZGUiKVxyXG5VUkk6IEZpbmFsW2lzdHJdID0gaXN0cigiVVJJIilcclxuVVNFUl9BR0VOVDogRmluYWxbaXN0cl0gPSBpc3RyKCJVc2VyLUFnZW50IilcclxuVkFSWTogRmluYWxbaXN0cl0gPSBpc3RyKCJWYXJ5IilcclxuVklBOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlZpYSIpXHJcbldBTlRfRElHRVNUOiBGaW5hbFtpc3RyXSA9IGlzdHIoIldhbnQtRGlnZXN0IilcclxuV0FSTklORzogRmluYWxbaXN0cl0gPSBpc3RyKCJXYXJuaW5nIilcclxuV1dXX0FVVEhFTlRJQ0FURTogRmluYWxbaXN0cl0gPSBpc3RyKCJXV1ctQXV0aGVudGljYXRlIilcclxuWF9GT1JXQVJERURfRk9SOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlgtRm9yd2FyZGVkLUZvciIpXHJcblhfRk9SV0FSREVEX0hPU1Q6IEZpbmFsW2lzdHJdID0gaXN0cigiWC1Gb3J3YXJkZWQtSG9zdCIpXHJcblhfRk9SV0FSREVEX1BST1RPOiBGaW5hbFtpc3RyXSA9IGlzdHIoIlgtRm9yd2FyZGVkLVByb3RvIilcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ211bHRpZGljdC9fX2luaXRfXy5weScsIGInIiIiTXVsdGlkaWN0IGltcGxlbWVudGF0aW9uLlxyXG5cclxuSFRUUCBIZWFkZXJzIGFuZCBVUkwgcXVlcnkgc3RyaW5nIHJlcXVpcmUgc3BlY2lmaWMgZGF0YSBzdHJ1Y3R1cmU6XHJcbm11bHRpZGljdC4gSXQgYmVoYXZlcyBtb3N0bHkgbGlrZSBhIGRpY3QgYnV0IGl0IGNhbiBoYXZlXHJcbnNldmVyYWwgdmFsdWVzIGZvciB0aGUgc2FtZSBrZXkuXHJcbiIiIlxyXG5cclxuZnJvbSAuX2FiYyBpbXBvcnQgTXVsdGlNYXBwaW5nLCBNdXRhYmxlTXVsdGlNYXBwaW5nXHJcbmZyb20gLl9jb21wYXQgaW1wb3J0IFVTRV9FWFRFTlNJT05TXHJcblxyXG5fX2FsbF9fID0gKFxyXG4gICAgIk11bHRpTWFwcGluZyIsXHJcbiAgICAiTXV0YWJsZU11bHRpTWFwcGluZyIsXHJcbiAgICAiTXVsdGlEaWN0UHJveHkiLFxyXG4gICAgIkNJTXVsdGlEaWN0UHJveHkiLFxyXG4gICAgIk11bHRpRGljdCIsXHJcbiAgICAiQ0lNdWx0aURpY3QiLFxyXG4gICAgInVwc3RyIixcclxuICAgICJpc3RyIixcclxuICAgICJnZXR2ZXJzaW9uIixcclxuKVxyXG5cclxuX192ZXJzaW9uX18gPSAiNi4wLjIiXHJcblxyXG5cclxudHJ5OlxyXG4gICAgaWYgbm90IFVTRV9FWFRFTlNJT05TOlxyXG4gICAgICAgIHJhaXNlIEltcG9ydEVycm9yXHJcbiAgICBmcm9tIC5fbXVsdGlkaWN0IGltcG9ydCAoXHJcbiAgICAgICAgQ0lNdWx0aURpY3QsXHJcbiAgICAgICAgQ0lNdWx0aURpY3RQcm94eSxcclxuICAgICAgICBNdWx0aURpY3QsXHJcbiAgICAgICAgTXVsdGlEaWN0UHJveHksXHJcbiAgICAgICAgZ2V0dmVyc2lvbixcclxuICAgICAgICBpc3RyLFxyXG4gICAgKVxyXG5leGNlcHQgSW1wb3J0RXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIGZyb20gLl9tdWx0aWRpY3RfcHkgaW1wb3J0IChcclxuICAgICAgICBDSU11bHRpRGljdCxcclxuICAgICAgICBDSU11bHRpRGljdFByb3h5LFxyXG4gICAgICAgIE11bHRpRGljdCxcclxuICAgICAgICBNdWx0aURpY3RQcm94eSxcclxuICAgICAgICBnZXR2ZXJzaW9uLFxyXG4gICAgICAgIGlzdHIsXHJcbiAgICApXHJcblxyXG5cclxudXBzdHIgPSBpc3RyXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdtdWx0aWRpY3QvX2FiYy5weScsIGInaW1wb3J0IGFiY1xyXG5pbXBvcnQgc3lzXHJcbmltcG9ydCB0eXBlc1xyXG5mcm9tIGNvbGxlY3Rpb25zLmFiYyBpbXBvcnQgTWFwcGluZywgTXV0YWJsZU1hcHBpbmdcclxuXHJcblxyXG5jbGFzcyBfVHlwaW5nTWV0YShhYmMuQUJDTWV0YSk6XHJcbiAgICAjIEEgZmFrZSBtZXRhY2xhc3MgdG8gc2F0aXNmeSB0eXBpbmcgZGVwcyBpbiBydW50aW1lXHJcbiAgICAjIGJhc2ljYWxseSBNdWx0aU1hcHBpbmdbc3RyXSBhbmQgb3RoZXIgZ2VuZXJpYy1saWtlIHR5cGUgaW5zdGFudGlhdGlvbnNcclxuICAgICMgYXJlIGVtdWxhdGVkLlxyXG4gICAgIyBOb3RlOiByZWFsIHR5cGUgaGludHMgYXJlIHByb3ZpZGVkIGJ5IF9faW5pdF9fLnB5aSBzdHViIGZpbGVcclxuICAgIGlmIHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDkpOlxyXG5cclxuICAgICAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5KTpcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVzLkdlbmVyaWNBbGlhcyhzZWxmLCBrZXkpXHJcblxyXG4gICAgZWxzZTpcclxuXHJcbiAgICAgICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleSk6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmXHJcblxyXG5cclxuY2xhc3MgTXVsdGlNYXBwaW5nKE1hcHBpbmcsIG1ldGFjbGFzcz1fVHlwaW5nTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZ2V0YWxsKHNlbGYsIGtleSwgZGVmYXVsdD1Ob25lKTpcclxuICAgICAgICByYWlzZSBLZXlFcnJvclxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBnZXRvbmUoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOlxyXG4gICAgICAgIHJhaXNlIEtleUVycm9yXHJcblxyXG5cclxuY2xhc3MgTXV0YWJsZU11bHRpTWFwcGluZyhNdWx0aU1hcHBpbmcsIE11dGFibGVNYXBwaW5nKTpcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBhZGQoc2VsZiwga2V5LCB2YWx1ZSk6XHJcbiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvclxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBleHRlbmQoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKTpcclxuICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHBvcG9uZShzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6XHJcbiAgICAgICAgcmFpc2UgS2V5RXJyb3JcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcG9wYWxsKHNlbGYsIGtleSwgZGVmYXVsdD1Ob25lKTpcclxuICAgICAgICByYWlzZSBLZXlFcnJvclxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnbXVsdGlkaWN0L19jb21wYXQucHknLCBiJ2ltcG9ydCBvc1xyXG5pbXBvcnQgcGxhdGZvcm1cclxuXHJcbk5PX0VYVEVOU0lPTlMgPSBib29sKG9zLmVudmlyb24uZ2V0KCJNVUxUSURJQ1RfTk9fRVhURU5TSU9OUyIpKVxyXG5cclxuUFlQWSA9IHBsYXRmb3JtLnB5dGhvbl9pbXBsZW1lbnRhdGlvbigpID09ICJQeVB5IlxyXG5cclxuVVNFX0VYVEVOU0lPTlMgPSBub3QgTk9fRVhURU5TSU9OUyBhbmQgbm90IFBZUFlcclxuXHJcbmlmIFVTRV9FWFRFTlNJT05TOlxyXG4gICAgdHJ5OlxyXG4gICAgICAgIGZyb20gLiBpbXBvcnQgX211bHRpZGljdCAgIyBub3FhXHJcbiAgICBleGNlcHQgSW1wb3J0RXJyb3I6XHJcbiAgICAgICAgVVNFX0VYVEVOU0lPTlMgPSBGYWxzZVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnbXVsdGlkaWN0L19tdWx0aWRpY3RfcHkucHknLCBiJ2ltcG9ydCBzeXNcclxuaW1wb3J0IHR5cGVzXHJcbmZyb20gYXJyYXkgaW1wb3J0IGFycmF5XHJcbmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IGFiY1xyXG5cclxuZnJvbSAuX2FiYyBpbXBvcnQgTXVsdGlNYXBwaW5nLCBNdXRhYmxlTXVsdGlNYXBwaW5nXHJcblxyXG5fbWFya2VyID0gb2JqZWN0KClcclxuXHJcbmlmIHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDkpOlxyXG4gICAgR2VuZXJpY0FsaWFzID0gdHlwZXMuR2VuZXJpY0FsaWFzXHJcbmVsc2U6XHJcbiAgICBkZWYgR2VuZXJpY0FsaWFzKGNscyk6XHJcbiAgICAgICAgcmV0dXJuIGNsc1xyXG5cclxuXHJcbmNsYXNzIGlzdHIoc3RyKTpcclxuXHJcbiAgICAiIiJDYXNlIGluc2Vuc2l0aXZlIHN0ci4iIiJcclxuXHJcbiAgICBfX2lzX2lzdHJfXyA9IFRydWVcclxuXHJcblxyXG51cHN0ciA9IGlzdHIgICMgZm9yIHJlbGF4aW5nIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgcHJvYmxlbXNcclxuXHJcblxyXG5kZWYgZ2V0dmVyc2lvbihtZCk6XHJcbiAgICBpZiBub3QgaXNpbnN0YW5jZShtZCwgX0Jhc2UpOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiUGFyYW1ldGVyIHNob3VsZCBiZSBtdWx0aWRpY3Qgb3IgcHJveHkiKVxyXG4gICAgcmV0dXJuIG1kLl9pbXBsLl92ZXJzaW9uXHJcblxyXG5cclxuX3ZlcnNpb24gPSBhcnJheSgiUSIsIFswXSlcclxuXHJcblxyXG5jbGFzcyBfSW1wbDpcclxuICAgIF9fc2xvdHNfXyA9ICgiX2l0ZW1zIiwgIl92ZXJzaW9uIilcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZik6XHJcbiAgICAgICAgc2VsZi5faXRlbXMgPSBbXVxyXG4gICAgICAgIHNlbGYuaW5jcl92ZXJzaW9uKClcclxuXHJcbiAgICBkZWYgaW5jcl92ZXJzaW9uKHNlbGYpOlxyXG4gICAgICAgIGdsb2JhbCBfdmVyc2lvblxyXG4gICAgICAgIHYgPSBfdmVyc2lvblxyXG4gICAgICAgIHZbMF0gKz0gMVxyXG4gICAgICAgIHNlbGYuX3ZlcnNpb24gPSB2WzBdXHJcblxyXG4gICAgaWYgc3lzLmltcGxlbWVudGF0aW9uLm5hbWUgIT0gInB5cHkiOlxyXG5cclxuICAgICAgICBkZWYgX19zaXplb2ZfXyhzZWxmKTpcclxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdC5fX3NpemVvZl9fKHNlbGYpICsgc3lzLmdldHNpemVvZihzZWxmLl9pdGVtcylcclxuXHJcblxyXG5jbGFzcyBfQmFzZTpcclxuICAgIGRlZiBfdGl0bGUoc2VsZiwga2V5KTpcclxuICAgICAgICByZXR1cm4ga2V5XHJcblxyXG4gICAgZGVmIGdldGFsbChzZWxmLCBrZXksIGRlZmF1bHQ9X21hcmtlcik6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgbGlzdCBvZiBhbGwgdmFsdWVzIG1hdGNoaW5nIHRoZSBrZXkuIiIiXHJcbiAgICAgICAgaWRlbnRpdHkgPSBzZWxmLl90aXRsZShrZXkpXHJcbiAgICAgICAgcmVzID0gW3YgZm9yIGksIGssIHYgaW4gc2VsZi5faW1wbC5faXRlbXMgaWYgaSA9PSBpZGVudGl0eV1cclxuICAgICAgICBpZiByZXM6XHJcbiAgICAgICAgICAgIHJldHVybiByZXNcclxuICAgICAgICBpZiBub3QgcmVzIGFuZCBkZWZhdWx0IGlzIG5vdCBfbWFya2VyOlxyXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFxyXG4gICAgICAgIHJhaXNlIEtleUVycm9yKCJLZXkgbm90IGZvdW5kOiAlciIgJSBrZXkpXHJcblxyXG4gICAgZGVmIGdldG9uZShzZWxmLCBrZXksIGRlZmF1bHQ9X21hcmtlcik6XHJcbiAgICAgICAgIiIiR2V0IGZpcnN0IHZhbHVlIG1hdGNoaW5nIHRoZSBrZXkuIiIiXHJcbiAgICAgICAgaWRlbnRpdHkgPSBzZWxmLl90aXRsZShrZXkpXHJcbiAgICAgICAgZm9yIGksIGssIHYgaW4gc2VsZi5faW1wbC5faXRlbXM6XHJcbiAgICAgICAgICAgIGlmIGkgPT0gaWRlbnRpdHk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdlxyXG4gICAgICAgIGlmIGRlZmF1bHQgaXMgbm90IF9tYXJrZXI6XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0XHJcbiAgICAgICAgcmFpc2UgS2V5RXJyb3IoIktleSBub3QgZm91bmQ6ICVyIiAlIGtleSlcclxuXHJcbiAgICAjIE1hcHBpbmcgaW50ZXJmYWNlICNcclxuXHJcbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5KTpcclxuICAgICAgICByZXR1cm4gc2VsZi5nZXRvbmUoa2V5KVxyXG5cclxuICAgIGRlZiBnZXQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOlxyXG4gICAgICAgICIiIkdldCBmaXJzdCB2YWx1ZSBtYXRjaGluZyB0aGUga2V5LiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLmdldG9uZShrZXksIGRlZmF1bHQpXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBpdGVyKHNlbGYua2V5cygpKVxyXG5cclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5faW1wbC5faXRlbXMpXHJcblxyXG4gICAgZGVmIGtleXMoc2VsZik6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgbmV3IHZpZXcgb2YgdGhlIGRpY3Rpb25hcnlcJ3Mga2V5cy4iIiJcclxuICAgICAgICByZXR1cm4gX0tleXNWaWV3KHNlbGYuX2ltcGwpXHJcblxyXG4gICAgZGVmIGl0ZW1zKHNlbGYpOlxyXG4gICAgICAgICIiIlJldHVybiBhIG5ldyB2aWV3IG9mIHRoZSBkaWN0aW9uYXJ5XCdzIGl0ZW1zICooa2V5LCB2YWx1ZSkgcGFpcnMpLiIiIlxyXG4gICAgICAgIHJldHVybiBfSXRlbXNWaWV3KHNlbGYuX2ltcGwpXHJcblxyXG4gICAgZGVmIHZhbHVlcyhzZWxmKTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBuZXcgdmlldyBvZiB0aGUgZGljdGlvbmFyeVwncyB2YWx1ZXMuIiIiXHJcbiAgICAgICAgcmV0dXJuIF9WYWx1ZXNWaWV3KHNlbGYuX2ltcGwpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIGFiYy5NYXBwaW5nKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShvdGhlciwgX0Jhc2UpOlxyXG4gICAgICAgICAgICBsZnQgPSBzZWxmLl9pbXBsLl9pdGVtc1xyXG4gICAgICAgICAgICByaHQgPSBvdGhlci5faW1wbC5faXRlbXNcclxuICAgICAgICAgICAgaWYgbGVuKGxmdCkgIT0gbGVuKHJodCk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuICAgICAgICAgICAgZm9yIChpMSwgazIsIHYxKSwgKGkyLCBrMiwgdjIpIGluIHppcChsZnQsIHJodCk6XHJcbiAgICAgICAgICAgICAgICBpZiBpMSAhPSBpMiBvciB2MSAhPSB2MjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuICAgICAgICBpZiBsZW4oc2VsZi5faW1wbC5faXRlbXMpICE9IGxlbihvdGhlcik6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIGZvciBrLCB2IGluIHNlbGYuaXRlbXMoKTpcclxuICAgICAgICAgICAgbnYgPSBvdGhlci5nZXQoaywgX21hcmtlcilcclxuICAgICAgICAgICAgaWYgdiAhPSBudjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBrZXkpOlxyXG4gICAgICAgIGlkZW50aXR5ID0gc2VsZi5fdGl0bGUoa2V5KVxyXG4gICAgICAgIGZvciBpLCBrLCB2IGluIHNlbGYuX2ltcGwuX2l0ZW1zOlxyXG4gICAgICAgICAgICBpZiBpID09IGlkZW50aXR5OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZik6XHJcbiAgICAgICAgYm9keSA9ICIsICIuam9pbigiXCd7fVwnOiB7IXJ9Ii5mb3JtYXQoaywgdikgZm9yIGssIHYgaW4gc2VsZi5pdGVtcygpKVxyXG4gICAgICAgIHJldHVybiAiPHt9KHt9KT4iLmZvcm1hdChzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywgYm9keSlcclxuXHJcbiAgICBfX2NsYXNzX2dldGl0ZW1fXyA9IGNsYXNzbWV0aG9kKEdlbmVyaWNBbGlhcylcclxuXHJcblxyXG5jbGFzcyBNdWx0aURpY3RQcm94eShfQmFzZSwgTXVsdGlNYXBwaW5nKTpcclxuICAgICIiIlJlYWQtb25seSBwcm94eSBmb3IgTXVsdGlEaWN0IGluc3RhbmNlLiIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhcmcpOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGFyZywgKE11bHRpRGljdCwgTXVsdGlEaWN0UHJveHkpKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImN0b3IgcmVxdWlyZXMgTXVsdGlEaWN0IG9yIE11bHRpRGljdFByb3h5IGluc3RhbmNlIlxyXG4gICAgICAgICAgICAgICAgIiwgbm90IHt9Ii5mb3JtYXQodHlwZShhcmcpKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2ltcGwgPSBhcmcuX2ltcGxcclxuXHJcbiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKTpcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNhblwndCBwaWNrbGUge30gb2JqZWN0cyIuZm9ybWF0KHNlbGYuX19jbGFzc19fLl9fbmFtZV9fKSlcclxuXHJcbiAgICBkZWYgY29weShzZWxmKTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBjb3B5IG9mIGl0c2VsZi4iIiJcclxuICAgICAgICByZXR1cm4gTXVsdGlEaWN0KHNlbGYuaXRlbXMoKSlcclxuXHJcblxyXG5jbGFzcyBDSU11bHRpRGljdFByb3h5KE11bHRpRGljdFByb3h5KTpcclxuICAgICIiIlJlYWQtb25seSBwcm94eSBmb3IgQ0lNdWx0aURpY3QgaW5zdGFuY2UuIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGFyZyk6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYXJnLCAoQ0lNdWx0aURpY3QsIENJTXVsdGlEaWN0UHJveHkpKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImN0b3IgcmVxdWlyZXMgQ0lNdWx0aURpY3Qgb3IgQ0lNdWx0aURpY3RQcm94eSBpbnN0YW5jZSJcclxuICAgICAgICAgICAgICAgICIsIG5vdCB7fSIuZm9ybWF0KHR5cGUoYXJnKSlcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9pbXBsID0gYXJnLl9pbXBsXHJcblxyXG4gICAgZGVmIF90aXRsZShzZWxmLCBrZXkpOlxyXG4gICAgICAgIHJldHVybiBrZXkudGl0bGUoKVxyXG5cclxuICAgIGRlZiBjb3B5KHNlbGYpOlxyXG4gICAgICAgICIiIlJldHVybiBhIGNvcHkgb2YgaXRzZWxmLiIiIlxyXG4gICAgICAgIHJldHVybiBDSU11bHRpRGljdChzZWxmLml0ZW1zKCkpXHJcblxyXG5cclxuY2xhc3MgTXVsdGlEaWN0KF9CYXNlLCBNdXRhYmxlTXVsdGlNYXBwaW5nKTpcclxuICAgICIiIkRpY3Rpb25hcnkgd2l0aCB0aGUgc3VwcG9ydCBmb3IgZHVwbGljYXRlIGtleXMuIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3YXJncyk6XHJcbiAgICAgICAgc2VsZi5faW1wbCA9IF9JbXBsKClcclxuXHJcbiAgICAgICAgc2VsZi5fZXh0ZW5kKGFyZ3MsIGt3YXJncywgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIHNlbGYuX2V4dGVuZF9pdGVtcylcclxuXHJcbiAgICBpZiBzeXMuaW1wbGVtZW50YXRpb24ubmFtZSAhPSAicHlweSI6XHJcblxyXG4gICAgICAgIGRlZiBfX3NpemVvZl9fKHNlbGYpOlxyXG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0Ll9fc2l6ZW9mX18oc2VsZikgKyBzeXMuZ2V0c2l6ZW9mKHNlbGYuX2ltcGwpXHJcblxyXG4gICAgZGVmIF9fcmVkdWNlX18oc2VsZik6XHJcbiAgICAgICAgcmV0dXJuIChzZWxmLl9fY2xhc3NfXywgKGxpc3Qoc2VsZi5pdGVtcygpKSwpKVxyXG5cclxuICAgIGRlZiBfdGl0bGUoc2VsZiwga2V5KTpcclxuICAgICAgICByZXR1cm4ga2V5XHJcblxyXG4gICAgZGVmIF9rZXkoc2VsZiwga2V5KTpcclxuICAgICAgICBpZiBpc2luc3RhbmNlKGtleSwgc3RyKTpcclxuICAgICAgICAgICAgcmV0dXJuIGtleVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJNdWx0aURpY3Qga2V5cyBzaG91bGQgYmUgZWl0aGVyIHN0ciAiICJvciBzdWJjbGFzc2VzIG9mIHN0ciJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBhZGQoc2VsZiwga2V5LCB2YWx1ZSk6XHJcbiAgICAgICAgaWRlbnRpdHkgPSBzZWxmLl90aXRsZShrZXkpXHJcbiAgICAgICAgc2VsZi5faW1wbC5faXRlbXMuYXBwZW5kKChpZGVudGl0eSwgc2VsZi5fa2V5KGtleSksIHZhbHVlKSlcclxuICAgICAgICBzZWxmLl9pbXBsLmluY3JfdmVyc2lvbigpXHJcblxyXG4gICAgZGVmIGNvcHkoc2VsZik6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgY29weSBvZiBpdHNlbGYuIiIiXHJcbiAgICAgICAgY2xzID0gc2VsZi5fX2NsYXNzX19cclxuICAgICAgICByZXR1cm4gY2xzKHNlbGYuaXRlbXMoKSlcclxuXHJcbiAgICBfX2NvcHlfXyA9IGNvcHlcclxuXHJcbiAgICBkZWYgZXh0ZW5kKHNlbGYsICphcmdzLCAqKmt3YXJncyk6XHJcbiAgICAgICAgIiIiRXh0ZW5kIGN1cnJlbnQgTXVsdGlEaWN0IHdpdGggbW9yZSB2YWx1ZXMuXHJcblxyXG4gICAgICAgIFRoaXMgbWV0aG9kIG11c3QgYmUgdXNlZCBpbnN0ZWFkIG9mIHVwZGF0ZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBzZWxmLl9leHRlbmQoYXJncywga3dhcmdzLCAiZXh0ZW5kIiwgc2VsZi5fZXh0ZW5kX2l0ZW1zKVxyXG5cclxuICAgIGRlZiBfZXh0ZW5kKHNlbGYsIGFyZ3MsIGt3YXJncywgbmFtZSwgbWV0aG9kKTpcclxuICAgICAgICBpZiBsZW4oYXJncykgPiAxOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAie30gdGFrZXMgYXQgbW9zdCAxIHBvc2l0aW9uYWwgYXJndW1lbnQiXHJcbiAgICAgICAgICAgICAgICAiICh7fSBnaXZlbikiLmZvcm1hdChuYW1lLCBsZW4oYXJncykpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiBhcmdzOlxyXG4gICAgICAgICAgICBhcmcgPSBhcmdzWzBdXHJcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYXJnc1swXSwgKE11bHRpRGljdCwgTXVsdGlEaWN0UHJveHkpKSBhbmQgbm90IGt3YXJnczpcclxuICAgICAgICAgICAgICAgIGl0ZW1zID0gYXJnLl9pbXBsLl9pdGVtc1xyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgaWYgaGFzYXR0cihhcmcsICJpdGVtcyIpOlxyXG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZy5pdGVtcygpXHJcbiAgICAgICAgICAgICAgICBpZiBrd2FyZ3M6XHJcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gbGlzdChhcmcpXHJcbiAgICAgICAgICAgICAgICAgICAgYXJnLmV4dGVuZChsaXN0KGt3YXJncy5pdGVtcygpKSlcclxuICAgICAgICAgICAgICAgIGl0ZW1zID0gW11cclxuICAgICAgICAgICAgICAgIGZvciBpdGVtIGluIGFyZzpcclxuICAgICAgICAgICAgICAgICAgICBpZiBub3QgbGVuKGl0ZW0pID09IDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ7fSB0YWtlcyBlaXRoZXIgZGljdCBvciBsaXN0IG9mIChrZXksIHZhbHVlKSAiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHVwbGVzIi5mb3JtYXQobmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLmFwcGVuZCgoc2VsZi5fdGl0bGUoaXRlbVswXSksIHNlbGYuX2tleShpdGVtWzBdKSwgaXRlbVsxXSkpXHJcblxyXG4gICAgICAgICAgICBtZXRob2QoaXRlbXMpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgbWV0aG9kKFxyXG4gICAgICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgICAgIChzZWxmLl90aXRsZShrZXkpLCBzZWxmLl9rZXkoa2V5KSwgdmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4ga3dhcmdzLml0ZW1zKClcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfZXh0ZW5kX2l0ZW1zKHNlbGYsIGl0ZW1zKTpcclxuICAgICAgICBmb3IgaWRlbnRpdHksIGtleSwgdmFsdWUgaW4gaXRlbXM6XHJcbiAgICAgICAgICAgIHNlbGYuYWRkKGtleSwgdmFsdWUpXHJcblxyXG4gICAgZGVmIGNsZWFyKHNlbGYpOlxyXG4gICAgICAgICIiIlJlbW92ZSBhbGwgaXRlbXMgZnJvbSBNdWx0aURpY3QuIiIiXHJcbiAgICAgICAgc2VsZi5faW1wbC5faXRlbXMuY2xlYXIoKVxyXG4gICAgICAgIHNlbGYuX2ltcGwuaW5jcl92ZXJzaW9uKClcclxuXHJcbiAgICAjIE1hcHBpbmcgaW50ZXJmYWNlICNcclxuXHJcbiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5LCB2YWx1ZSk6XHJcbiAgICAgICAgc2VsZi5fcmVwbGFjZShrZXksIHZhbHVlKVxyXG5cclxuICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBrZXkpOlxyXG4gICAgICAgIGlkZW50aXR5ID0gc2VsZi5fdGl0bGUoa2V5KVxyXG4gICAgICAgIGl0ZW1zID0gc2VsZi5faW1wbC5faXRlbXNcclxuICAgICAgICBmb3VuZCA9IEZhbHNlXHJcbiAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKGl0ZW1zKSAtIDEsIC0xLCAtMSk6XHJcbiAgICAgICAgICAgIGlmIGl0ZW1zW2ldWzBdID09IGlkZW50aXR5OlxyXG4gICAgICAgICAgICAgICAgZGVsIGl0ZW1zW2ldXHJcbiAgICAgICAgICAgICAgICBmb3VuZCA9IFRydWVcclxuICAgICAgICBpZiBub3QgZm91bmQ6XHJcbiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGtleSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9pbXBsLmluY3JfdmVyc2lvbigpXHJcblxyXG4gICAgZGVmIHNldGRlZmF1bHQoc2VsZiwga2V5LCBkZWZhdWx0PU5vbmUpOlxyXG4gICAgICAgICIiIlJldHVybiB2YWx1ZSBmb3Iga2V5LCBzZXQgdmFsdWUgdG8gZGVmYXVsdCBpZiBrZXkgaXMgbm90IHByZXNlbnQuIiIiXHJcbiAgICAgICAgaWRlbnRpdHkgPSBzZWxmLl90aXRsZShrZXkpXHJcbiAgICAgICAgZm9yIGksIGssIHYgaW4gc2VsZi5faW1wbC5faXRlbXM6XHJcbiAgICAgICAgICAgIGlmIGkgPT0gaWRlbnRpdHk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdlxyXG4gICAgICAgIHNlbGYuYWRkKGtleSwgZGVmYXVsdClcclxuICAgICAgICByZXR1cm4gZGVmYXVsdFxyXG5cclxuICAgIGRlZiBwb3BvbmUoc2VsZiwga2V5LCBkZWZhdWx0PV9tYXJrZXIpOlxyXG4gICAgICAgICIiIlJlbW92ZSBzcGVjaWZpZWQga2V5IGFuZCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUuXHJcblxyXG4gICAgICAgIElmIGtleSBpcyBub3QgZm91bmQsIGQgaXMgcmV0dXJuZWQgaWYgZ2l2ZW4sIG90aGVyd2lzZVxyXG4gICAgICAgIEtleUVycm9yIGlzIHJhaXNlZC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWRlbnRpdHkgPSBzZWxmLl90aXRsZShrZXkpXHJcbiAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKHNlbGYuX2ltcGwuX2l0ZW1zKSk6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2ltcGwuX2l0ZW1zW2ldWzBdID09IGlkZW50aXR5OlxyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBzZWxmLl9pbXBsLl9pdGVtc1tpXVsyXVxyXG4gICAgICAgICAgICAgICAgZGVsIHNlbGYuX2ltcGwuX2l0ZW1zW2ldXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9pbXBsLmluY3JfdmVyc2lvbigpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVcclxuICAgICAgICBpZiBkZWZhdWx0IGlzIF9tYXJrZXI6XHJcbiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGtleSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFxyXG5cclxuICAgIHBvcCA9IHBvcG9uZSAgIyB0eXBlOiBpZ25vcmVcclxuXHJcbiAgICBkZWYgcG9wYWxsKHNlbGYsIGtleSwgZGVmYXVsdD1fbWFya2VyKTpcclxuICAgICAgICAiIiJSZW1vdmUgYWxsIG9jY3VycmVuY2VzIG9mIGtleSBhbmQgcmV0dXJuIHRoZSBsaXN0IG9mIGNvcnJlc3BvbmRpbmdcclxuICAgICAgICB2YWx1ZXMuXHJcblxyXG4gICAgICAgIElmIGtleSBpcyBub3QgZm91bmQsIGRlZmF1bHQgaXMgcmV0dXJuZWQgaWYgZ2l2ZW4sIG90aGVyd2lzZVxyXG4gICAgICAgIEtleUVycm9yIGlzIHJhaXNlZC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgZm91bmQgPSBGYWxzZVxyXG4gICAgICAgIGlkZW50aXR5ID0gc2VsZi5fdGl0bGUoa2V5KVxyXG4gICAgICAgIHJldCA9IFtdXHJcbiAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKHNlbGYuX2ltcGwuX2l0ZW1zKSAtIDEsIC0xLCAtMSk6XHJcbiAgICAgICAgICAgIGl0ZW0gPSBzZWxmLl9pbXBsLl9pdGVtc1tpXVxyXG4gICAgICAgICAgICBpZiBpdGVtWzBdID09IGlkZW50aXR5OlxyXG4gICAgICAgICAgICAgICAgcmV0LmFwcGVuZChpdGVtWzJdKVxyXG4gICAgICAgICAgICAgICAgZGVsIHNlbGYuX2ltcGwuX2l0ZW1zW2ldXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9pbXBsLmluY3JfdmVyc2lvbigpXHJcbiAgICAgICAgICAgICAgICBmb3VuZCA9IFRydWVcclxuICAgICAgICBpZiBub3QgZm91bmQ6XHJcbiAgICAgICAgICAgIGlmIGRlZmF1bHQgaXMgX21hcmtlcjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGtleSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0XHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0LnJldmVyc2UoKVxyXG4gICAgICAgICAgICByZXR1cm4gcmV0XHJcblxyXG4gICAgZGVmIHBvcGl0ZW0oc2VsZik6XHJcbiAgICAgICAgIiIiUmVtb3ZlIGFuZCByZXR1cm4gYW4gYXJiaXRyYXJ5IChrZXksIHZhbHVlKSBwYWlyLiIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2ltcGwuX2l0ZW1zOlxyXG4gICAgICAgICAgICBpID0gc2VsZi5faW1wbC5faXRlbXMucG9wKDApXHJcbiAgICAgICAgICAgIHNlbGYuX2ltcGwuaW5jcl92ZXJzaW9uKClcclxuICAgICAgICAgICAgcmV0dXJuIGlbMV0sIGlbMl1cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBLZXlFcnJvcigiZW1wdHkgbXVsdGlkaWN0IilcclxuXHJcbiAgICBkZWYgdXBkYXRlKHNlbGYsICphcmdzLCAqKmt3YXJncyk6XHJcbiAgICAgICAgIiIiVXBkYXRlIHRoZSBkaWN0aW9uYXJ5IGZyb20gKm90aGVyKiwgb3ZlcndyaXRpbmcgZXhpc3Rpbmcga2V5cy4iIiJcclxuICAgICAgICBzZWxmLl9leHRlbmQoYXJncywga3dhcmdzLCAidXBkYXRlIiwgc2VsZi5fdXBkYXRlX2l0ZW1zKVxyXG5cclxuICAgIGRlZiBfdXBkYXRlX2l0ZW1zKHNlbGYsIGl0ZW1zKTpcclxuICAgICAgICBpZiBub3QgaXRlbXM6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIHVzZWRfa2V5cyA9IHt9XHJcbiAgICAgICAgZm9yIGlkZW50aXR5LCBrZXksIHZhbHVlIGluIGl0ZW1zOlxyXG4gICAgICAgICAgICBzdGFydCA9IHVzZWRfa2V5cy5nZXQoaWRlbnRpdHksIDApXHJcbiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKHN0YXJ0LCBsZW4oc2VsZi5faW1wbC5faXRlbXMpKTpcclxuICAgICAgICAgICAgICAgIGl0ZW0gPSBzZWxmLl9pbXBsLl9pdGVtc1tpXVxyXG4gICAgICAgICAgICAgICAgaWYgaXRlbVswXSA9PSBpZGVudGl0eTpcclxuICAgICAgICAgICAgICAgICAgICB1c2VkX2tleXNbaWRlbnRpdHldID0gaSArIDFcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9pbXBsLl9pdGVtc1tpXSA9IChpZGVudGl0eSwga2V5LCB2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5faW1wbC5faXRlbXMuYXBwZW5kKChpZGVudGl0eSwga2V5LCB2YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICB1c2VkX2tleXNbaWRlbnRpdHldID0gbGVuKHNlbGYuX2ltcGwuX2l0ZW1zKVxyXG5cclxuICAgICAgICAjIGRyb3AgdGFpbHNcclxuICAgICAgICBpID0gMFxyXG4gICAgICAgIHdoaWxlIGkgPCBsZW4oc2VsZi5faW1wbC5faXRlbXMpOlxyXG4gICAgICAgICAgICBpdGVtID0gc2VsZi5faW1wbC5faXRlbXNbaV1cclxuICAgICAgICAgICAgaWRlbnRpdHkgPSBpdGVtWzBdXHJcbiAgICAgICAgICAgIHBvcyA9IHVzZWRfa2V5cy5nZXQoaWRlbnRpdHkpXHJcbiAgICAgICAgICAgIGlmIHBvcyBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgaSArPSAxXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICBpZiBpID49IHBvczpcclxuICAgICAgICAgICAgICAgIGRlbCBzZWxmLl9pbXBsLl9pdGVtc1tpXVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgaSArPSAxXHJcblxyXG4gICAgICAgIHNlbGYuX2ltcGwuaW5jcl92ZXJzaW9uKClcclxuXHJcbiAgICBkZWYgX3JlcGxhY2Uoc2VsZiwga2V5LCB2YWx1ZSk6XHJcbiAgICAgICAga2V5ID0gc2VsZi5fa2V5KGtleSlcclxuICAgICAgICBpZGVudGl0eSA9IHNlbGYuX3RpdGxlKGtleSlcclxuICAgICAgICBpdGVtcyA9IHNlbGYuX2ltcGwuX2l0ZW1zXHJcblxyXG4gICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihpdGVtcykpOlxyXG4gICAgICAgICAgICBpdGVtID0gaXRlbXNbaV1cclxuICAgICAgICAgICAgaWYgaXRlbVswXSA9PSBpZGVudGl0eTpcclxuICAgICAgICAgICAgICAgIGl0ZW1zW2ldID0gKGlkZW50aXR5LCBrZXksIHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgIyBpIHBvaW50cyB0byBsYXN0IGZvdW5kIGl0ZW1cclxuICAgICAgICAgICAgICAgIHJndCA9IGlcclxuICAgICAgICAgICAgICAgIHNlbGYuX2ltcGwuaW5jcl92ZXJzaW9uKClcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5faW1wbC5faXRlbXMuYXBwZW5kKChpZGVudGl0eSwga2V5LCB2YWx1ZSkpXHJcbiAgICAgICAgICAgIHNlbGYuX2ltcGwuaW5jcl92ZXJzaW9uKClcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgICMgcmVtb3ZlIGFsbCB0YWlsIGl0ZW1zXHJcbiAgICAgICAgaSA9IHJndCArIDFcclxuICAgICAgICB3aGlsZSBpIDwgbGVuKGl0ZW1zKTpcclxuICAgICAgICAgICAgaXRlbSA9IGl0ZW1zW2ldXHJcbiAgICAgICAgICAgIGlmIGl0ZW1bMF0gPT0gaWRlbnRpdHk6XHJcbiAgICAgICAgICAgICAgICBkZWwgaXRlbXNbaV1cclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGkgKz0gMVxyXG5cclxuXHJcbmNsYXNzIENJTXVsdGlEaWN0KE11bHRpRGljdCk6XHJcbiAgICAiIiJEaWN0aW9uYXJ5IHdpdGggdGhlIHN1cHBvcnQgZm9yIGR1cGxpY2F0ZSBjYXNlLWluc2Vuc2l0aXZlIGtleXMuIiIiXHJcblxyXG4gICAgZGVmIF90aXRsZShzZWxmLCBrZXkpOlxyXG4gICAgICAgIHJldHVybiBrZXkudGl0bGUoKVxyXG5cclxuXHJcbmNsYXNzIF9JdGVyOlxyXG4gICAgX19zbG90c19fID0gKCJfc2l6ZSIsICJfaXRlciIpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHNpemUsIGl0ZXJhdG9yKTpcclxuICAgICAgICBzZWxmLl9zaXplID0gc2l6ZVxyXG4gICAgICAgIHNlbGYuX2l0ZXIgPSBpdGVyYXRvclxyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKTpcclxuICAgICAgICByZXR1cm4gc2VsZlxyXG5cclxuICAgIGRlZiBfX25leHRfXyhzZWxmKTpcclxuICAgICAgICByZXR1cm4gbmV4dChzZWxmLl9pdGVyKVxyXG5cclxuICAgIGRlZiBfX2xlbmd0aF9oaW50X18oc2VsZik6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3NpemVcclxuXHJcblxyXG5jbGFzcyBfVmlld0Jhc2U6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgaW1wbCk6XHJcbiAgICAgICAgc2VsZi5faW1wbCA9IGltcGxcclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKTpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYuX2ltcGwuX2l0ZW1zKVxyXG5cclxuXHJcbmNsYXNzIF9JdGVtc1ZpZXcoX1ZpZXdCYXNlLCBhYmMuSXRlbXNWaWV3KTpcclxuICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwgaXRlbSk6XHJcbiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoaXRlbSwgdHVwbGUpIG9yIGlzaW5zdGFuY2UoaXRlbSwgbGlzdClcclxuICAgICAgICBhc3NlcnQgbGVuKGl0ZW0pID09IDJcclxuICAgICAgICBmb3IgaSwgaywgdiBpbiBzZWxmLl9pbXBsLl9pdGVtczpcclxuICAgICAgICAgICAgaWYgaXRlbVswXSA9PSBrIGFuZCBpdGVtWzFdID09IHY6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG4gICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKTpcclxuICAgICAgICByZXR1cm4gX0l0ZXIobGVuKHNlbGYpLCBzZWxmLl9pdGVyKHNlbGYuX2ltcGwuX3ZlcnNpb24pKVxyXG5cclxuICAgIGRlZiBfaXRlcihzZWxmLCB2ZXJzaW9uKTpcclxuICAgICAgICBmb3IgaSwgaywgdiBpbiBzZWxmLl9pbXBsLl9pdGVtczpcclxuICAgICAgICAgICAgaWYgdmVyc2lvbiAhPSBzZWxmLl9pbXBsLl92ZXJzaW9uOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJEaWN0aW9uYXJ5IGNoYW5nZWQgZHVyaW5nIGl0ZXJhdGlvbiIpXHJcbiAgICAgICAgICAgIHlpZWxkIGssIHZcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZik6XHJcbiAgICAgICAgbHN0ID0gW11cclxuICAgICAgICBmb3IgaXRlbSBpbiBzZWxmLl9pbXBsLl9pdGVtczpcclxuICAgICAgICAgICAgbHN0LmFwcGVuZCgieyFyfTogeyFyfSIuZm9ybWF0KGl0ZW1bMV0sIGl0ZW1bMl0pKVxyXG4gICAgICAgIGJvZHkgPSAiLCAiLmpvaW4obHN0KVxyXG4gICAgICAgIHJldHVybiAie30oe30pIi5mb3JtYXQoc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIGJvZHkpXHJcblxyXG5cclxuY2xhc3MgX1ZhbHVlc1ZpZXcoX1ZpZXdCYXNlLCBhYmMuVmFsdWVzVmlldyk6XHJcbiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIHZhbHVlKTpcclxuICAgICAgICBmb3IgaXRlbSBpbiBzZWxmLl9pbXBsLl9pdGVtczpcclxuICAgICAgICAgICAgaWYgaXRlbVsyXSA9PSB2YWx1ZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXHJcbiAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBfSXRlcihsZW4oc2VsZiksIHNlbGYuX2l0ZXIoc2VsZi5faW1wbC5fdmVyc2lvbikpXHJcblxyXG4gICAgZGVmIF9pdGVyKHNlbGYsIHZlcnNpb24pOlxyXG4gICAgICAgIGZvciBpdGVtIGluIHNlbGYuX2ltcGwuX2l0ZW1zOlxyXG4gICAgICAgICAgICBpZiB2ZXJzaW9uICE9IHNlbGYuX2ltcGwuX3ZlcnNpb246XHJcbiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkRpY3Rpb25hcnkgY2hhbmdlZCBkdXJpbmcgaXRlcmF0aW9uIilcclxuICAgICAgICAgICAgeWllbGQgaXRlbVsyXVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcclxuICAgICAgICBsc3QgPSBbXVxyXG4gICAgICAgIGZvciBpdGVtIGluIHNlbGYuX2ltcGwuX2l0ZW1zOlxyXG4gICAgICAgICAgICBsc3QuYXBwZW5kKCJ7IXJ9Ii5mb3JtYXQoaXRlbVsyXSkpXHJcbiAgICAgICAgYm9keSA9ICIsICIuam9pbihsc3QpXHJcbiAgICAgICAgcmV0dXJuICJ7fSh7fSkiLmZvcm1hdChzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywgYm9keSlcclxuXHJcblxyXG5jbGFzcyBfS2V5c1ZpZXcoX1ZpZXdCYXNlLCBhYmMuS2V5c1ZpZXcpOlxyXG4gICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCBrZXkpOlxyXG4gICAgICAgIGZvciBpdGVtIGluIHNlbGYuX2ltcGwuX2l0ZW1zOlxyXG4gICAgICAgICAgICBpZiBpdGVtWzFdID09IGtleTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXHJcbiAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBfSXRlcihsZW4oc2VsZiksIHNlbGYuX2l0ZXIoc2VsZi5faW1wbC5fdmVyc2lvbikpXHJcblxyXG4gICAgZGVmIF9pdGVyKHNlbGYsIHZlcnNpb24pOlxyXG4gICAgICAgIGZvciBpdGVtIGluIHNlbGYuX2ltcGwuX2l0ZW1zOlxyXG4gICAgICAgICAgICBpZiB2ZXJzaW9uICE9IHNlbGYuX2ltcGwuX3ZlcnNpb246XHJcbiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkRpY3Rpb25hcnkgY2hhbmdlZCBkdXJpbmcgaXRlcmF0aW9uIilcclxuICAgICAgICAgICAgeWllbGQgaXRlbVsxXVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcclxuICAgICAgICBsc3QgPSBbXVxyXG4gICAgICAgIGZvciBpdGVtIGluIHNlbGYuX2ltcGwuX2l0ZW1zOlxyXG4gICAgICAgICAgICBsc3QuYXBwZW5kKCJ7IXJ9Ii5mb3JtYXQoaXRlbVsxXSkpXHJcbiAgICAgICAgYm9keSA9ICIsICIuam9pbihsc3QpXHJcbiAgICAgICAgcmV0dXJuICJ7fSh7fSkiLmZvcm1hdChzZWxmLl9fY2xhc3NfXy5fX25hbWVfXywgYm9keSlcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3R5cGluZ19leHRlbnNpb25zLnB5JywgYidpbXBvcnQgYWJjXG5pbXBvcnQgY29sbGVjdGlvbnNcbmltcG9ydCBjb2xsZWN0aW9ucy5hYmNcbmltcG9ydCBmdW5jdG9vbHNcbmltcG9ydCBvcGVyYXRvclxuaW1wb3J0IHN5c1xuaW1wb3J0IHR5cGVzIGFzIF90eXBlc1xuaW1wb3J0IHR5cGluZ1xuXG5cbiMgUGxlYXNlIGtlZXAgX19hbGxfXyBhbHBoYWJldGl6ZWQgd2l0aGluIGVhY2ggY2F0ZWdvcnkuXG5fX2FsbF9fID0gW1xuICAgICMgU3VwZXItc3BlY2lhbCB0eXBpbmcgcHJpbWl0aXZlcy5cbiAgICBcJ0NsYXNzVmFyXCcsXG4gICAgXCdDb25jYXRlbmF0ZVwnLFxuICAgIFwnRmluYWxcJyxcbiAgICBcJ0xpdGVyYWxTdHJpbmdcJyxcbiAgICBcJ1BhcmFtU3BlY1wnLFxuICAgIFwnUGFyYW1TcGVjQXJnc1wnLFxuICAgIFwnUGFyYW1TcGVjS3dhcmdzXCcsXG4gICAgXCdTZWxmXCcsXG4gICAgXCdUeXBlXCcsXG4gICAgXCdUeXBlVmFyVHVwbGVcJyxcbiAgICBcJ1VucGFja1wnLFxuXG4gICAgIyBBQkNzIChmcm9tIGNvbGxlY3Rpb25zLmFiYykuXG4gICAgXCdBd2FpdGFibGVcJyxcbiAgICBcJ0FzeW5jSXRlcmF0b3JcJyxcbiAgICBcJ0FzeW5jSXRlcmFibGVcJyxcbiAgICBcJ0Nvcm91dGluZVwnLFxuICAgIFwnQXN5bmNHZW5lcmF0b3JcJyxcbiAgICBcJ0FzeW5jQ29udGV4dE1hbmFnZXJcJyxcbiAgICBcJ0NoYWluTWFwXCcsXG5cbiAgICAjIENvbmNyZXRlIGNvbGxlY3Rpb24gdHlwZXMuXG4gICAgXCdDb250ZXh0TWFuYWdlclwnLFxuICAgIFwnQ291bnRlclwnLFxuICAgIFwnRGVxdWVcJyxcbiAgICBcJ0RlZmF1bHREaWN0XCcsXG4gICAgXCdPcmRlcmVkRGljdFwnLFxuICAgIFwnVHlwZWREaWN0XCcsXG5cbiAgICAjIFN0cnVjdHVyYWwgY2hlY2tzLCBhLmsuYS4gcHJvdG9jb2xzLlxuICAgIFwnU3VwcG9ydHNJbmRleFwnLFxuXG4gICAgIyBPbmUtb2ZmIHRoaW5ncy5cbiAgICBcJ0Fubm90YXRlZFwnLFxuICAgIFwnYXNzZXJ0X25ldmVyXCcsXG4gICAgXCdhc3NlcnRfdHlwZVwnLFxuICAgIFwnY2xlYXJfb3ZlcmxvYWRzXCcsXG4gICAgXCdkYXRhY2xhc3NfdHJhbnNmb3JtXCcsXG4gICAgXCdnZXRfb3ZlcmxvYWRzXCcsXG4gICAgXCdmaW5hbFwnLFxuICAgIFwnZ2V0X2FyZ3NcJyxcbiAgICBcJ2dldF9vcmlnaW5cJyxcbiAgICBcJ2dldF90eXBlX2hpbnRzXCcsXG4gICAgXCdJbnRWYXJcJyxcbiAgICBcJ2lzX3R5cGVkZGljdFwnLFxuICAgIFwnTGl0ZXJhbFwnLFxuICAgIFwnTmV3VHlwZVwnLFxuICAgIFwnb3ZlcmxvYWRcJyxcbiAgICBcJ1Byb3RvY29sXCcsXG4gICAgXCdyZXZlYWxfdHlwZVwnLFxuICAgIFwncnVudGltZVwnLFxuICAgIFwncnVudGltZV9jaGVja2FibGVcJyxcbiAgICBcJ1RleHRcJyxcbiAgICBcJ1R5cGVBbGlhc1wnLFxuICAgIFwnVHlwZUd1YXJkXCcsXG4gICAgXCdUWVBFX0NIRUNLSU5HXCcsXG4gICAgXCdOZXZlclwnLFxuICAgIFwnTm9SZXR1cm5cJyxcbiAgICBcJ1JlcXVpcmVkXCcsXG4gICAgXCdOb3RSZXF1aXJlZFwnLFxuXVxuXG4jIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG5QRVBfNTYwID0gVHJ1ZVxuR2VuZXJpY01ldGEgPSB0eXBlXG5cbiMgVGhlIGZ1bmN0aW9ucyBiZWxvdyBhcmUgbW9kaWZpZWQgY29waWVzIG9mIHR5cGluZyBpbnRlcm5hbCBoZWxwZXJzLlxuIyBUaGV5IGFyZSBuZWVkZWQgYnkgX1Byb3RvY29sTWV0YSBhbmQgdGhleSBwcm92aWRlIHN1cHBvcnQgZm9yIFBFUCA2NDYuXG5cbl9tYXJrZXIgPSBvYmplY3QoKVxuXG5cbmRlZiBfY2hlY2tfZ2VuZXJpYyhjbHMsIHBhcmFtZXRlcnMsIGVsZW49X21hcmtlcik6XG4gICAgIiIiQ2hlY2sgY29ycmVjdCBjb3VudCBmb3IgcGFyYW1ldGVycyBvZiBhIGdlbmVyaWMgY2xzIChpbnRlcm5hbCBoZWxwZXIpLlxuICAgIFRoaXMgZ2l2ZXMgYSBuaWNlIGVycm9yIG1lc3NhZ2UgaW4gY2FzZSBvZiBjb3VudCBtaXNtYXRjaC5cbiAgICAiIiJcbiAgICBpZiBub3QgZWxlbjpcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKGYie2Nsc30gaXMgbm90IGEgZ2VuZXJpYyBjbGFzcyIpXG4gICAgaWYgZWxlbiBpcyBfbWFya2VyOlxuICAgICAgICBpZiBub3QgaGFzYXR0cihjbHMsICJfX3BhcmFtZXRlcnNfXyIpIG9yIG5vdCBjbHMuX19wYXJhbWV0ZXJzX186XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJ7Y2xzfSBpcyBub3QgYSBnZW5lcmljIGNsYXNzIilcbiAgICAgICAgZWxlbiA9IGxlbihjbHMuX19wYXJhbWV0ZXJzX18pXG4gICAgYWxlbiA9IGxlbihwYXJhbWV0ZXJzKVxuICAgIGlmIGFsZW4gIT0gZWxlbjpcbiAgICAgICAgaWYgaGFzYXR0cihjbHMsICJfX3BhcmFtZXRlcnNfXyIpOlxuICAgICAgICAgICAgcGFyYW1ldGVycyA9IFtwIGZvciBwIGluIGNscy5fX3BhcmFtZXRlcnNfXyBpZiBub3QgX2lzX3VucGFjayhwKV1cbiAgICAgICAgICAgIG51bV90dl90dXBsZXMgPSBzdW0oaXNpbnN0YW5jZShwLCBUeXBlVmFyVHVwbGUpIGZvciBwIGluIHBhcmFtZXRlcnMpXG4gICAgICAgICAgICBpZiAobnVtX3R2X3R1cGxlcyA+IDApIGFuZCAoYWxlbiA+PSBlbGVuIC0gbnVtX3R2X3R1cGxlcyk6XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihmIlRvbyB7XCdtYW55XCcgaWYgYWxlbiA+IGVsZW4gZWxzZSBcJ2Zld1wnfSBwYXJhbWV0ZXJzIGZvciB7Y2xzfTsiXG4gICAgICAgICAgICAgICAgICAgICAgICBmIiBhY3R1YWwge2FsZW59LCBleHBlY3RlZCB7ZWxlbn0iKVxuXG5cbmlmIHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDEwKTpcbiAgICBkZWYgX3Nob3VsZF9jb2xsZWN0X2Zyb21fcGFyYW1ldGVycyh0KTpcbiAgICAgICAgcmV0dXJuIGlzaW5zdGFuY2UoXG4gICAgICAgICAgICB0LCAodHlwaW5nLl9HZW5lcmljQWxpYXMsIF90eXBlcy5HZW5lcmljQWxpYXMsIF90eXBlcy5VbmlvblR5cGUpXG4gICAgICAgIClcbmVsaWYgc3lzLnZlcnNpb25faW5mbyA+PSAoMywgOSk6XG4gICAgZGVmIF9zaG91bGRfY29sbGVjdF9mcm9tX3BhcmFtZXRlcnModCk6XG4gICAgICAgIHJldHVybiBpc2luc3RhbmNlKHQsICh0eXBpbmcuX0dlbmVyaWNBbGlhcywgX3R5cGVzLkdlbmVyaWNBbGlhcykpXG5lbHNlOlxuICAgIGRlZiBfc2hvdWxkX2NvbGxlY3RfZnJvbV9wYXJhbWV0ZXJzKHQpOlxuICAgICAgICByZXR1cm4gaXNpbnN0YW5jZSh0LCB0eXBpbmcuX0dlbmVyaWNBbGlhcykgYW5kIG5vdCB0Ll9zcGVjaWFsXG5cblxuZGVmIF9jb2xsZWN0X3R5cGVfdmFycyh0eXBlcywgdHlwZXZhcl90eXBlcz1Ob25lKTpcbiAgICAiIiJDb2xsZWN0IGFsbCB0eXBlIHZhcmlhYmxlIGNvbnRhaW5lZCBpbiB0eXBlcyBpbiBvcmRlciBvZlxuICAgIGZpcnN0IGFwcGVhcmFuY2UgKGxleGljb2dyYXBoaWMgb3JkZXIpLiBGb3IgZXhhbXBsZTo6XG5cbiAgICAgICAgX2NvbGxlY3RfdHlwZV92YXJzKChULCBMaXN0W1MsIFRdKSkgPT0gKFQsIFMpXG4gICAgIiIiXG4gICAgaWYgdHlwZXZhcl90eXBlcyBpcyBOb25lOlxuICAgICAgICB0eXBldmFyX3R5cGVzID0gdHlwaW5nLlR5cGVWYXJcbiAgICB0dmFycyA9IFtdXG4gICAgZm9yIHQgaW4gdHlwZXM6XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzaW5zdGFuY2UodCwgdHlwZXZhcl90eXBlcykgYW5kXG4gICAgICAgICAgICB0IG5vdCBpbiB0dmFycyBhbmRcbiAgICAgICAgICAgIG5vdCBfaXNfdW5wYWNrKHQpXG4gICAgICAgICk6XG4gICAgICAgICAgICB0dmFycy5hcHBlbmQodClcbiAgICAgICAgaWYgX3Nob3VsZF9jb2xsZWN0X2Zyb21fcGFyYW1ldGVycyh0KTpcbiAgICAgICAgICAgIHR2YXJzLmV4dGVuZChbdCBmb3IgdCBpbiB0Ll9fcGFyYW1ldGVyc19fIGlmIHQgbm90IGluIHR2YXJzXSlcbiAgICByZXR1cm4gdHVwbGUodHZhcnMpXG5cblxuTm9SZXR1cm4gPSB0eXBpbmcuTm9SZXR1cm5cblxuIyBTb21lIHVuY29uc3RyYWluZWQgdHlwZSB2YXJpYWJsZXMuICBUaGVzZSBhcmUgdXNlZCBieSB0aGUgY29udGFpbmVyIHR5cGVzLlxuIyAoVGhlc2UgYXJlIG5vdCBmb3IgZXhwb3J0LilcblQgPSB0eXBpbmcuVHlwZVZhcihcJ1RcJykgICMgQW55IHR5cGUuXG5LVCA9IHR5cGluZy5UeXBlVmFyKFwnS1RcJykgICMgS2V5IHR5cGUuXG5WVCA9IHR5cGluZy5UeXBlVmFyKFwnVlRcJykgICMgVmFsdWUgdHlwZS5cblRfY28gPSB0eXBpbmcuVHlwZVZhcihcJ1RfY29cJywgY292YXJpYW50PVRydWUpICAjIEFueSB0eXBlIGNvdmFyaWFudCBjb250YWluZXJzLlxuVF9jb250cmEgPSB0eXBpbmcuVHlwZVZhcihcJ1RfY29udHJhXCcsIGNvbnRyYXZhcmlhbnQ9VHJ1ZSkgICMgRGl0dG8gY29udHJhdmFyaWFudC5cblxuQ2xhc3NWYXIgPSB0eXBpbmcuQ2xhc3NWYXJcblxuIyBPbiBvbGRlciB2ZXJzaW9ucyBvZiB0eXBpbmcgdGhlcmUgaXMgYW4gaW50ZXJuYWwgY2xhc3MgbmFtZWQgIkZpbmFsIi5cbiMgMy44K1xuaWYgaGFzYXR0cih0eXBpbmcsIFwnRmluYWxcJykgYW5kIHN5cy52ZXJzaW9uX2luZm9bOjJdID49ICgzLCA3KTpcbiAgICBGaW5hbCA9IHR5cGluZy5GaW5hbFxuIyAzLjdcbmVsc2U6XG4gICAgY2xhc3MgX0ZpbmFsRm9ybSh0eXBpbmcuX1NwZWNpYWxGb3JtLCBfcm9vdD1UcnVlKTpcblxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gXCd0eXBpbmdfZXh0ZW5zaW9ucy5cJyArIHNlbGYuX25hbWVcblxuICAgICAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgcGFyYW1ldGVycyk6XG4gICAgICAgICAgICBpdGVtID0gdHlwaW5nLl90eXBlX2NoZWNrKHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZcJ3tzZWxmLl9uYW1lfSBhY2NlcHRzIG9ubHkgYSBzaW5nbGUgdHlwZS5cJylcbiAgICAgICAgICAgIHJldHVybiB0eXBpbmcuX0dlbmVyaWNBbGlhcyhzZWxmLCAoaXRlbSwpKVxuXG4gICAgRmluYWwgPSBfRmluYWxGb3JtKFwnRmluYWxcJyxcbiAgICAgICAgICAgICAgICAgICAgICAgZG9jPSIiIkEgc3BlY2lhbCB0eXBpbmcgY29uc3RydWN0IHRvIGluZGljYXRlIHRoYXQgYSBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgIGNhbm5vdCBiZSByZS1hc3NpZ25lZCBvciBvdmVycmlkZGVuIGluIGEgc3ViY2xhc3MuXG4gICAgICAgICAgICAgICAgICAgICAgIEZvciBleGFtcGxlOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBNQVhfU0laRTogRmluYWwgPSA5MDAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBNQVhfU0laRSArPSAxICAjIEVycm9yIHJlcG9ydGVkIGJ5IHR5cGUgY2hlY2tlclxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcyBDb25uZWN0aW9uOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRJTUVPVVQ6IEZpbmFsW2ludF0gPSAxMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3MgRmFzdENvbm5lY3RvcihDb25uZWN0aW9uKTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUSU1FT1VUID0gMSAgIyBFcnJvciByZXBvcnRlZCBieSB0eXBlIGNoZWNrZXJcblxuICAgICAgICAgICAgICAgICAgICAgICBUaGVyZSBpcyBubyBydW50aW1lIGNoZWNraW5nIG9mIHRoZXNlIHByb3BlcnRpZXMuIiIiKVxuXG5pZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCAxMSk6XG4gICAgZmluYWwgPSB0eXBpbmcuZmluYWxcbmVsc2U6XG4gICAgIyBAZmluYWwgZXhpc3RzIGluIDMuOCssIGJ1dCB3ZSBiYWNrcG9ydCBpdCBmb3IgYWxsIHZlcnNpb25zXG4gICAgIyBiZWZvcmUgMy4xMSB0byBrZWVwIHN1cHBvcnQgZm9yIHRoZSBfX2ZpbmFsX18gYXR0cmlidXRlLlxuICAgICMgU2VlIGh0dHBzOi8vYnVncy5weXRob24ub3JnL2lzc3VlNDYzNDJcbiAgICBkZWYgZmluYWwoZik6XG4gICAgICAgICIiIlRoaXMgZGVjb3JhdG9yIGNhbiBiZSB1c2VkIHRvIGluZGljYXRlIHRvIHR5cGUgY2hlY2tlcnMgdGhhdFxuICAgICAgICB0aGUgZGVjb3JhdGVkIG1ldGhvZCBjYW5ub3QgYmUgb3ZlcnJpZGRlbiwgYW5kIGRlY29yYXRlZCBjbGFzc1xuICAgICAgICBjYW5ub3QgYmUgc3ViY2xhc3NlZC4gRm9yIGV4YW1wbGU6XG5cbiAgICAgICAgICAgIGNsYXNzIEJhc2U6XG4gICAgICAgICAgICAgICAgQGZpbmFsXG4gICAgICAgICAgICAgICAgZGVmIGRvbmUoc2VsZikgLT4gTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgLi4uXG4gICAgICAgICAgICBjbGFzcyBTdWIoQmFzZSk6XG4gICAgICAgICAgICAgICAgZGVmIGRvbmUoc2VsZikgLT4gTm9uZTogICMgRXJyb3IgcmVwb3J0ZWQgYnkgdHlwZSBjaGVja2VyXG4gICAgICAgICAgICAgICAgICAgIC4uLlxuICAgICAgICAgICAgQGZpbmFsXG4gICAgICAgICAgICBjbGFzcyBMZWFmOlxuICAgICAgICAgICAgICAgIC4uLlxuICAgICAgICAgICAgY2xhc3MgT3RoZXIoTGVhZik6ICAjIEVycm9yIHJlcG9ydGVkIGJ5IHR5cGUgY2hlY2tlclxuICAgICAgICAgICAgICAgIC4uLlxuXG4gICAgICAgIFRoZXJlIGlzIG5vIHJ1bnRpbWUgY2hlY2tpbmcgb2YgdGhlc2UgcHJvcGVydGllcy4gVGhlIGRlY29yYXRvclxuICAgICAgICBzZXRzIHRoZSBgYF9fZmluYWxfX2BgIGF0dHJpYnV0ZSB0byBgYFRydWVgYCBvbiB0aGUgZGVjb3JhdGVkIG9iamVjdFxuICAgICAgICB0byBhbGxvdyBydW50aW1lIGludHJvc3BlY3Rpb24uXG4gICAgICAgICIiIlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBmLl9fZmluYWxfXyA9IFRydWVcbiAgICAgICAgZXhjZXB0IChBdHRyaWJ1dGVFcnJvciwgVHlwZUVycm9yKTpcbiAgICAgICAgICAgICMgU2tpcCB0aGUgYXR0cmlidXRlIHNpbGVudGx5IGlmIGl0IGlzIG5vdCB3cml0YWJsZS5cbiAgICAgICAgICAgICMgQXR0cmlidXRlRXJyb3IgaGFwcGVucyBpZiB0aGUgb2JqZWN0IGhhcyBfX3Nsb3RzX18gb3IgYVxuICAgICAgICAgICAgIyByZWFkLW9ubHkgcHJvcGVydHksIFR5cGVFcnJvciBpZiBpdFwncyBhIGJ1aWx0aW4gY2xhc3MuXG4gICAgICAgICAgICBwYXNzXG4gICAgICAgIHJldHVybiBmXG5cblxuZGVmIEludFZhcihuYW1lKTpcbiAgICByZXR1cm4gdHlwaW5nLlR5cGVWYXIobmFtZSlcblxuXG4jIDMuOCs6XG5pZiBoYXNhdHRyKHR5cGluZywgXCdMaXRlcmFsXCcpOlxuICAgIExpdGVyYWwgPSB0eXBpbmcuTGl0ZXJhbFxuIyAzLjc6XG5lbHNlOlxuICAgIGNsYXNzIF9MaXRlcmFsRm9ybSh0eXBpbmcuX1NwZWNpYWxGb3JtLCBfcm9vdD1UcnVlKTpcblxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gXCd0eXBpbmdfZXh0ZW5zaW9ucy5cJyArIHNlbGYuX25hbWVcblxuICAgICAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgcGFyYW1ldGVycyk6XG4gICAgICAgICAgICByZXR1cm4gdHlwaW5nLl9HZW5lcmljQWxpYXMoc2VsZiwgcGFyYW1ldGVycylcblxuICAgIExpdGVyYWwgPSBfTGl0ZXJhbEZvcm0oXCdMaXRlcmFsXCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBkb2M9IiIiQSB0eXBlIHRoYXQgY2FuIGJlIHVzZWQgdG8gaW5kaWNhdGUgdG8gdHlwZSBjaGVja2Vyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSBoYXMgYSB2YWx1ZSBsaXRlcmFsbHkgZXF1aXZhbGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gdGhlIHByb3ZpZGVkIHBhcmFtZXRlci4gRm9yIGV4YW1wbGU6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXI6IExpdGVyYWxbNF0gPSA0XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSB0eXBlIGNoZWNrZXIgdW5kZXJzdGFuZHMgdGhhdCBcJ3ZhclwnIGlzIGxpdGVyYWxseSBlcXVhbCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHZhbHVlIDQgYW5kIG5vIG90aGVyIHZhbHVlLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBMaXRlcmFsWy4uLl0gY2Fubm90IGJlIHN1YmNsYXNzZWQuIFRoZXJlIGlzIG5vIHJ1bnRpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNraW5nIHZlcmlmeWluZyB0aGF0IHRoZSBwYXJhbWV0ZXIgaXMgYWN0dWFsbHkgYSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGVhZCBvZiBhIHR5cGUuIiIiKVxuXG5cbl9vdmVybG9hZF9kdW1teSA9IHR5cGluZy5fb3ZlcmxvYWRfZHVtbXkgICMgbm9xYVxuXG5cbmlmIGhhc2F0dHIodHlwaW5nLCAiZ2V0X292ZXJsb2FkcyIpOiAgIyAzLjExK1xuICAgIG92ZXJsb2FkID0gdHlwaW5nLm92ZXJsb2FkXG4gICAgZ2V0X292ZXJsb2FkcyA9IHR5cGluZy5nZXRfb3ZlcmxvYWRzXG4gICAgY2xlYXJfb3ZlcmxvYWRzID0gdHlwaW5nLmNsZWFyX292ZXJsb2Fkc1xuZWxzZTpcbiAgICAjIHttb2R1bGU6IHtxdWFsbmFtZToge2ZpcnN0bGluZW5vOiBmdW5jfX19XG4gICAgX292ZXJsb2FkX3JlZ2lzdHJ5ID0gY29sbGVjdGlvbnMuZGVmYXVsdGRpY3QoXG4gICAgICAgIGZ1bmN0b29scy5wYXJ0aWFsKGNvbGxlY3Rpb25zLmRlZmF1bHRkaWN0LCBkaWN0KVxuICAgIClcblxuICAgIGRlZiBvdmVybG9hZChmdW5jKTpcbiAgICAgICAgIiIiRGVjb3JhdG9yIGZvciBvdmVybG9hZGVkIGZ1bmN0aW9ucy9tZXRob2RzLlxuXG4gICAgICAgIEluIGEgc3R1YiBmaWxlLCBwbGFjZSB0d28gb3IgbW9yZSBzdHViIGRlZmluaXRpb25zIGZvciB0aGUgc2FtZVxuICAgICAgICBmdW5jdGlvbiBpbiBhIHJvdywgZWFjaCBkZWNvcmF0ZWQgd2l0aCBAb3ZlcmxvYWQuICBGb3IgZXhhbXBsZTpcblxuICAgICAgICBAb3ZlcmxvYWRcbiAgICAgICAgZGVmIHV0ZjgodmFsdWU6IE5vbmUpIC0+IE5vbmU6IC4uLlxuICAgICAgICBAb3ZlcmxvYWRcbiAgICAgICAgZGVmIHV0ZjgodmFsdWU6IGJ5dGVzKSAtPiBieXRlczogLi4uXG4gICAgICAgIEBvdmVybG9hZFxuICAgICAgICBkZWYgdXRmOCh2YWx1ZTogc3RyKSAtPiBieXRlczogLi4uXG5cbiAgICAgICAgSW4gYSBub24tc3R1YiBmaWxlIChpLmUuIGEgcmVndWxhciAucHkgZmlsZSksIGRvIHRoZSBzYW1lIGJ1dFxuICAgICAgICBmb2xsb3cgaXQgd2l0aCBhbiBpbXBsZW1lbnRhdGlvbi4gIFRoZSBpbXBsZW1lbnRhdGlvbiBzaG91bGQgKm5vdCpcbiAgICAgICAgYmUgZGVjb3JhdGVkIHdpdGggQG92ZXJsb2FkLiAgRm9yIGV4YW1wbGU6XG5cbiAgICAgICAgQG92ZXJsb2FkXG4gICAgICAgIGRlZiB1dGY4KHZhbHVlOiBOb25lKSAtPiBOb25lOiAuLi5cbiAgICAgICAgQG92ZXJsb2FkXG4gICAgICAgIGRlZiB1dGY4KHZhbHVlOiBieXRlcykgLT4gYnl0ZXM6IC4uLlxuICAgICAgICBAb3ZlcmxvYWRcbiAgICAgICAgZGVmIHV0ZjgodmFsdWU6IHN0cikgLT4gYnl0ZXM6IC4uLlxuICAgICAgICBkZWYgdXRmOCh2YWx1ZSk6XG4gICAgICAgICAgICAjIGltcGxlbWVudGF0aW9uIGdvZXMgaGVyZVxuXG4gICAgICAgIFRoZSBvdmVybG9hZHMgZm9yIGEgZnVuY3Rpb24gY2FuIGJlIHJldHJpZXZlZCBhdCBydW50aW1lIHVzaW5nIHRoZVxuICAgICAgICBnZXRfb3ZlcmxvYWRzKCkgZnVuY3Rpb24uXG4gICAgICAgICIiIlxuICAgICAgICAjIGNsYXNzbWV0aG9kIGFuZCBzdGF0aWNtZXRob2RcbiAgICAgICAgZiA9IGdldGF0dHIoZnVuYywgIl9fZnVuY19fIiwgZnVuYylcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgX292ZXJsb2FkX3JlZ2lzdHJ5W2YuX19tb2R1bGVfX11bZi5fX3F1YWxuYW1lX19dW1xuICAgICAgICAgICAgICAgIGYuX19jb2RlX18uY29fZmlyc3RsaW5lbm9cbiAgICAgICAgICAgIF0gPSBmdW5jXG4gICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjpcbiAgICAgICAgICAgICMgTm90IGEgbm9ybWFsIGZ1bmN0aW9uOyBpZ25vcmUuXG4gICAgICAgICAgICBwYXNzXG4gICAgICAgIHJldHVybiBfb3ZlcmxvYWRfZHVtbXlcblxuICAgIGRlZiBnZXRfb3ZlcmxvYWRzKGZ1bmMpOlxuICAgICAgICAiIiJSZXR1cm4gYWxsIGRlZmluZWQgb3ZlcmxvYWRzIGZvciAqZnVuYyogYXMgYSBzZXF1ZW5jZS4iIiJcbiAgICAgICAgIyBjbGFzc21ldGhvZCBhbmQgc3RhdGljbWV0aG9kXG4gICAgICAgIGYgPSBnZXRhdHRyKGZ1bmMsICJfX2Z1bmNfXyIsIGZ1bmMpXG4gICAgICAgIGlmIGYuX19tb2R1bGVfXyBub3QgaW4gX292ZXJsb2FkX3JlZ2lzdHJ5OlxuICAgICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgIG1vZF9kaWN0ID0gX292ZXJsb2FkX3JlZ2lzdHJ5W2YuX19tb2R1bGVfX11cbiAgICAgICAgaWYgZi5fX3F1YWxuYW1lX18gbm90IGluIG1vZF9kaWN0OlxuICAgICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgIHJldHVybiBsaXN0KG1vZF9kaWN0W2YuX19xdWFsbmFtZV9fXS52YWx1ZXMoKSlcblxuICAgIGRlZiBjbGVhcl9vdmVybG9hZHMoKTpcbiAgICAgICAgIiIiQ2xlYXIgYWxsIG92ZXJsb2FkcyBpbiB0aGUgcmVnaXN0cnkuIiIiXG4gICAgICAgIF9vdmVybG9hZF9yZWdpc3RyeS5jbGVhcigpXG5cblxuIyBUaGlzIGlzIG5vdCBhIHJlYWwgZ2VuZXJpYyBjbGFzcy4gIERvblwndCB1c2Ugb3V0c2lkZSBhbm5vdGF0aW9ucy5cblR5cGUgPSB0eXBpbmcuVHlwZVxuXG4jIFZhcmlvdXMgQUJDcyBtaW1pY2tpbmcgdGhvc2UgaW4gY29sbGVjdGlvbnMuYWJjLlxuIyBBIGZldyBhcmUgc2ltcGx5IHJlLWV4cG9ydGVkIGZvciBjb21wbGV0ZW5lc3MuXG5cblxuQXdhaXRhYmxlID0gdHlwaW5nLkF3YWl0YWJsZVxuQ29yb3V0aW5lID0gdHlwaW5nLkNvcm91dGluZVxuQXN5bmNJdGVyYWJsZSA9IHR5cGluZy5Bc3luY0l0ZXJhYmxlXG5Bc3luY0l0ZXJhdG9yID0gdHlwaW5nLkFzeW5jSXRlcmF0b3JcbkRlcXVlID0gdHlwaW5nLkRlcXVlXG5Db250ZXh0TWFuYWdlciA9IHR5cGluZy5Db250ZXh0TWFuYWdlclxuQXN5bmNDb250ZXh0TWFuYWdlciA9IHR5cGluZy5Bc3luY0NvbnRleHRNYW5hZ2VyXG5EZWZhdWx0RGljdCA9IHR5cGluZy5EZWZhdWx0RGljdFxuXG4jIDMuNy4yK1xuaWYgaGFzYXR0cih0eXBpbmcsIFwnT3JkZXJlZERpY3RcJyk6XG4gICAgT3JkZXJlZERpY3QgPSB0eXBpbmcuT3JkZXJlZERpY3RcbiMgMy43LjAtMy43LjJcbmVsc2U6XG4gICAgT3JkZXJlZERpY3QgPSB0eXBpbmcuX2FsaWFzKGNvbGxlY3Rpb25zLk9yZGVyZWREaWN0LCAoS1QsIFZUKSlcblxuQ291bnRlciA9IHR5cGluZy5Db3VudGVyXG5DaGFpbk1hcCA9IHR5cGluZy5DaGFpbk1hcFxuQXN5bmNHZW5lcmF0b3IgPSB0eXBpbmcuQXN5bmNHZW5lcmF0b3Jcbk5ld1R5cGUgPSB0eXBpbmcuTmV3VHlwZVxuVGV4dCA9IHR5cGluZy5UZXh0XG5UWVBFX0NIRUNLSU5HID0gdHlwaW5nLlRZUEVfQ0hFQ0tJTkdcblxuXG5fUFJPVE9fV0hJVEVMSVNUID0gW1wnQ2FsbGFibGVcJywgXCdBd2FpdGFibGVcJyxcbiAgICAgICAgICAgICAgICAgICAgXCdJdGVyYWJsZVwnLCBcJ0l0ZXJhdG9yXCcsIFwnQXN5bmNJdGVyYWJsZVwnLCBcJ0FzeW5jSXRlcmF0b3JcJyxcbiAgICAgICAgICAgICAgICAgICAgXCdIYXNoYWJsZVwnLCBcJ1NpemVkXCcsIFwnQ29udGFpbmVyXCcsIFwnQ29sbGVjdGlvblwnLCBcJ1JldmVyc2libGVcJyxcbiAgICAgICAgICAgICAgICAgICAgXCdDb250ZXh0TWFuYWdlclwnLCBcJ0FzeW5jQ29udGV4dE1hbmFnZXJcJ11cblxuXG5kZWYgX2dldF9wcm90b2NvbF9hdHRycyhjbHMpOlxuICAgIGF0dHJzID0gc2V0KClcbiAgICBmb3IgYmFzZSBpbiBjbHMuX19tcm9fX1s6LTFdOiAgIyB3aXRob3V0IG9iamVjdFxuICAgICAgICBpZiBiYXNlLl9fbmFtZV9fIGluIChcJ1Byb3RvY29sXCcsIFwnR2VuZXJpY1wnKTpcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIGFubm90YXRpb25zID0gZ2V0YXR0cihiYXNlLCBcJ19fYW5ub3RhdGlvbnNfX1wnLCB7fSlcbiAgICAgICAgZm9yIGF0dHIgaW4gbGlzdChiYXNlLl9fZGljdF9fLmtleXMoKSkgKyBsaXN0KGFubm90YXRpb25zLmtleXMoKSk6XG4gICAgICAgICAgICBpZiAobm90IGF0dHIuc3RhcnRzd2l0aChcJ19hYmNfXCcpIGFuZCBhdHRyIG5vdCBpbiAoXG4gICAgICAgICAgICAgICAgICAgIFwnX19hYnN0cmFjdG1ldGhvZHNfX1wnLCBcJ19fYW5ub3RhdGlvbnNfX1wnLCBcJ19fd2Vha3JlZl9fXCcsXG4gICAgICAgICAgICAgICAgICAgIFwnX2lzX3Byb3RvY29sXCcsIFwnX2lzX3J1bnRpbWVfcHJvdG9jb2xcJywgXCdfX2RpY3RfX1wnLFxuICAgICAgICAgICAgICAgICAgICBcJ19fYXJnc19fXCcsIFwnX19zbG90c19fXCcsXG4gICAgICAgICAgICAgICAgICAgIFwnX19uZXh0X2luX21yb19fXCcsIFwnX19wYXJhbWV0ZXJzX19cJywgXCdfX29yaWdpbl9fXCcsXG4gICAgICAgICAgICAgICAgICAgIFwnX19vcmlnX2Jhc2VzX19cJywgXCdfX2V4dHJhX19cJywgXCdfX3RyZWVfaGFzaF9fXCcsXG4gICAgICAgICAgICAgICAgICAgIFwnX19kb2NfX1wnLCBcJ19fc3ViY2xhc3Nob29rX19cJywgXCdfX2luaXRfX1wnLCBcJ19fbmV3X19cJyxcbiAgICAgICAgICAgICAgICAgICAgXCdfX21vZHVsZV9fXCcsIFwnX011dGFibGVNYXBwaW5nX19tYXJrZXJcJywgXCdfZ29yZ1wnKSk6XG4gICAgICAgICAgICAgICAgYXR0cnMuYWRkKGF0dHIpXG4gICAgcmV0dXJuIGF0dHJzXG5cblxuZGVmIF9pc19jYWxsYWJsZV9tZW1iZXJzX29ubHkoY2xzKTpcbiAgICByZXR1cm4gYWxsKGNhbGxhYmxlKGdldGF0dHIoY2xzLCBhdHRyLCBOb25lKSkgZm9yIGF0dHIgaW4gX2dldF9wcm90b2NvbF9hdHRycyhjbHMpKVxuXG5cbiMgMy44K1xuaWYgaGFzYXR0cih0eXBpbmcsIFwnUHJvdG9jb2xcJyk6XG4gICAgUHJvdG9jb2wgPSB0eXBpbmcuUHJvdG9jb2xcbiMgMy43XG5lbHNlOlxuXG4gICAgZGVmIF9ub19pbml0KHNlbGYsICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgIGlmIHR5cGUoc2VsZikuX2lzX3Byb3RvY29sOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFwnUHJvdG9jb2xzIGNhbm5vdCBiZSBpbnN0YW50aWF0ZWRcJylcblxuICAgIGNsYXNzIF9Qcm90b2NvbE1ldGEoYWJjLkFCQ01ldGEpOlxuICAgICAgICAjIFRoaXMgbWV0YWNsYXNzIGlzIGEgYml0IHVuZm9ydHVuYXRlIGFuZCBleGlzdHMgb25seSBiZWNhdXNlIG9mIHRoZSBsYWNrXG4gICAgICAgICMgb2YgX19pbnN0YW5jZWhvb2tfXy5cbiAgICAgICAgZGVmIF9faW5zdGFuY2VjaGVja19fKGNscywgaW5zdGFuY2UpOlxuICAgICAgICAgICAgIyBXZSBuZWVkIHRoaXMgbWV0aG9kIGZvciBzaXR1YXRpb25zIHdoZXJlIGF0dHJpYnV0ZXMgYXJlXG4gICAgICAgICAgICAjIGFzc2lnbmVkIGluIF9faW5pdF9fLlxuICAgICAgICAgICAgaWYgKChub3QgZ2V0YXR0cihjbHMsIFwnX2lzX3Byb3RvY29sXCcsIEZhbHNlKSBvclxuICAgICAgICAgICAgICAgICBfaXNfY2FsbGFibGVfbWVtYmVyc19vbmx5KGNscykpIGFuZFxuICAgICAgICAgICAgICAgICAgICBpc3N1YmNsYXNzKGluc3RhbmNlLl9fY2xhc3NfXywgY2xzKSk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcbiAgICAgICAgICAgIGlmIGNscy5faXNfcHJvdG9jb2w6XG4gICAgICAgICAgICAgICAgaWYgYWxsKGhhc2F0dHIoaW5zdGFuY2UsIGF0dHIpIGFuZFxuICAgICAgICAgICAgICAgICAgICAgICAobm90IGNhbGxhYmxlKGdldGF0dHIoY2xzLCBhdHRyLCBOb25lKSkgb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldGF0dHIoaW5zdGFuY2UsIGF0dHIpIGlzIG5vdCBOb25lKVxuICAgICAgICAgICAgICAgICAgICAgICBmb3IgYXR0ciBpbiBfZ2V0X3Byb3RvY29sX2F0dHJzKGNscykpOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyKCkuX19pbnN0YW5jZWNoZWNrX18oaW5zdGFuY2UpXG5cbiAgICBjbGFzcyBQcm90b2NvbChtZXRhY2xhc3M9X1Byb3RvY29sTWV0YSk6XG4gICAgICAgICMgVGhlcmUgaXMgcXVpdGUgYSBsb3Qgb2Ygb3ZlcmxhcHBpbmcgY29kZSB3aXRoIHR5cGluZy5HZW5lcmljLlxuICAgICAgICAjIFVuZm9ydHVuYXRlbHkgaXQgaXMgaGFyZCB0byBhdm9pZCB0aGlzIHdoaWxlIHRoZXNlIGxpdmUgaW4gdHdvIGRpZmZlcmVudFxuICAgICAgICAjIG1vZHVsZXMuIFRoZSBkdXBsaWNhdGVkIGNvZGUgd2lsbCBiZSByZW1vdmVkIHdoZW4gUHJvdG9jb2wgaXMgbW92ZWQgdG8gdHlwaW5nLlxuICAgICAgICAiIiJCYXNlIGNsYXNzIGZvciBwcm90b2NvbCBjbGFzc2VzLiBQcm90b2NvbCBjbGFzc2VzIGFyZSBkZWZpbmVkIGFzOjpcblxuICAgICAgICAgICAgY2xhc3MgUHJvdG8oUHJvdG9jb2wpOlxuICAgICAgICAgICAgICAgIGRlZiBtZXRoKHNlbGYpIC0+IGludDpcbiAgICAgICAgICAgICAgICAgICAgLi4uXG5cbiAgICAgICAgU3VjaCBjbGFzc2VzIGFyZSBwcmltYXJpbHkgdXNlZCB3aXRoIHN0YXRpYyB0eXBlIGNoZWNrZXJzIHRoYXQgcmVjb2duaXplXG4gICAgICAgIHN0cnVjdHVyYWwgc3VidHlwaW5nIChzdGF0aWMgZHVjay10eXBpbmcpLCBmb3IgZXhhbXBsZTo6XG5cbiAgICAgICAgICAgIGNsYXNzIEM6XG4gICAgICAgICAgICAgICAgZGVmIG1ldGgoc2VsZikgLT4gaW50OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMFxuXG4gICAgICAgICAgICBkZWYgZnVuYyh4OiBQcm90bykgLT4gaW50OlxuICAgICAgICAgICAgICAgIHJldHVybiB4Lm1ldGgoKVxuXG4gICAgICAgICAgICBmdW5jKEMoKSkgICMgUGFzc2VzIHN0YXRpYyB0eXBlIGNoZWNrXG5cbiAgICAgICAgU2VlIFBFUCA1NDQgZm9yIGRldGFpbHMuIFByb3RvY29sIGNsYXNzZXMgZGVjb3JhdGVkIHdpdGhcbiAgICAgICAgQHR5cGluZ19leHRlbnNpb25zLnJ1bnRpbWUgYWN0IGFzIHNpbXBsZS1taW5kZWQgcnVudGltZSBwcm90b2NvbCB0aGF0IGNoZWNrc1xuICAgICAgICBvbmx5IHRoZSBwcmVzZW5jZSBvZiBnaXZlbiBhdHRyaWJ1dGVzLCBpZ25vcmluZyB0aGVpciB0eXBlIHNpZ25hdHVyZXMuXG5cbiAgICAgICAgUHJvdG9jb2wgY2xhc3NlcyBjYW4gYmUgZ2VuZXJpYywgdGhleSBhcmUgZGVmaW5lZCBhczo6XG5cbiAgICAgICAgICAgIGNsYXNzIEdlblByb3RvKFByb3RvY29sW1RdKTpcbiAgICAgICAgICAgICAgICBkZWYgbWV0aChzZWxmKSAtPiBUOlxuICAgICAgICAgICAgICAgICAgICAuLi5cbiAgICAgICAgIiIiXG4gICAgICAgIF9fc2xvdHNfXyA9ICgpXG4gICAgICAgIF9pc19wcm90b2NvbCA9IFRydWVcblxuICAgICAgICBkZWYgX19uZXdfXyhjbHMsICphcmdzLCAqKmt3ZHMpOlxuICAgICAgICAgICAgaWYgY2xzIGlzIFByb3RvY29sOlxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiVHlwZSBQcm90b2NvbCBjYW5ub3QgYmUgaW5zdGFudGlhdGVkOyAiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJpdCBjYW4gb25seSBiZSB1c2VkIGFzIGEgYmFzZSBjbGFzcyIpXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIoKS5fX25ld19fKGNscylcblxuICAgICAgICBAdHlwaW5nLl90cF9jYWNoZVxuICAgICAgICBkZWYgX19jbGFzc19nZXRpdGVtX18oY2xzLCBwYXJhbXMpOlxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocGFyYW1zLCB0dXBsZSk6XG4gICAgICAgICAgICAgICAgcGFyYW1zID0gKHBhcmFtcywpXG4gICAgICAgICAgICBpZiBub3QgcGFyYW1zIGFuZCBjbHMgaXMgbm90IHR5cGluZy5UdXBsZTpcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGYiUGFyYW1ldGVyIGxpc3QgdG8ge2Nscy5fX3F1YWxuYW1lX199Wy4uLl0gY2Fubm90IGJlIGVtcHR5IilcbiAgICAgICAgICAgIG1zZyA9ICJQYXJhbWV0ZXJzIHRvIGdlbmVyaWMgdHlwZXMgbXVzdCBiZSB0eXBlcy4iXG4gICAgICAgICAgICBwYXJhbXMgPSB0dXBsZSh0eXBpbmcuX3R5cGVfY2hlY2socCwgbXNnKSBmb3IgcCBpbiBwYXJhbXMpICAjIG5vcWFcbiAgICAgICAgICAgIGlmIGNscyBpcyBQcm90b2NvbDpcbiAgICAgICAgICAgICAgICAjIEdlbmVyaWMgY2FuIG9ubHkgYmUgc3Vic2NyaXB0ZWQgd2l0aCB1bmlxdWUgdHlwZSB2YXJpYWJsZXMuXG4gICAgICAgICAgICAgICAgaWYgbm90IGFsbChpc2luc3RhbmNlKHAsIHR5cGluZy5UeXBlVmFyKSBmb3IgcCBpbiBwYXJhbXMpOlxuICAgICAgICAgICAgICAgICAgICBpID0gMFxuICAgICAgICAgICAgICAgICAgICB3aGlsZSBpc2luc3RhbmNlKHBhcmFtc1tpXSwgdHlwaW5nLlR5cGVWYXIpOlxuICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAxXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICJQYXJhbWV0ZXJzIHRvIFByb3RvY29sWy4uLl0gbXVzdCBhbGwgYmUgdHlwZSB2YXJpYWJsZXMuIlxuICAgICAgICAgICAgICAgICAgICAgICAgZiIgUGFyYW1ldGVyIHtpICsgMX0gaXMge3BhcmFtc1tpXX0iKVxuICAgICAgICAgICAgICAgIGlmIGxlbihzZXQocGFyYW1zKSkgIT0gbGVuKHBhcmFtcyk6XG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICJQYXJhbWV0ZXJzIHRvIFByb3RvY29sWy4uLl0gbXVzdCBhbGwgYmUgdW5pcXVlIilcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgIyBTdWJzY3JpcHRpbmcgYSByZWd1bGFyIEdlbmVyaWMgc3ViY2xhc3MuXG4gICAgICAgICAgICAgICAgX2NoZWNrX2dlbmVyaWMoY2xzLCBwYXJhbXMsIGxlbihjbHMuX19wYXJhbWV0ZXJzX18pKVxuICAgICAgICAgICAgcmV0dXJuIHR5cGluZy5fR2VuZXJpY0FsaWFzKGNscywgcGFyYW1zKVxuXG4gICAgICAgIGRlZiBfX2luaXRfc3ViY2xhc3NfXyhjbHMsICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgICAgICB0dmFycyA9IFtdXG4gICAgICAgICAgICBpZiBcJ19fb3JpZ19iYXNlc19fXCcgaW4gY2xzLl9fZGljdF9fOlxuICAgICAgICAgICAgICAgIGVycm9yID0gdHlwaW5nLkdlbmVyaWMgaW4gY2xzLl9fb3JpZ19iYXNlc19fXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGVycm9yID0gdHlwaW5nLkdlbmVyaWMgaW4gY2xzLl9fYmFzZXNfX1xuICAgICAgICAgICAgaWYgZXJyb3I6XG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJDYW5ub3QgaW5oZXJpdCBmcm9tIHBsYWluIEdlbmVyaWMiKVxuICAgICAgICAgICAgaWYgXCdfX29yaWdfYmFzZXNfX1wnIGluIGNscy5fX2RpY3RfXzpcbiAgICAgICAgICAgICAgICB0dmFycyA9IHR5cGluZy5fY29sbGVjdF90eXBlX3ZhcnMoY2xzLl9fb3JpZ19iYXNlc19fKVxuICAgICAgICAgICAgICAgICMgTG9vayBmb3IgR2VuZXJpY1tUMSwgLi4uLCBUbl0gb3IgUHJvdG9jb2xbVDEsIC4uLiwgVG5dLlxuICAgICAgICAgICAgICAgICMgSWYgZm91bmQsIHR2YXJzIG11c3QgYmUgYSBzdWJzZXQgb2YgaXQuXG4gICAgICAgICAgICAgICAgIyBJZiBub3QgZm91bmQsIHR2YXJzIGlzIGl0LlxuICAgICAgICAgICAgICAgICMgQWxzbyBjaGVjayBmb3IgYW5kIHJlamVjdCBwbGFpbiBHZW5lcmljLFxuICAgICAgICAgICAgICAgICMgYW5kIHJlamVjdCBtdWx0aXBsZSBHZW5lcmljWy4uLl0gYW5kL29yIFByb3RvY29sWy4uLl0uXG4gICAgICAgICAgICAgICAgZ3ZhcnMgPSBOb25lXG4gICAgICAgICAgICAgICAgZm9yIGJhc2UgaW4gY2xzLl9fb3JpZ19iYXNlc19fOlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNpbnN0YW5jZShiYXNlLCB0eXBpbmcuX0dlbmVyaWNBbGlhcykgYW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZS5fX29yaWdpbl9fIGluICh0eXBpbmcuR2VuZXJpYywgUHJvdG9jb2wpKTpcbiAgICAgICAgICAgICAgICAgICAgICAgICMgZm9yIGVycm9yIG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVfYmFzZSA9IGJhc2UuX19vcmlnaW5fXy5fX25hbWVfX1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ3ZhcnMgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ2Fubm90IGluaGVyaXQgZnJvbSBHZW5lcmljWy4uLl0iXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgYW5kL29yIFByb3RvY29sWy4uLl0gbXVsdGlwbGUgdHlwZXMuIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGd2YXJzID0gYmFzZS5fX3BhcmFtZXRlcnNfX1xuICAgICAgICAgICAgICAgIGlmIGd2YXJzIGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgICAgIGd2YXJzID0gdHZhcnNcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICB0dmFyc2V0ID0gc2V0KHR2YXJzKVxuICAgICAgICAgICAgICAgICAgICBndmFyc2V0ID0gc2V0KGd2YXJzKVxuICAgICAgICAgICAgICAgICAgICBpZiBub3QgdHZhcnNldCA8PSBndmFyc2V0OlxuICAgICAgICAgICAgICAgICAgICAgICAgc192YXJzID0gXCcsIFwnLmpvaW4oc3RyKHQpIGZvciB0IGluIHR2YXJzIGlmIHQgbm90IGluIGd2YXJzZXQpXG4gICAgICAgICAgICAgICAgICAgICAgICBzX2FyZ3MgPSBcJywgXCcuam9pbihzdHIoZykgZm9yIGcgaW4gZ3ZhcnMpXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJTb21lIHR5cGUgdmFyaWFibGVzICh7c192YXJzfSkgYXJlIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYiIG5vdCBsaXN0ZWQgaW4ge3RoZV9iYXNlfVt7c19hcmdzfV0iKVxuICAgICAgICAgICAgICAgICAgICB0dmFycyA9IGd2YXJzXG4gICAgICAgICAgICBjbHMuX19wYXJhbWV0ZXJzX18gPSB0dXBsZSh0dmFycylcblxuICAgICAgICAgICAgIyBEZXRlcm1pbmUgaWYgdGhpcyBpcyBhIHByb3RvY29sIG9yIGEgY29uY3JldGUgc3ViY2xhc3MuXG4gICAgICAgICAgICBpZiBub3QgY2xzLl9fZGljdF9fLmdldChcJ19pc19wcm90b2NvbFwnLCBOb25lKTpcbiAgICAgICAgICAgICAgICBjbHMuX2lzX3Byb3RvY29sID0gYW55KGIgaXMgUHJvdG9jb2wgZm9yIGIgaW4gY2xzLl9fYmFzZXNfXylcblxuICAgICAgICAgICAgIyBTZXQgKG9yIG92ZXJyaWRlKSB0aGUgcHJvdG9jb2wgc3ViY2xhc3MgaG9vay5cbiAgICAgICAgICAgIGRlZiBfcHJvdG9faG9vayhvdGhlcik6XG4gICAgICAgICAgICAgICAgaWYgbm90IGNscy5fX2RpY3RfXy5nZXQoXCdfaXNfcHJvdG9jb2xcJywgTm9uZSk6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxuICAgICAgICAgICAgICAgIGlmIG5vdCBnZXRhdHRyKGNscywgXCdfaXNfcnVudGltZV9wcm90b2NvbFwnLCBGYWxzZSk6XG4gICAgICAgICAgICAgICAgICAgIGlmIHN5cy5fZ2V0ZnJhbWUoMikuZl9nbG9iYWxzW1wnX19uYW1lX19cJ10gaW4gW1wnYWJjXCcsIFwnZnVuY3Rvb2xzXCddOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiSW5zdGFuY2UgYW5kIGNsYXNzIGNoZWNrcyBjYW4gb25seSBiZSB1c2VkIHdpdGgiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIEBydW50aW1lIHByb3RvY29scyIpXG4gICAgICAgICAgICAgICAgaWYgbm90IF9pc19jYWxsYWJsZV9tZW1iZXJzX29ubHkoY2xzKTpcbiAgICAgICAgICAgICAgICAgICAgaWYgc3lzLl9nZXRmcmFtZSgyKS5mX2dsb2JhbHNbXCdfX25hbWVfX1wnXSBpbiBbXCdhYmNcJywgXCdmdW5jdG9vbHNcJ106XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJQcm90b2NvbHMgd2l0aCBub24tbWV0aG9kIG1lbWJlcnMiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIGRvblwndCBzdXBwb3J0IGlzc3ViY2xhc3MoKSIpXG4gICAgICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIHR5cGUpOlxuICAgICAgICAgICAgICAgICAgICAjIFNhbWUgZXJyb3IgYXMgZm9yIGlzc3ViY2xhc3MoMSwgaW50KVxuICAgICAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXCdpc3N1YmNsYXNzKCkgYXJnIDEgbXVzdCBiZSBhIGNsYXNzXCcpXG4gICAgICAgICAgICAgICAgZm9yIGF0dHIgaW4gX2dldF9wcm90b2NvbF9hdHRycyhjbHMpOlxuICAgICAgICAgICAgICAgICAgICBmb3IgYmFzZSBpbiBvdGhlci5fX21yb19fOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgYXR0ciBpbiBiYXNlLl9fZGljdF9fOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGJhc2UuX19kaWN0X19bYXR0cl0gaXMgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFubm90YXRpb25zID0gZ2V0YXR0cihiYXNlLCBcJ19fYW5ub3RhdGlvbnNfX1wnLCB7fSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc2luc3RhbmNlKGFubm90YXRpb25zLCB0eXBpbmcuTWFwcGluZykgYW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHIgaW4gYW5ub3RhdGlvbnMgYW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzaW5zdGFuY2Uob3RoZXIsIF9Qcm90b2NvbE1ldGEpIGFuZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdGhlci5faXNfcHJvdG9jb2wpOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxuICAgICAgICAgICAgaWYgXCdfX3N1YmNsYXNzaG9va19fXCcgbm90IGluIGNscy5fX2RpY3RfXzpcbiAgICAgICAgICAgICAgICBjbHMuX19zdWJjbGFzc2hvb2tfXyA9IF9wcm90b19ob29rXG5cbiAgICAgICAgICAgICMgV2UgaGF2ZSBub3RoaW5nIG1vcmUgdG8gZG8gZm9yIG5vbi1wcm90b2NvbHMuXG4gICAgICAgICAgICBpZiBub3QgY2xzLl9pc19wcm90b2NvbDpcbiAgICAgICAgICAgICAgICByZXR1cm5cblxuICAgICAgICAgICAgIyBDaGVjayBjb25zaXN0ZW5jeSBvZiBiYXNlcy5cbiAgICAgICAgICAgIGZvciBiYXNlIGluIGNscy5fX2Jhc2VzX186XG4gICAgICAgICAgICAgICAgaWYgbm90IChiYXNlIGluIChvYmplY3QsIHR5cGluZy5HZW5lcmljKSBvclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZS5fX21vZHVsZV9fID09IFwnY29sbGVjdGlvbnMuYWJjXCcgYW5kXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlLl9fbmFtZV9fIGluIF9QUk9UT19XSElURUxJU1Qgb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzaW5zdGFuY2UoYmFzZSwgX1Byb3RvY29sTWV0YSkgYW5kIGJhc2UuX2lzX3Byb3RvY29sKTpcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFwnUHJvdG9jb2xzIGNhbiBvbmx5IGluaGVyaXQgZnJvbSBvdGhlclwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmXCcgcHJvdG9jb2xzLCBnb3Qge3JlcHIoYmFzZSl9XCcpXG4gICAgICAgICAgICBjbHMuX19pbml0X18gPSBfbm9faW5pdFxuXG5cbiMgMy44K1xuaWYgaGFzYXR0cih0eXBpbmcsIFwncnVudGltZV9jaGVja2FibGVcJyk6XG4gICAgcnVudGltZV9jaGVja2FibGUgPSB0eXBpbmcucnVudGltZV9jaGVja2FibGVcbiMgMy43XG5lbHNlOlxuICAgIGRlZiBydW50aW1lX2NoZWNrYWJsZShjbHMpOlxuICAgICAgICAiIiJNYXJrIGEgcHJvdG9jb2wgY2xhc3MgYXMgYSBydW50aW1lIHByb3RvY29sLCBzbyB0aGF0IGl0XG4gICAgICAgIGNhbiBiZSB1c2VkIHdpdGggaXNpbnN0YW5jZSgpIGFuZCBpc3N1YmNsYXNzKCkuIFJhaXNlIFR5cGVFcnJvclxuICAgICAgICBpZiBhcHBsaWVkIHRvIGEgbm9uLXByb3RvY29sIGNsYXNzLlxuXG4gICAgICAgIFRoaXMgYWxsb3dzIGEgc2ltcGxlLW1pbmRlZCBzdHJ1Y3R1cmFsIGNoZWNrIHZlcnkgc2ltaWxhciB0byB0aGVcbiAgICAgICAgb25lLW9mZnMgaW4gY29sbGVjdGlvbnMuYWJjIHN1Y2ggYXMgSGFzaGFibGUuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShjbHMsIF9Qcm90b2NvbE1ldGEpIG9yIG5vdCBjbHMuX2lzX3Byb3RvY29sOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFwnQHJ1bnRpbWVfY2hlY2thYmxlIGNhbiBiZSBvbmx5IGFwcGxpZWQgdG8gcHJvdG9jb2wgY2xhc3NlcyxcJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZcJyBnb3Qge2NscyFyfVwnKVxuICAgICAgICBjbHMuX2lzX3J1bnRpbWVfcHJvdG9jb2wgPSBUcnVlXG4gICAgICAgIHJldHVybiBjbHNcblxuXG4jIEV4aXN0cyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5ydW50aW1lID0gcnVudGltZV9jaGVja2FibGVcblxuXG4jIDMuOCtcbmlmIGhhc2F0dHIodHlwaW5nLCBcJ1N1cHBvcnRzSW5kZXhcJyk6XG4gICAgU3VwcG9ydHNJbmRleCA9IHR5cGluZy5TdXBwb3J0c0luZGV4XG4jIDMuN1xuZWxzZTpcbiAgICBAcnVudGltZV9jaGVja2FibGVcbiAgICBjbGFzcyBTdXBwb3J0c0luZGV4KFByb3RvY29sKTpcbiAgICAgICAgX19zbG90c19fID0gKClcblxuICAgICAgICBAYWJjLmFic3RyYWN0bWV0aG9kXG4gICAgICAgIGRlZiBfX2luZGV4X18oc2VsZikgLT4gaW50OlxuICAgICAgICAgICAgcGFzc1xuXG5cbmlmIGhhc2F0dHIodHlwaW5nLCAiUmVxdWlyZWQiKTpcbiAgICAjIFRoZSBzdGFuZGFyZCBsaWJyYXJ5IFR5cGVkRGljdCBpbiBQeXRob24gMy44IGRvZXMgbm90IHN0b3JlIHJ1bnRpbWUgaW5mb3JtYXRpb25cbiAgICAjIGFib3V0IHdoaWNoIChpZiBhbnkpIGtleXMgYXJlIG9wdGlvbmFsLiAgU2VlIGh0dHBzOi8vYnVncy5weXRob24ub3JnL2lzc3VlMzg4MzRcbiAgICAjIFRoZSBzdGFuZGFyZCBsaWJyYXJ5IFR5cGVkRGljdCBpbiBQeXRob24gMy45LjAvMSBkb2VzIG5vdCBob25vdXIgdGhlICJ0b3RhbCJcbiAgICAjIGtleXdvcmQgd2l0aCBvbGQtc3R5bGUgVHlwZWREaWN0KCkuICBTZWUgaHR0cHM6Ly9idWdzLnB5dGhvbi5vcmcvaXNzdWU0MjA1OVxuICAgICMgVGhlIHN0YW5kYXJkIGxpYnJhcnkgVHlwZWREaWN0IGJlbG93IFB5dGhvbiAzLjExIGRvZXMgbm90IHN0b3JlIHJ1bnRpbWVcbiAgICAjIGluZm9ybWF0aW9uIGFib3V0IG9wdGlvbmFsIGFuZCByZXF1aXJlZCBrZXlzIHdoZW4gdXNpbmcgUmVxdWlyZWQgb3IgTm90UmVxdWlyZWQuXG4gICAgVHlwZWREaWN0ID0gdHlwaW5nLlR5cGVkRGljdFxuICAgIF9UeXBlZERpY3RNZXRhID0gdHlwaW5nLl9UeXBlZERpY3RNZXRhXG4gICAgaXNfdHlwZWRkaWN0ID0gdHlwaW5nLmlzX3R5cGVkZGljdFxuZWxzZTpcbiAgICBkZWYgX2NoZWNrX2ZhaWxzKGNscywgb3RoZXIpOlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBpZiBzeXMuX2dldGZyYW1lKDEpLmZfZ2xvYmFsc1tcJ19fbmFtZV9fXCddIG5vdCBpbiBbXCdhYmNcJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCdmdW5jdG9vbHNcJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCd0eXBpbmdcJ106XG4gICAgICAgICAgICAgICAgIyBUeXBlZCBkaWN0cyBhcmUgb25seSBmb3Igc3RhdGljIHN0cnVjdHVyYWwgc3VidHlwaW5nLlxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcJ1R5cGVkRGljdCBkb2VzIG5vdCBzdXBwb3J0IGluc3RhbmNlIGFuZCBjbGFzcyBjaGVja3NcJylcbiAgICAgICAgZXhjZXB0IChBdHRyaWJ1dGVFcnJvciwgVmFsdWVFcnJvcik6XG4gICAgICAgICAgICBwYXNzXG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgZGVmIF9kaWN0X25ldygqYXJncywgKiprd2FyZ3MpOlxuICAgICAgICBpZiBub3QgYXJnczpcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcJ1R5cGVkRGljdC5fX25ld19fKCk6IG5vdCBlbm91Z2ggYXJndW1lbnRzXCcpXG4gICAgICAgIF8sIGFyZ3MgPSBhcmdzWzBdLCBhcmdzWzE6XSAgIyBhbGxvdyB0aGUgImNscyIga2V5d29yZCBiZSBwYXNzZWRcbiAgICAgICAgcmV0dXJuIGRpY3QoKmFyZ3MsICoqa3dhcmdzKVxuXG4gICAgX2RpY3RfbmV3Ll9fdGV4dF9zaWduYXR1cmVfXyA9IFwnKCRjbHMsIF90eXBlbmFtZSwgX2ZpZWxkcz1Ob25lLCAvLCAqKmt3YXJncylcJ1xuXG4gICAgZGVmIF90eXBlZGRpY3RfbmV3KCphcmdzLCB0b3RhbD1UcnVlLCAqKmt3YXJncyk6XG4gICAgICAgIGlmIG5vdCBhcmdzOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFwnVHlwZWREaWN0Ll9fbmV3X18oKTogbm90IGVub3VnaCBhcmd1bWVudHNcJylcbiAgICAgICAgXywgYXJncyA9IGFyZ3NbMF0sIGFyZ3NbMTpdICAjIGFsbG93IHRoZSAiY2xzIiBrZXl3b3JkIGJlIHBhc3NlZFxuICAgICAgICBpZiBhcmdzOlxuICAgICAgICAgICAgdHlwZW5hbWUsIGFyZ3MgPSBhcmdzWzBdLCBhcmdzWzE6XSAgIyBhbGxvdyB0aGUgIl90eXBlbmFtZSIga2V5d29yZCBiZSBwYXNzZWRcbiAgICAgICAgZWxpZiBcJ190eXBlbmFtZVwnIGluIGt3YXJnczpcbiAgICAgICAgICAgIHR5cGVuYW1lID0ga3dhcmdzLnBvcChcJ190eXBlbmFtZVwnKVxuICAgICAgICAgICAgaW1wb3J0IHdhcm5pbmdzXG4gICAgICAgICAgICB3YXJuaW5ncy53YXJuKCJQYXNzaW5nIFwnX3R5cGVuYW1lXCcgYXMga2V5d29yZCBhcmd1bWVudCBpcyBkZXByZWNhdGVkIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLCBzdGFja2xldmVsPTIpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlR5cGVkRGljdC5fX25ld19fKCkgbWlzc2luZyAxIHJlcXVpcmVkIHBvc2l0aW9uYWwgIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhcmd1bWVudDogXCdfdHlwZW5hbWVcJyIpXG4gICAgICAgIGlmIGFyZ3M6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgZmllbGRzLCA9IGFyZ3MgICMgYWxsb3cgdGhlICJfZmllbGRzIiBrZXl3b3JkIGJlIHBhc3NlZFxuICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFwnVHlwZWREaWN0Ll9fbmV3X18oKSB0YWtlcyBmcm9tIDIgdG8gMyBcJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmXCdwb3NpdGlvbmFsIGFyZ3VtZW50cyBidXQge2xlbihhcmdzKSArIDJ9IFwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwnd2VyZSBnaXZlblwnKVxuICAgICAgICBlbGlmIFwnX2ZpZWxkc1wnIGluIGt3YXJncyBhbmQgbGVuKGt3YXJncykgPT0gMTpcbiAgICAgICAgICAgIGZpZWxkcyA9IGt3YXJncy5wb3AoXCdfZmllbGRzXCcpXG4gICAgICAgICAgICBpbXBvcnQgd2FybmluZ3NcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oIlBhc3NpbmcgXCdfZmllbGRzXCcgYXMga2V5d29yZCBhcmd1bWVudCBpcyBkZXByZWNhdGVkIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLCBzdGFja2xldmVsPTIpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBmaWVsZHMgPSBOb25lXG5cbiAgICAgICAgaWYgZmllbGRzIGlzIE5vbmU6XG4gICAgICAgICAgICBmaWVsZHMgPSBrd2FyZ3NcbiAgICAgICAgZWxpZiBrd2FyZ3M6XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlR5cGVkRGljdCB0YWtlcyBlaXRoZXIgYSBkaWN0IG9yIGtleXdvcmQgYXJndW1lbnRzLCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIGJ1dCBub3QgYm90aCIpXG5cbiAgICAgICAgbnMgPSB7XCdfX2Fubm90YXRpb25zX19cJzogZGljdChmaWVsZHMpfVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICAjIFNldHRpbmcgY29ycmVjdCBtb2R1bGUgaXMgbmVjZXNzYXJ5IHRvIG1ha2UgdHlwZWQgZGljdCBjbGFzc2VzIHBpY2tsZWFibGUuXG4gICAgICAgICAgICBuc1tcJ19fbW9kdWxlX19cJ10gPSBzeXMuX2dldGZyYW1lKDEpLmZfZ2xvYmFscy5nZXQoXCdfX25hbWVfX1wnLCBcJ19fbWFpbl9fXCcpXG4gICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIFZhbHVlRXJyb3IpOlxuICAgICAgICAgICAgcGFzc1xuXG4gICAgICAgIHJldHVybiBfVHlwZWREaWN0TWV0YSh0eXBlbmFtZSwgKCksIG5zLCB0b3RhbD10b3RhbClcblxuICAgIF90eXBlZGRpY3RfbmV3Ll9fdGV4dF9zaWduYXR1cmVfXyA9IChcJygkY2xzLCBfdHlwZW5hbWUsIF9maWVsZHM9Tm9uZSxcJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcJyAvLCAqLCB0b3RhbD1UcnVlLCAqKmt3YXJncylcJylcblxuICAgIGNsYXNzIF9UeXBlZERpY3RNZXRhKHR5cGUpOlxuICAgICAgICBkZWYgX19pbml0X18oY2xzLCBuYW1lLCBiYXNlcywgbnMsIHRvdGFsPVRydWUpOlxuICAgICAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhuYW1lLCBiYXNlcywgbnMpXG5cbiAgICAgICAgZGVmIF9fbmV3X18oY2xzLCBuYW1lLCBiYXNlcywgbnMsIHRvdGFsPVRydWUpOlxuICAgICAgICAgICAgIyBDcmVhdGUgbmV3IHR5cGVkIGRpY3QgY2xhc3Mgb2JqZWN0LlxuICAgICAgICAgICAgIyBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZGlyZWN0bHkgd2hlbiBUeXBlZERpY3QgaXMgc3ViY2xhc3NlZCxcbiAgICAgICAgICAgICMgb3IgdmlhIF90eXBlZGRpY3RfbmV3IHdoZW4gVHlwZWREaWN0IGlzIGluc3RhbnRpYXRlZC4gVGhpcyB3YXlcbiAgICAgICAgICAgICMgVHlwZWREaWN0IHN1cHBvcnRzIGFsbCB0aHJlZSBzeW50YXhlcyBkZXNjcmliZWQgaW4gaXRzIGRvY3N0cmluZy5cbiAgICAgICAgICAgICMgU3ViY2xhc3NlcyBhbmQgaW5zdGFuY2VzIG9mIFR5cGVkRGljdCByZXR1cm4gYWN0dWFsIGRpY3Rpb25hcmllc1xuICAgICAgICAgICAgIyB2aWEgX2RpY3RfbmV3LlxuICAgICAgICAgICAgbnNbXCdfX25ld19fXCddID0gX3R5cGVkZGljdF9uZXcgaWYgbmFtZSA9PSBcJ1R5cGVkRGljdFwnIGVsc2UgX2RpY3RfbmV3XG4gICAgICAgICAgICB0cF9kaWN0ID0gc3VwZXIoKS5fX25ld19fKGNscywgbmFtZSwgKGRpY3QsKSwgbnMpXG5cbiAgICAgICAgICAgIGFubm90YXRpb25zID0ge31cbiAgICAgICAgICAgIG93bl9hbm5vdGF0aW9ucyA9IG5zLmdldChcJ19fYW5ub3RhdGlvbnNfX1wnLCB7fSlcbiAgICAgICAgICAgIG1zZyA9ICJUeXBlZERpY3QoXCdOYW1lXCcsIHtmMDogdDAsIGYxOiB0MSwgLi4ufSk7IGVhY2ggdCBtdXN0IGJlIGEgdHlwZSJcbiAgICAgICAgICAgIG93bl9hbm5vdGF0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBuOiB0eXBpbmcuX3R5cGVfY2hlY2sodHAsIG1zZykgZm9yIG4sIHRwIGluIG93bl9hbm5vdGF0aW9ucy5pdGVtcygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXF1aXJlZF9rZXlzID0gc2V0KClcbiAgICAgICAgICAgIG9wdGlvbmFsX2tleXMgPSBzZXQoKVxuXG4gICAgICAgICAgICBmb3IgYmFzZSBpbiBiYXNlczpcbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9ucy51cGRhdGUoYmFzZS5fX2RpY3RfXy5nZXQoXCdfX2Fubm90YXRpb25zX19cJywge30pKVxuICAgICAgICAgICAgICAgIHJlcXVpcmVkX2tleXMudXBkYXRlKGJhc2UuX19kaWN0X18uZ2V0KFwnX19yZXF1aXJlZF9rZXlzX19cJywgKCkpKVxuICAgICAgICAgICAgICAgIG9wdGlvbmFsX2tleXMudXBkYXRlKGJhc2UuX19kaWN0X18uZ2V0KFwnX19vcHRpb25hbF9rZXlzX19cJywgKCkpKVxuXG4gICAgICAgICAgICBhbm5vdGF0aW9ucy51cGRhdGUob3duX2Fubm90YXRpb25zKVxuICAgICAgICAgICAgZm9yIGFubm90YXRpb25fa2V5LCBhbm5vdGF0aW9uX3R5cGUgaW4gb3duX2Fubm90YXRpb25zLml0ZW1zKCk6XG4gICAgICAgICAgICAgICAgYW5ub3RhdGlvbl9vcmlnaW4gPSBnZXRfb3JpZ2luKGFubm90YXRpb25fdHlwZSlcbiAgICAgICAgICAgICAgICBpZiBhbm5vdGF0aW9uX29yaWdpbiBpcyBBbm5vdGF0ZWQ6XG4gICAgICAgICAgICAgICAgICAgIGFubm90YXRpb25fYXJncyA9IGdldF9hcmdzKGFubm90YXRpb25fdHlwZSlcbiAgICAgICAgICAgICAgICAgICAgaWYgYW5ub3RhdGlvbl9hcmdzOlxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvbl90eXBlID0gYW5ub3RhdGlvbl9hcmdzWzBdXG4gICAgICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uX29yaWdpbiA9IGdldF9vcmlnaW4oYW5ub3RhdGlvbl90eXBlKVxuXG4gICAgICAgICAgICAgICAgaWYgYW5ub3RhdGlvbl9vcmlnaW4gaXMgUmVxdWlyZWQ6XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkX2tleXMuYWRkKGFubm90YXRpb25fa2V5KVxuICAgICAgICAgICAgICAgIGVsaWYgYW5ub3RhdGlvbl9vcmlnaW4gaXMgTm90UmVxdWlyZWQ6XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsX2tleXMuYWRkKGFubm90YXRpb25fa2V5KVxuICAgICAgICAgICAgICAgIGVsaWYgdG90YWw6XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkX2tleXMuYWRkKGFubm90YXRpb25fa2V5KVxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsX2tleXMuYWRkKGFubm90YXRpb25fa2V5KVxuXG4gICAgICAgICAgICB0cF9kaWN0Ll9fYW5ub3RhdGlvbnNfXyA9IGFubm90YXRpb25zXG4gICAgICAgICAgICB0cF9kaWN0Ll9fcmVxdWlyZWRfa2V5c19fID0gZnJvemVuc2V0KHJlcXVpcmVkX2tleXMpXG4gICAgICAgICAgICB0cF9kaWN0Ll9fb3B0aW9uYWxfa2V5c19fID0gZnJvemVuc2V0KG9wdGlvbmFsX2tleXMpXG4gICAgICAgICAgICBpZiBub3QgaGFzYXR0cih0cF9kaWN0LCBcJ19fdG90YWxfX1wnKTpcbiAgICAgICAgICAgICAgICB0cF9kaWN0Ll9fdG90YWxfXyA9IHRvdGFsXG4gICAgICAgICAgICByZXR1cm4gdHBfZGljdFxuXG4gICAgICAgIF9faW5zdGFuY2VjaGVja19fID0gX19zdWJjbGFzc2NoZWNrX18gPSBfY2hlY2tfZmFpbHNcblxuICAgIFR5cGVkRGljdCA9IF9UeXBlZERpY3RNZXRhKFwnVHlwZWREaWN0XCcsIChkaWN0LCksIHt9KVxuICAgIFR5cGVkRGljdC5fX21vZHVsZV9fID0gX19uYW1lX19cbiAgICBUeXBlZERpY3QuX19kb2NfXyA9IFxcXG4gICAgICAgICIiIkEgc2ltcGxlIHR5cGVkIG5hbWUgc3BhY2UuIEF0IHJ1bnRpbWUgaXQgaXMgZXF1aXZhbGVudCB0byBhIHBsYWluIGRpY3QuXG5cbiAgICAgICAgVHlwZWREaWN0IGNyZWF0ZXMgYSBkaWN0aW9uYXJ5IHR5cGUgdGhhdCBleHBlY3RzIGFsbCBvZiBpdHNcbiAgICAgICAgaW5zdGFuY2VzIHRvIGhhdmUgYSBjZXJ0YWluIHNldCBvZiBrZXlzLCB3aXRoIGVhY2gga2V5XG4gICAgICAgIGFzc29jaWF0ZWQgd2l0aCBhIHZhbHVlIG9mIGEgY29uc2lzdGVudCB0eXBlLiBUaGlzIGV4cGVjdGF0aW9uXG4gICAgICAgIGlzIG5vdCBjaGVja2VkIGF0IHJ1bnRpbWUgYnV0IGlzIG9ubHkgZW5mb3JjZWQgYnkgdHlwZSBjaGVja2Vycy5cbiAgICAgICAgVXNhZ2U6OlxuXG4gICAgICAgICAgICBjbGFzcyBQb2ludDJEKFR5cGVkRGljdCk6XG4gICAgICAgICAgICAgICAgeDogaW50XG4gICAgICAgICAgICAgICAgeTogaW50XG4gICAgICAgICAgICAgICAgbGFiZWw6IHN0clxuXG4gICAgICAgICAgICBhOiBQb2ludDJEID0ge1wneFwnOiAxLCBcJ3lcJzogMiwgXCdsYWJlbFwnOiBcJ2dvb2RcJ30gICMgT0tcbiAgICAgICAgICAgIGI6IFBvaW50MkQgPSB7XCd6XCc6IDMsIFwnbGFiZWxcJzogXCdiYWRcJ30gICAgICAgICAgICMgRmFpbHMgdHlwZSBjaGVja1xuXG4gICAgICAgICAgICBhc3NlcnQgUG9pbnQyRCh4PTEsIHk9MiwgbGFiZWw9XCdmaXJzdFwnKSA9PSBkaWN0KHg9MSwgeT0yLCBsYWJlbD1cJ2ZpcnN0XCcpXG5cbiAgICAgICAgVGhlIHR5cGUgaW5mbyBjYW4gYmUgYWNjZXNzZWQgdmlhIHRoZSBQb2ludDJELl9fYW5ub3RhdGlvbnNfXyBkaWN0LCBhbmRcbiAgICAgICAgdGhlIFBvaW50MkQuX19yZXF1aXJlZF9rZXlzX18gYW5kIFBvaW50MkQuX19vcHRpb25hbF9rZXlzX18gZnJvemVuc2V0cy5cbiAgICAgICAgVHlwZWREaWN0IHN1cHBvcnRzIHR3byBhZGRpdGlvbmFsIGVxdWl2YWxlbnQgZm9ybXM6OlxuXG4gICAgICAgICAgICBQb2ludDJEID0gVHlwZWREaWN0KFwnUG9pbnQyRFwnLCB4PWludCwgeT1pbnQsIGxhYmVsPXN0cilcbiAgICAgICAgICAgIFBvaW50MkQgPSBUeXBlZERpY3QoXCdQb2ludDJEXCcsIHtcJ3hcJzogaW50LCBcJ3lcJzogaW50LCBcJ2xhYmVsXCc6IHN0cn0pXG5cbiAgICAgICAgVGhlIGNsYXNzIHN5bnRheCBpcyBvbmx5IHN1cHBvcnRlZCBpbiBQeXRob24gMy42Kywgd2hpbGUgdHdvIG90aGVyXG4gICAgICAgIHN5bnRheCBmb3JtcyB3b3JrIGZvciBQeXRob24gMi43IGFuZCAzLjIrXG4gICAgICAgICIiIlxuXG4gICAgaWYgaGFzYXR0cih0eXBpbmcsICJfVHlwZWREaWN0TWV0YSIpOlxuICAgICAgICBfVFlQRURESUNUX1RZUEVTID0gKHR5cGluZy5fVHlwZWREaWN0TWV0YSwgX1R5cGVkRGljdE1ldGEpXG4gICAgZWxzZTpcbiAgICAgICAgX1RZUEVERElDVF9UWVBFUyA9IChfVHlwZWREaWN0TWV0YSwpXG5cbiAgICBkZWYgaXNfdHlwZWRkaWN0KHRwKTpcbiAgICAgICAgIiIiQ2hlY2sgaWYgYW4gYW5ub3RhdGlvbiBpcyBhIFR5cGVkRGljdCBjbGFzc1xuXG4gICAgICAgIEZvciBleGFtcGxlOjpcbiAgICAgICAgICAgIGNsYXNzIEZpbG0oVHlwZWREaWN0KTpcbiAgICAgICAgICAgICAgICB0aXRsZTogc3RyXG4gICAgICAgICAgICAgICAgeWVhcjogaW50XG5cbiAgICAgICAgICAgIGlzX3R5cGVkZGljdChGaWxtKSAgIyA9PiBUcnVlXG4gICAgICAgICAgICBpc190eXBlZGRpY3QoVW5pb25bbGlzdCwgc3RyXSkgICMgPT4gRmFsc2VcbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiBpc2luc3RhbmNlKHRwLCB0dXBsZShfVFlQRURESUNUX1RZUEVTKSlcblxuXG5pZiBoYXNhdHRyKHR5cGluZywgImFzc2VydF90eXBlIik6XG4gICAgYXNzZXJ0X3R5cGUgPSB0eXBpbmcuYXNzZXJ0X3R5cGVcblxuZWxzZTpcbiAgICBkZWYgYXNzZXJ0X3R5cGUoX192YWwsIF9fdHlwKTpcbiAgICAgICAgIiIiQXNzZXJ0ICh0byB0aGUgdHlwZSBjaGVja2VyKSB0aGF0IHRoZSB2YWx1ZSBpcyBvZiB0aGUgZ2l2ZW4gdHlwZS5cblxuICAgICAgICBXaGVuIHRoZSB0eXBlIGNoZWNrZXIgZW5jb3VudGVycyBhIGNhbGwgdG8gYXNzZXJ0X3R5cGUoKSwgaXRcbiAgICAgICAgZW1pdHMgYW4gZXJyb3IgaWYgdGhlIHZhbHVlIGlzIG5vdCBvZiB0aGUgc3BlY2lmaWVkIHR5cGU6OlxuXG4gICAgICAgICAgICBkZWYgZ3JlZXQobmFtZTogc3RyKSAtPiBOb25lOlxuICAgICAgICAgICAgICAgIGFzc2VydF90eXBlKG5hbWUsIHN0cikgICMgb2tcbiAgICAgICAgICAgICAgICBhc3NlcnRfdHlwZShuYW1lLCBpbnQpICAjIHR5cGUgY2hlY2tlciBlcnJvclxuXG4gICAgICAgIEF0IHJ1bnRpbWUgdGhpcyByZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCB1bmNoYW5nZWQgYW5kIG90aGVyd2lzZVxuICAgICAgICBkb2VzIG5vdGhpbmcuXG4gICAgICAgICIiIlxuICAgICAgICByZXR1cm4gX192YWxcblxuXG5pZiBoYXNhdHRyKHR5cGluZywgIlJlcXVpcmVkIik6XG4gICAgZ2V0X3R5cGVfaGludHMgPSB0eXBpbmcuZ2V0X3R5cGVfaGludHNcbmVsc2U6XG4gICAgaW1wb3J0IGZ1bmN0b29sc1xuICAgIGltcG9ydCB0eXBlc1xuXG4gICAgIyByZXBsYWNlcyBfc3RyaXBfYW5ub3RhdGlvbnMoKVxuICAgIGRlZiBfc3RyaXBfZXh0cmFzKHQpOlxuICAgICAgICAiIiJTdHJpcHMgQW5ub3RhdGVkLCBSZXF1aXJlZCBhbmQgTm90UmVxdWlyZWQgZnJvbSBhIGdpdmVuIHR5cGUuIiIiXG4gICAgICAgIGlmIGlzaW5zdGFuY2UodCwgX0Fubm90YXRlZEFsaWFzKTpcbiAgICAgICAgICAgIHJldHVybiBfc3RyaXBfZXh0cmFzKHQuX19vcmlnaW5fXylcbiAgICAgICAgaWYgaGFzYXR0cih0LCAiX19vcmlnaW5fXyIpIGFuZCB0Ll9fb3JpZ2luX18gaW4gKFJlcXVpcmVkLCBOb3RSZXF1aXJlZCk6XG4gICAgICAgICAgICByZXR1cm4gX3N0cmlwX2V4dHJhcyh0Ll9fYXJnc19fWzBdKVxuICAgICAgICBpZiBpc2luc3RhbmNlKHQsIHR5cGluZy5fR2VuZXJpY0FsaWFzKTpcbiAgICAgICAgICAgIHN0cmlwcGVkX2FyZ3MgPSB0dXBsZShfc3RyaXBfZXh0cmFzKGEpIGZvciBhIGluIHQuX19hcmdzX18pXG4gICAgICAgICAgICBpZiBzdHJpcHBlZF9hcmdzID09IHQuX19hcmdzX186XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRcbiAgICAgICAgICAgIHJldHVybiB0LmNvcHlfd2l0aChzdHJpcHBlZF9hcmdzKVxuICAgICAgICBpZiBoYXNhdHRyKHR5cGVzLCAiR2VuZXJpY0FsaWFzIikgYW5kIGlzaW5zdGFuY2UodCwgdHlwZXMuR2VuZXJpY0FsaWFzKTpcbiAgICAgICAgICAgIHN0cmlwcGVkX2FyZ3MgPSB0dXBsZShfc3RyaXBfZXh0cmFzKGEpIGZvciBhIGluIHQuX19hcmdzX18pXG4gICAgICAgICAgICBpZiBzdHJpcHBlZF9hcmdzID09IHQuX19hcmdzX186XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRcbiAgICAgICAgICAgIHJldHVybiB0eXBlcy5HZW5lcmljQWxpYXModC5fX29yaWdpbl9fLCBzdHJpcHBlZF9hcmdzKVxuICAgICAgICBpZiBoYXNhdHRyKHR5cGVzLCAiVW5pb25UeXBlIikgYW5kIGlzaW5zdGFuY2UodCwgdHlwZXMuVW5pb25UeXBlKTpcbiAgICAgICAgICAgIHN0cmlwcGVkX2FyZ3MgPSB0dXBsZShfc3RyaXBfZXh0cmFzKGEpIGZvciBhIGluIHQuX19hcmdzX18pXG4gICAgICAgICAgICBpZiBzdHJpcHBlZF9hcmdzID09IHQuX19hcmdzX186XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRcbiAgICAgICAgICAgIHJldHVybiBmdW5jdG9vbHMucmVkdWNlKG9wZXJhdG9yLm9yXywgc3RyaXBwZWRfYXJncylcblxuICAgICAgICByZXR1cm4gdFxuXG4gICAgZGVmIGdldF90eXBlX2hpbnRzKG9iaiwgZ2xvYmFsbnM9Tm9uZSwgbG9jYWxucz1Ob25lLCBpbmNsdWRlX2V4dHJhcz1GYWxzZSk6XG4gICAgICAgICIiIlJldHVybiB0eXBlIGhpbnRzIGZvciBhbiBvYmplY3QuXG5cbiAgICAgICAgVGhpcyBpcyBvZnRlbiB0aGUgc2FtZSBhcyBvYmouX19hbm5vdGF0aW9uc19fLCBidXQgaXQgaGFuZGxlc1xuICAgICAgICBmb3J3YXJkIHJlZmVyZW5jZXMgZW5jb2RlZCBhcyBzdHJpbmcgbGl0ZXJhbHMsIGFkZHMgT3B0aW9uYWxbdF0gaWYgYVxuICAgICAgICBkZWZhdWx0IHZhbHVlIGVxdWFsIHRvIE5vbmUgaXMgc2V0IGFuZCByZWN1cnNpdmVseSByZXBsYWNlcyBhbGxcbiAgICAgICAgXCdBbm5vdGF0ZWRbVCwgLi4uXVwnLCBcJ1JlcXVpcmVkW1RdXCcgb3IgXCdOb3RSZXF1aXJlZFtUXVwnIHdpdGggXCdUXCdcbiAgICAgICAgKHVubGVzcyBcJ2luY2x1ZGVfZXh0cmFzPVRydWVcJykuXG5cbiAgICAgICAgVGhlIGFyZ3VtZW50IG1heSBiZSBhIG1vZHVsZSwgY2xhc3MsIG1ldGhvZCwgb3IgZnVuY3Rpb24uIFRoZSBhbm5vdGF0aW9uc1xuICAgICAgICBhcmUgcmV0dXJuZWQgYXMgYSBkaWN0aW9uYXJ5LiBGb3IgY2xhc3NlcywgYW5ub3RhdGlvbnMgaW5jbHVkZSBhbHNvXG4gICAgICAgIGluaGVyaXRlZCBtZW1iZXJzLlxuXG4gICAgICAgIFR5cGVFcnJvciBpcyByYWlzZWQgaWYgdGhlIGFyZ3VtZW50IGlzIG5vdCBvZiBhIHR5cGUgdGhhdCBjYW4gY29udGFpblxuICAgICAgICBhbm5vdGF0aW9ucywgYW5kIGFuIGVtcHR5IGRpY3Rpb25hcnkgaXMgcmV0dXJuZWQgaWYgbm8gYW5ub3RhdGlvbnMgYXJlXG4gICAgICAgIHByZXNlbnQuXG5cbiAgICAgICAgQkVXQVJFIC0tIHRoZSBiZWhhdmlvciBvZiBnbG9iYWxucyBhbmQgbG9jYWxucyBpcyBjb3VudGVyaW50dWl0aXZlXG4gICAgICAgICh1bmxlc3MgeW91IGFyZSBmYW1pbGlhciB3aXRoIGhvdyBldmFsKCkgYW5kIGV4ZWMoKSB3b3JrKS4gIFRoZVxuICAgICAgICBzZWFyY2ggb3JkZXIgaXMgbG9jYWxzIGZpcnN0LCB0aGVuIGdsb2JhbHMuXG5cbiAgICAgICAgLSBJZiBubyBkaWN0IGFyZ3VtZW50cyBhcmUgcGFzc2VkLCBhbiBhdHRlbXB0IGlzIG1hZGUgdG8gdXNlIHRoZVxuICAgICAgICAgIGdsb2JhbHMgZnJvbSBvYmogKG9yIHRoZSByZXNwZWN0aXZlIG1vZHVsZVwncyBnbG9iYWxzIGZvciBjbGFzc2VzKSxcbiAgICAgICAgICBhbmQgdGhlc2UgYXJlIGFsc28gdXNlZCBhcyB0aGUgbG9jYWxzLiAgSWYgdGhlIG9iamVjdCBkb2VzIG5vdCBhcHBlYXJcbiAgICAgICAgICB0byBoYXZlIGdsb2JhbHMsIGFuIGVtcHR5IGRpY3Rpb25hcnkgaXMgdXNlZC5cblxuICAgICAgICAtIElmIG9uZSBkaWN0IGFyZ3VtZW50IGlzIHBhc3NlZCwgaXQgaXMgdXNlZCBmb3IgYm90aCBnbG9iYWxzIGFuZFxuICAgICAgICAgIGxvY2Fscy5cblxuICAgICAgICAtIElmIHR3byBkaWN0IGFyZ3VtZW50cyBhcmUgcGFzc2VkLCB0aGV5IHNwZWNpZnkgZ2xvYmFscyBhbmRcbiAgICAgICAgICBsb2NhbHMsIHJlc3BlY3RpdmVseS5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIGhhc2F0dHIodHlwaW5nLCAiQW5ub3RhdGVkIik6XG4gICAgICAgICAgICBoaW50ID0gdHlwaW5nLmdldF90eXBlX2hpbnRzKFxuICAgICAgICAgICAgICAgIG9iaiwgZ2xvYmFsbnM9Z2xvYmFsbnMsIGxvY2FsbnM9bG9jYWxucywgaW5jbHVkZV9leHRyYXM9VHJ1ZVxuICAgICAgICAgICAgKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgaGludCA9IHR5cGluZy5nZXRfdHlwZV9oaW50cyhvYmosIGdsb2JhbG5zPWdsb2JhbG5zLCBsb2NhbG5zPWxvY2FsbnMpXG4gICAgICAgIGlmIGluY2x1ZGVfZXh0cmFzOlxuICAgICAgICAgICAgcmV0dXJuIGhpbnRcbiAgICAgICAgcmV0dXJuIHtrOiBfc3RyaXBfZXh0cmFzKHQpIGZvciBrLCB0IGluIGhpbnQuaXRlbXMoKX1cblxuXG4jIFB5dGhvbiAzLjkrIGhhcyBQRVAgNTkzIChBbm5vdGF0ZWQpXG5pZiBoYXNhdHRyKHR5cGluZywgXCdBbm5vdGF0ZWRcJyk6XG4gICAgQW5ub3RhdGVkID0gdHlwaW5nLkFubm90YXRlZFxuICAgICMgTm90IGV4cG9ydGVkIGFuZCBub3QgYSBwdWJsaWMgQVBJLCBidXQgbmVlZGVkIGZvciBnZXRfb3JpZ2luKCkgYW5kIGdldF9hcmdzKClcbiAgICAjIHRvIHdvcmsuXG4gICAgX0Fubm90YXRlZEFsaWFzID0gdHlwaW5nLl9Bbm5vdGF0ZWRBbGlhc1xuIyAzLjctMy44XG5lbHNlOlxuICAgIGNsYXNzIF9Bbm5vdGF0ZWRBbGlhcyh0eXBpbmcuX0dlbmVyaWNBbGlhcywgX3Jvb3Q9VHJ1ZSk6XG4gICAgICAgICIiIlJ1bnRpbWUgcmVwcmVzZW50YXRpb24gb2YgYW4gYW5ub3RhdGVkIHR5cGUuXG5cbiAgICAgICAgQXQgaXRzIGNvcmUgXCdBbm5vdGF0ZWRbdCwgZGVjMSwgZGVjMiwgLi4uXVwnIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBcJ3RcJ1xuICAgICAgICB3aXRoIGV4dHJhIGFubm90YXRpb25zLiBUaGUgYWxpYXMgYmVoYXZlcyBsaWtlIGEgbm9ybWFsIHR5cGluZyBhbGlhcyxcbiAgICAgICAgaW5zdGFudGlhdGluZyBpcyB0aGUgc2FtZSBhcyBpbnN0YW50aWF0aW5nIHRoZSB1bmRlcmx5aW5nIHR5cGUsIGJpbmRpbmdcbiAgICAgICAgaXQgdG8gdHlwZXMgaXMgYWxzbyB0aGUgc2FtZS5cbiAgICAgICAgIiIiXG4gICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvcmlnaW4sIG1ldGFkYXRhKTpcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uob3JpZ2luLCBfQW5ub3RhdGVkQWxpYXMpOlxuICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gb3JpZ2luLl9fbWV0YWRhdGFfXyArIG1ldGFkYXRhXG4gICAgICAgICAgICAgICAgb3JpZ2luID0gb3JpZ2luLl9fb3JpZ2luX19cbiAgICAgICAgICAgIHN1cGVyKCkuX19pbml0X18ob3JpZ2luLCBvcmlnaW4pXG4gICAgICAgICAgICBzZWxmLl9fbWV0YWRhdGFfXyA9IG1ldGFkYXRhXG5cbiAgICAgICAgZGVmIGNvcHlfd2l0aChzZWxmLCBwYXJhbXMpOlxuICAgICAgICAgICAgYXNzZXJ0IGxlbihwYXJhbXMpID09IDFcbiAgICAgICAgICAgIG5ld190eXBlID0gcGFyYW1zWzBdXG4gICAgICAgICAgICByZXR1cm4gX0Fubm90YXRlZEFsaWFzKG5ld190eXBlLCBzZWxmLl9fbWV0YWRhdGFfXylcblxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gKGYidHlwaW5nX2V4dGVuc2lvbnMuQW5ub3RhdGVkW3t0eXBpbmcuX3R5cGVfcmVwcihzZWxmLl9fb3JpZ2luX18pfSwgIlxuICAgICAgICAgICAgICAgICAgICBmIntcJywgXCcuam9pbihyZXByKGEpIGZvciBhIGluIHNlbGYuX19tZXRhZGF0YV9fKX1dIilcblxuICAgICAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBvcGVyYXRvci5nZXRpdGVtLCAoXG4gICAgICAgICAgICAgICAgQW5ub3RhdGVkLCAoc2VsZi5fX29yaWdpbl9fLCkgKyBzZWxmLl9fbWV0YWRhdGFfX1xuICAgICAgICAgICAgKVxuXG4gICAgICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOlxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIF9Bbm5vdGF0ZWRBbGlhcyk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXG4gICAgICAgICAgICBpZiBzZWxmLl9fb3JpZ2luX18gIT0gb3RoZXIuX19vcmlnaW5fXzpcbiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2VcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9fbWV0YWRhdGFfXyA9PSBvdGhlci5fX21ldGFkYXRhX19cblxuICAgICAgICBkZWYgX19oYXNoX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gaGFzaCgoc2VsZi5fX29yaWdpbl9fLCBzZWxmLl9fbWV0YWRhdGFfXykpXG5cbiAgICBjbGFzcyBBbm5vdGF0ZWQ6XG4gICAgICAgICIiIkFkZCBjb250ZXh0IHNwZWNpZmljIG1ldGFkYXRhIHRvIGEgdHlwZS5cblxuICAgICAgICBFeGFtcGxlOiBBbm5vdGF0ZWRbaW50LCBydW50aW1lX2NoZWNrLlVuc2lnbmVkXSBpbmRpY2F0ZXMgdG8gdGhlXG4gICAgICAgIGh5cG90aGV0aWNhbCBydW50aW1lX2NoZWNrIG1vZHVsZSB0aGF0IHRoaXMgdHlwZSBpcyBhbiB1bnNpZ25lZCBpbnQuXG4gICAgICAgIEV2ZXJ5IG90aGVyIGNvbnN1bWVyIG9mIHRoaXMgdHlwZSBjYW4gaWdub3JlIHRoaXMgbWV0YWRhdGEgYW5kIHRyZWF0XG4gICAgICAgIHRoaXMgdHlwZSBhcyBpbnQuXG5cbiAgICAgICAgVGhlIGZpcnN0IGFyZ3VtZW50IHRvIEFubm90YXRlZCBtdXN0IGJlIGEgdmFsaWQgdHlwZSAoYW5kIHdpbGwgYmUgaW5cbiAgICAgICAgdGhlIF9fb3JpZ2luX18gZmllbGQpLCB0aGUgcmVtYWluaW5nIGFyZ3VtZW50cyBhcmUga2VwdCBhcyBhIHR1cGxlIGluXG4gICAgICAgIHRoZSBfX2V4dHJhX18gZmllbGQuXG5cbiAgICAgICAgRGV0YWlsczpcblxuICAgICAgICAtIEl0XCdzIGFuIGVycm9yIHRvIGNhbGwgYEFubm90YXRlZGAgd2l0aCBsZXNzIHRoYW4gdHdvIGFyZ3VtZW50cy5cbiAgICAgICAgLSBOZXN0ZWQgQW5ub3RhdGVkIGFyZSBmbGF0dGVuZWQ6OlxuXG4gICAgICAgICAgICBBbm5vdGF0ZWRbQW5ub3RhdGVkW1QsIEFubjEsIEFubjJdLCBBbm4zXSA9PSBBbm5vdGF0ZWRbVCwgQW5uMSwgQW5uMiwgQW5uM11cblxuICAgICAgICAtIEluc3RhbnRpYXRpbmcgYW4gYW5ub3RhdGVkIHR5cGUgaXMgZXF1aXZhbGVudCB0byBpbnN0YW50aWF0aW5nIHRoZVxuICAgICAgICB1bmRlcmx5aW5nIHR5cGU6OlxuXG4gICAgICAgICAgICBBbm5vdGF0ZWRbQywgQW5uMV0oNSkgPT0gQyg1KVxuXG4gICAgICAgIC0gQW5ub3RhdGVkIGNhbiBiZSB1c2VkIGFzIGEgZ2VuZXJpYyB0eXBlIGFsaWFzOjpcblxuICAgICAgICAgICAgT3B0aW1pemVkID0gQW5ub3RhdGVkW1QsIHJ1bnRpbWUuT3B0aW1pemUoKV1cbiAgICAgICAgICAgIE9wdGltaXplZFtpbnRdID09IEFubm90YXRlZFtpbnQsIHJ1bnRpbWUuT3B0aW1pemUoKV1cblxuICAgICAgICAgICAgT3B0aW1pemVkTGlzdCA9IEFubm90YXRlZFtMaXN0W1RdLCBydW50aW1lLk9wdGltaXplKCldXG4gICAgICAgICAgICBPcHRpbWl6ZWRMaXN0W2ludF0gPT0gQW5ub3RhdGVkW0xpc3RbaW50XSwgcnVudGltZS5PcHRpbWl6ZSgpXVxuICAgICAgICAiIiJcblxuICAgICAgICBfX3Nsb3RzX18gPSAoKVxuXG4gICAgICAgIGRlZiBfX25ld19fKGNscywgKmFyZ3MsICoqa3dhcmdzKTpcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiVHlwZSBBbm5vdGF0ZWQgY2Fubm90IGJlIGluc3RhbnRpYXRlZC4iKVxuXG4gICAgICAgIEB0eXBpbmcuX3RwX2NhY2hlXG4gICAgICAgIGRlZiBfX2NsYXNzX2dldGl0ZW1fXyhjbHMsIHBhcmFtcyk6XG4gICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShwYXJhbXMsIHR1cGxlKSBvciBsZW4ocGFyYW1zKSA8IDI6XG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJBbm5vdGF0ZWRbLi4uXSBzaG91bGQgYmUgdXNlZCAiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3aXRoIGF0IGxlYXN0IHR3byBhcmd1bWVudHMgKGEgdHlwZSBhbmQgYW4gIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYW5ub3RhdGlvbikuIilcbiAgICAgICAgICAgIGFsbG93ZWRfc3BlY2lhbF9mb3JtcyA9IChDbGFzc1ZhciwgRmluYWwpXG4gICAgICAgICAgICBpZiBnZXRfb3JpZ2luKHBhcmFtc1swXSkgaW4gYWxsb3dlZF9zcGVjaWFsX2Zvcm1zOlxuICAgICAgICAgICAgICAgIG9yaWdpbiA9IHBhcmFtc1swXVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBtc2cgPSAiQW5ub3RhdGVkW3QsIC4uLl06IHQgbXVzdCBiZSBhIHR5cGUuIlxuICAgICAgICAgICAgICAgIG9yaWdpbiA9IHR5cGluZy5fdHlwZV9jaGVjayhwYXJhbXNbMF0sIG1zZylcbiAgICAgICAgICAgIG1ldGFkYXRhID0gdHVwbGUocGFyYW1zWzE6XSlcbiAgICAgICAgICAgIHJldHVybiBfQW5ub3RhdGVkQWxpYXMob3JpZ2luLCBtZXRhZGF0YSlcblxuICAgICAgICBkZWYgX19pbml0X3N1YmNsYXNzX18oY2xzLCAqYXJncywgKiprd2FyZ3MpOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgIGYiQ2Fubm90IHN1YmNsYXNzIHtjbHMuX19tb2R1bGVfX30uQW5ub3RhdGVkIlxuICAgICAgICAgICAgKVxuXG4jIFB5dGhvbiAzLjggaGFzIGdldF9vcmlnaW4oKSBhbmQgZ2V0X2FyZ3MoKSBidXQgdGhvc2UgaW1wbGVtZW50YXRpb25zIGFyZW5cJ3RcbiMgQW5ub3RhdGVkLWF3YXJlLCBzbyB3ZSBjYW5cJ3QgdXNlIHRob3NlLiBQeXRob24gMy45XCdzIHZlcnNpb25zIGRvblwndCBzdXBwb3J0XG4jIFBhcmFtU3BlY0FyZ3MgYW5kIFBhcmFtU3BlY0t3YXJncywgc28gb25seSBQeXRob24gMy4xMFwncyB2ZXJzaW9ucyB3aWxsIGRvLlxuaWYgc3lzLnZlcnNpb25faW5mb1s6Ml0gPj0gKDMsIDEwKTpcbiAgICBnZXRfb3JpZ2luID0gdHlwaW5nLmdldF9vcmlnaW5cbiAgICBnZXRfYXJncyA9IHR5cGluZy5nZXRfYXJnc1xuIyAzLjctMy45XG5lbHNlOlxuICAgIHRyeTpcbiAgICAgICAgIyAzLjkrXG4gICAgICAgIGZyb20gdHlwaW5nIGltcG9ydCBfQmFzZUdlbmVyaWNBbGlhc1xuICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjpcbiAgICAgICAgX0Jhc2VHZW5lcmljQWxpYXMgPSB0eXBpbmcuX0dlbmVyaWNBbGlhc1xuICAgIHRyeTpcbiAgICAgICAgIyAzLjkrXG4gICAgICAgIGZyb20gdHlwaW5nIGltcG9ydCBHZW5lcmljQWxpYXMgYXMgX3R5cGluZ19HZW5lcmljQWxpYXNcbiAgICBleGNlcHQgSW1wb3J0RXJyb3I6XG4gICAgICAgIF90eXBpbmdfR2VuZXJpY0FsaWFzID0gdHlwaW5nLl9HZW5lcmljQWxpYXNcblxuICAgIGRlZiBnZXRfb3JpZ2luKHRwKTpcbiAgICAgICAgIiIiR2V0IHRoZSB1bnN1YnNjcmlwdGVkIHZlcnNpb24gb2YgYSB0eXBlLlxuXG4gICAgICAgIFRoaXMgc3VwcG9ydHMgZ2VuZXJpYyB0eXBlcywgQ2FsbGFibGUsIFR1cGxlLCBVbmlvbiwgTGl0ZXJhbCwgRmluYWwsIENsYXNzVmFyXG4gICAgICAgIGFuZCBBbm5vdGF0ZWQuIFJldHVybiBOb25lIGZvciB1bnN1cHBvcnRlZCB0eXBlcy4gRXhhbXBsZXM6OlxuXG4gICAgICAgICAgICBnZXRfb3JpZ2luKExpdGVyYWxbNDJdKSBpcyBMaXRlcmFsXG4gICAgICAgICAgICBnZXRfb3JpZ2luKGludCkgaXMgTm9uZVxuICAgICAgICAgICAgZ2V0X29yaWdpbihDbGFzc1ZhcltpbnRdKSBpcyBDbGFzc1ZhclxuICAgICAgICAgICAgZ2V0X29yaWdpbihHZW5lcmljKSBpcyBHZW5lcmljXG4gICAgICAgICAgICBnZXRfb3JpZ2luKEdlbmVyaWNbVF0pIGlzIEdlbmVyaWNcbiAgICAgICAgICAgIGdldF9vcmlnaW4oVW5pb25bVCwgaW50XSkgaXMgVW5pb25cbiAgICAgICAgICAgIGdldF9vcmlnaW4oTGlzdFtUdXBsZVtULCBUXV1baW50XSkgPT0gbGlzdFxuICAgICAgICAgICAgZ2V0X29yaWdpbihQLmFyZ3MpIGlzIFBcbiAgICAgICAgIiIiXG4gICAgICAgIGlmIGlzaW5zdGFuY2UodHAsIF9Bbm5vdGF0ZWRBbGlhcyk6XG4gICAgICAgICAgICByZXR1cm4gQW5ub3RhdGVkXG4gICAgICAgIGlmIGlzaW5zdGFuY2UodHAsICh0eXBpbmcuX0dlbmVyaWNBbGlhcywgX3R5cGluZ19HZW5lcmljQWxpYXMsIF9CYXNlR2VuZXJpY0FsaWFzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYW1TcGVjQXJncywgUGFyYW1TcGVjS3dhcmdzKSk6XG4gICAgICAgICAgICByZXR1cm4gdHAuX19vcmlnaW5fX1xuICAgICAgICBpZiB0cCBpcyB0eXBpbmcuR2VuZXJpYzpcbiAgICAgICAgICAgIHJldHVybiB0eXBpbmcuR2VuZXJpY1xuICAgICAgICByZXR1cm4gTm9uZVxuXG4gICAgZGVmIGdldF9hcmdzKHRwKTpcbiAgICAgICAgIiIiR2V0IHR5cGUgYXJndW1lbnRzIHdpdGggYWxsIHN1YnN0aXR1dGlvbnMgcGVyZm9ybWVkLlxuXG4gICAgICAgIEZvciB1bmlvbnMsIGJhc2ljIHNpbXBsaWZpY2F0aW9ucyB1c2VkIGJ5IFVuaW9uIGNvbnN0cnVjdG9yIGFyZSBwZXJmb3JtZWQuXG4gICAgICAgIEV4YW1wbGVzOjpcbiAgICAgICAgICAgIGdldF9hcmdzKERpY3Rbc3RyLCBpbnRdKSA9PSAoc3RyLCBpbnQpXG4gICAgICAgICAgICBnZXRfYXJncyhpbnQpID09ICgpXG4gICAgICAgICAgICBnZXRfYXJncyhVbmlvbltpbnQsIFVuaW9uW1QsIGludF0sIHN0cl1baW50XSkgPT0gKGludCwgc3RyKVxuICAgICAgICAgICAgZ2V0X2FyZ3MoVW5pb25baW50LCBUdXBsZVtULCBpbnRdXVtzdHJdKSA9PSAoaW50LCBUdXBsZVtzdHIsIGludF0pXG4gICAgICAgICAgICBnZXRfYXJncyhDYWxsYWJsZVtbXSwgVF1baW50XSkgPT0gKFtdLCBpbnQpXG4gICAgICAgICIiIlxuICAgICAgICBpZiBpc2luc3RhbmNlKHRwLCBfQW5ub3RhdGVkQWxpYXMpOlxuICAgICAgICAgICAgcmV0dXJuICh0cC5fX29yaWdpbl9fLCkgKyB0cC5fX21ldGFkYXRhX19cbiAgICAgICAgaWYgaXNpbnN0YW5jZSh0cCwgKHR5cGluZy5fR2VuZXJpY0FsaWFzLCBfdHlwaW5nX0dlbmVyaWNBbGlhcykpOlxuICAgICAgICAgICAgaWYgZ2V0YXR0cih0cCwgIl9zcGVjaWFsIiwgRmFsc2UpOlxuICAgICAgICAgICAgICAgIHJldHVybiAoKVxuICAgICAgICAgICAgcmVzID0gdHAuX19hcmdzX19cbiAgICAgICAgICAgIGlmIGdldF9vcmlnaW4odHApIGlzIGNvbGxlY3Rpb25zLmFiYy5DYWxsYWJsZSBhbmQgcmVzWzBdIGlzIG5vdCBFbGxpcHNpczpcbiAgICAgICAgICAgICAgICByZXMgPSAobGlzdChyZXNbOi0xXSksIHJlc1stMV0pXG4gICAgICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgIHJldHVybiAoKVxuXG5cbiMgMy4xMCtcbmlmIGhhc2F0dHIodHlwaW5nLCBcJ1R5cGVBbGlhc1wnKTpcbiAgICBUeXBlQWxpYXMgPSB0eXBpbmcuVHlwZUFsaWFzXG4jIDMuOVxuZWxpZiBzeXMudmVyc2lvbl9pbmZvWzoyXSA+PSAoMywgOSk6XG4gICAgY2xhc3MgX1R5cGVBbGlhc0Zvcm0odHlwaW5nLl9TcGVjaWFsRm9ybSwgX3Jvb3Q9VHJ1ZSk6XG4gICAgICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBcJ3R5cGluZ19leHRlbnNpb25zLlwnICsgc2VsZi5fbmFtZVxuXG4gICAgQF9UeXBlQWxpYXNGb3JtXG4gICAgZGVmIFR5cGVBbGlhcyhzZWxmLCBwYXJhbWV0ZXJzKTpcbiAgICAgICAgIiIiU3BlY2lhbCBtYXJrZXIgaW5kaWNhdGluZyB0aGF0IGFuIGFzc2lnbm1lbnQgc2hvdWxkXG4gICAgICAgIGJlIHJlY29nbml6ZWQgYXMgYSBwcm9wZXIgdHlwZSBhbGlhcyBkZWZpbml0aW9uIGJ5IHR5cGVcbiAgICAgICAgY2hlY2tlcnMuXG5cbiAgICAgICAgRm9yIGV4YW1wbGU6OlxuXG4gICAgICAgICAgICBQcmVkaWNhdGU6IFR5cGVBbGlhcyA9IENhbGxhYmxlWy4uLiwgYm9vbF1cblxuICAgICAgICBJdFwncyBpbnZhbGlkIHdoZW4gdXNlZCBhbnl3aGVyZSBleGNlcHQgYXMgaW4gdGhlIGV4YW1wbGUgYWJvdmUuXG4gICAgICAgICIiIlxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJ7c2VsZn0gaXMgbm90IHN1YnNjcmlwdGFibGUiKVxuIyAzLjctMy44XG5lbHNlOlxuICAgIGNsYXNzIF9UeXBlQWxpYXNGb3JtKHR5cGluZy5fU3BlY2lhbEZvcm0sIF9yb290PVRydWUpOlxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gXCd0eXBpbmdfZXh0ZW5zaW9ucy5cJyArIHNlbGYuX25hbWVcblxuICAgIFR5cGVBbGlhcyA9IF9UeXBlQWxpYXNGb3JtKFwnVHlwZUFsaWFzXCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jPSIiIlNwZWNpYWwgbWFya2VyIGluZGljYXRpbmcgdGhhdCBhbiBhc3NpZ25tZW50IHNob3VsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIHJlY29nbml6ZWQgYXMgYSBwcm9wZXIgdHlwZSBhbGlhcyBkZWZpbml0aW9uIGJ5IHR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2Vycy5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZvciBleGFtcGxlOjpcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcmVkaWNhdGU6IFR5cGVBbGlhcyA9IENhbGxhYmxlWy4uLiwgYm9vbF1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEl0XCdzIGludmFsaWQgd2hlbiB1c2VkIGFueXdoZXJlIGV4Y2VwdCBhcyBpbiB0aGUgZXhhbXBsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3ZlLiIiIilcblxuXG4jIFB5dGhvbiAzLjEwKyBoYXMgUEVQIDYxMlxuaWYgaGFzYXR0cih0eXBpbmcsIFwnUGFyYW1TcGVjQXJnc1wnKTpcbiAgICBQYXJhbVNwZWNBcmdzID0gdHlwaW5nLlBhcmFtU3BlY0FyZ3NcbiAgICBQYXJhbVNwZWNLd2FyZ3MgPSB0eXBpbmcuUGFyYW1TcGVjS3dhcmdzXG4jIDMuNy0zLjlcbmVsc2U6XG4gICAgY2xhc3MgX0ltbXV0YWJsZTpcbiAgICAgICAgIiIiTWl4aW4gdG8gaW5kaWNhdGUgdGhhdCBvYmplY3Qgc2hvdWxkIG5vdCBiZSBjb3BpZWQuIiIiXG4gICAgICAgIF9fc2xvdHNfXyA9ICgpXG5cbiAgICAgICAgZGVmIF9fY29weV9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgICAgICBkZWYgX19kZWVwY29weV9fKHNlbGYsIG1lbW8pOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgIGNsYXNzIFBhcmFtU3BlY0FyZ3MoX0ltbXV0YWJsZSk6XG4gICAgICAgICIiIlRoZSBhcmdzIGZvciBhIFBhcmFtU3BlYyBvYmplY3QuXG5cbiAgICAgICAgR2l2ZW4gYSBQYXJhbVNwZWMgb2JqZWN0IFAsIFAuYXJncyBpcyBhbiBpbnN0YW5jZSBvZiBQYXJhbVNwZWNBcmdzLlxuXG4gICAgICAgIFBhcmFtU3BlY0FyZ3Mgb2JqZWN0cyBoYXZlIGEgcmVmZXJlbmNlIGJhY2sgdG8gdGhlaXIgUGFyYW1TcGVjOlxuXG4gICAgICAgIFAuYXJncy5fX29yaWdpbl9fIGlzIFBcblxuICAgICAgICBUaGlzIHR5cGUgaXMgbWVhbnQgZm9yIHJ1bnRpbWUgaW50cm9zcGVjdGlvbiBhbmQgaGFzIG5vIHNwZWNpYWwgbWVhbmluZyB0b1xuICAgICAgICBzdGF0aWMgdHlwZSBjaGVja2Vycy5cbiAgICAgICAgIiIiXG4gICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvcmlnaW4pOlxuICAgICAgICAgICAgc2VsZi5fX29yaWdpbl9fID0gb3JpZ2luXG5cbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIGYie3NlbGYuX19vcmlnaW5fXy5fX25hbWVfX30uYXJncyJcblxuICAgICAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKTpcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBQYXJhbVNwZWNBcmdzKTpcbiAgICAgICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9fb3JpZ2luX18gPT0gb3RoZXIuX19vcmlnaW5fX1xuXG4gICAgY2xhc3MgUGFyYW1TcGVjS3dhcmdzKF9JbW11dGFibGUpOlxuICAgICAgICAiIiJUaGUga3dhcmdzIGZvciBhIFBhcmFtU3BlYyBvYmplY3QuXG5cbiAgICAgICAgR2l2ZW4gYSBQYXJhbVNwZWMgb2JqZWN0IFAsIFAua3dhcmdzIGlzIGFuIGluc3RhbmNlIG9mIFBhcmFtU3BlY0t3YXJncy5cblxuICAgICAgICBQYXJhbVNwZWNLd2FyZ3Mgb2JqZWN0cyBoYXZlIGEgcmVmZXJlbmNlIGJhY2sgdG8gdGhlaXIgUGFyYW1TcGVjOlxuXG4gICAgICAgIFAua3dhcmdzLl9fb3JpZ2luX18gaXMgUFxuXG4gICAgICAgIFRoaXMgdHlwZSBpcyBtZWFudCBmb3IgcnVudGltZSBpbnRyb3NwZWN0aW9uIGFuZCBoYXMgbm8gc3BlY2lhbCBtZWFuaW5nIHRvXG4gICAgICAgIHN0YXRpYyB0eXBlIGNoZWNrZXJzLlxuICAgICAgICAiIiJcbiAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIG9yaWdpbik6XG4gICAgICAgICAgICBzZWxmLl9fb3JpZ2luX18gPSBvcmlnaW5cblxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gZiJ7c2VsZi5fX29yaWdpbl9fLl9fbmFtZV9ffS5rd2FyZ3MiXG5cbiAgICAgICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgUGFyYW1TcGVjS3dhcmdzKTpcbiAgICAgICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9fb3JpZ2luX18gPT0gb3RoZXIuX19vcmlnaW5fX1xuXG4jIDMuMTArXG5pZiBoYXNhdHRyKHR5cGluZywgXCdQYXJhbVNwZWNcJyk6XG4gICAgUGFyYW1TcGVjID0gdHlwaW5nLlBhcmFtU3BlY1xuIyAzLjctMy45XG5lbHNlOlxuXG4gICAgIyBJbmhlcml0cyBmcm9tIGxpc3QgYXMgYSB3b3JrYXJvdW5kIGZvciBDYWxsYWJsZSBjaGVja3MgaW4gUHl0aG9uIDwgMy45LjIuXG4gICAgY2xhc3MgUGFyYW1TcGVjKGxpc3QpOlxuICAgICAgICAiIiJQYXJhbWV0ZXIgc3BlY2lmaWNhdGlvbiB2YXJpYWJsZS5cblxuICAgICAgICBVc2FnZTo6XG5cbiAgICAgICAgICAgUCA9IFBhcmFtU3BlYyhcJ1BcJylcblxuICAgICAgICBQYXJhbWV0ZXIgc3BlY2lmaWNhdGlvbiB2YXJpYWJsZXMgZXhpc3QgcHJpbWFyaWx5IGZvciB0aGUgYmVuZWZpdCBvZiBzdGF0aWNcbiAgICAgICAgdHlwZSBjaGVja2Vycy4gIFRoZXkgYXJlIHVzZWQgdG8gZm9yd2FyZCB0aGUgcGFyYW1ldGVyIHR5cGVzIG9mIG9uZVxuICAgICAgICBjYWxsYWJsZSB0byBhbm90aGVyIGNhbGxhYmxlLCBhIHBhdHRlcm4gY29tbW9ubHkgZm91bmQgaW4gaGlnaGVyIG9yZGVyXG4gICAgICAgIGZ1bmN0aW9ucyBhbmQgZGVjb3JhdG9ycy4gIFRoZXkgYXJlIG9ubHkgdmFsaWQgd2hlbiB1c2VkIGluIGBgQ29uY2F0ZW5hdGVgYCxcbiAgICAgICAgb3IgcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gYGBDYWxsYWJsZWBgLiBJbiBQeXRob24gMy4xMCBhbmQgaGlnaGVyLFxuICAgICAgICB0aGV5IGFyZSBhbHNvIHN1cHBvcnRlZCBpbiB1c2VyLWRlZmluZWQgR2VuZXJpY3MgYXQgcnVudGltZS5cbiAgICAgICAgU2VlIGNsYXNzIEdlbmVyaWMgZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZ2VuZXJpYyB0eXBlcy4gIEFuXG4gICAgICAgIGV4YW1wbGUgZm9yIGFubm90YXRpbmcgYSBkZWNvcmF0b3I6OlxuXG4gICAgICAgICAgIFQgPSBUeXBlVmFyKFwnVFwnKVxuICAgICAgICAgICBQID0gUGFyYW1TcGVjKFwnUFwnKVxuXG4gICAgICAgICAgIGRlZiBhZGRfbG9nZ2luZyhmOiBDYWxsYWJsZVtQLCBUXSkgLT4gQ2FsbGFibGVbUCwgVF06XG4gICAgICAgICAgICAgICBcJ1wnXCdBIHR5cGUtc2FmZSBkZWNvcmF0b3IgdG8gYWRkIGxvZ2dpbmcgdG8gYSBmdW5jdGlvbi5cJ1wnXCdcbiAgICAgICAgICAgICAgIGRlZiBpbm5lcigqYXJnczogUC5hcmdzLCAqKmt3YXJnczogUC5rd2FyZ3MpIC0+IFQ6XG4gICAgICAgICAgICAgICAgICAgbG9nZ2luZy5pbmZvKGZcJ3tmLl9fbmFtZV9ffSB3YXMgY2FsbGVkXCcpXG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIGYoKmFyZ3MsICoqa3dhcmdzKVxuICAgICAgICAgICAgICAgcmV0dXJuIGlubmVyXG5cbiAgICAgICAgICAgQGFkZF9sb2dnaW5nXG4gICAgICAgICAgIGRlZiBhZGRfdHdvKHg6IGZsb2F0LCB5OiBmbG9hdCkgLT4gZmxvYXQ6XG4gICAgICAgICAgICAgICBcJ1wnXCdBZGQgdHdvIG51bWJlcnMgdG9nZXRoZXIuXCdcJ1wnXG4gICAgICAgICAgICAgICByZXR1cm4geCArIHlcblxuICAgICAgICBQYXJhbWV0ZXIgc3BlY2lmaWNhdGlvbiB2YXJpYWJsZXMgZGVmaW5lZCB3aXRoIGNvdmFyaWFudD1UcnVlIG9yXG4gICAgICAgIGNvbnRyYXZhcmlhbnQ9VHJ1ZSBjYW4gYmUgdXNlZCB0byBkZWNsYXJlIGNvdmFyaWFudCBvciBjb250cmF2YXJpYW50XG4gICAgICAgIGdlbmVyaWMgdHlwZXMuICBUaGVzZSBrZXl3b3JkIGFyZ3VtZW50cyBhcmUgdmFsaWQsIGJ1dCB0aGVpciBhY3R1YWwgc2VtYW50aWNzXG4gICAgICAgIGFyZSB5ZXQgdG8gYmUgZGVjaWRlZC4gIFNlZSBQRVAgNjEyIGZvciBkZXRhaWxzLlxuXG4gICAgICAgIFBhcmFtZXRlciBzcGVjaWZpY2F0aW9uIHZhcmlhYmxlcyBjYW4gYmUgaW50cm9zcGVjdGVkLiBlLmcuOlxuXG4gICAgICAgICAgIFAuX19uYW1lX18gPT0gXCdUXCdcbiAgICAgICAgICAgUC5fX2JvdW5kX18gPT0gTm9uZVxuICAgICAgICAgICBQLl9fY292YXJpYW50X18gPT0gRmFsc2VcbiAgICAgICAgICAgUC5fX2NvbnRyYXZhcmlhbnRfXyA9PSBGYWxzZVxuXG4gICAgICAgIE5vdGUgdGhhdCBvbmx5IHBhcmFtZXRlciBzcGVjaWZpY2F0aW9uIHZhcmlhYmxlcyBkZWZpbmVkIGluIGdsb2JhbCBzY29wZSBjYW5cbiAgICAgICAgYmUgcGlja2xlZC5cbiAgICAgICAgIiIiXG5cbiAgICAgICAgIyBUcmljayBHZW5lcmljIF9fcGFyYW1ldGVyc19fLlxuICAgICAgICBfX2NsYXNzX18gPSB0eXBpbmcuVHlwZVZhclxuXG4gICAgICAgIEBwcm9wZXJ0eVxuICAgICAgICBkZWYgYXJncyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBQYXJhbVNwZWNBcmdzKHNlbGYpXG5cbiAgICAgICAgQHByb3BlcnR5XG4gICAgICAgIGRlZiBrd2FyZ3Moc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gUGFyYW1TcGVjS3dhcmdzKHNlbGYpXG5cbiAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsICosIGJvdW5kPU5vbmUsIGNvdmFyaWFudD1GYWxzZSwgY29udHJhdmFyaWFudD1GYWxzZSk6XG4gICAgICAgICAgICBzdXBlcigpLl9faW5pdF9fKFtzZWxmXSlcbiAgICAgICAgICAgIHNlbGYuX19uYW1lX18gPSBuYW1lXG4gICAgICAgICAgICBzZWxmLl9fY292YXJpYW50X18gPSBib29sKGNvdmFyaWFudClcbiAgICAgICAgICAgIHNlbGYuX19jb250cmF2YXJpYW50X18gPSBib29sKGNvbnRyYXZhcmlhbnQpXG4gICAgICAgICAgICBpZiBib3VuZDpcbiAgICAgICAgICAgICAgICBzZWxmLl9fYm91bmRfXyA9IHR5cGluZy5fdHlwZV9jaGVjayhib3VuZCwgXCdCb3VuZCBtdXN0IGJlIGEgdHlwZS5cJylcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgc2VsZi5fX2JvdW5kX18gPSBOb25lXG5cbiAgICAgICAgICAgICMgZm9yIHBpY2tsaW5nOlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIGRlZl9tb2QgPSBzeXMuX2dldGZyYW1lKDEpLmZfZ2xvYmFscy5nZXQoXCdfX25hbWVfX1wnLCBcJ19fbWFpbl9fXCcpXG4gICAgICAgICAgICBleGNlcHQgKEF0dHJpYnV0ZUVycm9yLCBWYWx1ZUVycm9yKTpcbiAgICAgICAgICAgICAgICBkZWZfbW9kID0gTm9uZVxuICAgICAgICAgICAgaWYgZGVmX21vZCAhPSBcJ3R5cGluZ19leHRlbnNpb25zXCc6XG4gICAgICAgICAgICAgICAgc2VsZi5fX21vZHVsZV9fID0gZGVmX21vZFxuXG4gICAgICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgICAgIGlmIHNlbGYuX19jb3ZhcmlhbnRfXzpcbiAgICAgICAgICAgICAgICBwcmVmaXggPSBcJytcJ1xuICAgICAgICAgICAgZWxpZiBzZWxmLl9fY29udHJhdmFyaWFudF9fOlxuICAgICAgICAgICAgICAgIHByZWZpeCA9IFwnLVwnXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIHByZWZpeCA9IFwnflwnXG4gICAgICAgICAgICByZXR1cm4gcHJlZml4ICsgc2VsZi5fX25hbWVfX1xuXG4gICAgICAgIGRlZiBfX2hhc2hfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBvYmplY3QuX19oYXNoX18oc2VsZilcblxuICAgICAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmIGlzIG90aGVyXG5cbiAgICAgICAgZGVmIF9fcmVkdWNlX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fX25hbWVfX1xuXG4gICAgICAgICMgSGFjayB0byBnZXQgdHlwaW5nLl90eXBlX2NoZWNrIHRvIHBhc3MuXG4gICAgICAgIGRlZiBfX2NhbGxfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOlxuICAgICAgICAgICAgcGFzc1xuXG5cbiMgMy43LTMuOVxuaWYgbm90IGhhc2F0dHIodHlwaW5nLCBcJ0NvbmNhdGVuYXRlXCcpOlxuICAgICMgSW5oZXJpdHMgZnJvbSBsaXN0IGFzIGEgd29ya2Fyb3VuZCBmb3IgQ2FsbGFibGUgY2hlY2tzIGluIFB5dGhvbiA8IDMuOS4yLlxuICAgIGNsYXNzIF9Db25jYXRlbmF0ZUdlbmVyaWNBbGlhcyhsaXN0KTpcblxuICAgICAgICAjIFRyaWNrIEdlbmVyaWMgaW50byBsb29raW5nIGludG8gdGhpcyBmb3IgX19wYXJhbWV0ZXJzX18uXG4gICAgICAgIF9fY2xhc3NfXyA9IHR5cGluZy5fR2VuZXJpY0FsaWFzXG5cbiAgICAgICAgIyBGbGFnIGluIDMuOC5cbiAgICAgICAgX3NwZWNpYWwgPSBGYWxzZVxuXG4gICAgICAgIGRlZiBfX2luaXRfXyhzZWxmLCBvcmlnaW4sIGFyZ3MpOlxuICAgICAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhhcmdzKVxuICAgICAgICAgICAgc2VsZi5fX29yaWdpbl9fID0gb3JpZ2luXG4gICAgICAgICAgICBzZWxmLl9fYXJnc19fID0gYXJnc1xuXG4gICAgICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgICAgIF90eXBlX3JlcHIgPSB0eXBpbmcuX3R5cGVfcmVwclxuICAgICAgICAgICAgcmV0dXJuIChmXCd7X3R5cGVfcmVwcihzZWxmLl9fb3JpZ2luX18pfVwnXG4gICAgICAgICAgICAgICAgICAgIGZcJ1t7IiwgIi5qb2luKF90eXBlX3JlcHIoYXJnKSBmb3IgYXJnIGluIHNlbGYuX19hcmdzX18pfV1cJylcblxuICAgICAgICBkZWYgX19oYXNoX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gaGFzaCgoc2VsZi5fX29yaWdpbl9fLCBzZWxmLl9fYXJnc19fKSlcblxuICAgICAgICAjIEhhY2sgdG8gZ2V0IHR5cGluZy5fdHlwZV9jaGVjayB0byBwYXNzIGluIEdlbmVyaWMuXG4gICAgICAgIGRlZiBfX2NhbGxfXyhzZWxmLCAqYXJncywgKiprd2FyZ3MpOlxuICAgICAgICAgICAgcGFzc1xuXG4gICAgICAgIEBwcm9wZXJ0eVxuICAgICAgICBkZWYgX19wYXJhbWV0ZXJzX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gdHVwbGUoXG4gICAgICAgICAgICAgICAgdHAgZm9yIHRwIGluIHNlbGYuX19hcmdzX18gaWYgaXNpbnN0YW5jZSh0cCwgKHR5cGluZy5UeXBlVmFyLCBQYXJhbVNwZWMpKVxuICAgICAgICAgICAgKVxuXG5cbiMgMy43LTMuOVxuQHR5cGluZy5fdHBfY2FjaGVcbmRlZiBfY29uY2F0ZW5hdGVfZ2V0aXRlbShzZWxmLCBwYXJhbWV0ZXJzKTpcbiAgICBpZiBwYXJhbWV0ZXJzID09ICgpOlxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkNhbm5vdCB0YWtlIGEgQ29uY2F0ZW5hdGUgb2Ygbm8gdHlwZXMuIilcbiAgICBpZiBub3QgaXNpbnN0YW5jZShwYXJhbWV0ZXJzLCB0dXBsZSk6XG4gICAgICAgIHBhcmFtZXRlcnMgPSAocGFyYW1ldGVycywpXG4gICAgaWYgbm90IGlzaW5zdGFuY2UocGFyYW1ldGVyc1stMV0sIFBhcmFtU3BlYyk6XG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiVGhlIGxhc3QgcGFyYW1ldGVyIHRvIENvbmNhdGVuYXRlIHNob3VsZCBiZSBhICJcbiAgICAgICAgICAgICAgICAgICAgICAgICJQYXJhbVNwZWMgdmFyaWFibGUuIilcbiAgICBtc2cgPSAiQ29uY2F0ZW5hdGVbYXJnLCAuLi5dOiBlYWNoIGFyZyBtdXN0IGJlIGEgdHlwZS4iXG4gICAgcGFyYW1ldGVycyA9IHR1cGxlKHR5cGluZy5fdHlwZV9jaGVjayhwLCBtc2cpIGZvciBwIGluIHBhcmFtZXRlcnMpXG4gICAgcmV0dXJuIF9Db25jYXRlbmF0ZUdlbmVyaWNBbGlhcyhzZWxmLCBwYXJhbWV0ZXJzKVxuXG5cbiMgMy4xMCtcbmlmIGhhc2F0dHIodHlwaW5nLCBcJ0NvbmNhdGVuYXRlXCcpOlxuICAgIENvbmNhdGVuYXRlID0gdHlwaW5nLkNvbmNhdGVuYXRlXG4gICAgX0NvbmNhdGVuYXRlR2VuZXJpY0FsaWFzID0gdHlwaW5nLl9Db25jYXRlbmF0ZUdlbmVyaWNBbGlhcyAjIG5vcWFcbiMgMy45XG5lbGlmIHN5cy52ZXJzaW9uX2luZm9bOjJdID49ICgzLCA5KTpcbiAgICBAX1R5cGVBbGlhc0Zvcm1cbiAgICBkZWYgQ29uY2F0ZW5hdGUoc2VsZiwgcGFyYW1ldGVycyk6XG4gICAgICAgICIiIlVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgYFBhcmFtU3BlY2BgIGFuZCBgYENhbGxhYmxlYGAgdG8gcmVwcmVzZW50IGFcbiAgICAgICAgaGlnaGVyIG9yZGVyIGZ1bmN0aW9uIHdoaWNoIGFkZHMsIHJlbW92ZXMgb3IgdHJhbnNmb3JtcyBwYXJhbWV0ZXJzIG9mIGFcbiAgICAgICAgY2FsbGFibGUuXG5cbiAgICAgICAgRm9yIGV4YW1wbGU6OlxuXG4gICAgICAgICAgIENhbGxhYmxlW0NvbmNhdGVuYXRlW2ludCwgUF0sIGludF1cblxuICAgICAgICBTZWUgUEVQIDYxMiBmb3IgZGV0YWlsZWQgaW5mb3JtYXRpb24uXG4gICAgICAgICIiIlxuICAgICAgICByZXR1cm4gX2NvbmNhdGVuYXRlX2dldGl0ZW0oc2VsZiwgcGFyYW1ldGVycylcbiMgMy43LThcbmVsc2U6XG4gICAgY2xhc3MgX0NvbmNhdGVuYXRlRm9ybSh0eXBpbmcuX1NwZWNpYWxGb3JtLCBfcm9vdD1UcnVlKTpcbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIFwndHlwaW5nX2V4dGVuc2lvbnMuXCcgKyBzZWxmLl9uYW1lXG5cbiAgICAgICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIHBhcmFtZXRlcnMpOlxuICAgICAgICAgICAgcmV0dXJuIF9jb25jYXRlbmF0ZV9nZXRpdGVtKHNlbGYsIHBhcmFtZXRlcnMpXG5cbiAgICBDb25jYXRlbmF0ZSA9IF9Db25jYXRlbmF0ZUZvcm0oXG4gICAgICAgIFwnQ29uY2F0ZW5hdGVcJyxcbiAgICAgICAgZG9jPSIiIlVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgYFBhcmFtU3BlY2BgIGFuZCBgYENhbGxhYmxlYGAgdG8gcmVwcmVzZW50IGFcbiAgICAgICAgaGlnaGVyIG9yZGVyIGZ1bmN0aW9uIHdoaWNoIGFkZHMsIHJlbW92ZXMgb3IgdHJhbnNmb3JtcyBwYXJhbWV0ZXJzIG9mIGFcbiAgICAgICAgY2FsbGFibGUuXG5cbiAgICAgICAgRm9yIGV4YW1wbGU6OlxuXG4gICAgICAgICAgIENhbGxhYmxlW0NvbmNhdGVuYXRlW2ludCwgUF0sIGludF1cblxuICAgICAgICBTZWUgUEVQIDYxMiBmb3IgZGV0YWlsZWQgaW5mb3JtYXRpb24uXG4gICAgICAgICIiIilcblxuIyAzLjEwK1xuaWYgaGFzYXR0cih0eXBpbmcsIFwnVHlwZUd1YXJkXCcpOlxuICAgIFR5cGVHdWFyZCA9IHR5cGluZy5UeXBlR3VhcmRcbiMgMy45XG5lbGlmIHN5cy52ZXJzaW9uX2luZm9bOjJdID49ICgzLCA5KTpcbiAgICBjbGFzcyBfVHlwZUd1YXJkRm9ybSh0eXBpbmcuX1NwZWNpYWxGb3JtLCBfcm9vdD1UcnVlKTpcbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIFwndHlwaW5nX2V4dGVuc2lvbnMuXCcgKyBzZWxmLl9uYW1lXG5cbiAgICBAX1R5cGVHdWFyZEZvcm1cbiAgICBkZWYgVHlwZUd1YXJkKHNlbGYsIHBhcmFtZXRlcnMpOlxuICAgICAgICAiIiJTcGVjaWFsIHR5cGluZyBmb3JtIHVzZWQgdG8gYW5ub3RhdGUgdGhlIHJldHVybiB0eXBlIG9mIGEgdXNlci1kZWZpbmVkXG4gICAgICAgIHR5cGUgZ3VhcmQgZnVuY3Rpb24uICBgYFR5cGVHdWFyZGBgIG9ubHkgYWNjZXB0cyBhIHNpbmdsZSB0eXBlIGFyZ3VtZW50LlxuICAgICAgICBBdCBydW50aW1lLCBmdW5jdGlvbnMgbWFya2VkIHRoaXMgd2F5IHNob3VsZCByZXR1cm4gYSBib29sZWFuLlxuXG4gICAgICAgIGBgVHlwZUd1YXJkYGAgYWltcyB0byBiZW5lZml0ICp0eXBlIG5hcnJvd2luZyogLS0gYSB0ZWNobmlxdWUgdXNlZCBieSBzdGF0aWNcbiAgICAgICAgdHlwZSBjaGVja2VycyB0byBkZXRlcm1pbmUgYSBtb3JlIHByZWNpc2UgdHlwZSBvZiBhbiBleHByZXNzaW9uIHdpdGhpbiBhXG4gICAgICAgIHByb2dyYW1cJ3MgY29kZSBmbG93LiAgVXN1YWxseSB0eXBlIG5hcnJvd2luZyBpcyBkb25lIGJ5IGFuYWx5emluZ1xuICAgICAgICBjb25kaXRpb25hbCBjb2RlIGZsb3cgYW5kIGFwcGx5aW5nIHRoZSBuYXJyb3dpbmcgdG8gYSBibG9jayBvZiBjb2RlLiAgVGhlXG4gICAgICAgIGNvbmRpdGlvbmFsIGV4cHJlc3Npb24gaGVyZSBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgYSAidHlwZSBndWFyZCIuXG5cbiAgICAgICAgU29tZXRpbWVzIGl0IHdvdWxkIGJlIGNvbnZlbmllbnQgdG8gdXNlIGEgdXNlci1kZWZpbmVkIGJvb2xlYW4gZnVuY3Rpb25cbiAgICAgICAgYXMgYSB0eXBlIGd1YXJkLiAgU3VjaCBhIGZ1bmN0aW9uIHNob3VsZCB1c2UgYGBUeXBlR3VhcmRbLi4uXWBgIGFzIGl0c1xuICAgICAgICByZXR1cm4gdHlwZSB0byBhbGVydCBzdGF0aWMgdHlwZSBjaGVja2VycyB0byB0aGlzIGludGVudGlvbi5cblxuICAgICAgICBVc2luZyAgYGAtPiBUeXBlR3VhcmRgYCB0ZWxscyB0aGUgc3RhdGljIHR5cGUgY2hlY2tlciB0aGF0IGZvciBhIGdpdmVuXG4gICAgICAgIGZ1bmN0aW9uOlxuXG4gICAgICAgIDEuIFRoZSByZXR1cm4gdmFsdWUgaXMgYSBib29sZWFuLlxuICAgICAgICAyLiBJZiB0aGUgcmV0dXJuIHZhbHVlIGlzIGBgVHJ1ZWBgLCB0aGUgdHlwZSBvZiBpdHMgYXJndW1lbnRcbiAgICAgICAgaXMgdGhlIHR5cGUgaW5zaWRlIGBgVHlwZUd1YXJkYGAuXG5cbiAgICAgICAgRm9yIGV4YW1wbGU6OlxuXG4gICAgICAgICAgICBkZWYgaXNfc3RyKHZhbDogVW5pb25bc3RyLCBmbG9hdF0pOlxuICAgICAgICAgICAgICAgICMgImlzaW5zdGFuY2UiIHR5cGUgZ3VhcmRcbiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbCwgc3RyKTpcbiAgICAgICAgICAgICAgICAgICAgIyBUeXBlIG9mIGBgdmFsYGAgaXMgbmFycm93ZWQgdG8gYGBzdHJgYFxuICAgICAgICAgICAgICAgICAgICAuLi5cbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICAjIEVsc2UsIHR5cGUgb2YgYGB2YWxgYCBpcyBuYXJyb3dlZCB0byBgYGZsb2F0YGAuXG4gICAgICAgICAgICAgICAgICAgIC4uLlxuXG4gICAgICAgIFN0cmljdCB0eXBlIG5hcnJvd2luZyBpcyBub3QgZW5mb3JjZWQgLS0gYGBUeXBlQmBgIG5lZWQgbm90IGJlIGEgbmFycm93ZXJcbiAgICAgICAgZm9ybSBvZiBgYFR5cGVBYGAgKGl0IGNhbiBldmVuIGJlIGEgd2lkZXIgZm9ybSkgYW5kIHRoaXMgbWF5IGxlYWQgdG9cbiAgICAgICAgdHlwZS11bnNhZmUgcmVzdWx0cy4gIFRoZSBtYWluIHJlYXNvbiBpcyB0byBhbGxvdyBmb3IgdGhpbmdzIGxpa2VcbiAgICAgICAgbmFycm93aW5nIGBgTGlzdFtvYmplY3RdYGAgdG8gYGBMaXN0W3N0cl1gYCBldmVuIHRob3VnaCB0aGUgbGF0dGVyIGlzIG5vdFxuICAgICAgICBhIHN1YnR5cGUgb2YgdGhlIGZvcm1lciwgc2luY2UgYGBMaXN0YGAgaXMgaW52YXJpYW50LiAgVGhlIHJlc3BvbnNpYmlsaXR5IG9mXG4gICAgICAgIHdyaXRpbmcgdHlwZS1zYWZlIHR5cGUgZ3VhcmRzIGlzIGxlZnQgdG8gdGhlIHVzZXIuXG5cbiAgICAgICAgYGBUeXBlR3VhcmRgYCBhbHNvIHdvcmtzIHdpdGggdHlwZSB2YXJpYWJsZXMuICBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlXG4gICAgICAgIFBFUCA2NDcgKFVzZXItRGVmaW5lZCBUeXBlIEd1YXJkcykuXG4gICAgICAgICIiIlxuICAgICAgICBpdGVtID0gdHlwaW5nLl90eXBlX2NoZWNrKHBhcmFtZXRlcnMsIGZcJ3tzZWxmfSBhY2NlcHRzIG9ubHkgYSBzaW5nbGUgdHlwZS5cJylcbiAgICAgICAgcmV0dXJuIHR5cGluZy5fR2VuZXJpY0FsaWFzKHNlbGYsIChpdGVtLCkpXG4jIDMuNy0zLjhcbmVsc2U6XG4gICAgY2xhc3MgX1R5cGVHdWFyZEZvcm0odHlwaW5nLl9TcGVjaWFsRm9ybSwgX3Jvb3Q9VHJ1ZSk6XG5cbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIFwndHlwaW5nX2V4dGVuc2lvbnMuXCcgKyBzZWxmLl9uYW1lXG5cbiAgICAgICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIHBhcmFtZXRlcnMpOlxuICAgICAgICAgICAgaXRlbSA9IHR5cGluZy5fdHlwZV9jaGVjayhwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmXCd7c2VsZi5fbmFtZX0gYWNjZXB0cyBvbmx5IGEgc2luZ2xlIHR5cGVcJylcbiAgICAgICAgICAgIHJldHVybiB0eXBpbmcuX0dlbmVyaWNBbGlhcyhzZWxmLCAoaXRlbSwpKVxuXG4gICAgVHlwZUd1YXJkID0gX1R5cGVHdWFyZEZvcm0oXG4gICAgICAgIFwnVHlwZUd1YXJkXCcsXG4gICAgICAgIGRvYz0iIiJTcGVjaWFsIHR5cGluZyBmb3JtIHVzZWQgdG8gYW5ub3RhdGUgdGhlIHJldHVybiB0eXBlIG9mIGEgdXNlci1kZWZpbmVkXG4gICAgICAgIHR5cGUgZ3VhcmQgZnVuY3Rpb24uICBgYFR5cGVHdWFyZGBgIG9ubHkgYWNjZXB0cyBhIHNpbmdsZSB0eXBlIGFyZ3VtZW50LlxuICAgICAgICBBdCBydW50aW1lLCBmdW5jdGlvbnMgbWFya2VkIHRoaXMgd2F5IHNob3VsZCByZXR1cm4gYSBib29sZWFuLlxuXG4gICAgICAgIGBgVHlwZUd1YXJkYGAgYWltcyB0byBiZW5lZml0ICp0eXBlIG5hcnJvd2luZyogLS0gYSB0ZWNobmlxdWUgdXNlZCBieSBzdGF0aWNcbiAgICAgICAgdHlwZSBjaGVja2VycyB0byBkZXRlcm1pbmUgYSBtb3JlIHByZWNpc2UgdHlwZSBvZiBhbiBleHByZXNzaW9uIHdpdGhpbiBhXG4gICAgICAgIHByb2dyYW1cJ3MgY29kZSBmbG93LiAgVXN1YWxseSB0eXBlIG5hcnJvd2luZyBpcyBkb25lIGJ5IGFuYWx5emluZ1xuICAgICAgICBjb25kaXRpb25hbCBjb2RlIGZsb3cgYW5kIGFwcGx5aW5nIHRoZSBuYXJyb3dpbmcgdG8gYSBibG9jayBvZiBjb2RlLiAgVGhlXG4gICAgICAgIGNvbmRpdGlvbmFsIGV4cHJlc3Npb24gaGVyZSBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgYSAidHlwZSBndWFyZCIuXG5cbiAgICAgICAgU29tZXRpbWVzIGl0IHdvdWxkIGJlIGNvbnZlbmllbnQgdG8gdXNlIGEgdXNlci1kZWZpbmVkIGJvb2xlYW4gZnVuY3Rpb25cbiAgICAgICAgYXMgYSB0eXBlIGd1YXJkLiAgU3VjaCBhIGZ1bmN0aW9uIHNob3VsZCB1c2UgYGBUeXBlR3VhcmRbLi4uXWBgIGFzIGl0c1xuICAgICAgICByZXR1cm4gdHlwZSB0byBhbGVydCBzdGF0aWMgdHlwZSBjaGVja2VycyB0byB0aGlzIGludGVudGlvbi5cblxuICAgICAgICBVc2luZyAgYGAtPiBUeXBlR3VhcmRgYCB0ZWxscyB0aGUgc3RhdGljIHR5cGUgY2hlY2tlciB0aGF0IGZvciBhIGdpdmVuXG4gICAgICAgIGZ1bmN0aW9uOlxuXG4gICAgICAgIDEuIFRoZSByZXR1cm4gdmFsdWUgaXMgYSBib29sZWFuLlxuICAgICAgICAyLiBJZiB0aGUgcmV0dXJuIHZhbHVlIGlzIGBgVHJ1ZWBgLCB0aGUgdHlwZSBvZiBpdHMgYXJndW1lbnRcbiAgICAgICAgaXMgdGhlIHR5cGUgaW5zaWRlIGBgVHlwZUd1YXJkYGAuXG5cbiAgICAgICAgRm9yIGV4YW1wbGU6OlxuXG4gICAgICAgICAgICBkZWYgaXNfc3RyKHZhbDogVW5pb25bc3RyLCBmbG9hdF0pOlxuICAgICAgICAgICAgICAgICMgImlzaW5zdGFuY2UiIHR5cGUgZ3VhcmRcbiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbCwgc3RyKTpcbiAgICAgICAgICAgICAgICAgICAgIyBUeXBlIG9mIGBgdmFsYGAgaXMgbmFycm93ZWQgdG8gYGBzdHJgYFxuICAgICAgICAgICAgICAgICAgICAuLi5cbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICAjIEVsc2UsIHR5cGUgb2YgYGB2YWxgYCBpcyBuYXJyb3dlZCB0byBgYGZsb2F0YGAuXG4gICAgICAgICAgICAgICAgICAgIC4uLlxuXG4gICAgICAgIFN0cmljdCB0eXBlIG5hcnJvd2luZyBpcyBub3QgZW5mb3JjZWQgLS0gYGBUeXBlQmBgIG5lZWQgbm90IGJlIGEgbmFycm93ZXJcbiAgICAgICAgZm9ybSBvZiBgYFR5cGVBYGAgKGl0IGNhbiBldmVuIGJlIGEgd2lkZXIgZm9ybSkgYW5kIHRoaXMgbWF5IGxlYWQgdG9cbiAgICAgICAgdHlwZS11bnNhZmUgcmVzdWx0cy4gIFRoZSBtYWluIHJlYXNvbiBpcyB0byBhbGxvdyBmb3IgdGhpbmdzIGxpa2VcbiAgICAgICAgbmFycm93aW5nIGBgTGlzdFtvYmplY3RdYGAgdG8gYGBMaXN0W3N0cl1gYCBldmVuIHRob3VnaCB0aGUgbGF0dGVyIGlzIG5vdFxuICAgICAgICBhIHN1YnR5cGUgb2YgdGhlIGZvcm1lciwgc2luY2UgYGBMaXN0YGAgaXMgaW52YXJpYW50LiAgVGhlIHJlc3BvbnNpYmlsaXR5IG9mXG4gICAgICAgIHdyaXRpbmcgdHlwZS1zYWZlIHR5cGUgZ3VhcmRzIGlzIGxlZnQgdG8gdGhlIHVzZXIuXG5cbiAgICAgICAgYGBUeXBlR3VhcmRgYCBhbHNvIHdvcmtzIHdpdGggdHlwZSB2YXJpYWJsZXMuICBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlXG4gICAgICAgIFBFUCA2NDcgKFVzZXItRGVmaW5lZCBUeXBlIEd1YXJkcykuXG4gICAgICAgICIiIilcblxuXG4jIFZlbmRvcmVkIGZyb20gY3B5dGhvbiB0eXBpbmcuX1NwZWNpYWxGcm9tXG5jbGFzcyBfU3BlY2lhbEZvcm0odHlwaW5nLl9GaW5hbCwgX3Jvb3Q9VHJ1ZSk6XG4gICAgX19zbG90c19fID0gKFwnX25hbWVcJywgXCdfX2RvY19fXCcsIFwnX2dldGl0ZW1cJylcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBnZXRpdGVtKTpcbiAgICAgICAgc2VsZi5fZ2V0aXRlbSA9IGdldGl0ZW1cbiAgICAgICAgc2VsZi5fbmFtZSA9IGdldGl0ZW0uX19uYW1lX19cbiAgICAgICAgc2VsZi5fX2RvY19fID0gZ2V0aXRlbS5fX2RvY19fXG5cbiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgaXRlbSk6XG4gICAgICAgIGlmIGl0ZW0gaW4ge1wnX19uYW1lX19cJywgXCdfX3F1YWxuYW1lX19cJ306XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fbmFtZVxuXG4gICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKGl0ZW0pXG5cbiAgICBkZWYgX19tcm9fZW50cmllc19fKHNlbGYsIGJhc2VzKTpcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKGYiQ2Fubm90IHN1YmNsYXNzIHtzZWxmIXJ9IilcblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuIGZcJ3R5cGluZ19leHRlbnNpb25zLntzZWxmLl9uYW1lfVwnXG5cbiAgICBkZWYgX19yZWR1Y2VfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX25hbWVcblxuICAgIGRlZiBfX2NhbGxfXyhzZWxmLCAqYXJncywgKiprd2RzKTpcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKGYiQ2Fubm90IGluc3RhbnRpYXRlIHtzZWxmIXJ9IilcblxuICAgIGRlZiBfX29yX18oc2VsZiwgb3RoZXIpOlxuICAgICAgICByZXR1cm4gdHlwaW5nLlVuaW9uW3NlbGYsIG90aGVyXVxuXG4gICAgZGVmIF9fcm9yX18oc2VsZiwgb3RoZXIpOlxuICAgICAgICByZXR1cm4gdHlwaW5nLlVuaW9uW290aGVyLCBzZWxmXVxuXG4gICAgZGVmIF9faW5zdGFuY2VjaGVja19fKHNlbGYsIG9iaik6XG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihmIntzZWxmfSBjYW5ub3QgYmUgdXNlZCB3aXRoIGlzaW5zdGFuY2UoKSIpXG5cbiAgICBkZWYgX19zdWJjbGFzc2NoZWNrX18oc2VsZiwgY2xzKTpcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKGYie3NlbGZ9IGNhbm5vdCBiZSB1c2VkIHdpdGggaXNzdWJjbGFzcygpIilcblxuICAgIEB0eXBpbmcuX3RwX2NhY2hlXG4gICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIHBhcmFtZXRlcnMpOlxuICAgICAgICByZXR1cm4gc2VsZi5fZ2V0aXRlbShzZWxmLCBwYXJhbWV0ZXJzKVxuXG5cbmlmIGhhc2F0dHIodHlwaW5nLCAiTGl0ZXJhbFN0cmluZyIpOlxuICAgIExpdGVyYWxTdHJpbmcgPSB0eXBpbmcuTGl0ZXJhbFN0cmluZ1xuZWxzZTpcbiAgICBAX1NwZWNpYWxGb3JtXG4gICAgZGVmIExpdGVyYWxTdHJpbmcoc2VsZiwgcGFyYW1zKTpcbiAgICAgICAgIiIiUmVwcmVzZW50cyBhbiBhcmJpdHJhcnkgbGl0ZXJhbCBzdHJpbmcuXG5cbiAgICAgICAgRXhhbXBsZTo6XG5cbiAgICAgICAgICBmcm9tIHR5cGluZ19leHRlbnNpb25zIGltcG9ydCBMaXRlcmFsU3RyaW5nXG5cbiAgICAgICAgICBkZWYgcXVlcnkoc3FsOiBMaXRlcmFsU3RyaW5nKSAtPiAuLi46XG4gICAgICAgICAgICAgIC4uLlxuXG4gICAgICAgICAgcXVlcnkoIlNFTEVDVCAqIEZST00gdGFibGUiKSAgIyBva1xuICAgICAgICAgIHF1ZXJ5KGYiU0VMRUNUICogRlJPTSB7aW5wdXQoKX0iKSAgIyBub3Qgb2tcblxuICAgICAgICBTZWUgUEVQIDY3NSBmb3IgZGV0YWlscy5cblxuICAgICAgICAiIiJcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKGYie3NlbGZ9IGlzIG5vdCBzdWJzY3JpcHRhYmxlIilcblxuXG5pZiBoYXNhdHRyKHR5cGluZywgIlNlbGYiKTpcbiAgICBTZWxmID0gdHlwaW5nLlNlbGZcbmVsc2U6XG4gICAgQF9TcGVjaWFsRm9ybVxuICAgIGRlZiBTZWxmKHNlbGYsIHBhcmFtcyk6XG4gICAgICAgICIiIlVzZWQgdG8gc3BlbGwgdGhlIHR5cGUgb2YgInNlbGYiIGluIGNsYXNzZXMuXG5cbiAgICAgICAgRXhhbXBsZTo6XG5cbiAgICAgICAgICBmcm9tIHR5cGluZyBpbXBvcnQgU2VsZlxuXG4gICAgICAgICAgY2xhc3MgUmV0dXJuc1NlbGY6XG4gICAgICAgICAgICAgIGRlZiBwYXJzZShzZWxmLCBkYXRhOiBieXRlcykgLT4gU2VsZjpcbiAgICAgICAgICAgICAgICAgIC4uLlxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgICAgICAiIiJcblxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJ7c2VsZn0gaXMgbm90IHN1YnNjcmlwdGFibGUiKVxuXG5cbmlmIGhhc2F0dHIodHlwaW5nLCAiTmV2ZXIiKTpcbiAgICBOZXZlciA9IHR5cGluZy5OZXZlclxuZWxzZTpcbiAgICBAX1NwZWNpYWxGb3JtXG4gICAgZGVmIE5ldmVyKHNlbGYsIHBhcmFtcyk6XG4gICAgICAgICIiIlRoZSBib3R0b20gdHlwZSwgYSB0eXBlIHRoYXQgaGFzIG5vIG1lbWJlcnMuXG5cbiAgICAgICAgVGhpcyBjYW4gYmUgdXNlZCB0byBkZWZpbmUgYSBmdW5jdGlvbiB0aGF0IHNob3VsZCBuZXZlciBiZVxuICAgICAgICBjYWxsZWQsIG9yIGEgZnVuY3Rpb24gdGhhdCBuZXZlciByZXR1cm5zOjpcblxuICAgICAgICAgICAgZnJvbSB0eXBpbmdfZXh0ZW5zaW9ucyBpbXBvcnQgTmV2ZXJcblxuICAgICAgICAgICAgZGVmIG5ldmVyX2NhbGxfbWUoYXJnOiBOZXZlcikgLT4gTm9uZTpcbiAgICAgICAgICAgICAgICBwYXNzXG5cbiAgICAgICAgICAgIGRlZiBpbnRfb3Jfc3RyKGFyZzogaW50IHwgc3RyKSAtPiBOb25lOlxuICAgICAgICAgICAgICAgIG5ldmVyX2NhbGxfbWUoYXJnKSAgIyB0eXBlIGNoZWNrZXIgZXJyb3JcbiAgICAgICAgICAgICAgICBtYXRjaCBhcmc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaW50KCk6XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiSXRcJ3MgYW4gaW50IilcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBzdHIoKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJJdFwncyBhIHN0ciIpXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldmVyX2NhbGxfbWUoYXJnKSAgIyBvaywgYXJnIGlzIG9mIHR5cGUgTmV2ZXJcblxuICAgICAgICAiIiJcblxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJ7c2VsZn0gaXMgbm90IHN1YnNjcmlwdGFibGUiKVxuXG5cbmlmIGhhc2F0dHIodHlwaW5nLCBcJ1JlcXVpcmVkXCcpOlxuICAgIFJlcXVpcmVkID0gdHlwaW5nLlJlcXVpcmVkXG4gICAgTm90UmVxdWlyZWQgPSB0eXBpbmcuTm90UmVxdWlyZWRcbmVsaWYgc3lzLnZlcnNpb25faW5mb1s6Ml0gPj0gKDMsIDkpOlxuICAgIGNsYXNzIF9FeHRlbnNpb25zU3BlY2lhbEZvcm0odHlwaW5nLl9TcGVjaWFsRm9ybSwgX3Jvb3Q9VHJ1ZSk6XG4gICAgICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgICAgIHJldHVybiBcJ3R5cGluZ19leHRlbnNpb25zLlwnICsgc2VsZi5fbmFtZVxuXG4gICAgQF9FeHRlbnNpb25zU3BlY2lhbEZvcm1cbiAgICBkZWYgUmVxdWlyZWQoc2VsZiwgcGFyYW1ldGVycyk6XG4gICAgICAgICIiIkEgc3BlY2lhbCB0eXBpbmcgY29uc3RydWN0IHRvIG1hcmsgYSBrZXkgb2YgYSB0b3RhbD1GYWxzZSBUeXBlZERpY3RcbiAgICAgICAgYXMgcmVxdWlyZWQuIEZvciBleGFtcGxlOlxuXG4gICAgICAgICAgICBjbGFzcyBNb3ZpZShUeXBlZERpY3QsIHRvdGFsPUZhbHNlKTpcbiAgICAgICAgICAgICAgICB0aXRsZTogUmVxdWlyZWRbc3RyXVxuICAgICAgICAgICAgICAgIHllYXI6IGludFxuXG4gICAgICAgICAgICBtID0gTW92aWUoXG4gICAgICAgICAgICAgICAgdGl0bGU9XCdUaGUgTWF0cml4XCcsICAjIHR5cGVjaGVja2VyIGVycm9yIGlmIGtleSBpcyBvbWl0dGVkXG4gICAgICAgICAgICAgICAgeWVhcj0xOTk5LFxuICAgICAgICAgICAgKVxuXG4gICAgICAgIFRoZXJlIGlzIG5vIHJ1bnRpbWUgY2hlY2tpbmcgdGhhdCBhIHJlcXVpcmVkIGtleSBpcyBhY3R1YWxseSBwcm92aWRlZFxuICAgICAgICB3aGVuIGluc3RhbnRpYXRpbmcgYSByZWxhdGVkIFR5cGVkRGljdC5cbiAgICAgICAgIiIiXG4gICAgICAgIGl0ZW0gPSB0eXBpbmcuX3R5cGVfY2hlY2socGFyYW1ldGVycywgZlwne3NlbGYuX25hbWV9IGFjY2VwdHMgb25seSBhIHNpbmdsZSB0eXBlLlwnKVxuICAgICAgICByZXR1cm4gdHlwaW5nLl9HZW5lcmljQWxpYXMoc2VsZiwgKGl0ZW0sKSlcblxuICAgIEBfRXh0ZW5zaW9uc1NwZWNpYWxGb3JtXG4gICAgZGVmIE5vdFJlcXVpcmVkKHNlbGYsIHBhcmFtZXRlcnMpOlxuICAgICAgICAiIiJBIHNwZWNpYWwgdHlwaW5nIGNvbnN0cnVjdCB0byBtYXJrIGEga2V5IG9mIGEgVHlwZWREaWN0IGFzXG4gICAgICAgIHBvdGVudGlhbGx5IG1pc3NpbmcuIEZvciBleGFtcGxlOlxuXG4gICAgICAgICAgICBjbGFzcyBNb3ZpZShUeXBlZERpY3QpOlxuICAgICAgICAgICAgICAgIHRpdGxlOiBzdHJcbiAgICAgICAgICAgICAgICB5ZWFyOiBOb3RSZXF1aXJlZFtpbnRdXG5cbiAgICAgICAgICAgIG0gPSBNb3ZpZShcbiAgICAgICAgICAgICAgICB0aXRsZT1cJ1RoZSBNYXRyaXhcJywgICMgdHlwZWNoZWNrZXIgZXJyb3IgaWYga2V5IGlzIG9taXR0ZWRcbiAgICAgICAgICAgICAgICB5ZWFyPTE5OTksXG4gICAgICAgICAgICApXG4gICAgICAgICIiIlxuICAgICAgICBpdGVtID0gdHlwaW5nLl90eXBlX2NoZWNrKHBhcmFtZXRlcnMsIGZcJ3tzZWxmLl9uYW1lfSBhY2NlcHRzIG9ubHkgYSBzaW5nbGUgdHlwZS5cJylcbiAgICAgICAgcmV0dXJuIHR5cGluZy5fR2VuZXJpY0FsaWFzKHNlbGYsIChpdGVtLCkpXG5cbmVsc2U6XG4gICAgY2xhc3MgX1JlcXVpcmVkRm9ybSh0eXBpbmcuX1NwZWNpYWxGb3JtLCBfcm9vdD1UcnVlKTpcbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIFwndHlwaW5nX2V4dGVuc2lvbnMuXCcgKyBzZWxmLl9uYW1lXG5cbiAgICAgICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIHBhcmFtZXRlcnMpOlxuICAgICAgICAgICAgaXRlbSA9IHR5cGluZy5fdHlwZV9jaGVjayhwYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmXCd7c2VsZi5fbmFtZX0gYWNjZXB0cyBvbmx5IGEgc2luZ2xlIHR5cGUuXCcpXG4gICAgICAgICAgICByZXR1cm4gdHlwaW5nLl9HZW5lcmljQWxpYXMoc2VsZiwgKGl0ZW0sKSlcblxuICAgIFJlcXVpcmVkID0gX1JlcXVpcmVkRm9ybShcbiAgICAgICAgXCdSZXF1aXJlZFwnLFxuICAgICAgICBkb2M9IiIiQSBzcGVjaWFsIHR5cGluZyBjb25zdHJ1Y3QgdG8gbWFyayBhIGtleSBvZiBhIHRvdGFsPUZhbHNlIFR5cGVkRGljdFxuICAgICAgICBhcyByZXF1aXJlZC4gRm9yIGV4YW1wbGU6XG5cbiAgICAgICAgICAgIGNsYXNzIE1vdmllKFR5cGVkRGljdCwgdG90YWw9RmFsc2UpOlxuICAgICAgICAgICAgICAgIHRpdGxlOiBSZXF1aXJlZFtzdHJdXG4gICAgICAgICAgICAgICAgeWVhcjogaW50XG5cbiAgICAgICAgICAgIG0gPSBNb3ZpZShcbiAgICAgICAgICAgICAgICB0aXRsZT1cJ1RoZSBNYXRyaXhcJywgICMgdHlwZWNoZWNrZXIgZXJyb3IgaWYga2V5IGlzIG9taXR0ZWRcbiAgICAgICAgICAgICAgICB5ZWFyPTE5OTksXG4gICAgICAgICAgICApXG5cbiAgICAgICAgVGhlcmUgaXMgbm8gcnVudGltZSBjaGVja2luZyB0aGF0IGEgcmVxdWlyZWQga2V5IGlzIGFjdHVhbGx5IHByb3ZpZGVkXG4gICAgICAgIHdoZW4gaW5zdGFudGlhdGluZyBhIHJlbGF0ZWQgVHlwZWREaWN0LlxuICAgICAgICAiIiIpXG4gICAgTm90UmVxdWlyZWQgPSBfUmVxdWlyZWRGb3JtKFxuICAgICAgICBcJ05vdFJlcXVpcmVkXCcsXG4gICAgICAgIGRvYz0iIiJBIHNwZWNpYWwgdHlwaW5nIGNvbnN0cnVjdCB0byBtYXJrIGEga2V5IG9mIGEgVHlwZWREaWN0IGFzXG4gICAgICAgIHBvdGVudGlhbGx5IG1pc3NpbmcuIEZvciBleGFtcGxlOlxuXG4gICAgICAgICAgICBjbGFzcyBNb3ZpZShUeXBlZERpY3QpOlxuICAgICAgICAgICAgICAgIHRpdGxlOiBzdHJcbiAgICAgICAgICAgICAgICB5ZWFyOiBOb3RSZXF1aXJlZFtpbnRdXG5cbiAgICAgICAgICAgIG0gPSBNb3ZpZShcbiAgICAgICAgICAgICAgICB0aXRsZT1cJ1RoZSBNYXRyaXhcJywgICMgdHlwZWNoZWNrZXIgZXJyb3IgaWYga2V5IGlzIG9taXR0ZWRcbiAgICAgICAgICAgICAgICB5ZWFyPTE5OTksXG4gICAgICAgICAgICApXG4gICAgICAgICIiIilcblxuXG5pZiBoYXNhdHRyKHR5cGluZywgIlVucGFjayIpOiAgIyAzLjExK1xuICAgIFVucGFjayA9IHR5cGluZy5VbnBhY2tcbmVsaWYgc3lzLnZlcnNpb25faW5mb1s6Ml0gPj0gKDMsIDkpOlxuICAgIGNsYXNzIF9VbnBhY2tTcGVjaWFsRm9ybSh0eXBpbmcuX1NwZWNpYWxGb3JtLCBfcm9vdD1UcnVlKTpcbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIFwndHlwaW5nX2V4dGVuc2lvbnMuXCcgKyBzZWxmLl9uYW1lXG5cbiAgICBjbGFzcyBfVW5wYWNrQWxpYXModHlwaW5nLl9HZW5lcmljQWxpYXMsIF9yb290PVRydWUpOlxuICAgICAgICBfX2NsYXNzX18gPSB0eXBpbmcuVHlwZVZhclxuXG4gICAgQF9VbnBhY2tTcGVjaWFsRm9ybVxuICAgIGRlZiBVbnBhY2soc2VsZiwgcGFyYW1ldGVycyk6XG4gICAgICAgICIiIkEgc3BlY2lhbCB0eXBpbmcgY29uc3RydWN0IHRvIHVucGFjayBhIHZhcmlhZGljIHR5cGUuIEZvciBleGFtcGxlOlxuXG4gICAgICAgICAgICBTaGFwZSA9IFR5cGVWYXJUdXBsZShcJ1NoYXBlXCcpXG4gICAgICAgICAgICBCYXRjaCA9IE5ld1R5cGUoXCdCYXRjaFwnLCBpbnQpXG5cbiAgICAgICAgICAgIGRlZiBhZGRfYmF0Y2hfYXhpcyhcbiAgICAgICAgICAgICAgICB4OiBBcnJheVtVbnBhY2tbU2hhcGVdXVxuICAgICAgICAgICAgKSAtPiBBcnJheVtCYXRjaCwgVW5wYWNrW1NoYXBlXV06IC4uLlxuXG4gICAgICAgICIiIlxuICAgICAgICBpdGVtID0gdHlwaW5nLl90eXBlX2NoZWNrKHBhcmFtZXRlcnMsIGZcJ3tzZWxmLl9uYW1lfSBhY2NlcHRzIG9ubHkgYSBzaW5nbGUgdHlwZS5cJylcbiAgICAgICAgcmV0dXJuIF9VbnBhY2tBbGlhcyhzZWxmLCAoaXRlbSwpKVxuXG4gICAgZGVmIF9pc191bnBhY2sob2JqKTpcbiAgICAgICAgcmV0dXJuIGlzaW5zdGFuY2Uob2JqLCBfVW5wYWNrQWxpYXMpXG5cbmVsc2U6XG4gICAgY2xhc3MgX1VucGFja0FsaWFzKHR5cGluZy5fR2VuZXJpY0FsaWFzLCBfcm9vdD1UcnVlKTpcbiAgICAgICAgX19jbGFzc19fID0gdHlwaW5nLlR5cGVWYXJcblxuICAgIGNsYXNzIF9VbnBhY2tGb3JtKHR5cGluZy5fU3BlY2lhbEZvcm0sIF9yb290PVRydWUpOlxuICAgICAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gXCd0eXBpbmdfZXh0ZW5zaW9ucy5cJyArIHNlbGYuX25hbWVcblxuICAgICAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgcGFyYW1ldGVycyk6XG4gICAgICAgICAgICBpdGVtID0gdHlwaW5nLl90eXBlX2NoZWNrKHBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZcJ3tzZWxmLl9uYW1lfSBhY2NlcHRzIG9ubHkgYSBzaW5nbGUgdHlwZS5cJylcbiAgICAgICAgICAgIHJldHVybiBfVW5wYWNrQWxpYXMoc2VsZiwgKGl0ZW0sKSlcblxuICAgIFVucGFjayA9IF9VbnBhY2tGb3JtKFxuICAgICAgICBcJ1VucGFja1wnLFxuICAgICAgICBkb2M9IiIiQSBzcGVjaWFsIHR5cGluZyBjb25zdHJ1Y3QgdG8gdW5wYWNrIGEgdmFyaWFkaWMgdHlwZS4gRm9yIGV4YW1wbGU6XG5cbiAgICAgICAgICAgIFNoYXBlID0gVHlwZVZhclR1cGxlKFwnU2hhcGVcJylcbiAgICAgICAgICAgIEJhdGNoID0gTmV3VHlwZShcJ0JhdGNoXCcsIGludClcblxuICAgICAgICAgICAgZGVmIGFkZF9iYXRjaF9heGlzKFxuICAgICAgICAgICAgICAgIHg6IEFycmF5W1VucGFja1tTaGFwZV1dXG4gICAgICAgICAgICApIC0+IEFycmF5W0JhdGNoLCBVbnBhY2tbU2hhcGVdXTogLi4uXG5cbiAgICAgICAgIiIiKVxuXG4gICAgZGVmIF9pc191bnBhY2sob2JqKTpcbiAgICAgICAgcmV0dXJuIGlzaW5zdGFuY2Uob2JqLCBfVW5wYWNrQWxpYXMpXG5cblxuaWYgaGFzYXR0cih0eXBpbmcsICJUeXBlVmFyVHVwbGUiKTogICMgMy4xMStcbiAgICBUeXBlVmFyVHVwbGUgPSB0eXBpbmcuVHlwZVZhclR1cGxlXG5lbHNlOlxuICAgIGNsYXNzIFR5cGVWYXJUdXBsZTpcbiAgICAgICAgIiIiVHlwZSB2YXJpYWJsZSB0dXBsZS5cblxuICAgICAgICBVc2FnZTo6XG5cbiAgICAgICAgICAgIFRzID0gVHlwZVZhclR1cGxlKFwnVHNcJylcblxuICAgICAgICBJbiB0aGUgc2FtZSB3YXkgdGhhdCBhIG5vcm1hbCB0eXBlIHZhcmlhYmxlIGlzIGEgc3RhbmQtaW4gZm9yIGEgc2luZ2xlXG4gICAgICAgIHR5cGUgc3VjaCBhcyBgYGludGBgLCBhIHR5cGUgdmFyaWFibGUgKnR1cGxlKiBpcyBhIHN0YW5kLWluIGZvciBhICp0dXBsZSpcbiAgICAgICAgdHlwZSBzdWNoIGFzIGBgVHVwbGVbaW50LCBzdHJdYGAuXG5cbiAgICAgICAgVHlwZSB2YXJpYWJsZSB0dXBsZXMgY2FuIGJlIHVzZWQgaW4gYGBHZW5lcmljYGAgZGVjbGFyYXRpb25zLlxuICAgICAgICBDb25zaWRlciB0aGUgZm9sbG93aW5nIGV4YW1wbGU6OlxuXG4gICAgICAgICAgICBjbGFzcyBBcnJheShHZW5lcmljWypUc10pOiAuLi5cblxuICAgICAgICBUaGUgYGBUc2BgIHR5cGUgdmFyaWFibGUgdHVwbGUgaGVyZSBiZWhhdmVzIGxpa2UgYGB0dXBsZVtUMSwgVDJdYGAsXG4gICAgICAgIHdoZXJlIGBgVDFgYCBhbmQgYGBUMmBgIGFyZSB0eXBlIHZhcmlhYmxlcy4gVG8gdXNlIHRoZXNlIHR5cGUgdmFyaWFibGVzXG4gICAgICAgIGFzIHR5cGUgcGFyYW1ldGVycyBvZiBgYEFycmF5YGAsIHdlIG11c3QgKnVucGFjayogdGhlIHR5cGUgdmFyaWFibGUgdHVwbGUgdXNpbmdcbiAgICAgICAgdGhlIHN0YXIgb3BlcmF0b3I6IGBgKlRzYGAuIFRoZSBzaWduYXR1cmUgb2YgYGBBcnJheWBgIHRoZW4gYmVoYXZlc1xuICAgICAgICBhcyBpZiB3ZSBoYWQgc2ltcGx5IHdyaXR0ZW4gYGBjbGFzcyBBcnJheShHZW5lcmljW1QxLCBUMl0pOiAuLi5gYC5cbiAgICAgICAgSW4gY29udHJhc3QgdG8gYGBHZW5lcmljW1QxLCBUMl1gYCwgaG93ZXZlciwgYGBHZW5lcmljWypTaGFwZV1gYCBhbGxvd3NcbiAgICAgICAgdXMgdG8gcGFyYW1ldGVyaXNlIHRoZSBjbGFzcyB3aXRoIGFuICphcmJpdHJhcnkqIG51bWJlciBvZiB0eXBlIHBhcmFtZXRlcnMuXG5cbiAgICAgICAgVHlwZSB2YXJpYWJsZSB0dXBsZXMgY2FuIGJlIHVzZWQgYW55d2hlcmUgYSBub3JtYWwgYGBUeXBlVmFyYGAgY2FuLlxuICAgICAgICBUaGlzIGluY2x1ZGVzIGNsYXNzIGRlZmluaXRpb25zLCBhcyBzaG93biBhYm92ZSwgYXMgd2VsbCBhcyBmdW5jdGlvblxuICAgICAgICBzaWduYXR1cmVzIGFuZCB2YXJpYWJsZSBhbm5vdGF0aW9uczo6XG5cbiAgICAgICAgICAgIGNsYXNzIEFycmF5KEdlbmVyaWNbKlRzXSk6XG5cbiAgICAgICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgc2hhcGU6IFR1cGxlWypUc10pOlxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9zaGFwZTogVHVwbGVbKlRzXSA9IHNoYXBlXG5cbiAgICAgICAgICAgICAgICBkZWYgZ2V0X3NoYXBlKHNlbGYpIC0+IFR1cGxlWypUc106XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9zaGFwZVxuXG4gICAgICAgICAgICBzaGFwZSA9IChIZWlnaHQoNDgwKSwgV2lkdGgoNjQwKSlcbiAgICAgICAgICAgIHg6IEFycmF5W0hlaWdodCwgV2lkdGhdID0gQXJyYXkoc2hhcGUpXG4gICAgICAgICAgICB5ID0gYWJzKHgpICAjIEluZmVycmVkIHR5cGUgaXMgQXJyYXlbSGVpZ2h0LCBXaWR0aF1cbiAgICAgICAgICAgIHogPSB4ICsgeCAgICMgICAgICAgIC4uLiAgICBpcyBBcnJheVtIZWlnaHQsIFdpZHRoXVxuICAgICAgICAgICAgeC5nZXRfc2hhcGUoKSAgIyAgICAgLi4uICAgIGlzIHR1cGxlW0hlaWdodCwgV2lkdGhdXG5cbiAgICAgICAgIiIiXG5cbiAgICAgICAgIyBUcmljayBHZW5lcmljIF9fcGFyYW1ldGVyc19fLlxuICAgICAgICBfX2NsYXNzX18gPSB0eXBpbmcuVHlwZVZhclxuXG4gICAgICAgIGRlZiBfX2l0ZXJfXyhzZWxmKTpcbiAgICAgICAgICAgIHlpZWxkIHNlbGYuX191bnBhY2tlZF9fXG5cbiAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUpOlxuICAgICAgICAgICAgc2VsZi5fX25hbWVfXyA9IG5hbWVcblxuICAgICAgICAgICAgIyBmb3IgcGlja2xpbmc6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgZGVmX21vZCA9IHN5cy5fZ2V0ZnJhbWUoMSkuZl9nbG9iYWxzLmdldChcJ19fbmFtZV9fXCcsIFwnX19tYWluX19cJylcbiAgICAgICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIFZhbHVlRXJyb3IpOlxuICAgICAgICAgICAgICAgIGRlZl9tb2QgPSBOb25lXG4gICAgICAgICAgICBpZiBkZWZfbW9kICE9IFwndHlwaW5nX2V4dGVuc2lvbnNcJzpcbiAgICAgICAgICAgICAgICBzZWxmLl9fbW9kdWxlX18gPSBkZWZfbW9kXG5cbiAgICAgICAgICAgIHNlbGYuX191bnBhY2tlZF9fID0gVW5wYWNrW3NlbGZdXG5cbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19uYW1lX19cblxuICAgICAgICBkZWYgX19oYXNoX18oc2VsZik6XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0Ll9faGFzaF9fKHNlbGYpXG5cbiAgICAgICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgICAgICByZXR1cm4gc2VsZiBpcyBvdGhlclxuXG4gICAgICAgIGRlZiBfX3JlZHVjZV9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19uYW1lX19cblxuICAgICAgICBkZWYgX19pbml0X3N1YmNsYXNzX18oc2VsZiwgKmFyZ3MsICoqa3dkcyk6XG4gICAgICAgICAgICBpZiBcJ19yb290XCcgbm90IGluIGt3ZHM6XG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJDYW5ub3Qgc3ViY2xhc3Mgc3BlY2lhbCB0eXBpbmcgY2xhc3NlcyIpXG5cblxuaWYgaGFzYXR0cih0eXBpbmcsICJyZXZlYWxfdHlwZSIpOlxuICAgIHJldmVhbF90eXBlID0gdHlwaW5nLnJldmVhbF90eXBlXG5lbHNlOlxuICAgIGRlZiByZXZlYWxfdHlwZShfX29iajogVCkgLT4gVDpcbiAgICAgICAgIiIiUmV2ZWFsIHRoZSBpbmZlcnJlZCB0eXBlIG9mIGEgdmFyaWFibGUuXG5cbiAgICAgICAgV2hlbiBhIHN0YXRpYyB0eXBlIGNoZWNrZXIgZW5jb3VudGVycyBhIGNhbGwgdG8gYGByZXZlYWxfdHlwZSgpYGAsXG4gICAgICAgIGl0IHdpbGwgZW1pdCB0aGUgaW5mZXJyZWQgdHlwZSBvZiB0aGUgYXJndW1lbnQ6OlxuXG4gICAgICAgICAgICB4OiBpbnQgPSAxXG4gICAgICAgICAgICByZXZlYWxfdHlwZSh4KVxuXG4gICAgICAgIFJ1bm5pbmcgYSBzdGF0aWMgdHlwZSBjaGVja2VyIChlLmcuLCBgYG15cHlgYCkgb24gdGhpcyBleGFtcGxlXG4gICAgICAgIHdpbGwgcHJvZHVjZSBvdXRwdXQgc2ltaWxhciB0byBcJ1JldmVhbGVkIHR5cGUgaXMgImJ1aWx0aW5zLmludCJcJy5cblxuICAgICAgICBBdCBydW50aW1lLCB0aGUgZnVuY3Rpb24gcHJpbnRzIHRoZSBydW50aW1lIHR5cGUgb2YgdGhlXG4gICAgICAgIGFyZ3VtZW50IGFuZCByZXR1cm5zIGl0IHVuY2hhbmdlZC5cblxuICAgICAgICAiIiJcbiAgICAgICAgcHJpbnQoZiJSdW50aW1lIHR5cGUgaXMge3R5cGUoX19vYmopLl9fbmFtZV9fIXJ9IiwgZmlsZT1zeXMuc3RkZXJyKVxuICAgICAgICByZXR1cm4gX19vYmpcblxuXG5pZiBoYXNhdHRyKHR5cGluZywgImFzc2VydF9uZXZlciIpOlxuICAgIGFzc2VydF9uZXZlciA9IHR5cGluZy5hc3NlcnRfbmV2ZXJcbmVsc2U6XG4gICAgZGVmIGFzc2VydF9uZXZlcihfX2FyZzogTmV2ZXIpIC0+IE5ldmVyOlxuICAgICAgICAiIiJBc3NlcnQgdG8gdGhlIHR5cGUgY2hlY2tlciB0aGF0IGEgbGluZSBvZiBjb2RlIGlzIHVucmVhY2hhYmxlLlxuXG4gICAgICAgIEV4YW1wbGU6OlxuXG4gICAgICAgICAgICBkZWYgaW50X29yX3N0cihhcmc6IGludCB8IHN0cikgLT4gTm9uZTpcbiAgICAgICAgICAgICAgICBtYXRjaCBhcmc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaW50KCk6XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiSXRcJ3MgYW4gaW50IilcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBzdHIoKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJJdFwncyBhIHN0ciIpXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydF9uZXZlcihhcmcpXG5cbiAgICAgICAgSWYgYSB0eXBlIGNoZWNrZXIgZmluZHMgdGhhdCBhIGNhbGwgdG8gYXNzZXJ0X25ldmVyKCkgaXNcbiAgICAgICAgcmVhY2hhYmxlLCBpdCB3aWxsIGVtaXQgYW4gZXJyb3IuXG5cbiAgICAgICAgQXQgcnVudGltZSwgdGhpcyB0aHJvd3MgYW4gZXhjZXB0aW9uIHdoZW4gY2FsbGVkLlxuXG4gICAgICAgICIiIlxuICAgICAgICByYWlzZSBBc3NlcnRpb25FcnJvcigiRXhwZWN0ZWQgY29kZSB0byBiZSB1bnJlYWNoYWJsZSIpXG5cblxuaWYgaGFzYXR0cih0eXBpbmcsIFwnZGF0YWNsYXNzX3RyYW5zZm9ybVwnKTpcbiAgICBkYXRhY2xhc3NfdHJhbnNmb3JtID0gdHlwaW5nLmRhdGFjbGFzc190cmFuc2Zvcm1cbmVsc2U6XG4gICAgZGVmIGRhdGFjbGFzc190cmFuc2Zvcm0oXG4gICAgICAgICosXG4gICAgICAgIGVxX2RlZmF1bHQ6IGJvb2wgPSBUcnVlLFxuICAgICAgICBvcmRlcl9kZWZhdWx0OiBib29sID0gRmFsc2UsXG4gICAgICAgIGt3X29ubHlfZGVmYXVsdDogYm9vbCA9IEZhbHNlLFxuICAgICAgICBmaWVsZF9zcGVjaWZpZXJzOiB0eXBpbmcuVHVwbGVbXG4gICAgICAgICAgICB0eXBpbmcuVW5pb25bdHlwaW5nLlR5cGVbdHlwaW5nLkFueV0sIHR5cGluZy5DYWxsYWJsZVsuLi4sIHR5cGluZy5BbnldXSxcbiAgICAgICAgICAgIC4uLlxuICAgICAgICBdID0gKCksXG4gICAgICAgICoqa3dhcmdzOiB0eXBpbmcuQW55LFxuICAgICkgLT4gdHlwaW5nLkNhbGxhYmxlW1tUXSwgVF06XG4gICAgICAgICIiIkRlY29yYXRvciB0aGF0IG1hcmtzIGEgZnVuY3Rpb24sIGNsYXNzLCBvciBtZXRhY2xhc3MgYXMgcHJvdmlkaW5nXG4gICAgICAgIGRhdGFjbGFzcy1saWtlIGJlaGF2aW9yLlxuXG4gICAgICAgIEV4YW1wbGU6XG5cbiAgICAgICAgICAgIGZyb20gdHlwaW5nX2V4dGVuc2lvbnMgaW1wb3J0IGRhdGFjbGFzc190cmFuc2Zvcm1cblxuICAgICAgICAgICAgX1QgPSBUeXBlVmFyKCJfVCIpXG5cbiAgICAgICAgICAgICMgVXNlZCBvbiBhIGRlY29yYXRvciBmdW5jdGlvblxuICAgICAgICAgICAgQGRhdGFjbGFzc190cmFuc2Zvcm0oKVxuICAgICAgICAgICAgZGVmIGNyZWF0ZV9tb2RlbChjbHM6IHR5cGVbX1RdKSAtPiB0eXBlW19UXTpcbiAgICAgICAgICAgICAgICAuLi5cbiAgICAgICAgICAgICAgICByZXR1cm4gY2xzXG5cbiAgICAgICAgICAgIEBjcmVhdGVfbW9kZWxcbiAgICAgICAgICAgIGNsYXNzIEN1c3RvbWVyTW9kZWw6XG4gICAgICAgICAgICAgICAgaWQ6IGludFxuICAgICAgICAgICAgICAgIG5hbWU6IHN0clxuXG4gICAgICAgICAgICAjIFVzZWQgb24gYSBiYXNlIGNsYXNzXG4gICAgICAgICAgICBAZGF0YWNsYXNzX3RyYW5zZm9ybSgpXG4gICAgICAgICAgICBjbGFzcyBNb2RlbEJhc2U6IC4uLlxuXG4gICAgICAgICAgICBjbGFzcyBDdXN0b21lck1vZGVsKE1vZGVsQmFzZSk6XG4gICAgICAgICAgICAgICAgaWQ6IGludFxuICAgICAgICAgICAgICAgIG5hbWU6IHN0clxuXG4gICAgICAgICAgICAjIFVzZWQgb24gYSBtZXRhY2xhc3NcbiAgICAgICAgICAgIEBkYXRhY2xhc3NfdHJhbnNmb3JtKClcbiAgICAgICAgICAgIGNsYXNzIE1vZGVsTWV0YSh0eXBlKTogLi4uXG5cbiAgICAgICAgICAgIGNsYXNzIE1vZGVsQmFzZShtZXRhY2xhc3M9TW9kZWxNZXRhKTogLi4uXG5cbiAgICAgICAgICAgIGNsYXNzIEN1c3RvbWVyTW9kZWwoTW9kZWxCYXNlKTpcbiAgICAgICAgICAgICAgICBpZDogaW50XG4gICAgICAgICAgICAgICAgbmFtZTogc3RyXG5cbiAgICAgICAgRWFjaCBvZiB0aGUgYGBDdXN0b21lck1vZGVsYGAgY2xhc3NlcyBkZWZpbmVkIGluIHRoaXMgZXhhbXBsZSB3aWxsIG5vd1xuICAgICAgICBiZWhhdmUgc2ltaWxhcmx5IHRvIGEgZGF0YWNsYXNzIGNyZWF0ZWQgd2l0aCB0aGUgYGBAZGF0YWNsYXNzZXMuZGF0YWNsYXNzYGBcbiAgICAgICAgZGVjb3JhdG9yLiBGb3IgZXhhbXBsZSwgdGhlIHR5cGUgY2hlY2tlciB3aWxsIHN5bnRoZXNpemUgYW4gYGBfX2luaXRfX2BgXG4gICAgICAgIG1ldGhvZC5cblxuICAgICAgICBUaGUgYXJndW1lbnRzIHRvIHRoaXMgZGVjb3JhdG9yIGNhbiBiZSB1c2VkIHRvIGN1c3RvbWl6ZSB0aGlzIGJlaGF2aW9yOlxuICAgICAgICAtIGBgZXFfZGVmYXVsdGBgIGluZGljYXRlcyB3aGV0aGVyIHRoZSBgYGVxYGAgcGFyYW1ldGVyIGlzIGFzc3VtZWQgdG8gYmVcbiAgICAgICAgICBUcnVlIG9yIEZhbHNlIGlmIGl0IGlzIG9taXR0ZWQgYnkgdGhlIGNhbGxlci5cbiAgICAgICAgLSBgYG9yZGVyX2RlZmF1bHRgYCBpbmRpY2F0ZXMgd2hldGhlciB0aGUgYGBvcmRlcmBgIHBhcmFtZXRlciBpc1xuICAgICAgICAgIGFzc3VtZWQgdG8gYmUgVHJ1ZSBvciBGYWxzZSBpZiBpdCBpcyBvbWl0dGVkIGJ5IHRoZSBjYWxsZXIuXG4gICAgICAgIC0gYGBrd19vbmx5X2RlZmF1bHRgYCBpbmRpY2F0ZXMgd2hldGhlciB0aGUgYGBrd19vbmx5YGAgcGFyYW1ldGVyIGlzXG4gICAgICAgICAgYXNzdW1lZCB0byBiZSBUcnVlIG9yIEZhbHNlIGlmIGl0IGlzIG9taXR0ZWQgYnkgdGhlIGNhbGxlci5cbiAgICAgICAgLSBgYGZpZWxkX3NwZWNpZmllcnNgYCBzcGVjaWZpZXMgYSBzdGF0aWMgbGlzdCBvZiBzdXBwb3J0ZWQgY2xhc3Nlc1xuICAgICAgICAgIG9yIGZ1bmN0aW9ucyB0aGF0IGRlc2NyaWJlIGZpZWxkcywgc2ltaWxhciB0byBgYGRhdGFjbGFzc2VzLmZpZWxkKClgYC5cblxuICAgICAgICBBdCBydW50aW1lLCB0aGlzIGRlY29yYXRvciByZWNvcmRzIGl0cyBhcmd1bWVudHMgaW4gdGhlXG4gICAgICAgIGBgX19kYXRhY2xhc3NfdHJhbnNmb3JtX19gYCBhdHRyaWJ1dGUgb24gdGhlIGRlY29yYXRlZCBvYmplY3QuXG5cbiAgICAgICAgU2VlIFBFUCA2ODEgZm9yIGRldGFpbHMuXG5cbiAgICAgICAgIiIiXG4gICAgICAgIGRlZiBkZWNvcmF0b3IoY2xzX29yX2ZuKTpcbiAgICAgICAgICAgIGNsc19vcl9mbi5fX2RhdGFjbGFzc190cmFuc2Zvcm1fXyA9IHtcbiAgICAgICAgICAgICAgICAiZXFfZGVmYXVsdCI6IGVxX2RlZmF1bHQsXG4gICAgICAgICAgICAgICAgIm9yZGVyX2RlZmF1bHQiOiBvcmRlcl9kZWZhdWx0LFxuICAgICAgICAgICAgICAgICJrd19vbmx5X2RlZmF1bHQiOiBrd19vbmx5X2RlZmF1bHQsXG4gICAgICAgICAgICAgICAgImZpZWxkX3NwZWNpZmllcnMiOiBmaWVsZF9zcGVjaWZpZXJzLFxuICAgICAgICAgICAgICAgICJrd2FyZ3MiOiBrd2FyZ3MsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2xzX29yX2ZuXG4gICAgICAgIHJldHVybiBkZWNvcmF0b3JcblxuXG4jIFdlIGhhdmUgdG8gZG8gc29tZSBtb25rZXkgcGF0Y2hpbmcgdG8gZGVhbCB3aXRoIHRoZSBkdWFsIG5hdHVyZSBvZlxuIyBVbnBhY2svVHlwZVZhclR1cGxlOlxuIyAtIFdlIHdhbnQgVW5wYWNrIHRvIGJlIGEga2luZCBvZiBUeXBlVmFyIHNvIGl0IGdldHMgYWNjZXB0ZWQgaW5cbiMgICBHZW5lcmljW1VucGFja1tUc11dXG4jIC0gV2Ugd2FudCBpdCB0byAqbm90KiBiZSB0cmVhdGVkIGFzIGEgVHlwZVZhciBmb3IgdGhlIHB1cnBvc2VzIG9mXG4jICAgY291bnRpbmcgZ2VuZXJpYyBwYXJhbWV0ZXJzLCBzbyB0aGF0IHdoZW4gd2Ugc3Vic2NyaXB0IGEgZ2VuZXJpYyxcbiMgICB0aGUgcnVudGltZSBkb2VzblwndCB0cnkgdG8gc3Vic3RpdHV0ZSB0aGUgVW5wYWNrIHdpdGggdGhlIHN1YnNjcmlwdGVkIHR5cGUuXG5pZiBub3QgaGFzYXR0cih0eXBpbmcsICJUeXBlVmFyVHVwbGUiKTpcbiAgICB0eXBpbmcuX2NvbGxlY3RfdHlwZV92YXJzID0gX2NvbGxlY3RfdHlwZV92YXJzXG4gICAgdHlwaW5nLl9jaGVja19nZW5lcmljID0gX2NoZWNrX2dlbmVyaWNcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2NsaWVudC5weScsIGInIiIiSFRUUCBDbGllbnQgZm9yIGFzeW5jaW8uIiIiXHJcblxyXG5pbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgYmFzZTY0XHJcbmltcG9ydCBoYXNobGliXHJcbmltcG9ydCBqc29uXHJcbmltcG9ydCBvc1xyXG5pbXBvcnQgc3lzXHJcbmltcG9ydCB0cmFjZWJhY2tcclxuaW1wb3J0IHdhcm5pbmdzXHJcbmZyb20gY29udGV4dGxpYiBpbXBvcnQgc3VwcHJlc3NcclxuZnJvbSB0eXBlcyBpbXBvcnQgU2ltcGxlTmFtZXNwYWNlLCBUcmFjZWJhY2tUeXBlXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBBbnksXHJcbiAgICBBd2FpdGFibGUsXHJcbiAgICBDYWxsYWJsZSxcclxuICAgIENvcm91dGluZSxcclxuICAgIEZyb3plblNldCxcclxuICAgIEdlbmVyYXRvcixcclxuICAgIEdlbmVyaWMsXHJcbiAgICBJdGVyYWJsZSxcclxuICAgIExpc3QsXHJcbiAgICBNYXBwaW5nLFxyXG4gICAgT3B0aW9uYWwsXHJcbiAgICBTZXQsXHJcbiAgICBUdXBsZSxcclxuICAgIFR5cGUsXHJcbiAgICBUeXBlVmFyLFxyXG4gICAgVW5pb24sXHJcbilcclxuXHJcbmltcG9ydCBhdHRyXHJcbmZyb20gbXVsdGlkaWN0IGltcG9ydCBDSU11bHRpRGljdCwgTXVsdGlEaWN0LCBNdWx0aURpY3RQcm94eSwgaXN0clxyXG5mcm9tIHlhcmwgaW1wb3J0IFVSTFxyXG5cclxuZnJvbSAuIGltcG9ydCBoZHJzLCBodHRwLCBwYXlsb2FkXHJcbmZyb20gLmFiYyBpbXBvcnQgQWJzdHJhY3RDb29raWVKYXJcclxuZnJvbSAuY2xpZW50X2V4Y2VwdGlvbnMgaW1wb3J0IChcclxuICAgIENsaWVudENvbm5lY3Rpb25FcnJvciBhcyBDbGllbnRDb25uZWN0aW9uRXJyb3IsXHJcbiAgICBDbGllbnRDb25uZWN0b3JDZXJ0aWZpY2F0ZUVycm9yIGFzIENsaWVudENvbm5lY3RvckNlcnRpZmljYXRlRXJyb3IsXHJcbiAgICBDbGllbnRDb25uZWN0b3JFcnJvciBhcyBDbGllbnRDb25uZWN0b3JFcnJvcixcclxuICAgIENsaWVudENvbm5lY3RvclNTTEVycm9yIGFzIENsaWVudENvbm5lY3RvclNTTEVycm9yLFxyXG4gICAgQ2xpZW50RXJyb3IgYXMgQ2xpZW50RXJyb3IsXHJcbiAgICBDbGllbnRIdHRwUHJveHlFcnJvciBhcyBDbGllbnRIdHRwUHJveHlFcnJvcixcclxuICAgIENsaWVudE9TRXJyb3IgYXMgQ2xpZW50T1NFcnJvcixcclxuICAgIENsaWVudFBheWxvYWRFcnJvciBhcyBDbGllbnRQYXlsb2FkRXJyb3IsXHJcbiAgICBDbGllbnRQcm94eUNvbm5lY3Rpb25FcnJvciBhcyBDbGllbnRQcm94eUNvbm5lY3Rpb25FcnJvcixcclxuICAgIENsaWVudFJlc3BvbnNlRXJyb3IgYXMgQ2xpZW50UmVzcG9uc2VFcnJvcixcclxuICAgIENsaWVudFNTTEVycm9yIGFzIENsaWVudFNTTEVycm9yLFxyXG4gICAgQ29udGVudFR5cGVFcnJvciBhcyBDb250ZW50VHlwZUVycm9yLFxyXG4gICAgSW52YWxpZFVSTCBhcyBJbnZhbGlkVVJMLFxyXG4gICAgU2VydmVyQ29ubmVjdGlvbkVycm9yIGFzIFNlcnZlckNvbm5lY3Rpb25FcnJvcixcclxuICAgIFNlcnZlckRpc2Nvbm5lY3RlZEVycm9yIGFzIFNlcnZlckRpc2Nvbm5lY3RlZEVycm9yLFxyXG4gICAgU2VydmVyRmluZ2VycHJpbnRNaXNtYXRjaCBhcyBTZXJ2ZXJGaW5nZXJwcmludE1pc21hdGNoLFxyXG4gICAgU2VydmVyVGltZW91dEVycm9yIGFzIFNlcnZlclRpbWVvdXRFcnJvcixcclxuICAgIFRvb01hbnlSZWRpcmVjdHMgYXMgVG9vTWFueVJlZGlyZWN0cyxcclxuICAgIFdTU2VydmVySGFuZHNoYWtlRXJyb3IgYXMgV1NTZXJ2ZXJIYW5kc2hha2VFcnJvcixcclxuKVxyXG5mcm9tIC5jbGllbnRfcmVxcmVwIGltcG9ydCAoXHJcbiAgICBDbGllbnRSZXF1ZXN0IGFzIENsaWVudFJlcXVlc3QsXHJcbiAgICBDbGllbnRSZXNwb25zZSBhcyBDbGllbnRSZXNwb25zZSxcclxuICAgIEZpbmdlcnByaW50IGFzIEZpbmdlcnByaW50LFxyXG4gICAgUmVxdWVzdEluZm8gYXMgUmVxdWVzdEluZm8sXHJcbiAgICBfbWVyZ2Vfc3NsX3BhcmFtcyxcclxuKVxyXG5mcm9tIC5jbGllbnRfd3MgaW1wb3J0IENsaWVudFdlYlNvY2tldFJlc3BvbnNlIGFzIENsaWVudFdlYlNvY2tldFJlc3BvbnNlXHJcbmZyb20gLmNvbm5lY3RvciBpbXBvcnQgKFxyXG4gICAgQmFzZUNvbm5lY3RvciBhcyBCYXNlQ29ubmVjdG9yLFxyXG4gICAgTmFtZWRQaXBlQ29ubmVjdG9yIGFzIE5hbWVkUGlwZUNvbm5lY3RvcixcclxuICAgIFRDUENvbm5lY3RvciBhcyBUQ1BDb25uZWN0b3IsXHJcbiAgICBVbml4Q29ubmVjdG9yIGFzIFVuaXhDb25uZWN0b3IsXHJcbilcclxuZnJvbSAuY29va2llamFyIGltcG9ydCBDb29raWVKYXJcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgKFxyXG4gICAgREVCVUcsXHJcbiAgICBQWV8zNixcclxuICAgIEJhc2ljQXV0aCxcclxuICAgIFRpbWVvdXRIYW5kbGUsXHJcbiAgICBjZWlsX3RpbWVvdXQsXHJcbiAgICBnZXRfZW52X3Byb3h5X2Zvcl91cmwsXHJcbiAgICBnZXRfcnVubmluZ19sb29wLFxyXG4gICAgc2VudGluZWwsXHJcbiAgICBzdHJpcF9hdXRoX2Zyb21fdXJsLFxyXG4pXHJcbmZyb20gLmh0dHAgaW1wb3J0IFdTX0tFWSwgSHR0cFZlcnNpb24sIFdlYlNvY2tldFJlYWRlciwgV2ViU29ja2V0V3JpdGVyXHJcbmZyb20gLmh0dHBfd2Vic29ja2V0IGltcG9ydCBXU0hhbmRzaGFrZUVycm9yLCBXU01lc3NhZ2UsIHdzX2V4dF9nZW4sIHdzX2V4dF9wYXJzZVxyXG5mcm9tIC5zdHJlYW1zIGltcG9ydCBGbG93Q29udHJvbERhdGFRdWV1ZVxyXG5mcm9tIC50cmFjaW5nIGltcG9ydCBUcmFjZSwgVHJhY2VDb25maWdcclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IEZpbmFsLCBKU09ORW5jb2RlciwgTG9vc2VDb29raWVzLCBMb29zZUhlYWRlcnMsIFN0ck9yVVJMXHJcblxyXG5fX2FsbF9fID0gKFxyXG4gICAgIyBjbGllbnRfZXhjZXB0aW9uc1xyXG4gICAgIkNsaWVudENvbm5lY3Rpb25FcnJvciIsXHJcbiAgICAiQ2xpZW50Q29ubmVjdG9yQ2VydGlmaWNhdGVFcnJvciIsXHJcbiAgICAiQ2xpZW50Q29ubmVjdG9yRXJyb3IiLFxyXG4gICAgIkNsaWVudENvbm5lY3RvclNTTEVycm9yIixcclxuICAgICJDbGllbnRFcnJvciIsXHJcbiAgICAiQ2xpZW50SHR0cFByb3h5RXJyb3IiLFxyXG4gICAgIkNsaWVudE9TRXJyb3IiLFxyXG4gICAgIkNsaWVudFBheWxvYWRFcnJvciIsXHJcbiAgICAiQ2xpZW50UHJveHlDb25uZWN0aW9uRXJyb3IiLFxyXG4gICAgIkNsaWVudFJlc3BvbnNlRXJyb3IiLFxyXG4gICAgIkNsaWVudFNTTEVycm9yIixcclxuICAgICJDb250ZW50VHlwZUVycm9yIixcclxuICAgICJJbnZhbGlkVVJMIixcclxuICAgICJTZXJ2ZXJDb25uZWN0aW9uRXJyb3IiLFxyXG4gICAgIlNlcnZlckRpc2Nvbm5lY3RlZEVycm9yIixcclxuICAgICJTZXJ2ZXJGaW5nZXJwcmludE1pc21hdGNoIixcclxuICAgICJTZXJ2ZXJUaW1lb3V0RXJyb3IiLFxyXG4gICAgIlRvb01hbnlSZWRpcmVjdHMiLFxyXG4gICAgIldTU2VydmVySGFuZHNoYWtlRXJyb3IiLFxyXG4gICAgIyBjbGllbnRfcmVxcmVwXHJcbiAgICAiQ2xpZW50UmVxdWVzdCIsXHJcbiAgICAiQ2xpZW50UmVzcG9uc2UiLFxyXG4gICAgIkZpbmdlcnByaW50IixcclxuICAgICJSZXF1ZXN0SW5mbyIsXHJcbiAgICAjIGNvbm5lY3RvclxyXG4gICAgIkJhc2VDb25uZWN0b3IiLFxyXG4gICAgIlRDUENvbm5lY3RvciIsXHJcbiAgICAiVW5peENvbm5lY3RvciIsXHJcbiAgICAiTmFtZWRQaXBlQ29ubmVjdG9yIixcclxuICAgICMgY2xpZW50X3dzXHJcbiAgICAiQ2xpZW50V2ViU29ja2V0UmVzcG9uc2UiLFxyXG4gICAgIyBjbGllbnRcclxuICAgICJDbGllbnRTZXNzaW9uIixcclxuICAgICJDbGllbnRUaW1lb3V0IixcclxuICAgICJyZXF1ZXN0IixcclxuKVxyXG5cclxuXHJcbnRyeTpcclxuICAgIGZyb20gc3NsIGltcG9ydCBTU0xDb250ZXh0XHJcbmV4Y2VwdCBJbXBvcnRFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgU1NMQ29udGV4dCA9IG9iamVjdCAgIyB0eXBlOiBpZ25vcmVbbWlzYyxhc3NpZ25tZW50XVxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBDbGllbnRUaW1lb3V0OlxyXG4gICAgdG90YWw6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmVcclxuICAgIGNvbm5lY3Q6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmVcclxuICAgIHNvY2tfcmVhZDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZVxyXG4gICAgc29ja19jb25uZWN0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lXHJcblxyXG4gICAgIyBwb29sX3F1ZXVlX3RpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmVcclxuICAgICMgZG5zX3Jlc29sdXRpb25fdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZVxyXG4gICAgIyBzb2NrZXRfY29ubmVjdF90aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lXHJcbiAgICAjIGNvbm5lY3Rpb25fYWNxdWlyaW5nX3RpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmVcclxuICAgICMgbmV3X2Nvbm5lY3Rpb25fdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZVxyXG4gICAgIyBodHRwX2hlYWRlcl90aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lXHJcbiAgICAjIHJlc3BvbnNlX2JvZHlfdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZVxyXG5cclxuICAgICMgdG8gY3JlYXRlIGEgdGltZW91dCBzcGVjaWZpYyBmb3IgYSBzaW5nbGUgcmVxdWVzdCwgZWl0aGVyXHJcbiAgICAjIC0gY3JlYXRlIGEgY29tcGxldGVseSBuZXcgb25lIHRvIG92ZXJ3cml0ZSB0aGUgZGVmYXVsdFxyXG4gICAgIyAtIG9yIHVzZSBodHRwOi8vd3d3LmF0dHJzLm9yZy9lbi9zdGFibGUvYXBpLmh0bWwjYXR0ci5ldm9sdmVcclxuICAgICMgdG8gb3ZlcndyaXRlIHRoZSBkZWZhdWx0c1xyXG5cclxuXHJcbiMgNSBNaW51dGUgZGVmYXVsdCByZWFkIHRpbWVvdXRcclxuREVGQVVMVF9USU1FT1VUOiBGaW5hbFtDbGllbnRUaW1lb3V0XSA9IENsaWVudFRpbWVvdXQodG90YWw9NSAqIDYwKVxyXG5cclxuX1JldFR5cGUgPSBUeXBlVmFyKCJfUmV0VHlwZSIpXHJcblxyXG5cclxuY2xhc3MgQ2xpZW50U2Vzc2lvbjpcclxuICAgICIiIkZpcnN0LWNsYXNzIGludGVyZmFjZSBmb3IgbWFraW5nIEhUVFAgcmVxdWVzdHMuIiIiXHJcblxyXG4gICAgQVRUUlMgPSBmcm96ZW5zZXQoXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgICAiX2Jhc2VfdXJsIixcclxuICAgICAgICAgICAgIl9zb3VyY2VfdHJhY2ViYWNrIixcclxuICAgICAgICAgICAgIl9jb25uZWN0b3IiLFxyXG4gICAgICAgICAgICAicmVxdW90ZV9yZWRpcmVjdF91cmwiLFxyXG4gICAgICAgICAgICAiX2xvb3AiLFxyXG4gICAgICAgICAgICAiX2Nvb2tpZV9qYXIiLFxyXG4gICAgICAgICAgICAiX2Nvbm5lY3Rvcl9vd25lciIsXHJcbiAgICAgICAgICAgICJfZGVmYXVsdF9hdXRoIixcclxuICAgICAgICAgICAgIl92ZXJzaW9uIixcclxuICAgICAgICAgICAgIl9qc29uX3NlcmlhbGl6ZSIsXHJcbiAgICAgICAgICAgICJfcmVxdW90ZV9yZWRpcmVjdF91cmwiLFxyXG4gICAgICAgICAgICAiX3RpbWVvdXQiLFxyXG4gICAgICAgICAgICAiX3JhaXNlX2Zvcl9zdGF0dXMiLFxyXG4gICAgICAgICAgICAiX2F1dG9fZGVjb21wcmVzcyIsXHJcbiAgICAgICAgICAgICJfdHJ1c3RfZW52IixcclxuICAgICAgICAgICAgIl9kZWZhdWx0X2hlYWRlcnMiLFxyXG4gICAgICAgICAgICAiX3NraXBfYXV0b19oZWFkZXJzIixcclxuICAgICAgICAgICAgIl9yZXF1ZXN0X2NsYXNzIixcclxuICAgICAgICAgICAgIl9yZXNwb25zZV9jbGFzcyIsXHJcbiAgICAgICAgICAgICJfd3NfcmVzcG9uc2VfY2xhc3MiLFxyXG4gICAgICAgICAgICAiX3RyYWNlX2NvbmZpZ3MiLFxyXG4gICAgICAgICAgICAiX3JlYWRfYnVmc2l6ZSIsXHJcbiAgICAgICAgXVxyXG4gICAgKVxyXG5cclxuICAgIF9zb3VyY2VfdHJhY2ViYWNrID0gTm9uZVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGJhc2VfdXJsOiBPcHRpb25hbFtTdHJPclVSTF0gPSBOb25lLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgY29ubmVjdG9yOiBPcHRpb25hbFtCYXNlQ29ubmVjdG9yXSA9IE5vbmUsXHJcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4gICAgICAgIGNvb2tpZXM6IE9wdGlvbmFsW0xvb3NlQ29va2llc10gPSBOb25lLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgICAgIHNraXBfYXV0b19oZWFkZXJzOiBPcHRpb25hbFtJdGVyYWJsZVtzdHJdXSA9IE5vbmUsXHJcbiAgICAgICAgYXV0aDogT3B0aW9uYWxbQmFzaWNBdXRoXSA9IE5vbmUsXHJcbiAgICAgICAganNvbl9zZXJpYWxpemU6IEpTT05FbmNvZGVyID0ganNvbi5kdW1wcyxcclxuICAgICAgICByZXF1ZXN0X2NsYXNzOiBUeXBlW0NsaWVudFJlcXVlc3RdID0gQ2xpZW50UmVxdWVzdCxcclxuICAgICAgICByZXNwb25zZV9jbGFzczogVHlwZVtDbGllbnRSZXNwb25zZV0gPSBDbGllbnRSZXNwb25zZSxcclxuICAgICAgICB3c19yZXNwb25zZV9jbGFzczogVHlwZVtDbGllbnRXZWJTb2NrZXRSZXNwb25zZV0gPSBDbGllbnRXZWJTb2NrZXRSZXNwb25zZSxcclxuICAgICAgICB2ZXJzaW9uOiBIdHRwVmVyc2lvbiA9IGh0dHAuSHR0cFZlcnNpb24xMSxcclxuICAgICAgICBjb29raWVfamFyOiBPcHRpb25hbFtBYnN0cmFjdENvb2tpZUphcl0gPSBOb25lLFxyXG4gICAgICAgIGNvbm5lY3Rvcl9vd25lcjogYm9vbCA9IFRydWUsXHJcbiAgICAgICAgcmFpc2VfZm9yX3N0YXR1czogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIHJlYWRfdGltZW91dDogVW5pb25bZmxvYXQsIG9iamVjdF0gPSBzZW50aW5lbCxcclxuICAgICAgICBjb25uX3RpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUsXHJcbiAgICAgICAgdGltZW91dDogVW5pb25bb2JqZWN0LCBDbGllbnRUaW1lb3V0XSA9IHNlbnRpbmVsLFxyXG4gICAgICAgIGF1dG9fZGVjb21wcmVzczogYm9vbCA9IFRydWUsXHJcbiAgICAgICAgdHJ1c3RfZW52OiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgcmVxdW90ZV9yZWRpcmVjdF91cmw6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIHRyYWNlX2NvbmZpZ3M6IE9wdGlvbmFsW0xpc3RbVHJhY2VDb25maWddXSA9IE5vbmUsXHJcbiAgICAgICAgcmVhZF9idWZzaXplOiBpbnQgPSAyICoqIDE2LFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGxvb3AgaXMgTm9uZTpcclxuICAgICAgICAgICAgaWYgY29ubmVjdG9yIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgbG9vcCA9IGNvbm5lY3Rvci5fbG9vcFxyXG5cclxuICAgICAgICBsb29wID0gZ2V0X3J1bm5pbmdfbG9vcChsb29wKVxyXG5cclxuICAgICAgICBpZiBiYXNlX3VybCBpcyBOb25lIG9yIGlzaW5zdGFuY2UoYmFzZV91cmwsIFVSTCk6XHJcbiAgICAgICAgICAgIHNlbGYuX2Jhc2VfdXJsOiBPcHRpb25hbFtVUkxdID0gYmFzZV91cmxcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9iYXNlX3VybCA9IFVSTChiYXNlX3VybClcclxuICAgICAgICAgICAgYXNzZXJ0IChcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Jhc2VfdXJsLm9yaWdpbigpID09IHNlbGYuX2Jhc2VfdXJsXHJcbiAgICAgICAgICAgICksICJPbmx5IGFic29sdXRlIFVSTHMgd2l0aG91dCBwYXRoIHBhcnQgYXJlIHN1cHBvcnRlZCJcclxuXHJcbiAgICAgICAgaWYgY29ubmVjdG9yIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGNvbm5lY3RvciA9IFRDUENvbm5lY3Rvcihsb29wPWxvb3ApXHJcblxyXG4gICAgICAgIGlmIGNvbm5lY3Rvci5fbG9vcCBpcyBub3QgbG9vcDpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJTZXNzaW9uIGFuZCBjb25uZWN0b3IgaGFzIHRvIHVzZSBzYW1lIGV2ZW50IGxvb3AiKVxyXG5cclxuICAgICAgICBzZWxmLl9sb29wID0gbG9vcFxyXG5cclxuICAgICAgICBpZiBsb29wLmdldF9kZWJ1ZygpOlxyXG4gICAgICAgICAgICBzZWxmLl9zb3VyY2VfdHJhY2ViYWNrID0gdHJhY2ViYWNrLmV4dHJhY3Rfc3RhY2soc3lzLl9nZXRmcmFtZSgxKSlcclxuXHJcbiAgICAgICAgaWYgY29va2llX2phciBpcyBOb25lOlxyXG4gICAgICAgICAgICBjb29raWVfamFyID0gQ29va2llSmFyKGxvb3A9bG9vcClcclxuICAgICAgICBzZWxmLl9jb29raWVfamFyID0gY29va2llX2phclxyXG5cclxuICAgICAgICBpZiBjb29raWVzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9jb29raWVfamFyLnVwZGF0ZV9jb29raWVzKGNvb2tpZXMpXHJcblxyXG4gICAgICAgIHNlbGYuX2Nvbm5lY3RvciA9IGNvbm5lY3RvciAgIyB0eXBlOiBPcHRpb25hbFtCYXNlQ29ubmVjdG9yXVxyXG4gICAgICAgIHNlbGYuX2Nvbm5lY3Rvcl9vd25lciA9IGNvbm5lY3Rvcl9vd25lclxyXG4gICAgICAgIHNlbGYuX2RlZmF1bHRfYXV0aCA9IGF1dGhcclxuICAgICAgICBzZWxmLl92ZXJzaW9uID0gdmVyc2lvblxyXG4gICAgICAgIHNlbGYuX2pzb25fc2VyaWFsaXplID0ganNvbl9zZXJpYWxpemVcclxuICAgICAgICBpZiB0aW1lb3V0IGlzIHNlbnRpbmVsOlxyXG4gICAgICAgICAgICBzZWxmLl90aW1lb3V0ID0gREVGQVVMVF9USU1FT1VUXHJcbiAgICAgICAgICAgIGlmIHJlYWRfdGltZW91dCBpcyBub3Qgc2VudGluZWw6XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAgICAgICAgICJyZWFkX3RpbWVvdXQgaXMgZGVwcmVjYXRlZCwgIiAidXNlIHRpbWVvdXQgYXJndW1lbnQgaW5zdGVhZCIsXHJcbiAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrbGV2ZWw9MixcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIHNlbGYuX3RpbWVvdXQgPSBhdHRyLmV2b2x2ZShzZWxmLl90aW1lb3V0LCB0b3RhbD1yZWFkX3RpbWVvdXQpXHJcbiAgICAgICAgICAgIGlmIGNvbm5fdGltZW91dCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3RpbWVvdXQgPSBhdHRyLmV2b2x2ZShzZWxmLl90aW1lb3V0LCBjb25uZWN0PWNvbm5fdGltZW91dClcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAgICAgImNvbm5fdGltZW91dCBpcyBkZXByZWNhdGVkLCAiICJ1c2UgdGltZW91dCBhcmd1bWVudCBpbnN0ZWFkIixcclxuICAgICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX3RpbWVvdXQgPSB0aW1lb3V0ICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG4gICAgICAgICAgICBpZiByZWFkX3RpbWVvdXQgaXMgbm90IHNlbnRpbmVsOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAicmVhZF90aW1lb3V0IGFuZCB0aW1lb3V0IHBhcmFtZXRlcnMgIlxyXG4gICAgICAgICAgICAgICAgICAgICJjb25mbGljdCwgcGxlYXNlIHNldHVwICJcclxuICAgICAgICAgICAgICAgICAgICAidGltZW91dC5yZWFkIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiBjb25uX3RpbWVvdXQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJjb25uX3RpbWVvdXQgYW5kIHRpbWVvdXQgcGFyYW1ldGVycyAiXHJcbiAgICAgICAgICAgICAgICAgICAgImNvbmZsaWN0LCBwbGVhc2Ugc2V0dXAgIlxyXG4gICAgICAgICAgICAgICAgICAgICJ0aW1lb3V0LmNvbm5lY3QiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fcmFpc2VfZm9yX3N0YXR1cyA9IHJhaXNlX2Zvcl9zdGF0dXNcclxuICAgICAgICBzZWxmLl9hdXRvX2RlY29tcHJlc3MgPSBhdXRvX2RlY29tcHJlc3NcclxuICAgICAgICBzZWxmLl90cnVzdF9lbnYgPSB0cnVzdF9lbnZcclxuICAgICAgICBzZWxmLl9yZXF1b3RlX3JlZGlyZWN0X3VybCA9IHJlcXVvdGVfcmVkaXJlY3RfdXJsXHJcbiAgICAgICAgc2VsZi5fcmVhZF9idWZzaXplID0gcmVhZF9idWZzaXplXHJcblxyXG4gICAgICAgICMgQ29udmVydCB0byBsaXN0IG9mIHR1cGxlc1xyXG4gICAgICAgIGlmIGhlYWRlcnM6XHJcbiAgICAgICAgICAgIHJlYWxfaGVhZGVycyA9IENJTXVsdGlEaWN0KGhlYWRlcnMpICAjIHR5cGU6IENJTXVsdGlEaWN0W3N0cl1cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZWFsX2hlYWRlcnMgPSBDSU11bHRpRGljdCgpXHJcbiAgICAgICAgc2VsZi5fZGVmYXVsdF9oZWFkZXJzID0gcmVhbF9oZWFkZXJzICAjIHR5cGU6IENJTXVsdGlEaWN0W3N0cl1cclxuICAgICAgICBpZiBza2lwX2F1dG9faGVhZGVycyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fc2tpcF9hdXRvX2hlYWRlcnMgPSBmcm96ZW5zZXQoaXN0cihpKSBmb3IgaSBpbiBza2lwX2F1dG9faGVhZGVycylcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9za2lwX2F1dG9faGVhZGVycyA9IGZyb3plbnNldCgpXHJcblxyXG4gICAgICAgIHNlbGYuX3JlcXVlc3RfY2xhc3MgPSByZXF1ZXN0X2NsYXNzXHJcbiAgICAgICAgc2VsZi5fcmVzcG9uc2VfY2xhc3MgPSByZXNwb25zZV9jbGFzc1xyXG4gICAgICAgIHNlbGYuX3dzX3Jlc3BvbnNlX2NsYXNzID0gd3NfcmVzcG9uc2VfY2xhc3NcclxuXHJcbiAgICAgICAgc2VsZi5fdHJhY2VfY29uZmlncyA9IHRyYWNlX2NvbmZpZ3Mgb3IgW11cclxuICAgICAgICBmb3IgdHJhY2VfY29uZmlnIGluIHNlbGYuX3RyYWNlX2NvbmZpZ3M6XHJcbiAgICAgICAgICAgIHRyYWNlX2NvbmZpZy5mcmVlemUoKVxyXG5cclxuICAgIGRlZiBfX2luaXRfc3ViY2xhc3NfXyhjbHM6IFR5cGVbIkNsaWVudFNlc3Npb24iXSkgLT4gTm9uZTpcclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAiSW5oZXJpdGFuY2UgY2xhc3Mge30gZnJvbSBDbGllbnRTZXNzaW9uICJcclxuICAgICAgICAgICAgImlzIGRpc2NvdXJhZ2VkIi5mb3JtYXQoY2xzLl9fbmFtZV9fKSxcclxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGlmIERFQlVHOlxyXG5cclxuICAgICAgICBkZWYgX19zZXRhdHRyX18oc2VsZiwgbmFtZTogc3RyLCB2YWw6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICAgICAgaWYgbmFtZSBub3QgaW4gc2VsZi5BVFRSUzpcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAgICAgIlNldHRpbmcgY3VzdG9tIENsaWVudFNlc3Npb24ue30gYXR0cmlidXRlICJcclxuICAgICAgICAgICAgICAgICAgICAiaXMgZGlzY291cmFnZWQiLmZvcm1hdChuYW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBzdXBlcigpLl9fc2V0YXR0cl9fKG5hbWUsIHZhbClcclxuXHJcbiAgICBkZWYgX19kZWxfXyhzZWxmLCBfd2FybmluZ3M6IEFueSA9IHdhcm5pbmdzKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLmNsb3NlZDpcclxuICAgICAgICAgICAgaWYgUFlfMzY6XHJcbiAgICAgICAgICAgICAgICBrd2FyZ3MgPSB7InNvdXJjZSI6IHNlbGZ9XHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBrd2FyZ3MgPSB7fVxyXG4gICAgICAgICAgICBfd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgIGYiVW5jbG9zZWQgY2xpZW50IHNlc3Npb24ge3NlbGYhcn0iLCBSZXNvdXJjZVdhcm5pbmcsICoqa3dhcmdzXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgY29udGV4dCA9IHsiY2xpZW50X3Nlc3Npb24iOiBzZWxmLCAibWVzc2FnZSI6ICJVbmNsb3NlZCBjbGllbnQgc2Vzc2lvbiJ9XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3NvdXJjZV90cmFjZWJhY2sgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0WyJzb3VyY2VfdHJhY2ViYWNrIl0gPSBzZWxmLl9zb3VyY2VfdHJhY2ViYWNrXHJcbiAgICAgICAgICAgIHNlbGYuX2xvb3AuY2FsbF9leGNlcHRpb25faGFuZGxlcihjb250ZXh0KVxyXG5cclxuICAgIGRlZiByZXF1ZXN0KFxyXG4gICAgICAgIHNlbGYsIG1ldGhvZDogc3RyLCB1cmw6IFN0ck9yVVJMLCAqKmt3YXJnczogQW55XHJcbiAgICApIC0+ICJfUmVxdWVzdENvbnRleHRNYW5hZ2VyIjpcclxuICAgICAgICAiIiJQZXJmb3JtIEhUVFAgcmVxdWVzdC4iIiJcclxuICAgICAgICByZXR1cm4gX1JlcXVlc3RDb250ZXh0TWFuYWdlcihzZWxmLl9yZXF1ZXN0KG1ldGhvZCwgdXJsLCAqKmt3YXJncykpXHJcblxyXG4gICAgZGVmIF9idWlsZF91cmwoc2VsZiwgc3RyX29yX3VybDogU3RyT3JVUkwpIC0+IFVSTDpcclxuICAgICAgICB1cmwgPSBVUkwoc3RyX29yX3VybClcclxuICAgICAgICBpZiBzZWxmLl9iYXNlX3VybCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gdXJsXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYXNzZXJ0IG5vdCB1cmwuaXNfYWJzb2x1dGUoKSBhbmQgdXJsLnBhdGguc3RhcnRzd2l0aCgiLyIpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9iYXNlX3VybC5qb2luKHVybClcclxuXHJcbiAgICBhc3luYyBkZWYgX3JlcXVlc3QoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZXRob2Q6IHN0cixcclxuICAgICAgICBzdHJfb3JfdXJsOiBTdHJPclVSTCxcclxuICAgICAgICAqLFxyXG4gICAgICAgIHBhcmFtczogT3B0aW9uYWxbTWFwcGluZ1tzdHIsIHN0cl1dID0gTm9uZSxcclxuICAgICAgICBkYXRhOiBBbnkgPSBOb25lLFxyXG4gICAgICAgIGpzb246IEFueSA9IE5vbmUsXHJcbiAgICAgICAgY29va2llczogT3B0aW9uYWxbTG9vc2VDb29raWVzXSA9IE5vbmUsXHJcbiAgICAgICAgaGVhZGVyczogT3B0aW9uYWxbTG9vc2VIZWFkZXJzXSA9IE5vbmUsXHJcbiAgICAgICAgc2tpcF9hdXRvX2hlYWRlcnM6IE9wdGlvbmFsW0l0ZXJhYmxlW3N0cl1dID0gTm9uZSxcclxuICAgICAgICBhdXRoOiBPcHRpb25hbFtCYXNpY0F1dGhdID0gTm9uZSxcclxuICAgICAgICBhbGxvd19yZWRpcmVjdHM6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIG1heF9yZWRpcmVjdHM6IGludCA9IDEwLFxyXG4gICAgICAgIGNvbXByZXNzOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBjaHVua2VkOiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICAgICAgZXhwZWN0MTAwOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgcmFpc2VfZm9yX3N0YXR1czogT3B0aW9uYWxbYm9vbF0gPSBOb25lLFxyXG4gICAgICAgIHJlYWRfdW50aWxfZW9mOiBib29sID0gVHJ1ZSxcclxuICAgICAgICBwcm94eTogT3B0aW9uYWxbU3RyT3JVUkxdID0gTm9uZSxcclxuICAgICAgICBwcm94eV9hdXRoOiBPcHRpb25hbFtCYXNpY0F1dGhdID0gTm9uZSxcclxuICAgICAgICB0aW1lb3V0OiBVbmlvbltDbGllbnRUaW1lb3V0LCBvYmplY3RdID0gc2VudGluZWwsXHJcbiAgICAgICAgdmVyaWZ5X3NzbDogT3B0aW9uYWxbYm9vbF0gPSBOb25lLFxyXG4gICAgICAgIGZpbmdlcnByaW50OiBPcHRpb25hbFtieXRlc10gPSBOb25lLFxyXG4gICAgICAgIHNzbF9jb250ZXh0OiBPcHRpb25hbFtTU0xDb250ZXh0XSA9IE5vbmUsXHJcbiAgICAgICAgc3NsOiBPcHRpb25hbFtVbmlvbltTU0xDb250ZXh0LCBib29sLCBGaW5nZXJwcmludF1dID0gTm9uZSxcclxuICAgICAgICBwcm94eV9oZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICAgICB0cmFjZV9yZXF1ZXN0X2N0eDogT3B0aW9uYWxbU2ltcGxlTmFtZXNwYWNlXSA9IE5vbmUsXHJcbiAgICAgICAgcmVhZF9idWZzaXplOiBPcHRpb25hbFtpbnRdID0gTm9uZSxcclxuICAgICkgLT4gQ2xpZW50UmVzcG9uc2U6XHJcblxyXG4gICAgICAgICMgTk9URTogdGltZW91dCBjbGFtcHMgZXhpc3RpbmcgY29ubmVjdCBhbmQgcmVhZCB0aW1lb3V0cy4gIFdlIGNhbm5vdFxyXG4gICAgICAgICMgc2V0IHRoZSBkZWZhdWx0IHRvIE5vbmUgYmVjYXVzZSB3ZSBuZWVkIHRvIGRldGVjdCBpZiB0aGUgdXNlciB3YW50c1xyXG4gICAgICAgICMgdG8gdXNlIHRoZSBleGlzdGluZyB0aW1lb3V0cyBieSBzZXR0aW5nIHRpbWVvdXQgdG8gTm9uZS5cclxuXHJcbiAgICAgICAgaWYgc2VsZi5jbG9zZWQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiU2Vzc2lvbiBpcyBjbG9zZWQiKVxyXG5cclxuICAgICAgICBzc2wgPSBfbWVyZ2Vfc3NsX3BhcmFtcyhzc2wsIHZlcmlmeV9zc2wsIHNzbF9jb250ZXh0LCBmaW5nZXJwcmludClcclxuXHJcbiAgICAgICAgaWYgZGF0YSBpcyBub3QgTm9uZSBhbmQganNvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJkYXRhIGFuZCBqc29uIHBhcmFtZXRlcnMgY2FuIG5vdCBiZSB1c2VkIGF0IHRoZSBzYW1lIHRpbWUiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbGlmIGpzb24gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGRhdGEgPSBwYXlsb2FkLkpzb25QYXlsb2FkKGpzb24sIGR1bXBzPXNlbGYuX2pzb25fc2VyaWFsaXplKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShjaHVua2VkLCBib29sKSBhbmQgY2h1bmtlZCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybigiQ2h1bmsgc2l6ZSBpcyBkZXByZWNhdGVkICMxNjE1IiwgRGVwcmVjYXRpb25XYXJuaW5nKVxyXG5cclxuICAgICAgICByZWRpcmVjdHMgPSAwXHJcbiAgICAgICAgaGlzdG9yeSA9IFtdXHJcbiAgICAgICAgdmVyc2lvbiA9IHNlbGYuX3ZlcnNpb25cclxuXHJcbiAgICAgICAgIyBNZXJnZSB3aXRoIGRlZmF1bHQgaGVhZGVycyBhbmQgdHJhbnNmb3JtIHRvIENJTXVsdGlEaWN0XHJcbiAgICAgICAgaGVhZGVycyA9IHNlbGYuX3ByZXBhcmVfaGVhZGVycyhoZWFkZXJzKVxyXG4gICAgICAgIHByb3h5X2hlYWRlcnMgPSBzZWxmLl9wcmVwYXJlX2hlYWRlcnMocHJveHlfaGVhZGVycylcclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICB1cmwgPSBzZWxmLl9idWlsZF91cmwoc3RyX29yX3VybClcclxuICAgICAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOlxyXG4gICAgICAgICAgICByYWlzZSBJbnZhbGlkVVJMKHN0cl9vcl91cmwpIGZyb20gZVxyXG5cclxuICAgICAgICBza2lwX2hlYWRlcnMgPSBzZXQoc2VsZi5fc2tpcF9hdXRvX2hlYWRlcnMpXHJcbiAgICAgICAgaWYgc2tpcF9hdXRvX2hlYWRlcnMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGZvciBpIGluIHNraXBfYXV0b19oZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgc2tpcF9oZWFkZXJzLmFkZChpc3RyKGkpKVxyXG5cclxuICAgICAgICBpZiBwcm94eSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgcHJveHkgPSBVUkwocHJveHkpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yIGFzIGU6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBJbnZhbGlkVVJMKHByb3h5KSBmcm9tIGVcclxuXHJcbiAgICAgICAgaWYgdGltZW91dCBpcyBzZW50aW5lbDpcclxuICAgICAgICAgICAgcmVhbF90aW1lb3V0ID0gc2VsZi5fdGltZW91dCAgIyB0eXBlOiBDbGllbnRUaW1lb3V0XHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodGltZW91dCwgQ2xpZW50VGltZW91dCk6XHJcbiAgICAgICAgICAgICAgICByZWFsX3RpbWVvdXQgPSBDbGllbnRUaW1lb3V0KHRvdGFsPXRpbWVvdXQpICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZV1cclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJlYWxfdGltZW91dCA9IHRpbWVvdXRcclxuICAgICAgICAjIHRpbWVvdXQgaXMgY3VtdWxhdGl2ZSBmb3IgYWxsIHJlcXVlc3Qgb3BlcmF0aW9uc1xyXG4gICAgICAgICMgKHJlcXVlc3QsIHJlZGlyZWN0cywgcmVzcG9uc2VzLCBkYXRhIGNvbnN1bWluZylcclxuICAgICAgICB0bSA9IFRpbWVvdXRIYW5kbGUoc2VsZi5fbG9vcCwgcmVhbF90aW1lb3V0LnRvdGFsKVxyXG4gICAgICAgIGhhbmRsZSA9IHRtLnN0YXJ0KClcclxuXHJcbiAgICAgICAgaWYgcmVhZF9idWZzaXplIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJlYWRfYnVmc2l6ZSA9IHNlbGYuX3JlYWRfYnVmc2l6ZVxyXG5cclxuICAgICAgICB0cmFjZXMgPSBbXHJcbiAgICAgICAgICAgIFRyYWNlKFxyXG4gICAgICAgICAgICAgICAgc2VsZixcclxuICAgICAgICAgICAgICAgIHRyYWNlX2NvbmZpZyxcclxuICAgICAgICAgICAgICAgIHRyYWNlX2NvbmZpZy50cmFjZV9jb25maWdfY3R4KHRyYWNlX3JlcXVlc3RfY3R4PXRyYWNlX3JlcXVlc3RfY3R4KSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBmb3IgdHJhY2VfY29uZmlnIGluIHNlbGYuX3RyYWNlX2NvbmZpZ3NcclxuICAgICAgICBdXHJcblxyXG4gICAgICAgIGZvciB0cmFjZSBpbiB0cmFjZXM6XHJcbiAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfcmVxdWVzdF9zdGFydChtZXRob2QsIHVybC51cGRhdGVfcXVlcnkocGFyYW1zKSwgaGVhZGVycylcclxuXHJcbiAgICAgICAgdGltZXIgPSB0bS50aW1lcigpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICB3aXRoIHRpbWVyOlxyXG4gICAgICAgICAgICAgICAgd2hpbGUgVHJ1ZTpcclxuICAgICAgICAgICAgICAgICAgICB1cmwsIGF1dGhfZnJvbV91cmwgPSBzdHJpcF9hdXRoX2Zyb21fdXJsKHVybClcclxuICAgICAgICAgICAgICAgICAgICBpZiBhdXRoIGFuZCBhdXRoX2Zyb21fdXJsOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNhbm5vdCBjb21iaW5lIEFVVEggYXJndW1lbnQgd2l0aCAiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY3JlZGVudGlhbHMgZW5jb2RlZCBpbiBVUkwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgYXV0aCBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoID0gYXV0aF9mcm9tX3VybFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGF1dGggaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aCA9IHNlbGYuX2RlZmF1bHRfYXV0aFxyXG4gICAgICAgICAgICAgICAgICAgICMgSXQgd291bGQgYmUgY29uZnVzaW5nIGlmIHdlIHN1cHBvcnQgZXhwbGljaXRcclxuICAgICAgICAgICAgICAgICAgICAjIEF1dGhvcml6YXRpb24gaGVhZGVyIHdpdGggYXV0aCBhcmd1bWVudFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycyBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmQgYXV0aCBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmQgaGRycy5BVVRIT1JJWkFUSU9OIGluIGhlYWRlcnNcclxuICAgICAgICAgICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNhbm5vdCBjb21iaW5lIEFVVEhPUklaQVRJT04gaGVhZGVyICJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3aXRoIEFVVEggYXJndW1lbnQgb3IgY3JlZGVudGlhbHMgIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgImVuY29kZWQgaW4gVVJMIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFsbF9jb29raWVzID0gc2VsZi5fY29va2llX2phci5maWx0ZXJfY29va2llcyh1cmwpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGNvb2tpZXMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcF9jb29raWVfamFyID0gQ29va2llSmFyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wX2Nvb2tpZV9qYXIudXBkYXRlX2Nvb2tpZXMoY29va2llcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxX2Nvb2tpZXMgPSB0bXBfY29va2llX2phci5maWx0ZXJfY29va2llcyh1cmwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJlcV9jb29raWVzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX2Nvb2tpZXMubG9hZChyZXFfY29va2llcylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgcHJveHkgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5ID0gVVJMKHByb3h5KVxyXG4gICAgICAgICAgICAgICAgICAgIGVsaWYgc2VsZi5fdHJ1c3RfZW52OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHN1cHByZXNzKExvb2t1cEVycm9yKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5LCBwcm94eV9hdXRoID0gZ2V0X2Vudl9wcm94eV9mb3JfdXJsKHVybClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxID0gc2VsZi5fcmVxdWVzdF9jbGFzcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcz1wYXJhbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9aGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcF9hdXRvX2hlYWRlcnM9c2tpcF9oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhPWRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvb2tpZXM9YWxsX2Nvb2tpZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg9YXV0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbj12ZXJzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wcmVzcz1jb21wcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtlZD1jaHVua2VkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QxMDA9ZXhwZWN0MTAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb29wPXNlbGYuX2xvb3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlX2NsYXNzPXNlbGYuX3Jlc3BvbnNlX2NsYXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm94eT1wcm94eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfYXV0aD1wcm94eV9hdXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lcj10aW1lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbj1zZWxmLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzc2w9c3NsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm94eV9oZWFkZXJzPXByb3h5X2hlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlcz10cmFjZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAjIGNvbm5lY3Rpb24gdGltZW91dFxyXG4gICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBjZWlsX3RpbWVvdXQocmVhbF90aW1lb3V0LmNvbm5lY3QpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0IHNlbGYuX2Nvbm5lY3RvciBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubiA9IGF3YWl0IHNlbGYuX2Nvbm5lY3Rvci5jb25uZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcSwgdHJhY2VzPXRyYWNlcywgdGltZW91dD1yZWFsX3RpbWVvdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgYXN5bmNpby5UaW1lb3V0RXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBTZXJ2ZXJUaW1lb3V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29ubmVjdGlvbiB0aW1lb3V0ICIgInRvIGhvc3Qge30iLmZvcm1hdCh1cmwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgZnJvbSBleGNcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0IGNvbm4udHJhbnNwb3J0IGlzIG5vdCBOb25lXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCBjb25uLnByb3RvY29sIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgY29ubi5wcm90b2NvbC5zZXRfcmVzcG9uc2VfcGFyYW1zKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lcj10aW1lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcF9wYXlsb2FkPW1ldGhvZC51cHBlcigpID09ICJIRUFEIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZF91bnRpbF9lb2Y9cmVhZF91bnRpbF9lb2YsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9fZGVjb21wcmVzcz1zZWxmLl9hdXRvX2RlY29tcHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRfdGltZW91dD1yZWFsX3RpbWVvdXQuc29ja19yZWFkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkX2J1ZnNpemU9cmVhZF9idWZzaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwID0gYXdhaXQgcmVxLnNlbmQoY29ubilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCByZXNwLnN0YXJ0KGNvbm4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwLmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm4uY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgQ2xpZW50RXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlXHJcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IE9TRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBDbGllbnRPU0Vycm9yKCpleGMuYXJncykgZnJvbSBleGNcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fY29va2llX2phci51cGRhdGVfY29va2llcyhyZXNwLmNvb2tpZXMsIHJlc3AudXJsKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAjIHJlZGlyZWN0c1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIHJlc3Auc3RhdHVzIGluICgzMDEsIDMwMiwgMzAzLCAzMDcsIDMwOCkgYW5kIGFsbG93X3JlZGlyZWN0czpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB0cmFjZSBpbiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5zZW5kX3JlcXVlc3RfcmVkaXJlY3QoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kLCB1cmwudXBkYXRlX3F1ZXJ5KHBhcmFtcyksIGhlYWRlcnMsIHJlc3BcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0cyArPSAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkuYXBwZW5kKHJlc3ApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1heF9yZWRpcmVjdHMgYW5kIHJlZGlyZWN0cyA+PSBtYXhfcmVkaXJlY3RzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcC5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBUb29NYW55UmVkaXJlY3RzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnlbMF0ucmVxdWVzdF9pbmZvLCB0dXBsZShoaXN0b3J5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgIyBGb3IgMzAxIGFuZCAzMDIsIG1pbWljIElFLCBub3cgY2hhbmdlZCBpbiBSRkNcclxuICAgICAgICAgICAgICAgICAgICAgICAgIyBodHRwczovL2dpdGh1Yi5jb20va2VubmV0aHJlaXR6L3JlcXVlc3RzL3B1bGwvMjY5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwLnN0YXR1cyA9PSAzMDMgYW5kIHJlc3AubWV0aG9kICE9IGhkcnMuTUVUSF9IRUFEKSBvciAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwLnN0YXR1cyBpbiAoMzAxLCAzMDIpIGFuZCByZXNwLm1ldGhvZCA9PSBoZHJzLk1FVEhfUE9TVFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gaGRycy5NRVRIX0dFVFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IE5vbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhlYWRlcnMuZ2V0KGhkcnMuQ09OVEVOVF9MRU5HVEgpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMucG9wKGhkcnMuQ09OVEVOVF9MRU5HVEgpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByX3VybCA9IHJlc3AuaGVhZGVycy5nZXQoaGRycy5MT0NBVElPTikgb3IgcmVzcC5oZWFkZXJzLmdldChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhkcnMuVVJJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgcl91cmwgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgc2VlIGdpdGh1Yi5jb20vYWlvLWxpYnMvYWlvaHR0cC9pc3N1ZXMvMjAyMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcmVhZGluZyBmcm9tIGNvcnJlY3QgcmVkaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcmVzcG9uc2UgaXMgZm9yYmlkZGVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwLnJlbGVhc2UoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkX3VybCA9IFVSTChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByX3VybCwgZW5jb2RlZD1ub3Qgc2VsZi5fcmVxdW90ZV9yZWRpcmVjdF91cmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yIGFzIGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBJbnZhbGlkVVJMKHJfdXJsKSBmcm9tIGVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVtZSA9IHBhcnNlZF91cmwuc2NoZW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNjaGVtZSBub3QgaW4gKCJodHRwIiwgImh0dHBzIiwgIiIpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcC5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDYW4gcmVkaXJlY3Qgb25seSB0byBodHRwIG9yIGh0dHBzIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBub3Qgc2NoZW1lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkX3VybCA9IHVybC5qb2luKHBhcnNlZF91cmwpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiB1cmwub3JpZ2luKCkgIT0gcGFyc2VkX3VybC5vcmlnaW4oKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGggPSBOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLnBvcChoZHJzLkFVVEhPUklaQVRJT04sIE5vbmUpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBwYXJzZWRfdXJsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IE5vbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcC5yZWxlYXNlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgICMgY2hlY2sgcmVzcG9uc2Ugc3RhdHVzXHJcbiAgICAgICAgICAgIGlmIHJhaXNlX2Zvcl9zdGF0dXMgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlX2Zvcl9zdGF0dXMgPSBzZWxmLl9yYWlzZV9mb3Jfc3RhdHVzXHJcbiAgICAgICAgICAgIGlmIHJhaXNlX2Zvcl9zdGF0dXM6XHJcbiAgICAgICAgICAgICAgICByZXNwLnJhaXNlX2Zvcl9zdGF0dXMoKVxyXG5cclxuICAgICAgICAgICAgIyByZWdpc3RlciBjb25uZWN0aW9uXHJcbiAgICAgICAgICAgIGlmIGhhbmRsZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIGlmIHJlc3AuY29ubmVjdGlvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwLmNvbm5lY3Rpb24uYWRkX2NhbGxiYWNrKGhhbmRsZS5jYW5jZWwpXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZS5jYW5jZWwoKVxyXG5cclxuICAgICAgICAgICAgcmVzcC5faGlzdG9yeSA9IHR1cGxlKGhpc3RvcnkpXHJcblxyXG4gICAgICAgICAgICBmb3IgdHJhY2UgaW4gdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc2VuZF9yZXF1ZXN0X2VuZChcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2QsIHVybC51cGRhdGVfcXVlcnkocGFyYW1zKSwgaGVhZGVycywgcmVzcFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcFxyXG5cclxuICAgICAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICAjIGNsZWFudXAgdGltZXJcclxuICAgICAgICAgICAgdG0uY2xvc2UoKVxyXG4gICAgICAgICAgICBpZiBoYW5kbGU6XHJcbiAgICAgICAgICAgICAgICBoYW5kbGUuY2FuY2VsKClcclxuICAgICAgICAgICAgICAgIGhhbmRsZSA9IE5vbmVcclxuXHJcbiAgICAgICAgICAgIGZvciB0cmFjZSBpbiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5zZW5kX3JlcXVlc3RfZXhjZXB0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCwgdXJsLnVwZGF0ZV9xdWVyeShwYXJhbXMpLCBoZWFkZXJzLCBlXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHJhaXNlXHJcblxyXG4gICAgZGVmIHdzX2Nvbm5lY3QoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB1cmw6IFN0ck9yVVJMLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgbWV0aG9kOiBzdHIgPSBoZHJzLk1FVEhfR0VULFxyXG4gICAgICAgIHByb3RvY29sczogSXRlcmFibGVbc3RyXSA9ICgpLFxyXG4gICAgICAgIHRpbWVvdXQ6IGZsb2F0ID0gMTAuMCxcclxuICAgICAgICByZWNlaXZlX3RpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUsXHJcbiAgICAgICAgYXV0b2Nsb3NlOiBib29sID0gVHJ1ZSxcclxuICAgICAgICBhdXRvcGluZzogYm9vbCA9IFRydWUsXHJcbiAgICAgICAgaGVhcnRiZWF0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lLFxyXG4gICAgICAgIGF1dGg6IE9wdGlvbmFsW0Jhc2ljQXV0aF0gPSBOb25lLFxyXG4gICAgICAgIG9yaWdpbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgcGFyYW1zOiBPcHRpb25hbFtNYXBwaW5nW3N0ciwgc3RyXV0gPSBOb25lLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgICAgIHByb3h5OiBPcHRpb25hbFtTdHJPclVSTF0gPSBOb25lLFxyXG4gICAgICAgIHByb3h5X2F1dGg6IE9wdGlvbmFsW0Jhc2ljQXV0aF0gPSBOb25lLFxyXG4gICAgICAgIHNzbDogVW5pb25bU1NMQ29udGV4dCwgYm9vbCwgTm9uZSwgRmluZ2VycHJpbnRdID0gTm9uZSxcclxuICAgICAgICB2ZXJpZnlfc3NsOiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICAgICAgZmluZ2VycHJpbnQ6IE9wdGlvbmFsW2J5dGVzXSA9IE5vbmUsXHJcbiAgICAgICAgc3NsX2NvbnRleHQ6IE9wdGlvbmFsW1NTTENvbnRleHRdID0gTm9uZSxcclxuICAgICAgICBwcm94eV9oZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICAgICBjb21wcmVzczogaW50ID0gMCxcclxuICAgICAgICBtYXhfbXNnX3NpemU6IGludCA9IDQgKiAxMDI0ICogMTAyNCxcclxuICAgICkgLT4gIl9XU1JlcXVlc3RDb250ZXh0TWFuYWdlciI6XHJcbiAgICAgICAgIiIiSW5pdGlhdGUgd2Vic29ja2V0IGNvbm5lY3Rpb24uIiIiXHJcbiAgICAgICAgcmV0dXJuIF9XU1JlcXVlc3RDb250ZXh0TWFuYWdlcihcclxuICAgICAgICAgICAgc2VsZi5fd3NfY29ubmVjdChcclxuICAgICAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgICAgIG1ldGhvZD1tZXRob2QsXHJcbiAgICAgICAgICAgICAgICBwcm90b2NvbHM9cHJvdG9jb2xzLFxyXG4gICAgICAgICAgICAgICAgdGltZW91dD10aW1lb3V0LFxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZV90aW1lb3V0PXJlY2VpdmVfdGltZW91dCxcclxuICAgICAgICAgICAgICAgIGF1dG9jbG9zZT1hdXRvY2xvc2UsXHJcbiAgICAgICAgICAgICAgICBhdXRvcGluZz1hdXRvcGluZyxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdD1oZWFydGJlYXQsXHJcbiAgICAgICAgICAgICAgICBhdXRoPWF1dGgsXHJcbiAgICAgICAgICAgICAgICBvcmlnaW49b3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zPXBhcmFtcyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM9aGVhZGVycyxcclxuICAgICAgICAgICAgICAgIHByb3h5PXByb3h5LFxyXG4gICAgICAgICAgICAgICAgcHJveHlfYXV0aD1wcm94eV9hdXRoLFxyXG4gICAgICAgICAgICAgICAgc3NsPXNzbCxcclxuICAgICAgICAgICAgICAgIHZlcmlmeV9zc2w9dmVyaWZ5X3NzbCxcclxuICAgICAgICAgICAgICAgIGZpbmdlcnByaW50PWZpbmdlcnByaW50LFxyXG4gICAgICAgICAgICAgICAgc3NsX2NvbnRleHQ9c3NsX2NvbnRleHQsXHJcbiAgICAgICAgICAgICAgICBwcm94eV9oZWFkZXJzPXByb3h5X2hlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBjb21wcmVzcz1jb21wcmVzcyxcclxuICAgICAgICAgICAgICAgIG1heF9tc2dfc2l6ZT1tYXhfbXNnX3NpemUsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIF93c19jb25uZWN0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdXJsOiBTdHJPclVSTCxcclxuICAgICAgICAqLFxyXG4gICAgICAgIG1ldGhvZDogc3RyID0gaGRycy5NRVRIX0dFVCxcclxuICAgICAgICBwcm90b2NvbHM6IEl0ZXJhYmxlW3N0cl0gPSAoKSxcclxuICAgICAgICB0aW1lb3V0OiBmbG9hdCA9IDEwLjAsXHJcbiAgICAgICAgcmVjZWl2ZV90aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lLFxyXG4gICAgICAgIGF1dG9jbG9zZTogYm9vbCA9IFRydWUsXHJcbiAgICAgICAgYXV0b3Bpbmc6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIGhlYXJ0YmVhdDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZSxcclxuICAgICAgICBhdXRoOiBPcHRpb25hbFtCYXNpY0F1dGhdID0gTm9uZSxcclxuICAgICAgICBvcmlnaW46IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIHBhcmFtczogT3B0aW9uYWxbTWFwcGluZ1tzdHIsIHN0cl1dID0gTm9uZSxcclxuICAgICAgICBoZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICAgICBwcm94eTogT3B0aW9uYWxbU3RyT3JVUkxdID0gTm9uZSxcclxuICAgICAgICBwcm94eV9hdXRoOiBPcHRpb25hbFtCYXNpY0F1dGhdID0gTm9uZSxcclxuICAgICAgICBzc2w6IFVuaW9uW1NTTENvbnRleHQsIGJvb2wsIE5vbmUsIEZpbmdlcnByaW50XSA9IE5vbmUsXHJcbiAgICAgICAgdmVyaWZ5X3NzbDogT3B0aW9uYWxbYm9vbF0gPSBOb25lLFxyXG4gICAgICAgIGZpbmdlcnByaW50OiBPcHRpb25hbFtieXRlc10gPSBOb25lLFxyXG4gICAgICAgIHNzbF9jb250ZXh0OiBPcHRpb25hbFtTU0xDb250ZXh0XSA9IE5vbmUsXHJcbiAgICAgICAgcHJveHlfaGVhZGVyczogT3B0aW9uYWxbTG9vc2VIZWFkZXJzXSA9IE5vbmUsXHJcbiAgICAgICAgY29tcHJlc3M6IGludCA9IDAsXHJcbiAgICAgICAgbWF4X21zZ19zaXplOiBpbnQgPSA0ICogMTAyNCAqIDEwMjQsXHJcbiAgICApIC0+IENsaWVudFdlYlNvY2tldFJlc3BvbnNlOlxyXG5cclxuICAgICAgICBpZiBoZWFkZXJzIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJlYWxfaGVhZGVycyA9IENJTXVsdGlEaWN0KCkgICMgdHlwZTogQ0lNdWx0aURpY3Rbc3RyXVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJlYWxfaGVhZGVycyA9IENJTXVsdGlEaWN0KGhlYWRlcnMpXHJcblxyXG4gICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHtcclxuICAgICAgICAgICAgaGRycy5VUEdSQURFOiAid2Vic29ja2V0IixcclxuICAgICAgICAgICAgaGRycy5DT05ORUNUSU9OOiAidXBncmFkZSIsXHJcbiAgICAgICAgICAgIGhkcnMuU0VDX1dFQlNPQ0tFVF9WRVJTSU9OOiAiMTMiLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gZGVmYXVsdF9oZWFkZXJzLml0ZW1zKCk6XHJcbiAgICAgICAgICAgIHJlYWxfaGVhZGVycy5zZXRkZWZhdWx0KGtleSwgdmFsdWUpXHJcblxyXG4gICAgICAgIHNlY19rZXkgPSBiYXNlNjQuYjY0ZW5jb2RlKG9zLnVyYW5kb20oMTYpKVxyXG4gICAgICAgIHJlYWxfaGVhZGVyc1toZHJzLlNFQ19XRUJTT0NLRVRfS0VZXSA9IHNlY19rZXkuZGVjb2RlKClcclxuXHJcbiAgICAgICAgaWYgcHJvdG9jb2xzOlxyXG4gICAgICAgICAgICByZWFsX2hlYWRlcnNbaGRycy5TRUNfV0VCU09DS0VUX1BST1RPQ09MXSA9ICIsIi5qb2luKHByb3RvY29scylcclxuICAgICAgICBpZiBvcmlnaW4gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJlYWxfaGVhZGVyc1toZHJzLk9SSUdJTl0gPSBvcmlnaW5cclxuICAgICAgICBpZiBjb21wcmVzczpcclxuICAgICAgICAgICAgZXh0c3RyID0gd3NfZXh0X2dlbihjb21wcmVzcz1jb21wcmVzcylcclxuICAgICAgICAgICAgcmVhbF9oZWFkZXJzW2hkcnMuU0VDX1dFQlNPQ0tFVF9FWFRFTlNJT05TXSA9IGV4dHN0clxyXG5cclxuICAgICAgICBzc2wgPSBfbWVyZ2Vfc3NsX3BhcmFtcyhzc2wsIHZlcmlmeV9zc2wsIHNzbF9jb250ZXh0LCBmaW5nZXJwcmludClcclxuXHJcbiAgICAgICAgIyBzZW5kIHJlcXVlc3RcclxuICAgICAgICByZXNwID0gYXdhaXQgc2VsZi5yZXF1ZXN0KFxyXG4gICAgICAgICAgICBtZXRob2QsXHJcbiAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgcGFyYW1zPXBhcmFtcyxcclxuICAgICAgICAgICAgaGVhZGVycz1yZWFsX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIHJlYWRfdW50aWxfZW9mPUZhbHNlLFxyXG4gICAgICAgICAgICBhdXRoPWF1dGgsXHJcbiAgICAgICAgICAgIHByb3h5PXByb3h5LFxyXG4gICAgICAgICAgICBwcm94eV9hdXRoPXByb3h5X2F1dGgsXHJcbiAgICAgICAgICAgIHNzbD1zc2wsXHJcbiAgICAgICAgICAgIHByb3h5X2hlYWRlcnM9cHJveHlfaGVhZGVycyxcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgIyBjaGVjayBoYW5kc2hha2VcclxuICAgICAgICAgICAgaWYgcmVzcC5zdGF0dXMgIT0gMTAxOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgV1NTZXJ2ZXJIYW5kc2hha2VFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICByZXNwLnJlcXVlc3RfaW5mbyxcclxuICAgICAgICAgICAgICAgICAgICByZXNwLmhpc3RvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT0iSW52YWxpZCByZXNwb25zZSBzdGF0dXMiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cz1yZXNwLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXJlc3AuaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIGlmIHJlc3AuaGVhZGVycy5nZXQoaGRycy5VUEdSQURFLCAiIikubG93ZXIoKSAhPSAid2Vic29ja2V0IjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFdTU2VydmVySGFuZHNoYWtlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcC5yZXF1ZXN0X2luZm8sXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcC5oaXN0b3J5LFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9IkludmFsaWQgdXBncmFkZSBoZWFkZXIiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cz1yZXNwLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXJlc3AuaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIGlmIHJlc3AuaGVhZGVycy5nZXQoaGRycy5DT05ORUNUSU9OLCAiIikubG93ZXIoKSAhPSAidXBncmFkZSI6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBXU1NlcnZlckhhbmRzaGFrZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3AucmVxdWVzdF9pbmZvLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3AuaGlzdG9yeSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPSJJbnZhbGlkIGNvbm5lY3Rpb24gaGVhZGVyIixcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM9cmVzcC5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycz1yZXNwLmhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAjIGtleSBjYWxjdWxhdGlvblxyXG4gICAgICAgICAgICByX2tleSA9IHJlc3AuaGVhZGVycy5nZXQoaGRycy5TRUNfV0VCU09DS0VUX0FDQ0VQVCwgIiIpXHJcbiAgICAgICAgICAgIG1hdGNoID0gYmFzZTY0LmI2NGVuY29kZShoYXNobGliLnNoYTEoc2VjX2tleSArIFdTX0tFWSkuZGlnZXN0KCkpLmRlY29kZSgpXHJcbiAgICAgICAgICAgIGlmIHJfa2V5ICE9IG1hdGNoOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgV1NTZXJ2ZXJIYW5kc2hha2VFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICByZXNwLnJlcXVlc3RfaW5mbyxcclxuICAgICAgICAgICAgICAgICAgICByZXNwLmhpc3RvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT0iSW52YWxpZCBjaGFsbGVuZ2UgcmVzcG9uc2UiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cz1yZXNwLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXJlc3AuaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICMgd2Vic29ja2V0IHByb3RvY29sXHJcbiAgICAgICAgICAgIHByb3RvY29sID0gTm9uZVxyXG4gICAgICAgICAgICBpZiBwcm90b2NvbHMgYW5kIGhkcnMuU0VDX1dFQlNPQ0tFVF9QUk9UT0NPTCBpbiByZXNwLmhlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICByZXNwX3Byb3RvY29scyA9IFtcclxuICAgICAgICAgICAgICAgICAgICBwcm90by5zdHJpcCgpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIHByb3RvIGluIHJlc3AuaGVhZGVyc1toZHJzLlNFQ19XRUJTT0NLRVRfUFJPVE9DT0xdLnNwbGl0KCIsIilcclxuICAgICAgICAgICAgICAgIF1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgcHJvdG8gaW4gcmVzcF9wcm90b2NvbHM6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgcHJvdG8gaW4gcHJvdG9jb2xzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm90b2NvbCA9IHByb3RvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICAjIHdlYnNvY2tldCBjb21wcmVzc1xyXG4gICAgICAgICAgICBub3Rha2VvdmVyID0gRmFsc2VcclxuICAgICAgICAgICAgaWYgY29tcHJlc3M6XHJcbiAgICAgICAgICAgICAgICBjb21wcmVzc19oZHJzID0gcmVzcC5oZWFkZXJzLmdldChoZHJzLlNFQ19XRUJTT0NLRVRfRVhURU5TSU9OUylcclxuICAgICAgICAgICAgICAgIGlmIGNvbXByZXNzX2hkcnM6XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wcmVzcywgbm90YWtlb3ZlciA9IHdzX2V4dF9wYXJzZShjb21wcmVzc19oZHJzKVxyXG4gICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBXU0hhbmRzaGFrZUVycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgV1NTZXJ2ZXJIYW5kc2hha2VFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3AucmVxdWVzdF9pbmZvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcC5oaXN0b3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT1leGMuYXJnc1swXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cz1yZXNwLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9cmVzcC5oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIGZyb20gZXhjXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXByZXNzID0gMFxyXG4gICAgICAgICAgICAgICAgICAgIG5vdGFrZW92ZXIgPSBGYWxzZVxyXG5cclxuICAgICAgICAgICAgY29ubiA9IHJlc3AuY29ubmVjdGlvblxyXG4gICAgICAgICAgICBhc3NlcnQgY29ubiBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICBjb25uX3Byb3RvID0gY29ubi5wcm90b2NvbFxyXG4gICAgICAgICAgICBhc3NlcnQgY29ubl9wcm90byBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICB0cmFuc3BvcnQgPSBjb25uLnRyYW5zcG9ydFxyXG4gICAgICAgICAgICBhc3NlcnQgdHJhbnNwb3J0IGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIHJlYWRlciA9IEZsb3dDb250cm9sRGF0YVF1ZXVlKFxyXG4gICAgICAgICAgICAgICAgY29ubl9wcm90bywgMiAqKiAxNiwgbG9vcD1zZWxmLl9sb29wXHJcbiAgICAgICAgICAgICkgICMgdHlwZTogRmxvd0NvbnRyb2xEYXRhUXVldWVbV1NNZXNzYWdlXVxyXG4gICAgICAgICAgICBjb25uX3Byb3RvLnNldF9wYXJzZXIoV2ViU29ja2V0UmVhZGVyKHJlYWRlciwgbWF4X21zZ19zaXplKSwgcmVhZGVyKVxyXG4gICAgICAgICAgICB3cml0ZXIgPSBXZWJTb2NrZXRXcml0ZXIoXHJcbiAgICAgICAgICAgICAgICBjb25uX3Byb3RvLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0LFxyXG4gICAgICAgICAgICAgICAgdXNlX21hc2s9VHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbXByZXNzPWNvbXByZXNzLFxyXG4gICAgICAgICAgICAgICAgbm90YWtlb3Zlcj1ub3Rha2VvdmVyLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZXhjZXB0IEJhc2VFeGNlcHRpb246XHJcbiAgICAgICAgICAgIHJlc3AuY2xvc2UoKVxyXG4gICAgICAgICAgICByYWlzZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl93c19yZXNwb25zZV9jbGFzcyhcclxuICAgICAgICAgICAgICAgIHJlYWRlcixcclxuICAgICAgICAgICAgICAgIHdyaXRlcixcclxuICAgICAgICAgICAgICAgIHByb3RvY29sLFxyXG4gICAgICAgICAgICAgICAgcmVzcCxcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQsXHJcbiAgICAgICAgICAgICAgICBhdXRvY2xvc2UsXHJcbiAgICAgICAgICAgICAgICBhdXRvcGluZyxcclxuICAgICAgICAgICAgICAgIHNlbGYuX2xvb3AsXHJcbiAgICAgICAgICAgICAgICByZWNlaXZlX3RpbWVvdXQ9cmVjZWl2ZV90aW1lb3V0LFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0PWhlYXJ0YmVhdCxcclxuICAgICAgICAgICAgICAgIGNvbXByZXNzPWNvbXByZXNzLFxyXG4gICAgICAgICAgICAgICAgY2xpZW50X25vdGFrZW92ZXI9bm90YWtlb3ZlcixcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfcHJlcGFyZV9oZWFkZXJzKHNlbGYsIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10pIC0+ICJDSU11bHRpRGljdFtzdHJdIjpcclxuICAgICAgICAiIiJBZGQgZGVmYXVsdCBoZWFkZXJzIGFuZCB0cmFuc2Zvcm0gaXQgdG8gQ0lNdWx0aURpY3QiIiJcclxuICAgICAgICAjIENvbnZlcnQgaGVhZGVycyB0byBNdWx0aURpY3RcclxuICAgICAgICByZXN1bHQgPSBDSU11bHRpRGljdChzZWxmLl9kZWZhdWx0X2hlYWRlcnMpXHJcbiAgICAgICAgaWYgaGVhZGVyczpcclxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoaGVhZGVycywgKE11bHRpRGljdFByb3h5LCBNdWx0aURpY3QpKTpcclxuICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBDSU11bHRpRGljdChoZWFkZXJzKVxyXG4gICAgICAgICAgICBhZGRlZF9uYW1lcyA9IHNldCgpICAjIHR5cGU6IFNldFtzdHJdXHJcbiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIGhlYWRlcnMuaXRlbXMoKTpcclxuICAgICAgICAgICAgICAgIGlmIGtleSBpbiBhZGRlZF9uYW1lczpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuYWRkKGtleSwgdmFsdWUpXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICBhZGRlZF9uYW1lcy5hZGQoa2V5KVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuXHJcbiAgICBkZWYgZ2V0KFxyXG4gICAgICAgIHNlbGYsIHVybDogU3RyT3JVUkwsICosIGFsbG93X3JlZGlyZWN0czogYm9vbCA9IFRydWUsICoqa3dhcmdzOiBBbnlcclxuICAgICkgLT4gIl9SZXF1ZXN0Q29udGV4dE1hbmFnZXIiOlxyXG4gICAgICAgICIiIlBlcmZvcm0gSFRUUCBHRVQgcmVxdWVzdC4iIiJcclxuICAgICAgICByZXR1cm4gX1JlcXVlc3RDb250ZXh0TWFuYWdlcihcclxuICAgICAgICAgICAgc2VsZi5fcmVxdWVzdChoZHJzLk1FVEhfR0VULCB1cmwsIGFsbG93X3JlZGlyZWN0cz1hbGxvd19yZWRpcmVjdHMsICoqa3dhcmdzKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgb3B0aW9ucyhcclxuICAgICAgICBzZWxmLCB1cmw6IFN0ck9yVVJMLCAqLCBhbGxvd19yZWRpcmVjdHM6IGJvb2wgPSBUcnVlLCAqKmt3YXJnczogQW55XHJcbiAgICApIC0+ICJfUmVxdWVzdENvbnRleHRNYW5hZ2VyIjpcclxuICAgICAgICAiIiJQZXJmb3JtIEhUVFAgT1BUSU9OUyByZXF1ZXN0LiIiIlxyXG4gICAgICAgIHJldHVybiBfUmVxdWVzdENvbnRleHRNYW5hZ2VyKFxyXG4gICAgICAgICAgICBzZWxmLl9yZXF1ZXN0KFxyXG4gICAgICAgICAgICAgICAgaGRycy5NRVRIX09QVElPTlMsIHVybCwgYWxsb3dfcmVkaXJlY3RzPWFsbG93X3JlZGlyZWN0cywgKiprd2FyZ3NcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgaGVhZChcclxuICAgICAgICBzZWxmLCB1cmw6IFN0ck9yVVJMLCAqLCBhbGxvd19yZWRpcmVjdHM6IGJvb2wgPSBGYWxzZSwgKiprd2FyZ3M6IEFueVxyXG4gICAgKSAtPiAiX1JlcXVlc3RDb250ZXh0TWFuYWdlciI6XHJcbiAgICAgICAgIiIiUGVyZm9ybSBIVFRQIEhFQUQgcmVxdWVzdC4iIiJcclxuICAgICAgICByZXR1cm4gX1JlcXVlc3RDb250ZXh0TWFuYWdlcihcclxuICAgICAgICAgICAgc2VsZi5fcmVxdWVzdChcclxuICAgICAgICAgICAgICAgIGhkcnMuTUVUSF9IRUFELCB1cmwsIGFsbG93X3JlZGlyZWN0cz1hbGxvd19yZWRpcmVjdHMsICoqa3dhcmdzXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHBvc3QoXHJcbiAgICAgICAgc2VsZiwgdXJsOiBTdHJPclVSTCwgKiwgZGF0YTogQW55ID0gTm9uZSwgKiprd2FyZ3M6IEFueVxyXG4gICAgKSAtPiAiX1JlcXVlc3RDb250ZXh0TWFuYWdlciI6XHJcbiAgICAgICAgIiIiUGVyZm9ybSBIVFRQIFBPU1QgcmVxdWVzdC4iIiJcclxuICAgICAgICByZXR1cm4gX1JlcXVlc3RDb250ZXh0TWFuYWdlcihcclxuICAgICAgICAgICAgc2VsZi5fcmVxdWVzdChoZHJzLk1FVEhfUE9TVCwgdXJsLCBkYXRhPWRhdGEsICoqa3dhcmdzKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcHV0KFxyXG4gICAgICAgIHNlbGYsIHVybDogU3RyT3JVUkwsICosIGRhdGE6IEFueSA9IE5vbmUsICoqa3dhcmdzOiBBbnlcclxuICAgICkgLT4gIl9SZXF1ZXN0Q29udGV4dE1hbmFnZXIiOlxyXG4gICAgICAgICIiIlBlcmZvcm0gSFRUUCBQVVQgcmVxdWVzdC4iIiJcclxuICAgICAgICByZXR1cm4gX1JlcXVlc3RDb250ZXh0TWFuYWdlcihcclxuICAgICAgICAgICAgc2VsZi5fcmVxdWVzdChoZHJzLk1FVEhfUFVULCB1cmwsIGRhdGE9ZGF0YSwgKiprd2FyZ3MpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwYXRjaChcclxuICAgICAgICBzZWxmLCB1cmw6IFN0ck9yVVJMLCAqLCBkYXRhOiBBbnkgPSBOb25lLCAqKmt3YXJnczogQW55XHJcbiAgICApIC0+ICJfUmVxdWVzdENvbnRleHRNYW5hZ2VyIjpcclxuICAgICAgICAiIiJQZXJmb3JtIEhUVFAgUEFUQ0ggcmVxdWVzdC4iIiJcclxuICAgICAgICByZXR1cm4gX1JlcXVlc3RDb250ZXh0TWFuYWdlcihcclxuICAgICAgICAgICAgc2VsZi5fcmVxdWVzdChoZHJzLk1FVEhfUEFUQ0gsIHVybCwgZGF0YT1kYXRhLCAqKmt3YXJncylcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGRlbGV0ZShzZWxmLCB1cmw6IFN0ck9yVVJMLCAqKmt3YXJnczogQW55KSAtPiAiX1JlcXVlc3RDb250ZXh0TWFuYWdlciI6XHJcbiAgICAgICAgIiIiUGVyZm9ybSBIVFRQIERFTEVURSByZXF1ZXN0LiIiIlxyXG4gICAgICAgIHJldHVybiBfUmVxdWVzdENvbnRleHRNYW5hZ2VyKHNlbGYuX3JlcXVlc3QoaGRycy5NRVRIX0RFTEVURSwgdXJsLCAqKmt3YXJncykpXHJcblxyXG4gICAgYXN5bmMgZGVmIGNsb3NlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQ2xvc2UgdW5kZXJseWluZyBjb25uZWN0b3IuXHJcblxyXG4gICAgICAgIFJlbGVhc2UgYWxsIGFjcXVpcmVkIHJlc291cmNlcy5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBub3Qgc2VsZi5jbG9zZWQ6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2Nvbm5lY3RvciBpcyBub3QgTm9uZSBhbmQgc2VsZi5fY29ubmVjdG9yX293bmVyOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5fY29ubmVjdG9yLmNsb3NlKClcclxuICAgICAgICAgICAgc2VsZi5fY29ubmVjdG9yID0gTm9uZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNsb3NlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIklzIGNsaWVudCBzZXNzaW9uIGNsb3NlZC5cclxuXHJcbiAgICAgICAgQSByZWFkb25seSBwcm9wZXJ0eS5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fY29ubmVjdG9yIGlzIE5vbmUgb3Igc2VsZi5fY29ubmVjdG9yLmNsb3NlZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvbm5lY3RvcihzZWxmKSAtPiBPcHRpb25hbFtCYXNlQ29ubmVjdG9yXTpcclxuICAgICAgICAiIiJDb25uZWN0b3IgaW5zdGFuY2UgdXNlZCBmb3IgdGhlIHNlc3Npb24uIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm5lY3RvclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvb2tpZV9qYXIoc2VsZikgLT4gQWJzdHJhY3RDb29raWVKYXI6XHJcbiAgICAgICAgIiIiVGhlIHNlc3Npb24gY29va2llcy4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fY29va2llX2phclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHZlcnNpb24oc2VsZikgLT4gVHVwbGVbaW50LCBpbnRdOlxyXG4gICAgICAgICIiIlRoZSBzZXNzaW9uIEhUVFAgcHJvdG9jb2wgdmVyc2lvbi4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmVyc2lvblxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJlcXVvdGVfcmVkaXJlY3RfdXJsKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiRG8gVVJMIHJlcXVvdGluZyBvbiByZWRpcmVjdGlvbiBoYW5kbGluZy4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fcmVxdW90ZV9yZWRpcmVjdF91cmxcclxuXHJcbiAgICBAcmVxdW90ZV9yZWRpcmVjdF91cmwuc2V0dGVyXHJcbiAgICBkZWYgcmVxdW90ZV9yZWRpcmVjdF91cmwoc2VsZiwgdmFsOiBib29sKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkRvIFVSTCByZXF1b3Rpbmcgb24gcmVkaXJlY3Rpb24gaGFuZGxpbmcuIiIiXHJcbiAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgInNlc3Npb24ucmVxdW90ZV9yZWRpcmVjdF91cmwgbW9kaWZpY2F0aW9uICIgImlzIGRlcHJlY2F0ZWQgIzI3NzgiLFxyXG4gICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgIHN0YWNrbGV2ZWw9MixcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fcmVxdW90ZV9yZWRpcmVjdF91cmwgPSB2YWxcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBsb29wKHNlbGYpIC0+IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3A6XHJcbiAgICAgICAgIiIiU2Vzc2lvblwncyBsb29wLiIiIlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJjbGllbnQubG9vcCBwcm9wZXJ0eSBpcyBkZXByZWNhdGVkIiwgRGVwcmVjYXRpb25XYXJuaW5nLCBzdGFja2xldmVsPTJcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xvb3BcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB0aW1lb3V0KHNlbGYpIC0+IFVuaW9uW29iamVjdCwgQ2xpZW50VGltZW91dF06XHJcbiAgICAgICAgIiIiVGltZW91dCBmb3IgdGhlIHNlc3Npb24uIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3RpbWVvdXRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBoZWFkZXJzKHNlbGYpIC0+ICJDSU11bHRpRGljdFtzdHJdIjpcclxuICAgICAgICAiIiJUaGUgZGVmYXVsdCBoZWFkZXJzIG9mIHRoZSBjbGllbnQgc2Vzc2lvbi4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fZGVmYXVsdF9oZWFkZXJzXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc2tpcF9hdXRvX2hlYWRlcnMoc2VsZikgLT4gRnJvemVuU2V0W2lzdHJdOlxyXG4gICAgICAgICIiIkhlYWRlcnMgZm9yIHdoaWNoIGF1dG9nZW5lcmF0aW9uIHNob3VsZCBiZSBza2lwcGVkIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3NraXBfYXV0b19oZWFkZXJzXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgYXV0aChzZWxmKSAtPiBPcHRpb25hbFtCYXNpY0F1dGhdOlxyXG4gICAgICAgICIiIkFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgSFRUUCBCYXNpYyBBdXRob3JpemF0aW9uIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2RlZmF1bHRfYXV0aFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGpzb25fc2VyaWFsaXplKHNlbGYpIC0+IEpTT05FbmNvZGVyOlxyXG4gICAgICAgICIiIkpzb24gc2VyaWFsaXplciBjYWxsYWJsZSIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9qc29uX3NlcmlhbGl6ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvbm5lY3Rvcl9vd25lcihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIlNob3VsZCBjb25uZWN0b3IgYmUgY2xvc2VkIG9uIHNlc3Npb24gY2xvc2luZyIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uZWN0b3Jfb3duZXJcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByYWlzZV9mb3Jfc3RhdHVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IFVuaW9uW2Jvb2wsIENhbGxhYmxlW1tDbGllbnRSZXNwb25zZV0sIEF3YWl0YWJsZVtOb25lXV1dOlxyXG4gICAgICAgICIiIlNob3VsZCBgQ2xpZW50UmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpYCBiZSBjYWxsZWQgZm9yIGVhY2ggcmVzcG9uc2UuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JhaXNlX2Zvcl9zdGF0dXNcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBhdXRvX2RlY29tcHJlc3Moc2VsZikgLT4gYm9vbDpcclxuICAgICAgICAiIiJTaG91bGQgdGhlIGJvZHkgcmVzcG9uc2UgYmUgYXV0b21hdGljYWxseSBkZWNvbXByZXNzZWQuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2F1dG9fZGVjb21wcmVzc1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHRydXN0X2VudihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNob3VsZCBwcm94aWVzIGluZm9ybWF0aW9uIGZyb20gZW52aXJvbm1lbnQgb3IgbmV0cmMgYmUgdHJ1c3RlZC5cclxuXHJcbiAgICAgICAgSW5mb3JtYXRpb24gaXMgZnJvbSBIVFRQX1BST1hZIC8gSFRUUFNfUFJPWFkgZW52aXJvbm1lbnQgdmFyaWFibGVzXHJcbiAgICAgICAgb3Igfi8ubmV0cmMgZmlsZSBpZiBwcmVzZW50LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl90cnVzdF9lbnZcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB0cmFjZV9jb25maWdzKHNlbGYpIC0+IExpc3RbVHJhY2VDb25maWddOlxyXG4gICAgICAgICIiIkEgbGlzdCBvZiBUcmFjZUNvbmZpZyBpbnN0YW5jZXMgdXNlZCBmb3IgY2xpZW50IHRyYWNpbmciIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fdHJhY2VfY29uZmlnc1xyXG5cclxuICAgIGRlZiBkZXRhY2goc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAiIiJEZXRhY2ggY29ubmVjdG9yIGZyb20gc2Vzc2lvbiB3aXRob3V0IGNsb3NpbmcgdGhlIGZvcm1lci5cclxuXHJcbiAgICAgICAgU2Vzc2lvbiBpcyBzd2l0Y2hlZCB0byBjbG9zZWQgc3RhdGUgYW55d2F5LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHNlbGYuX2Nvbm5lY3RvciA9IE5vbmVcclxuXHJcbiAgICBkZWYgX19lbnRlcl9fKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJVc2UgYXN5bmMgd2l0aCBpbnN0ZWFkIilcclxuXHJcbiAgICBkZWYgX19leGl0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBleGNfdHlwZTogT3B0aW9uYWxbVHlwZVtCYXNlRXhjZXB0aW9uXV0sXHJcbiAgICAgICAgZXhjX3ZhbDogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0sXHJcbiAgICAgICAgZXhjX3RiOiBPcHRpb25hbFtUcmFjZWJhY2tUeXBlXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAjIF9fZXhpdF9fIHNob3VsZCBleGlzdCBpbiBwYWlyIHdpdGggX19lbnRlcl9fIGJ1dCBuZXZlciBleGVjdXRlZFxyXG4gICAgICAgIHBhc3MgICMgcHJhZ21hOiBubyBjb3ZlclxyXG5cclxuICAgIGFzeW5jIGRlZiBfX2FlbnRlcl9fKHNlbGYpIC0+ICJDbGllbnRTZXNzaW9uIjpcclxuICAgICAgICByZXR1cm4gc2VsZlxyXG5cclxuICAgIGFzeW5jIGRlZiBfX2FleGl0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBleGNfdHlwZTogT3B0aW9uYWxbVHlwZVtCYXNlRXhjZXB0aW9uXV0sXHJcbiAgICAgICAgZXhjX3ZhbDogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0sXHJcbiAgICAgICAgZXhjX3RiOiBPcHRpb25hbFtUcmFjZWJhY2tUeXBlXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBhd2FpdCBzZWxmLmNsb3NlKClcclxuXHJcblxyXG5jbGFzcyBfQmFzZVJlcXVlc3RDb250ZXh0TWFuYWdlcihDb3JvdXRpbmVbQW55LCBBbnksIF9SZXRUeXBlXSwgR2VuZXJpY1tfUmV0VHlwZV0pOlxyXG5cclxuICAgIF9fc2xvdHNfXyA9ICgiX2Nvcm8iLCAiX3Jlc3AiKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb3JvOiBDb3JvdXRpbmVbImFzeW5jaW8uRnV0dXJlW0FueV0iLCBOb25lLCBfUmV0VHlwZV0pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fY29ybyA9IGNvcm9cclxuXHJcbiAgICBkZWYgc2VuZChzZWxmLCBhcmc6IE5vbmUpIC0+ICJhc3luY2lvLkZ1dHVyZVtBbnldIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY29yby5zZW5kKGFyZylcclxuXHJcbiAgICBkZWYgdGhyb3coc2VsZiwgYXJnOiBCYXNlRXhjZXB0aW9uKSAtPiBOb25lOiAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGUsb3ZlcnJpZGVdXHJcbiAgICAgICAgc2VsZi5fY29yby50aHJvdyhhcmcpXHJcblxyXG4gICAgZGVmIGNsb3NlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvcm8uY2xvc2UoKVxyXG5cclxuICAgIGRlZiBfX2F3YWl0X18oc2VsZikgLT4gR2VuZXJhdG9yW0FueSwgTm9uZSwgX1JldFR5cGVdOlxyXG4gICAgICAgIHJldCA9IHNlbGYuX2Nvcm8uX19hd2FpdF9fKClcclxuICAgICAgICByZXR1cm4gcmV0XHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+IEdlbmVyYXRvcltBbnksIE5vbmUsIF9SZXRUeXBlXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fX2F3YWl0X18oKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfX2FlbnRlcl9fKHNlbGYpIC0+IF9SZXRUeXBlOlxyXG4gICAgICAgIHNlbGYuX3Jlc3AgPSBhd2FpdCBzZWxmLl9jb3JvXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Jlc3BcclxuXHJcblxyXG5jbGFzcyBfUmVxdWVzdENvbnRleHRNYW5hZ2VyKF9CYXNlUmVxdWVzdENvbnRleHRNYW5hZ2VyW0NsaWVudFJlc3BvbnNlXSk6XHJcbiAgICBfX3Nsb3RzX18gPSAoKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfX2FleGl0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBleGNfdHlwZTogT3B0aW9uYWxbVHlwZVtCYXNlRXhjZXB0aW9uXV0sXHJcbiAgICAgICAgZXhjOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXSxcclxuICAgICAgICB0YjogT3B0aW9uYWxbVHJhY2ViYWNrVHlwZV0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIyBXZVwncmUgYmFzaW5nIGJlaGF2aW9yIG9uIHRoZSBleGNlcHRpb24gYXMgaXQgY2FuIGJlIGNhdXNlZCBieVxyXG4gICAgICAgICMgdXNlciBjb2RlIHVucmVsYXRlZCB0byB0aGUgc3RhdHVzIG9mIHRoZSBjb25uZWN0aW9uLiAgSWYgeW91XHJcbiAgICAgICAgIyB3b3VsZCBsaWtlIHRvIGNsb3NlIGEgY29ubmVjdGlvbiB5b3UgbXVzdCBkbyB0aGF0XHJcbiAgICAgICAgIyBleHBsaWNpdGx5LiAgT3RoZXJ3aXNlIGNvbm5lY3Rpb24gZXJyb3IgaGFuZGxpbmcgc2hvdWxkIGtpY2sgaW5cclxuICAgICAgICAjIGFuZCBjbG9zZS9yZWN5Y2xlIHRoZSBjb25uZWN0aW9uIGFzIHJlcXVpcmVkLlxyXG4gICAgICAgIHNlbGYuX3Jlc3AucmVsZWFzZSgpXHJcblxyXG5cclxuY2xhc3MgX1dTUmVxdWVzdENvbnRleHRNYW5hZ2VyKF9CYXNlUmVxdWVzdENvbnRleHRNYW5hZ2VyW0NsaWVudFdlYlNvY2tldFJlc3BvbnNlXSk6XHJcbiAgICBfX3Nsb3RzX18gPSAoKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfX2FleGl0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBleGNfdHlwZTogT3B0aW9uYWxbVHlwZVtCYXNlRXhjZXB0aW9uXV0sXHJcbiAgICAgICAgZXhjOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXSxcclxuICAgICAgICB0YjogT3B0aW9uYWxbVHJhY2ViYWNrVHlwZV0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgYXdhaXQgc2VsZi5fcmVzcC5jbG9zZSgpXHJcblxyXG5cclxuY2xhc3MgX1Nlc3Npb25SZXF1ZXN0Q29udGV4dE1hbmFnZXI6XHJcblxyXG4gICAgX19zbG90c19fID0gKCJfY29ybyIsICJfcmVzcCIsICJfc2Vzc2lvbiIpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgY29ybzogQ29yb3V0aW5lWyJhc3luY2lvLkZ1dHVyZVtBbnldIiwgTm9uZSwgQ2xpZW50UmVzcG9uc2VdLFxyXG4gICAgICAgIHNlc3Npb246IENsaWVudFNlc3Npb24sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fY29ybyA9IGNvcm9cclxuICAgICAgICBzZWxmLl9yZXNwID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtDbGllbnRSZXNwb25zZV1cclxuICAgICAgICBzZWxmLl9zZXNzaW9uID0gc2Vzc2lvblxyXG5cclxuICAgIGFzeW5jIGRlZiBfX2FlbnRlcl9fKHNlbGYpIC0+IENsaWVudFJlc3BvbnNlOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgc2VsZi5fcmVzcCA9IGF3YWl0IHNlbGYuX2Nvcm9cclxuICAgICAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fc2Vzc2lvbi5jbG9zZSgpXHJcbiAgICAgICAgICAgIHJhaXNlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Jlc3BcclxuXHJcbiAgICBhc3luYyBkZWYgX19hZXhpdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZXhjX3R5cGU6IE9wdGlvbmFsW1R5cGVbQmFzZUV4Y2VwdGlvbl1dLFxyXG4gICAgICAgIGV4YzogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0sXHJcbiAgICAgICAgdGI6IE9wdGlvbmFsW1RyYWNlYmFja1R5cGVdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9yZXNwIGlzIG5vdCBOb25lXHJcbiAgICAgICAgc2VsZi5fcmVzcC5jbG9zZSgpXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fc2Vzc2lvbi5jbG9zZSgpXHJcblxyXG5cclxuZGVmIHJlcXVlc3QoXHJcbiAgICBtZXRob2Q6IHN0cixcclxuICAgIHVybDogU3RyT3JVUkwsXHJcbiAgICAqLFxyXG4gICAgcGFyYW1zOiBPcHRpb25hbFtNYXBwaW5nW3N0ciwgc3RyXV0gPSBOb25lLFxyXG4gICAgZGF0YTogQW55ID0gTm9uZSxcclxuICAgIGpzb246IEFueSA9IE5vbmUsXHJcbiAgICBoZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgIHNraXBfYXV0b19oZWFkZXJzOiBPcHRpb25hbFtJdGVyYWJsZVtzdHJdXSA9IE5vbmUsXHJcbiAgICBhdXRoOiBPcHRpb25hbFtCYXNpY0F1dGhdID0gTm9uZSxcclxuICAgIGFsbG93X3JlZGlyZWN0czogYm9vbCA9IFRydWUsXHJcbiAgICBtYXhfcmVkaXJlY3RzOiBpbnQgPSAxMCxcclxuICAgIGNvbXByZXNzOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgIGNodW5rZWQ6IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSxcclxuICAgIGV4cGVjdDEwMDogYm9vbCA9IEZhbHNlLFxyXG4gICAgcmFpc2VfZm9yX3N0YXR1czogT3B0aW9uYWxbYm9vbF0gPSBOb25lLFxyXG4gICAgcmVhZF91bnRpbF9lb2Y6IGJvb2wgPSBUcnVlLFxyXG4gICAgcHJveHk6IE9wdGlvbmFsW1N0ck9yVVJMXSA9IE5vbmUsXHJcbiAgICBwcm94eV9hdXRoOiBPcHRpb25hbFtCYXNpY0F1dGhdID0gTm9uZSxcclxuICAgIHRpbWVvdXQ6IFVuaW9uW0NsaWVudFRpbWVvdXQsIG9iamVjdF0gPSBzZW50aW5lbCxcclxuICAgIGNvb2tpZXM6IE9wdGlvbmFsW0xvb3NlQ29va2llc10gPSBOb25lLFxyXG4gICAgdmVyc2lvbjogSHR0cFZlcnNpb24gPSBodHRwLkh0dHBWZXJzaW9uMTEsXHJcbiAgICBjb25uZWN0b3I6IE9wdGlvbmFsW0Jhc2VDb25uZWN0b3JdID0gTm9uZSxcclxuICAgIHJlYWRfYnVmc2l6ZTogT3B0aW9uYWxbaW50XSA9IE5vbmUsXHJcbiAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbikgLT4gX1Nlc3Npb25SZXF1ZXN0Q29udGV4dE1hbmFnZXI6XHJcbiAgICAiIiJDb25zdHJ1Y3RzIGFuZCBzZW5kcyBhIHJlcXVlc3QuXHJcblxyXG4gICAgUmV0dXJucyByZXNwb25zZSBvYmplY3QuXHJcbiAgICBtZXRob2QgLSBIVFRQIG1ldGhvZFxyXG4gICAgdXJsIC0gcmVxdWVzdCB1cmxcclxuICAgIHBhcmFtcyAtIChvcHRpb25hbCkgRGljdGlvbmFyeSBvciBieXRlcyB0byBiZSBzZW50IGluIHRoZSBxdWVyeVxyXG4gICAgICBzdHJpbmcgb2YgdGhlIG5ldyByZXF1ZXN0XHJcbiAgICBkYXRhIC0gKG9wdGlvbmFsKSBEaWN0aW9uYXJ5LCBieXRlcywgb3IgZmlsZS1saWtlIG9iamVjdCB0b1xyXG4gICAgICBzZW5kIGluIHRoZSBib2R5IG9mIHRoZSByZXF1ZXN0XHJcbiAgICBqc29uIC0gKG9wdGlvbmFsKSBBbnkganNvbiBjb21wYXRpYmxlIHB5dGhvbiBvYmplY3RcclxuICAgIGhlYWRlcnMgLSAob3B0aW9uYWwpIERpY3Rpb25hcnkgb2YgSFRUUCBIZWFkZXJzIHRvIHNlbmQgd2l0aFxyXG4gICAgICB0aGUgcmVxdWVzdFxyXG4gICAgY29va2llcyAtIChvcHRpb25hbCkgRGljdCBvYmplY3QgdG8gc2VuZCB3aXRoIHRoZSByZXF1ZXN0XHJcbiAgICBhdXRoIC0gKG9wdGlvbmFsKSBCYXNpY0F1dGggbmFtZWQgdHVwbGUgcmVwcmVzZW50IEhUVFAgQmFzaWMgQXV0aFxyXG4gICAgYXV0aCAtIGFpb2h0dHAuaGVscGVycy5CYXNpY0F1dGhcclxuICAgIGFsbG93X3JlZGlyZWN0cyAtIChvcHRpb25hbCkgSWYgc2V0IHRvIEZhbHNlLCBkbyBub3QgZm9sbG93XHJcbiAgICAgIHJlZGlyZWN0c1xyXG4gICAgdmVyc2lvbiAtIFJlcXVlc3QgSFRUUCB2ZXJzaW9uLlxyXG4gICAgY29tcHJlc3MgLSBTZXQgdG8gVHJ1ZSBpZiByZXF1ZXN0IGhhcyB0byBiZSBjb21wcmVzc2VkXHJcbiAgICAgICB3aXRoIGRlZmxhdGUgZW5jb2RpbmcuXHJcbiAgICBjaHVua2VkIC0gU2V0IHRvIGNodW5rIHNpemUgZm9yIGNodW5rZWQgdHJhbnNmZXIgZW5jb2RpbmcuXHJcbiAgICBleHBlY3QxMDAgLSBFeHBlY3QgMTAwLWNvbnRpbnVlIHJlc3BvbnNlIGZyb20gc2VydmVyLlxyXG4gICAgY29ubmVjdG9yIC0gQmFzZUNvbm5lY3RvciBzdWItY2xhc3MgaW5zdGFuY2UgdG8gc3VwcG9ydFxyXG4gICAgICAgY29ubmVjdGlvbiBwb29saW5nLlxyXG4gICAgcmVhZF91bnRpbF9lb2YgLSBSZWFkIHJlc3BvbnNlIHVudGlsIGVvZiBpZiByZXNwb25zZVxyXG4gICAgICAgZG9lcyBub3QgaGF2ZSBDb250ZW50LUxlbmd0aCBoZWFkZXIuXHJcbiAgICBsb29wIC0gT3B0aW9uYWwgZXZlbnQgbG9vcC5cclxuICAgIHRpbWVvdXQgLSBPcHRpb25hbCBDbGllbnRUaW1lb3V0IHNldHRpbmdzIHN0cnVjdHVyZSwgNW1pblxyXG4gICAgICAgdG90YWwgdGltZW91dCBieSBkZWZhdWx0LlxyXG4gICAgVXNhZ2U6OlxyXG4gICAgICA+Pj4gaW1wb3J0IGFpb2h0dHBcclxuICAgICAgPj4+IHJlc3AgPSBhd2FpdCBhaW9odHRwLnJlcXVlc3QoXCdHRVRcJywgXCdodHRwOi8vcHl0aG9uLm9yZy9cJylcclxuICAgICAgPj4+IHJlc3BcclxuICAgICAgPENsaWVudFJlc3BvbnNlKHB5dGhvbi5vcmcvKSBbMjAwXT5cclxuICAgICAgPj4+IGRhdGEgPSBhd2FpdCByZXNwLnJlYWQoKVxyXG4gICAgIiIiXHJcbiAgICBjb25uZWN0b3Jfb3duZXIgPSBGYWxzZVxyXG4gICAgaWYgY29ubmVjdG9yIGlzIE5vbmU6XHJcbiAgICAgICAgY29ubmVjdG9yX293bmVyID0gVHJ1ZVxyXG4gICAgICAgIGNvbm5lY3RvciA9IFRDUENvbm5lY3Rvcihsb29wPWxvb3AsIGZvcmNlX2Nsb3NlPVRydWUpXHJcblxyXG4gICAgc2Vzc2lvbiA9IENsaWVudFNlc3Npb24oXHJcbiAgICAgICAgbG9vcD1sb29wLFxyXG4gICAgICAgIGNvb2tpZXM9Y29va2llcyxcclxuICAgICAgICB2ZXJzaW9uPXZlcnNpb24sXHJcbiAgICAgICAgdGltZW91dD10aW1lb3V0LFxyXG4gICAgICAgIGNvbm5lY3Rvcj1jb25uZWN0b3IsXHJcbiAgICAgICAgY29ubmVjdG9yX293bmVyPWNvbm5lY3Rvcl9vd25lcixcclxuICAgIClcclxuXHJcbiAgICByZXR1cm4gX1Nlc3Npb25SZXF1ZXN0Q29udGV4dE1hbmFnZXIoXHJcbiAgICAgICAgc2Vzc2lvbi5fcmVxdWVzdChcclxuICAgICAgICAgICAgbWV0aG9kLFxyXG4gICAgICAgICAgICB1cmwsXHJcbiAgICAgICAgICAgIHBhcmFtcz1wYXJhbXMsXHJcbiAgICAgICAgICAgIGRhdGE9ZGF0YSxcclxuICAgICAgICAgICAganNvbj1qc29uLFxyXG4gICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsXHJcbiAgICAgICAgICAgIHNraXBfYXV0b19oZWFkZXJzPXNraXBfYXV0b19oZWFkZXJzLFxyXG4gICAgICAgICAgICBhdXRoPWF1dGgsXHJcbiAgICAgICAgICAgIGFsbG93X3JlZGlyZWN0cz1hbGxvd19yZWRpcmVjdHMsXHJcbiAgICAgICAgICAgIG1heF9yZWRpcmVjdHM9bWF4X3JlZGlyZWN0cyxcclxuICAgICAgICAgICAgY29tcHJlc3M9Y29tcHJlc3MsXHJcbiAgICAgICAgICAgIGNodW5rZWQ9Y2h1bmtlZCxcclxuICAgICAgICAgICAgZXhwZWN0MTAwPWV4cGVjdDEwMCxcclxuICAgICAgICAgICAgcmFpc2VfZm9yX3N0YXR1cz1yYWlzZV9mb3Jfc3RhdHVzLFxyXG4gICAgICAgICAgICByZWFkX3VudGlsX2VvZj1yZWFkX3VudGlsX2VvZixcclxuICAgICAgICAgICAgcHJveHk9cHJveHksXHJcbiAgICAgICAgICAgIHByb3h5X2F1dGg9cHJveHlfYXV0aCxcclxuICAgICAgICAgICAgcmVhZF9idWZzaXplPXJlYWRfYnVmc2l6ZSxcclxuICAgICAgICApLFxyXG4gICAgICAgIHNlc3Npb24sXHJcbiAgICApXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhdHRyL19faW5pdF9fLnB5JywgYicjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcblxuZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQsIGRpdmlzaW9uLCBwcmludF9mdW5jdGlvblxuXG5pbXBvcnQgc3lzXG5cbmZyb20gZnVuY3Rvb2xzIGltcG9ydCBwYXJ0aWFsXG5cbmZyb20gLiBpbXBvcnQgY29udmVydGVycywgZXhjZXB0aW9ucywgZmlsdGVycywgc2V0dGVycywgdmFsaWRhdG9yc1xuZnJvbSAuX2NtcCBpbXBvcnQgY21wX3VzaW5nXG5mcm9tIC5fY29uZmlnIGltcG9ydCBnZXRfcnVuX3ZhbGlkYXRvcnMsIHNldF9ydW5fdmFsaWRhdG9yc1xuZnJvbSAuX2Z1bmNzIGltcG9ydCBhc2RpY3QsIGFzc29jLCBhc3R1cGxlLCBldm9sdmUsIGhhcywgcmVzb2x2ZV90eXBlc1xuZnJvbSAuX21ha2UgaW1wb3J0IChcbiAgICBOT1RISU5HLFxuICAgIEF0dHJpYnV0ZSxcbiAgICBGYWN0b3J5LFxuICAgIGF0dHJpYixcbiAgICBhdHRycyxcbiAgICBmaWVsZHMsXG4gICAgZmllbGRzX2RpY3QsXG4gICAgbWFrZV9jbGFzcyxcbiAgICB2YWxpZGF0ZSxcbilcbmZyb20gLl92ZXJzaW9uX2luZm8gaW1wb3J0IFZlcnNpb25JbmZvXG5cblxuX192ZXJzaW9uX18gPSAiMjEuNC4wIlxuX192ZXJzaW9uX2luZm9fXyA9IFZlcnNpb25JbmZvLl9mcm9tX3ZlcnNpb25fc3RyaW5nKF9fdmVyc2lvbl9fKVxuXG5fX3RpdGxlX18gPSAiYXR0cnMiXG5fX2Rlc2NyaXB0aW9uX18gPSAiQ2xhc3NlcyBXaXRob3V0IEJvaWxlcnBsYXRlIlxuX191cmxfXyA9ICJodHRwczovL3d3dy5hdHRycy5vcmcvIlxuX191cmlfXyA9IF9fdXJsX19cbl9fZG9jX18gPSBfX2Rlc2NyaXB0aW9uX18gKyAiIDwiICsgX191cmlfXyArICI+IlxuXG5fX2F1dGhvcl9fID0gIkh5bmVrIFNjaGxhd2FjayJcbl9fZW1haWxfXyA9ICJoc0BveC5jeCJcblxuX19saWNlbnNlX18gPSAiTUlUIlxuX19jb3B5cmlnaHRfXyA9ICJDb3B5cmlnaHQgKGMpIDIwMTUgSHluZWsgU2NobGF3YWNrIlxuXG5cbnMgPSBhdHRyaWJ1dGVzID0gYXR0cnNcbmliID0gYXR0ciA9IGF0dHJpYlxuZGF0YWNsYXNzID0gcGFydGlhbChhdHRycywgYXV0b19hdHRyaWJzPVRydWUpICAjIGhhcHB5IEVhc3RlciA7KVxuXG5fX2FsbF9fID0gW1xuICAgICJBdHRyaWJ1dGUiLFxuICAgICJGYWN0b3J5IixcbiAgICAiTk9USElORyIsXG4gICAgImFzZGljdCIsXG4gICAgImFzc29jIixcbiAgICAiYXN0dXBsZSIsXG4gICAgImF0dHIiLFxuICAgICJhdHRyaWIiLFxuICAgICJhdHRyaWJ1dGVzIixcbiAgICAiYXR0cnMiLFxuICAgICJjbXBfdXNpbmciLFxuICAgICJjb252ZXJ0ZXJzIixcbiAgICAiZXZvbHZlIixcbiAgICAiZXhjZXB0aW9ucyIsXG4gICAgImZpZWxkcyIsXG4gICAgImZpZWxkc19kaWN0IixcbiAgICAiZmlsdGVycyIsXG4gICAgImdldF9ydW5fdmFsaWRhdG9ycyIsXG4gICAgImhhcyIsXG4gICAgImliIixcbiAgICAibWFrZV9jbGFzcyIsXG4gICAgInJlc29sdmVfdHlwZXMiLFxuICAgICJzIixcbiAgICAic2V0X3J1bl92YWxpZGF0b3JzIixcbiAgICAic2V0dGVycyIsXG4gICAgInZhbGlkYXRlIixcbiAgICAidmFsaWRhdG9ycyIsXG5dXG5cbmlmIHN5cy52ZXJzaW9uX2luZm9bOjJdID49ICgzLCA2KTpcbiAgICBmcm9tIC5fbmV4dF9nZW4gaW1wb3J0IGRlZmluZSwgZmllbGQsIGZyb3plbiwgbXV0YWJsZSAgIyBub3FhOiBGNDAxXG5cbiAgICBfX2FsbF9fLmV4dGVuZCgoImRlZmluZSIsICJmaWVsZCIsICJmcm96ZW4iLCAibXV0YWJsZSIpKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2F0dHIvY29udmVydGVycy5weScsIGInIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG5cbiIiIlxuQ29tbW9ubHkgdXNlZnVsIGNvbnZlcnRlcnMuXG4iIiJcblxuZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQsIGRpdmlzaW9uLCBwcmludF9mdW5jdGlvblxuXG5mcm9tIC5fY29tcGF0IGltcG9ydCBQWTJcbmZyb20gLl9tYWtlIGltcG9ydCBOT1RISU5HLCBGYWN0b3J5LCBwaXBlXG5cblxuaWYgbm90IFBZMjpcbiAgICBpbXBvcnQgaW5zcGVjdFxuICAgIGltcG9ydCB0eXBpbmdcblxuXG5fX2FsbF9fID0gW1xuICAgICJkZWZhdWx0X2lmX25vbmUiLFxuICAgICJvcHRpb25hbCIsXG4gICAgInBpcGUiLFxuICAgICJ0b19ib29sIixcbl1cblxuXG5kZWYgb3B0aW9uYWwoY29udmVydGVyKTpcbiAgICAiIiJcbiAgICBBIGNvbnZlcnRlciB0aGF0IGFsbG93cyBhbiBhdHRyaWJ1dGUgdG8gYmUgb3B0aW9uYWwuIEFuIG9wdGlvbmFsIGF0dHJpYnV0ZVxuICAgIGlzIG9uZSB3aGljaCBjYW4gYmUgc2V0IHRvIGBgTm9uZWBgLlxuXG4gICAgVHlwZSBhbm5vdGF0aW9ucyB3aWxsIGJlIGluZmVycmVkIGZyb20gdGhlIHdyYXBwZWQgY29udmVydGVyXCdzLCBpZiBpdFxuICAgIGhhcyBhbnkuXG5cbiAgICA6cGFyYW0gY2FsbGFibGUgY29udmVydGVyOiB0aGUgY29udmVydGVyIHRoYXQgaXMgdXNlZCBmb3Igbm9uLWBgTm9uZWBgXG4gICAgICAgIHZhbHVlcy5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE3LjEuMFxuICAgICIiIlxuXG4gICAgZGVmIG9wdGlvbmFsX2NvbnZlcnRlcih2YWwpOlxuICAgICAgICBpZiB2YWwgaXMgTm9uZTpcbiAgICAgICAgICAgIHJldHVybiBOb25lXG4gICAgICAgIHJldHVybiBjb252ZXJ0ZXIodmFsKVxuXG4gICAgaWYgbm90IFBZMjpcbiAgICAgICAgc2lnID0gTm9uZVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBzaWcgPSBpbnNwZWN0LnNpZ25hdHVyZShjb252ZXJ0ZXIpXG4gICAgICAgIGV4Y2VwdCAoVmFsdWVFcnJvciwgVHlwZUVycm9yKTogICMgaW5zcGVjdCBmYWlsZWRcbiAgICAgICAgICAgIHBhc3NcbiAgICAgICAgaWYgc2lnOlxuICAgICAgICAgICAgcGFyYW1zID0gbGlzdChzaWcucGFyYW1ldGVycy52YWx1ZXMoKSlcbiAgICAgICAgICAgIGlmIHBhcmFtcyBhbmQgcGFyYW1zWzBdLmFubm90YXRpb24gaXMgbm90IGluc3BlY3QuUGFyYW1ldGVyLmVtcHR5OlxuICAgICAgICAgICAgICAgIG9wdGlvbmFsX2NvbnZlcnRlci5fX2Fubm90YXRpb25zX19bInZhbCJdID0gdHlwaW5nLk9wdGlvbmFsW1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXNbMF0uYW5ub3RhdGlvblxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIGlmIHNpZy5yZXR1cm5fYW5ub3RhdGlvbiBpcyBub3QgaW5zcGVjdC5TaWduYXR1cmUuZW1wdHk6XG4gICAgICAgICAgICAgICAgb3B0aW9uYWxfY29udmVydGVyLl9fYW5ub3RhdGlvbnNfX1sicmV0dXJuIl0gPSB0eXBpbmcuT3B0aW9uYWxbXG4gICAgICAgICAgICAgICAgICAgIHNpZy5yZXR1cm5fYW5ub3RhdGlvblxuICAgICAgICAgICAgICAgIF1cblxuICAgIHJldHVybiBvcHRpb25hbF9jb252ZXJ0ZXJcblxuXG5kZWYgZGVmYXVsdF9pZl9ub25lKGRlZmF1bHQ9Tk9USElORywgZmFjdG9yeT1Ob25lKTpcbiAgICAiIiJcbiAgICBBIGNvbnZlcnRlciB0aGF0IGFsbG93cyB0byByZXBsYWNlIGBgTm9uZWBgIHZhbHVlcyBieSAqZGVmYXVsdCogb3IgdGhlXG4gICAgcmVzdWx0IG9mICpmYWN0b3J5Ki5cblxuICAgIDpwYXJhbSBkZWZhdWx0OiBWYWx1ZSB0byBiZSB1c2VkIGlmIGBgTm9uZWBgIGlzIHBhc3NlZC4gUGFzc2luZyBhbiBpbnN0YW5jZVxuICAgICAgIG9mIGBhdHRycy5GYWN0b3J5YCBpcyBzdXBwb3J0ZWQsIGhvd2V2ZXIgdGhlIGBgdGFrZXNfc2VsZmBgIG9wdGlvblxuICAgICAgIGlzICpub3QqLlxuICAgIDpwYXJhbSBjYWxsYWJsZSBmYWN0b3J5OiBBIGNhbGxhYmxlIHRoYXQgdGFrZXMgbm8gcGFyYW1ldGVycyB3aG9zZSByZXN1bHRcbiAgICAgICBpcyB1c2VkIGlmIGBgTm9uZWBgIGlzIHBhc3NlZC5cblxuICAgIDpyYWlzZXMgVHlwZUVycm9yOiBJZiAqKm5laXRoZXIqKiAqZGVmYXVsdCogb3IgKmZhY3RvcnkqIGlzIHBhc3NlZC5cbiAgICA6cmFpc2VzIFR5cGVFcnJvcjogSWYgKipib3RoKiogKmRlZmF1bHQqIGFuZCAqZmFjdG9yeSogYXJlIHBhc3NlZC5cbiAgICA6cmFpc2VzIFZhbHVlRXJyb3I6IElmIGFuIGluc3RhbmNlIG9mIGBhdHRycy5GYWN0b3J5YCBpcyBwYXNzZWQgd2l0aFxuICAgICAgIGBgdGFrZXNfc2VsZj1UcnVlYGAuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOC4yLjBcbiAgICAiIiJcbiAgICBpZiBkZWZhdWx0IGlzIE5PVEhJTkcgYW5kIGZhY3RvcnkgaXMgTm9uZTpcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJNdXN0IHBhc3MgZWl0aGVyIGBkZWZhdWx0YCBvciBgZmFjdG9yeWAuIilcblxuICAgIGlmIGRlZmF1bHQgaXMgbm90IE5PVEhJTkcgYW5kIGZhY3RvcnkgaXMgbm90IE5vbmU6XG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICJNdXN0IHBhc3MgZWl0aGVyIGBkZWZhdWx0YCBvciBgZmFjdG9yeWAgYnV0IG5vdCBib3RoLiJcbiAgICAgICAgKVxuXG4gICAgaWYgZmFjdG9yeSBpcyBub3QgTm9uZTpcbiAgICAgICAgZGVmYXVsdCA9IEZhY3RvcnkoZmFjdG9yeSlcblxuICAgIGlmIGlzaW5zdGFuY2UoZGVmYXVsdCwgRmFjdG9yeSk6XG4gICAgICAgIGlmIGRlZmF1bHQudGFrZXNfc2VsZjpcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXG4gICAgICAgICAgICAgICAgImB0YWtlc19zZWxmYCBpcyBub3Qgc3VwcG9ydGVkIGJ5IGRlZmF1bHRfaWZfbm9uZS4iXG4gICAgICAgICAgICApXG5cbiAgICAgICAgZGVmIGRlZmF1bHRfaWZfbm9uZV9jb252ZXJ0ZXIodmFsKTpcbiAgICAgICAgICAgIGlmIHZhbCBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsXG5cbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0LmZhY3RvcnkoKVxuXG4gICAgZWxzZTpcblxuICAgICAgICBkZWYgZGVmYXVsdF9pZl9ub25lX2NvbnZlcnRlcih2YWwpOlxuICAgICAgICAgICAgaWYgdmFsIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgIHJldHVybiB2YWxcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRcblxuICAgIHJldHVybiBkZWZhdWx0X2lmX25vbmVfY29udmVydGVyXG5cblxuZGVmIHRvX2Jvb2wodmFsKTpcbiAgICAiIiJcbiAgICBDb252ZXJ0ICJib29sZWFuIiBzdHJpbmdzIChlLmcuLCBmcm9tIGVudi4gdmFycy4pIHRvIHJlYWwgYm9vbGVhbnMuXG5cbiAgICBWYWx1ZXMgbWFwcGluZyB0byA6Y29kZTpgVHJ1ZWA6XG5cbiAgICAtIDpjb2RlOmBUcnVlYFxuICAgIC0gOmNvZGU6YCJ0cnVlImAgLyA6Y29kZTpgInQiYFxuICAgIC0gOmNvZGU6YCJ5ZXMiYCAvIDpjb2RlOmAieSJgXG4gICAgLSA6Y29kZTpgIm9uImBcbiAgICAtIDpjb2RlOmAiMSJgXG4gICAgLSA6Y29kZTpgMWBcblxuICAgIFZhbHVlcyBtYXBwaW5nIHRvIDpjb2RlOmBGYWxzZWA6XG5cbiAgICAtIDpjb2RlOmBGYWxzZWBcbiAgICAtIDpjb2RlOmAiZmFsc2UiYCAvIDpjb2RlOmAiZiJgXG4gICAgLSA6Y29kZTpgIm5vImAgLyA6Y29kZTpgIm4iYFxuICAgIC0gOmNvZGU6YCJvZmYiYFxuICAgIC0gOmNvZGU6YCIwImBcbiAgICAtIDpjb2RlOmAwYFxuXG4gICAgOnJhaXNlcyBWYWx1ZUVycm9yOiBmb3IgYW55IG90aGVyIHZhbHVlLlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjEuMy4wXG4gICAgIiIiXG4gICAgaWYgaXNpbnN0YW5jZSh2YWwsIHN0cik6XG4gICAgICAgIHZhbCA9IHZhbC5sb3dlcigpXG4gICAgdHJ1dGh5ID0ge1RydWUsICJ0cnVlIiwgInQiLCAieWVzIiwgInkiLCAib24iLCAiMSIsIDF9XG4gICAgZmFsc3kgPSB7RmFsc2UsICJmYWxzZSIsICJmIiwgIm5vIiwgIm4iLCAib2ZmIiwgIjAiLCAwfVxuICAgIHRyeTpcbiAgICAgICAgaWYgdmFsIGluIHRydXRoeTpcbiAgICAgICAgICAgIHJldHVybiBUcnVlXG4gICAgICAgIGlmIHZhbCBpbiBmYWxzeTpcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxuICAgIGV4Y2VwdCBUeXBlRXJyb3I6XG4gICAgICAgICMgUmFpc2VkIHdoZW4gInZhbCIgaXMgbm90IGhhc2hhYmxlIChlLmcuLCBsaXN0cylcbiAgICAgICAgcGFzc1xuICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNhbm5vdCBjb252ZXJ0IHZhbHVlIHRvIGJvb2w6IHt9Ii5mb3JtYXQodmFsKSlcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhdHRyL19jb21wYXQucHknLCBiJyMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuXG5mcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydCwgZGl2aXNpb24sIHByaW50X2Z1bmN0aW9uXG5cbmltcG9ydCBwbGF0Zm9ybVxuaW1wb3J0IHN5c1xuaW1wb3J0IHRocmVhZGluZ1xuaW1wb3J0IHR5cGVzXG5pbXBvcnQgd2FybmluZ3NcblxuXG5QWTIgPSBzeXMudmVyc2lvbl9pbmZvWzBdID09IDJcblBZUFkgPSBwbGF0Zm9ybS5weXRob25faW1wbGVtZW50YXRpb24oKSA9PSAiUHlQeSJcblBZMzYgPSBzeXMudmVyc2lvbl9pbmZvWzoyXSA+PSAoMywgNilcbkhBU19GX1NUUklOR1MgPSBQWTM2XG5QWTMxMCA9IHN5cy52ZXJzaW9uX2luZm9bOjJdID49ICgzLCAxMClcblxuXG5pZiBQWVBZIG9yIFBZMzY6XG4gICAgb3JkZXJlZF9kaWN0ID0gZGljdFxuZWxzZTpcbiAgICBmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBPcmRlcmVkRGljdFxuXG4gICAgb3JkZXJlZF9kaWN0ID0gT3JkZXJlZERpY3RcblxuXG5pZiBQWTI6XG4gICAgZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgTWFwcGluZywgU2VxdWVuY2VcblxuICAgIGZyb20gVXNlckRpY3QgaW1wb3J0IEl0ZXJhYmxlVXNlckRpY3RcblxuICAgICMgV2UgXCdidW5kbGVcJyBpc2NsYXNzIGluc3RlYWQgb2YgdXNpbmcgaW5zcGVjdCBhcyBpbXBvcnRpbmcgaW5zcGVjdCBpc1xuICAgICMgZmFpcmx5IGV4cGVuc2l2ZSAob3JkZXIgb2YgMTAtMTUgbXMgZm9yIGEgbW9kZXJuIG1hY2hpbmUgaW4gMjAxNilcbiAgICBkZWYgaXNjbGFzcyhrbGFzcyk6XG4gICAgICAgIHJldHVybiBpc2luc3RhbmNlKGtsYXNzLCAodHlwZSwgdHlwZXMuQ2xhc3NUeXBlKSlcblxuICAgIGRlZiBuZXdfY2xhc3MobmFtZSwgYmFzZXMsIGt3ZHMsIGV4ZWNfYm9keSk6XG4gICAgICAgICIiIlxuICAgICAgICBBIG1pbmltYWwgc3R1YiBvZiB0eXBlcy5uZXdfY2xhc3MgdGhhdCB3ZSBuZWVkIGZvciBtYWtlX2NsYXNzLlxuICAgICAgICAiIiJcbiAgICAgICAgbnMgPSB7fVxuICAgICAgICBleGVjX2JvZHkobnMpXG5cbiAgICAgICAgcmV0dXJuIHR5cGUobmFtZSwgYmFzZXMsIG5zKVxuXG4gICAgIyBUWVBFIGlzIHVzZWQgaW4gZXhjZXB0aW9ucywgcmVwcihpbnQpIGlzIGRpZmZlcmVudCBvbiBQeXRob24gMiBhbmQgMy5cbiAgICBUWVBFID0gInR5cGUiXG5cbiAgICBkZWYgaXRlcml0ZW1zKGQpOlxuICAgICAgICByZXR1cm4gZC5pdGVyaXRlbXMoKVxuXG4gICAgIyBQeXRob24gMiBpcyBiZXJlZnQgb2YgYSByZWFkLW9ubHkgZGljdCBwcm94eSwgc28gd2UgbWFrZSBvbmUhXG4gICAgY2xhc3MgUmVhZE9ubHlEaWN0KEl0ZXJhYmxlVXNlckRpY3QpOlxuICAgICAgICAiIiJcbiAgICAgICAgQmVzdC1lZmZvcnQgcmVhZC1vbmx5IGRpY3Qgd3JhcHBlci5cbiAgICAgICAgIiIiXG5cbiAgICAgICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGtleSwgdmFsKTpcbiAgICAgICAgICAgICMgV2UgZ2VudGx5IHByZXRlbmQgd2VcJ3JlIGEgUHl0aG9uIDMgbWFwcGluZ3Byb3h5LlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJ21hcHBpbmdwcm94eVwnIG9iamVjdCBkb2VzIG5vdCBzdXBwb3J0IGl0ZW0gYXNzaWdubWVudCJcbiAgICAgICAgICAgIClcblxuICAgICAgICBkZWYgdXBkYXRlKHNlbGYsIF8pOlxuICAgICAgICAgICAgIyBXZSBnZW50bHkgcHJldGVuZCB3ZVwncmUgYSBQeXRob24gMyBtYXBwaW5ncHJveHkuXG4gICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihcbiAgICAgICAgICAgICAgICAiXCdtYXBwaW5ncHJveHlcJyBvYmplY3QgaGFzIG5vIGF0dHJpYnV0ZSBcJ3VwZGF0ZVwnIlxuICAgICAgICAgICAgKVxuXG4gICAgICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBfKTpcbiAgICAgICAgICAgICMgV2UgZ2VudGx5IHByZXRlbmQgd2VcJ3JlIGEgUHl0aG9uIDMgbWFwcGluZ3Byb3h5LlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJ21hcHBpbmdwcm94eVwnIG9iamVjdCBkb2VzIG5vdCBzdXBwb3J0IGl0ZW0gZGVsZXRpb24iXG4gICAgICAgICAgICApXG5cbiAgICAgICAgZGVmIGNsZWFyKHNlbGYpOlxuICAgICAgICAgICAgIyBXZSBnZW50bHkgcHJldGVuZCB3ZVwncmUgYSBQeXRob24gMyBtYXBwaW5ncHJveHkuXG4gICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihcbiAgICAgICAgICAgICAgICAiXCdtYXBwaW5ncHJveHlcJyBvYmplY3QgaGFzIG5vIGF0dHJpYnV0ZSBcJ2NsZWFyXCciXG4gICAgICAgICAgICApXG5cbiAgICAgICAgZGVmIHBvcChzZWxmLCBrZXksIGRlZmF1bHQ9Tm9uZSk6XG4gICAgICAgICAgICAjIFdlIGdlbnRseSBwcmV0ZW5kIHdlXCdyZSBhIFB5dGhvbiAzIG1hcHBpbmdwcm94eS5cbiAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJ21hcHBpbmdwcm94eVwnIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlIFwncG9wXCciXG4gICAgICAgICAgICApXG5cbiAgICAgICAgZGVmIHBvcGl0ZW0oc2VsZik6XG4gICAgICAgICAgICAjIFdlIGdlbnRseSBwcmV0ZW5kIHdlXCdyZSBhIFB5dGhvbiAzIG1hcHBpbmdwcm94eS5cbiAgICAgICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJ21hcHBpbmdwcm94eVwnIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlIFwncG9waXRlbVwnIlxuICAgICAgICAgICAgKVxuXG4gICAgICAgIGRlZiBzZXRkZWZhdWx0KHNlbGYsIGtleSwgZGVmYXVsdD1Ob25lKTpcbiAgICAgICAgICAgICMgV2UgZ2VudGx5IHByZXRlbmQgd2VcJ3JlIGEgUHl0aG9uIDMgbWFwcGluZ3Byb3h5LlxuICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlwnbWFwcGluZ3Byb3h5XCcgb2JqZWN0IGhhcyBubyBhdHRyaWJ1dGUgXCdzZXRkZWZhdWx0XCciXG4gICAgICAgICAgICApXG5cbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgIyBPdmVycmlkZSB0byBiZSBpZGVudGljYWwgdG8gdGhlIFB5dGhvbiAzIHZlcnNpb24uXG4gICAgICAgICAgICByZXR1cm4gIm1hcHBpbmdwcm94eSgiICsgcmVwcihzZWxmLmRhdGEpICsgIikiXG5cbiAgICBkZWYgbWV0YWRhdGFfcHJveHkoZCk6XG4gICAgICAgIHJlcyA9IFJlYWRPbmx5RGljdCgpXG4gICAgICAgIHJlcy5kYXRhLnVwZGF0ZShkKSAgIyBXZSBibG9ja2VkIHVwZGF0ZSwgc28gd2UgaGF2ZSB0byBkbyBpdCBsaWtlIHRoaXMuXG4gICAgICAgIHJldHVybiByZXNcblxuICAgIGRlZiBqdXN0X3dhcm4oKmFyZ3MsICoqa3cpOiAgIyBwcmFnbWE6IG5vIGNvdmVyXG4gICAgICAgICIiIlxuICAgICAgICBXZSBvbmx5IHdhcm4gb24gUHl0aG9uIDMgYmVjYXVzZSB3ZSBhcmUgbm90IGF3YXJlIG9mIGFueSBjb25jcmV0ZVxuICAgICAgICBjb25zZXF1ZW5jZXMgb2Ygbm90IHNldHRpbmcgdGhlIGNlbGwgb24gUHl0aG9uIDIuXG4gICAgICAgICIiIlxuXG5lbHNlOiAgIyBQeXRob24gMyBhbmQgbGF0ZXIuXG4gICAgZnJvbSBjb2xsZWN0aW9ucy5hYmMgaW1wb3J0IE1hcHBpbmcsIFNlcXVlbmNlICAjIG5vcWFcblxuICAgIGRlZiBqdXN0X3dhcm4oKmFyZ3MsICoqa3cpOlxuICAgICAgICAiIiJcbiAgICAgICAgV2Ugb25seSB3YXJuIG9uIFB5dGhvbiAzIGJlY2F1c2Ugd2UgYXJlIG5vdCBhd2FyZSBvZiBhbnkgY29uY3JldGVcbiAgICAgICAgY29uc2VxdWVuY2VzIG9mIG5vdCBzZXR0aW5nIHRoZSBjZWxsIG9uIFB5dGhvbiAyLlxuICAgICAgICAiIiJcbiAgICAgICAgd2FybmluZ3Mud2FybihcbiAgICAgICAgICAgICJSdW5uaW5nIGludGVycHJldGVyIGRvZXNuXCd0IHN1ZmZpY2llbnRseSBzdXBwb3J0IGNvZGUgb2JqZWN0ICJcbiAgICAgICAgICAgICJpbnRyb3NwZWN0aW9uLiAgU29tZSBmZWF0dXJlcyBsaWtlIGJhcmUgc3VwZXIoKSBvciBhY2Nlc3NpbmcgIlxuICAgICAgICAgICAgIl9fY2xhc3NfXyB3aWxsIG5vdCB3b3JrIHdpdGggc2xvdHRlZCBjbGFzc2VzLiIsXG4gICAgICAgICAgICBSdW50aW1lV2FybmluZyxcbiAgICAgICAgICAgIHN0YWNrbGV2ZWw9MixcbiAgICAgICAgKVxuXG4gICAgZGVmIGlzY2xhc3Moa2xhc3MpOlxuICAgICAgICByZXR1cm4gaXNpbnN0YW5jZShrbGFzcywgdHlwZSlcblxuICAgIFRZUEUgPSAiY2xhc3MiXG5cbiAgICBkZWYgaXRlcml0ZW1zKGQpOlxuICAgICAgICByZXR1cm4gZC5pdGVtcygpXG5cbiAgICBuZXdfY2xhc3MgPSB0eXBlcy5uZXdfY2xhc3NcblxuICAgIGRlZiBtZXRhZGF0YV9wcm94eShkKTpcbiAgICAgICAgcmV0dXJuIHR5cGVzLk1hcHBpbmdQcm94eVR5cGUoZGljdChkKSlcblxuXG5kZWYgbWFrZV9zZXRfY2xvc3VyZV9jZWxsKCk6XG4gICAgIiIiUmV0dXJuIGEgZnVuY3Rpb24gb2YgdHdvIGFyZ3VtZW50cyAoY2VsbCwgdmFsdWUpIHdoaWNoIHNldHNcbiAgICB0aGUgdmFsdWUgc3RvcmVkIGluIHRoZSBjbG9zdXJlIGNlbGwgYGNlbGxgIHRvIGB2YWx1ZWAuXG4gICAgIiIiXG4gICAgIyBweXB5IG1ha2VzIHRoaXMgZWFzeS4gKEl0IGFsc28gc3VwcG9ydHMgdGhlIGxvZ2ljIGJlbG93LCBidXRcbiAgICAjIHdoeSBub3QgZG8gdGhlIGVhc3kvZmFzdCB0aGluZz8pXG4gICAgaWYgUFlQWTpcblxuICAgICAgICBkZWYgc2V0X2Nsb3N1cmVfY2VsbChjZWxsLCB2YWx1ZSk6XG4gICAgICAgICAgICBjZWxsLl9fc2V0c3RhdGVfXygodmFsdWUsKSlcblxuICAgICAgICByZXR1cm4gc2V0X2Nsb3N1cmVfY2VsbFxuXG4gICAgIyBPdGhlcndpc2UgZ290dGEgZG8gaXQgdGhlIGhhcmQgd2F5LlxuXG4gICAgIyBDcmVhdGUgYSBmdW5jdGlvbiB0aGF0IHdpbGwgc2V0IGl0cyBmaXJzdCBjZWxsdmFyIHRvIGB2YWx1ZWAuXG4gICAgZGVmIHNldF9maXJzdF9jZWxsdmFyX3RvKHZhbHVlKTpcbiAgICAgICAgeCA9IHZhbHVlXG4gICAgICAgIHJldHVyblxuXG4gICAgICAgICMgVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGVsaW1pbmF0ZWQgYXMgZGVhZCBjb2RlLCBidXRcbiAgICAgICAgIyBub3QgYmVmb3JlIGl0cyByZWZlcmVuY2UgdG8gYHhgIGZvcmNlcyBgeGAgdG8gYmVcbiAgICAgICAgIyByZXByZXNlbnRlZCBhcyBhIGNsb3N1cmUgY2VsbCByYXRoZXIgdGhhbiBhIGxvY2FsLlxuICAgICAgICBkZWYgZm9yY2VfeF90b19iZV9hX2NlbGwoKTogICMgcHJhZ21hOiBubyBjb3ZlclxuICAgICAgICAgICAgcmV0dXJuIHhcblxuICAgIHRyeTpcbiAgICAgICAgIyBFeHRyYWN0IHRoZSBjb2RlIG9iamVjdCBhbmQgbWFrZSBzdXJlIG91ciBhc3N1bXB0aW9ucyBhYm91dFxuICAgICAgICAjIHRoZSBjbG9zdXJlIGJlaGF2aW9yIGFyZSBjb3JyZWN0LlxuICAgICAgICBpZiBQWTI6XG4gICAgICAgICAgICBjbyA9IHNldF9maXJzdF9jZWxsdmFyX3RvLmZ1bmNfY29kZVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgY28gPSBzZXRfZmlyc3RfY2VsbHZhcl90by5fX2NvZGVfX1xuICAgICAgICBpZiBjby5jb19jZWxsdmFycyAhPSAoIngiLCkgb3IgY28uY29fZnJlZXZhcnMgIT0gKCk6XG4gICAgICAgICAgICByYWlzZSBBc3NlcnRpb25FcnJvciAgIyBwcmFnbWE6IG5vIGNvdmVyXG5cbiAgICAgICAgIyBDb252ZXJ0IHRoaXMgY29kZSBvYmplY3QgdG8gYSBjb2RlIG9iamVjdCB0aGF0IHNldHMgdGhlXG4gICAgICAgICMgZnVuY3Rpb25cJ3MgZmlyc3QgX2ZyZWV2YXJfIChub3QgY2VsbHZhcikgdG8gdGhlIGFyZ3VtZW50LlxuICAgICAgICBpZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA4KTpcbiAgICAgICAgICAgICMgQ1B5dGhvbiAzLjgrIGhhcyBhbiBpbmNvbXBhdGlibGUgQ29kZVR5cGUgc2lnbmF0dXJlXG4gICAgICAgICAgICAjIChhZGRlZCBhIHBvc29ubHlhcmdjb3VudCBhcmd1bWVudCkgYnV0IGFsc28gYWRkZWRcbiAgICAgICAgICAgICMgQ29kZVR5cGUucmVwbGFjZSgpIHRvIGRvIHRoaXMgd2l0aG91dCBjb3VudGluZyBwYXJhbWV0ZXJzLlxuICAgICAgICAgICAgc2V0X2ZpcnN0X2ZyZWV2YXJfY29kZSA9IGNvLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgY29fY2VsbHZhcnM9Y28uY29fZnJlZXZhcnMsIGNvX2ZyZWV2YXJzPWNvLmNvX2NlbGx2YXJzXG4gICAgICAgICAgICApXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBhcmdzID0gW2NvLmNvX2FyZ2NvdW50XVxuICAgICAgICAgICAgaWYgbm90IFBZMjpcbiAgICAgICAgICAgICAgICBhcmdzLmFwcGVuZChjby5jb19rd29ubHlhcmdjb3VudClcbiAgICAgICAgICAgIGFyZ3MuZXh0ZW5kKFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgY28uY29fbmxvY2FscyxcbiAgICAgICAgICAgICAgICAgICAgY28uY29fc3RhY2tzaXplLFxuICAgICAgICAgICAgICAgICAgICBjby5jb19mbGFncyxcbiAgICAgICAgICAgICAgICAgICAgY28uY29fY29kZSxcbiAgICAgICAgICAgICAgICAgICAgY28uY29fY29uc3RzLFxuICAgICAgICAgICAgICAgICAgICBjby5jb19uYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgY28uY29fdmFybmFtZXMsXG4gICAgICAgICAgICAgICAgICAgIGNvLmNvX2ZpbGVuYW1lLFxuICAgICAgICAgICAgICAgICAgICBjby5jb19uYW1lLFxuICAgICAgICAgICAgICAgICAgICBjby5jb19maXJzdGxpbmVubyxcbiAgICAgICAgICAgICAgICAgICAgY28uY29fbG5vdGFiLFxuICAgICAgICAgICAgICAgICAgICAjIFRoZXNlIHR3byBhcmd1bWVudHMgYXJlIHJldmVyc2VkOlxuICAgICAgICAgICAgICAgICAgICBjby5jb19jZWxsdmFycyxcbiAgICAgICAgICAgICAgICAgICAgY28uY29fZnJlZXZhcnMsXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgc2V0X2ZpcnN0X2ZyZWV2YXJfY29kZSA9IHR5cGVzLkNvZGVUeXBlKCphcmdzKVxuXG4gICAgICAgIGRlZiBzZXRfY2xvc3VyZV9jZWxsKGNlbGwsIHZhbHVlKTpcbiAgICAgICAgICAgICMgQ3JlYXRlIGEgZnVuY3Rpb24gdXNpbmcgdGhlIHNldF9maXJzdF9mcmVldmFyX2NvZGUsXG4gICAgICAgICAgICAjIHdob3NlIGZpcnN0IGNsb3N1cmUgY2VsbCBpcyBgY2VsbGAuIENhbGxpbmcgaXQgd2lsbFxuICAgICAgICAgICAgIyBjaGFuZ2UgdGhlIHZhbHVlIG9mIHRoYXQgY2VsbC5cbiAgICAgICAgICAgIHNldHRlciA9IHR5cGVzLkZ1bmN0aW9uVHlwZShcbiAgICAgICAgICAgICAgICBzZXRfZmlyc3RfZnJlZXZhcl9jb2RlLCB7fSwgInNldHRlciIsICgpLCAoY2VsbCwpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAjIEFuZCBjYWxsIGl0IHRvIHNldCB0aGUgY2VsbC5cbiAgICAgICAgICAgIHNldHRlcih2YWx1ZSlcblxuICAgICAgICAjIE1ha2Ugc3VyZSBpdCB3b3JrcyBvbiB0aGlzIGludGVycHJldGVyOlxuICAgICAgICBkZWYgbWFrZV9mdW5jX3dpdGhfY2VsbCgpOlxuICAgICAgICAgICAgeCA9IE5vbmVcblxuICAgICAgICAgICAgZGVmIGZ1bmMoKTpcbiAgICAgICAgICAgICAgICByZXR1cm4geCAgIyBwcmFnbWE6IG5vIGNvdmVyXG5cbiAgICAgICAgICAgIHJldHVybiBmdW5jXG5cbiAgICAgICAgaWYgUFkyOlxuICAgICAgICAgICAgY2VsbCA9IG1ha2VfZnVuY193aXRoX2NlbGwoKS5mdW5jX2Nsb3N1cmVbMF1cbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGNlbGwgPSBtYWtlX2Z1bmNfd2l0aF9jZWxsKCkuX19jbG9zdXJlX19bMF1cbiAgICAgICAgc2V0X2Nsb3N1cmVfY2VsbChjZWxsLCAxMDApXG4gICAgICAgIGlmIGNlbGwuY2VsbF9jb250ZW50cyAhPSAxMDA6XG4gICAgICAgICAgICByYWlzZSBBc3NlcnRpb25FcnJvciAgIyBwcmFnbWE6IG5vIGNvdmVyXG5cbiAgICBleGNlcHQgRXhjZXB0aW9uOlxuICAgICAgICByZXR1cm4ganVzdF93YXJuXG4gICAgZWxzZTpcbiAgICAgICAgcmV0dXJuIHNldF9jbG9zdXJlX2NlbGxcblxuXG5zZXRfY2xvc3VyZV9jZWxsID0gbWFrZV9zZXRfY2xvc3VyZV9jZWxsKClcblxuIyBUaHJlYWQtbG9jYWwgZ2xvYmFsIHRvIHRyYWNrIGF0dHJzIGluc3RhbmNlcyB3aGljaCBhcmUgYWxyZWFkeSBiZWluZyByZXByXCdkLlxuIyBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIHRoZXJlIGlzIG5vIG90aGVyICh0aHJlYWQtc2FmZSkgd2F5IHRvIHBhc3MgaW5mb1xuIyBhYm91dCB0aGUgaW5zdGFuY2VzIHRoYXQgYXJlIGFscmVhZHkgYmVpbmcgcmVwclwnZCB0aHJvdWdoIHRoZSBjYWxsIHN0YWNrXG4jIGluIG9yZGVyIHRvIGVuc3VyZSB3ZSBkb25cJ3QgcGVyZm9ybSBpbmZpbml0ZSByZWN1cnNpb24uXG4jXG4jIEZvciBpbnN0YW5jZSwgaWYgYW4gaW5zdGFuY2UgY29udGFpbnMgYSBkaWN0IHdoaWNoIGNvbnRhaW5zIHRoYXQgaW5zdGFuY2UsXG4jIHdlIG5lZWQgdG8ga25vdyB0aGF0IHdlXCdyZSBhbHJlYWR5IHJlcHJcJ2luZyB0aGUgb3V0c2lkZSBpbnN0YW5jZSBmcm9tIHdpdGhpblxuIyB0aGUgZGljdFwncyByZXByKCkgY2FsbC5cbiNcbiMgVGhpcyBsaXZlcyBoZXJlIHJhdGhlciB0aGFuIGluIF9tYWtlLnB5IHNvIHRoYXQgdGhlIGZ1bmN0aW9ucyBpbiBfbWFrZS5weVxuIyBkb25cJ3QgaGF2ZSBhIGRpcmVjdCByZWZlcmVuY2UgdG8gdGhlIHRocmVhZC1sb2NhbCBpbiB0aGVpciBnbG9iYWxzIGRpY3QuXG4jIElmIHRoZXkgaGF2ZSBzdWNoIGEgcmVmZXJlbmNlLCBpdCBicmVha3MgY2xvdWRwaWNrbGUuXG5yZXByX2NvbnRleHQgPSB0aHJlYWRpbmcubG9jYWwoKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2F0dHIvX21ha2UucHknLCBiJyMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuXG5mcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydCwgZGl2aXNpb24sIHByaW50X2Z1bmN0aW9uXG5cbmltcG9ydCBjb3B5XG5pbXBvcnQgaW5zcGVjdFxuaW1wb3J0IGxpbmVjYWNoZVxuaW1wb3J0IHN5c1xuaW1wb3J0IHdhcm5pbmdzXG5cbmZyb20gb3BlcmF0b3IgaW1wb3J0IGl0ZW1nZXR0ZXJcblxuIyBXZSBuZWVkIHRvIGltcG9ydCBfY29tcGF0IGl0c2VsZiBpbiBhZGRpdGlvbiB0byB0aGUgX2NvbXBhdCBtZW1iZXJzIHRvIGF2b2lkXG4jIGhhdmluZyB0aGUgdGhyZWFkLWxvY2FsIGluIHRoZSBnbG9iYWxzIGhlcmUuXG5mcm9tIC4gaW1wb3J0IF9jb21wYXQsIF9jb25maWcsIHNldHRlcnNcbmZyb20gLl9jb21wYXQgaW1wb3J0IChcbiAgICBIQVNfRl9TVFJJTkdTLFxuICAgIFBZMixcbiAgICBQWTMxMCxcbiAgICBQWVBZLFxuICAgIGlzY2xhc3MsXG4gICAgaXRlcml0ZW1zLFxuICAgIG1ldGFkYXRhX3Byb3h5LFxuICAgIG5ld19jbGFzcyxcbiAgICBvcmRlcmVkX2RpY3QsXG4gICAgc2V0X2Nsb3N1cmVfY2VsbCxcbilcbmZyb20gLmV4Y2VwdGlvbnMgaW1wb3J0IChcbiAgICBEZWZhdWx0QWxyZWFkeVNldEVycm9yLFxuICAgIEZyb3plbkluc3RhbmNlRXJyb3IsXG4gICAgTm90QW5BdHRyc0NsYXNzRXJyb3IsXG4gICAgUHl0aG9uVG9vT2xkRXJyb3IsXG4gICAgVW5hbm5vdGF0ZWRBdHRyaWJ1dGVFcnJvcixcbilcblxuXG5pZiBub3QgUFkyOlxuICAgIGltcG9ydCB0eXBpbmdcblxuXG4jIFRoaXMgaXMgdXNlZCBhdCBsZWFzdCB0d2ljZSwgc28gY2FjaGUgaXQgaGVyZS5cbl9vYmpfc2V0YXR0ciA9IG9iamVjdC5fX3NldGF0dHJfX1xuX2luaXRfY29udmVydGVyX3BhdCA9ICJfX2F0dHJfY29udmVydGVyXyVzIlxuX2luaXRfZmFjdG9yeV9wYXQgPSAiX19hdHRyX2ZhY3Rvcnlfe30iXG5fdHVwbGVfcHJvcGVydHlfcGF0ID0gKFxuICAgICIgICAge2F0dHJfbmFtZX0gPSBfYXR0cnNfcHJvcGVydHkoX2F0dHJzX2l0ZW1nZXR0ZXIoe2luZGV4fSkpIlxuKVxuX2NsYXNzdmFyX3ByZWZpeGVzID0gKFxuICAgICJ0eXBpbmcuQ2xhc3NWYXIiLFxuICAgICJ0LkNsYXNzVmFyIixcbiAgICAiQ2xhc3NWYXIiLFxuICAgICJ0eXBpbmdfZXh0ZW5zaW9ucy5DbGFzc1ZhciIsXG4pXG4jIHdlIGRvblwndCB1c2UgYSBkb3VibGUtdW5kZXJzY29yZSBwcmVmaXggYmVjYXVzZSB0aGF0IHRyaWdnZXJzXG4jIG5hbWUgbWFuZ2xpbmcgd2hlbiB0cnlpbmcgdG8gY3JlYXRlIGEgc2xvdCBmb3IgdGhlIGZpZWxkXG4jICh3aGVuIHNsb3RzPVRydWUpXG5faGFzaF9jYWNoZV9maWVsZCA9ICJfYXR0cnNfY2FjaGVkX2hhc2giXG5cbl9lbXB0eV9tZXRhZGF0YV9zaW5nbGV0b24gPSBtZXRhZGF0YV9wcm94eSh7fSlcblxuIyBVbmlxdWUgb2JqZWN0IGZvciB1bmVxdWl2b2NhbCBnZXRhdHRyKCkgZGVmYXVsdHMuXG5fc2VudGluZWwgPSBvYmplY3QoKVxuXG5fbmdfZGVmYXVsdF9vbl9zZXRhdHRyID0gc2V0dGVycy5waXBlKHNldHRlcnMuY29udmVydCwgc2V0dGVycy52YWxpZGF0ZSlcblxuXG5jbGFzcyBfTm90aGluZyhvYmplY3QpOlxuICAgICIiIlxuICAgIFNlbnRpbmVsIGNsYXNzIHRvIGluZGljYXRlIHRoZSBsYWNrIG9mIGEgdmFsdWUgd2hlbiBgYE5vbmVgYCBpcyBhbWJpZ3VvdXMuXG5cbiAgICBgYF9Ob3RoaW5nYGAgaXMgYSBzaW5nbGV0b24uIFRoZXJlIGlzIG9ubHkgZXZlciBvbmUgb2YgaXQuXG5cbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDIxLjEuMCBgYGJvb2woTk9USElORylgYCBpcyBub3cgRmFsc2UuXG4gICAgIiIiXG5cbiAgICBfc2luZ2xldG9uID0gTm9uZVxuXG4gICAgZGVmIF9fbmV3X18oY2xzKTpcbiAgICAgICAgaWYgX05vdGhpbmcuX3NpbmdsZXRvbiBpcyBOb25lOlxuICAgICAgICAgICAgX05vdGhpbmcuX3NpbmdsZXRvbiA9IHN1cGVyKF9Ob3RoaW5nLCBjbHMpLl9fbmV3X18oY2xzKVxuICAgICAgICByZXR1cm4gX05vdGhpbmcuX3NpbmdsZXRvblxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIk5PVEhJTkciXG5cbiAgICBkZWYgX19ib29sX18oc2VsZik6XG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgZGVmIF9fbGVuX18oc2VsZik6XG4gICAgICAgIHJldHVybiAwICAjIF9fYm9vbF9fIGZvciBQeXRob24gMlxuXG5cbk5PVEhJTkcgPSBfTm90aGluZygpXG4iIiJcblNlbnRpbmVsIHRvIGluZGljYXRlIHRoZSBsYWNrIG9mIGEgdmFsdWUgd2hlbiBgYE5vbmVgYCBpcyBhbWJpZ3VvdXMuXG4iIiJcblxuXG5jbGFzcyBfQ2FjaGVIYXNoV3JhcHBlcihpbnQpOlxuICAgICIiIlxuICAgIEFuIGludGVnZXIgc3ViY2xhc3MgdGhhdCBwaWNrbGVzIC8gY29waWVzIGFzIE5vbmVcblxuICAgIFRoaXMgaXMgdXNlZCBmb3Igbm9uLXNsb3RzIGNsYXNzZXMgd2l0aCBgYGNhY2hlX2hhc2g9VHJ1ZWBgLCB0byBhdm9pZFxuICAgIHNlcmlhbGl6aW5nIGEgcG90ZW50aWFsbHkgKGV2ZW4gbGlrZWx5KSBpbnZhbGlkIGhhc2ggdmFsdWUuIFNpbmNlIGBgTm9uZWBgXG4gICAgaXMgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIHVuY2FsY3VsYXRlZCBoYXNoZXMsIHdoZW5ldmVyIHRoaXMgaXMgY29waWVkLFxuICAgIHRoZSBjb3B5XCdzIHZhbHVlIGZvciB0aGUgaGFzaCBzaG91bGQgYXV0b21hdGljYWxseSByZXNldC5cblxuICAgIFNlZSBHSCAjNjEzIGZvciBtb3JlIGRldGFpbHMuXG4gICAgIiIiXG5cbiAgICBpZiBQWTI6XG4gICAgICAgICMgRm9yIHNvbWUgcmVhc29uIGB0eXBlKE5vbmUpYCBpc25cJ3QgY2FsbGFibGUgaW4gUHl0aG9uIDIsIGJ1dCB3ZSBkb25cJ3RcbiAgICAgICAgIyBhY3R1YWxseSBuZWVkIGEgY29uc3RydWN0b3IgZm9yIE5vbmUgb2JqZWN0cywgd2UganVzdCBuZWVkIGFueVxuICAgICAgICAjIGF2YWlsYWJsZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgTm9uZS5cbiAgICAgICAgZGVmIF9fcmVkdWNlX18oc2VsZiwgX25vbmVfY29uc3RydWN0b3I9Z2V0YXR0ciwgX2FyZ3M9KDAsICIiLCBOb25lKSk6XG4gICAgICAgICAgICByZXR1cm4gX25vbmVfY29uc3RydWN0b3IsIF9hcmdzXG5cbiAgICBlbHNlOlxuXG4gICAgICAgIGRlZiBfX3JlZHVjZV9fKHNlbGYsIF9ub25lX2NvbnN0cnVjdG9yPXR5cGUoTm9uZSksIF9hcmdzPSgpKTpcbiAgICAgICAgICAgIHJldHVybiBfbm9uZV9jb25zdHJ1Y3RvciwgX2FyZ3NcblxuXG5kZWYgYXR0cmliKFxuICAgIGRlZmF1bHQ9Tk9USElORyxcbiAgICB2YWxpZGF0b3I9Tm9uZSxcbiAgICByZXByPVRydWUsXG4gICAgY21wPU5vbmUsXG4gICAgaGFzaD1Ob25lLFxuICAgIGluaXQ9VHJ1ZSxcbiAgICBtZXRhZGF0YT1Ob25lLFxuICAgIHR5cGU9Tm9uZSxcbiAgICBjb252ZXJ0ZXI9Tm9uZSxcbiAgICBmYWN0b3J5PU5vbmUsXG4gICAga3dfb25seT1GYWxzZSxcbiAgICBlcT1Ob25lLFxuICAgIG9yZGVyPU5vbmUsXG4gICAgb25fc2V0YXR0cj1Ob25lLFxuKTpcbiAgICAiIiJcbiAgICBDcmVhdGUgYSBuZXcgYXR0cmlidXRlIG9uIGEgY2xhc3MuXG5cbiAgICAuLiAgd2FybmluZzo6XG5cbiAgICAgICAgRG9lcyAqbm90KiBkbyBhbnl0aGluZyB1bmxlc3MgdGhlIGNsYXNzIGlzIGFsc28gZGVjb3JhdGVkIHdpdGhcbiAgICAgICAgYGF0dHIuc2AhXG5cbiAgICA6cGFyYW0gZGVmYXVsdDogQSB2YWx1ZSB0aGF0IGlzIHVzZWQgaWYgYW4gYGBhdHRyc2BgLWdlbmVyYXRlZCBgYF9faW5pdF9fYGBcbiAgICAgICAgaXMgdXNlZCBhbmQgbm8gdmFsdWUgaXMgcGFzc2VkIHdoaWxlIGluc3RhbnRpYXRpbmcgb3IgdGhlIGF0dHJpYnV0ZSBpc1xuICAgICAgICBleGNsdWRlZCB1c2luZyBgYGluaXQ9RmFsc2VgYC5cblxuICAgICAgICBJZiB0aGUgdmFsdWUgaXMgYW4gaW5zdGFuY2Ugb2YgYGF0dHJzLkZhY3RvcnlgLCBpdHMgY2FsbGFibGUgd2lsbCBiZVxuICAgICAgICB1c2VkIHRvIGNvbnN0cnVjdCBhIG5ldyB2YWx1ZSAodXNlZnVsIGZvciBtdXRhYmxlIGRhdGEgdHlwZXMgbGlrZSBsaXN0c1xuICAgICAgICBvciBkaWN0cykuXG5cbiAgICAgICAgSWYgYSBkZWZhdWx0IGlzIG5vdCBzZXQgKG9yIHNldCBtYW51YWxseSB0byBgYXR0cnMuTk9USElOR2ApLCBhIHZhbHVlXG4gICAgICAgICptdXN0KiBiZSBzdXBwbGllZCB3aGVuIGluc3RhbnRpYXRpbmc7IG90aGVyd2lzZSBhIGBUeXBlRXJyb3JgXG4gICAgICAgIHdpbGwgYmUgcmFpc2VkLlxuXG4gICAgICAgIFRoZSBkZWZhdWx0IGNhbiBhbHNvIGJlIHNldCB1c2luZyBkZWNvcmF0b3Igbm90YXRpb24gYXMgc2hvd24gYmVsb3cuXG5cbiAgICA6dHlwZSBkZWZhdWx0OiBBbnkgdmFsdWVcblxuICAgIDpwYXJhbSBjYWxsYWJsZSBmYWN0b3J5OiBTeW50YWN0aWMgc3VnYXIgZm9yXG4gICAgICAgIGBgZGVmYXVsdD1hdHRyLkZhY3RvcnkoZmFjdG9yeSlgYC5cblxuICAgIDpwYXJhbSB2YWxpZGF0b3I6IGBjYWxsYWJsZWAgdGhhdCBpcyBjYWxsZWQgYnkgYGBhdHRyc2BgLWdlbmVyYXRlZFxuICAgICAgICBgYF9faW5pdF9fYGAgbWV0aG9kcyBhZnRlciB0aGUgaW5zdGFuY2UgaGFzIGJlZW4gaW5pdGlhbGl6ZWQuICBUaGV5XG4gICAgICAgIHJlY2VpdmUgdGhlIGluaXRpYWxpemVkIGluc3RhbmNlLCB0aGUgOmZ1bmM6YH5hdHRycy5BdHRyaWJ1dGVgLCBhbmQgdGhlXG4gICAgICAgIHBhc3NlZCB2YWx1ZS5cblxuICAgICAgICBUaGUgcmV0dXJuIHZhbHVlIGlzICpub3QqIGluc3BlY3RlZCBzbyB0aGUgdmFsaWRhdG9yIGhhcyB0byB0aHJvdyBhblxuICAgICAgICBleGNlcHRpb24gaXRzZWxmLlxuXG4gICAgICAgIElmIGEgYGxpc3RgIGlzIHBhc3NlZCwgaXRzIGl0ZW1zIGFyZSB0cmVhdGVkIGFzIHZhbGlkYXRvcnMgYW5kIG11c3RcbiAgICAgICAgYWxsIHBhc3MuXG5cbiAgICAgICAgVmFsaWRhdG9ycyBjYW4gYmUgZ2xvYmFsbHkgZGlzYWJsZWQgYW5kIHJlLWVuYWJsZWQgdXNpbmdcbiAgICAgICAgYGdldF9ydW5fdmFsaWRhdG9yc2AuXG5cbiAgICAgICAgVGhlIHZhbGlkYXRvciBjYW4gYWxzbyBiZSBzZXQgdXNpbmcgZGVjb3JhdG9yIG5vdGF0aW9uIGFzIHNob3duIGJlbG93LlxuXG4gICAgOnR5cGUgdmFsaWRhdG9yOiBgY2FsbGFibGVgIG9yIGEgYGxpc3RgIG9mIGBjYWxsYWJsZWBcXFxcIHMuXG5cbiAgICA6cGFyYW0gcmVwcjogSW5jbHVkZSB0aGlzIGF0dHJpYnV0ZSBpbiB0aGUgZ2VuZXJhdGVkIGBgX19yZXByX19gYFxuICAgICAgICBtZXRob2QuIElmIGBgVHJ1ZWBgLCBpbmNsdWRlIHRoZSBhdHRyaWJ1dGU7IGlmIGBgRmFsc2VgYCwgb21pdCBpdC4gQnlcbiAgICAgICAgZGVmYXVsdCwgdGhlIGJ1aWx0LWluIGBgcmVwcigpYGAgZnVuY3Rpb24gaXMgdXNlZC4gVG8gb3ZlcnJpZGUgaG93IHRoZVxuICAgICAgICBhdHRyaWJ1dGUgdmFsdWUgaXMgZm9ybWF0dGVkLCBwYXNzIGEgYGBjYWxsYWJsZWBgIHRoYXQgdGFrZXMgYSBzaW5nbGVcbiAgICAgICAgdmFsdWUgYW5kIHJldHVybnMgYSBzdHJpbmcuIE5vdGUgdGhhdCB0aGUgcmVzdWx0aW5nIHN0cmluZyBpcyB1c2VkXG4gICAgICAgIGFzLWlzLCBpLmUuIGl0IHdpbGwgYmUgdXNlZCBkaXJlY3RseSAqaW5zdGVhZCogb2YgY2FsbGluZyBgYHJlcHIoKWBgXG4gICAgICAgICh0aGUgZGVmYXVsdCkuXG4gICAgOnR5cGUgcmVwcjogYSBgYm9vbGAgb3IgYSBgY2FsbGFibGVgIHRvIHVzZSBhIGN1c3RvbSBmdW5jdGlvbi5cblxuICAgIDpwYXJhbSBlcTogSWYgYGBUcnVlYGAgKGRlZmF1bHQpLCBpbmNsdWRlIHRoaXMgYXR0cmlidXRlIGluIHRoZVxuICAgICAgICBnZW5lcmF0ZWQgYGBfX2VxX19gYCBhbmQgYGBfX25lX19gYCBtZXRob2RzIHRoYXQgY2hlY2sgdHdvIGluc3RhbmNlc1xuICAgICAgICBmb3IgZXF1YWxpdHkuIFRvIG92ZXJyaWRlIGhvdyB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIGNvbXBhcmVkLFxuICAgICAgICBwYXNzIGEgYGBjYWxsYWJsZWBgIHRoYXQgdGFrZXMgYSBzaW5nbGUgdmFsdWUgYW5kIHJldHVybnMgdGhlIHZhbHVlXG4gICAgICAgIHRvIGJlIGNvbXBhcmVkLlxuICAgIDp0eXBlIGVxOiBhIGBib29sYCBvciBhIGBjYWxsYWJsZWAuXG5cbiAgICA6cGFyYW0gb3JkZXI6IElmIGBgVHJ1ZWBgIChkZWZhdWx0KSwgaW5jbHVkZSB0aGlzIGF0dHJpYnV0ZXMgaW4gdGhlXG4gICAgICAgIGdlbmVyYXRlZCBgYF9fbHRfX2BgLCBgYF9fbGVfX2BgLCBgYF9fZ3RfX2BgIGFuZCBgYF9fZ2VfX2BgIG1ldGhvZHMuXG4gICAgICAgIFRvIG92ZXJyaWRlIGhvdyB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIG9yZGVyZWQsXG4gICAgICAgIHBhc3MgYSBgYGNhbGxhYmxlYGAgdGhhdCB0YWtlcyBhIHNpbmdsZSB2YWx1ZSBhbmQgcmV0dXJucyB0aGUgdmFsdWVcbiAgICAgICAgdG8gYmUgb3JkZXJlZC5cbiAgICA6dHlwZSBvcmRlcjogYSBgYm9vbGAgb3IgYSBgY2FsbGFibGVgLlxuXG4gICAgOnBhcmFtIGNtcDogU2V0dGluZyAqY21wKiBpcyBlcXVpdmFsZW50IHRvIHNldHRpbmcgKmVxKiBhbmQgKm9yZGVyKiB0byB0aGVcbiAgICAgICAgc2FtZSB2YWx1ZS4gTXVzdCBub3QgYmUgbWl4ZWQgd2l0aCAqZXEqIG9yICpvcmRlciouXG4gICAgOnR5cGUgY21wOiBhIGBib29sYCBvciBhIGBjYWxsYWJsZWAuXG5cbiAgICA6cGFyYW0gT3B0aW9uYWxbYm9vbF0gaGFzaDogSW5jbHVkZSB0aGlzIGF0dHJpYnV0ZSBpbiB0aGUgZ2VuZXJhdGVkXG4gICAgICAgIGBgX19oYXNoX19gYCBtZXRob2QuICBJZiBgYE5vbmVgYCAoZGVmYXVsdCksIG1pcnJvciAqZXEqXCdzIHZhbHVlLiAgVGhpc1xuICAgICAgICBpcyB0aGUgY29ycmVjdCBiZWhhdmlvciBhY2NvcmRpbmcgdGhlIFB5dGhvbiBzcGVjLiAgU2V0dGluZyB0aGlzIHZhbHVlXG4gICAgICAgIHRvIGFueXRoaW5nIGVsc2UgdGhhbiBgYE5vbmVgYCBpcyAqZGlzY291cmFnZWQqLlxuICAgIDpwYXJhbSBib29sIGluaXQ6IEluY2x1ZGUgdGhpcyBhdHRyaWJ1dGUgaW4gdGhlIGdlbmVyYXRlZCBgYF9faW5pdF9fYGBcbiAgICAgICAgbWV0aG9kLiAgSXQgaXMgcG9zc2libGUgdG8gc2V0IHRoaXMgdG8gYGBGYWxzZWBgIGFuZCBzZXQgYSBkZWZhdWx0XG4gICAgICAgIHZhbHVlLiAgSW4gdGhhdCBjYXNlIHRoaXMgYXR0cmlidXRlZCBpcyB1bmNvbmRpdGlvbmFsbHkgaW5pdGlhbGl6ZWRcbiAgICAgICAgd2l0aCB0aGUgc3BlY2lmaWVkIGRlZmF1bHQgdmFsdWUgb3IgZmFjdG9yeS5cbiAgICA6cGFyYW0gY2FsbGFibGUgY29udmVydGVyOiBgY2FsbGFibGVgIHRoYXQgaXMgY2FsbGVkIGJ5XG4gICAgICAgIGBgYXR0cnNgYC1nZW5lcmF0ZWQgYGBfX2luaXRfX2BgIG1ldGhvZHMgdG8gY29udmVydCBhdHRyaWJ1dGVcJ3MgdmFsdWVcbiAgICAgICAgdG8gdGhlIGRlc2lyZWQgZm9ybWF0LiAgSXQgaXMgZ2l2ZW4gdGhlIHBhc3NlZC1pbiB2YWx1ZSwgYW5kIHRoZVxuICAgICAgICByZXR1cm5lZCB2YWx1ZSB3aWxsIGJlIHVzZWQgYXMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlLiAgVGhlXG4gICAgICAgIHZhbHVlIGlzIGNvbnZlcnRlZCBiZWZvcmUgYmVpbmcgcGFzc2VkIHRvIHRoZSB2YWxpZGF0b3IsIGlmIGFueS5cbiAgICA6cGFyYW0gbWV0YWRhdGE6IEFuIGFyYml0cmFyeSBtYXBwaW5nLCB0byBiZSB1c2VkIGJ5IHRoaXJkLXBhcnR5XG4gICAgICAgIGNvbXBvbmVudHMuICBTZWUgYGV4dGVuZGluZ19tZXRhZGF0YWAuXG4gICAgOnBhcmFtIHR5cGU6IFRoZSB0eXBlIG9mIHRoZSBhdHRyaWJ1dGUuICBJbiBQeXRob24gMy42IG9yIGdyZWF0ZXIsIHRoZVxuICAgICAgICBwcmVmZXJyZWQgbWV0aG9kIHRvIHNwZWNpZnkgdGhlIHR5cGUgaXMgdXNpbmcgYSB2YXJpYWJsZSBhbm5vdGF0aW9uXG4gICAgICAgIChzZWUgYFBFUCA1MjYgPGh0dHBzOi8vd3d3LnB5dGhvbi5vcmcvZGV2L3BlcHMvcGVwLTA1MjYvPmBfKS5cbiAgICAgICAgVGhpcyBhcmd1bWVudCBpcyBwcm92aWRlZCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgUmVnYXJkbGVzcyBvZiB0aGUgYXBwcm9hY2ggdXNlZCwgdGhlIHR5cGUgd2lsbCBiZSBzdG9yZWQgb25cbiAgICAgICAgYGBBdHRyaWJ1dGUudHlwZWBgLlxuXG4gICAgICAgIFBsZWFzZSBub3RlIHRoYXQgYGBhdHRyc2BgIGRvZXNuXCd0IGRvIGFueXRoaW5nIHdpdGggdGhpcyBtZXRhZGF0YSBieVxuICAgICAgICBpdHNlbGYuIFlvdSBjYW4gdXNlIGl0IGFzIHBhcnQgb2YgeW91ciBvd24gY29kZSBvciBmb3JcbiAgICAgICAgYHN0YXRpYyB0eXBlIGNoZWNraW5nIDx0eXBlcz5gLlxuICAgIDpwYXJhbSBrd19vbmx5OiBNYWtlIHRoaXMgYXR0cmlidXRlIGtleXdvcmQtb25seSAoUHl0aG9uIDMrKVxuICAgICAgICBpbiB0aGUgZ2VuZXJhdGVkIGBgX19pbml0X19gYCAoaWYgYGBpbml0YGAgaXMgYGBGYWxzZWBgLCB0aGlzXG4gICAgICAgIHBhcmFtZXRlciBpcyBpZ25vcmVkKS5cbiAgICA6cGFyYW0gb25fc2V0YXR0cjogQWxsb3dzIHRvIG92ZXJ3cml0ZSB0aGUgKm9uX3NldGF0dHIqIHNldHRpbmcgZnJvbVxuICAgICAgICBgYXR0ci5zYC4gSWYgbGVmdCBgTm9uZWAsIHRoZSAqb25fc2V0YXR0ciogdmFsdWUgZnJvbSBgYXR0ci5zYCBpcyB1c2VkLlxuICAgICAgICBTZXQgdG8gYGF0dHJzLnNldHRlcnMuTk9fT1BgIHRvIHJ1biAqKm5vKiogYHNldGF0dHJgIGhvb2tzIGZvciB0aGlzXG4gICAgICAgIGF0dHJpYnV0ZSAtLSByZWdhcmRsZXNzIG9mIHRoZSBzZXR0aW5nIGluIGBhdHRyLnNgLlxuICAgIDp0eXBlIG9uX3NldGF0dHI6IGBjYWxsYWJsZWAsIG9yIGEgbGlzdCBvZiBjYWxsYWJsZXMsIG9yIGBOb25lYCwgb3JcbiAgICAgICAgYGF0dHJzLnNldHRlcnMuTk9fT1BgXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNS4yLjAgKmNvbnZlcnQqXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTYuMy4wICptZXRhZGF0YSpcbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDE3LjEuMCAqdmFsaWRhdG9yKiBjYW4gYmUgYSBgYGxpc3RgYCBub3cuXG4gICAgLi4gdmVyc2lvbmNoYW5nZWQ6OiAxNy4xLjBcbiAgICAgICAqaGFzaCogaXMgYGBOb25lYGAgYW5kIHRoZXJlZm9yZSBtaXJyb3JzICplcSogYnkgZGVmYXVsdC5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNy4zLjAgKnR5cGUqXG4gICAgLi4gZGVwcmVjYXRlZDo6IDE3LjQuMCAqY29udmVydCpcbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNy40LjAgKmNvbnZlcnRlciogYXMgYSByZXBsYWNlbWVudCBmb3IgdGhlIGRlcHJlY2F0ZWRcbiAgICAgICAqY29udmVydCogdG8gYWNoaWV2ZSBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG5vdW4tYmFzZWQgYXJndW1lbnRzLlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE4LjEuMFxuICAgICAgIGBgZmFjdG9yeT1mYGAgaXMgc3ludGFjdGljIHN1Z2FyIGZvciBgYGRlZmF1bHQ9YXR0ci5GYWN0b3J5KGYpYGAuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTguMi4wICprd19vbmx5KlxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMTkuMi4wICpjb252ZXJ0KiBrZXl3b3JkIGFyZ3VtZW50IHJlbW92ZWQuXG4gICAgLi4gdmVyc2lvbmNoYW5nZWQ6OiAxOS4yLjAgKnJlcHIqIGFsc28gYWNjZXB0cyBhIGN1c3RvbSBjYWxsYWJsZS5cbiAgICAuLiBkZXByZWNhdGVkOjogMTkuMi4wICpjbXAqIFJlbW92YWwgb24gb3IgYWZ0ZXIgMjAyMS0wNi0wMS5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOS4yLjAgKmVxKiBhbmQgKm9yZGVyKlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMCAqb25fc2V0YXR0cipcbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDIwLjMuMCAqa3dfb25seSogYmFja3BvcnRlZCB0byBQeXRob24gMlxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMjEuMS4wXG4gICAgICAgKmVxKiwgKm9yZGVyKiwgYW5kICpjbXAqIGFsc28gYWNjZXB0IGEgY3VzdG9tIGNhbGxhYmxlXG4gICAgLi4gdmVyc2lvbmNoYW5nZWQ6OiAyMS4xLjAgKmNtcCogdW5kZXByZWNhdGVkXG4gICAgIiIiXG4gICAgZXEsIGVxX2tleSwgb3JkZXIsIG9yZGVyX2tleSA9IF9kZXRlcm1pbmVfYXR0cmliX2VxX29yZGVyKFxuICAgICAgICBjbXAsIGVxLCBvcmRlciwgVHJ1ZVxuICAgIClcblxuICAgIGlmIGhhc2ggaXMgbm90IE5vbmUgYW5kIGhhc2ggaXMgbm90IFRydWUgYW5kIGhhc2ggaXMgbm90IEZhbHNlOlxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAiSW52YWxpZCB2YWx1ZSBmb3IgaGFzaC4gIE11c3QgYmUgVHJ1ZSwgRmFsc2UsIG9yIE5vbmUuIlxuICAgICAgICApXG5cbiAgICBpZiBmYWN0b3J5IGlzIG5vdCBOb25lOlxuICAgICAgICBpZiBkZWZhdWx0IGlzIG5vdCBOT1RISU5HOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICAgICAiVGhlIGBkZWZhdWx0YCBhbmQgYGZhY3RvcnlgIGFyZ3VtZW50cyBhcmUgbXV0dWFsbHkgIlxuICAgICAgICAgICAgICAgICJleGNsdXNpdmUuIlxuICAgICAgICAgICAgKVxuICAgICAgICBpZiBub3QgY2FsbGFibGUoZmFjdG9yeSk6XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGUgYGZhY3RvcnlgIGFyZ3VtZW50IG11c3QgYmUgYSBjYWxsYWJsZS4iKVxuICAgICAgICBkZWZhdWx0ID0gRmFjdG9yeShmYWN0b3J5KVxuXG4gICAgaWYgbWV0YWRhdGEgaXMgTm9uZTpcbiAgICAgICAgbWV0YWRhdGEgPSB7fVxuXG4gICAgIyBBcHBseSBzeW50YWN0aWMgc3VnYXIgYnkgYXV0by13cmFwcGluZy5cbiAgICBpZiBpc2luc3RhbmNlKG9uX3NldGF0dHIsIChsaXN0LCB0dXBsZSkpOlxuICAgICAgICBvbl9zZXRhdHRyID0gc2V0dGVycy5waXBlKCpvbl9zZXRhdHRyKVxuXG4gICAgaWYgdmFsaWRhdG9yIGFuZCBpc2luc3RhbmNlKHZhbGlkYXRvciwgKGxpc3QsIHR1cGxlKSk6XG4gICAgICAgIHZhbGlkYXRvciA9IGFuZF8oKnZhbGlkYXRvcilcblxuICAgIGlmIGNvbnZlcnRlciBhbmQgaXNpbnN0YW5jZShjb252ZXJ0ZXIsIChsaXN0LCB0dXBsZSkpOlxuICAgICAgICBjb252ZXJ0ZXIgPSBwaXBlKCpjb252ZXJ0ZXIpXG5cbiAgICByZXR1cm4gX0NvdW50aW5nQXR0cihcbiAgICAgICAgZGVmYXVsdD1kZWZhdWx0LFxuICAgICAgICB2YWxpZGF0b3I9dmFsaWRhdG9yLFxuICAgICAgICByZXByPXJlcHIsXG4gICAgICAgIGNtcD1Ob25lLFxuICAgICAgICBoYXNoPWhhc2gsXG4gICAgICAgIGluaXQ9aW5pdCxcbiAgICAgICAgY29udmVydGVyPWNvbnZlcnRlcixcbiAgICAgICAgbWV0YWRhdGE9bWV0YWRhdGEsXG4gICAgICAgIHR5cGU9dHlwZSxcbiAgICAgICAga3dfb25seT1rd19vbmx5LFxuICAgICAgICBlcT1lcSxcbiAgICAgICAgZXFfa2V5PWVxX2tleSxcbiAgICAgICAgb3JkZXI9b3JkZXIsXG4gICAgICAgIG9yZGVyX2tleT1vcmRlcl9rZXksXG4gICAgICAgIG9uX3NldGF0dHI9b25fc2V0YXR0cixcbiAgICApXG5cblxuZGVmIF9jb21waWxlX2FuZF9ldmFsKHNjcmlwdCwgZ2xvYnMsIGxvY3M9Tm9uZSwgZmlsZW5hbWU9IiIpOlxuICAgICIiIlxuICAgICJFeGVjIiB0aGUgc2NyaXB0IHdpdGggdGhlIGdpdmVuIGdsb2JhbCAoZ2xvYnMpIGFuZCBsb2NhbCAobG9jcykgdmFyaWFibGVzLlxuICAgICIiIlxuICAgIGJ5dGVjb2RlID0gY29tcGlsZShzY3JpcHQsIGZpbGVuYW1lLCAiZXhlYyIpXG4gICAgZXZhbChieXRlY29kZSwgZ2xvYnMsIGxvY3MpXG5cblxuZGVmIF9tYWtlX21ldGhvZChuYW1lLCBzY3JpcHQsIGZpbGVuYW1lLCBnbG9icz1Ob25lKTpcbiAgICAiIiJcbiAgICBDcmVhdGUgdGhlIG1ldGhvZCB3aXRoIHRoZSBzY3JpcHQgZ2l2ZW4gYW5kIHJldHVybiB0aGUgbWV0aG9kIG9iamVjdC5cbiAgICAiIiJcbiAgICBsb2NzID0ge31cbiAgICBpZiBnbG9icyBpcyBOb25lOlxuICAgICAgICBnbG9icyA9IHt9XG5cbiAgICAjIEluIG9yZGVyIG9mIGRlYnVnZ2VycyBsaWtlIFBEQiBiZWluZyBhYmxlIHRvIHN0ZXAgdGhyb3VnaCB0aGUgY29kZSxcbiAgICAjIHdlIGFkZCBhIGZha2UgbGluZWNhY2hlIGVudHJ5LlxuICAgIGNvdW50ID0gMVxuICAgIGJhc2VfZmlsZW5hbWUgPSBmaWxlbmFtZVxuICAgIHdoaWxlIFRydWU6XG4gICAgICAgIGxpbmVjYWNoZV90dXBsZSA9IChcbiAgICAgICAgICAgIGxlbihzY3JpcHQpLFxuICAgICAgICAgICAgTm9uZSxcbiAgICAgICAgICAgIHNjcmlwdC5zcGxpdGxpbmVzKFRydWUpLFxuICAgICAgICAgICAgZmlsZW5hbWUsXG4gICAgICAgIClcbiAgICAgICAgb2xkX3ZhbCA9IGxpbmVjYWNoZS5jYWNoZS5zZXRkZWZhdWx0KGZpbGVuYW1lLCBsaW5lY2FjaGVfdHVwbGUpXG4gICAgICAgIGlmIG9sZF92YWwgPT0gbGluZWNhY2hlX3R1cGxlOlxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGZpbGVuYW1lID0gInt9LXt9PiIuZm9ybWF0KGJhc2VfZmlsZW5hbWVbOi0xXSwgY291bnQpXG4gICAgICAgICAgICBjb3VudCArPSAxXG5cbiAgICBfY29tcGlsZV9hbmRfZXZhbChzY3JpcHQsIGdsb2JzLCBsb2NzLCBmaWxlbmFtZSlcblxuICAgIHJldHVybiBsb2NzW25hbWVdXG5cblxuZGVmIF9tYWtlX2F0dHJfdHVwbGVfY2xhc3MoY2xzX25hbWUsIGF0dHJfbmFtZXMpOlxuICAgICIiIlxuICAgIENyZWF0ZSBhIHR1cGxlIHN1YmNsYXNzIHRvIGhvbGQgYEF0dHJpYnV0ZWBzIGZvciBhbiBgYXR0cnNgIGNsYXNzLlxuXG4gICAgVGhlIHN1YmNsYXNzIGlzIGEgYmFyZSB0dXBsZSB3aXRoIHByb3BlcnRpZXMgZm9yIG5hbWVzLlxuXG4gICAgY2xhc3MgTXlDbGFzc0F0dHJpYnV0ZXModHVwbGUpOlxuICAgICAgICBfX3Nsb3RzX18gPSAoKVxuICAgICAgICB4ID0gcHJvcGVydHkoaXRlbWdldHRlcigwKSlcbiAgICAiIiJcbiAgICBhdHRyX2NsYXNzX25hbWUgPSAie31BdHRyaWJ1dGVzIi5mb3JtYXQoY2xzX25hbWUpXG4gICAgYXR0cl9jbGFzc190ZW1wbGF0ZSA9IFtcbiAgICAgICAgImNsYXNzIHt9KHR1cGxlKToiLmZvcm1hdChhdHRyX2NsYXNzX25hbWUpLFxuICAgICAgICAiICAgIF9fc2xvdHNfXyA9ICgpIixcbiAgICBdXG4gICAgaWYgYXR0cl9uYW1lczpcbiAgICAgICAgZm9yIGksIGF0dHJfbmFtZSBpbiBlbnVtZXJhdGUoYXR0cl9uYW1lcyk6XG4gICAgICAgICAgICBhdHRyX2NsYXNzX3RlbXBsYXRlLmFwcGVuZChcbiAgICAgICAgICAgICAgICBfdHVwbGVfcHJvcGVydHlfcGF0LmZvcm1hdChpbmRleD1pLCBhdHRyX25hbWU9YXR0cl9uYW1lKVxuICAgICAgICAgICAgKVxuICAgIGVsc2U6XG4gICAgICAgIGF0dHJfY2xhc3NfdGVtcGxhdGUuYXBwZW5kKCIgICAgcGFzcyIpXG4gICAgZ2xvYnMgPSB7Il9hdHRyc19pdGVtZ2V0dGVyIjogaXRlbWdldHRlciwgIl9hdHRyc19wcm9wZXJ0eSI6IHByb3BlcnR5fVxuICAgIF9jb21waWxlX2FuZF9ldmFsKCJcXG4iLmpvaW4oYXR0cl9jbGFzc190ZW1wbGF0ZSksIGdsb2JzKVxuICAgIHJldHVybiBnbG9ic1thdHRyX2NsYXNzX25hbWVdXG5cblxuIyBUdXBsZSBjbGFzcyBmb3IgZXh0cmFjdGVkIGF0dHJpYnV0ZXMgZnJvbSBhIGNsYXNzIGRlZmluaXRpb24uXG4jIGBiYXNlX2F0dHJzYCBpcyBhIHN1YnNldCBvZiBgYXR0cnNgLlxuX0F0dHJpYnV0ZXMgPSBfbWFrZV9hdHRyX3R1cGxlX2NsYXNzKFxuICAgICJfQXR0cmlidXRlcyIsXG4gICAgW1xuICAgICAgICAjIGFsbCBhdHRyaWJ1dGVzIHRvIGJ1aWxkIGR1bmRlciBtZXRob2RzIGZvclxuICAgICAgICAiYXR0cnMiLFxuICAgICAgICAjIGF0dHJpYnV0ZXMgdGhhdCBoYXZlIGJlZW4gaW5oZXJpdGVkXG4gICAgICAgICJiYXNlX2F0dHJzIixcbiAgICAgICAgIyBtYXAgaW5oZXJpdGVkIGF0dHJpYnV0ZXMgdG8gdGhlaXIgb3JpZ2luYXRpbmcgY2xhc3Nlc1xuICAgICAgICAiYmFzZV9hdHRyc19tYXAiLFxuICAgIF0sXG4pXG5cblxuZGVmIF9pc19jbGFzc192YXIoYW5ub3QpOlxuICAgICIiIlxuICAgIENoZWNrIHdoZXRoZXIgKmFubm90KiBpcyBhIHR5cGluZy5DbGFzc1Zhci5cblxuICAgIFRoZSBzdHJpbmcgY29tcGFyaXNvbiBoYWNrIGlzIHVzZWQgdG8gYXZvaWQgZXZhbHVhdGluZyBhbGwgc3RyaW5nXG4gICAgYW5ub3RhdGlvbnMgd2hpY2ggd291bGQgcHV0IGF0dHJzLWJhc2VkIGNsYXNzZXMgYXQgYSBwZXJmb3JtYW5jZVxuICAgIGRpc2FkdmFudGFnZSBjb21wYXJlZCB0byBwbGFpbiBvbGQgY2xhc3Nlcy5cbiAgICAiIiJcbiAgICBhbm5vdCA9IHN0cihhbm5vdClcblxuICAgICMgQW5ub3RhdGlvbiBjYW4gYmUgcXVvdGVkLlxuICAgIGlmIGFubm90LnN0YXJ0c3dpdGgoKCJcJyIsIFwnIlwnKSkgYW5kIGFubm90LmVuZHN3aXRoKCgiXCciLCBcJyJcJykpOlxuICAgICAgICBhbm5vdCA9IGFubm90WzE6LTFdXG5cbiAgICByZXR1cm4gYW5ub3Quc3RhcnRzd2l0aChfY2xhc3N2YXJfcHJlZml4ZXMpXG5cblxuZGVmIF9oYXNfb3duX2F0dHJpYnV0ZShjbHMsIGF0dHJpYl9uYW1lKTpcbiAgICAiIiJcbiAgICBDaGVjayB3aGV0aGVyICpjbHMqIGRlZmluZXMgKmF0dHJpYl9uYW1lKiAoYW5kIGRvZXNuXCd0IGp1c3QgaW5oZXJpdCBpdCkuXG5cbiAgICBSZXF1aXJlcyBQeXRob24gMy5cbiAgICAiIiJcbiAgICBhdHRyID0gZ2V0YXR0cihjbHMsIGF0dHJpYl9uYW1lLCBfc2VudGluZWwpXG4gICAgaWYgYXR0ciBpcyBfc2VudGluZWw6XG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgZm9yIGJhc2VfY2xzIGluIGNscy5fX21yb19fWzE6XTpcbiAgICAgICAgYSA9IGdldGF0dHIoYmFzZV9jbHMsIGF0dHJpYl9uYW1lLCBOb25lKVxuICAgICAgICBpZiBhdHRyIGlzIGE6XG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIHJldHVybiBUcnVlXG5cblxuZGVmIF9nZXRfYW5ub3RhdGlvbnMoY2xzKTpcbiAgICAiIiJcbiAgICBHZXQgYW5ub3RhdGlvbnMgZm9yICpjbHMqLlxuICAgICIiIlxuICAgIGlmIF9oYXNfb3duX2F0dHJpYnV0ZShjbHMsICJfX2Fubm90YXRpb25zX18iKTpcbiAgICAgICAgcmV0dXJuIGNscy5fX2Fubm90YXRpb25zX19cblxuICAgIHJldHVybiB7fVxuXG5cbmRlZiBfY291bnRlcl9nZXR0ZXIoZSk6XG4gICAgIiIiXG4gICAgS2V5IGZ1bmN0aW9uIGZvciBzb3J0aW5nIHRvIGF2b2lkIHJlLWNyZWF0aW5nIGEgbGFtYmRhIGZvciBldmVyeSBjbGFzcy5cbiAgICAiIiJcbiAgICByZXR1cm4gZVsxXS5jb3VudGVyXG5cblxuZGVmIF9jb2xsZWN0X2Jhc2VfYXR0cnMoY2xzLCB0YWtlbl9hdHRyX25hbWVzKTpcbiAgICAiIiJcbiAgICBDb2xsZWN0IGF0dHIuaWJzIGZyb20gYmFzZSBjbGFzc2VzIG9mICpjbHMqLCBleGNlcHQgKnRha2VuX2F0dHJfbmFtZXMqLlxuICAgICIiIlxuICAgIGJhc2VfYXR0cnMgPSBbXVxuICAgIGJhc2VfYXR0cl9tYXAgPSB7fSAgIyBBIGRpY3Rpb25hcnkgb2YgYmFzZSBhdHRycyB0byB0aGVpciBjbGFzc2VzLlxuXG4gICAgIyBUcmF2ZXJzZSB0aGUgTVJPIGFuZCBjb2xsZWN0IGF0dHJpYnV0ZXMuXG4gICAgZm9yIGJhc2VfY2xzIGluIHJldmVyc2VkKGNscy5fX21yb19fWzE6LTFdKTpcbiAgICAgICAgZm9yIGEgaW4gZ2V0YXR0cihiYXNlX2NscywgIl9fYXR0cnNfYXR0cnNfXyIsIFtdKTpcbiAgICAgICAgICAgIGlmIGEuaW5oZXJpdGVkIG9yIGEubmFtZSBpbiB0YWtlbl9hdHRyX25hbWVzOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgICAgIGEgPSBhLmV2b2x2ZShpbmhlcml0ZWQ9VHJ1ZSlcbiAgICAgICAgICAgIGJhc2VfYXR0cnMuYXBwZW5kKGEpXG4gICAgICAgICAgICBiYXNlX2F0dHJfbWFwW2EubmFtZV0gPSBiYXNlX2Nsc1xuXG4gICAgIyBGb3IgZWFjaCBuYW1lLCBvbmx5IGtlZXAgdGhlIGZyZXNoZXN0IGRlZmluaXRpb24gaS5lLiB0aGUgZnVydGhlc3QgYXQgdGhlXG4gICAgIyBiYWNrLiAgYmFzZV9hdHRyX21hcCBpcyBmaW5lIGJlY2F1c2UgaXQgZ2V0cyBvdmVyd3JpdHRlbiB3aXRoIGV2ZXJ5IG5ld1xuICAgICMgaW5zdGFuY2UuXG4gICAgZmlsdGVyZWQgPSBbXVxuICAgIHNlZW4gPSBzZXQoKVxuICAgIGZvciBhIGluIHJldmVyc2VkKGJhc2VfYXR0cnMpOlxuICAgICAgICBpZiBhLm5hbWUgaW4gc2VlbjpcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIGZpbHRlcmVkLmluc2VydCgwLCBhKVxuICAgICAgICBzZWVuLmFkZChhLm5hbWUpXG5cbiAgICByZXR1cm4gZmlsdGVyZWQsIGJhc2VfYXR0cl9tYXBcblxuXG5kZWYgX2NvbGxlY3RfYmFzZV9hdHRyc19icm9rZW4oY2xzLCB0YWtlbl9hdHRyX25hbWVzKTpcbiAgICAiIiJcbiAgICBDb2xsZWN0IGF0dHIuaWJzIGZyb20gYmFzZSBjbGFzc2VzIG9mICpjbHMqLCBleGNlcHQgKnRha2VuX2F0dHJfbmFtZXMqLlxuXG4gICAgTi5CLiAqdGFrZW5fYXR0cl9uYW1lcyogd2lsbCBiZSBtdXRhdGVkLlxuXG4gICAgQWRoZXJlIHRvIHRoZSBvbGQgaW5jb3JyZWN0IGJlaGF2aW9yLlxuXG4gICAgTm90YWJseSBpdCBjb2xsZWN0cyBmcm9tIHRoZSBmcm9udCBhbmQgY29uc2lkZXJzIGluaGVyaXRlZCBhdHRyaWJ1dGVzIHdoaWNoXG4gICAgbGVhZHMgdG8gdGhlIGJ1Z2d5IGJlaGF2aW9yIHJlcG9ydGVkIGluICM0MjguXG4gICAgIiIiXG4gICAgYmFzZV9hdHRycyA9IFtdXG4gICAgYmFzZV9hdHRyX21hcCA9IHt9ICAjIEEgZGljdGlvbmFyeSBvZiBiYXNlIGF0dHJzIHRvIHRoZWlyIGNsYXNzZXMuXG5cbiAgICAjIFRyYXZlcnNlIHRoZSBNUk8gYW5kIGNvbGxlY3QgYXR0cmlidXRlcy5cbiAgICBmb3IgYmFzZV9jbHMgaW4gY2xzLl9fbXJvX19bMTotMV06XG4gICAgICAgIGZvciBhIGluIGdldGF0dHIoYmFzZV9jbHMsICJfX2F0dHJzX2F0dHJzX18iLCBbXSk6XG4gICAgICAgICAgICBpZiBhLm5hbWUgaW4gdGFrZW5fYXR0cl9uYW1lczpcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgICAgICBhID0gYS5ldm9sdmUoaW5oZXJpdGVkPVRydWUpXG4gICAgICAgICAgICB0YWtlbl9hdHRyX25hbWVzLmFkZChhLm5hbWUpXG4gICAgICAgICAgICBiYXNlX2F0dHJzLmFwcGVuZChhKVxuICAgICAgICAgICAgYmFzZV9hdHRyX21hcFthLm5hbWVdID0gYmFzZV9jbHNcblxuICAgIHJldHVybiBiYXNlX2F0dHJzLCBiYXNlX2F0dHJfbWFwXG5cblxuZGVmIF90cmFuc2Zvcm1fYXR0cnMoXG4gICAgY2xzLCB0aGVzZSwgYXV0b19hdHRyaWJzLCBrd19vbmx5LCBjb2xsZWN0X2J5X21ybywgZmllbGRfdHJhbnNmb3JtZXJcbik6XG4gICAgIiIiXG4gICAgVHJhbnNmb3JtIGFsbCBgX0NvdW50aW5nQXR0cmBzIG9uIGEgY2xhc3MgaW50byBgQXR0cmlidXRlYHMuXG5cbiAgICBJZiAqdGhlc2UqIGlzIHBhc3NlZCwgdXNlIHRoYXQgYW5kIGRvblwndCBsb29rIGZvciB0aGVtIG9uIHRoZSBjbGFzcy5cblxuICAgICpjb2xsZWN0X2J5X21ybyogaXMgVHJ1ZSwgY29sbGVjdCB0aGVtIGluIHRoZSBjb3JyZWN0IE1STyBvcmRlciwgb3RoZXJ3aXNlXG4gICAgdXNlIHRoZSBvbGQgLS0gaW5jb3JyZWN0IC0tIG9yZGVyLiAgU2VlICM0MjguXG5cbiAgICBSZXR1cm4gYW4gYF9BdHRyaWJ1dGVzYC5cbiAgICAiIiJcbiAgICBjZCA9IGNscy5fX2RpY3RfX1xuICAgIGFubnMgPSBfZ2V0X2Fubm90YXRpb25zKGNscylcblxuICAgIGlmIHRoZXNlIGlzIG5vdCBOb25lOlxuICAgICAgICBjYV9saXN0ID0gWyhuYW1lLCBjYSkgZm9yIG5hbWUsIGNhIGluIGl0ZXJpdGVtcyh0aGVzZSldXG5cbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodGhlc2UsIG9yZGVyZWRfZGljdCk6XG4gICAgICAgICAgICBjYV9saXN0LnNvcnQoa2V5PV9jb3VudGVyX2dldHRlcilcbiAgICBlbGlmIGF1dG9fYXR0cmlicyBpcyBUcnVlOlxuICAgICAgICBjYV9uYW1lcyA9IHtcbiAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICAgIGZvciBuYW1lLCBhdHRyIGluIGNkLml0ZW1zKClcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYXR0ciwgX0NvdW50aW5nQXR0cilcbiAgICAgICAgfVxuICAgICAgICBjYV9saXN0ID0gW11cbiAgICAgICAgYW5ub3RfbmFtZXMgPSBzZXQoKVxuICAgICAgICBmb3IgYXR0cl9uYW1lLCB0eXBlIGluIGFubnMuaXRlbXMoKTpcbiAgICAgICAgICAgIGlmIF9pc19jbGFzc192YXIodHlwZSk6XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIGFubm90X25hbWVzLmFkZChhdHRyX25hbWUpXG4gICAgICAgICAgICBhID0gY2QuZ2V0KGF0dHJfbmFtZSwgTk9USElORylcblxuICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYSwgX0NvdW50aW5nQXR0cik6XG4gICAgICAgICAgICAgICAgaWYgYSBpcyBOT1RISU5HOlxuICAgICAgICAgICAgICAgICAgICBhID0gYXR0cmliKClcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBhID0gYXR0cmliKGRlZmF1bHQ9YSlcbiAgICAgICAgICAgIGNhX2xpc3QuYXBwZW5kKChhdHRyX25hbWUsIGEpKVxuXG4gICAgICAgIHVuYW5ub3RhdGVkID0gY2FfbmFtZXMgLSBhbm5vdF9uYW1lc1xuICAgICAgICBpZiBsZW4odW5hbm5vdGF0ZWQpID4gMDpcbiAgICAgICAgICAgIHJhaXNlIFVuYW5ub3RhdGVkQXR0cmlidXRlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlRoZSBmb2xsb3dpbmcgYGF0dHIuaWJgcyBsYWNrIGEgdHlwZSBhbm5vdGF0aW9uOiAiXG4gICAgICAgICAgICAgICAgKyAiLCAiLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgIHNvcnRlZCh1bmFubm90YXRlZCwga2V5PWxhbWJkYSBuOiBjZC5nZXQobikuY291bnRlcilcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKyAiLiJcbiAgICAgICAgICAgIClcbiAgICBlbHNlOlxuICAgICAgICBjYV9saXN0ID0gc29ydGVkKFxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgIChuYW1lLCBhdHRyKVxuICAgICAgICAgICAgICAgIGZvciBuYW1lLCBhdHRyIGluIGNkLml0ZW1zKClcbiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKGF0dHIsIF9Db3VudGluZ0F0dHIpXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAga2V5PWxhbWJkYSBlOiBlWzFdLmNvdW50ZXIsXG4gICAgICAgIClcblxuICAgIG93bl9hdHRycyA9IFtcbiAgICAgICAgQXR0cmlidXRlLmZyb21fY291bnRpbmdfYXR0cihcbiAgICAgICAgICAgIG5hbWU9YXR0cl9uYW1lLCBjYT1jYSwgdHlwZT1hbm5zLmdldChhdHRyX25hbWUpXG4gICAgICAgIClcbiAgICAgICAgZm9yIGF0dHJfbmFtZSwgY2EgaW4gY2FfbGlzdFxuICAgIF1cblxuICAgIGlmIGNvbGxlY3RfYnlfbXJvOlxuICAgICAgICBiYXNlX2F0dHJzLCBiYXNlX2F0dHJfbWFwID0gX2NvbGxlY3RfYmFzZV9hdHRycyhcbiAgICAgICAgICAgIGNscywge2EubmFtZSBmb3IgYSBpbiBvd25fYXR0cnN9XG4gICAgICAgIClcbiAgICBlbHNlOlxuICAgICAgICBiYXNlX2F0dHJzLCBiYXNlX2F0dHJfbWFwID0gX2NvbGxlY3RfYmFzZV9hdHRyc19icm9rZW4oXG4gICAgICAgICAgICBjbHMsIHthLm5hbWUgZm9yIGEgaW4gb3duX2F0dHJzfVxuICAgICAgICApXG5cbiAgICBpZiBrd19vbmx5OlxuICAgICAgICBvd25fYXR0cnMgPSBbYS5ldm9sdmUoa3dfb25seT1UcnVlKSBmb3IgYSBpbiBvd25fYXR0cnNdXG4gICAgICAgIGJhc2VfYXR0cnMgPSBbYS5ldm9sdmUoa3dfb25seT1UcnVlKSBmb3IgYSBpbiBiYXNlX2F0dHJzXVxuXG4gICAgYXR0cnMgPSBiYXNlX2F0dHJzICsgb3duX2F0dHJzXG5cbiAgICAjIE1hbmRhdG9yeSB2cyBub24tbWFuZGF0b3J5IGF0dHIgb3JkZXIgb25seSBtYXR0ZXJzIHdoZW4gdGhleSBhcmUgcGFydCBvZlxuICAgICMgdGhlIF9faW5pdF9fIHNpZ25hdHVyZSBhbmQgd2hlbiB0aGV5IGFyZW5cJ3Qga3dfb25seSAod2hpY2ggYXJlIG1vdmVkIHRvXG4gICAgIyB0aGUgZW5kIGFuZCBjYW4gYmUgbWFuZGF0b3J5IG9yIG5vbi1tYW5kYXRvcnkgaW4gYW55IG9yZGVyLCBhcyB0aGV5IHdpbGxcbiAgICAjIGJlIHNwZWNpZmllZCBhcyBrZXl3b3JkIGFyZ3MgYW55d2F5KS4gQ2hlY2sgdGhlIG9yZGVyIG9mIHRob3NlIGF0dHJzOlxuICAgIGhhZF9kZWZhdWx0ID0gRmFsc2VcbiAgICBmb3IgYSBpbiAoYSBmb3IgYSBpbiBhdHRycyBpZiBhLmluaXQgaXMgbm90IEZhbHNlIGFuZCBhLmt3X29ubHkgaXMgRmFsc2UpOlxuICAgICAgICBpZiBoYWRfZGVmYXVsdCBpcyBUcnVlIGFuZCBhLmRlZmF1bHQgaXMgTk9USElORzpcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXG4gICAgICAgICAgICAgICAgIk5vIG1hbmRhdG9yeSBhdHRyaWJ1dGVzIGFsbG93ZWQgYWZ0ZXIgYW4gYXR0cmlidXRlIHdpdGggYSAiXG4gICAgICAgICAgICAgICAgImRlZmF1bHQgdmFsdWUgb3IgZmFjdG9yeS4gIEF0dHJpYnV0ZSBpbiBxdWVzdGlvbjogJXIiICUgKGEsKVxuICAgICAgICAgICAgKVxuXG4gICAgICAgIGlmIGhhZF9kZWZhdWx0IGlzIEZhbHNlIGFuZCBhLmRlZmF1bHQgaXMgbm90IE5PVEhJTkc6XG4gICAgICAgICAgICBoYWRfZGVmYXVsdCA9IFRydWVcblxuICAgIGlmIGZpZWxkX3RyYW5zZm9ybWVyIGlzIG5vdCBOb25lOlxuICAgICAgICBhdHRycyA9IGZpZWxkX3RyYW5zZm9ybWVyKGNscywgYXR0cnMpXG5cbiAgICAjIENyZWF0ZSBBdHRyc0NsYXNzICphZnRlciogYXBwbHlpbmcgdGhlIGZpZWxkX3RyYW5zZm9ybWVyIHNpbmNlIGl0IG1heVxuICAgICMgYWRkIG9yIHJlbW92ZSBhdHRyaWJ1dGVzIVxuICAgIGF0dHJfbmFtZXMgPSBbYS5uYW1lIGZvciBhIGluIGF0dHJzXVxuICAgIEF0dHJzQ2xhc3MgPSBfbWFrZV9hdHRyX3R1cGxlX2NsYXNzKGNscy5fX25hbWVfXywgYXR0cl9uYW1lcylcblxuICAgIHJldHVybiBfQXR0cmlidXRlcygoQXR0cnNDbGFzcyhhdHRycyksIGJhc2VfYXR0cnMsIGJhc2VfYXR0cl9tYXApKVxuXG5cbmlmIFBZUFk6XG5cbiAgICBkZWYgX2Zyb3plbl9zZXRhdHRycyhzZWxmLCBuYW1lLCB2YWx1ZSk6XG4gICAgICAgICIiIlxuICAgICAgICBBdHRhY2hlZCB0byBmcm96ZW4gY2xhc3NlcyBhcyBfX3NldGF0dHJfXy5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZiwgQmFzZUV4Y2VwdGlvbikgYW5kIG5hbWUgaW4gKFxuICAgICAgICAgICAgIl9fY2F1c2VfXyIsXG4gICAgICAgICAgICAiX19jb250ZXh0X18iLFxuICAgICAgICApOlxuICAgICAgICAgICAgQmFzZUV4Y2VwdGlvbi5fX3NldGF0dHJfXyhzZWxmLCBuYW1lLCB2YWx1ZSlcbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIHJhaXNlIEZyb3plbkluc3RhbmNlRXJyb3IoKVxuXG5lbHNlOlxuXG4gICAgZGVmIF9mcm96ZW5fc2V0YXR0cnMoc2VsZiwgbmFtZSwgdmFsdWUpOlxuICAgICAgICAiIiJcbiAgICAgICAgQXR0YWNoZWQgdG8gZnJvemVuIGNsYXNzZXMgYXMgX19zZXRhdHRyX18uXG4gICAgICAgICIiIlxuICAgICAgICByYWlzZSBGcm96ZW5JbnN0YW5jZUVycm9yKClcblxuXG5kZWYgX2Zyb3plbl9kZWxhdHRycyhzZWxmLCBuYW1lKTpcbiAgICAiIiJcbiAgICBBdHRhY2hlZCB0byBmcm96ZW4gY2xhc3NlcyBhcyBfX2RlbGF0dHJfXy5cbiAgICAiIiJcbiAgICByYWlzZSBGcm96ZW5JbnN0YW5jZUVycm9yKClcblxuXG5jbGFzcyBfQ2xhc3NCdWlsZGVyKG9iamVjdCk6XG4gICAgIiIiXG4gICAgSXRlcmF0aXZlbHkgYnVpbGQgKm9uZSogY2xhc3MuXG4gICAgIiIiXG5cbiAgICBfX3Nsb3RzX18gPSAoXG4gICAgICAgICJfYXR0cl9uYW1lcyIsXG4gICAgICAgICJfYXR0cnMiLFxuICAgICAgICAiX2Jhc2VfYXR0cl9tYXAiLFxuICAgICAgICAiX2Jhc2VfbmFtZXMiLFxuICAgICAgICAiX2NhY2hlX2hhc2giLFxuICAgICAgICAiX2NscyIsXG4gICAgICAgICJfY2xzX2RpY3QiLFxuICAgICAgICAiX2RlbGV0ZV9hdHRyaWJzIixcbiAgICAgICAgIl9mcm96ZW4iLFxuICAgICAgICAiX2hhc19wcmVfaW5pdCIsXG4gICAgICAgICJfaGFzX3Bvc3RfaW5pdCIsXG4gICAgICAgICJfaXNfZXhjIixcbiAgICAgICAgIl9vbl9zZXRhdHRyIixcbiAgICAgICAgIl9zbG90cyIsXG4gICAgICAgICJfd2Vha3JlZl9zbG90IixcbiAgICAgICAgIl93cm90ZV9vd25fc2V0YXR0ciIsXG4gICAgICAgICJfaGFzX2N1c3RvbV9zZXRhdHRyIixcbiAgICApXG5cbiAgICBkZWYgX19pbml0X18oXG4gICAgICAgIHNlbGYsXG4gICAgICAgIGNscyxcbiAgICAgICAgdGhlc2UsXG4gICAgICAgIHNsb3RzLFxuICAgICAgICBmcm96ZW4sXG4gICAgICAgIHdlYWtyZWZfc2xvdCxcbiAgICAgICAgZ2V0c3RhdGVfc2V0c3RhdGUsXG4gICAgICAgIGF1dG9fYXR0cmlicyxcbiAgICAgICAga3dfb25seSxcbiAgICAgICAgY2FjaGVfaGFzaCxcbiAgICAgICAgaXNfZXhjLFxuICAgICAgICBjb2xsZWN0X2J5X21ybyxcbiAgICAgICAgb25fc2V0YXR0cixcbiAgICAgICAgaGFzX2N1c3RvbV9zZXRhdHRyLFxuICAgICAgICBmaWVsZF90cmFuc2Zvcm1lcixcbiAgICApOlxuICAgICAgICBhdHRycywgYmFzZV9hdHRycywgYmFzZV9tYXAgPSBfdHJhbnNmb3JtX2F0dHJzKFxuICAgICAgICAgICAgY2xzLFxuICAgICAgICAgICAgdGhlc2UsXG4gICAgICAgICAgICBhdXRvX2F0dHJpYnMsXG4gICAgICAgICAgICBrd19vbmx5LFxuICAgICAgICAgICAgY29sbGVjdF9ieV9tcm8sXG4gICAgICAgICAgICBmaWVsZF90cmFuc2Zvcm1lcixcbiAgICAgICAgKVxuXG4gICAgICAgIHNlbGYuX2NscyA9IGNsc1xuICAgICAgICBzZWxmLl9jbHNfZGljdCA9IGRpY3QoY2xzLl9fZGljdF9fKSBpZiBzbG90cyBlbHNlIHt9XG4gICAgICAgIHNlbGYuX2F0dHJzID0gYXR0cnNcbiAgICAgICAgc2VsZi5fYmFzZV9uYW1lcyA9IHNldChhLm5hbWUgZm9yIGEgaW4gYmFzZV9hdHRycylcbiAgICAgICAgc2VsZi5fYmFzZV9hdHRyX21hcCA9IGJhc2VfbWFwXG4gICAgICAgIHNlbGYuX2F0dHJfbmFtZXMgPSB0dXBsZShhLm5hbWUgZm9yIGEgaW4gYXR0cnMpXG4gICAgICAgIHNlbGYuX3Nsb3RzID0gc2xvdHNcbiAgICAgICAgc2VsZi5fZnJvemVuID0gZnJvemVuXG4gICAgICAgIHNlbGYuX3dlYWtyZWZfc2xvdCA9IHdlYWtyZWZfc2xvdFxuICAgICAgICBzZWxmLl9jYWNoZV9oYXNoID0gY2FjaGVfaGFzaFxuICAgICAgICBzZWxmLl9oYXNfcHJlX2luaXQgPSBib29sKGdldGF0dHIoY2xzLCAiX19hdHRyc19wcmVfaW5pdF9fIiwgRmFsc2UpKVxuICAgICAgICBzZWxmLl9oYXNfcG9zdF9pbml0ID0gYm9vbChnZXRhdHRyKGNscywgIl9fYXR0cnNfcG9zdF9pbml0X18iLCBGYWxzZSkpXG4gICAgICAgIHNlbGYuX2RlbGV0ZV9hdHRyaWJzID0gbm90IGJvb2wodGhlc2UpXG4gICAgICAgIHNlbGYuX2lzX2V4YyA9IGlzX2V4Y1xuICAgICAgICBzZWxmLl9vbl9zZXRhdHRyID0gb25fc2V0YXR0clxuXG4gICAgICAgIHNlbGYuX2hhc19jdXN0b21fc2V0YXR0ciA9IGhhc19jdXN0b21fc2V0YXR0clxuICAgICAgICBzZWxmLl93cm90ZV9vd25fc2V0YXR0ciA9IEZhbHNlXG5cbiAgICAgICAgc2VsZi5fY2xzX2RpY3RbIl9fYXR0cnNfYXR0cnNfXyJdID0gc2VsZi5fYXR0cnNcblxuICAgICAgICBpZiBmcm96ZW46XG4gICAgICAgICAgICBzZWxmLl9jbHNfZGljdFsiX19zZXRhdHRyX18iXSA9IF9mcm96ZW5fc2V0YXR0cnNcbiAgICAgICAgICAgIHNlbGYuX2Nsc19kaWN0WyJfX2RlbGF0dHJfXyJdID0gX2Zyb3plbl9kZWxhdHRyc1xuXG4gICAgICAgICAgICBzZWxmLl93cm90ZV9vd25fc2V0YXR0ciA9IFRydWVcbiAgICAgICAgZWxpZiBvbl9zZXRhdHRyIGluIChcbiAgICAgICAgICAgIF9uZ19kZWZhdWx0X29uX3NldGF0dHIsXG4gICAgICAgICAgICBzZXR0ZXJzLnZhbGlkYXRlLFxuICAgICAgICAgICAgc2V0dGVycy5jb252ZXJ0LFxuICAgICAgICApOlxuICAgICAgICAgICAgaGFzX3ZhbGlkYXRvciA9IGhhc19jb252ZXJ0ZXIgPSBGYWxzZVxuICAgICAgICAgICAgZm9yIGEgaW4gYXR0cnM6XG4gICAgICAgICAgICAgICAgaWYgYS52YWxpZGF0b3IgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgICAgIGhhc192YWxpZGF0b3IgPSBUcnVlXG4gICAgICAgICAgICAgICAgaWYgYS5jb252ZXJ0ZXIgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgICAgIGhhc19jb252ZXJ0ZXIgPSBUcnVlXG5cbiAgICAgICAgICAgICAgICBpZiBoYXNfdmFsaWRhdG9yIGFuZCBoYXNfY29udmVydGVyOlxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgb25fc2V0YXR0ciA9PSBfbmdfZGVmYXVsdF9vbl9zZXRhdHRyXG4gICAgICAgICAgICAgICAgICAgIGFuZCBub3QgKGhhc192YWxpZGF0b3Igb3IgaGFzX2NvbnZlcnRlcilcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgb3IgKG9uX3NldGF0dHIgPT0gc2V0dGVycy52YWxpZGF0ZSBhbmQgbm90IGhhc192YWxpZGF0b3IpXG4gICAgICAgICAgICAgICAgb3IgKG9uX3NldGF0dHIgPT0gc2V0dGVycy5jb252ZXJ0IGFuZCBub3QgaGFzX2NvbnZlcnRlcilcbiAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgIyBJZiBjbGFzcy1sZXZlbCBvbl9zZXRhdHRyIGlzIHNldCB0byBjb252ZXJ0ICsgdmFsaWRhdGUsIGJ1dFxuICAgICAgICAgICAgICAgICMgdGhlcmVcJ3Mgbm8gZmllbGQgdG8gY29udmVydCBvciB2YWxpZGF0ZSwgcHJldGVuZCBsaWtlIHRoZXJlXCdzXG4gICAgICAgICAgICAgICAgIyBubyBvbl9zZXRhdHRyLlxuICAgICAgICAgICAgICAgIHNlbGYuX29uX3NldGF0dHIgPSBOb25lXG5cbiAgICAgICAgaWYgZ2V0c3RhdGVfc2V0c3RhdGU6XG4gICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xzX2RpY3RbIl9fZ2V0c3RhdGVfXyJdLFxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsc19kaWN0WyJfX3NldHN0YXRlX18iXSxcbiAgICAgICAgICAgICkgPSBzZWxmLl9tYWtlX2dldHN0YXRlX3NldHN0YXRlKClcblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuICI8X0NsYXNzQnVpbGRlcihjbHM9e2Nsc30pPiIuZm9ybWF0KGNscz1zZWxmLl9jbHMuX19uYW1lX18pXG5cbiAgICBkZWYgYnVpbGRfY2xhc3Moc2VsZik6XG4gICAgICAgICIiIlxuICAgICAgICBGaW5hbGl6ZSBjbGFzcyBiYXNlZCBvbiB0aGUgYWNjdW11bGF0ZWQgY29uZmlndXJhdGlvbi5cblxuICAgICAgICBCdWlsZGVyIGNhbm5vdCBiZSB1c2VkIGFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBzZWxmLl9zbG90cyBpcyBUcnVlOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2NyZWF0ZV9zbG90c19jbGFzcygpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcGF0Y2hfb3JpZ2luYWxfY2xhc3MoKVxuXG4gICAgZGVmIF9wYXRjaF9vcmlnaW5hbF9jbGFzcyhzZWxmKTpcbiAgICAgICAgIiIiXG4gICAgICAgIEFwcGx5IGFjY3VtdWxhdGVkIG1ldGhvZHMgYW5kIHJldHVybiB0aGUgY2xhc3MuXG4gICAgICAgICIiIlxuICAgICAgICBjbHMgPSBzZWxmLl9jbHNcbiAgICAgICAgYmFzZV9uYW1lcyA9IHNlbGYuX2Jhc2VfbmFtZXNcblxuICAgICAgICAjIENsZWFuIGNsYXNzIG9mIGF0dHJpYnV0ZSBkZWZpbml0aW9ucyAoYGF0dHIuaWIoKWBzKS5cbiAgICAgICAgaWYgc2VsZi5fZGVsZXRlX2F0dHJpYnM6XG4gICAgICAgICAgICBmb3IgbmFtZSBpbiBzZWxmLl9hdHRyX25hbWVzOlxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgbmFtZSBub3QgaW4gYmFzZV9uYW1lc1xuICAgICAgICAgICAgICAgICAgICBhbmQgZ2V0YXR0cihjbHMsIG5hbWUsIF9zZW50aW5lbCkgaXMgbm90IF9zZW50aW5lbFxuICAgICAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF0dHIoY2xzLCBuYW1lKVxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICAjIFRoaXMgY2FuIGhhcHBlbiBpZiBhIGJhc2UgY2xhc3MgZGVmaW5lcyBhIGNsYXNzXG4gICAgICAgICAgICAgICAgICAgICAgICAjIHZhcmlhYmxlIGFuZCB3ZSB3YW50IHRvIHNldCBhbiBhdHRyaWJ1dGUgd2l0aCB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICMgc2FtZSBuYW1lIGJ5IHVzaW5nIG9ubHkgYSB0eXBlIGFubm90YXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzXG5cbiAgICAgICAgIyBBdHRhY2ggb3VyIGR1bmRlciBtZXRob2RzLlxuICAgICAgICBmb3IgbmFtZSwgdmFsdWUgaW4gc2VsZi5fY2xzX2RpY3QuaXRlbXMoKTpcbiAgICAgICAgICAgIHNldGF0dHIoY2xzLCBuYW1lLCB2YWx1ZSlcblxuICAgICAgICAjIElmIHdlXCd2ZSBpbmhlcml0ZWQgYW4gYXR0cnMgX19zZXRhdHRyX18gYW5kIGRvblwndCB3cml0ZSBvdXIgb3duLFxuICAgICAgICAjIHJlc2V0IGl0IHRvIG9iamVjdFwncy5cbiAgICAgICAgaWYgbm90IHNlbGYuX3dyb3RlX293bl9zZXRhdHRyIGFuZCBnZXRhdHRyKFxuICAgICAgICAgICAgY2xzLCAiX19hdHRyc19vd25fc2V0YXR0cl9fIiwgRmFsc2VcbiAgICAgICAgKTpcbiAgICAgICAgICAgIGNscy5fX2F0dHJzX293bl9zZXRhdHRyX18gPSBGYWxzZVxuXG4gICAgICAgICAgICBpZiBub3Qgc2VsZi5faGFzX2N1c3RvbV9zZXRhdHRyOlxuICAgICAgICAgICAgICAgIGNscy5fX3NldGF0dHJfXyA9IG9iamVjdC5fX3NldGF0dHJfX1xuXG4gICAgICAgIHJldHVybiBjbHNcblxuICAgIGRlZiBfY3JlYXRlX3Nsb3RzX2NsYXNzKHNlbGYpOlxuICAgICAgICAiIiJcbiAgICAgICAgQnVpbGQgYW5kIHJldHVybiBhIG5ldyBjbGFzcyB3aXRoIGEgYF9fc2xvdHNfX2AgYXR0cmlidXRlLlxuICAgICAgICAiIiJcbiAgICAgICAgY2QgPSB7XG4gICAgICAgICAgICBrOiB2XG4gICAgICAgICAgICBmb3IgaywgdiBpbiBpdGVyaXRlbXMoc2VsZi5fY2xzX2RpY3QpXG4gICAgICAgICAgICBpZiBrIG5vdCBpbiB0dXBsZShzZWxmLl9hdHRyX25hbWVzKSArICgiX19kaWN0X18iLCAiX193ZWFrcmVmX18iKVxuICAgICAgICB9XG5cbiAgICAgICAgIyBJZiBvdXIgY2xhc3MgZG9lc25cJ3QgaGF2ZSBpdHMgb3duIGltcGxlbWVudGF0aW9uIG9mIF9fc2V0YXR0cl9fXG4gICAgICAgICMgKGVpdGhlciBmcm9tIHRoZSB1c2VyIG9yIGJ5IHVzKSwgY2hlY2sgdGhlIGJhc2VzLCBpZiBvbmUgb2YgdGhlbSBoYXNcbiAgICAgICAgIyBhbiBhdHRycy1tYWRlIF9fc2V0YXR0cl9fLCB0aGF0IG5lZWRzIHRvIGJlIHJlc2V0LiBXZSBkb25cJ3Qgd2FsayB0aGVcbiAgICAgICAgIyBNUk8gYmVjYXVzZSB3ZSBvbmx5IGNhcmUgYWJvdXQgb3VyIGltbWVkaWF0ZSBiYXNlIGNsYXNzZXMuXG4gICAgICAgICMgWFhYOiBUaGlzIGNhbiBiZSBjb25mdXNlZCBieSBzdWJjbGFzc2luZyBhIHNsb3R0ZWQgYXR0cnMgY2xhc3Mgd2l0aFxuICAgICAgICAjIFhYWDogYSBub24tYXR0cnMgY2xhc3MgYW5kIHN1YmNsYXNzIHRoZSByZXN1bHRpbmcgY2xhc3Mgd2l0aCBhbiBhdHRyc1xuICAgICAgICAjIFhYWDogY2xhc3MuICBTZWUgYHRlc3Rfc2xvdHRlZF9jb25mdXNlZGAgZm9yIGRldGFpbHMuICBGb3Igbm93IHRoYXRcJ3NcbiAgICAgICAgIyBYWFg6IE9LIHdpdGggdXMuXG4gICAgICAgIGlmIG5vdCBzZWxmLl93cm90ZV9vd25fc2V0YXR0cjpcbiAgICAgICAgICAgIGNkWyJfX2F0dHJzX293bl9zZXRhdHRyX18iXSA9IEZhbHNlXG5cbiAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9oYXNfY3VzdG9tX3NldGF0dHI6XG4gICAgICAgICAgICAgICAgZm9yIGJhc2VfY2xzIGluIHNlbGYuX2Nscy5fX2Jhc2VzX186XG4gICAgICAgICAgICAgICAgICAgIGlmIGJhc2VfY2xzLl9fZGljdF9fLmdldCgiX19hdHRyc19vd25fc2V0YXR0cl9fIiwgRmFsc2UpOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2RbIl9fc2V0YXR0cl9fIl0gPSBvYmplY3QuX19zZXRhdHRyX19cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgIyBUcmF2ZXJzZSB0aGUgTVJPIHRvIGNvbGxlY3QgZXhpc3Rpbmcgc2xvdHNcbiAgICAgICAgIyBhbmQgY2hlY2sgZm9yIGFuIGV4aXN0aW5nIF9fd2Vha3JlZl9fLlxuICAgICAgICBleGlzdGluZ19zbG90cyA9IGRpY3QoKVxuICAgICAgICB3ZWFrcmVmX2luaGVyaXRlZCA9IEZhbHNlXG4gICAgICAgIGZvciBiYXNlX2NscyBpbiBzZWxmLl9jbHMuX19tcm9fX1sxOi0xXTpcbiAgICAgICAgICAgIGlmIGJhc2VfY2xzLl9fZGljdF9fLmdldCgiX193ZWFrcmVmX18iLCBOb25lKSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICB3ZWFrcmVmX2luaGVyaXRlZCA9IFRydWVcbiAgICAgICAgICAgIGV4aXN0aW5nX3Nsb3RzLnVwZGF0ZShcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGdldGF0dHIoYmFzZV9jbHMsIG5hbWUpXG4gICAgICAgICAgICAgICAgICAgIGZvciBuYW1lIGluIGdldGF0dHIoYmFzZV9jbHMsICJfX3Nsb3RzX18iLCBbXSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG5cbiAgICAgICAgYmFzZV9uYW1lcyA9IHNldChzZWxmLl9iYXNlX25hbWVzKVxuXG4gICAgICAgIG5hbWVzID0gc2VsZi5fYXR0cl9uYW1lc1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBzZWxmLl93ZWFrcmVmX3Nsb3RcbiAgICAgICAgICAgIGFuZCAiX193ZWFrcmVmX18iIG5vdCBpbiBnZXRhdHRyKHNlbGYuX2NscywgIl9fc2xvdHNfXyIsICgpKVxuICAgICAgICAgICAgYW5kICJfX3dlYWtyZWZfXyIgbm90IGluIG5hbWVzXG4gICAgICAgICAgICBhbmQgbm90IHdlYWtyZWZfaW5oZXJpdGVkXG4gICAgICAgICk6XG4gICAgICAgICAgICBuYW1lcyArPSAoIl9fd2Vha3JlZl9fIiwpXG5cbiAgICAgICAgIyBXZSBvbmx5IGFkZCB0aGUgbmFtZXMgb2YgYXR0cmlidXRlcyB0aGF0IGFyZW5cJ3QgaW5oZXJpdGVkLlxuICAgICAgICAjIFNldHRpbmcgX19zbG90c19fIHRvIGluaGVyaXRlZCBhdHRyaWJ1dGVzIHdhc3RlcyBtZW1vcnkuXG4gICAgICAgIHNsb3RfbmFtZXMgPSBbbmFtZSBmb3IgbmFtZSBpbiBuYW1lcyBpZiBuYW1lIG5vdCBpbiBiYXNlX25hbWVzXVxuICAgICAgICAjIFRoZXJlIGFyZSBzbG90cyBmb3IgYXR0cmlidXRlcyBmcm9tIGN1cnJlbnQgY2xhc3NcbiAgICAgICAgIyB0aGF0IGFyZSBkZWZpbmVkIGluIHBhcmVudCBjbGFzc2VzLlxuICAgICAgICAjIEFzIHRoZWlyIGRlc2NyaXB0b3JzIG1heSBiZSBvdmVycmlkZW4gYnkgYSBjaGlsZCBjbGFzcyxcbiAgICAgICAgIyB3ZSBjb2xsZWN0IHRoZW0gaGVyZSBhbmQgdXBkYXRlIHRoZSBjbGFzcyBkaWN0XG4gICAgICAgIHJldXNlZF9zbG90cyA9IHtcbiAgICAgICAgICAgIHNsb3Q6IHNsb3RfZGVzY3JpcHRvclxuICAgICAgICAgICAgZm9yIHNsb3QsIHNsb3RfZGVzY3JpcHRvciBpbiBpdGVyaXRlbXMoZXhpc3Rpbmdfc2xvdHMpXG4gICAgICAgICAgICBpZiBzbG90IGluIHNsb3RfbmFtZXNcbiAgICAgICAgfVxuICAgICAgICBzbG90X25hbWVzID0gW25hbWUgZm9yIG5hbWUgaW4gc2xvdF9uYW1lcyBpZiBuYW1lIG5vdCBpbiByZXVzZWRfc2xvdHNdXG4gICAgICAgIGNkLnVwZGF0ZShyZXVzZWRfc2xvdHMpXG4gICAgICAgIGlmIHNlbGYuX2NhY2hlX2hhc2g6XG4gICAgICAgICAgICBzbG90X25hbWVzLmFwcGVuZChfaGFzaF9jYWNoZV9maWVsZClcbiAgICAgICAgY2RbIl9fc2xvdHNfXyJdID0gdHVwbGUoc2xvdF9uYW1lcylcblxuICAgICAgICBxdWFsbmFtZSA9IGdldGF0dHIoc2VsZi5fY2xzLCAiX19xdWFsbmFtZV9fIiwgTm9uZSlcbiAgICAgICAgaWYgcXVhbG5hbWUgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICBjZFsiX19xdWFsbmFtZV9fIl0gPSBxdWFsbmFtZVxuXG4gICAgICAgICMgQ3JlYXRlIG5ldyBjbGFzcyBiYXNlZCBvbiBvbGQgY2xhc3MgYW5kIG91ciBtZXRob2RzLlxuICAgICAgICBjbHMgPSB0eXBlKHNlbGYuX2Nscykoc2VsZi5fY2xzLl9fbmFtZV9fLCBzZWxmLl9jbHMuX19iYXNlc19fLCBjZClcblxuICAgICAgICAjIFRoZSBmb2xsb3dpbmcgaXMgYSBmaXggZm9yXG4gICAgICAgICMgPGh0dHBzOi8vZ2l0aHViLmNvbS9weXRob24tYXR0cnMvYXR0cnMvaXNzdWVzLzEwMj4uICBPbiBQeXRob24gMyxcbiAgICAgICAgIyBpZiBhIG1ldGhvZCBtZW50aW9ucyBgX19jbGFzc19fYCBvciB1c2VzIHRoZSBuby1hcmcgc3VwZXIoKSwgdGhlXG4gICAgICAgICMgY29tcGlsZXIgd2lsbCBiYWtlIGEgcmVmZXJlbmNlIHRvIHRoZSBjbGFzcyBpbiB0aGUgbWV0aG9kIGl0c2VsZlxuICAgICAgICAjIGFzIGBtZXRob2QuX19jbG9zdXJlX19gLiAgU2luY2Ugd2UgcmVwbGFjZSB0aGUgY2xhc3Mgd2l0aCBhXG4gICAgICAgICMgY2xvbmUsIHdlIHJld3JpdGUgdGhlc2UgcmVmZXJlbmNlcyBzbyBpdCBrZWVwcyB3b3JraW5nLlxuICAgICAgICBmb3IgaXRlbSBpbiBjbHMuX19kaWN0X18udmFsdWVzKCk6XG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKGl0ZW0sIChjbGFzc21ldGhvZCwgc3RhdGljbWV0aG9kKSk6XG4gICAgICAgICAgICAgICAgIyBDbGFzcy0gYW5kIHN0YXRpY21ldGhvZHMgaGlkZSB0aGVpciBmdW5jdGlvbnMgaW5zaWRlLlxuICAgICAgICAgICAgICAgICMgVGhlc2UgbWlnaHQgbmVlZCB0byBiZSByZXdyaXR0ZW4gYXMgd2VsbC5cbiAgICAgICAgICAgICAgICBjbG9zdXJlX2NlbGxzID0gZ2V0YXR0cihpdGVtLl9fZnVuY19fLCAiX19jbG9zdXJlX18iLCBOb25lKVxuICAgICAgICAgICAgZWxpZiBpc2luc3RhbmNlKGl0ZW0sIHByb3BlcnR5KTpcbiAgICAgICAgICAgICAgICAjIFdvcmthcm91bmQgZm9yIHByb3BlcnR5IGBzdXBlcigpYCBzaG9ydGN1dCAoUFkzLW9ubHkpLlxuICAgICAgICAgICAgICAgICMgVGhlcmUgaXMgbm8gdW5pdmVyc2FsIHdheSBmb3Igb3RoZXIgZGVzY3JpcHRvcnMuXG4gICAgICAgICAgICAgICAgY2xvc3VyZV9jZWxscyA9IGdldGF0dHIoaXRlbS5mZ2V0LCAiX19jbG9zdXJlX18iLCBOb25lKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBjbG9zdXJlX2NlbGxzID0gZ2V0YXR0cihpdGVtLCAiX19jbG9zdXJlX18iLCBOb25lKVxuXG4gICAgICAgICAgICBpZiBub3QgY2xvc3VyZV9jZWxsczogICMgQ2F0Y2ggTm9uZSBvciB0aGUgZW1wdHkgbGlzdC5cbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgZm9yIGNlbGwgaW4gY2xvc3VyZV9jZWxsczpcbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoID0gY2VsbC5jZWxsX2NvbnRlbnRzIGlzIHNlbGYuX2Nsc1xuICAgICAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOiAgIyBWYWx1ZUVycm9yOiBDZWxsIGlzIGVtcHR5XG4gICAgICAgICAgICAgICAgICAgIHBhc3NcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBpZiBtYXRjaDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldF9jbG9zdXJlX2NlbGwoY2VsbCwgY2xzKVxuXG4gICAgICAgIHJldHVybiBjbHNcblxuICAgIGRlZiBhZGRfcmVwcihzZWxmLCBucyk6XG4gICAgICAgIHNlbGYuX2Nsc19kaWN0WyJfX3JlcHJfXyJdID0gc2VsZi5fYWRkX21ldGhvZF9kdW5kZXJzKFxuICAgICAgICAgICAgX21ha2VfcmVwcihzZWxmLl9hdHRycywgbnMsIHNlbGYuX2NscylcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIGFkZF9zdHIoc2VsZik6XG4gICAgICAgIHJlcHIgPSBzZWxmLl9jbHNfZGljdC5nZXQoIl9fcmVwcl9fIilcbiAgICAgICAgaWYgcmVwciBpcyBOb25lOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICAgICAiX19zdHJfXyBjYW4gb25seSBiZSBnZW5lcmF0ZWQgaWYgYSBfX3JlcHJfXyBleGlzdHMuIlxuICAgICAgICAgICAgKVxuXG4gICAgICAgIGRlZiBfX3N0cl9fKHNlbGYpOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19yZXByX18oKVxuXG4gICAgICAgIHNlbGYuX2Nsc19kaWN0WyJfX3N0cl9fIl0gPSBzZWxmLl9hZGRfbWV0aG9kX2R1bmRlcnMoX19zdHJfXylcbiAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgIGRlZiBfbWFrZV9nZXRzdGF0ZV9zZXRzdGF0ZShzZWxmKTpcbiAgICAgICAgIiIiXG4gICAgICAgIENyZWF0ZSBjdXN0b20gX19zZXRzdGF0ZV9fIGFuZCBfX2dldHN0YXRlX18gbWV0aG9kcy5cbiAgICAgICAgIiIiXG4gICAgICAgICMgX193ZWFrcmVmX18gaXMgbm90IHdyaXRhYmxlLlxuICAgICAgICBzdGF0ZV9hdHRyX25hbWVzID0gdHVwbGUoXG4gICAgICAgICAgICBhbiBmb3IgYW4gaW4gc2VsZi5fYXR0cl9uYW1lcyBpZiBhbiAhPSAiX193ZWFrcmVmX18iXG4gICAgICAgIClcblxuICAgICAgICBkZWYgc2xvdHNfZ2V0c3RhdGUoc2VsZik6XG4gICAgICAgICAgICAiIiJcbiAgICAgICAgICAgIEF1dG9tYXRpY2FsbHkgY3JlYXRlZCBieSBhdHRycy5cbiAgICAgICAgICAgICIiIlxuICAgICAgICAgICAgcmV0dXJuIHR1cGxlKGdldGF0dHIoc2VsZiwgbmFtZSkgZm9yIG5hbWUgaW4gc3RhdGVfYXR0cl9uYW1lcylcblxuICAgICAgICBoYXNoX2NhY2hpbmdfZW5hYmxlZCA9IHNlbGYuX2NhY2hlX2hhc2hcblxuICAgICAgICBkZWYgc2xvdHNfc2V0c3RhdGUoc2VsZiwgc3RhdGUpOlxuICAgICAgICAgICAgIiIiXG4gICAgICAgICAgICBBdXRvbWF0aWNhbGx5IGNyZWF0ZWQgYnkgYXR0cnMuXG4gICAgICAgICAgICAiIiJcbiAgICAgICAgICAgIF9fYm91bmRfc2V0YXR0ciA9IF9vYmpfc2V0YXR0ci5fX2dldF9fKHNlbGYsIEF0dHJpYnV0ZSlcbiAgICAgICAgICAgIGZvciBuYW1lLCB2YWx1ZSBpbiB6aXAoc3RhdGVfYXR0cl9uYW1lcywgc3RhdGUpOlxuICAgICAgICAgICAgICAgIF9fYm91bmRfc2V0YXR0cihuYW1lLCB2YWx1ZSlcblxuICAgICAgICAgICAgIyBUaGUgaGFzaCBjb2RlIGNhY2hlIGlzIG5vdCBpbmNsdWRlZCB3aGVuIHRoZSBvYmplY3QgaXNcbiAgICAgICAgICAgICMgc2VyaWFsaXplZCwgYnV0IGl0IHN0aWxsIG5lZWRzIHRvIGJlIGluaXRpYWxpemVkIHRvIE5vbmUgdG9cbiAgICAgICAgICAgICMgaW5kaWNhdGUgdGhhdCB0aGUgZmlyc3QgY2FsbCB0byBfX2hhc2hfXyBzaG91bGQgYmUgYSBjYWNoZVxuICAgICAgICAgICAgIyBtaXNzLlxuICAgICAgICAgICAgaWYgaGFzaF9jYWNoaW5nX2VuYWJsZWQ6XG4gICAgICAgICAgICAgICAgX19ib3VuZF9zZXRhdHRyKF9oYXNoX2NhY2hlX2ZpZWxkLCBOb25lKVxuXG4gICAgICAgIHJldHVybiBzbG90c19nZXRzdGF0ZSwgc2xvdHNfc2V0c3RhdGVcblxuICAgIGRlZiBtYWtlX3VuaGFzaGFibGUoc2VsZik6XG4gICAgICAgIHNlbGYuX2Nsc19kaWN0WyJfX2hhc2hfXyJdID0gTm9uZVxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIGFkZF9oYXNoKHNlbGYpOlxuICAgICAgICBzZWxmLl9jbHNfZGljdFsiX19oYXNoX18iXSA9IHNlbGYuX2FkZF9tZXRob2RfZHVuZGVycyhcbiAgICAgICAgICAgIF9tYWtlX2hhc2goXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xzLFxuICAgICAgICAgICAgICAgIHNlbGYuX2F0dHJzLFxuICAgICAgICAgICAgICAgIGZyb3plbj1zZWxmLl9mcm96ZW4sXG4gICAgICAgICAgICAgICAgY2FjaGVfaGFzaD1zZWxmLl9jYWNoZV9oYXNoLFxuICAgICAgICAgICAgKVxuICAgICAgICApXG5cbiAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgIGRlZiBhZGRfaW5pdChzZWxmKTpcbiAgICAgICAgc2VsZi5fY2xzX2RpY3RbIl9faW5pdF9fIl0gPSBzZWxmLl9hZGRfbWV0aG9kX2R1bmRlcnMoXG4gICAgICAgICAgICBfbWFrZV9pbml0KFxuICAgICAgICAgICAgICAgIHNlbGYuX2NscyxcbiAgICAgICAgICAgICAgICBzZWxmLl9hdHRycyxcbiAgICAgICAgICAgICAgICBzZWxmLl9oYXNfcHJlX2luaXQsXG4gICAgICAgICAgICAgICAgc2VsZi5faGFzX3Bvc3RfaW5pdCxcbiAgICAgICAgICAgICAgICBzZWxmLl9mcm96ZW4sXG4gICAgICAgICAgICAgICAgc2VsZi5fc2xvdHMsXG4gICAgICAgICAgICAgICAgc2VsZi5fY2FjaGVfaGFzaCxcbiAgICAgICAgICAgICAgICBzZWxmLl9iYXNlX2F0dHJfbWFwLFxuICAgICAgICAgICAgICAgIHNlbGYuX2lzX2V4YyxcbiAgICAgICAgICAgICAgICBzZWxmLl9vbl9zZXRhdHRyLFxuICAgICAgICAgICAgICAgIGF0dHJzX2luaXQ9RmFsc2UsXG4gICAgICAgICAgICApXG4gICAgICAgIClcblxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIGFkZF9tYXRjaF9hcmdzKHNlbGYpOlxuICAgICAgICBzZWxmLl9jbHNfZGljdFsiX19tYXRjaF9hcmdzX18iXSA9IHR1cGxlKFxuICAgICAgICAgICAgZmllbGQubmFtZVxuICAgICAgICAgICAgZm9yIGZpZWxkIGluIHNlbGYuX2F0dHJzXG4gICAgICAgICAgICBpZiBmaWVsZC5pbml0IGFuZCBub3QgZmllbGQua3dfb25seVxuICAgICAgICApXG5cbiAgICBkZWYgYWRkX2F0dHJzX2luaXQoc2VsZik6XG4gICAgICAgIHNlbGYuX2Nsc19kaWN0WyJfX2F0dHJzX2luaXRfXyJdID0gc2VsZi5fYWRkX21ldGhvZF9kdW5kZXJzKFxuICAgICAgICAgICAgX21ha2VfaW5pdChcbiAgICAgICAgICAgICAgICBzZWxmLl9jbHMsXG4gICAgICAgICAgICAgICAgc2VsZi5fYXR0cnMsXG4gICAgICAgICAgICAgICAgc2VsZi5faGFzX3ByZV9pbml0LFxuICAgICAgICAgICAgICAgIHNlbGYuX2hhc19wb3N0X2luaXQsXG4gICAgICAgICAgICAgICAgc2VsZi5fZnJvemVuLFxuICAgICAgICAgICAgICAgIHNlbGYuX3Nsb3RzLFxuICAgICAgICAgICAgICAgIHNlbGYuX2NhY2hlX2hhc2gsXG4gICAgICAgICAgICAgICAgc2VsZi5fYmFzZV9hdHRyX21hcCxcbiAgICAgICAgICAgICAgICBzZWxmLl9pc19leGMsXG4gICAgICAgICAgICAgICAgc2VsZi5fb25fc2V0YXR0cixcbiAgICAgICAgICAgICAgICBhdHRyc19pbml0PVRydWUsXG4gICAgICAgICAgICApXG4gICAgICAgIClcblxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIGFkZF9lcShzZWxmKTpcbiAgICAgICAgY2QgPSBzZWxmLl9jbHNfZGljdFxuXG4gICAgICAgIGNkWyJfX2VxX18iXSA9IHNlbGYuX2FkZF9tZXRob2RfZHVuZGVycyhcbiAgICAgICAgICAgIF9tYWtlX2VxKHNlbGYuX2Nscywgc2VsZi5fYXR0cnMpXG4gICAgICAgIClcbiAgICAgICAgY2RbIl9fbmVfXyJdID0gc2VsZi5fYWRkX21ldGhvZF9kdW5kZXJzKF9tYWtlX25lKCkpXG5cbiAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgIGRlZiBhZGRfb3JkZXIoc2VsZik6XG4gICAgICAgIGNkID0gc2VsZi5fY2xzX2RpY3RcblxuICAgICAgICBjZFsiX19sdF9fIl0sIGNkWyJfX2xlX18iXSwgY2RbIl9fZ3RfXyJdLCBjZFsiX19nZV9fIl0gPSAoXG4gICAgICAgICAgICBzZWxmLl9hZGRfbWV0aG9kX2R1bmRlcnMobWV0aClcbiAgICAgICAgICAgIGZvciBtZXRoIGluIF9tYWtlX29yZGVyKHNlbGYuX2Nscywgc2VsZi5fYXR0cnMpXG4gICAgICAgIClcblxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIGFkZF9zZXRhdHRyKHNlbGYpOlxuICAgICAgICBpZiBzZWxmLl9mcm96ZW46XG4gICAgICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgICAgIHNhX2F0dHJzID0ge31cbiAgICAgICAgZm9yIGEgaW4gc2VsZi5fYXR0cnM6XG4gICAgICAgICAgICBvbl9zZXRhdHRyID0gYS5vbl9zZXRhdHRyIG9yIHNlbGYuX29uX3NldGF0dHJcbiAgICAgICAgICAgIGlmIG9uX3NldGF0dHIgYW5kIG9uX3NldGF0dHIgaXMgbm90IHNldHRlcnMuTk9fT1A6XG4gICAgICAgICAgICAgICAgc2FfYXR0cnNbYS5uYW1lXSA9IGEsIG9uX3NldGF0dHJcblxuICAgICAgICBpZiBub3Qgc2FfYXR0cnM6XG4gICAgICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgICAgIGlmIHNlbGYuX2hhc19jdXN0b21fc2V0YXR0cjpcbiAgICAgICAgICAgICMgV2UgbmVlZCB0byB3cml0ZSBhIF9fc2V0YXR0cl9fIGJ1dCB0aGVyZSBhbHJlYWR5IGlzIG9uZSFcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXG4gICAgICAgICAgICAgICAgIkNhblwndCBjb21iaW5lIGN1c3RvbSBfX3NldGF0dHJfXyB3aXRoIG9uX3NldGF0dHIgaG9va3MuIlxuICAgICAgICAgICAgKVxuXG4gICAgICAgICMgZG9jc3RyaW5nIGNvbWVzIGZyb20gX2FkZF9tZXRob2RfZHVuZGVyc1xuICAgICAgICBkZWYgX19zZXRhdHRyX18oc2VsZiwgbmFtZSwgdmFsKTpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBhLCBob29rID0gc2FfYXR0cnNbbmFtZV1cbiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpcbiAgICAgICAgICAgICAgICBudmFsID0gdmFsXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIG52YWwgPSBob29rKHNlbGYsIGEsIHZhbClcblxuICAgICAgICAgICAgX29ial9zZXRhdHRyKHNlbGYsIG5hbWUsIG52YWwpXG5cbiAgICAgICAgc2VsZi5fY2xzX2RpY3RbIl9fYXR0cnNfb3duX3NldGF0dHJfXyJdID0gVHJ1ZVxuICAgICAgICBzZWxmLl9jbHNfZGljdFsiX19zZXRhdHRyX18iXSA9IHNlbGYuX2FkZF9tZXRob2RfZHVuZGVycyhfX3NldGF0dHJfXylcbiAgICAgICAgc2VsZi5fd3JvdGVfb3duX3NldGF0dHIgPSBUcnVlXG5cbiAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgIGRlZiBfYWRkX21ldGhvZF9kdW5kZXJzKHNlbGYsIG1ldGhvZCk6XG4gICAgICAgICIiIlxuICAgICAgICBBZGQgX19tb2R1bGVfXyBhbmQgX19xdWFsbmFtZV9fIHRvIGEgKm1ldGhvZCogaWYgcG9zc2libGUuXG4gICAgICAgICIiIlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBtZXRob2QuX19tb2R1bGVfXyA9IHNlbGYuX2Nscy5fX21vZHVsZV9fXG4gICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjpcbiAgICAgICAgICAgIHBhc3NcblxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBtZXRob2QuX19xdWFsbmFtZV9fID0gIi4iLmpvaW4oXG4gICAgICAgICAgICAgICAgKHNlbGYuX2Nscy5fX3F1YWxuYW1lX18sIG1ldGhvZC5fX25hbWVfXylcbiAgICAgICAgICAgIClcbiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgcGFzc1xuXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIG1ldGhvZC5fX2RvY19fID0gIk1ldGhvZCBnZW5lcmF0ZWQgYnkgYXR0cnMgZm9yIGNsYXNzICVzLiIgJSAoXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xzLl9fcXVhbG5hbWVfXyxcbiAgICAgICAgICAgIClcbiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgcGFzc1xuXG4gICAgICAgIHJldHVybiBtZXRob2RcblxuXG5fQ01QX0RFUFJFQ0FUSU9OID0gKFxuICAgICJUaGUgdXNhZ2Ugb2YgYGNtcGAgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIG9uIG9yIGFmdGVyICJcbiAgICAiMjAyMS0wNi0wMS4gIFBsZWFzZSB1c2UgYGVxYCBhbmQgYG9yZGVyYCBpbnN0ZWFkLiJcbilcblxuXG5kZWYgX2RldGVybWluZV9hdHRyc19lcV9vcmRlcihjbXAsIGVxLCBvcmRlciwgZGVmYXVsdF9lcSk6XG4gICAgIiIiXG4gICAgVmFsaWRhdGUgdGhlIGNvbWJpbmF0aW9uIG9mICpjbXAqLCAqZXEqLCBhbmQgKm9yZGVyKi4gRGVyaXZlIHRoZSBlZmZlY3RpdmVcbiAgICB2YWx1ZXMgb2YgZXEgYW5kIG9yZGVyLiAgSWYgKmVxKiBpcyBOb25lLCBzZXQgaXQgdG8gKmRlZmF1bHRfZXEqLlxuICAgICIiIlxuICAgIGlmIGNtcCBpcyBub3QgTm9uZSBhbmQgYW55KChlcSBpcyBub3QgTm9uZSwgb3JkZXIgaXMgbm90IE5vbmUpKTpcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiRG9uXCd0IG1peCBgY21wYCB3aXRoIGBlcVwnIGFuZCBgb3JkZXJgLiIpXG5cbiAgICAjIGNtcCB0YWtlcyBwcmVjZWRlbmNlIGR1ZSB0byBidy1jb21wYXRpYmlsaXR5LlxuICAgIGlmIGNtcCBpcyBub3QgTm9uZTpcbiAgICAgICAgcmV0dXJuIGNtcCwgY21wXG5cbiAgICAjIElmIGxlZnQgTm9uZSwgZXF1YWxpdHkgaXMgc2V0IHRvIHRoZSBzcGVjaWZpZWQgZGVmYXVsdCBhbmQgb3JkZXJpbmdcbiAgICAjIG1pcnJvcnMgZXF1YWxpdHkuXG4gICAgaWYgZXEgaXMgTm9uZTpcbiAgICAgICAgZXEgPSBkZWZhdWx0X2VxXG5cbiAgICBpZiBvcmRlciBpcyBOb25lOlxuICAgICAgICBvcmRlciA9IGVxXG5cbiAgICBpZiBlcSBpcyBGYWxzZSBhbmQgb3JkZXIgaXMgVHJ1ZTpcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiYG9yZGVyYCBjYW4gb25seSBiZSBUcnVlIGlmIGBlcWAgaXMgVHJ1ZSB0b28uIilcblxuICAgIHJldHVybiBlcSwgb3JkZXJcblxuXG5kZWYgX2RldGVybWluZV9hdHRyaWJfZXFfb3JkZXIoY21wLCBlcSwgb3JkZXIsIGRlZmF1bHRfZXEpOlxuICAgICIiIlxuICAgIFZhbGlkYXRlIHRoZSBjb21iaW5hdGlvbiBvZiAqY21wKiwgKmVxKiwgYW5kICpvcmRlciouIERlcml2ZSB0aGUgZWZmZWN0aXZlXG4gICAgdmFsdWVzIG9mIGVxIGFuZCBvcmRlci4gIElmICplcSogaXMgTm9uZSwgc2V0IGl0IHRvICpkZWZhdWx0X2VxKi5cbiAgICAiIiJcbiAgICBpZiBjbXAgaXMgbm90IE5vbmUgYW5kIGFueSgoZXEgaXMgbm90IE5vbmUsIG9yZGVyIGlzIG5vdCBOb25lKSk6XG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkRvblwndCBtaXggYGNtcGAgd2l0aCBgZXFcJyBhbmQgYG9yZGVyYC4iKVxuXG4gICAgZGVmIGRlY2lkZV9jYWxsYWJsZV9vcl9ib29sZWFuKHZhbHVlKTpcbiAgICAgICAgIiIiXG4gICAgICAgIERlY2lkZSB3aGV0aGVyIGEga2V5IGZ1bmN0aW9uIGlzIHVzZWQuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBjYWxsYWJsZSh2YWx1ZSk6XG4gICAgICAgICAgICB2YWx1ZSwga2V5ID0gVHJ1ZSwgdmFsdWVcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGtleSA9IE5vbmVcbiAgICAgICAgcmV0dXJuIHZhbHVlLCBrZXlcblxuICAgICMgY21wIHRha2VzIHByZWNlZGVuY2UgZHVlIHRvIGJ3LWNvbXBhdGliaWxpdHkuXG4gICAgaWYgY21wIGlzIG5vdCBOb25lOlxuICAgICAgICBjbXAsIGNtcF9rZXkgPSBkZWNpZGVfY2FsbGFibGVfb3JfYm9vbGVhbihjbXApXG4gICAgICAgIHJldHVybiBjbXAsIGNtcF9rZXksIGNtcCwgY21wX2tleVxuXG4gICAgIyBJZiBsZWZ0IE5vbmUsIGVxdWFsaXR5IGlzIHNldCB0byB0aGUgc3BlY2lmaWVkIGRlZmF1bHQgYW5kIG9yZGVyaW5nXG4gICAgIyBtaXJyb3JzIGVxdWFsaXR5LlxuICAgIGlmIGVxIGlzIE5vbmU6XG4gICAgICAgIGVxLCBlcV9rZXkgPSBkZWZhdWx0X2VxLCBOb25lXG4gICAgZWxzZTpcbiAgICAgICAgZXEsIGVxX2tleSA9IGRlY2lkZV9jYWxsYWJsZV9vcl9ib29sZWFuKGVxKVxuXG4gICAgaWYgb3JkZXIgaXMgTm9uZTpcbiAgICAgICAgb3JkZXIsIG9yZGVyX2tleSA9IGVxLCBlcV9rZXlcbiAgICBlbHNlOlxuICAgICAgICBvcmRlciwgb3JkZXJfa2V5ID0gZGVjaWRlX2NhbGxhYmxlX29yX2Jvb2xlYW4ob3JkZXIpXG5cbiAgICBpZiBlcSBpcyBGYWxzZSBhbmQgb3JkZXIgaXMgVHJ1ZTpcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiYG9yZGVyYCBjYW4gb25seSBiZSBUcnVlIGlmIGBlcWAgaXMgVHJ1ZSB0b28uIilcblxuICAgIHJldHVybiBlcSwgZXFfa2V5LCBvcmRlciwgb3JkZXJfa2V5XG5cblxuZGVmIF9kZXRlcm1pbmVfd2hldGhlcl90b19pbXBsZW1lbnQoXG4gICAgY2xzLCBmbGFnLCBhdXRvX2RldGVjdCwgZHVuZGVycywgZGVmYXVsdD1UcnVlXG4pOlxuICAgICIiIlxuICAgIENoZWNrIHdoZXRoZXIgd2Ugc2hvdWxkIGltcGxlbWVudCBhIHNldCBvZiBtZXRob2RzIGZvciAqY2xzKi5cblxuICAgICpmbGFnKiBpcyB0aGUgYXJndW1lbnQgcGFzc2VkIGludG8gQGF0dHIucyBsaWtlIFwnaW5pdFwnLCAqYXV0b19kZXRlY3QqIHRoZVxuICAgIHNhbWUgYXMgcGFzc2VkIGludG8gQGF0dHIucyBhbmQgKmR1bmRlcnMqIGlzIGEgdHVwbGUgb2YgYXR0cmlidXRlIG5hbWVzXG4gICAgd2hvc2UgcHJlc2VuY2Ugc2lnbmFsIHRoYXQgdGhlIHVzZXIgaGFzIGltcGxlbWVudGVkIGl0IHRoZW1zZWx2ZXMuXG5cbiAgICBSZXR1cm4gKmRlZmF1bHQqIGlmIG5vIHJlYXNvbiBmb3IgZWl0aGVyIGZvciBvciBhZ2FpbnN0IGlzIGZvdW5kLlxuXG4gICAgYXV0b19kZXRlY3QgbXVzdCBiZSBGYWxzZSBvbiBQeXRob24gMi5cbiAgICAiIiJcbiAgICBpZiBmbGFnIGlzIFRydWUgb3IgZmxhZyBpcyBGYWxzZTpcbiAgICAgICAgcmV0dXJuIGZsYWdcblxuICAgIGlmIGZsYWcgaXMgTm9uZSBhbmQgYXV0b19kZXRlY3QgaXMgRmFsc2U6XG4gICAgICAgIHJldHVybiBkZWZhdWx0XG5cbiAgICAjIExvZ2ljYWxseSwgZmxhZyBpcyBOb25lIGFuZCBhdXRvX2RldGVjdCBpcyBUcnVlIGhlcmUuXG4gICAgZm9yIGR1bmRlciBpbiBkdW5kZXJzOlxuICAgICAgICBpZiBfaGFzX293bl9hdHRyaWJ1dGUoY2xzLCBkdW5kZXIpOlxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICByZXR1cm4gZGVmYXVsdFxuXG5cbmRlZiBhdHRycyhcbiAgICBtYXliZV9jbHM9Tm9uZSxcbiAgICB0aGVzZT1Ob25lLFxuICAgIHJlcHJfbnM9Tm9uZSxcbiAgICByZXByPU5vbmUsXG4gICAgY21wPU5vbmUsXG4gICAgaGFzaD1Ob25lLFxuICAgIGluaXQ9Tm9uZSxcbiAgICBzbG90cz1GYWxzZSxcbiAgICBmcm96ZW49RmFsc2UsXG4gICAgd2Vha3JlZl9zbG90PVRydWUsXG4gICAgc3RyPUZhbHNlLFxuICAgIGF1dG9fYXR0cmlicz1GYWxzZSxcbiAgICBrd19vbmx5PUZhbHNlLFxuICAgIGNhY2hlX2hhc2g9RmFsc2UsXG4gICAgYXV0b19leGM9RmFsc2UsXG4gICAgZXE9Tm9uZSxcbiAgICBvcmRlcj1Ob25lLFxuICAgIGF1dG9fZGV0ZWN0PUZhbHNlLFxuICAgIGNvbGxlY3RfYnlfbXJvPUZhbHNlLFxuICAgIGdldHN0YXRlX3NldHN0YXRlPU5vbmUsXG4gICAgb25fc2V0YXR0cj1Ob25lLFxuICAgIGZpZWxkX3RyYW5zZm9ybWVyPU5vbmUsXG4gICAgbWF0Y2hfYXJncz1UcnVlLFxuKTpcbiAgICByIiIiXG4gICAgQSBjbGFzcyBkZWNvcmF0b3IgdGhhdCBhZGRzIGBkdW5kZXJcbiAgICA8aHR0cHM6Ly93aWtpLnB5dGhvbi5vcmcvbW9pbi9EdW5kZXJBbGlhcz5gX1xcIC1tZXRob2RzIGFjY29yZGluZyB0byB0aGVcbiAgICBzcGVjaWZpZWQgYXR0cmlidXRlcyB1c2luZyBgYXR0ci5pYmAgb3IgdGhlICp0aGVzZSogYXJndW1lbnQuXG5cbiAgICA6cGFyYW0gdGhlc2U6IEEgZGljdGlvbmFyeSBvZiBuYW1lIHRvIGBhdHRyLmliYCBtYXBwaW5ncy4gIFRoaXMgaXNcbiAgICAgICAgdXNlZnVsIHRvIGF2b2lkIHRoZSBkZWZpbml0aW9uIG9mIHlvdXIgYXR0cmlidXRlcyB3aXRoaW4gdGhlIGNsYXNzIGJvZHlcbiAgICAgICAgYmVjYXVzZSB5b3UgY2FuXCd0IChlLmcuIGlmIHlvdSB3YW50IHRvIGFkZCBgYF9fcmVwcl9fYGAgbWV0aG9kcyB0b1xuICAgICAgICBEamFuZ28gbW9kZWxzKSBvciBkb25cJ3Qgd2FudCB0by5cblxuICAgICAgICBJZiAqdGhlc2UqIGlzIG5vdCBgYE5vbmVgYCwgYGBhdHRyc2BgIHdpbGwgKm5vdCogc2VhcmNoIHRoZSBjbGFzcyBib2R5XG4gICAgICAgIGZvciBhdHRyaWJ1dGVzIGFuZCB3aWxsICpub3QqIHJlbW92ZSBhbnkgYXR0cmlidXRlcyBmcm9tIGl0LlxuXG4gICAgICAgIElmICp0aGVzZSogaXMgYW4gb3JkZXJlZCBkaWN0IChgZGljdGAgb24gUHl0aG9uIDMuNissXG4gICAgICAgIGBjb2xsZWN0aW9ucy5PcmRlcmVkRGljdGAgb3RoZXJ3aXNlKSwgdGhlIG9yZGVyIGlzIGRlZHVjZWQgZnJvbVxuICAgICAgICB0aGUgb3JkZXIgb2YgdGhlIGF0dHJpYnV0ZXMgaW5zaWRlICp0aGVzZSouICBPdGhlcndpc2UgdGhlIG9yZGVyXG4gICAgICAgIG9mIHRoZSBkZWZpbml0aW9uIG9mIHRoZSBhdHRyaWJ1dGVzIGlzIHVzZWQuXG5cbiAgICA6dHlwZSB0aGVzZTogYGRpY3RgIG9mIGBzdHJgIHRvIGBhdHRyLmliYFxuXG4gICAgOnBhcmFtIHN0ciByZXByX25zOiBXaGVuIHVzaW5nIG5lc3RlZCBjbGFzc2VzLCB0aGVyZVwncyBubyB3YXkgaW4gUHl0aG9uIDJcbiAgICAgICAgdG8gYXV0b21hdGljYWxseSBkZXRlY3QgdGhhdC4gIFRoZXJlZm9yZSBpdFwncyBwb3NzaWJsZSB0byBzZXQgdGhlXG4gICAgICAgIG5hbWVzcGFjZSBleHBsaWNpdGx5IGZvciBhIG1vcmUgbWVhbmluZ2Z1bCBgYHJlcHJgYCBvdXRwdXQuXG4gICAgOnBhcmFtIGJvb2wgYXV0b19kZXRlY3Q6IEluc3RlYWQgb2Ygc2V0dGluZyB0aGUgKmluaXQqLCAqcmVwciosICplcSosXG4gICAgICAgICpvcmRlciosIGFuZCAqaGFzaCogYXJndW1lbnRzIGV4cGxpY2l0bHksIGFzc3VtZSB0aGV5IGFyZSBzZXQgdG9cbiAgICAgICAgYGBUcnVlYGAgKip1bmxlc3MgYW55Kiogb2YgdGhlIGludm9sdmVkIG1ldGhvZHMgZm9yIG9uZSBvZiB0aGVcbiAgICAgICAgYXJndW1lbnRzIGlzIGltcGxlbWVudGVkIGluIHRoZSAqY3VycmVudCogY2xhc3MgKGkuZS4gaXQgaXMgKm5vdCpcbiAgICAgICAgaW5oZXJpdGVkIGZyb20gc29tZSBiYXNlIGNsYXNzKS5cblxuICAgICAgICBTbyBmb3IgZXhhbXBsZSBieSBpbXBsZW1lbnRpbmcgYGBfX2VxX19gYCBvbiBhIGNsYXNzIHlvdXJzZWxmLFxuICAgICAgICBgYGF0dHJzYGAgd2lsbCBkZWR1Y2UgYGBlcT1GYWxzZWBgIGFuZCB3aWxsIGNyZWF0ZSAqbmVpdGhlcipcbiAgICAgICAgYGBfX2VxX19gYCAqbm9yKiBgYF9fbmVfX2BgIChidXQgUHl0aG9uIGNsYXNzZXMgY29tZSB3aXRoIGEgc2Vuc2libGVcbiAgICAgICAgYGBfX25lX19gYCBieSBkZWZhdWx0LCBzbyBpdCAqc2hvdWxkKiBiZSBlbm91Z2ggdG8gb25seSBpbXBsZW1lbnRcbiAgICAgICAgYGBfX2VxX19gYCBpbiBtb3N0IGNhc2VzKS5cblxuICAgICAgICAuLiB3YXJuaW5nOjpcblxuICAgICAgICAgICBJZiB5b3UgcHJldmVudCBgYGF0dHJzYGAgZnJvbSBjcmVhdGluZyB0aGUgb3JkZXJpbmcgbWV0aG9kcyBmb3IgeW91XG4gICAgICAgICAgIChgYG9yZGVyPUZhbHNlYGAsIGUuZy4gYnkgaW1wbGVtZW50aW5nIGBgX19sZV9fYGApLCBpdCBiZWNvbWVzXG4gICAgICAgICAgICp5b3VyKiByZXNwb25zaWJpbGl0eSB0byBtYWtlIHN1cmUgaXRzIG9yZGVyaW5nIGlzIHNvdW5kLiBUaGUgYmVzdFxuICAgICAgICAgICB3YXkgaXMgdG8gdXNlIHRoZSBgZnVuY3Rvb2xzLnRvdGFsX29yZGVyaW5nYCBkZWNvcmF0b3IuXG5cblxuICAgICAgICBQYXNzaW5nIGBgVHJ1ZWBgIG9yIGBgRmFsc2VgYCB0byAqaW5pdCosICpyZXByKiwgKmVxKiwgKm9yZGVyKixcbiAgICAgICAgKmNtcCosIG9yICpoYXNoKiBvdmVycmlkZXMgd2hhdGV2ZXIgKmF1dG9fZGV0ZWN0KiB3b3VsZCBkZXRlcm1pbmUuXG5cbiAgICAgICAgKmF1dG9fZGV0ZWN0KiByZXF1aXJlcyBQeXRob24gMy4gU2V0dGluZyBpdCBgYFRydWVgYCBvbiBQeXRob24gMiByYWlzZXNcbiAgICAgICAgYW4gYGF0dHJzLmV4Y2VwdGlvbnMuUHl0aG9uVG9vT2xkRXJyb3JgLlxuXG4gICAgOnBhcmFtIGJvb2wgcmVwcjogQ3JlYXRlIGEgYGBfX3JlcHJfX2BgIG1ldGhvZCB3aXRoIGEgaHVtYW4gcmVhZGFibGVcbiAgICAgICAgcmVwcmVzZW50YXRpb24gb2YgYGBhdHRyc2BgIGF0dHJpYnV0ZXMuLlxuICAgIDpwYXJhbSBib29sIHN0cjogQ3JlYXRlIGEgYGBfX3N0cl9fYGAgbWV0aG9kIHRoYXQgaXMgaWRlbnRpY2FsIHRvXG4gICAgICAgIGBgX19yZXByX19gYC4gIFRoaXMgaXMgdXN1YWxseSBub3QgbmVjZXNzYXJ5IGV4Y2VwdCBmb3JcbiAgICAgICAgYEV4Y2VwdGlvbmBcXCBzLlxuICAgIDpwYXJhbSBPcHRpb25hbFtib29sXSBlcTogSWYgYGBUcnVlYGAgb3IgYGBOb25lYGAgKGRlZmF1bHQpLCBhZGQgYGBfX2VxX19gYFxuICAgICAgICBhbmQgYGBfX25lX19gYCBtZXRob2RzIHRoYXQgY2hlY2sgdHdvIGluc3RhbmNlcyBmb3IgZXF1YWxpdHkuXG5cbiAgICAgICAgVGhleSBjb21wYXJlIHRoZSBpbnN0YW5jZXMgYXMgaWYgdGhleSB3ZXJlIHR1cGxlcyBvZiB0aGVpciBgYGF0dHJzYGBcbiAgICAgICAgYXR0cmlidXRlcyBpZiBhbmQgb25seSBpZiB0aGUgdHlwZXMgb2YgYm90aCBjbGFzc2VzIGFyZSAqaWRlbnRpY2FsKiFcbiAgICA6cGFyYW0gT3B0aW9uYWxbYm9vbF0gb3JkZXI6IElmIGBgVHJ1ZWBgLCBhZGQgYGBfX2x0X19gYCwgYGBfX2xlX19gYCxcbiAgICAgICAgYGBfX2d0X19gYCwgYW5kIGBgX19nZV9fYGAgbWV0aG9kcyB0aGF0IGJlaGF2ZSBsaWtlICplcSogYWJvdmUgYW5kXG4gICAgICAgIGFsbG93IGluc3RhbmNlcyB0byBiZSBvcmRlcmVkLiBJZiBgYE5vbmVgYCAoZGVmYXVsdCkgbWlycm9yIHZhbHVlIG9mXG4gICAgICAgICplcSouXG4gICAgOnBhcmFtIE9wdGlvbmFsW2Jvb2xdIGNtcDogU2V0dGluZyAqY21wKiBpcyBlcXVpdmFsZW50IHRvIHNldHRpbmcgKmVxKlxuICAgICAgICBhbmQgKm9yZGVyKiB0byB0aGUgc2FtZSB2YWx1ZS4gTXVzdCBub3QgYmUgbWl4ZWQgd2l0aCAqZXEqIG9yICpvcmRlciouXG4gICAgOnBhcmFtIE9wdGlvbmFsW2Jvb2xdIGhhc2g6IElmIGBgTm9uZWBgIChkZWZhdWx0KSwgdGhlIGBgX19oYXNoX19gYCBtZXRob2RcbiAgICAgICAgaXMgZ2VuZXJhdGVkIGFjY29yZGluZyBob3cgKmVxKiBhbmQgKmZyb3plbiogYXJlIHNldC5cblxuICAgICAgICAxLiBJZiAqYm90aCogYXJlIFRydWUsIGBgYXR0cnNgYCB3aWxsIGdlbmVyYXRlIGEgYGBfX2hhc2hfX2BgIGZvciB5b3UuXG4gICAgICAgIDIuIElmICplcSogaXMgVHJ1ZSBhbmQgKmZyb3plbiogaXMgRmFsc2UsIGBgX19oYXNoX19gYCB3aWxsIGJlIHNldCB0b1xuICAgICAgICAgICBOb25lLCBtYXJraW5nIGl0IHVuaGFzaGFibGUgKHdoaWNoIGl0IGlzKS5cbiAgICAgICAgMy4gSWYgKmVxKiBpcyBGYWxzZSwgYGBfX2hhc2hfX2BgIHdpbGwgYmUgbGVmdCB1bnRvdWNoZWQgbWVhbmluZyB0aGVcbiAgICAgICAgICAgYGBfX2hhc2hfX2BgIG1ldGhvZCBvZiB0aGUgYmFzZSBjbGFzcyB3aWxsIGJlIHVzZWQgKGlmIGJhc2UgY2xhc3MgaXNcbiAgICAgICAgICAgYGBvYmplY3RgYCwgdGhpcyBtZWFucyBpdCB3aWxsIGZhbGwgYmFjayB0byBpZC1iYXNlZCBoYXNoaW5nLikuXG5cbiAgICAgICAgQWx0aG91Z2ggbm90IHJlY29tbWVuZGVkLCB5b3UgY2FuIGRlY2lkZSBmb3IgeW91cnNlbGYgYW5kIGZvcmNlXG4gICAgICAgIGBgYXR0cnNgYCB0byBjcmVhdGUgb25lIChlLmcuIGlmIHRoZSBjbGFzcyBpcyBpbW11dGFibGUgZXZlbiB0aG91Z2ggeW91XG4gICAgICAgIGRpZG5cJ3QgZnJlZXplIGl0IHByb2dyYW1tYXRpY2FsbHkpIGJ5IHBhc3NpbmcgYGBUcnVlYGAgb3Igbm90LiAgQm90aCBvZlxuICAgICAgICB0aGVzZSBjYXNlcyBhcmUgcmF0aGVyIHNwZWNpYWwgYW5kIHNob3VsZCBiZSB1c2VkIGNhcmVmdWxseS5cblxuICAgICAgICBTZWUgb3VyIGRvY3VtZW50YXRpb24gb24gYGhhc2hpbmdgLCBQeXRob25cJ3MgZG9jdW1lbnRhdGlvbiBvblxuICAgICAgICBgb2JqZWN0Ll9faGFzaF9fYCwgYW5kIHRoZSBgR2l0SHViIGlzc3VlIHRoYXQgbGVkIHRvIHRoZSBkZWZhdWx0IFxcXG4gICAgICAgIGJlaGF2aW9yIDxodHRwczovL2dpdGh1Yi5jb20vcHl0aG9uLWF0dHJzL2F0dHJzL2lzc3Vlcy8xMzY+YF8gZm9yIG1vcmVcbiAgICAgICAgZGV0YWlscy5cbiAgICA6cGFyYW0gYm9vbCBpbml0OiBDcmVhdGUgYSBgYF9faW5pdF9fYGAgbWV0aG9kIHRoYXQgaW5pdGlhbGl6ZXMgdGhlXG4gICAgICAgIGBgYXR0cnNgYCBhdHRyaWJ1dGVzLiBMZWFkaW5nIHVuZGVyc2NvcmVzIGFyZSBzdHJpcHBlZCBmb3IgdGhlIGFyZ3VtZW50XG4gICAgICAgIG5hbWUuIElmIGEgYGBfX2F0dHJzX3ByZV9pbml0X19gYCBtZXRob2QgZXhpc3RzIG9uIHRoZSBjbGFzcywgaXQgd2lsbFxuICAgICAgICBiZSBjYWxsZWQgYmVmb3JlIHRoZSBjbGFzcyBpcyBpbml0aWFsaXplZC4gSWYgYSBgYF9fYXR0cnNfcG9zdF9pbml0X19gYFxuICAgICAgICBtZXRob2QgZXhpc3RzIG9uIHRoZSBjbGFzcywgaXQgd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGNsYXNzIGlzIGZ1bGx5XG4gICAgICAgIGluaXRpYWxpemVkLlxuXG4gICAgICAgIElmIGBgaW5pdGBgIGlzIGBgRmFsc2VgYCwgYW4gYGBfX2F0dHJzX2luaXRfX2BgIG1ldGhvZCB3aWxsIGJlXG4gICAgICAgIGluamVjdGVkIGluc3RlYWQuIFRoaXMgYWxsb3dzIHlvdSB0byBkZWZpbmUgYSBjdXN0b20gYGBfX2luaXRfX2BgXG4gICAgICAgIG1ldGhvZCB0aGF0IGNhbiBkbyBwcmUtaW5pdCB3b3JrIHN1Y2ggYXMgYGBzdXBlcigpLl9faW5pdF9fKClgYCxcbiAgICAgICAgYW5kIHRoZW4gY2FsbCBgYF9fYXR0cnNfaW5pdF9fKClgYCBhbmQgYGBfX2F0dHJzX3Bvc3RfaW5pdF9fKClgYC5cbiAgICA6cGFyYW0gYm9vbCBzbG90czogQ3JlYXRlIGEgYHNsb3R0ZWQgY2xhc3MgPHNsb3R0ZWQgY2xhc3Nlcz5gIHRoYXRcJ3MgbW9yZVxuICAgICAgICBtZW1vcnktZWZmaWNpZW50LiBTbG90dGVkIGNsYXNzZXMgYXJlIGdlbmVyYWxseSBzdXBlcmlvciB0byB0aGUgZGVmYXVsdFxuICAgICAgICBkaWN0IGNsYXNzZXMsIGJ1dCBoYXZlIHNvbWUgZ290Y2hhcyB5b3Ugc2hvdWxkIGtub3cgYWJvdXQsIHNvIHdlXG4gICAgICAgIGVuY291cmFnZSB5b3UgdG8gcmVhZCB0aGUgYGdsb3NzYXJ5IGVudHJ5IDxzbG90dGVkIGNsYXNzZXM+YC5cbiAgICA6cGFyYW0gYm9vbCBmcm96ZW46IE1ha2UgaW5zdGFuY2VzIGltbXV0YWJsZSBhZnRlciBpbml0aWFsaXphdGlvbi4gIElmXG4gICAgICAgIHNvbWVvbmUgYXR0ZW1wdHMgdG8gbW9kaWZ5IGEgZnJvemVuIGluc3RhbmNlLFxuICAgICAgICBgYXR0ci5leGNlcHRpb25zLkZyb3plbkluc3RhbmNlRXJyb3JgIGlzIHJhaXNlZC5cblxuICAgICAgICAuLiBub3RlOjpcblxuICAgICAgICAgICAgMS4gVGhpcyBpcyBhY2hpZXZlZCBieSBpbnN0YWxsaW5nIGEgY3VzdG9tIGBgX19zZXRhdHRyX19gYCBtZXRob2RcbiAgICAgICAgICAgICAgIG9uIHlvdXIgY2xhc3MsIHNvIHlvdSBjYW5cJ3QgaW1wbGVtZW50IHlvdXIgb3duLlxuXG4gICAgICAgICAgICAyLiBUcnVlIGltbXV0YWJpbGl0eSBpcyBpbXBvc3NpYmxlIGluIFB5dGhvbi5cblxuICAgICAgICAgICAgMy4gVGhpcyAqZG9lcyogaGF2ZSBhIG1pbm9yIGEgcnVudGltZSBwZXJmb3JtYW5jZSBgaW1wYWN0XG4gICAgICAgICAgICAgICA8aG93LWZyb3plbj5gIHdoZW4gaW5pdGlhbGl6aW5nIG5ldyBpbnN0YW5jZXMuICBJbiBvdGhlciB3b3JkczpcbiAgICAgICAgICAgICAgIGBgX19pbml0X19gYCBpcyBzbGlnaHRseSBzbG93ZXIgd2l0aCBgYGZyb3plbj1UcnVlYGAuXG5cbiAgICAgICAgICAgIDQuIElmIGEgY2xhc3MgaXMgZnJvemVuLCB5b3UgY2Fubm90IG1vZGlmeSBgYHNlbGZgYCBpblxuICAgICAgICAgICAgICAgYGBfX2F0dHJzX3Bvc3RfaW5pdF9fYGAgb3IgYSBzZWxmLXdyaXR0ZW4gYGBfX2luaXRfX2BgLiBZb3UgY2FuXG4gICAgICAgICAgICAgICBjaXJjdW12ZW50IHRoYXQgbGltaXRhdGlvbiBieSB1c2luZ1xuICAgICAgICAgICAgICAgYGBvYmplY3QuX19zZXRhdHRyX18oc2VsZiwgImF0dHJpYnV0ZV9uYW1lIiwgdmFsdWUpYGAuXG5cbiAgICAgICAgICAgIDUuIFN1YmNsYXNzZXMgb2YgYSBmcm96ZW4gY2xhc3MgYXJlIGZyb3plbiB0b28uXG5cbiAgICA6cGFyYW0gYm9vbCB3ZWFrcmVmX3Nsb3Q6IE1ha2UgaW5zdGFuY2VzIHdlYWstcmVmZXJlbmNlYWJsZS4gIFRoaXMgaGFzIG5vXG4gICAgICAgIGVmZmVjdCB1bmxlc3MgYGBzbG90c2BgIGlzIGFsc28gZW5hYmxlZC5cbiAgICA6cGFyYW0gYm9vbCBhdXRvX2F0dHJpYnM6IElmIGBgVHJ1ZWBgLCBjb2xsZWN0IGBQRVAgNTI2YF8tYW5ub3RhdGVkXG4gICAgICAgIGF0dHJpYnV0ZXMgKFB5dGhvbiAzLjYgYW5kIGxhdGVyIG9ubHkpIGZyb20gdGhlIGNsYXNzIGJvZHkuXG5cbiAgICAgICAgSW4gdGhpcyBjYXNlLCB5b3UgKiptdXN0KiogYW5ub3RhdGUgZXZlcnkgZmllbGQuICBJZiBgYGF0dHJzYGBcbiAgICAgICAgZW5jb3VudGVycyBhIGZpZWxkIHRoYXQgaXMgc2V0IHRvIGFuIGBhdHRyLmliYCBidXQgbGFja3MgYSB0eXBlXG4gICAgICAgIGFubm90YXRpb24sIGFuIGBhdHRyLmV4Y2VwdGlvbnMuVW5hbm5vdGF0ZWRBdHRyaWJ1dGVFcnJvcmAgaXNcbiAgICAgICAgcmFpc2VkLiAgVXNlIGBgZmllbGRfbmFtZTogdHlwaW5nLkFueSA9IGF0dHIuaWIoLi4uKWBgIGlmIHlvdSBkb25cJ3RcbiAgICAgICAgd2FudCB0byBzZXQgYSB0eXBlLlxuXG4gICAgICAgIElmIHlvdSBhc3NpZ24gYSB2YWx1ZSB0byB0aG9zZSBhdHRyaWJ1dGVzIChlLmcuIGBgeDogaW50ID0gNDJgYCksIHRoYXRcbiAgICAgICAgdmFsdWUgYmVjb21lcyB0aGUgZGVmYXVsdCB2YWx1ZSBsaWtlIGlmIGl0IHdlcmUgcGFzc2VkIHVzaW5nXG4gICAgICAgIGBgYXR0ci5pYihkZWZhdWx0PTQyKWBgLiAgUGFzc2luZyBhbiBpbnN0YW5jZSBvZiBgYXR0cnMuRmFjdG9yeWAgYWxzb1xuICAgICAgICB3b3JrcyBhcyBleHBlY3RlZCBpbiBtb3N0IGNhc2VzIChzZWUgd2FybmluZyBiZWxvdykuXG5cbiAgICAgICAgQXR0cmlidXRlcyBhbm5vdGF0ZWQgYXMgYHR5cGluZy5DbGFzc1ZhcmAsIGFuZCBhdHRyaWJ1dGVzIHRoYXQgYXJlXG4gICAgICAgIG5laXRoZXIgYW5ub3RhdGVkIG5vciBzZXQgdG8gYW4gYGF0dHIuaWJgIGFyZSAqKmlnbm9yZWQqKi5cblxuICAgICAgICAuLiB3YXJuaW5nOjpcbiAgICAgICAgICAgRm9yIGZlYXR1cmVzIHRoYXQgdXNlIHRoZSBhdHRyaWJ1dGUgbmFtZSB0byBjcmVhdGUgZGVjb3JhdG9ycyAoZS5nLlxuICAgICAgICAgICBgdmFsaWRhdG9ycyA8dmFsaWRhdG9ycz5gKSwgeW91IHN0aWxsICptdXN0KiBhc3NpZ24gYGF0dHIuaWJgIHRvXG4gICAgICAgICAgIHRoZW0uIE90aGVyd2lzZSBQeXRob24gd2lsbCBlaXRoZXIgbm90IGZpbmQgdGhlIG5hbWUgb3IgdHJ5IHRvIHVzZVxuICAgICAgICAgICB0aGUgZGVmYXVsdCB2YWx1ZSB0byBjYWxsIGUuZy4gYGB2YWxpZGF0b3JgYCBvbiBpdC5cblxuICAgICAgICAgICBUaGVzZSBlcnJvcnMgY2FuIGJlIHF1aXRlIGNvbmZ1c2luZyBhbmQgcHJvYmFibHkgdGhlIG1vc3QgY29tbW9uIGJ1Z1xuICAgICAgICAgICByZXBvcnQgb24gb3VyIGJ1ZyB0cmFja2VyLlxuXG4gICAgICAgIC4uIF9gUEVQIDUyNmA6IGh0dHBzOi8vd3d3LnB5dGhvbi5vcmcvZGV2L3BlcHMvcGVwLTA1MjYvXG4gICAgOnBhcmFtIGJvb2wga3dfb25seTogTWFrZSBhbGwgYXR0cmlidXRlcyBrZXl3b3JkLW9ubHkgKFB5dGhvbiAzKylcbiAgICAgICAgaW4gdGhlIGdlbmVyYXRlZCBgYF9faW5pdF9fYGAgKGlmIGBgaW5pdGBgIGlzIGBgRmFsc2VgYCwgdGhpc1xuICAgICAgICBwYXJhbWV0ZXIgaXMgaWdub3JlZCkuXG4gICAgOnBhcmFtIGJvb2wgY2FjaGVfaGFzaDogRW5zdXJlIHRoYXQgdGhlIG9iamVjdFwncyBoYXNoIGNvZGUgaXMgY29tcHV0ZWRcbiAgICAgICAgb25seSBvbmNlIGFuZCBzdG9yZWQgb24gdGhlIG9iamVjdC4gIElmIHRoaXMgaXMgc2V0IHRvIGBgVHJ1ZWBgLFxuICAgICAgICBoYXNoaW5nIG11c3QgYmUgZWl0aGVyIGV4cGxpY2l0bHkgb3IgaW1wbGljaXRseSBlbmFibGVkIGZvciB0aGlzXG4gICAgICAgIGNsYXNzLiAgSWYgdGhlIGhhc2ggY29kZSBpcyBjYWNoZWQsIGF2b2lkIGFueSByZWFzc2lnbm1lbnRzIG9mXG4gICAgICAgIGZpZWxkcyBpbnZvbHZlZCBpbiBoYXNoIGNvZGUgY29tcHV0YXRpb24gb3IgbXV0YXRpb25zIG9mIHRoZSBvYmplY3RzXG4gICAgICAgIHRob3NlIGZpZWxkcyBwb2ludCB0byBhZnRlciBvYmplY3QgY3JlYXRpb24uICBJZiBzdWNoIGNoYW5nZXMgb2NjdXIsXG4gICAgICAgIHRoZSBiZWhhdmlvciBvZiB0aGUgb2JqZWN0XCdzIGhhc2ggY29kZSBpcyB1bmRlZmluZWQuXG4gICAgOnBhcmFtIGJvb2wgYXV0b19leGM6IElmIHRoZSBjbGFzcyBzdWJjbGFzc2VzIGBCYXNlRXhjZXB0aW9uYFxuICAgICAgICAod2hpY2ggaW1wbGljaXRseSBpbmNsdWRlcyBhbnkgc3ViY2xhc3Mgb2YgYW55IGV4Y2VwdGlvbiksIHRoZVxuICAgICAgICBmb2xsb3dpbmcgaGFwcGVucyB0byBiZWhhdmUgbGlrZSBhIHdlbGwtYmVoYXZlZCBQeXRob24gZXhjZXB0aW9uc1xuICAgICAgICBjbGFzczpcblxuICAgICAgICAtIHRoZSB2YWx1ZXMgZm9yICplcSosICpvcmRlciosIGFuZCAqaGFzaCogYXJlIGlnbm9yZWQgYW5kIHRoZVxuICAgICAgICAgIGluc3RhbmNlcyBjb21wYXJlIGFuZCBoYXNoIGJ5IHRoZSBpbnN0YW5jZVwncyBpZHMgKE4uQi4gYGBhdHRyc2BgIHdpbGxcbiAgICAgICAgICAqbm90KiByZW1vdmUgZXhpc3RpbmcgaW1wbGVtZW50YXRpb25zIG9mIGBgX19oYXNoX19gYCBvciB0aGUgZXF1YWxpdHlcbiAgICAgICAgICBtZXRob2RzLiBJdCBqdXN0IHdvblwndCBhZGQgb3duIG9uZXMuKSxcbiAgICAgICAgLSBhbGwgYXR0cmlidXRlcyB0aGF0IGFyZSBlaXRoZXIgcGFzc2VkIGludG8gYGBfX2luaXRfX2BgIG9yIGhhdmUgYVxuICAgICAgICAgIGRlZmF1bHQgdmFsdWUgYXJlIGFkZGl0aW9uYWxseSBhdmFpbGFibGUgYXMgYSB0dXBsZSBpbiB0aGUgYGBhcmdzYGBcbiAgICAgICAgICBhdHRyaWJ1dGUsXG4gICAgICAgIC0gdGhlIHZhbHVlIG9mICpzdHIqIGlzIGlnbm9yZWQgbGVhdmluZyBgYF9fc3RyX19gYCB0byBiYXNlIGNsYXNzZXMuXG4gICAgOnBhcmFtIGJvb2wgY29sbGVjdF9ieV9tcm86IFNldHRpbmcgdGhpcyB0byBgVHJ1ZWAgZml4ZXMgdGhlIHdheSBgYGF0dHJzYGBcbiAgICAgICBjb2xsZWN0cyBhdHRyaWJ1dGVzIGZyb20gYmFzZSBjbGFzc2VzLiAgVGhlIGRlZmF1bHQgYmVoYXZpb3IgaXNcbiAgICAgICBpbmNvcnJlY3QgaW4gY2VydGFpbiBjYXNlcyBvZiBtdWx0aXBsZSBpbmhlcml0YW5jZS4gIEl0IHNob3VsZCBiZSBvbiBieVxuICAgICAgIGRlZmF1bHQgYnV0IGlzIGtlcHQgb2ZmIGZvciBiYWNrd2FyZC1jb21wYXRpYmlsaXR5LlxuXG4gICAgICAgU2VlIGlzc3VlIGAjNDI4IDxodHRwczovL2dpdGh1Yi5jb20vcHl0aG9uLWF0dHJzL2F0dHJzL2lzc3Vlcy80Mjg+YF8gZm9yXG4gICAgICAgbW9yZSBkZXRhaWxzLlxuXG4gICAgOnBhcmFtIE9wdGlvbmFsW2Jvb2xdIGdldHN0YXRlX3NldHN0YXRlOlxuICAgICAgIC4uIG5vdGU6OlxuICAgICAgICAgIFRoaXMgaXMgdXN1YWxseSBvbmx5IGludGVyZXN0aW5nIGZvciBzbG90dGVkIGNsYXNzZXMgYW5kIHlvdSBzaG91bGRcbiAgICAgICAgICBwcm9iYWJseSBqdXN0IHNldCAqYXV0b19kZXRlY3QqIHRvIGBUcnVlYC5cblxuICAgICAgIElmIGBUcnVlYCwgYGBfX2dldHN0YXRlX19gYCBhbmRcbiAgICAgICBgYF9fc2V0c3RhdGVfX2BgIGFyZSBnZW5lcmF0ZWQgYW5kIGF0dGFjaGVkIHRvIHRoZSBjbGFzcy4gVGhpcyBpc1xuICAgICAgIG5lY2Vzc2FyeSBmb3Igc2xvdHRlZCBjbGFzc2VzIHRvIGJlIHBpY2tsZWFibGUuIElmIGxlZnQgYE5vbmVgLCBpdFwnc1xuICAgICAgIGBUcnVlYCBieSBkZWZhdWx0IGZvciBzbG90dGVkIGNsYXNzZXMgYW5kIGBgRmFsc2VgYCBmb3IgZGljdCBjbGFzc2VzLlxuXG4gICAgICAgSWYgKmF1dG9fZGV0ZWN0KiBpcyBgVHJ1ZWAsIGFuZCAqZ2V0c3RhdGVfc2V0c3RhdGUqIGlzIGxlZnQgYE5vbmVgLFxuICAgICAgIGFuZCAqKmVpdGhlcioqIGBgX19nZXRzdGF0ZV9fYGAgb3IgYGBfX3NldHN0YXRlX19gYCBpcyBkZXRlY3RlZCBkaXJlY3RseVxuICAgICAgIG9uIHRoZSBjbGFzcyAoaS5lLiBub3QgaW5oZXJpdGVkKSwgaXQgaXMgc2V0IHRvIGBGYWxzZWAgKHRoaXMgaXMgdXN1YWxseVxuICAgICAgIHdoYXQgeW91IHdhbnQpLlxuXG4gICAgOnBhcmFtIG9uX3NldGF0dHI6IEEgY2FsbGFibGUgdGhhdCBpcyBydW4gd2hlbmV2ZXIgdGhlIHVzZXIgYXR0ZW1wdHMgdG8gc2V0XG4gICAgICAgIGFuIGF0dHJpYnV0ZSAoZWl0aGVyIGJ5IGFzc2lnbm1lbnQgbGlrZSBgYGkueCA9IDQyYGAgb3IgYnkgdXNpbmdcbiAgICAgICAgYHNldGF0dHJgIGxpa2UgYGBzZXRhdHRyKGksICJ4IiwgNDIpYGApLiBJdCByZWNlaXZlcyB0aGUgc2FtZSBhcmd1bWVudHNcbiAgICAgICAgYXMgdmFsaWRhdG9yczogdGhlIGluc3RhbmNlLCB0aGUgYXR0cmlidXRlIHRoYXQgaXMgYmVpbmcgbW9kaWZpZWQsIGFuZFxuICAgICAgICB0aGUgbmV3IHZhbHVlLlxuXG4gICAgICAgIElmIG5vIGV4Y2VwdGlvbiBpcyByYWlzZWQsIHRoZSBhdHRyaWJ1dGUgaXMgc2V0IHRvIHRoZSByZXR1cm4gdmFsdWUgb2ZcbiAgICAgICAgdGhlIGNhbGxhYmxlLlxuXG4gICAgICAgIElmIGEgbGlzdCBvZiBjYWxsYWJsZXMgaXMgcGFzc2VkLCB0aGV5XCdyZSBhdXRvbWF0aWNhbGx5IHdyYXBwZWQgaW4gYW5cbiAgICAgICAgYGF0dHJzLnNldHRlcnMucGlwZWAuXG5cbiAgICA6cGFyYW0gT3B0aW9uYWxbY2FsbGFibGVdIGZpZWxkX3RyYW5zZm9ybWVyOlxuICAgICAgICBBIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdpdGggdGhlIG9yaWdpbmFsIGNsYXNzIG9iamVjdCBhbmQgYWxsXG4gICAgICAgIGZpZWxkcyByaWdodCBiZWZvcmUgYGBhdHRyc2BgIGZpbmFsaXplcyB0aGUgY2xhc3MuICBZb3UgY2FuIHVzZVxuICAgICAgICB0aGlzLCBlLmcuLCB0byBhdXRvbWF0aWNhbGx5IGFkZCBjb252ZXJ0ZXJzIG9yIHZhbGlkYXRvcnMgdG9cbiAgICAgICAgZmllbGRzIGJhc2VkIG9uIHRoZWlyIHR5cGVzLiAgU2VlIGB0cmFuc2Zvcm0tZmllbGRzYCBmb3IgbW9yZSBkZXRhaWxzLlxuXG4gICAgOnBhcmFtIGJvb2wgbWF0Y2hfYXJnczpcbiAgICAgICAgSWYgYFRydWVgIChkZWZhdWx0KSwgc2V0IGBgX19tYXRjaF9hcmdzX19gYCBvbiB0aGUgY2xhc3MgdG8gc3VwcG9ydFxuICAgICAgICBgUEVQIDYzNCA8aHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kZXYvcGVwcy9wZXAtMDYzNC8+YF8gKFN0cnVjdHVyYWxcbiAgICAgICAgUGF0dGVybiBNYXRjaGluZykuIEl0IGlzIGEgdHVwbGUgb2YgYWxsIHBvc2l0aW9uYWwtb25seSBgYF9faW5pdF9fYGBcbiAgICAgICAgcGFyYW1ldGVyIG5hbWVzIG9uIFB5dGhvbiAzLjEwIGFuZCBsYXRlci4gSWdub3JlZCBvbiBvbGRlciBQeXRob25cbiAgICAgICAgdmVyc2lvbnMuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNi4wLjAgKnNsb3RzKlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE2LjEuMCAqZnJvemVuKlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE2LjMuMCAqc3RyKlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE2LjMuMCBTdXBwb3J0IGZvciBgYF9fYXR0cnNfcG9zdF9pbml0X19gYC5cbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDE3LjEuMFxuICAgICAgICpoYXNoKiBzdXBwb3J0cyBgYE5vbmVgYCBhcyB2YWx1ZSB3aGljaCBpcyBhbHNvIHRoZSBkZWZhdWx0IG5vdy5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNy4zLjAgKmF1dG9fYXR0cmlicypcbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDE4LjEuMFxuICAgICAgIElmICp0aGVzZSogaXMgcGFzc2VkLCBubyBhdHRyaWJ1dGVzIGFyZSBkZWxldGVkIGZyb20gdGhlIGNsYXNzIGJvZHkuXG4gICAgLi4gdmVyc2lvbmNoYW5nZWQ6OiAxOC4xLjAgSWYgKnRoZXNlKiBpcyBvcmRlcmVkLCB0aGUgb3JkZXIgaXMgcmV0YWluZWQuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTguMi4wICp3ZWFrcmVmX3Nsb3QqXG4gICAgLi4gZGVwcmVjYXRlZDo6IDE4LjIuMFxuICAgICAgIGBgX19sdF9fYGAsIGBgX19sZV9fYGAsIGBgX19ndF9fYGAsIGFuZCBgYF9fZ2VfX2BgIG5vdyByYWlzZSBhXG4gICAgICAgYERlcHJlY2F0aW9uV2FybmluZ2AgaWYgdGhlIGNsYXNzZXMgY29tcGFyZWQgYXJlIHN1YmNsYXNzZXMgb2ZcbiAgICAgICBlYWNoIG90aGVyLiBgYF9fZXFgYCBhbmQgYGBfX25lX19gYCBuZXZlciB0cmllZCB0byBjb21wYXJlZCBzdWJjbGFzc2VzXG4gICAgICAgdG8gZWFjaCBvdGhlci5cbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDE5LjIuMFxuICAgICAgIGBgX19sdF9fYGAsIGBgX19sZV9fYGAsIGBgX19ndF9fYGAsIGFuZCBgYF9fZ2VfX2BgIG5vdyBkbyBub3QgY29uc2lkZXJcbiAgICAgICBzdWJjbGFzc2VzIGNvbXBhcmFibGUgYW55bW9yZS5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOC4yLjAgKmt3X29ubHkqXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTguMi4wICpjYWNoZV9oYXNoKlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE5LjEuMCAqYXV0b19leGMqXG4gICAgLi4gZGVwcmVjYXRlZDo6IDE5LjIuMCAqY21wKiBSZW1vdmFsIG9uIG9yIGFmdGVyIDIwMjEtMDYtMDEuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTkuMi4wICplcSogYW5kICpvcmRlcipcbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4xLjAgKmF1dG9fZGV0ZWN0KlxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMCAqY29sbGVjdF9ieV9tcm8qXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjAuMS4wICpnZXRzdGF0ZV9zZXRzdGF0ZSpcbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4xLjAgKm9uX3NldGF0dHIqXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjAuMy4wICpmaWVsZF90cmFuc2Zvcm1lcipcbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDIxLjEuMFxuICAgICAgIGBgaW5pdD1GYWxzZWBgIGluamVjdHMgYGBfX2F0dHJzX2luaXRfX2BgXG4gICAgLi4gdmVyc2lvbmNoYW5nZWQ6OiAyMS4xLjAgU3VwcG9ydCBmb3IgYGBfX2F0dHJzX3ByZV9pbml0X19gYFxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMjEuMS4wICpjbXAqIHVuZGVwcmVjYXRlZFxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIxLjMuMCAqbWF0Y2hfYXJncypcbiAgICAiIiJcbiAgICBpZiBhdXRvX2RldGVjdCBhbmQgUFkyOlxuICAgICAgICByYWlzZSBQeXRob25Ub29PbGRFcnJvcihcbiAgICAgICAgICAgICJhdXRvX2RldGVjdCBvbmx5IHdvcmtzIG9uIFB5dGhvbiAzIGFuZCBsYXRlci4iXG4gICAgICAgIClcblxuICAgIGVxXywgb3JkZXJfID0gX2RldGVybWluZV9hdHRyc19lcV9vcmRlcihjbXAsIGVxLCBvcmRlciwgTm9uZSlcbiAgICBoYXNoXyA9IGhhc2ggICMgd29yayBhcm91bmQgdGhlIGxhY2sgb2Ygbm9ubG9jYWxcblxuICAgIGlmIGlzaW5zdGFuY2Uob25fc2V0YXR0ciwgKGxpc3QsIHR1cGxlKSk6XG4gICAgICAgIG9uX3NldGF0dHIgPSBzZXR0ZXJzLnBpcGUoKm9uX3NldGF0dHIpXG5cbiAgICBkZWYgd3JhcChjbHMpOlxuXG4gICAgICAgIGlmIGdldGF0dHIoY2xzLCAiX19jbGFzc19fIiwgTm9uZSkgaXMgTm9uZTpcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYXR0cnMgb25seSB3b3JrcyB3aXRoIG5ldy1zdHlsZSBjbGFzc2VzLiIpXG5cbiAgICAgICAgaXNfZnJvemVuID0gZnJvemVuIG9yIF9oYXNfZnJvemVuX2Jhc2VfY2xhc3MoY2xzKVxuICAgICAgICBpc19leGMgPSBhdXRvX2V4YyBpcyBUcnVlIGFuZCBpc3N1YmNsYXNzKGNscywgQmFzZUV4Y2VwdGlvbilcbiAgICAgICAgaGFzX293bl9zZXRhdHRyID0gYXV0b19kZXRlY3QgYW5kIF9oYXNfb3duX2F0dHJpYnV0ZShcbiAgICAgICAgICAgIGNscywgIl9fc2V0YXR0cl9fIlxuICAgICAgICApXG5cbiAgICAgICAgaWYgaGFzX293bl9zZXRhdHRyIGFuZCBpc19mcm96ZW46XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDYW5cJ3QgZnJlZXplIGEgY2xhc3Mgd2l0aCBhIGN1c3RvbSBfX3NldGF0dHJfXy4iKVxuXG4gICAgICAgIGJ1aWxkZXIgPSBfQ2xhc3NCdWlsZGVyKFxuICAgICAgICAgICAgY2xzLFxuICAgICAgICAgICAgdGhlc2UsXG4gICAgICAgICAgICBzbG90cyxcbiAgICAgICAgICAgIGlzX2Zyb3plbixcbiAgICAgICAgICAgIHdlYWtyZWZfc2xvdCxcbiAgICAgICAgICAgIF9kZXRlcm1pbmVfd2hldGhlcl90b19pbXBsZW1lbnQoXG4gICAgICAgICAgICAgICAgY2xzLFxuICAgICAgICAgICAgICAgIGdldHN0YXRlX3NldHN0YXRlLFxuICAgICAgICAgICAgICAgIGF1dG9fZGV0ZWN0LFxuICAgICAgICAgICAgICAgICgiX19nZXRzdGF0ZV9fIiwgIl9fc2V0c3RhdGVfXyIpLFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ9c2xvdHMsXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgYXV0b19hdHRyaWJzLFxuICAgICAgICAgICAga3dfb25seSxcbiAgICAgICAgICAgIGNhY2hlX2hhc2gsXG4gICAgICAgICAgICBpc19leGMsXG4gICAgICAgICAgICBjb2xsZWN0X2J5X21ybyxcbiAgICAgICAgICAgIG9uX3NldGF0dHIsXG4gICAgICAgICAgICBoYXNfb3duX3NldGF0dHIsXG4gICAgICAgICAgICBmaWVsZF90cmFuc2Zvcm1lcixcbiAgICAgICAgKVxuICAgICAgICBpZiBfZGV0ZXJtaW5lX3doZXRoZXJfdG9faW1wbGVtZW50KFxuICAgICAgICAgICAgY2xzLCByZXByLCBhdXRvX2RldGVjdCwgKCJfX3JlcHJfXyIsKVxuICAgICAgICApOlxuICAgICAgICAgICAgYnVpbGRlci5hZGRfcmVwcihyZXByX25zKVxuICAgICAgICBpZiBzdHIgaXMgVHJ1ZTpcbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkX3N0cigpXG5cbiAgICAgICAgZXEgPSBfZGV0ZXJtaW5lX3doZXRoZXJfdG9faW1wbGVtZW50KFxuICAgICAgICAgICAgY2xzLCBlcV8sIGF1dG9fZGV0ZWN0LCAoIl9fZXFfXyIsICJfX25lX18iKVxuICAgICAgICApXG4gICAgICAgIGlmIG5vdCBpc19leGMgYW5kIGVxIGlzIFRydWU6XG4gICAgICAgICAgICBidWlsZGVyLmFkZF9lcSgpXG4gICAgICAgIGlmIG5vdCBpc19leGMgYW5kIF9kZXRlcm1pbmVfd2hldGhlcl90b19pbXBsZW1lbnQoXG4gICAgICAgICAgICBjbHMsIG9yZGVyXywgYXV0b19kZXRlY3QsICgiX19sdF9fIiwgIl9fbGVfXyIsICJfX2d0X18iLCAiX19nZV9fIilcbiAgICAgICAgKTpcbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkX29yZGVyKClcblxuICAgICAgICBidWlsZGVyLmFkZF9zZXRhdHRyKClcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBoYXNoXyBpcyBOb25lXG4gICAgICAgICAgICBhbmQgYXV0b19kZXRlY3QgaXMgVHJ1ZVxuICAgICAgICAgICAgYW5kIF9oYXNfb3duX2F0dHJpYnV0ZShjbHMsICJfX2hhc2hfXyIpXG4gICAgICAgICk6XG4gICAgICAgICAgICBoYXNoID0gRmFsc2VcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGhhc2ggPSBoYXNoX1xuICAgICAgICBpZiBoYXNoIGlzIG5vdCBUcnVlIGFuZCBoYXNoIGlzIG5vdCBGYWxzZSBhbmQgaGFzaCBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICMgQ2FuXCd0IHVzZSBgaGFzaCBpbmAgYmVjYXVzZSAxID09IFRydWUgZm9yIGV4YW1wbGUuXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgIkludmFsaWQgdmFsdWUgZm9yIGhhc2guICBNdXN0IGJlIFRydWUsIEZhbHNlLCBvciBOb25lLiJcbiAgICAgICAgICAgIClcbiAgICAgICAgZWxpZiBoYXNoIGlzIEZhbHNlIG9yIChoYXNoIGlzIE5vbmUgYW5kIGVxIGlzIEZhbHNlKSBvciBpc19leGM6XG4gICAgICAgICAgICAjIERvblwndCBkbyBhbnl0aGluZy4gU2hvdWxkIGZhbGwgYmFjayB0byBfX29iamVjdF9fXCdzIF9faGFzaF9fXG4gICAgICAgICAgICAjIHdoaWNoIGlzIGJ5IGlkLlxuICAgICAgICAgICAgaWYgY2FjaGVfaGFzaDpcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICJJbnZhbGlkIHZhbHVlIGZvciBjYWNoZV9oYXNoLiAgVG8gdXNlIGhhc2ggY2FjaGluZywiXG4gICAgICAgICAgICAgICAgICAgICIgaGFzaGluZyBtdXN0IGJlIGVpdGhlciBleHBsaWNpdGx5IG9yIGltcGxpY2l0bHkgIlxuICAgICAgICAgICAgICAgICAgICAiZW5hYmxlZC4iXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICBlbGlmIGhhc2ggaXMgVHJ1ZSBvciAoXG4gICAgICAgICAgICBoYXNoIGlzIE5vbmUgYW5kIGVxIGlzIFRydWUgYW5kIGlzX2Zyb3plbiBpcyBUcnVlXG4gICAgICAgICk6XG4gICAgICAgICAgICAjIEJ1aWxkIGEgX19oYXNoX18gaWYgdG9sZCBzbywgb3IgaWYgaXRcJ3Mgc2FmZS5cbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkX2hhc2goKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgIyBSYWlzZSBUeXBlRXJyb3Igb24gYXR0ZW1wdHMgdG8gaGFzaC5cbiAgICAgICAgICAgIGlmIGNhY2hlX2hhc2g6XG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAiSW52YWxpZCB2YWx1ZSBmb3IgY2FjaGVfaGFzaC4gIFRvIHVzZSBoYXNoIGNhY2hpbmcsIlxuICAgICAgICAgICAgICAgICAgICAiIGhhc2hpbmcgbXVzdCBiZSBlaXRoZXIgZXhwbGljaXRseSBvciBpbXBsaWNpdGx5ICJcbiAgICAgICAgICAgICAgICAgICAgImVuYWJsZWQuIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIGJ1aWxkZXIubWFrZV91bmhhc2hhYmxlKClcblxuICAgICAgICBpZiBfZGV0ZXJtaW5lX3doZXRoZXJfdG9faW1wbGVtZW50KFxuICAgICAgICAgICAgY2xzLCBpbml0LCBhdXRvX2RldGVjdCwgKCJfX2luaXRfXyIsKVxuICAgICAgICApOlxuICAgICAgICAgICAgYnVpbGRlci5hZGRfaW5pdCgpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBidWlsZGVyLmFkZF9hdHRyc19pbml0KClcbiAgICAgICAgICAgIGlmIGNhY2hlX2hhc2g6XG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAiSW52YWxpZCB2YWx1ZSBmb3IgY2FjaGVfaGFzaC4gIFRvIHVzZSBoYXNoIGNhY2hpbmcsIlxuICAgICAgICAgICAgICAgICAgICAiIGluaXQgbXVzdCBiZSBUcnVlLiJcbiAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgUFkzMTBcbiAgICAgICAgICAgIGFuZCBtYXRjaF9hcmdzXG4gICAgICAgICAgICBhbmQgbm90IF9oYXNfb3duX2F0dHJpYnV0ZShjbHMsICJfX21hdGNoX2FyZ3NfXyIpXG4gICAgICAgICk6XG4gICAgICAgICAgICBidWlsZGVyLmFkZF9tYXRjaF9hcmdzKClcblxuICAgICAgICByZXR1cm4gYnVpbGRlci5idWlsZF9jbGFzcygpXG5cbiAgICAjIG1heWJlX2Nsc1wncyB0eXBlIGRlcGVuZHMgb24gdGhlIHVzYWdlIG9mIHRoZSBkZWNvcmF0b3IuICBJdFwncyBhIGNsYXNzXG4gICAgIyBpZiBpdFwncyB1c2VkIGFzIGBAYXR0cnNgIGJ1dCBgYE5vbmVgYCBpZiB1c2VkIGFzIGBAYXR0cnMoKWAuXG4gICAgaWYgbWF5YmVfY2xzIGlzIE5vbmU6XG4gICAgICAgIHJldHVybiB3cmFwXG4gICAgZWxzZTpcbiAgICAgICAgcmV0dXJuIHdyYXAobWF5YmVfY2xzKVxuXG5cbl9hdHRycyA9IGF0dHJzXG4iIiJcbkludGVybmFsIGFsaWFzIHNvIHdlIGNhbiB1c2UgaXQgaW4gZnVuY3Rpb25zIHRoYXQgdGFrZSBhbiBhcmd1bWVudCBjYWxsZWRcbiphdHRycyouXG4iIiJcblxuXG5pZiBQWTI6XG5cbiAgICBkZWYgX2hhc19mcm96ZW5fYmFzZV9jbGFzcyhjbHMpOlxuICAgICAgICAiIiJcbiAgICAgICAgQ2hlY2sgd2hldGhlciAqY2xzKiBoYXMgYSBmcm96ZW4gYW5jZXN0b3IgYnkgbG9va2luZyBhdCBpdHNcbiAgICAgICAgX19zZXRhdHRyX18uXG4gICAgICAgICIiIlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgZ2V0YXR0cihjbHMuX19zZXRhdHRyX18sICJfX21vZHVsZV9fIiwgTm9uZSlcbiAgICAgICAgICAgID09IF9mcm96ZW5fc2V0YXR0cnMuX19tb2R1bGVfX1xuICAgICAgICAgICAgYW5kIGNscy5fX3NldGF0dHJfXy5fX25hbWVfXyA9PSBfZnJvemVuX3NldGF0dHJzLl9fbmFtZV9fXG4gICAgICAgIClcblxuZWxzZTpcblxuICAgIGRlZiBfaGFzX2Zyb3plbl9iYXNlX2NsYXNzKGNscyk6XG4gICAgICAgICIiIlxuICAgICAgICBDaGVjayB3aGV0aGVyICpjbHMqIGhhcyBhIGZyb3plbiBhbmNlc3RvciBieSBsb29raW5nIGF0IGl0c1xuICAgICAgICBfX3NldGF0dHJfXy5cbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiBjbHMuX19zZXRhdHRyX18gPT0gX2Zyb3plbl9zZXRhdHRyc1xuXG5cbmRlZiBfZ2VuZXJhdGVfdW5pcXVlX2ZpbGVuYW1lKGNscywgZnVuY19uYW1lKTpcbiAgICAiIiJcbiAgICBDcmVhdGUgYSAiZmlsZW5hbWUiIHN1aXRhYmxlIGZvciBhIGZ1bmN0aW9uIGJlaW5nIGdlbmVyYXRlZC5cbiAgICAiIiJcbiAgICB1bmlxdWVfZmlsZW5hbWUgPSAiPGF0dHJzIGdlbmVyYXRlZCB7MH0gezF9LnsyfT4iLmZvcm1hdChcbiAgICAgICAgZnVuY19uYW1lLFxuICAgICAgICBjbHMuX19tb2R1bGVfXyxcbiAgICAgICAgZ2V0YXR0cihjbHMsICJfX3F1YWxuYW1lX18iLCBjbHMuX19uYW1lX18pLFxuICAgIClcbiAgICByZXR1cm4gdW5pcXVlX2ZpbGVuYW1lXG5cblxuZGVmIF9tYWtlX2hhc2goY2xzLCBhdHRycywgZnJvemVuLCBjYWNoZV9oYXNoKTpcbiAgICBhdHRycyA9IHR1cGxlKFxuICAgICAgICBhIGZvciBhIGluIGF0dHJzIGlmIGEuaGFzaCBpcyBUcnVlIG9yIChhLmhhc2ggaXMgTm9uZSBhbmQgYS5lcSBpcyBUcnVlKVxuICAgIClcblxuICAgIHRhYiA9ICIgICAgICAgICJcblxuICAgIHVuaXF1ZV9maWxlbmFtZSA9IF9nZW5lcmF0ZV91bmlxdWVfZmlsZW5hbWUoY2xzLCAiaGFzaCIpXG4gICAgdHlwZV9oYXNoID0gaGFzaCh1bmlxdWVfZmlsZW5hbWUpXG5cbiAgICBoYXNoX2RlZiA9ICJkZWYgX19oYXNoX18oc2VsZiJcbiAgICBoYXNoX2Z1bmMgPSAiaGFzaCgoIlxuICAgIGNsb3NpbmdfYnJhY2VzID0gIikpIlxuICAgIGlmIG5vdCBjYWNoZV9oYXNoOlxuICAgICAgICBoYXNoX2RlZiArPSAiKToiXG4gICAgZWxzZTpcbiAgICAgICAgaWYgbm90IFBZMjpcbiAgICAgICAgICAgIGhhc2hfZGVmICs9ICIsICoiXG5cbiAgICAgICAgaGFzaF9kZWYgKz0gKFxuICAgICAgICAgICAgIiwgX2NhY2hlX3dyYXBwZXI9IlxuICAgICAgICAgICAgKyAiX19pbXBvcnRfXyhcJ2F0dHIuX21ha2VcJykuX21ha2UuX0NhY2hlSGFzaFdyYXBwZXIpOiJcbiAgICAgICAgKVxuICAgICAgICBoYXNoX2Z1bmMgPSAiX2NhY2hlX3dyYXBwZXIoIiArIGhhc2hfZnVuY1xuICAgICAgICBjbG9zaW5nX2JyYWNlcyArPSAiKSJcblxuICAgIG1ldGhvZF9saW5lcyA9IFtoYXNoX2RlZl1cblxuICAgIGRlZiBhcHBlbmRfaGFzaF9jb21wdXRhdGlvbl9saW5lcyhwcmVmaXgsIGluZGVudCk6XG4gICAgICAgICIiIlxuICAgICAgICBHZW5lcmF0ZSB0aGUgY29kZSBmb3IgYWN0dWFsbHkgY29tcHV0aW5nIHRoZSBoYXNoIGNvZGUuXG4gICAgICAgIEJlbG93IHRoaXMgd2lsbCBlaXRoZXIgYmUgcmV0dXJuZWQgZGlyZWN0bHkgb3IgdXNlZCB0byBjb21wdXRlXG4gICAgICAgIGEgdmFsdWUgd2hpY2ggaXMgdGhlbiBjYWNoZWQsIGRlcGVuZGluZyBvbiB0aGUgdmFsdWUgb2YgY2FjaGVfaGFzaFxuICAgICAgICAiIiJcblxuICAgICAgICBtZXRob2RfbGluZXMuZXh0ZW5kKFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIGluZGVudCArIHByZWZpeCArIGhhc2hfZnVuYyxcbiAgICAgICAgICAgICAgICBpbmRlbnQgKyAiICAgICAgICAlZCwiICUgKHR5cGVfaGFzaCwpLFxuICAgICAgICAgICAgXVxuICAgICAgICApXG5cbiAgICAgICAgZm9yIGEgaW4gYXR0cnM6XG4gICAgICAgICAgICBtZXRob2RfbGluZXMuYXBwZW5kKGluZGVudCArICIgICAgICAgIHNlbGYuJXMsIiAlIGEubmFtZSlcblxuICAgICAgICBtZXRob2RfbGluZXMuYXBwZW5kKGluZGVudCArICIgICAgIiArIGNsb3NpbmdfYnJhY2VzKVxuXG4gICAgaWYgY2FjaGVfaGFzaDpcbiAgICAgICAgbWV0aG9kX2xpbmVzLmFwcGVuZCh0YWIgKyAiaWYgc2VsZi4lcyBpcyBOb25lOiIgJSBfaGFzaF9jYWNoZV9maWVsZClcbiAgICAgICAgaWYgZnJvemVuOlxuICAgICAgICAgICAgYXBwZW5kX2hhc2hfY29tcHV0YXRpb25fbGluZXMoXG4gICAgICAgICAgICAgICAgIm9iamVjdC5fX3NldGF0dHJfXyhzZWxmLCBcJyVzXCcsICIgJSBfaGFzaF9jYWNoZV9maWVsZCwgdGFiICogMlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgbWV0aG9kX2xpbmVzLmFwcGVuZCh0YWIgKiAyICsgIikiKSAgIyBjbG9zZSBfX3NldGF0dHJfX1xuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgYXBwZW5kX2hhc2hfY29tcHV0YXRpb25fbGluZXMoXG4gICAgICAgICAgICAgICAgInNlbGYuJXMgPSAiICUgX2hhc2hfY2FjaGVfZmllbGQsIHRhYiAqIDJcbiAgICAgICAgICAgIClcbiAgICAgICAgbWV0aG9kX2xpbmVzLmFwcGVuZCh0YWIgKyAicmV0dXJuIHNlbGYuJXMiICUgX2hhc2hfY2FjaGVfZmllbGQpXG4gICAgZWxzZTpcbiAgICAgICAgYXBwZW5kX2hhc2hfY29tcHV0YXRpb25fbGluZXMoInJldHVybiAiLCB0YWIpXG5cbiAgICBzY3JpcHQgPSAiXFxuIi5qb2luKG1ldGhvZF9saW5lcylcbiAgICByZXR1cm4gX21ha2VfbWV0aG9kKCJfX2hhc2hfXyIsIHNjcmlwdCwgdW5pcXVlX2ZpbGVuYW1lKVxuXG5cbmRlZiBfYWRkX2hhc2goY2xzLCBhdHRycyk6XG4gICAgIiIiXG4gICAgQWRkIGEgaGFzaCBtZXRob2QgdG8gKmNscyouXG4gICAgIiIiXG4gICAgY2xzLl9faGFzaF9fID0gX21ha2VfaGFzaChjbHMsIGF0dHJzLCBmcm96ZW49RmFsc2UsIGNhY2hlX2hhc2g9RmFsc2UpXG4gICAgcmV0dXJuIGNsc1xuXG5cbmRlZiBfbWFrZV9uZSgpOlxuICAgICIiIlxuICAgIENyZWF0ZSBfX25lX18gbWV0aG9kLlxuICAgICIiIlxuXG4gICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgICIiIlxuICAgICAgICBDaGVjayBlcXVhbGl0eSBhbmQgZWl0aGVyIGZvcndhcmQgYSBOb3RJbXBsZW1lbnRlZCBvclxuICAgICAgICByZXR1cm4gdGhlIHJlc3VsdCBuZWdhdGVkLlxuICAgICAgICAiIiJcbiAgICAgICAgcmVzdWx0ID0gc2VsZi5fX2VxX18ob3RoZXIpXG4gICAgICAgIGlmIHJlc3VsdCBpcyBOb3RJbXBsZW1lbnRlZDpcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxuXG4gICAgICAgIHJldHVybiBub3QgcmVzdWx0XG5cbiAgICByZXR1cm4gX19uZV9fXG5cblxuZGVmIF9tYWtlX2VxKGNscywgYXR0cnMpOlxuICAgICIiIlxuICAgIENyZWF0ZSBfX2VxX18gbWV0aG9kIGZvciAqY2xzKiB3aXRoICphdHRycyouXG4gICAgIiIiXG4gICAgYXR0cnMgPSBbYSBmb3IgYSBpbiBhdHRycyBpZiBhLmVxXVxuXG4gICAgdW5pcXVlX2ZpbGVuYW1lID0gX2dlbmVyYXRlX3VuaXF1ZV9maWxlbmFtZShjbHMsICJlcSIpXG4gICAgbGluZXMgPSBbXG4gICAgICAgICJkZWYgX19lcV9fKHNlbGYsIG90aGVyKToiLFxuICAgICAgICAiICAgIGlmIG90aGVyLl9fY2xhc3NfXyBpcyBub3Qgc2VsZi5fX2NsYXNzX186IixcbiAgICAgICAgIiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkIixcbiAgICBdXG5cbiAgICAjIFdlIGNhblwndCBqdXN0IGRvIGEgYmlnIHNlbGYueCA9IG90aGVyLnggYW5kLi4uIGNsYXVzZSBkdWUgdG9cbiAgICAjIGlycmVndWxhcml0aWVzIGxpa2UgbmFuID09IG5hbiBpcyBmYWxzZSBidXQgKG5hbiwpID09IChuYW4sKSBpcyB0cnVlLlxuICAgIGdsb2JzID0ge31cbiAgICBpZiBhdHRyczpcbiAgICAgICAgbGluZXMuYXBwZW5kKCIgICAgcmV0dXJuICAoIilcbiAgICAgICAgb3RoZXJzID0gWyIgICAgKSA9PSAoIl1cbiAgICAgICAgZm9yIGEgaW4gYXR0cnM6XG4gICAgICAgICAgICBpZiBhLmVxX2tleTpcbiAgICAgICAgICAgICAgICBjbXBfbmFtZSA9ICJfJXNfa2V5IiAlIChhLm5hbWUsKVxuICAgICAgICAgICAgICAgICMgQWRkIHRoZSBrZXkgZnVuY3Rpb24gdG8gdGhlIGdsb2JhbCBuYW1lc3BhY2VcbiAgICAgICAgICAgICAgICAjIG9mIHRoZSBldmFsdWF0ZWQgZnVuY3Rpb24uXG4gICAgICAgICAgICAgICAgZ2xvYnNbY21wX25hbWVdID0gYS5lcV9rZXlcbiAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICIgICAgICAgICVzKHNlbGYuJXMpLCJcbiAgICAgICAgICAgICAgICAgICAgJSAoXG4gICAgICAgICAgICAgICAgICAgICAgICBjbXBfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBvdGhlcnMuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAiICAgICAgICAlcyhvdGhlci4lcyksIlxuICAgICAgICAgICAgICAgICAgICAlIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtcF9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoIiAgICAgICAgc2VsZi4lcywiICUgKGEubmFtZSwpKVxuICAgICAgICAgICAgICAgIG90aGVycy5hcHBlbmQoIiAgICAgICAgb3RoZXIuJXMsIiAlIChhLm5hbWUsKSlcblxuICAgICAgICBsaW5lcyArPSBvdGhlcnMgKyBbIiAgICApIl1cbiAgICBlbHNlOlxuICAgICAgICBsaW5lcy5hcHBlbmQoIiAgICByZXR1cm4gVHJ1ZSIpXG5cbiAgICBzY3JpcHQgPSAiXFxuIi5qb2luKGxpbmVzKVxuXG4gICAgcmV0dXJuIF9tYWtlX21ldGhvZCgiX19lcV9fIiwgc2NyaXB0LCB1bmlxdWVfZmlsZW5hbWUsIGdsb2JzKVxuXG5cbmRlZiBfbWFrZV9vcmRlcihjbHMsIGF0dHJzKTpcbiAgICAiIiJcbiAgICBDcmVhdGUgb3JkZXJpbmcgbWV0aG9kcyBmb3IgKmNscyogd2l0aCAqYXR0cnMqLlxuICAgICIiIlxuICAgIGF0dHJzID0gW2EgZm9yIGEgaW4gYXR0cnMgaWYgYS5vcmRlcl1cblxuICAgIGRlZiBhdHRyc190b190dXBsZShvYmopOlxuICAgICAgICAiIiJcbiAgICAgICAgU2F2ZSB1cyBzb21lIHR5cGluZy5cbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiB0dXBsZShcbiAgICAgICAgICAgIGtleSh2YWx1ZSkgaWYga2V5IGVsc2UgdmFsdWVcbiAgICAgICAgICAgIGZvciB2YWx1ZSwga2V5IGluIChcbiAgICAgICAgICAgICAgICAoZ2V0YXR0cihvYmosIGEubmFtZSksIGEub3JkZXJfa2V5KSBmb3IgYSBpbiBhdHRyc1xuICAgICAgICAgICAgKVxuICAgICAgICApXG5cbiAgICBkZWYgX19sdF9fKHNlbGYsIG90aGVyKTpcbiAgICAgICAgIiIiXG4gICAgICAgIEF1dG9tYXRpY2FsbHkgY3JlYXRlZCBieSBhdHRycy5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG90aGVyLl9fY2xhc3NfXyBpcyBzZWxmLl9fY2xhc3NfXzpcbiAgICAgICAgICAgIHJldHVybiBhdHRyc190b190dXBsZShzZWxmKSA8IGF0dHJzX3RvX3R1cGxlKG90aGVyKVxuXG4gICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxuXG4gICAgZGVmIF9fbGVfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgICIiIlxuICAgICAgICBBdXRvbWF0aWNhbGx5IGNyZWF0ZWQgYnkgYXR0cnMuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBvdGhlci5fX2NsYXNzX18gaXMgc2VsZi5fX2NsYXNzX186XG4gICAgICAgICAgICByZXR1cm4gYXR0cnNfdG9fdHVwbGUoc2VsZikgPD0gYXR0cnNfdG9fdHVwbGUob3RoZXIpXG5cbiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXG5cbiAgICBkZWYgX19ndF9fKHNlbGYsIG90aGVyKTpcbiAgICAgICAgIiIiXG4gICAgICAgIEF1dG9tYXRpY2FsbHkgY3JlYXRlZCBieSBhdHRycy5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG90aGVyLl9fY2xhc3NfXyBpcyBzZWxmLl9fY2xhc3NfXzpcbiAgICAgICAgICAgIHJldHVybiBhdHRyc190b190dXBsZShzZWxmKSA+IGF0dHJzX3RvX3R1cGxlKG90aGVyKVxuXG4gICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxuXG4gICAgZGVmIF9fZ2VfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgICIiIlxuICAgICAgICBBdXRvbWF0aWNhbGx5IGNyZWF0ZWQgYnkgYXR0cnMuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBvdGhlci5fX2NsYXNzX18gaXMgc2VsZi5fX2NsYXNzX186XG4gICAgICAgICAgICByZXR1cm4gYXR0cnNfdG9fdHVwbGUoc2VsZikgPj0gYXR0cnNfdG9fdHVwbGUob3RoZXIpXG5cbiAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXG5cbiAgICByZXR1cm4gX19sdF9fLCBfX2xlX18sIF9fZ3RfXywgX19nZV9fXG5cblxuZGVmIF9hZGRfZXEoY2xzLCBhdHRycz1Ob25lKTpcbiAgICAiIiJcbiAgICBBZGQgZXF1YWxpdHkgbWV0aG9kcyB0byAqY2xzKiB3aXRoICphdHRycyouXG4gICAgIiIiXG4gICAgaWYgYXR0cnMgaXMgTm9uZTpcbiAgICAgICAgYXR0cnMgPSBjbHMuX19hdHRyc19hdHRyc19fXG5cbiAgICBjbHMuX19lcV9fID0gX21ha2VfZXEoY2xzLCBhdHRycylcbiAgICBjbHMuX19uZV9fID0gX21ha2VfbmUoKVxuXG4gICAgcmV0dXJuIGNsc1xuXG5cbmlmIEhBU19GX1NUUklOR1M6XG5cbiAgICBkZWYgX21ha2VfcmVwcihhdHRycywgbnMsIGNscyk6XG4gICAgICAgIHVuaXF1ZV9maWxlbmFtZSA9IF9nZW5lcmF0ZV91bmlxdWVfZmlsZW5hbWUoY2xzLCAicmVwciIpXG4gICAgICAgICMgRmlndXJlIG91dCB3aGljaCBhdHRyaWJ1dGVzIHRvIGluY2x1ZGUsIGFuZCB3aGljaCBmdW5jdGlvbiB0byB1c2UgdG9cbiAgICAgICAgIyBmb3JtYXQgdGhlbS4gVGhlIGEucmVwciB2YWx1ZSBjYW4gYmUgZWl0aGVyIGJvb2wgb3IgYSBjdXN0b21cbiAgICAgICAgIyBjYWxsYWJsZS5cbiAgICAgICAgYXR0cl9uYW1lc193aXRoX3JlcHJzID0gdHVwbGUoXG4gICAgICAgICAgICAoYS5uYW1lLCAocmVwciBpZiBhLnJlcHIgaXMgVHJ1ZSBlbHNlIGEucmVwciksIGEuaW5pdClcbiAgICAgICAgICAgIGZvciBhIGluIGF0dHJzXG4gICAgICAgICAgICBpZiBhLnJlcHIgaXMgbm90IEZhbHNlXG4gICAgICAgIClcbiAgICAgICAgZ2xvYnMgPSB7XG4gICAgICAgICAgICBuYW1lICsgIl9yZXByIjogclxuICAgICAgICAgICAgZm9yIG5hbWUsIHIsIF8gaW4gYXR0cl9uYW1lc193aXRoX3JlcHJzXG4gICAgICAgICAgICBpZiByICE9IHJlcHJcbiAgICAgICAgfVxuICAgICAgICBnbG9ic1siX2NvbXBhdCJdID0gX2NvbXBhdFxuICAgICAgICBnbG9ic1siQXR0cmlidXRlRXJyb3IiXSA9IEF0dHJpYnV0ZUVycm9yXG4gICAgICAgIGdsb2JzWyJOT1RISU5HIl0gPSBOT1RISU5HXG4gICAgICAgIGF0dHJpYnV0ZV9mcmFnbWVudHMgPSBbXVxuICAgICAgICBmb3IgbmFtZSwgciwgaSBpbiBhdHRyX25hbWVzX3dpdGhfcmVwcnM6XG4gICAgICAgICAgICBhY2Nlc3NvciA9IChcbiAgICAgICAgICAgICAgICAic2VsZi4iICsgbmFtZVxuICAgICAgICAgICAgICAgIGlmIGlcbiAgICAgICAgICAgICAgICBlbHNlIFwnZ2V0YXR0cihzZWxmLCAiXCcgKyBuYW1lICsgXCciLCBOT1RISU5HKVwnXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBmcmFnbWVudCA9IChcbiAgICAgICAgICAgICAgICAiJXM9eyVzIXJ9IiAlIChuYW1lLCBhY2Nlc3NvcilcbiAgICAgICAgICAgICAgICBpZiByID09IHJlcHJcbiAgICAgICAgICAgICAgICBlbHNlICIlcz17JXNfcmVwciglcyl9IiAlIChuYW1lLCBuYW1lLCBhY2Nlc3NvcilcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGF0dHJpYnV0ZV9mcmFnbWVudHMuYXBwZW5kKGZyYWdtZW50KVxuICAgICAgICByZXByX2ZyYWdtZW50ID0gIiwgIi5qb2luKGF0dHJpYnV0ZV9mcmFnbWVudHMpXG5cbiAgICAgICAgaWYgbnMgaXMgTm9uZTpcbiAgICAgICAgICAgIGNsc19uYW1lX2ZyYWdtZW50ID0gKFxuICAgICAgICAgICAgICAgIFwne3NlbGYuX19jbGFzc19fLl9fcXVhbG5hbWVfXy5yc3BsaXQoIj4uIiwgMSlbLTFdfVwnXG4gICAgICAgICAgICApXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBjbHNfbmFtZV9mcmFnbWVudCA9IG5zICsgIi57c2VsZi5fX2NsYXNzX18uX19uYW1lX199IlxuXG4gICAgICAgIGxpbmVzID0gW1xuICAgICAgICAgICAgImRlZiBfX3JlcHJfXyhzZWxmKToiLFxuICAgICAgICAgICAgIiAgdHJ5OiIsXG4gICAgICAgICAgICAiICAgIGFscmVhZHlfcmVwcmluZyA9IF9jb21wYXQucmVwcl9jb250ZXh0LmFscmVhZHlfcmVwcmluZyIsXG4gICAgICAgICAgICAiICBleGNlcHQgQXR0cmlidXRlRXJyb3I6IixcbiAgICAgICAgICAgICIgICAgYWxyZWFkeV9yZXByaW5nID0ge2lkKHNlbGYpLH0iLFxuICAgICAgICAgICAgIiAgICBfY29tcGF0LnJlcHJfY29udGV4dC5hbHJlYWR5X3JlcHJpbmcgPSBhbHJlYWR5X3JlcHJpbmciLFxuICAgICAgICAgICAgIiAgZWxzZToiLFxuICAgICAgICAgICAgIiAgICBpZiBpZChzZWxmKSBpbiBhbHJlYWR5X3JlcHJpbmc6IixcbiAgICAgICAgICAgICIgICAgICByZXR1cm4gXCcuLi5cJyIsXG4gICAgICAgICAgICAiICAgIGVsc2U6IixcbiAgICAgICAgICAgICIgICAgICBhbHJlYWR5X3JlcHJpbmcuYWRkKGlkKHNlbGYpKSIsXG4gICAgICAgICAgICAiICB0cnk6IixcbiAgICAgICAgICAgICIgICAgcmV0dXJuIGZcJyVzKCVzKVwnIiAlIChjbHNfbmFtZV9mcmFnbWVudCwgcmVwcl9mcmFnbWVudCksXG4gICAgICAgICAgICAiICBmaW5hbGx5OiIsXG4gICAgICAgICAgICAiICAgIGFscmVhZHlfcmVwcmluZy5yZW1vdmUoaWQoc2VsZikpIixcbiAgICAgICAgXVxuXG4gICAgICAgIHJldHVybiBfbWFrZV9tZXRob2QoXG4gICAgICAgICAgICAiX19yZXByX18iLCAiXFxuIi5qb2luKGxpbmVzKSwgdW5pcXVlX2ZpbGVuYW1lLCBnbG9icz1nbG9ic1xuICAgICAgICApXG5cbmVsc2U6XG5cbiAgICBkZWYgX21ha2VfcmVwcihhdHRycywgbnMsIF8pOlxuICAgICAgICAiIiJcbiAgICAgICAgTWFrZSBhIHJlcHIgbWV0aG9kIHRoYXQgaW5jbHVkZXMgcmVsZXZhbnQgKmF0dHJzKiwgYWRkaW5nICpucyogdG8gdGhlXG4gICAgICAgIGZ1bGwgbmFtZS5cbiAgICAgICAgIiIiXG5cbiAgICAgICAgIyBGaWd1cmUgb3V0IHdoaWNoIGF0dHJpYnV0ZXMgdG8gaW5jbHVkZSwgYW5kIHdoaWNoIGZ1bmN0aW9uIHRvIHVzZSB0b1xuICAgICAgICAjIGZvcm1hdCB0aGVtLiBUaGUgYS5yZXByIHZhbHVlIGNhbiBiZSBlaXRoZXIgYm9vbCBvciBhIGN1c3RvbVxuICAgICAgICAjIGNhbGxhYmxlLlxuICAgICAgICBhdHRyX25hbWVzX3dpdGhfcmVwcnMgPSB0dXBsZShcbiAgICAgICAgICAgIChhLm5hbWUsIHJlcHIgaWYgYS5yZXByIGlzIFRydWUgZWxzZSBhLnJlcHIpXG4gICAgICAgICAgICBmb3IgYSBpbiBhdHRyc1xuICAgICAgICAgICAgaWYgYS5yZXByIGlzIG5vdCBGYWxzZVxuICAgICAgICApXG5cbiAgICAgICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICAgICAgIiIiXG4gICAgICAgICAgICBBdXRvbWF0aWNhbGx5IGNyZWF0ZWQgYnkgYXR0cnMuXG4gICAgICAgICAgICAiIiJcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBhbHJlYWR5X3JlcHJpbmcgPSBfY29tcGF0LnJlcHJfY29udGV4dC5hbHJlYWR5X3JlcHJpbmdcbiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjpcbiAgICAgICAgICAgICAgICBhbHJlYWR5X3JlcHJpbmcgPSBzZXQoKVxuICAgICAgICAgICAgICAgIF9jb21wYXQucmVwcl9jb250ZXh0LmFscmVhZHlfcmVwcmluZyA9IGFscmVhZHlfcmVwcmluZ1xuXG4gICAgICAgICAgICBpZiBpZChzZWxmKSBpbiBhbHJlYWR5X3JlcHJpbmc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICIuLi4iXG4gICAgICAgICAgICByZWFsX2NscyA9IHNlbGYuX19jbGFzc19fXG4gICAgICAgICAgICBpZiBucyBpcyBOb25lOlxuICAgICAgICAgICAgICAgIHF1YWxuYW1lID0gZ2V0YXR0cihyZWFsX2NscywgIl9fcXVhbG5hbWVfXyIsIE5vbmUpXG4gICAgICAgICAgICAgICAgaWYgcXVhbG5hbWUgaXMgbm90IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcbiAgICAgICAgICAgICAgICAgICAgIyBUaGlzIGNhc2Ugb25seSBoYXBwZW5zIG9uIFB5dGhvbiAzLjUgYW5kIDMuNi4gV2UgZXhjbHVkZVxuICAgICAgICAgICAgICAgICAgICAjIGl0IGZyb20gY292ZXJhZ2UsIGJlY2F1c2Ugd2UgZG9uXCd0IHdhbnQgdG8gc2xvdyBkb3duIG91clxuICAgICAgICAgICAgICAgICAgICAjIHRlc3Qgc3VpdGUgYnkgcnVubmluZyB0aGVtIHVuZGVyIGNvdmVyYWdlIHRvbyBmb3IgdGhpc1xuICAgICAgICAgICAgICAgICAgICAjIG9uZSBsaW5lLlxuICAgICAgICAgICAgICAgICAgICBjbGFzc19uYW1lID0gcXVhbG5hbWUucnNwbGl0KCI+LiIsIDEpWy0xXVxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzX25hbWUgPSByZWFsX2Nscy5fX25hbWVfX1xuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBjbGFzc19uYW1lID0gbnMgKyAiLiIgKyByZWFsX2Nscy5fX25hbWVfX1xuXG4gICAgICAgICAgICAjIFNpbmNlIFwnc2VsZlwnIHJlbWFpbnMgb24gdGhlIHN0YWNrIChpLmUuOiBzdHJvbmdseSByZWZlcmVuY2VkKVxuICAgICAgICAgICAgIyBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoaXMgY2FsbCwgaXRcJ3Mgc2FmZSB0byBkZXBlbmQgb24gaWQoLi4uKVxuICAgICAgICAgICAgIyBzdGFiaWxpdHksIGFuZCBub3QgbmVlZCB0byB0cmFjayB0aGUgaW5zdGFuY2UgYW5kIHRoZXJlZm9yZVxuICAgICAgICAgICAgIyB3b3JyeSBhYm91dCBwcm9wZXJ0aWVzIGxpa2Ugd2Vha3JlZi0gb3IgaGFzaC1hYmlsaXR5LlxuICAgICAgICAgICAgYWxyZWFkeV9yZXByaW5nLmFkZChpZChzZWxmKSlcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBbY2xhc3NfbmFtZSwgIigiXVxuICAgICAgICAgICAgICAgIGZpcnN0ID0gVHJ1ZVxuICAgICAgICAgICAgICAgIGZvciBuYW1lLCBhdHRyX3JlcHIgaW4gYXR0cl9uYW1lc193aXRoX3JlcHJzOlxuICAgICAgICAgICAgICAgICAgICBpZiBmaXJzdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0ID0gRmFsc2VcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoIiwgIilcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmV4dGVuZChcbiAgICAgICAgICAgICAgICAgICAgICAgIChuYW1lLCAiPSIsIGF0dHJfcmVwcihnZXRhdHRyKHNlbGYsIG5hbWUsIE5PVEhJTkcpKSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHJldHVybiAiIi5qb2luKHJlc3VsdCkgKyAiKSJcbiAgICAgICAgICAgIGZpbmFsbHk6XG4gICAgICAgICAgICAgICAgYWxyZWFkeV9yZXByaW5nLnJlbW92ZShpZChzZWxmKSlcblxuICAgICAgICByZXR1cm4gX19yZXByX19cblxuXG5kZWYgX2FkZF9yZXByKGNscywgbnM9Tm9uZSwgYXR0cnM9Tm9uZSk6XG4gICAgIiIiXG4gICAgQWRkIGEgcmVwciBtZXRob2QgdG8gKmNscyouXG4gICAgIiIiXG4gICAgaWYgYXR0cnMgaXMgTm9uZTpcbiAgICAgICAgYXR0cnMgPSBjbHMuX19hdHRyc19hdHRyc19fXG5cbiAgICBjbHMuX19yZXByX18gPSBfbWFrZV9yZXByKGF0dHJzLCBucywgY2xzKVxuICAgIHJldHVybiBjbHNcblxuXG5kZWYgZmllbGRzKGNscyk6XG4gICAgIiIiXG4gICAgUmV0dXJuIHRoZSB0dXBsZSBvZiBgYGF0dHJzYGAgYXR0cmlidXRlcyBmb3IgYSBjbGFzcy5cblxuICAgIFRoZSB0dXBsZSBhbHNvIGFsbG93cyBhY2Nlc3NpbmcgdGhlIGZpZWxkcyBieSB0aGVpciBuYW1lcyAoc2VlIGJlbG93IGZvclxuICAgIGV4YW1wbGVzKS5cblxuICAgIDpwYXJhbSB0eXBlIGNsczogQ2xhc3MgdG8gaW50cm9zcGVjdC5cblxuICAgIDpyYWlzZSBUeXBlRXJyb3I6IElmICpjbHMqIGlzIG5vdCBhIGNsYXNzLlxuICAgIDpyYWlzZSBhdHRyLmV4Y2VwdGlvbnMuTm90QW5BdHRyc0NsYXNzRXJyb3I6IElmICpjbHMqIGlzIG5vdCBhbiBgYGF0dHJzYGBcbiAgICAgICAgY2xhc3MuXG5cbiAgICA6cnR5cGU6IHR1cGxlICh3aXRoIG5hbWUgYWNjZXNzb3JzKSBvZiBgYXR0cnMuQXR0cmlidXRlYFxuXG4gICAgLi4gIHZlcnNpb25jaGFuZ2VkOjogMTYuMi4wIFJldHVybmVkIHR1cGxlIGFsbG93cyBhY2Nlc3NpbmcgdGhlIGZpZWxkc1xuICAgICAgICBieSBuYW1lLlxuICAgICIiIlxuICAgIGlmIG5vdCBpc2NsYXNzKGNscyk6XG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiUGFzc2VkIG9iamVjdCBtdXN0IGJlIGEgY2xhc3MuIilcbiAgICBhdHRycyA9IGdldGF0dHIoY2xzLCAiX19hdHRyc19hdHRyc19fIiwgTm9uZSlcbiAgICBpZiBhdHRycyBpcyBOb25lOlxuICAgICAgICByYWlzZSBOb3RBbkF0dHJzQ2xhc3NFcnJvcihcbiAgICAgICAgICAgICJ7Y2xzIXJ9IGlzIG5vdCBhbiBhdHRycy1kZWNvcmF0ZWQgY2xhc3MuIi5mb3JtYXQoY2xzPWNscylcbiAgICAgICAgKVxuICAgIHJldHVybiBhdHRyc1xuXG5cbmRlZiBmaWVsZHNfZGljdChjbHMpOlxuICAgICIiIlxuICAgIFJldHVybiBhbiBvcmRlcmVkIGRpY3Rpb25hcnkgb2YgYGBhdHRyc2BgIGF0dHJpYnV0ZXMgZm9yIGEgY2xhc3MsIHdob3NlXG4gICAga2V5cyBhcmUgdGhlIGF0dHJpYnV0ZSBuYW1lcy5cblxuICAgIDpwYXJhbSB0eXBlIGNsczogQ2xhc3MgdG8gaW50cm9zcGVjdC5cblxuICAgIDpyYWlzZSBUeXBlRXJyb3I6IElmICpjbHMqIGlzIG5vdCBhIGNsYXNzLlxuICAgIDpyYWlzZSBhdHRyLmV4Y2VwdGlvbnMuTm90QW5BdHRyc0NsYXNzRXJyb3I6IElmICpjbHMqIGlzIG5vdCBhbiBgYGF0dHJzYGBcbiAgICAgICAgY2xhc3MuXG5cbiAgICA6cnR5cGU6IGFuIG9yZGVyZWQgZGljdCB3aGVyZSBrZXlzIGFyZSBhdHRyaWJ1dGUgbmFtZXMgYW5kIHZhbHVlcyBhcmVcbiAgICAgICAgYGF0dHJzLkF0dHJpYnV0ZWBcXFxcIHMuIFRoaXMgd2lsbCBiZSBhIGBkaWN0YCBpZiBpdFwnc1xuICAgICAgICBuYXR1cmFsbHkgb3JkZXJlZCBsaWtlIG9uIFB5dGhvbiAzLjYrIG9yIGFuXG4gICAgICAgIDpjbGFzczpgfmNvbGxlY3Rpb25zLk9yZGVyZWREaWN0YCBvdGhlcndpc2UuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOC4xLjBcbiAgICAiIiJcbiAgICBpZiBub3QgaXNjbGFzcyhjbHMpOlxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlBhc3NlZCBvYmplY3QgbXVzdCBiZSBhIGNsYXNzLiIpXG4gICAgYXR0cnMgPSBnZXRhdHRyKGNscywgIl9fYXR0cnNfYXR0cnNfXyIsIE5vbmUpXG4gICAgaWYgYXR0cnMgaXMgTm9uZTpcbiAgICAgICAgcmFpc2UgTm90QW5BdHRyc0NsYXNzRXJyb3IoXG4gICAgICAgICAgICAie2NscyFyfSBpcyBub3QgYW4gYXR0cnMtZGVjb3JhdGVkIGNsYXNzLiIuZm9ybWF0KGNscz1jbHMpXG4gICAgICAgIClcbiAgICByZXR1cm4gb3JkZXJlZF9kaWN0KCgoYS5uYW1lLCBhKSBmb3IgYSBpbiBhdHRycykpXG5cblxuZGVmIHZhbGlkYXRlKGluc3QpOlxuICAgICIiIlxuICAgIFZhbGlkYXRlIGFsbCBhdHRyaWJ1dGVzIG9uICppbnN0KiB0aGF0IGhhdmUgYSB2YWxpZGF0b3IuXG5cbiAgICBMZWF2ZXMgYWxsIGV4Y2VwdGlvbnMgdGhyb3VnaC5cblxuICAgIDpwYXJhbSBpbnN0OiBJbnN0YW5jZSBvZiBhIGNsYXNzIHdpdGggYGBhdHRyc2BgIGF0dHJpYnV0ZXMuXG4gICAgIiIiXG4gICAgaWYgX2NvbmZpZy5fcnVuX3ZhbGlkYXRvcnMgaXMgRmFsc2U6XG4gICAgICAgIHJldHVyblxuXG4gICAgZm9yIGEgaW4gZmllbGRzKGluc3QuX19jbGFzc19fKTpcbiAgICAgICAgdiA9IGEudmFsaWRhdG9yXG4gICAgICAgIGlmIHYgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICB2KGluc3QsIGEsIGdldGF0dHIoaW5zdCwgYS5uYW1lKSlcblxuXG5kZWYgX2lzX3Nsb3RfY2xzKGNscyk6XG4gICAgcmV0dXJuICJfX3Nsb3RzX18iIGluIGNscy5fX2RpY3RfX1xuXG5cbmRlZiBfaXNfc2xvdF9hdHRyKGFfbmFtZSwgYmFzZV9hdHRyX21hcCk6XG4gICAgIiIiXG4gICAgQ2hlY2sgaWYgdGhlIGF0dHJpYnV0ZSBuYW1lIGNvbWVzIGZyb20gYSBzbG90IGNsYXNzLlxuICAgICIiIlxuICAgIHJldHVybiBhX25hbWUgaW4gYmFzZV9hdHRyX21hcCBhbmQgX2lzX3Nsb3RfY2xzKGJhc2VfYXR0cl9tYXBbYV9uYW1lXSlcblxuXG5kZWYgX21ha2VfaW5pdChcbiAgICBjbHMsXG4gICAgYXR0cnMsXG4gICAgcHJlX2luaXQsXG4gICAgcG9zdF9pbml0LFxuICAgIGZyb3plbixcbiAgICBzbG90cyxcbiAgICBjYWNoZV9oYXNoLFxuICAgIGJhc2VfYXR0cl9tYXAsXG4gICAgaXNfZXhjLFxuICAgIGNsc19vbl9zZXRhdHRyLFxuICAgIGF0dHJzX2luaXQsXG4pOlxuICAgIGhhc19jbHNfb25fc2V0YXR0ciA9IChcbiAgICAgICAgY2xzX29uX3NldGF0dHIgaXMgbm90IE5vbmUgYW5kIGNsc19vbl9zZXRhdHRyIGlzIG5vdCBzZXR0ZXJzLk5PX09QXG4gICAgKVxuXG4gICAgaWYgZnJvemVuIGFuZCBoYXNfY2xzX29uX3NldGF0dHI6XG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkZyb3plbiBjbGFzc2VzIGNhblwndCB1c2Ugb25fc2V0YXR0ci4iKVxuXG4gICAgbmVlZHNfY2FjaGVkX3NldGF0dHIgPSBjYWNoZV9oYXNoIG9yIGZyb3plblxuICAgIGZpbHRlcmVkX2F0dHJzID0gW11cbiAgICBhdHRyX2RpY3QgPSB7fVxuICAgIGZvciBhIGluIGF0dHJzOlxuICAgICAgICBpZiBub3QgYS5pbml0IGFuZCBhLmRlZmF1bHQgaXMgTk9USElORzpcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgZmlsdGVyZWRfYXR0cnMuYXBwZW5kKGEpXG4gICAgICAgIGF0dHJfZGljdFthLm5hbWVdID0gYVxuXG4gICAgICAgIGlmIGEub25fc2V0YXR0ciBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIGlmIGZyb3plbiBpcyBUcnVlOlxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkZyb3plbiBjbGFzc2VzIGNhblwndCB1c2Ugb25fc2V0YXR0ci4iKVxuXG4gICAgICAgICAgICBuZWVkc19jYWNoZWRfc2V0YXR0ciA9IFRydWVcbiAgICAgICAgZWxpZiBoYXNfY2xzX29uX3NldGF0dHIgYW5kIGEub25fc2V0YXR0ciBpcyBub3Qgc2V0dGVycy5OT19PUDpcbiAgICAgICAgICAgIG5lZWRzX2NhY2hlZF9zZXRhdHRyID0gVHJ1ZVxuXG4gICAgdW5pcXVlX2ZpbGVuYW1lID0gX2dlbmVyYXRlX3VuaXF1ZV9maWxlbmFtZShjbHMsICJpbml0IilcblxuICAgIHNjcmlwdCwgZ2xvYnMsIGFubm90YXRpb25zID0gX2F0dHJzX3RvX2luaXRfc2NyaXB0KFxuICAgICAgICBmaWx0ZXJlZF9hdHRycyxcbiAgICAgICAgZnJvemVuLFxuICAgICAgICBzbG90cyxcbiAgICAgICAgcHJlX2luaXQsXG4gICAgICAgIHBvc3RfaW5pdCxcbiAgICAgICAgY2FjaGVfaGFzaCxcbiAgICAgICAgYmFzZV9hdHRyX21hcCxcbiAgICAgICAgaXNfZXhjLFxuICAgICAgICBuZWVkc19jYWNoZWRfc2V0YXR0cixcbiAgICAgICAgaGFzX2Nsc19vbl9zZXRhdHRyLFxuICAgICAgICBhdHRyc19pbml0LFxuICAgIClcbiAgICBpZiBjbHMuX19tb2R1bGVfXyBpbiBzeXMubW9kdWxlczpcbiAgICAgICAgIyBUaGlzIG1ha2VzIHR5cGluZy5nZXRfdHlwZV9oaW50cyhDTFMuX19pbml0X18pIHJlc29sdmUgc3RyaW5nIHR5cGVzLlxuICAgICAgICBnbG9icy51cGRhdGUoc3lzLm1vZHVsZXNbY2xzLl9fbW9kdWxlX19dLl9fZGljdF9fKVxuXG4gICAgZ2xvYnMudXBkYXRlKHsiTk9USElORyI6IE5PVEhJTkcsICJhdHRyX2RpY3QiOiBhdHRyX2RpY3R9KVxuXG4gICAgaWYgbmVlZHNfY2FjaGVkX3NldGF0dHI6XG4gICAgICAgICMgU2F2ZSB0aGUgbG9va3VwIG92ZXJoZWFkIGluIF9faW5pdF9fIGlmIHdlIG5lZWQgdG8gY2lyY3VtdmVudFxuICAgICAgICAjIHNldGF0dHIgaG9va3MuXG4gICAgICAgIGdsb2JzWyJfY2FjaGVkX3NldGF0dHIiXSA9IF9vYmpfc2V0YXR0clxuXG4gICAgaW5pdCA9IF9tYWtlX21ldGhvZChcbiAgICAgICAgIl9fYXR0cnNfaW5pdF9fIiBpZiBhdHRyc19pbml0IGVsc2UgIl9faW5pdF9fIixcbiAgICAgICAgc2NyaXB0LFxuICAgICAgICB1bmlxdWVfZmlsZW5hbWUsXG4gICAgICAgIGdsb2JzLFxuICAgIClcbiAgICBpbml0Ll9fYW5ub3RhdGlvbnNfXyA9IGFubm90YXRpb25zXG5cbiAgICByZXR1cm4gaW5pdFxuXG5cbmRlZiBfc2V0YXR0cihhdHRyX25hbWUsIHZhbHVlX3ZhciwgaGFzX29uX3NldGF0dHIpOlxuICAgICIiIlxuICAgIFVzZSB0aGUgY2FjaGVkIG9iamVjdC5zZXRhdHRyIHRvIHNldCAqYXR0cl9uYW1lKiB0byAqdmFsdWVfdmFyKi5cbiAgICAiIiJcbiAgICByZXR1cm4gIl9zZXRhdHRyKFwnJXNcJywgJXMpIiAlIChhdHRyX25hbWUsIHZhbHVlX3ZhcilcblxuXG5kZWYgX3NldGF0dHJfd2l0aF9jb252ZXJ0ZXIoYXR0cl9uYW1lLCB2YWx1ZV92YXIsIGhhc19vbl9zZXRhdHRyKTpcbiAgICAiIiJcbiAgICBVc2UgdGhlIGNhY2hlZCBvYmplY3Quc2V0YXR0ciB0byBzZXQgKmF0dHJfbmFtZSogdG8gKnZhbHVlX3ZhciosIGJ1dCBydW5cbiAgICBpdHMgY29udmVydGVyIGZpcnN0LlxuICAgICIiIlxuICAgIHJldHVybiAiX3NldGF0dHIoXCclc1wnLCAlcyglcykpIiAlIChcbiAgICAgICAgYXR0cl9uYW1lLFxuICAgICAgICBfaW5pdF9jb252ZXJ0ZXJfcGF0ICUgKGF0dHJfbmFtZSwpLFxuICAgICAgICB2YWx1ZV92YXIsXG4gICAgKVxuXG5cbmRlZiBfYXNzaWduKGF0dHJfbmFtZSwgdmFsdWUsIGhhc19vbl9zZXRhdHRyKTpcbiAgICAiIiJcbiAgICBVbmxlc3MgKmF0dHJfbmFtZSogaGFzIGFuIG9uX3NldGF0dHIgaG9vaywgdXNlIG5vcm1hbCBhc3NpZ25tZW50LiBPdGhlcndpc2VcbiAgICByZWxlZ2F0ZSB0byBfc2V0YXR0ci5cbiAgICAiIiJcbiAgICBpZiBoYXNfb25fc2V0YXR0cjpcbiAgICAgICAgcmV0dXJuIF9zZXRhdHRyKGF0dHJfbmFtZSwgdmFsdWUsIFRydWUpXG5cbiAgICByZXR1cm4gInNlbGYuJXMgPSAlcyIgJSAoYXR0cl9uYW1lLCB2YWx1ZSlcblxuXG5kZWYgX2Fzc2lnbl93aXRoX2NvbnZlcnRlcihhdHRyX25hbWUsIHZhbHVlX3ZhciwgaGFzX29uX3NldGF0dHIpOlxuICAgICIiIlxuICAgIFVubGVzcyAqYXR0cl9uYW1lKiBoYXMgYW4gb25fc2V0YXR0ciBob29rLCB1c2Ugbm9ybWFsIGFzc2lnbm1lbnQgYWZ0ZXJcbiAgICBjb252ZXJzaW9uLiBPdGhlcndpc2UgcmVsZWdhdGUgdG8gX3NldGF0dHJfd2l0aF9jb252ZXJ0ZXIuXG4gICAgIiIiXG4gICAgaWYgaGFzX29uX3NldGF0dHI6XG4gICAgICAgIHJldHVybiBfc2V0YXR0cl93aXRoX2NvbnZlcnRlcihhdHRyX25hbWUsIHZhbHVlX3ZhciwgVHJ1ZSlcblxuICAgIHJldHVybiAic2VsZi4lcyA9ICVzKCVzKSIgJSAoXG4gICAgICAgIGF0dHJfbmFtZSxcbiAgICAgICAgX2luaXRfY29udmVydGVyX3BhdCAlIChhdHRyX25hbWUsKSxcbiAgICAgICAgdmFsdWVfdmFyLFxuICAgIClcblxuXG5pZiBQWTI6XG5cbiAgICBkZWYgX3VucGFja19rd19vbmx5X3B5MihhdHRyX25hbWUsIGRlZmF1bHQ9Tm9uZSk6XG4gICAgICAgICIiIlxuICAgICAgICBVbnBhY2sgKmF0dHJfbmFtZSogZnJvbSBfa3dfb25seSBkaWN0LlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgZGVmYXVsdCBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIGFyZ19kZWZhdWx0ID0gIiwgJXMiICUgZGVmYXVsdFxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgYXJnX2RlZmF1bHQgPSAiIlxuICAgICAgICByZXR1cm4gIiVzID0gX2t3X29ubHkucG9wKFwnJXNcJyVzKSIgJSAoXG4gICAgICAgICAgICBhdHRyX25hbWUsXG4gICAgICAgICAgICBhdHRyX25hbWUsXG4gICAgICAgICAgICBhcmdfZGVmYXVsdCxcbiAgICAgICAgKVxuXG4gICAgZGVmIF91bnBhY2tfa3dfb25seV9saW5lc19weTIoa3dfb25seV9hcmdzKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFVucGFjayBhbGwgKmt3X29ubHlfYXJncyogZnJvbSBfa3dfb25seSBkaWN0IGFuZCBoYW5kbGUgZXJyb3JzLlxuXG4gICAgICAgIEdpdmVuIGEgbGlzdCBvZiBzdHJpbmdzICJ7YXR0cl9uYW1lfSIgYW5kICJ7YXR0cl9uYW1lfT17ZGVmYXVsdH0iXG4gICAgICAgIGdlbmVyYXRlcyBsaXN0IG9mIGxpbmVzIG9mIGNvZGUgdGhhdCBwb3AgYXR0cnMgZnJvbSBfa3dfb25seSBkaWN0IGFuZFxuICAgICAgICByYWlzZSBUeXBlRXJyb3Igc2ltaWxhciB0byBidWlsdGluIGlmIHJlcXVpcmVkIGF0dHIgaXMgbWlzc2luZyBvclxuICAgICAgICBleHRyYSBrZXkgaXMgcGFzc2VkLlxuXG4gICAgICAgID4+PiBwcmludCgiXFxuIi5qb2luKF91bnBhY2tfa3dfb25seV9saW5lc19weTIoWyJhIiwgImI9NDIiXSkpKVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBhID0gX2t3X29ubHkucG9wKFwnYVwnKVxuICAgICAgICAgICAgYiA9IF9rd19vbmx5LnBvcChcJ2JcJywgNDIpXG4gICAgICAgIGV4Y2VwdCBLZXlFcnJvciBhcyBfa2V5X2Vycm9yOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgIC4uLlxuICAgICAgICBpZiBfa3dfb25seTpcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAuLi5cbiAgICAgICAgIiIiXG4gICAgICAgIGxpbmVzID0gWyJ0cnk6Il1cbiAgICAgICAgbGluZXMuZXh0ZW5kKFxuICAgICAgICAgICAgIiAgICAiICsgX3VucGFja19rd19vbmx5X3B5MigqYXJnLnNwbGl0KCI9IikpXG4gICAgICAgICAgICBmb3IgYXJnIGluIGt3X29ubHlfYXJnc1xuICAgICAgICApXG4gICAgICAgIGxpbmVzICs9ICIiIlxcXG5leGNlcHQgS2V5RXJyb3IgYXMgX2tleV9lcnJvcjpcbiAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgIFwnX19pbml0X18oKSBtaXNzaW5nIHJlcXVpcmVkIGtleXdvcmQtb25seSBhcmd1bWVudDogJXNcJyAlIF9rZXlfZXJyb3JcbiAgICApXG5pZiBfa3dfb25seTpcbiAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgIFwnX19pbml0X18oKSBnb3QgYW4gdW5leHBlY3RlZCBrZXl3b3JkIGFyZ3VtZW50ICVyXCdcbiAgICAgICAgJSBuZXh0KGl0ZXIoX2t3X29ubHkpKVxuICAgIClcbiIiIi5zcGxpdChcbiAgICAgICAgICAgICJcXG4iXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIGxpbmVzXG5cblxuZGVmIF9hdHRyc190b19pbml0X3NjcmlwdChcbiAgICBhdHRycyxcbiAgICBmcm96ZW4sXG4gICAgc2xvdHMsXG4gICAgcHJlX2luaXQsXG4gICAgcG9zdF9pbml0LFxuICAgIGNhY2hlX2hhc2gsXG4gICAgYmFzZV9hdHRyX21hcCxcbiAgICBpc19leGMsXG4gICAgbmVlZHNfY2FjaGVkX3NldGF0dHIsXG4gICAgaGFzX2Nsc19vbl9zZXRhdHRyLFxuICAgIGF0dHJzX2luaXQsXG4pOlxuICAgICIiIlxuICAgIFJldHVybiBhIHNjcmlwdCBvZiBhbiBpbml0aWFsaXplciBmb3IgKmF0dHJzKiBhbmQgYSBkaWN0IG9mIGdsb2JhbHMuXG5cbiAgICBUaGUgZ2xvYmFscyBhcmUgZXhwZWN0ZWQgYnkgdGhlIGdlbmVyYXRlZCBzY3JpcHQuXG5cbiAgICBJZiAqZnJvemVuKiBpcyBUcnVlLCB3ZSBjYW5ub3Qgc2V0IHRoZSBhdHRyaWJ1dGVzIGRpcmVjdGx5IHNvIHdlIHVzZVxuICAgIGEgY2FjaGVkIGBgb2JqZWN0Ll9fc2V0YXR0cl9fYGAuXG4gICAgIiIiXG4gICAgbGluZXMgPSBbXVxuICAgIGlmIHByZV9pbml0OlxuICAgICAgICBsaW5lcy5hcHBlbmQoInNlbGYuX19hdHRyc19wcmVfaW5pdF9fKCkiKVxuXG4gICAgaWYgbmVlZHNfY2FjaGVkX3NldGF0dHI6XG4gICAgICAgIGxpbmVzLmFwcGVuZChcbiAgICAgICAgICAgICMgQ2lyY3VtdmVudCB0aGUgX19zZXRhdHRyX18gZGVzY3JpcHRvciB0byBzYXZlIG9uZSBsb29rdXAgcGVyXG4gICAgICAgICAgICAjIGFzc2lnbm1lbnQuXG4gICAgICAgICAgICAjIE5vdGUgX3NldGF0dHIgd2lsbCBiZSB1c2VkIGFnYWluIGJlbG93IGlmIGNhY2hlX2hhc2ggaXMgVHJ1ZVxuICAgICAgICAgICAgIl9zZXRhdHRyID0gX2NhY2hlZF9zZXRhdHRyLl9fZ2V0X18oc2VsZiwgc2VsZi5fX2NsYXNzX18pIlxuICAgICAgICApXG5cbiAgICBpZiBmcm96ZW4gaXMgVHJ1ZTpcbiAgICAgICAgaWYgc2xvdHMgaXMgVHJ1ZTpcbiAgICAgICAgICAgIGZtdF9zZXR0ZXIgPSBfc2V0YXR0clxuICAgICAgICAgICAgZm10X3NldHRlcl93aXRoX2NvbnZlcnRlciA9IF9zZXRhdHRyX3dpdGhfY29udmVydGVyXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICAjIERpY3QgZnJvemVuIGNsYXNzZXMgYXNzaWduIGRpcmVjdGx5IHRvIF9fZGljdF9fLlxuICAgICAgICAgICAgIyBCdXQgb25seSBpZiB0aGUgYXR0cmlidXRlIGRvZXNuXCd0IGNvbWUgZnJvbSBhbiBhbmNlc3RvciBzbG90XG4gICAgICAgICAgICAjIGNsYXNzLlxuICAgICAgICAgICAgIyBOb3RlIF9pbnN0X2RpY3Qgd2lsbCBiZSB1c2VkIGFnYWluIGJlbG93IGlmIGNhY2hlX2hhc2ggaXMgVHJ1ZVxuICAgICAgICAgICAgbGluZXMuYXBwZW5kKCJfaW5zdF9kaWN0ID0gc2VsZi5fX2RpY3RfXyIpXG5cbiAgICAgICAgICAgIGRlZiBmbXRfc2V0dGVyKGF0dHJfbmFtZSwgdmFsdWVfdmFyLCBoYXNfb25fc2V0YXR0cik6XG4gICAgICAgICAgICAgICAgaWYgX2lzX3Nsb3RfYXR0cihhdHRyX25hbWUsIGJhc2VfYXR0cl9tYXApOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3NldGF0dHIoYXR0cl9uYW1lLCB2YWx1ZV92YXIsIGhhc19vbl9zZXRhdHRyKVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuICJfaW5zdF9kaWN0W1wnJXNcJ10gPSAlcyIgJSAoYXR0cl9uYW1lLCB2YWx1ZV92YXIpXG5cbiAgICAgICAgICAgIGRlZiBmbXRfc2V0dGVyX3dpdGhfY29udmVydGVyKFxuICAgICAgICAgICAgICAgIGF0dHJfbmFtZSwgdmFsdWVfdmFyLCBoYXNfb25fc2V0YXR0clxuICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICBpZiBoYXNfb25fc2V0YXR0ciBvciBfaXNfc2xvdF9hdHRyKGF0dHJfbmFtZSwgYmFzZV9hdHRyX21hcCk6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfc2V0YXR0cl93aXRoX2NvbnZlcnRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJfbmFtZSwgdmFsdWVfdmFyLCBoYXNfb25fc2V0YXR0clxuICAgICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gIl9pbnN0X2RpY3RbXCclc1wnXSA9ICVzKCVzKSIgJSAoXG4gICAgICAgICAgICAgICAgICAgIGF0dHJfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgX2luaXRfY29udmVydGVyX3BhdCAlIChhdHRyX25hbWUsKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVfdmFyLFxuICAgICAgICAgICAgICAgIClcblxuICAgIGVsc2U6XG4gICAgICAgICMgTm90IGZyb3plbi5cbiAgICAgICAgZm10X3NldHRlciA9IF9hc3NpZ25cbiAgICAgICAgZm10X3NldHRlcl93aXRoX2NvbnZlcnRlciA9IF9hc3NpZ25fd2l0aF9jb252ZXJ0ZXJcblxuICAgIGFyZ3MgPSBbXVxuICAgIGt3X29ubHlfYXJncyA9IFtdXG4gICAgYXR0cnNfdG9fdmFsaWRhdGUgPSBbXVxuXG4gICAgIyBUaGlzIGlzIGEgZGljdGlvbmFyeSBvZiBuYW1lcyB0byB2YWxpZGF0b3IgYW5kIGNvbnZlcnRlciBjYWxsYWJsZXMuXG4gICAgIyBJbmplY3RpbmcgdGhpcyBpbnRvIF9faW5pdF9fIGdsb2JhbHMgbGV0cyB1cyBhdm9pZCBsb29rdXBzLlxuICAgIG5hbWVzX2Zvcl9nbG9iYWxzID0ge31cbiAgICBhbm5vdGF0aW9ucyA9IHsicmV0dXJuIjogTm9uZX1cblxuICAgIGZvciBhIGluIGF0dHJzOlxuICAgICAgICBpZiBhLnZhbGlkYXRvcjpcbiAgICAgICAgICAgIGF0dHJzX3RvX3ZhbGlkYXRlLmFwcGVuZChhKVxuXG4gICAgICAgIGF0dHJfbmFtZSA9IGEubmFtZVxuICAgICAgICBoYXNfb25fc2V0YXR0ciA9IGEub25fc2V0YXR0ciBpcyBub3QgTm9uZSBvciAoXG4gICAgICAgICAgICBhLm9uX3NldGF0dHIgaXMgbm90IHNldHRlcnMuTk9fT1AgYW5kIGhhc19jbHNfb25fc2V0YXR0clxuICAgICAgICApXG4gICAgICAgIGFyZ19uYW1lID0gYS5uYW1lLmxzdHJpcCgiXyIpXG5cbiAgICAgICAgaGFzX2ZhY3RvcnkgPSBpc2luc3RhbmNlKGEuZGVmYXVsdCwgRmFjdG9yeSlcbiAgICAgICAgaWYgaGFzX2ZhY3RvcnkgYW5kIGEuZGVmYXVsdC50YWtlc19zZWxmOlxuICAgICAgICAgICAgbWF5YmVfc2VsZiA9ICJzZWxmIlxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgbWF5YmVfc2VsZiA9ICIiXG5cbiAgICAgICAgaWYgYS5pbml0IGlzIEZhbHNlOlxuICAgICAgICAgICAgaWYgaGFzX2ZhY3Rvcnk6XG4gICAgICAgICAgICAgICAgaW5pdF9mYWN0b3J5X25hbWUgPSBfaW5pdF9mYWN0b3J5X3BhdC5mb3JtYXQoYS5uYW1lKVxuICAgICAgICAgICAgICAgIGlmIGEuY29udmVydGVyIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICBmbXRfc2V0dGVyX3dpdGhfY29udmVydGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0X2ZhY3RvcnlfbmFtZSArICIoJXMpIiAlIChtYXliZV9zZWxmLCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzX29uX3NldGF0dHIsXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgY29udl9uYW1lID0gX2luaXRfY29udmVydGVyX3BhdCAlIChhLm5hbWUsKVxuICAgICAgICAgICAgICAgICAgICBuYW1lc19mb3JfZ2xvYmFsc1tjb252X25hbWVdID0gYS5jb252ZXJ0ZXJcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICBmbXRfc2V0dGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0X2ZhY3RvcnlfbmFtZSArICIoJXMpIiAlIChtYXliZV9zZWxmLCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzX29uX3NldGF0dHIsXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBuYW1lc19mb3JfZ2xvYmFsc1tpbml0X2ZhY3RvcnlfbmFtZV0gPSBhLmRlZmF1bHQuZmFjdG9yeVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBpZiBhLmNvbnZlcnRlciBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgZm10X3NldHRlcl93aXRoX2NvbnZlcnRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgImF0dHJfZGljdFtcJyVzXCddLmRlZmF1bHQiICUgKGF0dHJfbmFtZSwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19vbl9zZXRhdHRyLFxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIGNvbnZfbmFtZSA9IF9pbml0X2NvbnZlcnRlcl9wYXQgJSAoYS5uYW1lLClcbiAgICAgICAgICAgICAgICAgICAgbmFtZXNfZm9yX2dsb2JhbHNbY29udl9uYW1lXSA9IGEuY29udmVydGVyXG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgZm10X3NldHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgImF0dHJfZGljdFtcJyVzXCddLmRlZmF1bHQiICUgKGF0dHJfbmFtZSwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc19vbl9zZXRhdHRyLFxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgIGVsaWYgYS5kZWZhdWx0IGlzIG5vdCBOT1RISU5HIGFuZCBub3QgaGFzX2ZhY3Rvcnk6XG4gICAgICAgICAgICBhcmcgPSAiJXM9YXR0cl9kaWN0W1wnJXNcJ10uZGVmYXVsdCIgJSAoYXJnX25hbWUsIGF0dHJfbmFtZSlcbiAgICAgICAgICAgIGlmIGEua3dfb25seTpcbiAgICAgICAgICAgICAgICBrd19vbmx5X2FyZ3MuYXBwZW5kKGFyZylcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgYXJncy5hcHBlbmQoYXJnKVxuXG4gICAgICAgICAgICBpZiBhLmNvbnZlcnRlciBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgIGZtdF9zZXR0ZXJfd2l0aF9jb252ZXJ0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyX25hbWUsIGFyZ19uYW1lLCBoYXNfb25fc2V0YXR0clxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIG5hbWVzX2Zvcl9nbG9iYWxzW1xuICAgICAgICAgICAgICAgICAgICBfaW5pdF9jb252ZXJ0ZXJfcGF0ICUgKGEubmFtZSwpXG4gICAgICAgICAgICAgICAgXSA9IGEuY29udmVydGVyXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChmbXRfc2V0dGVyKGF0dHJfbmFtZSwgYXJnX25hbWUsIGhhc19vbl9zZXRhdHRyKSlcblxuICAgICAgICBlbGlmIGhhc19mYWN0b3J5OlxuICAgICAgICAgICAgYXJnID0gIiVzPU5PVEhJTkciICUgKGFyZ19uYW1lLClcbiAgICAgICAgICAgIGlmIGEua3dfb25seTpcbiAgICAgICAgICAgICAgICBrd19vbmx5X2FyZ3MuYXBwZW5kKGFyZylcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgYXJncy5hcHBlbmQoYXJnKVxuICAgICAgICAgICAgbGluZXMuYXBwZW5kKCJpZiAlcyBpcyBub3QgTk9USElORzoiICUgKGFyZ19uYW1lLCkpXG5cbiAgICAgICAgICAgIGluaXRfZmFjdG9yeV9uYW1lID0gX2luaXRfZmFjdG9yeV9wYXQuZm9ybWF0KGEubmFtZSlcbiAgICAgICAgICAgIGlmIGEuY29udmVydGVyIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgIiAgICAiXG4gICAgICAgICAgICAgICAgICAgICsgZm10X3NldHRlcl93aXRoX2NvbnZlcnRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJfbmFtZSwgYXJnX25hbWUsIGhhc19vbl9zZXRhdHRyXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKCJlbHNlOiIpXG4gICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAiICAgICJcbiAgICAgICAgICAgICAgICAgICAgKyBmbXRfc2V0dGVyX3dpdGhfY29udmVydGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdF9mYWN0b3J5X25hbWUgKyAiKCIgKyBtYXliZV9zZWxmICsgIikiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzX29uX3NldGF0dHIsXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgbmFtZXNfZm9yX2dsb2JhbHNbXG4gICAgICAgICAgICAgICAgICAgIF9pbml0X2NvbnZlcnRlcl9wYXQgJSAoYS5uYW1lLClcbiAgICAgICAgICAgICAgICBdID0gYS5jb252ZXJ0ZXJcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAiICAgICIgKyBmbXRfc2V0dGVyKGF0dHJfbmFtZSwgYXJnX25hbWUsIGhhc19vbl9zZXRhdHRyKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoImVsc2U6IilcbiAgICAgICAgICAgICAgICBsaW5lcy5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICIgICAgIlxuICAgICAgICAgICAgICAgICAgICArIGZtdF9zZXR0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0X2ZhY3RvcnlfbmFtZSArICIoIiArIG1heWJlX3NlbGYgKyAiKSIsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNfb25fc2V0YXR0cixcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIG5hbWVzX2Zvcl9nbG9iYWxzW2luaXRfZmFjdG9yeV9uYW1lXSA9IGEuZGVmYXVsdC5mYWN0b3J5XG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBpZiBhLmt3X29ubHk6XG4gICAgICAgICAgICAgICAga3dfb25seV9hcmdzLmFwcGVuZChhcmdfbmFtZSlcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgYXJncy5hcHBlbmQoYXJnX25hbWUpXG5cbiAgICAgICAgICAgIGlmIGEuY29udmVydGVyIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgZm10X3NldHRlcl93aXRoX2NvbnZlcnRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJfbmFtZSwgYXJnX25hbWUsIGhhc19vbl9zZXRhdHRyXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgbmFtZXNfZm9yX2dsb2JhbHNbXG4gICAgICAgICAgICAgICAgICAgIF9pbml0X2NvbnZlcnRlcl9wYXQgJSAoYS5uYW1lLClcbiAgICAgICAgICAgICAgICBdID0gYS5jb252ZXJ0ZXJcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgbGluZXMuYXBwZW5kKGZtdF9zZXR0ZXIoYXR0cl9uYW1lLCBhcmdfbmFtZSwgaGFzX29uX3NldGF0dHIpKVxuXG4gICAgICAgIGlmIGEuaW5pdCBpcyBUcnVlOlxuICAgICAgICAgICAgaWYgYS50eXBlIGlzIG5vdCBOb25lIGFuZCBhLmNvbnZlcnRlciBpcyBOb25lOlxuICAgICAgICAgICAgICAgIGFubm90YXRpb25zW2FyZ19uYW1lXSA9IGEudHlwZVxuICAgICAgICAgICAgZWxpZiBhLmNvbnZlcnRlciBpcyBub3QgTm9uZSBhbmQgbm90IFBZMjpcbiAgICAgICAgICAgICAgICAjIFRyeSB0byBnZXQgdGhlIHR5cGUgZnJvbSB0aGUgY29udmVydGVyLlxuICAgICAgICAgICAgICAgIHNpZyA9IE5vbmVcbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIHNpZyA9IGluc3BlY3Quc2lnbmF0dXJlKGEuY29udmVydGVyKVxuICAgICAgICAgICAgICAgIGV4Y2VwdCAoVmFsdWVFcnJvciwgVHlwZUVycm9yKTogICMgaW5zcGVjdCBmYWlsZWRcbiAgICAgICAgICAgICAgICAgICAgcGFzc1xuICAgICAgICAgICAgICAgIGlmIHNpZzpcbiAgICAgICAgICAgICAgICAgICAgc2lnX3BhcmFtcyA9IGxpc3Qoc2lnLnBhcmFtZXRlcnMudmFsdWVzKCkpXG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ19wYXJhbXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBzaWdfcGFyYW1zWzBdLmFubm90YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzIG5vdCBpbnNwZWN0LlBhcmFtZXRlci5lbXB0eVxuICAgICAgICAgICAgICAgICAgICApOlxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvbnNbYXJnX25hbWVdID0gc2lnX3BhcmFtc1swXS5hbm5vdGF0aW9uXG5cbiAgICBpZiBhdHRyc190b192YWxpZGF0ZTogICMgd2UgY2FuIHNraXAgdGhpcyBpZiB0aGVyZSBhcmUgbm8gdmFsaWRhdG9ycy5cbiAgICAgICAgbmFtZXNfZm9yX2dsb2JhbHNbIl9jb25maWciXSA9IF9jb25maWdcbiAgICAgICAgbGluZXMuYXBwZW5kKCJpZiBfY29uZmlnLl9ydW5fdmFsaWRhdG9ycyBpcyBUcnVlOiIpXG4gICAgICAgIGZvciBhIGluIGF0dHJzX3RvX3ZhbGlkYXRlOlxuICAgICAgICAgICAgdmFsX25hbWUgPSAiX19hdHRyX3ZhbGlkYXRvcl8iICsgYS5uYW1lXG4gICAgICAgICAgICBhdHRyX25hbWUgPSAiX19hdHRyXyIgKyBhLm5hbWVcbiAgICAgICAgICAgIGxpbmVzLmFwcGVuZChcbiAgICAgICAgICAgICAgICAiICAgICVzKHNlbGYsICVzLCBzZWxmLiVzKSIgJSAodmFsX25hbWUsIGF0dHJfbmFtZSwgYS5uYW1lKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgbmFtZXNfZm9yX2dsb2JhbHNbdmFsX25hbWVdID0gYS52YWxpZGF0b3JcbiAgICAgICAgICAgIG5hbWVzX2Zvcl9nbG9iYWxzW2F0dHJfbmFtZV0gPSBhXG5cbiAgICBpZiBwb3N0X2luaXQ6XG4gICAgICAgIGxpbmVzLmFwcGVuZCgic2VsZi5fX2F0dHJzX3Bvc3RfaW5pdF9fKCkiKVxuXG4gICAgIyBiZWNhdXNlIHRoaXMgaXMgc2V0IG9ubHkgYWZ0ZXIgX19hdHRyc19wb3N0X2luaXQgaXMgY2FsbGVkLCBhIGNyYXNoXG4gICAgIyB3aWxsIHJlc3VsdCBpZiBwb3N0LWluaXQgdHJpZXMgdG8gYWNjZXNzIHRoZSBoYXNoIGNvZGUuICBUaGlzIHNlZW1lZFxuICAgICMgcHJlZmVyYWJsZSB0byBzZXR0aW5nIHRoaXMgYmVmb3JlaGFuZCwgaW4gd2hpY2ggY2FzZSBhbHRlcmF0aW9uIHRvXG4gICAgIyBmaWVsZCB2YWx1ZXMgZHVyaW5nIHBvc3QtaW5pdCBjb21iaW5lZCB3aXRoIHBvc3QtaW5pdCBhY2Nlc3NpbmcgdGhlXG4gICAgIyBoYXNoIGNvZGUgd291bGQgcmVzdWx0IGluIHNpbGVudCBidWdzLlxuICAgIGlmIGNhY2hlX2hhc2g6XG4gICAgICAgIGlmIGZyb3plbjpcbiAgICAgICAgICAgIGlmIHNsb3RzOlxuICAgICAgICAgICAgICAgICMgaWYgZnJvemVuIGFuZCBzbG90cywgdGhlbiBfc2V0YXR0ciBkZWZpbmVkIGFib3ZlXG4gICAgICAgICAgICAgICAgaW5pdF9oYXNoX2NhY2hlID0gIl9zZXRhdHRyKFwnJXNcJywgJXMpIlxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAjIGlmIGZyb3plbiBhbmQgbm90IHNsb3RzLCB0aGVuIF9pbnN0X2RpY3QgZGVmaW5lZCBhYm92ZVxuICAgICAgICAgICAgICAgIGluaXRfaGFzaF9jYWNoZSA9ICJfaW5zdF9kaWN0W1wnJXNcJ10gPSAlcyJcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGluaXRfaGFzaF9jYWNoZSA9ICJzZWxmLiVzID0gJXMiXG4gICAgICAgIGxpbmVzLmFwcGVuZChpbml0X2hhc2hfY2FjaGUgJSAoX2hhc2hfY2FjaGVfZmllbGQsICJOb25lIikpXG5cbiAgICAjIEZvciBleGNlcHRpb25zIHdlIHJlbHkgb24gQmFzZUV4Y2VwdGlvbi5fX2luaXRfXyBmb3IgcHJvcGVyXG4gICAgIyBpbml0aWFsaXphdGlvbi5cbiAgICBpZiBpc19leGM6XG4gICAgICAgIHZhbHMgPSAiLCIuam9pbigic2VsZi4iICsgYS5uYW1lIGZvciBhIGluIGF0dHJzIGlmIGEuaW5pdClcblxuICAgICAgICBsaW5lcy5hcHBlbmQoIkJhc2VFeGNlcHRpb24uX19pbml0X18oc2VsZiwgJXMpIiAlICh2YWxzLCkpXG5cbiAgICBhcmdzID0gIiwgIi5qb2luKGFyZ3MpXG4gICAgaWYga3dfb25seV9hcmdzOlxuICAgICAgICBpZiBQWTI6XG4gICAgICAgICAgICBsaW5lcyA9IF91bnBhY2tfa3dfb25seV9saW5lc19weTIoa3dfb25seV9hcmdzKSArIGxpbmVzXG5cbiAgICAgICAgICAgIGFyZ3MgKz0gIiVzKipfa3dfb25seSIgJSAoIiwgIiBpZiBhcmdzIGVsc2UgIiIsKSAgIyBsZWFkaW5nIGNvbW1hXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBhcmdzICs9ICIlcyosICVzIiAlIChcbiAgICAgICAgICAgICAgICAiLCAiIGlmIGFyZ3MgZWxzZSAiIiwgICMgbGVhZGluZyBjb21tYVxuICAgICAgICAgICAgICAgICIsICIuam9pbihrd19vbmx5X2FyZ3MpLCAgIyBrd19vbmx5IGFyZ3NcbiAgICAgICAgICAgIClcbiAgICByZXR1cm4gKFxuICAgICAgICAiIiJcXFxuZGVmIHtpbml0X25hbWV9KHNlbGYsIHthcmdzfSk6XG4gICAge2xpbmVzfVxuIiIiLmZvcm1hdChcbiAgICAgICAgICAgIGluaXRfbmFtZT0oIl9fYXR0cnNfaW5pdF9fIiBpZiBhdHRyc19pbml0IGVsc2UgIl9faW5pdF9fIiksXG4gICAgICAgICAgICBhcmdzPWFyZ3MsXG4gICAgICAgICAgICBsaW5lcz0iXFxuICAgICIuam9pbihsaW5lcykgaWYgbGluZXMgZWxzZSAicGFzcyIsXG4gICAgICAgICksXG4gICAgICAgIG5hbWVzX2Zvcl9nbG9iYWxzLFxuICAgICAgICBhbm5vdGF0aW9ucyxcbiAgICApXG5cblxuY2xhc3MgQXR0cmlidXRlKG9iamVjdCk6XG4gICAgIiIiXG4gICAgKlJlYWQtb25seSogcmVwcmVzZW50YXRpb24gb2YgYW4gYXR0cmlidXRlLlxuXG4gICAgVGhlIGNsYXNzIGhhcyAqYWxsKiBhcmd1bWVudHMgb2YgYGF0dHIuaWJgIChleGNlcHQgZm9yIGBgZmFjdG9yeWBgXG4gICAgd2hpY2ggaXMgb25seSBzeW50YWN0aWMgc3VnYXIgZm9yIGBgZGVmYXVsdD1GYWN0b3J5KC4uLilgYCBwbHVzIHRoZVxuICAgIGZvbGxvd2luZzpcblxuICAgIC0gYGBuYW1lYGAgKGBzdHJgKTogVGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZS5cbiAgICAtIGBgaW5oZXJpdGVkYGAgKGBib29sYCk6IFdoZXRoZXIgb3Igbm90IHRoYXQgYXR0cmlidXRlIGhhcyBiZWVuIGluaGVyaXRlZFxuICAgICAgZnJvbSBhIGJhc2UgY2xhc3MuXG4gICAgLSBgYGVxX2tleWBgIGFuZCBgYG9yZGVyX2tleWBgIChgdHlwaW5nLkNhbGxhYmxlYCBvciBgTm9uZWApOiBUaGUgY2FsbGFibGVzXG4gICAgICB0aGF0IGFyZSB1c2VkIGZvciBjb21wYXJpbmcgYW5kIG9yZGVyaW5nIG9iamVjdHMgYnkgdGhpcyBhdHRyaWJ1dGUsXG4gICAgICByZXNwZWN0aXZlbHkuIFRoZXNlIGFyZSBzZXQgYnkgcGFzc2luZyBhIGNhbGxhYmxlIHRvIGBhdHRyLmliYFwncyBgYGVxYGAsXG4gICAgICBgYG9yZGVyYGAsIG9yIGBgY21wYGAgYXJndW1lbnRzLiBTZWUgYWxzbyA6cmVmOmBjb21wYXJpc29uIGN1c3RvbWl6YXRpb25cbiAgICAgIDxjdXN0b20tY29tcGFyaXNvbj5gLlxuXG4gICAgSW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MgYXJlIGZyZXF1ZW50bHkgdXNlZCBmb3IgaW50cm9zcGVjdGlvbiBwdXJwb3Nlc1xuICAgIGxpa2U6XG5cbiAgICAtIGBmaWVsZHNgIHJldHVybnMgYSB0dXBsZSBvZiB0aGVtLlxuICAgIC0gVmFsaWRhdG9ycyBnZXQgdGhlbSBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LlxuICAgIC0gVGhlIDpyZWY6YGZpZWxkIHRyYW5zZm9ybWVyIDx0cmFuc2Zvcm0tZmllbGRzPmAgaG9vayByZWNlaXZlcyBhIGxpc3Qgb2ZcbiAgICAgIHRoZW0uXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4xLjAgKmluaGVyaXRlZCpcbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4xLjAgKm9uX3NldGF0dHIqXG4gICAgLi4gdmVyc2lvbmNoYW5nZWQ6OiAyMC4yLjAgKmluaGVyaXRlZCogaXMgbm90IHRha2VuIGludG8gYWNjb3VudCBmb3JcbiAgICAgICAgZXF1YWxpdHkgY2hlY2tzIGFuZCBoYXNoaW5nIGFueW1vcmUuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjEuMS4wICplcV9rZXkqIGFuZCAqb3JkZXJfa2V5KlxuXG4gICAgRm9yIHRoZSBmdWxsIHZlcnNpb24gaGlzdG9yeSBvZiB0aGUgZmllbGRzLCBzZWUgYGF0dHIuaWJgLlxuICAgICIiIlxuXG4gICAgX19zbG90c19fID0gKFxuICAgICAgICAibmFtZSIsXG4gICAgICAgICJkZWZhdWx0IixcbiAgICAgICAgInZhbGlkYXRvciIsXG4gICAgICAgICJyZXByIixcbiAgICAgICAgImVxIixcbiAgICAgICAgImVxX2tleSIsXG4gICAgICAgICJvcmRlciIsXG4gICAgICAgICJvcmRlcl9rZXkiLFxuICAgICAgICAiaGFzaCIsXG4gICAgICAgICJpbml0IixcbiAgICAgICAgIm1ldGFkYXRhIixcbiAgICAgICAgInR5cGUiLFxuICAgICAgICAiY29udmVydGVyIixcbiAgICAgICAgImt3X29ubHkiLFxuICAgICAgICAiaW5oZXJpdGVkIixcbiAgICAgICAgIm9uX3NldGF0dHIiLFxuICAgIClcblxuICAgIGRlZiBfX2luaXRfXyhcbiAgICAgICAgc2VsZixcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVmYXVsdCxcbiAgICAgICAgdmFsaWRhdG9yLFxuICAgICAgICByZXByLFxuICAgICAgICBjbXAsICAjIFhYWDogdW51c2VkLCByZW1vdmUgYWxvbmcgd2l0aCBvdGhlciBjbXAgY29kZS5cbiAgICAgICAgaGFzaCxcbiAgICAgICAgaW5pdCxcbiAgICAgICAgaW5oZXJpdGVkLFxuICAgICAgICBtZXRhZGF0YT1Ob25lLFxuICAgICAgICB0eXBlPU5vbmUsXG4gICAgICAgIGNvbnZlcnRlcj1Ob25lLFxuICAgICAgICBrd19vbmx5PUZhbHNlLFxuICAgICAgICBlcT1Ob25lLFxuICAgICAgICBlcV9rZXk9Tm9uZSxcbiAgICAgICAgb3JkZXI9Tm9uZSxcbiAgICAgICAgb3JkZXJfa2V5PU5vbmUsXG4gICAgICAgIG9uX3NldGF0dHI9Tm9uZSxcbiAgICApOlxuICAgICAgICBlcSwgZXFfa2V5LCBvcmRlciwgb3JkZXJfa2V5ID0gX2RldGVybWluZV9hdHRyaWJfZXFfb3JkZXIoXG4gICAgICAgICAgICBjbXAsIGVxX2tleSBvciBlcSwgb3JkZXJfa2V5IG9yIG9yZGVyLCBUcnVlXG4gICAgICAgIClcblxuICAgICAgICAjIENhY2hlIHRoaXMgZGVzY3JpcHRvciBoZXJlIHRvIHNwZWVkIHRoaW5ncyB1cCBsYXRlci5cbiAgICAgICAgYm91bmRfc2V0YXR0ciA9IF9vYmpfc2V0YXR0ci5fX2dldF9fKHNlbGYsIEF0dHJpYnV0ZSlcblxuICAgICAgICAjIERlc3BpdGUgdGhlIGJpZyByZWQgd2FybmluZywgcGVvcGxlICpkbyogaW5zdGFudGlhdGUgYEF0dHJpYnV0ZWBcbiAgICAgICAgIyB0aGVtc2VsdmVzLlxuICAgICAgICBib3VuZF9zZXRhdHRyKCJuYW1lIiwgbmFtZSlcbiAgICAgICAgYm91bmRfc2V0YXR0cigiZGVmYXVsdCIsIGRlZmF1bHQpXG4gICAgICAgIGJvdW5kX3NldGF0dHIoInZhbGlkYXRvciIsIHZhbGlkYXRvcilcbiAgICAgICAgYm91bmRfc2V0YXR0cigicmVwciIsIHJlcHIpXG4gICAgICAgIGJvdW5kX3NldGF0dHIoImVxIiwgZXEpXG4gICAgICAgIGJvdW5kX3NldGF0dHIoImVxX2tleSIsIGVxX2tleSlcbiAgICAgICAgYm91bmRfc2V0YXR0cigib3JkZXIiLCBvcmRlcilcbiAgICAgICAgYm91bmRfc2V0YXR0cigib3JkZXJfa2V5Iiwgb3JkZXJfa2V5KVxuICAgICAgICBib3VuZF9zZXRhdHRyKCJoYXNoIiwgaGFzaClcbiAgICAgICAgYm91bmRfc2V0YXR0cigiaW5pdCIsIGluaXQpXG4gICAgICAgIGJvdW5kX3NldGF0dHIoImNvbnZlcnRlciIsIGNvbnZlcnRlcilcbiAgICAgICAgYm91bmRfc2V0YXR0cihcbiAgICAgICAgICAgICJtZXRhZGF0YSIsXG4gICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgbWV0YWRhdGFfcHJveHkobWV0YWRhdGEpXG4gICAgICAgICAgICAgICAgaWYgbWV0YWRhdGFcbiAgICAgICAgICAgICAgICBlbHNlIF9lbXB0eV9tZXRhZGF0YV9zaW5nbGV0b25cbiAgICAgICAgICAgICksXG4gICAgICAgIClcbiAgICAgICAgYm91bmRfc2V0YXR0cigidHlwZSIsIHR5cGUpXG4gICAgICAgIGJvdW5kX3NldGF0dHIoImt3X29ubHkiLCBrd19vbmx5KVxuICAgICAgICBib3VuZF9zZXRhdHRyKCJpbmhlcml0ZWQiLCBpbmhlcml0ZWQpXG4gICAgICAgIGJvdW5kX3NldGF0dHIoIm9uX3NldGF0dHIiLCBvbl9zZXRhdHRyKVxuXG4gICAgZGVmIF9fc2V0YXR0cl9fKHNlbGYsIG5hbWUsIHZhbHVlKTpcbiAgICAgICAgcmFpc2UgRnJvemVuSW5zdGFuY2VFcnJvcigpXG5cbiAgICBAY2xhc3NtZXRob2RcbiAgICBkZWYgZnJvbV9jb3VudGluZ19hdHRyKGNscywgbmFtZSwgY2EsIHR5cGU9Tm9uZSk6XG4gICAgICAgICMgdHlwZSBob2xkcyB0aGUgYW5ub3RhdGVkIHZhbHVlLiBkZWFsIHdpdGggY29uZmxpY3RzOlxuICAgICAgICBpZiB0eXBlIGlzIE5vbmU6XG4gICAgICAgICAgICB0eXBlID0gY2EudHlwZVxuICAgICAgICBlbGlmIGNhLnR5cGUgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxuICAgICAgICAgICAgICAgICJUeXBlIGFubm90YXRpb24gYW5kIHR5cGUgYXJndW1lbnQgY2Fubm90IGJvdGggYmUgcHJlc2VudCJcbiAgICAgICAgICAgIClcbiAgICAgICAgaW5zdF9kaWN0ID0ge1xuICAgICAgICAgICAgazogZ2V0YXR0cihjYSwgaylcbiAgICAgICAgICAgIGZvciBrIGluIEF0dHJpYnV0ZS5fX3Nsb3RzX19cbiAgICAgICAgICAgIGlmIGtcbiAgICAgICAgICAgIG5vdCBpbiAoXG4gICAgICAgICAgICAgICAgIm5hbWUiLFxuICAgICAgICAgICAgICAgICJ2YWxpZGF0b3IiLFxuICAgICAgICAgICAgICAgICJkZWZhdWx0IixcbiAgICAgICAgICAgICAgICAidHlwZSIsXG4gICAgICAgICAgICAgICAgImluaGVyaXRlZCIsXG4gICAgICAgICAgICApICAjIGV4Y2x1ZGUgbWV0aG9kcyBhbmQgZGVwcmVjYXRlZCBhbGlhc1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbHMoXG4gICAgICAgICAgICBuYW1lPW5hbWUsXG4gICAgICAgICAgICB2YWxpZGF0b3I9Y2EuX3ZhbGlkYXRvcixcbiAgICAgICAgICAgIGRlZmF1bHQ9Y2EuX2RlZmF1bHQsXG4gICAgICAgICAgICB0eXBlPXR5cGUsXG4gICAgICAgICAgICBjbXA9Tm9uZSxcbiAgICAgICAgICAgIGluaGVyaXRlZD1GYWxzZSxcbiAgICAgICAgICAgICoqaW5zdF9kaWN0XG4gICAgICAgIClcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBjbXAoc2VsZik6XG4gICAgICAgICIiIlxuICAgICAgICBTaW11bGF0ZSB0aGUgcHJlc2VuY2Ugb2YgYSBjbXAgYXR0cmlidXRlIGFuZCB3YXJuLlxuICAgICAgICAiIiJcbiAgICAgICAgd2FybmluZ3Mud2FybihfQ01QX0RFUFJFQ0FUSU9OLCBEZXByZWNhdGlvbldhcm5pbmcsIHN0YWNrbGV2ZWw9MilcblxuICAgICAgICByZXR1cm4gc2VsZi5lcSBhbmQgc2VsZi5vcmRlclxuXG4gICAgIyBEb25cJ3QgdXNlIGF0dHIuZXZvbHZlIHNpbmNlIGZpZWxkcyhBdHRyaWJ1dGUpIGRvZXNuXCd0IHdvcmtcbiAgICBkZWYgZXZvbHZlKHNlbGYsICoqY2hhbmdlcyk6XG4gICAgICAgICIiIlxuICAgICAgICBDb3B5ICpzZWxmKiBhbmQgYXBwbHkgKmNoYW5nZXMqLlxuXG4gICAgICAgIFRoaXMgd29ya3Mgc2ltaWxhcmx5IHRvIGBhdHRyLmV2b2x2ZWAgYnV0IHRoYXQgZnVuY3Rpb24gZG9lcyBub3Qgd29ya1xuICAgICAgICB3aXRoIGBgQXR0cmlidXRlYGAuXG5cbiAgICAgICAgSXQgaXMgbWFpbmx5IG1lYW50IHRvIGJlIHVzZWQgZm9yIGB0cmFuc2Zvcm0tZmllbGRzYC5cblxuICAgICAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4zLjBcbiAgICAgICAgIiIiXG4gICAgICAgIG5ldyA9IGNvcHkuY29weShzZWxmKVxuXG4gICAgICAgIG5ldy5fc2V0YXR0cnMoY2hhbmdlcy5pdGVtcygpKVxuXG4gICAgICAgIHJldHVybiBuZXdcblxuICAgICMgRG9uXCd0IHVzZSBfYWRkX3BpY2tsZSBzaW5jZSBmaWVsZHMoQXR0cmlidXRlKSBkb2VzblwndCB3b3JrXG4gICAgZGVmIF9fZ2V0c3RhdGVfXyhzZWxmKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFBsYXkgbmljZSB3aXRoIHBpY2tsZS5cbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiB0dXBsZShcbiAgICAgICAgICAgIGdldGF0dHIoc2VsZiwgbmFtZSkgaWYgbmFtZSAhPSAibWV0YWRhdGEiIGVsc2UgZGljdChzZWxmLm1ldGFkYXRhKVxuICAgICAgICAgICAgZm9yIG5hbWUgaW4gc2VsZi5fX3Nsb3RzX19cbiAgICAgICAgKVxuXG4gICAgZGVmIF9fc2V0c3RhdGVfXyhzZWxmLCBzdGF0ZSk6XG4gICAgICAgICIiIlxuICAgICAgICBQbGF5IG5pY2Ugd2l0aCBwaWNrbGUuXG4gICAgICAgICIiIlxuICAgICAgICBzZWxmLl9zZXRhdHRycyh6aXAoc2VsZi5fX3Nsb3RzX18sIHN0YXRlKSlcblxuICAgIGRlZiBfc2V0YXR0cnMoc2VsZiwgbmFtZV92YWx1ZXNfcGFpcnMpOlxuICAgICAgICBib3VuZF9zZXRhdHRyID0gX29ial9zZXRhdHRyLl9fZ2V0X18oc2VsZiwgQXR0cmlidXRlKVxuICAgICAgICBmb3IgbmFtZSwgdmFsdWUgaW4gbmFtZV92YWx1ZXNfcGFpcnM6XG4gICAgICAgICAgICBpZiBuYW1lICE9ICJtZXRhZGF0YSI6XG4gICAgICAgICAgICAgICAgYm91bmRfc2V0YXR0cihuYW1lLCB2YWx1ZSlcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgYm91bmRfc2V0YXR0cihcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFfcHJveHkodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgX2VtcHR5X21ldGFkYXRhX3NpbmdsZXRvbixcbiAgICAgICAgICAgICAgICApXG5cblxuX2EgPSBbXG4gICAgQXR0cmlidXRlKFxuICAgICAgICBuYW1lPW5hbWUsXG4gICAgICAgIGRlZmF1bHQ9Tk9USElORyxcbiAgICAgICAgdmFsaWRhdG9yPU5vbmUsXG4gICAgICAgIHJlcHI9VHJ1ZSxcbiAgICAgICAgY21wPU5vbmUsXG4gICAgICAgIGVxPVRydWUsXG4gICAgICAgIG9yZGVyPUZhbHNlLFxuICAgICAgICBoYXNoPShuYW1lICE9ICJtZXRhZGF0YSIpLFxuICAgICAgICBpbml0PVRydWUsXG4gICAgICAgIGluaGVyaXRlZD1GYWxzZSxcbiAgICApXG4gICAgZm9yIG5hbWUgaW4gQXR0cmlidXRlLl9fc2xvdHNfX1xuXVxuXG5BdHRyaWJ1dGUgPSBfYWRkX2hhc2goXG4gICAgX2FkZF9lcShcbiAgICAgICAgX2FkZF9yZXByKEF0dHJpYnV0ZSwgYXR0cnM9X2EpLFxuICAgICAgICBhdHRycz1bYSBmb3IgYSBpbiBfYSBpZiBhLm5hbWUgIT0gImluaGVyaXRlZCJdLFxuICAgICksXG4gICAgYXR0cnM9W2EgZm9yIGEgaW4gX2EgaWYgYS5oYXNoIGFuZCBhLm5hbWUgIT0gImluaGVyaXRlZCJdLFxuKVxuXG5cbmNsYXNzIF9Db3VudGluZ0F0dHIob2JqZWN0KTpcbiAgICAiIiJcbiAgICBJbnRlcm1lZGlhdGUgcmVwcmVzZW50YXRpb24gb2YgYXR0cmlidXRlcyB0aGF0IHVzZXMgYSBjb3VudGVyIHRvIHByZXNlcnZlXG4gICAgdGhlIG9yZGVyIGluIHdoaWNoIHRoZSBhdHRyaWJ1dGVzIGhhdmUgYmVlbiBkZWZpbmVkLlxuXG4gICAgKkludGVybmFsKiBkYXRhIHN0cnVjdHVyZSBvZiB0aGUgYXR0cnMgbGlicmFyeS4gIFJ1bm5pbmcgaW50byBpcyBtb3N0XG4gICAgbGlrZWx5IHRoZSByZXN1bHQgb2YgYSBidWcgbGlrZSBhIGZvcmdvdHRlbiBgQGF0dHIuc2AgZGVjb3JhdG9yLlxuICAgICIiIlxuXG4gICAgX19zbG90c19fID0gKFxuICAgICAgICAiY291bnRlciIsXG4gICAgICAgICJfZGVmYXVsdCIsXG4gICAgICAgICJyZXByIixcbiAgICAgICAgImVxIixcbiAgICAgICAgImVxX2tleSIsXG4gICAgICAgICJvcmRlciIsXG4gICAgICAgICJvcmRlcl9rZXkiLFxuICAgICAgICAiaGFzaCIsXG4gICAgICAgICJpbml0IixcbiAgICAgICAgIm1ldGFkYXRhIixcbiAgICAgICAgIl92YWxpZGF0b3IiLFxuICAgICAgICAiY29udmVydGVyIixcbiAgICAgICAgInR5cGUiLFxuICAgICAgICAia3dfb25seSIsXG4gICAgICAgICJvbl9zZXRhdHRyIixcbiAgICApXG4gICAgX19hdHRyc19hdHRyc19fID0gdHVwbGUoXG4gICAgICAgIEF0dHJpYnV0ZShcbiAgICAgICAgICAgIG5hbWU9bmFtZSxcbiAgICAgICAgICAgIGRlZmF1bHQ9Tk9USElORyxcbiAgICAgICAgICAgIHZhbGlkYXRvcj1Ob25lLFxuICAgICAgICAgICAgcmVwcj1UcnVlLFxuICAgICAgICAgICAgY21wPU5vbmUsXG4gICAgICAgICAgICBoYXNoPVRydWUsXG4gICAgICAgICAgICBpbml0PVRydWUsXG4gICAgICAgICAgICBrd19vbmx5PUZhbHNlLFxuICAgICAgICAgICAgZXE9VHJ1ZSxcbiAgICAgICAgICAgIGVxX2tleT1Ob25lLFxuICAgICAgICAgICAgb3JkZXI9RmFsc2UsXG4gICAgICAgICAgICBvcmRlcl9rZXk9Tm9uZSxcbiAgICAgICAgICAgIGluaGVyaXRlZD1GYWxzZSxcbiAgICAgICAgICAgIG9uX3NldGF0dHI9Tm9uZSxcbiAgICAgICAgKVxuICAgICAgICBmb3IgbmFtZSBpbiAoXG4gICAgICAgICAgICAiY291bnRlciIsXG4gICAgICAgICAgICAiX2RlZmF1bHQiLFxuICAgICAgICAgICAgInJlcHIiLFxuICAgICAgICAgICAgImVxIixcbiAgICAgICAgICAgICJvcmRlciIsXG4gICAgICAgICAgICAiaGFzaCIsXG4gICAgICAgICAgICAiaW5pdCIsXG4gICAgICAgICAgICAib25fc2V0YXR0ciIsXG4gICAgICAgIClcbiAgICApICsgKFxuICAgICAgICBBdHRyaWJ1dGUoXG4gICAgICAgICAgICBuYW1lPSJtZXRhZGF0YSIsXG4gICAgICAgICAgICBkZWZhdWx0PU5vbmUsXG4gICAgICAgICAgICB2YWxpZGF0b3I9Tm9uZSxcbiAgICAgICAgICAgIHJlcHI9VHJ1ZSxcbiAgICAgICAgICAgIGNtcD1Ob25lLFxuICAgICAgICAgICAgaGFzaD1GYWxzZSxcbiAgICAgICAgICAgIGluaXQ9VHJ1ZSxcbiAgICAgICAgICAgIGt3X29ubHk9RmFsc2UsXG4gICAgICAgICAgICBlcT1UcnVlLFxuICAgICAgICAgICAgZXFfa2V5PU5vbmUsXG4gICAgICAgICAgICBvcmRlcj1GYWxzZSxcbiAgICAgICAgICAgIG9yZGVyX2tleT1Ob25lLFxuICAgICAgICAgICAgaW5oZXJpdGVkPUZhbHNlLFxuICAgICAgICAgICAgb25fc2V0YXR0cj1Ob25lLFxuICAgICAgICApLFxuICAgIClcbiAgICBjbHNfY291bnRlciA9IDBcblxuICAgIGRlZiBfX2luaXRfXyhcbiAgICAgICAgc2VsZixcbiAgICAgICAgZGVmYXVsdCxcbiAgICAgICAgdmFsaWRhdG9yLFxuICAgICAgICByZXByLFxuICAgICAgICBjbXAsXG4gICAgICAgIGhhc2gsXG4gICAgICAgIGluaXQsXG4gICAgICAgIGNvbnZlcnRlcixcbiAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGt3X29ubHksXG4gICAgICAgIGVxLFxuICAgICAgICBlcV9rZXksXG4gICAgICAgIG9yZGVyLFxuICAgICAgICBvcmRlcl9rZXksXG4gICAgICAgIG9uX3NldGF0dHIsXG4gICAgKTpcbiAgICAgICAgX0NvdW50aW5nQXR0ci5jbHNfY291bnRlciArPSAxXG4gICAgICAgIHNlbGYuY291bnRlciA9IF9Db3VudGluZ0F0dHIuY2xzX2NvdW50ZXJcbiAgICAgICAgc2VsZi5fZGVmYXVsdCA9IGRlZmF1bHRcbiAgICAgICAgc2VsZi5fdmFsaWRhdG9yID0gdmFsaWRhdG9yXG4gICAgICAgIHNlbGYuY29udmVydGVyID0gY29udmVydGVyXG4gICAgICAgIHNlbGYucmVwciA9IHJlcHJcbiAgICAgICAgc2VsZi5lcSA9IGVxXG4gICAgICAgIHNlbGYuZXFfa2V5ID0gZXFfa2V5XG4gICAgICAgIHNlbGYub3JkZXIgPSBvcmRlclxuICAgICAgICBzZWxmLm9yZGVyX2tleSA9IG9yZGVyX2tleVxuICAgICAgICBzZWxmLmhhc2ggPSBoYXNoXG4gICAgICAgIHNlbGYuaW5pdCA9IGluaXRcbiAgICAgICAgc2VsZi5tZXRhZGF0YSA9IG1ldGFkYXRhXG4gICAgICAgIHNlbGYudHlwZSA9IHR5cGVcbiAgICAgICAgc2VsZi5rd19vbmx5ID0ga3dfb25seVxuICAgICAgICBzZWxmLm9uX3NldGF0dHIgPSBvbl9zZXRhdHRyXG5cbiAgICBkZWYgdmFsaWRhdG9yKHNlbGYsIG1ldGgpOlxuICAgICAgICAiIiJcbiAgICAgICAgRGVjb3JhdG9yIHRoYXQgYWRkcyAqbWV0aCogdG8gdGhlIGxpc3Qgb2YgdmFsaWRhdG9ycy5cblxuICAgICAgICBSZXR1cm5zICptZXRoKiB1bmNoYW5nZWQuXG5cbiAgICAgICAgLi4gdmVyc2lvbmFkZGVkOjogMTcuMS4wXG4gICAgICAgICIiIlxuICAgICAgICBpZiBzZWxmLl92YWxpZGF0b3IgaXMgTm9uZTpcbiAgICAgICAgICAgIHNlbGYuX3ZhbGlkYXRvciA9IG1ldGhcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHNlbGYuX3ZhbGlkYXRvciA9IGFuZF8oc2VsZi5fdmFsaWRhdG9yLCBtZXRoKVxuICAgICAgICByZXR1cm4gbWV0aFxuXG4gICAgZGVmIGRlZmF1bHQoc2VsZiwgbWV0aCk6XG4gICAgICAgICIiIlxuICAgICAgICBEZWNvcmF0b3IgdGhhdCBhbGxvd3MgdG8gc2V0IHRoZSBkZWZhdWx0IGZvciBhbiBhdHRyaWJ1dGUuXG5cbiAgICAgICAgUmV0dXJucyAqbWV0aCogdW5jaGFuZ2VkLlxuXG4gICAgICAgIDpyYWlzZXMgRGVmYXVsdEFscmVhZHlTZXRFcnJvcjogSWYgZGVmYXVsdCBoYXMgYmVlbiBzZXQgYmVmb3JlLlxuXG4gICAgICAgIC4uIHZlcnNpb25hZGRlZDo6IDE3LjEuMFxuICAgICAgICAiIiJcbiAgICAgICAgaWYgc2VsZi5fZGVmYXVsdCBpcyBub3QgTk9USElORzpcbiAgICAgICAgICAgIHJhaXNlIERlZmF1bHRBbHJlYWR5U2V0RXJyb3IoKVxuXG4gICAgICAgIHNlbGYuX2RlZmF1bHQgPSBGYWN0b3J5KG1ldGgsIHRha2VzX3NlbGY9VHJ1ZSlcblxuICAgICAgICByZXR1cm4gbWV0aFxuXG5cbl9Db3VudGluZ0F0dHIgPSBfYWRkX2VxKF9hZGRfcmVwcihfQ291bnRpbmdBdHRyKSlcblxuXG5jbGFzcyBGYWN0b3J5KG9iamVjdCk6XG4gICAgIiIiXG4gICAgU3RvcmVzIGEgZmFjdG9yeSBjYWxsYWJsZS5cblxuICAgIElmIHBhc3NlZCBhcyB0aGUgZGVmYXVsdCB2YWx1ZSB0byBgYXR0cnMuZmllbGRgLCB0aGUgZmFjdG9yeSBpcyB1c2VkIHRvXG4gICAgZ2VuZXJhdGUgYSBuZXcgdmFsdWUuXG5cbiAgICA6cGFyYW0gY2FsbGFibGUgZmFjdG9yeTogQSBjYWxsYWJsZSB0aGF0IHRha2VzIGVpdGhlciBub25lIG9yIGV4YWN0bHkgb25lXG4gICAgICAgIG1hbmRhdG9yeSBwb3NpdGlvbmFsIGFyZ3VtZW50IGRlcGVuZGluZyBvbiAqdGFrZXNfc2VsZiouXG4gICAgOnBhcmFtIGJvb2wgdGFrZXNfc2VsZjogUGFzcyB0aGUgcGFydGlhbGx5IGluaXRpYWxpemVkIGluc3RhbmNlIHRoYXQgaXNcbiAgICAgICAgYmVpbmcgaW5pdGlhbGl6ZWQgYXMgYSBwb3NpdGlvbmFsIGFyZ3VtZW50LlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTcuMS4wICAqdGFrZXNfc2VsZipcbiAgICAiIiJcblxuICAgIF9fc2xvdHNfXyA9ICgiZmFjdG9yeSIsICJ0YWtlc19zZWxmIilcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmYWN0b3J5LCB0YWtlc19zZWxmPUZhbHNlKTpcbiAgICAgICAgIiIiXG4gICAgICAgIGBGYWN0b3J5YCBpcyBwYXJ0IG9mIHRoZSBkZWZhdWx0IG1hY2hpbmVyeSBzbyBpZiB3ZSB3YW50IGEgZGVmYXVsdFxuICAgICAgICB2YWx1ZSBoZXJlLCB3ZSBoYXZlIHRvIGltcGxlbWVudCBpdCBvdXJzZWx2ZXMuXG4gICAgICAgICIiIlxuICAgICAgICBzZWxmLmZhY3RvcnkgPSBmYWN0b3J5XG4gICAgICAgIHNlbGYudGFrZXNfc2VsZiA9IHRha2VzX3NlbGZcblxuICAgIGRlZiBfX2dldHN0YXRlX18oc2VsZik6XG4gICAgICAgICIiIlxuICAgICAgICBQbGF5IG5pY2Ugd2l0aCBwaWNrbGUuXG4gICAgICAgICIiIlxuICAgICAgICByZXR1cm4gdHVwbGUoZ2V0YXR0cihzZWxmLCBuYW1lKSBmb3IgbmFtZSBpbiBzZWxmLl9fc2xvdHNfXylcblxuICAgIGRlZiBfX3NldHN0YXRlX18oc2VsZiwgc3RhdGUpOlxuICAgICAgICAiIiJcbiAgICAgICAgUGxheSBuaWNlIHdpdGggcGlja2xlLlxuICAgICAgICAiIiJcbiAgICAgICAgZm9yIG5hbWUsIHZhbHVlIGluIHppcChzZWxmLl9fc2xvdHNfXywgc3RhdGUpOlxuICAgICAgICAgICAgc2V0YXR0cihzZWxmLCBuYW1lLCB2YWx1ZSlcblxuXG5fZiA9IFtcbiAgICBBdHRyaWJ1dGUoXG4gICAgICAgIG5hbWU9bmFtZSxcbiAgICAgICAgZGVmYXVsdD1OT1RISU5HLFxuICAgICAgICB2YWxpZGF0b3I9Tm9uZSxcbiAgICAgICAgcmVwcj1UcnVlLFxuICAgICAgICBjbXA9Tm9uZSxcbiAgICAgICAgZXE9VHJ1ZSxcbiAgICAgICAgb3JkZXI9RmFsc2UsXG4gICAgICAgIGhhc2g9VHJ1ZSxcbiAgICAgICAgaW5pdD1UcnVlLFxuICAgICAgICBpbmhlcml0ZWQ9RmFsc2UsXG4gICAgKVxuICAgIGZvciBuYW1lIGluIEZhY3RvcnkuX19zbG90c19fXG5dXG5cbkZhY3RvcnkgPSBfYWRkX2hhc2goX2FkZF9lcShfYWRkX3JlcHIoRmFjdG9yeSwgYXR0cnM9X2YpLCBhdHRycz1fZiksIGF0dHJzPV9mKVxuXG5cbmRlZiBtYWtlX2NsYXNzKG5hbWUsIGF0dHJzLCBiYXNlcz0ob2JqZWN0LCksICoqYXR0cmlidXRlc19hcmd1bWVudHMpOlxuICAgICIiIlxuICAgIEEgcXVpY2sgd2F5IHRvIGNyZWF0ZSBhIG5ldyBjbGFzcyBjYWxsZWQgKm5hbWUqIHdpdGggKmF0dHJzKi5cblxuICAgIDpwYXJhbSBzdHIgbmFtZTogVGhlIG5hbWUgZm9yIHRoZSBuZXcgY2xhc3MuXG5cbiAgICA6cGFyYW0gYXR0cnM6IEEgbGlzdCBvZiBuYW1lcyBvciBhIGRpY3Rpb25hcnkgb2YgbWFwcGluZ3Mgb2YgbmFtZXMgdG9cbiAgICAgICAgYXR0cmlidXRlcy5cblxuICAgICAgICBJZiAqYXR0cnMqIGlzIGEgbGlzdCBvciBhbiBvcmRlcmVkIGRpY3QgKGBkaWN0YCBvbiBQeXRob24gMy42KyxcbiAgICAgICAgYGNvbGxlY3Rpb25zLk9yZGVyZWREaWN0YCBvdGhlcndpc2UpLCB0aGUgb3JkZXIgaXMgZGVkdWNlZCBmcm9tXG4gICAgICAgIHRoZSBvcmRlciBvZiB0aGUgbmFtZXMgb3IgYXR0cmlidXRlcyBpbnNpZGUgKmF0dHJzKi4gIE90aGVyd2lzZSB0aGVcbiAgICAgICAgb3JkZXIgb2YgdGhlIGRlZmluaXRpb24gb2YgdGhlIGF0dHJpYnV0ZXMgaXMgdXNlZC5cbiAgICA6dHlwZSBhdHRyczogYGxpc3RgIG9yIGBkaWN0YFxuXG4gICAgOnBhcmFtIHR1cGxlIGJhc2VzOiBDbGFzc2VzIHRoYXQgdGhlIG5ldyBjbGFzcyB3aWxsIHN1YmNsYXNzLlxuXG4gICAgOnBhcmFtIGF0dHJpYnV0ZXNfYXJndW1lbnRzOiBQYXNzZWQgdW5tb2RpZmllZCB0byBgYXR0ci5zYC5cblxuICAgIDpyZXR1cm46IEEgbmV3IGNsYXNzIHdpdGggKmF0dHJzKi5cbiAgICA6cnR5cGU6IHR5cGVcblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE3LjEuMCAqYmFzZXMqXG4gICAgLi4gdmVyc2lvbmNoYW5nZWQ6OiAxOC4xLjAgSWYgKmF0dHJzKiBpcyBvcmRlcmVkLCB0aGUgb3JkZXIgaXMgcmV0YWluZWQuXG4gICAgIiIiXG4gICAgaWYgaXNpbnN0YW5jZShhdHRycywgZGljdCk6XG4gICAgICAgIGNsc19kaWN0ID0gYXR0cnNcbiAgICBlbGlmIGlzaW5zdGFuY2UoYXR0cnMsIChsaXN0LCB0dXBsZSkpOlxuICAgICAgICBjbHNfZGljdCA9IGRpY3QoKGEsIGF0dHJpYigpKSBmb3IgYSBpbiBhdHRycylcbiAgICBlbHNlOlxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoImF0dHJzIGFyZ3VtZW50IG11c3QgYmUgYSBkaWN0IG9yIGEgbGlzdC4iKVxuXG4gICAgcHJlX2luaXQgPSBjbHNfZGljdC5wb3AoIl9fYXR0cnNfcHJlX2luaXRfXyIsIE5vbmUpXG4gICAgcG9zdF9pbml0ID0gY2xzX2RpY3QucG9wKCJfX2F0dHJzX3Bvc3RfaW5pdF9fIiwgTm9uZSlcbiAgICB1c2VyX2luaXQgPSBjbHNfZGljdC5wb3AoIl9faW5pdF9fIiwgTm9uZSlcblxuICAgIGJvZHkgPSB7fVxuICAgIGlmIHByZV9pbml0IGlzIG5vdCBOb25lOlxuICAgICAgICBib2R5WyJfX2F0dHJzX3ByZV9pbml0X18iXSA9IHByZV9pbml0XG4gICAgaWYgcG9zdF9pbml0IGlzIG5vdCBOb25lOlxuICAgICAgICBib2R5WyJfX2F0dHJzX3Bvc3RfaW5pdF9fIl0gPSBwb3N0X2luaXRcbiAgICBpZiB1c2VyX2luaXQgaXMgbm90IE5vbmU6XG4gICAgICAgIGJvZHlbIl9faW5pdF9fIl0gPSB1c2VyX2luaXRcblxuICAgIHR5cGVfID0gbmV3X2NsYXNzKG5hbWUsIGJhc2VzLCB7fSwgbGFtYmRhIG5zOiBucy51cGRhdGUoYm9keSkpXG5cbiAgICAjIEZvciBwaWNrbGluZyB0byB3b3JrLCB0aGUgX19tb2R1bGVfXyB2YXJpYWJsZSBuZWVkcyB0byBiZSBzZXQgdG8gdGhlXG4gICAgIyBmcmFtZSB3aGVyZSB0aGUgY2xhc3MgaXMgY3JlYXRlZC4gIEJ5cGFzcyB0aGlzIHN0ZXAgaW4gZW52aXJvbm1lbnRzIHdoZXJlXG4gICAgIyBzeXMuX2dldGZyYW1lIGlzIG5vdCBkZWZpbmVkIChKeXRob24gZm9yIGV4YW1wbGUpIG9yIHN5cy5fZ2V0ZnJhbWUgaXMgbm90XG4gICAgIyBkZWZpbmVkIGZvciBhcmd1bWVudHMgZ3JlYXRlciB0aGFuIDAgKElyb25QeXRob24pLlxuICAgIHRyeTpcbiAgICAgICAgdHlwZV8uX19tb2R1bGVfXyA9IHN5cy5fZ2V0ZnJhbWUoMSkuZl9nbG9iYWxzLmdldChcbiAgICAgICAgICAgICJfX25hbWVfXyIsICJfX21haW5fXyJcbiAgICAgICAgKVxuICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIFZhbHVlRXJyb3IpOlxuICAgICAgICBwYXNzXG5cbiAgICAjIFdlIGRvIGl0IGhlcmUgZm9yIHByb3BlciB3YXJuaW5ncyB3aXRoIG1lYW5pbmdmdWwgc3RhY2tsZXZlbC5cbiAgICBjbXAgPSBhdHRyaWJ1dGVzX2FyZ3VtZW50cy5wb3AoImNtcCIsIE5vbmUpXG4gICAgKFxuICAgICAgICBhdHRyaWJ1dGVzX2FyZ3VtZW50c1siZXEiXSxcbiAgICAgICAgYXR0cmlidXRlc19hcmd1bWVudHNbIm9yZGVyIl0sXG4gICAgKSA9IF9kZXRlcm1pbmVfYXR0cnNfZXFfb3JkZXIoXG4gICAgICAgIGNtcCxcbiAgICAgICAgYXR0cmlidXRlc19hcmd1bWVudHMuZ2V0KCJlcSIpLFxuICAgICAgICBhdHRyaWJ1dGVzX2FyZ3VtZW50cy5nZXQoIm9yZGVyIiksXG4gICAgICAgIFRydWUsXG4gICAgKVxuXG4gICAgcmV0dXJuIF9hdHRycyh0aGVzZT1jbHNfZGljdCwgKiphdHRyaWJ1dGVzX2FyZ3VtZW50cykodHlwZV8pXG5cblxuIyBUaGVzZSBhcmUgcmVxdWlyZWQgYnkgd2l0aGluIHRoaXMgbW9kdWxlIHNvIHdlIGRlZmluZSB0aGVtIGhlcmUgYW5kIG1lcmVseVxuIyBpbXBvcnQgaW50byAudmFsaWRhdG9ycyAvIC5jb252ZXJ0ZXJzLlxuXG5cbkBhdHRycyhzbG90cz1UcnVlLCBoYXNoPVRydWUpXG5jbGFzcyBfQW5kVmFsaWRhdG9yKG9iamVjdCk6XG4gICAgIiIiXG4gICAgQ29tcG9zZSBtYW55IHZhbGlkYXRvcnMgdG8gYSBzaW5nbGUgb25lLlxuICAgICIiIlxuXG4gICAgX3ZhbGlkYXRvcnMgPSBhdHRyaWIoKVxuXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIGluc3QsIGF0dHIsIHZhbHVlKTpcbiAgICAgICAgZm9yIHYgaW4gc2VsZi5fdmFsaWRhdG9yczpcbiAgICAgICAgICAgIHYoaW5zdCwgYXR0ciwgdmFsdWUpXG5cblxuZGVmIGFuZF8oKnZhbGlkYXRvcnMpOlxuICAgICIiIlxuICAgIEEgdmFsaWRhdG9yIHRoYXQgY29tcG9zZXMgbXVsdGlwbGUgdmFsaWRhdG9ycyBpbnRvIG9uZS5cblxuICAgIFdoZW4gY2FsbGVkIG9uIGEgdmFsdWUsIGl0IHJ1bnMgYWxsIHdyYXBwZWQgdmFsaWRhdG9ycy5cblxuICAgIDpwYXJhbSBjYWxsYWJsZXMgdmFsaWRhdG9yczogQXJiaXRyYXJ5IG51bWJlciBvZiB2YWxpZGF0b3JzLlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTcuMS4wXG4gICAgIiIiXG4gICAgdmFscyA9IFtdXG4gICAgZm9yIHZhbGlkYXRvciBpbiB2YWxpZGF0b3JzOlxuICAgICAgICB2YWxzLmV4dGVuZChcbiAgICAgICAgICAgIHZhbGlkYXRvci5fdmFsaWRhdG9yc1xuICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWxpZGF0b3IsIF9BbmRWYWxpZGF0b3IpXG4gICAgICAgICAgICBlbHNlIFt2YWxpZGF0b3JdXG4gICAgICAgIClcblxuICAgIHJldHVybiBfQW5kVmFsaWRhdG9yKHR1cGxlKHZhbHMpKVxuXG5cbmRlZiBwaXBlKCpjb252ZXJ0ZXJzKTpcbiAgICAiIiJcbiAgICBBIGNvbnZlcnRlciB0aGF0IGNvbXBvc2VzIG11bHRpcGxlIGNvbnZlcnRlcnMgaW50byBvbmUuXG5cbiAgICBXaGVuIGNhbGxlZCBvbiBhIHZhbHVlLCBpdCBydW5zIGFsbCB3cmFwcGVkIGNvbnZlcnRlcnMsIHJldHVybmluZyB0aGVcbiAgICAqbGFzdCogdmFsdWUuXG5cbiAgICBUeXBlIGFubm90YXRpb25zIHdpbGwgYmUgaW5mZXJyZWQgZnJvbSB0aGUgd3JhcHBlZCBjb252ZXJ0ZXJzXCcsIGlmXG4gICAgdGhleSBoYXZlIGFueS5cblxuICAgIDpwYXJhbSBjYWxsYWJsZXMgY29udmVydGVyczogQXJiaXRyYXJ5IG51bWJlciBvZiBjb252ZXJ0ZXJzLlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjAuMS4wXG4gICAgIiIiXG5cbiAgICBkZWYgcGlwZV9jb252ZXJ0ZXIodmFsKTpcbiAgICAgICAgZm9yIGNvbnZlcnRlciBpbiBjb252ZXJ0ZXJzOlxuICAgICAgICAgICAgdmFsID0gY29udmVydGVyKHZhbClcblxuICAgICAgICByZXR1cm4gdmFsXG5cbiAgICBpZiBub3QgUFkyOlxuICAgICAgICBpZiBub3QgY29udmVydGVyczpcbiAgICAgICAgICAgICMgSWYgdGhlIGNvbnZlcnRlciBsaXN0IGlzIGVtcHR5LCBwaXBlX2NvbnZlcnRlciBpcyB0aGUgaWRlbnRpdHkuXG4gICAgICAgICAgICBBID0gdHlwaW5nLlR5cGVWYXIoIkEiKVxuICAgICAgICAgICAgcGlwZV9jb252ZXJ0ZXIuX19hbm5vdGF0aW9uc19fID0geyJ2YWwiOiBBLCAicmV0dXJuIjogQX1cbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICMgR2V0IHBhcmFtZXRlciB0eXBlLlxuICAgICAgICAgICAgc2lnID0gTm9uZVxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIHNpZyA9IGluc3BlY3Quc2lnbmF0dXJlKGNvbnZlcnRlcnNbMF0pXG4gICAgICAgICAgICBleGNlcHQgKFZhbHVlRXJyb3IsIFR5cGVFcnJvcik6ICAjIGluc3BlY3QgZmFpbGVkXG4gICAgICAgICAgICAgICAgcGFzc1xuICAgICAgICAgICAgaWYgc2lnOlxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IGxpc3Qoc2lnLnBhcmFtZXRlcnMudmFsdWVzKCkpXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBwYXJhbXNcbiAgICAgICAgICAgICAgICAgICAgYW5kIHBhcmFtc1swXS5hbm5vdGF0aW9uIGlzIG5vdCBpbnNwZWN0LlBhcmFtZXRlci5lbXB0eVxuICAgICAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgICAgIHBpcGVfY29udmVydGVyLl9fYW5ub3RhdGlvbnNfX1sidmFsIl0gPSBwYXJhbXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgIF0uYW5ub3RhdGlvblxuICAgICAgICAgICAgIyBHZXQgcmV0dXJuIHR5cGUuXG4gICAgICAgICAgICBzaWcgPSBOb25lXG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgc2lnID0gaW5zcGVjdC5zaWduYXR1cmUoY29udmVydGVyc1stMV0pXG4gICAgICAgICAgICBleGNlcHQgKFZhbHVlRXJyb3IsIFR5cGVFcnJvcik6ICAjIGluc3BlY3QgZmFpbGVkXG4gICAgICAgICAgICAgICAgcGFzc1xuICAgICAgICAgICAgaWYgc2lnIGFuZCBzaWcucmV0dXJuX2Fubm90YXRpb24gaXMgbm90IGluc3BlY3QuU2lnbmF0dXJlKCkuZW1wdHk6XG4gICAgICAgICAgICAgICAgcGlwZV9jb252ZXJ0ZXIuX19hbm5vdGF0aW9uc19fW1xuICAgICAgICAgICAgICAgICAgICAicmV0dXJuIlxuICAgICAgICAgICAgICAgIF0gPSBzaWcucmV0dXJuX2Fubm90YXRpb25cblxuICAgIHJldHVybiBwaXBlX2NvbnZlcnRlclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2F0dHIvX2NvbmZpZy5weScsIGInIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG5cbmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYWJzb2x1dGVfaW1wb3J0LCBkaXZpc2lvbiwgcHJpbnRfZnVuY3Rpb25cblxuXG5fX2FsbF9fID0gWyJzZXRfcnVuX3ZhbGlkYXRvcnMiLCAiZ2V0X3J1bl92YWxpZGF0b3JzIl1cblxuX3J1bl92YWxpZGF0b3JzID0gVHJ1ZVxuXG5cbmRlZiBzZXRfcnVuX3ZhbGlkYXRvcnMocnVuKTpcbiAgICAiIiJcbiAgICBTZXQgd2hldGhlciBvciBub3QgdmFsaWRhdG9ycyBhcmUgcnVuLiAgQnkgZGVmYXVsdCwgdGhleSBhcmUgcnVuLlxuXG4gICAgLi4gZGVwcmVjYXRlZDo6IDIxLjMuMCBJdCB3aWxsIG5vdCBiZSByZW1vdmVkLCBidXQgaXQgYWxzbyB3aWxsIG5vdCBiZVxuICAgICAgICBtb3ZlZCB0byBuZXcgYGBhdHRyc2BgIG5hbWVzcGFjZS4gVXNlIGBhdHRycy52YWxpZGF0b3JzLnNldF9kaXNhYmxlZCgpYFxuICAgICAgICBpbnN0ZWFkLlxuICAgICIiIlxuICAgIGlmIG5vdCBpc2luc3RhbmNlKHJ1biwgYm9vbCk6XG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiXCdydW5cJyBtdXN0IGJlIGJvb2wuIilcbiAgICBnbG9iYWwgX3J1bl92YWxpZGF0b3JzXG4gICAgX3J1bl92YWxpZGF0b3JzID0gcnVuXG5cblxuZGVmIGdldF9ydW5fdmFsaWRhdG9ycygpOlxuICAgICIiIlxuICAgIFJldHVybiB3aGV0aGVyIG9yIG5vdCB2YWxpZGF0b3JzIGFyZSBydW4uXG5cbiAgICAuLiBkZXByZWNhdGVkOjogMjEuMy4wIEl0IHdpbGwgbm90IGJlIHJlbW92ZWQsIGJ1dCBpdCBhbHNvIHdpbGwgbm90IGJlXG4gICAgICAgIG1vdmVkIHRvIG5ldyBgYGF0dHJzYGAgbmFtZXNwYWNlLiBVc2UgYGF0dHJzLnZhbGlkYXRvcnMuZ2V0X2Rpc2FibGVkKClgXG4gICAgICAgIGluc3RlYWQuXG4gICAgIiIiXG4gICAgcmV0dXJuIF9ydW5fdmFsaWRhdG9yc1xuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2F0dHIvc2V0dGVycy5weScsIGInIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG5cbiIiIlxuQ29tbW9ubHkgdXNlZCBob29rcyBmb3Igb25fc2V0YXR0ci5cbiIiIlxuXG5mcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydCwgZGl2aXNpb24sIHByaW50X2Z1bmN0aW9uXG5cbmZyb20gLiBpbXBvcnQgX2NvbmZpZ1xuZnJvbSAuZXhjZXB0aW9ucyBpbXBvcnQgRnJvemVuQXR0cmlidXRlRXJyb3JcblxuXG5kZWYgcGlwZSgqc2V0dGVycyk6XG4gICAgIiIiXG4gICAgUnVuIGFsbCAqc2V0dGVycyogYW5kIHJldHVybiB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBsYXN0IG9uZS5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMFxuICAgICIiIlxuXG4gICAgZGVmIHdyYXBwZWRfcGlwZShpbnN0YW5jZSwgYXR0cmliLCBuZXdfdmFsdWUpOlxuICAgICAgICBydiA9IG5ld192YWx1ZVxuXG4gICAgICAgIGZvciBzZXR0ZXIgaW4gc2V0dGVyczpcbiAgICAgICAgICAgIHJ2ID0gc2V0dGVyKGluc3RhbmNlLCBhdHRyaWIsIHJ2KVxuXG4gICAgICAgIHJldHVybiBydlxuXG4gICAgcmV0dXJuIHdyYXBwZWRfcGlwZVxuXG5cbmRlZiBmcm96ZW4oXywgX18sIF9fXyk6XG4gICAgIiIiXG4gICAgUHJldmVudCBhbiBhdHRyaWJ1dGUgdG8gYmUgbW9kaWZpZWQuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4xLjBcbiAgICAiIiJcbiAgICByYWlzZSBGcm96ZW5BdHRyaWJ1dGVFcnJvcigpXG5cblxuZGVmIHZhbGlkYXRlKGluc3RhbmNlLCBhdHRyaWIsIG5ld192YWx1ZSk6XG4gICAgIiIiXG4gICAgUnVuICphdHRyaWIqXCdzIHZhbGlkYXRvciBvbiAqbmV3X3ZhbHVlKiBpZiBpdCBoYXMgb25lLlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjAuMS4wXG4gICAgIiIiXG4gICAgaWYgX2NvbmZpZy5fcnVuX3ZhbGlkYXRvcnMgaXMgRmFsc2U6XG4gICAgICAgIHJldHVybiBuZXdfdmFsdWVcblxuICAgIHYgPSBhdHRyaWIudmFsaWRhdG9yXG4gICAgaWYgbm90IHY6XG4gICAgICAgIHJldHVybiBuZXdfdmFsdWVcblxuICAgIHYoaW5zdGFuY2UsIGF0dHJpYiwgbmV3X3ZhbHVlKVxuXG4gICAgcmV0dXJuIG5ld192YWx1ZVxuXG5cbmRlZiBjb252ZXJ0KGluc3RhbmNlLCBhdHRyaWIsIG5ld192YWx1ZSk6XG4gICAgIiIiXG4gICAgUnVuICphdHRyaWIqXCdzIGNvbnZlcnRlciAtLSBpZiBpdCBoYXMgb25lIC0tICBvbiAqbmV3X3ZhbHVlKiBhbmQgcmV0dXJuIHRoZVxuICAgIHJlc3VsdC5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMFxuICAgICIiIlxuICAgIGMgPSBhdHRyaWIuY29udmVydGVyXG4gICAgaWYgYzpcbiAgICAgICAgcmV0dXJuIGMobmV3X3ZhbHVlKVxuXG4gICAgcmV0dXJuIG5ld192YWx1ZVxuXG5cbk5PX09QID0gb2JqZWN0KClcbiIiIlxuU2VudGluZWwgZm9yIGRpc2FibGluZyBjbGFzcy13aWRlICpvbl9zZXRhdHRyKiBob29rcyBmb3IgY2VydGFpbiBhdHRyaWJ1dGVzLlxuXG5Eb2VzIG5vdCB3b3JrIGluIGBwaXBlYCBvciB3aXRoaW4gbGlzdHMuXG5cbi4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMFxuIiIiXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYXR0ci9leGNlcHRpb25zLnB5JywgYicjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcblxuZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQsIGRpdmlzaW9uLCBwcmludF9mdW5jdGlvblxuXG5cbmNsYXNzIEZyb3plbkVycm9yKEF0dHJpYnV0ZUVycm9yKTpcbiAgICAiIiJcbiAgICBBIGZyb3plbi9pbW11dGFibGUgaW5zdGFuY2Ugb3IgYXR0cmlidXRlIGhhdmUgYmVlbiBhdHRlbXB0ZWQgdG8gYmVcbiAgICBtb2RpZmllZC5cblxuICAgIEl0IG1pcnJvcnMgdGhlIGJlaGF2aW9yIG9mIGBgbmFtZWR0dXBsZXNgYCBieSB1c2luZyB0aGUgc2FtZSBlcnJvciBtZXNzYWdlXG4gICAgYW5kIHN1YmNsYXNzaW5nIGBBdHRyaWJ1dGVFcnJvcmAuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4xLjBcbiAgICAiIiJcblxuICAgIG1zZyA9ICJjYW5cJ3Qgc2V0IGF0dHJpYnV0ZSJcbiAgICBhcmdzID0gW21zZ11cblxuXG5jbGFzcyBGcm96ZW5JbnN0YW5jZUVycm9yKEZyb3plbkVycm9yKTpcbiAgICAiIiJcbiAgICBBIGZyb3plbiBpbnN0YW5jZSBoYXMgYmVlbiBhdHRlbXB0ZWQgdG8gYmUgbW9kaWZpZWQuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNi4xLjBcbiAgICAiIiJcblxuXG5jbGFzcyBGcm96ZW5BdHRyaWJ1dGVFcnJvcihGcm96ZW5FcnJvcik6XG4gICAgIiIiXG4gICAgQSBmcm96ZW4gYXR0cmlidXRlIGhhcyBiZWVuIGF0dGVtcHRlZCB0byBiZSBtb2RpZmllZC5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIwLjEuMFxuICAgICIiIlxuXG5cbmNsYXNzIEF0dHJzQXR0cmlidXRlTm90Rm91bmRFcnJvcihWYWx1ZUVycm9yKTpcbiAgICAiIiJcbiAgICBBbiBgYGF0dHJzYGAgZnVuY3Rpb24gY291bGRuXCd0IGZpbmQgYW4gYXR0cmlidXRlIHRoYXQgdGhlIHVzZXIgYXNrZWQgZm9yLlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTYuMi4wXG4gICAgIiIiXG5cblxuY2xhc3MgTm90QW5BdHRyc0NsYXNzRXJyb3IoVmFsdWVFcnJvcik6XG4gICAgIiIiXG4gICAgQSBub24tYGBhdHRyc2BgIGNsYXNzIGhhcyBiZWVuIHBhc3NlZCBpbnRvIGFuIGBgYXR0cnNgYCBmdW5jdGlvbi5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE2LjIuMFxuICAgICIiIlxuXG5cbmNsYXNzIERlZmF1bHRBbHJlYWR5U2V0RXJyb3IoUnVudGltZUVycm9yKTpcbiAgICAiIiJcbiAgICBBIGRlZmF1bHQgaGFzIGJlZW4gc2V0IHVzaW5nIGBgYXR0ci5pYigpYGAgYW5kIGlzIGF0dGVtcHRlZCB0byBiZSByZXNldFxuICAgIHVzaW5nIHRoZSBkZWNvcmF0b3IuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNy4xLjBcbiAgICAiIiJcblxuXG5jbGFzcyBVbmFubm90YXRlZEF0dHJpYnV0ZUVycm9yKFJ1bnRpbWVFcnJvcik6XG4gICAgIiIiXG4gICAgQSBjbGFzcyB3aXRoIGBgYXV0b19hdHRyaWJzPVRydWVgYCBoYXMgYW4gYGBhdHRyLmliKClgYCB3aXRob3V0IGEgdHlwZVxuICAgIGFubm90YXRpb24uXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxNy4zLjBcbiAgICAiIiJcblxuXG5jbGFzcyBQeXRob25Ub29PbGRFcnJvcihSdW50aW1lRXJyb3IpOlxuICAgICIiIlxuICAgIEl0IHdhcyBhdHRlbXB0ZWQgdG8gdXNlIGFuIGBgYXR0cnNgYCBmZWF0dXJlIHRoYXQgcmVxdWlyZXMgYSBuZXdlciBQeXRob25cbiAgICB2ZXJzaW9uLlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTguMi4wXG4gICAgIiIiXG5cblxuY2xhc3MgTm90Q2FsbGFibGVFcnJvcihUeXBlRXJyb3IpOlxuICAgICIiIlxuICAgIEEgYGBhdHRyLmliKClgYCByZXF1aXJpbmcgYSBjYWxsYWJsZSBoYXMgYmVlbiBzZXQgd2l0aCBhIHZhbHVlXG4gICAgdGhhdCBpcyBub3QgY2FsbGFibGUuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOS4yLjBcbiAgICAiIiJcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtc2csIHZhbHVlKTpcbiAgICAgICAgc3VwZXIoVHlwZUVycm9yLCBzZWxmKS5fX2luaXRfXyhtc2csIHZhbHVlKVxuICAgICAgICBzZWxmLm1zZyA9IG1zZ1xuICAgICAgICBzZWxmLnZhbHVlID0gdmFsdWVcblxuICAgIGRlZiBfX3N0cl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gc3RyKHNlbGYubXNnKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2F0dHIvZmlsdGVycy5weScsIGInIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG5cbiIiIlxuQ29tbW9ubHkgdXNlZnVsIGZpbHRlcnMgZm9yIGBhdHRyLmFzZGljdGAuXG4iIiJcblxuZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQsIGRpdmlzaW9uLCBwcmludF9mdW5jdGlvblxuXG5mcm9tIC5fY29tcGF0IGltcG9ydCBpc2NsYXNzXG5mcm9tIC5fbWFrZSBpbXBvcnQgQXR0cmlidXRlXG5cblxuZGVmIF9zcGxpdF93aGF0KHdoYXQpOlxuICAgICIiIlxuICAgIFJldHVybnMgYSB0dXBsZSBvZiBgZnJvemVuc2V0YHMgb2YgY2xhc3NlcyBhbmQgYXR0cmlidXRlcy5cbiAgICAiIiJcbiAgICByZXR1cm4gKFxuICAgICAgICBmcm96ZW5zZXQoY2xzIGZvciBjbHMgaW4gd2hhdCBpZiBpc2NsYXNzKGNscykpLFxuICAgICAgICBmcm96ZW5zZXQoY2xzIGZvciBjbHMgaW4gd2hhdCBpZiBpc2luc3RhbmNlKGNscywgQXR0cmlidXRlKSksXG4gICAgKVxuXG5cbmRlZiBpbmNsdWRlKCp3aGF0KTpcbiAgICAiIiJcbiAgICBJbmNsdWRlICp3aGF0Ki5cblxuICAgIDpwYXJhbSB3aGF0OiBXaGF0IHRvIGluY2x1ZGUuXG4gICAgOnR5cGUgd2hhdDogYGxpc3RgIG9mIGB0eXBlYCBvciBgYXR0cnMuQXR0cmlidXRlYFxcXFwgc1xuXG4gICAgOnJ0eXBlOiBgY2FsbGFibGVgXG4gICAgIiIiXG4gICAgY2xzLCBhdHRycyA9IF9zcGxpdF93aGF0KHdoYXQpXG5cbiAgICBkZWYgaW5jbHVkZV8oYXR0cmlidXRlLCB2YWx1ZSk6XG4gICAgICAgIHJldHVybiB2YWx1ZS5fX2NsYXNzX18gaW4gY2xzIG9yIGF0dHJpYnV0ZSBpbiBhdHRyc1xuXG4gICAgcmV0dXJuIGluY2x1ZGVfXG5cblxuZGVmIGV4Y2x1ZGUoKndoYXQpOlxuICAgICIiIlxuICAgIEV4Y2x1ZGUgKndoYXQqLlxuXG4gICAgOnBhcmFtIHdoYXQ6IFdoYXQgdG8gZXhjbHVkZS5cbiAgICA6dHlwZSB3aGF0OiBgbGlzdGAgb2YgY2xhc3NlcyBvciBgYXR0cnMuQXR0cmlidXRlYFxcXFwgcy5cblxuICAgIDpydHlwZTogYGNhbGxhYmxlYFxuICAgICIiIlxuICAgIGNscywgYXR0cnMgPSBfc3BsaXRfd2hhdCh3aGF0KVxuXG4gICAgZGVmIGV4Y2x1ZGVfKGF0dHJpYnV0ZSwgdmFsdWUpOlxuICAgICAgICByZXR1cm4gdmFsdWUuX19jbGFzc19fIG5vdCBpbiBjbHMgYW5kIGF0dHJpYnV0ZSBub3QgaW4gYXR0cnNcblxuICAgIHJldHVybiBleGNsdWRlX1xuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2F0dHIvdmFsaWRhdG9ycy5weScsIGInIyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG5cbiIiIlxuQ29tbW9ubHkgdXNlZnVsIHZhbGlkYXRvcnMuXG4iIiJcblxuZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQsIGRpdmlzaW9uLCBwcmludF9mdW5jdGlvblxuXG5pbXBvcnQgb3BlcmF0b3JcbmltcG9ydCByZVxuXG5mcm9tIGNvbnRleHRsaWIgaW1wb3J0IGNvbnRleHRtYW5hZ2VyXG5cbmZyb20gLl9jb25maWcgaW1wb3J0IGdldF9ydW5fdmFsaWRhdG9ycywgc2V0X3J1bl92YWxpZGF0b3JzXG5mcm9tIC5fbWFrZSBpbXBvcnQgX0FuZFZhbGlkYXRvciwgYW5kXywgYXR0cmliLCBhdHRyc1xuZnJvbSAuZXhjZXB0aW9ucyBpbXBvcnQgTm90Q2FsbGFibGVFcnJvclxuXG5cbnRyeTpcbiAgICBQYXR0ZXJuID0gcmUuUGF0dGVyblxuZXhjZXB0IEF0dHJpYnV0ZUVycm9yOiAgIyBQeXRob24gPDMuNyBsYWNrcyBhIFBhdHRlcm4gdHlwZS5cbiAgICBQYXR0ZXJuID0gdHlwZShyZS5jb21waWxlKCIiKSlcblxuXG5fX2FsbF9fID0gW1xuICAgICJhbmRfIixcbiAgICAiZGVlcF9pdGVyYWJsZSIsXG4gICAgImRlZXBfbWFwcGluZyIsXG4gICAgImRpc2FibGVkIixcbiAgICAiZ2UiLFxuICAgICJnZXRfZGlzYWJsZWQiLFxuICAgICJndCIsXG4gICAgImluXyIsXG4gICAgImluc3RhbmNlX29mIixcbiAgICAiaXNfY2FsbGFibGUiLFxuICAgICJsZSIsXG4gICAgImx0IixcbiAgICAibWF0Y2hlc19yZSIsXG4gICAgIm1heF9sZW4iLFxuICAgICJvcHRpb25hbCIsXG4gICAgInByb3ZpZGVzIixcbiAgICAic2V0X2Rpc2FibGVkIixcbl1cblxuXG5kZWYgc2V0X2Rpc2FibGVkKGRpc2FibGVkKTpcbiAgICAiIiJcbiAgICBHbG9iYWxseSBkaXNhYmxlIG9yIGVuYWJsZSBydW5uaW5nIHZhbGlkYXRvcnMuXG5cbiAgICBCeSBkZWZhdWx0LCB0aGV5IGFyZSBydW4uXG5cbiAgICA6cGFyYW0gZGlzYWJsZWQ6IElmIGBgVHJ1ZWBgLCBkaXNhYmxlIHJ1bm5pbmcgYWxsIHZhbGlkYXRvcnMuXG4gICAgOnR5cGUgZGlzYWJsZWQ6IGJvb2xcblxuICAgIC4uIHdhcm5pbmc6OlxuXG4gICAgICAgIFRoaXMgZnVuY3Rpb24gaXMgbm90IHRocmVhZC1zYWZlIVxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjEuMy4wXG4gICAgIiIiXG4gICAgc2V0X3J1bl92YWxpZGF0b3JzKG5vdCBkaXNhYmxlZClcblxuXG5kZWYgZ2V0X2Rpc2FibGVkKCk6XG4gICAgIiIiXG4gICAgUmV0dXJuIGEgYm9vbCBpbmRpY2F0aW5nIHdoZXRoZXIgdmFsaWRhdG9ycyBhcmUgY3VycmVudGx5IGRpc2FibGVkIG9yIG5vdC5cblxuICAgIDpyZXR1cm46IGBgVHJ1ZWBgIGlmIHZhbGlkYXRvcnMgYXJlIGN1cnJlbnRseSBkaXNhYmxlZC5cbiAgICA6cnR5cGU6IGJvb2xcblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIxLjMuMFxuICAgICIiIlxuICAgIHJldHVybiBub3QgZ2V0X3J1bl92YWxpZGF0b3JzKClcblxuXG5AY29udGV4dG1hbmFnZXJcbmRlZiBkaXNhYmxlZCgpOlxuICAgICIiIlxuICAgIENvbnRleHQgbWFuYWdlciB0aGF0IGRpc2FibGVzIHJ1bm5pbmcgdmFsaWRhdG9ycyB3aXRoaW4gaXRzIGNvbnRleHQuXG5cbiAgICAuLiB3YXJuaW5nOjpcblxuICAgICAgICBUaGlzIGNvbnRleHQgbWFuYWdlciBpcyBub3QgdGhyZWFkLXNhZmUhXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMS4zLjBcbiAgICAiIiJcbiAgICBzZXRfcnVuX3ZhbGlkYXRvcnMoRmFsc2UpXG4gICAgdHJ5OlxuICAgICAgICB5aWVsZFxuICAgIGZpbmFsbHk6XG4gICAgICAgIHNldF9ydW5fdmFsaWRhdG9ycyhUcnVlKVxuXG5cbkBhdHRycyhyZXByPUZhbHNlLCBzbG90cz1UcnVlLCBoYXNoPVRydWUpXG5jbGFzcyBfSW5zdGFuY2VPZlZhbGlkYXRvcihvYmplY3QpOlxuICAgIHR5cGUgPSBhdHRyaWIoKVxuXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIGluc3QsIGF0dHIsIHZhbHVlKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFdlIHVzZSBhIGNhbGxhYmxlIGNsYXNzIHRvIGJlIGFibGUgdG8gY2hhbmdlIHRoZSBgYF9fcmVwcl9fYGAuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh2YWx1ZSwgc2VsZi50eXBlKTpcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAiXCd7bmFtZX1cJyBtdXN0IGJlIHt0eXBlIXJ9IChnb3Qge3ZhbHVlIXJ9IHRoYXQgaXMgYSAiXG4gICAgICAgICAgICAgICAgInthY3R1YWwhcn0pLiIuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICBuYW1lPWF0dHIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1zZWxmLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbD12YWx1ZS5fX2NsYXNzX18sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXZhbHVlLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgYXR0cixcbiAgICAgICAgICAgICAgICBzZWxmLnR5cGUsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICApXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAiPGluc3RhbmNlX29mIHZhbGlkYXRvciBmb3IgdHlwZSB7dHlwZSFyfT4iLmZvcm1hdChcbiAgICAgICAgICAgIHR5cGU9c2VsZi50eXBlXG4gICAgICAgIClcblxuXG5kZWYgaW5zdGFuY2Vfb2YodHlwZSk6XG4gICAgIiIiXG4gICAgQSB2YWxpZGF0b3IgdGhhdCByYWlzZXMgYSBgVHlwZUVycm9yYCBpZiB0aGUgaW5pdGlhbGl6ZXIgaXMgY2FsbGVkXG4gICAgd2l0aCBhIHdyb25nIHR5cGUgZm9yIHRoaXMgcGFydGljdWxhciBhdHRyaWJ1dGUgKGNoZWNrcyBhcmUgcGVyZm9ybWVkIHVzaW5nXG4gICAgYGlzaW5zdGFuY2VgIHRoZXJlZm9yZSBpdFwncyBhbHNvIHZhbGlkIHRvIHBhc3MgYSB0dXBsZSBvZiB0eXBlcykuXG5cbiAgICA6cGFyYW0gdHlwZTogVGhlIHR5cGUgdG8gY2hlY2sgZm9yLlxuICAgIDp0eXBlIHR5cGU6IHR5cGUgb3IgdHVwbGUgb2YgdHlwZXNcblxuICAgIDpyYWlzZXMgVHlwZUVycm9yOiBXaXRoIGEgaHVtYW4gcmVhZGFibGUgZXJyb3IgbWVzc2FnZSwgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAob2YgdHlwZSBgYXR0cnMuQXR0cmlidXRlYCksIHRoZSBleHBlY3RlZCB0eXBlLCBhbmQgdGhlIHZhbHVlIGl0XG4gICAgICAgIGdvdC5cbiAgICAiIiJcbiAgICByZXR1cm4gX0luc3RhbmNlT2ZWYWxpZGF0b3IodHlwZSlcblxuXG5AYXR0cnMocmVwcj1GYWxzZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXG5jbGFzcyBfTWF0Y2hlc1JlVmFsaWRhdG9yKG9iamVjdCk6XG4gICAgcGF0dGVybiA9IGF0dHJpYigpXG4gICAgbWF0Y2hfZnVuYyA9IGF0dHJpYigpXG5cbiAgICBkZWYgX19jYWxsX18oc2VsZiwgaW5zdCwgYXR0ciwgdmFsdWUpOlxuICAgICAgICAiIiJcbiAgICAgICAgV2UgdXNlIGEgY2FsbGFibGUgY2xhc3MgdG8gYmUgYWJsZSB0byBjaGFuZ2UgdGhlIGBgX19yZXByX19gYC5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG5vdCBzZWxmLm1hdGNoX2Z1bmModmFsdWUpOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICAgICAiXCd7bmFtZX1cJyBtdXN0IG1hdGNoIHJlZ2V4IHtwYXR0ZXJuIXJ9IlxuICAgICAgICAgICAgICAgICIgKHt2YWx1ZSFyfSBkb2VzblwndCkiLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1hdHRyLm5hbWUsIHBhdHRlcm49c2VsZi5wYXR0ZXJuLnBhdHRlcm4sIHZhbHVlPXZhbHVlXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBhdHRyLFxuICAgICAgICAgICAgICAgIHNlbGYucGF0dGVybixcbiAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIClcblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuICI8bWF0Y2hlc19yZSB2YWxpZGF0b3IgZm9yIHBhdHRlcm4ge3BhdHRlcm4hcn0+Ii5mb3JtYXQoXG4gICAgICAgICAgICBwYXR0ZXJuPXNlbGYucGF0dGVyblxuICAgICAgICApXG5cblxuZGVmIG1hdGNoZXNfcmUocmVnZXgsIGZsYWdzPTAsIGZ1bmM9Tm9uZSk6XG4gICAgciIiIlxuICAgIEEgdmFsaWRhdG9yIHRoYXQgcmFpc2VzIGBWYWx1ZUVycm9yYCBpZiB0aGUgaW5pdGlhbGl6ZXIgaXMgY2FsbGVkXG4gICAgd2l0aCBhIHN0cmluZyB0aGF0IGRvZXNuXCd0IG1hdGNoICpyZWdleCouXG5cbiAgICA6cGFyYW0gcmVnZXg6IGEgcmVnZXggc3RyaW5nIG9yIHByZWNvbXBpbGVkIHBhdHRlcm4gdG8gbWF0Y2ggYWdhaW5zdFxuICAgIDpwYXJhbSBpbnQgZmxhZ3M6IGZsYWdzIHRoYXQgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIHVuZGVybHlpbmcgcmUgZnVuY3Rpb25cbiAgICAgICAgKGRlZmF1bHQgMClcbiAgICA6cGFyYW0gY2FsbGFibGUgZnVuYzogd2hpY2ggdW5kZXJseWluZyBgcmVgIGZ1bmN0aW9uIHRvIGNhbGwgKG9wdGlvbnNcbiAgICAgICAgYXJlIGByZS5mdWxsbWF0Y2hgLCBgcmUuc2VhcmNoYCwgYHJlLm1hdGNoYCwgZGVmYXVsdFxuICAgICAgICBpcyBgYE5vbmVgYCB3aGljaCBtZWFucyBlaXRoZXIgYHJlLmZ1bGxtYXRjaGAgb3IgYW4gZW11bGF0aW9uIG9mXG4gICAgICAgIGl0IG9uIFB5dGhvbiAyKS4gRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIHRoZXkgd29uXCd0IGJlIHVzZWQgZGlyZWN0bHlcbiAgICAgICAgYnV0IG9uIGEgcHJlLWByZS5jb21waWxlYFxcIGVkIHBhdHRlcm4uXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOS4yLjBcbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDIxLjMuMCAqcmVnZXgqIGNhbiBiZSBhIHByZS1jb21waWxlZCBwYXR0ZXJuLlxuICAgICIiIlxuICAgIGZ1bGxtYXRjaCA9IGdldGF0dHIocmUsICJmdWxsbWF0Y2giLCBOb25lKVxuICAgIHZhbGlkX2Z1bmNzID0gKGZ1bGxtYXRjaCwgTm9uZSwgcmUuc2VhcmNoLCByZS5tYXRjaClcbiAgICBpZiBmdW5jIG5vdCBpbiB2YWxpZF9mdW5jczpcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICJcJ2Z1bmNcJyBtdXN0IGJlIG9uZSBvZiB7fS4iLmZvcm1hdChcbiAgICAgICAgICAgICAgICAiLCAiLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgIHNvcnRlZChcbiAgICAgICAgICAgICAgICAgICAgICAgIGUgYW5kIGUuX19uYW1lX18gb3IgIk5vbmUiIGZvciBlIGluIHNldCh2YWxpZF9mdW5jcylcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgKVxuXG4gICAgaWYgaXNpbnN0YW5jZShyZWdleCwgUGF0dGVybik6XG4gICAgICAgIGlmIGZsYWdzOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJ2ZsYWdzXCcgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIGEgc3RyaW5nIHBhdHRlcm47ICJcbiAgICAgICAgICAgICAgICAicGFzcyBmbGFncyB0byByZS5jb21waWxlKCkgaW5zdGVhZCJcbiAgICAgICAgICAgIClcbiAgICAgICAgcGF0dGVybiA9IHJlZ2V4XG4gICAgZWxzZTpcbiAgICAgICAgcGF0dGVybiA9IHJlLmNvbXBpbGUocmVnZXgsIGZsYWdzKVxuXG4gICAgaWYgZnVuYyBpcyByZS5tYXRjaDpcbiAgICAgICAgbWF0Y2hfZnVuYyA9IHBhdHRlcm4ubWF0Y2hcbiAgICBlbGlmIGZ1bmMgaXMgcmUuc2VhcmNoOlxuICAgICAgICBtYXRjaF9mdW5jID0gcGF0dGVybi5zZWFyY2hcbiAgICBlbGlmIGZ1bGxtYXRjaDpcbiAgICAgICAgbWF0Y2hfZnVuYyA9IHBhdHRlcm4uZnVsbG1hdGNoXG4gICAgZWxzZTogICMgUHl0aG9uIDIgZnVsbG1hdGNoIGVtdWxhdGlvbiAoaHR0cHM6Ly9idWdzLnB5dGhvbi5vcmcvaXNzdWUxNjIwMylcbiAgICAgICAgcGF0dGVybiA9IHJlLmNvbXBpbGUoXG4gICAgICAgICAgICByIig/Ont9KVxcWiIuZm9ybWF0KHBhdHRlcm4ucGF0dGVybiksIHBhdHRlcm4uZmxhZ3NcbiAgICAgICAgKVxuICAgICAgICBtYXRjaF9mdW5jID0gcGF0dGVybi5tYXRjaFxuXG4gICAgcmV0dXJuIF9NYXRjaGVzUmVWYWxpZGF0b3IocGF0dGVybiwgbWF0Y2hfZnVuYylcblxuXG5AYXR0cnMocmVwcj1GYWxzZSwgc2xvdHM9VHJ1ZSwgaGFzaD1UcnVlKVxuY2xhc3MgX1Byb3ZpZGVzVmFsaWRhdG9yKG9iamVjdCk6XG4gICAgaW50ZXJmYWNlID0gYXR0cmliKClcblxuICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBpbnN0LCBhdHRyLCB2YWx1ZSk6XG4gICAgICAgICIiIlxuICAgICAgICBXZSB1c2UgYSBjYWxsYWJsZSBjbGFzcyB0byBiZSBhYmxlIHRvIGNoYW5nZSB0aGUgYGBfX3JlcHJfX2BgLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgbm90IHNlbGYuaW50ZXJmYWNlLnByb3ZpZGVkQnkodmFsdWUpOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJ3tuYW1lfVwnIG11c3QgcHJvdmlkZSB7aW50ZXJmYWNlIXJ9IHdoaWNoIHt2YWx1ZSFyfSAiXG4gICAgICAgICAgICAgICAgImRvZXNuXCd0LiIuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICBuYW1lPWF0dHIubmFtZSwgaW50ZXJmYWNlPXNlbGYuaW50ZXJmYWNlLCB2YWx1ZT12YWx1ZVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgYXR0cixcbiAgICAgICAgICAgICAgICBzZWxmLmludGVyZmFjZSxcbiAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIClcblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuICI8cHJvdmlkZXMgdmFsaWRhdG9yIGZvciBpbnRlcmZhY2Uge2ludGVyZmFjZSFyfT4iLmZvcm1hdChcbiAgICAgICAgICAgIGludGVyZmFjZT1zZWxmLmludGVyZmFjZVxuICAgICAgICApXG5cblxuZGVmIHByb3ZpZGVzKGludGVyZmFjZSk6XG4gICAgIiIiXG4gICAgQSB2YWxpZGF0b3IgdGhhdCByYWlzZXMgYSBgVHlwZUVycm9yYCBpZiB0aGUgaW5pdGlhbGl6ZXIgaXMgY2FsbGVkXG4gICAgd2l0aCBhbiBvYmplY3QgdGhhdCBkb2VzIG5vdCBwcm92aWRlIHRoZSByZXF1ZXN0ZWQgKmludGVyZmFjZSogKGNoZWNrcyBhcmVcbiAgICBwZXJmb3JtZWQgdXNpbmcgYGBpbnRlcmZhY2UucHJvdmlkZWRCeSh2YWx1ZSlgYCAoc2VlIGB6b3BlLmludGVyZmFjZVxuICAgIDxodHRwczovL3pvcGVpbnRlcmZhY2UucmVhZHRoZWRvY3MuaW8vZW4vbGF0ZXN0Lz5gXykuXG5cbiAgICA6cGFyYW0gaW50ZXJmYWNlOiBUaGUgaW50ZXJmYWNlIHRvIGNoZWNrIGZvci5cbiAgICA6dHlwZSBpbnRlcmZhY2U6IGBgem9wZS5pbnRlcmZhY2UuSW50ZXJmYWNlYGBcblxuICAgIDpyYWlzZXMgVHlwZUVycm9yOiBXaXRoIGEgaHVtYW4gcmVhZGFibGUgZXJyb3IgbWVzc2FnZSwgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAob2YgdHlwZSBgYXR0cnMuQXR0cmlidXRlYCksIHRoZSBleHBlY3RlZCBpbnRlcmZhY2UsIGFuZCB0aGVcbiAgICAgICAgdmFsdWUgaXQgZ290LlxuICAgICIiIlxuICAgIHJldHVybiBfUHJvdmlkZXNWYWxpZGF0b3IoaW50ZXJmYWNlKVxuXG5cbkBhdHRycyhyZXByPUZhbHNlLCBzbG90cz1UcnVlLCBoYXNoPVRydWUpXG5jbGFzcyBfT3B0aW9uYWxWYWxpZGF0b3Iob2JqZWN0KTpcbiAgICB2YWxpZGF0b3IgPSBhdHRyaWIoKVxuXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIGluc3QsIGF0dHIsIHZhbHVlKTpcbiAgICAgICAgaWYgdmFsdWUgaXMgTm9uZTpcbiAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIHNlbGYudmFsaWRhdG9yKGluc3QsIGF0dHIsIHZhbHVlKVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIjxvcHRpb25hbCB2YWxpZGF0b3IgZm9yIHt3aGF0fSBvciBOb25lPiIuZm9ybWF0KFxuICAgICAgICAgICAgd2hhdD1yZXByKHNlbGYudmFsaWRhdG9yKVxuICAgICAgICApXG5cblxuZGVmIG9wdGlvbmFsKHZhbGlkYXRvcik6XG4gICAgIiIiXG4gICAgQSB2YWxpZGF0b3IgdGhhdCBtYWtlcyBhbiBhdHRyaWJ1dGUgb3B0aW9uYWwuICBBbiBvcHRpb25hbCBhdHRyaWJ1dGUgaXMgb25lXG4gICAgd2hpY2ggY2FuIGJlIHNldCB0byBgYE5vbmVgYCBpbiBhZGRpdGlvbiB0byBzYXRpc2Z5aW5nIHRoZSByZXF1aXJlbWVudHMgb2ZcbiAgICB0aGUgc3ViLXZhbGlkYXRvci5cblxuICAgIDpwYXJhbSB2YWxpZGF0b3I6IEEgdmFsaWRhdG9yIChvciBhIGxpc3Qgb2YgdmFsaWRhdG9ycykgdGhhdCBpcyB1c2VkIGZvclxuICAgICAgICBub24tYGBOb25lYGAgdmFsdWVzLlxuICAgIDp0eXBlIHZhbGlkYXRvcjogY2FsbGFibGUgb3IgYGxpc3RgIG9mIGNhbGxhYmxlcy5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE1LjEuMFxuICAgIC4uIHZlcnNpb25jaGFuZ2VkOjogMTcuMS4wICp2YWxpZGF0b3IqIGNhbiBiZSBhIGxpc3Qgb2YgdmFsaWRhdG9ycy5cbiAgICAiIiJcbiAgICBpZiBpc2luc3RhbmNlKHZhbGlkYXRvciwgbGlzdCk6XG4gICAgICAgIHJldHVybiBfT3B0aW9uYWxWYWxpZGF0b3IoX0FuZFZhbGlkYXRvcih2YWxpZGF0b3IpKVxuICAgIHJldHVybiBfT3B0aW9uYWxWYWxpZGF0b3IodmFsaWRhdG9yKVxuXG5cbkBhdHRycyhyZXByPUZhbHNlLCBzbG90cz1UcnVlLCBoYXNoPVRydWUpXG5jbGFzcyBfSW5WYWxpZGF0b3Iob2JqZWN0KTpcbiAgICBvcHRpb25zID0gYXR0cmliKClcblxuICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBpbnN0LCBhdHRyLCB2YWx1ZSk6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGluX29wdGlvbnMgPSB2YWx1ZSBpbiBzZWxmLm9wdGlvbnNcbiAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjogICMgZS5nLiBgMSBpbiAiYWJjImBcbiAgICAgICAgICAgIGluX29wdGlvbnMgPSBGYWxzZVxuXG4gICAgICAgIGlmIG5vdCBpbl9vcHRpb25zOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICAgICAiXCd7bmFtZX1cJyBtdXN0IGJlIGluIHtvcHRpb25zIXJ9IChnb3Qge3ZhbHVlIXJ9KSIuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICBuYW1lPWF0dHIubmFtZSwgb3B0aW9ucz1zZWxmLm9wdGlvbnMsIHZhbHVlPXZhbHVlXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIjxpbl8gdmFsaWRhdG9yIHdpdGggb3B0aW9ucyB7b3B0aW9ucyFyfT4iLmZvcm1hdChcbiAgICAgICAgICAgIG9wdGlvbnM9c2VsZi5vcHRpb25zXG4gICAgICAgIClcblxuXG5kZWYgaW5fKG9wdGlvbnMpOlxuICAgICIiIlxuICAgIEEgdmFsaWRhdG9yIHRoYXQgcmFpc2VzIGEgYFZhbHVlRXJyb3JgIGlmIHRoZSBpbml0aWFsaXplciBpcyBjYWxsZWRcbiAgICB3aXRoIGEgdmFsdWUgdGhhdCBkb2VzIG5vdCBiZWxvbmcgaW4gdGhlIG9wdGlvbnMgcHJvdmlkZWQuICBUaGUgY2hlY2sgaXNcbiAgICBwZXJmb3JtZWQgdXNpbmcgYGB2YWx1ZSBpbiBvcHRpb25zYGAuXG5cbiAgICA6cGFyYW0gb3B0aW9uczogQWxsb3dlZCBvcHRpb25zLlxuICAgIDp0eXBlIG9wdGlvbnM6IGxpc3QsIHR1cGxlLCBgZW51bS5FbnVtYCwgLi4uXG5cbiAgICA6cmFpc2VzIFZhbHVlRXJyb3I6IFdpdGggYSBodW1hbiByZWFkYWJsZSBlcnJvciBtZXNzYWdlLCB0aGUgYXR0cmlidXRlIChvZlxuICAgICAgIHR5cGUgYGF0dHJzLkF0dHJpYnV0ZWApLCB0aGUgZXhwZWN0ZWQgb3B0aW9ucywgYW5kIHRoZSB2YWx1ZSBpdFxuICAgICAgIGdvdC5cblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDE3LjEuMFxuICAgICIiIlxuICAgIHJldHVybiBfSW5WYWxpZGF0b3Iob3B0aW9ucylcblxuXG5AYXR0cnMocmVwcj1GYWxzZSwgc2xvdHM9RmFsc2UsIGhhc2g9VHJ1ZSlcbmNsYXNzIF9Jc0NhbGxhYmxlVmFsaWRhdG9yKG9iamVjdCk6XG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIGluc3QsIGF0dHIsIHZhbHVlKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFdlIHVzZSBhIGNhbGxhYmxlIGNsYXNzIHRvIGJlIGFibGUgdG8gY2hhbmdlIHRoZSBgYF9fcmVwcl9fYGAuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBub3QgY2FsbGFibGUodmFsdWUpOlxuICAgICAgICAgICAgbWVzc2FnZSA9IChcbiAgICAgICAgICAgICAgICAiXCd7bmFtZX1cJyBtdXN0IGJlIGNhbGxhYmxlICJcbiAgICAgICAgICAgICAgICAiKGdvdCB7dmFsdWUhcn0gdGhhdCBpcyBhIHthY3R1YWwhcn0pLiJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJhaXNlIE5vdENhbGxhYmxlRXJyb3IoXG4gICAgICAgICAgICAgICAgbXNnPW1lc3NhZ2UuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICBuYW1lPWF0dHIubmFtZSwgdmFsdWU9dmFsdWUsIGFjdHVhbD12YWx1ZS5fX2NsYXNzX19cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHZhbHVlPXZhbHVlLFxuICAgICAgICAgICAgKVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIjxpc19jYWxsYWJsZSB2YWxpZGF0b3I+IlxuXG5cbmRlZiBpc19jYWxsYWJsZSgpOlxuICAgICIiIlxuICAgIEEgdmFsaWRhdG9yIHRoYXQgcmFpc2VzIGEgYGF0dHIuZXhjZXB0aW9ucy5Ob3RDYWxsYWJsZUVycm9yYCBpZiB0aGVcbiAgICBpbml0aWFsaXplciBpcyBjYWxsZWQgd2l0aCBhIHZhbHVlIGZvciB0aGlzIHBhcnRpY3VsYXIgYXR0cmlidXRlXG4gICAgdGhhdCBpcyBub3QgY2FsbGFibGUuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOS4xLjBcblxuICAgIDpyYWlzZXMgYGF0dHIuZXhjZXB0aW9ucy5Ob3RDYWxsYWJsZUVycm9yYDogV2l0aCBhIGh1bWFuIHJlYWRhYmxlIGVycm9yXG4gICAgICAgIG1lc3NhZ2UgY29udGFpbmluZyB0aGUgYXR0cmlidXRlIChgYXR0cnMuQXR0cmlidXRlYCkgbmFtZSxcbiAgICAgICAgYW5kIHRoZSB2YWx1ZSBpdCBnb3QuXG4gICAgIiIiXG4gICAgcmV0dXJuIF9Jc0NhbGxhYmxlVmFsaWRhdG9yKClcblxuXG5AYXR0cnMocmVwcj1GYWxzZSwgc2xvdHM9VHJ1ZSwgaGFzaD1UcnVlKVxuY2xhc3MgX0RlZXBJdGVyYWJsZShvYmplY3QpOlxuICAgIG1lbWJlcl92YWxpZGF0b3IgPSBhdHRyaWIodmFsaWRhdG9yPWlzX2NhbGxhYmxlKCkpXG4gICAgaXRlcmFibGVfdmFsaWRhdG9yID0gYXR0cmliKFxuICAgICAgICBkZWZhdWx0PU5vbmUsIHZhbGlkYXRvcj1vcHRpb25hbChpc19jYWxsYWJsZSgpKVxuICAgIClcblxuICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBpbnN0LCBhdHRyLCB2YWx1ZSk6XG4gICAgICAgICIiIlxuICAgICAgICBXZSB1c2UgYSBjYWxsYWJsZSBjbGFzcyB0byBiZSBhYmxlIHRvIGNoYW5nZSB0aGUgYGBfX3JlcHJfX2BgLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgc2VsZi5pdGVyYWJsZV92YWxpZGF0b3IgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICBzZWxmLml0ZXJhYmxlX3ZhbGlkYXRvcihpbnN0LCBhdHRyLCB2YWx1ZSlcblxuICAgICAgICBmb3IgbWVtYmVyIGluIHZhbHVlOlxuICAgICAgICAgICAgc2VsZi5tZW1iZXJfdmFsaWRhdG9yKGluc3QsIGF0dHIsIG1lbWJlcilcblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgaXRlcmFibGVfaWRlbnRpZmllciA9IChcbiAgICAgICAgICAgICIiXG4gICAgICAgICAgICBpZiBzZWxmLml0ZXJhYmxlX3ZhbGlkYXRvciBpcyBOb25lXG4gICAgICAgICAgICBlbHNlICIge2l0ZXJhYmxlIXJ9Ii5mb3JtYXQoaXRlcmFibGU9c2VsZi5pdGVyYWJsZV92YWxpZGF0b3IpXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICI8ZGVlcF9pdGVyYWJsZSB2YWxpZGF0b3IgZm9ye2l0ZXJhYmxlX2lkZW50aWZpZXJ9IlxuICAgICAgICAgICAgIiBpdGVyYWJsZXMgb2Yge21lbWJlciFyfT4iXG4gICAgICAgICkuZm9ybWF0KFxuICAgICAgICAgICAgaXRlcmFibGVfaWRlbnRpZmllcj1pdGVyYWJsZV9pZGVudGlmaWVyLFxuICAgICAgICAgICAgbWVtYmVyPXNlbGYubWVtYmVyX3ZhbGlkYXRvcixcbiAgICAgICAgKVxuXG5cbmRlZiBkZWVwX2l0ZXJhYmxlKG1lbWJlcl92YWxpZGF0b3IsIGl0ZXJhYmxlX3ZhbGlkYXRvcj1Ob25lKTpcbiAgICAiIiJcbiAgICBBIHZhbGlkYXRvciB0aGF0IHBlcmZvcm1zIGRlZXAgdmFsaWRhdGlvbiBvZiBhbiBpdGVyYWJsZS5cblxuICAgIDpwYXJhbSBtZW1iZXJfdmFsaWRhdG9yOiBWYWxpZGF0b3IgdG8gYXBwbHkgdG8gaXRlcmFibGUgbWVtYmVyc1xuICAgIDpwYXJhbSBpdGVyYWJsZV92YWxpZGF0b3I6IFZhbGlkYXRvciB0byBhcHBseSB0byBpdGVyYWJsZSBpdHNlbGZcbiAgICAgICAgKG9wdGlvbmFsKVxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMTkuMS4wXG5cbiAgICA6cmFpc2VzIFR5cGVFcnJvcjogaWYgYW55IHN1Yi12YWxpZGF0b3JzIGZhaWxcbiAgICAiIiJcbiAgICByZXR1cm4gX0RlZXBJdGVyYWJsZShtZW1iZXJfdmFsaWRhdG9yLCBpdGVyYWJsZV92YWxpZGF0b3IpXG5cblxuQGF0dHJzKHJlcHI9RmFsc2UsIHNsb3RzPVRydWUsIGhhc2g9VHJ1ZSlcbmNsYXNzIF9EZWVwTWFwcGluZyhvYmplY3QpOlxuICAgIGtleV92YWxpZGF0b3IgPSBhdHRyaWIodmFsaWRhdG9yPWlzX2NhbGxhYmxlKCkpXG4gICAgdmFsdWVfdmFsaWRhdG9yID0gYXR0cmliKHZhbGlkYXRvcj1pc19jYWxsYWJsZSgpKVxuICAgIG1hcHBpbmdfdmFsaWRhdG9yID0gYXR0cmliKGRlZmF1bHQ9Tm9uZSwgdmFsaWRhdG9yPW9wdGlvbmFsKGlzX2NhbGxhYmxlKCkpKVxuXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIGluc3QsIGF0dHIsIHZhbHVlKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFdlIHVzZSBhIGNhbGxhYmxlIGNsYXNzIHRvIGJlIGFibGUgdG8gY2hhbmdlIHRoZSBgYF9fcmVwcl9fYGAuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBzZWxmLm1hcHBpbmdfdmFsaWRhdG9yIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgc2VsZi5tYXBwaW5nX3ZhbGlkYXRvcihpbnN0LCBhdHRyLCB2YWx1ZSlcblxuICAgICAgICBmb3Iga2V5IGluIHZhbHVlOlxuICAgICAgICAgICAgc2VsZi5rZXlfdmFsaWRhdG9yKGluc3QsIGF0dHIsIGtleSlcbiAgICAgICAgICAgIHNlbGYudmFsdWVfdmFsaWRhdG9yKGluc3QsIGF0dHIsIHZhbHVlW2tleV0pXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAiPGRlZXBfbWFwcGluZyB2YWxpZGF0b3IgZm9yIG9iamVjdHMgbWFwcGluZyB7a2V5IXJ9IHRvIHt2YWx1ZSFyfT4iXG4gICAgICAgICkuZm9ybWF0KGtleT1zZWxmLmtleV92YWxpZGF0b3IsIHZhbHVlPXNlbGYudmFsdWVfdmFsaWRhdG9yKVxuXG5cbmRlZiBkZWVwX21hcHBpbmcoa2V5X3ZhbGlkYXRvciwgdmFsdWVfdmFsaWRhdG9yLCBtYXBwaW5nX3ZhbGlkYXRvcj1Ob25lKTpcbiAgICAiIiJcbiAgICBBIHZhbGlkYXRvciB0aGF0IHBlcmZvcm1zIGRlZXAgdmFsaWRhdGlvbiBvZiBhIGRpY3Rpb25hcnkuXG5cbiAgICA6cGFyYW0ga2V5X3ZhbGlkYXRvcjogVmFsaWRhdG9yIHRvIGFwcGx5IHRvIGRpY3Rpb25hcnkga2V5c1xuICAgIDpwYXJhbSB2YWx1ZV92YWxpZGF0b3I6IFZhbGlkYXRvciB0byBhcHBseSB0byBkaWN0aW9uYXJ5IHZhbHVlc1xuICAgIDpwYXJhbSBtYXBwaW5nX3ZhbGlkYXRvcjogVmFsaWRhdG9yIHRvIGFwcGx5IHRvIHRvcC1sZXZlbCBtYXBwaW5nXG4gICAgICAgIGF0dHJpYnV0ZSAob3B0aW9uYWwpXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOS4xLjBcblxuICAgIDpyYWlzZXMgVHlwZUVycm9yOiBpZiBhbnkgc3ViLXZhbGlkYXRvcnMgZmFpbFxuICAgICIiIlxuICAgIHJldHVybiBfRGVlcE1hcHBpbmcoa2V5X3ZhbGlkYXRvciwgdmFsdWVfdmFsaWRhdG9yLCBtYXBwaW5nX3ZhbGlkYXRvcilcblxuXG5AYXR0cnMocmVwcj1GYWxzZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXG5jbGFzcyBfTnVtYmVyVmFsaWRhdG9yKG9iamVjdCk6XG4gICAgYm91bmQgPSBhdHRyaWIoKVxuICAgIGNvbXBhcmVfb3AgPSBhdHRyaWIoKVxuICAgIGNvbXBhcmVfZnVuYyA9IGF0dHJpYigpXG5cbiAgICBkZWYgX19jYWxsX18oc2VsZiwgaW5zdCwgYXR0ciwgdmFsdWUpOlxuICAgICAgICAiIiJcbiAgICAgICAgV2UgdXNlIGEgY2FsbGFibGUgY2xhc3MgdG8gYmUgYWJsZSB0byBjaGFuZ2UgdGhlIGBgX19yZXByX19gYC5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG5vdCBzZWxmLmNvbXBhcmVfZnVuYyh2YWx1ZSwgc2VsZi5ib3VuZCk6XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxuICAgICAgICAgICAgICAgICJcJ3tuYW1lfVwnIG11c3QgYmUge29wfSB7Ym91bmR9OiB7dmFsdWV9Ii5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9YXR0ci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvcD1zZWxmLmNvbXBhcmVfb3AsXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kPXNlbGYuYm91bmQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXZhbHVlLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuICI8VmFsaWRhdG9yIGZvciB4IHtvcH0ge2JvdW5kfT4iLmZvcm1hdChcbiAgICAgICAgICAgIG9wPXNlbGYuY29tcGFyZV9vcCwgYm91bmQ9c2VsZi5ib3VuZFxuICAgICAgICApXG5cblxuZGVmIGx0KHZhbCk6XG4gICAgIiIiXG4gICAgQSB2YWxpZGF0b3IgdGhhdCByYWlzZXMgYFZhbHVlRXJyb3JgIGlmIHRoZSBpbml0aWFsaXplciBpcyBjYWxsZWRcbiAgICB3aXRoIGEgbnVtYmVyIGxhcmdlciBvciBlcXVhbCB0byAqdmFsKi5cblxuICAgIDpwYXJhbSB2YWw6IEV4Y2x1c2l2ZSB1cHBlciBib3VuZCBmb3IgdmFsdWVzXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMS4zLjBcbiAgICAiIiJcbiAgICByZXR1cm4gX051bWJlclZhbGlkYXRvcih2YWwsICI8Iiwgb3BlcmF0b3IubHQpXG5cblxuZGVmIGxlKHZhbCk6XG4gICAgIiIiXG4gICAgQSB2YWxpZGF0b3IgdGhhdCByYWlzZXMgYFZhbHVlRXJyb3JgIGlmIHRoZSBpbml0aWFsaXplciBpcyBjYWxsZWRcbiAgICB3aXRoIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAqdmFsKi5cblxuICAgIDpwYXJhbSB2YWw6IEluY2x1c2l2ZSB1cHBlciBib3VuZCBmb3IgdmFsdWVzXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMS4zLjBcbiAgICAiIiJcbiAgICByZXR1cm4gX051bWJlclZhbGlkYXRvcih2YWwsICI8PSIsIG9wZXJhdG9yLmxlKVxuXG5cbmRlZiBnZSh2YWwpOlxuICAgICIiIlxuICAgIEEgdmFsaWRhdG9yIHRoYXQgcmFpc2VzIGBWYWx1ZUVycm9yYCBpZiB0aGUgaW5pdGlhbGl6ZXIgaXMgY2FsbGVkXG4gICAgd2l0aCBhIG51bWJlciBzbWFsbGVyIHRoYW4gKnZhbCouXG5cbiAgICA6cGFyYW0gdmFsOiBJbmNsdXNpdmUgbG93ZXIgYm91bmQgZm9yIHZhbHVlc1xuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjEuMy4wXG4gICAgIiIiXG4gICAgcmV0dXJuIF9OdW1iZXJWYWxpZGF0b3IodmFsLCAiPj0iLCBvcGVyYXRvci5nZSlcblxuXG5kZWYgZ3QodmFsKTpcbiAgICAiIiJcbiAgICBBIHZhbGlkYXRvciB0aGF0IHJhaXNlcyBgVmFsdWVFcnJvcmAgaWYgdGhlIGluaXRpYWxpemVyIGlzIGNhbGxlZFxuICAgIHdpdGggYSBudW1iZXIgc21hbGxlciBvciBlcXVhbCB0byAqdmFsKi5cblxuICAgIDpwYXJhbSB2YWw6IEV4Y2x1c2l2ZSBsb3dlciBib3VuZCBmb3IgdmFsdWVzXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMS4zLjBcbiAgICAiIiJcbiAgICByZXR1cm4gX051bWJlclZhbGlkYXRvcih2YWwsICI+Iiwgb3BlcmF0b3IuZ3QpXG5cblxuQGF0dHJzKHJlcHI9RmFsc2UsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxuY2xhc3MgX01heExlbmd0aFZhbGlkYXRvcihvYmplY3QpOlxuICAgIG1heF9sZW5ndGggPSBhdHRyaWIoKVxuXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIGluc3QsIGF0dHIsIHZhbHVlKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFdlIHVzZSBhIGNhbGxhYmxlIGNsYXNzIHRvIGJlIGFibGUgdG8gY2hhbmdlIHRoZSBgYF9fcmVwcl9fYGAuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBsZW4odmFsdWUpID4gc2VsZi5tYXhfbGVuZ3RoOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICAgICAiTGVuZ3RoIG9mIFwne25hbWV9XCcgbXVzdCBiZSA8PSB7bWF4fToge2xlbn0iLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1hdHRyLm5hbWUsIG1heD1zZWxmLm1heF9sZW5ndGgsIGxlbj1sZW4odmFsdWUpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIjxtYXhfbGVuIHZhbGlkYXRvciBmb3Ige21heH0+Ii5mb3JtYXQobWF4PXNlbGYubWF4X2xlbmd0aClcblxuXG5kZWYgbWF4X2xlbihsZW5ndGgpOlxuICAgICIiIlxuICAgIEEgdmFsaWRhdG9yIHRoYXQgcmFpc2VzIGBWYWx1ZUVycm9yYCBpZiB0aGUgaW5pdGlhbGl6ZXIgaXMgY2FsbGVkXG4gICAgd2l0aCBhIHN0cmluZyBvciBpdGVyYWJsZSB0aGF0IGlzIGxvbmdlciB0aGFuICpsZW5ndGgqLlxuXG4gICAgOnBhcmFtIGludCBsZW5ndGg6IE1heGltdW0gbGVuZ3RoIG9mIHRoZSBzdHJpbmcgb3IgaXRlcmFibGVcblxuICAgIC4uIHZlcnNpb25hZGRlZDo6IDIxLjMuMFxuICAgICIiIlxuICAgIHJldHVybiBfTWF4TGVuZ3RoVmFsaWRhdG9yKGxlbmd0aClcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhdHRyL19jbXAucHknLCBiJyMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuXG5mcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydCwgZGl2aXNpb24sIHByaW50X2Z1bmN0aW9uXG5cbmltcG9ydCBmdW5jdG9vbHNcblxuZnJvbSAuX2NvbXBhdCBpbXBvcnQgbmV3X2NsYXNzXG5mcm9tIC5fbWFrZSBpbXBvcnQgX21ha2VfbmVcblxuXG5fb3BlcmF0aW9uX25hbWVzID0geyJlcSI6ICI9PSIsICJsdCI6ICI8IiwgImxlIjogIjw9IiwgImd0IjogIj4iLCAiZ2UiOiAiPj0ifVxuXG5cbmRlZiBjbXBfdXNpbmcoXG4gICAgZXE9Tm9uZSxcbiAgICBsdD1Ob25lLFxuICAgIGxlPU5vbmUsXG4gICAgZ3Q9Tm9uZSxcbiAgICBnZT1Ob25lLFxuICAgIHJlcXVpcmVfc2FtZV90eXBlPVRydWUsXG4gICAgY2xhc3NfbmFtZT0iQ29tcGFyYWJsZSIsXG4pOlxuICAgICIiIlxuICAgIENyZWF0ZSBhIGNsYXNzIHRoYXQgY2FuIGJlIHBhc3NlZCBpbnRvIGBhdHRyLmliYFwncyBgYGVxYGAsIGBgb3JkZXJgYCwgYW5kXG4gICAgYGBjbXBgYCBhcmd1bWVudHMgdG8gY3VzdG9taXplIGZpZWxkIGNvbXBhcmlzb24uXG5cbiAgICBUaGUgcmVzdWx0aW5nIGNsYXNzIHdpbGwgaGF2ZSBhIGZ1bGwgc2V0IG9mIG9yZGVyaW5nIG1ldGhvZHMgaWZcbiAgICBhdCBsZWFzdCBvbmUgb2YgYGB7bHQsIGxlLCBndCwgZ2V9YGAgYW5kIGBgZXFgYCAgYXJlIHByb3ZpZGVkLlxuXG4gICAgOnBhcmFtIE9wdGlvbmFsW2NhbGxhYmxlXSBlcTogYGNhbGxhYmxlYCB1c2VkIHRvIGV2YWx1YXRlIGVxdWFsaXR5XG4gICAgICAgIG9mIHR3byBvYmplY3RzLlxuICAgIDpwYXJhbSBPcHRpb25hbFtjYWxsYWJsZV0gbHQ6IGBjYWxsYWJsZWAgdXNlZCB0byBldmFsdWF0ZSB3aGV0aGVyXG4gICAgICAgIG9uZSBvYmplY3QgaXMgbGVzcyB0aGFuIGFub3RoZXIgb2JqZWN0LlxuICAgIDpwYXJhbSBPcHRpb25hbFtjYWxsYWJsZV0gbGU6IGBjYWxsYWJsZWAgdXNlZCB0byBldmFsdWF0ZSB3aGV0aGVyXG4gICAgICAgIG9uZSBvYmplY3QgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGFub3RoZXIgb2JqZWN0LlxuICAgIDpwYXJhbSBPcHRpb25hbFtjYWxsYWJsZV0gZ3Q6IGBjYWxsYWJsZWAgdXNlZCB0byBldmFsdWF0ZSB3aGV0aGVyXG4gICAgICAgIG9uZSBvYmplY3QgaXMgZ3JlYXRlciB0aGFuIGFub3RoZXIgb2JqZWN0LlxuICAgIDpwYXJhbSBPcHRpb25hbFtjYWxsYWJsZV0gZ2U6IGBjYWxsYWJsZWAgdXNlZCB0byBldmFsdWF0ZSB3aGV0aGVyXG4gICAgICAgIG9uZSBvYmplY3QgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGFub3RoZXIgb2JqZWN0LlxuXG4gICAgOnBhcmFtIGJvb2wgcmVxdWlyZV9zYW1lX3R5cGU6IFdoZW4gYFRydWVgLCBlcXVhbGl0eSBhbmQgb3JkZXJpbmcgbWV0aG9kc1xuICAgICAgICB3aWxsIHJldHVybiBgTm90SW1wbGVtZW50ZWRgIGlmIG9iamVjdHMgYXJlIG5vdCBvZiB0aGUgc2FtZSB0eXBlLlxuXG4gICAgOnBhcmFtIE9wdGlvbmFsW3N0cl0gY2xhc3NfbmFtZTogTmFtZSBvZiBjbGFzcy4gRGVmYXVsdHMgdG8gXCdDb21wYXJhYmxlXCcuXG5cbiAgICBTZWUgYGNvbXBhcmlzb25gIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMS4xLjBcbiAgICAiIiJcblxuICAgIGJvZHkgPSB7XG4gICAgICAgICJfX3Nsb3RzX18iOiBbInZhbHVlIl0sXG4gICAgICAgICJfX2luaXRfXyI6IF9tYWtlX2luaXQoKSxcbiAgICAgICAgIl9yZXF1aXJlbWVudHMiOiBbXSxcbiAgICAgICAgIl9pc19jb21wYXJhYmxlX3RvIjogX2lzX2NvbXBhcmFibGVfdG8sXG4gICAgfVxuXG4gICAgIyBBZGQgb3BlcmF0aW9ucy5cbiAgICBudW1fb3JkZXJfZnVuY3Rpb25zID0gMFxuICAgIGhhc19lcV9mdW5jdGlvbiA9IEZhbHNlXG5cbiAgICBpZiBlcSBpcyBub3QgTm9uZTpcbiAgICAgICAgaGFzX2VxX2Z1bmN0aW9uID0gVHJ1ZVxuICAgICAgICBib2R5WyJfX2VxX18iXSA9IF9tYWtlX29wZXJhdG9yKCJlcSIsIGVxKVxuICAgICAgICBib2R5WyJfX25lX18iXSA9IF9tYWtlX25lKClcblxuICAgIGlmIGx0IGlzIG5vdCBOb25lOlxuICAgICAgICBudW1fb3JkZXJfZnVuY3Rpb25zICs9IDFcbiAgICAgICAgYm9keVsiX19sdF9fIl0gPSBfbWFrZV9vcGVyYXRvcigibHQiLCBsdClcblxuICAgIGlmIGxlIGlzIG5vdCBOb25lOlxuICAgICAgICBudW1fb3JkZXJfZnVuY3Rpb25zICs9IDFcbiAgICAgICAgYm9keVsiX19sZV9fIl0gPSBfbWFrZV9vcGVyYXRvcigibGUiLCBsZSlcblxuICAgIGlmIGd0IGlzIG5vdCBOb25lOlxuICAgICAgICBudW1fb3JkZXJfZnVuY3Rpb25zICs9IDFcbiAgICAgICAgYm9keVsiX19ndF9fIl0gPSBfbWFrZV9vcGVyYXRvcigiZ3QiLCBndClcblxuICAgIGlmIGdlIGlzIG5vdCBOb25lOlxuICAgICAgICBudW1fb3JkZXJfZnVuY3Rpb25zICs9IDFcbiAgICAgICAgYm9keVsiX19nZV9fIl0gPSBfbWFrZV9vcGVyYXRvcigiZ2UiLCBnZSlcblxuICAgIHR5cGVfID0gbmV3X2NsYXNzKGNsYXNzX25hbWUsIChvYmplY3QsKSwge30sIGxhbWJkYSBuczogbnMudXBkYXRlKGJvZHkpKVxuXG4gICAgIyBBZGQgc2FtZSB0eXBlIHJlcXVpcmVtZW50LlxuICAgIGlmIHJlcXVpcmVfc2FtZV90eXBlOlxuICAgICAgICB0eXBlXy5fcmVxdWlyZW1lbnRzLmFwcGVuZChfY2hlY2tfc2FtZV90eXBlKVxuXG4gICAgIyBBZGQgdG90YWwgb3JkZXJpbmcgaWYgYXQgbGVhc3Qgb25lIG9wZXJhdGlvbiB3YXMgZGVmaW5lZC5cbiAgICBpZiAwIDwgbnVtX29yZGVyX2Z1bmN0aW9ucyA8IDQ6XG4gICAgICAgIGlmIG5vdCBoYXNfZXFfZnVuY3Rpb246XG4gICAgICAgICAgICAjIGZ1bmN0b29scy50b3RhbF9vcmRlcmluZyByZXF1aXJlcyBfX2VxX18gdG8gYmUgZGVmaW5lZCxcbiAgICAgICAgICAgICMgc28gcmFpc2UgZWFybHkgZXJyb3IgaGVyZSB0byBrZWVwIGEgbmljZSBzdGFjay5cbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXG4gICAgICAgICAgICAgICAgImVxIG11c3QgYmUgZGVmaW5lIGlzIG9yZGVyIHRvIGNvbXBsZXRlIG9yZGVyaW5nIGZyb20gIlxuICAgICAgICAgICAgICAgICJsdCwgbGUsIGd0LCBnZS4iXG4gICAgICAgICAgICApXG4gICAgICAgIHR5cGVfID0gZnVuY3Rvb2xzLnRvdGFsX29yZGVyaW5nKHR5cGVfKVxuXG4gICAgcmV0dXJuIHR5cGVfXG5cblxuZGVmIF9tYWtlX2luaXQoKTpcbiAgICAiIiJcbiAgICBDcmVhdGUgX19pbml0X18gbWV0aG9kLlxuICAgICIiIlxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlKTpcbiAgICAgICAgIiIiXG4gICAgICAgIEluaXRpYWxpemUgb2JqZWN0IHdpdGggKnZhbHVlKi5cbiAgICAgICAgIiIiXG4gICAgICAgIHNlbGYudmFsdWUgPSB2YWx1ZVxuXG4gICAgcmV0dXJuIF9faW5pdF9fXG5cblxuZGVmIF9tYWtlX29wZXJhdG9yKG5hbWUsIGZ1bmMpOlxuICAgICIiIlxuICAgIENyZWF0ZSBvcGVyYXRvciBtZXRob2QuXG4gICAgIiIiXG5cbiAgICBkZWYgbWV0aG9kKHNlbGYsIG90aGVyKTpcbiAgICAgICAgaWYgbm90IHNlbGYuX2lzX2NvbXBhcmFibGVfdG8ob3RoZXIpOlxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXG5cbiAgICAgICAgcmVzdWx0ID0gZnVuYyhzZWxmLnZhbHVlLCBvdGhlci52YWx1ZSlcbiAgICAgICAgaWYgcmVzdWx0IGlzIE5vdEltcGxlbWVudGVkOlxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuXG4gICAgbWV0aG9kLl9fbmFtZV9fID0gIl9fJXNfXyIgJSAobmFtZSwpXG4gICAgbWV0aG9kLl9fZG9jX18gPSAiUmV0dXJuIGEgJXMgYi4gIENvbXB1dGVkIGJ5IGF0dHJzLiIgJSAoXG4gICAgICAgIF9vcGVyYXRpb25fbmFtZXNbbmFtZV0sXG4gICAgKVxuXG4gICAgcmV0dXJuIG1ldGhvZFxuXG5cbmRlZiBfaXNfY29tcGFyYWJsZV90byhzZWxmLCBvdGhlcik6XG4gICAgIiIiXG4gICAgQ2hlY2sgd2hldGhlciBgb3RoZXJgIGlzIGNvbXBhcmFibGUgdG8gYHNlbGZgLlxuICAgICIiIlxuICAgIGZvciBmdW5jIGluIHNlbGYuX3JlcXVpcmVtZW50czpcbiAgICAgICAgaWYgbm90IGZ1bmMoc2VsZiwgb3RoZXIpOlxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXG4gICAgcmV0dXJuIFRydWVcblxuXG5kZWYgX2NoZWNrX3NhbWVfdHlwZShzZWxmLCBvdGhlcik6XG4gICAgIiIiXG4gICAgUmV0dXJuIFRydWUgaWYgKnNlbGYqIGFuZCAqb3RoZXIqIGFyZSBvZiB0aGUgc2FtZSB0eXBlLCBGYWxzZSBvdGhlcndpc2UuXG4gICAgIiIiXG4gICAgcmV0dXJuIG90aGVyLnZhbHVlLl9fY2xhc3NfXyBpcyBzZWxmLnZhbHVlLl9fY2xhc3NfX1xuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2F0dHIvX2Z1bmNzLnB5JywgYicjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcblxuZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQsIGRpdmlzaW9uLCBwcmludF9mdW5jdGlvblxuXG5pbXBvcnQgY29weVxuXG5mcm9tIC5fY29tcGF0IGltcG9ydCBpdGVyaXRlbXNcbmZyb20gLl9tYWtlIGltcG9ydCBOT1RISU5HLCBfb2JqX3NldGF0dHIsIGZpZWxkc1xuZnJvbSAuZXhjZXB0aW9ucyBpbXBvcnQgQXR0cnNBdHRyaWJ1dGVOb3RGb3VuZEVycm9yXG5cblxuZGVmIGFzZGljdChcbiAgICBpbnN0LFxuICAgIHJlY3Vyc2U9VHJ1ZSxcbiAgICBmaWx0ZXI9Tm9uZSxcbiAgICBkaWN0X2ZhY3Rvcnk9ZGljdCxcbiAgICByZXRhaW5fY29sbGVjdGlvbl90eXBlcz1GYWxzZSxcbiAgICB2YWx1ZV9zZXJpYWxpemVyPU5vbmUsXG4pOlxuICAgICIiIlxuICAgIFJldHVybiB0aGUgYGBhdHRyc2BgIGF0dHJpYnV0ZSB2YWx1ZXMgb2YgKmluc3QqIGFzIGEgZGljdC5cblxuICAgIE9wdGlvbmFsbHkgcmVjdXJzZSBpbnRvIG90aGVyIGBgYXR0cnNgYC1kZWNvcmF0ZWQgY2xhc3Nlcy5cblxuICAgIDpwYXJhbSBpbnN0OiBJbnN0YW5jZSBvZiBhbiBgYGF0dHJzYGAtZGVjb3JhdGVkIGNsYXNzLlxuICAgIDpwYXJhbSBib29sIHJlY3Vyc2U6IFJlY3Vyc2UgaW50byBjbGFzc2VzIHRoYXQgYXJlIGFsc29cbiAgICAgICAgYGBhdHRyc2BgLWRlY29yYXRlZC5cbiAgICA6cGFyYW0gY2FsbGFibGUgZmlsdGVyOiBBIGNhbGxhYmxlIHdob3NlIHJldHVybiBjb2RlIGRldGVybWluZXMgd2hldGhlciBhblxuICAgICAgICBhdHRyaWJ1dGUgb3IgZWxlbWVudCBpcyBpbmNsdWRlZCAoYGBUcnVlYGApIG9yIGRyb3BwZWQgKGBgRmFsc2VgYCkuICBJc1xuICAgICAgICBjYWxsZWQgd2l0aCB0aGUgYGF0dHJzLkF0dHJpYnV0ZWAgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IGFuZCB0aGVcbiAgICAgICAgdmFsdWUgYXMgdGhlIHNlY29uZCBhcmd1bWVudC5cbiAgICA6cGFyYW0gY2FsbGFibGUgZGljdF9mYWN0b3J5OiBBIGNhbGxhYmxlIHRvIHByb2R1Y2UgZGljdGlvbmFyaWVzIGZyb20uICBGb3JcbiAgICAgICAgZXhhbXBsZSwgdG8gcHJvZHVjZSBvcmRlcmVkIGRpY3Rpb25hcmllcyBpbnN0ZWFkIG9mIG5vcm1hbCBQeXRob25cbiAgICAgICAgZGljdGlvbmFyaWVzLCBwYXNzIGluIGBgY29sbGVjdGlvbnMuT3JkZXJlZERpY3RgYC5cbiAgICA6cGFyYW0gYm9vbCByZXRhaW5fY29sbGVjdGlvbl90eXBlczogRG8gbm90IGNvbnZlcnQgdG8gYGBsaXN0YGAgd2hlblxuICAgICAgICBlbmNvdW50ZXJpbmcgYW4gYXR0cmlidXRlIHdob3NlIHR5cGUgaXMgYGB0dXBsZWBgIG9yIGBgc2V0YGAuICBPbmx5XG4gICAgICAgIG1lYW5pbmdmdWwgaWYgYGByZWN1cnNlYGAgaXMgYGBUcnVlYGAuXG4gICAgOnBhcmFtIE9wdGlvbmFsW2NhbGxhYmxlXSB2YWx1ZV9zZXJpYWxpemVyOiBBIGhvb2sgdGhhdCBpcyBjYWxsZWQgZm9yIGV2ZXJ5XG4gICAgICAgIGF0dHJpYnV0ZSBvciBkaWN0IGtleS92YWx1ZS4gIEl0IHJlY2VpdmVzIHRoZSBjdXJyZW50IGluc3RhbmNlLCBmaWVsZFxuICAgICAgICBhbmQgdmFsdWUgYW5kIG11c3QgcmV0dXJuIHRoZSAodXBkYXRlZCkgdmFsdWUuICBUaGUgaG9vayBpcyBydW4gKmFmdGVyKlxuICAgICAgICB0aGUgb3B0aW9uYWwgKmZpbHRlciogaGFzIGJlZW4gYXBwbGllZC5cblxuICAgIDpydHlwZTogcmV0dXJuIHR5cGUgb2YgKmRpY3RfZmFjdG9yeSpcblxuICAgIDpyYWlzZSBhdHRyLmV4Y2VwdGlvbnMuTm90QW5BdHRyc0NsYXNzRXJyb3I6IElmICpjbHMqIGlzIG5vdCBhbiBgYGF0dHJzYGBcbiAgICAgICAgY2xhc3MuXG5cbiAgICAuLiAgdmVyc2lvbmFkZGVkOjogMTYuMC4wICpkaWN0X2ZhY3RvcnkqXG4gICAgLi4gIHZlcnNpb25hZGRlZDo6IDE2LjEuMCAqcmV0YWluX2NvbGxlY3Rpb25fdHlwZXMqXG4gICAgLi4gIHZlcnNpb25hZGRlZDo6IDIwLjMuMCAqdmFsdWVfc2VyaWFsaXplcipcbiAgICAuLiAgdmVyc2lvbmFkZGVkOjogMjEuMy4wIElmIGEgZGljdCBoYXMgYSBjb2xsZWN0aW9uIGZvciBhIGtleSwgaXQgaXNcbiAgICAgICAgc2VyaWFsaXplZCBhcyBhIHR1cGxlLlxuICAgICIiIlxuICAgIGF0dHJzID0gZmllbGRzKGluc3QuX19jbGFzc19fKVxuICAgIHJ2ID0gZGljdF9mYWN0b3J5KClcbiAgICBmb3IgYSBpbiBhdHRyczpcbiAgICAgICAgdiA9IGdldGF0dHIoaW5zdCwgYS5uYW1lKVxuICAgICAgICBpZiBmaWx0ZXIgaXMgbm90IE5vbmUgYW5kIG5vdCBmaWx0ZXIoYSwgdik6XG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGlmIHZhbHVlX3NlcmlhbGl6ZXIgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICB2ID0gdmFsdWVfc2VyaWFsaXplcihpbnN0LCBhLCB2KVxuXG4gICAgICAgIGlmIHJlY3Vyc2UgaXMgVHJ1ZTpcbiAgICAgICAgICAgIGlmIGhhcyh2Ll9fY2xhc3NfXyk6XG4gICAgICAgICAgICAgICAgcnZbYS5uYW1lXSA9IGFzZGljdChcbiAgICAgICAgICAgICAgICAgICAgdixcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzZT1UcnVlLFxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXI9ZmlsdGVyLFxuICAgICAgICAgICAgICAgICAgICBkaWN0X2ZhY3Rvcnk9ZGljdF9mYWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICByZXRhaW5fY29sbGVjdGlvbl90eXBlcz1yZXRhaW5fY29sbGVjdGlvbl90eXBlcyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVfc2VyaWFsaXplcj12YWx1ZV9zZXJpYWxpemVyLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIGVsaWYgaXNpbnN0YW5jZSh2LCAodHVwbGUsIGxpc3QsIHNldCwgZnJvemVuc2V0KSk6XG4gICAgICAgICAgICAgICAgY2YgPSB2Ll9fY2xhc3NfXyBpZiByZXRhaW5fY29sbGVjdGlvbl90eXBlcyBpcyBUcnVlIGVsc2UgbGlzdFxuICAgICAgICAgICAgICAgIHJ2W2EubmFtZV0gPSBjZihcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgX2FzZGljdF9hbnl0aGluZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2tleT1GYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI9ZmlsdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfZmFjdG9yeT1kaWN0X2ZhY3RvcnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXM9cmV0YWluX2NvbGxlY3Rpb25fdHlwZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVfc2VyaWFsaXplcj12YWx1ZV9zZXJpYWxpemVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gdlxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgZWxpZiBpc2luc3RhbmNlKHYsIGRpY3QpOlxuICAgICAgICAgICAgICAgIGRmID0gZGljdF9mYWN0b3J5XG4gICAgICAgICAgICAgICAgcnZbYS5uYW1lXSA9IGRmKFxuICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICBfYXNkaWN0X2FueXRoaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2tleT1UcnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcj1maWx0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdF9mYWN0b3J5PWRmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzPXJldGFpbl9jb2xsZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlX3NlcmlhbGl6ZXI9dmFsdWVfc2VyaWFsaXplcixcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBfYXNkaWN0X2FueXRoaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZ2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2tleT1GYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI9ZmlsdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RfZmFjdG9yeT1kZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRhaW5fY29sbGVjdGlvbl90eXBlcz1yZXRhaW5fY29sbGVjdGlvbl90eXBlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZV9zZXJpYWxpemVyPXZhbHVlX3NlcmlhbGl6ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIGZvciBraywgdnYgaW4gaXRlcml0ZW1zKHYpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBydlthLm5hbWVdID0gdlxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgcnZbYS5uYW1lXSA9IHZcbiAgICByZXR1cm4gcnZcblxuXG5kZWYgX2FzZGljdF9hbnl0aGluZyhcbiAgICB2YWwsXG4gICAgaXNfa2V5LFxuICAgIGZpbHRlcixcbiAgICBkaWN0X2ZhY3RvcnksXG4gICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXMsXG4gICAgdmFsdWVfc2VyaWFsaXplcixcbik6XG4gICAgIiIiXG4gICAgYGBhc2RpY3RgYCBvbmx5IHdvcmtzIG9uIGF0dHJzIGluc3RhbmNlcywgdGhpcyB3b3JrcyBvbiBhbnl0aGluZy5cbiAgICAiIiJcbiAgICBpZiBnZXRhdHRyKHZhbC5fX2NsYXNzX18sICJfX2F0dHJzX2F0dHJzX18iLCBOb25lKSBpcyBub3QgTm9uZTpcbiAgICAgICAgIyBBdHRycyBjbGFzcy5cbiAgICAgICAgcnYgPSBhc2RpY3QoXG4gICAgICAgICAgICB2YWwsXG4gICAgICAgICAgICByZWN1cnNlPVRydWUsXG4gICAgICAgICAgICBmaWx0ZXI9ZmlsdGVyLFxuICAgICAgICAgICAgZGljdF9mYWN0b3J5PWRpY3RfZmFjdG9yeSxcbiAgICAgICAgICAgIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzPXJldGFpbl9jb2xsZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgdmFsdWVfc2VyaWFsaXplcj12YWx1ZV9zZXJpYWxpemVyLFxuICAgICAgICApXG4gICAgZWxpZiBpc2luc3RhbmNlKHZhbCwgKHR1cGxlLCBsaXN0LCBzZXQsIGZyb3plbnNldCkpOlxuICAgICAgICBpZiByZXRhaW5fY29sbGVjdGlvbl90eXBlcyBpcyBUcnVlOlxuICAgICAgICAgICAgY2YgPSB2YWwuX19jbGFzc19fXG4gICAgICAgIGVsaWYgaXNfa2V5OlxuICAgICAgICAgICAgY2YgPSB0dXBsZVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgY2YgPSBsaXN0XG5cbiAgICAgICAgcnYgPSBjZihcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBfYXNkaWN0X2FueXRoaW5nKFxuICAgICAgICAgICAgICAgICAgICBpLFxuICAgICAgICAgICAgICAgICAgICBpc19rZXk9RmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcj1maWx0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGRpY3RfZmFjdG9yeT1kaWN0X2ZhY3RvcnksXG4gICAgICAgICAgICAgICAgICAgIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzPXJldGFpbl9jb2xsZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZV9zZXJpYWxpemVyPXZhbHVlX3NlcmlhbGl6ZXIsXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGZvciBpIGluIHZhbFxuICAgICAgICAgICAgXVxuICAgICAgICApXG4gICAgZWxpZiBpc2luc3RhbmNlKHZhbCwgZGljdCk6XG4gICAgICAgIGRmID0gZGljdF9mYWN0b3J5XG4gICAgICAgIHJ2ID0gZGYoXG4gICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgX2FzZGljdF9hbnl0aGluZyhcbiAgICAgICAgICAgICAgICAgICAga2ssXG4gICAgICAgICAgICAgICAgICAgIGlzX2tleT1UcnVlLFxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXI9ZmlsdGVyLFxuICAgICAgICAgICAgICAgICAgICBkaWN0X2ZhY3Rvcnk9ZGYsXG4gICAgICAgICAgICAgICAgICAgIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzPXJldGFpbl9jb2xsZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZV9zZXJpYWxpemVyPXZhbHVlX3NlcmlhbGl6ZXIsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfYXNkaWN0X2FueXRoaW5nKFxuICAgICAgICAgICAgICAgICAgICB2dixcbiAgICAgICAgICAgICAgICAgICAgaXNfa2V5PUZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXI9ZmlsdGVyLFxuICAgICAgICAgICAgICAgICAgICBkaWN0X2ZhY3Rvcnk9ZGYsXG4gICAgICAgICAgICAgICAgICAgIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzPXJldGFpbl9jb2xsZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZV9zZXJpYWxpemVyPXZhbHVlX3NlcmlhbGl6ZXIsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGZvciBraywgdnYgaW4gaXRlcml0ZW1zKHZhbClcbiAgICAgICAgKVxuICAgIGVsc2U6XG4gICAgICAgIHJ2ID0gdmFsXG4gICAgICAgIGlmIHZhbHVlX3NlcmlhbGl6ZXIgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICBydiA9IHZhbHVlX3NlcmlhbGl6ZXIoTm9uZSwgTm9uZSwgcnYpXG5cbiAgICByZXR1cm4gcnZcblxuXG5kZWYgYXN0dXBsZShcbiAgICBpbnN0LFxuICAgIHJlY3Vyc2U9VHJ1ZSxcbiAgICBmaWx0ZXI9Tm9uZSxcbiAgICB0dXBsZV9mYWN0b3J5PXR1cGxlLFxuICAgIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzPUZhbHNlLFxuKTpcbiAgICAiIiJcbiAgICBSZXR1cm4gdGhlIGBgYXR0cnNgYCBhdHRyaWJ1dGUgdmFsdWVzIG9mICppbnN0KiBhcyBhIHR1cGxlLlxuXG4gICAgT3B0aW9uYWxseSByZWN1cnNlIGludG8gb3RoZXIgYGBhdHRyc2BgLWRlY29yYXRlZCBjbGFzc2VzLlxuXG4gICAgOnBhcmFtIGluc3Q6IEluc3RhbmNlIG9mIGFuIGBgYXR0cnNgYC1kZWNvcmF0ZWQgY2xhc3MuXG4gICAgOnBhcmFtIGJvb2wgcmVjdXJzZTogUmVjdXJzZSBpbnRvIGNsYXNzZXMgdGhhdCBhcmUgYWxzb1xuICAgICAgICBgYGF0dHJzYGAtZGVjb3JhdGVkLlxuICAgIDpwYXJhbSBjYWxsYWJsZSBmaWx0ZXI6IEEgY2FsbGFibGUgd2hvc2UgcmV0dXJuIGNvZGUgZGV0ZXJtaW5lcyB3aGV0aGVyIGFuXG4gICAgICAgIGF0dHJpYnV0ZSBvciBlbGVtZW50IGlzIGluY2x1ZGVkIChgYFRydWVgYCkgb3IgZHJvcHBlZCAoYGBGYWxzZWBgKS4gIElzXG4gICAgICAgIGNhbGxlZCB3aXRoIHRoZSBgYXR0cnMuQXR0cmlidXRlYCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgYW5kIHRoZVxuICAgICAgICB2YWx1ZSBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LlxuICAgIDpwYXJhbSBjYWxsYWJsZSB0dXBsZV9mYWN0b3J5OiBBIGNhbGxhYmxlIHRvIHByb2R1Y2UgdHVwbGVzIGZyb20uICBGb3JcbiAgICAgICAgZXhhbXBsZSwgdG8gcHJvZHVjZSBsaXN0cyBpbnN0ZWFkIG9mIHR1cGxlcy5cbiAgICA6cGFyYW0gYm9vbCByZXRhaW5fY29sbGVjdGlvbl90eXBlczogRG8gbm90IGNvbnZlcnQgdG8gYGBsaXN0YGBcbiAgICAgICAgb3IgYGBkaWN0YGAgd2hlbiBlbmNvdW50ZXJpbmcgYW4gYXR0cmlidXRlIHdoaWNoIHR5cGUgaXNcbiAgICAgICAgYGB0dXBsZWBgLCBgYGRpY3RgYCBvciBgYHNldGBgLiAgT25seSBtZWFuaW5nZnVsIGlmIGBgcmVjdXJzZWBgIGlzXG4gICAgICAgIGBgVHJ1ZWBgLlxuXG4gICAgOnJ0eXBlOiByZXR1cm4gdHlwZSBvZiAqdHVwbGVfZmFjdG9yeSpcblxuICAgIDpyYWlzZSBhdHRyLmV4Y2VwdGlvbnMuTm90QW5BdHRyc0NsYXNzRXJyb3I6IElmICpjbHMqIGlzIG5vdCBhbiBgYGF0dHJzYGBcbiAgICAgICAgY2xhc3MuXG5cbiAgICAuLiAgdmVyc2lvbmFkZGVkOjogMTYuMi4wXG4gICAgIiIiXG4gICAgYXR0cnMgPSBmaWVsZHMoaW5zdC5fX2NsYXNzX18pXG4gICAgcnYgPSBbXVxuICAgIHJldGFpbiA9IHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzICAjIFZlcnkgbG9uZy4gOi9cbiAgICBmb3IgYSBpbiBhdHRyczpcbiAgICAgICAgdiA9IGdldGF0dHIoaW5zdCwgYS5uYW1lKVxuICAgICAgICBpZiBmaWx0ZXIgaXMgbm90IE5vbmUgYW5kIG5vdCBmaWx0ZXIoYSwgdik6XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICBpZiByZWN1cnNlIGlzIFRydWU6XG4gICAgICAgICAgICBpZiBoYXModi5fX2NsYXNzX18pOlxuICAgICAgICAgICAgICAgIHJ2LmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgYXN0dXBsZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHYsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNlPVRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI9ZmlsdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGVfZmFjdG9yeT10dXBsZV9mYWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXM9cmV0YWluLFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgZWxpZiBpc2luc3RhbmNlKHYsICh0dXBsZSwgbGlzdCwgc2V0LCBmcm96ZW5zZXQpKTpcbiAgICAgICAgICAgICAgICBjZiA9IHYuX19jbGFzc19fIGlmIHJldGFpbiBpcyBUcnVlIGVsc2UgbGlzdFxuICAgICAgICAgICAgICAgIHJ2LmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgY2YoXG4gICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN0dXBsZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzZT1UcnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI9ZmlsdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dXBsZV9mYWN0b3J5PXR1cGxlX2ZhY3RvcnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldGFpbl9jb2xsZWN0aW9uX3R5cGVzPXJldGFpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaGFzKGouX19jbGFzc19fKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgalxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBqIGluIHZcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIGVsaWYgaXNpbnN0YW5jZSh2LCBkaWN0KTpcbiAgICAgICAgICAgICAgICBkZiA9IHYuX19jbGFzc19fIGlmIHJldGFpbiBpcyBUcnVlIGVsc2UgZGljdFxuICAgICAgICAgICAgICAgIHJ2LmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgZGYoXG4gICAgICAgICAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN0dXBsZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR1cGxlX2ZhY3Rvcnk9dHVwbGVfZmFjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXM9cmV0YWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBoYXMoa2suX19jbGFzc19fKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uga2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN0dXBsZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR1cGxlX2ZhY3Rvcnk9dHVwbGVfZmFjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXM9cmV0YWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBoYXModnYuX19jbGFzc19fKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdnYsXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3Iga2ssIHZ2IGluIGl0ZXJpdGVtcyh2KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBydi5hcHBlbmQodilcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHJ2LmFwcGVuZCh2KVxuXG4gICAgcmV0dXJuIHJ2IGlmIHR1cGxlX2ZhY3RvcnkgaXMgbGlzdCBlbHNlIHR1cGxlX2ZhY3RvcnkocnYpXG5cblxuZGVmIGhhcyhjbHMpOlxuICAgICIiIlxuICAgIENoZWNrIHdoZXRoZXIgKmNscyogaXMgYSBjbGFzcyB3aXRoIGBgYXR0cnNgYCBhdHRyaWJ1dGVzLlxuXG4gICAgOnBhcmFtIHR5cGUgY2xzOiBDbGFzcyB0byBpbnRyb3NwZWN0LlxuICAgIDpyYWlzZSBUeXBlRXJyb3I6IElmICpjbHMqIGlzIG5vdCBhIGNsYXNzLlxuXG4gICAgOnJ0eXBlOiBib29sXG4gICAgIiIiXG4gICAgcmV0dXJuIGdldGF0dHIoY2xzLCAiX19hdHRyc19hdHRyc19fIiwgTm9uZSkgaXMgbm90IE5vbmVcblxuXG5kZWYgYXNzb2MoaW5zdCwgKipjaGFuZ2VzKTpcbiAgICAiIiJcbiAgICBDb3B5ICppbnN0KiBhbmQgYXBwbHkgKmNoYW5nZXMqLlxuXG4gICAgOnBhcmFtIGluc3Q6IEluc3RhbmNlIG9mIGEgY2xhc3Mgd2l0aCBgYGF0dHJzYGAgYXR0cmlidXRlcy5cbiAgICA6cGFyYW0gY2hhbmdlczogS2V5d29yZCBjaGFuZ2VzIGluIHRoZSBuZXcgY29weS5cblxuICAgIDpyZXR1cm46IEEgY29weSBvZiBpbnN0IHdpdGggKmNoYW5nZXMqIGluY29ycG9yYXRlZC5cblxuICAgIDpyYWlzZSBhdHRyLmV4Y2VwdGlvbnMuQXR0cnNBdHRyaWJ1dGVOb3RGb3VuZEVycm9yOiBJZiAqYXR0cl9uYW1lKiBjb3VsZG5cJ3RcbiAgICAgICAgYmUgZm91bmQgb24gKmNscyouXG4gICAgOnJhaXNlIGF0dHIuZXhjZXB0aW9ucy5Ob3RBbkF0dHJzQ2xhc3NFcnJvcjogSWYgKmNscyogaXMgbm90IGFuIGBgYXR0cnNgYFxuICAgICAgICBjbGFzcy5cblxuICAgIC4uICBkZXByZWNhdGVkOjogMTcuMS4wXG4gICAgICAgIFVzZSBgYXR0cnMuZXZvbHZlYCBpbnN0ZWFkIGlmIHlvdSBjYW4uXG4gICAgICAgIFRoaXMgZnVuY3Rpb24gd2lsbCBub3QgYmUgcmVtb3ZlZCBkdSB0byB0aGUgc2xpZ2h0bHkgZGlmZmVyZW50IGFwcHJvYWNoXG4gICAgICAgIGNvbXBhcmVkIHRvIGBhdHRycy5ldm9sdmVgLlxuICAgICIiIlxuICAgIGltcG9ydCB3YXJuaW5nc1xuXG4gICAgd2FybmluZ3Mud2FybihcbiAgICAgICAgImFzc29jIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBhZnRlciAyMDE4LzAxLiIsXG4gICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcbiAgICAgICAgc3RhY2tsZXZlbD0yLFxuICAgIClcbiAgICBuZXcgPSBjb3B5LmNvcHkoaW5zdClcbiAgICBhdHRycyA9IGZpZWxkcyhpbnN0Ll9fY2xhc3NfXylcbiAgICBmb3IgaywgdiBpbiBpdGVyaXRlbXMoY2hhbmdlcyk6XG4gICAgICAgIGEgPSBnZXRhdHRyKGF0dHJzLCBrLCBOT1RISU5HKVxuICAgICAgICBpZiBhIGlzIE5PVEhJTkc6XG4gICAgICAgICAgICByYWlzZSBBdHRyc0F0dHJpYnV0ZU5vdEZvdW5kRXJyb3IoXG4gICAgICAgICAgICAgICAgIntrfSBpcyBub3QgYW4gYXR0cnMgYXR0cmlidXRlIG9uIHtjbH0uIi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgIGs9aywgY2w9bmV3Ll9fY2xhc3NfX1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgX29ial9zZXRhdHRyKG5ldywgaywgdilcbiAgICByZXR1cm4gbmV3XG5cblxuZGVmIGV2b2x2ZShpbnN0LCAqKmNoYW5nZXMpOlxuICAgICIiIlxuICAgIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSwgYmFzZWQgb24gKmluc3QqIHdpdGggKmNoYW5nZXMqIGFwcGxpZWQuXG5cbiAgICA6cGFyYW0gaW5zdDogSW5zdGFuY2Ugb2YgYSBjbGFzcyB3aXRoIGBgYXR0cnNgYCBhdHRyaWJ1dGVzLlxuICAgIDpwYXJhbSBjaGFuZ2VzOiBLZXl3b3JkIGNoYW5nZXMgaW4gdGhlIG5ldyBjb3B5LlxuXG4gICAgOnJldHVybjogQSBjb3B5IG9mIGluc3Qgd2l0aCAqY2hhbmdlcyogaW5jb3Jwb3JhdGVkLlxuXG4gICAgOnJhaXNlIFR5cGVFcnJvcjogSWYgKmF0dHJfbmFtZSogY291bGRuXCd0IGJlIGZvdW5kIGluIHRoZSBjbGFzc1xuICAgICAgICBgYF9faW5pdF9fYGAuXG4gICAgOnJhaXNlIGF0dHIuZXhjZXB0aW9ucy5Ob3RBbkF0dHJzQ2xhc3NFcnJvcjogSWYgKmNscyogaXMgbm90IGFuIGBgYXR0cnNgYFxuICAgICAgICBjbGFzcy5cblxuICAgIC4uICB2ZXJzaW9uYWRkZWQ6OiAxNy4xLjBcbiAgICAiIiJcbiAgICBjbHMgPSBpbnN0Ll9fY2xhc3NfX1xuICAgIGF0dHJzID0gZmllbGRzKGNscylcbiAgICBmb3IgYSBpbiBhdHRyczpcbiAgICAgICAgaWYgbm90IGEuaW5pdDpcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIGF0dHJfbmFtZSA9IGEubmFtZSAgIyBUbyBkZWFsIHdpdGggcHJpdmF0ZSBhdHRyaWJ1dGVzLlxuICAgICAgICBpbml0X25hbWUgPSBhdHRyX25hbWUgaWYgYXR0cl9uYW1lWzBdICE9ICJfIiBlbHNlIGF0dHJfbmFtZVsxOl1cbiAgICAgICAgaWYgaW5pdF9uYW1lIG5vdCBpbiBjaGFuZ2VzOlxuICAgICAgICAgICAgY2hhbmdlc1tpbml0X25hbWVdID0gZ2V0YXR0cihpbnN0LCBhdHRyX25hbWUpXG5cbiAgICByZXR1cm4gY2xzKCoqY2hhbmdlcylcblxuXG5kZWYgcmVzb2x2ZV90eXBlcyhjbHMsIGdsb2JhbG5zPU5vbmUsIGxvY2FsbnM9Tm9uZSwgYXR0cmlicz1Ob25lKTpcbiAgICAiIiJcbiAgICBSZXNvbHZlIGFueSBzdHJpbmdzIGFuZCBmb3J3YXJkIGFubm90YXRpb25zIGluIHR5cGUgYW5ub3RhdGlvbnMuXG5cbiAgICBUaGlzIGlzIG9ubHkgcmVxdWlyZWQgaWYgeW91IG5lZWQgY29uY3JldGUgdHlwZXMgaW4gYEF0dHJpYnV0ZWBcJ3MgKnR5cGUqXG4gICAgZmllbGQuIEluIG90aGVyIHdvcmRzLCB5b3UgZG9uXCd0IG5lZWQgdG8gcmVzb2x2ZSB5b3VyIHR5cGVzIGlmIHlvdSBvbmx5XG4gICAgdXNlIHRoZW0gZm9yIHN0YXRpYyB0eXBlIGNoZWNraW5nLlxuXG4gICAgV2l0aCBubyBhcmd1bWVudHMsIG5hbWVzIHdpbGwgYmUgbG9va2VkIHVwIGluIHRoZSBtb2R1bGUgaW4gd2hpY2ggdGhlIGNsYXNzXG4gICAgd2FzIGNyZWF0ZWQuIElmIHRoaXMgaXMgbm90IHdoYXQgeW91IHdhbnQsIGUuZy4gaWYgdGhlIG5hbWUgb25seSBleGlzdHNcbiAgICBpbnNpZGUgYSBtZXRob2QsIHlvdSBtYXkgcGFzcyAqZ2xvYmFsbnMqIG9yICpsb2NhbG5zKiB0byBzcGVjaWZ5IG90aGVyXG4gICAgZGljdGlvbmFyaWVzIGluIHdoaWNoIHRvIGxvb2sgdXAgdGhlc2UgbmFtZXMuIFNlZSB0aGUgZG9jcyBvZlxuICAgIGB0eXBpbmcuZ2V0X3R5cGVfaGludHNgIGZvciBtb3JlIGRldGFpbHMuXG5cbiAgICA6cGFyYW0gdHlwZSBjbHM6IENsYXNzIHRvIHJlc29sdmUuXG4gICAgOnBhcmFtIE9wdGlvbmFsW2RpY3RdIGdsb2JhbG5zOiBEaWN0aW9uYXJ5IGNvbnRhaW5pbmcgZ2xvYmFsIHZhcmlhYmxlcy5cbiAgICA6cGFyYW0gT3B0aW9uYWxbZGljdF0gbG9jYWxuczogRGljdGlvbmFyeSBjb250YWluaW5nIGxvY2FsIHZhcmlhYmxlcy5cbiAgICA6cGFyYW0gT3B0aW9uYWxbbGlzdF0gYXR0cmliczogTGlzdCBvZiBhdHRyaWJzIGZvciB0aGUgZ2l2ZW4gY2xhc3MuXG4gICAgICAgIFRoaXMgaXMgbmVjZXNzYXJ5IHdoZW4gY2FsbGluZyBmcm9tIGluc2lkZSBhIGBgZmllbGRfdHJhbnNmb3JtZXJgYFxuICAgICAgICBzaW5jZSAqY2xzKiBpcyBub3QgYW4gYGBhdHRyc2BgIGNsYXNzIHlldC5cblxuICAgIDpyYWlzZSBUeXBlRXJyb3I6IElmICpjbHMqIGlzIG5vdCBhIGNsYXNzLlxuICAgIDpyYWlzZSBhdHRyLmV4Y2VwdGlvbnMuTm90QW5BdHRyc0NsYXNzRXJyb3I6IElmICpjbHMqIGlzIG5vdCBhbiBgYGF0dHJzYGBcbiAgICAgICAgY2xhc3MgYW5kIHlvdSBkaWRuXCd0IHBhc3MgYW55IGF0dHJpYnMuXG4gICAgOnJhaXNlIE5hbWVFcnJvcjogSWYgdHlwZXMgY2Fubm90IGJlIHJlc29sdmVkIGJlY2F1c2Ugb2YgbWlzc2luZyB2YXJpYWJsZXMuXG5cbiAgICA6cmV0dXJuczogKmNscyogc28geW91IGNhbiB1c2UgdGhpcyBmdW5jdGlvbiBhbHNvIGFzIGEgY2xhc3MgZGVjb3JhdG9yLlxuICAgICAgICBQbGVhc2Ugbm90ZSB0aGF0IHlvdSBoYXZlIHRvIGFwcGx5IGl0ICoqYWZ0ZXIqKiBgYXR0cnMuZGVmaW5lYC4gVGhhdFxuICAgICAgICBtZWFucyB0aGUgZGVjb3JhdG9yIGhhcyB0byBjb21lIGluIHRoZSBsaW5lICoqYmVmb3JlKiogYGF0dHJzLmRlZmluZWAuXG5cbiAgICAuLiAgdmVyc2lvbmFkZGVkOjogMjAuMS4wXG4gICAgLi4gIHZlcnNpb25hZGRlZDo6IDIxLjEuMCAqYXR0cmlicypcblxuICAgICIiIlxuICAgICMgU2luY2UgY2FsbGluZyBnZXRfdHlwZV9oaW50cyBpcyBleHBlbnNpdmUgd2UgY2FjaGUgd2hldGhlciB3ZVwndmVcbiAgICAjIGRvbmUgaXQgYWxyZWFkeS5cbiAgICBpZiBnZXRhdHRyKGNscywgIl9fYXR0cnNfdHlwZXNfcmVzb2x2ZWRfXyIsIE5vbmUpICE9IGNsczpcbiAgICAgICAgaW1wb3J0IHR5cGluZ1xuXG4gICAgICAgIGhpbnRzID0gdHlwaW5nLmdldF90eXBlX2hpbnRzKGNscywgZ2xvYmFsbnM9Z2xvYmFsbnMsIGxvY2FsbnM9bG9jYWxucylcbiAgICAgICAgZm9yIGZpZWxkIGluIGZpZWxkcyhjbHMpIGlmIGF0dHJpYnMgaXMgTm9uZSBlbHNlIGF0dHJpYnM6XG4gICAgICAgICAgICBpZiBmaWVsZC5uYW1lIGluIGhpbnRzOlxuICAgICAgICAgICAgICAgICMgU2luY2UgZmllbGRzIGhhdmUgYmVlbiBmcm96ZW4gd2UgbXVzdCB3b3JrIGFyb3VuZCBpdC5cbiAgICAgICAgICAgICAgICBfb2JqX3NldGF0dHIoZmllbGQsICJ0eXBlIiwgaGludHNbZmllbGQubmFtZV0pXG4gICAgICAgICMgV2Ugc3RvcmUgdGhlIGNsYXNzIHdlIHJlc29sdmVkIHNvIHRoYXQgc3ViY2xhc3NlcyBrbm93IHRoZXkgaGF2ZW5cJ3RcbiAgICAgICAgIyBiZWVuIHJlc29sdmVkLlxuICAgICAgICBjbHMuX19hdHRyc190eXBlc19yZXNvbHZlZF9fID0gY2xzXG5cbiAgICAjIFJldHVybiB0aGUgY2xhc3Mgc28geW91IGNhbiB1c2UgaXQgYXMgYSBkZWNvcmF0b3IgdG9vLlxuICAgIHJldHVybiBjbHNcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhdHRyL192ZXJzaW9uX2luZm8ucHknLCBiJyMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuXG5mcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFic29sdXRlX2ltcG9ydCwgZGl2aXNpb24sIHByaW50X2Z1bmN0aW9uXG5cbmZyb20gZnVuY3Rvb2xzIGltcG9ydCB0b3RhbF9vcmRlcmluZ1xuXG5mcm9tIC5fZnVuY3MgaW1wb3J0IGFzdHVwbGVcbmZyb20gLl9tYWtlIGltcG9ydCBhdHRyaWIsIGF0dHJzXG5cblxuQHRvdGFsX29yZGVyaW5nXG5AYXR0cnMoZXE9RmFsc2UsIG9yZGVyPUZhbHNlLCBzbG90cz1UcnVlLCBmcm96ZW49VHJ1ZSlcbmNsYXNzIFZlcnNpb25JbmZvKG9iamVjdCk6XG4gICAgIiIiXG4gICAgQSB2ZXJzaW9uIG9iamVjdCB0aGF0IGNhbiBiZSBjb21wYXJlZCB0byB0dXBsZSBvZiBsZW5ndGggMS0tNDpcblxuICAgID4+PiBhdHRyLlZlcnNpb25JbmZvKDE5LCAxLCAwLCAiZmluYWwiKSAgPD0gKDE5LCAyKVxuICAgIFRydWVcbiAgICA+Pj4gYXR0ci5WZXJzaW9uSW5mbygxOSwgMSwgMCwgImZpbmFsIikgPCAoMTksIDEsIDEpXG4gICAgVHJ1ZVxuICAgID4+PiB2aSA9IGF0dHIuVmVyc2lvbkluZm8oMTksIDIsIDAsICJmaW5hbCIpXG4gICAgPj4+IHZpIDwgKDE5LCAxLCAxKVxuICAgIEZhbHNlXG4gICAgPj4+IHZpIDwgKDE5LClcbiAgICBGYWxzZVxuICAgID4+PiB2aSA9PSAoMTksIDIsKVxuICAgIFRydWVcbiAgICA+Pj4gdmkgPT0gKDE5LCAyLCAxKVxuICAgIEZhbHNlXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAxOS4yXG4gICAgIiIiXG5cbiAgICB5ZWFyID0gYXR0cmliKHR5cGU9aW50KVxuICAgIG1pbm9yID0gYXR0cmliKHR5cGU9aW50KVxuICAgIG1pY3JvID0gYXR0cmliKHR5cGU9aW50KVxuICAgIHJlbGVhc2VsZXZlbCA9IGF0dHJpYih0eXBlPXN0cilcblxuICAgIEBjbGFzc21ldGhvZFxuICAgIGRlZiBfZnJvbV92ZXJzaW9uX3N0cmluZyhjbHMsIHMpOlxuICAgICAgICAiIiJcbiAgICAgICAgUGFyc2UgKnMqIGFuZCByZXR1cm4gYSBfVmVyc2lvbkluZm8uXG4gICAgICAgICIiIlxuICAgICAgICB2ID0gcy5zcGxpdCgiLiIpXG4gICAgICAgIGlmIGxlbih2KSA9PSAzOlxuICAgICAgICAgICAgdi5hcHBlbmQoImZpbmFsIilcblxuICAgICAgICByZXR1cm4gY2xzKFxuICAgICAgICAgICAgeWVhcj1pbnQodlswXSksIG1pbm9yPWludCh2WzFdKSwgbWljcm89aW50KHZbMl0pLCByZWxlYXNlbGV2ZWw9dlszXVxuICAgICAgICApXG5cbiAgICBkZWYgX2Vuc3VyZV90dXBsZShzZWxmLCBvdGhlcik6XG4gICAgICAgICIiIlxuICAgICAgICBFbnN1cmUgKm90aGVyKiBpcyBhIHR1cGxlIG9mIGEgdmFsaWQgbGVuZ3RoLlxuXG4gICAgICAgIFJldHVybnMgYSBwb3NzaWJseSB0cmFuc2Zvcm1lZCAqb3RoZXIqIGFuZCBvdXJzZWx2ZXMgYXMgYSB0dXBsZSBvZlxuICAgICAgICB0aGUgc2FtZSBsZW5ndGggYXMgKm90aGVyKi5cbiAgICAgICAgIiIiXG5cbiAgICAgICAgaWYgc2VsZi5fX2NsYXNzX18gaXMgb3RoZXIuX19jbGFzc19fOlxuICAgICAgICAgICAgb3RoZXIgPSBhc3R1cGxlKG90aGVyKVxuXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCB0dXBsZSk6XG4gICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yXG5cbiAgICAgICAgaWYgbm90ICgxIDw9IGxlbihvdGhlcikgPD0gNCk6XG4gICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yXG5cbiAgICAgICAgcmV0dXJuIGFzdHVwbGUoc2VsZilbOiBsZW4ob3RoZXIpXSwgb3RoZXJcblxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICB1cywgdGhlbSA9IHNlbGYuX2Vuc3VyZV90dXBsZShvdGhlcilcbiAgICAgICAgZXhjZXB0IE5vdEltcGxlbWVudGVkRXJyb3I6XG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcblxuICAgICAgICByZXR1cm4gdXMgPT0gdGhlbVxuXG4gICAgZGVmIF9fbHRfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHVzLCB0aGVtID0gc2VsZi5fZW5zdXJlX3R1cGxlKG90aGVyKVxuICAgICAgICBleGNlcHQgTm90SW1wbGVtZW50ZWRFcnJvcjpcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxuXG4gICAgICAgICMgU2luY2UgYWxwaGFiZXRpY2FsbHkgImRldjAiIDwgImZpbmFsIiA8ICJwb3N0MSIgPCAicG9zdDIiLCB3ZSBkb25cJ3RcbiAgICAgICAgIyBoYXZlIHRvIGRvIGFueXRoaW5nIHNwZWNpYWwgd2l0aCByZWxlYXNlbGV2ZWwgZm9yIG5vdy5cbiAgICAgICAgcmV0dXJuIHVzIDwgdGhlbVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2F0dHIvX25leHRfZ2VuLnB5JywgYicjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcblxuIiIiXG5UaGVzZSBhcmUgUHl0aG9uIDMuNistb25seSBhbmQga2V5d29yZC1vbmx5IEFQSXMgdGhhdCBjYWxsIGBhdHRyLnNgIGFuZFxuYGF0dHIuaWJgIHdpdGggZGlmZmVyZW50IGRlZmF1bHQgdmFsdWVzLlxuIiIiXG5cblxuZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHBhcnRpYWxcblxuZnJvbSAuIGltcG9ydCBzZXR0ZXJzXG5mcm9tIC5fZnVuY3MgaW1wb3J0IGFzZGljdCBhcyBfYXNkaWN0XG5mcm9tIC5fZnVuY3MgaW1wb3J0IGFzdHVwbGUgYXMgX2FzdHVwbGVcbmZyb20gLl9tYWtlIGltcG9ydCAoXG4gICAgTk9USElORyxcbiAgICBfZnJvemVuX3NldGF0dHJzLFxuICAgIF9uZ19kZWZhdWx0X29uX3NldGF0dHIsXG4gICAgYXR0cmliLFxuICAgIGF0dHJzLFxuKVxuZnJvbSAuZXhjZXB0aW9ucyBpbXBvcnQgVW5hbm5vdGF0ZWRBdHRyaWJ1dGVFcnJvclxuXG5cbmRlZiBkZWZpbmUoXG4gICAgbWF5YmVfY2xzPU5vbmUsXG4gICAgKixcbiAgICB0aGVzZT1Ob25lLFxuICAgIHJlcHI9Tm9uZSxcbiAgICBoYXNoPU5vbmUsXG4gICAgaW5pdD1Ob25lLFxuICAgIHNsb3RzPVRydWUsXG4gICAgZnJvemVuPUZhbHNlLFxuICAgIHdlYWtyZWZfc2xvdD1UcnVlLFxuICAgIHN0cj1GYWxzZSxcbiAgICBhdXRvX2F0dHJpYnM9Tm9uZSxcbiAgICBrd19vbmx5PUZhbHNlLFxuICAgIGNhY2hlX2hhc2g9RmFsc2UsXG4gICAgYXV0b19leGM9VHJ1ZSxcbiAgICBlcT1Ob25lLFxuICAgIG9yZGVyPUZhbHNlLFxuICAgIGF1dG9fZGV0ZWN0PVRydWUsXG4gICAgZ2V0c3RhdGVfc2V0c3RhdGU9Tm9uZSxcbiAgICBvbl9zZXRhdHRyPU5vbmUsXG4gICAgZmllbGRfdHJhbnNmb3JtZXI9Tm9uZSxcbiAgICBtYXRjaF9hcmdzPVRydWUsXG4pOlxuICAgIHIiIiJcbiAgICBEZWZpbmUgYW4gYGBhdHRyc2BgIGNsYXNzLlxuXG4gICAgRGlmZmVyZW5jZXMgdG8gdGhlIGNsYXNzaWMgYGF0dHIuc2AgdGhhdCBpdCB1c2VzIHVuZGVybmVhdGg6XG5cbiAgICAtIEF1dG9tYXRpY2FsbHkgZGV0ZWN0IHdoZXRoZXIgb3Igbm90ICphdXRvX2F0dHJpYnMqIHNob3VsZCBiZSBgVHJ1ZWBcbiAgICAgIChjLmYuICphdXRvX2F0dHJpYnMqIHBhcmFtZXRlcikuXG4gICAgLSBJZiAqZnJvemVuKiBpcyBgRmFsc2VgLCBydW4gY29udmVydGVycyBhbmQgdmFsaWRhdG9ycyB3aGVuIHNldHRpbmcgYW5cbiAgICAgIGF0dHJpYnV0ZSBieSBkZWZhdWx0LlxuICAgIC0gKnNsb3RzPVRydWUqIChzZWUgOnRlcm06YHNsb3R0ZWQgY2xhc3Nlc2AgZm9yIHBvdGVudGlhbGx5IHN1cnByaXNpbmdcbiAgICAgIGJlaGF2aW9ycylcbiAgICAtICphdXRvX2V4Yz1UcnVlKlxuICAgIC0gKmF1dG9fZGV0ZWN0PVRydWUqXG4gICAgLSAqb3JkZXI9RmFsc2UqXG4gICAgLSAqbWF0Y2hfYXJncz1UcnVlKlxuICAgIC0gU29tZSBvcHRpb25zIHRoYXQgd2VyZSBvbmx5IHJlbGV2YW50IG9uIFB5dGhvbiAyIG9yIHdlcmUga2VwdCBhcm91bmQgZm9yXG4gICAgICBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBoYXZlIGJlZW4gcmVtb3ZlZC5cblxuICAgIFBsZWFzZSBub3RlIHRoYXQgdGhlc2UgYXJlIGFsbCBkZWZhdWx0cyBhbmQgeW91IGNhbiBjaGFuZ2UgdGhlbSBhcyB5b3VcbiAgICB3aXNoLlxuXG4gICAgOnBhcmFtIE9wdGlvbmFsW2Jvb2xdIGF1dG9fYXR0cmliczogSWYgc2V0IHRvIGBUcnVlYCBvciBgRmFsc2VgLCBpdCBiZWhhdmVzXG4gICAgICAgZXhhY3RseSBsaWtlIGBhdHRyLnNgLiBJZiBsZWZ0IGBOb25lYCwgYGF0dHIuc2Agd2lsbCB0cnkgdG8gZ3Vlc3M6XG5cbiAgICAgICAxLiBJZiBhbnkgYXR0cmlidXRlcyBhcmUgYW5ub3RhdGVkIGFuZCBubyB1bmFubm90YXRlZCBgYXR0cnMuZmllbGRzYFxcIHNcbiAgICAgICAgICBhcmUgZm91bmQsIGl0IGFzc3VtZXMgKmF1dG9fYXR0cmlicz1UcnVlKi5cbiAgICAgICAyLiBPdGhlcndpc2UgaXQgYXNzdW1lcyAqYXV0b19hdHRyaWJzPUZhbHNlKiBhbmQgdHJpZXMgdG8gY29sbGVjdFxuICAgICAgICAgIGBhdHRycy5maWVsZHNgXFwgcy5cblxuICAgIEZvciBub3csIHBsZWFzZSByZWZlciB0byBgYXR0ci5zYCBmb3IgdGhlIHJlc3Qgb2YgdGhlIHBhcmFtZXRlcnMuXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMC4xLjBcbiAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDIxLjMuMCBDb252ZXJ0ZXJzIGFyZSBhbHNvIHJ1biBgYG9uX3NldGF0dHJgYC5cbiAgICAiIiJcblxuICAgIGRlZiBkb19pdChjbHMsIGF1dG9fYXR0cmlicyk6XG4gICAgICAgIHJldHVybiBhdHRycyhcbiAgICAgICAgICAgIG1heWJlX2Nscz1jbHMsXG4gICAgICAgICAgICB0aGVzZT10aGVzZSxcbiAgICAgICAgICAgIHJlcHI9cmVwcixcbiAgICAgICAgICAgIGhhc2g9aGFzaCxcbiAgICAgICAgICAgIGluaXQ9aW5pdCxcbiAgICAgICAgICAgIHNsb3RzPXNsb3RzLFxuICAgICAgICAgICAgZnJvemVuPWZyb3plbixcbiAgICAgICAgICAgIHdlYWtyZWZfc2xvdD13ZWFrcmVmX3Nsb3QsXG4gICAgICAgICAgICBzdHI9c3RyLFxuICAgICAgICAgICAgYXV0b19hdHRyaWJzPWF1dG9fYXR0cmlicyxcbiAgICAgICAgICAgIGt3X29ubHk9a3dfb25seSxcbiAgICAgICAgICAgIGNhY2hlX2hhc2g9Y2FjaGVfaGFzaCxcbiAgICAgICAgICAgIGF1dG9fZXhjPWF1dG9fZXhjLFxuICAgICAgICAgICAgZXE9ZXEsXG4gICAgICAgICAgICBvcmRlcj1vcmRlcixcbiAgICAgICAgICAgIGF1dG9fZGV0ZWN0PWF1dG9fZGV0ZWN0LFxuICAgICAgICAgICAgY29sbGVjdF9ieV9tcm89VHJ1ZSxcbiAgICAgICAgICAgIGdldHN0YXRlX3NldHN0YXRlPWdldHN0YXRlX3NldHN0YXRlLFxuICAgICAgICAgICAgb25fc2V0YXR0cj1vbl9zZXRhdHRyLFxuICAgICAgICAgICAgZmllbGRfdHJhbnNmb3JtZXI9ZmllbGRfdHJhbnNmb3JtZXIsXG4gICAgICAgICAgICBtYXRjaF9hcmdzPW1hdGNoX2FyZ3MsXG4gICAgICAgIClcblxuICAgIGRlZiB3cmFwKGNscyk6XG4gICAgICAgICIiIlxuICAgICAgICBNYWtpbmcgdGhpcyBhIHdyYXBwZXIgZW5zdXJlcyB0aGlzIGNvZGUgcnVucyBkdXJpbmcgY2xhc3MgY3JlYXRpb24uXG5cbiAgICAgICAgV2UgYWxzbyBlbnN1cmUgdGhhdCBmcm96ZW4tbmVzcyBvZiBjbGFzc2VzIGlzIGluaGVyaXRlZC5cbiAgICAgICAgIiIiXG4gICAgICAgIG5vbmxvY2FsIGZyb3plbiwgb25fc2V0YXR0clxuXG4gICAgICAgIGhhZF9vbl9zZXRhdHRyID0gb25fc2V0YXR0ciBub3QgaW4gKE5vbmUsIHNldHRlcnMuTk9fT1ApXG5cbiAgICAgICAgIyBCeSBkZWZhdWx0LCBtdXRhYmxlIGNsYXNzZXMgY29udmVydCAmIHZhbGlkYXRlIG9uIHNldGF0dHIuXG4gICAgICAgIGlmIGZyb3plbiBpcyBGYWxzZSBhbmQgb25fc2V0YXR0ciBpcyBOb25lOlxuICAgICAgICAgICAgb25fc2V0YXR0ciA9IF9uZ19kZWZhdWx0X29uX3NldGF0dHJcblxuICAgICAgICAjIEhvd2V2ZXIsIGlmIHdlIHN1YmNsYXNzIGEgZnJvemVuIGNsYXNzLCB3ZSBpbmhlcml0IHRoZSBpbW11dGFiaWxpdHlcbiAgICAgICAgIyBhbmQgZGlzYWJsZSBvbl9zZXRhdHRyLlxuICAgICAgICBmb3IgYmFzZV9jbHMgaW4gY2xzLl9fYmFzZXNfXzpcbiAgICAgICAgICAgIGlmIGJhc2VfY2xzLl9fc2V0YXR0cl9fIGlzIF9mcm96ZW5fc2V0YXR0cnM6XG4gICAgICAgICAgICAgICAgaWYgaGFkX29uX3NldGF0dHI6XG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAiRnJvemVuIGNsYXNzZXMgY2FuXCd0IHVzZSBvbl9zZXRhdHRyICJcbiAgICAgICAgICAgICAgICAgICAgICAgICIoZnJvemVuLW5lc3Mgd2FzIGluaGVyaXRlZCkuIlxuICAgICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICBvbl9zZXRhdHRyID0gc2V0dGVycy5OT19PUFxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgaWYgYXV0b19hdHRyaWJzIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgcmV0dXJuIGRvX2l0KGNscywgYXV0b19hdHRyaWJzKVxuXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHJldHVybiBkb19pdChjbHMsIFRydWUpXG4gICAgICAgIGV4Y2VwdCBVbmFubm90YXRlZEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgcmV0dXJuIGRvX2l0KGNscywgRmFsc2UpXG5cbiAgICAjIG1heWJlX2Nsc1wncyB0eXBlIGRlcGVuZHMgb24gdGhlIHVzYWdlIG9mIHRoZSBkZWNvcmF0b3IuICBJdFwncyBhIGNsYXNzXG4gICAgIyBpZiBpdFwncyB1c2VkIGFzIGBAYXR0cnNgIGJ1dCBgYE5vbmVgYCBpZiB1c2VkIGFzIGBAYXR0cnMoKWAuXG4gICAgaWYgbWF5YmVfY2xzIGlzIE5vbmU6XG4gICAgICAgIHJldHVybiB3cmFwXG4gICAgZWxzZTpcbiAgICAgICAgcmV0dXJuIHdyYXAobWF5YmVfY2xzKVxuXG5cbm11dGFibGUgPSBkZWZpbmVcbmZyb3plbiA9IHBhcnRpYWwoZGVmaW5lLCBmcm96ZW49VHJ1ZSwgb25fc2V0YXR0cj1Ob25lKVxuXG5cbmRlZiBmaWVsZChcbiAgICAqLFxuICAgIGRlZmF1bHQ9Tk9USElORyxcbiAgICB2YWxpZGF0b3I9Tm9uZSxcbiAgICByZXByPVRydWUsXG4gICAgaGFzaD1Ob25lLFxuICAgIGluaXQ9VHJ1ZSxcbiAgICBtZXRhZGF0YT1Ob25lLFxuICAgIGNvbnZlcnRlcj1Ob25lLFxuICAgIGZhY3Rvcnk9Tm9uZSxcbiAgICBrd19vbmx5PUZhbHNlLFxuICAgIGVxPU5vbmUsXG4gICAgb3JkZXI9Tm9uZSxcbiAgICBvbl9zZXRhdHRyPU5vbmUsXG4pOlxuICAgICIiIlxuICAgIElkZW50aWNhbCB0byBgYXR0ci5pYmAsIGV4Y2VwdCBrZXl3b3JkLW9ubHkgYW5kIHdpdGggc29tZSBhcmd1bWVudHNcbiAgICByZW1vdmVkLlxuXG4gICAgLi4gdmVyc2lvbmFkZGVkOjogMjAuMS4wXG4gICAgIiIiXG4gICAgcmV0dXJuIGF0dHJpYihcbiAgICAgICAgZGVmYXVsdD1kZWZhdWx0LFxuICAgICAgICB2YWxpZGF0b3I9dmFsaWRhdG9yLFxuICAgICAgICByZXByPXJlcHIsXG4gICAgICAgIGhhc2g9aGFzaCxcbiAgICAgICAgaW5pdD1pbml0LFxuICAgICAgICBtZXRhZGF0YT1tZXRhZGF0YSxcbiAgICAgICAgY29udmVydGVyPWNvbnZlcnRlcixcbiAgICAgICAgZmFjdG9yeT1mYWN0b3J5LFxuICAgICAgICBrd19vbmx5PWt3X29ubHksXG4gICAgICAgIGVxPWVxLFxuICAgICAgICBvcmRlcj1vcmRlcixcbiAgICAgICAgb25fc2V0YXR0cj1vbl9zZXRhdHRyLFxuICAgIClcblxuXG5kZWYgYXNkaWN0KGluc3QsICosIHJlY3Vyc2U9VHJ1ZSwgZmlsdGVyPU5vbmUsIHZhbHVlX3NlcmlhbGl6ZXI9Tm9uZSk6XG4gICAgIiIiXG4gICAgU2FtZSBhcyBgYXR0ci5hc2RpY3RgLCBleGNlcHQgdGhhdCBjb2xsZWN0aW9ucyB0eXBlcyBhcmUgYWx3YXlzIHJldGFpbmVkXG4gICAgYW5kIGRpY3QgaXMgYWx3YXlzIHVzZWQgYXMgKmRpY3RfZmFjdG9yeSouXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMS4zLjBcbiAgICAiIiJcbiAgICByZXR1cm4gX2FzZGljdChcbiAgICAgICAgaW5zdD1pbnN0LFxuICAgICAgICByZWN1cnNlPXJlY3Vyc2UsXG4gICAgICAgIGZpbHRlcj1maWx0ZXIsXG4gICAgICAgIHZhbHVlX3NlcmlhbGl6ZXI9dmFsdWVfc2VyaWFsaXplcixcbiAgICAgICAgcmV0YWluX2NvbGxlY3Rpb25fdHlwZXM9VHJ1ZSxcbiAgICApXG5cblxuZGVmIGFzdHVwbGUoaW5zdCwgKiwgcmVjdXJzZT1UcnVlLCBmaWx0ZXI9Tm9uZSk6XG4gICAgIiIiXG4gICAgU2FtZSBhcyBgYXR0ci5hc3R1cGxlYCwgZXhjZXB0IHRoYXQgY29sbGVjdGlvbnMgdHlwZXMgYXJlIGFsd2F5cyByZXRhaW5lZFxuICAgIGFuZCBgdHVwbGVgIGlzIGFsd2F5cyB1c2VkIGFzIHRoZSAqdHVwbGVfZmFjdG9yeSouXG5cbiAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAyMS4zLjBcbiAgICAiIiJcbiAgICByZXR1cm4gX2FzdHVwbGUoXG4gICAgICAgIGluc3Q9aW5zdCwgcmVjdXJzZT1yZWN1cnNlLCBmaWx0ZXI9ZmlsdGVyLCByZXRhaW5fY29sbGVjdGlvbl90eXBlcz1UcnVlXG4gICAgKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3lhcmwvX19pbml0X18ucHknLCBiJ2Zyb20gLl91cmwgaW1wb3J0IFVSTCwgY2FjaGVfY2xlYXIsIGNhY2hlX2NvbmZpZ3VyZSwgY2FjaGVfaW5mb1xyXG5cclxuX192ZXJzaW9uX18gPSAiMS43LjIiXHJcblxyXG5fX2FsbF9fID0gKCJVUkwiLCAiY2FjaGVfY2xlYXIiLCAiY2FjaGVfY29uZmlndXJlIiwgImNhY2hlX2luZm8iKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgneWFybC9fdXJsLnB5JywgYidpbXBvcnQgZnVuY3Rvb2xzXHJcbmltcG9ydCBzeXNcclxuaW1wb3J0IHdhcm5pbmdzXHJcbmZyb20gY29sbGVjdGlvbnMuYWJjIGltcG9ydCBNYXBwaW5nLCBTZXF1ZW5jZVxyXG5mcm9tIGlwYWRkcmVzcyBpbXBvcnQgaXBfYWRkcmVzc1xyXG5mcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgU3BsaXRSZXN1bHQsIHBhcnNlX3FzbCwgdXJsam9pbiwgdXJsc3BsaXQsIHVybHVuc3BsaXQsIHF1b3RlXHJcblxyXG5mcm9tIG11bHRpZGljdCBpbXBvcnQgTXVsdGlEaWN0LCBNdWx0aURpY3RQcm94eVxyXG5pbXBvcnQgaWRuYVxyXG5cclxuaW1wb3J0IG1hdGhcclxuXHJcblxyXG5mcm9tIC5fcXVvdGluZyBpbXBvcnQgX1F1b3RlciwgX1VucXVvdGVyXHJcblxyXG5cclxuREVGQVVMVF9QT1JUUyA9IHsiaHR0cCI6IDgwLCAiaHR0cHMiOiA0NDMsICJ3cyI6IDgwLCAid3NzIjogNDQzfVxyXG5cclxuc2VudGluZWwgPSBvYmplY3QoKVxyXG5cclxuXHJcbmRlZiByZXdyaXRlX21vZHVsZShvYmo6IG9iamVjdCkgLT4gb2JqZWN0OlxyXG4gICAgb2JqLl9fbW9kdWxlX18gPSAieWFybCJcclxuICAgIHJldHVybiBvYmpcclxuXHJcblxyXG5jbGFzcyBjYWNoZWRfcHJvcGVydHk6XHJcbiAgICAiIiJVc2UgYXMgYSBjbGFzcyBtZXRob2QgZGVjb3JhdG9yLiAgSXQgb3BlcmF0ZXMgYWxtb3N0IGV4YWN0bHkgbGlrZVxyXG4gICAgdGhlIFB5dGhvbiBgQHByb3BlcnR5YCBkZWNvcmF0b3IsIGJ1dCBpdCBwdXRzIHRoZSByZXN1bHQgb2YgdGhlXHJcbiAgICBtZXRob2QgaXQgZGVjb3JhdGVzIGludG8gdGhlIGluc3RhbmNlIGRpY3QgYWZ0ZXIgdGhlIGZpcnN0IGNhbGwsXHJcbiAgICBlZmZlY3RpdmVseSByZXBsYWNpbmcgdGhlIGZ1bmN0aW9uIGl0IGRlY29yYXRlcyB3aXRoIGFuIGluc3RhbmNlXHJcbiAgICB2YXJpYWJsZS4gIEl0IGlzLCBpbiBQeXRob24gcGFybGFuY2UsIGEgZGF0YSBkZXNjcmlwdG9yLlxyXG5cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB3cmFwcGVkKTpcclxuICAgICAgICBzZWxmLndyYXBwZWQgPSB3cmFwcGVkXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBzZWxmLl9fZG9jX18gPSB3cmFwcGVkLl9fZG9jX19cclxuICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgc2VsZi5fX2RvY19fID0gIiJcclxuICAgICAgICBzZWxmLm5hbWUgPSB3cmFwcGVkLl9fbmFtZV9fXHJcblxyXG4gICAgZGVmIF9fZ2V0X18oc2VsZiwgaW5zdCwgb3duZXIsIF9zZW50aW5lbD1zZW50aW5lbCk6XHJcbiAgICAgICAgaWYgaW5zdCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZlxyXG4gICAgICAgIHZhbCA9IGluc3QuX2NhY2hlLmdldChzZWxmLm5hbWUsIF9zZW50aW5lbClcclxuICAgICAgICBpZiB2YWwgaXMgbm90IF9zZW50aW5lbDpcclxuICAgICAgICAgICAgcmV0dXJuIHZhbFxyXG4gICAgICAgIHZhbCA9IHNlbGYud3JhcHBlZChpbnN0KVxyXG4gICAgICAgIGluc3QuX2NhY2hlW3NlbGYubmFtZV0gPSB2YWxcclxuICAgICAgICByZXR1cm4gdmFsXHJcblxyXG4gICAgZGVmIF9fc2V0X18oc2VsZiwgaW5zdCwgdmFsdWUpOlxyXG4gICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKCJjYWNoZWQgcHJvcGVydHkgaXMgcmVhZC1vbmx5IilcclxuXHJcblxyXG5AcmV3cml0ZV9tb2R1bGVcclxuY2xhc3MgVVJMOlxyXG4gICAgIyBEb25cJ3QgZGVyaXZlIGZyb20gc3RyXHJcbiAgICAjIGZvbGxvdyBwYXRobGliLlBhdGggZGVzaWduXHJcbiAgICAjIHByb2JhYmx5IFVSTCB3aWxsIG5vdCBzdWZmZXIgZnJvbSBwYXRobGliIHByb2JsZW1zOlxyXG4gICAgIyBpdFwncyBpbnRlbmRlZCBmb3IgbGlicmFyaWVzIGxpa2UgYWlvaHR0cCxcclxuICAgICMgbm90IHRvIGJlIHBhc3NlZCBpbnRvIHN0YW5kYXJkIGxpYnJhcnkgZnVuY3Rpb25zIGxpa2Ugb3Mub3BlbiBldGMuXHJcblxyXG4gICAgIyBVUkwgZ3JhbW1hciAoUkZDIDM5ODYpXHJcbiAgICAjIHBjdC1lbmNvZGVkID0gIiUiIEhFWERJRyBIRVhESUdcclxuICAgICMgcmVzZXJ2ZWQgICAgPSBnZW4tZGVsaW1zIC8gc3ViLWRlbGltc1xyXG4gICAgIyBnZW4tZGVsaW1zICA9ICI6IiAvICIvIiAvICI/IiAvICIjIiAvICJbIiAvICJdIiAvICJAIlxyXG4gICAgIyBzdWItZGVsaW1zICA9ICIhIiAvICIkIiAvICImIiAvICJcJyIgLyAiKCIgLyAiKSJcclxuICAgICMgICAgICAgICAgICAgLyAiKiIgLyAiKyIgLyAiLCIgLyAiOyIgLyAiPSJcclxuICAgICMgdW5yZXNlcnZlZCAgPSBBTFBIQSAvIERJR0lUIC8gIi0iIC8gIi4iIC8gIl8iIC8gIn4iXHJcbiAgICAjIFVSSSAgICAgICAgID0gc2NoZW1lICI6IiBoaWVyLXBhcnQgWyAiPyIgcXVlcnkgXSBbICIjIiBmcmFnbWVudCBdXHJcbiAgICAjIGhpZXItcGFydCAgID0gIi8vIiBhdXRob3JpdHkgcGF0aC1hYmVtcHR5XHJcbiAgICAjICAgICAgICAgICAgIC8gcGF0aC1hYnNvbHV0ZVxyXG4gICAgIyAgICAgICAgICAgICAvIHBhdGgtcm9vdGxlc3NcclxuICAgICMgICAgICAgICAgICAgLyBwYXRoLWVtcHR5XHJcbiAgICAjIHNjaGVtZSAgICAgID0gQUxQSEEgKiggQUxQSEEgLyBESUdJVCAvICIrIiAvICItIiAvICIuIiApXHJcbiAgICAjIGF1dGhvcml0eSAgID0gWyB1c2VyaW5mbyAiQCIgXSBob3N0IFsgIjoiIHBvcnQgXVxyXG4gICAgIyB1c2VyaW5mbyAgICA9ICooIHVucmVzZXJ2ZWQgLyBwY3QtZW5jb2RlZCAvIHN1Yi1kZWxpbXMgLyAiOiIgKVxyXG4gICAgIyBob3N0ICAgICAgICA9IElQLWxpdGVyYWwgLyBJUHY0YWRkcmVzcyAvIHJlZy1uYW1lXHJcbiAgICAjIElQLWxpdGVyYWwgPSAiWyIgKCBJUHY2YWRkcmVzcyAvIElQdkZ1dHVyZSAgKSAiXSJcclxuICAgICMgSVB2RnV0dXJlICA9ICJ2IiAxKkhFWERJRyAiLiIgMSooIHVucmVzZXJ2ZWQgLyBzdWItZGVsaW1zIC8gIjoiIClcclxuICAgICMgSVB2NmFkZHJlc3MgPSAgICAgICAgICAgICAgICAgICAgICAgICAgICA2KCBoMTYgIjoiICkgbHMzMlxyXG4gICAgIyAgICAgICAgICAgICAvICAgICAgICAgICAgICAgICAgICAgICAiOjoiIDUoIGgxNiAiOiIgKSBsczMyXHJcbiAgICAjICAgICAgICAgICAgIC8gWyAgICAgICAgICAgICAgIGgxNiBdICI6OiIgNCggaDE2ICI6IiApIGxzMzJcclxuICAgICMgICAgICAgICAgICAgLyBbICoxKCBoMTYgIjoiICkgaDE2IF0gIjo6IiAzKCBoMTYgIjoiICkgbHMzMlxyXG4gICAgIyAgICAgICAgICAgICAvIFsgKjIoIGgxNiAiOiIgKSBoMTYgXSAiOjoiIDIoIGgxNiAiOiIgKSBsczMyXHJcbiAgICAjICAgICAgICAgICAgIC8gWyAqMyggaDE2ICI6IiApIGgxNiBdICI6OiIgICAgaDE2ICI6IiAgIGxzMzJcclxuICAgICMgICAgICAgICAgICAgLyBbICo0KCBoMTYgIjoiICkgaDE2IF0gIjo6IiAgICAgICAgICAgICAgbHMzMlxyXG4gICAgIyAgICAgICAgICAgICAvIFsgKjUoIGgxNiAiOiIgKSBoMTYgXSAiOjoiICAgICAgICAgICAgICBoMTZcclxuICAgICMgICAgICAgICAgICAgLyBbICo2KCBoMTYgIjoiICkgaDE2IF0gIjo6IlxyXG4gICAgIyBsczMyICAgICAgICA9ICggaDE2ICI6IiBoMTYgKSAvIElQdjRhZGRyZXNzXHJcbiAgICAjICAgICAgICAgICAgIDsgbGVhc3Qtc2lnbmlmaWNhbnQgMzIgYml0cyBvZiBhZGRyZXNzXHJcbiAgICAjIGgxNiAgICAgICAgID0gMSo0SEVYRElHXHJcbiAgICAjICAgICAgICAgICAgIDsgMTYgYml0cyBvZiBhZGRyZXNzIHJlcHJlc2VudGVkIGluIGhleGFkZWNpbWFsXHJcbiAgICAjIElQdjRhZGRyZXNzID0gZGVjLW9jdGV0ICIuIiBkZWMtb2N0ZXQgIi4iIGRlYy1vY3RldCAiLiIgZGVjLW9jdGV0XHJcbiAgICAjIGRlYy1vY3RldCAgID0gRElHSVQgICAgICAgICAgICAgICAgIDsgMC05XHJcbiAgICAjICAgICAgICAgICAgIC8gJXgzMS0zOSBESUdJVCAgICAgICAgIDsgMTAtOTlcclxuICAgICMgICAgICAgICAgICAgLyAiMSIgMkRJR0lUICAgICAgICAgICAgOyAxMDAtMTk5XHJcbiAgICAjICAgICAgICAgICAgIC8gIjIiICV4MzAtMzQgRElHSVQgICAgIDsgMjAwLTI0OVxyXG4gICAgIyAgICAgICAgICAgICAvICIyNSIgJXgzMC0zNSAgICAgICAgICA7IDI1MC0yNTVcclxuICAgICMgcmVnLW5hbWUgICAgPSAqKCB1bnJlc2VydmVkIC8gcGN0LWVuY29kZWQgLyBzdWItZGVsaW1zIClcclxuICAgICMgcG9ydCAgICAgICAgPSAqRElHSVRcclxuICAgICMgcGF0aCAgICAgICAgICA9IHBhdGgtYWJlbXB0eSAgICA7IGJlZ2lucyB3aXRoICIvIiBvciBpcyBlbXB0eVxyXG4gICAgIyAgICAgICAgICAgICAgIC8gcGF0aC1hYnNvbHV0ZSAgIDsgYmVnaW5zIHdpdGggIi8iIGJ1dCBub3QgIi8vIlxyXG4gICAgIyAgICAgICAgICAgICAgIC8gcGF0aC1ub3NjaGVtZSAgIDsgYmVnaW5zIHdpdGggYSBub24tY29sb24gc2VnbWVudFxyXG4gICAgIyAgICAgICAgICAgICAgIC8gcGF0aC1yb290bGVzcyAgIDsgYmVnaW5zIHdpdGggYSBzZWdtZW50XHJcbiAgICAjICAgICAgICAgICAgICAgLyBwYXRoLWVtcHR5ICAgICAgOyB6ZXJvIGNoYXJhY3RlcnNcclxuICAgICMgcGF0aC1hYmVtcHR5ICA9ICooICIvIiBzZWdtZW50IClcclxuICAgICMgcGF0aC1hYnNvbHV0ZSA9ICIvIiBbIHNlZ21lbnQtbnogKiggIi8iIHNlZ21lbnQgKSBdXHJcbiAgICAjIHBhdGgtbm9zY2hlbWUgPSBzZWdtZW50LW56LW5jICooICIvIiBzZWdtZW50IClcclxuICAgICMgcGF0aC1yb290bGVzcyA9IHNlZ21lbnQtbnogKiggIi8iIHNlZ21lbnQgKVxyXG4gICAgIyBwYXRoLWVtcHR5ICAgID0gMDxwY2hhcj5cclxuICAgICMgc2VnbWVudCAgICAgICA9ICpwY2hhclxyXG4gICAgIyBzZWdtZW50LW56ICAgID0gMSpwY2hhclxyXG4gICAgIyBzZWdtZW50LW56LW5jID0gMSooIHVucmVzZXJ2ZWQgLyBwY3QtZW5jb2RlZCAvIHN1Yi1kZWxpbXMgLyAiQCIgKVxyXG4gICAgIyAgICAgICAgICAgICAgIDsgbm9uLXplcm8tbGVuZ3RoIHNlZ21lbnQgd2l0aG91dCBhbnkgY29sb24gIjoiXHJcbiAgICAjIHBjaGFyICAgICAgICAgPSB1bnJlc2VydmVkIC8gcGN0LWVuY29kZWQgLyBzdWItZGVsaW1zIC8gIjoiIC8gIkAiXHJcbiAgICAjIHF1ZXJ5ICAgICAgID0gKiggcGNoYXIgLyAiLyIgLyAiPyIgKVxyXG4gICAgIyBmcmFnbWVudCAgICA9ICooIHBjaGFyIC8gIi8iIC8gIj8iIClcclxuICAgICMgVVJJLXJlZmVyZW5jZSA9IFVSSSAvIHJlbGF0aXZlLXJlZlxyXG4gICAgIyByZWxhdGl2ZS1yZWYgID0gcmVsYXRpdmUtcGFydCBbICI/IiBxdWVyeSBdIFsgIiMiIGZyYWdtZW50IF1cclxuICAgICMgcmVsYXRpdmUtcGFydCA9ICIvLyIgYXV0aG9yaXR5IHBhdGgtYWJlbXB0eVxyXG4gICAgIyAgICAgICAgICAgICAgIC8gcGF0aC1hYnNvbHV0ZVxyXG4gICAgIyAgICAgICAgICAgICAgIC8gcGF0aC1ub3NjaGVtZVxyXG4gICAgIyAgICAgICAgICAgICAgIC8gcGF0aC1lbXB0eVxyXG4gICAgIyBhYnNvbHV0ZS1VUkkgID0gc2NoZW1lICI6IiBoaWVyLXBhcnQgWyAiPyIgcXVlcnkgXVxyXG4gICAgX19zbG90c19fID0gKCJfY2FjaGUiLCAiX3ZhbCIpXHJcblxyXG4gICAgX1FVT1RFUiA9IF9RdW90ZXIocmVxdW90ZT1GYWxzZSlcclxuICAgIF9SRVFVT1RFUiA9IF9RdW90ZXIoKVxyXG4gICAgX1BBVEhfUVVPVEVSID0gX1F1b3RlcihzYWZlPSJAOiIsIHByb3RlY3RlZD0iLysiLCByZXF1b3RlPUZhbHNlKVxyXG4gICAgX1BBVEhfUkVRVU9URVIgPSBfUXVvdGVyKHNhZmU9IkA6IiwgcHJvdGVjdGVkPSIvKyIpXHJcbiAgICBfUVVFUllfUVVPVEVSID0gX1F1b3RlcihzYWZlPSI/LzpAIiwgcHJvdGVjdGVkPSI9KyY7IiwgcXM9VHJ1ZSwgcmVxdW90ZT1GYWxzZSlcclxuICAgIF9RVUVSWV9SRVFVT1RFUiA9IF9RdW90ZXIoc2FmZT0iPy86QCIsIHByb3RlY3RlZD0iPSsmOyIsIHFzPVRydWUpXHJcbiAgICBfUVVFUllfUEFSVF9RVU9URVIgPSBfUXVvdGVyKHNhZmU9Ij8vOkAiLCBxcz1UcnVlLCByZXF1b3RlPUZhbHNlKVxyXG4gICAgX0ZSQUdNRU5UX1FVT1RFUiA9IF9RdW90ZXIoc2FmZT0iPy86QCIsIHJlcXVvdGU9RmFsc2UpXHJcbiAgICBfRlJBR01FTlRfUkVRVU9URVIgPSBfUXVvdGVyKHNhZmU9Ij8vOkAiKVxyXG5cclxuICAgIF9VTlFVT1RFUiA9IF9VbnF1b3RlcigpXHJcbiAgICBfUEFUSF9VTlFVT1RFUiA9IF9VbnF1b3Rlcih1bnNhZmU9IisiKVxyXG4gICAgX1FTX1VOUVVPVEVSID0gX1VucXVvdGVyKHFzPVRydWUpXHJcblxyXG4gICAgZGVmIF9fbmV3X18oY2xzLCB2YWw9IiIsICosIGVuY29kZWQ9RmFsc2UsIHN0cmljdD1Ob25lKTpcclxuICAgICAgICBpZiBzdHJpY3QgaXMgbm90IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgd2FybmluZ3Mud2Fybigic3RyaWN0IHBhcmFtZXRlciBpcyBpZ25vcmVkIilcclxuICAgICAgICBpZiB0eXBlKHZhbCkgaXMgY2xzOlxyXG4gICAgICAgICAgICByZXR1cm4gdmFsXHJcbiAgICAgICAgaWYgdHlwZSh2YWwpIGlzIHN0cjpcclxuICAgICAgICAgICAgdmFsID0gdXJsc3BsaXQodmFsKVxyXG4gICAgICAgIGVsaWYgdHlwZSh2YWwpIGlzIFNwbGl0UmVzdWx0OlxyXG4gICAgICAgICAgICBpZiBub3QgZW5jb2RlZDpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNhbm5vdCBhcHBseSBkZWNvZGluZyB0byBTcGxpdFJlc3VsdCIpXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHZhbCwgc3RyKTpcclxuICAgICAgICAgICAgdmFsID0gdXJsc3BsaXQoc3RyKHZhbCkpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJDb25zdHJ1Y3RvciBwYXJhbWV0ZXIgc2hvdWxkIGJlIHN0ciIpXHJcblxyXG4gICAgICAgIGlmIG5vdCBlbmNvZGVkOlxyXG4gICAgICAgICAgICBpZiBub3QgdmFsWzFdOiAgIyBuZXRsb2NcclxuICAgICAgICAgICAgICAgIG5ldGxvYyA9ICIiXHJcbiAgICAgICAgICAgICAgICBob3N0ID0gIiJcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGhvc3QgPSB2YWwuaG9zdG5hbWVcclxuICAgICAgICAgICAgICAgIGlmIGhvc3QgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIFVSTDogaG9zdCBpcyByZXF1aXJlZCBmb3IgYWJzb2x1dGUgdXJscyIpXHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIHBvcnQgPSB2YWwucG9ydFxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3IgYXMgZTpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiSW52YWxpZCBVUkw6IHBvcnQgY2FuXCd0IGJlIGNvbnZlcnRlZCB0byBpbnRlZ2VyIlxyXG4gICAgICAgICAgICAgICAgICAgICkgZnJvbSBlXHJcblxyXG4gICAgICAgICAgICAgICAgbmV0bG9jID0gY2xzLl9tYWtlX25ldGxvYyhcclxuICAgICAgICAgICAgICAgICAgICB2YWwudXNlcm5hbWUsIHZhbC5wYXNzd29yZCwgaG9zdCwgcG9ydCwgZW5jb2RlPVRydWUsIHJlcXVvdGU9VHJ1ZVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBwYXRoID0gY2xzLl9QQVRIX1JFUVVPVEVSKHZhbFsyXSlcclxuICAgICAgICAgICAgaWYgbmV0bG9jOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IGNscy5fbm9ybWFsaXplX3BhdGgocGF0aClcclxuXHJcbiAgICAgICAgICAgIGNscy5fdmFsaWRhdGVfYXV0aG9yaXR5X3VyaV9hYnNfcGF0aChob3N0PWhvc3QsIHBhdGg9cGF0aClcclxuICAgICAgICAgICAgcXVlcnkgPSBjbHMuX1FVRVJZX1JFUVVPVEVSKHZhbFszXSlcclxuICAgICAgICAgICAgZnJhZ21lbnQgPSBjbHMuX0ZSQUdNRU5UX1JFUVVPVEVSKHZhbFs0XSlcclxuICAgICAgICAgICAgdmFsID0gU3BsaXRSZXN1bHQodmFsWzBdLCBuZXRsb2MsIHBhdGgsIHF1ZXJ5LCBmcmFnbWVudClcclxuXHJcbiAgICAgICAgc2VsZiA9IG9iamVjdC5fX25ld19fKGNscylcclxuICAgICAgICBzZWxmLl92YWwgPSB2YWxcclxuICAgICAgICBzZWxmLl9jYWNoZSA9IHt9XHJcbiAgICAgICAgcmV0dXJuIHNlbGZcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBidWlsZChcclxuICAgICAgICBjbHMsXHJcbiAgICAgICAgKixcclxuICAgICAgICBzY2hlbWU9IiIsXHJcbiAgICAgICAgYXV0aG9yaXR5PSIiLFxyXG4gICAgICAgIHVzZXI9Tm9uZSxcclxuICAgICAgICBwYXNzd29yZD1Ob25lLFxyXG4gICAgICAgIGhvc3Q9IiIsXHJcbiAgICAgICAgcG9ydD1Ob25lLFxyXG4gICAgICAgIHBhdGg9IiIsXHJcbiAgICAgICAgcXVlcnk9Tm9uZSxcclxuICAgICAgICBxdWVyeV9zdHJpbmc9IiIsXHJcbiAgICAgICAgZnJhZ21lbnQ9IiIsXHJcbiAgICAgICAgZW5jb2RlZD1GYWxzZVxyXG4gICAgKTpcclxuICAgICAgICAiIiJDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IFVSTCIiIlxyXG5cclxuICAgICAgICBpZiBhdXRob3JpdHkgYW5kICh1c2VyIG9yIHBhc3N3b3JkIG9yIGhvc3Qgb3IgcG9ydCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBcJ0NhblxcXCd0IG1peCAiYXV0aG9yaXR5IiB3aXRoICJ1c2VyIiwgInBhc3N3b3JkIiwgImhvc3QiIG9yICJwb3J0Ii5cJ1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYgcG9ydCBhbmQgbm90IGhvc3Q6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXCdDYW5cXFwndCBidWlsZCBVUkwgd2l0aCAicG9ydCIgYnV0IHdpdGhvdXQgImhvc3QiLlwnKVxyXG4gICAgICAgIGlmIHF1ZXJ5IGFuZCBxdWVyeV9zdHJpbmc6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXCdPbmx5IG9uZSBvZiAicXVlcnkiIG9yICJxdWVyeV9zdHJpbmciIHNob3VsZCBiZSBwYXNzZWRcJylcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHNjaGVtZSBpcyBOb25lXHJcbiAgICAgICAgICAgIG9yIGF1dGhvcml0eSBpcyBOb25lXHJcbiAgICAgICAgICAgIG9yIHBhdGggaXMgTm9uZVxyXG4gICAgICAgICAgICBvciBxdWVyeV9zdHJpbmcgaXMgTm9uZVxyXG4gICAgICAgICAgICBvciBmcmFnbWVudCBpcyBOb25lXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgXCdOb25lVHlwZSBpcyBpbGxlZ2FsIGZvciAic2NoZW1lIiwgImF1dGhvcml0eSIsICJwYXRoIiwgXCdcclxuICAgICAgICAgICAgICAgIFwnInF1ZXJ5X3N0cmluZyIsIGFuZCAiZnJhZ21lbnQiIGFyZ3MsIHVzZSBlbXB0eSBzdHJpbmcgaW5zdGVhZC5cJ1xyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIGF1dGhvcml0eTpcclxuICAgICAgICAgICAgaWYgZW5jb2RlZDpcclxuICAgICAgICAgICAgICAgIG5ldGxvYyA9IGF1dGhvcml0eVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgdG1wID0gU3BsaXRSZXN1bHQoIiIsIGF1dGhvcml0eSwgIiIsICIiLCAiIilcclxuICAgICAgICAgICAgICAgIG5ldGxvYyA9IGNscy5fbWFrZV9uZXRsb2MoXHJcbiAgICAgICAgICAgICAgICAgICAgdG1wLnVzZXJuYW1lLCB0bXAucGFzc3dvcmQsIHRtcC5ob3N0bmFtZSwgdG1wLnBvcnQsIGVuY29kZT1UcnVlXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgZWxpZiBub3QgdXNlciBhbmQgbm90IHBhc3N3b3JkIGFuZCBub3QgaG9zdCBhbmQgbm90IHBvcnQ6XHJcbiAgICAgICAgICAgIG5ldGxvYyA9ICIiXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgbmV0bG9jID0gY2xzLl9tYWtlX25ldGxvYyhcclxuICAgICAgICAgICAgICAgIHVzZXIsIHBhc3N3b3JkLCBob3N0LCBwb3J0LCBlbmNvZGU9bm90IGVuY29kZWQsIGVuY29kZV9ob3N0PW5vdCBlbmNvZGVkXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiBub3QgZW5jb2RlZDpcclxuICAgICAgICAgICAgcGF0aCA9IGNscy5fUEFUSF9RVU9URVIocGF0aClcclxuICAgICAgICAgICAgaWYgbmV0bG9jOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IGNscy5fbm9ybWFsaXplX3BhdGgocGF0aClcclxuXHJcbiAgICAgICAgICAgIGNscy5fdmFsaWRhdGVfYXV0aG9yaXR5X3VyaV9hYnNfcGF0aChob3N0PWhvc3QsIHBhdGg9cGF0aClcclxuICAgICAgICAgICAgcXVlcnlfc3RyaW5nID0gY2xzLl9RVUVSWV9RVU9URVIocXVlcnlfc3RyaW5nKVxyXG4gICAgICAgICAgICBmcmFnbWVudCA9IGNscy5fRlJBR01FTlRfUVVPVEVSKGZyYWdtZW50KVxyXG5cclxuICAgICAgICB1cmwgPSBjbHMoXHJcbiAgICAgICAgICAgIFNwbGl0UmVzdWx0KHNjaGVtZSwgbmV0bG9jLCBwYXRoLCBxdWVyeV9zdHJpbmcsIGZyYWdtZW50KSwgZW5jb2RlZD1UcnVlXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBxdWVyeTpcclxuICAgICAgICAgICAgcmV0dXJuIHVybC53aXRoX3F1ZXJ5KHF1ZXJ5KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiB1cmxcclxuXHJcbiAgICBkZWYgX19pbml0X3N1YmNsYXNzX18oY2xzKTpcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkluaGVyaXRpbmcgYSBjbGFzcyB7IXJ9IGZyb20gVVJMIGlzIGZvcmJpZGRlbiIuZm9ybWF0KGNscykpXHJcblxyXG4gICAgZGVmIF9fc3RyX18oc2VsZik6XHJcbiAgICAgICAgdmFsID0gc2VsZi5fdmFsXHJcbiAgICAgICAgaWYgbm90IHZhbC5wYXRoIGFuZCBzZWxmLmlzX2Fic29sdXRlKCkgYW5kICh2YWwucXVlcnkgb3IgdmFsLmZyYWdtZW50KTpcclxuICAgICAgICAgICAgdmFsID0gdmFsLl9yZXBsYWNlKHBhdGg9Ii8iKVxyXG4gICAgICAgIHJldHVybiB1cmx1bnNwbGl0KHZhbClcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZik6XHJcbiAgICAgICAgcmV0dXJuICJ7fShcJ3t9XCcpIi5mb3JtYXQoc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIHN0cihzZWxmKSlcclxuXHJcbiAgICBkZWYgX19ieXRlc19fKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBzdHIoc2VsZikuZW5jb2RlKCJhc2NpaSIpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6XHJcbiAgICAgICAgaWYgbm90IHR5cGUob3RoZXIpIGlzIFVSTDpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHZhbDEgPSBzZWxmLl92YWxcclxuICAgICAgICBpZiBub3QgdmFsMS5wYXRoIGFuZCBzZWxmLmlzX2Fic29sdXRlKCk6XHJcbiAgICAgICAgICAgIHZhbDEgPSB2YWwxLl9yZXBsYWNlKHBhdGg9Ii8iKVxyXG5cclxuICAgICAgICB2YWwyID0gb3RoZXIuX3ZhbFxyXG4gICAgICAgIGlmIG5vdCB2YWwyLnBhdGggYW5kIG90aGVyLmlzX2Fic29sdXRlKCk6XHJcbiAgICAgICAgICAgIHZhbDIgPSB2YWwyLl9yZXBsYWNlKHBhdGg9Ii8iKVxyXG5cclxuICAgICAgICByZXR1cm4gdmFsMSA9PSB2YWwyXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpOlxyXG4gICAgICAgIHJldCA9IHNlbGYuX2NhY2hlLmdldCgiaGFzaCIpXHJcbiAgICAgICAgaWYgcmV0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHZhbCA9IHNlbGYuX3ZhbFxyXG4gICAgICAgICAgICBpZiBub3QgdmFsLnBhdGggYW5kIHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5fcmVwbGFjZShwYXRoPSIvIilcclxuICAgICAgICAgICAgcmV0ID0gc2VsZi5fY2FjaGVbImhhc2giXSA9IGhhc2godmFsKVxyXG4gICAgICAgIHJldHVybiByZXRcclxuXHJcbiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKTpcclxuICAgICAgICBpZiBub3QgdHlwZShvdGhlcikgaXMgVVJMOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmFsIDw9IG90aGVyLl92YWxcclxuXHJcbiAgICBkZWYgX19sdF9fKHNlbGYsIG90aGVyKTpcclxuICAgICAgICBpZiBub3QgdHlwZShvdGhlcikgaXMgVVJMOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmFsIDwgb3RoZXIuX3ZhbFxyXG5cclxuICAgIGRlZiBfX2dlX18oc2VsZiwgb3RoZXIpOlxyXG4gICAgICAgIGlmIG5vdCB0eXBlKG90aGVyKSBpcyBVUkw6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWwgPj0gb3RoZXIuX3ZhbFxyXG5cclxuICAgIGRlZiBfX2d0X18oc2VsZiwgb3RoZXIpOlxyXG4gICAgICAgIGlmIG5vdCB0eXBlKG90aGVyKSBpcyBVUkw6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWwgPiBvdGhlci5fdmFsXHJcblxyXG4gICAgZGVmIF9fdHJ1ZWRpdl9fKHNlbGYsIG5hbWUpOlxyXG4gICAgICAgIG5hbWUgPSBzZWxmLl9QQVRIX1FVT1RFUihuYW1lKVxyXG4gICAgICAgIGlmIG5hbWUuc3RhcnRzd2l0aCgiLyIpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkFwcGVuZGluZyBwYXRoIHshcn0gc3RhcnRpbmcgZnJvbSBzbGFzaCBpcyBmb3JiaWRkZW4iLmZvcm1hdChuYW1lKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgcGF0aCA9IHNlbGYuX3ZhbC5wYXRoXHJcbiAgICAgICAgaWYgcGF0aCA9PSAiLyI6XHJcbiAgICAgICAgICAgIG5ld19wYXRoID0gIi8iICsgbmFtZVxyXG4gICAgICAgIGVsaWYgbm90IHBhdGggYW5kIG5vdCBzZWxmLmlzX2Fic29sdXRlKCk6XHJcbiAgICAgICAgICAgIG5ld19wYXRoID0gbmFtZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHBhcnRzID0gcGF0aC5yc3RyaXAoIi8iKS5zcGxpdCgiLyIpXHJcbiAgICAgICAgICAgIHBhcnRzLmFwcGVuZChuYW1lKVxyXG4gICAgICAgICAgICBuZXdfcGF0aCA9ICIvIi5qb2luKHBhcnRzKVxyXG4gICAgICAgIGlmIHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgbmV3X3BhdGggPSBzZWxmLl9ub3JtYWxpemVfcGF0aChuZXdfcGF0aClcclxuICAgICAgICByZXR1cm4gVVJMKFxyXG4gICAgICAgICAgICBzZWxmLl92YWwuX3JlcGxhY2UocGF0aD1uZXdfcGF0aCwgcXVlcnk9IiIsIGZyYWdtZW50PSIiKSwgZW5jb2RlZD1UcnVlXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX21vZF9fKHNlbGYsIHF1ZXJ5KTpcclxuICAgICAgICByZXR1cm4gc2VsZi51cGRhdGVfcXVlcnkocXVlcnkpXHJcblxyXG4gICAgZGVmIF9fYm9vbF9fKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIGJvb2woXHJcbiAgICAgICAgICAgIHNlbGYuX3ZhbC5uZXRsb2Mgb3Igc2VsZi5fdmFsLnBhdGggb3Igc2VsZi5fdmFsLnF1ZXJ5IG9yIHNlbGYuX3ZhbC5mcmFnbWVudFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19nZXRzdGF0ZV9fKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiAoc2VsZi5fdmFsLClcclxuXHJcbiAgICBkZWYgX19zZXRzdGF0ZV9fKHNlbGYsIHN0YXRlKTpcclxuICAgICAgICBpZiBzdGF0ZVswXSBpcyBOb25lIGFuZCBpc2luc3RhbmNlKHN0YXRlWzFdLCBkaWN0KTpcclxuICAgICAgICAgICAgIyBkZWZhdWx0IHN0eWxlIHBpY2tsZVxyXG4gICAgICAgICAgICBzZWxmLl92YWwgPSBzdGF0ZVsxXVsiX3ZhbCJdXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5fdmFsLCAqdW51c2VkID0gc3RhdGVcclxuICAgICAgICBzZWxmLl9jYWNoZSA9IHt9XHJcblxyXG4gICAgZGVmIGlzX2Fic29sdXRlKHNlbGYpOlxyXG4gICAgICAgICIiIkEgY2hlY2sgZm9yIGFic29sdXRlIFVSTHMuXHJcblxyXG4gICAgICAgIFJldHVybiBUcnVlIGZvciBhYnNvbHV0ZSBvbmVzIChoYXZpbmcgc2NoZW1lIG9yIHN0YXJ0aW5nXHJcbiAgICAgICAgd2l0aCAvLyksIEZhbHNlIG90aGVyd2lzZS5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYucmF3X2hvc3QgaXMgbm90IE5vbmVcclxuXHJcbiAgICBkZWYgaXNfZGVmYXVsdF9wb3J0KHNlbGYpOlxyXG4gICAgICAgICIiIkEgY2hlY2sgZm9yIGRlZmF1bHQgcG9ydC5cclxuXHJcbiAgICAgICAgUmV0dXJuIFRydWUgaWYgcG9ydCBpcyBkZWZhdWx0IGZvciBzcGVjaWZpZWQgc2NoZW1lLFxyXG4gICAgICAgIGUuZy4gXCdodHRwOi8vcHl0aG9uLm9yZ1wnIG9yIFwnaHR0cDovL3B5dGhvbi5vcmc6ODBcJywgRmFsc2VcclxuICAgICAgICBvdGhlcndpc2UuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHNlbGYucG9ydCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuICAgICAgICBkZWZhdWx0ID0gREVGQVVMVF9QT1JUUy5nZXQoc2VsZi5zY2hlbWUpXHJcbiAgICAgICAgaWYgZGVmYXVsdCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuICAgICAgICByZXR1cm4gc2VsZi5wb3J0ID09IGRlZmF1bHRcclxuXHJcbiAgICBkZWYgb3JpZ2luKHNlbGYpOlxyXG4gICAgICAgICIiIlJldHVybiBhbiBVUkwgd2l0aCBzY2hlbWUsIGhvc3QgYW5kIHBvcnQgcGFydHMgb25seS5cclxuXHJcbiAgICAgICAgdXNlciwgcGFzc3dvcmQsIHBhdGgsIHF1ZXJ5IGFuZCBmcmFnbWVudCBhcmUgcmVtb3ZlZC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgIyBUT0RPOiBhZGQgYSBrZXl3b3JkLW9ubHkgb3B0aW9uIGZvciBrZWVwaW5nIHVzZXIvcGFzcyBtYXliZT9cclxuICAgICAgICBpZiBub3Qgc2VsZi5pc19hYnNvbHV0ZSgpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVUkwgc2hvdWxkIGJlIGFic29sdXRlIilcclxuICAgICAgICBpZiBub3Qgc2VsZi5fdmFsLnNjaGVtZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVVJMIHNob3VsZCBoYXZlIHNjaGVtZSIpXHJcbiAgICAgICAgdiA9IHNlbGYuX3ZhbFxyXG4gICAgICAgIG5ldGxvYyA9IHNlbGYuX21ha2VfbmV0bG9jKE5vbmUsIE5vbmUsIHYuaG9zdG5hbWUsIHYucG9ydClcclxuICAgICAgICB2YWwgPSB2Ll9yZXBsYWNlKG5ldGxvYz1uZXRsb2MsIHBhdGg9IiIsIHF1ZXJ5PSIiLCBmcmFnbWVudD0iIilcclxuICAgICAgICByZXR1cm4gVVJMKHZhbCwgZW5jb2RlZD1UcnVlKVxyXG5cclxuICAgIGRlZiByZWxhdGl2ZShzZWxmKTpcclxuICAgICAgICAiIiJSZXR1cm4gYSByZWxhdGl2ZSBwYXJ0IG9mIHRoZSBVUkwuXHJcblxyXG4gICAgICAgIHNjaGVtZSwgdXNlciwgcGFzc3dvcmQsIGhvc3QgYW5kIHBvcnQgYXJlIHJlbW92ZWQuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLmlzX2Fic29sdXRlKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVSTCBzaG91bGQgYmUgYWJzb2x1dGUiKVxyXG4gICAgICAgIHZhbCA9IHNlbGYuX3ZhbC5fcmVwbGFjZShzY2hlbWU9IiIsIG5ldGxvYz0iIilcclxuICAgICAgICByZXR1cm4gVVJMKHZhbCwgZW5jb2RlZD1UcnVlKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHNjaGVtZShzZWxmKTpcclxuICAgICAgICAiIiJTY2hlbWUgZm9yIGFic29sdXRlIFVSTHMuXHJcblxyXG4gICAgICAgIEVtcHR5IHN0cmluZyBmb3IgcmVsYXRpdmUgVVJMcyBvciBVUkxzIHN0YXJ0aW5nIHdpdGggLy9cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbC5zY2hlbWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByYXdfYXV0aG9yaXR5KHNlbGYpOlxyXG4gICAgICAgICIiIkVuY29kZWQgYXV0aG9yaXR5IHBhcnQgb2YgVVJMLlxyXG5cclxuICAgICAgICBFbXB0eSBzdHJpbmcgZm9yIHJlbGF0aXZlIFVSTHMuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWwubmV0bG9jXHJcblxyXG4gICAgQGNhY2hlZF9wcm9wZXJ0eVxyXG4gICAgZGVmIGF1dGhvcml0eShzZWxmKTpcclxuICAgICAgICAiIiJEZWNvZGVkIGF1dGhvcml0eSBwYXJ0IG9mIFVSTC5cclxuXHJcbiAgICAgICAgRW1wdHkgc3RyaW5nIGZvciByZWxhdGl2ZSBVUkxzLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fbWFrZV9uZXRsb2MoXHJcbiAgICAgICAgICAgIHNlbGYudXNlciwgc2VsZi5wYXNzd29yZCwgc2VsZi5ob3N0LCBzZWxmLnBvcnQsIGVuY29kZV9ob3N0PUZhbHNlXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJhd191c2VyKHNlbGYpOlxyXG4gICAgICAgICIiIkVuY29kZWQgdXNlciBwYXJ0IG9mIFVSTC5cclxuXHJcbiAgICAgICAgTm9uZSBpZiB1c2VyIGlzIG1pc3NpbmcuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgICMgbm90IC51c2VybmFtZVxyXG4gICAgICAgIHJldCA9IHNlbGYuX3ZhbC51c2VybmFtZVxyXG4gICAgICAgIGlmIG5vdCByZXQ6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcbiAgICAgICAgcmV0dXJuIHJldFxyXG5cclxuICAgIEBjYWNoZWRfcHJvcGVydHlcclxuICAgIGRlZiB1c2VyKHNlbGYpOlxyXG4gICAgICAgICIiIkRlY29kZWQgdXNlciBwYXJ0IG9mIFVSTC5cclxuXHJcbiAgICAgICAgTm9uZSBpZiB1c2VyIGlzIG1pc3NpbmcuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9VTlFVT1RFUihzZWxmLnJhd191c2VyKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJhd19wYXNzd29yZChzZWxmKTpcclxuICAgICAgICAiIiJFbmNvZGVkIHBhc3N3b3JkIHBhcnQgb2YgVVJMLlxyXG5cclxuICAgICAgICBOb25lIGlmIHBhc3N3b3JkIGlzIG1pc3NpbmcuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWwucGFzc3dvcmRcclxuXHJcbiAgICBAY2FjaGVkX3Byb3BlcnR5XHJcbiAgICBkZWYgcGFzc3dvcmQoc2VsZik6XHJcbiAgICAgICAgIiIiRGVjb2RlZCBwYXNzd29yZCBwYXJ0IG9mIFVSTC5cclxuXHJcbiAgICAgICAgTm9uZSBpZiBwYXNzd29yZCBpcyBtaXNzaW5nLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fVU5RVU9URVIoc2VsZi5yYXdfcGFzc3dvcmQpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmF3X2hvc3Qoc2VsZik6XHJcbiAgICAgICAgIiIiRW5jb2RlZCBob3N0IHBhcnQgb2YgVVJMLlxyXG5cclxuICAgICAgICBOb25lIGZvciByZWxhdGl2ZSBVUkxzLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICAjIFVzZSBob3N0IGluc3RlYWQgb2YgaG9zdG5hbWUgZm9yIHNha2Ugb2Ygc2hvcnRuZXNzXHJcbiAgICAgICAgIyBNYXkgYWRkIC5ob3N0bmFtZSBwcm9wIGxhdGVyXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbC5ob3N0bmFtZVxyXG5cclxuICAgIEBjYWNoZWRfcHJvcGVydHlcclxuICAgIGRlZiBob3N0KHNlbGYpOlxyXG4gICAgICAgICIiIkRlY29kZWQgaG9zdCBwYXJ0IG9mIFVSTC5cclxuXHJcbiAgICAgICAgTm9uZSBmb3IgcmVsYXRpdmUgVVJMcy5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmF3ID0gc2VsZi5yYXdfaG9zdFxyXG4gICAgICAgIGlmIHJhdyBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIGlmICIlIiBpbiByYXc6XHJcbiAgICAgICAgICAgICMgSGFjayBmb3Igc2NvcGVkIElQdjYgYWRkcmVzc2VzIGxpa2VcclxuICAgICAgICAgICAgIyBmZTgwOjoyJVx4ZDBceDlmXHhkMVx4ODBceGQwXHhiZVx4ZDBceGIyXHhkMFx4YjVceGQxXHg4MFx4ZDBceGJhXHhkMFx4YjBcclxuICAgICAgICAgICAgIyBwcmVzZW5jZSBvZiBcJyVcJyBzaWduIG1lYW5zIG9ubHkgSVB2NiBhZGRyZXNzLCBzbyBpZG5hIGlzIHVzZWxlc3MuXHJcbiAgICAgICAgICAgIHJldHVybiByYXdcclxuICAgICAgICByZXR1cm4gX2lkbmFfZGVjb2RlKHJhdylcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwb3J0KHNlbGYpOlxyXG4gICAgICAgICIiIlBvcnQgcGFydCBvZiBVUkwsIHdpdGggc2NoZW1lLWJhc2VkIGZhbGxiYWNrLlxyXG5cclxuICAgICAgICBOb25lIGZvciByZWxhdGl2ZSBVUkxzIG9yIFVSTHMgd2l0aG91dCBleHBsaWNpdCBwb3J0IGFuZFxyXG4gICAgICAgIHNjaGVtZSB3aXRob3V0IGRlZmF1bHQgcG9ydCBzdWJzdGl0dXRpb24uXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWwucG9ydCBvciBERUZBVUxUX1BPUlRTLmdldChzZWxmLl92YWwuc2NoZW1lKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGV4cGxpY2l0X3BvcnQoc2VsZik6XHJcbiAgICAgICAgIiIiUG9ydCBwYXJ0IG9mIFVSTCwgd2l0aG91dCBzY2hlbWUtYmFzZWQgZmFsbGJhY2suXHJcblxyXG4gICAgICAgIE5vbmUgZm9yIHJlbGF0aXZlIFVSTHMgb3IgVVJMcyB3aXRob3V0IGV4cGxpY2l0IHBvcnQuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWwucG9ydFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJhd19wYXRoKHNlbGYpOlxyXG4gICAgICAgICIiIkVuY29kZWQgcGF0aCBvZiBVUkwuXHJcblxyXG4gICAgICAgIC8gZm9yIGFic29sdXRlIFVSTHMgd2l0aG91dCBwYXRoIHBhcnQuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldCA9IHNlbGYuX3ZhbC5wYXRoXHJcbiAgICAgICAgaWYgbm90IHJldCBhbmQgc2VsZi5pc19hYnNvbHV0ZSgpOlxyXG4gICAgICAgICAgICByZXQgPSAiLyJcclxuICAgICAgICByZXR1cm4gcmV0XHJcblxyXG4gICAgQGNhY2hlZF9wcm9wZXJ0eVxyXG4gICAgZGVmIHBhdGgoc2VsZik6XHJcbiAgICAgICAgIiIiRGVjb2RlZCBwYXRoIG9mIFVSTC5cclxuXHJcbiAgICAgICAgLyBmb3IgYWJzb2x1dGUgVVJMcyB3aXRob3V0IHBhdGggcGFydC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX1BBVEhfVU5RVU9URVIoc2VsZi5yYXdfcGF0aClcclxuXHJcbiAgICBAY2FjaGVkX3Byb3BlcnR5XHJcbiAgICBkZWYgcXVlcnkoc2VsZik6XHJcbiAgICAgICAgIiIiQSBNdWx0aURpY3RQcm94eSByZXByZXNlbnRpbmcgcGFyc2VkIHF1ZXJ5IHBhcmFtZXRlcnMgaW4gZGVjb2RlZFxyXG4gICAgICAgIHJlcHJlc2VudGF0aW9uLlxyXG5cclxuICAgICAgICBFbXB0eSB2YWx1ZSBpZiBVUkwgaGFzIG5vIHF1ZXJ5IHBhcnQuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldCA9IE11bHRpRGljdChwYXJzZV9xc2woc2VsZi5yYXdfcXVlcnlfc3RyaW5nLCBrZWVwX2JsYW5rX3ZhbHVlcz1UcnVlKSlcclxuICAgICAgICByZXR1cm4gTXVsdGlEaWN0UHJveHkocmV0KVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJhd19xdWVyeV9zdHJpbmcoc2VsZik6XHJcbiAgICAgICAgIiIiRW5jb2RlZCBxdWVyeSBwYXJ0IG9mIFVSTC5cclxuXHJcbiAgICAgICAgRW1wdHkgc3RyaW5nIGlmIHF1ZXJ5IGlzIG1pc3NpbmcuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWwucXVlcnlcclxuXHJcbiAgICBAY2FjaGVkX3Byb3BlcnR5XHJcbiAgICBkZWYgcXVlcnlfc3RyaW5nKHNlbGYpOlxyXG4gICAgICAgICIiIkRlY29kZWQgcXVlcnkgcGFydCBvZiBVUkwuXHJcblxyXG4gICAgICAgIEVtcHR5IHN0cmluZyBpZiBxdWVyeSBpcyBtaXNzaW5nLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fUVNfVU5RVU9URVIoc2VsZi5yYXdfcXVlcnlfc3RyaW5nKVxyXG5cclxuICAgIEBjYWNoZWRfcHJvcGVydHlcclxuICAgIGRlZiBwYXRoX3FzKHNlbGYpOlxyXG4gICAgICAgICIiIkRlY29kZWQgcGF0aCBvZiBVUkwgd2l0aCBxdWVyeS4iIiJcclxuICAgICAgICBpZiBub3Qgc2VsZi5xdWVyeV9zdHJpbmc6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLnBhdGhcclxuICAgICAgICByZXR1cm4gInt9P3t9Ii5mb3JtYXQoc2VsZi5wYXRoLCBzZWxmLnF1ZXJ5X3N0cmluZylcclxuXHJcbiAgICBAY2FjaGVkX3Byb3BlcnR5XHJcbiAgICBkZWYgcmF3X3BhdGhfcXMoc2VsZik6XHJcbiAgICAgICAgIiIiRW5jb2RlZCBwYXRoIG9mIFVSTCB3aXRoIHF1ZXJ5LiIiIlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLnJhd19xdWVyeV9zdHJpbmc6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLnJhd19wYXRoXHJcbiAgICAgICAgcmV0dXJuICJ7fT97fSIuZm9ybWF0KHNlbGYucmF3X3BhdGgsIHNlbGYucmF3X3F1ZXJ5X3N0cmluZylcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByYXdfZnJhZ21lbnQoc2VsZik6XHJcbiAgICAgICAgIiIiRW5jb2RlZCBmcmFnbWVudCBwYXJ0IG9mIFVSTC5cclxuXHJcbiAgICAgICAgRW1wdHkgc3RyaW5nIGlmIGZyYWdtZW50IGlzIG1pc3NpbmcuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWwuZnJhZ21lbnRcclxuXHJcbiAgICBAY2FjaGVkX3Byb3BlcnR5XHJcbiAgICBkZWYgZnJhZ21lbnQoc2VsZik6XHJcbiAgICAgICAgIiIiRGVjb2RlZCBmcmFnbWVudCBwYXJ0IG9mIFVSTC5cclxuXHJcbiAgICAgICAgRW1wdHkgc3RyaW5nIGlmIGZyYWdtZW50IGlzIG1pc3NpbmcuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9VTlFVT1RFUihzZWxmLnJhd19mcmFnbWVudClcclxuXHJcbiAgICBAY2FjaGVkX3Byb3BlcnR5XHJcbiAgICBkZWYgcmF3X3BhcnRzKHNlbGYpOlxyXG4gICAgICAgICIiIkEgdHVwbGUgY29udGFpbmluZyBlbmNvZGVkICpwYXRoKiBwYXJ0cy5cclxuXHJcbiAgICAgICAgKFwnL1wnLCkgZm9yIGFic29sdXRlIFVSTHMgaWYgKnBhdGgqIGlzIG1pc3NpbmcuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHBhdGggPSBzZWxmLl92YWwucGF0aFxyXG4gICAgICAgIGlmIHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgaWYgbm90IHBhdGg6XHJcbiAgICAgICAgICAgICAgICBwYXJ0cyA9IFsiLyJdXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBwYXJ0cyA9IFsiLyJdICsgcGF0aFsxOl0uc3BsaXQoIi8iKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGlmIHBhdGguc3RhcnRzd2l0aCgiLyIpOlxyXG4gICAgICAgICAgICAgICAgcGFydHMgPSBbIi8iXSArIHBhdGhbMTpdLnNwbGl0KCIvIilcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHBhcnRzID0gcGF0aC5zcGxpdCgiLyIpXHJcbiAgICAgICAgcmV0dXJuIHR1cGxlKHBhcnRzKVxyXG5cclxuICAgIEBjYWNoZWRfcHJvcGVydHlcclxuICAgIGRlZiBwYXJ0cyhzZWxmKTpcclxuICAgICAgICAiIiJBIHR1cGxlIGNvbnRhaW5pbmcgZGVjb2RlZCAqcGF0aCogcGFydHMuXHJcblxyXG4gICAgICAgIChcJy9cJywpIGZvciBhYnNvbHV0ZSBVUkxzIGlmICpwYXRoKiBpcyBtaXNzaW5nLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gdHVwbGUoc2VsZi5fVU5RVU9URVIocGFydCkgZm9yIHBhcnQgaW4gc2VsZi5yYXdfcGFydHMpXHJcblxyXG4gICAgQGNhY2hlZF9wcm9wZXJ0eVxyXG4gICAgZGVmIHBhcmVudChzZWxmKTpcclxuICAgICAgICAiIiJBIG5ldyBVUkwgd2l0aCBsYXN0IHBhcnQgb2YgcGF0aCByZW1vdmVkIGFuZCBjbGVhbmVkIHVwIHF1ZXJ5IGFuZFxyXG4gICAgICAgIGZyYWdtZW50LlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICBwYXRoID0gc2VsZi5yYXdfcGF0aFxyXG4gICAgICAgIGlmIG5vdCBwYXRoIG9yIHBhdGggPT0gIi8iOlxyXG4gICAgICAgICAgICBpZiBzZWxmLnJhd19mcmFnbWVudCBvciBzZWxmLnJhd19xdWVyeV9zdHJpbmc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVVJMKHNlbGYuX3ZhbC5fcmVwbGFjZShxdWVyeT0iIiwgZnJhZ21lbnQ9IiIpLCBlbmNvZGVkPVRydWUpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmXHJcbiAgICAgICAgcGFydHMgPSBwYXRoLnNwbGl0KCIvIilcclxuICAgICAgICB2YWwgPSBzZWxmLl92YWwuX3JlcGxhY2UocGF0aD0iLyIuam9pbihwYXJ0c1s6LTFdKSwgcXVlcnk9IiIsIGZyYWdtZW50PSIiKVxyXG4gICAgICAgIHJldHVybiBVUkwodmFsLCBlbmNvZGVkPVRydWUpXHJcblxyXG4gICAgQGNhY2hlZF9wcm9wZXJ0eVxyXG4gICAgZGVmIHJhd19uYW1lKHNlbGYpOlxyXG4gICAgICAgICIiIlRoZSBsYXN0IHBhcnQgb2YgcmF3X3BhcnRzLiIiIlxyXG4gICAgICAgIHBhcnRzID0gc2VsZi5yYXdfcGFydHNcclxuICAgICAgICBpZiBzZWxmLmlzX2Fic29sdXRlKCk6XHJcbiAgICAgICAgICAgIHBhcnRzID0gcGFydHNbMTpdXHJcbiAgICAgICAgICAgIGlmIG5vdCBwYXJ0czpcclxuICAgICAgICAgICAgICAgIHJldHVybiAiIlxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzWy0xXVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJ0c1stMV1cclxuXHJcbiAgICBAY2FjaGVkX3Byb3BlcnR5XHJcbiAgICBkZWYgbmFtZShzZWxmKTpcclxuICAgICAgICAiIiJUaGUgbGFzdCBwYXJ0IG9mIHBhcnRzLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9VTlFVT1RFUihzZWxmLnJhd19uYW1lKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfdmFsaWRhdGVfYXV0aG9yaXR5X3VyaV9hYnNfcGF0aChob3N0LCBwYXRoKTpcclxuICAgICAgICAiIiJFbnN1cmUgdGhhdCBwYXRoIGluIFVSTCB3aXRoIGF1dGhvcml0eSBzdGFydHMgd2l0aCBhIGxlYWRpbmcgc2xhc2guXHJcblxyXG4gICAgICAgIFJhaXNlIFZhbHVlRXJyb3IgaWYgbm90LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIGxlbihob3N0KSA+IDAgYW5kIGxlbihwYXRoKSA+IDAgYW5kIG5vdCBwYXRoLnN0YXJ0c3dpdGgoIi8iKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJQYXRoIGluIGEgVVJMIHdpdGggYXV0aG9yaXR5IHNob3VsZCBzdGFydCB3aXRoIGEgc2xhc2ggKFwnL1wnKSBpZiBzZXQiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBfbm9ybWFsaXplX3BhdGgoY2xzLCBwYXRoKTpcclxuICAgICAgICAjIERyb3AgXCcuXCcgYW5kIFwnLi5cJyBmcm9tIHBhdGhcclxuXHJcbiAgICAgICAgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCIvIilcclxuICAgICAgICByZXNvbHZlZF9wYXRoID0gW11cclxuXHJcbiAgICAgICAgZm9yIHNlZyBpbiBzZWdtZW50czpcclxuICAgICAgICAgICAgaWYgc2VnID09ICIuLiI6XHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWRfcGF0aC5wb3AoKVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgIyBpZ25vcmUgYW55IC4uIHNlZ21lbnRzIHRoYXQgd291bGQgb3RoZXJ3aXNlIGNhdXNlIGFuXHJcbiAgICAgICAgICAgICAgICAgICAgIyBJbmRleEVycm9yIHdoZW4gcG9wcGVkIGZyb20gcmVzb2x2ZWRfcGF0aCBpZlxyXG4gICAgICAgICAgICAgICAgICAgICMgcmVzb2x2aW5nIGZvciByZmMzOTg2XHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc1xyXG4gICAgICAgICAgICBlbGlmIHNlZyA9PSAiLiI6XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZWRfcGF0aC5hcHBlbmQoc2VnKVxyXG5cclxuICAgICAgICBpZiBzZWdtZW50c1stMV0gaW4gKCIuIiwgIi4uIik6XHJcbiAgICAgICAgICAgICMgZG8gc29tZSBwb3N0LXByb2Nlc3NpbmcgaGVyZS5cclxuICAgICAgICAgICAgIyBpZiB0aGUgbGFzdCBzZWdtZW50IHdhcyBhIHJlbGF0aXZlIGRpcixcclxuICAgICAgICAgICAgIyB0aGVuIHdlIG5lZWQgdG8gYXBwZW5kIHRoZSB0cmFpbGluZyBcJy9cJ1xyXG4gICAgICAgICAgICByZXNvbHZlZF9wYXRoLmFwcGVuZCgiIilcclxuXHJcbiAgICAgICAgcmV0dXJuICIvIi5qb2luKHJlc29sdmVkX3BhdGgpXHJcblxyXG4gICAgaWYgc3lzLnZlcnNpb25faW5mbyA+PSAoMywgNyk6XHJcblxyXG4gICAgICAgIEBjbGFzc21ldGhvZFxyXG4gICAgICAgIGRlZiBfZW5jb2RlX2hvc3QoY2xzLCBob3N0LCBodW1hbj1GYWxzZSk6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGlwLCBzZXAsIHpvbmUgPSBob3N0LnBhcnRpdGlvbigiJSIpXHJcbiAgICAgICAgICAgICAgICBpcCA9IGlwX2FkZHJlc3MoaXApXHJcbiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgaG9zdCA9IGhvc3QubG93ZXIoKVxyXG4gICAgICAgICAgICAgICAgIyBJRE5BIGVuY29kaW5nIGlzIHNsb3csXHJcbiAgICAgICAgICAgICAgICAjIHNraXAgaXQgZm9yIEFTQ0lJLW9ubHkgc3RyaW5nc1xyXG4gICAgICAgICAgICAgICAgIyBEb25cJ3QgbW92ZSB0aGUgY2hlY2sgaW50byBfaWRuYV9lbmNvZGUoKSBoZWxwZXJcclxuICAgICAgICAgICAgICAgICMgdG8gcmVkdWNlIHRoZSBjYWNoZSBzaXplXHJcbiAgICAgICAgICAgICAgICBpZiBodW1hbiBvciBob3N0LmlzYXNjaWkoKTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG9zdFxyXG4gICAgICAgICAgICAgICAgaG9zdCA9IF9pZG5hX2VuY29kZShob3N0KVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgaG9zdCA9IGlwLmNvbXByZXNzZWRcclxuICAgICAgICAgICAgICAgIGlmIHNlcDpcclxuICAgICAgICAgICAgICAgICAgICBob3N0ICs9ICIlIiArIHpvbmVcclxuICAgICAgICAgICAgICAgIGlmIGlwLnZlcnNpb24gPT0gNjpcclxuICAgICAgICAgICAgICAgICAgICBob3N0ID0gIlsiICsgaG9zdCArICJdIlxyXG4gICAgICAgICAgICByZXR1cm4gaG9zdFxyXG5cclxuICAgIGVsc2U6XHJcbiAgICAgICAgIyB3b3JrIGFyb3VuZCBmb3IgbWlzc2luZyBzdHIuaXNhc2NpaSgpIGluIFB5dGhvbiA8PSAzLjZcclxuICAgICAgICBAY2xhc3NtZXRob2RcclxuICAgICAgICBkZWYgX2VuY29kZV9ob3N0KGNscywgaG9zdCwgaHVtYW49RmFsc2UpOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBpcCwgc2VwLCB6b25lID0gaG9zdC5wYXJ0aXRpb24oIiUiKVxyXG4gICAgICAgICAgICAgICAgaXAgPSBpcF9hZGRyZXNzKGlwKVxyXG4gICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcclxuICAgICAgICAgICAgICAgIGhvc3QgPSBob3N0Lmxvd2VyKClcclxuICAgICAgICAgICAgICAgIGlmIGh1bWFuOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBob3N0XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIGNoYXIgaW4gaG9zdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiBjaGFyID4gIlxceDdmIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhvc3RcclxuICAgICAgICAgICAgICAgIGhvc3QgPSBfaWRuYV9lbmNvZGUoaG9zdClcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGhvc3QgPSBpcC5jb21wcmVzc2VkXHJcbiAgICAgICAgICAgICAgICBpZiBzZXA6XHJcbiAgICAgICAgICAgICAgICAgICAgaG9zdCArPSAiJSIgKyB6b25lXHJcbiAgICAgICAgICAgICAgICBpZiBpcC52ZXJzaW9uID09IDY6XHJcbiAgICAgICAgICAgICAgICAgICAgaG9zdCA9ICJbIiArIGhvc3QgKyAiXSJcclxuICAgICAgICAgICAgcmV0dXJuIGhvc3RcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBfbWFrZV9uZXRsb2MoXHJcbiAgICAgICAgY2xzLCB1c2VyLCBwYXNzd29yZCwgaG9zdCwgcG9ydCwgZW5jb2RlPUZhbHNlLCBlbmNvZGVfaG9zdD1UcnVlLCByZXF1b3RlPUZhbHNlXHJcbiAgICApOlxyXG4gICAgICAgIHF1b3RlciA9IGNscy5fUkVRVU9URVIgaWYgcmVxdW90ZSBlbHNlIGNscy5fUVVPVEVSXHJcbiAgICAgICAgaWYgZW5jb2RlX2hvc3Q6XHJcbiAgICAgICAgICAgIHJldCA9IGNscy5fZW5jb2RlX2hvc3QoaG9zdClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXQgPSBob3N0XHJcbiAgICAgICAgaWYgcG9ydDpcclxuICAgICAgICAgICAgcmV0ID0gcmV0ICsgIjoiICsgc3RyKHBvcnQpXHJcbiAgICAgICAgaWYgcGFzc3dvcmQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIG5vdCB1c2VyOlxyXG4gICAgICAgICAgICAgICAgdXNlciA9ICIiXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBpZiBlbmNvZGU6XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlciA9IHF1b3Rlcih1c2VyKVxyXG4gICAgICAgICAgICBpZiBlbmNvZGU6XHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZCA9IHF1b3RlcihwYXNzd29yZClcclxuICAgICAgICAgICAgdXNlciA9IHVzZXIgKyAiOiIgKyBwYXNzd29yZFxyXG4gICAgICAgIGVsaWYgdXNlciBhbmQgZW5jb2RlOlxyXG4gICAgICAgICAgICB1c2VyID0gcXVvdGVyKHVzZXIpXHJcbiAgICAgICAgaWYgdXNlcjpcclxuICAgICAgICAgICAgcmV0ID0gdXNlciArICJAIiArIHJldFxyXG4gICAgICAgIHJldHVybiByZXRcclxuXHJcbiAgICBkZWYgd2l0aF9zY2hlbWUoc2VsZiwgc2NoZW1lKTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBuZXcgVVJMIHdpdGggc2NoZW1lIHJlcGxhY2VkLiIiIlxyXG4gICAgICAgICMgTi5CLiBkb2VzblwndCBjbGVhbnVwIHF1ZXJ5L2ZyYWdtZW50XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc2NoZW1lLCBzdHIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkludmFsaWQgc2NoZW1lIHR5cGUiKVxyXG4gICAgICAgIGlmIG5vdCBzZWxmLmlzX2Fic29sdXRlKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInNjaGVtZSByZXBsYWNlbWVudCBpcyBub3QgYWxsb3dlZCBmb3IgcmVsYXRpdmUgVVJMcyIpXHJcbiAgICAgICAgcmV0dXJuIFVSTChzZWxmLl92YWwuX3JlcGxhY2Uoc2NoZW1lPXNjaGVtZS5sb3dlcigpKSwgZW5jb2RlZD1UcnVlKVxyXG5cclxuICAgIGRlZiB3aXRoX3VzZXIoc2VsZiwgdXNlcik6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgbmV3IFVSTCB3aXRoIHVzZXIgcmVwbGFjZWQuXHJcblxyXG4gICAgICAgIEF1dG9lbmNvZGUgdXNlciBpZiBuZWVkZWQuXHJcblxyXG4gICAgICAgIENsZWFyIHVzZXIvcGFzc3dvcmQgaWYgdXNlciBpcyBOb25lLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICAjIE4uQi4gZG9lc25cJ3QgY2xlYW51cCBxdWVyeS9mcmFnbWVudFxyXG4gICAgICAgIHZhbCA9IHNlbGYuX3ZhbFxyXG4gICAgICAgIGlmIHVzZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcGFzc3dvcmQgPSBOb25lXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHVzZXIsIHN0cik6XHJcbiAgICAgICAgICAgIHVzZXIgPSBzZWxmLl9RVU9URVIodXNlcilcclxuICAgICAgICAgICAgcGFzc3dvcmQgPSB2YWwucGFzc3dvcmRcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkludmFsaWQgdXNlciB0eXBlIilcclxuICAgICAgICBpZiBub3Qgc2VsZi5pc19hYnNvbHV0ZSgpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ1c2VyIHJlcGxhY2VtZW50IGlzIG5vdCBhbGxvd2VkIGZvciByZWxhdGl2ZSBVUkxzIilcclxuICAgICAgICByZXR1cm4gVVJMKFxyXG4gICAgICAgICAgICBzZWxmLl92YWwuX3JlcGxhY2UoXHJcbiAgICAgICAgICAgICAgICBuZXRsb2M9c2VsZi5fbWFrZV9uZXRsb2ModXNlciwgcGFzc3dvcmQsIHZhbC5ob3N0bmFtZSwgdmFsLnBvcnQpXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIGVuY29kZWQ9VHJ1ZSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHdpdGhfcGFzc3dvcmQoc2VsZiwgcGFzc3dvcmQpOlxyXG4gICAgICAgICIiIlJldHVybiBhIG5ldyBVUkwgd2l0aCBwYXNzd29yZCByZXBsYWNlZC5cclxuXHJcbiAgICAgICAgQXV0b2VuY29kZSBwYXNzd29yZCBpZiBuZWVkZWQuXHJcblxyXG4gICAgICAgIENsZWFyIHBhc3N3b3JkIGlmIGFyZ3VtZW50IGlzIE5vbmUuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgICMgTi5CLiBkb2VzblwndCBjbGVhbnVwIHF1ZXJ5L2ZyYWdtZW50XHJcbiAgICAgICAgaWYgcGFzc3dvcmQgaXMgTm9uZTpcclxuICAgICAgICAgICAgcGFzc1xyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShwYXNzd29yZCwgc3RyKTpcclxuICAgICAgICAgICAgcGFzc3dvcmQgPSBzZWxmLl9RVU9URVIocGFzc3dvcmQpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJJbnZhbGlkIHBhc3N3b3JkIHR5cGUiKVxyXG4gICAgICAgIGlmIG5vdCBzZWxmLmlzX2Fic29sdXRlKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInBhc3N3b3JkIHJlcGxhY2VtZW50IGlzIG5vdCBhbGxvd2VkIGZvciByZWxhdGl2ZSBVUkxzIilcclxuICAgICAgICB2YWwgPSBzZWxmLl92YWxcclxuICAgICAgICByZXR1cm4gVVJMKFxyXG4gICAgICAgICAgICBzZWxmLl92YWwuX3JlcGxhY2UoXHJcbiAgICAgICAgICAgICAgICBuZXRsb2M9c2VsZi5fbWFrZV9uZXRsb2ModmFsLnVzZXJuYW1lLCBwYXNzd29yZCwgdmFsLmhvc3RuYW1lLCB2YWwucG9ydClcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgZW5jb2RlZD1UcnVlLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgd2l0aF9ob3N0KHNlbGYsIGhvc3QpOlxyXG4gICAgICAgICIiIlJldHVybiBhIG5ldyBVUkwgd2l0aCBob3N0IHJlcGxhY2VkLlxyXG5cclxuICAgICAgICBBdXRvZW5jb2RlIGhvc3QgaWYgbmVlZGVkLlxyXG5cclxuICAgICAgICBDaGFuZ2luZyBob3N0IGZvciByZWxhdGl2ZSBVUkxzIGlzIG5vdCBhbGxvd2VkLCB1c2UgLmpvaW4oKVxyXG4gICAgICAgIGluc3RlYWQuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgICMgTi5CLiBkb2VzblwndCBjbGVhbnVwIHF1ZXJ5L2ZyYWdtZW50XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoaG9zdCwgc3RyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJJbnZhbGlkIGhvc3QgdHlwZSIpXHJcbiAgICAgICAgaWYgbm90IHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaG9zdCByZXBsYWNlbWVudCBpcyBub3QgYWxsb3dlZCBmb3IgcmVsYXRpdmUgVVJMcyIpXHJcbiAgICAgICAgaWYgbm90IGhvc3Q6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImhvc3QgcmVtb3ZpbmcgaXMgbm90IGFsbG93ZWQiKVxyXG4gICAgICAgIHZhbCA9IHNlbGYuX3ZhbFxyXG4gICAgICAgIHJldHVybiBVUkwoXHJcbiAgICAgICAgICAgIHNlbGYuX3ZhbC5fcmVwbGFjZShcclxuICAgICAgICAgICAgICAgIG5ldGxvYz1zZWxmLl9tYWtlX25ldGxvYyh2YWwudXNlcm5hbWUsIHZhbC5wYXNzd29yZCwgaG9zdCwgdmFsLnBvcnQpXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIGVuY29kZWQ9VHJ1ZSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHdpdGhfcG9ydChzZWxmLCBwb3J0KTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBuZXcgVVJMIHdpdGggcG9ydCByZXBsYWNlZC5cclxuXHJcbiAgICAgICAgQ2xlYXIgcG9ydCB0byBkZWZhdWx0IGlmIE5vbmUgaXMgcGFzc2VkLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICAjIE4uQi4gZG9lc25cJ3QgY2xlYW51cCBxdWVyeS9mcmFnbWVudFxyXG4gICAgICAgIGlmIHBvcnQgaXMgbm90IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKHBvcnQsIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigicG9ydCBzaG91bGQgYmUgaW50IG9yIE5vbmUsIGdvdCB7fSIuZm9ybWF0KHR5cGUocG9ydCkpKVxyXG4gICAgICAgIGlmIG5vdCBzZWxmLmlzX2Fic29sdXRlKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInBvcnQgcmVwbGFjZW1lbnQgaXMgbm90IGFsbG93ZWQgZm9yIHJlbGF0aXZlIFVSTHMiKVxyXG4gICAgICAgIHZhbCA9IHNlbGYuX3ZhbFxyXG4gICAgICAgIHJldHVybiBVUkwoXHJcbiAgICAgICAgICAgIHNlbGYuX3ZhbC5fcmVwbGFjZShcclxuICAgICAgICAgICAgICAgIG5ldGxvYz1zZWxmLl9tYWtlX25ldGxvYyh2YWwudXNlcm5hbWUsIHZhbC5wYXNzd29yZCwgdmFsLmhvc3RuYW1lLCBwb3J0KVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBlbmNvZGVkPVRydWUsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiB3aXRoX3BhdGgoc2VsZiwgcGF0aCwgKiwgZW5jb2RlZD1GYWxzZSk6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgbmV3IFVSTCB3aXRoIHBhdGggcmVwbGFjZWQuIiIiXHJcbiAgICAgICAgaWYgbm90IGVuY29kZWQ6XHJcbiAgICAgICAgICAgIHBhdGggPSBzZWxmLl9QQVRIX1FVT1RFUihwYXRoKVxyXG4gICAgICAgICAgICBpZiBzZWxmLmlzX2Fic29sdXRlKCk6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gc2VsZi5fbm9ybWFsaXplX3BhdGgocGF0aClcclxuICAgICAgICBpZiBsZW4ocGF0aCkgPiAwIGFuZCBwYXRoWzBdICE9ICIvIjpcclxuICAgICAgICAgICAgcGF0aCA9ICIvIiArIHBhdGhcclxuICAgICAgICByZXR1cm4gVVJMKHNlbGYuX3ZhbC5fcmVwbGFjZShwYXRoPXBhdGgsIHF1ZXJ5PSIiLCBmcmFnbWVudD0iIiksIGVuY29kZWQ9VHJ1ZSlcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBfcXVlcnlfc2VxX3BhaXJzKGNscywgcXVvdGVyLCBwYWlycyk6XHJcbiAgICAgICAgZm9yIGtleSwgdmFsIGluIHBhaXJzOlxyXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbCwgKGxpc3QsIHR1cGxlKSk6XHJcbiAgICAgICAgICAgICAgICBmb3IgdiBpbiB2YWw6XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcXVvdGVyKGtleSkgKyAiPSIgKyBxdW90ZXIoY2xzLl9xdWVyeV92YXIodikpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICB5aWVsZCBxdW90ZXIoa2V5KSArICI9IiArIHF1b3RlcihjbHMuX3F1ZXJ5X3Zhcih2YWwpKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfcXVlcnlfdmFyKHYpOlxyXG4gICAgICAgIGNscyA9IHR5cGUodilcclxuICAgICAgICBpZiBpc3N1YmNsYXNzKGNscywgc3RyKTpcclxuICAgICAgICAgICAgcmV0dXJuIHZcclxuICAgICAgICBpZiBpc3N1YmNsYXNzKGNscywgZmxvYXQpOlxyXG4gICAgICAgICAgICBpZiBtYXRoLmlzaW5mKHYpOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZmxvYXQoXCdpbmZcJykgaXMgbm90IHN1cHBvcnRlZCIpXHJcbiAgICAgICAgICAgIGlmIG1hdGguaXNuYW4odik6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJmbG9hdChcJ25hblwnKSBpcyBub3Qgc3VwcG9ydGVkIilcclxuICAgICAgICAgICAgcmV0dXJuIHN0cihmbG9hdCh2KSlcclxuICAgICAgICBpZiBpc3N1YmNsYXNzKGNscywgaW50KSBhbmQgY2xzIGlzIG5vdCBib29sOlxyXG4gICAgICAgICAgICByZXR1cm4gc3RyKGludCh2KSlcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICJJbnZhbGlkIHZhcmlhYmxlIHR5cGU6IHZhbHVlICJcclxuICAgICAgICAgICAgInNob3VsZCBiZSBzdHIsIGludCBvciBmbG9hdCwgZ290IHshcn0gIlxyXG4gICAgICAgICAgICAib2YgdHlwZSB7fSIuZm9ybWF0KHYsIGNscylcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9nZXRfc3RyX3F1ZXJ5KHNlbGYsICphcmdzLCAqKmt3YXJncyk6XHJcbiAgICAgICAgaWYga3dhcmdzOlxyXG4gICAgICAgICAgICBpZiBsZW4oYXJncykgPiAwOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiRWl0aGVyIGt3YXJncyBvciBzaW5nbGUgcXVlcnkgcGFyYW1ldGVyIG11c3QgYmUgcHJlc2VudCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgcXVlcnkgPSBrd2FyZ3NcclxuICAgICAgICBlbGlmIGxlbihhcmdzKSA9PSAxOlxyXG4gICAgICAgICAgICBxdWVyeSA9IGFyZ3NbMF1cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJFaXRoZXIga3dhcmdzIG9yIHNpbmdsZSBxdWVyeSBwYXJhbWV0ZXIgbXVzdCBiZSBwcmVzZW50IilcclxuXHJcbiAgICAgICAgaWYgcXVlcnkgaXMgTm9uZTpcclxuICAgICAgICAgICAgcXVlcnkgPSAiIlxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShxdWVyeSwgTWFwcGluZyk6XHJcbiAgICAgICAgICAgIHF1b3RlciA9IHNlbGYuX1FVRVJZX1BBUlRfUVVPVEVSXHJcbiAgICAgICAgICAgIHF1ZXJ5ID0gIiYiLmpvaW4oc2VsZi5fcXVlcnlfc2VxX3BhaXJzKHF1b3RlciwgcXVlcnkuaXRlbXMoKSkpXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHF1ZXJ5LCBzdHIpOlxyXG4gICAgICAgICAgICBxdWVyeSA9IHNlbGYuX1FVRVJZX1FVT1RFUihxdWVyeSlcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UocXVlcnksIChieXRlcywgYnl0ZWFycmF5LCBtZW1vcnl2aWV3KSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJJbnZhbGlkIHF1ZXJ5IHR5cGU6IGJ5dGVzLCBieXRlYXJyYXkgYW5kIG1lbW9yeXZpZXcgYXJlIGZvcmJpZGRlbiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShxdWVyeSwgU2VxdWVuY2UpOlxyXG4gICAgICAgICAgICBxdW90ZXIgPSBzZWxmLl9RVUVSWV9QQVJUX1FVT1RFUlxyXG4gICAgICAgICAgICAjIFdlIGRvblwndCBleHBlY3Qgc2VxdWVuY2UgdmFsdWVzIGlmIHdlXCdyZSBnaXZlbiBhIGxpc3Qgb2YgcGFpcnNcclxuICAgICAgICAgICAgIyBhbHJlYWR5OyBvbmx5IG1hcHBpbmdzIGxpa2UgYnVpbHRpbiBgZGljdGAgd2hpY2ggY2FuXCd0IGhhdmUgdGhlXHJcbiAgICAgICAgICAgICMgc2FtZSBrZXkgcG9pbnRpbmcgdG8gbXVsdGlwbGUgdmFsdWVzIGFyZSBhbGxvd2VkIHRvIHVzZVxyXG4gICAgICAgICAgICAjIGBfcXVlcnlfc2VxX3BhaXJzYC5cclxuICAgICAgICAgICAgcXVlcnkgPSAiJiIuam9pbihcclxuICAgICAgICAgICAgICAgIHF1b3RlcihrKSArICI9IiArIHF1b3RlcihzZWxmLl9xdWVyeV92YXIodikpIGZvciBrLCB2IGluIHF1ZXJ5XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiSW52YWxpZCBxdWVyeSB0eXBlOiBvbmx5IHN0ciwgbWFwcGluZyBvciAiXHJcbiAgICAgICAgICAgICAgICAic2VxdWVuY2Ugb2YgKGtleSwgdmFsdWUpIHBhaXJzIGlzIGFsbG93ZWQiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIHF1ZXJ5XHJcblxyXG4gICAgZGVmIHdpdGhfcXVlcnkoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBuZXcgVVJMIHdpdGggcXVlcnkgcGFydCByZXBsYWNlZC5cclxuXHJcbiAgICAgICAgQWNjZXB0cyBhbnkgTWFwcGluZyAoZS5nLiBkaWN0LCBtdWx0aWRpY3QuTXVsdGlEaWN0IGluc3RhbmNlcylcclxuICAgICAgICBvciBzdHIsIGF1dG9lbmNvZGUgdGhlIGFyZ3VtZW50IGlmIG5lZWRlZC5cclxuXHJcbiAgICAgICAgQSBzZXF1ZW5jZSBvZiAoa2V5LCB2YWx1ZSkgcGFpcnMgaXMgc3VwcG9ydGVkIGFzIHdlbGwuXHJcblxyXG4gICAgICAgIEl0IGFsc28gY2FuIHRha2UgYW4gYXJiaXRyYXJ5IG51bWJlciBvZiBrZXl3b3JkIGFyZ3VtZW50cy5cclxuXHJcbiAgICAgICAgQ2xlYXIgcXVlcnkgaWYgTm9uZSBpcyBwYXNzZWQuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgICMgTi5CLiBkb2VzblwndCBjbGVhbnVwIHF1ZXJ5L2ZyYWdtZW50XHJcblxyXG4gICAgICAgIG5ld19xdWVyeSA9IHNlbGYuX2dldF9zdHJfcXVlcnkoKmFyZ3MsICoqa3dhcmdzKVxyXG4gICAgICAgIHJldHVybiBVUkwoXHJcbiAgICAgICAgICAgIHNlbGYuX3ZhbC5fcmVwbGFjZShwYXRoPXNlbGYuX3ZhbC5wYXRoLCBxdWVyeT1uZXdfcXVlcnkpLCBlbmNvZGVkPVRydWVcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHVwZGF0ZV9xdWVyeShzZWxmLCAqYXJncywgKiprd2FyZ3MpOlxyXG4gICAgICAgICIiIlJldHVybiBhIG5ldyBVUkwgd2l0aCBxdWVyeSBwYXJ0IHVwZGF0ZWQuIiIiXHJcbiAgICAgICAgcyA9IHNlbGYuX2dldF9zdHJfcXVlcnkoKmFyZ3MsICoqa3dhcmdzKVxyXG4gICAgICAgIG5ld19xdWVyeSA9IE11bHRpRGljdChwYXJzZV9xc2wocywga2VlcF9ibGFua192YWx1ZXM9VHJ1ZSkpXHJcbiAgICAgICAgcXVlcnkgPSBNdWx0aURpY3Qoc2VsZi5xdWVyeSlcclxuICAgICAgICBxdWVyeS51cGRhdGUobmV3X3F1ZXJ5KVxyXG5cclxuICAgICAgICByZXR1cm4gVVJMKHNlbGYuX3ZhbC5fcmVwbGFjZShxdWVyeT1zZWxmLl9nZXRfc3RyX3F1ZXJ5KHF1ZXJ5KSksIGVuY29kZWQ9VHJ1ZSlcclxuXHJcbiAgICBkZWYgd2l0aF9mcmFnbWVudChzZWxmLCBmcmFnbWVudCk6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgbmV3IFVSTCB3aXRoIGZyYWdtZW50IHJlcGxhY2VkLlxyXG5cclxuICAgICAgICBBdXRvZW5jb2RlIGZyYWdtZW50IGlmIG5lZWRlZC5cclxuXHJcbiAgICAgICAgQ2xlYXIgZnJhZ21lbnQgdG8gZGVmYXVsdCBpZiBOb25lIGlzIHBhc3NlZC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgIyBOLkIuIGRvZXNuXCd0IGNsZWFudXAgcXVlcnkvZnJhZ21lbnRcclxuICAgICAgICBpZiBmcmFnbWVudCBpcyBOb25lOlxyXG4gICAgICAgICAgICByYXdfZnJhZ21lbnQgPSAiIlxyXG4gICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2UoZnJhZ21lbnQsIHN0cik6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiSW52YWxpZCBmcmFnbWVudCB0eXBlIilcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYXdfZnJhZ21lbnQgPSBzZWxmLl9GUkFHTUVOVF9RVU9URVIoZnJhZ21lbnQpXHJcbiAgICAgICAgaWYgc2VsZi5yYXdfZnJhZ21lbnQgPT0gcmF3X2ZyYWdtZW50OlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZlxyXG4gICAgICAgIHJldHVybiBVUkwoc2VsZi5fdmFsLl9yZXBsYWNlKGZyYWdtZW50PXJhd19mcmFnbWVudCksIGVuY29kZWQ9VHJ1ZSlcclxuXHJcbiAgICBkZWYgd2l0aF9uYW1lKHNlbGYsIG5hbWUpOlxyXG4gICAgICAgICIiIlJldHVybiBhIG5ldyBVUkwgd2l0aCBuYW1lIChsYXN0IHBhcnQgb2YgcGF0aCkgcmVwbGFjZWQuXHJcblxyXG4gICAgICAgIFF1ZXJ5IGFuZCBmcmFnbWVudCBwYXJ0cyBhcmUgY2xlYW5lZCB1cC5cclxuXHJcbiAgICAgICAgTmFtZSBpcyBlbmNvZGVkIGlmIG5lZWRlZC5cclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgIyBOLkIuIERPRVMgY2xlYW51cCBxdWVyeS9mcmFnbWVudFxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG5hbWUsIHN0cik6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiSW52YWxpZCBuYW1lIHR5cGUiKVxyXG4gICAgICAgIGlmICIvIiBpbiBuYW1lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJTbGFzaCBpbiBuYW1lIGlzIG5vdCBhbGxvd2VkIilcclxuICAgICAgICBuYW1lID0gc2VsZi5fUEFUSF9RVU9URVIobmFtZSlcclxuICAgICAgICBpZiBuYW1lIGluICgiLiIsICIuLiIpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCIuIGFuZCAuLiB2YWx1ZXMgYXJlIGZvcmJpZGRlbiIpXHJcbiAgICAgICAgcGFydHMgPSBsaXN0KHNlbGYucmF3X3BhcnRzKVxyXG4gICAgICAgIGlmIHNlbGYuaXNfYWJzb2x1dGUoKTpcclxuICAgICAgICAgICAgaWYgbGVuKHBhcnRzKSA9PSAxOlxyXG4gICAgICAgICAgICAgICAgcGFydHMuYXBwZW5kKG5hbWUpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBwYXJ0c1stMV0gPSBuYW1lXHJcbiAgICAgICAgICAgIHBhcnRzWzBdID0gIiIgICMgcmVwbGFjZSBsZWFkaW5nIFwnL1wnXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcGFydHNbLTFdID0gbmFtZVxyXG4gICAgICAgICAgICBpZiBwYXJ0c1swXSA9PSAiLyI6XHJcbiAgICAgICAgICAgICAgICBwYXJ0c1swXSA9ICIiICAjIHJlcGxhY2UgbGVhZGluZyBcJy9cJ1xyXG4gICAgICAgIHJldHVybiBVUkwoXHJcbiAgICAgICAgICAgIHNlbGYuX3ZhbC5fcmVwbGFjZShwYXRoPSIvIi5qb2luKHBhcnRzKSwgcXVlcnk9IiIsIGZyYWdtZW50PSIiKSxcclxuICAgICAgICAgICAgZW5jb2RlZD1UcnVlLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgam9pbihzZWxmLCB1cmwpOlxyXG4gICAgICAgICIiIkpvaW4gVVJMc1xyXG5cclxuICAgICAgICBDb25zdHJ1Y3QgYSBmdWxsIChceGUyXHg4MFx4OWNhYnNvbHV0ZVx4ZTJceDgwXHg5ZCkgVVJMIGJ5IGNvbWJpbmluZyBhIFx4ZTJceDgwXHg5Y2Jhc2UgVVJMXHhlMlx4ODBceDlkXHJcbiAgICAgICAgKHNlbGYpIHdpdGggYW5vdGhlciBVUkwgKHVybCkuXHJcblxyXG4gICAgICAgIEluZm9ybWFsbHksIHRoaXMgdXNlcyBjb21wb25lbnRzIG9mIHRoZSBiYXNlIFVSTCwgaW5cclxuICAgICAgICBwYXJ0aWN1bGFyIHRoZSBhZGRyZXNzaW5nIHNjaGVtZSwgdGhlIG5ldHdvcmsgbG9jYXRpb24gYW5kXHJcbiAgICAgICAgKHBhcnQgb2YpIHRoZSBwYXRoLCB0byBwcm92aWRlIG1pc3NpbmcgY29tcG9uZW50cyBpbiB0aGVcclxuICAgICAgICByZWxhdGl2ZSBVUkwuXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgICMgU2VlIGRvY3MgZm9yIHVybGxpYi5wYXJzZS51cmxqb2luXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodXJsLCBVUkwpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInVybCBzaG91bGQgYmUgVVJMIilcclxuICAgICAgICByZXR1cm4gVVJMKHVybGpvaW4oc3RyKHNlbGYpLCBzdHIodXJsKSksIGVuY29kZWQ9VHJ1ZSlcclxuXHJcbiAgICBkZWYgaHVtYW5fcmVwcihzZWxmKTpcclxuICAgICAgICAiIiJSZXR1cm4gZGVjb2RlZCBodW1hbiByZWFkYWJsZSBzdHJpbmcgZm9yIFVSTCByZXByZXNlbnRhdGlvbi4iIiJcclxuICAgICAgICB1c2VyID0gX2h1bWFuX3F1b3RlKHNlbGYudXNlciwgIiMvOj9AIilcclxuICAgICAgICBwYXNzd29yZCA9IF9odW1hbl9xdW90ZShzZWxmLnBhc3N3b3JkLCAiIy86P0AiKVxyXG4gICAgICAgIGhvc3QgPSBzZWxmLmhvc3RcclxuICAgICAgICBpZiBob3N0OlxyXG4gICAgICAgICAgICBob3N0ID0gc2VsZi5fZW5jb2RlX2hvc3Qoc2VsZi5ob3N0LCBodW1hbj1UcnVlKVxyXG4gICAgICAgIHBhdGggPSBfaHVtYW5fcXVvdGUoc2VsZi5wYXRoLCAiIz8iKVxyXG4gICAgICAgIHF1ZXJ5X3N0cmluZyA9ICImIi5qb2luKFxyXG4gICAgICAgICAgICAie309e30iLmZvcm1hdChfaHVtYW5fcXVvdGUoaywgIiMmKzs9IiksIF9odW1hbl9xdW90ZSh2LCAiIyYrOz0iKSlcclxuICAgICAgICAgICAgZm9yIGssIHYgaW4gc2VsZi5xdWVyeS5pdGVtcygpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGZyYWdtZW50ID0gX2h1bWFuX3F1b3RlKHNlbGYuZnJhZ21lbnQsICIiKVxyXG4gICAgICAgIHJldHVybiB1cmx1bnNwbGl0KFxyXG4gICAgICAgICAgICBTcGxpdFJlc3VsdChcclxuICAgICAgICAgICAgICAgIHNlbGYuc2NoZW1lLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbWFrZV9uZXRsb2MoXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcixcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICAgICBob3N0LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3ZhbC5wb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuY29kZV9ob3N0PUZhbHNlLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIHBhdGgsXHJcbiAgICAgICAgICAgICAgICBxdWVyeV9zdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudCxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuXHJcblxyXG5kZWYgX2h1bWFuX3F1b3RlKHMsIHVuc2FmZSk6XHJcbiAgICBpZiBub3QgczpcclxuICAgICAgICByZXR1cm4gc1xyXG4gICAgZm9yIGMgaW4gIiUiICsgdW5zYWZlOlxyXG4gICAgICAgIGlmIGMgaW4gczpcclxuICAgICAgICAgICAgcyA9IHMucmVwbGFjZShjLCAiJXs6MDJYfSIuZm9ybWF0KG9yZChjKSkpXHJcbiAgICBpZiBzLmlzcHJpbnRhYmxlKCk6XHJcbiAgICAgICAgcmV0dXJuIHNcclxuICAgIHJldHVybiAiIi5qb2luKGMgaWYgYy5pc3ByaW50YWJsZSgpIGVsc2UgcXVvdGUoYykgZm9yIGMgaW4gcylcclxuXHJcblxyXG5fTUFYQ0FDSEUgPSAyNTZcclxuXHJcblxyXG5AZnVuY3Rvb2xzLmxydV9jYWNoZShfTUFYQ0FDSEUpXHJcbmRlZiBfaWRuYV9kZWNvZGUocmF3KTpcclxuICAgIHRyeTpcclxuICAgICAgICByZXR1cm4gaWRuYS5kZWNvZGUocmF3LmVuY29kZSgiYXNjaWkiKSlcclxuICAgIGV4Y2VwdCBVbmljb2RlRXJyb3I6ICAjIGUuZy4gXCc6OjFcJ1xyXG4gICAgICAgIHJldHVybiByYXcuZW5jb2RlKCJhc2NpaSIpLmRlY29kZSgiaWRuYSIpXHJcblxyXG5cclxuQGZ1bmN0b29scy5scnVfY2FjaGUoX01BWENBQ0hFKVxyXG5kZWYgX2lkbmFfZW5jb2RlKGhvc3QpOlxyXG4gICAgdHJ5OlxyXG4gICAgICAgIHJldHVybiBpZG5hLmVuY29kZShob3N0LCB1dHM0Nj1UcnVlKS5kZWNvZGUoImFzY2lpIilcclxuICAgIGV4Y2VwdCBVbmljb2RlRXJyb3I6XHJcbiAgICAgICAgcmV0dXJuIGhvc3QuZW5jb2RlKCJpZG5hIikuZGVjb2RlKCJhc2NpaSIpXHJcblxyXG5cclxuQHJld3JpdGVfbW9kdWxlXHJcbmRlZiBjYWNoZV9jbGVhcigpOlxyXG4gICAgX2lkbmFfZGVjb2RlLmNhY2hlX2NsZWFyKClcclxuICAgIF9pZG5hX2VuY29kZS5jYWNoZV9jbGVhcigpXHJcblxyXG5cclxuQHJld3JpdGVfbW9kdWxlXHJcbmRlZiBjYWNoZV9pbmZvKCk6XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgICJpZG5hX2VuY29kZSI6IF9pZG5hX2VuY29kZS5jYWNoZV9pbmZvKCksXHJcbiAgICAgICAgImlkbmFfZGVjb2RlIjogX2lkbmFfZGVjb2RlLmNhY2hlX2luZm8oKSxcclxuICAgIH1cclxuXHJcblxyXG5AcmV3cml0ZV9tb2R1bGVcclxuZGVmIGNhY2hlX2NvbmZpZ3VyZSgqLCBpZG5hX2VuY29kZV9zaXplPV9NQVhDQUNIRSwgaWRuYV9kZWNvZGVfc2l6ZT1fTUFYQ0FDSEUpOlxyXG4gICAgZ2xvYmFsIF9pZG5hX2RlY29kZSwgX2lkbmFfZW5jb2RlXHJcblxyXG4gICAgX2lkbmFfZW5jb2RlID0gZnVuY3Rvb2xzLmxydV9jYWNoZShpZG5hX2VuY29kZV9zaXplKShfaWRuYV9lbmNvZGUuX193cmFwcGVkX18pXHJcbiAgICBfaWRuYV9kZWNvZGUgPSBmdW5jdG9vbHMubHJ1X2NhY2hlKGlkbmFfZGVjb2RlX3NpemUpKF9pZG5hX2RlY29kZS5fX3dyYXBwZWRfXylcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2lkbmEvX19pbml0X18ucHknLCBiJ2Zyb20gLnBhY2thZ2VfZGF0YSBpbXBvcnQgX192ZXJzaW9uX19cbmZyb20gLmNvcmUgaW1wb3J0IChcbiAgICBJRE5BQmlkaUVycm9yLFxuICAgIElETkFFcnJvcixcbiAgICBJbnZhbGlkQ29kZXBvaW50LFxuICAgIEludmFsaWRDb2RlcG9pbnRDb250ZXh0LFxuICAgIGFsYWJlbCxcbiAgICBjaGVja19iaWRpLFxuICAgIGNoZWNrX2h5cGhlbl9vayxcbiAgICBjaGVja19pbml0aWFsX2NvbWJpbmVyLFxuICAgIGNoZWNrX2xhYmVsLFxuICAgIGNoZWNrX25mYyxcbiAgICBkZWNvZGUsXG4gICAgZW5jb2RlLFxuICAgIHVsYWJlbCxcbiAgICB1dHM0Nl9yZW1hcCxcbiAgICB2YWxpZF9jb250ZXh0aixcbiAgICB2YWxpZF9jb250ZXh0byxcbiAgICB2YWxpZF9sYWJlbF9sZW5ndGgsXG4gICAgdmFsaWRfc3RyaW5nX2xlbmd0aCxcbilcbmZyb20gLmludHJhbmdlcyBpbXBvcnQgaW50cmFuZ2VzX2NvbnRhaW5cblxuX19hbGxfXyA9IFtcbiAgICAiSUROQUJpZGlFcnJvciIsXG4gICAgIklETkFFcnJvciIsXG4gICAgIkludmFsaWRDb2RlcG9pbnQiLFxuICAgICJJbnZhbGlkQ29kZXBvaW50Q29udGV4dCIsXG4gICAgImFsYWJlbCIsXG4gICAgImNoZWNrX2JpZGkiLFxuICAgICJjaGVja19oeXBoZW5fb2siLFxuICAgICJjaGVja19pbml0aWFsX2NvbWJpbmVyIixcbiAgICAiY2hlY2tfbGFiZWwiLFxuICAgICJjaGVja19uZmMiLFxuICAgICJkZWNvZGUiLFxuICAgICJlbmNvZGUiLFxuICAgICJpbnRyYW5nZXNfY29udGFpbiIsXG4gICAgInVsYWJlbCIsXG4gICAgInV0czQ2X3JlbWFwIixcbiAgICAidmFsaWRfY29udGV4dGoiLFxuICAgICJ2YWxpZF9jb250ZXh0byIsXG4gICAgInZhbGlkX2xhYmVsX2xlbmd0aCIsXG4gICAgInZhbGlkX3N0cmluZ19sZW5ndGgiLFxuXVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2lkbmEvcGFja2FnZV9kYXRhLnB5JywgYiJfX3ZlcnNpb25fXyA9ICczLjMnXG5cbiIpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdpZG5hL2NvcmUucHknLCBiJ2Zyb20gLiBpbXBvcnQgaWRuYWRhdGFcbmltcG9ydCBiaXNlY3RcbmltcG9ydCB1bmljb2RlZGF0YVxuaW1wb3J0IHJlXG5mcm9tIHR5cGluZyBpbXBvcnQgVW5pb24sIE9wdGlvbmFsXG5mcm9tIC5pbnRyYW5nZXMgaW1wb3J0IGludHJhbmdlc19jb250YWluXG5cbl92aXJhbWFfY29tYmluaW5nX2NsYXNzID0gOVxuX2FsYWJlbF9wcmVmaXggPSBiXCd4bi0tXCdcbl91bmljb2RlX2RvdHNfcmUgPSByZS5jb21waWxlKFwnW1xcdTAwMmVcXHUzMDAyXFx1ZmYwZVxcdWZmNjFdXCcpXG5cbmNsYXNzIElETkFFcnJvcihVbmljb2RlRXJyb3IpOlxuICAgICIiIiBCYXNlIGV4Y2VwdGlvbiBmb3IgYWxsIElETkEtZW5jb2RpbmcgcmVsYXRlZCBwcm9ibGVtcyAiIiJcbiAgICBwYXNzXG5cblxuY2xhc3MgSUROQUJpZGlFcnJvcihJRE5BRXJyb3IpOlxuICAgICIiIiBFeGNlcHRpb24gd2hlbiBiaWRpcmVjdGlvbmFsIHJlcXVpcmVtZW50cyBhcmUgbm90IHNhdGlzZmllZCAiIiJcbiAgICBwYXNzXG5cblxuY2xhc3MgSW52YWxpZENvZGVwb2ludChJRE5BRXJyb3IpOlxuICAgICIiIiBFeGNlcHRpb24gd2hlbiBhIGRpc2FsbG93ZWQgb3IgdW5hbGxvY2F0ZWQgY29kZXBvaW50IGlzIHVzZWQgIiIiXG4gICAgcGFzc1xuXG5cbmNsYXNzIEludmFsaWRDb2RlcG9pbnRDb250ZXh0KElETkFFcnJvcik6XG4gICAgIiIiIEV4Y2VwdGlvbiB3aGVuIHRoZSBjb2RlcG9pbnQgaXMgbm90IHZhbGlkIGluIHRoZSBjb250ZXh0IGl0IGlzIHVzZWQgIiIiXG4gICAgcGFzc1xuXG5cbmRlZiBfY29tYmluaW5nX2NsYXNzKGNwOiBpbnQpIC0+IGludDpcbiAgICB2ID0gdW5pY29kZWRhdGEuY29tYmluaW5nKGNocihjcCkpXG4gICAgaWYgdiA9PSAwOlxuICAgICAgICBpZiBub3QgdW5pY29kZWRhdGEubmFtZShjaHIoY3ApKTpcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXCdVbmtub3duIGNoYXJhY3RlciBpbiB1bmljb2RlZGF0YVwnKVxuICAgIHJldHVybiB2XG5cbmRlZiBfaXNfc2NyaXB0KGNwOiBzdHIsIHNjcmlwdDogc3RyKSAtPiBib29sOlxuICAgIHJldHVybiBpbnRyYW5nZXNfY29udGFpbihvcmQoY3ApLCBpZG5hZGF0YS5zY3JpcHRzW3NjcmlwdF0pXG5cbmRlZiBfcHVueWNvZGUoczogc3RyKSAtPiBieXRlczpcbiAgICByZXR1cm4gcy5lbmNvZGUoXCdwdW55Y29kZVwnKVxuXG5kZWYgX3Vub3QoczogaW50KSAtPiBzdHI6XG4gICAgcmV0dXJuIFwnVSt7OjA0WH1cJy5mb3JtYXQocylcblxuXG5kZWYgdmFsaWRfbGFiZWxfbGVuZ3RoKGxhYmVsOiBVbmlvbltieXRlcywgc3RyXSkgLT4gYm9vbDpcbiAgICBpZiBsZW4obGFiZWwpID4gNjM6XG4gICAgICAgIHJldHVybiBGYWxzZVxuICAgIHJldHVybiBUcnVlXG5cblxuZGVmIHZhbGlkX3N0cmluZ19sZW5ndGgobGFiZWw6IFVuaW9uW2J5dGVzLCBzdHJdLCB0cmFpbGluZ19kb3Q6IGJvb2wpIC0+IGJvb2w6XG4gICAgaWYgbGVuKGxhYmVsKSA+ICgyNTQgaWYgdHJhaWxpbmdfZG90IGVsc2UgMjUzKTpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG4gICAgcmV0dXJuIFRydWVcblxuXG5kZWYgY2hlY2tfYmlkaShsYWJlbDogc3RyLCBjaGVja19sdHI6IGJvb2wgPSBGYWxzZSkgLT4gYm9vbDpcbiAgICAjIEJpZGkgcnVsZXMgc2hvdWxkIG9ubHkgYmUgYXBwbGllZCBpZiBzdHJpbmcgY29udGFpbnMgUlRMIGNoYXJhY3RlcnNcbiAgICBiaWRpX2xhYmVsID0gRmFsc2VcbiAgICBmb3IgKGlkeCwgY3ApIGluIGVudW1lcmF0ZShsYWJlbCwgMSk6XG4gICAgICAgIGRpcmVjdGlvbiA9IHVuaWNvZGVkYXRhLmJpZGlyZWN0aW9uYWwoY3ApXG4gICAgICAgIGlmIGRpcmVjdGlvbiA9PSBcJ1wnOlxuICAgICAgICAgICAgIyBTdHJpbmcgbGlrZWx5IGNvbWVzIGZyb20gYSBuZXdlciB2ZXJzaW9uIG9mIFVuaWNvZGVcbiAgICAgICAgICAgIHJhaXNlIElETkFCaWRpRXJyb3IoXCdVbmtub3duIGRpcmVjdGlvbmFsaXR5IGluIGxhYmVsIHt9IGF0IHBvc2l0aW9uIHt9XCcuZm9ybWF0KHJlcHIobGFiZWwpLCBpZHgpKVxuICAgICAgICBpZiBkaXJlY3Rpb24gaW4gW1wnUlwnLCBcJ0FMXCcsIFwnQU5cJ106XG4gICAgICAgICAgICBiaWRpX2xhYmVsID0gVHJ1ZVxuICAgIGlmIG5vdCBiaWRpX2xhYmVsIGFuZCBub3QgY2hlY2tfbHRyOlxuICAgICAgICByZXR1cm4gVHJ1ZVxuXG4gICAgIyBCaWRpIHJ1bGUgMVxuICAgIGRpcmVjdGlvbiA9IHVuaWNvZGVkYXRhLmJpZGlyZWN0aW9uYWwobGFiZWxbMF0pXG4gICAgaWYgZGlyZWN0aW9uIGluIFtcJ1JcJywgXCdBTFwnXTpcbiAgICAgICAgcnRsID0gVHJ1ZVxuICAgIGVsaWYgZGlyZWN0aW9uID09IFwnTFwnOlxuICAgICAgICBydGwgPSBGYWxzZVxuICAgIGVsc2U6XG4gICAgICAgIHJhaXNlIElETkFCaWRpRXJyb3IoXCdGaXJzdCBjb2RlcG9pbnQgaW4gbGFiZWwge30gbXVzdCBiZSBkaXJlY3Rpb25hbGl0eSBMLCBSIG9yIEFMXCcuZm9ybWF0KHJlcHIobGFiZWwpKSlcblxuICAgIHZhbGlkX2VuZGluZyA9IEZhbHNlXG4gICAgbnVtYmVyX3R5cGUgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cbiAgICBmb3IgKGlkeCwgY3ApIGluIGVudW1lcmF0ZShsYWJlbCwgMSk6XG4gICAgICAgIGRpcmVjdGlvbiA9IHVuaWNvZGVkYXRhLmJpZGlyZWN0aW9uYWwoY3ApXG5cbiAgICAgICAgaWYgcnRsOlxuICAgICAgICAgICAgIyBCaWRpIHJ1bGUgMlxuICAgICAgICAgICAgaWYgbm90IGRpcmVjdGlvbiBpbiBbXCdSXCcsIFwnQUxcJywgXCdBTlwnLCBcJ0VOXCcsIFwnRVNcJywgXCdDU1wnLCBcJ0VUXCcsIFwnT05cJywgXCdCTlwnLCBcJ05TTVwnXTpcbiAgICAgICAgICAgICAgICByYWlzZSBJRE5BQmlkaUVycm9yKFwnSW52YWxpZCBkaXJlY3Rpb24gZm9yIGNvZGVwb2ludCBhdCBwb3NpdGlvbiB7fSBpbiBhIHJpZ2h0LXRvLWxlZnQgbGFiZWxcJy5mb3JtYXQoaWR4KSlcbiAgICAgICAgICAgICMgQmlkaSBydWxlIDNcbiAgICAgICAgICAgIGlmIGRpcmVjdGlvbiBpbiBbXCdSXCcsIFwnQUxcJywgXCdFTlwnLCBcJ0FOXCddOlxuICAgICAgICAgICAgICAgIHZhbGlkX2VuZGluZyA9IFRydWVcbiAgICAgICAgICAgIGVsaWYgZGlyZWN0aW9uICE9IFwnTlNNXCc6XG4gICAgICAgICAgICAgICAgdmFsaWRfZW5kaW5nID0gRmFsc2VcbiAgICAgICAgICAgICMgQmlkaSBydWxlIDRcbiAgICAgICAgICAgIGlmIGRpcmVjdGlvbiBpbiBbXCdBTlwnLCBcJ0VOXCddOlxuICAgICAgICAgICAgICAgIGlmIG5vdCBudW1iZXJfdHlwZTpcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyX3R5cGUgPSBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBpZiBudW1iZXJfdHlwZSAhPSBkaXJlY3Rpb246XG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBJRE5BQmlkaUVycm9yKFwnQ2FuIG5vdCBtaXggbnVtZXJhbCB0eXBlcyBpbiBhIHJpZ2h0LXRvLWxlZnQgbGFiZWxcJylcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICMgQmlkaSBydWxlIDVcbiAgICAgICAgICAgIGlmIG5vdCBkaXJlY3Rpb24gaW4gW1wnTFwnLCBcJ0VOXCcsIFwnRVNcJywgXCdDU1wnLCBcJ0VUXCcsIFwnT05cJywgXCdCTlwnLCBcJ05TTVwnXTpcbiAgICAgICAgICAgICAgICByYWlzZSBJRE5BQmlkaUVycm9yKFwnSW52YWxpZCBkaXJlY3Rpb24gZm9yIGNvZGVwb2ludCBhdCBwb3NpdGlvbiB7fSBpbiBhIGxlZnQtdG8tcmlnaHQgbGFiZWxcJy5mb3JtYXQoaWR4KSlcbiAgICAgICAgICAgICMgQmlkaSBydWxlIDZcbiAgICAgICAgICAgIGlmIGRpcmVjdGlvbiBpbiBbXCdMXCcsIFwnRU5cJ106XG4gICAgICAgICAgICAgICAgdmFsaWRfZW5kaW5nID0gVHJ1ZVxuICAgICAgICAgICAgZWxpZiBkaXJlY3Rpb24gIT0gXCdOU01cJzpcbiAgICAgICAgICAgICAgICB2YWxpZF9lbmRpbmcgPSBGYWxzZVxuXG4gICAgaWYgbm90IHZhbGlkX2VuZGluZzpcbiAgICAgICAgcmFpc2UgSUROQUJpZGlFcnJvcihcJ0xhYmVsIGVuZHMgd2l0aCBpbGxlZ2FsIGNvZGVwb2ludCBkaXJlY3Rpb25hbGl0eVwnKVxuXG4gICAgcmV0dXJuIFRydWVcblxuXG5kZWYgY2hlY2tfaW5pdGlhbF9jb21iaW5lcihsYWJlbDogc3RyKSAtPiBib29sOlxuICAgIGlmIHVuaWNvZGVkYXRhLmNhdGVnb3J5KGxhYmVsWzBdKVswXSA9PSBcJ01cJzpcbiAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnTGFiZWwgYmVnaW5zIHdpdGggYW4gaWxsZWdhbCBjb21iaW5pbmcgY2hhcmFjdGVyXCcpXG4gICAgcmV0dXJuIFRydWVcblxuXG5kZWYgY2hlY2tfaHlwaGVuX29rKGxhYmVsOiBzdHIpIC0+IGJvb2w6XG4gICAgaWYgbGFiZWxbMjo0XSA9PSBcJy0tXCc6XG4gICAgICAgIHJhaXNlIElETkFFcnJvcihcJ0xhYmVsIGhhcyBkaXNhbGxvd2VkIGh5cGhlbnMgaW4gM3JkIGFuZCA0dGggcG9zaXRpb25cJylcbiAgICBpZiBsYWJlbFswXSA9PSBcJy1cJyBvciBsYWJlbFstMV0gPT0gXCctXCc6XG4gICAgICAgIHJhaXNlIElETkFFcnJvcihcJ0xhYmVsIG11c3Qgbm90IHN0YXJ0IG9yIGVuZCB3aXRoIGEgaHlwaGVuXCcpXG4gICAgcmV0dXJuIFRydWVcblxuXG5kZWYgY2hlY2tfbmZjKGxhYmVsOiBzdHIpIC0+IE5vbmU6XG4gICAgaWYgdW5pY29kZWRhdGEubm9ybWFsaXplKFwnTkZDXCcsIGxhYmVsKSAhPSBsYWJlbDpcbiAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnTGFiZWwgbXVzdCBiZSBpbiBOb3JtYWxpemF0aW9uIEZvcm0gQ1wnKVxuXG5cbmRlZiB2YWxpZF9jb250ZXh0aihsYWJlbDogc3RyLCBwb3M6IGludCkgLT4gYm9vbDpcbiAgICBjcF92YWx1ZSA9IG9yZChsYWJlbFtwb3NdKVxuXG4gICAgaWYgY3BfdmFsdWUgPT0gMHgyMDBjOlxuXG4gICAgICAgIGlmIHBvcyA+IDA6XG4gICAgICAgICAgICBpZiBfY29tYmluaW5nX2NsYXNzKG9yZChsYWJlbFtwb3MgLSAxXSkpID09IF92aXJhbWFfY29tYmluaW5nX2NsYXNzOlxuICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXG5cbiAgICAgICAgb2sgPSBGYWxzZVxuICAgICAgICBmb3IgaSBpbiByYW5nZShwb3MtMSwgLTEsIC0xKTpcbiAgICAgICAgICAgIGpvaW5pbmdfdHlwZSA9IGlkbmFkYXRhLmpvaW5pbmdfdHlwZXMuZ2V0KG9yZChsYWJlbFtpXSkpXG4gICAgICAgICAgICBpZiBqb2luaW5nX3R5cGUgPT0gb3JkKFwnVFwnKTpcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgaWYgam9pbmluZ190eXBlIGluIFtvcmQoXCdMXCcpLCBvcmQoXCdEXCcpXTpcbiAgICAgICAgICAgICAgICBvayA9IFRydWVcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgIGlmIG5vdCBvazpcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgICAgIG9rID0gRmFsc2VcbiAgICAgICAgZm9yIGkgaW4gcmFuZ2UocG9zKzEsIGxlbihsYWJlbCkpOlxuICAgICAgICAgICAgam9pbmluZ190eXBlID0gaWRuYWRhdGEuam9pbmluZ190eXBlcy5nZXQob3JkKGxhYmVsW2ldKSlcbiAgICAgICAgICAgIGlmIGpvaW5pbmdfdHlwZSA9PSBvcmQoXCdUXCcpOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICBpZiBqb2luaW5nX3R5cGUgaW4gW29yZChcJ1JcJyksIG9yZChcJ0RcJyldOlxuICAgICAgICAgICAgICAgIG9rID0gVHJ1ZVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIHJldHVybiBva1xuXG4gICAgaWYgY3BfdmFsdWUgPT0gMHgyMDBkOlxuXG4gICAgICAgIGlmIHBvcyA+IDA6XG4gICAgICAgICAgICBpZiBfY29tYmluaW5nX2NsYXNzKG9yZChsYWJlbFtwb3MgLSAxXSkpID09IF92aXJhbWFfY29tYmluaW5nX2NsYXNzOlxuICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgZWxzZTpcblxuICAgICAgICByZXR1cm4gRmFsc2VcblxuXG5kZWYgdmFsaWRfY29udGV4dG8obGFiZWw6IHN0ciwgcG9zOiBpbnQsIGV4Y2VwdGlvbjogYm9vbCA9IEZhbHNlKSAtPiBib29sOlxuICAgIGNwX3ZhbHVlID0gb3JkKGxhYmVsW3Bvc10pXG5cbiAgICBpZiBjcF92YWx1ZSA9PSAweDAwYjc6XG4gICAgICAgIGlmIDAgPCBwb3MgPCBsZW4obGFiZWwpLTE6XG4gICAgICAgICAgICBpZiBvcmQobGFiZWxbcG9zIC0gMV0pID09IDB4MDA2YyBhbmQgb3JkKGxhYmVsW3BvcyArIDFdKSA9PSAweDAwNmM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICBlbGlmIGNwX3ZhbHVlID09IDB4MDM3NTpcbiAgICAgICAgaWYgcG9zIDwgbGVuKGxhYmVsKS0xIGFuZCBsZW4obGFiZWwpID4gMTpcbiAgICAgICAgICAgIHJldHVybiBfaXNfc2NyaXB0KGxhYmVsW3BvcyArIDFdLCBcJ0dyZWVrXCcpXG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgZWxpZiBjcF92YWx1ZSA9PSAweDA1ZjMgb3IgY3BfdmFsdWUgPT0gMHgwNWY0OlxuICAgICAgICBpZiBwb3MgPiAwOlxuICAgICAgICAgICAgcmV0dXJuIF9pc19zY3JpcHQobGFiZWxbcG9zIC0gMV0sIFwnSGVicmV3XCcpXG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgZWxpZiBjcF92YWx1ZSA9PSAweDMwZmI6XG4gICAgICAgIGZvciBjcCBpbiBsYWJlbDpcbiAgICAgICAgICAgIGlmIGNwID09IFwnXFx1MzBmYlwnOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICBpZiBfaXNfc2NyaXB0KGNwLCBcJ0hpcmFnYW5hXCcpIG9yIF9pc19zY3JpcHQoY3AsIFwnS2F0YWthbmFcJykgb3IgX2lzX3NjcmlwdChjcCwgXCdIYW5cJyk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICBlbGlmIDB4NjYwIDw9IGNwX3ZhbHVlIDw9IDB4NjY5OlxuICAgICAgICBmb3IgY3AgaW4gbGFiZWw6XG4gICAgICAgICAgICBpZiAweDZmMCA8PSBvcmQoY3ApIDw9IDB4MDZmOTpcbiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2VcbiAgICAgICAgcmV0dXJuIFRydWVcblxuICAgIGVsaWYgMHg2ZjAgPD0gY3BfdmFsdWUgPD0gMHg2Zjk6XG4gICAgICAgIGZvciBjcCBpbiBsYWJlbDpcbiAgICAgICAgICAgIGlmIDB4NjYwIDw9IG9yZChjcCkgPD0gMHgwNjY5OlxuICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZVxuICAgICAgICByZXR1cm4gVHJ1ZVxuXG4gICAgcmV0dXJuIEZhbHNlXG5cblxuZGVmIGNoZWNrX2xhYmVsKGxhYmVsOiBVbmlvbltzdHIsIGJ5dGVzLCBieXRlYXJyYXldKSAtPiBOb25lOlxuICAgIGlmIGlzaW5zdGFuY2UobGFiZWwsIChieXRlcywgYnl0ZWFycmF5KSk6XG4gICAgICAgIGxhYmVsID0gbGFiZWwuZGVjb2RlKFwndXRmLThcJylcbiAgICBpZiBsZW4obGFiZWwpID09IDA6XG4gICAgICAgIHJhaXNlIElETkFFcnJvcihcJ0VtcHR5IExhYmVsXCcpXG5cbiAgICBjaGVja19uZmMobGFiZWwpXG4gICAgY2hlY2tfaHlwaGVuX29rKGxhYmVsKVxuICAgIGNoZWNrX2luaXRpYWxfY29tYmluZXIobGFiZWwpXG5cbiAgICBmb3IgKHBvcywgY3ApIGluIGVudW1lcmF0ZShsYWJlbCk6XG4gICAgICAgIGNwX3ZhbHVlID0gb3JkKGNwKVxuICAgICAgICBpZiBpbnRyYW5nZXNfY29udGFpbihjcF92YWx1ZSwgaWRuYWRhdGEuY29kZXBvaW50X2NsYXNzZXNbXCdQVkFMSURcJ10pOlxuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgZWxpZiBpbnRyYW5nZXNfY29udGFpbihjcF92YWx1ZSwgaWRuYWRhdGEuY29kZXBvaW50X2NsYXNzZXNbXCdDT05URVhUSlwnXSk6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgaWYgbm90IHZhbGlkX2NvbnRleHRqKGxhYmVsLCBwb3MpOlxuICAgICAgICAgICAgICAgICAgICByYWlzZSBJbnZhbGlkQ29kZXBvaW50Q29udGV4dChcJ0pvaW5lciB7fSBub3QgYWxsb3dlZCBhdCBwb3NpdGlvbiB7fSBpbiB7fVwnLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgICAgIF91bm90KGNwX3ZhbHVlKSwgcG9zKzEsIHJlcHIobGFiZWwpKSlcbiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxuICAgICAgICAgICAgICAgIHJhaXNlIElETkFFcnJvcihcJ1Vua25vd24gY29kZXBvaW50IGFkamFjZW50IHRvIGpvaW5lciB7fSBhdCBwb3NpdGlvbiB7fSBpbiB7fVwnLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgX3Vub3QoY3BfdmFsdWUpLCBwb3MrMSwgcmVwcihsYWJlbCkpKVxuICAgICAgICBlbGlmIGludHJhbmdlc19jb250YWluKGNwX3ZhbHVlLCBpZG5hZGF0YS5jb2RlcG9pbnRfY2xhc3Nlc1tcJ0NPTlRFWFRPXCddKTpcbiAgICAgICAgICAgIGlmIG5vdCB2YWxpZF9jb250ZXh0byhsYWJlbCwgcG9zKTpcbiAgICAgICAgICAgICAgICByYWlzZSBJbnZhbGlkQ29kZXBvaW50Q29udGV4dChcJ0NvZGVwb2ludCB7fSBub3QgYWxsb3dlZCBhdCBwb3NpdGlvbiB7fSBpbiB7fVwnLmZvcm1hdChfdW5vdChjcF92YWx1ZSksIHBvcysxLCByZXByKGxhYmVsKSkpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICByYWlzZSBJbnZhbGlkQ29kZXBvaW50KFwnQ29kZXBvaW50IHt9IGF0IHBvc2l0aW9uIHt9IG9mIHt9IG5vdCBhbGxvd2VkXCcuZm9ybWF0KF91bm90KGNwX3ZhbHVlKSwgcG9zKzEsIHJlcHIobGFiZWwpKSlcblxuICAgIGNoZWNrX2JpZGkobGFiZWwpXG5cblxuZGVmIGFsYWJlbChsYWJlbDogc3RyKSAtPiBieXRlczpcbiAgICB0cnk6XG4gICAgICAgIGxhYmVsX2J5dGVzID0gbGFiZWwuZW5jb2RlKFwnYXNjaWlcJylcbiAgICAgICAgdWxhYmVsKGxhYmVsX2J5dGVzKVxuICAgICAgICBpZiBub3QgdmFsaWRfbGFiZWxfbGVuZ3RoKGxhYmVsX2J5dGVzKTpcbiAgICAgICAgICAgIHJhaXNlIElETkFFcnJvcihcJ0xhYmVsIHRvbyBsb25nXCcpXG4gICAgICAgIHJldHVybiBsYWJlbF9ieXRlc1xuICAgIGV4Y2VwdCBVbmljb2RlRW5jb2RlRXJyb3I6XG4gICAgICAgIHBhc3NcblxuICAgIGlmIG5vdCBsYWJlbDpcbiAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnTm8gSW5wdXRcJylcblxuICAgIGxhYmVsID0gc3RyKGxhYmVsKVxuICAgIGNoZWNrX2xhYmVsKGxhYmVsKVxuICAgIGxhYmVsX2J5dGVzID0gX3B1bnljb2RlKGxhYmVsKVxuICAgIGxhYmVsX2J5dGVzID0gX2FsYWJlbF9wcmVmaXggKyBsYWJlbF9ieXRlc1xuXG4gICAgaWYgbm90IHZhbGlkX2xhYmVsX2xlbmd0aChsYWJlbF9ieXRlcyk6XG4gICAgICAgIHJhaXNlIElETkFFcnJvcihcJ0xhYmVsIHRvbyBsb25nXCcpXG5cbiAgICByZXR1cm4gbGFiZWxfYnl0ZXNcblxuXG5kZWYgdWxhYmVsKGxhYmVsOiBVbmlvbltzdHIsIGJ5dGVzLCBieXRlYXJyYXldKSAtPiBzdHI6XG4gICAgaWYgbm90IGlzaW5zdGFuY2UobGFiZWwsIChieXRlcywgYnl0ZWFycmF5KSk6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGxhYmVsX2J5dGVzID0gbGFiZWwuZW5jb2RlKFwnYXNjaWlcJylcbiAgICAgICAgZXhjZXB0IFVuaWNvZGVFbmNvZGVFcnJvcjpcbiAgICAgICAgICAgIGNoZWNrX2xhYmVsKGxhYmVsKVxuICAgICAgICAgICAgcmV0dXJuIGxhYmVsXG4gICAgZWxzZTpcbiAgICAgICAgbGFiZWxfYnl0ZXMgPSBsYWJlbFxuXG4gICAgbGFiZWxfYnl0ZXMgPSBsYWJlbF9ieXRlcy5sb3dlcigpXG4gICAgaWYgbGFiZWxfYnl0ZXMuc3RhcnRzd2l0aChfYWxhYmVsX3ByZWZpeCk6XG4gICAgICAgIGxhYmVsX2J5dGVzID0gbGFiZWxfYnl0ZXNbbGVuKF9hbGFiZWxfcHJlZml4KTpdXG4gICAgICAgIGlmIG5vdCBsYWJlbF9ieXRlczpcbiAgICAgICAgICAgIHJhaXNlIElETkFFcnJvcihcJ01hbGZvcm1lZCBBLWxhYmVsLCBubyBQdW55Y29kZSBlbGlnaWJsZSBjb250ZW50IGZvdW5kXCcpXG4gICAgICAgIGlmIGxhYmVsX2J5dGVzLmRlY29kZShcJ2FzY2lpXCcpWy0xXSA9PSBcJy1cJzpcbiAgICAgICAgICAgIHJhaXNlIElETkFFcnJvcihcJ0EtbGFiZWwgbXVzdCBub3QgZW5kIHdpdGggYSBoeXBoZW5cJylcbiAgICBlbHNlOlxuICAgICAgICBjaGVja19sYWJlbChsYWJlbF9ieXRlcylcbiAgICAgICAgcmV0dXJuIGxhYmVsX2J5dGVzLmRlY29kZShcJ2FzY2lpXCcpXG5cbiAgICB0cnk6XG4gICAgICAgIGxhYmVsID0gbGFiZWxfYnl0ZXMuZGVjb2RlKFwncHVueWNvZGVcJylcbiAgICBleGNlcHQgVW5pY29kZUVycm9yOlxuICAgICAgICByYWlzZSBJRE5BRXJyb3IoXCdJbnZhbGlkIEEtbGFiZWxcJylcbiAgICBjaGVja19sYWJlbChsYWJlbClcbiAgICByZXR1cm4gbGFiZWxcblxuXG5kZWYgdXRzNDZfcmVtYXAoZG9tYWluOiBzdHIsIHN0ZDNfcnVsZXM6IGJvb2wgPSBUcnVlLCB0cmFuc2l0aW9uYWw6IGJvb2wgPSBGYWxzZSkgLT4gc3RyOlxuICAgICIiIlJlLW1hcCB0aGUgY2hhcmFjdGVycyBpbiB0aGUgc3RyaW5nIGFjY29yZGluZyB0byBVVFM0NiBwcm9jZXNzaW5nLiIiIlxuICAgIGZyb20gLnV0czQ2ZGF0YSBpbXBvcnQgdXRzNDZkYXRhXG4gICAgb3V0cHV0ID0gXCdcJ1xuXG4gICAgZm9yIHBvcywgY2hhciBpbiBlbnVtZXJhdGUoZG9tYWluKTpcbiAgICAgICAgY29kZV9wb2ludCA9IG9yZChjaGFyKVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICB1dHM0NnJvdyA9IHV0czQ2ZGF0YVtjb2RlX3BvaW50IGlmIGNvZGVfcG9pbnQgPCAyNTYgZWxzZVxuICAgICAgICAgICAgICAgIGJpc2VjdC5iaXNlY3RfbGVmdCh1dHM0NmRhdGEsIChjb2RlX3BvaW50LCBcJ1pcJykpIC0gMV1cbiAgICAgICAgICAgIHN0YXR1cyA9IHV0czQ2cm93WzFdXG4gICAgICAgICAgICByZXBsYWNlbWVudCA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuICAgICAgICAgICAgaWYgbGVuKHV0czQ2cm93KSA9PSAzOlxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50ID0gdXRzNDZyb3dbMl0gICMgdHlwZTogaWdub3JlXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09IFwnVlwnIG9yXG4gICAgICAgICAgICAgICAgICAgIChzdGF0dXMgPT0gXCdEXCcgYW5kIG5vdCB0cmFuc2l0aW9uYWwpIG9yXG4gICAgICAgICAgICAgICAgICAgIChzdGF0dXMgPT0gXCczXCcgYW5kIG5vdCBzdGQzX3J1bGVzIGFuZCByZXBsYWNlbWVudCBpcyBOb25lKSk6XG4gICAgICAgICAgICAgICAgb3V0cHV0ICs9IGNoYXJcbiAgICAgICAgICAgIGVsaWYgcmVwbGFjZW1lbnQgaXMgbm90IE5vbmUgYW5kIChzdGF0dXMgPT0gXCdNXCcgb3JcbiAgICAgICAgICAgICAgICAgICAgKHN0YXR1cyA9PSBcJzNcJyBhbmQgbm90IHN0ZDNfcnVsZXMpIG9yXG4gICAgICAgICAgICAgICAgICAgIChzdGF0dXMgPT0gXCdEXCcgYW5kIHRyYW5zaXRpb25hbCkpOlxuICAgICAgICAgICAgICAgIG91dHB1dCArPSByZXBsYWNlbWVudFxuICAgICAgICAgICAgZWxpZiBzdGF0dXMgIT0gXCdJXCc6XG4gICAgICAgICAgICAgICAgcmFpc2UgSW5kZXhFcnJvcigpXG4gICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOlxuICAgICAgICAgICAgcmFpc2UgSW52YWxpZENvZGVwb2ludChcbiAgICAgICAgICAgICAgICBcJ0NvZGVwb2ludCB7fSBub3QgYWxsb3dlZCBhdCBwb3NpdGlvbiB7fSBpbiB7fVwnLmZvcm1hdChcbiAgICAgICAgICAgICAgICBfdW5vdChjb2RlX3BvaW50KSwgcG9zICsgMSwgcmVwcihkb21haW4pKSlcblxuICAgIHJldHVybiB1bmljb2RlZGF0YS5ub3JtYWxpemUoXCdORkNcJywgb3V0cHV0KVxuXG5cbmRlZiBlbmNvZGUoczogVW5pb25bc3RyLCBieXRlcywgYnl0ZWFycmF5XSwgc3RyaWN0OiBib29sID0gRmFsc2UsIHV0czQ2OiBib29sID0gRmFsc2UsIHN0ZDNfcnVsZXM6IGJvb2wgPSBGYWxzZSwgdHJhbnNpdGlvbmFsOiBib29sID0gRmFsc2UpIC0+IGJ5dGVzOlxuICAgIGlmIGlzaW5zdGFuY2UocywgKGJ5dGVzLCBieXRlYXJyYXkpKTpcbiAgICAgICAgcyA9IHMuZGVjb2RlKFwnYXNjaWlcJylcbiAgICBpZiB1dHM0NjpcbiAgICAgICAgcyA9IHV0czQ2X3JlbWFwKHMsIHN0ZDNfcnVsZXMsIHRyYW5zaXRpb25hbClcbiAgICB0cmFpbGluZ19kb3QgPSBGYWxzZVxuICAgIHJlc3VsdCA9IFtdXG4gICAgaWYgc3RyaWN0OlxuICAgICAgICBsYWJlbHMgPSBzLnNwbGl0KFwnLlwnKVxuICAgIGVsc2U6XG4gICAgICAgIGxhYmVscyA9IF91bmljb2RlX2RvdHNfcmUuc3BsaXQocylcbiAgICBpZiBub3QgbGFiZWxzIG9yIGxhYmVscyA9PSBbXCdcJ106XG4gICAgICAgIHJhaXNlIElETkFFcnJvcihcJ0VtcHR5IGRvbWFpblwnKVxuICAgIGlmIGxhYmVsc1stMV0gPT0gXCdcJzpcbiAgICAgICAgZGVsIGxhYmVsc1stMV1cbiAgICAgICAgdHJhaWxpbmdfZG90ID0gVHJ1ZVxuICAgIGZvciBsYWJlbCBpbiBsYWJlbHM6XG4gICAgICAgIHMgPSBhbGFiZWwobGFiZWwpXG4gICAgICAgIGlmIHM6XG4gICAgICAgICAgICByZXN1bHQuYXBwZW5kKHMpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICByYWlzZSBJRE5BRXJyb3IoXCdFbXB0eSBsYWJlbFwnKVxuICAgIGlmIHRyYWlsaW5nX2RvdDpcbiAgICAgICAgcmVzdWx0LmFwcGVuZChiXCdcJylcbiAgICBzID0gYlwnLlwnLmpvaW4ocmVzdWx0KVxuICAgIGlmIG5vdCB2YWxpZF9zdHJpbmdfbGVuZ3RoKHMsIHRyYWlsaW5nX2RvdCk6XG4gICAgICAgIHJhaXNlIElETkFFcnJvcihcJ0RvbWFpbiB0b28gbG9uZ1wnKVxuICAgIHJldHVybiBzXG5cblxuZGVmIGRlY29kZShzOiBVbmlvbltzdHIsIGJ5dGVzLCBieXRlYXJyYXldLCBzdHJpY3Q6IGJvb2wgPSBGYWxzZSwgdXRzNDY6IGJvb2wgPSBGYWxzZSwgc3RkM19ydWxlczogYm9vbCA9IEZhbHNlKSAtPiBzdHI6XG4gICAgdHJ5OlxuICAgICAgICBpZiBpc2luc3RhbmNlKHMsIChieXRlcywgYnl0ZWFycmF5KSk6XG4gICAgICAgICAgICBzID0gcy5kZWNvZGUoXCdhc2NpaVwnKVxuICAgIGV4Y2VwdCBVbmljb2RlRGVjb2RlRXJyb3I6XG4gICAgICAgIHJhaXNlIElETkFFcnJvcihcJ0ludmFsaWQgQVNDSUkgaW4gQS1sYWJlbFwnKVxuICAgIGlmIHV0czQ2OlxuICAgICAgICBzID0gdXRzNDZfcmVtYXAocywgc3RkM19ydWxlcywgRmFsc2UpXG4gICAgdHJhaWxpbmdfZG90ID0gRmFsc2VcbiAgICByZXN1bHQgPSBbXVxuICAgIGlmIG5vdCBzdHJpY3Q6XG4gICAgICAgIGxhYmVscyA9IF91bmljb2RlX2RvdHNfcmUuc3BsaXQocylcbiAgICBlbHNlOlxuICAgICAgICBsYWJlbHMgPSBzLnNwbGl0KFwnLlwnKVxuICAgIGlmIG5vdCBsYWJlbHMgb3IgbGFiZWxzID09IFtcJ1wnXTpcbiAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnRW1wdHkgZG9tYWluXCcpXG4gICAgaWYgbm90IGxhYmVsc1stMV06XG4gICAgICAgIGRlbCBsYWJlbHNbLTFdXG4gICAgICAgIHRyYWlsaW5nX2RvdCA9IFRydWVcbiAgICBmb3IgbGFiZWwgaW4gbGFiZWxzOlxuICAgICAgICBzID0gdWxhYmVsKGxhYmVsKVxuICAgICAgICBpZiBzOlxuICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChzKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgcmFpc2UgSUROQUVycm9yKFwnRW1wdHkgbGFiZWxcJylcbiAgICBpZiB0cmFpbGluZ19kb3Q6XG4gICAgICAgIHJlc3VsdC5hcHBlbmQoXCdcJylcbiAgICByZXR1cm4gXCcuXCcuam9pbihyZXN1bHQpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnaWRuYS9pZG5hZGF0YS5weScsIGIiIyBUaGlzIGZpbGUgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgdG9vbHMvaWRuYS1kYXRhXG5cbl9fdmVyc2lvbl9fID0gJzE0LjAuMCdcbnNjcmlwdHMgPSB7XG4gICAgJ0dyZWVrJzogKFxuICAgICAgICAweDM3MDAwMDAwMzc0LFxuICAgICAgICAweDM3NTAwMDAwMzc4LFxuICAgICAgICAweDM3YTAwMDAwMzdlLFxuICAgICAgICAweDM3ZjAwMDAwMzgwLFxuICAgICAgICAweDM4NDAwMDAwMzg1LFxuICAgICAgICAweDM4NjAwMDAwMzg3LFxuICAgICAgICAweDM4ODAwMDAwMzhiLFxuICAgICAgICAweDM4YzAwMDAwMzhkLFxuICAgICAgICAweDM4ZTAwMDAwM2EyLFxuICAgICAgICAweDNhMzAwMDAwM2UyLFxuICAgICAgICAweDNmMDAwMDAwNDAwLFxuICAgICAgICAweDFkMjYwMDAwMWQyYixcbiAgICAgICAgMHgxZDVkMDAwMDFkNjIsXG4gICAgICAgIDB4MWQ2NjAwMDAxZDZiLFxuICAgICAgICAweDFkYmYwMDAwMWRjMCxcbiAgICAgICAgMHgxZjAwMDAwMDFmMTYsXG4gICAgICAgIDB4MWYxODAwMDAxZjFlLFxuICAgICAgICAweDFmMjAwMDAwMWY0NixcbiAgICAgICAgMHgxZjQ4MDAwMDFmNGUsXG4gICAgICAgIDB4MWY1MDAwMDAxZjU4LFxuICAgICAgICAweDFmNTkwMDAwMWY1YSxcbiAgICAgICAgMHgxZjViMDAwMDFmNWMsXG4gICAgICAgIDB4MWY1ZDAwMDAxZjVlLFxuICAgICAgICAweDFmNWYwMDAwMWY3ZSxcbiAgICAgICAgMHgxZjgwMDAwMDFmYjUsXG4gICAgICAgIDB4MWZiNjAwMDAxZmM1LFxuICAgICAgICAweDFmYzYwMDAwMWZkNCxcbiAgICAgICAgMHgxZmQ2MDAwMDFmZGMsXG4gICAgICAgIDB4MWZkZDAwMDAxZmYwLFxuICAgICAgICAweDFmZjIwMDAwMWZmNSxcbiAgICAgICAgMHgxZmY2MDAwMDFmZmYsXG4gICAgICAgIDB4MjEyNjAwMDAyMTI3LFxuICAgICAgICAweGFiNjUwMDAwYWI2NixcbiAgICAgICAgMHgxMDE0MDAwMDEwMThmLFxuICAgICAgICAweDEwMWEwMDAwMTAxYTEsXG4gICAgICAgIDB4MWQyMDAwMDAxZDI0NixcbiAgICApLFxuICAgICdIYW4nOiAoXG4gICAgICAgIDB4MmU4MDAwMDAyZTlhLFxuICAgICAgICAweDJlOWIwMDAwMmVmNCxcbiAgICAgICAgMHgyZjAwMDAwMDJmZDYsXG4gICAgICAgIDB4MzAwNTAwMDAzMDA2LFxuICAgICAgICAweDMwMDcwMDAwMzAwOCxcbiAgICAgICAgMHgzMDIxMDAwMDMwMmEsXG4gICAgICAgIDB4MzAzODAwMDAzMDNjLFxuICAgICAgICAweDM0MDAwMDAwNGRjMCxcbiAgICAgICAgMHg0ZTAwMDAwMGEwMDAsXG4gICAgICAgIDB4ZjkwMDAwMDBmYTZlLFxuICAgICAgICAweGZhNzAwMDAwZmFkYSxcbiAgICAgICAgMHgxNmZlMjAwMDE2ZmU0LFxuICAgICAgICAweDE2ZmYwMDAwMTZmZjIsXG4gICAgICAgIDB4MjAwMDAwMDAyYTZlMCxcbiAgICAgICAgMHgyYTcwMDAwMDJiNzM5LFxuICAgICAgICAweDJiNzQwMDAwMmI4MWUsXG4gICAgICAgIDB4MmI4MjAwMDAyY2VhMixcbiAgICAgICAgMHgyY2ViMDAwMDJlYmUxLFxuICAgICAgICAweDJmODAwMDAwMmZhMWUsXG4gICAgICAgIDB4MzAwMDAwMDAzMTM0YixcbiAgICApLFxuICAgICdIZWJyZXcnOiAoXG4gICAgICAgIDB4NTkxMDAwMDA1YzgsXG4gICAgICAgIDB4NWQwMDAwMDA1ZWIsXG4gICAgICAgIDB4NWVmMDAwMDA1ZjUsXG4gICAgICAgIDB4ZmIxZDAwMDBmYjM3LFxuICAgICAgICAweGZiMzgwMDAwZmIzZCxcbiAgICAgICAgMHhmYjNlMDAwMGZiM2YsXG4gICAgICAgIDB4ZmI0MDAwMDBmYjQyLFxuICAgICAgICAweGZiNDMwMDAwZmI0NSxcbiAgICAgICAgMHhmYjQ2MDAwMGZiNTAsXG4gICAgKSxcbiAgICAnSGlyYWdhbmEnOiAoXG4gICAgICAgIDB4MzA0MTAwMDAzMDk3LFxuICAgICAgICAweDMwOWQwMDAwMzBhMCxcbiAgICAgICAgMHgxYjAwMTAwMDFiMTIwLFxuICAgICAgICAweDFiMTUwMDAwMWIxNTMsXG4gICAgICAgIDB4MWYyMDAwMDAxZjIwMSxcbiAgICApLFxuICAgICdLYXRha2FuYSc6IChcbiAgICAgICAgMHgzMGExMDAwMDMwZmIsXG4gICAgICAgIDB4MzBmZDAwMDAzMTAwLFxuICAgICAgICAweDMxZjAwMDAwMzIwMCxcbiAgICAgICAgMHgzMmQwMDAwMDMyZmYsXG4gICAgICAgIDB4MzMwMDAwMDAzMzU4LFxuICAgICAgICAweGZmNjYwMDAwZmY3MCxcbiAgICAgICAgMHhmZjcxMDAwMGZmOWUsXG4gICAgICAgIDB4MWFmZjAwMDAxYWZmNCxcbiAgICAgICAgMHgxYWZmNTAwMDFhZmZjLFxuICAgICAgICAweDFhZmZkMDAwMWFmZmYsXG4gICAgICAgIDB4MWIwMDAwMDAxYjAwMSxcbiAgICAgICAgMHgxYjEyMDAwMDFiMTIzLFxuICAgICAgICAweDFiMTY0MDAwMWIxNjgsXG4gICAgKSxcbn1cbmpvaW5pbmdfdHlwZXMgPSB7XG4gICAgMHg2MDA6IDg1LFxuICAgIDB4NjAxOiA4NSxcbiAgICAweDYwMjogODUsXG4gICAgMHg2MDM6IDg1LFxuICAgIDB4NjA0OiA4NSxcbiAgICAweDYwNTogODUsXG4gICAgMHg2MDg6IDg1LFxuICAgIDB4NjBiOiA4NSxcbiAgICAweDYyMDogNjgsXG4gICAgMHg2MjE6IDg1LFxuICAgIDB4NjIyOiA4MixcbiAgICAweDYyMzogODIsXG4gICAgMHg2MjQ6IDgyLFxuICAgIDB4NjI1OiA4MixcbiAgICAweDYyNjogNjgsXG4gICAgMHg2Mjc6IDgyLFxuICAgIDB4NjI4OiA2OCxcbiAgICAweDYyOTogODIsXG4gICAgMHg2MmE6IDY4LFxuICAgIDB4NjJiOiA2OCxcbiAgICAweDYyYzogNjgsXG4gICAgMHg2MmQ6IDY4LFxuICAgIDB4NjJlOiA2OCxcbiAgICAweDYyZjogODIsXG4gICAgMHg2MzA6IDgyLFxuICAgIDB4NjMxOiA4MixcbiAgICAweDYzMjogODIsXG4gICAgMHg2MzM6IDY4LFxuICAgIDB4NjM0OiA2OCxcbiAgICAweDYzNTogNjgsXG4gICAgMHg2MzY6IDY4LFxuICAgIDB4NjM3OiA2OCxcbiAgICAweDYzODogNjgsXG4gICAgMHg2Mzk6IDY4LFxuICAgIDB4NjNhOiA2OCxcbiAgICAweDYzYjogNjgsXG4gICAgMHg2M2M6IDY4LFxuICAgIDB4NjNkOiA2OCxcbiAgICAweDYzZTogNjgsXG4gICAgMHg2M2Y6IDY4LFxuICAgIDB4NjQwOiA2NyxcbiAgICAweDY0MTogNjgsXG4gICAgMHg2NDI6IDY4LFxuICAgIDB4NjQzOiA2OCxcbiAgICAweDY0NDogNjgsXG4gICAgMHg2NDU6IDY4LFxuICAgIDB4NjQ2OiA2OCxcbiAgICAweDY0NzogNjgsXG4gICAgMHg2NDg6IDgyLFxuICAgIDB4NjQ5OiA2OCxcbiAgICAweDY0YTogNjgsXG4gICAgMHg2NmU6IDY4LFxuICAgIDB4NjZmOiA2OCxcbiAgICAweDY3MTogODIsXG4gICAgMHg2NzI6IDgyLFxuICAgIDB4NjczOiA4MixcbiAgICAweDY3NDogODUsXG4gICAgMHg2NzU6IDgyLFxuICAgIDB4Njc2OiA4MixcbiAgICAweDY3NzogODIsXG4gICAgMHg2Nzg6IDY4LFxuICAgIDB4Njc5OiA2OCxcbiAgICAweDY3YTogNjgsXG4gICAgMHg2N2I6IDY4LFxuICAgIDB4NjdjOiA2OCxcbiAgICAweDY3ZDogNjgsXG4gICAgMHg2N2U6IDY4LFxuICAgIDB4NjdmOiA2OCxcbiAgICAweDY4MDogNjgsXG4gICAgMHg2ODE6IDY4LFxuICAgIDB4NjgyOiA2OCxcbiAgICAweDY4MzogNjgsXG4gICAgMHg2ODQ6IDY4LFxuICAgIDB4Njg1OiA2OCxcbiAgICAweDY4NjogNjgsXG4gICAgMHg2ODc6IDY4LFxuICAgIDB4Njg4OiA4MixcbiAgICAweDY4OTogODIsXG4gICAgMHg2OGE6IDgyLFxuICAgIDB4NjhiOiA4MixcbiAgICAweDY4YzogODIsXG4gICAgMHg2OGQ6IDgyLFxuICAgIDB4NjhlOiA4MixcbiAgICAweDY4ZjogODIsXG4gICAgMHg2OTA6IDgyLFxuICAgIDB4NjkxOiA4MixcbiAgICAweDY5MjogODIsXG4gICAgMHg2OTM6IDgyLFxuICAgIDB4Njk0OiA4MixcbiAgICAweDY5NTogODIsXG4gICAgMHg2OTY6IDgyLFxuICAgIDB4Njk3OiA4MixcbiAgICAweDY5ODogODIsXG4gICAgMHg2OTk6IDgyLFxuICAgIDB4NjlhOiA2OCxcbiAgICAweDY5YjogNjgsXG4gICAgMHg2OWM6IDY4LFxuICAgIDB4NjlkOiA2OCxcbiAgICAweDY5ZTogNjgsXG4gICAgMHg2OWY6IDY4LFxuICAgIDB4NmEwOiA2OCxcbiAgICAweDZhMTogNjgsXG4gICAgMHg2YTI6IDY4LFxuICAgIDB4NmEzOiA2OCxcbiAgICAweDZhNDogNjgsXG4gICAgMHg2YTU6IDY4LFxuICAgIDB4NmE2OiA2OCxcbiAgICAweDZhNzogNjgsXG4gICAgMHg2YTg6IDY4LFxuICAgIDB4NmE5OiA2OCxcbiAgICAweDZhYTogNjgsXG4gICAgMHg2YWI6IDY4LFxuICAgIDB4NmFjOiA2OCxcbiAgICAweDZhZDogNjgsXG4gICAgMHg2YWU6IDY4LFxuICAgIDB4NmFmOiA2OCxcbiAgICAweDZiMDogNjgsXG4gICAgMHg2YjE6IDY4LFxuICAgIDB4NmIyOiA2OCxcbiAgICAweDZiMzogNjgsXG4gICAgMHg2YjQ6IDY4LFxuICAgIDB4NmI1OiA2OCxcbiAgICAweDZiNjogNjgsXG4gICAgMHg2Yjc6IDY4LFxuICAgIDB4NmI4OiA2OCxcbiAgICAweDZiOTogNjgsXG4gICAgMHg2YmE6IDY4LFxuICAgIDB4NmJiOiA2OCxcbiAgICAweDZiYzogNjgsXG4gICAgMHg2YmQ6IDY4LFxuICAgIDB4NmJlOiA2OCxcbiAgICAweDZiZjogNjgsXG4gICAgMHg2YzA6IDgyLFxuICAgIDB4NmMxOiA2OCxcbiAgICAweDZjMjogNjgsXG4gICAgMHg2YzM6IDgyLFxuICAgIDB4NmM0OiA4MixcbiAgICAweDZjNTogODIsXG4gICAgMHg2YzY6IDgyLFxuICAgIDB4NmM3OiA4MixcbiAgICAweDZjODogODIsXG4gICAgMHg2Yzk6IDgyLFxuICAgIDB4NmNhOiA4MixcbiAgICAweDZjYjogODIsXG4gICAgMHg2Y2M6IDY4LFxuICAgIDB4NmNkOiA4MixcbiAgICAweDZjZTogNjgsXG4gICAgMHg2Y2Y6IDgyLFxuICAgIDB4NmQwOiA2OCxcbiAgICAweDZkMTogNjgsXG4gICAgMHg2ZDI6IDgyLFxuICAgIDB4NmQzOiA4MixcbiAgICAweDZkNTogODIsXG4gICAgMHg2ZGQ6IDg1LFxuICAgIDB4NmVlOiA4MixcbiAgICAweDZlZjogODIsXG4gICAgMHg2ZmE6IDY4LFxuICAgIDB4NmZiOiA2OCxcbiAgICAweDZmYzogNjgsXG4gICAgMHg2ZmY6IDY4LFxuICAgIDB4NzBmOiA4NCxcbiAgICAweDcxMDogODIsXG4gICAgMHg3MTI6IDY4LFxuICAgIDB4NzEzOiA2OCxcbiAgICAweDcxNDogNjgsXG4gICAgMHg3MTU6IDgyLFxuICAgIDB4NzE2OiA4MixcbiAgICAweDcxNzogODIsXG4gICAgMHg3MTg6IDgyLFxuICAgIDB4NzE5OiA4MixcbiAgICAweDcxYTogNjgsXG4gICAgMHg3MWI6IDY4LFxuICAgIDB4NzFjOiA2OCxcbiAgICAweDcxZDogNjgsXG4gICAgMHg3MWU6IDgyLFxuICAgIDB4NzFmOiA2OCxcbiAgICAweDcyMDogNjgsXG4gICAgMHg3MjE6IDY4LFxuICAgIDB4NzIyOiA2OCxcbiAgICAweDcyMzogNjgsXG4gICAgMHg3MjQ6IDY4LFxuICAgIDB4NzI1OiA2OCxcbiAgICAweDcyNjogNjgsXG4gICAgMHg3Mjc6IDY4LFxuICAgIDB4NzI4OiA4MixcbiAgICAweDcyOTogNjgsXG4gICAgMHg3MmE6IDgyLFxuICAgIDB4NzJiOiA2OCxcbiAgICAweDcyYzogODIsXG4gICAgMHg3MmQ6IDY4LFxuICAgIDB4NzJlOiA2OCxcbiAgICAweDcyZjogODIsXG4gICAgMHg3NGQ6IDgyLFxuICAgIDB4NzRlOiA2OCxcbiAgICAweDc0ZjogNjgsXG4gICAgMHg3NTA6IDY4LFxuICAgIDB4NzUxOiA2OCxcbiAgICAweDc1MjogNjgsXG4gICAgMHg3NTM6IDY4LFxuICAgIDB4NzU0OiA2OCxcbiAgICAweDc1NTogNjgsXG4gICAgMHg3NTY6IDY4LFxuICAgIDB4NzU3OiA2OCxcbiAgICAweDc1ODogNjgsXG4gICAgMHg3NTk6IDgyLFxuICAgIDB4NzVhOiA4MixcbiAgICAweDc1YjogODIsXG4gICAgMHg3NWM6IDY4LFxuICAgIDB4NzVkOiA2OCxcbiAgICAweDc1ZTogNjgsXG4gICAgMHg3NWY6IDY4LFxuICAgIDB4NzYwOiA2OCxcbiAgICAweDc2MTogNjgsXG4gICAgMHg3NjI6IDY4LFxuICAgIDB4NzYzOiA2OCxcbiAgICAweDc2NDogNjgsXG4gICAgMHg3NjU6IDY4LFxuICAgIDB4NzY2OiA2OCxcbiAgICAweDc2NzogNjgsXG4gICAgMHg3Njg6IDY4LFxuICAgIDB4NzY5OiA2OCxcbiAgICAweDc2YTogNjgsXG4gICAgMHg3NmI6IDgyLFxuICAgIDB4NzZjOiA4MixcbiAgICAweDc2ZDogNjgsXG4gICAgMHg3NmU6IDY4LFxuICAgIDB4NzZmOiA2OCxcbiAgICAweDc3MDogNjgsXG4gICAgMHg3NzE6IDgyLFxuICAgIDB4NzcyOiA2OCxcbiAgICAweDc3MzogODIsXG4gICAgMHg3NzQ6IDgyLFxuICAgIDB4Nzc1OiA2OCxcbiAgICAweDc3NjogNjgsXG4gICAgMHg3Nzc6IDY4LFxuICAgIDB4Nzc4OiA4MixcbiAgICAweDc3OTogODIsXG4gICAgMHg3N2E6IDY4LFxuICAgIDB4NzdiOiA2OCxcbiAgICAweDc3YzogNjgsXG4gICAgMHg3N2Q6IDY4LFxuICAgIDB4NzdlOiA2OCxcbiAgICAweDc3ZjogNjgsXG4gICAgMHg3Y2E6IDY4LFxuICAgIDB4N2NiOiA2OCxcbiAgICAweDdjYzogNjgsXG4gICAgMHg3Y2Q6IDY4LFxuICAgIDB4N2NlOiA2OCxcbiAgICAweDdjZjogNjgsXG4gICAgMHg3ZDA6IDY4LFxuICAgIDB4N2QxOiA2OCxcbiAgICAweDdkMjogNjgsXG4gICAgMHg3ZDM6IDY4LFxuICAgIDB4N2Q0OiA2OCxcbiAgICAweDdkNTogNjgsXG4gICAgMHg3ZDY6IDY4LFxuICAgIDB4N2Q3OiA2OCxcbiAgICAweDdkODogNjgsXG4gICAgMHg3ZDk6IDY4LFxuICAgIDB4N2RhOiA2OCxcbiAgICAweDdkYjogNjgsXG4gICAgMHg3ZGM6IDY4LFxuICAgIDB4N2RkOiA2OCxcbiAgICAweDdkZTogNjgsXG4gICAgMHg3ZGY6IDY4LFxuICAgIDB4N2UwOiA2OCxcbiAgICAweDdlMTogNjgsXG4gICAgMHg3ZTI6IDY4LFxuICAgIDB4N2UzOiA2OCxcbiAgICAweDdlNDogNjgsXG4gICAgMHg3ZTU6IDY4LFxuICAgIDB4N2U2OiA2OCxcbiAgICAweDdlNzogNjgsXG4gICAgMHg3ZTg6IDY4LFxuICAgIDB4N2U5OiA2OCxcbiAgICAweDdlYTogNjgsXG4gICAgMHg3ZmE6IDY3LFxuICAgIDB4ODQwOiA4MixcbiAgICAweDg0MTogNjgsXG4gICAgMHg4NDI6IDY4LFxuICAgIDB4ODQzOiA2OCxcbiAgICAweDg0NDogNjgsXG4gICAgMHg4NDU6IDY4LFxuICAgIDB4ODQ2OiA4MixcbiAgICAweDg0NzogODIsXG4gICAgMHg4NDg6IDY4LFxuICAgIDB4ODQ5OiA4MixcbiAgICAweDg0YTogNjgsXG4gICAgMHg4NGI6IDY4LFxuICAgIDB4ODRjOiA2OCxcbiAgICAweDg0ZDogNjgsXG4gICAgMHg4NGU6IDY4LFxuICAgIDB4ODRmOiA2OCxcbiAgICAweDg1MDogNjgsXG4gICAgMHg4NTE6IDY4LFxuICAgIDB4ODUyOiA2OCxcbiAgICAweDg1MzogNjgsXG4gICAgMHg4NTQ6IDgyLFxuICAgIDB4ODU1OiA2OCxcbiAgICAweDg1NjogODIsXG4gICAgMHg4NTc6IDgyLFxuICAgIDB4ODU4OiA4MixcbiAgICAweDg2MDogNjgsXG4gICAgMHg4NjE6IDg1LFxuICAgIDB4ODYyOiA2OCxcbiAgICAweDg2MzogNjgsXG4gICAgMHg4NjQ6IDY4LFxuICAgIDB4ODY1OiA2OCxcbiAgICAweDg2NjogODUsXG4gICAgMHg4Njc6IDgyLFxuICAgIDB4ODY4OiA2OCxcbiAgICAweDg2OTogODIsXG4gICAgMHg4NmE6IDgyLFxuICAgIDB4ODcwOiA4MixcbiAgICAweDg3MTogODIsXG4gICAgMHg4NzI6IDgyLFxuICAgIDB4ODczOiA4MixcbiAgICAweDg3NDogODIsXG4gICAgMHg4NzU6IDgyLFxuICAgIDB4ODc2OiA4MixcbiAgICAweDg3NzogODIsXG4gICAgMHg4Nzg6IDgyLFxuICAgIDB4ODc5OiA4MixcbiAgICAweDg3YTogODIsXG4gICAgMHg4N2I6IDgyLFxuICAgIDB4ODdjOiA4MixcbiAgICAweDg3ZDogODIsXG4gICAgMHg4N2U6IDgyLFxuICAgIDB4ODdmOiA4MixcbiAgICAweDg4MDogODIsXG4gICAgMHg4ODE6IDgyLFxuICAgIDB4ODgyOiA4MixcbiAgICAweDg4MzogNjcsXG4gICAgMHg4ODQ6IDY3LFxuICAgIDB4ODg1OiA2NyxcbiAgICAweDg4NjogNjgsXG4gICAgMHg4ODc6IDg1LFxuICAgIDB4ODg4OiA4NSxcbiAgICAweDg4OTogNjgsXG4gICAgMHg4OGE6IDY4LFxuICAgIDB4ODhiOiA2OCxcbiAgICAweDg4YzogNjgsXG4gICAgMHg4OGQ6IDY4LFxuICAgIDB4ODhlOiA4MixcbiAgICAweDg5MDogODUsXG4gICAgMHg4OTE6IDg1LFxuICAgIDB4OGEwOiA2OCxcbiAgICAweDhhMTogNjgsXG4gICAgMHg4YTI6IDY4LFxuICAgIDB4OGEzOiA2OCxcbiAgICAweDhhNDogNjgsXG4gICAgMHg4YTU6IDY4LFxuICAgIDB4OGE2OiA2OCxcbiAgICAweDhhNzogNjgsXG4gICAgMHg4YTg6IDY4LFxuICAgIDB4OGE5OiA2OCxcbiAgICAweDhhYTogODIsXG4gICAgMHg4YWI6IDgyLFxuICAgIDB4OGFjOiA4MixcbiAgICAweDhhZDogODUsXG4gICAgMHg4YWU6IDgyLFxuICAgIDB4OGFmOiA2OCxcbiAgICAweDhiMDogNjgsXG4gICAgMHg4YjE6IDgyLFxuICAgIDB4OGIyOiA4MixcbiAgICAweDhiMzogNjgsXG4gICAgMHg4YjQ6IDY4LFxuICAgIDB4OGI1OiA2OCxcbiAgICAweDhiNjogNjgsXG4gICAgMHg4Yjc6IDY4LFxuICAgIDB4OGI4OiA2OCxcbiAgICAweDhiOTogODIsXG4gICAgMHg4YmE6IDY4LFxuICAgIDB4OGJiOiA2OCxcbiAgICAweDhiYzogNjgsXG4gICAgMHg4YmQ6IDY4LFxuICAgIDB4OGJlOiA2OCxcbiAgICAweDhiZjogNjgsXG4gICAgMHg4YzA6IDY4LFxuICAgIDB4OGMxOiA2OCxcbiAgICAweDhjMjogNjgsXG4gICAgMHg4YzM6IDY4LFxuICAgIDB4OGM0OiA2OCxcbiAgICAweDhjNTogNjgsXG4gICAgMHg4YzY6IDY4LFxuICAgIDB4OGM3OiA2OCxcbiAgICAweDhjODogNjgsXG4gICAgMHg4ZTI6IDg1LFxuICAgIDB4MTgwNjogODUsXG4gICAgMHgxODA3OiA2OCxcbiAgICAweDE4MGE6IDY3LFxuICAgIDB4MTgwZTogODUsXG4gICAgMHgxODIwOiA2OCxcbiAgICAweDE4MjE6IDY4LFxuICAgIDB4MTgyMjogNjgsXG4gICAgMHgxODIzOiA2OCxcbiAgICAweDE4MjQ6IDY4LFxuICAgIDB4MTgyNTogNjgsXG4gICAgMHgxODI2OiA2OCxcbiAgICAweDE4Mjc6IDY4LFxuICAgIDB4MTgyODogNjgsXG4gICAgMHgxODI5OiA2OCxcbiAgICAweDE4MmE6IDY4LFxuICAgIDB4MTgyYjogNjgsXG4gICAgMHgxODJjOiA2OCxcbiAgICAweDE4MmQ6IDY4LFxuICAgIDB4MTgyZTogNjgsXG4gICAgMHgxODJmOiA2OCxcbiAgICAweDE4MzA6IDY4LFxuICAgIDB4MTgzMTogNjgsXG4gICAgMHgxODMyOiA2OCxcbiAgICAweDE4MzM6IDY4LFxuICAgIDB4MTgzNDogNjgsXG4gICAgMHgxODM1OiA2OCxcbiAgICAweDE4MzY6IDY4LFxuICAgIDB4MTgzNzogNjgsXG4gICAgMHgxODM4OiA2OCxcbiAgICAweDE4Mzk6IDY4LFxuICAgIDB4MTgzYTogNjgsXG4gICAgMHgxODNiOiA2OCxcbiAgICAweDE4M2M6IDY4LFxuICAgIDB4MTgzZDogNjgsXG4gICAgMHgxODNlOiA2OCxcbiAgICAweDE4M2Y6IDY4LFxuICAgIDB4MTg0MDogNjgsXG4gICAgMHgxODQxOiA2OCxcbiAgICAweDE4NDI6IDY4LFxuICAgIDB4MTg0MzogNjgsXG4gICAgMHgxODQ0OiA2OCxcbiAgICAweDE4NDU6IDY4LFxuICAgIDB4MTg0NjogNjgsXG4gICAgMHgxODQ3OiA2OCxcbiAgICAweDE4NDg6IDY4LFxuICAgIDB4MTg0OTogNjgsXG4gICAgMHgxODRhOiA2OCxcbiAgICAweDE4NGI6IDY4LFxuICAgIDB4MTg0YzogNjgsXG4gICAgMHgxODRkOiA2OCxcbiAgICAweDE4NGU6IDY4LFxuICAgIDB4MTg0ZjogNjgsXG4gICAgMHgxODUwOiA2OCxcbiAgICAweDE4NTE6IDY4LFxuICAgIDB4MTg1MjogNjgsXG4gICAgMHgxODUzOiA2OCxcbiAgICAweDE4NTQ6IDY4LFxuICAgIDB4MTg1NTogNjgsXG4gICAgMHgxODU2OiA2OCxcbiAgICAweDE4NTc6IDY4LFxuICAgIDB4MTg1ODogNjgsXG4gICAgMHgxODU5OiA2OCxcbiAgICAweDE4NWE6IDY4LFxuICAgIDB4MTg1YjogNjgsXG4gICAgMHgxODVjOiA2OCxcbiAgICAweDE4NWQ6IDY4LFxuICAgIDB4MTg1ZTogNjgsXG4gICAgMHgxODVmOiA2OCxcbiAgICAweDE4NjA6IDY4LFxuICAgIDB4MTg2MTogNjgsXG4gICAgMHgxODYyOiA2OCxcbiAgICAweDE4NjM6IDY4LFxuICAgIDB4MTg2NDogNjgsXG4gICAgMHgxODY1OiA2OCxcbiAgICAweDE4NjY6IDY4LFxuICAgIDB4MTg2NzogNjgsXG4gICAgMHgxODY4OiA2OCxcbiAgICAweDE4Njk6IDY4LFxuICAgIDB4MTg2YTogNjgsXG4gICAgMHgxODZiOiA2OCxcbiAgICAweDE4NmM6IDY4LFxuICAgIDB4MTg2ZDogNjgsXG4gICAgMHgxODZlOiA2OCxcbiAgICAweDE4NmY6IDY4LFxuICAgIDB4MTg3MDogNjgsXG4gICAgMHgxODcxOiA2OCxcbiAgICAweDE4NzI6IDY4LFxuICAgIDB4MTg3MzogNjgsXG4gICAgMHgxODc0OiA2OCxcbiAgICAweDE4NzU6IDY4LFxuICAgIDB4MTg3NjogNjgsXG4gICAgMHgxODc3OiA2OCxcbiAgICAweDE4Nzg6IDY4LFxuICAgIDB4MTg4MDogODUsXG4gICAgMHgxODgxOiA4NSxcbiAgICAweDE4ODI6IDg1LFxuICAgIDB4MTg4MzogODUsXG4gICAgMHgxODg0OiA4NSxcbiAgICAweDE4ODU6IDg0LFxuICAgIDB4MTg4NjogODQsXG4gICAgMHgxODg3OiA2OCxcbiAgICAweDE4ODg6IDY4LFxuICAgIDB4MTg4OTogNjgsXG4gICAgMHgxODhhOiA2OCxcbiAgICAweDE4OGI6IDY4LFxuICAgIDB4MTg4YzogNjgsXG4gICAgMHgxODhkOiA2OCxcbiAgICAweDE4OGU6IDY4LFxuICAgIDB4MTg4ZjogNjgsXG4gICAgMHgxODkwOiA2OCxcbiAgICAweDE4OTE6IDY4LFxuICAgIDB4MTg5MjogNjgsXG4gICAgMHgxODkzOiA2OCxcbiAgICAweDE4OTQ6IDY4LFxuICAgIDB4MTg5NTogNjgsXG4gICAgMHgxODk2OiA2OCxcbiAgICAweDE4OTc6IDY4LFxuICAgIDB4MTg5ODogNjgsXG4gICAgMHgxODk5OiA2OCxcbiAgICAweDE4OWE6IDY4LFxuICAgIDB4MTg5YjogNjgsXG4gICAgMHgxODljOiA2OCxcbiAgICAweDE4OWQ6IDY4LFxuICAgIDB4MTg5ZTogNjgsXG4gICAgMHgxODlmOiA2OCxcbiAgICAweDE4YTA6IDY4LFxuICAgIDB4MThhMTogNjgsXG4gICAgMHgxOGEyOiA2OCxcbiAgICAweDE4YTM6IDY4LFxuICAgIDB4MThhNDogNjgsXG4gICAgMHgxOGE1OiA2OCxcbiAgICAweDE4YTY6IDY4LFxuICAgIDB4MThhNzogNjgsXG4gICAgMHgxOGE4OiA2OCxcbiAgICAweDE4YWE6IDY4LFxuICAgIDB4MjAwYzogODUsXG4gICAgMHgyMDBkOiA2NyxcbiAgICAweDIwMmY6IDg1LFxuICAgIDB4MjA2NjogODUsXG4gICAgMHgyMDY3OiA4NSxcbiAgICAweDIwNjg6IDg1LFxuICAgIDB4MjA2OTogODUsXG4gICAgMHhhODQwOiA2OCxcbiAgICAweGE4NDE6IDY4LFxuICAgIDB4YTg0MjogNjgsXG4gICAgMHhhODQzOiA2OCxcbiAgICAweGE4NDQ6IDY4LFxuICAgIDB4YTg0NTogNjgsXG4gICAgMHhhODQ2OiA2OCxcbiAgICAweGE4NDc6IDY4LFxuICAgIDB4YTg0ODogNjgsXG4gICAgMHhhODQ5OiA2OCxcbiAgICAweGE4NGE6IDY4LFxuICAgIDB4YTg0YjogNjgsXG4gICAgMHhhODRjOiA2OCxcbiAgICAweGE4NGQ6IDY4LFxuICAgIDB4YTg0ZTogNjgsXG4gICAgMHhhODRmOiA2OCxcbiAgICAweGE4NTA6IDY4LFxuICAgIDB4YTg1MTogNjgsXG4gICAgMHhhODUyOiA2OCxcbiAgICAweGE4NTM6IDY4LFxuICAgIDB4YTg1NDogNjgsXG4gICAgMHhhODU1OiA2OCxcbiAgICAweGE4NTY6IDY4LFxuICAgIDB4YTg1NzogNjgsXG4gICAgMHhhODU4OiA2OCxcbiAgICAweGE4NTk6IDY4LFxuICAgIDB4YTg1YTogNjgsXG4gICAgMHhhODViOiA2OCxcbiAgICAweGE4NWM6IDY4LFxuICAgIDB4YTg1ZDogNjgsXG4gICAgMHhhODVlOiA2OCxcbiAgICAweGE4NWY6IDY4LFxuICAgIDB4YTg2MDogNjgsXG4gICAgMHhhODYxOiA2OCxcbiAgICAweGE4NjI6IDY4LFxuICAgIDB4YTg2MzogNjgsXG4gICAgMHhhODY0OiA2OCxcbiAgICAweGE4NjU6IDY4LFxuICAgIDB4YTg2NjogNjgsXG4gICAgMHhhODY3OiA2OCxcbiAgICAweGE4Njg6IDY4LFxuICAgIDB4YTg2OTogNjgsXG4gICAgMHhhODZhOiA2OCxcbiAgICAweGE4NmI6IDY4LFxuICAgIDB4YTg2YzogNjgsXG4gICAgMHhhODZkOiA2OCxcbiAgICAweGE4NmU6IDY4LFxuICAgIDB4YTg2ZjogNjgsXG4gICAgMHhhODcwOiA2OCxcbiAgICAweGE4NzE6IDY4LFxuICAgIDB4YTg3MjogNzYsXG4gICAgMHhhODczOiA4NSxcbiAgICAweDEwYWMwOiA2OCxcbiAgICAweDEwYWMxOiA2OCxcbiAgICAweDEwYWMyOiA2OCxcbiAgICAweDEwYWMzOiA2OCxcbiAgICAweDEwYWM0OiA2OCxcbiAgICAweDEwYWM1OiA4MixcbiAgICAweDEwYWM2OiA4NSxcbiAgICAweDEwYWM3OiA4MixcbiAgICAweDEwYWM4OiA4NSxcbiAgICAweDEwYWM5OiA4MixcbiAgICAweDEwYWNhOiA4MixcbiAgICAweDEwYWNiOiA4NSxcbiAgICAweDEwYWNjOiA4NSxcbiAgICAweDEwYWNkOiA3NixcbiAgICAweDEwYWNlOiA4MixcbiAgICAweDEwYWNmOiA4MixcbiAgICAweDEwYWQwOiA4MixcbiAgICAweDEwYWQxOiA4MixcbiAgICAweDEwYWQyOiA4MixcbiAgICAweDEwYWQzOiA2OCxcbiAgICAweDEwYWQ0OiA2OCxcbiAgICAweDEwYWQ1OiA2OCxcbiAgICAweDEwYWQ2OiA2OCxcbiAgICAweDEwYWQ3OiA3NixcbiAgICAweDEwYWQ4OiA2OCxcbiAgICAweDEwYWQ5OiA2OCxcbiAgICAweDEwYWRhOiA2OCxcbiAgICAweDEwYWRiOiA2OCxcbiAgICAweDEwYWRjOiA2OCxcbiAgICAweDEwYWRkOiA4MixcbiAgICAweDEwYWRlOiA2OCxcbiAgICAweDEwYWRmOiA2OCxcbiAgICAweDEwYWUwOiA2OCxcbiAgICAweDEwYWUxOiA4MixcbiAgICAweDEwYWUyOiA4NSxcbiAgICAweDEwYWUzOiA4NSxcbiAgICAweDEwYWU0OiA4MixcbiAgICAweDEwYWViOiA2OCxcbiAgICAweDEwYWVjOiA2OCxcbiAgICAweDEwYWVkOiA2OCxcbiAgICAweDEwYWVlOiA2OCxcbiAgICAweDEwYWVmOiA4MixcbiAgICAweDEwYjgwOiA2OCxcbiAgICAweDEwYjgxOiA4MixcbiAgICAweDEwYjgyOiA2OCxcbiAgICAweDEwYjgzOiA4MixcbiAgICAweDEwYjg0OiA4MixcbiAgICAweDEwYjg1OiA4MixcbiAgICAweDEwYjg2OiA2OCxcbiAgICAweDEwYjg3OiA2OCxcbiAgICAweDEwYjg4OiA2OCxcbiAgICAweDEwYjg5OiA4MixcbiAgICAweDEwYjhhOiA2OCxcbiAgICAweDEwYjhiOiA2OCxcbiAgICAweDEwYjhjOiA4MixcbiAgICAweDEwYjhkOiA2OCxcbiAgICAweDEwYjhlOiA4MixcbiAgICAweDEwYjhmOiA4MixcbiAgICAweDEwYjkwOiA2OCxcbiAgICAweDEwYjkxOiA4MixcbiAgICAweDEwYmE5OiA4MixcbiAgICAweDEwYmFhOiA4MixcbiAgICAweDEwYmFiOiA4MixcbiAgICAweDEwYmFjOiA4MixcbiAgICAweDEwYmFkOiA2OCxcbiAgICAweDEwYmFlOiA2OCxcbiAgICAweDEwYmFmOiA4NSxcbiAgICAweDEwZDAwOiA3NixcbiAgICAweDEwZDAxOiA2OCxcbiAgICAweDEwZDAyOiA2OCxcbiAgICAweDEwZDAzOiA2OCxcbiAgICAweDEwZDA0OiA2OCxcbiAgICAweDEwZDA1OiA2OCxcbiAgICAweDEwZDA2OiA2OCxcbiAgICAweDEwZDA3OiA2OCxcbiAgICAweDEwZDA4OiA2OCxcbiAgICAweDEwZDA5OiA2OCxcbiAgICAweDEwZDBhOiA2OCxcbiAgICAweDEwZDBiOiA2OCxcbiAgICAweDEwZDBjOiA2OCxcbiAgICAweDEwZDBkOiA2OCxcbiAgICAweDEwZDBlOiA2OCxcbiAgICAweDEwZDBmOiA2OCxcbiAgICAweDEwZDEwOiA2OCxcbiAgICAweDEwZDExOiA2OCxcbiAgICAweDEwZDEyOiA2OCxcbiAgICAweDEwZDEzOiA2OCxcbiAgICAweDEwZDE0OiA2OCxcbiAgICAweDEwZDE1OiA2OCxcbiAgICAweDEwZDE2OiA2OCxcbiAgICAweDEwZDE3OiA2OCxcbiAgICAweDEwZDE4OiA2OCxcbiAgICAweDEwZDE5OiA2OCxcbiAgICAweDEwZDFhOiA2OCxcbiAgICAweDEwZDFiOiA2OCxcbiAgICAweDEwZDFjOiA2OCxcbiAgICAweDEwZDFkOiA2OCxcbiAgICAweDEwZDFlOiA2OCxcbiAgICAweDEwZDFmOiA2OCxcbiAgICAweDEwZDIwOiA2OCxcbiAgICAweDEwZDIxOiA2OCxcbiAgICAweDEwZDIyOiA4MixcbiAgICAweDEwZDIzOiA2OCxcbiAgICAweDEwZjMwOiA2OCxcbiAgICAweDEwZjMxOiA2OCxcbiAgICAweDEwZjMyOiA2OCxcbiAgICAweDEwZjMzOiA4MixcbiAgICAweDEwZjM0OiA2OCxcbiAgICAweDEwZjM1OiA2OCxcbiAgICAweDEwZjM2OiA2OCxcbiAgICAweDEwZjM3OiA2OCxcbiAgICAweDEwZjM4OiA2OCxcbiAgICAweDEwZjM5OiA2OCxcbiAgICAweDEwZjNhOiA2OCxcbiAgICAweDEwZjNiOiA2OCxcbiAgICAweDEwZjNjOiA2OCxcbiAgICAweDEwZjNkOiA2OCxcbiAgICAweDEwZjNlOiA2OCxcbiAgICAweDEwZjNmOiA2OCxcbiAgICAweDEwZjQwOiA2OCxcbiAgICAweDEwZjQxOiA2OCxcbiAgICAweDEwZjQyOiA2OCxcbiAgICAweDEwZjQzOiA2OCxcbiAgICAweDEwZjQ0OiA2OCxcbiAgICAweDEwZjQ1OiA4NSxcbiAgICAweDEwZjUxOiA2OCxcbiAgICAweDEwZjUyOiA2OCxcbiAgICAweDEwZjUzOiA2OCxcbiAgICAweDEwZjU0OiA4MixcbiAgICAweDEwZjcwOiA2OCxcbiAgICAweDEwZjcxOiA2OCxcbiAgICAweDEwZjcyOiA2OCxcbiAgICAweDEwZjczOiA2OCxcbiAgICAweDEwZjc0OiA4MixcbiAgICAweDEwZjc1OiA4MixcbiAgICAweDEwZjc2OiA2OCxcbiAgICAweDEwZjc3OiA2OCxcbiAgICAweDEwZjc4OiA2OCxcbiAgICAweDEwZjc5OiA2OCxcbiAgICAweDEwZjdhOiA2OCxcbiAgICAweDEwZjdiOiA2OCxcbiAgICAweDEwZjdjOiA2OCxcbiAgICAweDEwZjdkOiA2OCxcbiAgICAweDEwZjdlOiA2OCxcbiAgICAweDEwZjdmOiA2OCxcbiAgICAweDEwZjgwOiA2OCxcbiAgICAweDEwZjgxOiA2OCxcbiAgICAweDEwZmIwOiA2OCxcbiAgICAweDEwZmIxOiA4NSxcbiAgICAweDEwZmIyOiA2OCxcbiAgICAweDEwZmIzOiA2OCxcbiAgICAweDEwZmI0OiA4MixcbiAgICAweDEwZmI1OiA4MixcbiAgICAweDEwZmI2OiA4MixcbiAgICAweDEwZmI3OiA4NSxcbiAgICAweDEwZmI4OiA2OCxcbiAgICAweDEwZmI5OiA4MixcbiAgICAweDEwZmJhOiA4MixcbiAgICAweDEwZmJiOiA2OCxcbiAgICAweDEwZmJjOiA2OCxcbiAgICAweDEwZmJkOiA4MixcbiAgICAweDEwZmJlOiA2OCxcbiAgICAweDEwZmJmOiA2OCxcbiAgICAweDEwZmMwOiA4NSxcbiAgICAweDEwZmMxOiA2OCxcbiAgICAweDEwZmMyOiA4MixcbiAgICAweDEwZmMzOiA4MixcbiAgICAweDEwZmM0OiA2OCxcbiAgICAweDEwZmM1OiA4NSxcbiAgICAweDEwZmM2OiA4NSxcbiAgICAweDEwZmM3OiA4NSxcbiAgICAweDEwZmM4OiA4NSxcbiAgICAweDEwZmM5OiA4MixcbiAgICAweDEwZmNhOiA2OCxcbiAgICAweDEwZmNiOiA3NixcbiAgICAweDExMGJkOiA4NSxcbiAgICAweDExMGNkOiA4NSxcbiAgICAweDFlOTAwOiA2OCxcbiAgICAweDFlOTAxOiA2OCxcbiAgICAweDFlOTAyOiA2OCxcbiAgICAweDFlOTAzOiA2OCxcbiAgICAweDFlOTA0OiA2OCxcbiAgICAweDFlOTA1OiA2OCxcbiAgICAweDFlOTA2OiA2OCxcbiAgICAweDFlOTA3OiA2OCxcbiAgICAweDFlOTA4OiA2OCxcbiAgICAweDFlOTA5OiA2OCxcbiAgICAweDFlOTBhOiA2OCxcbiAgICAweDFlOTBiOiA2OCxcbiAgICAweDFlOTBjOiA2OCxcbiAgICAweDFlOTBkOiA2OCxcbiAgICAweDFlOTBlOiA2OCxcbiAgICAweDFlOTBmOiA2OCxcbiAgICAweDFlOTEwOiA2OCxcbiAgICAweDFlOTExOiA2OCxcbiAgICAweDFlOTEyOiA2OCxcbiAgICAweDFlOTEzOiA2OCxcbiAgICAweDFlOTE0OiA2OCxcbiAgICAweDFlOTE1OiA2OCxcbiAgICAweDFlOTE2OiA2OCxcbiAgICAweDFlOTE3OiA2OCxcbiAgICAweDFlOTE4OiA2OCxcbiAgICAweDFlOTE5OiA2OCxcbiAgICAweDFlOTFhOiA2OCxcbiAgICAweDFlOTFiOiA2OCxcbiAgICAweDFlOTFjOiA2OCxcbiAgICAweDFlOTFkOiA2OCxcbiAgICAweDFlOTFlOiA2OCxcbiAgICAweDFlOTFmOiA2OCxcbiAgICAweDFlOTIwOiA2OCxcbiAgICAweDFlOTIxOiA2OCxcbiAgICAweDFlOTIyOiA2OCxcbiAgICAweDFlOTIzOiA2OCxcbiAgICAweDFlOTI0OiA2OCxcbiAgICAweDFlOTI1OiA2OCxcbiAgICAweDFlOTI2OiA2OCxcbiAgICAweDFlOTI3OiA2OCxcbiAgICAweDFlOTI4OiA2OCxcbiAgICAweDFlOTI5OiA2OCxcbiAgICAweDFlOTJhOiA2OCxcbiAgICAweDFlOTJiOiA2OCxcbiAgICAweDFlOTJjOiA2OCxcbiAgICAweDFlOTJkOiA2OCxcbiAgICAweDFlOTJlOiA2OCxcbiAgICAweDFlOTJmOiA2OCxcbiAgICAweDFlOTMwOiA2OCxcbiAgICAweDFlOTMxOiA2OCxcbiAgICAweDFlOTMyOiA2OCxcbiAgICAweDFlOTMzOiA2OCxcbiAgICAweDFlOTM0OiA2OCxcbiAgICAweDFlOTM1OiA2OCxcbiAgICAweDFlOTM2OiA2OCxcbiAgICAweDFlOTM3OiA2OCxcbiAgICAweDFlOTM4OiA2OCxcbiAgICAweDFlOTM5OiA2OCxcbiAgICAweDFlOTNhOiA2OCxcbiAgICAweDFlOTNiOiA2OCxcbiAgICAweDFlOTNjOiA2OCxcbiAgICAweDFlOTNkOiA2OCxcbiAgICAweDFlOTNlOiA2OCxcbiAgICAweDFlOTNmOiA2OCxcbiAgICAweDFlOTQwOiA2OCxcbiAgICAweDFlOTQxOiA2OCxcbiAgICAweDFlOTQyOiA2OCxcbiAgICAweDFlOTQzOiA2OCxcbiAgICAweDFlOTRiOiA4NCxcbn1cbmNvZGVwb2ludF9jbGFzc2VzID0ge1xuICAgICdQVkFMSUQnOiAoXG4gICAgICAgIDB4MmQwMDAwMDAyZSxcbiAgICAgICAgMHgzMDAwMDAwMDNhLFxuICAgICAgICAweDYxMDAwMDAwN2IsXG4gICAgICAgIDB4ZGYwMDAwMDBmNyxcbiAgICAgICAgMHhmODAwMDAwMTAwLFxuICAgICAgICAweDEwMTAwMDAwMTAyLFxuICAgICAgICAweDEwMzAwMDAwMTA0LFxuICAgICAgICAweDEwNTAwMDAwMTA2LFxuICAgICAgICAweDEwNzAwMDAwMTA4LFxuICAgICAgICAweDEwOTAwMDAwMTBhLFxuICAgICAgICAweDEwYjAwMDAwMTBjLFxuICAgICAgICAweDEwZDAwMDAwMTBlLFxuICAgICAgICAweDEwZjAwMDAwMTEwLFxuICAgICAgICAweDExMTAwMDAwMTEyLFxuICAgICAgICAweDExMzAwMDAwMTE0LFxuICAgICAgICAweDExNTAwMDAwMTE2LFxuICAgICAgICAweDExNzAwMDAwMTE4LFxuICAgICAgICAweDExOTAwMDAwMTFhLFxuICAgICAgICAweDExYjAwMDAwMTFjLFxuICAgICAgICAweDExZDAwMDAwMTFlLFxuICAgICAgICAweDExZjAwMDAwMTIwLFxuICAgICAgICAweDEyMTAwMDAwMTIyLFxuICAgICAgICAweDEyMzAwMDAwMTI0LFxuICAgICAgICAweDEyNTAwMDAwMTI2LFxuICAgICAgICAweDEyNzAwMDAwMTI4LFxuICAgICAgICAweDEyOTAwMDAwMTJhLFxuICAgICAgICAweDEyYjAwMDAwMTJjLFxuICAgICAgICAweDEyZDAwMDAwMTJlLFxuICAgICAgICAweDEyZjAwMDAwMTMwLFxuICAgICAgICAweDEzMTAwMDAwMTMyLFxuICAgICAgICAweDEzNTAwMDAwMTM2LFxuICAgICAgICAweDEzNzAwMDAwMTM5LFxuICAgICAgICAweDEzYTAwMDAwMTNiLFxuICAgICAgICAweDEzYzAwMDAwMTNkLFxuICAgICAgICAweDEzZTAwMDAwMTNmLFxuICAgICAgICAweDE0MjAwMDAwMTQzLFxuICAgICAgICAweDE0NDAwMDAwMTQ1LFxuICAgICAgICAweDE0NjAwMDAwMTQ3LFxuICAgICAgICAweDE0ODAwMDAwMTQ5LFxuICAgICAgICAweDE0YjAwMDAwMTRjLFxuICAgICAgICAweDE0ZDAwMDAwMTRlLFxuICAgICAgICAweDE0ZjAwMDAwMTUwLFxuICAgICAgICAweDE1MTAwMDAwMTUyLFxuICAgICAgICAweDE1MzAwMDAwMTU0LFxuICAgICAgICAweDE1NTAwMDAwMTU2LFxuICAgICAgICAweDE1NzAwMDAwMTU4LFxuICAgICAgICAweDE1OTAwMDAwMTVhLFxuICAgICAgICAweDE1YjAwMDAwMTVjLFxuICAgICAgICAweDE1ZDAwMDAwMTVlLFxuICAgICAgICAweDE1ZjAwMDAwMTYwLFxuICAgICAgICAweDE2MTAwMDAwMTYyLFxuICAgICAgICAweDE2MzAwMDAwMTY0LFxuICAgICAgICAweDE2NTAwMDAwMTY2LFxuICAgICAgICAweDE2NzAwMDAwMTY4LFxuICAgICAgICAweDE2OTAwMDAwMTZhLFxuICAgICAgICAweDE2YjAwMDAwMTZjLFxuICAgICAgICAweDE2ZDAwMDAwMTZlLFxuICAgICAgICAweDE2ZjAwMDAwMTcwLFxuICAgICAgICAweDE3MTAwMDAwMTcyLFxuICAgICAgICAweDE3MzAwMDAwMTc0LFxuICAgICAgICAweDE3NTAwMDAwMTc2LFxuICAgICAgICAweDE3NzAwMDAwMTc4LFxuICAgICAgICAweDE3YTAwMDAwMTdiLFxuICAgICAgICAweDE3YzAwMDAwMTdkLFxuICAgICAgICAweDE3ZTAwMDAwMTdmLFxuICAgICAgICAweDE4MDAwMDAwMTgxLFxuICAgICAgICAweDE4MzAwMDAwMTg0LFxuICAgICAgICAweDE4NTAwMDAwMTg2LFxuICAgICAgICAweDE4ODAwMDAwMTg5LFxuICAgICAgICAweDE4YzAwMDAwMThlLFxuICAgICAgICAweDE5MjAwMDAwMTkzLFxuICAgICAgICAweDE5NTAwMDAwMTk2LFxuICAgICAgICAweDE5OTAwMDAwMTljLFxuICAgICAgICAweDE5ZTAwMDAwMTlmLFxuICAgICAgICAweDFhMTAwMDAwMWEyLFxuICAgICAgICAweDFhMzAwMDAwMWE0LFxuICAgICAgICAweDFhNTAwMDAwMWE2LFxuICAgICAgICAweDFhODAwMDAwMWE5LFxuICAgICAgICAweDFhYTAwMDAwMWFjLFxuICAgICAgICAweDFhZDAwMDAwMWFlLFxuICAgICAgICAweDFiMDAwMDAwMWIxLFxuICAgICAgICAweDFiNDAwMDAwMWI1LFxuICAgICAgICAweDFiNjAwMDAwMWI3LFxuICAgICAgICAweDFiOTAwMDAwMWJjLFxuICAgICAgICAweDFiZDAwMDAwMWM0LFxuICAgICAgICAweDFjZTAwMDAwMWNmLFxuICAgICAgICAweDFkMDAwMDAwMWQxLFxuICAgICAgICAweDFkMjAwMDAwMWQzLFxuICAgICAgICAweDFkNDAwMDAwMWQ1LFxuICAgICAgICAweDFkNjAwMDAwMWQ3LFxuICAgICAgICAweDFkODAwMDAwMWQ5LFxuICAgICAgICAweDFkYTAwMDAwMWRiLFxuICAgICAgICAweDFkYzAwMDAwMWRlLFxuICAgICAgICAweDFkZjAwMDAwMWUwLFxuICAgICAgICAweDFlMTAwMDAwMWUyLFxuICAgICAgICAweDFlMzAwMDAwMWU0LFxuICAgICAgICAweDFlNTAwMDAwMWU2LFxuICAgICAgICAweDFlNzAwMDAwMWU4LFxuICAgICAgICAweDFlOTAwMDAwMWVhLFxuICAgICAgICAweDFlYjAwMDAwMWVjLFxuICAgICAgICAweDFlZDAwMDAwMWVlLFxuICAgICAgICAweDFlZjAwMDAwMWYxLFxuICAgICAgICAweDFmNTAwMDAwMWY2LFxuICAgICAgICAweDFmOTAwMDAwMWZhLFxuICAgICAgICAweDFmYjAwMDAwMWZjLFxuICAgICAgICAweDFmZDAwMDAwMWZlLFxuICAgICAgICAweDFmZjAwMDAwMjAwLFxuICAgICAgICAweDIwMTAwMDAwMjAyLFxuICAgICAgICAweDIwMzAwMDAwMjA0LFxuICAgICAgICAweDIwNTAwMDAwMjA2LFxuICAgICAgICAweDIwNzAwMDAwMjA4LFxuICAgICAgICAweDIwOTAwMDAwMjBhLFxuICAgICAgICAweDIwYjAwMDAwMjBjLFxuICAgICAgICAweDIwZDAwMDAwMjBlLFxuICAgICAgICAweDIwZjAwMDAwMjEwLFxuICAgICAgICAweDIxMTAwMDAwMjEyLFxuICAgICAgICAweDIxMzAwMDAwMjE0LFxuICAgICAgICAweDIxNTAwMDAwMjE2LFxuICAgICAgICAweDIxNzAwMDAwMjE4LFxuICAgICAgICAweDIxOTAwMDAwMjFhLFxuICAgICAgICAweDIxYjAwMDAwMjFjLFxuICAgICAgICAweDIxZDAwMDAwMjFlLFxuICAgICAgICAweDIxZjAwMDAwMjIwLFxuICAgICAgICAweDIyMTAwMDAwMjIyLFxuICAgICAgICAweDIyMzAwMDAwMjI0LFxuICAgICAgICAweDIyNTAwMDAwMjI2LFxuICAgICAgICAweDIyNzAwMDAwMjI4LFxuICAgICAgICAweDIyOTAwMDAwMjJhLFxuICAgICAgICAweDIyYjAwMDAwMjJjLFxuICAgICAgICAweDIyZDAwMDAwMjJlLFxuICAgICAgICAweDIyZjAwMDAwMjMwLFxuICAgICAgICAweDIzMTAwMDAwMjMyLFxuICAgICAgICAweDIzMzAwMDAwMjNhLFxuICAgICAgICAweDIzYzAwMDAwMjNkLFxuICAgICAgICAweDIzZjAwMDAwMjQxLFxuICAgICAgICAweDI0MjAwMDAwMjQzLFxuICAgICAgICAweDI0NzAwMDAwMjQ4LFxuICAgICAgICAweDI0OTAwMDAwMjRhLFxuICAgICAgICAweDI0YjAwMDAwMjRjLFxuICAgICAgICAweDI0ZDAwMDAwMjRlLFxuICAgICAgICAweDI0ZjAwMDAwMmIwLFxuICAgICAgICAweDJiOTAwMDAwMmMyLFxuICAgICAgICAweDJjNjAwMDAwMmQyLFxuICAgICAgICAweDJlYzAwMDAwMmVkLFxuICAgICAgICAweDJlZTAwMDAwMmVmLFxuICAgICAgICAweDMwMDAwMDAwMzQwLFxuICAgICAgICAweDM0MjAwMDAwMzQzLFxuICAgICAgICAweDM0NjAwMDAwMzRmLFxuICAgICAgICAweDM1MDAwMDAwMzcwLFxuICAgICAgICAweDM3MTAwMDAwMzcyLFxuICAgICAgICAweDM3MzAwMDAwMzc0LFxuICAgICAgICAweDM3NzAwMDAwMzc4LFxuICAgICAgICAweDM3YjAwMDAwMzdlLFxuICAgICAgICAweDM5MDAwMDAwMzkxLFxuICAgICAgICAweDNhYzAwMDAwM2NmLFxuICAgICAgICAweDNkNzAwMDAwM2Q4LFxuICAgICAgICAweDNkOTAwMDAwM2RhLFxuICAgICAgICAweDNkYjAwMDAwM2RjLFxuICAgICAgICAweDNkZDAwMDAwM2RlLFxuICAgICAgICAweDNkZjAwMDAwM2UwLFxuICAgICAgICAweDNlMTAwMDAwM2UyLFxuICAgICAgICAweDNlMzAwMDAwM2U0LFxuICAgICAgICAweDNlNTAwMDAwM2U2LFxuICAgICAgICAweDNlNzAwMDAwM2U4LFxuICAgICAgICAweDNlOTAwMDAwM2VhLFxuICAgICAgICAweDNlYjAwMDAwM2VjLFxuICAgICAgICAweDNlZDAwMDAwM2VlLFxuICAgICAgICAweDNlZjAwMDAwM2YwLFxuICAgICAgICAweDNmMzAwMDAwM2Y0LFxuICAgICAgICAweDNmODAwMDAwM2Y5LFxuICAgICAgICAweDNmYjAwMDAwM2ZkLFxuICAgICAgICAweDQzMDAwMDAwNDYwLFxuICAgICAgICAweDQ2MTAwMDAwNDYyLFxuICAgICAgICAweDQ2MzAwMDAwNDY0LFxuICAgICAgICAweDQ2NTAwMDAwNDY2LFxuICAgICAgICAweDQ2NzAwMDAwNDY4LFxuICAgICAgICAweDQ2OTAwMDAwNDZhLFxuICAgICAgICAweDQ2YjAwMDAwNDZjLFxuICAgICAgICAweDQ2ZDAwMDAwNDZlLFxuICAgICAgICAweDQ2ZjAwMDAwNDcwLFxuICAgICAgICAweDQ3MTAwMDAwNDcyLFxuICAgICAgICAweDQ3MzAwMDAwNDc0LFxuICAgICAgICAweDQ3NTAwMDAwNDc2LFxuICAgICAgICAweDQ3NzAwMDAwNDc4LFxuICAgICAgICAweDQ3OTAwMDAwNDdhLFxuICAgICAgICAweDQ3YjAwMDAwNDdjLFxuICAgICAgICAweDQ3ZDAwMDAwNDdlLFxuICAgICAgICAweDQ3ZjAwMDAwNDgwLFxuICAgICAgICAweDQ4MTAwMDAwNDgyLFxuICAgICAgICAweDQ4MzAwMDAwNDg4LFxuICAgICAgICAweDQ4YjAwMDAwNDhjLFxuICAgICAgICAweDQ4ZDAwMDAwNDhlLFxuICAgICAgICAweDQ4ZjAwMDAwNDkwLFxuICAgICAgICAweDQ5MTAwMDAwNDkyLFxuICAgICAgICAweDQ5MzAwMDAwNDk0LFxuICAgICAgICAweDQ5NTAwMDAwNDk2LFxuICAgICAgICAweDQ5NzAwMDAwNDk4LFxuICAgICAgICAweDQ5OTAwMDAwNDlhLFxuICAgICAgICAweDQ5YjAwMDAwNDljLFxuICAgICAgICAweDQ5ZDAwMDAwNDllLFxuICAgICAgICAweDQ5ZjAwMDAwNGEwLFxuICAgICAgICAweDRhMTAwMDAwNGEyLFxuICAgICAgICAweDRhMzAwMDAwNGE0LFxuICAgICAgICAweDRhNTAwMDAwNGE2LFxuICAgICAgICAweDRhNzAwMDAwNGE4LFxuICAgICAgICAweDRhOTAwMDAwNGFhLFxuICAgICAgICAweDRhYjAwMDAwNGFjLFxuICAgICAgICAweDRhZDAwMDAwNGFlLFxuICAgICAgICAweDRhZjAwMDAwNGIwLFxuICAgICAgICAweDRiMTAwMDAwNGIyLFxuICAgICAgICAweDRiMzAwMDAwNGI0LFxuICAgICAgICAweDRiNTAwMDAwNGI2LFxuICAgICAgICAweDRiNzAwMDAwNGI4LFxuICAgICAgICAweDRiOTAwMDAwNGJhLFxuICAgICAgICAweDRiYjAwMDAwNGJjLFxuICAgICAgICAweDRiZDAwMDAwNGJlLFxuICAgICAgICAweDRiZjAwMDAwNGMwLFxuICAgICAgICAweDRjMjAwMDAwNGMzLFxuICAgICAgICAweDRjNDAwMDAwNGM1LFxuICAgICAgICAweDRjNjAwMDAwNGM3LFxuICAgICAgICAweDRjODAwMDAwNGM5LFxuICAgICAgICAweDRjYTAwMDAwNGNiLFxuICAgICAgICAweDRjYzAwMDAwNGNkLFxuICAgICAgICAweDRjZTAwMDAwNGQwLFxuICAgICAgICAweDRkMTAwMDAwNGQyLFxuICAgICAgICAweDRkMzAwMDAwNGQ0LFxuICAgICAgICAweDRkNTAwMDAwNGQ2LFxuICAgICAgICAweDRkNzAwMDAwNGQ4LFxuICAgICAgICAweDRkOTAwMDAwNGRhLFxuICAgICAgICAweDRkYjAwMDAwNGRjLFxuICAgICAgICAweDRkZDAwMDAwNGRlLFxuICAgICAgICAweDRkZjAwMDAwNGUwLFxuICAgICAgICAweDRlMTAwMDAwNGUyLFxuICAgICAgICAweDRlMzAwMDAwNGU0LFxuICAgICAgICAweDRlNTAwMDAwNGU2LFxuICAgICAgICAweDRlNzAwMDAwNGU4LFxuICAgICAgICAweDRlOTAwMDAwNGVhLFxuICAgICAgICAweDRlYjAwMDAwNGVjLFxuICAgICAgICAweDRlZDAwMDAwNGVlLFxuICAgICAgICAweDRlZjAwMDAwNGYwLFxuICAgICAgICAweDRmMTAwMDAwNGYyLFxuICAgICAgICAweDRmMzAwMDAwNGY0LFxuICAgICAgICAweDRmNTAwMDAwNGY2LFxuICAgICAgICAweDRmNzAwMDAwNGY4LFxuICAgICAgICAweDRmOTAwMDAwNGZhLFxuICAgICAgICAweDRmYjAwMDAwNGZjLFxuICAgICAgICAweDRmZDAwMDAwNGZlLFxuICAgICAgICAweDRmZjAwMDAwNTAwLFxuICAgICAgICAweDUwMTAwMDAwNTAyLFxuICAgICAgICAweDUwMzAwMDAwNTA0LFxuICAgICAgICAweDUwNTAwMDAwNTA2LFxuICAgICAgICAweDUwNzAwMDAwNTA4LFxuICAgICAgICAweDUwOTAwMDAwNTBhLFxuICAgICAgICAweDUwYjAwMDAwNTBjLFxuICAgICAgICAweDUwZDAwMDAwNTBlLFxuICAgICAgICAweDUwZjAwMDAwNTEwLFxuICAgICAgICAweDUxMTAwMDAwNTEyLFxuICAgICAgICAweDUxMzAwMDAwNTE0LFxuICAgICAgICAweDUxNTAwMDAwNTE2LFxuICAgICAgICAweDUxNzAwMDAwNTE4LFxuICAgICAgICAweDUxOTAwMDAwNTFhLFxuICAgICAgICAweDUxYjAwMDAwNTFjLFxuICAgICAgICAweDUxZDAwMDAwNTFlLFxuICAgICAgICAweDUxZjAwMDAwNTIwLFxuICAgICAgICAweDUyMTAwMDAwNTIyLFxuICAgICAgICAweDUyMzAwMDAwNTI0LFxuICAgICAgICAweDUyNTAwMDAwNTI2LFxuICAgICAgICAweDUyNzAwMDAwNTI4LFxuICAgICAgICAweDUyOTAwMDAwNTJhLFxuICAgICAgICAweDUyYjAwMDAwNTJjLFxuICAgICAgICAweDUyZDAwMDAwNTJlLFxuICAgICAgICAweDUyZjAwMDAwNTMwLFxuICAgICAgICAweDU1OTAwMDAwNTVhLFxuICAgICAgICAweDU2MDAwMDAwNTg3LFxuICAgICAgICAweDU4ODAwMDAwNTg5LFxuICAgICAgICAweDU5MTAwMDAwNWJlLFxuICAgICAgICAweDViZjAwMDAwNWMwLFxuICAgICAgICAweDVjMTAwMDAwNWMzLFxuICAgICAgICAweDVjNDAwMDAwNWM2LFxuICAgICAgICAweDVjNzAwMDAwNWM4LFxuICAgICAgICAweDVkMDAwMDAwNWViLFxuICAgICAgICAweDVlZjAwMDAwNWYzLFxuICAgICAgICAweDYxMDAwMDAwNjFiLFxuICAgICAgICAweDYyMDAwMDAwNjQwLFxuICAgICAgICAweDY0MTAwMDAwNjYwLFxuICAgICAgICAweDY2ZTAwMDAwNjc1LFxuICAgICAgICAweDY3OTAwMDAwNmQ0LFxuICAgICAgICAweDZkNTAwMDAwNmRkLFxuICAgICAgICAweDZkZjAwMDAwNmU5LFxuICAgICAgICAweDZlYTAwMDAwNmYwLFxuICAgICAgICAweDZmYTAwMDAwNzAwLFxuICAgICAgICAweDcxMDAwMDAwNzRiLFxuICAgICAgICAweDc0ZDAwMDAwN2IyLFxuICAgICAgICAweDdjMDAwMDAwN2Y2LFxuICAgICAgICAweDdmZDAwMDAwN2ZlLFxuICAgICAgICAweDgwMDAwMDAwODJlLFxuICAgICAgICAweDg0MDAwMDAwODVjLFxuICAgICAgICAweDg2MDAwMDAwODZiLFxuICAgICAgICAweDg3MDAwMDAwODg4LFxuICAgICAgICAweDg4OTAwMDAwODhmLFxuICAgICAgICAweDg5ODAwMDAwOGUyLFxuICAgICAgICAweDhlMzAwMDAwOTU4LFxuICAgICAgICAweDk2MDAwMDAwOTY0LFxuICAgICAgICAweDk2NjAwMDAwOTcwLFxuICAgICAgICAweDk3MTAwMDAwOTg0LFxuICAgICAgICAweDk4NTAwMDAwOThkLFxuICAgICAgICAweDk4ZjAwMDAwOTkxLFxuICAgICAgICAweDk5MzAwMDAwOWE5LFxuICAgICAgICAweDlhYTAwMDAwOWIxLFxuICAgICAgICAweDliMjAwMDAwOWIzLFxuICAgICAgICAweDliNjAwMDAwOWJhLFxuICAgICAgICAweDliYzAwMDAwOWM1LFxuICAgICAgICAweDljNzAwMDAwOWM5LFxuICAgICAgICAweDljYjAwMDAwOWNmLFxuICAgICAgICAweDlkNzAwMDAwOWQ4LFxuICAgICAgICAweDllMDAwMDAwOWU0LFxuICAgICAgICAweDllNjAwMDAwOWYyLFxuICAgICAgICAweDlmYzAwMDAwOWZkLFxuICAgICAgICAweDlmZTAwMDAwOWZmLFxuICAgICAgICAweGEwMTAwMDAwYTA0LFxuICAgICAgICAweGEwNTAwMDAwYTBiLFxuICAgICAgICAweGEwZjAwMDAwYTExLFxuICAgICAgICAweGExMzAwMDAwYTI5LFxuICAgICAgICAweGEyYTAwMDAwYTMxLFxuICAgICAgICAweGEzMjAwMDAwYTMzLFxuICAgICAgICAweGEzNTAwMDAwYTM2LFxuICAgICAgICAweGEzODAwMDAwYTNhLFxuICAgICAgICAweGEzYzAwMDAwYTNkLFxuICAgICAgICAweGEzZTAwMDAwYTQzLFxuICAgICAgICAweGE0NzAwMDAwYTQ5LFxuICAgICAgICAweGE0YjAwMDAwYTRlLFxuICAgICAgICAweGE1MTAwMDAwYTUyLFxuICAgICAgICAweGE1YzAwMDAwYTVkLFxuICAgICAgICAweGE2NjAwMDAwYTc2LFxuICAgICAgICAweGE4MTAwMDAwYTg0LFxuICAgICAgICAweGE4NTAwMDAwYThlLFxuICAgICAgICAweGE4ZjAwMDAwYTkyLFxuICAgICAgICAweGE5MzAwMDAwYWE5LFxuICAgICAgICAweGFhYTAwMDAwYWIxLFxuICAgICAgICAweGFiMjAwMDAwYWI0LFxuICAgICAgICAweGFiNTAwMDAwYWJhLFxuICAgICAgICAweGFiYzAwMDAwYWM2LFxuICAgICAgICAweGFjNzAwMDAwYWNhLFxuICAgICAgICAweGFjYjAwMDAwYWNlLFxuICAgICAgICAweGFkMDAwMDAwYWQxLFxuICAgICAgICAweGFlMDAwMDAwYWU0LFxuICAgICAgICAweGFlNjAwMDAwYWYwLFxuICAgICAgICAweGFmOTAwMDAwYjAwLFxuICAgICAgICAweGIwMTAwMDAwYjA0LFxuICAgICAgICAweGIwNTAwMDAwYjBkLFxuICAgICAgICAweGIwZjAwMDAwYjExLFxuICAgICAgICAweGIxMzAwMDAwYjI5LFxuICAgICAgICAweGIyYTAwMDAwYjMxLFxuICAgICAgICAweGIzMjAwMDAwYjM0LFxuICAgICAgICAweGIzNTAwMDAwYjNhLFxuICAgICAgICAweGIzYzAwMDAwYjQ1LFxuICAgICAgICAweGI0NzAwMDAwYjQ5LFxuICAgICAgICAweGI0YjAwMDAwYjRlLFxuICAgICAgICAweGI1NTAwMDAwYjU4LFxuICAgICAgICAweGI1ZjAwMDAwYjY0LFxuICAgICAgICAweGI2NjAwMDAwYjcwLFxuICAgICAgICAweGI3MTAwMDAwYjcyLFxuICAgICAgICAweGI4MjAwMDAwYjg0LFxuICAgICAgICAweGI4NTAwMDAwYjhiLFxuICAgICAgICAweGI4ZTAwMDAwYjkxLFxuICAgICAgICAweGI5MjAwMDAwYjk2LFxuICAgICAgICAweGI5OTAwMDAwYjliLFxuICAgICAgICAweGI5YzAwMDAwYjlkLFxuICAgICAgICAweGI5ZTAwMDAwYmEwLFxuICAgICAgICAweGJhMzAwMDAwYmE1LFxuICAgICAgICAweGJhODAwMDAwYmFiLFxuICAgICAgICAweGJhZTAwMDAwYmJhLFxuICAgICAgICAweGJiZTAwMDAwYmMzLFxuICAgICAgICAweGJjNjAwMDAwYmM5LFxuICAgICAgICAweGJjYTAwMDAwYmNlLFxuICAgICAgICAweGJkMDAwMDAwYmQxLFxuICAgICAgICAweGJkNzAwMDAwYmQ4LFxuICAgICAgICAweGJlNjAwMDAwYmYwLFxuICAgICAgICAweGMwMDAwMDAwYzBkLFxuICAgICAgICAweGMwZTAwMDAwYzExLFxuICAgICAgICAweGMxMjAwMDAwYzI5LFxuICAgICAgICAweGMyYTAwMDAwYzNhLFxuICAgICAgICAweGMzYzAwMDAwYzQ1LFxuICAgICAgICAweGM0NjAwMDAwYzQ5LFxuICAgICAgICAweGM0YTAwMDAwYzRlLFxuICAgICAgICAweGM1NTAwMDAwYzU3LFxuICAgICAgICAweGM1ODAwMDAwYzViLFxuICAgICAgICAweGM1ZDAwMDAwYzVlLFxuICAgICAgICAweGM2MDAwMDAwYzY0LFxuICAgICAgICAweGM2NjAwMDAwYzcwLFxuICAgICAgICAweGM4MDAwMDAwYzg0LFxuICAgICAgICAweGM4NTAwMDAwYzhkLFxuICAgICAgICAweGM4ZTAwMDAwYzkxLFxuICAgICAgICAweGM5MjAwMDAwY2E5LFxuICAgICAgICAweGNhYTAwMDAwY2I0LFxuICAgICAgICAweGNiNTAwMDAwY2JhLFxuICAgICAgICAweGNiYzAwMDAwY2M1LFxuICAgICAgICAweGNjNjAwMDAwY2M5LFxuICAgICAgICAweGNjYTAwMDAwY2NlLFxuICAgICAgICAweGNkNTAwMDAwY2Q3LFxuICAgICAgICAweGNkZDAwMDAwY2RmLFxuICAgICAgICAweGNlMDAwMDAwY2U0LFxuICAgICAgICAweGNlNjAwMDAwY2YwLFxuICAgICAgICAweGNmMTAwMDAwY2YzLFxuICAgICAgICAweGQwMDAwMDAwZDBkLFxuICAgICAgICAweGQwZTAwMDAwZDExLFxuICAgICAgICAweGQxMjAwMDAwZDQ1LFxuICAgICAgICAweGQ0NjAwMDAwZDQ5LFxuICAgICAgICAweGQ0YTAwMDAwZDRmLFxuICAgICAgICAweGQ1NDAwMDAwZDU4LFxuICAgICAgICAweGQ1ZjAwMDAwZDY0LFxuICAgICAgICAweGQ2NjAwMDAwZDcwLFxuICAgICAgICAweGQ3YTAwMDAwZDgwLFxuICAgICAgICAweGQ4MTAwMDAwZDg0LFxuICAgICAgICAweGQ4NTAwMDAwZDk3LFxuICAgICAgICAweGQ5YTAwMDAwZGIyLFxuICAgICAgICAweGRiMzAwMDAwZGJjLFxuICAgICAgICAweGRiZDAwMDAwZGJlLFxuICAgICAgICAweGRjMDAwMDAwZGM3LFxuICAgICAgICAweGRjYTAwMDAwZGNiLFxuICAgICAgICAweGRjZjAwMDAwZGQ1LFxuICAgICAgICAweGRkNjAwMDAwZGQ3LFxuICAgICAgICAweGRkODAwMDAwZGUwLFxuICAgICAgICAweGRlNjAwMDAwZGYwLFxuICAgICAgICAweGRmMjAwMDAwZGY0LFxuICAgICAgICAweGUwMTAwMDAwZTMzLFxuICAgICAgICAweGUzNDAwMDAwZTNiLFxuICAgICAgICAweGU0MDAwMDAwZTRmLFxuICAgICAgICAweGU1MDAwMDAwZTVhLFxuICAgICAgICAweGU4MTAwMDAwZTgzLFxuICAgICAgICAweGU4NDAwMDAwZTg1LFxuICAgICAgICAweGU4NjAwMDAwZThiLFxuICAgICAgICAweGU4YzAwMDAwZWE0LFxuICAgICAgICAweGVhNTAwMDAwZWE2LFxuICAgICAgICAweGVhNzAwMDAwZWIzLFxuICAgICAgICAweGViNDAwMDAwZWJlLFxuICAgICAgICAweGVjMDAwMDAwZWM1LFxuICAgICAgICAweGVjNjAwMDAwZWM3LFxuICAgICAgICAweGVjODAwMDAwZWNlLFxuICAgICAgICAweGVkMDAwMDAwZWRhLFxuICAgICAgICAweGVkZTAwMDAwZWUwLFxuICAgICAgICAweGYwMDAwMDAwZjAxLFxuICAgICAgICAweGYwYjAwMDAwZjBjLFxuICAgICAgICAweGYxODAwMDAwZjFhLFxuICAgICAgICAweGYyMDAwMDAwZjJhLFxuICAgICAgICAweGYzNTAwMDAwZjM2LFxuICAgICAgICAweGYzNzAwMDAwZjM4LFxuICAgICAgICAweGYzOTAwMDAwZjNhLFxuICAgICAgICAweGYzZTAwMDAwZjQzLFxuICAgICAgICAweGY0NDAwMDAwZjQ4LFxuICAgICAgICAweGY0OTAwMDAwZjRkLFxuICAgICAgICAweGY0ZTAwMDAwZjUyLFxuICAgICAgICAweGY1MzAwMDAwZjU3LFxuICAgICAgICAweGY1ODAwMDAwZjVjLFxuICAgICAgICAweGY1ZDAwMDAwZjY5LFxuICAgICAgICAweGY2YTAwMDAwZjZkLFxuICAgICAgICAweGY3MTAwMDAwZjczLFxuICAgICAgICAweGY3NDAwMDAwZjc1LFxuICAgICAgICAweGY3YTAwMDAwZjgxLFxuICAgICAgICAweGY4MjAwMDAwZjg1LFxuICAgICAgICAweGY4NjAwMDAwZjkzLFxuICAgICAgICAweGY5NDAwMDAwZjk4LFxuICAgICAgICAweGY5OTAwMDAwZjlkLFxuICAgICAgICAweGY5ZTAwMDAwZmEyLFxuICAgICAgICAweGZhMzAwMDAwZmE3LFxuICAgICAgICAweGZhODAwMDAwZmFjLFxuICAgICAgICAweGZhZDAwMDAwZmI5LFxuICAgICAgICAweGZiYTAwMDAwZmJkLFxuICAgICAgICAweGZjNjAwMDAwZmM3LFxuICAgICAgICAweDEwMDAwMDAwMTA0YSxcbiAgICAgICAgMHgxMDUwMDAwMDEwOWUsXG4gICAgICAgIDB4MTBkMDAwMDAxMGZiLFxuICAgICAgICAweDEwZmQwMDAwMTEwMCxcbiAgICAgICAgMHgxMjAwMDAwMDEyNDksXG4gICAgICAgIDB4MTI0YTAwMDAxMjRlLFxuICAgICAgICAweDEyNTAwMDAwMTI1NyxcbiAgICAgICAgMHgxMjU4MDAwMDEyNTksXG4gICAgICAgIDB4MTI1YTAwMDAxMjVlLFxuICAgICAgICAweDEyNjAwMDAwMTI4OSxcbiAgICAgICAgMHgxMjhhMDAwMDEyOGUsXG4gICAgICAgIDB4MTI5MDAwMDAxMmIxLFxuICAgICAgICAweDEyYjIwMDAwMTJiNixcbiAgICAgICAgMHgxMmI4MDAwMDEyYmYsXG4gICAgICAgIDB4MTJjMDAwMDAxMmMxLFxuICAgICAgICAweDEyYzIwMDAwMTJjNixcbiAgICAgICAgMHgxMmM4MDAwMDEyZDcsXG4gICAgICAgIDB4MTJkODAwMDAxMzExLFxuICAgICAgICAweDEzMTIwMDAwMTMxNixcbiAgICAgICAgMHgxMzE4MDAwMDEzNWIsXG4gICAgICAgIDB4MTM1ZDAwMDAxMzYwLFxuICAgICAgICAweDEzODAwMDAwMTM5MCxcbiAgICAgICAgMHgxM2EwMDAwMDEzZjYsXG4gICAgICAgIDB4MTQwMTAwMDAxNjZkLFxuICAgICAgICAweDE2NmYwMDAwMTY4MCxcbiAgICAgICAgMHgxNjgxMDAwMDE2OWIsXG4gICAgICAgIDB4MTZhMDAwMDAxNmViLFxuICAgICAgICAweDE2ZjEwMDAwMTZmOSxcbiAgICAgICAgMHgxNzAwMDAwMDE3MTYsXG4gICAgICAgIDB4MTcxZjAwMDAxNzM1LFxuICAgICAgICAweDE3NDAwMDAwMTc1NCxcbiAgICAgICAgMHgxNzYwMDAwMDE3NmQsXG4gICAgICAgIDB4MTc2ZTAwMDAxNzcxLFxuICAgICAgICAweDE3NzIwMDAwMTc3NCxcbiAgICAgICAgMHgxNzgwMDAwMDE3YjQsXG4gICAgICAgIDB4MTdiNjAwMDAxN2Q0LFxuICAgICAgICAweDE3ZDcwMDAwMTdkOCxcbiAgICAgICAgMHgxN2RjMDAwMDE3ZGUsXG4gICAgICAgIDB4MTdlMDAwMDAxN2VhLFxuICAgICAgICAweDE4MTAwMDAwMTgxYSxcbiAgICAgICAgMHgxODIwMDAwMDE4NzksXG4gICAgICAgIDB4MTg4MDAwMDAxOGFiLFxuICAgICAgICAweDE4YjAwMDAwMThmNixcbiAgICAgICAgMHgxOTAwMDAwMDE5MWYsXG4gICAgICAgIDB4MTkyMDAwMDAxOTJjLFxuICAgICAgICAweDE5MzAwMDAwMTkzYyxcbiAgICAgICAgMHgxOTQ2MDAwMDE5NmUsXG4gICAgICAgIDB4MTk3MDAwMDAxOTc1LFxuICAgICAgICAweDE5ODAwMDAwMTlhYyxcbiAgICAgICAgMHgxOWIwMDAwMDE5Y2EsXG4gICAgICAgIDB4MTlkMDAwMDAxOWRhLFxuICAgICAgICAweDFhMDAwMDAwMWExYyxcbiAgICAgICAgMHgxYTIwMDAwMDFhNWYsXG4gICAgICAgIDB4MWE2MDAwMDAxYTdkLFxuICAgICAgICAweDFhN2YwMDAwMWE4YSxcbiAgICAgICAgMHgxYTkwMDAwMDFhOWEsXG4gICAgICAgIDB4MWFhNzAwMDAxYWE4LFxuICAgICAgICAweDFhYjAwMDAwMWFiZSxcbiAgICAgICAgMHgxYWJmMDAwMDFhY2YsXG4gICAgICAgIDB4MWIwMDAwMDAxYjRkLFxuICAgICAgICAweDFiNTAwMDAwMWI1YSxcbiAgICAgICAgMHgxYjZiMDAwMDFiNzQsXG4gICAgICAgIDB4MWI4MDAwMDAxYmY0LFxuICAgICAgICAweDFjMDAwMDAwMWMzOCxcbiAgICAgICAgMHgxYzQwMDAwMDFjNGEsXG4gICAgICAgIDB4MWM0ZDAwMDAxYzdlLFxuICAgICAgICAweDFjZDAwMDAwMWNkMyxcbiAgICAgICAgMHgxY2Q0MDAwMDFjZmIsXG4gICAgICAgIDB4MWQwMDAwMDAxZDJjLFxuICAgICAgICAweDFkMmYwMDAwMWQzMCxcbiAgICAgICAgMHgxZDNiMDAwMDFkM2MsXG4gICAgICAgIDB4MWQ0ZTAwMDAxZDRmLFxuICAgICAgICAweDFkNmIwMDAwMWQ3OCxcbiAgICAgICAgMHgxZDc5MDAwMDFkOWIsXG4gICAgICAgIDB4MWRjMDAwMDAxZTAwLFxuICAgICAgICAweDFlMDEwMDAwMWUwMixcbiAgICAgICAgMHgxZTAzMDAwMDFlMDQsXG4gICAgICAgIDB4MWUwNTAwMDAxZTA2LFxuICAgICAgICAweDFlMDcwMDAwMWUwOCxcbiAgICAgICAgMHgxZTA5MDAwMDFlMGEsXG4gICAgICAgIDB4MWUwYjAwMDAxZTBjLFxuICAgICAgICAweDFlMGQwMDAwMWUwZSxcbiAgICAgICAgMHgxZTBmMDAwMDFlMTAsXG4gICAgICAgIDB4MWUxMTAwMDAxZTEyLFxuICAgICAgICAweDFlMTMwMDAwMWUxNCxcbiAgICAgICAgMHgxZTE1MDAwMDFlMTYsXG4gICAgICAgIDB4MWUxNzAwMDAxZTE4LFxuICAgICAgICAweDFlMTkwMDAwMWUxYSxcbiAgICAgICAgMHgxZTFiMDAwMDFlMWMsXG4gICAgICAgIDB4MWUxZDAwMDAxZTFlLFxuICAgICAgICAweDFlMWYwMDAwMWUyMCxcbiAgICAgICAgMHgxZTIxMDAwMDFlMjIsXG4gICAgICAgIDB4MWUyMzAwMDAxZTI0LFxuICAgICAgICAweDFlMjUwMDAwMWUyNixcbiAgICAgICAgMHgxZTI3MDAwMDFlMjgsXG4gICAgICAgIDB4MWUyOTAwMDAxZTJhLFxuICAgICAgICAweDFlMmIwMDAwMWUyYyxcbiAgICAgICAgMHgxZTJkMDAwMDFlMmUsXG4gICAgICAgIDB4MWUyZjAwMDAxZTMwLFxuICAgICAgICAweDFlMzEwMDAwMWUzMixcbiAgICAgICAgMHgxZTMzMDAwMDFlMzQsXG4gICAgICAgIDB4MWUzNTAwMDAxZTM2LFxuICAgICAgICAweDFlMzcwMDAwMWUzOCxcbiAgICAgICAgMHgxZTM5MDAwMDFlM2EsXG4gICAgICAgIDB4MWUzYjAwMDAxZTNjLFxuICAgICAgICAweDFlM2QwMDAwMWUzZSxcbiAgICAgICAgMHgxZTNmMDAwMDFlNDAsXG4gICAgICAgIDB4MWU0MTAwMDAxZTQyLFxuICAgICAgICAweDFlNDMwMDAwMWU0NCxcbiAgICAgICAgMHgxZTQ1MDAwMDFlNDYsXG4gICAgICAgIDB4MWU0NzAwMDAxZTQ4LFxuICAgICAgICAweDFlNDkwMDAwMWU0YSxcbiAgICAgICAgMHgxZTRiMDAwMDFlNGMsXG4gICAgICAgIDB4MWU0ZDAwMDAxZTRlLFxuICAgICAgICAweDFlNGYwMDAwMWU1MCxcbiAgICAgICAgMHgxZTUxMDAwMDFlNTIsXG4gICAgICAgIDB4MWU1MzAwMDAxZTU0LFxuICAgICAgICAweDFlNTUwMDAwMWU1NixcbiAgICAgICAgMHgxZTU3MDAwMDFlNTgsXG4gICAgICAgIDB4MWU1OTAwMDAxZTVhLFxuICAgICAgICAweDFlNWIwMDAwMWU1YyxcbiAgICAgICAgMHgxZTVkMDAwMDFlNWUsXG4gICAgICAgIDB4MWU1ZjAwMDAxZTYwLFxuICAgICAgICAweDFlNjEwMDAwMWU2MixcbiAgICAgICAgMHgxZTYzMDAwMDFlNjQsXG4gICAgICAgIDB4MWU2NTAwMDAxZTY2LFxuICAgICAgICAweDFlNjcwMDAwMWU2OCxcbiAgICAgICAgMHgxZTY5MDAwMDFlNmEsXG4gICAgICAgIDB4MWU2YjAwMDAxZTZjLFxuICAgICAgICAweDFlNmQwMDAwMWU2ZSxcbiAgICAgICAgMHgxZTZmMDAwMDFlNzAsXG4gICAgICAgIDB4MWU3MTAwMDAxZTcyLFxuICAgICAgICAweDFlNzMwMDAwMWU3NCxcbiAgICAgICAgMHgxZTc1MDAwMDFlNzYsXG4gICAgICAgIDB4MWU3NzAwMDAxZTc4LFxuICAgICAgICAweDFlNzkwMDAwMWU3YSxcbiAgICAgICAgMHgxZTdiMDAwMDFlN2MsXG4gICAgICAgIDB4MWU3ZDAwMDAxZTdlLFxuICAgICAgICAweDFlN2YwMDAwMWU4MCxcbiAgICAgICAgMHgxZTgxMDAwMDFlODIsXG4gICAgICAgIDB4MWU4MzAwMDAxZTg0LFxuICAgICAgICAweDFlODUwMDAwMWU4NixcbiAgICAgICAgMHgxZTg3MDAwMDFlODgsXG4gICAgICAgIDB4MWU4OTAwMDAxZThhLFxuICAgICAgICAweDFlOGIwMDAwMWU4YyxcbiAgICAgICAgMHgxZThkMDAwMDFlOGUsXG4gICAgICAgIDB4MWU4ZjAwMDAxZTkwLFxuICAgICAgICAweDFlOTEwMDAwMWU5MixcbiAgICAgICAgMHgxZTkzMDAwMDFlOTQsXG4gICAgICAgIDB4MWU5NTAwMDAxZTlhLFxuICAgICAgICAweDFlOWMwMDAwMWU5ZSxcbiAgICAgICAgMHgxZTlmMDAwMDFlYTAsXG4gICAgICAgIDB4MWVhMTAwMDAxZWEyLFxuICAgICAgICAweDFlYTMwMDAwMWVhNCxcbiAgICAgICAgMHgxZWE1MDAwMDFlYTYsXG4gICAgICAgIDB4MWVhNzAwMDAxZWE4LFxuICAgICAgICAweDFlYTkwMDAwMWVhYSxcbiAgICAgICAgMHgxZWFiMDAwMDFlYWMsXG4gICAgICAgIDB4MWVhZDAwMDAxZWFlLFxuICAgICAgICAweDFlYWYwMDAwMWViMCxcbiAgICAgICAgMHgxZWIxMDAwMDFlYjIsXG4gICAgICAgIDB4MWViMzAwMDAxZWI0LFxuICAgICAgICAweDFlYjUwMDAwMWViNixcbiAgICAgICAgMHgxZWI3MDAwMDFlYjgsXG4gICAgICAgIDB4MWViOTAwMDAxZWJhLFxuICAgICAgICAweDFlYmIwMDAwMWViYyxcbiAgICAgICAgMHgxZWJkMDAwMDFlYmUsXG4gICAgICAgIDB4MWViZjAwMDAxZWMwLFxuICAgICAgICAweDFlYzEwMDAwMWVjMixcbiAgICAgICAgMHgxZWMzMDAwMDFlYzQsXG4gICAgICAgIDB4MWVjNTAwMDAxZWM2LFxuICAgICAgICAweDFlYzcwMDAwMWVjOCxcbiAgICAgICAgMHgxZWM5MDAwMDFlY2EsXG4gICAgICAgIDB4MWVjYjAwMDAxZWNjLFxuICAgICAgICAweDFlY2QwMDAwMWVjZSxcbiAgICAgICAgMHgxZWNmMDAwMDFlZDAsXG4gICAgICAgIDB4MWVkMTAwMDAxZWQyLFxuICAgICAgICAweDFlZDMwMDAwMWVkNCxcbiAgICAgICAgMHgxZWQ1MDAwMDFlZDYsXG4gICAgICAgIDB4MWVkNzAwMDAxZWQ4LFxuICAgICAgICAweDFlZDkwMDAwMWVkYSxcbiAgICAgICAgMHgxZWRiMDAwMDFlZGMsXG4gICAgICAgIDB4MWVkZDAwMDAxZWRlLFxuICAgICAgICAweDFlZGYwMDAwMWVlMCxcbiAgICAgICAgMHgxZWUxMDAwMDFlZTIsXG4gICAgICAgIDB4MWVlMzAwMDAxZWU0LFxuICAgICAgICAweDFlZTUwMDAwMWVlNixcbiAgICAgICAgMHgxZWU3MDAwMDFlZTgsXG4gICAgICAgIDB4MWVlOTAwMDAxZWVhLFxuICAgICAgICAweDFlZWIwMDAwMWVlYyxcbiAgICAgICAgMHgxZWVkMDAwMDFlZWUsXG4gICAgICAgIDB4MWVlZjAwMDAxZWYwLFxuICAgICAgICAweDFlZjEwMDAwMWVmMixcbiAgICAgICAgMHgxZWYzMDAwMDFlZjQsXG4gICAgICAgIDB4MWVmNTAwMDAxZWY2LFxuICAgICAgICAweDFlZjcwMDAwMWVmOCxcbiAgICAgICAgMHgxZWY5MDAwMDFlZmEsXG4gICAgICAgIDB4MWVmYjAwMDAxZWZjLFxuICAgICAgICAweDFlZmQwMDAwMWVmZSxcbiAgICAgICAgMHgxZWZmMDAwMDFmMDgsXG4gICAgICAgIDB4MWYxMDAwMDAxZjE2LFxuICAgICAgICAweDFmMjAwMDAwMWYyOCxcbiAgICAgICAgMHgxZjMwMDAwMDFmMzgsXG4gICAgICAgIDB4MWY0MDAwMDAxZjQ2LFxuICAgICAgICAweDFmNTAwMDAwMWY1OCxcbiAgICAgICAgMHgxZjYwMDAwMDFmNjgsXG4gICAgICAgIDB4MWY3MDAwMDAxZjcxLFxuICAgICAgICAweDFmNzIwMDAwMWY3MyxcbiAgICAgICAgMHgxZjc0MDAwMDFmNzUsXG4gICAgICAgIDB4MWY3NjAwMDAxZjc3LFxuICAgICAgICAweDFmNzgwMDAwMWY3OSxcbiAgICAgICAgMHgxZjdhMDAwMDFmN2IsXG4gICAgICAgIDB4MWY3YzAwMDAxZjdkLFxuICAgICAgICAweDFmYjAwMDAwMWZiMixcbiAgICAgICAgMHgxZmI2MDAwMDFmYjcsXG4gICAgICAgIDB4MWZjNjAwMDAxZmM3LFxuICAgICAgICAweDFmZDAwMDAwMWZkMyxcbiAgICAgICAgMHgxZmQ2MDAwMDFmZDgsXG4gICAgICAgIDB4MWZlMDAwMDAxZmUzLFxuICAgICAgICAweDFmZTQwMDAwMWZlOCxcbiAgICAgICAgMHgxZmY2MDAwMDFmZjcsXG4gICAgICAgIDB4MjE0ZTAwMDAyMTRmLFxuICAgICAgICAweDIxODQwMDAwMjE4NSxcbiAgICAgICAgMHgyYzMwMDAwMDJjNjAsXG4gICAgICAgIDB4MmM2MTAwMDAyYzYyLFxuICAgICAgICAweDJjNjUwMDAwMmM2NyxcbiAgICAgICAgMHgyYzY4MDAwMDJjNjksXG4gICAgICAgIDB4MmM2YTAwMDAyYzZiLFxuICAgICAgICAweDJjNmMwMDAwMmM2ZCxcbiAgICAgICAgMHgyYzcxMDAwMDJjNzIsXG4gICAgICAgIDB4MmM3MzAwMDAyYzc1LFxuICAgICAgICAweDJjNzYwMDAwMmM3YyxcbiAgICAgICAgMHgyYzgxMDAwMDJjODIsXG4gICAgICAgIDB4MmM4MzAwMDAyYzg0LFxuICAgICAgICAweDJjODUwMDAwMmM4NixcbiAgICAgICAgMHgyYzg3MDAwMDJjODgsXG4gICAgICAgIDB4MmM4OTAwMDAyYzhhLFxuICAgICAgICAweDJjOGIwMDAwMmM4YyxcbiAgICAgICAgMHgyYzhkMDAwMDJjOGUsXG4gICAgICAgIDB4MmM4ZjAwMDAyYzkwLFxuICAgICAgICAweDJjOTEwMDAwMmM5MixcbiAgICAgICAgMHgyYzkzMDAwMDJjOTQsXG4gICAgICAgIDB4MmM5NTAwMDAyYzk2LFxuICAgICAgICAweDJjOTcwMDAwMmM5OCxcbiAgICAgICAgMHgyYzk5MDAwMDJjOWEsXG4gICAgICAgIDB4MmM5YjAwMDAyYzljLFxuICAgICAgICAweDJjOWQwMDAwMmM5ZSxcbiAgICAgICAgMHgyYzlmMDAwMDJjYTAsXG4gICAgICAgIDB4MmNhMTAwMDAyY2EyLFxuICAgICAgICAweDJjYTMwMDAwMmNhNCxcbiAgICAgICAgMHgyY2E1MDAwMDJjYTYsXG4gICAgICAgIDB4MmNhNzAwMDAyY2E4LFxuICAgICAgICAweDJjYTkwMDAwMmNhYSxcbiAgICAgICAgMHgyY2FiMDAwMDJjYWMsXG4gICAgICAgIDB4MmNhZDAwMDAyY2FlLFxuICAgICAgICAweDJjYWYwMDAwMmNiMCxcbiAgICAgICAgMHgyY2IxMDAwMDJjYjIsXG4gICAgICAgIDB4MmNiMzAwMDAyY2I0LFxuICAgICAgICAweDJjYjUwMDAwMmNiNixcbiAgICAgICAgMHgyY2I3MDAwMDJjYjgsXG4gICAgICAgIDB4MmNiOTAwMDAyY2JhLFxuICAgICAgICAweDJjYmIwMDAwMmNiYyxcbiAgICAgICAgMHgyY2JkMDAwMDJjYmUsXG4gICAgICAgIDB4MmNiZjAwMDAyY2MwLFxuICAgICAgICAweDJjYzEwMDAwMmNjMixcbiAgICAgICAgMHgyY2MzMDAwMDJjYzQsXG4gICAgICAgIDB4MmNjNTAwMDAyY2M2LFxuICAgICAgICAweDJjYzcwMDAwMmNjOCxcbiAgICAgICAgMHgyY2M5MDAwMDJjY2EsXG4gICAgICAgIDB4MmNjYjAwMDAyY2NjLFxuICAgICAgICAweDJjY2QwMDAwMmNjZSxcbiAgICAgICAgMHgyY2NmMDAwMDJjZDAsXG4gICAgICAgIDB4MmNkMTAwMDAyY2QyLFxuICAgICAgICAweDJjZDMwMDAwMmNkNCxcbiAgICAgICAgMHgyY2Q1MDAwMDJjZDYsXG4gICAgICAgIDB4MmNkNzAwMDAyY2Q4LFxuICAgICAgICAweDJjZDkwMDAwMmNkYSxcbiAgICAgICAgMHgyY2RiMDAwMDJjZGMsXG4gICAgICAgIDB4MmNkZDAwMDAyY2RlLFxuICAgICAgICAweDJjZGYwMDAwMmNlMCxcbiAgICAgICAgMHgyY2UxMDAwMDJjZTIsXG4gICAgICAgIDB4MmNlMzAwMDAyY2U1LFxuICAgICAgICAweDJjZWMwMDAwMmNlZCxcbiAgICAgICAgMHgyY2VlMDAwMDJjZjIsXG4gICAgICAgIDB4MmNmMzAwMDAyY2Y0LFxuICAgICAgICAweDJkMDAwMDAwMmQyNixcbiAgICAgICAgMHgyZDI3MDAwMDJkMjgsXG4gICAgICAgIDB4MmQyZDAwMDAyZDJlLFxuICAgICAgICAweDJkMzAwMDAwMmQ2OCxcbiAgICAgICAgMHgyZDdmMDAwMDJkOTcsXG4gICAgICAgIDB4MmRhMDAwMDAyZGE3LFxuICAgICAgICAweDJkYTgwMDAwMmRhZixcbiAgICAgICAgMHgyZGIwMDAwMDJkYjcsXG4gICAgICAgIDB4MmRiODAwMDAyZGJmLFxuICAgICAgICAweDJkYzAwMDAwMmRjNyxcbiAgICAgICAgMHgyZGM4MDAwMDJkY2YsXG4gICAgICAgIDB4MmRkMDAwMDAyZGQ3LFxuICAgICAgICAweDJkZDgwMDAwMmRkZixcbiAgICAgICAgMHgyZGUwMDAwMDJlMDAsXG4gICAgICAgIDB4MmUyZjAwMDAyZTMwLFxuICAgICAgICAweDMwMDUwMDAwMzAwOCxcbiAgICAgICAgMHgzMDJhMDAwMDMwMmUsXG4gICAgICAgIDB4MzAzYzAwMDAzMDNkLFxuICAgICAgICAweDMwNDEwMDAwMzA5NyxcbiAgICAgICAgMHgzMDk5MDAwMDMwOWIsXG4gICAgICAgIDB4MzA5ZDAwMDAzMDlmLFxuICAgICAgICAweDMwYTEwMDAwMzBmYixcbiAgICAgICAgMHgzMGZjMDAwMDMwZmYsXG4gICAgICAgIDB4MzEwNTAwMDAzMTMwLFxuICAgICAgICAweDMxYTAwMDAwMzFjMCxcbiAgICAgICAgMHgzMWYwMDAwMDMyMDAsXG4gICAgICAgIDB4MzQwMDAwMDA0ZGMwLFxuICAgICAgICAweDRlMDAwMDAwYTQ4ZCxcbiAgICAgICAgMHhhNGQwMDAwMGE0ZmUsXG4gICAgICAgIDB4YTUwMDAwMDBhNjBkLFxuICAgICAgICAweGE2MTAwMDAwYTYyYyxcbiAgICAgICAgMHhhNjQxMDAwMGE2NDIsXG4gICAgICAgIDB4YTY0MzAwMDBhNjQ0LFxuICAgICAgICAweGE2NDUwMDAwYTY0NixcbiAgICAgICAgMHhhNjQ3MDAwMGE2NDgsXG4gICAgICAgIDB4YTY0OTAwMDBhNjRhLFxuICAgICAgICAweGE2NGIwMDAwYTY0YyxcbiAgICAgICAgMHhhNjRkMDAwMGE2NGUsXG4gICAgICAgIDB4YTY0ZjAwMDBhNjUwLFxuICAgICAgICAweGE2NTEwMDAwYTY1MixcbiAgICAgICAgMHhhNjUzMDAwMGE2NTQsXG4gICAgICAgIDB4YTY1NTAwMDBhNjU2LFxuICAgICAgICAweGE2NTcwMDAwYTY1OCxcbiAgICAgICAgMHhhNjU5MDAwMGE2NWEsXG4gICAgICAgIDB4YTY1YjAwMDBhNjVjLFxuICAgICAgICAweGE2NWQwMDAwYTY1ZSxcbiAgICAgICAgMHhhNjVmMDAwMGE2NjAsXG4gICAgICAgIDB4YTY2MTAwMDBhNjYyLFxuICAgICAgICAweGE2NjMwMDAwYTY2NCxcbiAgICAgICAgMHhhNjY1MDAwMGE2NjYsXG4gICAgICAgIDB4YTY2NzAwMDBhNjY4LFxuICAgICAgICAweGE2NjkwMDAwYTY2YSxcbiAgICAgICAgMHhhNjZiMDAwMGE2NmMsXG4gICAgICAgIDB4YTY2ZDAwMDBhNjcwLFxuICAgICAgICAweGE2NzQwMDAwYTY3ZSxcbiAgICAgICAgMHhhNjdmMDAwMGE2ODAsXG4gICAgICAgIDB4YTY4MTAwMDBhNjgyLFxuICAgICAgICAweGE2ODMwMDAwYTY4NCxcbiAgICAgICAgMHhhNjg1MDAwMGE2ODYsXG4gICAgICAgIDB4YTY4NzAwMDBhNjg4LFxuICAgICAgICAweGE2ODkwMDAwYTY4YSxcbiAgICAgICAgMHhhNjhiMDAwMGE2OGMsXG4gICAgICAgIDB4YTY4ZDAwMDBhNjhlLFxuICAgICAgICAweGE2OGYwMDAwYTY5MCxcbiAgICAgICAgMHhhNjkxMDAwMGE2OTIsXG4gICAgICAgIDB4YTY5MzAwMDBhNjk0LFxuICAgICAgICAweGE2OTUwMDAwYTY5NixcbiAgICAgICAgMHhhNjk3MDAwMGE2OTgsXG4gICAgICAgIDB4YTY5OTAwMDBhNjlhLFxuICAgICAgICAweGE2OWIwMDAwYTY5YyxcbiAgICAgICAgMHhhNjllMDAwMGE2ZTYsXG4gICAgICAgIDB4YTZmMDAwMDBhNmYyLFxuICAgICAgICAweGE3MTcwMDAwYTcyMCxcbiAgICAgICAgMHhhNzIzMDAwMGE3MjQsXG4gICAgICAgIDB4YTcyNTAwMDBhNzI2LFxuICAgICAgICAweGE3MjcwMDAwYTcyOCxcbiAgICAgICAgMHhhNzI5MDAwMGE3MmEsXG4gICAgICAgIDB4YTcyYjAwMDBhNzJjLFxuICAgICAgICAweGE3MmQwMDAwYTcyZSxcbiAgICAgICAgMHhhNzJmMDAwMGE3MzIsXG4gICAgICAgIDB4YTczMzAwMDBhNzM0LFxuICAgICAgICAweGE3MzUwMDAwYTczNixcbiAgICAgICAgMHhhNzM3MDAwMGE3MzgsXG4gICAgICAgIDB4YTczOTAwMDBhNzNhLFxuICAgICAgICAweGE3M2IwMDAwYTczYyxcbiAgICAgICAgMHhhNzNkMDAwMGE3M2UsXG4gICAgICAgIDB4YTczZjAwMDBhNzQwLFxuICAgICAgICAweGE3NDEwMDAwYTc0MixcbiAgICAgICAgMHhhNzQzMDAwMGE3NDQsXG4gICAgICAgIDB4YTc0NTAwMDBhNzQ2LFxuICAgICAgICAweGE3NDcwMDAwYTc0OCxcbiAgICAgICAgMHhhNzQ5MDAwMGE3NGEsXG4gICAgICAgIDB4YTc0YjAwMDBhNzRjLFxuICAgICAgICAweGE3NGQwMDAwYTc0ZSxcbiAgICAgICAgMHhhNzRmMDAwMGE3NTAsXG4gICAgICAgIDB4YTc1MTAwMDBhNzUyLFxuICAgICAgICAweGE3NTMwMDAwYTc1NCxcbiAgICAgICAgMHhhNzU1MDAwMGE3NTYsXG4gICAgICAgIDB4YTc1NzAwMDBhNzU4LFxuICAgICAgICAweGE3NTkwMDAwYTc1YSxcbiAgICAgICAgMHhhNzViMDAwMGE3NWMsXG4gICAgICAgIDB4YTc1ZDAwMDBhNzVlLFxuICAgICAgICAweGE3NWYwMDAwYTc2MCxcbiAgICAgICAgMHhhNzYxMDAwMGE3NjIsXG4gICAgICAgIDB4YTc2MzAwMDBhNzY0LFxuICAgICAgICAweGE3NjUwMDAwYTc2NixcbiAgICAgICAgMHhhNzY3MDAwMGE3NjgsXG4gICAgICAgIDB4YTc2OTAwMDBhNzZhLFxuICAgICAgICAweGE3NmIwMDAwYTc2YyxcbiAgICAgICAgMHhhNzZkMDAwMGE3NmUsXG4gICAgICAgIDB4YTc2ZjAwMDBhNzcwLFxuICAgICAgICAweGE3NzEwMDAwYTc3OSxcbiAgICAgICAgMHhhNzdhMDAwMGE3N2IsXG4gICAgICAgIDB4YTc3YzAwMDBhNzdkLFxuICAgICAgICAweGE3N2YwMDAwYTc4MCxcbiAgICAgICAgMHhhNzgxMDAwMGE3ODIsXG4gICAgICAgIDB4YTc4MzAwMDBhNzg0LFxuICAgICAgICAweGE3ODUwMDAwYTc4NixcbiAgICAgICAgMHhhNzg3MDAwMGE3ODksXG4gICAgICAgIDB4YTc4YzAwMDBhNzhkLFxuICAgICAgICAweGE3OGUwMDAwYTc5MCxcbiAgICAgICAgMHhhNzkxMDAwMGE3OTIsXG4gICAgICAgIDB4YTc5MzAwMDBhNzk2LFxuICAgICAgICAweGE3OTcwMDAwYTc5OCxcbiAgICAgICAgMHhhNzk5MDAwMGE3OWEsXG4gICAgICAgIDB4YTc5YjAwMDBhNzljLFxuICAgICAgICAweGE3OWQwMDAwYTc5ZSxcbiAgICAgICAgMHhhNzlmMDAwMGE3YTAsXG4gICAgICAgIDB4YTdhMTAwMDBhN2EyLFxuICAgICAgICAweGE3YTMwMDAwYTdhNCxcbiAgICAgICAgMHhhN2E1MDAwMGE3YTYsXG4gICAgICAgIDB4YTdhNzAwMDBhN2E4LFxuICAgICAgICAweGE3YTkwMDAwYTdhYSxcbiAgICAgICAgMHhhN2FmMDAwMGE3YjAsXG4gICAgICAgIDB4YTdiNTAwMDBhN2I2LFxuICAgICAgICAweGE3YjcwMDAwYTdiOCxcbiAgICAgICAgMHhhN2I5MDAwMGE3YmEsXG4gICAgICAgIDB4YTdiYjAwMDBhN2JjLFxuICAgICAgICAweGE3YmQwMDAwYTdiZSxcbiAgICAgICAgMHhhN2JmMDAwMGE3YzAsXG4gICAgICAgIDB4YTdjMTAwMDBhN2MyLFxuICAgICAgICAweGE3YzMwMDAwYTdjNCxcbiAgICAgICAgMHhhN2M4MDAwMGE3YzksXG4gICAgICAgIDB4YTdjYTAwMDBhN2NiLFxuICAgICAgICAweGE3ZDEwMDAwYTdkMixcbiAgICAgICAgMHhhN2QzMDAwMGE3ZDQsXG4gICAgICAgIDB4YTdkNTAwMDBhN2Q2LFxuICAgICAgICAweGE3ZDcwMDAwYTdkOCxcbiAgICAgICAgMHhhN2Q5MDAwMGE3ZGEsXG4gICAgICAgIDB4YTdmMjAwMDBhN2Y1LFxuICAgICAgICAweGE3ZjYwMDAwYTdmOCxcbiAgICAgICAgMHhhN2ZhMDAwMGE4MjgsXG4gICAgICAgIDB4YTgyYzAwMDBhODJkLFxuICAgICAgICAweGE4NDAwMDAwYTg3NCxcbiAgICAgICAgMHhhODgwMDAwMGE4YzYsXG4gICAgICAgIDB4YThkMDAwMDBhOGRhLFxuICAgICAgICAweGE4ZTAwMDAwYThmOCxcbiAgICAgICAgMHhhOGZiMDAwMGE4ZmMsXG4gICAgICAgIDB4YThmZDAwMDBhOTJlLFxuICAgICAgICAweGE5MzAwMDAwYTk1NCxcbiAgICAgICAgMHhhOTgwMDAwMGE5YzEsXG4gICAgICAgIDB4YTljZjAwMDBhOWRhLFxuICAgICAgICAweGE5ZTAwMDAwYTlmZixcbiAgICAgICAgMHhhYTAwMDAwMGFhMzcsXG4gICAgICAgIDB4YWE0MDAwMDBhYTRlLFxuICAgICAgICAweGFhNTAwMDAwYWE1YSxcbiAgICAgICAgMHhhYTYwMDAwMGFhNzcsXG4gICAgICAgIDB4YWE3YTAwMDBhYWMzLFxuICAgICAgICAweGFhZGIwMDAwYWFkZSxcbiAgICAgICAgMHhhYWUwMDAwMGFhZjAsXG4gICAgICAgIDB4YWFmMjAwMDBhYWY3LFxuICAgICAgICAweGFiMDEwMDAwYWIwNyxcbiAgICAgICAgMHhhYjA5MDAwMGFiMGYsXG4gICAgICAgIDB4YWIxMTAwMDBhYjE3LFxuICAgICAgICAweGFiMjAwMDAwYWIyNyxcbiAgICAgICAgMHhhYjI4MDAwMGFiMmYsXG4gICAgICAgIDB4YWIzMDAwMDBhYjViLFxuICAgICAgICAweGFiNjAwMDAwYWI2YSxcbiAgICAgICAgMHhhYmMwMDAwMGFiZWIsXG4gICAgICAgIDB4YWJlYzAwMDBhYmVlLFxuICAgICAgICAweGFiZjAwMDAwYWJmYSxcbiAgICAgICAgMHhhYzAwMDAwMGQ3YTQsXG4gICAgICAgIDB4ZmEwZTAwMDBmYTEwLFxuICAgICAgICAweGZhMTEwMDAwZmExMixcbiAgICAgICAgMHhmYTEzMDAwMGZhMTUsXG4gICAgICAgIDB4ZmExZjAwMDBmYTIwLFxuICAgICAgICAweGZhMjEwMDAwZmEyMixcbiAgICAgICAgMHhmYTIzMDAwMGZhMjUsXG4gICAgICAgIDB4ZmEyNzAwMDBmYTJhLFxuICAgICAgICAweGZiMWUwMDAwZmIxZixcbiAgICAgICAgMHhmZTIwMDAwMGZlMzAsXG4gICAgICAgIDB4ZmU3MzAwMDBmZTc0LFxuICAgICAgICAweDEwMDAwMDAwMTAwMGMsXG4gICAgICAgIDB4MTAwMGQwMDAxMDAyNyxcbiAgICAgICAgMHgxMDAyODAwMDEwMDNiLFxuICAgICAgICAweDEwMDNjMDAwMTAwM2UsXG4gICAgICAgIDB4MTAwM2YwMDAxMDA0ZSxcbiAgICAgICAgMHgxMDA1MDAwMDEwMDVlLFxuICAgICAgICAweDEwMDgwMDAwMTAwZmIsXG4gICAgICAgIDB4MTAxZmQwMDAxMDFmZSxcbiAgICAgICAgMHgxMDI4MDAwMDEwMjlkLFxuICAgICAgICAweDEwMmEwMDAwMTAyZDEsXG4gICAgICAgIDB4MTAyZTAwMDAxMDJlMSxcbiAgICAgICAgMHgxMDMwMDAwMDEwMzIwLFxuICAgICAgICAweDEwMzJkMDAwMTAzNDEsXG4gICAgICAgIDB4MTAzNDIwMDAxMDM0YSxcbiAgICAgICAgMHgxMDM1MDAwMDEwMzdiLFxuICAgICAgICAweDEwMzgwMDAwMTAzOWUsXG4gICAgICAgIDB4MTAzYTAwMDAxMDNjNCxcbiAgICAgICAgMHgxMDNjODAwMDEwM2QwLFxuICAgICAgICAweDEwNDI4MDAwMTA0OWUsXG4gICAgICAgIDB4MTA0YTAwMDAxMDRhYSxcbiAgICAgICAgMHgxMDRkODAwMDEwNGZjLFxuICAgICAgICAweDEwNTAwMDAwMTA1MjgsXG4gICAgICAgIDB4MTA1MzAwMDAxMDU2NCxcbiAgICAgICAgMHgxMDU5NzAwMDEwNWEyLFxuICAgICAgICAweDEwNWEzMDAwMTA1YjIsXG4gICAgICAgIDB4MTA1YjMwMDAxMDViYSxcbiAgICAgICAgMHgxMDViYjAwMDEwNWJkLFxuICAgICAgICAweDEwNjAwMDAwMTA3MzcsXG4gICAgICAgIDB4MTA3NDAwMDAxMDc1NixcbiAgICAgICAgMHgxMDc2MDAwMDEwNzY4LFxuICAgICAgICAweDEwNzgwMDAwMTA3ODYsXG4gICAgICAgIDB4MTA3ODcwMDAxMDdiMSxcbiAgICAgICAgMHgxMDdiMjAwMDEwN2JiLFxuICAgICAgICAweDEwODAwMDAwMTA4MDYsXG4gICAgICAgIDB4MTA4MDgwMDAxMDgwOSxcbiAgICAgICAgMHgxMDgwYTAwMDEwODM2LFxuICAgICAgICAweDEwODM3MDAwMTA4MzksXG4gICAgICAgIDB4MTA4M2MwMDAxMDgzZCxcbiAgICAgICAgMHgxMDgzZjAwMDEwODU2LFxuICAgICAgICAweDEwODYwMDAwMTA4NzcsXG4gICAgICAgIDB4MTA4ODAwMDAxMDg5ZixcbiAgICAgICAgMHgxMDhlMDAwMDEwOGYzLFxuICAgICAgICAweDEwOGY0MDAwMTA4ZjYsXG4gICAgICAgIDB4MTA5MDAwMDAxMDkxNixcbiAgICAgICAgMHgxMDkyMDAwMDEwOTNhLFxuICAgICAgICAweDEwOTgwMDAwMTA5YjgsXG4gICAgICAgIDB4MTA5YmUwMDAxMDljMCxcbiAgICAgICAgMHgxMGEwMDAwMDEwYTA0LFxuICAgICAgICAweDEwYTA1MDAwMTBhMDcsXG4gICAgICAgIDB4MTBhMGMwMDAxMGExNCxcbiAgICAgICAgMHgxMGExNTAwMDEwYTE4LFxuICAgICAgICAweDEwYTE5MDAwMTBhMzYsXG4gICAgICAgIDB4MTBhMzgwMDAxMGEzYixcbiAgICAgICAgMHgxMGEzZjAwMDEwYTQwLFxuICAgICAgICAweDEwYTYwMDAwMTBhN2QsXG4gICAgICAgIDB4MTBhODAwMDAxMGE5ZCxcbiAgICAgICAgMHgxMGFjMDAwMDEwYWM4LFxuICAgICAgICAweDEwYWM5MDAwMTBhZTcsXG4gICAgICAgIDB4MTBiMDAwMDAxMGIzNixcbiAgICAgICAgMHgxMGI0MDAwMDEwYjU2LFxuICAgICAgICAweDEwYjYwMDAwMTBiNzMsXG4gICAgICAgIDB4MTBiODAwMDAxMGI5MixcbiAgICAgICAgMHgxMGMwMDAwMDEwYzQ5LFxuICAgICAgICAweDEwY2MwMDAwMTBjZjMsXG4gICAgICAgIDB4MTBkMDAwMDAxMGQyOCxcbiAgICAgICAgMHgxMGQzMDAwMDEwZDNhLFxuICAgICAgICAweDEwZTgwMDAwMTBlYWEsXG4gICAgICAgIDB4MTBlYWIwMDAxMGVhZCxcbiAgICAgICAgMHgxMGViMDAwMDEwZWIyLFxuICAgICAgICAweDEwZjAwMDAwMTBmMWQsXG4gICAgICAgIDB4MTBmMjcwMDAxMGYyOCxcbiAgICAgICAgMHgxMGYzMDAwMDEwZjUxLFxuICAgICAgICAweDEwZjcwMDAwMTBmODYsXG4gICAgICAgIDB4MTBmYjAwMDAxMGZjNSxcbiAgICAgICAgMHgxMGZlMDAwMDEwZmY3LFxuICAgICAgICAweDExMDAwMDAwMTEwNDcsXG4gICAgICAgIDB4MTEwNjYwMDAxMTA3NixcbiAgICAgICAgMHgxMTA3ZjAwMDExMGJiLFxuICAgICAgICAweDExMGMyMDAwMTEwYzMsXG4gICAgICAgIDB4MTEwZDAwMDAxMTBlOSxcbiAgICAgICAgMHgxMTBmMDAwMDExMGZhLFxuICAgICAgICAweDExMTAwMDAwMTExMzUsXG4gICAgICAgIDB4MTExMzYwMDAxMTE0MCxcbiAgICAgICAgMHgxMTE0NDAwMDExMTQ4LFxuICAgICAgICAweDExMTUwMDAwMTExNzQsXG4gICAgICAgIDB4MTExNzYwMDAxMTE3NyxcbiAgICAgICAgMHgxMTE4MDAwMDExMWM1LFxuICAgICAgICAweDExMWM5MDAwMTExY2QsXG4gICAgICAgIDB4MTExY2UwMDAxMTFkYixcbiAgICAgICAgMHgxMTFkYzAwMDExMWRkLFxuICAgICAgICAweDExMjAwMDAwMTEyMTIsXG4gICAgICAgIDB4MTEyMTMwMDAxMTIzOCxcbiAgICAgICAgMHgxMTIzZTAwMDExMjNmLFxuICAgICAgICAweDExMjgwMDAwMTEyODcsXG4gICAgICAgIDB4MTEyODgwMDAxMTI4OSxcbiAgICAgICAgMHgxMTI4YTAwMDExMjhlLFxuICAgICAgICAweDExMjhmMDAwMTEyOWUsXG4gICAgICAgIDB4MTEyOWYwMDAxMTJhOSxcbiAgICAgICAgMHgxMTJiMDAwMDExMmViLFxuICAgICAgICAweDExMmYwMDAwMTEyZmEsXG4gICAgICAgIDB4MTEzMDAwMDAxMTMwNCxcbiAgICAgICAgMHgxMTMwNTAwMDExMzBkLFxuICAgICAgICAweDExMzBmMDAwMTEzMTEsXG4gICAgICAgIDB4MTEzMTMwMDAxMTMyOSxcbiAgICAgICAgMHgxMTMyYTAwMDExMzMxLFxuICAgICAgICAweDExMzMyMDAwMTEzMzQsXG4gICAgICAgIDB4MTEzMzUwMDAxMTMzYSxcbiAgICAgICAgMHgxMTMzYjAwMDExMzQ1LFxuICAgICAgICAweDExMzQ3MDAwMTEzNDksXG4gICAgICAgIDB4MTEzNGIwMDAxMTM0ZSxcbiAgICAgICAgMHgxMTM1MDAwMDExMzUxLFxuICAgICAgICAweDExMzU3MDAwMTEzNTgsXG4gICAgICAgIDB4MTEzNWQwMDAxMTM2NCxcbiAgICAgICAgMHgxMTM2NjAwMDExMzZkLFxuICAgICAgICAweDExMzcwMDAwMTEzNzUsXG4gICAgICAgIDB4MTE0MDAwMDAxMTQ0YixcbiAgICAgICAgMHgxMTQ1MDAwMDExNDVhLFxuICAgICAgICAweDExNDVlMDAwMTE0NjIsXG4gICAgICAgIDB4MTE0ODAwMDAxMTRjNixcbiAgICAgICAgMHgxMTRjNzAwMDExNGM4LFxuICAgICAgICAweDExNGQwMDAwMTE0ZGEsXG4gICAgICAgIDB4MTE1ODAwMDAxMTViNixcbiAgICAgICAgMHgxMTViODAwMDExNWMxLFxuICAgICAgICAweDExNWQ4MDAwMTE1ZGUsXG4gICAgICAgIDB4MTE2MDAwMDAxMTY0MSxcbiAgICAgICAgMHgxMTY0NDAwMDExNjQ1LFxuICAgICAgICAweDExNjUwMDAwMTE2NWEsXG4gICAgICAgIDB4MTE2ODAwMDAxMTZiOSxcbiAgICAgICAgMHgxMTZjMDAwMDExNmNhLFxuICAgICAgICAweDExNzAwMDAwMTE3MWIsXG4gICAgICAgIDB4MTE3MWQwMDAxMTcyYyxcbiAgICAgICAgMHgxMTczMDAwMDExNzNhLFxuICAgICAgICAweDExNzQwMDAwMTE3NDcsXG4gICAgICAgIDB4MTE4MDAwMDAxMTgzYixcbiAgICAgICAgMHgxMThjMDAwMDExOGVhLFxuICAgICAgICAweDExOGZmMDAwMTE5MDcsXG4gICAgICAgIDB4MTE5MDkwMDAxMTkwYSxcbiAgICAgICAgMHgxMTkwYzAwMDExOTE0LFxuICAgICAgICAweDExOTE1MDAwMTE5MTcsXG4gICAgICAgIDB4MTE5MTgwMDAxMTkzNixcbiAgICAgICAgMHgxMTkzNzAwMDExOTM5LFxuICAgICAgICAweDExOTNiMDAwMTE5NDQsXG4gICAgICAgIDB4MTE5NTAwMDAxMTk1YSxcbiAgICAgICAgMHgxMTlhMDAwMDExOWE4LFxuICAgICAgICAweDExOWFhMDAwMTE5ZDgsXG4gICAgICAgIDB4MTE5ZGEwMDAxMTllMixcbiAgICAgICAgMHgxMTllMzAwMDExOWU1LFxuICAgICAgICAweDExYTAwMDAwMTFhM2YsXG4gICAgICAgIDB4MTFhNDcwMDAxMWE0OCxcbiAgICAgICAgMHgxMWE1MDAwMDExYTlhLFxuICAgICAgICAweDExYTlkMDAwMTFhOWUsXG4gICAgICAgIDB4MTFhYjAwMDAxMWFmOSxcbiAgICAgICAgMHgxMWMwMDAwMDExYzA5LFxuICAgICAgICAweDExYzBhMDAwMTFjMzcsXG4gICAgICAgIDB4MTFjMzgwMDAxMWM0MSxcbiAgICAgICAgMHgxMWM1MDAwMDExYzVhLFxuICAgICAgICAweDExYzcyMDAwMTFjOTAsXG4gICAgICAgIDB4MTFjOTIwMDAxMWNhOCxcbiAgICAgICAgMHgxMWNhOTAwMDExY2I3LFxuICAgICAgICAweDExZDAwMDAwMTFkMDcsXG4gICAgICAgIDB4MTFkMDgwMDAxMWQwYSxcbiAgICAgICAgMHgxMWQwYjAwMDExZDM3LFxuICAgICAgICAweDExZDNhMDAwMTFkM2IsXG4gICAgICAgIDB4MTFkM2MwMDAxMWQzZSxcbiAgICAgICAgMHgxMWQzZjAwMDExZDQ4LFxuICAgICAgICAweDExZDUwMDAwMTFkNWEsXG4gICAgICAgIDB4MTFkNjAwMDAxMWQ2NixcbiAgICAgICAgMHgxMWQ2NzAwMDExZDY5LFxuICAgICAgICAweDExZDZhMDAwMTFkOGYsXG4gICAgICAgIDB4MTFkOTAwMDAxMWQ5MixcbiAgICAgICAgMHgxMWQ5MzAwMDExZDk5LFxuICAgICAgICAweDExZGEwMDAwMTFkYWEsXG4gICAgICAgIDB4MTFlZTAwMDAxMWVmNyxcbiAgICAgICAgMHgxMWZiMDAwMDExZmIxLFxuICAgICAgICAweDEyMDAwMDAwMTIzOWEsXG4gICAgICAgIDB4MTI0ODAwMDAxMjU0NCxcbiAgICAgICAgMHgxMmY5MDAwMDEyZmYxLFxuICAgICAgICAweDEzMDAwMDAwMTM0MmYsXG4gICAgICAgIDB4MTQ0MDAwMDAxNDY0NyxcbiAgICAgICAgMHgxNjgwMDAwMDE2YTM5LFxuICAgICAgICAweDE2YTQwMDAwMTZhNWYsXG4gICAgICAgIDB4MTZhNjAwMDAxNmE2YSxcbiAgICAgICAgMHgxNmE3MDAwMDE2YWJmLFxuICAgICAgICAweDE2YWMwMDAwMTZhY2EsXG4gICAgICAgIDB4MTZhZDAwMDAxNmFlZSxcbiAgICAgICAgMHgxNmFmMDAwMDE2YWY1LFxuICAgICAgICAweDE2YjAwMDAwMTZiMzcsXG4gICAgICAgIDB4MTZiNDAwMDAxNmI0NCxcbiAgICAgICAgMHgxNmI1MDAwMDE2YjVhLFxuICAgICAgICAweDE2YjYzMDAwMTZiNzgsXG4gICAgICAgIDB4MTZiN2QwMDAxNmI5MCxcbiAgICAgICAgMHgxNmU2MDAwMDE2ZTgwLFxuICAgICAgICAweDE2ZjAwMDAwMTZmNGIsXG4gICAgICAgIDB4MTZmNGYwMDAxNmY4OCxcbiAgICAgICAgMHgxNmY4ZjAwMDE2ZmEwLFxuICAgICAgICAweDE2ZmUwMDAwMTZmZTIsXG4gICAgICAgIDB4MTZmZTMwMDAxNmZlNSxcbiAgICAgICAgMHgxNmZmMDAwMDE2ZmYyLFxuICAgICAgICAweDE3MDAwMDAwMTg3ZjgsXG4gICAgICAgIDB4MTg4MDAwMDAxOGNkNixcbiAgICAgICAgMHgxOGQwMDAwMDE4ZDA5LFxuICAgICAgICAweDFhZmYwMDAwMWFmZjQsXG4gICAgICAgIDB4MWFmZjUwMDAxYWZmYyxcbiAgICAgICAgMHgxYWZmZDAwMDFhZmZmLFxuICAgICAgICAweDFiMDAwMDAwMWIxMjMsXG4gICAgICAgIDB4MWIxNTAwMDAxYjE1MyxcbiAgICAgICAgMHgxYjE2NDAwMDFiMTY4LFxuICAgICAgICAweDFiMTcwMDAwMWIyZmMsXG4gICAgICAgIDB4MWJjMDAwMDAxYmM2YixcbiAgICAgICAgMHgxYmM3MDAwMDFiYzdkLFxuICAgICAgICAweDFiYzgwMDAwMWJjODksXG4gICAgICAgIDB4MWJjOTAwMDAxYmM5YSxcbiAgICAgICAgMHgxYmM5ZDAwMDFiYzlmLFxuICAgICAgICAweDFjZjAwMDAwMWNmMmUsXG4gICAgICAgIDB4MWNmMzAwMDAxY2Y0NyxcbiAgICAgICAgMHgxZGEwMDAwMDFkYTM3LFxuICAgICAgICAweDFkYTNiMDAwMWRhNmQsXG4gICAgICAgIDB4MWRhNzUwMDAxZGE3NixcbiAgICAgICAgMHgxZGE4NDAwMDFkYTg1LFxuICAgICAgICAweDFkYTliMDAwMWRhYTAsXG4gICAgICAgIDB4MWRhYTEwMDAxZGFiMCxcbiAgICAgICAgMHgxZGYwMDAwMDFkZjFmLFxuICAgICAgICAweDFlMDAwMDAwMWUwMDcsXG4gICAgICAgIDB4MWUwMDgwMDAxZTAxOSxcbiAgICAgICAgMHgxZTAxYjAwMDFlMDIyLFxuICAgICAgICAweDFlMDIzMDAwMWUwMjUsXG4gICAgICAgIDB4MWUwMjYwMDAxZTAyYixcbiAgICAgICAgMHgxZTEwMDAwMDFlMTJkLFxuICAgICAgICAweDFlMTMwMDAwMWUxM2UsXG4gICAgICAgIDB4MWUxNDAwMDAxZTE0YSxcbiAgICAgICAgMHgxZTE0ZTAwMDFlMTRmLFxuICAgICAgICAweDFlMjkwMDAwMWUyYWYsXG4gICAgICAgIDB4MWUyYzAwMDAxZTJmYSxcbiAgICAgICAgMHgxZTdlMDAwMDFlN2U3LFxuICAgICAgICAweDFlN2U4MDAwMWU3ZWMsXG4gICAgICAgIDB4MWU3ZWQwMDAxZTdlZixcbiAgICAgICAgMHgxZTdmMDAwMDFlN2ZmLFxuICAgICAgICAweDFlODAwMDAwMWU4YzUsXG4gICAgICAgIDB4MWU4ZDAwMDAxZThkNyxcbiAgICAgICAgMHgxZTkyMjAwMDFlOTRjLFxuICAgICAgICAweDFlOTUwMDAwMWU5NWEsXG4gICAgICAgIDB4MWZiZjAwMDAxZmJmYSxcbiAgICAgICAgMHgyMDAwMDAwMDJhNmUwLFxuICAgICAgICAweDJhNzAwMDAwMmI3MzksXG4gICAgICAgIDB4MmI3NDAwMDAyYjgxZSxcbiAgICAgICAgMHgyYjgyMDAwMDJjZWEyLFxuICAgICAgICAweDJjZWIwMDAwMmViZTEsXG4gICAgICAgIDB4MzAwMDAwMDAzMTM0YixcbiAgICApLFxuICAgICdDT05URVhUSic6IChcbiAgICAgICAgMHgyMDBjMDAwMDIwMGUsXG4gICAgKSxcbiAgICAnQ09OVEVYVE8nOiAoXG4gICAgICAgIDB4YjcwMDAwMDBiOCxcbiAgICAgICAgMHgzNzUwMDAwMDM3NixcbiAgICAgICAgMHg1ZjMwMDAwMDVmNSxcbiAgICAgICAgMHg2NjAwMDAwMDY2YSxcbiAgICAgICAgMHg2ZjAwMDAwMDZmYSxcbiAgICAgICAgMHgzMGZiMDAwMDMwZmMsXG4gICAgKSxcbn1cbiIpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdpZG5hL2ludHJhbmdlcy5weScsIGInIiIiXG5HaXZlbiBhIGxpc3Qgb2YgaW50ZWdlcnMsIG1hZGUgdXAgb2YgKGhvcGVmdWxseSkgYSBzbWFsbCBudW1iZXIgb2YgbG9uZyBydW5zXG5vZiBjb25zZWN1dGl2ZSBpbnRlZ2VycywgY29tcHV0ZSBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmb3JtXG4oKHN0YXJ0MSwgZW5kMSksIChzdGFydDIsIGVuZDIpIC4uLikuIFRoZW4gYW5zd2VyIHRoZSBxdWVzdGlvbiAid2FzIHggcHJlc2VudFxuaW4gdGhlIG9yaWdpbmFsIGxpc3Q/IiBpbiB0aW1lIE8obG9nKCMgcnVucykpLlxuIiIiXG5cbmltcG9ydCBiaXNlY3RcbmZyb20gdHlwaW5nIGltcG9ydCBMaXN0LCBUdXBsZVxuXG5kZWYgaW50cmFuZ2VzX2Zyb21fbGlzdChsaXN0XzogTGlzdFtpbnRdKSAtPiBUdXBsZVtpbnQsIC4uLl06XG4gICAgIiIiUmVwcmVzZW50IGEgbGlzdCBvZiBpbnRlZ2VycyBhcyBhIHNlcXVlbmNlIG9mIHJhbmdlczpcbiAgICAoKHN0YXJ0XzAsIGVuZF8wKSwgKHN0YXJ0XzEsIGVuZF8xKSwgLi4uKSwgc3VjaCB0aGF0IHRoZSBvcmlnaW5hbFxuICAgIGludGVnZXJzIGFyZSBleGFjdGx5IHRob3NlIHggc3VjaCB0aGF0IHN0YXJ0X2kgPD0geCA8IGVuZF9pIGZvciBzb21lIGkuXG5cbiAgICBSYW5nZXMgYXJlIGVuY29kZWQgYXMgc2luZ2xlIGludGVnZXJzIChzdGFydCA8PCAzMiB8IGVuZCksIG5vdCBhcyB0dXBsZXMuXG4gICAgIiIiXG5cbiAgICBzb3J0ZWRfbGlzdCA9IHNvcnRlZChsaXN0XylcbiAgICByYW5nZXMgPSBbXVxuICAgIGxhc3Rfd3JpdGUgPSAtMVxuICAgIGZvciBpIGluIHJhbmdlKGxlbihzb3J0ZWRfbGlzdCkpOlxuICAgICAgICBpZiBpKzEgPCBsZW4oc29ydGVkX2xpc3QpOlxuICAgICAgICAgICAgaWYgc29ydGVkX2xpc3RbaV0gPT0gc29ydGVkX2xpc3RbaSsxXS0xOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIGN1cnJlbnRfcmFuZ2UgPSBzb3J0ZWRfbGlzdFtsYXN0X3dyaXRlKzE6aSsxXVxuICAgICAgICByYW5nZXMuYXBwZW5kKF9lbmNvZGVfcmFuZ2UoY3VycmVudF9yYW5nZVswXSwgY3VycmVudF9yYW5nZVstMV0gKyAxKSlcbiAgICAgICAgbGFzdF93cml0ZSA9IGlcblxuICAgIHJldHVybiB0dXBsZShyYW5nZXMpXG5cbmRlZiBfZW5jb2RlX3JhbmdlKHN0YXJ0OiBpbnQsIGVuZDogaW50KSAtPiBpbnQ6XG4gICAgcmV0dXJuIChzdGFydCA8PCAzMikgfCBlbmRcblxuZGVmIF9kZWNvZGVfcmFuZ2UocjogaW50KSAtPiBUdXBsZVtpbnQsIGludF06XG4gICAgcmV0dXJuIChyID4+IDMyKSwgKHIgJiAoKDEgPDwgMzIpIC0gMSkpXG5cblxuZGVmIGludHJhbmdlc19jb250YWluKGludF86IGludCwgcmFuZ2VzOiBUdXBsZVtpbnQsIC4uLl0pIC0+IGJvb2w6XG4gICAgIiIiRGV0ZXJtaW5lIGlmIGBpbnRfYCBmYWxscyBpbnRvIG9uZSBvZiB0aGUgcmFuZ2VzIGluIGByYW5nZXNgLiIiIlxuICAgIHR1cGxlXyA9IF9lbmNvZGVfcmFuZ2UoaW50XywgMClcbiAgICBwb3MgPSBiaXNlY3QuYmlzZWN0X2xlZnQocmFuZ2VzLCB0dXBsZV8pXG4gICAgIyB3ZSBjb3VsZCBiZSBpbW1lZGlhdGVseSBhaGVhZCBvZiBhIHR1cGxlIChzdGFydCwgZW5kKVxuICAgICMgd2l0aCBzdGFydCA8IGludF8gPD0gZW5kXG4gICAgaWYgcG9zID4gMDpcbiAgICAgICAgbGVmdCwgcmlnaHQgPSBfZGVjb2RlX3JhbmdlKHJhbmdlc1twb3MtMV0pXG4gICAgICAgIGlmIGxlZnQgPD0gaW50XyA8IHJpZ2h0OlxuICAgICAgICAgICAgcmV0dXJuIFRydWVcbiAgICAjIG9yIHdlIGNvdWxkIGJlIGltbWVkaWF0ZWx5IGJlaGluZCBhIHR1cGxlIChpbnRfLCBlbmQpXG4gICAgaWYgcG9zIDwgbGVuKHJhbmdlcyk6XG4gICAgICAgIGxlZnQsIF8gPSBfZGVjb2RlX3JhbmdlKHJhbmdlc1twb3NdKVxuICAgICAgICBpZiBsZWZ0ID09IGludF86XG4gICAgICAgICAgICByZXR1cm4gVHJ1ZVxuICAgIHJldHVybiBGYWxzZVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2lkbmEvdXRzNDZkYXRhLnB5JywgYicjIFRoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSB0b29scy9pZG5hLWRhdGFcbiMgdmltOiBzZXQgZmlsZWVuY29kaW5nPXV0Zi04IDpcblxuZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QsIFR1cGxlLCBVbmlvblxuXG5cbiIiIklETkEgTWFwcGluZyBUYWJsZSBmcm9tIFVUUzQ2LiIiIlxuXG5cbl9fdmVyc2lvbl9fID0gXCcxNC4wLjBcJ1xuZGVmIF9zZWdfMCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MCwgXCczXCcpLFxuICAgICgweDEsIFwnM1wnKSxcbiAgICAoMHgyLCBcJzNcJyksXG4gICAgKDB4MywgXCczXCcpLFxuICAgICgweDQsIFwnM1wnKSxcbiAgICAoMHg1LCBcJzNcJyksXG4gICAgKDB4NiwgXCczXCcpLFxuICAgICgweDcsIFwnM1wnKSxcbiAgICAoMHg4LCBcJzNcJyksXG4gICAgKDB4OSwgXCczXCcpLFxuICAgICgweEEsIFwnM1wnKSxcbiAgICAoMHhCLCBcJzNcJyksXG4gICAgKDB4QywgXCczXCcpLFxuICAgICgweEQsIFwnM1wnKSxcbiAgICAoMHhFLCBcJzNcJyksXG4gICAgKDB4RiwgXCczXCcpLFxuICAgICgweDEwLCBcJzNcJyksXG4gICAgKDB4MTEsIFwnM1wnKSxcbiAgICAoMHgxMiwgXCczXCcpLFxuICAgICgweDEzLCBcJzNcJyksXG4gICAgKDB4MTQsIFwnM1wnKSxcbiAgICAoMHgxNSwgXCczXCcpLFxuICAgICgweDE2LCBcJzNcJyksXG4gICAgKDB4MTcsIFwnM1wnKSxcbiAgICAoMHgxOCwgXCczXCcpLFxuICAgICgweDE5LCBcJzNcJyksXG4gICAgKDB4MUEsIFwnM1wnKSxcbiAgICAoMHgxQiwgXCczXCcpLFxuICAgICgweDFDLCBcJzNcJyksXG4gICAgKDB4MUQsIFwnM1wnKSxcbiAgICAoMHgxRSwgXCczXCcpLFxuICAgICgweDFGLCBcJzNcJyksXG4gICAgKDB4MjAsIFwnM1wnKSxcbiAgICAoMHgyMSwgXCczXCcpLFxuICAgICgweDIyLCBcJzNcJyksXG4gICAgKDB4MjMsIFwnM1wnKSxcbiAgICAoMHgyNCwgXCczXCcpLFxuICAgICgweDI1LCBcJzNcJyksXG4gICAgKDB4MjYsIFwnM1wnKSxcbiAgICAoMHgyNywgXCczXCcpLFxuICAgICgweDI4LCBcJzNcJyksXG4gICAgKDB4MjksIFwnM1wnKSxcbiAgICAoMHgyQSwgXCczXCcpLFxuICAgICgweDJCLCBcJzNcJyksXG4gICAgKDB4MkMsIFwnM1wnKSxcbiAgICAoMHgyRCwgXCdWXCcpLFxuICAgICgweDJFLCBcJ1ZcJyksXG4gICAgKDB4MkYsIFwnM1wnKSxcbiAgICAoMHgzMCwgXCdWXCcpLFxuICAgICgweDMxLCBcJ1ZcJyksXG4gICAgKDB4MzIsIFwnVlwnKSxcbiAgICAoMHgzMywgXCdWXCcpLFxuICAgICgweDM0LCBcJ1ZcJyksXG4gICAgKDB4MzUsIFwnVlwnKSxcbiAgICAoMHgzNiwgXCdWXCcpLFxuICAgICgweDM3LCBcJ1ZcJyksXG4gICAgKDB4MzgsIFwnVlwnKSxcbiAgICAoMHgzOSwgXCdWXCcpLFxuICAgICgweDNBLCBcJzNcJyksXG4gICAgKDB4M0IsIFwnM1wnKSxcbiAgICAoMHgzQywgXCczXCcpLFxuICAgICgweDNELCBcJzNcJyksXG4gICAgKDB4M0UsIFwnM1wnKSxcbiAgICAoMHgzRiwgXCczXCcpLFxuICAgICgweDQwLCBcJzNcJyksXG4gICAgKDB4NDEsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4NDIsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4NDMsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4NDQsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4NDUsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4NDYsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4NDcsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4NDgsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4NDksIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4NEEsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4NEIsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4NEMsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4NEQsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4NEUsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4NEYsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4NTAsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4NTEsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4NTIsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4NTMsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4NTQsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4NTUsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4NTYsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4NTcsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4NTgsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4NTksIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4NUEsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4NUIsIFwnM1wnKSxcbiAgICAoMHg1QywgXCczXCcpLFxuICAgICgweDVELCBcJzNcJyksXG4gICAgKDB4NUUsIFwnM1wnKSxcbiAgICAoMHg1RiwgXCczXCcpLFxuICAgICgweDYwLCBcJzNcJyksXG4gICAgKDB4NjEsIFwnVlwnKSxcbiAgICAoMHg2MiwgXCdWXCcpLFxuICAgICgweDYzLCBcJ1ZcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18xKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHg2NCwgXCdWXCcpLFxuICAgICgweDY1LCBcJ1ZcJyksXG4gICAgKDB4NjYsIFwnVlwnKSxcbiAgICAoMHg2NywgXCdWXCcpLFxuICAgICgweDY4LCBcJ1ZcJyksXG4gICAgKDB4NjksIFwnVlwnKSxcbiAgICAoMHg2QSwgXCdWXCcpLFxuICAgICgweDZCLCBcJ1ZcJyksXG4gICAgKDB4NkMsIFwnVlwnKSxcbiAgICAoMHg2RCwgXCdWXCcpLFxuICAgICgweDZFLCBcJ1ZcJyksXG4gICAgKDB4NkYsIFwnVlwnKSxcbiAgICAoMHg3MCwgXCdWXCcpLFxuICAgICgweDcxLCBcJ1ZcJyksXG4gICAgKDB4NzIsIFwnVlwnKSxcbiAgICAoMHg3MywgXCdWXCcpLFxuICAgICgweDc0LCBcJ1ZcJyksXG4gICAgKDB4NzUsIFwnVlwnKSxcbiAgICAoMHg3NiwgXCdWXCcpLFxuICAgICgweDc3LCBcJ1ZcJyksXG4gICAgKDB4NzgsIFwnVlwnKSxcbiAgICAoMHg3OSwgXCdWXCcpLFxuICAgICgweDdBLCBcJ1ZcJyksXG4gICAgKDB4N0IsIFwnM1wnKSxcbiAgICAoMHg3QywgXCczXCcpLFxuICAgICgweDdELCBcJzNcJyksXG4gICAgKDB4N0UsIFwnM1wnKSxcbiAgICAoMHg3RiwgXCczXCcpLFxuICAgICgweDgwLCBcJ1hcJyksXG4gICAgKDB4ODEsIFwnWFwnKSxcbiAgICAoMHg4MiwgXCdYXCcpLFxuICAgICgweDgzLCBcJ1hcJyksXG4gICAgKDB4ODQsIFwnWFwnKSxcbiAgICAoMHg4NSwgXCdYXCcpLFxuICAgICgweDg2LCBcJ1hcJyksXG4gICAgKDB4ODcsIFwnWFwnKSxcbiAgICAoMHg4OCwgXCdYXCcpLFxuICAgICgweDg5LCBcJ1hcJyksXG4gICAgKDB4OEEsIFwnWFwnKSxcbiAgICAoMHg4QiwgXCdYXCcpLFxuICAgICgweDhDLCBcJ1hcJyksXG4gICAgKDB4OEQsIFwnWFwnKSxcbiAgICAoMHg4RSwgXCdYXCcpLFxuICAgICgweDhGLCBcJ1hcJyksXG4gICAgKDB4OTAsIFwnWFwnKSxcbiAgICAoMHg5MSwgXCdYXCcpLFxuICAgICgweDkyLCBcJ1hcJyksXG4gICAgKDB4OTMsIFwnWFwnKSxcbiAgICAoMHg5NCwgXCdYXCcpLFxuICAgICgweDk1LCBcJ1hcJyksXG4gICAgKDB4OTYsIFwnWFwnKSxcbiAgICAoMHg5NywgXCdYXCcpLFxuICAgICgweDk4LCBcJ1hcJyksXG4gICAgKDB4OTksIFwnWFwnKSxcbiAgICAoMHg5QSwgXCdYXCcpLFxuICAgICgweDlCLCBcJ1hcJyksXG4gICAgKDB4OUMsIFwnWFwnKSxcbiAgICAoMHg5RCwgXCdYXCcpLFxuICAgICgweDlFLCBcJ1hcJyksXG4gICAgKDB4OUYsIFwnWFwnKSxcbiAgICAoMHhBMCwgXCczXCcsIFwnIFwnKSxcbiAgICAoMHhBMSwgXCdWXCcpLFxuICAgICgweEEyLCBcJ1ZcJyksXG4gICAgKDB4QTMsIFwnVlwnKSxcbiAgICAoMHhBNCwgXCdWXCcpLFxuICAgICgweEE1LCBcJ1ZcJyksXG4gICAgKDB4QTYsIFwnVlwnKSxcbiAgICAoMHhBNywgXCdWXCcpLFxuICAgICgweEE4LCBcJzNcJywgXCcgXHhjY1x4ODhcJyksXG4gICAgKDB4QTksIFwnVlwnKSxcbiAgICAoMHhBQSwgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHhBQiwgXCdWXCcpLFxuICAgICgweEFDLCBcJ1ZcJyksXG4gICAgKDB4QUQsIFwnSVwnKSxcbiAgICAoMHhBRSwgXCdWXCcpLFxuICAgICgweEFGLCBcJzNcJywgXCcgXHhjY1x4ODRcJyksXG4gICAgKDB4QjAsIFwnVlwnKSxcbiAgICAoMHhCMSwgXCdWXCcpLFxuICAgICgweEIyLCBcJ01cJywgXCcyXCcpLFxuICAgICgweEIzLCBcJ01cJywgXCczXCcpLFxuICAgICgweEI0LCBcJzNcJywgXCcgXHhjY1x4ODFcJyksXG4gICAgKDB4QjUsIFwnTVwnLCBcJ1x4Y2VceGJjXCcpLFxuICAgICgweEI2LCBcJ1ZcJyksXG4gICAgKDB4QjcsIFwnVlwnKSxcbiAgICAoMHhCOCwgXCczXCcsIFwnIFx4Y2NceGE3XCcpLFxuICAgICgweEI5LCBcJ01cJywgXCcxXCcpLFxuICAgICgweEJBLCBcJ01cJywgXCdvXCcpLFxuICAgICgweEJCLCBcJ1ZcJyksXG4gICAgKDB4QkMsIFwnTVwnLCBcJzFceGUyXHg4MVx4ODQ0XCcpLFxuICAgICgweEJELCBcJ01cJywgXCcxXHhlMlx4ODFceDg0MlwnKSxcbiAgICAoMHhCRSwgXCdNXCcsIFwnM1x4ZTJceDgxXHg4NDRcJyksXG4gICAgKDB4QkYsIFwnVlwnKSxcbiAgICAoMHhDMCwgXCdNXCcsIFwnXHhjM1x4YTBcJyksXG4gICAgKDB4QzEsIFwnTVwnLCBcJ1x4YzNceGExXCcpLFxuICAgICgweEMyLCBcJ01cJywgXCdceGMzXHhhMlwnKSxcbiAgICAoMHhDMywgXCdNXCcsIFwnXHhjM1x4YTNcJyksXG4gICAgKDB4QzQsIFwnTVwnLCBcJ1x4YzNceGE0XCcpLFxuICAgICgweEM1LCBcJ01cJywgXCdceGMzXHhhNVwnKSxcbiAgICAoMHhDNiwgXCdNXCcsIFwnXHhjM1x4YTZcJyksXG4gICAgKDB4QzcsIFwnTVwnLCBcJ1x4YzNceGE3XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4QzgsIFwnTVwnLCBcJ1x4YzNceGE4XCcpLFxuICAgICgweEM5LCBcJ01cJywgXCdceGMzXHhhOVwnKSxcbiAgICAoMHhDQSwgXCdNXCcsIFwnXHhjM1x4YWFcJyksXG4gICAgKDB4Q0IsIFwnTVwnLCBcJ1x4YzNceGFiXCcpLFxuICAgICgweENDLCBcJ01cJywgXCdceGMzXHhhY1wnKSxcbiAgICAoMHhDRCwgXCdNXCcsIFwnXHhjM1x4YWRcJyksXG4gICAgKDB4Q0UsIFwnTVwnLCBcJ1x4YzNceGFlXCcpLFxuICAgICgweENGLCBcJ01cJywgXCdceGMzXHhhZlwnKSxcbiAgICAoMHhEMCwgXCdNXCcsIFwnXHhjM1x4YjBcJyksXG4gICAgKDB4RDEsIFwnTVwnLCBcJ1x4YzNceGIxXCcpLFxuICAgICgweEQyLCBcJ01cJywgXCdceGMzXHhiMlwnKSxcbiAgICAoMHhEMywgXCdNXCcsIFwnXHhjM1x4YjNcJyksXG4gICAgKDB4RDQsIFwnTVwnLCBcJ1x4YzNceGI0XCcpLFxuICAgICgweEQ1LCBcJ01cJywgXCdceGMzXHhiNVwnKSxcbiAgICAoMHhENiwgXCdNXCcsIFwnXHhjM1x4YjZcJyksXG4gICAgKDB4RDcsIFwnVlwnKSxcbiAgICAoMHhEOCwgXCdNXCcsIFwnXHhjM1x4YjhcJyksXG4gICAgKDB4RDksIFwnTVwnLCBcJ1x4YzNceGI5XCcpLFxuICAgICgweERBLCBcJ01cJywgXCdceGMzXHhiYVwnKSxcbiAgICAoMHhEQiwgXCdNXCcsIFwnXHhjM1x4YmJcJyksXG4gICAgKDB4REMsIFwnTVwnLCBcJ1x4YzNceGJjXCcpLFxuICAgICgweERELCBcJ01cJywgXCdceGMzXHhiZFwnKSxcbiAgICAoMHhERSwgXCdNXCcsIFwnXHhjM1x4YmVcJyksXG4gICAgKDB4REYsIFwnRFwnLCBcJ3NzXCcpLFxuICAgICgweEUwLCBcJ1ZcJyksXG4gICAgKDB4RTEsIFwnVlwnKSxcbiAgICAoMHhFMiwgXCdWXCcpLFxuICAgICgweEUzLCBcJ1ZcJyksXG4gICAgKDB4RTQsIFwnVlwnKSxcbiAgICAoMHhFNSwgXCdWXCcpLFxuICAgICgweEU2LCBcJ1ZcJyksXG4gICAgKDB4RTcsIFwnVlwnKSxcbiAgICAoMHhFOCwgXCdWXCcpLFxuICAgICgweEU5LCBcJ1ZcJyksXG4gICAgKDB4RUEsIFwnVlwnKSxcbiAgICAoMHhFQiwgXCdWXCcpLFxuICAgICgweEVDLCBcJ1ZcJyksXG4gICAgKDB4RUQsIFwnVlwnKSxcbiAgICAoMHhFRSwgXCdWXCcpLFxuICAgICgweEVGLCBcJ1ZcJyksXG4gICAgKDB4RjAsIFwnVlwnKSxcbiAgICAoMHhGMSwgXCdWXCcpLFxuICAgICgweEYyLCBcJ1ZcJyksXG4gICAgKDB4RjMsIFwnVlwnKSxcbiAgICAoMHhGNCwgXCdWXCcpLFxuICAgICgweEY1LCBcJ1ZcJyksXG4gICAgKDB4RjYsIFwnVlwnKSxcbiAgICAoMHhGNywgXCdWXCcpLFxuICAgICgweEY4LCBcJ1ZcJyksXG4gICAgKDB4RjksIFwnVlwnKSxcbiAgICAoMHhGQSwgXCdWXCcpLFxuICAgICgweEZCLCBcJ1ZcJyksXG4gICAgKDB4RkMsIFwnVlwnKSxcbiAgICAoMHhGRCwgXCdWXCcpLFxuICAgICgweEZFLCBcJ1ZcJyksXG4gICAgKDB4RkYsIFwnVlwnKSxcbiAgICAoMHgxMDAsIFwnTVwnLCBcJ1x4YzRceDgxXCcpLFxuICAgICgweDEwMSwgXCdWXCcpLFxuICAgICgweDEwMiwgXCdNXCcsIFwnXHhjNFx4ODNcJyksXG4gICAgKDB4MTAzLCBcJ1ZcJyksXG4gICAgKDB4MTA0LCBcJ01cJywgXCdceGM0XHg4NVwnKSxcbiAgICAoMHgxMDUsIFwnVlwnKSxcbiAgICAoMHgxMDYsIFwnTVwnLCBcJ1x4YzRceDg3XCcpLFxuICAgICgweDEwNywgXCdWXCcpLFxuICAgICgweDEwOCwgXCdNXCcsIFwnXHhjNFx4ODlcJyksXG4gICAgKDB4MTA5LCBcJ1ZcJyksXG4gICAgKDB4MTBBLCBcJ01cJywgXCdceGM0XHg4YlwnKSxcbiAgICAoMHgxMEIsIFwnVlwnKSxcbiAgICAoMHgxMEMsIFwnTVwnLCBcJ1x4YzRceDhkXCcpLFxuICAgICgweDEwRCwgXCdWXCcpLFxuICAgICgweDEwRSwgXCdNXCcsIFwnXHhjNFx4OGZcJyksXG4gICAgKDB4MTBGLCBcJ1ZcJyksXG4gICAgKDB4MTEwLCBcJ01cJywgXCdceGM0XHg5MVwnKSxcbiAgICAoMHgxMTEsIFwnVlwnKSxcbiAgICAoMHgxMTIsIFwnTVwnLCBcJ1x4YzRceDkzXCcpLFxuICAgICgweDExMywgXCdWXCcpLFxuICAgICgweDExNCwgXCdNXCcsIFwnXHhjNFx4OTVcJyksXG4gICAgKDB4MTE1LCBcJ1ZcJyksXG4gICAgKDB4MTE2LCBcJ01cJywgXCdceGM0XHg5N1wnKSxcbiAgICAoMHgxMTcsIFwnVlwnKSxcbiAgICAoMHgxMTgsIFwnTVwnLCBcJ1x4YzRceDk5XCcpLFxuICAgICgweDExOSwgXCdWXCcpLFxuICAgICgweDExQSwgXCdNXCcsIFwnXHhjNFx4OWJcJyksXG4gICAgKDB4MTFCLCBcJ1ZcJyksXG4gICAgKDB4MTFDLCBcJ01cJywgXCdceGM0XHg5ZFwnKSxcbiAgICAoMHgxMUQsIFwnVlwnKSxcbiAgICAoMHgxMUUsIFwnTVwnLCBcJ1x4YzRceDlmXCcpLFxuICAgICgweDExRiwgXCdWXCcpLFxuICAgICgweDEyMCwgXCdNXCcsIFwnXHhjNFx4YTFcJyksXG4gICAgKDB4MTIxLCBcJ1ZcJyksXG4gICAgKDB4MTIyLCBcJ01cJywgXCdceGM0XHhhM1wnKSxcbiAgICAoMHgxMjMsIFwnVlwnKSxcbiAgICAoMHgxMjQsIFwnTVwnLCBcJ1x4YzRceGE1XCcpLFxuICAgICgweDEyNSwgXCdWXCcpLFxuICAgICgweDEyNiwgXCdNXCcsIFwnXHhjNFx4YTdcJyksXG4gICAgKDB4MTI3LCBcJ1ZcJyksXG4gICAgKDB4MTI4LCBcJ01cJywgXCdceGM0XHhhOVwnKSxcbiAgICAoMHgxMjksIFwnVlwnKSxcbiAgICAoMHgxMkEsIFwnTVwnLCBcJ1x4YzRceGFiXCcpLFxuICAgICgweDEyQiwgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MTJDLCBcJ01cJywgXCdceGM0XHhhZFwnKSxcbiAgICAoMHgxMkQsIFwnVlwnKSxcbiAgICAoMHgxMkUsIFwnTVwnLCBcJ1x4YzRceGFmXCcpLFxuICAgICgweDEyRiwgXCdWXCcpLFxuICAgICgweDEzMCwgXCdNXCcsIFwnaVx4Y2NceDg3XCcpLFxuICAgICgweDEzMSwgXCdWXCcpLFxuICAgICgweDEzMiwgXCdNXCcsIFwnaWpcJyksXG4gICAgKDB4MTM0LCBcJ01cJywgXCdceGM0XHhiNVwnKSxcbiAgICAoMHgxMzUsIFwnVlwnKSxcbiAgICAoMHgxMzYsIFwnTVwnLCBcJ1x4YzRceGI3XCcpLFxuICAgICgweDEzNywgXCdWXCcpLFxuICAgICgweDEzOSwgXCdNXCcsIFwnXHhjNFx4YmFcJyksXG4gICAgKDB4MTNBLCBcJ1ZcJyksXG4gICAgKDB4MTNCLCBcJ01cJywgXCdceGM0XHhiY1wnKSxcbiAgICAoMHgxM0MsIFwnVlwnKSxcbiAgICAoMHgxM0QsIFwnTVwnLCBcJ1x4YzRceGJlXCcpLFxuICAgICgweDEzRSwgXCdWXCcpLFxuICAgICgweDEzRiwgXCdNXCcsIFwnbFx4YzJceGI3XCcpLFxuICAgICgweDE0MSwgXCdNXCcsIFwnXHhjNVx4ODJcJyksXG4gICAgKDB4MTQyLCBcJ1ZcJyksXG4gICAgKDB4MTQzLCBcJ01cJywgXCdceGM1XHg4NFwnKSxcbiAgICAoMHgxNDQsIFwnVlwnKSxcbiAgICAoMHgxNDUsIFwnTVwnLCBcJ1x4YzVceDg2XCcpLFxuICAgICgweDE0NiwgXCdWXCcpLFxuICAgICgweDE0NywgXCdNXCcsIFwnXHhjNVx4ODhcJyksXG4gICAgKDB4MTQ4LCBcJ1ZcJyksXG4gICAgKDB4MTQ5LCBcJ01cJywgXCdceGNhXHhiY25cJyksXG4gICAgKDB4MTRBLCBcJ01cJywgXCdceGM1XHg4YlwnKSxcbiAgICAoMHgxNEIsIFwnVlwnKSxcbiAgICAoMHgxNEMsIFwnTVwnLCBcJ1x4YzVceDhkXCcpLFxuICAgICgweDE0RCwgXCdWXCcpLFxuICAgICgweDE0RSwgXCdNXCcsIFwnXHhjNVx4OGZcJyksXG4gICAgKDB4MTRGLCBcJ1ZcJyksXG4gICAgKDB4MTUwLCBcJ01cJywgXCdceGM1XHg5MVwnKSxcbiAgICAoMHgxNTEsIFwnVlwnKSxcbiAgICAoMHgxNTIsIFwnTVwnLCBcJ1x4YzVceDkzXCcpLFxuICAgICgweDE1MywgXCdWXCcpLFxuICAgICgweDE1NCwgXCdNXCcsIFwnXHhjNVx4OTVcJyksXG4gICAgKDB4MTU1LCBcJ1ZcJyksXG4gICAgKDB4MTU2LCBcJ01cJywgXCdceGM1XHg5N1wnKSxcbiAgICAoMHgxNTcsIFwnVlwnKSxcbiAgICAoMHgxNTgsIFwnTVwnLCBcJ1x4YzVceDk5XCcpLFxuICAgICgweDE1OSwgXCdWXCcpLFxuICAgICgweDE1QSwgXCdNXCcsIFwnXHhjNVx4OWJcJyksXG4gICAgKDB4MTVCLCBcJ1ZcJyksXG4gICAgKDB4MTVDLCBcJ01cJywgXCdceGM1XHg5ZFwnKSxcbiAgICAoMHgxNUQsIFwnVlwnKSxcbiAgICAoMHgxNUUsIFwnTVwnLCBcJ1x4YzVceDlmXCcpLFxuICAgICgweDE1RiwgXCdWXCcpLFxuICAgICgweDE2MCwgXCdNXCcsIFwnXHhjNVx4YTFcJyksXG4gICAgKDB4MTYxLCBcJ1ZcJyksXG4gICAgKDB4MTYyLCBcJ01cJywgXCdceGM1XHhhM1wnKSxcbiAgICAoMHgxNjMsIFwnVlwnKSxcbiAgICAoMHgxNjQsIFwnTVwnLCBcJ1x4YzVceGE1XCcpLFxuICAgICgweDE2NSwgXCdWXCcpLFxuICAgICgweDE2NiwgXCdNXCcsIFwnXHhjNVx4YTdcJyksXG4gICAgKDB4MTY3LCBcJ1ZcJyksXG4gICAgKDB4MTY4LCBcJ01cJywgXCdceGM1XHhhOVwnKSxcbiAgICAoMHgxNjksIFwnVlwnKSxcbiAgICAoMHgxNkEsIFwnTVwnLCBcJ1x4YzVceGFiXCcpLFxuICAgICgweDE2QiwgXCdWXCcpLFxuICAgICgweDE2QywgXCdNXCcsIFwnXHhjNVx4YWRcJyksXG4gICAgKDB4MTZELCBcJ1ZcJyksXG4gICAgKDB4MTZFLCBcJ01cJywgXCdceGM1XHhhZlwnKSxcbiAgICAoMHgxNkYsIFwnVlwnKSxcbiAgICAoMHgxNzAsIFwnTVwnLCBcJ1x4YzVceGIxXCcpLFxuICAgICgweDE3MSwgXCdWXCcpLFxuICAgICgweDE3MiwgXCdNXCcsIFwnXHhjNVx4YjNcJyksXG4gICAgKDB4MTczLCBcJ1ZcJyksXG4gICAgKDB4MTc0LCBcJ01cJywgXCdceGM1XHhiNVwnKSxcbiAgICAoMHgxNzUsIFwnVlwnKSxcbiAgICAoMHgxNzYsIFwnTVwnLCBcJ1x4YzVceGI3XCcpLFxuICAgICgweDE3NywgXCdWXCcpLFxuICAgICgweDE3OCwgXCdNXCcsIFwnXHhjM1x4YmZcJyksXG4gICAgKDB4MTc5LCBcJ01cJywgXCdceGM1XHhiYVwnKSxcbiAgICAoMHgxN0EsIFwnVlwnKSxcbiAgICAoMHgxN0IsIFwnTVwnLCBcJ1x4YzVceGJjXCcpLFxuICAgICgweDE3QywgXCdWXCcpLFxuICAgICgweDE3RCwgXCdNXCcsIFwnXHhjNVx4YmVcJyksXG4gICAgKDB4MTdFLCBcJ1ZcJyksXG4gICAgKDB4MTdGLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDE4MCwgXCdWXCcpLFxuICAgICgweDE4MSwgXCdNXCcsIFwnXHhjOVx4OTNcJyksXG4gICAgKDB4MTgyLCBcJ01cJywgXCdceGM2XHg4M1wnKSxcbiAgICAoMHgxODMsIFwnVlwnKSxcbiAgICAoMHgxODQsIFwnTVwnLCBcJ1x4YzZceDg1XCcpLFxuICAgICgweDE4NSwgXCdWXCcpLFxuICAgICgweDE4NiwgXCdNXCcsIFwnXHhjOVx4OTRcJyksXG4gICAgKDB4MTg3LCBcJ01cJywgXCdceGM2XHg4OFwnKSxcbiAgICAoMHgxODgsIFwnVlwnKSxcbiAgICAoMHgxODksIFwnTVwnLCBcJ1x4YzlceDk2XCcpLFxuICAgICgweDE4QSwgXCdNXCcsIFwnXHhjOVx4OTdcJyksXG4gICAgKDB4MThCLCBcJ01cJywgXCdceGM2XHg4Y1wnKSxcbiAgICAoMHgxOEMsIFwnVlwnKSxcbiAgICAoMHgxOEUsIFwnTVwnLCBcJ1x4YzdceDlkXCcpLFxuICAgICgweDE4RiwgXCdNXCcsIFwnXHhjOVx4OTlcJyksXG4gICAgKDB4MTkwLCBcJ01cJywgXCdceGM5XHg5YlwnKSxcbiAgICAoMHgxOTEsIFwnTVwnLCBcJ1x4YzZceDkyXCcpLFxuICAgICgweDE5MiwgXCdWXCcpLFxuICAgICgweDE5MywgXCdNXCcsIFwnXHhjOVx4YTBcJyksXG4gICAgXVxuXG5kZWYgX3NlZ180KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxOTQsIFwnTVwnLCBcJ1x4YzlceGEzXCcpLFxuICAgICgweDE5NSwgXCdWXCcpLFxuICAgICgweDE5NiwgXCdNXCcsIFwnXHhjOVx4YTlcJyksXG4gICAgKDB4MTk3LCBcJ01cJywgXCdceGM5XHhhOFwnKSxcbiAgICAoMHgxOTgsIFwnTVwnLCBcJ1x4YzZceDk5XCcpLFxuICAgICgweDE5OSwgXCdWXCcpLFxuICAgICgweDE5QywgXCdNXCcsIFwnXHhjOVx4YWZcJyksXG4gICAgKDB4MTlELCBcJ01cJywgXCdceGM5XHhiMlwnKSxcbiAgICAoMHgxOUUsIFwnVlwnKSxcbiAgICAoMHgxOUYsIFwnTVwnLCBcJ1x4YzlceGI1XCcpLFxuICAgICgweDFBMCwgXCdNXCcsIFwnXHhjNlx4YTFcJyksXG4gICAgKDB4MUExLCBcJ1ZcJyksXG4gICAgKDB4MUEyLCBcJ01cJywgXCdceGM2XHhhM1wnKSxcbiAgICAoMHgxQTMsIFwnVlwnKSxcbiAgICAoMHgxQTQsIFwnTVwnLCBcJ1x4YzZceGE1XCcpLFxuICAgICgweDFBNSwgXCdWXCcpLFxuICAgICgweDFBNiwgXCdNXCcsIFwnXHhjYVx4ODBcJyksXG4gICAgKDB4MUE3LCBcJ01cJywgXCdceGM2XHhhOFwnKSxcbiAgICAoMHgxQTgsIFwnVlwnKSxcbiAgICAoMHgxQTksIFwnTVwnLCBcJ1x4Y2FceDgzXCcpLFxuICAgICgweDFBQSwgXCdWXCcpLFxuICAgICgweDFBQywgXCdNXCcsIFwnXHhjNlx4YWRcJyksXG4gICAgKDB4MUFELCBcJ1ZcJyksXG4gICAgKDB4MUFFLCBcJ01cJywgXCdceGNhXHg4OFwnKSxcbiAgICAoMHgxQUYsIFwnTVwnLCBcJ1x4YzZceGIwXCcpLFxuICAgICgweDFCMCwgXCdWXCcpLFxuICAgICgweDFCMSwgXCdNXCcsIFwnXHhjYVx4OGFcJyksXG4gICAgKDB4MUIyLCBcJ01cJywgXCdceGNhXHg4YlwnKSxcbiAgICAoMHgxQjMsIFwnTVwnLCBcJ1x4YzZceGI0XCcpLFxuICAgICgweDFCNCwgXCdWXCcpLFxuICAgICgweDFCNSwgXCdNXCcsIFwnXHhjNlx4YjZcJyksXG4gICAgKDB4MUI2LCBcJ1ZcJyksXG4gICAgKDB4MUI3LCBcJ01cJywgXCdceGNhXHg5MlwnKSxcbiAgICAoMHgxQjgsIFwnTVwnLCBcJ1x4YzZceGI5XCcpLFxuICAgICgweDFCOSwgXCdWXCcpLFxuICAgICgweDFCQywgXCdNXCcsIFwnXHhjNlx4YmRcJyksXG4gICAgKDB4MUJELCBcJ1ZcJyksXG4gICAgKDB4MUM0LCBcJ01cJywgXCdkXHhjNVx4YmVcJyksXG4gICAgKDB4MUM3LCBcJ01cJywgXCdsalwnKSxcbiAgICAoMHgxQ0EsIFwnTVwnLCBcJ25qXCcpLFxuICAgICgweDFDRCwgXCdNXCcsIFwnXHhjN1x4OGVcJyksXG4gICAgKDB4MUNFLCBcJ1ZcJyksXG4gICAgKDB4MUNGLCBcJ01cJywgXCdceGM3XHg5MFwnKSxcbiAgICAoMHgxRDAsIFwnVlwnKSxcbiAgICAoMHgxRDEsIFwnTVwnLCBcJ1x4YzdceDkyXCcpLFxuICAgICgweDFEMiwgXCdWXCcpLFxuICAgICgweDFEMywgXCdNXCcsIFwnXHhjN1x4OTRcJyksXG4gICAgKDB4MUQ0LCBcJ1ZcJyksXG4gICAgKDB4MUQ1LCBcJ01cJywgXCdceGM3XHg5NlwnKSxcbiAgICAoMHgxRDYsIFwnVlwnKSxcbiAgICAoMHgxRDcsIFwnTVwnLCBcJ1x4YzdceDk4XCcpLFxuICAgICgweDFEOCwgXCdWXCcpLFxuICAgICgweDFEOSwgXCdNXCcsIFwnXHhjN1x4OWFcJyksXG4gICAgKDB4MURBLCBcJ1ZcJyksXG4gICAgKDB4MURCLCBcJ01cJywgXCdceGM3XHg5Y1wnKSxcbiAgICAoMHgxREMsIFwnVlwnKSxcbiAgICAoMHgxREUsIFwnTVwnLCBcJ1x4YzdceDlmXCcpLFxuICAgICgweDFERiwgXCdWXCcpLFxuICAgICgweDFFMCwgXCdNXCcsIFwnXHhjN1x4YTFcJyksXG4gICAgKDB4MUUxLCBcJ1ZcJyksXG4gICAgKDB4MUUyLCBcJ01cJywgXCdceGM3XHhhM1wnKSxcbiAgICAoMHgxRTMsIFwnVlwnKSxcbiAgICAoMHgxRTQsIFwnTVwnLCBcJ1x4YzdceGE1XCcpLFxuICAgICgweDFFNSwgXCdWXCcpLFxuICAgICgweDFFNiwgXCdNXCcsIFwnXHhjN1x4YTdcJyksXG4gICAgKDB4MUU3LCBcJ1ZcJyksXG4gICAgKDB4MUU4LCBcJ01cJywgXCdceGM3XHhhOVwnKSxcbiAgICAoMHgxRTksIFwnVlwnKSxcbiAgICAoMHgxRUEsIFwnTVwnLCBcJ1x4YzdceGFiXCcpLFxuICAgICgweDFFQiwgXCdWXCcpLFxuICAgICgweDFFQywgXCdNXCcsIFwnXHhjN1x4YWRcJyksXG4gICAgKDB4MUVELCBcJ1ZcJyksXG4gICAgKDB4MUVFLCBcJ01cJywgXCdceGM3XHhhZlwnKSxcbiAgICAoMHgxRUYsIFwnVlwnKSxcbiAgICAoMHgxRjEsIFwnTVwnLCBcJ2R6XCcpLFxuICAgICgweDFGNCwgXCdNXCcsIFwnXHhjN1x4YjVcJyksXG4gICAgKDB4MUY1LCBcJ1ZcJyksXG4gICAgKDB4MUY2LCBcJ01cJywgXCdceGM2XHg5NVwnKSxcbiAgICAoMHgxRjcsIFwnTVwnLCBcJ1x4YzZceGJmXCcpLFxuICAgICgweDFGOCwgXCdNXCcsIFwnXHhjN1x4YjlcJyksXG4gICAgKDB4MUY5LCBcJ1ZcJyksXG4gICAgKDB4MUZBLCBcJ01cJywgXCdceGM3XHhiYlwnKSxcbiAgICAoMHgxRkIsIFwnVlwnKSxcbiAgICAoMHgxRkMsIFwnTVwnLCBcJ1x4YzdceGJkXCcpLFxuICAgICgweDFGRCwgXCdWXCcpLFxuICAgICgweDFGRSwgXCdNXCcsIFwnXHhjN1x4YmZcJyksXG4gICAgKDB4MUZGLCBcJ1ZcJyksXG4gICAgKDB4MjAwLCBcJ01cJywgXCdceGM4XHg4MVwnKSxcbiAgICAoMHgyMDEsIFwnVlwnKSxcbiAgICAoMHgyMDIsIFwnTVwnLCBcJ1x4YzhceDgzXCcpLFxuICAgICgweDIwMywgXCdWXCcpLFxuICAgICgweDIwNCwgXCdNXCcsIFwnXHhjOFx4ODVcJyksXG4gICAgKDB4MjA1LCBcJ1ZcJyksXG4gICAgKDB4MjA2LCBcJ01cJywgXCdceGM4XHg4N1wnKSxcbiAgICAoMHgyMDcsIFwnVlwnKSxcbiAgICAoMHgyMDgsIFwnTVwnLCBcJ1x4YzhceDg5XCcpLFxuICAgICgweDIwOSwgXCdWXCcpLFxuICAgICgweDIwQSwgXCdNXCcsIFwnXHhjOFx4OGJcJyksXG4gICAgKDB4MjBCLCBcJ1ZcJyksXG4gICAgKDB4MjBDLCBcJ01cJywgXCdceGM4XHg4ZFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzUoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDIwRCwgXCdWXCcpLFxuICAgICgweDIwRSwgXCdNXCcsIFwnXHhjOFx4OGZcJyksXG4gICAgKDB4MjBGLCBcJ1ZcJyksXG4gICAgKDB4MjEwLCBcJ01cJywgXCdceGM4XHg5MVwnKSxcbiAgICAoMHgyMTEsIFwnVlwnKSxcbiAgICAoMHgyMTIsIFwnTVwnLCBcJ1x4YzhceDkzXCcpLFxuICAgICgweDIxMywgXCdWXCcpLFxuICAgICgweDIxNCwgXCdNXCcsIFwnXHhjOFx4OTVcJyksXG4gICAgKDB4MjE1LCBcJ1ZcJyksXG4gICAgKDB4MjE2LCBcJ01cJywgXCdceGM4XHg5N1wnKSxcbiAgICAoMHgyMTcsIFwnVlwnKSxcbiAgICAoMHgyMTgsIFwnTVwnLCBcJ1x4YzhceDk5XCcpLFxuICAgICgweDIxOSwgXCdWXCcpLFxuICAgICgweDIxQSwgXCdNXCcsIFwnXHhjOFx4OWJcJyksXG4gICAgKDB4MjFCLCBcJ1ZcJyksXG4gICAgKDB4MjFDLCBcJ01cJywgXCdceGM4XHg5ZFwnKSxcbiAgICAoMHgyMUQsIFwnVlwnKSxcbiAgICAoMHgyMUUsIFwnTVwnLCBcJ1x4YzhceDlmXCcpLFxuICAgICgweDIxRiwgXCdWXCcpLFxuICAgICgweDIyMCwgXCdNXCcsIFwnXHhjNlx4OWVcJyksXG4gICAgKDB4MjIxLCBcJ1ZcJyksXG4gICAgKDB4MjIyLCBcJ01cJywgXCdceGM4XHhhM1wnKSxcbiAgICAoMHgyMjMsIFwnVlwnKSxcbiAgICAoMHgyMjQsIFwnTVwnLCBcJ1x4YzhceGE1XCcpLFxuICAgICgweDIyNSwgXCdWXCcpLFxuICAgICgweDIyNiwgXCdNXCcsIFwnXHhjOFx4YTdcJyksXG4gICAgKDB4MjI3LCBcJ1ZcJyksXG4gICAgKDB4MjI4LCBcJ01cJywgXCdceGM4XHhhOVwnKSxcbiAgICAoMHgyMjksIFwnVlwnKSxcbiAgICAoMHgyMkEsIFwnTVwnLCBcJ1x4YzhceGFiXCcpLFxuICAgICgweDIyQiwgXCdWXCcpLFxuICAgICgweDIyQywgXCdNXCcsIFwnXHhjOFx4YWRcJyksXG4gICAgKDB4MjJELCBcJ1ZcJyksXG4gICAgKDB4MjJFLCBcJ01cJywgXCdceGM4XHhhZlwnKSxcbiAgICAoMHgyMkYsIFwnVlwnKSxcbiAgICAoMHgyMzAsIFwnTVwnLCBcJ1x4YzhceGIxXCcpLFxuICAgICgweDIzMSwgXCdWXCcpLFxuICAgICgweDIzMiwgXCdNXCcsIFwnXHhjOFx4YjNcJyksXG4gICAgKDB4MjMzLCBcJ1ZcJyksXG4gICAgKDB4MjNBLCBcJ01cJywgXCdceGUyXHhiMVx4YTVcJyksXG4gICAgKDB4MjNCLCBcJ01cJywgXCdceGM4XHhiY1wnKSxcbiAgICAoMHgyM0MsIFwnVlwnKSxcbiAgICAoMHgyM0QsIFwnTVwnLCBcJ1x4YzZceDlhXCcpLFxuICAgICgweDIzRSwgXCdNXCcsIFwnXHhlMlx4YjFceGE2XCcpLFxuICAgICgweDIzRiwgXCdWXCcpLFxuICAgICgweDI0MSwgXCdNXCcsIFwnXHhjOVx4ODJcJyksXG4gICAgKDB4MjQyLCBcJ1ZcJyksXG4gICAgKDB4MjQzLCBcJ01cJywgXCdceGM2XHg4MFwnKSxcbiAgICAoMHgyNDQsIFwnTVwnLCBcJ1x4Y2FceDg5XCcpLFxuICAgICgweDI0NSwgXCdNXCcsIFwnXHhjYVx4OGNcJyksXG4gICAgKDB4MjQ2LCBcJ01cJywgXCdceGM5XHg4N1wnKSxcbiAgICAoMHgyNDcsIFwnVlwnKSxcbiAgICAoMHgyNDgsIFwnTVwnLCBcJ1x4YzlceDg5XCcpLFxuICAgICgweDI0OSwgXCdWXCcpLFxuICAgICgweDI0QSwgXCdNXCcsIFwnXHhjOVx4OGJcJyksXG4gICAgKDB4MjRCLCBcJ1ZcJyksXG4gICAgKDB4MjRDLCBcJ01cJywgXCdceGM5XHg4ZFwnKSxcbiAgICAoMHgyNEQsIFwnVlwnKSxcbiAgICAoMHgyNEUsIFwnTVwnLCBcJ1x4YzlceDhmXCcpLFxuICAgICgweDI0RiwgXCdWXCcpLFxuICAgICgweDJCMCwgXCdNXCcsIFwnaFwnKSxcbiAgICAoMHgyQjEsIFwnTVwnLCBcJ1x4YzlceGE2XCcpLFxuICAgICgweDJCMiwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgyQjMsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MkI0LCBcJ01cJywgXCdceGM5XHhiOVwnKSxcbiAgICAoMHgyQjUsIFwnTVwnLCBcJ1x4YzlceGJiXCcpLFxuICAgICgweDJCNiwgXCdNXCcsIFwnXHhjYVx4ODFcJyksXG4gICAgKDB4MkI3LCBcJ01cJywgXCd3XCcpLFxuICAgICgweDJCOCwgXCdNXCcsIFwneVwnKSxcbiAgICAoMHgyQjksIFwnVlwnKSxcbiAgICAoMHgyRDgsIFwnM1wnLCBcJyBceGNjXHg4NlwnKSxcbiAgICAoMHgyRDksIFwnM1wnLCBcJyBceGNjXHg4N1wnKSxcbiAgICAoMHgyREEsIFwnM1wnLCBcJyBceGNjXHg4YVwnKSxcbiAgICAoMHgyREIsIFwnM1wnLCBcJyBceGNjXHhhOFwnKSxcbiAgICAoMHgyREMsIFwnM1wnLCBcJyBceGNjXHg4M1wnKSxcbiAgICAoMHgyREQsIFwnM1wnLCBcJyBceGNjXHg4YlwnKSxcbiAgICAoMHgyREUsIFwnVlwnKSxcbiAgICAoMHgyRTAsIFwnTVwnLCBcJ1x4YzlceGEzXCcpLFxuICAgICgweDJFMSwgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHgyRTIsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MkUzLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDJFNCwgXCdNXCcsIFwnXHhjYVx4OTVcJyksXG4gICAgKDB4MkU1LCBcJ1ZcJyksXG4gICAgKDB4MzQwLCBcJ01cJywgXCdceGNjXHg4MFwnKSxcbiAgICAoMHgzNDEsIFwnTVwnLCBcJ1x4Y2NceDgxXCcpLFxuICAgICgweDM0MiwgXCdWXCcpLFxuICAgICgweDM0MywgXCdNXCcsIFwnXHhjY1x4OTNcJyksXG4gICAgKDB4MzQ0LCBcJ01cJywgXCdceGNjXHg4OFx4Y2NceDgxXCcpLFxuICAgICgweDM0NSwgXCdNXCcsIFwnXHhjZVx4YjlcJyksXG4gICAgKDB4MzQ2LCBcJ1ZcJyksXG4gICAgKDB4MzRGLCBcJ0lcJyksXG4gICAgKDB4MzUwLCBcJ1ZcJyksXG4gICAgKDB4MzcwLCBcJ01cJywgXCdceGNkXHhiMVwnKSxcbiAgICAoMHgzNzEsIFwnVlwnKSxcbiAgICAoMHgzNzIsIFwnTVwnLCBcJ1x4Y2RceGIzXCcpLFxuICAgICgweDM3MywgXCdWXCcpLFxuICAgICgweDM3NCwgXCdNXCcsIFwnXHhjYVx4YjlcJyksXG4gICAgKDB4Mzc1LCBcJ1ZcJyksXG4gICAgKDB4Mzc2LCBcJ01cJywgXCdceGNkXHhiN1wnKSxcbiAgICAoMHgzNzcsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzYoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDM3OCwgXCdYXCcpLFxuICAgICgweDM3QSwgXCczXCcsIFwnIFx4Y2VceGI5XCcpLFxuICAgICgweDM3QiwgXCdWXCcpLFxuICAgICgweDM3RSwgXCczXCcsIFwnO1wnKSxcbiAgICAoMHgzN0YsIFwnTVwnLCBcJ1x4Y2ZceGIzXCcpLFxuICAgICgweDM4MCwgXCdYXCcpLFxuICAgICgweDM4NCwgXCczXCcsIFwnIFx4Y2NceDgxXCcpLFxuICAgICgweDM4NSwgXCczXCcsIFwnIFx4Y2NceDg4XHhjY1x4ODFcJyksXG4gICAgKDB4Mzg2LCBcJ01cJywgXCdceGNlXHhhY1wnKSxcbiAgICAoMHgzODcsIFwnTVwnLCBcJ1x4YzJceGI3XCcpLFxuICAgICgweDM4OCwgXCdNXCcsIFwnXHhjZVx4YWRcJyksXG4gICAgKDB4Mzg5LCBcJ01cJywgXCdceGNlXHhhZVwnKSxcbiAgICAoMHgzOEEsIFwnTVwnLCBcJ1x4Y2VceGFmXCcpLFxuICAgICgweDM4QiwgXCdYXCcpLFxuICAgICgweDM4QywgXCdNXCcsIFwnXHhjZlx4OGNcJyksXG4gICAgKDB4MzhELCBcJ1hcJyksXG4gICAgKDB4MzhFLCBcJ01cJywgXCdceGNmXHg4ZFwnKSxcbiAgICAoMHgzOEYsIFwnTVwnLCBcJ1x4Y2ZceDhlXCcpLFxuICAgICgweDM5MCwgXCdWXCcpLFxuICAgICgweDM5MSwgXCdNXCcsIFwnXHhjZVx4YjFcJyksXG4gICAgKDB4MzkyLCBcJ01cJywgXCdceGNlXHhiMlwnKSxcbiAgICAoMHgzOTMsIFwnTVwnLCBcJ1x4Y2VceGIzXCcpLFxuICAgICgweDM5NCwgXCdNXCcsIFwnXHhjZVx4YjRcJyksXG4gICAgKDB4Mzk1LCBcJ01cJywgXCdceGNlXHhiNVwnKSxcbiAgICAoMHgzOTYsIFwnTVwnLCBcJ1x4Y2VceGI2XCcpLFxuICAgICgweDM5NywgXCdNXCcsIFwnXHhjZVx4YjdcJyksXG4gICAgKDB4Mzk4LCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgzOTksIFwnTVwnLCBcJ1x4Y2VceGI5XCcpLFxuICAgICgweDM5QSwgXCdNXCcsIFwnXHhjZVx4YmFcJyksXG4gICAgKDB4MzlCLCBcJ01cJywgXCdceGNlXHhiYlwnKSxcbiAgICAoMHgzOUMsIFwnTVwnLCBcJ1x4Y2VceGJjXCcpLFxuICAgICgweDM5RCwgXCdNXCcsIFwnXHhjZVx4YmRcJyksXG4gICAgKDB4MzlFLCBcJ01cJywgXCdceGNlXHhiZVwnKSxcbiAgICAoMHgzOUYsIFwnTVwnLCBcJ1x4Y2VceGJmXCcpLFxuICAgICgweDNBMCwgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4M0ExLCBcJ01cJywgXCdceGNmXHg4MVwnKSxcbiAgICAoMHgzQTIsIFwnWFwnKSxcbiAgICAoMHgzQTMsIFwnTVwnLCBcJ1x4Y2ZceDgzXCcpLFxuICAgICgweDNBNCwgXCdNXCcsIFwnXHhjZlx4ODRcJyksXG4gICAgKDB4M0E1LCBcJ01cJywgXCdceGNmXHg4NVwnKSxcbiAgICAoMHgzQTYsIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDNBNywgXCdNXCcsIFwnXHhjZlx4ODdcJyksXG4gICAgKDB4M0E4LCBcJ01cJywgXCdceGNmXHg4OFwnKSxcbiAgICAoMHgzQTksIFwnTVwnLCBcJ1x4Y2ZceDg5XCcpLFxuICAgICgweDNBQSwgXCdNXCcsIFwnXHhjZlx4OGFcJyksXG4gICAgKDB4M0FCLCBcJ01cJywgXCdceGNmXHg4YlwnKSxcbiAgICAoMHgzQUMsIFwnVlwnKSxcbiAgICAoMHgzQzIsIFwnRFwnLCBcJ1x4Y2ZceDgzXCcpLFxuICAgICgweDNDMywgXCdWXCcpLFxuICAgICgweDNDRiwgXCdNXCcsIFwnXHhjZlx4OTdcJyksXG4gICAgKDB4M0QwLCBcJ01cJywgXCdceGNlXHhiMlwnKSxcbiAgICAoMHgzRDEsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDNEMiwgXCdNXCcsIFwnXHhjZlx4ODVcJyksXG4gICAgKDB4M0QzLCBcJ01cJywgXCdceGNmXHg4ZFwnKSxcbiAgICAoMHgzRDQsIFwnTVwnLCBcJ1x4Y2ZceDhiXCcpLFxuICAgICgweDNENSwgXCdNXCcsIFwnXHhjZlx4ODZcJyksXG4gICAgKDB4M0Q2LCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgzRDcsIFwnVlwnKSxcbiAgICAoMHgzRDgsIFwnTVwnLCBcJ1x4Y2ZceDk5XCcpLFxuICAgICgweDNEOSwgXCdWXCcpLFxuICAgICgweDNEQSwgXCdNXCcsIFwnXHhjZlx4OWJcJyksXG4gICAgKDB4M0RCLCBcJ1ZcJyksXG4gICAgKDB4M0RDLCBcJ01cJywgXCdceGNmXHg5ZFwnKSxcbiAgICAoMHgzREQsIFwnVlwnKSxcbiAgICAoMHgzREUsIFwnTVwnLCBcJ1x4Y2ZceDlmXCcpLFxuICAgICgweDNERiwgXCdWXCcpLFxuICAgICgweDNFMCwgXCdNXCcsIFwnXHhjZlx4YTFcJyksXG4gICAgKDB4M0UxLCBcJ1ZcJyksXG4gICAgKDB4M0UyLCBcJ01cJywgXCdceGNmXHhhM1wnKSxcbiAgICAoMHgzRTMsIFwnVlwnKSxcbiAgICAoMHgzRTQsIFwnTVwnLCBcJ1x4Y2ZceGE1XCcpLFxuICAgICgweDNFNSwgXCdWXCcpLFxuICAgICgweDNFNiwgXCdNXCcsIFwnXHhjZlx4YTdcJyksXG4gICAgKDB4M0U3LCBcJ1ZcJyksXG4gICAgKDB4M0U4LCBcJ01cJywgXCdceGNmXHhhOVwnKSxcbiAgICAoMHgzRTksIFwnVlwnKSxcbiAgICAoMHgzRUEsIFwnTVwnLCBcJ1x4Y2ZceGFiXCcpLFxuICAgICgweDNFQiwgXCdWXCcpLFxuICAgICgweDNFQywgXCdNXCcsIFwnXHhjZlx4YWRcJyksXG4gICAgKDB4M0VELCBcJ1ZcJyksXG4gICAgKDB4M0VFLCBcJ01cJywgXCdceGNmXHhhZlwnKSxcbiAgICAoMHgzRUYsIFwnVlwnKSxcbiAgICAoMHgzRjAsIFwnTVwnLCBcJ1x4Y2VceGJhXCcpLFxuICAgICgweDNGMSwgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4M0YyLCBcJ01cJywgXCdceGNmXHg4M1wnKSxcbiAgICAoMHgzRjMsIFwnVlwnKSxcbiAgICAoMHgzRjQsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDNGNSwgXCdNXCcsIFwnXHhjZVx4YjVcJyksXG4gICAgKDB4M0Y2LCBcJ1ZcJyksXG4gICAgKDB4M0Y3LCBcJ01cJywgXCdceGNmXHhiOFwnKSxcbiAgICAoMHgzRjgsIFwnVlwnKSxcbiAgICAoMHgzRjksIFwnTVwnLCBcJ1x4Y2ZceDgzXCcpLFxuICAgICgweDNGQSwgXCdNXCcsIFwnXHhjZlx4YmJcJyksXG4gICAgKDB4M0ZCLCBcJ1ZcJyksXG4gICAgKDB4M0ZELCBcJ01cJywgXCdceGNkXHhiYlwnKSxcbiAgICAoMHgzRkUsIFwnTVwnLCBcJ1x4Y2RceGJjXCcpLFxuICAgICgweDNGRiwgXCdNXCcsIFwnXHhjZFx4YmRcJyksXG4gICAgKDB4NDAwLCBcJ01cJywgXCdceGQxXHg5MFwnKSxcbiAgICAoMHg0MDEsIFwnTVwnLCBcJ1x4ZDFceDkxXCcpLFxuICAgICgweDQwMiwgXCdNXCcsIFwnXHhkMVx4OTJcJyksXG4gICAgXVxuXG5kZWYgX3NlZ183KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHg0MDMsIFwnTVwnLCBcJ1x4ZDFceDkzXCcpLFxuICAgICgweDQwNCwgXCdNXCcsIFwnXHhkMVx4OTRcJyksXG4gICAgKDB4NDA1LCBcJ01cJywgXCdceGQxXHg5NVwnKSxcbiAgICAoMHg0MDYsIFwnTVwnLCBcJ1x4ZDFceDk2XCcpLFxuICAgICgweDQwNywgXCdNXCcsIFwnXHhkMVx4OTdcJyksXG4gICAgKDB4NDA4LCBcJ01cJywgXCdceGQxXHg5OFwnKSxcbiAgICAoMHg0MDksIFwnTVwnLCBcJ1x4ZDFceDk5XCcpLFxuICAgICgweDQwQSwgXCdNXCcsIFwnXHhkMVx4OWFcJyksXG4gICAgKDB4NDBCLCBcJ01cJywgXCdceGQxXHg5YlwnKSxcbiAgICAoMHg0MEMsIFwnTVwnLCBcJ1x4ZDFceDljXCcpLFxuICAgICgweDQwRCwgXCdNXCcsIFwnXHhkMVx4OWRcJyksXG4gICAgKDB4NDBFLCBcJ01cJywgXCdceGQxXHg5ZVwnKSxcbiAgICAoMHg0MEYsIFwnTVwnLCBcJ1x4ZDFceDlmXCcpLFxuICAgICgweDQxMCwgXCdNXCcsIFwnXHhkMFx4YjBcJyksXG4gICAgKDB4NDExLCBcJ01cJywgXCdceGQwXHhiMVwnKSxcbiAgICAoMHg0MTIsIFwnTVwnLCBcJ1x4ZDBceGIyXCcpLFxuICAgICgweDQxMywgXCdNXCcsIFwnXHhkMFx4YjNcJyksXG4gICAgKDB4NDE0LCBcJ01cJywgXCdceGQwXHhiNFwnKSxcbiAgICAoMHg0MTUsIFwnTVwnLCBcJ1x4ZDBceGI1XCcpLFxuICAgICgweDQxNiwgXCdNXCcsIFwnXHhkMFx4YjZcJyksXG4gICAgKDB4NDE3LCBcJ01cJywgXCdceGQwXHhiN1wnKSxcbiAgICAoMHg0MTgsIFwnTVwnLCBcJ1x4ZDBceGI4XCcpLFxuICAgICgweDQxOSwgXCdNXCcsIFwnXHhkMFx4YjlcJyksXG4gICAgKDB4NDFBLCBcJ01cJywgXCdceGQwXHhiYVwnKSxcbiAgICAoMHg0MUIsIFwnTVwnLCBcJ1x4ZDBceGJiXCcpLFxuICAgICgweDQxQywgXCdNXCcsIFwnXHhkMFx4YmNcJyksXG4gICAgKDB4NDFELCBcJ01cJywgXCdceGQwXHhiZFwnKSxcbiAgICAoMHg0MUUsIFwnTVwnLCBcJ1x4ZDBceGJlXCcpLFxuICAgICgweDQxRiwgXCdNXCcsIFwnXHhkMFx4YmZcJyksXG4gICAgKDB4NDIwLCBcJ01cJywgXCdceGQxXHg4MFwnKSxcbiAgICAoMHg0MjEsIFwnTVwnLCBcJ1x4ZDFceDgxXCcpLFxuICAgICgweDQyMiwgXCdNXCcsIFwnXHhkMVx4ODJcJyksXG4gICAgKDB4NDIzLCBcJ01cJywgXCdceGQxXHg4M1wnKSxcbiAgICAoMHg0MjQsIFwnTVwnLCBcJ1x4ZDFceDg0XCcpLFxuICAgICgweDQyNSwgXCdNXCcsIFwnXHhkMVx4ODVcJyksXG4gICAgKDB4NDI2LCBcJ01cJywgXCdceGQxXHg4NlwnKSxcbiAgICAoMHg0MjcsIFwnTVwnLCBcJ1x4ZDFceDg3XCcpLFxuICAgICgweDQyOCwgXCdNXCcsIFwnXHhkMVx4ODhcJyksXG4gICAgKDB4NDI5LCBcJ01cJywgXCdceGQxXHg4OVwnKSxcbiAgICAoMHg0MkEsIFwnTVwnLCBcJ1x4ZDFceDhhXCcpLFxuICAgICgweDQyQiwgXCdNXCcsIFwnXHhkMVx4OGJcJyksXG4gICAgKDB4NDJDLCBcJ01cJywgXCdceGQxXHg4Y1wnKSxcbiAgICAoMHg0MkQsIFwnTVwnLCBcJ1x4ZDFceDhkXCcpLFxuICAgICgweDQyRSwgXCdNXCcsIFwnXHhkMVx4OGVcJyksXG4gICAgKDB4NDJGLCBcJ01cJywgXCdceGQxXHg4ZlwnKSxcbiAgICAoMHg0MzAsIFwnVlwnKSxcbiAgICAoMHg0NjAsIFwnTVwnLCBcJ1x4ZDFceGExXCcpLFxuICAgICgweDQ2MSwgXCdWXCcpLFxuICAgICgweDQ2MiwgXCdNXCcsIFwnXHhkMVx4YTNcJyksXG4gICAgKDB4NDYzLCBcJ1ZcJyksXG4gICAgKDB4NDY0LCBcJ01cJywgXCdceGQxXHhhNVwnKSxcbiAgICAoMHg0NjUsIFwnVlwnKSxcbiAgICAoMHg0NjYsIFwnTVwnLCBcJ1x4ZDFceGE3XCcpLFxuICAgICgweDQ2NywgXCdWXCcpLFxuICAgICgweDQ2OCwgXCdNXCcsIFwnXHhkMVx4YTlcJyksXG4gICAgKDB4NDY5LCBcJ1ZcJyksXG4gICAgKDB4NDZBLCBcJ01cJywgXCdceGQxXHhhYlwnKSxcbiAgICAoMHg0NkIsIFwnVlwnKSxcbiAgICAoMHg0NkMsIFwnTVwnLCBcJ1x4ZDFceGFkXCcpLFxuICAgICgweDQ2RCwgXCdWXCcpLFxuICAgICgweDQ2RSwgXCdNXCcsIFwnXHhkMVx4YWZcJyksXG4gICAgKDB4NDZGLCBcJ1ZcJyksXG4gICAgKDB4NDcwLCBcJ01cJywgXCdceGQxXHhiMVwnKSxcbiAgICAoMHg0NzEsIFwnVlwnKSxcbiAgICAoMHg0NzIsIFwnTVwnLCBcJ1x4ZDFceGIzXCcpLFxuICAgICgweDQ3MywgXCdWXCcpLFxuICAgICgweDQ3NCwgXCdNXCcsIFwnXHhkMVx4YjVcJyksXG4gICAgKDB4NDc1LCBcJ1ZcJyksXG4gICAgKDB4NDc2LCBcJ01cJywgXCdceGQxXHhiN1wnKSxcbiAgICAoMHg0NzcsIFwnVlwnKSxcbiAgICAoMHg0NzgsIFwnTVwnLCBcJ1x4ZDFceGI5XCcpLFxuICAgICgweDQ3OSwgXCdWXCcpLFxuICAgICgweDQ3QSwgXCdNXCcsIFwnXHhkMVx4YmJcJyksXG4gICAgKDB4NDdCLCBcJ1ZcJyksXG4gICAgKDB4NDdDLCBcJ01cJywgXCdceGQxXHhiZFwnKSxcbiAgICAoMHg0N0QsIFwnVlwnKSxcbiAgICAoMHg0N0UsIFwnTVwnLCBcJ1x4ZDFceGJmXCcpLFxuICAgICgweDQ3RiwgXCdWXCcpLFxuICAgICgweDQ4MCwgXCdNXCcsIFwnXHhkMlx4ODFcJyksXG4gICAgKDB4NDgxLCBcJ1ZcJyksXG4gICAgKDB4NDhBLCBcJ01cJywgXCdceGQyXHg4YlwnKSxcbiAgICAoMHg0OEIsIFwnVlwnKSxcbiAgICAoMHg0OEMsIFwnTVwnLCBcJ1x4ZDJceDhkXCcpLFxuICAgICgweDQ4RCwgXCdWXCcpLFxuICAgICgweDQ4RSwgXCdNXCcsIFwnXHhkMlx4OGZcJyksXG4gICAgKDB4NDhGLCBcJ1ZcJyksXG4gICAgKDB4NDkwLCBcJ01cJywgXCdceGQyXHg5MVwnKSxcbiAgICAoMHg0OTEsIFwnVlwnKSxcbiAgICAoMHg0OTIsIFwnTVwnLCBcJ1x4ZDJceDkzXCcpLFxuICAgICgweDQ5MywgXCdWXCcpLFxuICAgICgweDQ5NCwgXCdNXCcsIFwnXHhkMlx4OTVcJyksXG4gICAgKDB4NDk1LCBcJ1ZcJyksXG4gICAgKDB4NDk2LCBcJ01cJywgXCdceGQyXHg5N1wnKSxcbiAgICAoMHg0OTcsIFwnVlwnKSxcbiAgICAoMHg0OTgsIFwnTVwnLCBcJ1x4ZDJceDk5XCcpLFxuICAgICgweDQ5OSwgXCdWXCcpLFxuICAgICgweDQ5QSwgXCdNXCcsIFwnXHhkMlx4OWJcJyksXG4gICAgKDB4NDlCLCBcJ1ZcJyksXG4gICAgKDB4NDlDLCBcJ01cJywgXCdceGQyXHg5ZFwnKSxcbiAgICAoMHg0OUQsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzgoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDQ5RSwgXCdNXCcsIFwnXHhkMlx4OWZcJyksXG4gICAgKDB4NDlGLCBcJ1ZcJyksXG4gICAgKDB4NEEwLCBcJ01cJywgXCdceGQyXHhhMVwnKSxcbiAgICAoMHg0QTEsIFwnVlwnKSxcbiAgICAoMHg0QTIsIFwnTVwnLCBcJ1x4ZDJceGEzXCcpLFxuICAgICgweDRBMywgXCdWXCcpLFxuICAgICgweDRBNCwgXCdNXCcsIFwnXHhkMlx4YTVcJyksXG4gICAgKDB4NEE1LCBcJ1ZcJyksXG4gICAgKDB4NEE2LCBcJ01cJywgXCdceGQyXHhhN1wnKSxcbiAgICAoMHg0QTcsIFwnVlwnKSxcbiAgICAoMHg0QTgsIFwnTVwnLCBcJ1x4ZDJceGE5XCcpLFxuICAgICgweDRBOSwgXCdWXCcpLFxuICAgICgweDRBQSwgXCdNXCcsIFwnXHhkMlx4YWJcJyksXG4gICAgKDB4NEFCLCBcJ1ZcJyksXG4gICAgKDB4NEFDLCBcJ01cJywgXCdceGQyXHhhZFwnKSxcbiAgICAoMHg0QUQsIFwnVlwnKSxcbiAgICAoMHg0QUUsIFwnTVwnLCBcJ1x4ZDJceGFmXCcpLFxuICAgICgweDRBRiwgXCdWXCcpLFxuICAgICgweDRCMCwgXCdNXCcsIFwnXHhkMlx4YjFcJyksXG4gICAgKDB4NEIxLCBcJ1ZcJyksXG4gICAgKDB4NEIyLCBcJ01cJywgXCdceGQyXHhiM1wnKSxcbiAgICAoMHg0QjMsIFwnVlwnKSxcbiAgICAoMHg0QjQsIFwnTVwnLCBcJ1x4ZDJceGI1XCcpLFxuICAgICgweDRCNSwgXCdWXCcpLFxuICAgICgweDRCNiwgXCdNXCcsIFwnXHhkMlx4YjdcJyksXG4gICAgKDB4NEI3LCBcJ1ZcJyksXG4gICAgKDB4NEI4LCBcJ01cJywgXCdceGQyXHhiOVwnKSxcbiAgICAoMHg0QjksIFwnVlwnKSxcbiAgICAoMHg0QkEsIFwnTVwnLCBcJ1x4ZDJceGJiXCcpLFxuICAgICgweDRCQiwgXCdWXCcpLFxuICAgICgweDRCQywgXCdNXCcsIFwnXHhkMlx4YmRcJyksXG4gICAgKDB4NEJELCBcJ1ZcJyksXG4gICAgKDB4NEJFLCBcJ01cJywgXCdceGQyXHhiZlwnKSxcbiAgICAoMHg0QkYsIFwnVlwnKSxcbiAgICAoMHg0QzAsIFwnWFwnKSxcbiAgICAoMHg0QzEsIFwnTVwnLCBcJ1x4ZDNceDgyXCcpLFxuICAgICgweDRDMiwgXCdWXCcpLFxuICAgICgweDRDMywgXCdNXCcsIFwnXHhkM1x4ODRcJyksXG4gICAgKDB4NEM0LCBcJ1ZcJyksXG4gICAgKDB4NEM1LCBcJ01cJywgXCdceGQzXHg4NlwnKSxcbiAgICAoMHg0QzYsIFwnVlwnKSxcbiAgICAoMHg0QzcsIFwnTVwnLCBcJ1x4ZDNceDg4XCcpLFxuICAgICgweDRDOCwgXCdWXCcpLFxuICAgICgweDRDOSwgXCdNXCcsIFwnXHhkM1x4OGFcJyksXG4gICAgKDB4NENBLCBcJ1ZcJyksXG4gICAgKDB4NENCLCBcJ01cJywgXCdceGQzXHg4Y1wnKSxcbiAgICAoMHg0Q0MsIFwnVlwnKSxcbiAgICAoMHg0Q0QsIFwnTVwnLCBcJ1x4ZDNceDhlXCcpLFxuICAgICgweDRDRSwgXCdWXCcpLFxuICAgICgweDREMCwgXCdNXCcsIFwnXHhkM1x4OTFcJyksXG4gICAgKDB4NEQxLCBcJ1ZcJyksXG4gICAgKDB4NEQyLCBcJ01cJywgXCdceGQzXHg5M1wnKSxcbiAgICAoMHg0RDMsIFwnVlwnKSxcbiAgICAoMHg0RDQsIFwnTVwnLCBcJ1x4ZDNceDk1XCcpLFxuICAgICgweDRENSwgXCdWXCcpLFxuICAgICgweDRENiwgXCdNXCcsIFwnXHhkM1x4OTdcJyksXG4gICAgKDB4NEQ3LCBcJ1ZcJyksXG4gICAgKDB4NEQ4LCBcJ01cJywgXCdceGQzXHg5OVwnKSxcbiAgICAoMHg0RDksIFwnVlwnKSxcbiAgICAoMHg0REEsIFwnTVwnLCBcJ1x4ZDNceDliXCcpLFxuICAgICgweDREQiwgXCdWXCcpLFxuICAgICgweDREQywgXCdNXCcsIFwnXHhkM1x4OWRcJyksXG4gICAgKDB4NERELCBcJ1ZcJyksXG4gICAgKDB4NERFLCBcJ01cJywgXCdceGQzXHg5ZlwnKSxcbiAgICAoMHg0REYsIFwnVlwnKSxcbiAgICAoMHg0RTAsIFwnTVwnLCBcJ1x4ZDNceGExXCcpLFxuICAgICgweDRFMSwgXCdWXCcpLFxuICAgICgweDRFMiwgXCdNXCcsIFwnXHhkM1x4YTNcJyksXG4gICAgKDB4NEUzLCBcJ1ZcJyksXG4gICAgKDB4NEU0LCBcJ01cJywgXCdceGQzXHhhNVwnKSxcbiAgICAoMHg0RTUsIFwnVlwnKSxcbiAgICAoMHg0RTYsIFwnTVwnLCBcJ1x4ZDNceGE3XCcpLFxuICAgICgweDRFNywgXCdWXCcpLFxuICAgICgweDRFOCwgXCdNXCcsIFwnXHhkM1x4YTlcJyksXG4gICAgKDB4NEU5LCBcJ1ZcJyksXG4gICAgKDB4NEVBLCBcJ01cJywgXCdceGQzXHhhYlwnKSxcbiAgICAoMHg0RUIsIFwnVlwnKSxcbiAgICAoMHg0RUMsIFwnTVwnLCBcJ1x4ZDNceGFkXCcpLFxuICAgICgweDRFRCwgXCdWXCcpLFxuICAgICgweDRFRSwgXCdNXCcsIFwnXHhkM1x4YWZcJyksXG4gICAgKDB4NEVGLCBcJ1ZcJyksXG4gICAgKDB4NEYwLCBcJ01cJywgXCdceGQzXHhiMVwnKSxcbiAgICAoMHg0RjEsIFwnVlwnKSxcbiAgICAoMHg0RjIsIFwnTVwnLCBcJ1x4ZDNceGIzXCcpLFxuICAgICgweDRGMywgXCdWXCcpLFxuICAgICgweDRGNCwgXCdNXCcsIFwnXHhkM1x4YjVcJyksXG4gICAgKDB4NEY1LCBcJ1ZcJyksXG4gICAgKDB4NEY2LCBcJ01cJywgXCdceGQzXHhiN1wnKSxcbiAgICAoMHg0RjcsIFwnVlwnKSxcbiAgICAoMHg0RjgsIFwnTVwnLCBcJ1x4ZDNceGI5XCcpLFxuICAgICgweDRGOSwgXCdWXCcpLFxuICAgICgweDRGQSwgXCdNXCcsIFwnXHhkM1x4YmJcJyksXG4gICAgKDB4NEZCLCBcJ1ZcJyksXG4gICAgKDB4NEZDLCBcJ01cJywgXCdceGQzXHhiZFwnKSxcbiAgICAoMHg0RkQsIFwnVlwnKSxcbiAgICAoMHg0RkUsIFwnTVwnLCBcJ1x4ZDNceGJmXCcpLFxuICAgICgweDRGRiwgXCdWXCcpLFxuICAgICgweDUwMCwgXCdNXCcsIFwnXHhkNFx4ODFcJyksXG4gICAgKDB4NTAxLCBcJ1ZcJyksXG4gICAgKDB4NTAyLCBcJ01cJywgXCdceGQ0XHg4M1wnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzkoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDUwMywgXCdWXCcpLFxuICAgICgweDUwNCwgXCdNXCcsIFwnXHhkNFx4ODVcJyksXG4gICAgKDB4NTA1LCBcJ1ZcJyksXG4gICAgKDB4NTA2LCBcJ01cJywgXCdceGQ0XHg4N1wnKSxcbiAgICAoMHg1MDcsIFwnVlwnKSxcbiAgICAoMHg1MDgsIFwnTVwnLCBcJ1x4ZDRceDg5XCcpLFxuICAgICgweDUwOSwgXCdWXCcpLFxuICAgICgweDUwQSwgXCdNXCcsIFwnXHhkNFx4OGJcJyksXG4gICAgKDB4NTBCLCBcJ1ZcJyksXG4gICAgKDB4NTBDLCBcJ01cJywgXCdceGQ0XHg4ZFwnKSxcbiAgICAoMHg1MEQsIFwnVlwnKSxcbiAgICAoMHg1MEUsIFwnTVwnLCBcJ1x4ZDRceDhmXCcpLFxuICAgICgweDUwRiwgXCdWXCcpLFxuICAgICgweDUxMCwgXCdNXCcsIFwnXHhkNFx4OTFcJyksXG4gICAgKDB4NTExLCBcJ1ZcJyksXG4gICAgKDB4NTEyLCBcJ01cJywgXCdceGQ0XHg5M1wnKSxcbiAgICAoMHg1MTMsIFwnVlwnKSxcbiAgICAoMHg1MTQsIFwnTVwnLCBcJ1x4ZDRceDk1XCcpLFxuICAgICgweDUxNSwgXCdWXCcpLFxuICAgICgweDUxNiwgXCdNXCcsIFwnXHhkNFx4OTdcJyksXG4gICAgKDB4NTE3LCBcJ1ZcJyksXG4gICAgKDB4NTE4LCBcJ01cJywgXCdceGQ0XHg5OVwnKSxcbiAgICAoMHg1MTksIFwnVlwnKSxcbiAgICAoMHg1MUEsIFwnTVwnLCBcJ1x4ZDRceDliXCcpLFxuICAgICgweDUxQiwgXCdWXCcpLFxuICAgICgweDUxQywgXCdNXCcsIFwnXHhkNFx4OWRcJyksXG4gICAgKDB4NTFELCBcJ1ZcJyksXG4gICAgKDB4NTFFLCBcJ01cJywgXCdceGQ0XHg5ZlwnKSxcbiAgICAoMHg1MUYsIFwnVlwnKSxcbiAgICAoMHg1MjAsIFwnTVwnLCBcJ1x4ZDRceGExXCcpLFxuICAgICgweDUyMSwgXCdWXCcpLFxuICAgICgweDUyMiwgXCdNXCcsIFwnXHhkNFx4YTNcJyksXG4gICAgKDB4NTIzLCBcJ1ZcJyksXG4gICAgKDB4NTI0LCBcJ01cJywgXCdceGQ0XHhhNVwnKSxcbiAgICAoMHg1MjUsIFwnVlwnKSxcbiAgICAoMHg1MjYsIFwnTVwnLCBcJ1x4ZDRceGE3XCcpLFxuICAgICgweDUyNywgXCdWXCcpLFxuICAgICgweDUyOCwgXCdNXCcsIFwnXHhkNFx4YTlcJyksXG4gICAgKDB4NTI5LCBcJ1ZcJyksXG4gICAgKDB4NTJBLCBcJ01cJywgXCdceGQ0XHhhYlwnKSxcbiAgICAoMHg1MkIsIFwnVlwnKSxcbiAgICAoMHg1MkMsIFwnTVwnLCBcJ1x4ZDRceGFkXCcpLFxuICAgICgweDUyRCwgXCdWXCcpLFxuICAgICgweDUyRSwgXCdNXCcsIFwnXHhkNFx4YWZcJyksXG4gICAgKDB4NTJGLCBcJ1ZcJyksXG4gICAgKDB4NTMwLCBcJ1hcJyksXG4gICAgKDB4NTMxLCBcJ01cJywgXCdceGQ1XHhhMVwnKSxcbiAgICAoMHg1MzIsIFwnTVwnLCBcJ1x4ZDVceGEyXCcpLFxuICAgICgweDUzMywgXCdNXCcsIFwnXHhkNVx4YTNcJyksXG4gICAgKDB4NTM0LCBcJ01cJywgXCdceGQ1XHhhNFwnKSxcbiAgICAoMHg1MzUsIFwnTVwnLCBcJ1x4ZDVceGE1XCcpLFxuICAgICgweDUzNiwgXCdNXCcsIFwnXHhkNVx4YTZcJyksXG4gICAgKDB4NTM3LCBcJ01cJywgXCdceGQ1XHhhN1wnKSxcbiAgICAoMHg1MzgsIFwnTVwnLCBcJ1x4ZDVceGE4XCcpLFxuICAgICgweDUzOSwgXCdNXCcsIFwnXHhkNVx4YTlcJyksXG4gICAgKDB4NTNBLCBcJ01cJywgXCdceGQ1XHhhYVwnKSxcbiAgICAoMHg1M0IsIFwnTVwnLCBcJ1x4ZDVceGFiXCcpLFxuICAgICgweDUzQywgXCdNXCcsIFwnXHhkNVx4YWNcJyksXG4gICAgKDB4NTNELCBcJ01cJywgXCdceGQ1XHhhZFwnKSxcbiAgICAoMHg1M0UsIFwnTVwnLCBcJ1x4ZDVceGFlXCcpLFxuICAgICgweDUzRiwgXCdNXCcsIFwnXHhkNVx4YWZcJyksXG4gICAgKDB4NTQwLCBcJ01cJywgXCdceGQ1XHhiMFwnKSxcbiAgICAoMHg1NDEsIFwnTVwnLCBcJ1x4ZDVceGIxXCcpLFxuICAgICgweDU0MiwgXCdNXCcsIFwnXHhkNVx4YjJcJyksXG4gICAgKDB4NTQzLCBcJ01cJywgXCdceGQ1XHhiM1wnKSxcbiAgICAoMHg1NDQsIFwnTVwnLCBcJ1x4ZDVceGI0XCcpLFxuICAgICgweDU0NSwgXCdNXCcsIFwnXHhkNVx4YjVcJyksXG4gICAgKDB4NTQ2LCBcJ01cJywgXCdceGQ1XHhiNlwnKSxcbiAgICAoMHg1NDcsIFwnTVwnLCBcJ1x4ZDVceGI3XCcpLFxuICAgICgweDU0OCwgXCdNXCcsIFwnXHhkNVx4YjhcJyksXG4gICAgKDB4NTQ5LCBcJ01cJywgXCdceGQ1XHhiOVwnKSxcbiAgICAoMHg1NEEsIFwnTVwnLCBcJ1x4ZDVceGJhXCcpLFxuICAgICgweDU0QiwgXCdNXCcsIFwnXHhkNVx4YmJcJyksXG4gICAgKDB4NTRDLCBcJ01cJywgXCdceGQ1XHhiY1wnKSxcbiAgICAoMHg1NEQsIFwnTVwnLCBcJ1x4ZDVceGJkXCcpLFxuICAgICgweDU0RSwgXCdNXCcsIFwnXHhkNVx4YmVcJyksXG4gICAgKDB4NTRGLCBcJ01cJywgXCdceGQ1XHhiZlwnKSxcbiAgICAoMHg1NTAsIFwnTVwnLCBcJ1x4ZDZceDgwXCcpLFxuICAgICgweDU1MSwgXCdNXCcsIFwnXHhkNlx4ODFcJyksXG4gICAgKDB4NTUyLCBcJ01cJywgXCdceGQ2XHg4MlwnKSxcbiAgICAoMHg1NTMsIFwnTVwnLCBcJ1x4ZDZceDgzXCcpLFxuICAgICgweDU1NCwgXCdNXCcsIFwnXHhkNlx4ODRcJyksXG4gICAgKDB4NTU1LCBcJ01cJywgXCdceGQ2XHg4NVwnKSxcbiAgICAoMHg1NTYsIFwnTVwnLCBcJ1x4ZDZceDg2XCcpLFxuICAgICgweDU1NywgXCdYXCcpLFxuICAgICgweDU1OSwgXCdWXCcpLFxuICAgICgweDU4NywgXCdNXCcsIFwnXHhkNVx4YTVceGQ2XHg4MlwnKSxcbiAgICAoMHg1ODgsIFwnVlwnKSxcbiAgICAoMHg1OEIsIFwnWFwnKSxcbiAgICAoMHg1OEQsIFwnVlwnKSxcbiAgICAoMHg1OTAsIFwnWFwnKSxcbiAgICAoMHg1OTEsIFwnVlwnKSxcbiAgICAoMHg1QzgsIFwnWFwnKSxcbiAgICAoMHg1RDAsIFwnVlwnKSxcbiAgICAoMHg1RUIsIFwnWFwnKSxcbiAgICAoMHg1RUYsIFwnVlwnKSxcbiAgICAoMHg1RjUsIFwnWFwnKSxcbiAgICAoMHg2MDYsIFwnVlwnKSxcbiAgICAoMHg2MUMsIFwnWFwnKSxcbiAgICAoMHg2MUQsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzEwKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHg2NzUsIFwnTVwnLCBcJ1x4ZDhceGE3XHhkOVx4YjRcJyksXG4gICAgKDB4Njc2LCBcJ01cJywgXCdceGQ5XHg4OFx4ZDlceGI0XCcpLFxuICAgICgweDY3NywgXCdNXCcsIFwnXHhkYlx4ODdceGQ5XHhiNFwnKSxcbiAgICAoMHg2NzgsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOVx4YjRcJyksXG4gICAgKDB4Njc5LCBcJ1ZcJyksXG4gICAgKDB4NkRELCBcJ1hcJyksXG4gICAgKDB4NkRFLCBcJ1ZcJyksXG4gICAgKDB4NzBFLCBcJ1hcJyksXG4gICAgKDB4NzEwLCBcJ1ZcJyksXG4gICAgKDB4NzRCLCBcJ1hcJyksXG4gICAgKDB4NzRELCBcJ1ZcJyksXG4gICAgKDB4N0IyLCBcJ1hcJyksXG4gICAgKDB4N0MwLCBcJ1ZcJyksXG4gICAgKDB4N0ZCLCBcJ1hcJyksXG4gICAgKDB4N0ZELCBcJ1ZcJyksXG4gICAgKDB4ODJFLCBcJ1hcJyksXG4gICAgKDB4ODMwLCBcJ1ZcJyksXG4gICAgKDB4ODNGLCBcJ1hcJyksXG4gICAgKDB4ODQwLCBcJ1ZcJyksXG4gICAgKDB4ODVDLCBcJ1hcJyksXG4gICAgKDB4ODVFLCBcJ1ZcJyksXG4gICAgKDB4ODVGLCBcJ1hcJyksXG4gICAgKDB4ODYwLCBcJ1ZcJyksXG4gICAgKDB4ODZCLCBcJ1hcJyksXG4gICAgKDB4ODcwLCBcJ1ZcJyksXG4gICAgKDB4ODhGLCBcJ1hcJyksXG4gICAgKDB4ODk4LCBcJ1ZcJyksXG4gICAgKDB4OEUyLCBcJ1hcJyksXG4gICAgKDB4OEUzLCBcJ1ZcJyksXG4gICAgKDB4OTU4LCBcJ01cJywgXCdceGUwXHhhNFx4OTVceGUwXHhhNFx4YmNcJyksXG4gICAgKDB4OTU5LCBcJ01cJywgXCdceGUwXHhhNFx4OTZceGUwXHhhNFx4YmNcJyksXG4gICAgKDB4OTVBLCBcJ01cJywgXCdceGUwXHhhNFx4OTdceGUwXHhhNFx4YmNcJyksXG4gICAgKDB4OTVCLCBcJ01cJywgXCdceGUwXHhhNFx4OWNceGUwXHhhNFx4YmNcJyksXG4gICAgKDB4OTVDLCBcJ01cJywgXCdceGUwXHhhNFx4YTFceGUwXHhhNFx4YmNcJyksXG4gICAgKDB4OTVELCBcJ01cJywgXCdceGUwXHhhNFx4YTJceGUwXHhhNFx4YmNcJyksXG4gICAgKDB4OTVFLCBcJ01cJywgXCdceGUwXHhhNFx4YWJceGUwXHhhNFx4YmNcJyksXG4gICAgKDB4OTVGLCBcJ01cJywgXCdceGUwXHhhNFx4YWZceGUwXHhhNFx4YmNcJyksXG4gICAgKDB4OTYwLCBcJ1ZcJyksXG4gICAgKDB4OTg0LCBcJ1hcJyksXG4gICAgKDB4OTg1LCBcJ1ZcJyksXG4gICAgKDB4OThELCBcJ1hcJyksXG4gICAgKDB4OThGLCBcJ1ZcJyksXG4gICAgKDB4OTkxLCBcJ1hcJyksXG4gICAgKDB4OTkzLCBcJ1ZcJyksXG4gICAgKDB4OUE5LCBcJ1hcJyksXG4gICAgKDB4OUFBLCBcJ1ZcJyksXG4gICAgKDB4OUIxLCBcJ1hcJyksXG4gICAgKDB4OUIyLCBcJ1ZcJyksXG4gICAgKDB4OUIzLCBcJ1hcJyksXG4gICAgKDB4OUI2LCBcJ1ZcJyksXG4gICAgKDB4OUJBLCBcJ1hcJyksXG4gICAgKDB4OUJDLCBcJ1ZcJyksXG4gICAgKDB4OUM1LCBcJ1hcJyksXG4gICAgKDB4OUM3LCBcJ1ZcJyksXG4gICAgKDB4OUM5LCBcJ1hcJyksXG4gICAgKDB4OUNCLCBcJ1ZcJyksXG4gICAgKDB4OUNGLCBcJ1hcJyksXG4gICAgKDB4OUQ3LCBcJ1ZcJyksXG4gICAgKDB4OUQ4LCBcJ1hcJyksXG4gICAgKDB4OURDLCBcJ01cJywgXCdceGUwXHhhNlx4YTFceGUwXHhhNlx4YmNcJyksXG4gICAgKDB4OURELCBcJ01cJywgXCdceGUwXHhhNlx4YTJceGUwXHhhNlx4YmNcJyksXG4gICAgKDB4OURFLCBcJ1hcJyksXG4gICAgKDB4OURGLCBcJ01cJywgXCdceGUwXHhhNlx4YWZceGUwXHhhNlx4YmNcJyksXG4gICAgKDB4OUUwLCBcJ1ZcJyksXG4gICAgKDB4OUU0LCBcJ1hcJyksXG4gICAgKDB4OUU2LCBcJ1ZcJyksXG4gICAgKDB4OUZGLCBcJ1hcJyksXG4gICAgKDB4QTAxLCBcJ1ZcJyksXG4gICAgKDB4QTA0LCBcJ1hcJyksXG4gICAgKDB4QTA1LCBcJ1ZcJyksXG4gICAgKDB4QTBCLCBcJ1hcJyksXG4gICAgKDB4QTBGLCBcJ1ZcJyksXG4gICAgKDB4QTExLCBcJ1hcJyksXG4gICAgKDB4QTEzLCBcJ1ZcJyksXG4gICAgKDB4QTI5LCBcJ1hcJyksXG4gICAgKDB4QTJBLCBcJ1ZcJyksXG4gICAgKDB4QTMxLCBcJ1hcJyksXG4gICAgKDB4QTMyLCBcJ1ZcJyksXG4gICAgKDB4QTMzLCBcJ01cJywgXCdceGUwXHhhOFx4YjJceGUwXHhhOFx4YmNcJyksXG4gICAgKDB4QTM0LCBcJ1hcJyksXG4gICAgKDB4QTM1LCBcJ1ZcJyksXG4gICAgKDB4QTM2LCBcJ01cJywgXCdceGUwXHhhOFx4YjhceGUwXHhhOFx4YmNcJyksXG4gICAgKDB4QTM3LCBcJ1hcJyksXG4gICAgKDB4QTM4LCBcJ1ZcJyksXG4gICAgKDB4QTNBLCBcJ1hcJyksXG4gICAgKDB4QTNDLCBcJ1ZcJyksXG4gICAgKDB4QTNELCBcJ1hcJyksXG4gICAgKDB4QTNFLCBcJ1ZcJyksXG4gICAgKDB4QTQzLCBcJ1hcJyksXG4gICAgKDB4QTQ3LCBcJ1ZcJyksXG4gICAgKDB4QTQ5LCBcJ1hcJyksXG4gICAgKDB4QTRCLCBcJ1ZcJyksXG4gICAgKDB4QTRFLCBcJ1hcJyksXG4gICAgKDB4QTUxLCBcJ1ZcJyksXG4gICAgKDB4QTUyLCBcJ1hcJyksXG4gICAgKDB4QTU5LCBcJ01cJywgXCdceGUwXHhhOFx4OTZceGUwXHhhOFx4YmNcJyksXG4gICAgKDB4QTVBLCBcJ01cJywgXCdceGUwXHhhOFx4OTdceGUwXHhhOFx4YmNcJyksXG4gICAgKDB4QTVCLCBcJ01cJywgXCdceGUwXHhhOFx4OWNceGUwXHhhOFx4YmNcJyksXG4gICAgKDB4QTVDLCBcJ1ZcJyksXG4gICAgKDB4QTVELCBcJ1hcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18xMSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4QTVFLCBcJ01cJywgXCdceGUwXHhhOFx4YWJceGUwXHhhOFx4YmNcJyksXG4gICAgKDB4QTVGLCBcJ1hcJyksXG4gICAgKDB4QTY2LCBcJ1ZcJyksXG4gICAgKDB4QTc3LCBcJ1hcJyksXG4gICAgKDB4QTgxLCBcJ1ZcJyksXG4gICAgKDB4QTg0LCBcJ1hcJyksXG4gICAgKDB4QTg1LCBcJ1ZcJyksXG4gICAgKDB4QThFLCBcJ1hcJyksXG4gICAgKDB4QThGLCBcJ1ZcJyksXG4gICAgKDB4QTkyLCBcJ1hcJyksXG4gICAgKDB4QTkzLCBcJ1ZcJyksXG4gICAgKDB4QUE5LCBcJ1hcJyksXG4gICAgKDB4QUFBLCBcJ1ZcJyksXG4gICAgKDB4QUIxLCBcJ1hcJyksXG4gICAgKDB4QUIyLCBcJ1ZcJyksXG4gICAgKDB4QUI0LCBcJ1hcJyksXG4gICAgKDB4QUI1LCBcJ1ZcJyksXG4gICAgKDB4QUJBLCBcJ1hcJyksXG4gICAgKDB4QUJDLCBcJ1ZcJyksXG4gICAgKDB4QUM2LCBcJ1hcJyksXG4gICAgKDB4QUM3LCBcJ1ZcJyksXG4gICAgKDB4QUNBLCBcJ1hcJyksXG4gICAgKDB4QUNCLCBcJ1ZcJyksXG4gICAgKDB4QUNFLCBcJ1hcJyksXG4gICAgKDB4QUQwLCBcJ1ZcJyksXG4gICAgKDB4QUQxLCBcJ1hcJyksXG4gICAgKDB4QUUwLCBcJ1ZcJyksXG4gICAgKDB4QUU0LCBcJ1hcJyksXG4gICAgKDB4QUU2LCBcJ1ZcJyksXG4gICAgKDB4QUYyLCBcJ1hcJyksXG4gICAgKDB4QUY5LCBcJ1ZcJyksXG4gICAgKDB4QjAwLCBcJ1hcJyksXG4gICAgKDB4QjAxLCBcJ1ZcJyksXG4gICAgKDB4QjA0LCBcJ1hcJyksXG4gICAgKDB4QjA1LCBcJ1ZcJyksXG4gICAgKDB4QjBELCBcJ1hcJyksXG4gICAgKDB4QjBGLCBcJ1ZcJyksXG4gICAgKDB4QjExLCBcJ1hcJyksXG4gICAgKDB4QjEzLCBcJ1ZcJyksXG4gICAgKDB4QjI5LCBcJ1hcJyksXG4gICAgKDB4QjJBLCBcJ1ZcJyksXG4gICAgKDB4QjMxLCBcJ1hcJyksXG4gICAgKDB4QjMyLCBcJ1ZcJyksXG4gICAgKDB4QjM0LCBcJ1hcJyksXG4gICAgKDB4QjM1LCBcJ1ZcJyksXG4gICAgKDB4QjNBLCBcJ1hcJyksXG4gICAgKDB4QjNDLCBcJ1ZcJyksXG4gICAgKDB4QjQ1LCBcJ1hcJyksXG4gICAgKDB4QjQ3LCBcJ1ZcJyksXG4gICAgKDB4QjQ5LCBcJ1hcJyksXG4gICAgKDB4QjRCLCBcJ1ZcJyksXG4gICAgKDB4QjRFLCBcJ1hcJyksXG4gICAgKDB4QjU1LCBcJ1ZcJyksXG4gICAgKDB4QjU4LCBcJ1hcJyksXG4gICAgKDB4QjVDLCBcJ01cJywgXCdceGUwXHhhY1x4YTFceGUwXHhhY1x4YmNcJyksXG4gICAgKDB4QjVELCBcJ01cJywgXCdceGUwXHhhY1x4YTJceGUwXHhhY1x4YmNcJyksXG4gICAgKDB4QjVFLCBcJ1hcJyksXG4gICAgKDB4QjVGLCBcJ1ZcJyksXG4gICAgKDB4QjY0LCBcJ1hcJyksXG4gICAgKDB4QjY2LCBcJ1ZcJyksXG4gICAgKDB4Qjc4LCBcJ1hcJyksXG4gICAgKDB4QjgyLCBcJ1ZcJyksXG4gICAgKDB4Qjg0LCBcJ1hcJyksXG4gICAgKDB4Qjg1LCBcJ1ZcJyksXG4gICAgKDB4QjhCLCBcJ1hcJyksXG4gICAgKDB4QjhFLCBcJ1ZcJyksXG4gICAgKDB4QjkxLCBcJ1hcJyksXG4gICAgKDB4QjkyLCBcJ1ZcJyksXG4gICAgKDB4Qjk2LCBcJ1hcJyksXG4gICAgKDB4Qjk5LCBcJ1ZcJyksXG4gICAgKDB4QjlCLCBcJ1hcJyksXG4gICAgKDB4QjlDLCBcJ1ZcJyksXG4gICAgKDB4QjlELCBcJ1hcJyksXG4gICAgKDB4QjlFLCBcJ1ZcJyksXG4gICAgKDB4QkEwLCBcJ1hcJyksXG4gICAgKDB4QkEzLCBcJ1ZcJyksXG4gICAgKDB4QkE1LCBcJ1hcJyksXG4gICAgKDB4QkE4LCBcJ1ZcJyksXG4gICAgKDB4QkFCLCBcJ1hcJyksXG4gICAgKDB4QkFFLCBcJ1ZcJyksXG4gICAgKDB4QkJBLCBcJ1hcJyksXG4gICAgKDB4QkJFLCBcJ1ZcJyksXG4gICAgKDB4QkMzLCBcJ1hcJyksXG4gICAgKDB4QkM2LCBcJ1ZcJyksXG4gICAgKDB4QkM5LCBcJ1hcJyksXG4gICAgKDB4QkNBLCBcJ1ZcJyksXG4gICAgKDB4QkNFLCBcJ1hcJyksXG4gICAgKDB4QkQwLCBcJ1ZcJyksXG4gICAgKDB4QkQxLCBcJ1hcJyksXG4gICAgKDB4QkQ3LCBcJ1ZcJyksXG4gICAgKDB4QkQ4LCBcJ1hcJyksXG4gICAgKDB4QkU2LCBcJ1ZcJyksXG4gICAgKDB4QkZCLCBcJ1hcJyksXG4gICAgKDB4QzAwLCBcJ1ZcJyksXG4gICAgKDB4QzBELCBcJ1hcJyksXG4gICAgKDB4QzBFLCBcJ1ZcJyksXG4gICAgKDB4QzExLCBcJ1hcJyksXG4gICAgKDB4QzEyLCBcJ1ZcJyksXG4gICAgKDB4QzI5LCBcJ1hcJyksXG4gICAgKDB4QzJBLCBcJ1ZcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18xMigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4QzNBLCBcJ1hcJyksXG4gICAgKDB4QzNDLCBcJ1ZcJyksXG4gICAgKDB4QzQ1LCBcJ1hcJyksXG4gICAgKDB4QzQ2LCBcJ1ZcJyksXG4gICAgKDB4QzQ5LCBcJ1hcJyksXG4gICAgKDB4QzRBLCBcJ1ZcJyksXG4gICAgKDB4QzRFLCBcJ1hcJyksXG4gICAgKDB4QzU1LCBcJ1ZcJyksXG4gICAgKDB4QzU3LCBcJ1hcJyksXG4gICAgKDB4QzU4LCBcJ1ZcJyksXG4gICAgKDB4QzVCLCBcJ1hcJyksXG4gICAgKDB4QzVELCBcJ1ZcJyksXG4gICAgKDB4QzVFLCBcJ1hcJyksXG4gICAgKDB4QzYwLCBcJ1ZcJyksXG4gICAgKDB4QzY0LCBcJ1hcJyksXG4gICAgKDB4QzY2LCBcJ1ZcJyksXG4gICAgKDB4QzcwLCBcJ1hcJyksXG4gICAgKDB4Qzc3LCBcJ1ZcJyksXG4gICAgKDB4QzhELCBcJ1hcJyksXG4gICAgKDB4QzhFLCBcJ1ZcJyksXG4gICAgKDB4QzkxLCBcJ1hcJyksXG4gICAgKDB4QzkyLCBcJ1ZcJyksXG4gICAgKDB4Q0E5LCBcJ1hcJyksXG4gICAgKDB4Q0FBLCBcJ1ZcJyksXG4gICAgKDB4Q0I0LCBcJ1hcJyksXG4gICAgKDB4Q0I1LCBcJ1ZcJyksXG4gICAgKDB4Q0JBLCBcJ1hcJyksXG4gICAgKDB4Q0JDLCBcJ1ZcJyksXG4gICAgKDB4Q0M1LCBcJ1hcJyksXG4gICAgKDB4Q0M2LCBcJ1ZcJyksXG4gICAgKDB4Q0M5LCBcJ1hcJyksXG4gICAgKDB4Q0NBLCBcJ1ZcJyksXG4gICAgKDB4Q0NFLCBcJ1hcJyksXG4gICAgKDB4Q0Q1LCBcJ1ZcJyksXG4gICAgKDB4Q0Q3LCBcJ1hcJyksXG4gICAgKDB4Q0RELCBcJ1ZcJyksXG4gICAgKDB4Q0RGLCBcJ1hcJyksXG4gICAgKDB4Q0UwLCBcJ1ZcJyksXG4gICAgKDB4Q0U0LCBcJ1hcJyksXG4gICAgKDB4Q0U2LCBcJ1ZcJyksXG4gICAgKDB4Q0YwLCBcJ1hcJyksXG4gICAgKDB4Q0YxLCBcJ1ZcJyksXG4gICAgKDB4Q0YzLCBcJ1hcJyksXG4gICAgKDB4RDAwLCBcJ1ZcJyksXG4gICAgKDB4RDBELCBcJ1hcJyksXG4gICAgKDB4RDBFLCBcJ1ZcJyksXG4gICAgKDB4RDExLCBcJ1hcJyksXG4gICAgKDB4RDEyLCBcJ1ZcJyksXG4gICAgKDB4RDQ1LCBcJ1hcJyksXG4gICAgKDB4RDQ2LCBcJ1ZcJyksXG4gICAgKDB4RDQ5LCBcJ1hcJyksXG4gICAgKDB4RDRBLCBcJ1ZcJyksXG4gICAgKDB4RDUwLCBcJ1hcJyksXG4gICAgKDB4RDU0LCBcJ1ZcJyksXG4gICAgKDB4RDY0LCBcJ1hcJyksXG4gICAgKDB4RDY2LCBcJ1ZcJyksXG4gICAgKDB4RDgwLCBcJ1hcJyksXG4gICAgKDB4RDgxLCBcJ1ZcJyksXG4gICAgKDB4RDg0LCBcJ1hcJyksXG4gICAgKDB4RDg1LCBcJ1ZcJyksXG4gICAgKDB4RDk3LCBcJ1hcJyksXG4gICAgKDB4RDlBLCBcJ1ZcJyksXG4gICAgKDB4REIyLCBcJ1hcJyksXG4gICAgKDB4REIzLCBcJ1ZcJyksXG4gICAgKDB4REJDLCBcJ1hcJyksXG4gICAgKDB4REJELCBcJ1ZcJyksXG4gICAgKDB4REJFLCBcJ1hcJyksXG4gICAgKDB4REMwLCBcJ1ZcJyksXG4gICAgKDB4REM3LCBcJ1hcJyksXG4gICAgKDB4RENBLCBcJ1ZcJyksXG4gICAgKDB4RENCLCBcJ1hcJyksXG4gICAgKDB4RENGLCBcJ1ZcJyksXG4gICAgKDB4REQ1LCBcJ1hcJyksXG4gICAgKDB4REQ2LCBcJ1ZcJyksXG4gICAgKDB4REQ3LCBcJ1hcJyksXG4gICAgKDB4REQ4LCBcJ1ZcJyksXG4gICAgKDB4REUwLCBcJ1hcJyksXG4gICAgKDB4REU2LCBcJ1ZcJyksXG4gICAgKDB4REYwLCBcJ1hcJyksXG4gICAgKDB4REYyLCBcJ1ZcJyksXG4gICAgKDB4REY1LCBcJ1hcJyksXG4gICAgKDB4RTAxLCBcJ1ZcJyksXG4gICAgKDB4RTMzLCBcJ01cJywgXCdceGUwXHhiOVx4OGRceGUwXHhiOFx4YjJcJyksXG4gICAgKDB4RTM0LCBcJ1ZcJyksXG4gICAgKDB4RTNCLCBcJ1hcJyksXG4gICAgKDB4RTNGLCBcJ1ZcJyksXG4gICAgKDB4RTVDLCBcJ1hcJyksXG4gICAgKDB4RTgxLCBcJ1ZcJyksXG4gICAgKDB4RTgzLCBcJ1hcJyksXG4gICAgKDB4RTg0LCBcJ1ZcJyksXG4gICAgKDB4RTg1LCBcJ1hcJyksXG4gICAgKDB4RTg2LCBcJ1ZcJyksXG4gICAgKDB4RThCLCBcJ1hcJyksXG4gICAgKDB4RThDLCBcJ1ZcJyksXG4gICAgKDB4RUE0LCBcJ1hcJyksXG4gICAgKDB4RUE1LCBcJ1ZcJyksXG4gICAgKDB4RUE2LCBcJ1hcJyksXG4gICAgKDB4RUE3LCBcJ1ZcJyksXG4gICAgKDB4RUIzLCBcJ01cJywgXCdceGUwXHhiYlx4OGRceGUwXHhiYVx4YjJcJyksXG4gICAgKDB4RUI0LCBcJ1ZcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18xMygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4RUJFLCBcJ1hcJyksXG4gICAgKDB4RUMwLCBcJ1ZcJyksXG4gICAgKDB4RUM1LCBcJ1hcJyksXG4gICAgKDB4RUM2LCBcJ1ZcJyksXG4gICAgKDB4RUM3LCBcJ1hcJyksXG4gICAgKDB4RUM4LCBcJ1ZcJyksXG4gICAgKDB4RUNFLCBcJ1hcJyksXG4gICAgKDB4RUQwLCBcJ1ZcJyksXG4gICAgKDB4RURBLCBcJ1hcJyksXG4gICAgKDB4RURDLCBcJ01cJywgXCdceGUwXHhiYVx4YWJceGUwXHhiYVx4OTlcJyksXG4gICAgKDB4RURELCBcJ01cJywgXCdceGUwXHhiYVx4YWJceGUwXHhiYVx4YTFcJyksXG4gICAgKDB4RURFLCBcJ1ZcJyksXG4gICAgKDB4RUUwLCBcJ1hcJyksXG4gICAgKDB4RjAwLCBcJ1ZcJyksXG4gICAgKDB4RjBDLCBcJ01cJywgXCdceGUwXHhiY1x4OGJcJyksXG4gICAgKDB4RjBELCBcJ1ZcJyksXG4gICAgKDB4RjQzLCBcJ01cJywgXCdceGUwXHhiZFx4ODJceGUwXHhiZVx4YjdcJyksXG4gICAgKDB4RjQ0LCBcJ1ZcJyksXG4gICAgKDB4RjQ4LCBcJ1hcJyksXG4gICAgKDB4RjQ5LCBcJ1ZcJyksXG4gICAgKDB4RjRELCBcJ01cJywgXCdceGUwXHhiZFx4OGNceGUwXHhiZVx4YjdcJyksXG4gICAgKDB4RjRFLCBcJ1ZcJyksXG4gICAgKDB4RjUyLCBcJ01cJywgXCdceGUwXHhiZFx4OTFceGUwXHhiZVx4YjdcJyksXG4gICAgKDB4RjUzLCBcJ1ZcJyksXG4gICAgKDB4RjU3LCBcJ01cJywgXCdceGUwXHhiZFx4OTZceGUwXHhiZVx4YjdcJyksXG4gICAgKDB4RjU4LCBcJ1ZcJyksXG4gICAgKDB4RjVDLCBcJ01cJywgXCdceGUwXHhiZFx4OWJceGUwXHhiZVx4YjdcJyksXG4gICAgKDB4RjVELCBcJ1ZcJyksXG4gICAgKDB4RjY5LCBcJ01cJywgXCdceGUwXHhiZFx4ODBceGUwXHhiZVx4YjVcJyksXG4gICAgKDB4RjZBLCBcJ1ZcJyksXG4gICAgKDB4RjZELCBcJ1hcJyksXG4gICAgKDB4RjcxLCBcJ1ZcJyksXG4gICAgKDB4RjczLCBcJ01cJywgXCdceGUwXHhiZFx4YjFceGUwXHhiZFx4YjJcJyksXG4gICAgKDB4Rjc0LCBcJ1ZcJyksXG4gICAgKDB4Rjc1LCBcJ01cJywgXCdceGUwXHhiZFx4YjFceGUwXHhiZFx4YjRcJyksXG4gICAgKDB4Rjc2LCBcJ01cJywgXCdceGUwXHhiZVx4YjJceGUwXHhiZVx4ODBcJyksXG4gICAgKDB4Rjc3LCBcJ01cJywgXCdceGUwXHhiZVx4YjJceGUwXHhiZFx4YjFceGUwXHhiZVx4ODBcJyksXG4gICAgKDB4Rjc4LCBcJ01cJywgXCdceGUwXHhiZVx4YjNceGUwXHhiZVx4ODBcJyksXG4gICAgKDB4Rjc5LCBcJ01cJywgXCdceGUwXHhiZVx4YjNceGUwXHhiZFx4YjFceGUwXHhiZVx4ODBcJyksXG4gICAgKDB4RjdBLCBcJ1ZcJyksXG4gICAgKDB4RjgxLCBcJ01cJywgXCdceGUwXHhiZFx4YjFceGUwXHhiZVx4ODBcJyksXG4gICAgKDB4RjgyLCBcJ1ZcJyksXG4gICAgKDB4RjkzLCBcJ01cJywgXCdceGUwXHhiZVx4OTJceGUwXHhiZVx4YjdcJyksXG4gICAgKDB4Rjk0LCBcJ1ZcJyksXG4gICAgKDB4Rjk4LCBcJ1hcJyksXG4gICAgKDB4Rjk5LCBcJ1ZcJyksXG4gICAgKDB4RjlELCBcJ01cJywgXCdceGUwXHhiZVx4OWNceGUwXHhiZVx4YjdcJyksXG4gICAgKDB4RjlFLCBcJ1ZcJyksXG4gICAgKDB4RkEyLCBcJ01cJywgXCdceGUwXHhiZVx4YTFceGUwXHhiZVx4YjdcJyksXG4gICAgKDB4RkEzLCBcJ1ZcJyksXG4gICAgKDB4RkE3LCBcJ01cJywgXCdceGUwXHhiZVx4YTZceGUwXHhiZVx4YjdcJyksXG4gICAgKDB4RkE4LCBcJ1ZcJyksXG4gICAgKDB4RkFDLCBcJ01cJywgXCdceGUwXHhiZVx4YWJceGUwXHhiZVx4YjdcJyksXG4gICAgKDB4RkFELCBcJ1ZcJyksXG4gICAgKDB4RkI5LCBcJ01cJywgXCdceGUwXHhiZVx4OTBceGUwXHhiZVx4YjVcJyksXG4gICAgKDB4RkJBLCBcJ1ZcJyksXG4gICAgKDB4RkJELCBcJ1hcJyksXG4gICAgKDB4RkJFLCBcJ1ZcJyksXG4gICAgKDB4RkNELCBcJ1hcJyksXG4gICAgKDB4RkNFLCBcJ1ZcJyksXG4gICAgKDB4RkRCLCBcJ1hcJyksXG4gICAgKDB4MTAwMCwgXCdWXCcpLFxuICAgICgweDEwQTAsIFwnWFwnKSxcbiAgICAoMHgxMEM3LCBcJ01cJywgXCdceGUyXHhiNFx4YTdcJyksXG4gICAgKDB4MTBDOCwgXCdYXCcpLFxuICAgICgweDEwQ0QsIFwnTVwnLCBcJ1x4ZTJceGI0XHhhZFwnKSxcbiAgICAoMHgxMENFLCBcJ1hcJyksXG4gICAgKDB4MTBEMCwgXCdWXCcpLFxuICAgICgweDEwRkMsIFwnTVwnLCBcJ1x4ZTFceDgzXHg5Y1wnKSxcbiAgICAoMHgxMEZELCBcJ1ZcJyksXG4gICAgKDB4MTE1RiwgXCdYXCcpLFxuICAgICgweDExNjEsIFwnVlwnKSxcbiAgICAoMHgxMjQ5LCBcJ1hcJyksXG4gICAgKDB4MTI0QSwgXCdWXCcpLFxuICAgICgweDEyNEUsIFwnWFwnKSxcbiAgICAoMHgxMjUwLCBcJ1ZcJyksXG4gICAgKDB4MTI1NywgXCdYXCcpLFxuICAgICgweDEyNTgsIFwnVlwnKSxcbiAgICAoMHgxMjU5LCBcJ1hcJyksXG4gICAgKDB4MTI1QSwgXCdWXCcpLFxuICAgICgweDEyNUUsIFwnWFwnKSxcbiAgICAoMHgxMjYwLCBcJ1ZcJyksXG4gICAgKDB4MTI4OSwgXCdYXCcpLFxuICAgICgweDEyOEEsIFwnVlwnKSxcbiAgICAoMHgxMjhFLCBcJ1hcJyksXG4gICAgKDB4MTI5MCwgXCdWXCcpLFxuICAgICgweDEyQjEsIFwnWFwnKSxcbiAgICAoMHgxMkIyLCBcJ1ZcJyksXG4gICAgKDB4MTJCNiwgXCdYXCcpLFxuICAgICgweDEyQjgsIFwnVlwnKSxcbiAgICAoMHgxMkJGLCBcJ1hcJyksXG4gICAgKDB4MTJDMCwgXCdWXCcpLFxuICAgICgweDEyQzEsIFwnWFwnKSxcbiAgICAoMHgxMkMyLCBcJ1ZcJyksXG4gICAgKDB4MTJDNiwgXCdYXCcpLFxuICAgICgweDEyQzgsIFwnVlwnKSxcbiAgICAoMHgxMkQ3LCBcJ1hcJyksXG4gICAgKDB4MTJEOCwgXCdWXCcpLFxuICAgICgweDEzMTEsIFwnWFwnKSxcbiAgICAoMHgxMzEyLCBcJ1ZcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18xNCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MTMxNiwgXCdYXCcpLFxuICAgICgweDEzMTgsIFwnVlwnKSxcbiAgICAoMHgxMzVCLCBcJ1hcJyksXG4gICAgKDB4MTM1RCwgXCdWXCcpLFxuICAgICgweDEzN0QsIFwnWFwnKSxcbiAgICAoMHgxMzgwLCBcJ1ZcJyksXG4gICAgKDB4MTM5QSwgXCdYXCcpLFxuICAgICgweDEzQTAsIFwnVlwnKSxcbiAgICAoMHgxM0Y2LCBcJ1hcJyksXG4gICAgKDB4MTNGOCwgXCdNXCcsIFwnXHhlMVx4OGZceGIwXCcpLFxuICAgICgweDEzRjksIFwnTVwnLCBcJ1x4ZTFceDhmXHhiMVwnKSxcbiAgICAoMHgxM0ZBLCBcJ01cJywgXCdceGUxXHg4Zlx4YjJcJyksXG4gICAgKDB4MTNGQiwgXCdNXCcsIFwnXHhlMVx4OGZceGIzXCcpLFxuICAgICgweDEzRkMsIFwnTVwnLCBcJ1x4ZTFceDhmXHhiNFwnKSxcbiAgICAoMHgxM0ZELCBcJ01cJywgXCdceGUxXHg4Zlx4YjVcJyksXG4gICAgKDB4MTNGRSwgXCdYXCcpLFxuICAgICgweDE0MDAsIFwnVlwnKSxcbiAgICAoMHgxNjgwLCBcJ1hcJyksXG4gICAgKDB4MTY4MSwgXCdWXCcpLFxuICAgICgweDE2OUQsIFwnWFwnKSxcbiAgICAoMHgxNkEwLCBcJ1ZcJyksXG4gICAgKDB4MTZGOSwgXCdYXCcpLFxuICAgICgweDE3MDAsIFwnVlwnKSxcbiAgICAoMHgxNzE2LCBcJ1hcJyksXG4gICAgKDB4MTcxRiwgXCdWXCcpLFxuICAgICgweDE3MzcsIFwnWFwnKSxcbiAgICAoMHgxNzQwLCBcJ1ZcJyksXG4gICAgKDB4MTc1NCwgXCdYXCcpLFxuICAgICgweDE3NjAsIFwnVlwnKSxcbiAgICAoMHgxNzZELCBcJ1hcJyksXG4gICAgKDB4MTc2RSwgXCdWXCcpLFxuICAgICgweDE3NzEsIFwnWFwnKSxcbiAgICAoMHgxNzcyLCBcJ1ZcJyksXG4gICAgKDB4MTc3NCwgXCdYXCcpLFxuICAgICgweDE3ODAsIFwnVlwnKSxcbiAgICAoMHgxN0I0LCBcJ1hcJyksXG4gICAgKDB4MTdCNiwgXCdWXCcpLFxuICAgICgweDE3REUsIFwnWFwnKSxcbiAgICAoMHgxN0UwLCBcJ1ZcJyksXG4gICAgKDB4MTdFQSwgXCdYXCcpLFxuICAgICgweDE3RjAsIFwnVlwnKSxcbiAgICAoMHgxN0ZBLCBcJ1hcJyksXG4gICAgKDB4MTgwMCwgXCdWXCcpLFxuICAgICgweDE4MDYsIFwnWFwnKSxcbiAgICAoMHgxODA3LCBcJ1ZcJyksXG4gICAgKDB4MTgwQiwgXCdJXCcpLFxuICAgICgweDE4MEUsIFwnWFwnKSxcbiAgICAoMHgxODBGLCBcJ0lcJyksXG4gICAgKDB4MTgxMCwgXCdWXCcpLFxuICAgICgweDE4MUEsIFwnWFwnKSxcbiAgICAoMHgxODIwLCBcJ1ZcJyksXG4gICAgKDB4MTg3OSwgXCdYXCcpLFxuICAgICgweDE4ODAsIFwnVlwnKSxcbiAgICAoMHgxOEFCLCBcJ1hcJyksXG4gICAgKDB4MThCMCwgXCdWXCcpLFxuICAgICgweDE4RjYsIFwnWFwnKSxcbiAgICAoMHgxOTAwLCBcJ1ZcJyksXG4gICAgKDB4MTkxRiwgXCdYXCcpLFxuICAgICgweDE5MjAsIFwnVlwnKSxcbiAgICAoMHgxOTJDLCBcJ1hcJyksXG4gICAgKDB4MTkzMCwgXCdWXCcpLFxuICAgICgweDE5M0MsIFwnWFwnKSxcbiAgICAoMHgxOTQwLCBcJ1ZcJyksXG4gICAgKDB4MTk0MSwgXCdYXCcpLFxuICAgICgweDE5NDQsIFwnVlwnKSxcbiAgICAoMHgxOTZFLCBcJ1hcJyksXG4gICAgKDB4MTk3MCwgXCdWXCcpLFxuICAgICgweDE5NzUsIFwnWFwnKSxcbiAgICAoMHgxOTgwLCBcJ1ZcJyksXG4gICAgKDB4MTlBQywgXCdYXCcpLFxuICAgICgweDE5QjAsIFwnVlwnKSxcbiAgICAoMHgxOUNBLCBcJ1hcJyksXG4gICAgKDB4MTlEMCwgXCdWXCcpLFxuICAgICgweDE5REIsIFwnWFwnKSxcbiAgICAoMHgxOURFLCBcJ1ZcJyksXG4gICAgKDB4MUExQywgXCdYXCcpLFxuICAgICgweDFBMUUsIFwnVlwnKSxcbiAgICAoMHgxQTVGLCBcJ1hcJyksXG4gICAgKDB4MUE2MCwgXCdWXCcpLFxuICAgICgweDFBN0QsIFwnWFwnKSxcbiAgICAoMHgxQTdGLCBcJ1ZcJyksXG4gICAgKDB4MUE4QSwgXCdYXCcpLFxuICAgICgweDFBOTAsIFwnVlwnKSxcbiAgICAoMHgxQTlBLCBcJ1hcJyksXG4gICAgKDB4MUFBMCwgXCdWXCcpLFxuICAgICgweDFBQUUsIFwnWFwnKSxcbiAgICAoMHgxQUIwLCBcJ1ZcJyksXG4gICAgKDB4MUFDRiwgXCdYXCcpLFxuICAgICgweDFCMDAsIFwnVlwnKSxcbiAgICAoMHgxQjRELCBcJ1hcJyksXG4gICAgKDB4MUI1MCwgXCdWXCcpLFxuICAgICgweDFCN0YsIFwnWFwnKSxcbiAgICAoMHgxQjgwLCBcJ1ZcJyksXG4gICAgKDB4MUJGNCwgXCdYXCcpLFxuICAgICgweDFCRkMsIFwnVlwnKSxcbiAgICAoMHgxQzM4LCBcJ1hcJyksXG4gICAgKDB4MUMzQiwgXCdWXCcpLFxuICAgICgweDFDNEEsIFwnWFwnKSxcbiAgICAoMHgxQzRELCBcJ1ZcJyksXG4gICAgKDB4MUM4MCwgXCdNXCcsIFwnXHhkMFx4YjJcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18xNSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUM4MSwgXCdNXCcsIFwnXHhkMFx4YjRcJyksXG4gICAgKDB4MUM4MiwgXCdNXCcsIFwnXHhkMFx4YmVcJyksXG4gICAgKDB4MUM4MywgXCdNXCcsIFwnXHhkMVx4ODFcJyksXG4gICAgKDB4MUM4NCwgXCdNXCcsIFwnXHhkMVx4ODJcJyksXG4gICAgKDB4MUM4NiwgXCdNXCcsIFwnXHhkMVx4OGFcJyksXG4gICAgKDB4MUM4NywgXCdNXCcsIFwnXHhkMVx4YTNcJyksXG4gICAgKDB4MUM4OCwgXCdNXCcsIFwnXHhlYVx4OTlceDhiXCcpLFxuICAgICgweDFDODksIFwnWFwnKSxcbiAgICAoMHgxQzkwLCBcJ01cJywgXCdceGUxXHg4M1x4OTBcJyksXG4gICAgKDB4MUM5MSwgXCdNXCcsIFwnXHhlMVx4ODNceDkxXCcpLFxuICAgICgweDFDOTIsIFwnTVwnLCBcJ1x4ZTFceDgzXHg5MlwnKSxcbiAgICAoMHgxQzkzLCBcJ01cJywgXCdceGUxXHg4M1x4OTNcJyksXG4gICAgKDB4MUM5NCwgXCdNXCcsIFwnXHhlMVx4ODNceDk0XCcpLFxuICAgICgweDFDOTUsIFwnTVwnLCBcJ1x4ZTFceDgzXHg5NVwnKSxcbiAgICAoMHgxQzk2LCBcJ01cJywgXCdceGUxXHg4M1x4OTZcJyksXG4gICAgKDB4MUM5NywgXCdNXCcsIFwnXHhlMVx4ODNceDk3XCcpLFxuICAgICgweDFDOTgsIFwnTVwnLCBcJ1x4ZTFceDgzXHg5OFwnKSxcbiAgICAoMHgxQzk5LCBcJ01cJywgXCdceGUxXHg4M1x4OTlcJyksXG4gICAgKDB4MUM5QSwgXCdNXCcsIFwnXHhlMVx4ODNceDlhXCcpLFxuICAgICgweDFDOUIsIFwnTVwnLCBcJ1x4ZTFceDgzXHg5YlwnKSxcbiAgICAoMHgxQzlDLCBcJ01cJywgXCdceGUxXHg4M1x4OWNcJyksXG4gICAgKDB4MUM5RCwgXCdNXCcsIFwnXHhlMVx4ODNceDlkXCcpLFxuICAgICgweDFDOUUsIFwnTVwnLCBcJ1x4ZTFceDgzXHg5ZVwnKSxcbiAgICAoMHgxQzlGLCBcJ01cJywgXCdceGUxXHg4M1x4OWZcJyksXG4gICAgKDB4MUNBMCwgXCdNXCcsIFwnXHhlMVx4ODNceGEwXCcpLFxuICAgICgweDFDQTEsIFwnTVwnLCBcJ1x4ZTFceDgzXHhhMVwnKSxcbiAgICAoMHgxQ0EyLCBcJ01cJywgXCdceGUxXHg4M1x4YTJcJyksXG4gICAgKDB4MUNBMywgXCdNXCcsIFwnXHhlMVx4ODNceGEzXCcpLFxuICAgICgweDFDQTQsIFwnTVwnLCBcJ1x4ZTFceDgzXHhhNFwnKSxcbiAgICAoMHgxQ0E1LCBcJ01cJywgXCdceGUxXHg4M1x4YTVcJyksXG4gICAgKDB4MUNBNiwgXCdNXCcsIFwnXHhlMVx4ODNceGE2XCcpLFxuICAgICgweDFDQTcsIFwnTVwnLCBcJ1x4ZTFceDgzXHhhN1wnKSxcbiAgICAoMHgxQ0E4LCBcJ01cJywgXCdceGUxXHg4M1x4YThcJyksXG4gICAgKDB4MUNBOSwgXCdNXCcsIFwnXHhlMVx4ODNceGE5XCcpLFxuICAgICgweDFDQUEsIFwnTVwnLCBcJ1x4ZTFceDgzXHhhYVwnKSxcbiAgICAoMHgxQ0FCLCBcJ01cJywgXCdceGUxXHg4M1x4YWJcJyksXG4gICAgKDB4MUNBQywgXCdNXCcsIFwnXHhlMVx4ODNceGFjXCcpLFxuICAgICgweDFDQUQsIFwnTVwnLCBcJ1x4ZTFceDgzXHhhZFwnKSxcbiAgICAoMHgxQ0FFLCBcJ01cJywgXCdceGUxXHg4M1x4YWVcJyksXG4gICAgKDB4MUNBRiwgXCdNXCcsIFwnXHhlMVx4ODNceGFmXCcpLFxuICAgICgweDFDQjAsIFwnTVwnLCBcJ1x4ZTFceDgzXHhiMFwnKSxcbiAgICAoMHgxQ0IxLCBcJ01cJywgXCdceGUxXHg4M1x4YjFcJyksXG4gICAgKDB4MUNCMiwgXCdNXCcsIFwnXHhlMVx4ODNceGIyXCcpLFxuICAgICgweDFDQjMsIFwnTVwnLCBcJ1x4ZTFceDgzXHhiM1wnKSxcbiAgICAoMHgxQ0I0LCBcJ01cJywgXCdceGUxXHg4M1x4YjRcJyksXG4gICAgKDB4MUNCNSwgXCdNXCcsIFwnXHhlMVx4ODNceGI1XCcpLFxuICAgICgweDFDQjYsIFwnTVwnLCBcJ1x4ZTFceDgzXHhiNlwnKSxcbiAgICAoMHgxQ0I3LCBcJ01cJywgXCdceGUxXHg4M1x4YjdcJyksXG4gICAgKDB4MUNCOCwgXCdNXCcsIFwnXHhlMVx4ODNceGI4XCcpLFxuICAgICgweDFDQjksIFwnTVwnLCBcJ1x4ZTFceDgzXHhiOVwnKSxcbiAgICAoMHgxQ0JBLCBcJ01cJywgXCdceGUxXHg4M1x4YmFcJyksXG4gICAgKDB4MUNCQiwgXCdYXCcpLFxuICAgICgweDFDQkQsIFwnTVwnLCBcJ1x4ZTFceDgzXHhiZFwnKSxcbiAgICAoMHgxQ0JFLCBcJ01cJywgXCdceGUxXHg4M1x4YmVcJyksXG4gICAgKDB4MUNCRiwgXCdNXCcsIFwnXHhlMVx4ODNceGJmXCcpLFxuICAgICgweDFDQzAsIFwnVlwnKSxcbiAgICAoMHgxQ0M4LCBcJ1hcJyksXG4gICAgKDB4MUNEMCwgXCdWXCcpLFxuICAgICgweDFDRkIsIFwnWFwnKSxcbiAgICAoMHgxRDAwLCBcJ1ZcJyksXG4gICAgKDB4MUQyQywgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHgxRDJELCBcJ01cJywgXCdceGMzXHhhNlwnKSxcbiAgICAoMHgxRDJFLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFEMkYsIFwnVlwnKSxcbiAgICAoMHgxRDMwLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFEMzEsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQzMiwgXCdNXCcsIFwnXHhjN1x4OWRcJyksXG4gICAgKDB4MUQzMywgXCdNXCcsIFwnZ1wnKSxcbiAgICAoMHgxRDM0LCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFEMzUsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQzNiwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgxRDM3LCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFEMzgsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQzOSwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgxRDNBLCBcJ01cJywgXCduXCcpLFxuICAgICgweDFEM0IsIFwnVlwnKSxcbiAgICAoMHgxRDNDLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFEM0QsIFwnTVwnLCBcJ1x4YzhceGEzXCcpLFxuICAgICgweDFEM0UsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQzRiwgXCdNXCcsIFwnclwnKSxcbiAgICAoMHgxRDQwLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENDEsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ0MiwgXCdNXCcsIFwnd1wnKSxcbiAgICAoMHgxRDQzLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENDQsIFwnTVwnLCBcJ1x4YzlceDkwXCcpLFxuICAgICgweDFENDUsIFwnTVwnLCBcJ1x4YzlceDkxXCcpLFxuICAgICgweDFENDYsIFwnTVwnLCBcJ1x4ZTFceGI0XHg4MlwnKSxcbiAgICAoMHgxRDQ3LCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENDgsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ0OSwgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHgxRDRBLCBcJ01cJywgXCdceGM5XHg5OVwnKSxcbiAgICAoMHgxRDRCLCBcJ01cJywgXCdceGM5XHg5YlwnKSxcbiAgICAoMHgxRDRDLCBcJ01cJywgXCdceGM5XHg5Y1wnKSxcbiAgICAoMHgxRDRELCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENEUsIFwnVlwnKSxcbiAgICAoMHgxRDRGLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENTAsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ1MSwgXCdNXCcsIFwnXHhjNVx4OGJcJyksXG4gICAgKDB4MUQ1MiwgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHgxRDUzLCBcJ01cJywgXCdceGM5XHg5NFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzE2KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRDU0LCBcJ01cJywgXCdceGUxXHhiNFx4OTZcJyksXG4gICAgKDB4MUQ1NSwgXCdNXCcsIFwnXHhlMVx4YjRceDk3XCcpLFxuICAgICgweDFENTYsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ1NywgXCdNXCcsIFwndFwnKSxcbiAgICAoMHgxRDU4LCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENTksIFwnTVwnLCBcJ1x4ZTFceGI0XHg5ZFwnKSxcbiAgICAoMHgxRDVBLCBcJ01cJywgXCdceGM5XHhhZlwnKSxcbiAgICAoMHgxRDVCLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENUMsIFwnTVwnLCBcJ1x4ZTFceGI0XHhhNVwnKSxcbiAgICAoMHgxRDVELCBcJ01cJywgXCdceGNlXHhiMlwnKSxcbiAgICAoMHgxRDVFLCBcJ01cJywgXCdceGNlXHhiM1wnKSxcbiAgICAoMHgxRDVGLCBcJ01cJywgXCdceGNlXHhiNFwnKSxcbiAgICAoMHgxRDYwLCBcJ01cJywgXCdceGNmXHg4NlwnKSxcbiAgICAoMHgxRDYxLCBcJ01cJywgXCdceGNmXHg4N1wnKSxcbiAgICAoMHgxRDYyLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENjMsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ2NCwgXCdNXCcsIFwndVwnKSxcbiAgICAoMHgxRDY1LCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENjYsIFwnTVwnLCBcJ1x4Y2VceGIyXCcpLFxuICAgICgweDFENjcsIFwnTVwnLCBcJ1x4Y2VceGIzXCcpLFxuICAgICgweDFENjgsIFwnTVwnLCBcJ1x4Y2ZceDgxXCcpLFxuICAgICgweDFENjksIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFENkEsIFwnTVwnLCBcJ1x4Y2ZceDg3XCcpLFxuICAgICgweDFENkIsIFwnVlwnKSxcbiAgICAoMHgxRDc4LCBcJ01cJywgXCdceGQwXHhiZFwnKSxcbiAgICAoMHgxRDc5LCBcJ1ZcJyksXG4gICAgKDB4MUQ5QiwgXCdNXCcsIFwnXHhjOVx4OTJcJyksXG4gICAgKDB4MUQ5QywgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHgxRDlELCBcJ01cJywgXCdceGM5XHg5NVwnKSxcbiAgICAoMHgxRDlFLCBcJ01cJywgXCdceGMzXHhiMFwnKSxcbiAgICAoMHgxRDlGLCBcJ01cJywgXCdceGM5XHg5Y1wnKSxcbiAgICAoMHgxREEwLCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFEQTEsIFwnTVwnLCBcJ1x4YzlceDlmXCcpLFxuICAgICgweDFEQTIsIFwnTVwnLCBcJ1x4YzlceGExXCcpLFxuICAgICgweDFEQTMsIFwnTVwnLCBcJ1x4YzlceGE1XCcpLFxuICAgICgweDFEQTQsIFwnTVwnLCBcJ1x4YzlceGE4XCcpLFxuICAgICgweDFEQTUsIFwnTVwnLCBcJ1x4YzlceGE5XCcpLFxuICAgICgweDFEQTYsIFwnTVwnLCBcJ1x4YzlceGFhXCcpLFxuICAgICgweDFEQTcsIFwnTVwnLCBcJ1x4ZTFceGI1XHhiYlwnKSxcbiAgICAoMHgxREE4LCBcJ01cJywgXCdceGNhXHg5ZFwnKSxcbiAgICAoMHgxREE5LCBcJ01cJywgXCdceGM5XHhhZFwnKSxcbiAgICAoMHgxREFBLCBcJ01cJywgXCdceGUxXHhiNlx4ODVcJyksXG4gICAgKDB4MURBQiwgXCdNXCcsIFwnXHhjYVx4OWZcJyksXG4gICAgKDB4MURBQywgXCdNXCcsIFwnXHhjOVx4YjFcJyksXG4gICAgKDB4MURBRCwgXCdNXCcsIFwnXHhjOVx4YjBcJyksXG4gICAgKDB4MURBRSwgXCdNXCcsIFwnXHhjOVx4YjJcJyksXG4gICAgKDB4MURBRiwgXCdNXCcsIFwnXHhjOVx4YjNcJyksXG4gICAgKDB4MURCMCwgXCdNXCcsIFwnXHhjOVx4YjRcJyksXG4gICAgKDB4MURCMSwgXCdNXCcsIFwnXHhjOVx4YjVcJyksXG4gICAgKDB4MURCMiwgXCdNXCcsIFwnXHhjOVx4YjhcJyksXG4gICAgKDB4MURCMywgXCdNXCcsIFwnXHhjYVx4ODJcJyksXG4gICAgKDB4MURCNCwgXCdNXCcsIFwnXHhjYVx4ODNcJyksXG4gICAgKDB4MURCNSwgXCdNXCcsIFwnXHhjNlx4YWJcJyksXG4gICAgKDB4MURCNiwgXCdNXCcsIFwnXHhjYVx4ODlcJyksXG4gICAgKDB4MURCNywgXCdNXCcsIFwnXHhjYVx4OGFcJyksXG4gICAgKDB4MURCOCwgXCdNXCcsIFwnXHhlMVx4YjRceDljXCcpLFxuICAgICgweDFEQjksIFwnTVwnLCBcJ1x4Y2FceDhiXCcpLFxuICAgICgweDFEQkEsIFwnTVwnLCBcJ1x4Y2FceDhjXCcpLFxuICAgICgweDFEQkIsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MURCQywgXCdNXCcsIFwnXHhjYVx4OTBcJyksXG4gICAgKDB4MURCRCwgXCdNXCcsIFwnXHhjYVx4OTFcJyksXG4gICAgKDB4MURCRSwgXCdNXCcsIFwnXHhjYVx4OTJcJyksXG4gICAgKDB4MURCRiwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MURDMCwgXCdWXCcpLFxuICAgICgweDFFMDAsIFwnTVwnLCBcJ1x4ZTFceGI4XHg4MVwnKSxcbiAgICAoMHgxRTAxLCBcJ1ZcJyksXG4gICAgKDB4MUUwMiwgXCdNXCcsIFwnXHhlMVx4YjhceDgzXCcpLFxuICAgICgweDFFMDMsIFwnVlwnKSxcbiAgICAoMHgxRTA0LCBcJ01cJywgXCdceGUxXHhiOFx4ODVcJyksXG4gICAgKDB4MUUwNSwgXCdWXCcpLFxuICAgICgweDFFMDYsIFwnTVwnLCBcJ1x4ZTFceGI4XHg4N1wnKSxcbiAgICAoMHgxRTA3LCBcJ1ZcJyksXG4gICAgKDB4MUUwOCwgXCdNXCcsIFwnXHhlMVx4YjhceDg5XCcpLFxuICAgICgweDFFMDksIFwnVlwnKSxcbiAgICAoMHgxRTBBLCBcJ01cJywgXCdceGUxXHhiOFx4OGJcJyksXG4gICAgKDB4MUUwQiwgXCdWXCcpLFxuICAgICgweDFFMEMsIFwnTVwnLCBcJ1x4ZTFceGI4XHg4ZFwnKSxcbiAgICAoMHgxRTBELCBcJ1ZcJyksXG4gICAgKDB4MUUwRSwgXCdNXCcsIFwnXHhlMVx4YjhceDhmXCcpLFxuICAgICgweDFFMEYsIFwnVlwnKSxcbiAgICAoMHgxRTEwLCBcJ01cJywgXCdceGUxXHhiOFx4OTFcJyksXG4gICAgKDB4MUUxMSwgXCdWXCcpLFxuICAgICgweDFFMTIsIFwnTVwnLCBcJ1x4ZTFceGI4XHg5M1wnKSxcbiAgICAoMHgxRTEzLCBcJ1ZcJyksXG4gICAgKDB4MUUxNCwgXCdNXCcsIFwnXHhlMVx4YjhceDk1XCcpLFxuICAgICgweDFFMTUsIFwnVlwnKSxcbiAgICAoMHgxRTE2LCBcJ01cJywgXCdceGUxXHhiOFx4OTdcJyksXG4gICAgKDB4MUUxNywgXCdWXCcpLFxuICAgICgweDFFMTgsIFwnTVwnLCBcJ1x4ZTFceGI4XHg5OVwnKSxcbiAgICAoMHgxRTE5LCBcJ1ZcJyksXG4gICAgKDB4MUUxQSwgXCdNXCcsIFwnXHhlMVx4YjhceDliXCcpLFxuICAgICgweDFFMUIsIFwnVlwnKSxcbiAgICAoMHgxRTFDLCBcJ01cJywgXCdceGUxXHhiOFx4OWRcJyksXG4gICAgKDB4MUUxRCwgXCdWXCcpLFxuICAgICgweDFFMUUsIFwnTVwnLCBcJ1x4ZTFceGI4XHg5ZlwnKSxcbiAgICAoMHgxRTFGLCBcJ1ZcJyksXG4gICAgKDB4MUUyMCwgXCdNXCcsIFwnXHhlMVx4YjhceGExXCcpLFxuICAgICgweDFFMjEsIFwnVlwnKSxcbiAgICAoMHgxRTIyLCBcJ01cJywgXCdceGUxXHhiOFx4YTNcJyksXG4gICAgKDB4MUUyMywgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMTcoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFFMjQsIFwnTVwnLCBcJ1x4ZTFceGI4XHhhNVwnKSxcbiAgICAoMHgxRTI1LCBcJ1ZcJyksXG4gICAgKDB4MUUyNiwgXCdNXCcsIFwnXHhlMVx4YjhceGE3XCcpLFxuICAgICgweDFFMjcsIFwnVlwnKSxcbiAgICAoMHgxRTI4LCBcJ01cJywgXCdceGUxXHhiOFx4YTlcJyksXG4gICAgKDB4MUUyOSwgXCdWXCcpLFxuICAgICgweDFFMkEsIFwnTVwnLCBcJ1x4ZTFceGI4XHhhYlwnKSxcbiAgICAoMHgxRTJCLCBcJ1ZcJyksXG4gICAgKDB4MUUyQywgXCdNXCcsIFwnXHhlMVx4YjhceGFkXCcpLFxuICAgICgweDFFMkQsIFwnVlwnKSxcbiAgICAoMHgxRTJFLCBcJ01cJywgXCdceGUxXHhiOFx4YWZcJyksXG4gICAgKDB4MUUyRiwgXCdWXCcpLFxuICAgICgweDFFMzAsIFwnTVwnLCBcJ1x4ZTFceGI4XHhiMVwnKSxcbiAgICAoMHgxRTMxLCBcJ1ZcJyksXG4gICAgKDB4MUUzMiwgXCdNXCcsIFwnXHhlMVx4YjhceGIzXCcpLFxuICAgICgweDFFMzMsIFwnVlwnKSxcbiAgICAoMHgxRTM0LCBcJ01cJywgXCdceGUxXHhiOFx4YjVcJyksXG4gICAgKDB4MUUzNSwgXCdWXCcpLFxuICAgICgweDFFMzYsIFwnTVwnLCBcJ1x4ZTFceGI4XHhiN1wnKSxcbiAgICAoMHgxRTM3LCBcJ1ZcJyksXG4gICAgKDB4MUUzOCwgXCdNXCcsIFwnXHhlMVx4YjhceGI5XCcpLFxuICAgICgweDFFMzksIFwnVlwnKSxcbiAgICAoMHgxRTNBLCBcJ01cJywgXCdceGUxXHhiOFx4YmJcJyksXG4gICAgKDB4MUUzQiwgXCdWXCcpLFxuICAgICgweDFFM0MsIFwnTVwnLCBcJ1x4ZTFceGI4XHhiZFwnKSxcbiAgICAoMHgxRTNELCBcJ1ZcJyksXG4gICAgKDB4MUUzRSwgXCdNXCcsIFwnXHhlMVx4YjhceGJmXCcpLFxuICAgICgweDFFM0YsIFwnVlwnKSxcbiAgICAoMHgxRTQwLCBcJ01cJywgXCdceGUxXHhiOVx4ODFcJyksXG4gICAgKDB4MUU0MSwgXCdWXCcpLFxuICAgICgweDFFNDIsIFwnTVwnLCBcJ1x4ZTFceGI5XHg4M1wnKSxcbiAgICAoMHgxRTQzLCBcJ1ZcJyksXG4gICAgKDB4MUU0NCwgXCdNXCcsIFwnXHhlMVx4YjlceDg1XCcpLFxuICAgICgweDFFNDUsIFwnVlwnKSxcbiAgICAoMHgxRTQ2LCBcJ01cJywgXCdceGUxXHhiOVx4ODdcJyksXG4gICAgKDB4MUU0NywgXCdWXCcpLFxuICAgICgweDFFNDgsIFwnTVwnLCBcJ1x4ZTFceGI5XHg4OVwnKSxcbiAgICAoMHgxRTQ5LCBcJ1ZcJyksXG4gICAgKDB4MUU0QSwgXCdNXCcsIFwnXHhlMVx4YjlceDhiXCcpLFxuICAgICgweDFFNEIsIFwnVlwnKSxcbiAgICAoMHgxRTRDLCBcJ01cJywgXCdceGUxXHhiOVx4OGRcJyksXG4gICAgKDB4MUU0RCwgXCdWXCcpLFxuICAgICgweDFFNEUsIFwnTVwnLCBcJ1x4ZTFceGI5XHg4ZlwnKSxcbiAgICAoMHgxRTRGLCBcJ1ZcJyksXG4gICAgKDB4MUU1MCwgXCdNXCcsIFwnXHhlMVx4YjlceDkxXCcpLFxuICAgICgweDFFNTEsIFwnVlwnKSxcbiAgICAoMHgxRTUyLCBcJ01cJywgXCdceGUxXHhiOVx4OTNcJyksXG4gICAgKDB4MUU1MywgXCdWXCcpLFxuICAgICgweDFFNTQsIFwnTVwnLCBcJ1x4ZTFceGI5XHg5NVwnKSxcbiAgICAoMHgxRTU1LCBcJ1ZcJyksXG4gICAgKDB4MUU1NiwgXCdNXCcsIFwnXHhlMVx4YjlceDk3XCcpLFxuICAgICgweDFFNTcsIFwnVlwnKSxcbiAgICAoMHgxRTU4LCBcJ01cJywgXCdceGUxXHhiOVx4OTlcJyksXG4gICAgKDB4MUU1OSwgXCdWXCcpLFxuICAgICgweDFFNUEsIFwnTVwnLCBcJ1x4ZTFceGI5XHg5YlwnKSxcbiAgICAoMHgxRTVCLCBcJ1ZcJyksXG4gICAgKDB4MUU1QywgXCdNXCcsIFwnXHhlMVx4YjlceDlkXCcpLFxuICAgICgweDFFNUQsIFwnVlwnKSxcbiAgICAoMHgxRTVFLCBcJ01cJywgXCdceGUxXHhiOVx4OWZcJyksXG4gICAgKDB4MUU1RiwgXCdWXCcpLFxuICAgICgweDFFNjAsIFwnTVwnLCBcJ1x4ZTFceGI5XHhhMVwnKSxcbiAgICAoMHgxRTYxLCBcJ1ZcJyksXG4gICAgKDB4MUU2MiwgXCdNXCcsIFwnXHhlMVx4YjlceGEzXCcpLFxuICAgICgweDFFNjMsIFwnVlwnKSxcbiAgICAoMHgxRTY0LCBcJ01cJywgXCdceGUxXHhiOVx4YTVcJyksXG4gICAgKDB4MUU2NSwgXCdWXCcpLFxuICAgICgweDFFNjYsIFwnTVwnLCBcJ1x4ZTFceGI5XHhhN1wnKSxcbiAgICAoMHgxRTY3LCBcJ1ZcJyksXG4gICAgKDB4MUU2OCwgXCdNXCcsIFwnXHhlMVx4YjlceGE5XCcpLFxuICAgICgweDFFNjksIFwnVlwnKSxcbiAgICAoMHgxRTZBLCBcJ01cJywgXCdceGUxXHhiOVx4YWJcJyksXG4gICAgKDB4MUU2QiwgXCdWXCcpLFxuICAgICgweDFFNkMsIFwnTVwnLCBcJ1x4ZTFceGI5XHhhZFwnKSxcbiAgICAoMHgxRTZELCBcJ1ZcJyksXG4gICAgKDB4MUU2RSwgXCdNXCcsIFwnXHhlMVx4YjlceGFmXCcpLFxuICAgICgweDFFNkYsIFwnVlwnKSxcbiAgICAoMHgxRTcwLCBcJ01cJywgXCdceGUxXHhiOVx4YjFcJyksXG4gICAgKDB4MUU3MSwgXCdWXCcpLFxuICAgICgweDFFNzIsIFwnTVwnLCBcJ1x4ZTFceGI5XHhiM1wnKSxcbiAgICAoMHgxRTczLCBcJ1ZcJyksXG4gICAgKDB4MUU3NCwgXCdNXCcsIFwnXHhlMVx4YjlceGI1XCcpLFxuICAgICgweDFFNzUsIFwnVlwnKSxcbiAgICAoMHgxRTc2LCBcJ01cJywgXCdceGUxXHhiOVx4YjdcJyksXG4gICAgKDB4MUU3NywgXCdWXCcpLFxuICAgICgweDFFNzgsIFwnTVwnLCBcJ1x4ZTFceGI5XHhiOVwnKSxcbiAgICAoMHgxRTc5LCBcJ1ZcJyksXG4gICAgKDB4MUU3QSwgXCdNXCcsIFwnXHhlMVx4YjlceGJiXCcpLFxuICAgICgweDFFN0IsIFwnVlwnKSxcbiAgICAoMHgxRTdDLCBcJ01cJywgXCdceGUxXHhiOVx4YmRcJyksXG4gICAgKDB4MUU3RCwgXCdWXCcpLFxuICAgICgweDFFN0UsIFwnTVwnLCBcJ1x4ZTFceGI5XHhiZlwnKSxcbiAgICAoMHgxRTdGLCBcJ1ZcJyksXG4gICAgKDB4MUU4MCwgXCdNXCcsIFwnXHhlMVx4YmFceDgxXCcpLFxuICAgICgweDFFODEsIFwnVlwnKSxcbiAgICAoMHgxRTgyLCBcJ01cJywgXCdceGUxXHhiYVx4ODNcJyksXG4gICAgKDB4MUU4MywgXCdWXCcpLFxuICAgICgweDFFODQsIFwnTVwnLCBcJ1x4ZTFceGJhXHg4NVwnKSxcbiAgICAoMHgxRTg1LCBcJ1ZcJyksXG4gICAgKDB4MUU4NiwgXCdNXCcsIFwnXHhlMVx4YmFceDg3XCcpLFxuICAgICgweDFFODcsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzE4KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRTg4LCBcJ01cJywgXCdceGUxXHhiYVx4ODlcJyksXG4gICAgKDB4MUU4OSwgXCdWXCcpLFxuICAgICgweDFFOEEsIFwnTVwnLCBcJ1x4ZTFceGJhXHg4YlwnKSxcbiAgICAoMHgxRThCLCBcJ1ZcJyksXG4gICAgKDB4MUU4QywgXCdNXCcsIFwnXHhlMVx4YmFceDhkXCcpLFxuICAgICgweDFFOEQsIFwnVlwnKSxcbiAgICAoMHgxRThFLCBcJ01cJywgXCdceGUxXHhiYVx4OGZcJyksXG4gICAgKDB4MUU4RiwgXCdWXCcpLFxuICAgICgweDFFOTAsIFwnTVwnLCBcJ1x4ZTFceGJhXHg5MVwnKSxcbiAgICAoMHgxRTkxLCBcJ1ZcJyksXG4gICAgKDB4MUU5MiwgXCdNXCcsIFwnXHhlMVx4YmFceDkzXCcpLFxuICAgICgweDFFOTMsIFwnVlwnKSxcbiAgICAoMHgxRTk0LCBcJ01cJywgXCdceGUxXHhiYVx4OTVcJyksXG4gICAgKDB4MUU5NSwgXCdWXCcpLFxuICAgICgweDFFOUEsIFwnTVwnLCBcJ2FceGNhXHhiZVwnKSxcbiAgICAoMHgxRTlCLCBcJ01cJywgXCdceGUxXHhiOVx4YTFcJyksXG4gICAgKDB4MUU5QywgXCdWXCcpLFxuICAgICgweDFFOUUsIFwnTVwnLCBcJ3NzXCcpLFxuICAgICgweDFFOUYsIFwnVlwnKSxcbiAgICAoMHgxRUEwLCBcJ01cJywgXCdceGUxXHhiYVx4YTFcJyksXG4gICAgKDB4MUVBMSwgXCdWXCcpLFxuICAgICgweDFFQTIsIFwnTVwnLCBcJ1x4ZTFceGJhXHhhM1wnKSxcbiAgICAoMHgxRUEzLCBcJ1ZcJyksXG4gICAgKDB4MUVBNCwgXCdNXCcsIFwnXHhlMVx4YmFceGE1XCcpLFxuICAgICgweDFFQTUsIFwnVlwnKSxcbiAgICAoMHgxRUE2LCBcJ01cJywgXCdceGUxXHhiYVx4YTdcJyksXG4gICAgKDB4MUVBNywgXCdWXCcpLFxuICAgICgweDFFQTgsIFwnTVwnLCBcJ1x4ZTFceGJhXHhhOVwnKSxcbiAgICAoMHgxRUE5LCBcJ1ZcJyksXG4gICAgKDB4MUVBQSwgXCdNXCcsIFwnXHhlMVx4YmFceGFiXCcpLFxuICAgICgweDFFQUIsIFwnVlwnKSxcbiAgICAoMHgxRUFDLCBcJ01cJywgXCdceGUxXHhiYVx4YWRcJyksXG4gICAgKDB4MUVBRCwgXCdWXCcpLFxuICAgICgweDFFQUUsIFwnTVwnLCBcJ1x4ZTFceGJhXHhhZlwnKSxcbiAgICAoMHgxRUFGLCBcJ1ZcJyksXG4gICAgKDB4MUVCMCwgXCdNXCcsIFwnXHhlMVx4YmFceGIxXCcpLFxuICAgICgweDFFQjEsIFwnVlwnKSxcbiAgICAoMHgxRUIyLCBcJ01cJywgXCdceGUxXHhiYVx4YjNcJyksXG4gICAgKDB4MUVCMywgXCdWXCcpLFxuICAgICgweDFFQjQsIFwnTVwnLCBcJ1x4ZTFceGJhXHhiNVwnKSxcbiAgICAoMHgxRUI1LCBcJ1ZcJyksXG4gICAgKDB4MUVCNiwgXCdNXCcsIFwnXHhlMVx4YmFceGI3XCcpLFxuICAgICgweDFFQjcsIFwnVlwnKSxcbiAgICAoMHgxRUI4LCBcJ01cJywgXCdceGUxXHhiYVx4YjlcJyksXG4gICAgKDB4MUVCOSwgXCdWXCcpLFxuICAgICgweDFFQkEsIFwnTVwnLCBcJ1x4ZTFceGJhXHhiYlwnKSxcbiAgICAoMHgxRUJCLCBcJ1ZcJyksXG4gICAgKDB4MUVCQywgXCdNXCcsIFwnXHhlMVx4YmFceGJkXCcpLFxuICAgICgweDFFQkQsIFwnVlwnKSxcbiAgICAoMHgxRUJFLCBcJ01cJywgXCdceGUxXHhiYVx4YmZcJyksXG4gICAgKDB4MUVCRiwgXCdWXCcpLFxuICAgICgweDFFQzAsIFwnTVwnLCBcJ1x4ZTFceGJiXHg4MVwnKSxcbiAgICAoMHgxRUMxLCBcJ1ZcJyksXG4gICAgKDB4MUVDMiwgXCdNXCcsIFwnXHhlMVx4YmJceDgzXCcpLFxuICAgICgweDFFQzMsIFwnVlwnKSxcbiAgICAoMHgxRUM0LCBcJ01cJywgXCdceGUxXHhiYlx4ODVcJyksXG4gICAgKDB4MUVDNSwgXCdWXCcpLFxuICAgICgweDFFQzYsIFwnTVwnLCBcJ1x4ZTFceGJiXHg4N1wnKSxcbiAgICAoMHgxRUM3LCBcJ1ZcJyksXG4gICAgKDB4MUVDOCwgXCdNXCcsIFwnXHhlMVx4YmJceDg5XCcpLFxuICAgICgweDFFQzksIFwnVlwnKSxcbiAgICAoMHgxRUNBLCBcJ01cJywgXCdceGUxXHhiYlx4OGJcJyksXG4gICAgKDB4MUVDQiwgXCdWXCcpLFxuICAgICgweDFFQ0MsIFwnTVwnLCBcJ1x4ZTFceGJiXHg4ZFwnKSxcbiAgICAoMHgxRUNELCBcJ1ZcJyksXG4gICAgKDB4MUVDRSwgXCdNXCcsIFwnXHhlMVx4YmJceDhmXCcpLFxuICAgICgweDFFQ0YsIFwnVlwnKSxcbiAgICAoMHgxRUQwLCBcJ01cJywgXCdceGUxXHhiYlx4OTFcJyksXG4gICAgKDB4MUVEMSwgXCdWXCcpLFxuICAgICgweDFFRDIsIFwnTVwnLCBcJ1x4ZTFceGJiXHg5M1wnKSxcbiAgICAoMHgxRUQzLCBcJ1ZcJyksXG4gICAgKDB4MUVENCwgXCdNXCcsIFwnXHhlMVx4YmJceDk1XCcpLFxuICAgICgweDFFRDUsIFwnVlwnKSxcbiAgICAoMHgxRUQ2LCBcJ01cJywgXCdceGUxXHhiYlx4OTdcJyksXG4gICAgKDB4MUVENywgXCdWXCcpLFxuICAgICgweDFFRDgsIFwnTVwnLCBcJ1x4ZTFceGJiXHg5OVwnKSxcbiAgICAoMHgxRUQ5LCBcJ1ZcJyksXG4gICAgKDB4MUVEQSwgXCdNXCcsIFwnXHhlMVx4YmJceDliXCcpLFxuICAgICgweDFFREIsIFwnVlwnKSxcbiAgICAoMHgxRURDLCBcJ01cJywgXCdceGUxXHhiYlx4OWRcJyksXG4gICAgKDB4MUVERCwgXCdWXCcpLFxuICAgICgweDFFREUsIFwnTVwnLCBcJ1x4ZTFceGJiXHg5ZlwnKSxcbiAgICAoMHgxRURGLCBcJ1ZcJyksXG4gICAgKDB4MUVFMCwgXCdNXCcsIFwnXHhlMVx4YmJceGExXCcpLFxuICAgICgweDFFRTEsIFwnVlwnKSxcbiAgICAoMHgxRUUyLCBcJ01cJywgXCdceGUxXHhiYlx4YTNcJyksXG4gICAgKDB4MUVFMywgXCdWXCcpLFxuICAgICgweDFFRTQsIFwnTVwnLCBcJ1x4ZTFceGJiXHhhNVwnKSxcbiAgICAoMHgxRUU1LCBcJ1ZcJyksXG4gICAgKDB4MUVFNiwgXCdNXCcsIFwnXHhlMVx4YmJceGE3XCcpLFxuICAgICgweDFFRTcsIFwnVlwnKSxcbiAgICAoMHgxRUU4LCBcJ01cJywgXCdceGUxXHhiYlx4YTlcJyksXG4gICAgKDB4MUVFOSwgXCdWXCcpLFxuICAgICgweDFFRUEsIFwnTVwnLCBcJ1x4ZTFceGJiXHhhYlwnKSxcbiAgICAoMHgxRUVCLCBcJ1ZcJyksXG4gICAgKDB4MUVFQywgXCdNXCcsIFwnXHhlMVx4YmJceGFkXCcpLFxuICAgICgweDFFRUQsIFwnVlwnKSxcbiAgICAoMHgxRUVFLCBcJ01cJywgXCdceGUxXHhiYlx4YWZcJyksXG4gICAgKDB4MUVFRiwgXCdWXCcpLFxuICAgICgweDFFRjAsIFwnTVwnLCBcJ1x4ZTFceGJiXHhiMVwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzE5KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRUYxLCBcJ1ZcJyksXG4gICAgKDB4MUVGMiwgXCdNXCcsIFwnXHhlMVx4YmJceGIzXCcpLFxuICAgICgweDFFRjMsIFwnVlwnKSxcbiAgICAoMHgxRUY0LCBcJ01cJywgXCdceGUxXHhiYlx4YjVcJyksXG4gICAgKDB4MUVGNSwgXCdWXCcpLFxuICAgICgweDFFRjYsIFwnTVwnLCBcJ1x4ZTFceGJiXHhiN1wnKSxcbiAgICAoMHgxRUY3LCBcJ1ZcJyksXG4gICAgKDB4MUVGOCwgXCdNXCcsIFwnXHhlMVx4YmJceGI5XCcpLFxuICAgICgweDFFRjksIFwnVlwnKSxcbiAgICAoMHgxRUZBLCBcJ01cJywgXCdceGUxXHhiYlx4YmJcJyksXG4gICAgKDB4MUVGQiwgXCdWXCcpLFxuICAgICgweDFFRkMsIFwnTVwnLCBcJ1x4ZTFceGJiXHhiZFwnKSxcbiAgICAoMHgxRUZELCBcJ1ZcJyksXG4gICAgKDB4MUVGRSwgXCdNXCcsIFwnXHhlMVx4YmJceGJmXCcpLFxuICAgICgweDFFRkYsIFwnVlwnKSxcbiAgICAoMHgxRjA4LCBcJ01cJywgXCdceGUxXHhiY1x4ODBcJyksXG4gICAgKDB4MUYwOSwgXCdNXCcsIFwnXHhlMVx4YmNceDgxXCcpLFxuICAgICgweDFGMEEsIFwnTVwnLCBcJ1x4ZTFceGJjXHg4MlwnKSxcbiAgICAoMHgxRjBCLCBcJ01cJywgXCdceGUxXHhiY1x4ODNcJyksXG4gICAgKDB4MUYwQywgXCdNXCcsIFwnXHhlMVx4YmNceDg0XCcpLFxuICAgICgweDFGMEQsIFwnTVwnLCBcJ1x4ZTFceGJjXHg4NVwnKSxcbiAgICAoMHgxRjBFLCBcJ01cJywgXCdceGUxXHhiY1x4ODZcJyksXG4gICAgKDB4MUYwRiwgXCdNXCcsIFwnXHhlMVx4YmNceDg3XCcpLFxuICAgICgweDFGMTAsIFwnVlwnKSxcbiAgICAoMHgxRjE2LCBcJ1hcJyksXG4gICAgKDB4MUYxOCwgXCdNXCcsIFwnXHhlMVx4YmNceDkwXCcpLFxuICAgICgweDFGMTksIFwnTVwnLCBcJ1x4ZTFceGJjXHg5MVwnKSxcbiAgICAoMHgxRjFBLCBcJ01cJywgXCdceGUxXHhiY1x4OTJcJyksXG4gICAgKDB4MUYxQiwgXCdNXCcsIFwnXHhlMVx4YmNceDkzXCcpLFxuICAgICgweDFGMUMsIFwnTVwnLCBcJ1x4ZTFceGJjXHg5NFwnKSxcbiAgICAoMHgxRjFELCBcJ01cJywgXCdceGUxXHhiY1x4OTVcJyksXG4gICAgKDB4MUYxRSwgXCdYXCcpLFxuICAgICgweDFGMjAsIFwnVlwnKSxcbiAgICAoMHgxRjI4LCBcJ01cJywgXCdceGUxXHhiY1x4YTBcJyksXG4gICAgKDB4MUYyOSwgXCdNXCcsIFwnXHhlMVx4YmNceGExXCcpLFxuICAgICgweDFGMkEsIFwnTVwnLCBcJ1x4ZTFceGJjXHhhMlwnKSxcbiAgICAoMHgxRjJCLCBcJ01cJywgXCdceGUxXHhiY1x4YTNcJyksXG4gICAgKDB4MUYyQywgXCdNXCcsIFwnXHhlMVx4YmNceGE0XCcpLFxuICAgICgweDFGMkQsIFwnTVwnLCBcJ1x4ZTFceGJjXHhhNVwnKSxcbiAgICAoMHgxRjJFLCBcJ01cJywgXCdceGUxXHhiY1x4YTZcJyksXG4gICAgKDB4MUYyRiwgXCdNXCcsIFwnXHhlMVx4YmNceGE3XCcpLFxuICAgICgweDFGMzAsIFwnVlwnKSxcbiAgICAoMHgxRjM4LCBcJ01cJywgXCdceGUxXHhiY1x4YjBcJyksXG4gICAgKDB4MUYzOSwgXCdNXCcsIFwnXHhlMVx4YmNceGIxXCcpLFxuICAgICgweDFGM0EsIFwnTVwnLCBcJ1x4ZTFceGJjXHhiMlwnKSxcbiAgICAoMHgxRjNCLCBcJ01cJywgXCdceGUxXHhiY1x4YjNcJyksXG4gICAgKDB4MUYzQywgXCdNXCcsIFwnXHhlMVx4YmNceGI0XCcpLFxuICAgICgweDFGM0QsIFwnTVwnLCBcJ1x4ZTFceGJjXHhiNVwnKSxcbiAgICAoMHgxRjNFLCBcJ01cJywgXCdceGUxXHhiY1x4YjZcJyksXG4gICAgKDB4MUYzRiwgXCdNXCcsIFwnXHhlMVx4YmNceGI3XCcpLFxuICAgICgweDFGNDAsIFwnVlwnKSxcbiAgICAoMHgxRjQ2LCBcJ1hcJyksXG4gICAgKDB4MUY0OCwgXCdNXCcsIFwnXHhlMVx4YmRceDgwXCcpLFxuICAgICgweDFGNDksIFwnTVwnLCBcJ1x4ZTFceGJkXHg4MVwnKSxcbiAgICAoMHgxRjRBLCBcJ01cJywgXCdceGUxXHhiZFx4ODJcJyksXG4gICAgKDB4MUY0QiwgXCdNXCcsIFwnXHhlMVx4YmRceDgzXCcpLFxuICAgICgweDFGNEMsIFwnTVwnLCBcJ1x4ZTFceGJkXHg4NFwnKSxcbiAgICAoMHgxRjRELCBcJ01cJywgXCdceGUxXHhiZFx4ODVcJyksXG4gICAgKDB4MUY0RSwgXCdYXCcpLFxuICAgICgweDFGNTAsIFwnVlwnKSxcbiAgICAoMHgxRjU4LCBcJ1hcJyksXG4gICAgKDB4MUY1OSwgXCdNXCcsIFwnXHhlMVx4YmRceDkxXCcpLFxuICAgICgweDFGNUEsIFwnWFwnKSxcbiAgICAoMHgxRjVCLCBcJ01cJywgXCdceGUxXHhiZFx4OTNcJyksXG4gICAgKDB4MUY1QywgXCdYXCcpLFxuICAgICgweDFGNUQsIFwnTVwnLCBcJ1x4ZTFceGJkXHg5NVwnKSxcbiAgICAoMHgxRjVFLCBcJ1hcJyksXG4gICAgKDB4MUY1RiwgXCdNXCcsIFwnXHhlMVx4YmRceDk3XCcpLFxuICAgICgweDFGNjAsIFwnVlwnKSxcbiAgICAoMHgxRjY4LCBcJ01cJywgXCdceGUxXHhiZFx4YTBcJyksXG4gICAgKDB4MUY2OSwgXCdNXCcsIFwnXHhlMVx4YmRceGExXCcpLFxuICAgICgweDFGNkEsIFwnTVwnLCBcJ1x4ZTFceGJkXHhhMlwnKSxcbiAgICAoMHgxRjZCLCBcJ01cJywgXCdceGUxXHhiZFx4YTNcJyksXG4gICAgKDB4MUY2QywgXCdNXCcsIFwnXHhlMVx4YmRceGE0XCcpLFxuICAgICgweDFGNkQsIFwnTVwnLCBcJ1x4ZTFceGJkXHhhNVwnKSxcbiAgICAoMHgxRjZFLCBcJ01cJywgXCdceGUxXHhiZFx4YTZcJyksXG4gICAgKDB4MUY2RiwgXCdNXCcsIFwnXHhlMVx4YmRceGE3XCcpLFxuICAgICgweDFGNzAsIFwnVlwnKSxcbiAgICAoMHgxRjcxLCBcJ01cJywgXCdceGNlXHhhY1wnKSxcbiAgICAoMHgxRjcyLCBcJ1ZcJyksXG4gICAgKDB4MUY3MywgXCdNXCcsIFwnXHhjZVx4YWRcJyksXG4gICAgKDB4MUY3NCwgXCdWXCcpLFxuICAgICgweDFGNzUsIFwnTVwnLCBcJ1x4Y2VceGFlXCcpLFxuICAgICgweDFGNzYsIFwnVlwnKSxcbiAgICAoMHgxRjc3LCBcJ01cJywgXCdceGNlXHhhZlwnKSxcbiAgICAoMHgxRjc4LCBcJ1ZcJyksXG4gICAgKDB4MUY3OSwgXCdNXCcsIFwnXHhjZlx4OGNcJyksXG4gICAgKDB4MUY3QSwgXCdWXCcpLFxuICAgICgweDFGN0IsIFwnTVwnLCBcJ1x4Y2ZceDhkXCcpLFxuICAgICgweDFGN0MsIFwnVlwnKSxcbiAgICAoMHgxRjdELCBcJ01cJywgXCdceGNmXHg4ZVwnKSxcbiAgICAoMHgxRjdFLCBcJ1hcJyksXG4gICAgKDB4MUY4MCwgXCdNXCcsIFwnXHhlMVx4YmNceDgwXHhjZVx4YjlcJyksXG4gICAgKDB4MUY4MSwgXCdNXCcsIFwnXHhlMVx4YmNceDgxXHhjZVx4YjlcJyksXG4gICAgKDB4MUY4MiwgXCdNXCcsIFwnXHhlMVx4YmNceDgyXHhjZVx4YjlcJyksXG4gICAgKDB4MUY4MywgXCdNXCcsIFwnXHhlMVx4YmNceDgzXHhjZVx4YjlcJyksXG4gICAgKDB4MUY4NCwgXCdNXCcsIFwnXHhlMVx4YmNceDg0XHhjZVx4YjlcJyksXG4gICAgKDB4MUY4NSwgXCdNXCcsIFwnXHhlMVx4YmNceDg1XHhjZVx4YjlcJyksXG4gICAgKDB4MUY4NiwgXCdNXCcsIFwnXHhlMVx4YmNceDg2XHhjZVx4YjlcJyksXG4gICAgKDB4MUY4NywgXCdNXCcsIFwnXHhlMVx4YmNceDg3XHhjZVx4YjlcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18yMCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUY4OCwgXCdNXCcsIFwnXHhlMVx4YmNceDgwXHhjZVx4YjlcJyksXG4gICAgKDB4MUY4OSwgXCdNXCcsIFwnXHhlMVx4YmNceDgxXHhjZVx4YjlcJyksXG4gICAgKDB4MUY4QSwgXCdNXCcsIFwnXHhlMVx4YmNceDgyXHhjZVx4YjlcJyksXG4gICAgKDB4MUY4QiwgXCdNXCcsIFwnXHhlMVx4YmNceDgzXHhjZVx4YjlcJyksXG4gICAgKDB4MUY4QywgXCdNXCcsIFwnXHhlMVx4YmNceDg0XHhjZVx4YjlcJyksXG4gICAgKDB4MUY4RCwgXCdNXCcsIFwnXHhlMVx4YmNceDg1XHhjZVx4YjlcJyksXG4gICAgKDB4MUY4RSwgXCdNXCcsIFwnXHhlMVx4YmNceDg2XHhjZVx4YjlcJyksXG4gICAgKDB4MUY4RiwgXCdNXCcsIFwnXHhlMVx4YmNceDg3XHhjZVx4YjlcJyksXG4gICAgKDB4MUY5MCwgXCdNXCcsIFwnXHhlMVx4YmNceGEwXHhjZVx4YjlcJyksXG4gICAgKDB4MUY5MSwgXCdNXCcsIFwnXHhlMVx4YmNceGExXHhjZVx4YjlcJyksXG4gICAgKDB4MUY5MiwgXCdNXCcsIFwnXHhlMVx4YmNceGEyXHhjZVx4YjlcJyksXG4gICAgKDB4MUY5MywgXCdNXCcsIFwnXHhlMVx4YmNceGEzXHhjZVx4YjlcJyksXG4gICAgKDB4MUY5NCwgXCdNXCcsIFwnXHhlMVx4YmNceGE0XHhjZVx4YjlcJyksXG4gICAgKDB4MUY5NSwgXCdNXCcsIFwnXHhlMVx4YmNceGE1XHhjZVx4YjlcJyksXG4gICAgKDB4MUY5NiwgXCdNXCcsIFwnXHhlMVx4YmNceGE2XHhjZVx4YjlcJyksXG4gICAgKDB4MUY5NywgXCdNXCcsIFwnXHhlMVx4YmNceGE3XHhjZVx4YjlcJyksXG4gICAgKDB4MUY5OCwgXCdNXCcsIFwnXHhlMVx4YmNceGEwXHhjZVx4YjlcJyksXG4gICAgKDB4MUY5OSwgXCdNXCcsIFwnXHhlMVx4YmNceGExXHhjZVx4YjlcJyksXG4gICAgKDB4MUY5QSwgXCdNXCcsIFwnXHhlMVx4YmNceGEyXHhjZVx4YjlcJyksXG4gICAgKDB4MUY5QiwgXCdNXCcsIFwnXHhlMVx4YmNceGEzXHhjZVx4YjlcJyksXG4gICAgKDB4MUY5QywgXCdNXCcsIFwnXHhlMVx4YmNceGE0XHhjZVx4YjlcJyksXG4gICAgKDB4MUY5RCwgXCdNXCcsIFwnXHhlMVx4YmNceGE1XHhjZVx4YjlcJyksXG4gICAgKDB4MUY5RSwgXCdNXCcsIFwnXHhlMVx4YmNceGE2XHhjZVx4YjlcJyksXG4gICAgKDB4MUY5RiwgXCdNXCcsIFwnXHhlMVx4YmNceGE3XHhjZVx4YjlcJyksXG4gICAgKDB4MUZBMCwgXCdNXCcsIFwnXHhlMVx4YmRceGEwXHhjZVx4YjlcJyksXG4gICAgKDB4MUZBMSwgXCdNXCcsIFwnXHhlMVx4YmRceGExXHhjZVx4YjlcJyksXG4gICAgKDB4MUZBMiwgXCdNXCcsIFwnXHhlMVx4YmRceGEyXHhjZVx4YjlcJyksXG4gICAgKDB4MUZBMywgXCdNXCcsIFwnXHhlMVx4YmRceGEzXHhjZVx4YjlcJyksXG4gICAgKDB4MUZBNCwgXCdNXCcsIFwnXHhlMVx4YmRceGE0XHhjZVx4YjlcJyksXG4gICAgKDB4MUZBNSwgXCdNXCcsIFwnXHhlMVx4YmRceGE1XHhjZVx4YjlcJyksXG4gICAgKDB4MUZBNiwgXCdNXCcsIFwnXHhlMVx4YmRceGE2XHhjZVx4YjlcJyksXG4gICAgKDB4MUZBNywgXCdNXCcsIFwnXHhlMVx4YmRceGE3XHhjZVx4YjlcJyksXG4gICAgKDB4MUZBOCwgXCdNXCcsIFwnXHhlMVx4YmRceGEwXHhjZVx4YjlcJyksXG4gICAgKDB4MUZBOSwgXCdNXCcsIFwnXHhlMVx4YmRceGExXHhjZVx4YjlcJyksXG4gICAgKDB4MUZBQSwgXCdNXCcsIFwnXHhlMVx4YmRceGEyXHhjZVx4YjlcJyksXG4gICAgKDB4MUZBQiwgXCdNXCcsIFwnXHhlMVx4YmRceGEzXHhjZVx4YjlcJyksXG4gICAgKDB4MUZBQywgXCdNXCcsIFwnXHhlMVx4YmRceGE0XHhjZVx4YjlcJyksXG4gICAgKDB4MUZBRCwgXCdNXCcsIFwnXHhlMVx4YmRceGE1XHhjZVx4YjlcJyksXG4gICAgKDB4MUZBRSwgXCdNXCcsIFwnXHhlMVx4YmRceGE2XHhjZVx4YjlcJyksXG4gICAgKDB4MUZBRiwgXCdNXCcsIFwnXHhlMVx4YmRceGE3XHhjZVx4YjlcJyksXG4gICAgKDB4MUZCMCwgXCdWXCcpLFxuICAgICgweDFGQjIsIFwnTVwnLCBcJ1x4ZTFceGJkXHhiMFx4Y2VceGI5XCcpLFxuICAgICgweDFGQjMsIFwnTVwnLCBcJ1x4Y2VceGIxXHhjZVx4YjlcJyksXG4gICAgKDB4MUZCNCwgXCdNXCcsIFwnXHhjZVx4YWNceGNlXHhiOVwnKSxcbiAgICAoMHgxRkI1LCBcJ1hcJyksXG4gICAgKDB4MUZCNiwgXCdWXCcpLFxuICAgICgweDFGQjcsIFwnTVwnLCBcJ1x4ZTFceGJlXHhiNlx4Y2VceGI5XCcpLFxuICAgICgweDFGQjgsIFwnTVwnLCBcJ1x4ZTFceGJlXHhiMFwnKSxcbiAgICAoMHgxRkI5LCBcJ01cJywgXCdceGUxXHhiZVx4YjFcJyksXG4gICAgKDB4MUZCQSwgXCdNXCcsIFwnXHhlMVx4YmRceGIwXCcpLFxuICAgICgweDFGQkIsIFwnTVwnLCBcJ1x4Y2VceGFjXCcpLFxuICAgICgweDFGQkMsIFwnTVwnLCBcJ1x4Y2VceGIxXHhjZVx4YjlcJyksXG4gICAgKDB4MUZCRCwgXCczXCcsIFwnIFx4Y2NceDkzXCcpLFxuICAgICgweDFGQkUsIFwnTVwnLCBcJ1x4Y2VceGI5XCcpLFxuICAgICgweDFGQkYsIFwnM1wnLCBcJyBceGNjXHg5M1wnKSxcbiAgICAoMHgxRkMwLCBcJzNcJywgXCcgXHhjZFx4ODJcJyksXG4gICAgKDB4MUZDMSwgXCczXCcsIFwnIFx4Y2NceDg4XHhjZFx4ODJcJyksXG4gICAgKDB4MUZDMiwgXCdNXCcsIFwnXHhlMVx4YmRceGI0XHhjZVx4YjlcJyksXG4gICAgKDB4MUZDMywgXCdNXCcsIFwnXHhjZVx4YjdceGNlXHhiOVwnKSxcbiAgICAoMHgxRkM0LCBcJ01cJywgXCdceGNlXHhhZVx4Y2VceGI5XCcpLFxuICAgICgweDFGQzUsIFwnWFwnKSxcbiAgICAoMHgxRkM2LCBcJ1ZcJyksXG4gICAgKDB4MUZDNywgXCdNXCcsIFwnXHhlMVx4YmZceDg2XHhjZVx4YjlcJyksXG4gICAgKDB4MUZDOCwgXCdNXCcsIFwnXHhlMVx4YmRceGIyXCcpLFxuICAgICgweDFGQzksIFwnTVwnLCBcJ1x4Y2VceGFkXCcpLFxuICAgICgweDFGQ0EsIFwnTVwnLCBcJ1x4ZTFceGJkXHhiNFwnKSxcbiAgICAoMHgxRkNCLCBcJ01cJywgXCdceGNlXHhhZVwnKSxcbiAgICAoMHgxRkNDLCBcJ01cJywgXCdceGNlXHhiN1x4Y2VceGI5XCcpLFxuICAgICgweDFGQ0QsIFwnM1wnLCBcJyBceGNjXHg5M1x4Y2NceDgwXCcpLFxuICAgICgweDFGQ0UsIFwnM1wnLCBcJyBceGNjXHg5M1x4Y2NceDgxXCcpLFxuICAgICgweDFGQ0YsIFwnM1wnLCBcJyBceGNjXHg5M1x4Y2RceDgyXCcpLFxuICAgICgweDFGRDAsIFwnVlwnKSxcbiAgICAoMHgxRkQzLCBcJ01cJywgXCdceGNlXHg5MFwnKSxcbiAgICAoMHgxRkQ0LCBcJ1hcJyksXG4gICAgKDB4MUZENiwgXCdWXCcpLFxuICAgICgweDFGRDgsIFwnTVwnLCBcJ1x4ZTFceGJmXHg5MFwnKSxcbiAgICAoMHgxRkQ5LCBcJ01cJywgXCdceGUxXHhiZlx4OTFcJyksXG4gICAgKDB4MUZEQSwgXCdNXCcsIFwnXHhlMVx4YmRceGI2XCcpLFxuICAgICgweDFGREIsIFwnTVwnLCBcJ1x4Y2VceGFmXCcpLFxuICAgICgweDFGREMsIFwnWFwnKSxcbiAgICAoMHgxRkRELCBcJzNcJywgXCcgXHhjY1x4OTRceGNjXHg4MFwnKSxcbiAgICAoMHgxRkRFLCBcJzNcJywgXCcgXHhjY1x4OTRceGNjXHg4MVwnKSxcbiAgICAoMHgxRkRGLCBcJzNcJywgXCcgXHhjY1x4OTRceGNkXHg4MlwnKSxcbiAgICAoMHgxRkUwLCBcJ1ZcJyksXG4gICAgKDB4MUZFMywgXCdNXCcsIFwnXHhjZVx4YjBcJyksXG4gICAgKDB4MUZFNCwgXCdWXCcpLFxuICAgICgweDFGRTgsIFwnTVwnLCBcJ1x4ZTFceGJmXHhhMFwnKSxcbiAgICAoMHgxRkU5LCBcJ01cJywgXCdceGUxXHhiZlx4YTFcJyksXG4gICAgKDB4MUZFQSwgXCdNXCcsIFwnXHhlMVx4YmRceGJhXCcpLFxuICAgICgweDFGRUIsIFwnTVwnLCBcJ1x4Y2ZceDhkXCcpLFxuICAgICgweDFGRUMsIFwnTVwnLCBcJ1x4ZTFceGJmXHhhNVwnKSxcbiAgICAoMHgxRkVELCBcJzNcJywgXCcgXHhjY1x4ODhceGNjXHg4MFwnKSxcbiAgICAoMHgxRkVFLCBcJzNcJywgXCcgXHhjY1x4ODhceGNjXHg4MVwnKSxcbiAgICAoMHgxRkVGLCBcJzNcJywgXCdgXCcpLFxuICAgICgweDFGRjAsIFwnWFwnKSxcbiAgICAoMHgxRkYyLCBcJ01cJywgXCdceGUxXHhiZFx4YmNceGNlXHhiOVwnKSxcbiAgICAoMHgxRkYzLCBcJ01cJywgXCdceGNmXHg4OVx4Y2VceGI5XCcpLFxuICAgICgweDFGRjQsIFwnTVwnLCBcJ1x4Y2ZceDhlXHhjZVx4YjlcJyksXG4gICAgKDB4MUZGNSwgXCdYXCcpLFxuICAgICgweDFGRjYsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzIxKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRkY3LCBcJ01cJywgXCdceGUxXHhiZlx4YjZceGNlXHhiOVwnKSxcbiAgICAoMHgxRkY4LCBcJ01cJywgXCdceGUxXHhiZFx4YjhcJyksXG4gICAgKDB4MUZGOSwgXCdNXCcsIFwnXHhjZlx4OGNcJyksXG4gICAgKDB4MUZGQSwgXCdNXCcsIFwnXHhlMVx4YmRceGJjXCcpLFxuICAgICgweDFGRkIsIFwnTVwnLCBcJ1x4Y2ZceDhlXCcpLFxuICAgICgweDFGRkMsIFwnTVwnLCBcJ1x4Y2ZceDg5XHhjZVx4YjlcJyksXG4gICAgKDB4MUZGRCwgXCczXCcsIFwnIFx4Y2NceDgxXCcpLFxuICAgICgweDFGRkUsIFwnM1wnLCBcJyBceGNjXHg5NFwnKSxcbiAgICAoMHgxRkZGLCBcJ1hcJyksXG4gICAgKDB4MjAwMCwgXCczXCcsIFwnIFwnKSxcbiAgICAoMHgyMDBCLCBcJ0lcJyksXG4gICAgKDB4MjAwQywgXCdEXCcsIFwnXCcpLFxuICAgICgweDIwMEUsIFwnWFwnKSxcbiAgICAoMHgyMDEwLCBcJ1ZcJyksXG4gICAgKDB4MjAxMSwgXCdNXCcsIFwnXHhlMlx4ODBceDkwXCcpLFxuICAgICgweDIwMTIsIFwnVlwnKSxcbiAgICAoMHgyMDE3LCBcJzNcJywgXCcgXHhjY1x4YjNcJyksXG4gICAgKDB4MjAxOCwgXCdWXCcpLFxuICAgICgweDIwMjQsIFwnWFwnKSxcbiAgICAoMHgyMDI3LCBcJ1ZcJyksXG4gICAgKDB4MjAyOCwgXCdYXCcpLFxuICAgICgweDIwMkYsIFwnM1wnLCBcJyBcJyksXG4gICAgKDB4MjAzMCwgXCdWXCcpLFxuICAgICgweDIwMzMsIFwnTVwnLCBcJ1x4ZTJceDgwXHhiMlx4ZTJceDgwXHhiMlwnKSxcbiAgICAoMHgyMDM0LCBcJ01cJywgXCdceGUyXHg4MFx4YjJceGUyXHg4MFx4YjJceGUyXHg4MFx4YjJcJyksXG4gICAgKDB4MjAzNSwgXCdWXCcpLFxuICAgICgweDIwMzYsIFwnTVwnLCBcJ1x4ZTJceDgwXHhiNVx4ZTJceDgwXHhiNVwnKSxcbiAgICAoMHgyMDM3LCBcJ01cJywgXCdceGUyXHg4MFx4YjVceGUyXHg4MFx4YjVceGUyXHg4MFx4YjVcJyksXG4gICAgKDB4MjAzOCwgXCdWXCcpLFxuICAgICgweDIwM0MsIFwnM1wnLCBcJyEhXCcpLFxuICAgICgweDIwM0QsIFwnVlwnKSxcbiAgICAoMHgyMDNFLCBcJzNcJywgXCcgXHhjY1x4ODVcJyksXG4gICAgKDB4MjAzRiwgXCdWXCcpLFxuICAgICgweDIwNDcsIFwnM1wnLCBcJz8/XCcpLFxuICAgICgweDIwNDgsIFwnM1wnLCBcJz8hXCcpLFxuICAgICgweDIwNDksIFwnM1wnLCBcJyE/XCcpLFxuICAgICgweDIwNEEsIFwnVlwnKSxcbiAgICAoMHgyMDU3LCBcJ01cJywgXCdceGUyXHg4MFx4YjJceGUyXHg4MFx4YjJceGUyXHg4MFx4YjJceGUyXHg4MFx4YjJcJyksXG4gICAgKDB4MjA1OCwgXCdWXCcpLFxuICAgICgweDIwNUYsIFwnM1wnLCBcJyBcJyksXG4gICAgKDB4MjA2MCwgXCdJXCcpLFxuICAgICgweDIwNjEsIFwnWFwnKSxcbiAgICAoMHgyMDY0LCBcJ0lcJyksXG4gICAgKDB4MjA2NSwgXCdYXCcpLFxuICAgICgweDIwNzAsIFwnTVwnLCBcJzBcJyksXG4gICAgKDB4MjA3MSwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHgyMDcyLCBcJ1hcJyksXG4gICAgKDB4MjA3NCwgXCdNXCcsIFwnNFwnKSxcbiAgICAoMHgyMDc1LCBcJ01cJywgXCc1XCcpLFxuICAgICgweDIwNzYsIFwnTVwnLCBcJzZcJyksXG4gICAgKDB4MjA3NywgXCdNXCcsIFwnN1wnKSxcbiAgICAoMHgyMDc4LCBcJ01cJywgXCc4XCcpLFxuICAgICgweDIwNzksIFwnTVwnLCBcJzlcJyksXG4gICAgKDB4MjA3QSwgXCczXCcsIFwnK1wnKSxcbiAgICAoMHgyMDdCLCBcJ01cJywgXCdceGUyXHg4OFx4OTJcJyksXG4gICAgKDB4MjA3QywgXCczXCcsIFwnPVwnKSxcbiAgICAoMHgyMDdELCBcJzNcJywgXCcoXCcpLFxuICAgICgweDIwN0UsIFwnM1wnLCBcJylcJyksXG4gICAgKDB4MjA3RiwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHgyMDgwLCBcJ01cJywgXCcwXCcpLFxuICAgICgweDIwODEsIFwnTVwnLCBcJzFcJyksXG4gICAgKDB4MjA4MiwgXCdNXCcsIFwnMlwnKSxcbiAgICAoMHgyMDgzLCBcJ01cJywgXCczXCcpLFxuICAgICgweDIwODQsIFwnTVwnLCBcJzRcJyksXG4gICAgKDB4MjA4NSwgXCdNXCcsIFwnNVwnKSxcbiAgICAoMHgyMDg2LCBcJ01cJywgXCc2XCcpLFxuICAgICgweDIwODcsIFwnTVwnLCBcJzdcJyksXG4gICAgKDB4MjA4OCwgXCdNXCcsIFwnOFwnKSxcbiAgICAoMHgyMDg5LCBcJ01cJywgXCc5XCcpLFxuICAgICgweDIwOEEsIFwnM1wnLCBcJytcJyksXG4gICAgKDB4MjA4QiwgXCdNXCcsIFwnXHhlMlx4ODhceDkyXCcpLFxuICAgICgweDIwOEMsIFwnM1wnLCBcJz1cJyksXG4gICAgKDB4MjA4RCwgXCczXCcsIFwnKFwnKSxcbiAgICAoMHgyMDhFLCBcJzNcJywgXCcpXCcpLFxuICAgICgweDIwOEYsIFwnWFwnKSxcbiAgICAoMHgyMDkwLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDIwOTEsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MjA5MiwgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHgyMDkzLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDIwOTQsIFwnTVwnLCBcJ1x4YzlceDk5XCcpLFxuICAgICgweDIwOTUsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MjA5NiwgXCdNXCcsIFwna1wnKSxcbiAgICAoMHgyMDk3LCBcJ01cJywgXCdsXCcpLFxuICAgICgweDIwOTgsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MjA5OSwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHgyMDlBLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDIwOUIsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MjA5QywgXCdNXCcsIFwndFwnKSxcbiAgICAoMHgyMDlELCBcJ1hcJyksXG4gICAgKDB4MjBBMCwgXCdWXCcpLFxuICAgICgweDIwQTgsIFwnTVwnLCBcJ3JzXCcpLFxuICAgICgweDIwQTksIFwnVlwnKSxcbiAgICAoMHgyMEMxLCBcJ1hcJyksXG4gICAgKDB4MjBEMCwgXCdWXCcpLFxuICAgICgweDIwRjEsIFwnWFwnKSxcbiAgICAoMHgyMTAwLCBcJzNcJywgXCdhL2NcJyksXG4gICAgKDB4MjEwMSwgXCczXCcsIFwnYS9zXCcpLFxuICAgICgweDIxMDIsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MjEwMywgXCdNXCcsIFwnXHhjMlx4YjBjXCcpLFxuICAgICgweDIxMDQsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzIyKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgyMTA1LCBcJzNcJywgXCdjL29cJyksXG4gICAgKDB4MjEwNiwgXCczXCcsIFwnYy91XCcpLFxuICAgICgweDIxMDcsIFwnTVwnLCBcJ1x4YzlceDliXCcpLFxuICAgICgweDIxMDgsIFwnVlwnKSxcbiAgICAoMHgyMTA5LCBcJ01cJywgXCdceGMyXHhiMGZcJyksXG4gICAgKDB4MjEwQSwgXCdNXCcsIFwnZ1wnKSxcbiAgICAoMHgyMTBCLCBcJ01cJywgXCdoXCcpLFxuICAgICgweDIxMEYsIFwnTVwnLCBcJ1x4YzRceGE3XCcpLFxuICAgICgweDIxMTAsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MjExMiwgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHgyMTE0LCBcJ1ZcJyksXG4gICAgKDB4MjExNSwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHgyMTE2LCBcJ01cJywgXCdub1wnKSxcbiAgICAoMHgyMTE3LCBcJ1ZcJyksXG4gICAgKDB4MjExOSwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHgyMTFBLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDIxMUIsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MjExRSwgXCdWXCcpLFxuICAgICgweDIxMjAsIFwnTVwnLCBcJ3NtXCcpLFxuICAgICgweDIxMjEsIFwnTVwnLCBcJ3RlbFwnKSxcbiAgICAoMHgyMTIyLCBcJ01cJywgXCd0bVwnKSxcbiAgICAoMHgyMTIzLCBcJ1ZcJyksXG4gICAgKDB4MjEyNCwgXCdNXCcsIFwnelwnKSxcbiAgICAoMHgyMTI1LCBcJ1ZcJyksXG4gICAgKDB4MjEyNiwgXCdNXCcsIFwnXHhjZlx4ODlcJyksXG4gICAgKDB4MjEyNywgXCdWXCcpLFxuICAgICgweDIxMjgsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MjEyOSwgXCdWXCcpLFxuICAgICgweDIxMkEsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MjEyQiwgXCdNXCcsIFwnXHhjM1x4YTVcJyksXG4gICAgKDB4MjEyQywgXCdNXCcsIFwnYlwnKSxcbiAgICAoMHgyMTJELCBcJ01cJywgXCdjXCcpLFxuICAgICgweDIxMkUsIFwnVlwnKSxcbiAgICAoMHgyMTJGLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDIxMzEsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MjEzMiwgXCdYXCcpLFxuICAgICgweDIxMzMsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MjEzNCwgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHgyMTM1LCBcJ01cJywgXCdceGQ3XHg5MFwnKSxcbiAgICAoMHgyMTM2LCBcJ01cJywgXCdceGQ3XHg5MVwnKSxcbiAgICAoMHgyMTM3LCBcJ01cJywgXCdceGQ3XHg5MlwnKSxcbiAgICAoMHgyMTM4LCBcJ01cJywgXCdceGQ3XHg5M1wnKSxcbiAgICAoMHgyMTM5LCBcJ01cJywgXCdpXCcpLFxuICAgICgweDIxM0EsIFwnVlwnKSxcbiAgICAoMHgyMTNCLCBcJ01cJywgXCdmYXhcJyksXG4gICAgKDB4MjEzQywgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4MjEzRCwgXCdNXCcsIFwnXHhjZVx4YjNcJyksXG4gICAgKDB4MjEzRiwgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4MjE0MCwgXCdNXCcsIFwnXHhlMlx4ODhceDkxXCcpLFxuICAgICgweDIxNDEsIFwnVlwnKSxcbiAgICAoMHgyMTQ1LCBcJ01cJywgXCdkXCcpLFxuICAgICgweDIxNDcsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MjE0OCwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHgyMTQ5LCBcJ01cJywgXCdqXCcpLFxuICAgICgweDIxNEEsIFwnVlwnKSxcbiAgICAoMHgyMTUwLCBcJ01cJywgXCcxXHhlMlx4ODFceDg0N1wnKSxcbiAgICAoMHgyMTUxLCBcJ01cJywgXCcxXHhlMlx4ODFceDg0OVwnKSxcbiAgICAoMHgyMTUyLCBcJ01cJywgXCcxXHhlMlx4ODFceDg0MTBcJyksXG4gICAgKDB4MjE1MywgXCdNXCcsIFwnMVx4ZTJceDgxXHg4NDNcJyksXG4gICAgKDB4MjE1NCwgXCdNXCcsIFwnMlx4ZTJceDgxXHg4NDNcJyksXG4gICAgKDB4MjE1NSwgXCdNXCcsIFwnMVx4ZTJceDgxXHg4NDVcJyksXG4gICAgKDB4MjE1NiwgXCdNXCcsIFwnMlx4ZTJceDgxXHg4NDVcJyksXG4gICAgKDB4MjE1NywgXCdNXCcsIFwnM1x4ZTJceDgxXHg4NDVcJyksXG4gICAgKDB4MjE1OCwgXCdNXCcsIFwnNFx4ZTJceDgxXHg4NDVcJyksXG4gICAgKDB4MjE1OSwgXCdNXCcsIFwnMVx4ZTJceDgxXHg4NDZcJyksXG4gICAgKDB4MjE1QSwgXCdNXCcsIFwnNVx4ZTJceDgxXHg4NDZcJyksXG4gICAgKDB4MjE1QiwgXCdNXCcsIFwnMVx4ZTJceDgxXHg4NDhcJyksXG4gICAgKDB4MjE1QywgXCdNXCcsIFwnM1x4ZTJceDgxXHg4NDhcJyksXG4gICAgKDB4MjE1RCwgXCdNXCcsIFwnNVx4ZTJceDgxXHg4NDhcJyksXG4gICAgKDB4MjE1RSwgXCdNXCcsIFwnN1x4ZTJceDgxXHg4NDhcJyksXG4gICAgKDB4MjE1RiwgXCdNXCcsIFwnMVx4ZTJceDgxXHg4NFwnKSxcbiAgICAoMHgyMTYwLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDIxNjEsIFwnTVwnLCBcJ2lpXCcpLFxuICAgICgweDIxNjIsIFwnTVwnLCBcJ2lpaVwnKSxcbiAgICAoMHgyMTYzLCBcJ01cJywgXCdpdlwnKSxcbiAgICAoMHgyMTY0LCBcJ01cJywgXCd2XCcpLFxuICAgICgweDIxNjUsIFwnTVwnLCBcJ3ZpXCcpLFxuICAgICgweDIxNjYsIFwnTVwnLCBcJ3ZpaVwnKSxcbiAgICAoMHgyMTY3LCBcJ01cJywgXCd2aWlpXCcpLFxuICAgICgweDIxNjgsIFwnTVwnLCBcJ2l4XCcpLFxuICAgICgweDIxNjksIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MjE2QSwgXCdNXCcsIFwneGlcJyksXG4gICAgKDB4MjE2QiwgXCdNXCcsIFwneGlpXCcpLFxuICAgICgweDIxNkMsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MjE2RCwgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHgyMTZFLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDIxNkYsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MjE3MCwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHgyMTcxLCBcJ01cJywgXCdpaVwnKSxcbiAgICAoMHgyMTcyLCBcJ01cJywgXCdpaWlcJyksXG4gICAgKDB4MjE3MywgXCdNXCcsIFwnaXZcJyksXG4gICAgKDB4MjE3NCwgXCdNXCcsIFwndlwnKSxcbiAgICAoMHgyMTc1LCBcJ01cJywgXCd2aVwnKSxcbiAgICAoMHgyMTc2LCBcJ01cJywgXCd2aWlcJyksXG4gICAgKDB4MjE3NywgXCdNXCcsIFwndmlpaVwnKSxcbiAgICAoMHgyMTc4LCBcJ01cJywgXCdpeFwnKSxcbiAgICAoMHgyMTc5LCBcJ01cJywgXCd4XCcpLFxuICAgICgweDIxN0EsIFwnTVwnLCBcJ3hpXCcpLFxuICAgICgweDIxN0IsIFwnTVwnLCBcJ3hpaVwnKSxcbiAgICAoMHgyMTdDLCBcJ01cJywgXCdsXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMjMoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDIxN0QsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MjE3RSwgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHgyMTdGLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDIxODAsIFwnVlwnKSxcbiAgICAoMHgyMTgzLCBcJ1hcJyksXG4gICAgKDB4MjE4NCwgXCdWXCcpLFxuICAgICgweDIxODksIFwnTVwnLCBcJzBceGUyXHg4MVx4ODQzXCcpLFxuICAgICgweDIxOEEsIFwnVlwnKSxcbiAgICAoMHgyMThDLCBcJ1hcJyksXG4gICAgKDB4MjE5MCwgXCdWXCcpLFxuICAgICgweDIyMkMsIFwnTVwnLCBcJ1x4ZTJceDg4XHhhYlx4ZTJceDg4XHhhYlwnKSxcbiAgICAoMHgyMjJELCBcJ01cJywgXCdceGUyXHg4OFx4YWJceGUyXHg4OFx4YWJceGUyXHg4OFx4YWJcJyksXG4gICAgKDB4MjIyRSwgXCdWXCcpLFxuICAgICgweDIyMkYsIFwnTVwnLCBcJ1x4ZTJceDg4XHhhZVx4ZTJceDg4XHhhZVwnKSxcbiAgICAoMHgyMjMwLCBcJ01cJywgXCdceGUyXHg4OFx4YWVceGUyXHg4OFx4YWVceGUyXHg4OFx4YWVcJyksXG4gICAgKDB4MjIzMSwgXCdWXCcpLFxuICAgICgweDIyNjAsIFwnM1wnKSxcbiAgICAoMHgyMjYxLCBcJ1ZcJyksXG4gICAgKDB4MjI2RSwgXCczXCcpLFxuICAgICgweDIyNzAsIFwnVlwnKSxcbiAgICAoMHgyMzI5LCBcJ01cJywgXCdceGUzXHg4MFx4ODhcJyksXG4gICAgKDB4MjMyQSwgXCdNXCcsIFwnXHhlM1x4ODBceDg5XCcpLFxuICAgICgweDIzMkIsIFwnVlwnKSxcbiAgICAoMHgyNDI3LCBcJ1hcJyksXG4gICAgKDB4MjQ0MCwgXCdWXCcpLFxuICAgICgweDI0NEIsIFwnWFwnKSxcbiAgICAoMHgyNDYwLCBcJ01cJywgXCcxXCcpLFxuICAgICgweDI0NjEsIFwnTVwnLCBcJzJcJyksXG4gICAgKDB4MjQ2MiwgXCdNXCcsIFwnM1wnKSxcbiAgICAoMHgyNDYzLCBcJ01cJywgXCc0XCcpLFxuICAgICgweDI0NjQsIFwnTVwnLCBcJzVcJyksXG4gICAgKDB4MjQ2NSwgXCdNXCcsIFwnNlwnKSxcbiAgICAoMHgyNDY2LCBcJ01cJywgXCc3XCcpLFxuICAgICgweDI0NjcsIFwnTVwnLCBcJzhcJyksXG4gICAgKDB4MjQ2OCwgXCdNXCcsIFwnOVwnKSxcbiAgICAoMHgyNDY5LCBcJ01cJywgXCcxMFwnKSxcbiAgICAoMHgyNDZBLCBcJ01cJywgXCcxMVwnKSxcbiAgICAoMHgyNDZCLCBcJ01cJywgXCcxMlwnKSxcbiAgICAoMHgyNDZDLCBcJ01cJywgXCcxM1wnKSxcbiAgICAoMHgyNDZELCBcJ01cJywgXCcxNFwnKSxcbiAgICAoMHgyNDZFLCBcJ01cJywgXCcxNVwnKSxcbiAgICAoMHgyNDZGLCBcJ01cJywgXCcxNlwnKSxcbiAgICAoMHgyNDcwLCBcJ01cJywgXCcxN1wnKSxcbiAgICAoMHgyNDcxLCBcJ01cJywgXCcxOFwnKSxcbiAgICAoMHgyNDcyLCBcJ01cJywgXCcxOVwnKSxcbiAgICAoMHgyNDczLCBcJ01cJywgXCcyMFwnKSxcbiAgICAoMHgyNDc0LCBcJzNcJywgXCcoMSlcJyksXG4gICAgKDB4MjQ3NSwgXCczXCcsIFwnKDIpXCcpLFxuICAgICgweDI0NzYsIFwnM1wnLCBcJygzKVwnKSxcbiAgICAoMHgyNDc3LCBcJzNcJywgXCcoNClcJyksXG4gICAgKDB4MjQ3OCwgXCczXCcsIFwnKDUpXCcpLFxuICAgICgweDI0NzksIFwnM1wnLCBcJyg2KVwnKSxcbiAgICAoMHgyNDdBLCBcJzNcJywgXCcoNylcJyksXG4gICAgKDB4MjQ3QiwgXCczXCcsIFwnKDgpXCcpLFxuICAgICgweDI0N0MsIFwnM1wnLCBcJyg5KVwnKSxcbiAgICAoMHgyNDdELCBcJzNcJywgXCcoMTApXCcpLFxuICAgICgweDI0N0UsIFwnM1wnLCBcJygxMSlcJyksXG4gICAgKDB4MjQ3RiwgXCczXCcsIFwnKDEyKVwnKSxcbiAgICAoMHgyNDgwLCBcJzNcJywgXCcoMTMpXCcpLFxuICAgICgweDI0ODEsIFwnM1wnLCBcJygxNClcJyksXG4gICAgKDB4MjQ4MiwgXCczXCcsIFwnKDE1KVwnKSxcbiAgICAoMHgyNDgzLCBcJzNcJywgXCcoMTYpXCcpLFxuICAgICgweDI0ODQsIFwnM1wnLCBcJygxNylcJyksXG4gICAgKDB4MjQ4NSwgXCczXCcsIFwnKDE4KVwnKSxcbiAgICAoMHgyNDg2LCBcJzNcJywgXCcoMTkpXCcpLFxuICAgICgweDI0ODcsIFwnM1wnLCBcJygyMClcJyksXG4gICAgKDB4MjQ4OCwgXCdYXCcpLFxuICAgICgweDI0OUMsIFwnM1wnLCBcJyhhKVwnKSxcbiAgICAoMHgyNDlELCBcJzNcJywgXCcoYilcJyksXG4gICAgKDB4MjQ5RSwgXCczXCcsIFwnKGMpXCcpLFxuICAgICgweDI0OUYsIFwnM1wnLCBcJyhkKVwnKSxcbiAgICAoMHgyNEEwLCBcJzNcJywgXCcoZSlcJyksXG4gICAgKDB4MjRBMSwgXCczXCcsIFwnKGYpXCcpLFxuICAgICgweDI0QTIsIFwnM1wnLCBcJyhnKVwnKSxcbiAgICAoMHgyNEEzLCBcJzNcJywgXCcoaClcJyksXG4gICAgKDB4MjRBNCwgXCczXCcsIFwnKGkpXCcpLFxuICAgICgweDI0QTUsIFwnM1wnLCBcJyhqKVwnKSxcbiAgICAoMHgyNEE2LCBcJzNcJywgXCcoaylcJyksXG4gICAgKDB4MjRBNywgXCczXCcsIFwnKGwpXCcpLFxuICAgICgweDI0QTgsIFwnM1wnLCBcJyhtKVwnKSxcbiAgICAoMHgyNEE5LCBcJzNcJywgXCcobilcJyksXG4gICAgKDB4MjRBQSwgXCczXCcsIFwnKG8pXCcpLFxuICAgICgweDI0QUIsIFwnM1wnLCBcJyhwKVwnKSxcbiAgICAoMHgyNEFDLCBcJzNcJywgXCcocSlcJyksXG4gICAgKDB4MjRBRCwgXCczXCcsIFwnKHIpXCcpLFxuICAgICgweDI0QUUsIFwnM1wnLCBcJyhzKVwnKSxcbiAgICAoMHgyNEFGLCBcJzNcJywgXCcodClcJyksXG4gICAgKDB4MjRCMCwgXCczXCcsIFwnKHUpXCcpLFxuICAgICgweDI0QjEsIFwnM1wnLCBcJyh2KVwnKSxcbiAgICAoMHgyNEIyLCBcJzNcJywgXCcodylcJyksXG4gICAgKDB4MjRCMywgXCczXCcsIFwnKHgpXCcpLFxuICAgICgweDI0QjQsIFwnM1wnLCBcJyh5KVwnKSxcbiAgICAoMHgyNEI1LCBcJzNcJywgXCcoeilcJyksXG4gICAgKDB4MjRCNiwgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHgyNEI3LCBcJ01cJywgXCdiXCcpLFxuICAgICgweDI0QjgsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MjRCOSwgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHgyNEJBLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDI0QkIsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MjRCQywgXCdNXCcsIFwnZ1wnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzI0KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgyNEJELCBcJ01cJywgXCdoXCcpLFxuICAgICgweDI0QkUsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MjRCRiwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgyNEMwLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDI0QzEsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MjRDMiwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgyNEMzLCBcJ01cJywgXCduXCcpLFxuICAgICgweDI0QzQsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MjRDNSwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHgyNEM2LCBcJ01cJywgXCdxXCcpLFxuICAgICgweDI0QzcsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MjRDOCwgXCdNXCcsIFwnc1wnKSxcbiAgICAoMHgyNEM5LCBcJ01cJywgXCd0XCcpLFxuICAgICgweDI0Q0EsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MjRDQiwgXCdNXCcsIFwndlwnKSxcbiAgICAoMHgyNENDLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDI0Q0QsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MjRDRSwgXCdNXCcsIFwneVwnKSxcbiAgICAoMHgyNENGLCBcJ01cJywgXCd6XCcpLFxuICAgICgweDI0RDAsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MjREMSwgXCdNXCcsIFwnYlwnKSxcbiAgICAoMHgyNEQyLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDI0RDMsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MjRENCwgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHgyNEQ1LCBcJ01cJywgXCdmXCcpLFxuICAgICgweDI0RDYsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MjRENywgXCdNXCcsIFwnaFwnKSxcbiAgICAoMHgyNEQ4LCBcJ01cJywgXCdpXCcpLFxuICAgICgweDI0RDksIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MjREQSwgXCdNXCcsIFwna1wnKSxcbiAgICAoMHgyNERCLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDI0REMsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MjRERCwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHgyNERFLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDI0REYsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MjRFMCwgXCdNXCcsIFwncVwnKSxcbiAgICAoMHgyNEUxLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDI0RTIsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MjRFMywgXCdNXCcsIFwndFwnKSxcbiAgICAoMHgyNEU0LCBcJ01cJywgXCd1XCcpLFxuICAgICgweDI0RTUsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MjRFNiwgXCdNXCcsIFwnd1wnKSxcbiAgICAoMHgyNEU3LCBcJ01cJywgXCd4XCcpLFxuICAgICgweDI0RTgsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MjRFOSwgXCdNXCcsIFwnelwnKSxcbiAgICAoMHgyNEVBLCBcJ01cJywgXCcwXCcpLFxuICAgICgweDI0RUIsIFwnVlwnKSxcbiAgICAoMHgyQTBDLCBcJ01cJywgXCdceGUyXHg4OFx4YWJceGUyXHg4OFx4YWJceGUyXHg4OFx4YWJceGUyXHg4OFx4YWJcJyksXG4gICAgKDB4MkEwRCwgXCdWXCcpLFxuICAgICgweDJBNzQsIFwnM1wnLCBcJzo6PVwnKSxcbiAgICAoMHgyQTc1LCBcJzNcJywgXCc9PVwnKSxcbiAgICAoMHgyQTc2LCBcJzNcJywgXCc9PT1cJyksXG4gICAgKDB4MkE3NywgXCdWXCcpLFxuICAgICgweDJBREMsIFwnTVwnLCBcJ1x4ZTJceGFiXHg5ZFx4Y2NceGI4XCcpLFxuICAgICgweDJBREQsIFwnVlwnKSxcbiAgICAoMHgyQjc0LCBcJ1hcJyksXG4gICAgKDB4MkI3NiwgXCdWXCcpLFxuICAgICgweDJCOTYsIFwnWFwnKSxcbiAgICAoMHgyQjk3LCBcJ1ZcJyksXG4gICAgKDB4MkMwMCwgXCdNXCcsIFwnXHhlMlx4YjBceGIwXCcpLFxuICAgICgweDJDMDEsIFwnTVwnLCBcJ1x4ZTJceGIwXHhiMVwnKSxcbiAgICAoMHgyQzAyLCBcJ01cJywgXCdceGUyXHhiMFx4YjJcJyksXG4gICAgKDB4MkMwMywgXCdNXCcsIFwnXHhlMlx4YjBceGIzXCcpLFxuICAgICgweDJDMDQsIFwnTVwnLCBcJ1x4ZTJceGIwXHhiNFwnKSxcbiAgICAoMHgyQzA1LCBcJ01cJywgXCdceGUyXHhiMFx4YjVcJyksXG4gICAgKDB4MkMwNiwgXCdNXCcsIFwnXHhlMlx4YjBceGI2XCcpLFxuICAgICgweDJDMDcsIFwnTVwnLCBcJ1x4ZTJceGIwXHhiN1wnKSxcbiAgICAoMHgyQzA4LCBcJ01cJywgXCdceGUyXHhiMFx4YjhcJyksXG4gICAgKDB4MkMwOSwgXCdNXCcsIFwnXHhlMlx4YjBceGI5XCcpLFxuICAgICgweDJDMEEsIFwnTVwnLCBcJ1x4ZTJceGIwXHhiYVwnKSxcbiAgICAoMHgyQzBCLCBcJ01cJywgXCdceGUyXHhiMFx4YmJcJyksXG4gICAgKDB4MkMwQywgXCdNXCcsIFwnXHhlMlx4YjBceGJjXCcpLFxuICAgICgweDJDMEQsIFwnTVwnLCBcJ1x4ZTJceGIwXHhiZFwnKSxcbiAgICAoMHgyQzBFLCBcJ01cJywgXCdceGUyXHhiMFx4YmVcJyksXG4gICAgKDB4MkMwRiwgXCdNXCcsIFwnXHhlMlx4YjBceGJmXCcpLFxuICAgICgweDJDMTAsIFwnTVwnLCBcJ1x4ZTJceGIxXHg4MFwnKSxcbiAgICAoMHgyQzExLCBcJ01cJywgXCdceGUyXHhiMVx4ODFcJyksXG4gICAgKDB4MkMxMiwgXCdNXCcsIFwnXHhlMlx4YjFceDgyXCcpLFxuICAgICgweDJDMTMsIFwnTVwnLCBcJ1x4ZTJceGIxXHg4M1wnKSxcbiAgICAoMHgyQzE0LCBcJ01cJywgXCdceGUyXHhiMVx4ODRcJyksXG4gICAgKDB4MkMxNSwgXCdNXCcsIFwnXHhlMlx4YjFceDg1XCcpLFxuICAgICgweDJDMTYsIFwnTVwnLCBcJ1x4ZTJceGIxXHg4NlwnKSxcbiAgICAoMHgyQzE3LCBcJ01cJywgXCdceGUyXHhiMVx4ODdcJyksXG4gICAgKDB4MkMxOCwgXCdNXCcsIFwnXHhlMlx4YjFceDg4XCcpLFxuICAgICgweDJDMTksIFwnTVwnLCBcJ1x4ZTJceGIxXHg4OVwnKSxcbiAgICAoMHgyQzFBLCBcJ01cJywgXCdceGUyXHhiMVx4OGFcJyksXG4gICAgKDB4MkMxQiwgXCdNXCcsIFwnXHhlMlx4YjFceDhiXCcpLFxuICAgICgweDJDMUMsIFwnTVwnLCBcJ1x4ZTJceGIxXHg4Y1wnKSxcbiAgICAoMHgyQzFELCBcJ01cJywgXCdceGUyXHhiMVx4OGRcJyksXG4gICAgKDB4MkMxRSwgXCdNXCcsIFwnXHhlMlx4YjFceDhlXCcpLFxuICAgICgweDJDMUYsIFwnTVwnLCBcJ1x4ZTJceGIxXHg4ZlwnKSxcbiAgICAoMHgyQzIwLCBcJ01cJywgXCdceGUyXHhiMVx4OTBcJyksXG4gICAgKDB4MkMyMSwgXCdNXCcsIFwnXHhlMlx4YjFceDkxXCcpLFxuICAgICgweDJDMjIsIFwnTVwnLCBcJ1x4ZTJceGIxXHg5MlwnKSxcbiAgICAoMHgyQzIzLCBcJ01cJywgXCdceGUyXHhiMVx4OTNcJyksXG4gICAgKDB4MkMyNCwgXCdNXCcsIFwnXHhlMlx4YjFceDk0XCcpLFxuICAgICgweDJDMjUsIFwnTVwnLCBcJ1x4ZTJceGIxXHg5NVwnKSxcbiAgICAoMHgyQzI2LCBcJ01cJywgXCdceGUyXHhiMVx4OTZcJyksXG4gICAgKDB4MkMyNywgXCdNXCcsIFwnXHhlMlx4YjFceDk3XCcpLFxuICAgICgweDJDMjgsIFwnTVwnLCBcJ1x4ZTJceGIxXHg5OFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzI1KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgyQzI5LCBcJ01cJywgXCdceGUyXHhiMVx4OTlcJyksXG4gICAgKDB4MkMyQSwgXCdNXCcsIFwnXHhlMlx4YjFceDlhXCcpLFxuICAgICgweDJDMkIsIFwnTVwnLCBcJ1x4ZTJceGIxXHg5YlwnKSxcbiAgICAoMHgyQzJDLCBcJ01cJywgXCdceGUyXHhiMVx4OWNcJyksXG4gICAgKDB4MkMyRCwgXCdNXCcsIFwnXHhlMlx4YjFceDlkXCcpLFxuICAgICgweDJDMkUsIFwnTVwnLCBcJ1x4ZTJceGIxXHg5ZVwnKSxcbiAgICAoMHgyQzJGLCBcJ01cJywgXCdceGUyXHhiMVx4OWZcJyksXG4gICAgKDB4MkMzMCwgXCdWXCcpLFxuICAgICgweDJDNjAsIFwnTVwnLCBcJ1x4ZTJceGIxXHhhMVwnKSxcbiAgICAoMHgyQzYxLCBcJ1ZcJyksXG4gICAgKDB4MkM2MiwgXCdNXCcsIFwnXHhjOVx4YWJcJyksXG4gICAgKDB4MkM2MywgXCdNXCcsIFwnXHhlMVx4YjVceGJkXCcpLFxuICAgICgweDJDNjQsIFwnTVwnLCBcJ1x4YzlceGJkXCcpLFxuICAgICgweDJDNjUsIFwnVlwnKSxcbiAgICAoMHgyQzY3LCBcJ01cJywgXCdceGUyXHhiMVx4YThcJyksXG4gICAgKDB4MkM2OCwgXCdWXCcpLFxuICAgICgweDJDNjksIFwnTVwnLCBcJ1x4ZTJceGIxXHhhYVwnKSxcbiAgICAoMHgyQzZBLCBcJ1ZcJyksXG4gICAgKDB4MkM2QiwgXCdNXCcsIFwnXHhlMlx4YjFceGFjXCcpLFxuICAgICgweDJDNkMsIFwnVlwnKSxcbiAgICAoMHgyQzZELCBcJ01cJywgXCdceGM5XHg5MVwnKSxcbiAgICAoMHgyQzZFLCBcJ01cJywgXCdceGM5XHhiMVwnKSxcbiAgICAoMHgyQzZGLCBcJ01cJywgXCdceGM5XHg5MFwnKSxcbiAgICAoMHgyQzcwLCBcJ01cJywgXCdceGM5XHg5MlwnKSxcbiAgICAoMHgyQzcxLCBcJ1ZcJyksXG4gICAgKDB4MkM3MiwgXCdNXCcsIFwnXHhlMlx4YjFceGIzXCcpLFxuICAgICgweDJDNzMsIFwnVlwnKSxcbiAgICAoMHgyQzc1LCBcJ01cJywgXCdceGUyXHhiMVx4YjZcJyksXG4gICAgKDB4MkM3NiwgXCdWXCcpLFxuICAgICgweDJDN0MsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MkM3RCwgXCdNXCcsIFwndlwnKSxcbiAgICAoMHgyQzdFLCBcJ01cJywgXCdceGM4XHhiZlwnKSxcbiAgICAoMHgyQzdGLCBcJ01cJywgXCdceGM5XHg4MFwnKSxcbiAgICAoMHgyQzgwLCBcJ01cJywgXCdceGUyXHhiMlx4ODFcJyksXG4gICAgKDB4MkM4MSwgXCdWXCcpLFxuICAgICgweDJDODIsIFwnTVwnLCBcJ1x4ZTJceGIyXHg4M1wnKSxcbiAgICAoMHgyQzgzLCBcJ1ZcJyksXG4gICAgKDB4MkM4NCwgXCdNXCcsIFwnXHhlMlx4YjJceDg1XCcpLFxuICAgICgweDJDODUsIFwnVlwnKSxcbiAgICAoMHgyQzg2LCBcJ01cJywgXCdceGUyXHhiMlx4ODdcJyksXG4gICAgKDB4MkM4NywgXCdWXCcpLFxuICAgICgweDJDODgsIFwnTVwnLCBcJ1x4ZTJceGIyXHg4OVwnKSxcbiAgICAoMHgyQzg5LCBcJ1ZcJyksXG4gICAgKDB4MkM4QSwgXCdNXCcsIFwnXHhlMlx4YjJceDhiXCcpLFxuICAgICgweDJDOEIsIFwnVlwnKSxcbiAgICAoMHgyQzhDLCBcJ01cJywgXCdceGUyXHhiMlx4OGRcJyksXG4gICAgKDB4MkM4RCwgXCdWXCcpLFxuICAgICgweDJDOEUsIFwnTVwnLCBcJ1x4ZTJceGIyXHg4ZlwnKSxcbiAgICAoMHgyQzhGLCBcJ1ZcJyksXG4gICAgKDB4MkM5MCwgXCdNXCcsIFwnXHhlMlx4YjJceDkxXCcpLFxuICAgICgweDJDOTEsIFwnVlwnKSxcbiAgICAoMHgyQzkyLCBcJ01cJywgXCdceGUyXHhiMlx4OTNcJyksXG4gICAgKDB4MkM5MywgXCdWXCcpLFxuICAgICgweDJDOTQsIFwnTVwnLCBcJ1x4ZTJceGIyXHg5NVwnKSxcbiAgICAoMHgyQzk1LCBcJ1ZcJyksXG4gICAgKDB4MkM5NiwgXCdNXCcsIFwnXHhlMlx4YjJceDk3XCcpLFxuICAgICgweDJDOTcsIFwnVlwnKSxcbiAgICAoMHgyQzk4LCBcJ01cJywgXCdceGUyXHhiMlx4OTlcJyksXG4gICAgKDB4MkM5OSwgXCdWXCcpLFxuICAgICgweDJDOUEsIFwnTVwnLCBcJ1x4ZTJceGIyXHg5YlwnKSxcbiAgICAoMHgyQzlCLCBcJ1ZcJyksXG4gICAgKDB4MkM5QywgXCdNXCcsIFwnXHhlMlx4YjJceDlkXCcpLFxuICAgICgweDJDOUQsIFwnVlwnKSxcbiAgICAoMHgyQzlFLCBcJ01cJywgXCdceGUyXHhiMlx4OWZcJyksXG4gICAgKDB4MkM5RiwgXCdWXCcpLFxuICAgICgweDJDQTAsIFwnTVwnLCBcJ1x4ZTJceGIyXHhhMVwnKSxcbiAgICAoMHgyQ0ExLCBcJ1ZcJyksXG4gICAgKDB4MkNBMiwgXCdNXCcsIFwnXHhlMlx4YjJceGEzXCcpLFxuICAgICgweDJDQTMsIFwnVlwnKSxcbiAgICAoMHgyQ0E0LCBcJ01cJywgXCdceGUyXHhiMlx4YTVcJyksXG4gICAgKDB4MkNBNSwgXCdWXCcpLFxuICAgICgweDJDQTYsIFwnTVwnLCBcJ1x4ZTJceGIyXHhhN1wnKSxcbiAgICAoMHgyQ0E3LCBcJ1ZcJyksXG4gICAgKDB4MkNBOCwgXCdNXCcsIFwnXHhlMlx4YjJceGE5XCcpLFxuICAgICgweDJDQTksIFwnVlwnKSxcbiAgICAoMHgyQ0FBLCBcJ01cJywgXCdceGUyXHhiMlx4YWJcJyksXG4gICAgKDB4MkNBQiwgXCdWXCcpLFxuICAgICgweDJDQUMsIFwnTVwnLCBcJ1x4ZTJceGIyXHhhZFwnKSxcbiAgICAoMHgyQ0FELCBcJ1ZcJyksXG4gICAgKDB4MkNBRSwgXCdNXCcsIFwnXHhlMlx4YjJceGFmXCcpLFxuICAgICgweDJDQUYsIFwnVlwnKSxcbiAgICAoMHgyQ0IwLCBcJ01cJywgXCdceGUyXHhiMlx4YjFcJyksXG4gICAgKDB4MkNCMSwgXCdWXCcpLFxuICAgICgweDJDQjIsIFwnTVwnLCBcJ1x4ZTJceGIyXHhiM1wnKSxcbiAgICAoMHgyQ0IzLCBcJ1ZcJyksXG4gICAgKDB4MkNCNCwgXCdNXCcsIFwnXHhlMlx4YjJceGI1XCcpLFxuICAgICgweDJDQjUsIFwnVlwnKSxcbiAgICAoMHgyQ0I2LCBcJ01cJywgXCdceGUyXHhiMlx4YjdcJyksXG4gICAgKDB4MkNCNywgXCdWXCcpLFxuICAgICgweDJDQjgsIFwnTVwnLCBcJ1x4ZTJceGIyXHhiOVwnKSxcbiAgICAoMHgyQ0I5LCBcJ1ZcJyksXG4gICAgKDB4MkNCQSwgXCdNXCcsIFwnXHhlMlx4YjJceGJiXCcpLFxuICAgICgweDJDQkIsIFwnVlwnKSxcbiAgICAoMHgyQ0JDLCBcJ01cJywgXCdceGUyXHhiMlx4YmRcJyksXG4gICAgKDB4MkNCRCwgXCdWXCcpLFxuICAgICgweDJDQkUsIFwnTVwnLCBcJ1x4ZTJceGIyXHhiZlwnKSxcbiAgICAoMHgyQ0JGLCBcJ1ZcJyksXG4gICAgKDB4MkNDMCwgXCdNXCcsIFwnXHhlMlx4YjNceDgxXCcpLFxuICAgICgweDJDQzEsIFwnVlwnKSxcbiAgICAoMHgyQ0MyLCBcJ01cJywgXCdceGUyXHhiM1x4ODNcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18yNigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MkNDMywgXCdWXCcpLFxuICAgICgweDJDQzQsIFwnTVwnLCBcJ1x4ZTJceGIzXHg4NVwnKSxcbiAgICAoMHgyQ0M1LCBcJ1ZcJyksXG4gICAgKDB4MkNDNiwgXCdNXCcsIFwnXHhlMlx4YjNceDg3XCcpLFxuICAgICgweDJDQzcsIFwnVlwnKSxcbiAgICAoMHgyQ0M4LCBcJ01cJywgXCdceGUyXHhiM1x4ODlcJyksXG4gICAgKDB4MkNDOSwgXCdWXCcpLFxuICAgICgweDJDQ0EsIFwnTVwnLCBcJ1x4ZTJceGIzXHg4YlwnKSxcbiAgICAoMHgyQ0NCLCBcJ1ZcJyksXG4gICAgKDB4MkNDQywgXCdNXCcsIFwnXHhlMlx4YjNceDhkXCcpLFxuICAgICgweDJDQ0QsIFwnVlwnKSxcbiAgICAoMHgyQ0NFLCBcJ01cJywgXCdceGUyXHhiM1x4OGZcJyksXG4gICAgKDB4MkNDRiwgXCdWXCcpLFxuICAgICgweDJDRDAsIFwnTVwnLCBcJ1x4ZTJceGIzXHg5MVwnKSxcbiAgICAoMHgyQ0QxLCBcJ1ZcJyksXG4gICAgKDB4MkNEMiwgXCdNXCcsIFwnXHhlMlx4YjNceDkzXCcpLFxuICAgICgweDJDRDMsIFwnVlwnKSxcbiAgICAoMHgyQ0Q0LCBcJ01cJywgXCdceGUyXHhiM1x4OTVcJyksXG4gICAgKDB4MkNENSwgXCdWXCcpLFxuICAgICgweDJDRDYsIFwnTVwnLCBcJ1x4ZTJceGIzXHg5N1wnKSxcbiAgICAoMHgyQ0Q3LCBcJ1ZcJyksXG4gICAgKDB4MkNEOCwgXCdNXCcsIFwnXHhlMlx4YjNceDk5XCcpLFxuICAgICgweDJDRDksIFwnVlwnKSxcbiAgICAoMHgyQ0RBLCBcJ01cJywgXCdceGUyXHhiM1x4OWJcJyksXG4gICAgKDB4MkNEQiwgXCdWXCcpLFxuICAgICgweDJDREMsIFwnTVwnLCBcJ1x4ZTJceGIzXHg5ZFwnKSxcbiAgICAoMHgyQ0RELCBcJ1ZcJyksXG4gICAgKDB4MkNERSwgXCdNXCcsIFwnXHhlMlx4YjNceDlmXCcpLFxuICAgICgweDJDREYsIFwnVlwnKSxcbiAgICAoMHgyQ0UwLCBcJ01cJywgXCdceGUyXHhiM1x4YTFcJyksXG4gICAgKDB4MkNFMSwgXCdWXCcpLFxuICAgICgweDJDRTIsIFwnTVwnLCBcJ1x4ZTJceGIzXHhhM1wnKSxcbiAgICAoMHgyQ0UzLCBcJ1ZcJyksXG4gICAgKDB4MkNFQiwgXCdNXCcsIFwnXHhlMlx4YjNceGFjXCcpLFxuICAgICgweDJDRUMsIFwnVlwnKSxcbiAgICAoMHgyQ0VELCBcJ01cJywgXCdceGUyXHhiM1x4YWVcJyksXG4gICAgKDB4MkNFRSwgXCdWXCcpLFxuICAgICgweDJDRjIsIFwnTVwnLCBcJ1x4ZTJceGIzXHhiM1wnKSxcbiAgICAoMHgyQ0YzLCBcJ1ZcJyksXG4gICAgKDB4MkNGNCwgXCdYXCcpLFxuICAgICgweDJDRjksIFwnVlwnKSxcbiAgICAoMHgyRDI2LCBcJ1hcJyksXG4gICAgKDB4MkQyNywgXCdWXCcpLFxuICAgICgweDJEMjgsIFwnWFwnKSxcbiAgICAoMHgyRDJELCBcJ1ZcJyksXG4gICAgKDB4MkQyRSwgXCdYXCcpLFxuICAgICgweDJEMzAsIFwnVlwnKSxcbiAgICAoMHgyRDY4LCBcJ1hcJyksXG4gICAgKDB4MkQ2RiwgXCdNXCcsIFwnXHhlMlx4YjVceGExXCcpLFxuICAgICgweDJENzAsIFwnVlwnKSxcbiAgICAoMHgyRDcxLCBcJ1hcJyksXG4gICAgKDB4MkQ3RiwgXCdWXCcpLFxuICAgICgweDJEOTcsIFwnWFwnKSxcbiAgICAoMHgyREEwLCBcJ1ZcJyksXG4gICAgKDB4MkRBNywgXCdYXCcpLFxuICAgICgweDJEQTgsIFwnVlwnKSxcbiAgICAoMHgyREFGLCBcJ1hcJyksXG4gICAgKDB4MkRCMCwgXCdWXCcpLFxuICAgICgweDJEQjcsIFwnWFwnKSxcbiAgICAoMHgyREI4LCBcJ1ZcJyksXG4gICAgKDB4MkRCRiwgXCdYXCcpLFxuICAgICgweDJEQzAsIFwnVlwnKSxcbiAgICAoMHgyREM3LCBcJ1hcJyksXG4gICAgKDB4MkRDOCwgXCdWXCcpLFxuICAgICgweDJEQ0YsIFwnWFwnKSxcbiAgICAoMHgyREQwLCBcJ1ZcJyksXG4gICAgKDB4MkRENywgXCdYXCcpLFxuICAgICgweDJERDgsIFwnVlwnKSxcbiAgICAoMHgyRERGLCBcJ1hcJyksXG4gICAgKDB4MkRFMCwgXCdWXCcpLFxuICAgICgweDJFNUUsIFwnWFwnKSxcbiAgICAoMHgyRTgwLCBcJ1ZcJyksXG4gICAgKDB4MkU5QSwgXCdYXCcpLFxuICAgICgweDJFOUIsIFwnVlwnKSxcbiAgICAoMHgyRTlGLCBcJ01cJywgXCdceGU2XHhhZlx4OGRcJyksXG4gICAgKDB4MkVBMCwgXCdWXCcpLFxuICAgICgweDJFRjMsIFwnTVwnLCBcJ1x4ZTlceGJlXHg5ZlwnKSxcbiAgICAoMHgyRUY0LCBcJ1hcJyksXG4gICAgKDB4MkYwMCwgXCdNXCcsIFwnXHhlNFx4YjhceDgwXCcpLFxuICAgICgweDJGMDEsIFwnTVwnLCBcJ1x4ZTRceGI4XHhhOFwnKSxcbiAgICAoMHgyRjAyLCBcJ01cJywgXCdceGU0XHhiOFx4YjZcJyksXG4gICAgKDB4MkYwMywgXCdNXCcsIFwnXHhlNFx4YjhceGJmXCcpLFxuICAgICgweDJGMDQsIFwnTVwnLCBcJ1x4ZTRceGI5XHg5OVwnKSxcbiAgICAoMHgyRjA1LCBcJ01cJywgXCdceGU0XHhiYVx4ODVcJyksXG4gICAgKDB4MkYwNiwgXCdNXCcsIFwnXHhlNFx4YmFceDhjXCcpLFxuICAgICgweDJGMDcsIFwnTVwnLCBcJ1x4ZTRceGJhXHhhMFwnKSxcbiAgICAoMHgyRjA4LCBcJ01cJywgXCdceGU0XHhiYVx4YmFcJyksXG4gICAgKDB4MkYwOSwgXCdNXCcsIFwnXHhlNVx4ODRceGJmXCcpLFxuICAgICgweDJGMEEsIFwnTVwnLCBcJ1x4ZTVceDg1XHhhNVwnKSxcbiAgICAoMHgyRjBCLCBcJ01cJywgXCdceGU1XHg4NVx4YWJcJyksXG4gICAgKDB4MkYwQywgXCdNXCcsIFwnXHhlNVx4ODZceDgyXCcpLFxuICAgICgweDJGMEQsIFwnTVwnLCBcJ1x4ZTVceDg2XHg5NlwnKSxcbiAgICAoMHgyRjBFLCBcJ01cJywgXCdceGU1XHg4Nlx4YWJcJyksXG4gICAgKDB4MkYwRiwgXCdNXCcsIFwnXHhlNVx4ODdceGEwXCcpLFxuICAgICgweDJGMTAsIFwnTVwnLCBcJ1x4ZTVceDg3XHhiNVwnKSxcbiAgICAoMHgyRjExLCBcJ01cJywgXCdceGU1XHg4OFx4ODBcJyksXG4gICAgKDB4MkYxMiwgXCdNXCcsIFwnXHhlNVx4OGFceDliXCcpLFxuICAgICgweDJGMTMsIFwnTVwnLCBcJ1x4ZTVceDhiXHhiOVwnKSxcbiAgICAoMHgyRjE0LCBcJ01cJywgXCdceGU1XHg4Y1x4OTVcJyksXG4gICAgKDB4MkYxNSwgXCdNXCcsIFwnXHhlNVx4OGNceDlhXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMjcoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDJGMTYsIFwnTVwnLCBcJ1x4ZTVceDhjXHhiOFwnKSxcbiAgICAoMHgyRjE3LCBcJ01cJywgXCdceGU1XHg4ZFx4ODFcJyksXG4gICAgKDB4MkYxOCwgXCdNXCcsIFwnXHhlNVx4OGRceDljXCcpLFxuICAgICgweDJGMTksIFwnTVwnLCBcJ1x4ZTVceDhkXHhhOVwnKSxcbiAgICAoMHgyRjFBLCBcJ01cJywgXCdceGU1XHg4ZVx4ODJcJyksXG4gICAgKDB4MkYxQiwgXCdNXCcsIFwnXHhlNVx4OGVceGI2XCcpLFxuICAgICgweDJGMUMsIFwnTVwnLCBcJ1x4ZTVceDhmXHg4OFwnKSxcbiAgICAoMHgyRjFELCBcJ01cJywgXCdceGU1XHg4Zlx4YTNcJyksXG4gICAgKDB4MkYxRSwgXCdNXCcsIFwnXHhlNVx4OWJceDk3XCcpLFxuICAgICgweDJGMUYsIFwnTVwnLCBcJ1x4ZTVceDljXHg5ZlwnKSxcbiAgICAoMHgyRjIwLCBcJ01cJywgXCdceGU1XHhhM1x4YWJcJyksXG4gICAgKDB4MkYyMSwgXCdNXCcsIFwnXHhlNVx4YTRceDgyXCcpLFxuICAgICgweDJGMjIsIFwnTVwnLCBcJ1x4ZTVceGE0XHg4YVwnKSxcbiAgICAoMHgyRjIzLCBcJ01cJywgXCdceGU1XHhhNFx4OTVcJyksXG4gICAgKDB4MkYyNCwgXCdNXCcsIFwnXHhlNVx4YTRceGE3XCcpLFxuICAgICgweDJGMjUsIFwnTVwnLCBcJ1x4ZTVceGE1XHhiM1wnKSxcbiAgICAoMHgyRjI2LCBcJ01cJywgXCdceGU1XHhhZFx4OTBcJyksXG4gICAgKDB4MkYyNywgXCdNXCcsIFwnXHhlNVx4YWVceDgwXCcpLFxuICAgICgweDJGMjgsIFwnTVwnLCBcJ1x4ZTVceGFmXHhiOFwnKSxcbiAgICAoMHgyRjI5LCBcJ01cJywgXCdceGU1XHhiMFx4OGZcJyksXG4gICAgKDB4MkYyQSwgXCdNXCcsIFwnXHhlNVx4YjBceGEyXCcpLFxuICAgICgweDJGMkIsIFwnTVwnLCBcJ1x4ZTVceGIwXHhiOFwnKSxcbiAgICAoMHgyRjJDLCBcJ01cJywgXCdceGU1XHhiMVx4YWVcJyksXG4gICAgKDB4MkYyRCwgXCdNXCcsIFwnXHhlNVx4YjFceGIxXCcpLFxuICAgICgweDJGMkUsIFwnTVwnLCBcJ1x4ZTVceGI3XHg5YlwnKSxcbiAgICAoMHgyRjJGLCBcJ01cJywgXCdceGU1XHhiN1x4YTVcJyksXG4gICAgKDB4MkYzMCwgXCdNXCcsIFwnXHhlNVx4YjdceGIxXCcpLFxuICAgICgweDJGMzEsIFwnTVwnLCBcJ1x4ZTVceGI3XHhiZVwnKSxcbiAgICAoMHgyRjMyLCBcJ01cJywgXCdceGU1XHhiOVx4YjJcJyksXG4gICAgKDB4MkYzMywgXCdNXCcsIFwnXHhlNVx4YjlceGJhXCcpLFxuICAgICgweDJGMzQsIFwnTVwnLCBcJ1x4ZTVceGI5XHhiZlwnKSxcbiAgICAoMHgyRjM1LCBcJ01cJywgXCdceGU1XHhiYlx4YjRcJyksXG4gICAgKDB4MkYzNiwgXCdNXCcsIFwnXHhlNVx4YmJceGJlXCcpLFxuICAgICgweDJGMzcsIFwnTVwnLCBcJ1x4ZTVceGJjXHg4YlwnKSxcbiAgICAoMHgyRjM4LCBcJ01cJywgXCdceGU1XHhiY1x4OTNcJyksXG4gICAgKDB4MkYzOSwgXCdNXCcsIFwnXHhlNVx4YmRceDkwXCcpLFxuICAgICgweDJGM0EsIFwnTVwnLCBcJ1x4ZTVceGJkXHhhMVwnKSxcbiAgICAoMHgyRjNCLCBcJ01cJywgXCdceGU1XHhiZFx4YjNcJyksXG4gICAgKDB4MkYzQywgXCdNXCcsIFwnXHhlNVx4YmZceDgzXCcpLFxuICAgICgweDJGM0QsIFwnTVwnLCBcJ1x4ZTZceDg4XHg4OFwnKSxcbiAgICAoMHgyRjNFLCBcJ01cJywgXCdceGU2XHg4OFx4YjZcJyksXG4gICAgKDB4MkYzRiwgXCdNXCcsIFwnXHhlNlx4ODlceDhiXCcpLFxuICAgICgweDJGNDAsIFwnTVwnLCBcJ1x4ZTZceDk0XHhhZlwnKSxcbiAgICAoMHgyRjQxLCBcJ01cJywgXCdceGU2XHg5NFx4YjRcJyksXG4gICAgKDB4MkY0MiwgXCdNXCcsIFwnXHhlNlx4OTZceDg3XCcpLFxuICAgICgweDJGNDMsIFwnTVwnLCBcJ1x4ZTZceDk2XHg5N1wnKSxcbiAgICAoMHgyRjQ0LCBcJ01cJywgXCdceGU2XHg5Nlx4YTRcJyksXG4gICAgKDB4MkY0NSwgXCdNXCcsIFwnXHhlNlx4OTZceGI5XCcpLFxuICAgICgweDJGNDYsIFwnTVwnLCBcJ1x4ZTZceDk3XHhhMFwnKSxcbiAgICAoMHgyRjQ3LCBcJ01cJywgXCdceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MkY0OCwgXCdNXCcsIFwnXHhlNlx4OWJceGIwXCcpLFxuICAgICgweDJGNDksIFwnTVwnLCBcJ1x4ZTZceDljXHg4OFwnKSxcbiAgICAoMHgyRjRBLCBcJ01cJywgXCdceGU2XHg5Y1x4YThcJyksXG4gICAgKDB4MkY0QiwgXCdNXCcsIFwnXHhlNlx4YWNceGEwXCcpLFxuICAgICgweDJGNEMsIFwnTVwnLCBcJ1x4ZTZceGFkXHhhMlwnKSxcbiAgICAoMHgyRjRELCBcJ01cJywgXCdceGU2XHhhZFx4YjlcJyksXG4gICAgKDB4MkY0RSwgXCdNXCcsIFwnXHhlNlx4YWVceGIzXCcpLFxuICAgICgweDJGNEYsIFwnTVwnLCBcJ1x4ZTZceGFmXHg4YlwnKSxcbiAgICAoMHgyRjUwLCBcJ01cJywgXCdceGU2XHhhZlx4OTRcJyksXG4gICAgKDB4MkY1MSwgXCdNXCcsIFwnXHhlNlx4YWZceDliXCcpLFxuICAgICgweDJGNTIsIFwnTVwnLCBcJ1x4ZTZceGIwXHg4ZlwnKSxcbiAgICAoMHgyRjUzLCBcJ01cJywgXCdceGU2XHhiMFx4OTRcJyksXG4gICAgKDB4MkY1NCwgXCdNXCcsIFwnXHhlNlx4YjBceGI0XCcpLFxuICAgICgweDJGNTUsIFwnTVwnLCBcJ1x4ZTdceDgxXHhhYlwnKSxcbiAgICAoMHgyRjU2LCBcJ01cJywgXCdceGU3XHg4OFx4YWFcJyksXG4gICAgKDB4MkY1NywgXCdNXCcsIFwnXHhlN1x4ODhceGI2XCcpLFxuICAgICgweDJGNTgsIFwnTVwnLCBcJ1x4ZTdceDg4XHhiYlwnKSxcbiAgICAoMHgyRjU5LCBcJ01cJywgXCdceGU3XHg4OFx4YmZcJyksXG4gICAgKDB4MkY1QSwgXCdNXCcsIFwnXHhlN1x4ODlceDg3XCcpLFxuICAgICgweDJGNUIsIFwnTVwnLCBcJ1x4ZTdceDg5XHg5OVwnKSxcbiAgICAoMHgyRjVDLCBcJ01cJywgXCdceGU3XHg4OVx4OWJcJyksXG4gICAgKDB4MkY1RCwgXCdNXCcsIFwnXHhlN1x4OGFceGFjXCcpLFxuICAgICgweDJGNUUsIFwnTVwnLCBcJ1x4ZTdceDhlXHg4NFwnKSxcbiAgICAoMHgyRjVGLCBcJ01cJywgXCdceGU3XHg4ZVx4ODlcJyksXG4gICAgKDB4MkY2MCwgXCdNXCcsIFwnXHhlN1x4OTNceDljXCcpLFxuICAgICgweDJGNjEsIFwnTVwnLCBcJ1x4ZTdceDkzXHhhNlwnKSxcbiAgICAoMHgyRjYyLCBcJ01cJywgXCdceGU3XHg5NFx4OThcJyksXG4gICAgKDB4MkY2MywgXCdNXCcsIFwnXHhlN1x4OTRceDlmXCcpLFxuICAgICgweDJGNjQsIFwnTVwnLCBcJ1x4ZTdceDk0XHhhOFwnKSxcbiAgICAoMHgyRjY1LCBcJ01cJywgXCdceGU3XHg5NFx4YjBcJyksXG4gICAgKDB4MkY2NiwgXCdNXCcsIFwnXHhlN1x4OTZceDhiXCcpLFxuICAgICgweDJGNjcsIFwnTVwnLCBcJ1x4ZTdceDk2XHg5MlwnKSxcbiAgICAoMHgyRjY4LCBcJ01cJywgXCdceGU3XHg5OVx4YjZcJyksXG4gICAgKDB4MkY2OSwgXCdNXCcsIFwnXHhlN1x4OTlceGJkXCcpLFxuICAgICgweDJGNkEsIFwnTVwnLCBcJ1x4ZTdceDlhXHhhZVwnKSxcbiAgICAoMHgyRjZCLCBcJ01cJywgXCdceGU3XHg5YVx4YmZcJyksXG4gICAgKDB4MkY2QywgXCdNXCcsIFwnXHhlN1x4OWJceGFlXCcpLFxuICAgICgweDJGNkQsIFwnTVwnLCBcJ1x4ZTdceDlmXHg5YlwnKSxcbiAgICAoMHgyRjZFLCBcJ01cJywgXCdceGU3XHg5Zlx4YTJcJyksXG4gICAgKDB4MkY2RiwgXCdNXCcsIFwnXHhlN1x4OWZceGIzXCcpLFxuICAgICgweDJGNzAsIFwnTVwnLCBcJ1x4ZTdceGE0XHhiYVwnKSxcbiAgICAoMHgyRjcxLCBcJ01cJywgXCdceGU3XHhhNlx4YjhcJyksXG4gICAgKDB4MkY3MiwgXCdNXCcsIFwnXHhlN1x4YTZceGJlXCcpLFxuICAgICgweDJGNzMsIFwnTVwnLCBcJ1x4ZTdceGE5XHhiNFwnKSxcbiAgICAoMHgyRjc0LCBcJ01cJywgXCdceGU3XHhhYlx4OGJcJyksXG4gICAgKDB4MkY3NSwgXCdNXCcsIFwnXHhlN1x4YWJceGI5XCcpLFxuICAgICgweDJGNzYsIFwnTVwnLCBcJ1x4ZTdceGIxXHhiM1wnKSxcbiAgICAoMHgyRjc3LCBcJ01cJywgXCdceGU3XHhiM1x4YjhcJyksXG4gICAgKDB4MkY3OCwgXCdNXCcsIFwnXHhlN1x4YmNceGI2XCcpLFxuICAgICgweDJGNzksIFwnTVwnLCBcJ1x4ZTdceGJkXHg5MVwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzI4KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgyRjdBLCBcJ01cJywgXCdceGU3XHhiZVx4OGFcJyksXG4gICAgKDB4MkY3QiwgXCdNXCcsIFwnXHhlN1x4YmVceGJkXCcpLFxuICAgICgweDJGN0MsIFwnTVwnLCBcJ1x4ZThceDgwXHg4MVwnKSxcbiAgICAoMHgyRjdELCBcJ01cJywgXCdceGU4XHg4MFx4OGNcJyksXG4gICAgKDB4MkY3RSwgXCdNXCcsIFwnXHhlOFx4ODBceDkyXCcpLFxuICAgICgweDJGN0YsIFwnTVwnLCBcJ1x4ZThceDgwXHhiM1wnKSxcbiAgICAoMHgyRjgwLCBcJ01cJywgXCdceGU4XHg4MVx4YmZcJyksXG4gICAgKDB4MkY4MSwgXCdNXCcsIFwnXHhlOFx4ODJceDg5XCcpLFxuICAgICgweDJGODIsIFwnTVwnLCBcJ1x4ZThceDg3XHhhM1wnKSxcbiAgICAoMHgyRjgzLCBcJ01cJywgXCdceGU4XHg4N1x4YWFcJyksXG4gICAgKDB4MkY4NCwgXCdNXCcsIFwnXHhlOFx4ODdceGIzXCcpLFxuICAgICgweDJGODUsIFwnTVwnLCBcJ1x4ZThceDg3XHhiY1wnKSxcbiAgICAoMHgyRjg2LCBcJ01cJywgXCdceGU4XHg4OFx4OGNcJyksXG4gICAgKDB4MkY4NywgXCdNXCcsIFwnXHhlOFx4ODhceDliXCcpLFxuICAgICgweDJGODgsIFwnTVwnLCBcJ1x4ZThceDg4XHg5ZlwnKSxcbiAgICAoMHgyRjg5LCBcJ01cJywgXCdceGU4XHg4OVx4YWVcJyksXG4gICAgKDB4MkY4QSwgXCdNXCcsIFwnXHhlOFx4ODlceGIyXCcpLFxuICAgICgweDJGOEIsIFwnTVwnLCBcJ1x4ZThceDg5XHhiOFwnKSxcbiAgICAoMHgyRjhDLCBcJ01cJywgXCdceGU4XHg5OVx4OGRcJyksXG4gICAgKDB4MkY4RCwgXCdNXCcsIFwnXHhlOFx4OTlceGFiXCcpLFxuICAgICgweDJGOEUsIFwnTVwnLCBcJ1x4ZThceGExXHg4MFwnKSxcbiAgICAoMHgyRjhGLCBcJ01cJywgXCdceGU4XHhhMVx4OGNcJyksXG4gICAgKDB4MkY5MCwgXCdNXCcsIFwnXHhlOFx4YTFceGEzXCcpLFxuICAgICgweDJGOTEsIFwnTVwnLCBcJ1x4ZThceGE1XHhiZVwnKSxcbiAgICAoMHgyRjkyLCBcJ01cJywgXCdceGU4XHhhNlx4OGJcJyksXG4gICAgKDB4MkY5MywgXCdNXCcsIFwnXHhlOFx4YTdceDkyXCcpLFxuICAgICgweDJGOTQsIFwnTVwnLCBcJ1x4ZThceGE4XHg4MFwnKSxcbiAgICAoMHgyRjk1LCBcJ01cJywgXCdceGU4XHhiMFx4YjdcJyksXG4gICAgKDB4MkY5NiwgXCdNXCcsIFwnXHhlOFx4YjFceDg2XCcpLFxuICAgICgweDJGOTcsIFwnTVwnLCBcJ1x4ZThceGIxXHg5NVwnKSxcbiAgICAoMHgyRjk4LCBcJ01cJywgXCdceGU4XHhiMVx4YjhcJyksXG4gICAgKDB4MkY5OSwgXCdNXCcsIFwnXHhlOFx4YjJceDlkXCcpLFxuICAgICgweDJGOUEsIFwnTVwnLCBcJ1x4ZThceGI1XHhhNFwnKSxcbiAgICAoMHgyRjlCLCBcJ01cJywgXCdceGU4XHhiNVx4YjBcJyksXG4gICAgKDB4MkY5QywgXCdNXCcsIFwnXHhlOFx4YjZceGIzXCcpLFxuICAgICgweDJGOUQsIFwnTVwnLCBcJ1x4ZThceGJhXHhhYlwnKSxcbiAgICAoMHgyRjlFLCBcJ01cJywgXCdceGU4XHhiYlx4OGFcJyksXG4gICAgKDB4MkY5RiwgXCdNXCcsIFwnXHhlOFx4YmVceDliXCcpLFxuICAgICgweDJGQTAsIFwnTVwnLCBcJ1x4ZThceGJlXHhiMFwnKSxcbiAgICAoMHgyRkExLCBcJ01cJywgXCdceGU4XHhiZVx4YjVcJyksXG4gICAgKDB4MkZBMiwgXCdNXCcsIFwnXHhlOVx4ODJceDkxXCcpLFxuICAgICgweDJGQTMsIFwnTVwnLCBcJ1x4ZTlceDg1XHg4OVwnKSxcbiAgICAoMHgyRkE0LCBcJ01cJywgXCdceGU5XHg4N1x4ODZcJyksXG4gICAgKDB4MkZBNSwgXCdNXCcsIFwnXHhlOVx4ODdceDhjXCcpLFxuICAgICgweDJGQTYsIFwnTVwnLCBcJ1x4ZTlceDg3XHg5MVwnKSxcbiAgICAoMHgyRkE3LCBcJ01cJywgXCdceGU5XHg5NVx4YjdcJyksXG4gICAgKDB4MkZBOCwgXCdNXCcsIFwnXHhlOVx4OTZceDgwXCcpLFxuICAgICgweDJGQTksIFwnTVwnLCBcJ1x4ZTlceDk4XHg5Y1wnKSxcbiAgICAoMHgyRkFBLCBcJ01cJywgXCdceGU5XHg5YVx4YjZcJyksXG4gICAgKDB4MkZBQiwgXCdNXCcsIFwnXHhlOVx4OWFceGI5XCcpLFxuICAgICgweDJGQUMsIFwnTVwnLCBcJ1x4ZTlceDliXHhhOFwnKSxcbiAgICAoMHgyRkFELCBcJ01cJywgXCdceGU5XHg5ZFx4OTFcJyksXG4gICAgKDB4MkZBRSwgXCdNXCcsIFwnXHhlOVx4OWRceDllXCcpLFxuICAgICgweDJGQUYsIFwnTVwnLCBcJ1x4ZTlceDlkXHhhMlwnKSxcbiAgICAoMHgyRkIwLCBcJ01cJywgXCdceGU5XHg5ZFx4YTlcJyksXG4gICAgKDB4MkZCMSwgXCdNXCcsIFwnXHhlOVx4OWZceDhiXCcpLFxuICAgICgweDJGQjIsIFwnTVwnLCBcJ1x4ZTlceDlmXHhhZFwnKSxcbiAgICAoMHgyRkIzLCBcJ01cJywgXCdceGU5XHg5Zlx4YjNcJyksXG4gICAgKDB4MkZCNCwgXCdNXCcsIFwnXHhlOVx4YTBceDgxXCcpLFxuICAgICgweDJGQjUsIFwnTVwnLCBcJ1x4ZTlceGEyXHhhOFwnKSxcbiAgICAoMHgyRkI2LCBcJ01cJywgXCdceGU5XHhhM1x4OWJcJyksXG4gICAgKDB4MkZCNywgXCdNXCcsIFwnXHhlOVx4YTNceDlmXCcpLFxuICAgICgweDJGQjgsIFwnTVwnLCBcJ1x4ZTlceGE2XHg5NlwnKSxcbiAgICAoMHgyRkI5LCBcJ01cJywgXCdceGU5XHhhNlx4OTlcJyksXG4gICAgKDB4MkZCQSwgXCdNXCcsIFwnXHhlOVx4YTZceGFjXCcpLFxuICAgICgweDJGQkIsIFwnTVwnLCBcJ1x4ZTlceGFhXHhhOFwnKSxcbiAgICAoMHgyRkJDLCBcJ01cJywgXCdceGU5XHhhYlx4OThcJyksXG4gICAgKDB4MkZCRCwgXCdNXCcsIFwnXHhlOVx4YWJceDlmXCcpLFxuICAgICgweDJGQkUsIFwnTVwnLCBcJ1x4ZTlceGFjXHhhNVwnKSxcbiAgICAoMHgyRkJGLCBcJ01cJywgXCdceGU5XHhhY1x4YWZcJyksXG4gICAgKDB4MkZDMCwgXCdNXCcsIFwnXHhlOVx4YWNceGIyXCcpLFxuICAgICgweDJGQzEsIFwnTVwnLCBcJ1x4ZTlceGFjXHhiY1wnKSxcbiAgICAoMHgyRkMyLCBcJ01cJywgXCdceGU5XHhhZFx4OWFcJyksXG4gICAgKDB4MkZDMywgXCdNXCcsIFwnXHhlOVx4YjNceGE1XCcpLFxuICAgICgweDJGQzQsIFwnTVwnLCBcJ1x4ZTlceGI5XHhiNVwnKSxcbiAgICAoMHgyRkM1LCBcJ01cJywgXCdceGU5XHhiOVx4YmZcJyksXG4gICAgKDB4MkZDNiwgXCdNXCcsIFwnXHhlOVx4YmFceGE1XCcpLFxuICAgICgweDJGQzcsIFwnTVwnLCBcJ1x4ZTlceGJhXHhiYlwnKSxcbiAgICAoMHgyRkM4LCBcJ01cJywgXCdceGU5XHhiYlx4ODNcJyksXG4gICAgKDB4MkZDOSwgXCdNXCcsIFwnXHhlOVx4YmJceDhkXCcpLFxuICAgICgweDJGQ0EsIFwnTVwnLCBcJ1x4ZTlceGJiXHg5MVwnKSxcbiAgICAoMHgyRkNCLCBcJ01cJywgXCdceGU5XHhiYlx4YjlcJyksXG4gICAgKDB4MkZDQywgXCdNXCcsIFwnXHhlOVx4YmJceGJkXCcpLFxuICAgICgweDJGQ0QsIFwnTVwnLCBcJ1x4ZTlceGJjXHg4ZVwnKSxcbiAgICAoMHgyRkNFLCBcJ01cJywgXCdceGU5XHhiY1x4OTNcJyksXG4gICAgKDB4MkZDRiwgXCdNXCcsIFwnXHhlOVx4YmNceGEwXCcpLFxuICAgICgweDJGRDAsIFwnTVwnLCBcJ1x4ZTlceGJjXHhiYlwnKSxcbiAgICAoMHgyRkQxLCBcJ01cJywgXCdceGU5XHhiZFx4OGFcJyksXG4gICAgKDB4MkZEMiwgXCdNXCcsIFwnXHhlOVx4YmRceDkyXCcpLFxuICAgICgweDJGRDMsIFwnTVwnLCBcJ1x4ZTlceGJlXHg4ZFwnKSxcbiAgICAoMHgyRkQ0LCBcJ01cJywgXCdceGU5XHhiZVx4OWNcJyksXG4gICAgKDB4MkZENSwgXCdNXCcsIFwnXHhlOVx4YmVceGEwXCcpLFxuICAgICgweDJGRDYsIFwnWFwnKSxcbiAgICAoMHgzMDAwLCBcJzNcJywgXCcgXCcpLFxuICAgICgweDMwMDEsIFwnVlwnKSxcbiAgICAoMHgzMDAyLCBcJ01cJywgXCcuXCcpLFxuICAgICgweDMwMDMsIFwnVlwnKSxcbiAgICAoMHgzMDM2LCBcJ01cJywgXCdceGUzXHg4MFx4OTJcJyksXG4gICAgKDB4MzAzNywgXCdWXCcpLFxuICAgICgweDMwMzgsIFwnTVwnLCBcJ1x4ZTVceDhkXHg4MVwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzI5KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgzMDM5LCBcJ01cJywgXCdceGU1XHg4ZFx4ODRcJyksXG4gICAgKDB4MzAzQSwgXCdNXCcsIFwnXHhlNVx4OGRceDg1XCcpLFxuICAgICgweDMwM0IsIFwnVlwnKSxcbiAgICAoMHgzMDQwLCBcJ1hcJyksXG4gICAgKDB4MzA0MSwgXCdWXCcpLFxuICAgICgweDMwOTcsIFwnWFwnKSxcbiAgICAoMHgzMDk5LCBcJ1ZcJyksXG4gICAgKDB4MzA5QiwgXCczXCcsIFwnIFx4ZTNceDgyXHg5OVwnKSxcbiAgICAoMHgzMDlDLCBcJzNcJywgXCcgXHhlM1x4ODJceDlhXCcpLFxuICAgICgweDMwOUQsIFwnVlwnKSxcbiAgICAoMHgzMDlGLCBcJ01cJywgXCdceGUzXHg4Mlx4ODhceGUzXHg4Mlx4OGFcJyksXG4gICAgKDB4MzBBMCwgXCdWXCcpLFxuICAgICgweDMwRkYsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiM1x4ZTNceDgzXHg4OFwnKSxcbiAgICAoMHgzMTAwLCBcJ1hcJyksXG4gICAgKDB4MzEwNSwgXCdWXCcpLFxuICAgICgweDMxMzAsIFwnWFwnKSxcbiAgICAoMHgzMTMxLCBcJ01cJywgXCdceGUxXHg4NFx4ODBcJyksXG4gICAgKDB4MzEzMiwgXCdNXCcsIFwnXHhlMVx4ODRceDgxXCcpLFxuICAgICgweDMxMzMsIFwnTVwnLCBcJ1x4ZTFceDg2XHhhYVwnKSxcbiAgICAoMHgzMTM0LCBcJ01cJywgXCdceGUxXHg4NFx4ODJcJyksXG4gICAgKDB4MzEzNSwgXCdNXCcsIFwnXHhlMVx4ODZceGFjXCcpLFxuICAgICgweDMxMzYsIFwnTVwnLCBcJ1x4ZTFceDg2XHhhZFwnKSxcbiAgICAoMHgzMTM3LCBcJ01cJywgXCdceGUxXHg4NFx4ODNcJyksXG4gICAgKDB4MzEzOCwgXCdNXCcsIFwnXHhlMVx4ODRceDg0XCcpLFxuICAgICgweDMxMzksIFwnTVwnLCBcJ1x4ZTFceDg0XHg4NVwnKSxcbiAgICAoMHgzMTNBLCBcJ01cJywgXCdceGUxXHg4Nlx4YjBcJyksXG4gICAgKDB4MzEzQiwgXCdNXCcsIFwnXHhlMVx4ODZceGIxXCcpLFxuICAgICgweDMxM0MsIFwnTVwnLCBcJ1x4ZTFceDg2XHhiMlwnKSxcbiAgICAoMHgzMTNELCBcJ01cJywgXCdceGUxXHg4Nlx4YjNcJyksXG4gICAgKDB4MzEzRSwgXCdNXCcsIFwnXHhlMVx4ODZceGI0XCcpLFxuICAgICgweDMxM0YsIFwnTVwnLCBcJ1x4ZTFceDg2XHhiNVwnKSxcbiAgICAoMHgzMTQwLCBcJ01cJywgXCdceGUxXHg4NFx4OWFcJyksXG4gICAgKDB4MzE0MSwgXCdNXCcsIFwnXHhlMVx4ODRceDg2XCcpLFxuICAgICgweDMxNDIsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4N1wnKSxcbiAgICAoMHgzMTQzLCBcJ01cJywgXCdceGUxXHg4NFx4ODhcJyksXG4gICAgKDB4MzE0NCwgXCdNXCcsIFwnXHhlMVx4ODRceGExXCcpLFxuICAgICgweDMxNDUsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4OVwnKSxcbiAgICAoMHgzMTQ2LCBcJ01cJywgXCdceGUxXHg4NFx4OGFcJyksXG4gICAgKDB4MzE0NywgXCdNXCcsIFwnXHhlMVx4ODRceDhiXCcpLFxuICAgICgweDMxNDgsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4Y1wnKSxcbiAgICAoMHgzMTQ5LCBcJ01cJywgXCdceGUxXHg4NFx4OGRcJyksXG4gICAgKDB4MzE0QSwgXCdNXCcsIFwnXHhlMVx4ODRceDhlXCcpLFxuICAgICgweDMxNEIsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4ZlwnKSxcbiAgICAoMHgzMTRDLCBcJ01cJywgXCdceGUxXHg4NFx4OTBcJyksXG4gICAgKDB4MzE0RCwgXCdNXCcsIFwnXHhlMVx4ODRceDkxXCcpLFxuICAgICgweDMxNEUsIFwnTVwnLCBcJ1x4ZTFceDg0XHg5MlwnKSxcbiAgICAoMHgzMTRGLCBcJ01cJywgXCdceGUxXHg4NVx4YTFcJyksXG4gICAgKDB4MzE1MCwgXCdNXCcsIFwnXHhlMVx4ODVceGEyXCcpLFxuICAgICgweDMxNTEsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhM1wnKSxcbiAgICAoMHgzMTUyLCBcJ01cJywgXCdceGUxXHg4NVx4YTRcJyksXG4gICAgKDB4MzE1MywgXCdNXCcsIFwnXHhlMVx4ODVceGE1XCcpLFxuICAgICgweDMxNTQsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhNlwnKSxcbiAgICAoMHgzMTU1LCBcJ01cJywgXCdceGUxXHg4NVx4YTdcJyksXG4gICAgKDB4MzE1NiwgXCdNXCcsIFwnXHhlMVx4ODVceGE4XCcpLFxuICAgICgweDMxNTcsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhOVwnKSxcbiAgICAoMHgzMTU4LCBcJ01cJywgXCdceGUxXHg4NVx4YWFcJyksXG4gICAgKDB4MzE1OSwgXCdNXCcsIFwnXHhlMVx4ODVceGFiXCcpLFxuICAgICgweDMxNUEsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhY1wnKSxcbiAgICAoMHgzMTVCLCBcJ01cJywgXCdceGUxXHg4NVx4YWRcJyksXG4gICAgKDB4MzE1QywgXCdNXCcsIFwnXHhlMVx4ODVceGFlXCcpLFxuICAgICgweDMxNUQsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhZlwnKSxcbiAgICAoMHgzMTVFLCBcJ01cJywgXCdceGUxXHg4NVx4YjBcJyksXG4gICAgKDB4MzE1RiwgXCdNXCcsIFwnXHhlMVx4ODVceGIxXCcpLFxuICAgICgweDMxNjAsIFwnTVwnLCBcJ1x4ZTFceDg1XHhiMlwnKSxcbiAgICAoMHgzMTYxLCBcJ01cJywgXCdceGUxXHg4NVx4YjNcJyksXG4gICAgKDB4MzE2MiwgXCdNXCcsIFwnXHhlMVx4ODVceGI0XCcpLFxuICAgICgweDMxNjMsIFwnTVwnLCBcJ1x4ZTFceDg1XHhiNVwnKSxcbiAgICAoMHgzMTY0LCBcJ1hcJyksXG4gICAgKDB4MzE2NSwgXCdNXCcsIFwnXHhlMVx4ODRceDk0XCcpLFxuICAgICgweDMxNjYsIFwnTVwnLCBcJ1x4ZTFceDg0XHg5NVwnKSxcbiAgICAoMHgzMTY3LCBcJ01cJywgXCdceGUxXHg4N1x4ODdcJyksXG4gICAgKDB4MzE2OCwgXCdNXCcsIFwnXHhlMVx4ODdceDg4XCcpLFxuICAgICgweDMxNjksIFwnTVwnLCBcJ1x4ZTFceDg3XHg4Y1wnKSxcbiAgICAoMHgzMTZBLCBcJ01cJywgXCdceGUxXHg4N1x4OGVcJyksXG4gICAgKDB4MzE2QiwgXCdNXCcsIFwnXHhlMVx4ODdceDkzXCcpLFxuICAgICgweDMxNkMsIFwnTVwnLCBcJ1x4ZTFceDg3XHg5N1wnKSxcbiAgICAoMHgzMTZELCBcJ01cJywgXCdceGUxXHg4N1x4OTlcJyksXG4gICAgKDB4MzE2RSwgXCdNXCcsIFwnXHhlMVx4ODRceDljXCcpLFxuICAgICgweDMxNkYsIFwnTVwnLCBcJ1x4ZTFceDg3XHg5ZFwnKSxcbiAgICAoMHgzMTcwLCBcJ01cJywgXCdceGUxXHg4N1x4OWZcJyksXG4gICAgKDB4MzE3MSwgXCdNXCcsIFwnXHhlMVx4ODRceDlkXCcpLFxuICAgICgweDMxNzIsIFwnTVwnLCBcJ1x4ZTFceDg0XHg5ZVwnKSxcbiAgICAoMHgzMTczLCBcJ01cJywgXCdceGUxXHg4NFx4YTBcJyksXG4gICAgKDB4MzE3NCwgXCdNXCcsIFwnXHhlMVx4ODRceGEyXCcpLFxuICAgICgweDMxNzUsIFwnTVwnLCBcJ1x4ZTFceDg0XHhhM1wnKSxcbiAgICAoMHgzMTc2LCBcJ01cJywgXCdceGUxXHg4NFx4YTdcJyksXG4gICAgKDB4MzE3NywgXCdNXCcsIFwnXHhlMVx4ODRceGE5XCcpLFxuICAgICgweDMxNzgsIFwnTVwnLCBcJ1x4ZTFceDg0XHhhYlwnKSxcbiAgICAoMHgzMTc5LCBcJ01cJywgXCdceGUxXHg4NFx4YWNcJyksXG4gICAgKDB4MzE3QSwgXCdNXCcsIFwnXHhlMVx4ODRceGFkXCcpLFxuICAgICgweDMxN0IsIFwnTVwnLCBcJ1x4ZTFceDg0XHhhZVwnKSxcbiAgICAoMHgzMTdDLCBcJ01cJywgXCdceGUxXHg4NFx4YWZcJyksXG4gICAgKDB4MzE3RCwgXCdNXCcsIFwnXHhlMVx4ODRceGIyXCcpLFxuICAgICgweDMxN0UsIFwnTVwnLCBcJ1x4ZTFceDg0XHhiNlwnKSxcbiAgICAoMHgzMTdGLCBcJ01cJywgXCdceGUxXHg4NVx4ODBcJyksXG4gICAgKDB4MzE4MCwgXCdNXCcsIFwnXHhlMVx4ODVceDg3XCcpLFxuICAgICgweDMxODEsIFwnTVwnLCBcJ1x4ZTFceDg1XHg4Y1wnKSxcbiAgICAoMHgzMTgyLCBcJ01cJywgXCdceGUxXHg4N1x4YjFcJyksXG4gICAgKDB4MzE4MywgXCdNXCcsIFwnXHhlMVx4ODdceGIyXCcpLFxuICAgICgweDMxODQsIFwnTVwnLCBcJ1x4ZTFceDg1XHg5N1wnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzMwKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgzMTg1LCBcJ01cJywgXCdceGUxXHg4NVx4OThcJyksXG4gICAgKDB4MzE4NiwgXCdNXCcsIFwnXHhlMVx4ODVceDk5XCcpLFxuICAgICgweDMxODcsIFwnTVwnLCBcJ1x4ZTFceDg2XHg4NFwnKSxcbiAgICAoMHgzMTg4LCBcJ01cJywgXCdceGUxXHg4Nlx4ODVcJyksXG4gICAgKDB4MzE4OSwgXCdNXCcsIFwnXHhlMVx4ODZceDg4XCcpLFxuICAgICgweDMxOEEsIFwnTVwnLCBcJ1x4ZTFceDg2XHg5MVwnKSxcbiAgICAoMHgzMThCLCBcJ01cJywgXCdceGUxXHg4Nlx4OTJcJyksXG4gICAgKDB4MzE4QywgXCdNXCcsIFwnXHhlMVx4ODZceDk0XCcpLFxuICAgICgweDMxOEQsIFwnTVwnLCBcJ1x4ZTFceDg2XHg5ZVwnKSxcbiAgICAoMHgzMThFLCBcJ01cJywgXCdceGUxXHg4Nlx4YTFcJyksXG4gICAgKDB4MzE4RiwgXCdYXCcpLFxuICAgICgweDMxOTAsIFwnVlwnKSxcbiAgICAoMHgzMTkyLCBcJ01cJywgXCdceGU0XHhiOFx4ODBcJyksXG4gICAgKDB4MzE5MywgXCdNXCcsIFwnXHhlNFx4YmFceDhjXCcpLFxuICAgICgweDMxOTQsIFwnTVwnLCBcJ1x4ZTRceGI4XHg4OVwnKSxcbiAgICAoMHgzMTk1LCBcJ01cJywgXCdceGU1XHg5Ylx4OWJcJyksXG4gICAgKDB4MzE5NiwgXCdNXCcsIFwnXHhlNFx4YjhceDhhXCcpLFxuICAgICgweDMxOTcsIFwnTVwnLCBcJ1x4ZTRceGI4XHhhZFwnKSxcbiAgICAoMHgzMTk4LCBcJ01cJywgXCdceGU0XHhiOFx4OGJcJyksXG4gICAgKDB4MzE5OSwgXCdNXCcsIFwnXHhlN1x4OTRceGIyXCcpLFxuICAgICgweDMxOUEsIFwnTVwnLCBcJ1x4ZTRceGI5XHg5OVwnKSxcbiAgICAoMHgzMTlCLCBcJ01cJywgXCdceGU0XHhiOFx4OTlcJyksXG4gICAgKDB4MzE5QywgXCdNXCcsIFwnXHhlNFx4YjhceDgxXCcpLFxuICAgICgweDMxOUQsIFwnTVwnLCBcJ1x4ZTVceGE0XHhhOVwnKSxcbiAgICAoMHgzMTlFLCBcJ01cJywgXCdceGU1XHg5Y1x4YjBcJyksXG4gICAgKDB4MzE5RiwgXCdNXCcsIFwnXHhlNFx4YmFceGJhXCcpLFxuICAgICgweDMxQTAsIFwnVlwnKSxcbiAgICAoMHgzMUU0LCBcJ1hcJyksXG4gICAgKDB4MzFGMCwgXCdWXCcpLFxuICAgICgweDMyMDAsIFwnM1wnLCBcJyhceGUxXHg4NFx4ODApXCcpLFxuICAgICgweDMyMDEsIFwnM1wnLCBcJyhceGUxXHg4NFx4ODIpXCcpLFxuICAgICgweDMyMDIsIFwnM1wnLCBcJyhceGUxXHg4NFx4ODMpXCcpLFxuICAgICgweDMyMDMsIFwnM1wnLCBcJyhceGUxXHg4NFx4ODUpXCcpLFxuICAgICgweDMyMDQsIFwnM1wnLCBcJyhceGUxXHg4NFx4ODYpXCcpLFxuICAgICgweDMyMDUsIFwnM1wnLCBcJyhceGUxXHg4NFx4ODcpXCcpLFxuICAgICgweDMyMDYsIFwnM1wnLCBcJyhceGUxXHg4NFx4ODkpXCcpLFxuICAgICgweDMyMDcsIFwnM1wnLCBcJyhceGUxXHg4NFx4OGIpXCcpLFxuICAgICgweDMyMDgsIFwnM1wnLCBcJyhceGUxXHg4NFx4OGMpXCcpLFxuICAgICgweDMyMDksIFwnM1wnLCBcJyhceGUxXHg4NFx4OGUpXCcpLFxuICAgICgweDMyMEEsIFwnM1wnLCBcJyhceGUxXHg4NFx4OGYpXCcpLFxuICAgICgweDMyMEIsIFwnM1wnLCBcJyhceGUxXHg4NFx4OTApXCcpLFxuICAgICgweDMyMEMsIFwnM1wnLCBcJyhceGUxXHg4NFx4OTEpXCcpLFxuICAgICgweDMyMEQsIFwnM1wnLCBcJyhceGUxXHg4NFx4OTIpXCcpLFxuICAgICgweDMyMEUsIFwnM1wnLCBcJyhceGVhXHhiMFx4ODApXCcpLFxuICAgICgweDMyMEYsIFwnM1wnLCBcJyhceGViXHg4Mlx4OTgpXCcpLFxuICAgICgweDMyMTAsIFwnM1wnLCBcJyhceGViXHg4Ylx4YTQpXCcpLFxuICAgICgweDMyMTEsIFwnM1wnLCBcJyhceGViXHg5ZFx4YmMpXCcpLFxuICAgICgweDMyMTIsIFwnM1wnLCBcJyhceGViXHhhN1x4ODgpXCcpLFxuICAgICgweDMyMTMsIFwnM1wnLCBcJyhceGViXHhiMFx4OTQpXCcpLFxuICAgICgweDMyMTQsIFwnM1wnLCBcJyhceGVjXHg4Mlx4YWMpXCcpLFxuICAgICgweDMyMTUsIFwnM1wnLCBcJyhceGVjXHg5NVx4ODQpXCcpLFxuICAgICgweDMyMTYsIFwnM1wnLCBcJyhceGVjXHg5ZVx4OTApXCcpLFxuICAgICgweDMyMTcsIFwnM1wnLCBcJyhceGVjXHhiMFx4YTgpXCcpLFxuICAgICgweDMyMTgsIFwnM1wnLCBcJyhceGVjXHhiOVx4YjQpXCcpLFxuICAgICgweDMyMTksIFwnM1wnLCBcJyhceGVkXHg4M1x4ODApXCcpLFxuICAgICgweDMyMUEsIFwnM1wnLCBcJyhceGVkXHg4Y1x4OGMpXCcpLFxuICAgICgweDMyMUIsIFwnM1wnLCBcJyhceGVkXHg5NVx4OTgpXCcpLFxuICAgICgweDMyMUMsIFwnM1wnLCBcJyhceGVjXHhhM1x4YmMpXCcpLFxuICAgICgweDMyMUQsIFwnM1wnLCBcJyhceGVjXHg5OFx4YTRceGVjXHhhMFx4ODQpXCcpLFxuICAgICgweDMyMUUsIFwnM1wnLCBcJyhceGVjXHg5OFx4YTRceGVkXHg5Ylx4ODQpXCcpLFxuICAgICgweDMyMUYsIFwnWFwnKSxcbiAgICAoMHgzMjIwLCBcJzNcJywgXCcoXHhlNFx4YjhceDgwKVwnKSxcbiAgICAoMHgzMjIxLCBcJzNcJywgXCcoXHhlNFx4YmFceDhjKVwnKSxcbiAgICAoMHgzMjIyLCBcJzNcJywgXCcoXHhlNFx4YjhceDg5KVwnKSxcbiAgICAoMHgzMjIzLCBcJzNcJywgXCcoXHhlNVx4OWJceDliKVwnKSxcbiAgICAoMHgzMjI0LCBcJzNcJywgXCcoXHhlNFx4YmFceDk0KVwnKSxcbiAgICAoMHgzMjI1LCBcJzNcJywgXCcoXHhlNVx4ODVceGFkKVwnKSxcbiAgICAoMHgzMjI2LCBcJzNcJywgXCcoXHhlNFx4YjhceDgzKVwnKSxcbiAgICAoMHgzMjI3LCBcJzNcJywgXCcoXHhlNVx4ODVceGFiKVwnKSxcbiAgICAoMHgzMjI4LCBcJzNcJywgXCcoXHhlNFx4YjlceDlkKVwnKSxcbiAgICAoMHgzMjI5LCBcJzNcJywgXCcoXHhlNVx4OGRceDgxKVwnKSxcbiAgICAoMHgzMjJBLCBcJzNcJywgXCcoXHhlNlx4OWNceDg4KVwnKSxcbiAgICAoMHgzMjJCLCBcJzNcJywgXCcoXHhlN1x4ODFceGFiKVwnKSxcbiAgICAoMHgzMjJDLCBcJzNcJywgXCcoXHhlNlx4YjBceGI0KVwnKSxcbiAgICAoMHgzMjJELCBcJzNcJywgXCcoXHhlNlx4OWNceGE4KVwnKSxcbiAgICAoMHgzMjJFLCBcJzNcJywgXCcoXHhlOVx4ODdceDkxKVwnKSxcbiAgICAoMHgzMjJGLCBcJzNcJywgXCcoXHhlNVx4OWNceDlmKVwnKSxcbiAgICAoMHgzMjMwLCBcJzNcJywgXCcoXHhlNlx4OTdceGE1KVwnKSxcbiAgICAoMHgzMjMxLCBcJzNcJywgXCcoXHhlNlx4YTBceGFhKVwnKSxcbiAgICAoMHgzMjMyLCBcJzNcJywgXCcoXHhlNlx4OWNceDg5KVwnKSxcbiAgICAoMHgzMjMzLCBcJzNcJywgXCcoXHhlN1x4YTRceGJlKVwnKSxcbiAgICAoMHgzMjM0LCBcJzNcJywgXCcoXHhlNVx4OTBceDhkKVwnKSxcbiAgICAoMHgzMjM1LCBcJzNcJywgXCcoXHhlN1x4ODlceGI5KVwnKSxcbiAgICAoMHgzMjM2LCBcJzNcJywgXCcoXHhlOFx4YjJceGExKVwnKSxcbiAgICAoMHgzMjM3LCBcJzNcJywgXCcoXHhlN1x4YTVceDlkKVwnKSxcbiAgICAoMHgzMjM4LCBcJzNcJywgXCcoXHhlNVx4OGFceGI0KVwnKSxcbiAgICAoMHgzMjM5LCBcJzNcJywgXCcoXHhlNFx4YmJceGEzKVwnKSxcbiAgICAoMHgzMjNBLCBcJzNcJywgXCcoXHhlNVx4OTFceGJjKVwnKSxcbiAgICAoMHgzMjNCLCBcJzNcJywgXCcoXHhlNVx4YWRceGE2KVwnKSxcbiAgICAoMHgzMjNDLCBcJzNcJywgXCcoXHhlN1x4OWJceGEzKVwnKSxcbiAgICAoMHgzMjNELCBcJzNcJywgXCcoXHhlNFx4YmNceDgxKVwnKSxcbiAgICAoMHgzMjNFLCBcJzNcJywgXCcoXHhlOFx4YjNceDg3KVwnKSxcbiAgICAoMHgzMjNGLCBcJzNcJywgXCcoXHhlNVx4OGRceDk0KVwnKSxcbiAgICAoMHgzMjQwLCBcJzNcJywgXCcoXHhlN1x4YTVceGFkKVwnKSxcbiAgICAoMHgzMjQxLCBcJzNcJywgXCcoXHhlNFx4YmNceDkxKVwnKSxcbiAgICAoMHgzMjQyLCBcJzNcJywgXCcoXHhlOFx4ODdceGFhKVwnKSxcbiAgICAoMHgzMjQzLCBcJzNcJywgXCcoXHhlOFx4ODdceGIzKVwnKSxcbiAgICAoMHgzMjQ0LCBcJ01cJywgXCdceGU1XHg5NVx4OGZcJyksXG4gICAgKDB4MzI0NSwgXCdNXCcsIFwnXHhlNVx4YjlceGJjXCcpLFxuICAgICgweDMyNDYsIFwnTVwnLCBcJ1x4ZTZceDk2XHg4N1wnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzMxKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgzMjQ3LCBcJ01cJywgXCdceGU3XHhhZVx4OGZcJyksXG4gICAgKDB4MzI0OCwgXCdWXCcpLFxuICAgICgweDMyNTAsIFwnTVwnLCBcJ3B0ZVwnKSxcbiAgICAoMHgzMjUxLCBcJ01cJywgXCcyMVwnKSxcbiAgICAoMHgzMjUyLCBcJ01cJywgXCcyMlwnKSxcbiAgICAoMHgzMjUzLCBcJ01cJywgXCcyM1wnKSxcbiAgICAoMHgzMjU0LCBcJ01cJywgXCcyNFwnKSxcbiAgICAoMHgzMjU1LCBcJ01cJywgXCcyNVwnKSxcbiAgICAoMHgzMjU2LCBcJ01cJywgXCcyNlwnKSxcbiAgICAoMHgzMjU3LCBcJ01cJywgXCcyN1wnKSxcbiAgICAoMHgzMjU4LCBcJ01cJywgXCcyOFwnKSxcbiAgICAoMHgzMjU5LCBcJ01cJywgXCcyOVwnKSxcbiAgICAoMHgzMjVBLCBcJ01cJywgXCczMFwnKSxcbiAgICAoMHgzMjVCLCBcJ01cJywgXCczMVwnKSxcbiAgICAoMHgzMjVDLCBcJ01cJywgXCczMlwnKSxcbiAgICAoMHgzMjVELCBcJ01cJywgXCczM1wnKSxcbiAgICAoMHgzMjVFLCBcJ01cJywgXCczNFwnKSxcbiAgICAoMHgzMjVGLCBcJ01cJywgXCczNVwnKSxcbiAgICAoMHgzMjYwLCBcJ01cJywgXCdceGUxXHg4NFx4ODBcJyksXG4gICAgKDB4MzI2MSwgXCdNXCcsIFwnXHhlMVx4ODRceDgyXCcpLFxuICAgICgweDMyNjIsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4M1wnKSxcbiAgICAoMHgzMjYzLCBcJ01cJywgXCdceGUxXHg4NFx4ODVcJyksXG4gICAgKDB4MzI2NCwgXCdNXCcsIFwnXHhlMVx4ODRceDg2XCcpLFxuICAgICgweDMyNjUsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4N1wnKSxcbiAgICAoMHgzMjY2LCBcJ01cJywgXCdceGUxXHg4NFx4ODlcJyksXG4gICAgKDB4MzI2NywgXCdNXCcsIFwnXHhlMVx4ODRceDhiXCcpLFxuICAgICgweDMyNjgsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4Y1wnKSxcbiAgICAoMHgzMjY5LCBcJ01cJywgXCdceGUxXHg4NFx4OGVcJyksXG4gICAgKDB4MzI2QSwgXCdNXCcsIFwnXHhlMVx4ODRceDhmXCcpLFxuICAgICgweDMyNkIsIFwnTVwnLCBcJ1x4ZTFceDg0XHg5MFwnKSxcbiAgICAoMHgzMjZDLCBcJ01cJywgXCdceGUxXHg4NFx4OTFcJyksXG4gICAgKDB4MzI2RCwgXCdNXCcsIFwnXHhlMVx4ODRceDkyXCcpLFxuICAgICgweDMyNkUsIFwnTVwnLCBcJ1x4ZWFceGIwXHg4MFwnKSxcbiAgICAoMHgzMjZGLCBcJ01cJywgXCdceGViXHg4Mlx4OThcJyksXG4gICAgKDB4MzI3MCwgXCdNXCcsIFwnXHhlYlx4OGJceGE0XCcpLFxuICAgICgweDMyNzEsIFwnTVwnLCBcJ1x4ZWJceDlkXHhiY1wnKSxcbiAgICAoMHgzMjcyLCBcJ01cJywgXCdceGViXHhhN1x4ODhcJyksXG4gICAgKDB4MzI3MywgXCdNXCcsIFwnXHhlYlx4YjBceDk0XCcpLFxuICAgICgweDMyNzQsIFwnTVwnLCBcJ1x4ZWNceDgyXHhhY1wnKSxcbiAgICAoMHgzMjc1LCBcJ01cJywgXCdceGVjXHg5NVx4ODRcJyksXG4gICAgKDB4MzI3NiwgXCdNXCcsIFwnXHhlY1x4OWVceDkwXCcpLFxuICAgICgweDMyNzcsIFwnTVwnLCBcJ1x4ZWNceGIwXHhhOFwnKSxcbiAgICAoMHgzMjc4LCBcJ01cJywgXCdceGVjXHhiOVx4YjRcJyksXG4gICAgKDB4MzI3OSwgXCdNXCcsIFwnXHhlZFx4ODNceDgwXCcpLFxuICAgICgweDMyN0EsIFwnTVwnLCBcJ1x4ZWRceDhjXHg4Y1wnKSxcbiAgICAoMHgzMjdCLCBcJ01cJywgXCdceGVkXHg5NVx4OThcJyksXG4gICAgKDB4MzI3QywgXCdNXCcsIFwnXHhlY1x4YjBceGI4XHhlYVx4YjNceGEwXCcpLFxuICAgICgweDMyN0QsIFwnTVwnLCBcJ1x4ZWNceGEzXHhiY1x4ZWNceDlkXHg5OFwnKSxcbiAgICAoMHgzMjdFLCBcJ01cJywgXCdceGVjXHg5YVx4YjBcJyksXG4gICAgKDB4MzI3RiwgXCdWXCcpLFxuICAgICgweDMyODAsIFwnTVwnLCBcJ1x4ZTRceGI4XHg4MFwnKSxcbiAgICAoMHgzMjgxLCBcJ01cJywgXCdceGU0XHhiYVx4OGNcJyksXG4gICAgKDB4MzI4MiwgXCdNXCcsIFwnXHhlNFx4YjhceDg5XCcpLFxuICAgICgweDMyODMsIFwnTVwnLCBcJ1x4ZTVceDliXHg5YlwnKSxcbiAgICAoMHgzMjg0LCBcJ01cJywgXCdceGU0XHhiYVx4OTRcJyksXG4gICAgKDB4MzI4NSwgXCdNXCcsIFwnXHhlNVx4ODVceGFkXCcpLFxuICAgICgweDMyODYsIFwnTVwnLCBcJ1x4ZTRceGI4XHg4M1wnKSxcbiAgICAoMHgzMjg3LCBcJ01cJywgXCdceGU1XHg4NVx4YWJcJyksXG4gICAgKDB4MzI4OCwgXCdNXCcsIFwnXHhlNFx4YjlceDlkXCcpLFxuICAgICgweDMyODksIFwnTVwnLCBcJ1x4ZTVceDhkXHg4MVwnKSxcbiAgICAoMHgzMjhBLCBcJ01cJywgXCdceGU2XHg5Y1x4ODhcJyksXG4gICAgKDB4MzI4QiwgXCdNXCcsIFwnXHhlN1x4ODFceGFiXCcpLFxuICAgICgweDMyOEMsIFwnTVwnLCBcJ1x4ZTZceGIwXHhiNFwnKSxcbiAgICAoMHgzMjhELCBcJ01cJywgXCdceGU2XHg5Y1x4YThcJyksXG4gICAgKDB4MzI4RSwgXCdNXCcsIFwnXHhlOVx4ODdceDkxXCcpLFxuICAgICgweDMyOEYsIFwnTVwnLCBcJ1x4ZTVceDljXHg5ZlwnKSxcbiAgICAoMHgzMjkwLCBcJ01cJywgXCdceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzI5MSwgXCdNXCcsIFwnXHhlNlx4YTBceGFhXCcpLFxuICAgICgweDMyOTIsIFwnTVwnLCBcJ1x4ZTZceDljXHg4OVwnKSxcbiAgICAoMHgzMjkzLCBcJ01cJywgXCdceGU3XHhhNFx4YmVcJyksXG4gICAgKDB4MzI5NCwgXCdNXCcsIFwnXHhlNVx4OTBceDhkXCcpLFxuICAgICgweDMyOTUsIFwnTVwnLCBcJ1x4ZTdceDg5XHhiOVwnKSxcbiAgICAoMHgzMjk2LCBcJ01cJywgXCdceGU4XHhiMlx4YTFcJyksXG4gICAgKDB4MzI5NywgXCdNXCcsIFwnXHhlN1x4YTVceDlkXCcpLFxuICAgICgweDMyOTgsIFwnTVwnLCBcJ1x4ZTVceDhhXHhiNFwnKSxcbiAgICAoMHgzMjk5LCBcJ01cJywgXCdceGU3XHhhN1x4OThcJyksXG4gICAgKDB4MzI5QSwgXCdNXCcsIFwnXHhlN1x4OTRceGI3XCcpLFxuICAgICgweDMyOUIsIFwnTVwnLCBcJ1x4ZTVceGE1XHhiM1wnKSxcbiAgICAoMHgzMjlDLCBcJ01cJywgXCdceGU5XHg4MVx4YTlcJyksXG4gICAgKDB4MzI5RCwgXCdNXCcsIFwnXHhlNVx4ODRceGFhXCcpLFxuICAgICgweDMyOUUsIFwnTVwnLCBcJ1x4ZTVceDhkXHhiMFwnKSxcbiAgICAoMHgzMjlGLCBcJ01cJywgXCdceGU2XHhiM1x4YThcJyksXG4gICAgKDB4MzJBMCwgXCdNXCcsIFwnXHhlOVx4YTBceDg1XCcpLFxuICAgICgweDMyQTEsIFwnTVwnLCBcJ1x4ZTRceGJjXHg5MVwnKSxcbiAgICAoMHgzMkEyLCBcJ01cJywgXCdceGU1XHg4Nlx4OTlcJyksXG4gICAgKDB4MzJBMywgXCdNXCcsIFwnXHhlNlx4YWRceGEzXCcpLFxuICAgICgweDMyQTQsIFwnTVwnLCBcJ1x4ZTRceGI4XHg4YVwnKSxcbiAgICAoMHgzMkE1LCBcJ01cJywgXCdceGU0XHhiOFx4YWRcJyksXG4gICAgKDB4MzJBNiwgXCdNXCcsIFwnXHhlNFx4YjhceDhiXCcpLFxuICAgICgweDMyQTcsIFwnTVwnLCBcJ1x4ZTVceGI3XHhhNlwnKSxcbiAgICAoMHgzMkE4LCBcJ01cJywgXCdceGU1XHg4Zlx4YjNcJyksXG4gICAgKDB4MzJBOSwgXCdNXCcsIFwnXHhlNVx4OGNceGJiXCcpLFxuICAgICgweDMyQUEsIFwnTVwnLCBcJ1x4ZTVceGFlXHg5N1wnKSxcbiAgICAoMHgzMkFCLCBcJ01cJywgXCdceGU1XHhhZFx4YTZcJyksXG4gICAgKDB4MzJBQywgXCdNXCcsIFwnXHhlN1x4OWJceGEzXCcpLFxuICAgICgweDMyQUQsIFwnTVwnLCBcJ1x4ZTRceGJjXHg4MVwnKSxcbiAgICAoMHgzMkFFLCBcJ01cJywgXCdceGU4XHhiM1x4ODdcJyksXG4gICAgKDB4MzJBRiwgXCdNXCcsIFwnXHhlNVx4OGRceDk0XCcpLFxuICAgICgweDMyQjAsIFwnTVwnLCBcJ1x4ZTVceGE0XHg5Y1wnKSxcbiAgICAoMHgzMkIxLCBcJ01cJywgXCczNlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzMyKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgzMkIyLCBcJ01cJywgXCczN1wnKSxcbiAgICAoMHgzMkIzLCBcJ01cJywgXCczOFwnKSxcbiAgICAoMHgzMkI0LCBcJ01cJywgXCczOVwnKSxcbiAgICAoMHgzMkI1LCBcJ01cJywgXCc0MFwnKSxcbiAgICAoMHgzMkI2LCBcJ01cJywgXCc0MVwnKSxcbiAgICAoMHgzMkI3LCBcJ01cJywgXCc0MlwnKSxcbiAgICAoMHgzMkI4LCBcJ01cJywgXCc0M1wnKSxcbiAgICAoMHgzMkI5LCBcJ01cJywgXCc0NFwnKSxcbiAgICAoMHgzMkJBLCBcJ01cJywgXCc0NVwnKSxcbiAgICAoMHgzMkJCLCBcJ01cJywgXCc0NlwnKSxcbiAgICAoMHgzMkJDLCBcJ01cJywgXCc0N1wnKSxcbiAgICAoMHgzMkJELCBcJ01cJywgXCc0OFwnKSxcbiAgICAoMHgzMkJFLCBcJ01cJywgXCc0OVwnKSxcbiAgICAoMHgzMkJGLCBcJ01cJywgXCc1MFwnKSxcbiAgICAoMHgzMkMwLCBcJ01cJywgXCcxXHhlNlx4OWNceDg4XCcpLFxuICAgICgweDMyQzEsIFwnTVwnLCBcJzJceGU2XHg5Y1x4ODhcJyksXG4gICAgKDB4MzJDMiwgXCdNXCcsIFwnM1x4ZTZceDljXHg4OFwnKSxcbiAgICAoMHgzMkMzLCBcJ01cJywgXCc0XHhlNlx4OWNceDg4XCcpLFxuICAgICgweDMyQzQsIFwnTVwnLCBcJzVceGU2XHg5Y1x4ODhcJyksXG4gICAgKDB4MzJDNSwgXCdNXCcsIFwnNlx4ZTZceDljXHg4OFwnKSxcbiAgICAoMHgzMkM2LCBcJ01cJywgXCc3XHhlNlx4OWNceDg4XCcpLFxuICAgICgweDMyQzcsIFwnTVwnLCBcJzhceGU2XHg5Y1x4ODhcJyksXG4gICAgKDB4MzJDOCwgXCdNXCcsIFwnOVx4ZTZceDljXHg4OFwnKSxcbiAgICAoMHgzMkM5LCBcJ01cJywgXCcxMFx4ZTZceDljXHg4OFwnKSxcbiAgICAoMHgzMkNBLCBcJ01cJywgXCcxMVx4ZTZceDljXHg4OFwnKSxcbiAgICAoMHgzMkNCLCBcJ01cJywgXCcxMlx4ZTZceDljXHg4OFwnKSxcbiAgICAoMHgzMkNDLCBcJ01cJywgXCdoZ1wnKSxcbiAgICAoMHgzMkNELCBcJ01cJywgXCdlcmdcJyksXG4gICAgKDB4MzJDRSwgXCdNXCcsIFwnZXZcJyksXG4gICAgKDB4MzJDRiwgXCdNXCcsIFwnbHRkXCcpLFxuICAgICgweDMyRDAsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhMlwnKSxcbiAgICAoMHgzMkQxLCBcJ01cJywgXCdceGUzXHg4Mlx4YTRcJyksXG4gICAgKDB4MzJEMiwgXCdNXCcsIFwnXHhlM1x4ODJceGE2XCcpLFxuICAgICgweDMyRDMsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhOFwnKSxcbiAgICAoMHgzMkQ0LCBcJ01cJywgXCdceGUzXHg4Mlx4YWFcJyksXG4gICAgKDB4MzJENSwgXCdNXCcsIFwnXHhlM1x4ODJceGFiXCcpLFxuICAgICgweDMyRDYsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhZFwnKSxcbiAgICAoMHgzMkQ3LCBcJ01cJywgXCdceGUzXHg4Mlx4YWZcJyksXG4gICAgKDB4MzJEOCwgXCdNXCcsIFwnXHhlM1x4ODJceGIxXCcpLFxuICAgICgweDMyRDksIFwnTVwnLCBcJ1x4ZTNceDgyXHhiM1wnKSxcbiAgICAoMHgzMkRBLCBcJ01cJywgXCdceGUzXHg4Mlx4YjVcJyksXG4gICAgKDB4MzJEQiwgXCdNXCcsIFwnXHhlM1x4ODJceGI3XCcpLFxuICAgICgweDMyREMsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiOVwnKSxcbiAgICAoMHgzMkRELCBcJ01cJywgXCdceGUzXHg4Mlx4YmJcJyksXG4gICAgKDB4MzJERSwgXCdNXCcsIFwnXHhlM1x4ODJceGJkXCcpLFxuICAgICgweDMyREYsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiZlwnKSxcbiAgICAoMHgzMkUwLCBcJ01cJywgXCdceGUzXHg4M1x4ODFcJyksXG4gICAgKDB4MzJFMSwgXCdNXCcsIFwnXHhlM1x4ODNceDg0XCcpLFxuICAgICgweDMyRTIsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4NlwnKSxcbiAgICAoMHgzMkUzLCBcJ01cJywgXCdceGUzXHg4M1x4ODhcJyksXG4gICAgKDB4MzJFNCwgXCdNXCcsIFwnXHhlM1x4ODNceDhhXCcpLFxuICAgICgweDMyRTUsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4YlwnKSxcbiAgICAoMHgzMkU2LCBcJ01cJywgXCdceGUzXHg4M1x4OGNcJyksXG4gICAgKDB4MzJFNywgXCdNXCcsIFwnXHhlM1x4ODNceDhkXCcpLFxuICAgICgweDMyRTgsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4ZVwnKSxcbiAgICAoMHgzMkU5LCBcJ01cJywgXCdceGUzXHg4M1x4OGZcJyksXG4gICAgKDB4MzJFQSwgXCdNXCcsIFwnXHhlM1x4ODNceDkyXCcpLFxuICAgICgweDMyRUIsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5NVwnKSxcbiAgICAoMHgzMkVDLCBcJ01cJywgXCdceGUzXHg4M1x4OThcJyksXG4gICAgKDB4MzJFRCwgXCdNXCcsIFwnXHhlM1x4ODNceDliXCcpLFxuICAgICgweDMyRUUsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5ZVwnKSxcbiAgICAoMHgzMkVGLCBcJ01cJywgXCdceGUzXHg4M1x4OWZcJyksXG4gICAgKDB4MzJGMCwgXCdNXCcsIFwnXHhlM1x4ODNceGEwXCcpLFxuICAgICgweDMyRjEsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhMVwnKSxcbiAgICAoMHgzMkYyLCBcJ01cJywgXCdceGUzXHg4M1x4YTJcJyksXG4gICAgKDB4MzJGMywgXCdNXCcsIFwnXHhlM1x4ODNceGE0XCcpLFxuICAgICgweDMyRjQsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhNlwnKSxcbiAgICAoMHgzMkY1LCBcJ01cJywgXCdceGUzXHg4M1x4YThcJyksXG4gICAgKDB4MzJGNiwgXCdNXCcsIFwnXHhlM1x4ODNceGE5XCcpLFxuICAgICgweDMyRjcsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhYVwnKSxcbiAgICAoMHgzMkY4LCBcJ01cJywgXCdceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzJGOSwgXCdNXCcsIFwnXHhlM1x4ODNceGFjXCcpLFxuICAgICgweDMyRkEsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhZFwnKSxcbiAgICAoMHgzMkZCLCBcJ01cJywgXCdceGUzXHg4M1x4YWZcJyksXG4gICAgKDB4MzJGQywgXCdNXCcsIFwnXHhlM1x4ODNceGIwXCcpLFxuICAgICgweDMyRkQsIFwnTVwnLCBcJ1x4ZTNceDgzXHhiMVwnKSxcbiAgICAoMHgzMkZFLCBcJ01cJywgXCdceGUzXHg4M1x4YjJcJyksXG4gICAgKDB4MzJGRiwgXCdNXCcsIFwnXHhlNFx4YmJceGE0XHhlNVx4OTJceDhjXCcpLFxuICAgICgweDMzMDAsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhMlx4ZTNceDgzXHg5MVx4ZTNceDgzXHhiY1x4ZTNceDgzXHg4OFwnKSxcbiAgICAoMHgzMzAxLCBcJ01cJywgXCdceGUzXHg4Mlx4YTJceGUzXHg4M1x4YWJceGUzXHg4M1x4OTVceGUzXHg4Mlx4YTFcJyksXG4gICAgKDB4MzMwMiwgXCdNXCcsIFwnXHhlM1x4ODJceGEyXHhlM1x4ODNceGIzXHhlM1x4ODNceDlhXHhlM1x4ODJceGEyXCcpLFxuICAgICgweDMzMDMsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhMlx4ZTNceDgzXHhiY1x4ZTNceDgzXHhhYlwnKSxcbiAgICAoMHgzMzA0LCBcJ01cJywgXCdceGUzXHg4Mlx4YTRceGUzXHg4M1x4OGJceGUzXHg4M1x4YjNceGUzXHg4Mlx4YjBcJyksXG4gICAgKDB4MzMwNSwgXCdNXCcsIFwnXHhlM1x4ODJceGE0XHhlM1x4ODNceGIzXHhlM1x4ODNceDgxXCcpLFxuICAgICgweDMzMDYsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhNlx4ZTNceDgyXHhhOVx4ZTNceDgzXHhiM1wnKSxcbiAgICAoMHgzMzA3LCBcJ01cJywgXCdceGUzXHg4Mlx4YThceGUzXHg4Mlx4YjlceGUzXHg4Mlx4YWZceGUzXHg4M1x4YmNceGUzXHg4M1x4ODlcJyksXG4gICAgKDB4MzMwOCwgXCdNXCcsIFwnXHhlM1x4ODJceGE4XHhlM1x4ODNceGJjXHhlM1x4ODJceGFiXHhlM1x4ODNceGJjXCcpLFxuICAgICgweDMzMDksIFwnTVwnLCBcJ1x4ZTNceDgyXHhhYVx4ZTNceDgzXHhiM1x4ZTNceDgyXHhiOVwnKSxcbiAgICAoMHgzMzBBLCBcJ01cJywgXCdceGUzXHg4Mlx4YWFceGUzXHg4M1x4YmNceGUzXHg4M1x4YTBcJyksXG4gICAgKDB4MzMwQiwgXCdNXCcsIFwnXHhlM1x4ODJceGFiXHhlM1x4ODJceGE0XHhlM1x4ODNceGFhXCcpLFxuICAgICgweDMzMEMsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhYlx4ZTNceDgzXHhhOVx4ZTNceDgzXHg4M1x4ZTNceDgzXHg4OFwnKSxcbiAgICAoMHgzMzBELCBcJ01cJywgXCdceGUzXHg4Mlx4YWJceGUzXHg4M1x4YWRceGUzXHg4M1x4YWFceGUzXHg4M1x4YmNcJyksXG4gICAgKDB4MzMwRSwgXCdNXCcsIFwnXHhlM1x4ODJceGFjXHhlM1x4ODNceGFkXHhlM1x4ODNceGIzXCcpLFxuICAgICgweDMzMEYsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhY1x4ZTNceDgzXHhiM1x4ZTNceDgzXHg5ZVwnKSxcbiAgICAoMHgzMzEwLCBcJ01cJywgXCdceGUzXHg4Mlx4YWVceGUzXHg4Mlx4YWNcJyksXG4gICAgKDB4MzMxMSwgXCdNXCcsIFwnXHhlM1x4ODJceGFlXHhlM1x4ODNceDhiXHhlM1x4ODNceGJjXCcpLFxuICAgICgweDMzMTIsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhZFx4ZTNceDgzXHhhNVx4ZTNceDgzXHhhYVx4ZTNceDgzXHhiY1wnKSxcbiAgICAoMHgzMzEzLCBcJ01cJywgXCdceGUzXHg4Mlx4YWVceGUzXHg4M1x4YWJceGUzXHg4M1x4ODBceGUzXHg4M1x4YmNcJyksXG4gICAgKDB4MzMxNCwgXCdNXCcsIFwnXHhlM1x4ODJceGFkXHhlM1x4ODNceGFkXCcpLFxuICAgICgweDMzMTUsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhZFx4ZTNceDgzXHhhZFx4ZTNceDgyXHhiMFx4ZTNceDgzXHhhOVx4ZTNceDgzXHhhMFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzMzKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgzMzE2LCBcJ01cJywgXCdceGUzXHg4Mlx4YWRceGUzXHg4M1x4YWRceGUzXHg4M1x4YTFceGUzXHg4M1x4YmNceGUzXHg4M1x4ODhceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzMxNywgXCdNXCcsIFwnXHhlM1x4ODJceGFkXHhlM1x4ODNceGFkXHhlM1x4ODNceGFmXHhlM1x4ODNceDgzXHhlM1x4ODNceDg4XCcpLFxuICAgICgweDMzMTgsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiMFx4ZTNceDgzXHhhOVx4ZTNceDgzXHhhMFwnKSxcbiAgICAoMHgzMzE5LCBcJ01cJywgXCdceGUzXHg4Mlx4YjBceGUzXHg4M1x4YTlceGUzXHg4M1x4YTBceGUzXHg4M1x4ODhceGUzXHg4M1x4YjNcJyksXG4gICAgKDB4MzMxQSwgXCdNXCcsIFwnXHhlM1x4ODJceGFmXHhlM1x4ODNceGFiXHhlM1x4ODJceGJjXHhlM1x4ODJceGE0XHhlM1x4ODNceGFkXCcpLFxuICAgICgweDMzMUIsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhZlx4ZTNceDgzXHhhZFx4ZTNceDgzXHhiY1x4ZTNceDgzXHg4ZFwnKSxcbiAgICAoMHgzMzFDLCBcJ01cJywgXCdceGUzXHg4Mlx4YjFceGUzXHg4M1x4YmNceGUzXHg4Mlx4YjlcJyksXG4gICAgKDB4MzMxRCwgXCdNXCcsIFwnXHhlM1x4ODJceGIzXHhlM1x4ODNceGFiXHhlM1x4ODNceDhhXCcpLFxuICAgICgweDMzMUUsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiM1x4ZTNceDgzXHhiY1x4ZTNceDgzXHg5ZFwnKSxcbiAgICAoMHgzMzFGLCBcJ01cJywgXCdceGUzXHg4Mlx4YjVceGUzXHg4Mlx4YTRceGUzXHg4Mlx4YWZceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzMyMCwgXCdNXCcsIFwnXHhlM1x4ODJceGI1XHhlM1x4ODNceGIzXHhlM1x4ODNceDgxXHhlM1x4ODNceGJjXHhlM1x4ODNceGEwXCcpLFxuICAgICgweDMzMjEsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiN1x4ZTNceDgzXHhhYVx4ZTNceDgzXHhiM1x4ZTNceDgyXHhiMFwnKSxcbiAgICAoMHgzMzIyLCBcJ01cJywgXCdceGUzXHg4Mlx4YmJceGUzXHg4M1x4YjNceGUzXHg4M1x4ODFcJyksXG4gICAgKDB4MzMyMywgXCdNXCcsIFwnXHhlM1x4ODJceGJiXHhlM1x4ODNceGIzXHhlM1x4ODNceDg4XCcpLFxuICAgICgweDMzMjQsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4MFx4ZTNceDgzXHhiY1x4ZTNceDgyXHhiOVwnKSxcbiAgICAoMHgzMzI1LCBcJ01cJywgXCdceGUzXHg4M1x4ODdceGUzXHg4Mlx4YjdcJyksXG4gICAgKDB4MzMyNiwgXCdNXCcsIFwnXHhlM1x4ODNceDg5XHhlM1x4ODNceGFiXCcpLFxuICAgICgweDMzMjcsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4OFx4ZTNceDgzXHhiM1wnKSxcbiAgICAoMHgzMzI4LCBcJ01cJywgXCdceGUzXHg4M1x4OGFceGUzXHg4M1x4OGVcJyksXG4gICAgKDB4MzMyOSwgXCdNXCcsIFwnXHhlM1x4ODNceDhlXHhlM1x4ODNceDgzXHhlM1x4ODNceDg4XCcpLFxuICAgICgweDMzMkEsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4Zlx4ZTNceDgyXHhhNFx4ZTNceDgzXHg4NFwnKSxcbiAgICAoMHgzMzJCLCBcJ01cJywgXCdceGUzXHg4M1x4OTFceGUzXHg4M1x4YmNceGUzXHg4Mlx4YmJceGUzXHg4M1x4YjNceGUzXHg4M1x4ODhcJyksXG4gICAgKDB4MzMyQywgXCdNXCcsIFwnXHhlM1x4ODNceDkxXHhlM1x4ODNceGJjXHhlM1x4ODNceDg0XCcpLFxuICAgICgweDMzMkQsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5MFx4ZTNceDgzXHhiY1x4ZTNceDgzXHhhY1x4ZTNceDgzXHhhYlwnKSxcbiAgICAoMHgzMzJFLCBcJ01cJywgXCdceGUzXHg4M1x4OTRceGUzXHg4Mlx4YTJceGUzXHg4Mlx4YjlceGUzXHg4M1x4ODhceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzMyRiwgXCdNXCcsIFwnXHhlM1x4ODNceDk0XHhlM1x4ODJceGFmXHhlM1x4ODNceGFiXCcpLFxuICAgICgweDMzMzAsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5NFx4ZTNceDgyXHhiM1wnKSxcbiAgICAoMHgzMzMxLCBcJ01cJywgXCdceGUzXHg4M1x4OTNceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzMzMiwgXCdNXCcsIFwnXHhlM1x4ODNceDk1XHhlM1x4ODJceGExXHhlM1x4ODNceGE5XHhlM1x4ODNceDgzXHhlM1x4ODNceDg5XCcpLFxuICAgICgweDMzMzMsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5NVx4ZTNceDgyXHhhM1x4ZTNceDgzXHhiY1x4ZTNceDgzXHg4OFwnKSxcbiAgICAoMHgzMzM0LCBcJ01cJywgXCdceGUzXHg4M1x4OTZceGUzXHg4M1x4ODNceGUzXHg4Mlx4YjdceGUzXHg4Mlx4YTdceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzMzNSwgXCdNXCcsIFwnXHhlM1x4ODNceDk1XHhlM1x4ODNceGE5XHhlM1x4ODNceGIzXCcpLFxuICAgICgweDMzMzYsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5OFx4ZTNceDgyXHhhZlx4ZTNceDgyXHhiZlx4ZTNceDgzXHhiY1x4ZTNceDgzXHhhYlwnKSxcbiAgICAoMHgzMzM3LCBcJ01cJywgXCdceGUzXHg4M1x4OWFceGUzXHg4Mlx4YmRcJyksXG4gICAgKDB4MzMzOCwgXCdNXCcsIFwnXHhlM1x4ODNceDlhXHhlM1x4ODNceDhiXHhlM1x4ODNceDkyXCcpLFxuICAgICgweDMzMzksIFwnTVwnLCBcJ1x4ZTNceDgzXHg5OFx4ZTNceDgzXHhhYlx4ZTNceDgzXHg4NFwnKSxcbiAgICAoMHgzMzNBLCBcJ01cJywgXCdceGUzXHg4M1x4OWFceGUzXHg4M1x4YjNceGUzXHg4Mlx4YjlcJyksXG4gICAgKDB4MzMzQiwgXCdNXCcsIFwnXHhlM1x4ODNceDlhXHhlM1x4ODNceGJjXHhlM1x4ODJceGI4XCcpLFxuICAgICgweDMzM0MsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5OVx4ZTNceDgzXHhiY1x4ZTNceDgyXHhiZlwnKSxcbiAgICAoMHgzMzNELCBcJ01cJywgXCdceGUzXHg4M1x4OWRceGUzXHg4Mlx4YTRceGUzXHg4M1x4YjNceGUzXHg4M1x4ODhcJyksXG4gICAgKDB4MzMzRSwgXCdNXCcsIFwnXHhlM1x4ODNceDljXHhlM1x4ODNceGFiXHhlM1x4ODNceDg4XCcpLFxuICAgICgweDMzM0YsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5Ylx4ZTNceDgzXHhiM1wnKSxcbiAgICAoMHgzMzQwLCBcJ01cJywgXCdceGUzXHg4M1x4OWRceGUzXHg4M1x4YjNceGUzXHg4M1x4ODlcJyksXG4gICAgKDB4MzM0MSwgXCdNXCcsIFwnXHhlM1x4ODNceDliXHhlM1x4ODNceGJjXHhlM1x4ODNceGFiXCcpLFxuICAgICgweDMzNDIsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5Ylx4ZTNceDgzXHhiY1x4ZTNceDgzXHhiM1wnKSxcbiAgICAoMHgzMzQzLCBcJ01cJywgXCdceGUzXHg4M1x4OWVceGUzXHg4Mlx4YTRceGUzXHg4Mlx4YWZceGUzXHg4M1x4YWRcJyksXG4gICAgKDB4MzM0NCwgXCdNXCcsIFwnXHhlM1x4ODNceDllXHhlM1x4ODJceGE0XHhlM1x4ODNceGFiXCcpLFxuICAgICgweDMzNDUsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5ZVx4ZTNceDgzXHg4M1x4ZTNceDgzXHg4ZlwnKSxcbiAgICAoMHgzMzQ2LCBcJ01cJywgXCdceGUzXHg4M1x4OWVceGUzXHg4M1x4YWJceGUzXHg4Mlx4YWZcJyksXG4gICAgKDB4MzM0NywgXCdNXCcsIFwnXHhlM1x4ODNceDllXHhlM1x4ODNceGIzXHhlM1x4ODJceGI3XHhlM1x4ODNceGE3XHhlM1x4ODNceGIzXCcpLFxuICAgICgweDMzNDgsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5Zlx4ZTNceDgyXHhhZlx4ZTNceDgzXHhhZFx4ZTNceDgzXHhiM1wnKSxcbiAgICAoMHgzMzQ5LCBcJ01cJywgXCdceGUzXHg4M1x4OWZceGUzXHg4M1x4YWFcJyksXG4gICAgKDB4MzM0QSwgXCdNXCcsIFwnXHhlM1x4ODNceDlmXHhlM1x4ODNceGFhXHhlM1x4ODNceDkwXHhlM1x4ODNceGJjXHhlM1x4ODNceGFiXCcpLFxuICAgICgweDMzNEIsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhMVx4ZTNceDgyXHhhY1wnKSxcbiAgICAoMHgzMzRDLCBcJ01cJywgXCdceGUzXHg4M1x4YTFceGUzXHg4Mlx4YWNceGUzXHg4M1x4ODhceGUzXHg4M1x4YjNcJyksXG4gICAgKDB4MzM0RCwgXCdNXCcsIFwnXHhlM1x4ODNceGExXHhlM1x4ODNceGJjXHhlM1x4ODNceDg4XHhlM1x4ODNceGFiXCcpLFxuICAgICgweDMzNEUsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhNFx4ZTNceDgzXHhiY1x4ZTNceDgzXHg4OVwnKSxcbiAgICAoMHgzMzRGLCBcJ01cJywgXCdceGUzXHg4M1x4YTRceGUzXHg4M1x4YmNceGUzXHg4M1x4YWJcJyksXG4gICAgKDB4MzM1MCwgXCdNXCcsIFwnXHhlM1x4ODNceGE2XHhlM1x4ODJceGEyXHhlM1x4ODNceGIzXCcpLFxuICAgICgweDMzNTEsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhYVx4ZTNceDgzXHg4M1x4ZTNceDgzXHg4OFx4ZTNceDgzXHhhYlwnKSxcbiAgICAoMHgzMzUyLCBcJ01cJywgXCdceGUzXHg4M1x4YWFceGUzXHg4M1x4YTlcJyksXG4gICAgKDB4MzM1MywgXCdNXCcsIFwnXHhlM1x4ODNceGFiXHhlM1x4ODNceDk0XHhlM1x4ODNceGJjXCcpLFxuICAgICgweDMzNTQsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhYlx4ZTNceDgzXHhiY1x4ZTNceDgzXHg5Nlx4ZTNceDgzXHhhYlwnKSxcbiAgICAoMHgzMzU1LCBcJ01cJywgXCdceGUzXHg4M1x4YWNceGUzXHg4M1x4YTBcJyksXG4gICAgKDB4MzM1NiwgXCdNXCcsIFwnXHhlM1x4ODNceGFjXHhlM1x4ODNceGIzXHhlM1x4ODNceDg4XHhlM1x4ODJceGIyXHhlM1x4ODNceGIzXCcpLFxuICAgICgweDMzNTcsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhZlx4ZTNceDgzXHg4M1x4ZTNceDgzXHg4OFwnKSxcbiAgICAoMHgzMzU4LCBcJ01cJywgXCcwXHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNTksIFwnTVwnLCBcJzFceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM1QSwgXCdNXCcsIFwnMlx4ZTdceDgyXHhiOVwnKSxcbiAgICAoMHgzMzVCLCBcJ01cJywgXCczXHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNUMsIFwnTVwnLCBcJzRceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM1RCwgXCdNXCcsIFwnNVx4ZTdceDgyXHhiOVwnKSxcbiAgICAoMHgzMzVFLCBcJ01cJywgXCc2XHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNUYsIFwnTVwnLCBcJzdceGU3XHg4Mlx4YjlcJyksXG4gICAgKDB4MzM2MCwgXCdNXCcsIFwnOFx4ZTdceDgyXHhiOVwnKSxcbiAgICAoMHgzMzYxLCBcJ01cJywgXCc5XHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNjIsIFwnTVwnLCBcJzEwXHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNjMsIFwnTVwnLCBcJzExXHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNjQsIFwnTVwnLCBcJzEyXHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNjUsIFwnTVwnLCBcJzEzXHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNjYsIFwnTVwnLCBcJzE0XHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNjcsIFwnTVwnLCBcJzE1XHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNjgsIFwnTVwnLCBcJzE2XHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNjksIFwnTVwnLCBcJzE3XHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNkEsIFwnTVwnLCBcJzE4XHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNkIsIFwnTVwnLCBcJzE5XHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNkMsIFwnTVwnLCBcJzIwXHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNkQsIFwnTVwnLCBcJzIxXHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNkUsIFwnTVwnLCBcJzIyXHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNkYsIFwnTVwnLCBcJzIzXHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNzAsIFwnTVwnLCBcJzI0XHhlN1x4ODJceGI5XCcpLFxuICAgICgweDMzNzEsIFwnTVwnLCBcJ2hwYVwnKSxcbiAgICAoMHgzMzcyLCBcJ01cJywgXCdkYVwnKSxcbiAgICAoMHgzMzczLCBcJ01cJywgXCdhdVwnKSxcbiAgICAoMHgzMzc0LCBcJ01cJywgXCdiYXJcJyksXG4gICAgKDB4MzM3NSwgXCdNXCcsIFwnb3ZcJyksXG4gICAgKDB4MzM3NiwgXCdNXCcsIFwncGNcJyksXG4gICAgKDB4MzM3NywgXCdNXCcsIFwnZG1cJyksXG4gICAgKDB4MzM3OCwgXCdNXCcsIFwnZG0yXCcpLFxuICAgICgweDMzNzksIFwnTVwnLCBcJ2RtM1wnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzM0KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgzMzdBLCBcJ01cJywgXCdpdVwnKSxcbiAgICAoMHgzMzdCLCBcJ01cJywgXCdceGU1XHhiOVx4YjNceGU2XHg4OFx4OTBcJyksXG4gICAgKDB4MzM3QywgXCdNXCcsIFwnXHhlNlx4OThceGFkXHhlNVx4OTJceDhjXCcpLFxuICAgICgweDMzN0QsIFwnTVwnLCBcJ1x4ZTVceGE0XHhhN1x4ZTZceGFkXHhhM1wnKSxcbiAgICAoMHgzMzdFLCBcJ01cJywgXCdceGU2XHg5OFx4OGVceGU2XHhiMlx4YmJcJyksXG4gICAgKDB4MzM3RiwgXCdNXCcsIFwnXHhlNlx4YTBceGFhXHhlNVx4YmNceDhmXHhlNFx4YmNceDlhXHhlN1x4YTRceGJlXCcpLFxuICAgICgweDMzODAsIFwnTVwnLCBcJ3BhXCcpLFxuICAgICgweDMzODEsIFwnTVwnLCBcJ25hXCcpLFxuICAgICgweDMzODIsIFwnTVwnLCBcJ1x4Y2VceGJjYVwnKSxcbiAgICAoMHgzMzgzLCBcJ01cJywgXCdtYVwnKSxcbiAgICAoMHgzMzg0LCBcJ01cJywgXCdrYVwnKSxcbiAgICAoMHgzMzg1LCBcJ01cJywgXCdrYlwnKSxcbiAgICAoMHgzMzg2LCBcJ01cJywgXCdtYlwnKSxcbiAgICAoMHgzMzg3LCBcJ01cJywgXCdnYlwnKSxcbiAgICAoMHgzMzg4LCBcJ01cJywgXCdjYWxcJyksXG4gICAgKDB4MzM4OSwgXCdNXCcsIFwna2NhbFwnKSxcbiAgICAoMHgzMzhBLCBcJ01cJywgXCdwZlwnKSxcbiAgICAoMHgzMzhCLCBcJ01cJywgXCduZlwnKSxcbiAgICAoMHgzMzhDLCBcJ01cJywgXCdceGNlXHhiY2ZcJyksXG4gICAgKDB4MzM4RCwgXCdNXCcsIFwnXHhjZVx4YmNnXCcpLFxuICAgICgweDMzOEUsIFwnTVwnLCBcJ21nXCcpLFxuICAgICgweDMzOEYsIFwnTVwnLCBcJ2tnXCcpLFxuICAgICgweDMzOTAsIFwnTVwnLCBcJ2h6XCcpLFxuICAgICgweDMzOTEsIFwnTVwnLCBcJ2toelwnKSxcbiAgICAoMHgzMzkyLCBcJ01cJywgXCdtaHpcJyksXG4gICAgKDB4MzM5MywgXCdNXCcsIFwnZ2h6XCcpLFxuICAgICgweDMzOTQsIFwnTVwnLCBcJ3RoelwnKSxcbiAgICAoMHgzMzk1LCBcJ01cJywgXCdceGNlXHhiY2xcJyksXG4gICAgKDB4MzM5NiwgXCdNXCcsIFwnbWxcJyksXG4gICAgKDB4MzM5NywgXCdNXCcsIFwnZGxcJyksXG4gICAgKDB4MzM5OCwgXCdNXCcsIFwna2xcJyksXG4gICAgKDB4MzM5OSwgXCdNXCcsIFwnZm1cJyksXG4gICAgKDB4MzM5QSwgXCdNXCcsIFwnbm1cJyksXG4gICAgKDB4MzM5QiwgXCdNXCcsIFwnXHhjZVx4YmNtXCcpLFxuICAgICgweDMzOUMsIFwnTVwnLCBcJ21tXCcpLFxuICAgICgweDMzOUQsIFwnTVwnLCBcJ2NtXCcpLFxuICAgICgweDMzOUUsIFwnTVwnLCBcJ2ttXCcpLFxuICAgICgweDMzOUYsIFwnTVwnLCBcJ21tMlwnKSxcbiAgICAoMHgzM0EwLCBcJ01cJywgXCdjbTJcJyksXG4gICAgKDB4MzNBMSwgXCdNXCcsIFwnbTJcJyksXG4gICAgKDB4MzNBMiwgXCdNXCcsIFwna20yXCcpLFxuICAgICgweDMzQTMsIFwnTVwnLCBcJ21tM1wnKSxcbiAgICAoMHgzM0E0LCBcJ01cJywgXCdjbTNcJyksXG4gICAgKDB4MzNBNSwgXCdNXCcsIFwnbTNcJyksXG4gICAgKDB4MzNBNiwgXCdNXCcsIFwna20zXCcpLFxuICAgICgweDMzQTcsIFwnTVwnLCBcJ21ceGUyXHg4OFx4OTVzXCcpLFxuICAgICgweDMzQTgsIFwnTVwnLCBcJ21ceGUyXHg4OFx4OTVzMlwnKSxcbiAgICAoMHgzM0E5LCBcJ01cJywgXCdwYVwnKSxcbiAgICAoMHgzM0FBLCBcJ01cJywgXCdrcGFcJyksXG4gICAgKDB4MzNBQiwgXCdNXCcsIFwnbXBhXCcpLFxuICAgICgweDMzQUMsIFwnTVwnLCBcJ2dwYVwnKSxcbiAgICAoMHgzM0FELCBcJ01cJywgXCdyYWRcJyksXG4gICAgKDB4MzNBRSwgXCdNXCcsIFwncmFkXHhlMlx4ODhceDk1c1wnKSxcbiAgICAoMHgzM0FGLCBcJ01cJywgXCdyYWRceGUyXHg4OFx4OTVzMlwnKSxcbiAgICAoMHgzM0IwLCBcJ01cJywgXCdwc1wnKSxcbiAgICAoMHgzM0IxLCBcJ01cJywgXCduc1wnKSxcbiAgICAoMHgzM0IyLCBcJ01cJywgXCdceGNlXHhiY3NcJyksXG4gICAgKDB4MzNCMywgXCdNXCcsIFwnbXNcJyksXG4gICAgKDB4MzNCNCwgXCdNXCcsIFwncHZcJyksXG4gICAgKDB4MzNCNSwgXCdNXCcsIFwnbnZcJyksXG4gICAgKDB4MzNCNiwgXCdNXCcsIFwnXHhjZVx4YmN2XCcpLFxuICAgICgweDMzQjcsIFwnTVwnLCBcJ212XCcpLFxuICAgICgweDMzQjgsIFwnTVwnLCBcJ2t2XCcpLFxuICAgICgweDMzQjksIFwnTVwnLCBcJ212XCcpLFxuICAgICgweDMzQkEsIFwnTVwnLCBcJ3B3XCcpLFxuICAgICgweDMzQkIsIFwnTVwnLCBcJ253XCcpLFxuICAgICgweDMzQkMsIFwnTVwnLCBcJ1x4Y2VceGJjd1wnKSxcbiAgICAoMHgzM0JELCBcJ01cJywgXCdtd1wnKSxcbiAgICAoMHgzM0JFLCBcJ01cJywgXCdrd1wnKSxcbiAgICAoMHgzM0JGLCBcJ01cJywgXCdtd1wnKSxcbiAgICAoMHgzM0MwLCBcJ01cJywgXCdrXHhjZlx4ODlcJyksXG4gICAgKDB4MzNDMSwgXCdNXCcsIFwnbVx4Y2ZceDg5XCcpLFxuICAgICgweDMzQzIsIFwnWFwnKSxcbiAgICAoMHgzM0MzLCBcJ01cJywgXCdicVwnKSxcbiAgICAoMHgzM0M0LCBcJ01cJywgXCdjY1wnKSxcbiAgICAoMHgzM0M1LCBcJ01cJywgXCdjZFwnKSxcbiAgICAoMHgzM0M2LCBcJ01cJywgXCdjXHhlMlx4ODhceDk1a2dcJyksXG4gICAgKDB4MzNDNywgXCdYXCcpLFxuICAgICgweDMzQzgsIFwnTVwnLCBcJ2RiXCcpLFxuICAgICgweDMzQzksIFwnTVwnLCBcJ2d5XCcpLFxuICAgICgweDMzQ0EsIFwnTVwnLCBcJ2hhXCcpLFxuICAgICgweDMzQ0IsIFwnTVwnLCBcJ2hwXCcpLFxuICAgICgweDMzQ0MsIFwnTVwnLCBcJ2luXCcpLFxuICAgICgweDMzQ0QsIFwnTVwnLCBcJ2trXCcpLFxuICAgICgweDMzQ0UsIFwnTVwnLCBcJ2ttXCcpLFxuICAgICgweDMzQ0YsIFwnTVwnLCBcJ2t0XCcpLFxuICAgICgweDMzRDAsIFwnTVwnLCBcJ2xtXCcpLFxuICAgICgweDMzRDEsIFwnTVwnLCBcJ2xuXCcpLFxuICAgICgweDMzRDIsIFwnTVwnLCBcJ2xvZ1wnKSxcbiAgICAoMHgzM0QzLCBcJ01cJywgXCdseFwnKSxcbiAgICAoMHgzM0Q0LCBcJ01cJywgXCdtYlwnKSxcbiAgICAoMHgzM0Q1LCBcJ01cJywgXCdtaWxcJyksXG4gICAgKDB4MzNENiwgXCdNXCcsIFwnbW9sXCcpLFxuICAgICgweDMzRDcsIFwnTVwnLCBcJ3BoXCcpLFxuICAgICgweDMzRDgsIFwnWFwnKSxcbiAgICAoMHgzM0Q5LCBcJ01cJywgXCdwcG1cJyksXG4gICAgKDB4MzNEQSwgXCdNXCcsIFwncHJcJyksXG4gICAgKDB4MzNEQiwgXCdNXCcsIFwnc3JcJyksXG4gICAgKDB4MzNEQywgXCdNXCcsIFwnc3ZcJyksXG4gICAgKDB4MzNERCwgXCdNXCcsIFwnd2JcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18zNSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MzNERSwgXCdNXCcsIFwndlx4ZTJceDg4XHg5NW1cJyksXG4gICAgKDB4MzNERiwgXCdNXCcsIFwnYVx4ZTJceDg4XHg5NW1cJyksXG4gICAgKDB4MzNFMCwgXCdNXCcsIFwnMVx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0UxLCBcJ01cJywgXCcyXHhlNlx4OTdceGE1XCcpLFxuICAgICgweDMzRTIsIFwnTVwnLCBcJzNceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNFMywgXCdNXCcsIFwnNFx4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0U0LCBcJ01cJywgXCc1XHhlNlx4OTdceGE1XCcpLFxuICAgICgweDMzRTUsIFwnTVwnLCBcJzZceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNFNiwgXCdNXCcsIFwnN1x4ZTZceDk3XHhhNVwnKSxcbiAgICAoMHgzM0U3LCBcJ01cJywgXCc4XHhlNlx4OTdceGE1XCcpLFxuICAgICgweDMzRTgsIFwnTVwnLCBcJzlceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNFOSwgXCdNXCcsIFwnMTBceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNFQSwgXCdNXCcsIFwnMTFceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNFQiwgXCdNXCcsIFwnMTJceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNFQywgXCdNXCcsIFwnMTNceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNFRCwgXCdNXCcsIFwnMTRceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNFRSwgXCdNXCcsIFwnMTVceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNFRiwgXCdNXCcsIFwnMTZceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGMCwgXCdNXCcsIFwnMTdceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGMSwgXCdNXCcsIFwnMThceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGMiwgXCdNXCcsIFwnMTlceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGMywgXCdNXCcsIFwnMjBceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGNCwgXCdNXCcsIFwnMjFceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGNSwgXCdNXCcsIFwnMjJceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGNiwgXCdNXCcsIFwnMjNceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGNywgXCdNXCcsIFwnMjRceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGOCwgXCdNXCcsIFwnMjVceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGOSwgXCdNXCcsIFwnMjZceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGQSwgXCdNXCcsIFwnMjdceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGQiwgXCdNXCcsIFwnMjhceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGQywgXCdNXCcsIFwnMjlceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGRCwgXCdNXCcsIFwnMzBceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGRSwgXCdNXCcsIFwnMzFceGU2XHg5N1x4YTVcJyksXG4gICAgKDB4MzNGRiwgXCdNXCcsIFwnZ2FsXCcpLFxuICAgICgweDM0MDAsIFwnVlwnKSxcbiAgICAoMHhBNDhELCBcJ1hcJyksXG4gICAgKDB4QTQ5MCwgXCdWXCcpLFxuICAgICgweEE0QzcsIFwnWFwnKSxcbiAgICAoMHhBNEQwLCBcJ1ZcJyksXG4gICAgKDB4QTYyQywgXCdYXCcpLFxuICAgICgweEE2NDAsIFwnTVwnLCBcJ1x4ZWFceDk5XHg4MVwnKSxcbiAgICAoMHhBNjQxLCBcJ1ZcJyksXG4gICAgKDB4QTY0MiwgXCdNXCcsIFwnXHhlYVx4OTlceDgzXCcpLFxuICAgICgweEE2NDMsIFwnVlwnKSxcbiAgICAoMHhBNjQ0LCBcJ01cJywgXCdceGVhXHg5OVx4ODVcJyksXG4gICAgKDB4QTY0NSwgXCdWXCcpLFxuICAgICgweEE2NDYsIFwnTVwnLCBcJ1x4ZWFceDk5XHg4N1wnKSxcbiAgICAoMHhBNjQ3LCBcJ1ZcJyksXG4gICAgKDB4QTY0OCwgXCdNXCcsIFwnXHhlYVx4OTlceDg5XCcpLFxuICAgICgweEE2NDksIFwnVlwnKSxcbiAgICAoMHhBNjRBLCBcJ01cJywgXCdceGVhXHg5OVx4OGJcJyksXG4gICAgKDB4QTY0QiwgXCdWXCcpLFxuICAgICgweEE2NEMsIFwnTVwnLCBcJ1x4ZWFceDk5XHg4ZFwnKSxcbiAgICAoMHhBNjRELCBcJ1ZcJyksXG4gICAgKDB4QTY0RSwgXCdNXCcsIFwnXHhlYVx4OTlceDhmXCcpLFxuICAgICgweEE2NEYsIFwnVlwnKSxcbiAgICAoMHhBNjUwLCBcJ01cJywgXCdceGVhXHg5OVx4OTFcJyksXG4gICAgKDB4QTY1MSwgXCdWXCcpLFxuICAgICgweEE2NTIsIFwnTVwnLCBcJ1x4ZWFceDk5XHg5M1wnKSxcbiAgICAoMHhBNjUzLCBcJ1ZcJyksXG4gICAgKDB4QTY1NCwgXCdNXCcsIFwnXHhlYVx4OTlceDk1XCcpLFxuICAgICgweEE2NTUsIFwnVlwnKSxcbiAgICAoMHhBNjU2LCBcJ01cJywgXCdceGVhXHg5OVx4OTdcJyksXG4gICAgKDB4QTY1NywgXCdWXCcpLFxuICAgICgweEE2NTgsIFwnTVwnLCBcJ1x4ZWFceDk5XHg5OVwnKSxcbiAgICAoMHhBNjU5LCBcJ1ZcJyksXG4gICAgKDB4QTY1QSwgXCdNXCcsIFwnXHhlYVx4OTlceDliXCcpLFxuICAgICgweEE2NUIsIFwnVlwnKSxcbiAgICAoMHhBNjVDLCBcJ01cJywgXCdceGVhXHg5OVx4OWRcJyksXG4gICAgKDB4QTY1RCwgXCdWXCcpLFxuICAgICgweEE2NUUsIFwnTVwnLCBcJ1x4ZWFceDk5XHg5ZlwnKSxcbiAgICAoMHhBNjVGLCBcJ1ZcJyksXG4gICAgKDB4QTY2MCwgXCdNXCcsIFwnXHhlYVx4OTlceGExXCcpLFxuICAgICgweEE2NjEsIFwnVlwnKSxcbiAgICAoMHhBNjYyLCBcJ01cJywgXCdceGVhXHg5OVx4YTNcJyksXG4gICAgKDB4QTY2MywgXCdWXCcpLFxuICAgICgweEE2NjQsIFwnTVwnLCBcJ1x4ZWFceDk5XHhhNVwnKSxcbiAgICAoMHhBNjY1LCBcJ1ZcJyksXG4gICAgKDB4QTY2NiwgXCdNXCcsIFwnXHhlYVx4OTlceGE3XCcpLFxuICAgICgweEE2NjcsIFwnVlwnKSxcbiAgICAoMHhBNjY4LCBcJ01cJywgXCdceGVhXHg5OVx4YTlcJyksXG4gICAgKDB4QTY2OSwgXCdWXCcpLFxuICAgICgweEE2NkEsIFwnTVwnLCBcJ1x4ZWFceDk5XHhhYlwnKSxcbiAgICAoMHhBNjZCLCBcJ1ZcJyksXG4gICAgKDB4QTY2QywgXCdNXCcsIFwnXHhlYVx4OTlceGFkXCcpLFxuICAgICgweEE2NkQsIFwnVlwnKSxcbiAgICAoMHhBNjgwLCBcJ01cJywgXCdceGVhXHg5YVx4ODFcJyksXG4gICAgKDB4QTY4MSwgXCdWXCcpLFxuICAgICgweEE2ODIsIFwnTVwnLCBcJ1x4ZWFceDlhXHg4M1wnKSxcbiAgICAoMHhBNjgzLCBcJ1ZcJyksXG4gICAgKDB4QTY4NCwgXCdNXCcsIFwnXHhlYVx4OWFceDg1XCcpLFxuICAgICgweEE2ODUsIFwnVlwnKSxcbiAgICAoMHhBNjg2LCBcJ01cJywgXCdceGVhXHg5YVx4ODdcJyksXG4gICAgKDB4QTY4NywgXCdWXCcpLFxuICAgICgweEE2ODgsIFwnTVwnLCBcJ1x4ZWFceDlhXHg4OVwnKSxcbiAgICAoMHhBNjg5LCBcJ1ZcJyksXG4gICAgKDB4QTY4QSwgXCdNXCcsIFwnXHhlYVx4OWFceDhiXCcpLFxuICAgICgweEE2OEIsIFwnVlwnKSxcbiAgICAoMHhBNjhDLCBcJ01cJywgXCdceGVhXHg5YVx4OGRcJyksXG4gICAgKDB4QTY4RCwgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMzYoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweEE2OEUsIFwnTVwnLCBcJ1x4ZWFceDlhXHg4ZlwnKSxcbiAgICAoMHhBNjhGLCBcJ1ZcJyksXG4gICAgKDB4QTY5MCwgXCdNXCcsIFwnXHhlYVx4OWFceDkxXCcpLFxuICAgICgweEE2OTEsIFwnVlwnKSxcbiAgICAoMHhBNjkyLCBcJ01cJywgXCdceGVhXHg5YVx4OTNcJyksXG4gICAgKDB4QTY5MywgXCdWXCcpLFxuICAgICgweEE2OTQsIFwnTVwnLCBcJ1x4ZWFceDlhXHg5NVwnKSxcbiAgICAoMHhBNjk1LCBcJ1ZcJyksXG4gICAgKDB4QTY5NiwgXCdNXCcsIFwnXHhlYVx4OWFceDk3XCcpLFxuICAgICgweEE2OTcsIFwnVlwnKSxcbiAgICAoMHhBNjk4LCBcJ01cJywgXCdceGVhXHg5YVx4OTlcJyksXG4gICAgKDB4QTY5OSwgXCdWXCcpLFxuICAgICgweEE2OUEsIFwnTVwnLCBcJ1x4ZWFceDlhXHg5YlwnKSxcbiAgICAoMHhBNjlCLCBcJ1ZcJyksXG4gICAgKDB4QTY5QywgXCdNXCcsIFwnXHhkMVx4OGFcJyksXG4gICAgKDB4QTY5RCwgXCdNXCcsIFwnXHhkMVx4OGNcJyksXG4gICAgKDB4QTY5RSwgXCdWXCcpLFxuICAgICgweEE2RjgsIFwnWFwnKSxcbiAgICAoMHhBNzAwLCBcJ1ZcJyksXG4gICAgKDB4QTcyMiwgXCdNXCcsIFwnXHhlYVx4OWNceGEzXCcpLFxuICAgICgweEE3MjMsIFwnVlwnKSxcbiAgICAoMHhBNzI0LCBcJ01cJywgXCdceGVhXHg5Y1x4YTVcJyksXG4gICAgKDB4QTcyNSwgXCdWXCcpLFxuICAgICgweEE3MjYsIFwnTVwnLCBcJ1x4ZWFceDljXHhhN1wnKSxcbiAgICAoMHhBNzI3LCBcJ1ZcJyksXG4gICAgKDB4QTcyOCwgXCdNXCcsIFwnXHhlYVx4OWNceGE5XCcpLFxuICAgICgweEE3MjksIFwnVlwnKSxcbiAgICAoMHhBNzJBLCBcJ01cJywgXCdceGVhXHg5Y1x4YWJcJyksXG4gICAgKDB4QTcyQiwgXCdWXCcpLFxuICAgICgweEE3MkMsIFwnTVwnLCBcJ1x4ZWFceDljXHhhZFwnKSxcbiAgICAoMHhBNzJELCBcJ1ZcJyksXG4gICAgKDB4QTcyRSwgXCdNXCcsIFwnXHhlYVx4OWNceGFmXCcpLFxuICAgICgweEE3MkYsIFwnVlwnKSxcbiAgICAoMHhBNzMyLCBcJ01cJywgXCdceGVhXHg5Y1x4YjNcJyksXG4gICAgKDB4QTczMywgXCdWXCcpLFxuICAgICgweEE3MzQsIFwnTVwnLCBcJ1x4ZWFceDljXHhiNVwnKSxcbiAgICAoMHhBNzM1LCBcJ1ZcJyksXG4gICAgKDB4QTczNiwgXCdNXCcsIFwnXHhlYVx4OWNceGI3XCcpLFxuICAgICgweEE3MzcsIFwnVlwnKSxcbiAgICAoMHhBNzM4LCBcJ01cJywgXCdceGVhXHg5Y1x4YjlcJyksXG4gICAgKDB4QTczOSwgXCdWXCcpLFxuICAgICgweEE3M0EsIFwnTVwnLCBcJ1x4ZWFceDljXHhiYlwnKSxcbiAgICAoMHhBNzNCLCBcJ1ZcJyksXG4gICAgKDB4QTczQywgXCdNXCcsIFwnXHhlYVx4OWNceGJkXCcpLFxuICAgICgweEE3M0QsIFwnVlwnKSxcbiAgICAoMHhBNzNFLCBcJ01cJywgXCdceGVhXHg5Y1x4YmZcJyksXG4gICAgKDB4QTczRiwgXCdWXCcpLFxuICAgICgweEE3NDAsIFwnTVwnLCBcJ1x4ZWFceDlkXHg4MVwnKSxcbiAgICAoMHhBNzQxLCBcJ1ZcJyksXG4gICAgKDB4QTc0MiwgXCdNXCcsIFwnXHhlYVx4OWRceDgzXCcpLFxuICAgICgweEE3NDMsIFwnVlwnKSxcbiAgICAoMHhBNzQ0LCBcJ01cJywgXCdceGVhXHg5ZFx4ODVcJyksXG4gICAgKDB4QTc0NSwgXCdWXCcpLFxuICAgICgweEE3NDYsIFwnTVwnLCBcJ1x4ZWFceDlkXHg4N1wnKSxcbiAgICAoMHhBNzQ3LCBcJ1ZcJyksXG4gICAgKDB4QTc0OCwgXCdNXCcsIFwnXHhlYVx4OWRceDg5XCcpLFxuICAgICgweEE3NDksIFwnVlwnKSxcbiAgICAoMHhBNzRBLCBcJ01cJywgXCdceGVhXHg5ZFx4OGJcJyksXG4gICAgKDB4QTc0QiwgXCdWXCcpLFxuICAgICgweEE3NEMsIFwnTVwnLCBcJ1x4ZWFceDlkXHg4ZFwnKSxcbiAgICAoMHhBNzRELCBcJ1ZcJyksXG4gICAgKDB4QTc0RSwgXCdNXCcsIFwnXHhlYVx4OWRceDhmXCcpLFxuICAgICgweEE3NEYsIFwnVlwnKSxcbiAgICAoMHhBNzUwLCBcJ01cJywgXCdceGVhXHg5ZFx4OTFcJyksXG4gICAgKDB4QTc1MSwgXCdWXCcpLFxuICAgICgweEE3NTIsIFwnTVwnLCBcJ1x4ZWFceDlkXHg5M1wnKSxcbiAgICAoMHhBNzUzLCBcJ1ZcJyksXG4gICAgKDB4QTc1NCwgXCdNXCcsIFwnXHhlYVx4OWRceDk1XCcpLFxuICAgICgweEE3NTUsIFwnVlwnKSxcbiAgICAoMHhBNzU2LCBcJ01cJywgXCdceGVhXHg5ZFx4OTdcJyksXG4gICAgKDB4QTc1NywgXCdWXCcpLFxuICAgICgweEE3NTgsIFwnTVwnLCBcJ1x4ZWFceDlkXHg5OVwnKSxcbiAgICAoMHhBNzU5LCBcJ1ZcJyksXG4gICAgKDB4QTc1QSwgXCdNXCcsIFwnXHhlYVx4OWRceDliXCcpLFxuICAgICgweEE3NUIsIFwnVlwnKSxcbiAgICAoMHhBNzVDLCBcJ01cJywgXCdceGVhXHg5ZFx4OWRcJyksXG4gICAgKDB4QTc1RCwgXCdWXCcpLFxuICAgICgweEE3NUUsIFwnTVwnLCBcJ1x4ZWFceDlkXHg5ZlwnKSxcbiAgICAoMHhBNzVGLCBcJ1ZcJyksXG4gICAgKDB4QTc2MCwgXCdNXCcsIFwnXHhlYVx4OWRceGExXCcpLFxuICAgICgweEE3NjEsIFwnVlwnKSxcbiAgICAoMHhBNzYyLCBcJ01cJywgXCdceGVhXHg5ZFx4YTNcJyksXG4gICAgKDB4QTc2MywgXCdWXCcpLFxuICAgICgweEE3NjQsIFwnTVwnLCBcJ1x4ZWFceDlkXHhhNVwnKSxcbiAgICAoMHhBNzY1LCBcJ1ZcJyksXG4gICAgKDB4QTc2NiwgXCdNXCcsIFwnXHhlYVx4OWRceGE3XCcpLFxuICAgICgweEE3NjcsIFwnVlwnKSxcbiAgICAoMHhBNzY4LCBcJ01cJywgXCdceGVhXHg5ZFx4YTlcJyksXG4gICAgKDB4QTc2OSwgXCdWXCcpLFxuICAgICgweEE3NkEsIFwnTVwnLCBcJ1x4ZWFceDlkXHhhYlwnKSxcbiAgICAoMHhBNzZCLCBcJ1ZcJyksXG4gICAgKDB4QTc2QywgXCdNXCcsIFwnXHhlYVx4OWRceGFkXCcpLFxuICAgICgweEE3NkQsIFwnVlwnKSxcbiAgICAoMHhBNzZFLCBcJ01cJywgXCdceGVhXHg5ZFx4YWZcJyksXG4gICAgKDB4QTc2RiwgXCdWXCcpLFxuICAgICgweEE3NzAsIFwnTVwnLCBcJ1x4ZWFceDlkXHhhZlwnKSxcbiAgICAoMHhBNzcxLCBcJ1ZcJyksXG4gICAgKDB4QTc3OSwgXCdNXCcsIFwnXHhlYVx4OWRceGJhXCcpLFxuICAgICgweEE3N0EsIFwnVlwnKSxcbiAgICAoMHhBNzdCLCBcJ01cJywgXCdceGVhXHg5ZFx4YmNcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18zNygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4QTc3QywgXCdWXCcpLFxuICAgICgweEE3N0QsIFwnTVwnLCBcJ1x4ZTFceGI1XHhiOVwnKSxcbiAgICAoMHhBNzdFLCBcJ01cJywgXCdceGVhXHg5ZFx4YmZcJyksXG4gICAgKDB4QTc3RiwgXCdWXCcpLFxuICAgICgweEE3ODAsIFwnTVwnLCBcJ1x4ZWFceDllXHg4MVwnKSxcbiAgICAoMHhBNzgxLCBcJ1ZcJyksXG4gICAgKDB4QTc4MiwgXCdNXCcsIFwnXHhlYVx4OWVceDgzXCcpLFxuICAgICgweEE3ODMsIFwnVlwnKSxcbiAgICAoMHhBNzg0LCBcJ01cJywgXCdceGVhXHg5ZVx4ODVcJyksXG4gICAgKDB4QTc4NSwgXCdWXCcpLFxuICAgICgweEE3ODYsIFwnTVwnLCBcJ1x4ZWFceDllXHg4N1wnKSxcbiAgICAoMHhBNzg3LCBcJ1ZcJyksXG4gICAgKDB4QTc4QiwgXCdNXCcsIFwnXHhlYVx4OWVceDhjXCcpLFxuICAgICgweEE3OEMsIFwnVlwnKSxcbiAgICAoMHhBNzhELCBcJ01cJywgXCdceGM5XHhhNVwnKSxcbiAgICAoMHhBNzhFLCBcJ1ZcJyksXG4gICAgKDB4QTc5MCwgXCdNXCcsIFwnXHhlYVx4OWVceDkxXCcpLFxuICAgICgweEE3OTEsIFwnVlwnKSxcbiAgICAoMHhBNzkyLCBcJ01cJywgXCdceGVhXHg5ZVx4OTNcJyksXG4gICAgKDB4QTc5MywgXCdWXCcpLFxuICAgICgweEE3OTYsIFwnTVwnLCBcJ1x4ZWFceDllXHg5N1wnKSxcbiAgICAoMHhBNzk3LCBcJ1ZcJyksXG4gICAgKDB4QTc5OCwgXCdNXCcsIFwnXHhlYVx4OWVceDk5XCcpLFxuICAgICgweEE3OTksIFwnVlwnKSxcbiAgICAoMHhBNzlBLCBcJ01cJywgXCdceGVhXHg5ZVx4OWJcJyksXG4gICAgKDB4QTc5QiwgXCdWXCcpLFxuICAgICgweEE3OUMsIFwnTVwnLCBcJ1x4ZWFceDllXHg5ZFwnKSxcbiAgICAoMHhBNzlELCBcJ1ZcJyksXG4gICAgKDB4QTc5RSwgXCdNXCcsIFwnXHhlYVx4OWVceDlmXCcpLFxuICAgICgweEE3OUYsIFwnVlwnKSxcbiAgICAoMHhBN0EwLCBcJ01cJywgXCdceGVhXHg5ZVx4YTFcJyksXG4gICAgKDB4QTdBMSwgXCdWXCcpLFxuICAgICgweEE3QTIsIFwnTVwnLCBcJ1x4ZWFceDllXHhhM1wnKSxcbiAgICAoMHhBN0EzLCBcJ1ZcJyksXG4gICAgKDB4QTdBNCwgXCdNXCcsIFwnXHhlYVx4OWVceGE1XCcpLFxuICAgICgweEE3QTUsIFwnVlwnKSxcbiAgICAoMHhBN0E2LCBcJ01cJywgXCdceGVhXHg5ZVx4YTdcJyksXG4gICAgKDB4QTdBNywgXCdWXCcpLFxuICAgICgweEE3QTgsIFwnTVwnLCBcJ1x4ZWFceDllXHhhOVwnKSxcbiAgICAoMHhBN0E5LCBcJ1ZcJyksXG4gICAgKDB4QTdBQSwgXCdNXCcsIFwnXHhjOVx4YTZcJyksXG4gICAgKDB4QTdBQiwgXCdNXCcsIFwnXHhjOVx4OWNcJyksXG4gICAgKDB4QTdBQywgXCdNXCcsIFwnXHhjOVx4YTFcJyksXG4gICAgKDB4QTdBRCwgXCdNXCcsIFwnXHhjOVx4YWNcJyksXG4gICAgKDB4QTdBRSwgXCdNXCcsIFwnXHhjOVx4YWFcJyksXG4gICAgKDB4QTdBRiwgXCdWXCcpLFxuICAgICgweEE3QjAsIFwnTVwnLCBcJ1x4Y2FceDllXCcpLFxuICAgICgweEE3QjEsIFwnTVwnLCBcJ1x4Y2FceDg3XCcpLFxuICAgICgweEE3QjIsIFwnTVwnLCBcJ1x4Y2FceDlkXCcpLFxuICAgICgweEE3QjMsIFwnTVwnLCBcJ1x4ZWFceGFkXHg5M1wnKSxcbiAgICAoMHhBN0I0LCBcJ01cJywgXCdceGVhXHg5ZVx4YjVcJyksXG4gICAgKDB4QTdCNSwgXCdWXCcpLFxuICAgICgweEE3QjYsIFwnTVwnLCBcJ1x4ZWFceDllXHhiN1wnKSxcbiAgICAoMHhBN0I3LCBcJ1ZcJyksXG4gICAgKDB4QTdCOCwgXCdNXCcsIFwnXHhlYVx4OWVceGI5XCcpLFxuICAgICgweEE3QjksIFwnVlwnKSxcbiAgICAoMHhBN0JBLCBcJ01cJywgXCdceGVhXHg5ZVx4YmJcJyksXG4gICAgKDB4QTdCQiwgXCdWXCcpLFxuICAgICgweEE3QkMsIFwnTVwnLCBcJ1x4ZWFceDllXHhiZFwnKSxcbiAgICAoMHhBN0JELCBcJ1ZcJyksXG4gICAgKDB4QTdCRSwgXCdNXCcsIFwnXHhlYVx4OWVceGJmXCcpLFxuICAgICgweEE3QkYsIFwnVlwnKSxcbiAgICAoMHhBN0MwLCBcJ01cJywgXCdceGVhXHg5Zlx4ODFcJyksXG4gICAgKDB4QTdDMSwgXCdWXCcpLFxuICAgICgweEE3QzIsIFwnTVwnLCBcJ1x4ZWFceDlmXHg4M1wnKSxcbiAgICAoMHhBN0MzLCBcJ1ZcJyksXG4gICAgKDB4QTdDNCwgXCdNXCcsIFwnXHhlYVx4OWVceDk0XCcpLFxuICAgICgweEE3QzUsIFwnTVwnLCBcJ1x4Y2FceDgyXCcpLFxuICAgICgweEE3QzYsIFwnTVwnLCBcJ1x4ZTFceGI2XHg4ZVwnKSxcbiAgICAoMHhBN0M3LCBcJ01cJywgXCdceGVhXHg5Zlx4ODhcJyksXG4gICAgKDB4QTdDOCwgXCdWXCcpLFxuICAgICgweEE3QzksIFwnTVwnLCBcJ1x4ZWFceDlmXHg4YVwnKSxcbiAgICAoMHhBN0NBLCBcJ1ZcJyksXG4gICAgKDB4QTdDQiwgXCdYXCcpLFxuICAgICgweEE3RDAsIFwnTVwnLCBcJ1x4ZWFceDlmXHg5MVwnKSxcbiAgICAoMHhBN0QxLCBcJ1ZcJyksXG4gICAgKDB4QTdEMiwgXCdYXCcpLFxuICAgICgweEE3RDMsIFwnVlwnKSxcbiAgICAoMHhBN0Q0LCBcJ1hcJyksXG4gICAgKDB4QTdENSwgXCdWXCcpLFxuICAgICgweEE3RDYsIFwnTVwnLCBcJ1x4ZWFceDlmXHg5N1wnKSxcbiAgICAoMHhBN0Q3LCBcJ1ZcJyksXG4gICAgKDB4QTdEOCwgXCdNXCcsIFwnXHhlYVx4OWZceDk5XCcpLFxuICAgICgweEE3RDksIFwnVlwnKSxcbiAgICAoMHhBN0RBLCBcJ1hcJyksXG4gICAgKDB4QTdGMiwgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHhBN0YzLCBcJ01cJywgXCdmXCcpLFxuICAgICgweEE3RjQsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4QTdGNSwgXCdNXCcsIFwnXHhlYVx4OWZceGI2XCcpLFxuICAgICgweEE3RjYsIFwnVlwnKSxcbiAgICAoMHhBN0Y4LCBcJ01cJywgXCdceGM0XHhhN1wnKSxcbiAgICAoMHhBN0Y5LCBcJ01cJywgXCdceGM1XHg5M1wnKSxcbiAgICAoMHhBN0ZBLCBcJ1ZcJyksXG4gICAgKDB4QTgyRCwgXCdYXCcpLFxuICAgICgweEE4MzAsIFwnVlwnKSxcbiAgICAoMHhBODNBLCBcJ1hcJyksXG4gICAgKDB4QTg0MCwgXCdWXCcpLFxuICAgICgweEE4NzgsIFwnWFwnKSxcbiAgICAoMHhBODgwLCBcJ1ZcJyksXG4gICAgKDB4QThDNiwgXCdYXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfMzgoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweEE4Q0UsIFwnVlwnKSxcbiAgICAoMHhBOERBLCBcJ1hcJyksXG4gICAgKDB4QThFMCwgXCdWXCcpLFxuICAgICgweEE5NTQsIFwnWFwnKSxcbiAgICAoMHhBOTVGLCBcJ1ZcJyksXG4gICAgKDB4QTk3RCwgXCdYXCcpLFxuICAgICgweEE5ODAsIFwnVlwnKSxcbiAgICAoMHhBOUNFLCBcJ1hcJyksXG4gICAgKDB4QTlDRiwgXCdWXCcpLFxuICAgICgweEE5REEsIFwnWFwnKSxcbiAgICAoMHhBOURFLCBcJ1ZcJyksXG4gICAgKDB4QTlGRiwgXCdYXCcpLFxuICAgICgweEFBMDAsIFwnVlwnKSxcbiAgICAoMHhBQTM3LCBcJ1hcJyksXG4gICAgKDB4QUE0MCwgXCdWXCcpLFxuICAgICgweEFBNEUsIFwnWFwnKSxcbiAgICAoMHhBQTUwLCBcJ1ZcJyksXG4gICAgKDB4QUE1QSwgXCdYXCcpLFxuICAgICgweEFBNUMsIFwnVlwnKSxcbiAgICAoMHhBQUMzLCBcJ1hcJyksXG4gICAgKDB4QUFEQiwgXCdWXCcpLFxuICAgICgweEFBRjcsIFwnWFwnKSxcbiAgICAoMHhBQjAxLCBcJ1ZcJyksXG4gICAgKDB4QUIwNywgXCdYXCcpLFxuICAgICgweEFCMDksIFwnVlwnKSxcbiAgICAoMHhBQjBGLCBcJ1hcJyksXG4gICAgKDB4QUIxMSwgXCdWXCcpLFxuICAgICgweEFCMTcsIFwnWFwnKSxcbiAgICAoMHhBQjIwLCBcJ1ZcJyksXG4gICAgKDB4QUIyNywgXCdYXCcpLFxuICAgICgweEFCMjgsIFwnVlwnKSxcbiAgICAoMHhBQjJGLCBcJ1hcJyksXG4gICAgKDB4QUIzMCwgXCdWXCcpLFxuICAgICgweEFCNUMsIFwnTVwnLCBcJ1x4ZWFceDljXHhhN1wnKSxcbiAgICAoMHhBQjVELCBcJ01cJywgXCdceGVhXHhhY1x4YjdcJyksXG4gICAgKDB4QUI1RSwgXCdNXCcsIFwnXHhjOVx4YWJcJyksXG4gICAgKDB4QUI1RiwgXCdNXCcsIFwnXHhlYVx4YWRceDkyXCcpLFxuICAgICgweEFCNjAsIFwnVlwnKSxcbiAgICAoMHhBQjY5LCBcJ01cJywgXCdceGNhXHg4ZFwnKSxcbiAgICAoMHhBQjZBLCBcJ1ZcJyksXG4gICAgKDB4QUI2QywgXCdYXCcpLFxuICAgICgweEFCNzAsIFwnTVwnLCBcJ1x4ZTFceDhlXHhhMFwnKSxcbiAgICAoMHhBQjcxLCBcJ01cJywgXCdceGUxXHg4ZVx4YTFcJyksXG4gICAgKDB4QUI3MiwgXCdNXCcsIFwnXHhlMVx4OGVceGEyXCcpLFxuICAgICgweEFCNzMsIFwnTVwnLCBcJ1x4ZTFceDhlXHhhM1wnKSxcbiAgICAoMHhBQjc0LCBcJ01cJywgXCdceGUxXHg4ZVx4YTRcJyksXG4gICAgKDB4QUI3NSwgXCdNXCcsIFwnXHhlMVx4OGVceGE1XCcpLFxuICAgICgweEFCNzYsIFwnTVwnLCBcJ1x4ZTFceDhlXHhhNlwnKSxcbiAgICAoMHhBQjc3LCBcJ01cJywgXCdceGUxXHg4ZVx4YTdcJyksXG4gICAgKDB4QUI3OCwgXCdNXCcsIFwnXHhlMVx4OGVceGE4XCcpLFxuICAgICgweEFCNzksIFwnTVwnLCBcJ1x4ZTFceDhlXHhhOVwnKSxcbiAgICAoMHhBQjdBLCBcJ01cJywgXCdceGUxXHg4ZVx4YWFcJyksXG4gICAgKDB4QUI3QiwgXCdNXCcsIFwnXHhlMVx4OGVceGFiXCcpLFxuICAgICgweEFCN0MsIFwnTVwnLCBcJ1x4ZTFceDhlXHhhY1wnKSxcbiAgICAoMHhBQjdELCBcJ01cJywgXCdceGUxXHg4ZVx4YWRcJyksXG4gICAgKDB4QUI3RSwgXCdNXCcsIFwnXHhlMVx4OGVceGFlXCcpLFxuICAgICgweEFCN0YsIFwnTVwnLCBcJ1x4ZTFceDhlXHhhZlwnKSxcbiAgICAoMHhBQjgwLCBcJ01cJywgXCdceGUxXHg4ZVx4YjBcJyksXG4gICAgKDB4QUI4MSwgXCdNXCcsIFwnXHhlMVx4OGVceGIxXCcpLFxuICAgICgweEFCODIsIFwnTVwnLCBcJ1x4ZTFceDhlXHhiMlwnKSxcbiAgICAoMHhBQjgzLCBcJ01cJywgXCdceGUxXHg4ZVx4YjNcJyksXG4gICAgKDB4QUI4NCwgXCdNXCcsIFwnXHhlMVx4OGVceGI0XCcpLFxuICAgICgweEFCODUsIFwnTVwnLCBcJ1x4ZTFceDhlXHhiNVwnKSxcbiAgICAoMHhBQjg2LCBcJ01cJywgXCdceGUxXHg4ZVx4YjZcJyksXG4gICAgKDB4QUI4NywgXCdNXCcsIFwnXHhlMVx4OGVceGI3XCcpLFxuICAgICgweEFCODgsIFwnTVwnLCBcJ1x4ZTFceDhlXHhiOFwnKSxcbiAgICAoMHhBQjg5LCBcJ01cJywgXCdceGUxXHg4ZVx4YjlcJyksXG4gICAgKDB4QUI4QSwgXCdNXCcsIFwnXHhlMVx4OGVceGJhXCcpLFxuICAgICgweEFCOEIsIFwnTVwnLCBcJ1x4ZTFceDhlXHhiYlwnKSxcbiAgICAoMHhBQjhDLCBcJ01cJywgXCdceGUxXHg4ZVx4YmNcJyksXG4gICAgKDB4QUI4RCwgXCdNXCcsIFwnXHhlMVx4OGVceGJkXCcpLFxuICAgICgweEFCOEUsIFwnTVwnLCBcJ1x4ZTFceDhlXHhiZVwnKSxcbiAgICAoMHhBQjhGLCBcJ01cJywgXCdceGUxXHg4ZVx4YmZcJyksXG4gICAgKDB4QUI5MCwgXCdNXCcsIFwnXHhlMVx4OGZceDgwXCcpLFxuICAgICgweEFCOTEsIFwnTVwnLCBcJ1x4ZTFceDhmXHg4MVwnKSxcbiAgICAoMHhBQjkyLCBcJ01cJywgXCdceGUxXHg4Zlx4ODJcJyksXG4gICAgKDB4QUI5MywgXCdNXCcsIFwnXHhlMVx4OGZceDgzXCcpLFxuICAgICgweEFCOTQsIFwnTVwnLCBcJ1x4ZTFceDhmXHg4NFwnKSxcbiAgICAoMHhBQjk1LCBcJ01cJywgXCdceGUxXHg4Zlx4ODVcJyksXG4gICAgKDB4QUI5NiwgXCdNXCcsIFwnXHhlMVx4OGZceDg2XCcpLFxuICAgICgweEFCOTcsIFwnTVwnLCBcJ1x4ZTFceDhmXHg4N1wnKSxcbiAgICAoMHhBQjk4LCBcJ01cJywgXCdceGUxXHg4Zlx4ODhcJyksXG4gICAgKDB4QUI5OSwgXCdNXCcsIFwnXHhlMVx4OGZceDg5XCcpLFxuICAgICgweEFCOUEsIFwnTVwnLCBcJ1x4ZTFceDhmXHg4YVwnKSxcbiAgICAoMHhBQjlCLCBcJ01cJywgXCdceGUxXHg4Zlx4OGJcJyksXG4gICAgKDB4QUI5QywgXCdNXCcsIFwnXHhlMVx4OGZceDhjXCcpLFxuICAgICgweEFCOUQsIFwnTVwnLCBcJ1x4ZTFceDhmXHg4ZFwnKSxcbiAgICAoMHhBQjlFLCBcJ01cJywgXCdceGUxXHg4Zlx4OGVcJyksXG4gICAgKDB4QUI5RiwgXCdNXCcsIFwnXHhlMVx4OGZceDhmXCcpLFxuICAgICgweEFCQTAsIFwnTVwnLCBcJ1x4ZTFceDhmXHg5MFwnKSxcbiAgICAoMHhBQkExLCBcJ01cJywgXCdceGUxXHg4Zlx4OTFcJyksXG4gICAgKDB4QUJBMiwgXCdNXCcsIFwnXHhlMVx4OGZceDkyXCcpLFxuICAgICgweEFCQTMsIFwnTVwnLCBcJ1x4ZTFceDhmXHg5M1wnKSxcbiAgICAoMHhBQkE0LCBcJ01cJywgXCdceGUxXHg4Zlx4OTRcJyksXG4gICAgKDB4QUJBNSwgXCdNXCcsIFwnXHhlMVx4OGZceDk1XCcpLFxuICAgICgweEFCQTYsIFwnTVwnLCBcJ1x4ZTFceDhmXHg5NlwnKSxcbiAgICAoMHhBQkE3LCBcJ01cJywgXCdceGUxXHg4Zlx4OTdcJyksXG4gICAgKDB4QUJBOCwgXCdNXCcsIFwnXHhlMVx4OGZceDk4XCcpLFxuICAgICgweEFCQTksIFwnTVwnLCBcJ1x4ZTFceDhmXHg5OVwnKSxcbiAgICAoMHhBQkFBLCBcJ01cJywgXCdceGUxXHg4Zlx4OWFcJyksXG4gICAgXVxuXG5kZWYgX3NlZ18zOSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4QUJBQiwgXCdNXCcsIFwnXHhlMVx4OGZceDliXCcpLFxuICAgICgweEFCQUMsIFwnTVwnLCBcJ1x4ZTFceDhmXHg5Y1wnKSxcbiAgICAoMHhBQkFELCBcJ01cJywgXCdceGUxXHg4Zlx4OWRcJyksXG4gICAgKDB4QUJBRSwgXCdNXCcsIFwnXHhlMVx4OGZceDllXCcpLFxuICAgICgweEFCQUYsIFwnTVwnLCBcJ1x4ZTFceDhmXHg5ZlwnKSxcbiAgICAoMHhBQkIwLCBcJ01cJywgXCdceGUxXHg4Zlx4YTBcJyksXG4gICAgKDB4QUJCMSwgXCdNXCcsIFwnXHhlMVx4OGZceGExXCcpLFxuICAgICgweEFCQjIsIFwnTVwnLCBcJ1x4ZTFceDhmXHhhMlwnKSxcbiAgICAoMHhBQkIzLCBcJ01cJywgXCdceGUxXHg4Zlx4YTNcJyksXG4gICAgKDB4QUJCNCwgXCdNXCcsIFwnXHhlMVx4OGZceGE0XCcpLFxuICAgICgweEFCQjUsIFwnTVwnLCBcJ1x4ZTFceDhmXHhhNVwnKSxcbiAgICAoMHhBQkI2LCBcJ01cJywgXCdceGUxXHg4Zlx4YTZcJyksXG4gICAgKDB4QUJCNywgXCdNXCcsIFwnXHhlMVx4OGZceGE3XCcpLFxuICAgICgweEFCQjgsIFwnTVwnLCBcJ1x4ZTFceDhmXHhhOFwnKSxcbiAgICAoMHhBQkI5LCBcJ01cJywgXCdceGUxXHg4Zlx4YTlcJyksXG4gICAgKDB4QUJCQSwgXCdNXCcsIFwnXHhlMVx4OGZceGFhXCcpLFxuICAgICgweEFCQkIsIFwnTVwnLCBcJ1x4ZTFceDhmXHhhYlwnKSxcbiAgICAoMHhBQkJDLCBcJ01cJywgXCdceGUxXHg4Zlx4YWNcJyksXG4gICAgKDB4QUJCRCwgXCdNXCcsIFwnXHhlMVx4OGZceGFkXCcpLFxuICAgICgweEFCQkUsIFwnTVwnLCBcJ1x4ZTFceDhmXHhhZVwnKSxcbiAgICAoMHhBQkJGLCBcJ01cJywgXCdceGUxXHg4Zlx4YWZcJyksXG4gICAgKDB4QUJDMCwgXCdWXCcpLFxuICAgICgweEFCRUUsIFwnWFwnKSxcbiAgICAoMHhBQkYwLCBcJ1ZcJyksXG4gICAgKDB4QUJGQSwgXCdYXCcpLFxuICAgICgweEFDMDAsIFwnVlwnKSxcbiAgICAoMHhEN0E0LCBcJ1hcJyksXG4gICAgKDB4RDdCMCwgXCdWXCcpLFxuICAgICgweEQ3QzcsIFwnWFwnKSxcbiAgICAoMHhEN0NCLCBcJ1ZcJyksXG4gICAgKDB4RDdGQywgXCdYXCcpLFxuICAgICgweEY5MDAsIFwnTVwnLCBcJ1x4ZThceGIxXHg4OFwnKSxcbiAgICAoMHhGOTAxLCBcJ01cJywgXCdceGU2XHg5Ylx4YjRcJyksXG4gICAgKDB4RjkwMiwgXCdNXCcsIFwnXHhlOFx4YmJceDhhXCcpLFxuICAgICgweEY5MDMsIFwnTVwnLCBcJ1x4ZThceGIzXHg4OFwnKSxcbiAgICAoMHhGOTA0LCBcJ01cJywgXCdceGU2XHhiYlx4OTFcJyksXG4gICAgKDB4RjkwNSwgXCdNXCcsIFwnXHhlNFx4YjhceGIyXCcpLFxuICAgICgweEY5MDYsIFwnTVwnLCBcJ1x4ZTVceDhmXHhhNVwnKSxcbiAgICAoMHhGOTA3LCBcJ01cJywgXCdceGU5XHhiZVx4OWNcJyksXG4gICAgKDB4RjkwOSwgXCdNXCcsIFwnXHhlNVx4YTVceDkxXCcpLFxuICAgICgweEY5MEEsIFwnTVwnLCBcJ1x4ZTlceDg3XHg5MVwnKSxcbiAgICAoMHhGOTBCLCBcJ01cJywgXCdceGU1XHg5Nlx4ODdcJyksXG4gICAgKDB4RjkwQywgXCdNXCcsIFwnXHhlNVx4YTVceDg4XCcpLFxuICAgICgweEY5MEQsIFwnTVwnLCBcJ1x4ZTZceDg3XHhiNlwnKSxcbiAgICAoMHhGOTBFLCBcJ01cJywgXCdceGU3XHg5OVx4YTlcJyksXG4gICAgKDB4RjkwRiwgXCdNXCcsIFwnXHhlN1x4YmVceDg1XCcpLFxuICAgICgweEY5MTAsIFwnTVwnLCBcJ1x4ZThceDk4XHhiZlwnKSxcbiAgICAoMHhGOTExLCBcJ01cJywgXCdceGU4XHg5ZVx4YmFcJyksXG4gICAgKDB4RjkxMiwgXCdNXCcsIFwnXHhlOFx4YTNceGI4XCcpLFxuICAgICgweEY5MTMsIFwnTVwnLCBcJ1x4ZTlceDgyXHg4ZlwnKSxcbiAgICAoMHhGOTE0LCBcJ01cJywgXCdceGU2XHhhOFx4ODJcJyksXG4gICAgKDB4RjkxNSwgXCdNXCcsIFwnXHhlNlx4YjRceDliXCcpLFxuICAgICgweEY5MTYsIFwnTVwnLCBcJ1x4ZTdceDgzXHg5OVwnKSxcbiAgICAoMHhGOTE3LCBcJ01cJywgXCdceGU3XHg4Zlx4OWVcJyksXG4gICAgKDB4RjkxOCwgXCdNXCcsIFwnXHhlOFx4OTBceGJkXCcpLFxuICAgICgweEY5MTksIFwnTVwnLCBcJ1x4ZTlceDg1XHhhYVwnKSxcbiAgICAoMHhGOTFBLCBcJ01cJywgXCdceGU5XHhhN1x4YjFcJyksXG4gICAgKDB4RjkxQiwgXCdNXCcsIFwnXHhlNFx4YmFceDgyXCcpLFxuICAgICgweEY5MUMsIFwnTVwnLCBcJ1x4ZTVceDhkXHhiNVwnKSxcbiAgICAoMHhGOTFELCBcJ01cJywgXCdceGU2XHhhY1x4ODRcJyksXG4gICAgKDB4RjkxRSwgXCdNXCcsIFwnXHhlN1x4ODhceDliXCcpLFxuICAgICgweEY5MUYsIFwnTVwnLCBcJ1x4ZThceDk4XHhhZFwnKSxcbiAgICAoMHhGOTIwLCBcJ01cJywgXCdceGU5XHhiOFx4OWVcJyksXG4gICAgKDB4RjkyMSwgXCdNXCcsIFwnXHhlNVx4YjVceDkwXCcpLFxuICAgICgweEY5MjIsIFwnTVwnLCBcJ1x4ZTZceGJmXHhhYlwnKSxcbiAgICAoMHhGOTIzLCBcJ01cJywgXCdceGU4XHg5N1x4OGRcJyksXG4gICAgKDB4RjkyNCwgXCdNXCcsIFwnXHhlOFx4YTVceGE0XCcpLFxuICAgICgweEY5MjUsIFwnTVwnLCBcJ1x4ZTZceDhiXHg4OVwnKSxcbiAgICAoMHhGOTI2LCBcJ01cJywgXCdceGU4XHg4N1x4OThcJyksXG4gICAgKDB4RjkyNywgXCdNXCcsIFwnXHhlOFx4YTBceDlmXCcpLFxuICAgICgweEY5MjgsIFwnTVwnLCBcJ1x4ZTVceGJiXHg4YVwnKSxcbiAgICAoMHhGOTI5LCBcJ01cJywgXCdceGU2XHg5Y1x4OTdcJyksXG4gICAgKDB4RjkyQSwgXCdNXCcsIFwnXHhlNlx4YjVceGFhXCcpLFxuICAgICgweEY5MkIsIFwnTVwnLCBcJ1x4ZTdceDhiXHhiY1wnKSxcbiAgICAoMHhGOTJDLCBcJ01cJywgXCdceGU5XHg4M1x4OGVcJyksXG4gICAgKDB4RjkyRCwgXCdNXCcsIFwnXHhlNFx4YmVceDg2XCcpLFxuICAgICgweEY5MkUsIFwnTVwnLCBcJ1x4ZTVceDg2XHhiN1wnKSxcbiAgICAoMHhGOTJGLCBcJ01cJywgXCdceGU1XHg4Ylx4OWVcJyksXG4gICAgKDB4RjkzMCwgXCdNXCcsIFwnXHhlNlx4OTNceDg0XCcpLFxuICAgICgweEY5MzEsIFwnTVwnLCBcJ1x4ZTZceGFiXHg5M1wnKSxcbiAgICAoMHhGOTMyLCBcJ01cJywgXCdceGU3XHg4OFx4OTBcJyksXG4gICAgKDB4RjkzMywgXCdNXCcsIFwnXHhlN1x4OWJceGE3XCcpLFxuICAgICgweEY5MzQsIFwnTVwnLCBcJ1x4ZThceDgwXHg4MVwnKSxcbiAgICAoMHhGOTM1LCBcJ01cJywgXCdceGU4XHg5OFx4ODZcJyksXG4gICAgKDB4RjkzNiwgXCdNXCcsIFwnXHhlOFx4OTlceDljXCcpLFxuICAgICgweEY5MzcsIFwnTVwnLCBcJ1x4ZThceGI3XHhhZlwnKSxcbiAgICAoMHhGOTM4LCBcJ01cJywgXCdceGU5XHg5Y1x4YjJcJyksXG4gICAgKDB4RjkzOSwgXCdNXCcsIFwnXHhlOVx4YWRceGFmXCcpLFxuICAgICgweEY5M0EsIFwnTVwnLCBcJ1x4ZTlceGI3XHhiYVwnKSxcbiAgICAoMHhGOTNCLCBcJ01cJywgXCdceGU3XHhhMlx4OGNcJyksXG4gICAgKDB4RjkzQywgXCdNXCcsIFwnXHhlN1x4YTVceGJmXCcpLFxuICAgICgweEY5M0QsIFwnTVwnLCBcJ1x4ZTdceGI2XHhhMFwnKSxcbiAgICAoMHhGOTNFLCBcJ01cJywgXCdceGU4XHg4Zlx4ODlcJyksXG4gICAgKDB4RjkzRiwgXCdNXCcsIFwnXHhlOVx4OGNceDg0XCcpLFxuICAgICgweEY5NDAsIFwnTVwnLCBcJ1x4ZTlceGI5XHhiZlwnKSxcbiAgICAoMHhGOTQxLCBcJ01cJywgXCdceGU4XHhhYlx4OTZcJyksXG4gICAgKDB4Rjk0MiwgXCdNXCcsIFwnXHhlNVx4YTNceDlmXCcpLFxuICAgICgweEY5NDMsIFwnTVwnLCBcJ1x4ZTVceGJjXHg4NFwnKSxcbiAgICAoMHhGOTQ0LCBcJ01cJywgXCdceGU3XHhiMVx4YTBcJyksXG4gICAgKDB4Rjk0NSwgXCdNXCcsIFwnXHhlOFx4ODFceGJlXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNDAoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweEY5NDYsIFwnTVwnLCBcJ1x4ZTdceDg5XHhhMlwnKSxcbiAgICAoMHhGOTQ3LCBcJ01cJywgXCdceGU3XHhhM1x4OGFcJyksXG4gICAgKDB4Rjk0OCwgXCdNXCcsIFwnXHhlOFx4YjNceDgyXCcpLFxuICAgICgweEY5NDksIFwnTVwnLCBcJ1x4ZTlceDliXHhiN1wnKSxcbiAgICAoMHhGOTRBLCBcJ01cJywgXCdceGU1XHhhM1x4OThcJyksXG4gICAgKDB4Rjk0QiwgXCdNXCcsIFwnXHhlNVx4YjFceGEyXCcpLFxuICAgICgweEY5NEMsIFwnTVwnLCBcJ1x4ZTZceGE4XHg5M1wnKSxcbiAgICAoMHhGOTRELCBcJ01cJywgXCdceGU2XHhiN1x4OWFcJyksXG4gICAgKDB4Rjk0RSwgXCdNXCcsIFwnXHhlNlx4YmNceDhmXCcpLFxuICAgICgweEY5NEYsIFwnTVwnLCBcJ1x4ZTdceGI0XHhhZlwnKSxcbiAgICAoMHhGOTUwLCBcJ01cJywgXCdceGU3XHhiOFx4YjdcJyksXG4gICAgKDB4Rjk1MSwgXCdNXCcsIFwnXHhlOVx4OTlceDhiXCcpLFxuICAgICgweEY5NTIsIFwnTVwnLCBcJ1x4ZTVceDhiXHg5MlwnKSxcbiAgICAoMHhGOTUzLCBcJ01cJywgXCdceGU4XHg4Mlx4OGJcJyksXG4gICAgKDB4Rjk1NCwgXCdNXCcsIFwnXHhlNVx4ODdceDljXCcpLFxuICAgICgweEY5NTUsIFwnTVwnLCBcJ1x4ZTVceDg3XHg4Y1wnKSxcbiAgICAoMHhGOTU2LCBcJ01cJywgXCdceGU3XHhhOFx4OWNcJyksXG4gICAgKDB4Rjk1NywgXCdNXCcsIFwnXHhlN1x4YjZceGJlXCcpLFxuICAgICgweEY5NTgsIFwnTVwnLCBcJ1x4ZThceDhmXHhiMVwnKSxcbiAgICAoMHhGOTU5LCBcJ01cJywgXCdceGU5XHg5OVx4YjVcJyksXG4gICAgKDB4Rjk1QSwgXCdNXCcsIFwnXHhlOFx4YWVceDgwXCcpLFxuICAgICgweEY5NUIsIFwnTVwnLCBcJ1x4ZTZceDhiXHg4ZlwnKSxcbiAgICAoMHhGOTVDLCBcJ01cJywgXCdceGU2XHhhOFx4ODJcJyksXG4gICAgKDB4Rjk1RCwgXCdNXCcsIFwnXHhlOFx4YWJceGJlXCcpLFxuICAgICgweEY5NUUsIFwnTVwnLCBcJ1x4ZTRceGI4XHhiOVwnKSxcbiAgICAoMHhGOTVGLCBcJ01cJywgXCdceGU1XHhhZlx4YTdcJyksXG4gICAgKDB4Rjk2MCwgXCdNXCcsIFwnXHhlNlx4ODBceDkyXCcpLFxuICAgICgweEY5NjEsIFwnTVwnLCBcJ1x4ZTdceDhlXHg4N1wnKSxcbiAgICAoMHhGOTYyLCBcJ01cJywgXCdceGU3XHg5NVx4YjBcJyksXG4gICAgKDB4Rjk2MywgXCdNXCcsIFwnXHhlNVx4OGNceDk3XCcpLFxuICAgICgweEY5NjQsIFwnTVwnLCBcJ1x4ZTdceGEzXHhiYlwnKSxcbiAgICAoMHhGOTY1LCBcJ01cJywgXCdceGU0XHhiZVx4YmZcJyksXG4gICAgKDB4Rjk2NiwgXCdNXCcsIFwnXHhlNVx4YmVceGE5XCcpLFxuICAgICgweEY5NjcsIFwnTVwnLCBcJ1x4ZTRceGI4XHg4ZFwnKSxcbiAgICAoMHhGOTY4LCBcJ01cJywgXCdceGU2XHhiM1x4OGNcJyksXG4gICAgKDB4Rjk2OSwgXCdNXCcsIFwnXHhlNlx4OTVceGI4XCcpLFxuICAgICgweEY5NkEsIFwnTVwnLCBcJ1x4ZTdceGI0XHhhMlwnKSxcbiAgICAoMHhGOTZCLCBcJ01cJywgXCdceGU1XHg4Zlx4ODNcJyksXG4gICAgKDB4Rjk2QywgXCdNXCcsIFwnXHhlNVx4YTFceDllXCcpLFxuICAgICgweEY5NkQsIFwnTVwnLCBcJ1x4ZTdceDljXHg4MVwnKSxcbiAgICAoMHhGOTZFLCBcJ01cJywgXCdceGU4XHg5MVx4ODlcJyksXG4gICAgKDB4Rjk2RiwgXCdNXCcsIFwnXHhlOFx4YWFceGFhXCcpLFxuICAgICgweEY5NzAsIFwnTVwnLCBcJ1x4ZTZceGFlXHhiYVwnKSxcbiAgICAoMHhGOTcxLCBcJ01cJywgXCdceGU4XHhiZVx4YjBcJyksXG4gICAgKDB4Rjk3MiwgXCdNXCcsIFwnXHhlNlx4YjJceDg4XCcpLFxuICAgICgweEY5NzMsIFwnTVwnLCBcJ1x4ZTZceDhiXHhiZVwnKSxcbiAgICAoMHhGOTc0LCBcJ01cJywgXCdceGU4XHg4Ylx4YTVcJyksXG4gICAgKDB4Rjk3NSwgXCdNXCcsIFwnXHhlNlx4OGVceGEwXCcpLFxuICAgICgweEY5NzYsIFwnTVwnLCBcJ1x4ZTdceDk1XHhhNVwnKSxcbiAgICAoMHhGOTc3LCBcJ01cJywgXCdceGU0XHhiYVx4YWVcJyksXG4gICAgKDB4Rjk3OCwgXCdNXCcsIFwnXHhlNVx4ODVceGE5XCcpLFxuICAgICgweEY5NzksIFwnTVwnLCBcJ1x4ZTVceDg3XHg4OVwnKSxcbiAgICAoMHhGOTdBLCBcJ01cJywgXCdceGU2XHhhMlx4ODFcJyksXG4gICAgKDB4Rjk3QiwgXCdNXCcsIFwnXHhlN1x4YjNceGE3XCcpLFxuICAgICgweEY5N0MsIFwnTVwnLCBcJ1x4ZThceDg5XHhhZlwnKSxcbiAgICAoMHhGOTdELCBcJ01cJywgXCdceGU4XHhhYlx4OTJcJyksXG4gICAgKDB4Rjk3RSwgXCdNXCcsIFwnXHhlOVx4ODdceDhmXCcpLFxuICAgICgweEY5N0YsIFwnTVwnLCBcJ1x4ZTVceDhiXHhiNVwnKSxcbiAgICAoMHhGOTgwLCBcJ01cJywgXCdceGU1XHg5MVx4ODJcJyksXG4gICAgKDB4Rjk4MSwgXCdNXCcsIFwnXHhlNVx4YTVceGIzXCcpLFxuICAgICgweEY5ODIsIFwnTVwnLCBcJ1x4ZTVceGJiXHhhY1wnKSxcbiAgICAoMHhGOTgzLCBcJ01cJywgXCdceGU2XHg5N1x4ODVcJyksXG4gICAgKDB4Rjk4NCwgXCdNXCcsIFwnXHhlNlx4YmZceGJlXCcpLFxuICAgICgweEY5ODUsIFwnTVwnLCBcJ1x4ZTdceGE0XHhhYVwnKSxcbiAgICAoMHhGOTg2LCBcJ01cJywgXCdceGU5XHg5Nlx4YWRcJyksXG4gICAgKDB4Rjk4NywgXCdNXCcsIFwnXHhlOVx4YTlceGFhXCcpLFxuICAgICgweEY5ODgsIFwnTVwnLCBcJ1x4ZTlceGJhXHg5N1wnKSxcbiAgICAoMHhGOTg5LCBcJ01cJywgXCdceGU5XHhiYlx4OGVcJyksXG4gICAgKDB4Rjk4QSwgXCdNXCcsIFwnXHhlNVx4OGFceDliXCcpLFxuICAgICgweEY5OEIsIFwnTVwnLCBcJ1x4ZTZceDliXHg4NlwnKSxcbiAgICAoMHhGOThDLCBcJ01cJywgXCdceGU2XHhhZFx4YjdcJyksXG4gICAgKDB4Rjk4RCwgXCdNXCcsIFwnXHhlOFx4YmRceGEyXCcpLFxuICAgICgweEY5OEUsIFwnTVwnLCBcJ1x4ZTVceGI5XHhiNFwnKSxcbiAgICAoMHhGOThGLCBcJ01cJywgXCdceGU2XHg4Nlx4OTBcJyksXG4gICAgKDB4Rjk5MCwgXCdNXCcsIFwnXHhlNlx4ODhceDgwXCcpLFxuICAgICgweEY5OTEsIFwnTVwnLCBcJ1x4ZTZceDkyXHg5YVwnKSxcbiAgICAoMHhGOTkyLCBcJ01cJywgXCdceGU2XHhiY1x4YTNcJyksXG4gICAgKDB4Rjk5MywgXCdNXCcsIFwnXHhlN1x4ODVceDg5XCcpLFxuICAgICgweEY5OTQsIFwnTVwnLCBcJ1x4ZTdceDkyXHg4OVwnKSxcbiAgICAoMHhGOTk1LCBcJ01cJywgXCdceGU3XHhhN1x4OGFcJyksXG4gICAgKDB4Rjk5NiwgXCdNXCcsIFwnXHhlN1x4YjdceGI0XCcpLFxuICAgICgweEY5OTcsIFwnTVwnLCBcJ1x4ZThceDgxXHhhZlwnKSxcbiAgICAoMHhGOTk4LCBcJ01cJywgXCdceGU4XHhiY1x4YTZcJyksXG4gICAgKDB4Rjk5OSwgXCdNXCcsIFwnXHhlOFx4OTNceGFlXCcpLFxuICAgICgweEY5OUEsIFwnTVwnLCBcJ1x4ZTlceDgwXHhhM1wnKSxcbiAgICAoMHhGOTlCLCBcJ01cJywgXCdceGU5XHg4ZFx4OGFcJyksXG4gICAgKDB4Rjk5QywgXCdNXCcsIFwnXHhlNVx4ODhceDk3XCcpLFxuICAgICgweEY5OUQsIFwnTVwnLCBcJ1x4ZTVceDhhXHhhM1wnKSxcbiAgICAoMHhGOTlFLCBcJ01cJywgXCdceGU1XHg5Mlx4YmRcJyksXG4gICAgKDB4Rjk5RiwgXCdNXCcsIFwnXHhlN1x4ODNceDg4XCcpLFxuICAgICgweEY5QTAsIFwnTVwnLCBcJ1x4ZThceGEzXHg4MlwnKSxcbiAgICAoMHhGOUExLCBcJ01cJywgXCdceGU4XHhhYVx4YWFcJyksXG4gICAgKDB4RjlBMiwgXCdNXCcsIFwnXHhlNVx4YmJceDg5XCcpLFxuICAgICgweEY5QTMsIFwnTVwnLCBcJ1x4ZTVceGJmXHhiNVwnKSxcbiAgICAoMHhGOUE0LCBcJ01cJywgXCdceGU2XHg4ZFx4YmJcJyksXG4gICAgKDB4RjlBNSwgXCdNXCcsIFwnXHhlNlx4YWVceGFlXCcpLFxuICAgICgweEY5QTYsIFwnTVwnLCBcJ1x4ZTdceGIwXHhiZVwnKSxcbiAgICAoMHhGOUE3LCBcJ01cJywgXCdceGU3XHg4ZFx4YjVcJyksXG4gICAgKDB4RjlBOCwgXCdNXCcsIFwnXHhlNFx4YmJceGE0XCcpLFxuICAgICgweEY5QTksIFwnTVwnLCBcJ1x4ZTVceDliXHhiOVwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzQxKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhGOUFBLCBcJ01cJywgXCdceGU1XHhhZlx4YTdcJyksXG4gICAgKDB4RjlBQiwgXCdNXCcsIFwnXHhlNVx4YjZceGJhXCcpLFxuICAgICgweEY5QUMsIFwnTVwnLCBcJ1x4ZTZceDgwXHg5Y1wnKSxcbiAgICAoMHhGOUFELCBcJ01cJywgXCdceGU3XHg4ZVx4YjJcJyksXG4gICAgKDB4RjlBRSwgXCdNXCcsIFwnXHhlN1x4OTFceGE5XCcpLFxuICAgICgweEY5QUYsIFwnTVwnLCBcJ1x4ZTdceGJlXHg5YVwnKSxcbiAgICAoMHhGOUIwLCBcJ01cJywgXCdceGU4XHg4MVx4ODZcJyksXG4gICAgKDB4RjlCMSwgXCdNXCcsIFwnXHhlOVx4ODhceGI0XCcpLFxuICAgICgweEY5QjIsIFwnTVwnLCBcJ1x4ZTlceDliXHhiNlwnKSxcbiAgICAoMHhGOUIzLCBcJ01cJywgXCdceGU5XHg5ZFx4ODhcJyksXG4gICAgKDB4RjlCNCwgXCdNXCcsIFwnXHhlOVx4YTBceDk4XCcpLFxuICAgICgweEY5QjUsIFwnTVwnLCBcJ1x4ZTRceGJlXHg4YlwnKSxcbiAgICAoMHhGOUI2LCBcJ01cJywgXCdceGU3XHhhNlx4YWVcJyksXG4gICAgKDB4RjlCNywgXCdNXCcsIFwnXHhlOVx4ODZceGI0XCcpLFxuICAgICgweEY5QjgsIFwnTVwnLCBcJ1x4ZTlceDlhXHhiOFwnKSxcbiAgICAoMHhGOUI5LCBcJ01cJywgXCdceGU2XHg4M1x4YTFcJyksXG4gICAgKDB4RjlCQSwgXCdNXCcsIFwnXHhlNFx4YmFceDg2XCcpLFxuICAgICgweEY5QkIsIFwnTVwnLCBcJ1x4ZTVceDgzXHg5YVwnKSxcbiAgICAoMHhGOUJDLCBcJ01cJywgXCdceGU1XHhhZlx4YWVcJyksXG4gICAgKDB4RjlCRCwgXCdNXCcsIFwnXHhlNVx4YjBceGJmXCcpLFxuICAgICgweEY5QkUsIFwnTVwnLCBcJ1x4ZTZceDk2XHg5OVwnKSxcbiAgICAoMHhGOUJGLCBcJ01cJywgXCdceGU2XHhhOFx4ODJcJyksXG4gICAgKDB4RjlDMCwgXCdNXCcsIFwnXHhlN1x4ODdceDhlXCcpLFxuICAgICgweEY5QzEsIFwnTVwnLCBcJ1x4ZTdceDk5XHg4MlwnKSxcbiAgICAoMHhGOUMyLCBcJ01cJywgXCdceGU4XHg5M1x4YmNcJyksXG4gICAgKDB4RjlDMywgXCdNXCcsIFwnXHhlOVx4ODFceGJjXCcpLFxuICAgICgweEY5QzQsIFwnTVwnLCBcJ1x4ZTlceGJlXHg4ZFwnKSxcbiAgICAoMHhGOUM1LCBcJ01cJywgXCdceGU2XHg5YVx4ODhcJyksXG4gICAgKDB4RjlDNiwgXCdNXCcsIFwnXHhlOVx4OThceGFlXCcpLFxuICAgICgweEY5QzcsIFwnTVwnLCBcJ1x4ZTVceDhhXHg4OVwnKSxcbiAgICAoMHhGOUM4LCBcJ01cJywgXCdceGU2XHg5ZFx4YmJcJyksXG4gICAgKDB4RjlDOSwgXCdNXCcsIFwnXHhlNlx4OWZceGIzXCcpLFxuICAgICgweEY5Q0EsIFwnTVwnLCBcJ1x4ZTZceGI1XHg4MVwnKSxcbiAgICAoMHhGOUNCLCBcJ01cJywgXCdceGU2XHhiYVx4OWNcJyksXG4gICAgKDB4RjlDQywgXCdNXCcsIFwnXHhlN1x4OTBceDg5XCcpLFxuICAgICgweEY5Q0QsIFwnTVwnLCBcJ1x4ZTdceDk1XHg5OVwnKSxcbiAgICAoMHhGOUNFLCBcJ01cJywgXCdceGU3XHhhMVx4YWJcJyksXG4gICAgKDB4RjlDRiwgXCdNXCcsIFwnXHhlN1x4YjRceDkwXCcpLFxuICAgICgweEY5RDAsIFwnTVwnLCBcJ1x4ZTlceGExXHg5ZVwnKSxcbiAgICAoMHhGOUQxLCBcJ01cJywgXCdceGU1XHg4NVx4YWRcJyksXG4gICAgKDB4RjlEMiwgXCdNXCcsIFwnXHhlNlx4ODhceGFlXCcpLFxuICAgICgweEY5RDMsIFwnTVwnLCBcJ1x4ZTlceDk5XHhiOFwnKSxcbiAgICAoMHhGOUQ0LCBcJ01cJywgXCdceGU1XHg4MFx4YWJcJyksXG4gICAgKDB4RjlENSwgXCdNXCcsIFwnXHhlNVx4YjRceDk5XCcpLFxuICAgICgweEY5RDYsIFwnTVwnLCBcJ1x4ZTZceGI3XHhhYVwnKSxcbiAgICAoMHhGOUQ3LCBcJ01cJywgXCdceGU4XHhiY1x4YWFcJyksXG4gICAgKDB4RjlEOCwgXCdNXCcsIFwnXHhlNVx4YmVceDhiXCcpLFxuICAgICgweEY5RDksIFwnTVwnLCBcJ1x4ZTZceDg1XHg4NFwnKSxcbiAgICAoMHhGOURBLCBcJ01cJywgXCdceGU2XHhhMFx4OTdcJyksXG4gICAgKDB4RjlEQiwgXCdNXCcsIFwnXHhlN1x4OGVceDg3XCcpLFxuICAgICgweEY5REMsIFwnTVwnLCBcJ1x4ZTlceDlhXHg4NlwnKSxcbiAgICAoMHhGOURELCBcJ01cJywgXCdceGU1XHg4OFx4YTlcJyksXG4gICAgKDB4RjlERSwgXCdNXCcsIFwnXHhlNVx4OTBceDhmXCcpLFxuICAgICgweEY5REYsIFwnTVwnLCBcJ1x4ZTVceGIxXHhhNVwnKSxcbiAgICAoMHhGOUUwLCBcJ01cJywgXCdceGU2XHg5OFx4OTNcJyksXG4gICAgKDB4RjlFMSwgXCdNXCcsIFwnXHhlNlx4OWRceDhlXCcpLFxuICAgICgweEY5RTIsIFwnTVwnLCBcJ1x4ZTZceGEyXHhhOFwnKSxcbiAgICAoMHhGOUUzLCBcJ01cJywgXCdceGU2XHhiM1x4YTVcJyksXG4gICAgKDB4RjlFNCwgXCdNXCcsIFwnXHhlN1x4OTBceDg2XCcpLFxuICAgICgweEY5RTUsIFwnTVwnLCBcJ1x4ZTdceDk3XHhhMlwnKSxcbiAgICAoMHhGOUU2LCBcJ01cJywgXCdceGU3XHhiZFx4YjlcJyksXG4gICAgKDB4RjlFNywgXCdNXCcsIFwnXHhlOFx4YTNceDhmXCcpLFxuICAgICgweEY5RTgsIFwnTVwnLCBcJ1x4ZThceGEzXHhhMVwnKSxcbiAgICAoMHhGOUU5LCBcJ01cJywgXCdceGU5XHg4N1x4OGNcJyksXG4gICAgKDB4RjlFQSwgXCdNXCcsIFwnXHhlOVx4OWJceGEyXCcpLFxuICAgICgweEY5RUIsIFwnTVwnLCBcJ1x4ZTVceDhjXHhiZlwnKSxcbiAgICAoMHhGOUVDLCBcJ01cJywgXCdceGU2XHhiYVx4YmFcJyksXG4gICAgKDB4RjlFRCwgXCdNXCcsIFwnXHhlNVx4OTBceDlkXCcpLFxuICAgICgweEY5RUUsIFwnTVwnLCBcJ1x4ZTdceDg3XHg5MFwnKSxcbiAgICAoMHhGOUVGLCBcJ01cJywgXCdceGU3XHg5Mlx4OThcJyksXG4gICAgKDB4RjlGMCwgXCdNXCcsIFwnXHhlOFx4OTdceGJhXCcpLFxuICAgICgweEY5RjEsIFwnTVwnLCBcJ1x4ZTlceDlhXHhhM1wnKSxcbiAgICAoMHhGOUYyLCBcJ01cJywgXCdceGU5XHhiMVx4OTdcJyksXG4gICAgKDB4RjlGMywgXCdNXCcsIFwnXHhlOVx4YmFceDlmXCcpLFxuICAgICgweEY5RjQsIFwnTVwnLCBcJ1x4ZTZceDllXHg5N1wnKSxcbiAgICAoMHhGOUY1LCBcJ01cJywgXCdceGU2XHhiN1x4OGJcJyksXG4gICAgKDB4RjlGNiwgXCdNXCcsIFwnXHhlOFx4ODdceGE4XCcpLFxuICAgICgweEY5RjcsIFwnTVwnLCBcJ1x4ZTdceGFiXHg4YlwnKSxcbiAgICAoMHhGOUY4LCBcJ01cJywgXCdceGU3XHhhY1x4YTBcJyksXG4gICAgKDB4RjlGOSwgXCdNXCcsIFwnXHhlN1x4YjJceDkyXCcpLFxuICAgICgweEY5RkEsIFwnTVwnLCBcJ1x4ZTdceDhiXHg4MFwnKSxcbiAgICAoMHhGOUZCLCBcJ01cJywgXCdceGU3XHg4Mlx4OTlcJyksXG4gICAgKDB4RjlGQywgXCdNXCcsIFwnXHhlOFx4YWRceDk4XCcpLFxuICAgICgweEY5RkQsIFwnTVwnLCBcJ1x4ZTRceGJiXHg4MFwnKSxcbiAgICAoMHhGOUZFLCBcJ01cJywgXCdceGU4XHg4Y1x4YjZcJyksXG4gICAgKDB4RjlGRiwgXCdNXCcsIFwnXHhlNVx4ODhceGJhXCcpLFxuICAgICgweEZBMDAsIFwnTVwnLCBcJ1x4ZTVceDg4XHg4N1wnKSxcbiAgICAoMHhGQTAxLCBcJ01cJywgXCdceGU1XHhiYVx4YTZcJyksXG4gICAgKDB4RkEwMiwgXCdNXCcsIFwnXHhlNlx4OGJceDkzXCcpLFxuICAgICgweEZBMDMsIFwnTVwnLCBcJ1x4ZTdceGIzXHg5NlwnKSxcbiAgICAoMHhGQTA0LCBcJ01cJywgXCdceGU1XHhhZVx4ODVcJyksXG4gICAgKDB4RkEwNSwgXCdNXCcsIFwnXHhlNlx4YjRceDllXCcpLFxuICAgICgweEZBMDYsIFwnTVwnLCBcJ1x4ZTZceDlhXHhiNFwnKSxcbiAgICAoMHhGQTA3LCBcJ01cJywgXCdceGU4XHhiY1x4YmJcJyksXG4gICAgKDB4RkEwOCwgXCdNXCcsIFwnXHhlOFx4YTFceDhjXCcpLFxuICAgICgweEZBMDksIFwnTVwnLCBcJ1x4ZTlceDk5XHg4ZFwnKSxcbiAgICAoMHhGQTBBLCBcJ01cJywgXCdceGU4XHhhNlx4OGJcJyksXG4gICAgKDB4RkEwQiwgXCdNXCcsIFwnXHhlNVx4YmJceDkzXCcpLFxuICAgICgweEZBMEMsIFwnTVwnLCBcJ1x4ZTVceDg1XHg4MFwnKSxcbiAgICAoMHhGQTBELCBcJ01cJywgXCdceGU1XHg5N1x4ODBcJyksXG4gICAgXVxuXG5kZWYgX3NlZ180MigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4RkEwRSwgXCdWXCcpLFxuICAgICgweEZBMTAsIFwnTVwnLCBcJ1x4ZTVceGExXHg5YVwnKSxcbiAgICAoMHhGQTExLCBcJ1ZcJyksXG4gICAgKDB4RkExMiwgXCdNXCcsIFwnXHhlNlx4OTlceGI0XCcpLFxuICAgICgweEZBMTMsIFwnVlwnKSxcbiAgICAoMHhGQTE1LCBcJ01cJywgXCdceGU1XHg4N1x4OWVcJyksXG4gICAgKDB4RkExNiwgXCdNXCcsIFwnXHhlN1x4OGNceGFhXCcpLFxuICAgICgweEZBMTcsIFwnTVwnLCBcJ1x4ZTdceDliXHg4YVwnKSxcbiAgICAoMHhGQTE4LCBcJ01cJywgXCdceGU3XHhhNFx4YmNcJyksXG4gICAgKDB4RkExOSwgXCdNXCcsIFwnXHhlN1x4YTVceDllXCcpLFxuICAgICgweEZBMUEsIFwnTVwnLCBcJ1x4ZTdceGE1XHhhNVwnKSxcbiAgICAoMHhGQTFCLCBcJ01cJywgXCdceGU3XHhhNlx4OGZcJyksXG4gICAgKDB4RkExQywgXCdNXCcsIFwnXHhlOVx4OWRceDk2XCcpLFxuICAgICgweEZBMUQsIFwnTVwnLCBcJ1x4ZTdceGIyXHhiZVwnKSxcbiAgICAoMHhGQTFFLCBcJ01cJywgXCdceGU3XHhiZVx4YmRcJyksXG4gICAgKDB4RkExRiwgXCdWXCcpLFxuICAgICgweEZBMjAsIFwnTVwnLCBcJ1x4ZThceDk4XHg5MlwnKSxcbiAgICAoMHhGQTIxLCBcJ1ZcJyksXG4gICAgKDB4RkEyMiwgXCdNXCcsIFwnXHhlOFx4YWJceGI4XCcpLFxuICAgICgweEZBMjMsIFwnVlwnKSxcbiAgICAoMHhGQTI1LCBcJ01cJywgXCdceGU5XHg4MFx4YjhcJyksXG4gICAgKDB4RkEyNiwgXCdNXCcsIFwnXHhlOVx4ODNceGJkXCcpLFxuICAgICgweEZBMjcsIFwnVlwnKSxcbiAgICAoMHhGQTJBLCBcJ01cJywgXCdceGU5XHhhM1x4YWZcJyksXG4gICAgKDB4RkEyQiwgXCdNXCcsIFwnXHhlOVx4YTNceGJjXCcpLFxuICAgICgweEZBMkMsIFwnTVwnLCBcJ1x4ZTlceGE0XHhhOFwnKSxcbiAgICAoMHhGQTJELCBcJ01cJywgXCdceGU5XHhiNlx4YjRcJyksXG4gICAgKDB4RkEyRSwgXCdNXCcsIFwnXHhlOVx4ODNceDllXCcpLFxuICAgICgweEZBMkYsIFwnTVwnLCBcJ1x4ZTlceDlhXHhiN1wnKSxcbiAgICAoMHhGQTMwLCBcJ01cJywgXCdceGU0XHhiZVx4YWVcJyksXG4gICAgKDB4RkEzMSwgXCdNXCcsIFwnXHhlNVx4ODNceGE3XCcpLFxuICAgICgweEZBMzIsIFwnTVwnLCBcJ1x4ZTVceDg1XHg4ZFwnKSxcbiAgICAoMHhGQTMzLCBcJ01cJywgXCdceGU1XHg4Ylx4ODlcJyksXG4gICAgKDB4RkEzNCwgXCdNXCcsIFwnXHhlNVx4OGJceGE0XCcpLFxuICAgICgweEZBMzUsIFwnTVwnLCBcJ1x4ZTVceDhkXHg5MVwnKSxcbiAgICAoMHhGQTM2LCBcJ01cJywgXCdceGU1XHg5Nlx4OWRcJyksXG4gICAgKDB4RkEzNywgXCdNXCcsIFwnXHhlNVx4OThceDg2XCcpLFxuICAgICgweEZBMzgsIFwnTVwnLCBcJ1x4ZTVceDk5XHhhOFwnKSxcbiAgICAoMHhGQTM5LCBcJ01cJywgXCdceGU1XHhhMVx4ODBcJyksXG4gICAgKDB4RkEzQSwgXCdNXCcsIFwnXHhlNVx4YTJceGE4XCcpLFxuICAgICgweEZBM0IsIFwnTVwnLCBcJ1x4ZTVceGIxXHhhNFwnKSxcbiAgICAoMHhGQTNDLCBcJ01cJywgXCdceGU1XHhiMVx4YWVcJyksXG4gICAgKDB4RkEzRCwgXCdNXCcsIFwnXHhlNlx4ODJceDk0XCcpLFxuICAgICgweEZBM0UsIFwnTVwnLCBcJ1x4ZTZceDg1XHhhOFwnKSxcbiAgICAoMHhGQTNGLCBcJ01cJywgXCdceGU2XHg4Nlx4OGVcJyksXG4gICAgKDB4RkE0MCwgXCdNXCcsIFwnXHhlNlx4ODdceGIyXCcpLFxuICAgICgweEZBNDEsIFwnTVwnLCBcJ1x4ZTZceDk1XHg4ZlwnKSxcbiAgICAoMHhGQTQyLCBcJ01cJywgXCdceGU2XHg5N1x4YTJcJyksXG4gICAgKDB4RkE0MywgXCdNXCcsIFwnXHhlNlx4OWFceDkxXCcpLFxuICAgICgweEZBNDQsIFwnTVwnLCBcJ1x4ZTZceGEyXHg4NVwnKSxcbiAgICAoMHhGQTQ1LCBcJ01cJywgXCdceGU2XHhiNVx4YjdcJyksXG4gICAgKDB4RkE0NiwgXCdNXCcsIFwnXHhlNlx4YjhceDlhXCcpLFxuICAgICgweEZBNDcsIFwnTVwnLCBcJ1x4ZTZceGJjXHhhMlwnKSxcbiAgICAoMHhGQTQ4LCBcJ01cJywgXCdceGU3XHg4NVx4YWVcJyksXG4gICAgKDB4RkE0OSwgXCdNXCcsIFwnXHhlN1x4ODhceGFiXCcpLFxuICAgICgweEZBNEEsIFwnTVwnLCBcJ1x4ZTdceDkwXHhhMlwnKSxcbiAgICAoMHhGQTRCLCBcJ01cJywgXCdceGU3XHhhMlx4OTFcJyksXG4gICAgKDB4RkE0QywgXCdNXCcsIFwnXHhlN1x4YTRceGJlXCcpLFxuICAgICgweEZBNEQsIFwnTVwnLCBcJ1x4ZTdceGE1XHg4OVwnKSxcbiAgICAoMHhGQTRFLCBcJ01cJywgXCdceGU3XHhhNVx4ODhcJyksXG4gICAgKDB4RkE0RiwgXCdNXCcsIFwnXHhlN1x4YTVceDkwXCcpLFxuICAgICgweEZBNTAsIFwnTVwnLCBcJ1x4ZTdceGE1XHg5NlwnKSxcbiAgICAoMHhGQTUxLCBcJ01cJywgXCdceGU3XHhhNVx4OWRcJyksXG4gICAgKDB4RkE1MiwgXCdNXCcsIFwnXHhlN1x4YTZceDhkXCcpLFxuICAgICgweEZBNTMsIFwnTVwnLCBcJ1x4ZTdceGE2XHg4ZVwnKSxcbiAgICAoMHhGQTU0LCBcJ01cJywgXCdceGU3XHhhOVx4ODBcJyksXG4gICAgKDB4RkE1NSwgXCdNXCcsIFwnXHhlN1x4YWFceDgxXCcpLFxuICAgICgweEZBNTYsIFwnTVwnLCBcJ1x4ZTdceGFmXHg4MFwnKSxcbiAgICAoMHhGQTU3LCBcJ01cJywgXCdceGU3XHhiN1x4YjRcJyksXG4gICAgKDB4RkE1OCwgXCdNXCcsIFwnXHhlN1x4YjhceDg5XCcpLFxuICAgICgweEZBNTksIFwnTVwnLCBcJ1x4ZTdceGI5XHg4MVwnKSxcbiAgICAoMHhGQTVBLCBcJ01cJywgXCdceGU3XHhiZFx4YjJcJyksXG4gICAgKDB4RkE1QiwgXCdNXCcsIFwnXHhlOFx4ODBceDg1XCcpLFxuICAgICgweEZBNUMsIFwnTVwnLCBcJ1x4ZThceDg3XHhhZFwnKSxcbiAgICAoMHhGQTVELCBcJ01cJywgXCdceGU4XHg4OVx4YjlcJyksXG4gICAgKDB4RkE1RiwgXCdNXCcsIFwnXHhlOFx4OTFceDk3XCcpLFxuICAgICgweEZBNjAsIFwnTVwnLCBcJ1x4ZThceGE0XHg5MFwnKSxcbiAgICAoMHhGQTYxLCBcJ01cJywgXCdceGU4XHhhNlx4OTZcJyksXG4gICAgKDB4RkE2MiwgXCdNXCcsIFwnXHhlOFx4YWNceDgxXCcpLFxuICAgICgweEZBNjMsIFwnTVwnLCBcJ1x4ZThceGFjXHhiOVwnKSxcbiAgICAoMHhGQTY0LCBcJ01cJywgXCdceGU4XHhiM1x4OTNcJyksXG4gICAgKDB4RkE2NSwgXCdNXCcsIFwnXHhlOFx4YjRceDg4XCcpLFxuICAgICgweEZBNjYsIFwnTVwnLCBcJ1x4ZThceGJlXHhiNlwnKSxcbiAgICAoMHhGQTY3LCBcJ01cJywgXCdceGU5XHg4MFx4YjhcJyksXG4gICAgKDB4RkE2OCwgXCdNXCcsIFwnXHhlOVx4OWJceGEzXCcpLFxuICAgICgweEZBNjksIFwnTVwnLCBcJ1x4ZTlceDlmXHhiZlwnKSxcbiAgICAoMHhGQTZBLCBcJ01cJywgXCdceGU5XHhhMFx4YmJcJyksXG4gICAgKDB4RkE2QiwgXCdNXCcsIFwnXHhlNlx4ODFceGI1XCcpLFxuICAgICgweEZBNkMsIFwnTVwnLCBcJ1x4ZjBceGE0XHg4Ylx4YWVcJyksXG4gICAgKDB4RkE2RCwgXCdNXCcsIFwnXHhlOFx4ODhceDk4XCcpLFxuICAgICgweEZBNkUsIFwnWFwnKSxcbiAgICAoMHhGQTcwLCBcJ01cJywgXCdceGU0XHhiOFx4YTZcJyksXG4gICAgKDB4RkE3MSwgXCdNXCcsIFwnXHhlNVx4ODZceGI1XCcpLFxuICAgICgweEZBNzIsIFwnTVwnLCBcJ1x4ZTVceDg1XHhhOFwnKSxcbiAgICAoMHhGQTczLCBcJ01cJywgXCdceGU0XHhiZVx4ODBcJyksXG4gICAgKDB4RkE3NCwgXCdNXCcsIFwnXHhlNVx4ODVceDg1XCcpLFxuICAgICgweEZBNzUsIFwnTVwnLCBcJ1x4ZTVceDg2XHg4MFwnKSxcbiAgICAoMHhGQTc2LCBcJ01cJywgXCdceGU1XHg4Ylx4ODdcJyksXG4gICAgKDB4RkE3NywgXCdNXCcsIFwnXHhlNVx4OGJceGJhXCcpLFxuICAgICgweEZBNzgsIFwnTVwnLCBcJ1x4ZTVceDk2XHg5ZFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzQzKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhGQTc5LCBcJ01cJywgXCdceGU1XHg5NVx4OTVcJyksXG4gICAgKDB4RkE3QSwgXCdNXCcsIFwnXHhlNVx4OTZceDk5XCcpLFxuICAgICgweEZBN0IsIFwnTVwnLCBcJ1x4ZTVceDk3XHhhMlwnKSxcbiAgICAoMHhGQTdDLCBcJ01cJywgXCdceGU1XHhhMVx4OWFcJyksXG4gICAgKDB4RkE3RCwgXCdNXCcsIFwnXHhlNVx4YTJceGIzXCcpLFxuICAgICgweEZBN0UsIFwnTVwnLCBcJ1x4ZTVceGE1XHg4NFwnKSxcbiAgICAoMHhGQTdGLCBcJ01cJywgXCdceGU1XHhhNVx4OTRcJyksXG4gICAgKDB4RkE4MCwgXCdNXCcsIFwnXHhlNVx4YTlceGEyXCcpLFxuICAgICgweEZBODEsIFwnTVwnLCBcJ1x4ZTVceGFjXHhhOFwnKSxcbiAgICAoMHhGQTgyLCBcJ01cJywgXCdceGU1XHhiYlx4OTJcJyksXG4gICAgKDB4RkE4MywgXCdNXCcsIFwnXHhlNVx4YmJceDk5XCcpLFxuICAgICgweEZBODQsIFwnTVwnLCBcJ1x4ZTVceGJkXHhhOVwnKSxcbiAgICAoMHhGQTg1LCBcJ01cJywgXCdceGU1XHhiZVx4YWRcJyksXG4gICAgKDB4RkE4NiwgXCdNXCcsIFwnXHhlNlx4ODNceDk4XCcpLFxuICAgICgweEZBODcsIFwnTVwnLCBcJ1x4ZTZceDg1XHg4ZVwnKSxcbiAgICAoMHhGQTg4LCBcJ01cJywgXCdceGU2XHg4NFx4ODhcJyksXG4gICAgKDB4RkE4OSwgXCdNXCcsIFwnXHhlNlx4ODZceDhlXCcpLFxuICAgICgweEZBOEEsIFwnTVwnLCBcJ1x4ZTZceDg1XHhhMFwnKSxcbiAgICAoMHhGQThCLCBcJ01cJywgXCdceGU2XHg4N1x4YjJcJyksXG4gICAgKDB4RkE4QywgXCdNXCcsIFwnXHhlNlx4ODhceGI0XCcpLFxuICAgICgweEZBOEQsIFwnTVwnLCBcJ1x4ZTZceDhmXHg4NFwnKSxcbiAgICAoMHhGQThFLCBcJ01cJywgXCdceGU2XHg5MFx4OWNcJyksXG4gICAgKDB4RkE4RiwgXCdNXCcsIFwnXHhlNlx4OTFceDkyXCcpLFxuICAgICgweEZBOTAsIFwnTVwnLCBcJ1x4ZTZceDk1XHg5NlwnKSxcbiAgICAoMHhGQTkxLCBcJ01cJywgXCdceGU2XHg5OVx4YjRcJyksXG4gICAgKDB4RkE5MiwgXCdNXCcsIFwnXHhlNlx4OWNceDk3XCcpLFxuICAgICgweEZBOTMsIFwnTVwnLCBcJ1x4ZTZceDljXHg5YlwnKSxcbiAgICAoMHhGQTk0LCBcJ01cJywgXCdceGU2XHg5ZFx4OTZcJyksXG4gICAgKDB4RkE5NSwgXCdNXCcsIFwnXHhlNlx4YWRceGI5XCcpLFxuICAgICgweEZBOTYsIFwnTVwnLCBcJ1x4ZTZceGFlXHhiYVwnKSxcbiAgICAoMHhGQTk3LCBcJ01cJywgXCdceGU2XHhiNVx4ODFcJyksXG4gICAgKDB4RkE5OCwgXCdNXCcsIFwnXHhlNlx4YmJceDliXCcpLFxuICAgICgweEZBOTksIFwnTVwnLCBcJ1x4ZTZceGJiXHg4YlwnKSxcbiAgICAoMHhGQTlBLCBcJ01cJywgXCdceGU2XHhiY1x4YTJcJyksXG4gICAgKDB4RkE5QiwgXCdNXCcsIFwnXHhlN1x4ODBceDllXCcpLFxuICAgICgweEZBOUMsIFwnTVwnLCBcJ1x4ZTdceDg1XHhhZVwnKSxcbiAgICAoMHhGQTlELCBcJ01cJywgXCdceGU3XHg5ZVx4YTdcJyksXG4gICAgKDB4RkE5RSwgXCdNXCcsIFwnXHhlN1x4ODhceGI1XCcpLFxuICAgICgweEZBOUYsIFwnTVwnLCBcJ1x4ZTdceDhhXHhhZlwnKSxcbiAgICAoMHhGQUEwLCBcJ01cJywgXCdceGU3XHg4Y1x4YWFcJyksXG4gICAgKDB4RkFBMSwgXCdNXCcsIFwnXHhlN1x4OTFceGIxXCcpLFxuICAgICgweEZBQTIsIFwnTVwnLCBcJ1x4ZTdceDk0XHg4NlwnKSxcbiAgICAoMHhGQUEzLCBcJ01cJywgXCdceGU3XHg5NFx4YmJcJyksXG4gICAgKDB4RkFBNCwgXCdNXCcsIFwnXHhlN1x4OThceDlkXCcpLFxuICAgICgweEZBQTUsIFwnTVwnLCBcJ1x4ZTdceDk4XHg5ZlwnKSxcbiAgICAoMHhGQUE2LCBcJ01cJywgXCdceGU3XHg5Ylx4OGFcJyksXG4gICAgKDB4RkFBNywgXCdNXCcsIFwnXHhlN1x4OWJceDliXCcpLFxuICAgICgweEZBQTgsIFwnTVwnLCBcJ1x4ZTdceDliXHhiNFwnKSxcbiAgICAoMHhGQUE5LCBcJ01cJywgXCdceGU3XHg5ZFx4OGFcJyksXG4gICAgKDB4RkFBQSwgXCdNXCcsIFwnXHhlN1x4OWRceDgwXCcpLFxuICAgICgweEZBQUIsIFwnTVwnLCBcJ1x4ZTdceGEzXHg4Y1wnKSxcbiAgICAoMHhGQUFDLCBcJ01cJywgXCdceGU3XHhhYVx4YjFcJyksXG4gICAgKDB4RkFBRCwgXCdNXCcsIFwnXHhlN1x4YWZceDgwXCcpLFxuICAgICgweEZBQUUsIFwnTVwnLCBcJ1x4ZTdceGIxXHhiYlwnKSxcbiAgICAoMHhGQUFGLCBcJ01cJywgXCdceGU3XHhiNVx4OWJcJyksXG4gICAgKDB4RkFCMCwgXCdNXCcsIFwnXHhlN1x4YjdceGI0XCcpLFxuICAgICgweEZBQjEsIFwnTVwnLCBcJ1x4ZTdceGJjXHhiZVwnKSxcbiAgICAoMHhGQUIyLCBcJ01cJywgXCdceGU4XHg4MFx4ODVcJyksXG4gICAgKDB4RkFCMywgXCdNXCcsIFwnXHhlOFx4OGRceDkyXCcpLFxuICAgICgweEZBQjQsIFwnTVwnLCBcJ1x4ZThceDhmXHhhZlwnKSxcbiAgICAoMHhGQUI1LCBcJ01cJywgXCdceGU4XHg5ZFx4YjlcJyksXG4gICAgKDB4RkFCNiwgXCdNXCcsIFwnXHhlOFx4YTVceDgxXCcpLFxuICAgICgweEZBQjcsIFwnTVwnLCBcJ1x4ZThceGE2XHg4NlwnKSxcbiAgICAoMHhGQUI4LCBcJ01cJywgXCdceGU4XHhhNlx4OTZcJyksXG4gICAgKDB4RkFCOSwgXCdNXCcsIFwnXHhlOFx4YWFceGJmXCcpLFxuICAgICgweEZBQkEsIFwnTVwnLCBcJ1x4ZThceGFiXHhiOFwnKSxcbiAgICAoMHhGQUJCLCBcJ01cJywgXCdceGU4XHhhYlx4OGJcJyksXG4gICAgKDB4RkFCQywgXCdNXCcsIFwnXHhlOFx4YWNceDgxXCcpLFxuICAgICgweEZBQkQsIFwnTVwnLCBcJ1x4ZThceGFiXHhiZVwnKSxcbiAgICAoMHhGQUJFLCBcJ01cJywgXCdceGU4XHhhYlx4YWRcJyksXG4gICAgKDB4RkFCRiwgXCdNXCcsIFwnXHhlOFx4YWNceGI5XCcpLFxuICAgICgweEZBQzAsIFwnTVwnLCBcJ1x4ZThceGFlXHg4YVwnKSxcbiAgICAoMHhGQUMxLCBcJ01cJywgXCdceGU4XHhiNFx4ODhcJyksXG4gICAgKDB4RkFDMiwgXCdNXCcsIFwnXHhlOFx4YmNceGI4XCcpLFxuICAgICgweEZBQzMsIFwnTVwnLCBcJ1x4ZTlceDgxXHhiMlwnKSxcbiAgICAoMHhGQUM0LCBcJ01cJywgXCdceGU5XHg4Nlx4OTlcJyksXG4gICAgKDB4RkFDNSwgXCdNXCcsIFwnXHhlOVx4ODlceGI2XCcpLFxuICAgICgweEZBQzYsIFwnTVwnLCBcJ1x4ZTlceDk5XHhiY1wnKSxcbiAgICAoMHhGQUM3LCBcJ01cJywgXCdceGU5XHg5Ylx4YTNcJyksXG4gICAgKDB4RkFDOCwgXCdNXCcsIFwnXHhlOVx4OWRceDk2XCcpLFxuICAgICgweEZBQzksIFwnTVwnLCBcJ1x4ZTlceDlmXHg5YlwnKSxcbiAgICAoMHhGQUNBLCBcJ01cJywgXCdceGU5XHg5Zlx4YmZcJyksXG4gICAgKDB4RkFDQiwgXCdNXCcsIFwnXHhlOVx4YTBceDhiXCcpLFxuICAgICgweEZBQ0MsIFwnTVwnLCBcJ1x4ZTlceGEwXHhiYlwnKSxcbiAgICAoMHhGQUNELCBcJ01cJywgXCdceGU5XHhhY1x4OTJcJyksXG4gICAgKDB4RkFDRSwgXCdNXCcsIFwnXHhlOVx4YmVceDljXCcpLFxuICAgICgweEZBQ0YsIFwnTVwnLCBcJ1x4ZjBceGEyXHhhMVx4OGFcJyksXG4gICAgKDB4RkFEMCwgXCdNXCcsIFwnXHhmMFx4YTJceGExXHg4NFwnKSxcbiAgICAoMHhGQUQxLCBcJ01cJywgXCdceGYwXHhhM1x4OGZceDk1XCcpLFxuICAgICgweEZBRDIsIFwnTVwnLCBcJ1x4ZTNceGFlXHg5ZFwnKSxcbiAgICAoMHhGQUQzLCBcJ01cJywgXCdceGU0XHg4MFx4OThcJyksXG4gICAgKDB4RkFENCwgXCdNXCcsIFwnXHhlNFx4ODBceGI5XCcpLFxuICAgICgweEZBRDUsIFwnTVwnLCBcJ1x4ZjBceGE1XHg4OVx4ODlcJyksXG4gICAgKDB4RkFENiwgXCdNXCcsIFwnXHhmMFx4YTVceGIzXHg5MFwnKSxcbiAgICAoMHhGQUQ3LCBcJ01cJywgXCdceGYwXHhhN1x4YmJceDkzXCcpLFxuICAgICgweEZBRDgsIFwnTVwnLCBcJ1x4ZTlceGJkXHg4M1wnKSxcbiAgICAoMHhGQUQ5LCBcJ01cJywgXCdceGU5XHhiZVx4OGVcJyksXG4gICAgKDB4RkFEQSwgXCdYXCcpLFxuICAgICgweEZCMDAsIFwnTVwnLCBcJ2ZmXCcpLFxuICAgICgweEZCMDEsIFwnTVwnLCBcJ2ZpXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNDQoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweEZCMDIsIFwnTVwnLCBcJ2ZsXCcpLFxuICAgICgweEZCMDMsIFwnTVwnLCBcJ2ZmaVwnKSxcbiAgICAoMHhGQjA0LCBcJ01cJywgXCdmZmxcJyksXG4gICAgKDB4RkIwNSwgXCdNXCcsIFwnc3RcJyksXG4gICAgKDB4RkIwNywgXCdYXCcpLFxuICAgICgweEZCMTMsIFwnTVwnLCBcJ1x4ZDVceGI0XHhkNVx4YjZcJyksXG4gICAgKDB4RkIxNCwgXCdNXCcsIFwnXHhkNVx4YjRceGQ1XHhhNVwnKSxcbiAgICAoMHhGQjE1LCBcJ01cJywgXCdceGQ1XHhiNFx4ZDVceGFiXCcpLFxuICAgICgweEZCMTYsIFwnTVwnLCBcJ1x4ZDVceGJlXHhkNVx4YjZcJyksXG4gICAgKDB4RkIxNywgXCdNXCcsIFwnXHhkNVx4YjRceGQ1XHhhZFwnKSxcbiAgICAoMHhGQjE4LCBcJ1hcJyksXG4gICAgKDB4RkIxRCwgXCdNXCcsIFwnXHhkN1x4OTlceGQ2XHhiNFwnKSxcbiAgICAoMHhGQjFFLCBcJ1ZcJyksXG4gICAgKDB4RkIxRiwgXCdNXCcsIFwnXHhkN1x4YjJceGQ2XHhiN1wnKSxcbiAgICAoMHhGQjIwLCBcJ01cJywgXCdceGQ3XHhhMlwnKSxcbiAgICAoMHhGQjIxLCBcJ01cJywgXCdceGQ3XHg5MFwnKSxcbiAgICAoMHhGQjIyLCBcJ01cJywgXCdceGQ3XHg5M1wnKSxcbiAgICAoMHhGQjIzLCBcJ01cJywgXCdceGQ3XHg5NFwnKSxcbiAgICAoMHhGQjI0LCBcJ01cJywgXCdceGQ3XHg5YlwnKSxcbiAgICAoMHhGQjI1LCBcJ01cJywgXCdceGQ3XHg5Y1wnKSxcbiAgICAoMHhGQjI2LCBcJ01cJywgXCdceGQ3XHg5ZFwnKSxcbiAgICAoMHhGQjI3LCBcJ01cJywgXCdceGQ3XHhhOFwnKSxcbiAgICAoMHhGQjI4LCBcJ01cJywgXCdceGQ3XHhhYVwnKSxcbiAgICAoMHhGQjI5LCBcJzNcJywgXCcrXCcpLFxuICAgICgweEZCMkEsIFwnTVwnLCBcJ1x4ZDdceGE5XHhkN1x4ODFcJyksXG4gICAgKDB4RkIyQiwgXCdNXCcsIFwnXHhkN1x4YTlceGQ3XHg4MlwnKSxcbiAgICAoMHhGQjJDLCBcJ01cJywgXCdceGQ3XHhhOVx4ZDZceGJjXHhkN1x4ODFcJyksXG4gICAgKDB4RkIyRCwgXCdNXCcsIFwnXHhkN1x4YTlceGQ2XHhiY1x4ZDdceDgyXCcpLFxuICAgICgweEZCMkUsIFwnTVwnLCBcJ1x4ZDdceDkwXHhkNlx4YjdcJyksXG4gICAgKDB4RkIyRiwgXCdNXCcsIFwnXHhkN1x4OTBceGQ2XHhiOFwnKSxcbiAgICAoMHhGQjMwLCBcJ01cJywgXCdceGQ3XHg5MFx4ZDZceGJjXCcpLFxuICAgICgweEZCMzEsIFwnTVwnLCBcJ1x4ZDdceDkxXHhkNlx4YmNcJyksXG4gICAgKDB4RkIzMiwgXCdNXCcsIFwnXHhkN1x4OTJceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjMzLCBcJ01cJywgXCdceGQ3XHg5M1x4ZDZceGJjXCcpLFxuICAgICgweEZCMzQsIFwnTVwnLCBcJ1x4ZDdceDk0XHhkNlx4YmNcJyksXG4gICAgKDB4RkIzNSwgXCdNXCcsIFwnXHhkN1x4OTVceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjM2LCBcJ01cJywgXCdceGQ3XHg5Nlx4ZDZceGJjXCcpLFxuICAgICgweEZCMzcsIFwnWFwnKSxcbiAgICAoMHhGQjM4LCBcJ01cJywgXCdceGQ3XHg5OFx4ZDZceGJjXCcpLFxuICAgICgweEZCMzksIFwnTVwnLCBcJ1x4ZDdceDk5XHhkNlx4YmNcJyksXG4gICAgKDB4RkIzQSwgXCdNXCcsIFwnXHhkN1x4OWFceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjNCLCBcJ01cJywgXCdceGQ3XHg5Ylx4ZDZceGJjXCcpLFxuICAgICgweEZCM0MsIFwnTVwnLCBcJ1x4ZDdceDljXHhkNlx4YmNcJyksXG4gICAgKDB4RkIzRCwgXCdYXCcpLFxuICAgICgweEZCM0UsIFwnTVwnLCBcJ1x4ZDdceDllXHhkNlx4YmNcJyksXG4gICAgKDB4RkIzRiwgXCdYXCcpLFxuICAgICgweEZCNDAsIFwnTVwnLCBcJ1x4ZDdceGEwXHhkNlx4YmNcJyksXG4gICAgKDB4RkI0MSwgXCdNXCcsIFwnXHhkN1x4YTFceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjQyLCBcJ1hcJyksXG4gICAgKDB4RkI0MywgXCdNXCcsIFwnXHhkN1x4YTNceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjQ0LCBcJ01cJywgXCdceGQ3XHhhNFx4ZDZceGJjXCcpLFxuICAgICgweEZCNDUsIFwnWFwnKSxcbiAgICAoMHhGQjQ2LCBcJ01cJywgXCdceGQ3XHhhNlx4ZDZceGJjXCcpLFxuICAgICgweEZCNDcsIFwnTVwnLCBcJ1x4ZDdceGE3XHhkNlx4YmNcJyksXG4gICAgKDB4RkI0OCwgXCdNXCcsIFwnXHhkN1x4YThceGQ2XHhiY1wnKSxcbiAgICAoMHhGQjQ5LCBcJ01cJywgXCdceGQ3XHhhOVx4ZDZceGJjXCcpLFxuICAgICgweEZCNEEsIFwnTVwnLCBcJ1x4ZDdceGFhXHhkNlx4YmNcJyksXG4gICAgKDB4RkI0QiwgXCdNXCcsIFwnXHhkN1x4OTVceGQ2XHhiOVwnKSxcbiAgICAoMHhGQjRDLCBcJ01cJywgXCdceGQ3XHg5MVx4ZDZceGJmXCcpLFxuICAgICgweEZCNEQsIFwnTVwnLCBcJ1x4ZDdceDliXHhkNlx4YmZcJyksXG4gICAgKDB4RkI0RSwgXCdNXCcsIFwnXHhkN1x4YTRceGQ2XHhiZlwnKSxcbiAgICAoMHhGQjRGLCBcJ01cJywgXCdceGQ3XHg5MFx4ZDdceDljXCcpLFxuICAgICgweEZCNTAsIFwnTVwnLCBcJ1x4ZDlceGIxXCcpLFxuICAgICgweEZCNTIsIFwnTVwnLCBcJ1x4ZDlceGJiXCcpLFxuICAgICgweEZCNTYsIFwnTVwnLCBcJ1x4ZDlceGJlXCcpLFxuICAgICgweEZCNUEsIFwnTVwnLCBcJ1x4ZGFceDgwXCcpLFxuICAgICgweEZCNUUsIFwnTVwnLCBcJ1x4ZDlceGJhXCcpLFxuICAgICgweEZCNjIsIFwnTVwnLCBcJ1x4ZDlceGJmXCcpLFxuICAgICgweEZCNjYsIFwnTVwnLCBcJ1x4ZDlceGI5XCcpLFxuICAgICgweEZCNkEsIFwnTVwnLCBcJ1x4ZGFceGE0XCcpLFxuICAgICgweEZCNkUsIFwnTVwnLCBcJ1x4ZGFceGE2XCcpLFxuICAgICgweEZCNzIsIFwnTVwnLCBcJ1x4ZGFceDg0XCcpLFxuICAgICgweEZCNzYsIFwnTVwnLCBcJ1x4ZGFceDgzXCcpLFxuICAgICgweEZCN0EsIFwnTVwnLCBcJ1x4ZGFceDg2XCcpLFxuICAgICgweEZCN0UsIFwnTVwnLCBcJ1x4ZGFceDg3XCcpLFxuICAgICgweEZCODIsIFwnTVwnLCBcJ1x4ZGFceDhkXCcpLFxuICAgICgweEZCODQsIFwnTVwnLCBcJ1x4ZGFceDhjXCcpLFxuICAgICgweEZCODYsIFwnTVwnLCBcJ1x4ZGFceDhlXCcpLFxuICAgICgweEZCODgsIFwnTVwnLCBcJ1x4ZGFceDg4XCcpLFxuICAgICgweEZCOEEsIFwnTVwnLCBcJ1x4ZGFceDk4XCcpLFxuICAgICgweEZCOEMsIFwnTVwnLCBcJ1x4ZGFceDkxXCcpLFxuICAgICgweEZCOEUsIFwnTVwnLCBcJ1x4ZGFceGE5XCcpLFxuICAgICgweEZCOTIsIFwnTVwnLCBcJ1x4ZGFceGFmXCcpLFxuICAgICgweEZCOTYsIFwnTVwnLCBcJ1x4ZGFceGIzXCcpLFxuICAgICgweEZCOUEsIFwnTVwnLCBcJ1x4ZGFceGIxXCcpLFxuICAgICgweEZCOUUsIFwnTVwnLCBcJ1x4ZGFceGJhXCcpLFxuICAgICgweEZCQTAsIFwnTVwnLCBcJ1x4ZGFceGJiXCcpLFxuICAgICgweEZCQTQsIFwnTVwnLCBcJ1x4ZGJceDgwXCcpLFxuICAgICgweEZCQTYsIFwnTVwnLCBcJ1x4ZGJceDgxXCcpLFxuICAgICgweEZCQUEsIFwnTVwnLCBcJ1x4ZGFceGJlXCcpLFxuICAgICgweEZCQUUsIFwnTVwnLCBcJ1x4ZGJceDkyXCcpLFxuICAgICgweEZCQjAsIFwnTVwnLCBcJ1x4ZGJceDkzXCcpLFxuICAgICgweEZCQjIsIFwnVlwnKSxcbiAgICAoMHhGQkMzLCBcJ1hcJyksXG4gICAgKDB4RkJEMywgXCdNXCcsIFwnXHhkYVx4YWRcJyksXG4gICAgKDB4RkJENywgXCdNXCcsIFwnXHhkYlx4ODdcJyksXG4gICAgKDB4RkJEOSwgXCdNXCcsIFwnXHhkYlx4ODZcJyksXG4gICAgKDB4RkJEQiwgXCdNXCcsIFwnXHhkYlx4ODhcJyksXG4gICAgKDB4RkJERCwgXCdNXCcsIFwnXHhkYlx4ODdceGQ5XHhiNFwnKSxcbiAgICAoMHhGQkRFLCBcJ01cJywgXCdceGRiXHg4YlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzQ1KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhGQkUwLCBcJ01cJywgXCdceGRiXHg4NVwnKSxcbiAgICAoMHhGQkUyLCBcJ01cJywgXCdceGRiXHg4OVwnKSxcbiAgICAoMHhGQkU0LCBcJ01cJywgXCdceGRiXHg5MFwnKSxcbiAgICAoMHhGQkU4LCBcJ01cJywgXCdceGQ5XHg4OVwnKSxcbiAgICAoMHhGQkVBLCBcJ01cJywgXCdceGQ4XHhhNlx4ZDhceGE3XCcpLFxuICAgICgweEZCRUMsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkYlx4OTVcJyksXG4gICAgKDB4RkJFRSwgXCdNXCcsIFwnXHhkOFx4YTZceGQ5XHg4OFwnKSxcbiAgICAoMHhGQkYwLCBcJ01cJywgXCdceGQ4XHhhNlx4ZGJceDg3XCcpLFxuICAgICgweEZCRjIsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkYlx4ODZcJyksXG4gICAgKDB4RkJGNCwgXCdNXCcsIFwnXHhkOFx4YTZceGRiXHg4OFwnKSxcbiAgICAoMHhGQkY2LCBcJ01cJywgXCdceGQ4XHhhNlx4ZGJceDkwXCcpLFxuICAgICgweEZCRjksIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOVx4ODlcJyksXG4gICAgKDB4RkJGQywgXCdNXCcsIFwnXHhkYlx4OGNcJyksXG4gICAgKDB4RkMwMCwgXCdNXCcsIFwnXHhkOFx4YTZceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzAxLCBcJ01cJywgXCdceGQ4XHhhNlx4ZDhceGFkXCcpLFxuICAgICgweEZDMDIsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOVx4ODVcJyksXG4gICAgKDB4RkMwMywgXCdNXCcsIFwnXHhkOFx4YTZceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzA0LCBcJ01cJywgXCdceGQ4XHhhNlx4ZDlceDhhXCcpLFxuICAgICgweEZDMDUsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOFx4YWNcJyksXG4gICAgKDB4RkMwNiwgXCdNXCcsIFwnXHhkOFx4YThceGQ4XHhhZFwnKSxcbiAgICAoMHhGQzA3LCBcJ01cJywgXCdceGQ4XHhhOFx4ZDhceGFlXCcpLFxuICAgICgweEZDMDgsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOVx4ODVcJyksXG4gICAgKDB4RkMwOSwgXCdNXCcsIFwnXHhkOFx4YThceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzBBLCBcJ01cJywgXCdceGQ4XHhhOFx4ZDlceDhhXCcpLFxuICAgICgweEZDMEIsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOFx4YWNcJyksXG4gICAgKDB4RkMwQywgXCdNXCcsIFwnXHhkOFx4YWFceGQ4XHhhZFwnKSxcbiAgICAoMHhGQzBELCBcJ01cJywgXCdceGQ4XHhhYVx4ZDhceGFlXCcpLFxuICAgICgweEZDMEUsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOVx4ODVcJyksXG4gICAgKDB4RkMwRiwgXCdNXCcsIFwnXHhkOFx4YWFceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzEwLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDlceDhhXCcpLFxuICAgICgweEZDMTEsIFwnTVwnLCBcJ1x4ZDhceGFiXHhkOFx4YWNcJyksXG4gICAgKDB4RkMxMiwgXCdNXCcsIFwnXHhkOFx4YWJceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzEzLCBcJ01cJywgXCdceGQ4XHhhYlx4ZDlceDg5XCcpLFxuICAgICgweEZDMTQsIFwnTVwnLCBcJ1x4ZDhceGFiXHhkOVx4OGFcJyksXG4gICAgKDB4RkMxNSwgXCdNXCcsIFwnXHhkOFx4YWNceGQ4XHhhZFwnKSxcbiAgICAoMHhGQzE2LCBcJ01cJywgXCdceGQ4XHhhY1x4ZDlceDg1XCcpLFxuICAgICgweEZDMTcsIFwnTVwnLCBcJ1x4ZDhceGFkXHhkOFx4YWNcJyksXG4gICAgKDB4RkMxOCwgXCdNXCcsIFwnXHhkOFx4YWRceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzE5LCBcJ01cJywgXCdceGQ4XHhhZVx4ZDhceGFjXCcpLFxuICAgICgweEZDMUEsIFwnTVwnLCBcJ1x4ZDhceGFlXHhkOFx4YWRcJyksXG4gICAgKDB4RkMxQiwgXCdNXCcsIFwnXHhkOFx4YWVceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzFDLCBcJ01cJywgXCdceGQ4XHhiM1x4ZDhceGFjXCcpLFxuICAgICgweEZDMUQsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOFx4YWRcJyksXG4gICAgKDB4RkMxRSwgXCdNXCcsIFwnXHhkOFx4YjNceGQ4XHhhZVwnKSxcbiAgICAoMHhGQzFGLCBcJ01cJywgXCdceGQ4XHhiM1x4ZDlceDg1XCcpLFxuICAgICgweEZDMjAsIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOFx4YWRcJyksXG4gICAgKDB4RkMyMSwgXCdNXCcsIFwnXHhkOFx4YjVceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzIyLCBcJ01cJywgXCdceGQ4XHhiNlx4ZDhceGFjXCcpLFxuICAgICgweEZDMjMsIFwnTVwnLCBcJ1x4ZDhceGI2XHhkOFx4YWRcJyksXG4gICAgKDB4RkMyNCwgXCdNXCcsIFwnXHhkOFx4YjZceGQ4XHhhZVwnKSxcbiAgICAoMHhGQzI1LCBcJ01cJywgXCdceGQ4XHhiNlx4ZDlceDg1XCcpLFxuICAgICgweEZDMjYsIFwnTVwnLCBcJ1x4ZDhceGI3XHhkOFx4YWRcJyksXG4gICAgKDB4RkMyNywgXCdNXCcsIFwnXHhkOFx4YjdceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzI4LCBcJ01cJywgXCdceGQ4XHhiOFx4ZDlceDg1XCcpLFxuICAgICgweEZDMjksIFwnTVwnLCBcJ1x4ZDhceGI5XHhkOFx4YWNcJyksXG4gICAgKDB4RkMyQSwgXCdNXCcsIFwnXHhkOFx4YjlceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzJCLCBcJ01cJywgXCdceGQ4XHhiYVx4ZDhceGFjXCcpLFxuICAgICgweEZDMkMsIFwnTVwnLCBcJ1x4ZDhceGJhXHhkOVx4ODVcJyksXG4gICAgKDB4RkMyRCwgXCdNXCcsIFwnXHhkOVx4ODFceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzJFLCBcJ01cJywgXCdceGQ5XHg4MVx4ZDhceGFkXCcpLFxuICAgICgweEZDMkYsIFwnTVwnLCBcJ1x4ZDlceDgxXHhkOFx4YWVcJyksXG4gICAgKDB4RkMzMCwgXCdNXCcsIFwnXHhkOVx4ODFceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzMxLCBcJ01cJywgXCdceGQ5XHg4MVx4ZDlceDg5XCcpLFxuICAgICgweEZDMzIsIFwnTVwnLCBcJ1x4ZDlceDgxXHhkOVx4OGFcJyksXG4gICAgKDB4RkMzMywgXCdNXCcsIFwnXHhkOVx4ODJceGQ4XHhhZFwnKSxcbiAgICAoMHhGQzM0LCBcJ01cJywgXCdceGQ5XHg4Mlx4ZDlceDg1XCcpLFxuICAgICgweEZDMzUsIFwnTVwnLCBcJ1x4ZDlceDgyXHhkOVx4ODlcJyksXG4gICAgKDB4RkMzNiwgXCdNXCcsIFwnXHhkOVx4ODJceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzM3LCBcJ01cJywgXCdceGQ5XHg4M1x4ZDhceGE3XCcpLFxuICAgICgweEZDMzgsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOFx4YWNcJyksXG4gICAgKDB4RkMzOSwgXCdNXCcsIFwnXHhkOVx4ODNceGQ4XHhhZFwnKSxcbiAgICAoMHhGQzNBLCBcJ01cJywgXCdceGQ5XHg4M1x4ZDhceGFlXCcpLFxuICAgICgweEZDM0IsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOVx4ODRcJyksXG4gICAgKDB4RkMzQywgXCdNXCcsIFwnXHhkOVx4ODNceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzNELCBcJ01cJywgXCdceGQ5XHg4M1x4ZDlceDg5XCcpLFxuICAgICgweEZDM0UsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOVx4OGFcJyksXG4gICAgKDB4RkMzRiwgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzQwLCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGFkXCcpLFxuICAgICgweEZDNDEsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOFx4YWVcJyksXG4gICAgKDB4RkM0MiwgXCdNXCcsIFwnXHhkOVx4ODRceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzQzLCBcJ01cJywgXCdceGQ5XHg4NFx4ZDlceDg5XCcpLFxuICAgICgweEZDNDQsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOVx4OGFcJyksXG4gICAgKDB4RkM0NSwgXCdNXCcsIFwnXHhkOVx4ODVceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzQ2LCBcJ01cJywgXCdceGQ5XHg4NVx4ZDhceGFkXCcpLFxuICAgICgweEZDNDcsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YWVcJyksXG4gICAgKDB4RkM0OCwgXCdNXCcsIFwnXHhkOVx4ODVceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzQ5LCBcJ01cJywgXCdceGQ5XHg4NVx4ZDlceDg5XCcpLFxuICAgICgweEZDNEEsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOVx4OGFcJyksXG4gICAgKDB4RkM0QiwgXCdNXCcsIFwnXHhkOVx4ODZceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzRDLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDhceGFkXCcpLFxuICAgICgweEZDNEQsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOFx4YWVcJyksXG4gICAgKDB4RkM0RSwgXCdNXCcsIFwnXHhkOVx4ODZceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzRGLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDlceDg5XCcpLFxuICAgICgweEZDNTAsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOVx4OGFcJyksXG4gICAgKDB4RkM1MSwgXCdNXCcsIFwnXHhkOVx4ODdceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzUyLCBcJ01cJywgXCdceGQ5XHg4N1x4ZDlceDg1XCcpLFxuICAgICgweEZDNTMsIFwnTVwnLCBcJ1x4ZDlceDg3XHhkOVx4ODlcJyksXG4gICAgKDB4RkM1NCwgXCdNXCcsIFwnXHhkOVx4ODdceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzU1LCBcJ01cJywgXCdceGQ5XHg4YVx4ZDhceGFjXCcpLFxuICAgICgweEZDNTYsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOFx4YWRcJyksXG4gICAgXVxuXG5kZWYgX3NlZ180NigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4RkM1NywgXCdNXCcsIFwnXHhkOVx4OGFceGQ4XHhhZVwnKSxcbiAgICAoMHhGQzU4LCBcJ01cJywgXCdceGQ5XHg4YVx4ZDlceDg1XCcpLFxuICAgICgweEZDNTksIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOVx4ODlcJyksXG4gICAgKDB4RkM1QSwgXCdNXCcsIFwnXHhkOVx4OGFceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzVCLCBcJ01cJywgXCdceGQ4XHhiMFx4ZDlceGIwXCcpLFxuICAgICgweEZDNUMsIFwnTVwnLCBcJ1x4ZDhceGIxXHhkOVx4YjBcJyksXG4gICAgKDB4RkM1RCwgXCdNXCcsIFwnXHhkOVx4ODlceGQ5XHhiMFwnKSxcbiAgICAoMHhGQzVFLCBcJzNcJywgXCcgXHhkOVx4OGNceGQ5XHg5MVwnKSxcbiAgICAoMHhGQzVGLCBcJzNcJywgXCcgXHhkOVx4OGRceGQ5XHg5MVwnKSxcbiAgICAoMHhGQzYwLCBcJzNcJywgXCcgXHhkOVx4OGVceGQ5XHg5MVwnKSxcbiAgICAoMHhGQzYxLCBcJzNcJywgXCcgXHhkOVx4OGZceGQ5XHg5MVwnKSxcbiAgICAoMHhGQzYyLCBcJzNcJywgXCcgXHhkOVx4OTBceGQ5XHg5MVwnKSxcbiAgICAoMHhGQzYzLCBcJzNcJywgXCcgXHhkOVx4OTFceGQ5XHhiMFwnKSxcbiAgICAoMHhGQzY0LCBcJ01cJywgXCdceGQ4XHhhNlx4ZDhceGIxXCcpLFxuICAgICgweEZDNjUsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOFx4YjJcJyksXG4gICAgKDB4RkM2NiwgXCdNXCcsIFwnXHhkOFx4YTZceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzY3LCBcJ01cJywgXCdceGQ4XHhhNlx4ZDlceDg2XCcpLFxuICAgICgweEZDNjgsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOVx4ODlcJyksXG4gICAgKDB4RkM2OSwgXCdNXCcsIFwnXHhkOFx4YTZceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzZBLCBcJ01cJywgXCdceGQ4XHhhOFx4ZDhceGIxXCcpLFxuICAgICgweEZDNkIsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOFx4YjJcJyksXG4gICAgKDB4RkM2QywgXCdNXCcsIFwnXHhkOFx4YThceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzZELCBcJ01cJywgXCdceGQ4XHhhOFx4ZDlceDg2XCcpLFxuICAgICgweEZDNkUsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOVx4ODlcJyksXG4gICAgKDB4RkM2RiwgXCdNXCcsIFwnXHhkOFx4YThceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzcwLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDhceGIxXCcpLFxuICAgICgweEZDNzEsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOFx4YjJcJyksXG4gICAgKDB4RkM3MiwgXCdNXCcsIFwnXHhkOFx4YWFceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzczLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDlceDg2XCcpLFxuICAgICgweEZDNzQsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOVx4ODlcJyksXG4gICAgKDB4RkM3NSwgXCdNXCcsIFwnXHhkOFx4YWFceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzc2LCBcJ01cJywgXCdceGQ4XHhhYlx4ZDhceGIxXCcpLFxuICAgICgweEZDNzcsIFwnTVwnLCBcJ1x4ZDhceGFiXHhkOFx4YjJcJyksXG4gICAgKDB4RkM3OCwgXCdNXCcsIFwnXHhkOFx4YWJceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzc5LCBcJ01cJywgXCdceGQ4XHhhYlx4ZDlceDg2XCcpLFxuICAgICgweEZDN0EsIFwnTVwnLCBcJ1x4ZDhceGFiXHhkOVx4ODlcJyksXG4gICAgKDB4RkM3QiwgXCdNXCcsIFwnXHhkOFx4YWJceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzdDLCBcJ01cJywgXCdceGQ5XHg4MVx4ZDlceDg5XCcpLFxuICAgICgweEZDN0QsIFwnTVwnLCBcJ1x4ZDlceDgxXHhkOVx4OGFcJyksXG4gICAgKDB4RkM3RSwgXCdNXCcsIFwnXHhkOVx4ODJceGQ5XHg4OVwnKSxcbiAgICAoMHhGQzdGLCBcJ01cJywgXCdceGQ5XHg4Mlx4ZDlceDhhXCcpLFxuICAgICgweEZDODAsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOFx4YTdcJyksXG4gICAgKDB4RkM4MSwgXCdNXCcsIFwnXHhkOVx4ODNceGQ5XHg4NFwnKSxcbiAgICAoMHhGQzgyLCBcJ01cJywgXCdceGQ5XHg4M1x4ZDlceDg1XCcpLFxuICAgICgweEZDODMsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOVx4ODlcJyksXG4gICAgKDB4RkM4NCwgXCdNXCcsIFwnXHhkOVx4ODNceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzg1LCBcJ01cJywgXCdceGQ5XHg4NFx4ZDlceDg1XCcpLFxuICAgICgweEZDODYsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOVx4ODlcJyksXG4gICAgKDB4RkM4NywgXCdNXCcsIFwnXHhkOVx4ODRceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzg4LCBcJ01cJywgXCdceGQ5XHg4NVx4ZDhceGE3XCcpLFxuICAgICgweEZDODksIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOVx4ODVcJyksXG4gICAgKDB4RkM4QSwgXCdNXCcsIFwnXHhkOVx4ODZceGQ4XHhiMVwnKSxcbiAgICAoMHhGQzhCLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDhceGIyXCcpLFxuICAgICgweEZDOEMsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOVx4ODVcJyksXG4gICAgKDB4RkM4RCwgXCdNXCcsIFwnXHhkOVx4ODZceGQ5XHg4NlwnKSxcbiAgICAoMHhGQzhFLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDlceDg5XCcpLFxuICAgICgweEZDOEYsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOVx4OGFcJyksXG4gICAgKDB4RkM5MCwgXCdNXCcsIFwnXHhkOVx4ODlceGQ5XHhiMFwnKSxcbiAgICAoMHhGQzkxLCBcJ01cJywgXCdceGQ5XHg4YVx4ZDhceGIxXCcpLFxuICAgICgweEZDOTIsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOFx4YjJcJyksXG4gICAgKDB4RkM5MywgXCdNXCcsIFwnXHhkOVx4OGFceGQ5XHg4NVwnKSxcbiAgICAoMHhGQzk0LCBcJ01cJywgXCdceGQ5XHg4YVx4ZDlceDg2XCcpLFxuICAgICgweEZDOTUsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOVx4ODlcJyksXG4gICAgKDB4RkM5NiwgXCdNXCcsIFwnXHhkOVx4OGFceGQ5XHg4YVwnKSxcbiAgICAoMHhGQzk3LCBcJ01cJywgXCdceGQ4XHhhNlx4ZDhceGFjXCcpLFxuICAgICgweEZDOTgsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOFx4YWRcJyksXG4gICAgKDB4RkM5OSwgXCdNXCcsIFwnXHhkOFx4YTZceGQ4XHhhZVwnKSxcbiAgICAoMHhGQzlBLCBcJ01cJywgXCdceGQ4XHhhNlx4ZDlceDg1XCcpLFxuICAgICgweEZDOUIsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOVx4ODdcJyksXG4gICAgKDB4RkM5QywgXCdNXCcsIFwnXHhkOFx4YThceGQ4XHhhY1wnKSxcbiAgICAoMHhGQzlELCBcJ01cJywgXCdceGQ4XHhhOFx4ZDhceGFkXCcpLFxuICAgICgweEZDOUUsIFwnTVwnLCBcJ1x4ZDhceGE4XHhkOFx4YWVcJyksXG4gICAgKDB4RkM5RiwgXCdNXCcsIFwnXHhkOFx4YThceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0EwLCBcJ01cJywgXCdceGQ4XHhhOFx4ZDlceDg3XCcpLFxuICAgICgweEZDQTEsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOFx4YWNcJyksXG4gICAgKDB4RkNBMiwgXCdNXCcsIFwnXHhkOFx4YWFceGQ4XHhhZFwnKSxcbiAgICAoMHhGQ0EzLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDhceGFlXCcpLFxuICAgICgweEZDQTQsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOVx4ODVcJyksXG4gICAgKDB4RkNBNSwgXCdNXCcsIFwnXHhkOFx4YWFceGQ5XHg4N1wnKSxcbiAgICAoMHhGQ0E2LCBcJ01cJywgXCdceGQ4XHhhYlx4ZDlceDg1XCcpLFxuICAgICgweEZDQTcsIFwnTVwnLCBcJ1x4ZDhceGFjXHhkOFx4YWRcJyksXG4gICAgKDB4RkNBOCwgXCdNXCcsIFwnXHhkOFx4YWNceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0E5LCBcJ01cJywgXCdceGQ4XHhhZFx4ZDhceGFjXCcpLFxuICAgICgweEZDQUEsIFwnTVwnLCBcJ1x4ZDhceGFkXHhkOVx4ODVcJyksXG4gICAgKDB4RkNBQiwgXCdNXCcsIFwnXHhkOFx4YWVceGQ4XHhhY1wnKSxcbiAgICAoMHhGQ0FDLCBcJ01cJywgXCdceGQ4XHhhZVx4ZDlceDg1XCcpLFxuICAgICgweEZDQUQsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOFx4YWNcJyksXG4gICAgKDB4RkNBRSwgXCdNXCcsIFwnXHhkOFx4YjNceGQ4XHhhZFwnKSxcbiAgICAoMHhGQ0FGLCBcJ01cJywgXCdceGQ4XHhiM1x4ZDhceGFlXCcpLFxuICAgICgweEZDQjAsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOVx4ODVcJyksXG4gICAgKDB4RkNCMSwgXCdNXCcsIFwnXHhkOFx4YjVceGQ4XHhhZFwnKSxcbiAgICAoMHhGQ0IyLCBcJ01cJywgXCdceGQ4XHhiNVx4ZDhceGFlXCcpLFxuICAgICgweEZDQjMsIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOVx4ODVcJyksXG4gICAgKDB4RkNCNCwgXCdNXCcsIFwnXHhkOFx4YjZceGQ4XHhhY1wnKSxcbiAgICAoMHhGQ0I1LCBcJ01cJywgXCdceGQ4XHhiNlx4ZDhceGFkXCcpLFxuICAgICgweEZDQjYsIFwnTVwnLCBcJ1x4ZDhceGI2XHhkOFx4YWVcJyksXG4gICAgKDB4RkNCNywgXCdNXCcsIFwnXHhkOFx4YjZceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0I4LCBcJ01cJywgXCdceGQ4XHhiN1x4ZDhceGFkXCcpLFxuICAgICgweEZDQjksIFwnTVwnLCBcJ1x4ZDhceGI4XHhkOVx4ODVcJyksXG4gICAgKDB4RkNCQSwgXCdNXCcsIFwnXHhkOFx4YjlceGQ4XHhhY1wnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzQ3KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhGQ0JCLCBcJ01cJywgXCdceGQ4XHhiOVx4ZDlceDg1XCcpLFxuICAgICgweEZDQkMsIFwnTVwnLCBcJ1x4ZDhceGJhXHhkOFx4YWNcJyksXG4gICAgKDB4RkNCRCwgXCdNXCcsIFwnXHhkOFx4YmFceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0JFLCBcJ01cJywgXCdceGQ5XHg4MVx4ZDhceGFjXCcpLFxuICAgICgweEZDQkYsIFwnTVwnLCBcJ1x4ZDlceDgxXHhkOFx4YWRcJyksXG4gICAgKDB4RkNDMCwgXCdNXCcsIFwnXHhkOVx4ODFceGQ4XHhhZVwnKSxcbiAgICAoMHhGQ0MxLCBcJ01cJywgXCdceGQ5XHg4MVx4ZDlceDg1XCcpLFxuICAgICgweEZDQzIsIFwnTVwnLCBcJ1x4ZDlceDgyXHhkOFx4YWRcJyksXG4gICAgKDB4RkNDMywgXCdNXCcsIFwnXHhkOVx4ODJceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0M0LCBcJ01cJywgXCdceGQ5XHg4M1x4ZDhceGFjXCcpLFxuICAgICgweEZDQzUsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOFx4YWRcJyksXG4gICAgKDB4RkNDNiwgXCdNXCcsIFwnXHhkOVx4ODNceGQ4XHhhZVwnKSxcbiAgICAoMHhGQ0M3LCBcJ01cJywgXCdceGQ5XHg4M1x4ZDlceDg0XCcpLFxuICAgICgweEZDQzgsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOVx4ODVcJyksXG4gICAgKDB4RkNDOSwgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhY1wnKSxcbiAgICAoMHhGQ0NBLCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGFkXCcpLFxuICAgICgweEZDQ0IsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOFx4YWVcJyksXG4gICAgKDB4RkNDQywgXCdNXCcsIFwnXHhkOVx4ODRceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0NELCBcJ01cJywgXCdceGQ5XHg4NFx4ZDlceDg3XCcpLFxuICAgICgweEZDQ0UsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YWNcJyksXG4gICAgKDB4RkNDRiwgXCdNXCcsIFwnXHhkOVx4ODVceGQ4XHhhZFwnKSxcbiAgICAoMHhGQ0QwLCBcJ01cJywgXCdceGQ5XHg4NVx4ZDhceGFlXCcpLFxuICAgICgweEZDRDEsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOVx4ODVcJyksXG4gICAgKDB4RkNEMiwgXCdNXCcsIFwnXHhkOVx4ODZceGQ4XHhhY1wnKSxcbiAgICAoMHhGQ0QzLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDhceGFkXCcpLFxuICAgICgweEZDRDQsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOFx4YWVcJyksXG4gICAgKDB4RkNENSwgXCdNXCcsIFwnXHhkOVx4ODZceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0Q2LCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDlceDg3XCcpLFxuICAgICgweEZDRDcsIFwnTVwnLCBcJ1x4ZDlceDg3XHhkOFx4YWNcJyksXG4gICAgKDB4RkNEOCwgXCdNXCcsIFwnXHhkOVx4ODdceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0Q5LCBcJ01cJywgXCdceGQ5XHg4N1x4ZDlceGIwXCcpLFxuICAgICgweEZDREEsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOFx4YWNcJyksXG4gICAgKDB4RkNEQiwgXCdNXCcsIFwnXHhkOVx4OGFceGQ4XHhhZFwnKSxcbiAgICAoMHhGQ0RDLCBcJ01cJywgXCdceGQ5XHg4YVx4ZDhceGFlXCcpLFxuICAgICgweEZDREQsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOVx4ODVcJyksXG4gICAgKDB4RkNERSwgXCdNXCcsIFwnXHhkOVx4OGFceGQ5XHg4N1wnKSxcbiAgICAoMHhGQ0RGLCBcJ01cJywgXCdceGQ4XHhhNlx4ZDlceDg1XCcpLFxuICAgICgweEZDRTAsIFwnTVwnLCBcJ1x4ZDhceGE2XHhkOVx4ODdcJyksXG4gICAgKDB4RkNFMSwgXCdNXCcsIFwnXHhkOFx4YThceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0UyLCBcJ01cJywgXCdceGQ4XHhhOFx4ZDlceDg3XCcpLFxuICAgICgweEZDRTMsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOVx4ODVcJyksXG4gICAgKDB4RkNFNCwgXCdNXCcsIFwnXHhkOFx4YWFceGQ5XHg4N1wnKSxcbiAgICAoMHhGQ0U1LCBcJ01cJywgXCdceGQ4XHhhYlx4ZDlceDg1XCcpLFxuICAgICgweEZDRTYsIFwnTVwnLCBcJ1x4ZDhceGFiXHhkOVx4ODdcJyksXG4gICAgKDB4RkNFNywgXCdNXCcsIFwnXHhkOFx4YjNceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0U4LCBcJ01cJywgXCdceGQ4XHhiM1x4ZDlceDg3XCcpLFxuICAgICgweEZDRTksIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOVx4ODVcJyksXG4gICAgKDB4RkNFQSwgXCdNXCcsIFwnXHhkOFx4YjRceGQ5XHg4N1wnKSxcbiAgICAoMHhGQ0VCLCBcJ01cJywgXCdceGQ5XHg4M1x4ZDlceDg0XCcpLFxuICAgICgweEZDRUMsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOVx4ODVcJyksXG4gICAgKDB4RkNFRCwgXCdNXCcsIFwnXHhkOVx4ODRceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0VFLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDlceDg1XCcpLFxuICAgICgweEZDRUYsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOVx4ODdcJyksXG4gICAgKDB4RkNGMCwgXCdNXCcsIFwnXHhkOVx4OGFceGQ5XHg4NVwnKSxcbiAgICAoMHhGQ0YxLCBcJ01cJywgXCdceGQ5XHg4YVx4ZDlceDg3XCcpLFxuICAgICgweEZDRjIsIFwnTVwnLCBcJ1x4ZDlceDgwXHhkOVx4OGVceGQ5XHg5MVwnKSxcbiAgICAoMHhGQ0YzLCBcJ01cJywgXCdceGQ5XHg4MFx4ZDlceDhmXHhkOVx4OTFcJyksXG4gICAgKDB4RkNGNCwgXCdNXCcsIFwnXHhkOVx4ODBceGQ5XHg5MFx4ZDlceDkxXCcpLFxuICAgICgweEZDRjUsIFwnTVwnLCBcJ1x4ZDhceGI3XHhkOVx4ODlcJyksXG4gICAgKDB4RkNGNiwgXCdNXCcsIFwnXHhkOFx4YjdceGQ5XHg4YVwnKSxcbiAgICAoMHhGQ0Y3LCBcJ01cJywgXCdceGQ4XHhiOVx4ZDlceDg5XCcpLFxuICAgICgweEZDRjgsIFwnTVwnLCBcJ1x4ZDhceGI5XHhkOVx4OGFcJyksXG4gICAgKDB4RkNGOSwgXCdNXCcsIFwnXHhkOFx4YmFceGQ5XHg4OVwnKSxcbiAgICAoMHhGQ0ZBLCBcJ01cJywgXCdceGQ4XHhiYVx4ZDlceDhhXCcpLFxuICAgICgweEZDRkIsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOVx4ODlcJyksXG4gICAgKDB4RkNGQywgXCdNXCcsIFwnXHhkOFx4YjNceGQ5XHg4YVwnKSxcbiAgICAoMHhGQ0ZELCBcJ01cJywgXCdceGQ4XHhiNFx4ZDlceDg5XCcpLFxuICAgICgweEZDRkUsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOVx4OGFcJyksXG4gICAgKDB4RkNGRiwgXCdNXCcsIFwnXHhkOFx4YWRceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDAwLCBcJ01cJywgXCdceGQ4XHhhZFx4ZDlceDhhXCcpLFxuICAgICgweEZEMDEsIFwnTVwnLCBcJ1x4ZDhceGFjXHhkOVx4ODlcJyksXG4gICAgKDB4RkQwMiwgXCdNXCcsIFwnXHhkOFx4YWNceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDAzLCBcJ01cJywgXCdceGQ4XHhhZVx4ZDlceDg5XCcpLFxuICAgICgweEZEMDQsIFwnTVwnLCBcJ1x4ZDhceGFlXHhkOVx4OGFcJyksXG4gICAgKDB4RkQwNSwgXCdNXCcsIFwnXHhkOFx4YjVceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDA2LCBcJ01cJywgXCdceGQ4XHhiNVx4ZDlceDhhXCcpLFxuICAgICgweEZEMDcsIFwnTVwnLCBcJ1x4ZDhceGI2XHhkOVx4ODlcJyksXG4gICAgKDB4RkQwOCwgXCdNXCcsIFwnXHhkOFx4YjZceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDA5LCBcJ01cJywgXCdceGQ4XHhiNFx4ZDhceGFjXCcpLFxuICAgICgweEZEMEEsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOFx4YWRcJyksXG4gICAgKDB4RkQwQiwgXCdNXCcsIFwnXHhkOFx4YjRceGQ4XHhhZVwnKSxcbiAgICAoMHhGRDBDLCBcJ01cJywgXCdceGQ4XHhiNFx4ZDlceDg1XCcpLFxuICAgICgweEZEMEQsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOFx4YjFcJyksXG4gICAgKDB4RkQwRSwgXCdNXCcsIFwnXHhkOFx4YjNceGQ4XHhiMVwnKSxcbiAgICAoMHhGRDBGLCBcJ01cJywgXCdceGQ4XHhiNVx4ZDhceGIxXCcpLFxuICAgICgweEZEMTAsIFwnTVwnLCBcJ1x4ZDhceGI2XHhkOFx4YjFcJyksXG4gICAgKDB4RkQxMSwgXCdNXCcsIFwnXHhkOFx4YjdceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDEyLCBcJ01cJywgXCdceGQ4XHhiN1x4ZDlceDhhXCcpLFxuICAgICgweEZEMTMsIFwnTVwnLCBcJ1x4ZDhceGI5XHhkOVx4ODlcJyksXG4gICAgKDB4RkQxNCwgXCdNXCcsIFwnXHhkOFx4YjlceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDE1LCBcJ01cJywgXCdceGQ4XHhiYVx4ZDlceDg5XCcpLFxuICAgICgweEZEMTYsIFwnTVwnLCBcJ1x4ZDhceGJhXHhkOVx4OGFcJyksXG4gICAgKDB4RkQxNywgXCdNXCcsIFwnXHhkOFx4YjNceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDE4LCBcJ01cJywgXCdceGQ4XHhiM1x4ZDlceDhhXCcpLFxuICAgICgweEZEMTksIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOVx4ODlcJyksXG4gICAgKDB4RkQxQSwgXCdNXCcsIFwnXHhkOFx4YjRceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDFCLCBcJ01cJywgXCdceGQ4XHhhZFx4ZDlceDg5XCcpLFxuICAgICgweEZEMUMsIFwnTVwnLCBcJ1x4ZDhceGFkXHhkOVx4OGFcJyksXG4gICAgKDB4RkQxRCwgXCdNXCcsIFwnXHhkOFx4YWNceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDFFLCBcJ01cJywgXCdceGQ4XHhhY1x4ZDlceDhhXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNDgoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweEZEMUYsIFwnTVwnLCBcJ1x4ZDhceGFlXHhkOVx4ODlcJyksXG4gICAgKDB4RkQyMCwgXCdNXCcsIFwnXHhkOFx4YWVceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDIxLCBcJ01cJywgXCdceGQ4XHhiNVx4ZDlceDg5XCcpLFxuICAgICgweEZEMjIsIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOVx4OGFcJyksXG4gICAgKDB4RkQyMywgXCdNXCcsIFwnXHhkOFx4YjZceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDI0LCBcJ01cJywgXCdceGQ4XHhiNlx4ZDlceDhhXCcpLFxuICAgICgweEZEMjUsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOFx4YWNcJyksXG4gICAgKDB4RkQyNiwgXCdNXCcsIFwnXHhkOFx4YjRceGQ4XHhhZFwnKSxcbiAgICAoMHhGRDI3LCBcJ01cJywgXCdceGQ4XHhiNFx4ZDhceGFlXCcpLFxuICAgICgweEZEMjgsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOVx4ODVcJyksXG4gICAgKDB4RkQyOSwgXCdNXCcsIFwnXHhkOFx4YjRceGQ4XHhiMVwnKSxcbiAgICAoMHhGRDJBLCBcJ01cJywgXCdceGQ4XHhiM1x4ZDhceGIxXCcpLFxuICAgICgweEZEMkIsIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOFx4YjFcJyksXG4gICAgKDB4RkQyQywgXCdNXCcsIFwnXHhkOFx4YjZceGQ4XHhiMVwnKSxcbiAgICAoMHhGRDJELCBcJ01cJywgXCdceGQ4XHhiNFx4ZDhceGFjXCcpLFxuICAgICgweEZEMkUsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOFx4YWRcJyksXG4gICAgKDB4RkQyRiwgXCdNXCcsIFwnXHhkOFx4YjRceGQ4XHhhZVwnKSxcbiAgICAoMHhGRDMwLCBcJ01cJywgXCdceGQ4XHhiNFx4ZDlceDg1XCcpLFxuICAgICgweEZEMzEsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOVx4ODdcJyksXG4gICAgKDB4RkQzMiwgXCdNXCcsIFwnXHhkOFx4YjRceGQ5XHg4N1wnKSxcbiAgICAoMHhGRDMzLCBcJ01cJywgXCdceGQ4XHhiN1x4ZDlceDg1XCcpLFxuICAgICgweEZEMzQsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOFx4YWNcJyksXG4gICAgKDB4RkQzNSwgXCdNXCcsIFwnXHhkOFx4YjNceGQ4XHhhZFwnKSxcbiAgICAoMHhGRDM2LCBcJ01cJywgXCdceGQ4XHhiM1x4ZDhceGFlXCcpLFxuICAgICgweEZEMzcsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOFx4YWNcJyksXG4gICAgKDB4RkQzOCwgXCdNXCcsIFwnXHhkOFx4YjRceGQ4XHhhZFwnKSxcbiAgICAoMHhGRDM5LCBcJ01cJywgXCdceGQ4XHhiNFx4ZDhceGFlXCcpLFxuICAgICgweEZEM0EsIFwnTVwnLCBcJ1x4ZDhceGI3XHhkOVx4ODVcJyksXG4gICAgKDB4RkQzQiwgXCdNXCcsIFwnXHhkOFx4YjhceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDNDLCBcJ01cJywgXCdceGQ4XHhhN1x4ZDlceDhiXCcpLFxuICAgICgweEZEM0UsIFwnVlwnKSxcbiAgICAoMHhGRDUwLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDhceGFjXHhkOVx4ODVcJyksXG4gICAgKDB4RkQ1MSwgXCdNXCcsIFwnXHhkOFx4YWFceGQ4XHhhZFx4ZDhceGFjXCcpLFxuICAgICgweEZENTMsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOFx4YWRceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDU0LCBcJ01cJywgXCdceGQ4XHhhYVx4ZDhceGFlXHhkOVx4ODVcJyksXG4gICAgKDB4RkQ1NSwgXCdNXCcsIFwnXHhkOFx4YWFceGQ5XHg4NVx4ZDhceGFjXCcpLFxuICAgICgweEZENTYsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOVx4ODVceGQ4XHhhZFwnKSxcbiAgICAoMHhGRDU3LCBcJ01cJywgXCdceGQ4XHhhYVx4ZDlceDg1XHhkOFx4YWVcJyksXG4gICAgKDB4RkQ1OCwgXCdNXCcsIFwnXHhkOFx4YWNceGQ5XHg4NVx4ZDhceGFkXCcpLFxuICAgICgweEZENUEsIFwnTVwnLCBcJ1x4ZDhceGFkXHhkOVx4ODVceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDVCLCBcJ01cJywgXCdceGQ4XHhhZFx4ZDlceDg1XHhkOVx4ODlcJyksXG4gICAgKDB4RkQ1QywgXCdNXCcsIFwnXHhkOFx4YjNceGQ4XHhhZFx4ZDhceGFjXCcpLFxuICAgICgweEZENUQsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOFx4YWNceGQ4XHhhZFwnKSxcbiAgICAoMHhGRDVFLCBcJ01cJywgXCdceGQ4XHhiM1x4ZDhceGFjXHhkOVx4ODlcJyksXG4gICAgKDB4RkQ1RiwgXCdNXCcsIFwnXHhkOFx4YjNceGQ5XHg4NVx4ZDhceGFkXCcpLFxuICAgICgweEZENjEsIFwnTVwnLCBcJ1x4ZDhceGIzXHhkOVx4ODVceGQ4XHhhY1wnKSxcbiAgICAoMHhGRDYyLCBcJ01cJywgXCdceGQ4XHhiM1x4ZDlceDg1XHhkOVx4ODVcJyksXG4gICAgKDB4RkQ2NCwgXCdNXCcsIFwnXHhkOFx4YjVceGQ4XHhhZFx4ZDhceGFkXCcpLFxuICAgICgweEZENjYsIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOVx4ODVceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDY3LCBcJ01cJywgXCdceGQ4XHhiNFx4ZDhceGFkXHhkOVx4ODVcJyksXG4gICAgKDB4RkQ2OSwgXCdNXCcsIFwnXHhkOFx4YjRceGQ4XHhhY1x4ZDlceDhhXCcpLFxuICAgICgweEZENkEsIFwnTVwnLCBcJ1x4ZDhceGI0XHhkOVx4ODVceGQ4XHhhZVwnKSxcbiAgICAoMHhGRDZDLCBcJ01cJywgXCdceGQ4XHhiNFx4ZDlceDg1XHhkOVx4ODVcJyksXG4gICAgKDB4RkQ2RSwgXCdNXCcsIFwnXHhkOFx4YjZceGQ4XHhhZFx4ZDlceDg5XCcpLFxuICAgICgweEZENkYsIFwnTVwnLCBcJ1x4ZDhceGI2XHhkOFx4YWVceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDcxLCBcJ01cJywgXCdceGQ4XHhiN1x4ZDlceDg1XHhkOFx4YWRcJyksXG4gICAgKDB4RkQ3MywgXCdNXCcsIFwnXHhkOFx4YjdceGQ5XHg4NVx4ZDlceDg1XCcpLFxuICAgICgweEZENzQsIFwnTVwnLCBcJ1x4ZDhceGI3XHhkOVx4ODVceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDc1LCBcJ01cJywgXCdceGQ4XHhiOVx4ZDhceGFjXHhkOVx4ODVcJyksXG4gICAgKDB4RkQ3NiwgXCdNXCcsIFwnXHhkOFx4YjlceGQ5XHg4NVx4ZDlceDg1XCcpLFxuICAgICgweEZENzgsIFwnTVwnLCBcJ1x4ZDhceGI5XHhkOVx4ODVceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDc5LCBcJ01cJywgXCdceGQ4XHhiYVx4ZDlceDg1XHhkOVx4ODVcJyksXG4gICAgKDB4RkQ3QSwgXCdNXCcsIFwnXHhkOFx4YmFceGQ5XHg4NVx4ZDlceDhhXCcpLFxuICAgICgweEZEN0IsIFwnTVwnLCBcJ1x4ZDhceGJhXHhkOVx4ODVceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDdDLCBcJ01cJywgXCdceGQ5XHg4MVx4ZDhceGFlXHhkOVx4ODVcJyksXG4gICAgKDB4RkQ3RSwgXCdNXCcsIFwnXHhkOVx4ODJceGQ5XHg4NVx4ZDhceGFkXCcpLFxuICAgICgweEZEN0YsIFwnTVwnLCBcJ1x4ZDlceDgyXHhkOVx4ODVceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDgwLCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGFkXHhkOVx4ODVcJyksXG4gICAgKDB4RkQ4MSwgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhZFx4ZDlceDhhXCcpLFxuICAgICgweEZEODIsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOFx4YWRceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDgzLCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGFjXHhkOFx4YWNcJyksXG4gICAgKDB4RkQ4NSwgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhZVx4ZDlceDg1XCcpLFxuICAgICgweEZEODcsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOVx4ODVceGQ4XHhhZFwnKSxcbiAgICAoMHhGRDg5LCBcJ01cJywgXCdceGQ5XHg4NVx4ZDhceGFkXHhkOFx4YWNcJyksXG4gICAgKDB4RkQ4QSwgXCdNXCcsIFwnXHhkOVx4ODVceGQ4XHhhZFx4ZDlceDg1XCcpLFxuICAgICgweEZEOEIsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YWRceGQ5XHg4YVwnKSxcbiAgICAoMHhGRDhDLCBcJ01cJywgXCdceGQ5XHg4NVx4ZDhceGFjXHhkOFx4YWRcJyksXG4gICAgKDB4RkQ4RCwgXCdNXCcsIFwnXHhkOVx4ODVceGQ4XHhhY1x4ZDlceDg1XCcpLFxuICAgICgweEZEOEUsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YWVceGQ4XHhhY1wnKSxcbiAgICAoMHhGRDhGLCBcJ01cJywgXCdceGQ5XHg4NVx4ZDhceGFlXHhkOVx4ODVcJyksXG4gICAgKDB4RkQ5MCwgXCdYXCcpLFxuICAgICgweEZEOTIsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YWNceGQ4XHhhZVwnKSxcbiAgICAoMHhGRDkzLCBcJ01cJywgXCdceGQ5XHg4N1x4ZDlceDg1XHhkOFx4YWNcJyksXG4gICAgKDB4RkQ5NCwgXCdNXCcsIFwnXHhkOVx4ODdceGQ5XHg4NVx4ZDlceDg1XCcpLFxuICAgICgweEZEOTUsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOFx4YWRceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDk2LCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDhceGFkXHhkOVx4ODlcJyksXG4gICAgKDB4RkQ5NywgXCdNXCcsIFwnXHhkOVx4ODZceGQ4XHhhY1x4ZDlceDg1XCcpLFxuICAgICgweEZEOTksIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOFx4YWNceGQ5XHg4OVwnKSxcbiAgICAoMHhGRDlBLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDlceDg1XHhkOVx4OGFcJyksXG4gICAgKDB4RkQ5QiwgXCdNXCcsIFwnXHhkOVx4ODZceGQ5XHg4NVx4ZDlceDg5XCcpLFxuICAgICgweEZEOUMsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOVx4ODVceGQ5XHg4NVwnKSxcbiAgICAoMHhGRDlFLCBcJ01cJywgXCdceGQ4XHhhOFx4ZDhceGFlXHhkOVx4OGFcJyksXG4gICAgKDB4RkQ5RiwgXCdNXCcsIFwnXHhkOFx4YWFceGQ4XHhhY1x4ZDlceDhhXCcpLFxuICAgICgweEZEQTAsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOFx4YWNceGQ5XHg4OVwnKSxcbiAgICAoMHhGREExLCBcJ01cJywgXCdceGQ4XHhhYVx4ZDhceGFlXHhkOVx4OGFcJyksXG4gICAgKDB4RkRBMiwgXCdNXCcsIFwnXHhkOFx4YWFceGQ4XHhhZVx4ZDlceDg5XCcpLFxuICAgICgweEZEQTMsIFwnTVwnLCBcJ1x4ZDhceGFhXHhkOVx4ODVceGQ5XHg4YVwnKSxcbiAgICAoMHhGREE0LCBcJ01cJywgXCdceGQ4XHhhYVx4ZDlceDg1XHhkOVx4ODlcJyksXG4gICAgKDB4RkRBNSwgXCdNXCcsIFwnXHhkOFx4YWNceGQ5XHg4NVx4ZDlceDhhXCcpLFxuICAgICgweEZEQTYsIFwnTVwnLCBcJ1x4ZDhceGFjXHhkOFx4YWRceGQ5XHg4OVwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzQ5KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhGREE3LCBcJ01cJywgXCdceGQ4XHhhY1x4ZDlceDg1XHhkOVx4ODlcJyksXG4gICAgKDB4RkRBOCwgXCdNXCcsIFwnXHhkOFx4YjNceGQ4XHhhZVx4ZDlceDg5XCcpLFxuICAgICgweEZEQTksIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOFx4YWRceGQ5XHg4YVwnKSxcbiAgICAoMHhGREFBLCBcJ01cJywgXCdceGQ4XHhiNFx4ZDhceGFkXHhkOVx4OGFcJyksXG4gICAgKDB4RkRBQiwgXCdNXCcsIFwnXHhkOFx4YjZceGQ4XHhhZFx4ZDlceDhhXCcpLFxuICAgICgweEZEQUMsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOFx4YWNceGQ5XHg4YVwnKSxcbiAgICAoMHhGREFELCBcJ01cJywgXCdceGQ5XHg4NFx4ZDlceDg1XHhkOVx4OGFcJyksXG4gICAgKDB4RkRBRSwgXCdNXCcsIFwnXHhkOVx4OGFceGQ4XHhhZFx4ZDlceDhhXCcpLFxuICAgICgweEZEQUYsIFwnTVwnLCBcJ1x4ZDlceDhhXHhkOFx4YWNceGQ5XHg4YVwnKSxcbiAgICAoMHhGREIwLCBcJ01cJywgXCdceGQ5XHg4YVx4ZDlceDg1XHhkOVx4OGFcJyksXG4gICAgKDB4RkRCMSwgXCdNXCcsIFwnXHhkOVx4ODVceGQ5XHg4NVx4ZDlceDhhXCcpLFxuICAgICgweEZEQjIsIFwnTVwnLCBcJ1x4ZDlceDgyXHhkOVx4ODVceGQ5XHg4YVwnKSxcbiAgICAoMHhGREIzLCBcJ01cJywgXCdceGQ5XHg4Nlx4ZDhceGFkXHhkOVx4OGFcJyksXG4gICAgKDB4RkRCNCwgXCdNXCcsIFwnXHhkOVx4ODJceGQ5XHg4NVx4ZDhceGFkXCcpLFxuICAgICgweEZEQjUsIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOFx4YWRceGQ5XHg4NVwnKSxcbiAgICAoMHhGREI2LCBcJ01cJywgXCdceGQ4XHhiOVx4ZDlceDg1XHhkOVx4OGFcJyksXG4gICAgKDB4RkRCNywgXCdNXCcsIFwnXHhkOVx4ODNceGQ5XHg4NVx4ZDlceDhhXCcpLFxuICAgICgweEZEQjgsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOFx4YWNceGQ4XHhhZFwnKSxcbiAgICAoMHhGREI5LCBcJ01cJywgXCdceGQ5XHg4NVx4ZDhceGFlXHhkOVx4OGFcJyksXG4gICAgKDB4RkRCQSwgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhY1x4ZDlceDg1XCcpLFxuICAgICgweEZEQkIsIFwnTVwnLCBcJ1x4ZDlceDgzXHhkOVx4ODVceGQ5XHg4NVwnKSxcbiAgICAoMHhGREJDLCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGFjXHhkOVx4ODVcJyksXG4gICAgKDB4RkRCRCwgXCdNXCcsIFwnXHhkOVx4ODZceGQ4XHhhY1x4ZDhceGFkXCcpLFxuICAgICgweEZEQkUsIFwnTVwnLCBcJ1x4ZDhceGFjXHhkOFx4YWRceGQ5XHg4YVwnKSxcbiAgICAoMHhGREJGLCBcJ01cJywgXCdceGQ4XHhhZFx4ZDhceGFjXHhkOVx4OGFcJyksXG4gICAgKDB4RkRDMCwgXCdNXCcsIFwnXHhkOVx4ODVceGQ4XHhhY1x4ZDlceDhhXCcpLFxuICAgICgweEZEQzEsIFwnTVwnLCBcJ1x4ZDlceDgxXHhkOVx4ODVceGQ5XHg4YVwnKSxcbiAgICAoMHhGREMyLCBcJ01cJywgXCdceGQ4XHhhOFx4ZDhceGFkXHhkOVx4OGFcJyksXG4gICAgKDB4RkRDMywgXCdNXCcsIFwnXHhkOVx4ODNceGQ5XHg4NVx4ZDlceDg1XCcpLFxuICAgICgweEZEQzQsIFwnTVwnLCBcJ1x4ZDhceGI5XHhkOFx4YWNceGQ5XHg4NVwnKSxcbiAgICAoMHhGREM1LCBcJ01cJywgXCdceGQ4XHhiNVx4ZDlceDg1XHhkOVx4ODVcJyksXG4gICAgKDB4RkRDNiwgXCdNXCcsIFwnXHhkOFx4YjNceGQ4XHhhZVx4ZDlceDhhXCcpLFxuICAgICgweEZEQzcsIFwnTVwnLCBcJ1x4ZDlceDg2XHhkOFx4YWNceGQ5XHg4YVwnKSxcbiAgICAoMHhGREM4LCBcJ1hcJyksXG4gICAgKDB4RkRDRiwgXCdWXCcpLFxuICAgICgweEZERDAsIFwnWFwnKSxcbiAgICAoMHhGREYwLCBcJ01cJywgXCdceGQ4XHhiNVx4ZDlceDg0XHhkYlx4OTJcJyksXG4gICAgKDB4RkRGMSwgXCdNXCcsIFwnXHhkOVx4ODJceGQ5XHg4NFx4ZGJceDkyXCcpLFxuICAgICgweEZERjIsIFwnTVwnLCBcJ1x4ZDhceGE3XHhkOVx4ODRceGQ5XHg4NFx4ZDlceDg3XCcpLFxuICAgICgweEZERjMsIFwnTVwnLCBcJ1x4ZDhceGE3XHhkOVx4ODNceGQ4XHhhOFx4ZDhceGIxXCcpLFxuICAgICgweEZERjQsIFwnTVwnLCBcJ1x4ZDlceDg1XHhkOFx4YWRceGQ5XHg4NVx4ZDhceGFmXCcpLFxuICAgICgweEZERjUsIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOVx4ODRceGQ4XHhiOVx4ZDlceDg1XCcpLFxuICAgICgweEZERjYsIFwnTVwnLCBcJ1x4ZDhceGIxXHhkOFx4YjNceGQ5XHg4OFx4ZDlceDg0XCcpLFxuICAgICgweEZERjcsIFwnTVwnLCBcJ1x4ZDhceGI5XHhkOVx4ODRceGQ5XHg4YVx4ZDlceDg3XCcpLFxuICAgICgweEZERjgsIFwnTVwnLCBcJ1x4ZDlceDg4XHhkOFx4YjNceGQ5XHg4NFx4ZDlceDg1XCcpLFxuICAgICgweEZERjksIFwnTVwnLCBcJ1x4ZDhceGI1XHhkOVx4ODRceGQ5XHg4OVwnKSxcbiAgICAoMHhGREZBLCBcJzNcJywgXCdceGQ4XHhiNVx4ZDlceDg0XHhkOVx4ODkgXHhkOFx4YTdceGQ5XHg4NFx4ZDlceDg0XHhkOVx4ODcgXHhkOFx4YjlceGQ5XHg4NFx4ZDlceDhhXHhkOVx4ODcgXHhkOVx4ODhceGQ4XHhiM1x4ZDlceDg0XHhkOVx4ODVcJyksXG4gICAgKDB4RkRGQiwgXCczXCcsIFwnXHhkOFx4YWNceGQ5XHg4NCBceGQ4XHhhY1x4ZDlceDg0XHhkOFx4YTdceGQ5XHg4NFx4ZDlceDg3XCcpLFxuICAgICgweEZERkMsIFwnTVwnLCBcJ1x4ZDhceGIxXHhkYlx4OGNceGQ4XHhhN1x4ZDlceDg0XCcpLFxuICAgICgweEZERkQsIFwnVlwnKSxcbiAgICAoMHhGRTAwLCBcJ0lcJyksXG4gICAgKDB4RkUxMCwgXCczXCcsIFwnLFwnKSxcbiAgICAoMHhGRTExLCBcJ01cJywgXCdceGUzXHg4MFx4ODFcJyksXG4gICAgKDB4RkUxMiwgXCdYXCcpLFxuICAgICgweEZFMTMsIFwnM1wnLCBcJzpcJyksXG4gICAgKDB4RkUxNCwgXCczXCcsIFwnO1wnKSxcbiAgICAoMHhGRTE1LCBcJzNcJywgXCchXCcpLFxuICAgICgweEZFMTYsIFwnM1wnLCBcJz9cJyksXG4gICAgKDB4RkUxNywgXCdNXCcsIFwnXHhlM1x4ODBceDk2XCcpLFxuICAgICgweEZFMTgsIFwnTVwnLCBcJ1x4ZTNceDgwXHg5N1wnKSxcbiAgICAoMHhGRTE5LCBcJ1hcJyksXG4gICAgKDB4RkUyMCwgXCdWXCcpLFxuICAgICgweEZFMzAsIFwnWFwnKSxcbiAgICAoMHhGRTMxLCBcJ01cJywgXCdceGUyXHg4MFx4OTRcJyksXG4gICAgKDB4RkUzMiwgXCdNXCcsIFwnXHhlMlx4ODBceDkzXCcpLFxuICAgICgweEZFMzMsIFwnM1wnLCBcJ19cJyksXG4gICAgKDB4RkUzNSwgXCczXCcsIFwnKFwnKSxcbiAgICAoMHhGRTM2LCBcJzNcJywgXCcpXCcpLFxuICAgICgweEZFMzcsIFwnM1wnLCBcJ3tcJyksXG4gICAgKDB4RkUzOCwgXCczXCcsIFwnfVwnKSxcbiAgICAoMHhGRTM5LCBcJ01cJywgXCdceGUzXHg4MFx4OTRcJyksXG4gICAgKDB4RkUzQSwgXCdNXCcsIFwnXHhlM1x4ODBceDk1XCcpLFxuICAgICgweEZFM0IsIFwnTVwnLCBcJ1x4ZTNceDgwXHg5MFwnKSxcbiAgICAoMHhGRTNDLCBcJ01cJywgXCdceGUzXHg4MFx4OTFcJyksXG4gICAgKDB4RkUzRCwgXCdNXCcsIFwnXHhlM1x4ODBceDhhXCcpLFxuICAgICgweEZFM0UsIFwnTVwnLCBcJ1x4ZTNceDgwXHg4YlwnKSxcbiAgICAoMHhGRTNGLCBcJ01cJywgXCdceGUzXHg4MFx4ODhcJyksXG4gICAgKDB4RkU0MCwgXCdNXCcsIFwnXHhlM1x4ODBceDg5XCcpLFxuICAgICgweEZFNDEsIFwnTVwnLCBcJ1x4ZTNceDgwXHg4Y1wnKSxcbiAgICAoMHhGRTQyLCBcJ01cJywgXCdceGUzXHg4MFx4OGRcJyksXG4gICAgKDB4RkU0MywgXCdNXCcsIFwnXHhlM1x4ODBceDhlXCcpLFxuICAgICgweEZFNDQsIFwnTVwnLCBcJ1x4ZTNceDgwXHg4ZlwnKSxcbiAgICAoMHhGRTQ1LCBcJ1ZcJyksXG4gICAgKDB4RkU0NywgXCczXCcsIFwnW1wnKSxcbiAgICAoMHhGRTQ4LCBcJzNcJywgXCddXCcpLFxuICAgICgweEZFNDksIFwnM1wnLCBcJyBceGNjXHg4NVwnKSxcbiAgICAoMHhGRTRELCBcJzNcJywgXCdfXCcpLFxuICAgICgweEZFNTAsIFwnM1wnLCBcJyxcJyksXG4gICAgKDB4RkU1MSwgXCdNXCcsIFwnXHhlM1x4ODBceDgxXCcpLFxuICAgICgweEZFNTIsIFwnWFwnKSxcbiAgICAoMHhGRTU0LCBcJzNcJywgXCc7XCcpLFxuICAgICgweEZFNTUsIFwnM1wnLCBcJzpcJyksXG4gICAgKDB4RkU1NiwgXCczXCcsIFwnP1wnKSxcbiAgICAoMHhGRTU3LCBcJzNcJywgXCchXCcpLFxuICAgICgweEZFNTgsIFwnTVwnLCBcJ1x4ZTJceDgwXHg5NFwnKSxcbiAgICAoMHhGRTU5LCBcJzNcJywgXCcoXCcpLFxuICAgICgweEZFNUEsIFwnM1wnLCBcJylcJyksXG4gICAgKDB4RkU1QiwgXCczXCcsIFwne1wnKSxcbiAgICAoMHhGRTVDLCBcJzNcJywgXCd9XCcpLFxuICAgICgweEZFNUQsIFwnTVwnLCBcJ1x4ZTNceDgwXHg5NFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzUwKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHhGRTVFLCBcJ01cJywgXCdceGUzXHg4MFx4OTVcJyksXG4gICAgKDB4RkU1RiwgXCczXCcsIFwnI1wnKSxcbiAgICAoMHhGRTYwLCBcJzNcJywgXCcmXCcpLFxuICAgICgweEZFNjEsIFwnM1wnLCBcJypcJyksXG4gICAgKDB4RkU2MiwgXCczXCcsIFwnK1wnKSxcbiAgICAoMHhGRTYzLCBcJ01cJywgXCctXCcpLFxuICAgICgweEZFNjQsIFwnM1wnLCBcJzxcJyksXG4gICAgKDB4RkU2NSwgXCczXCcsIFwnPlwnKSxcbiAgICAoMHhGRTY2LCBcJzNcJywgXCc9XCcpLFxuICAgICgweEZFNjcsIFwnWFwnKSxcbiAgICAoMHhGRTY4LCBcJzNcJywgXCdcXFxcXCcpLFxuICAgICgweEZFNjksIFwnM1wnLCBcJyRcJyksXG4gICAgKDB4RkU2QSwgXCczXCcsIFwnJVwnKSxcbiAgICAoMHhGRTZCLCBcJzNcJywgXCdAXCcpLFxuICAgICgweEZFNkMsIFwnWFwnKSxcbiAgICAoMHhGRTcwLCBcJzNcJywgXCcgXHhkOVx4OGJcJyksXG4gICAgKDB4RkU3MSwgXCdNXCcsIFwnXHhkOVx4ODBceGQ5XHg4YlwnKSxcbiAgICAoMHhGRTcyLCBcJzNcJywgXCcgXHhkOVx4OGNcJyksXG4gICAgKDB4RkU3MywgXCdWXCcpLFxuICAgICgweEZFNzQsIFwnM1wnLCBcJyBceGQ5XHg4ZFwnKSxcbiAgICAoMHhGRTc1LCBcJ1hcJyksXG4gICAgKDB4RkU3NiwgXCczXCcsIFwnIFx4ZDlceDhlXCcpLFxuICAgICgweEZFNzcsIFwnTVwnLCBcJ1x4ZDlceDgwXHhkOVx4OGVcJyksXG4gICAgKDB4RkU3OCwgXCczXCcsIFwnIFx4ZDlceDhmXCcpLFxuICAgICgweEZFNzksIFwnTVwnLCBcJ1x4ZDlceDgwXHhkOVx4OGZcJyksXG4gICAgKDB4RkU3QSwgXCczXCcsIFwnIFx4ZDlceDkwXCcpLFxuICAgICgweEZFN0IsIFwnTVwnLCBcJ1x4ZDlceDgwXHhkOVx4OTBcJyksXG4gICAgKDB4RkU3QywgXCczXCcsIFwnIFx4ZDlceDkxXCcpLFxuICAgICgweEZFN0QsIFwnTVwnLCBcJ1x4ZDlceDgwXHhkOVx4OTFcJyksXG4gICAgKDB4RkU3RSwgXCczXCcsIFwnIFx4ZDlceDkyXCcpLFxuICAgICgweEZFN0YsIFwnTVwnLCBcJ1x4ZDlceDgwXHhkOVx4OTJcJyksXG4gICAgKDB4RkU4MCwgXCdNXCcsIFwnXHhkOFx4YTFcJyksXG4gICAgKDB4RkU4MSwgXCdNXCcsIFwnXHhkOFx4YTJcJyksXG4gICAgKDB4RkU4MywgXCdNXCcsIFwnXHhkOFx4YTNcJyksXG4gICAgKDB4RkU4NSwgXCdNXCcsIFwnXHhkOFx4YTRcJyksXG4gICAgKDB4RkU4NywgXCdNXCcsIFwnXHhkOFx4YTVcJyksXG4gICAgKDB4RkU4OSwgXCdNXCcsIFwnXHhkOFx4YTZcJyksXG4gICAgKDB4RkU4RCwgXCdNXCcsIFwnXHhkOFx4YTdcJyksXG4gICAgKDB4RkU4RiwgXCdNXCcsIFwnXHhkOFx4YThcJyksXG4gICAgKDB4RkU5MywgXCdNXCcsIFwnXHhkOFx4YTlcJyksXG4gICAgKDB4RkU5NSwgXCdNXCcsIFwnXHhkOFx4YWFcJyksXG4gICAgKDB4RkU5OSwgXCdNXCcsIFwnXHhkOFx4YWJcJyksXG4gICAgKDB4RkU5RCwgXCdNXCcsIFwnXHhkOFx4YWNcJyksXG4gICAgKDB4RkVBMSwgXCdNXCcsIFwnXHhkOFx4YWRcJyksXG4gICAgKDB4RkVBNSwgXCdNXCcsIFwnXHhkOFx4YWVcJyksXG4gICAgKDB4RkVBOSwgXCdNXCcsIFwnXHhkOFx4YWZcJyksXG4gICAgKDB4RkVBQiwgXCdNXCcsIFwnXHhkOFx4YjBcJyksXG4gICAgKDB4RkVBRCwgXCdNXCcsIFwnXHhkOFx4YjFcJyksXG4gICAgKDB4RkVBRiwgXCdNXCcsIFwnXHhkOFx4YjJcJyksXG4gICAgKDB4RkVCMSwgXCdNXCcsIFwnXHhkOFx4YjNcJyksXG4gICAgKDB4RkVCNSwgXCdNXCcsIFwnXHhkOFx4YjRcJyksXG4gICAgKDB4RkVCOSwgXCdNXCcsIFwnXHhkOFx4YjVcJyksXG4gICAgKDB4RkVCRCwgXCdNXCcsIFwnXHhkOFx4YjZcJyksXG4gICAgKDB4RkVDMSwgXCdNXCcsIFwnXHhkOFx4YjdcJyksXG4gICAgKDB4RkVDNSwgXCdNXCcsIFwnXHhkOFx4YjhcJyksXG4gICAgKDB4RkVDOSwgXCdNXCcsIFwnXHhkOFx4YjlcJyksXG4gICAgKDB4RkVDRCwgXCdNXCcsIFwnXHhkOFx4YmFcJyksXG4gICAgKDB4RkVEMSwgXCdNXCcsIFwnXHhkOVx4ODFcJyksXG4gICAgKDB4RkVENSwgXCdNXCcsIFwnXHhkOVx4ODJcJyksXG4gICAgKDB4RkVEOSwgXCdNXCcsIFwnXHhkOVx4ODNcJyksXG4gICAgKDB4RkVERCwgXCdNXCcsIFwnXHhkOVx4ODRcJyksXG4gICAgKDB4RkVFMSwgXCdNXCcsIFwnXHhkOVx4ODVcJyksXG4gICAgKDB4RkVFNSwgXCdNXCcsIFwnXHhkOVx4ODZcJyksXG4gICAgKDB4RkVFOSwgXCdNXCcsIFwnXHhkOVx4ODdcJyksXG4gICAgKDB4RkVFRCwgXCdNXCcsIFwnXHhkOVx4ODhcJyksXG4gICAgKDB4RkVFRiwgXCdNXCcsIFwnXHhkOVx4ODlcJyksXG4gICAgKDB4RkVGMSwgXCdNXCcsIFwnXHhkOVx4OGFcJyksXG4gICAgKDB4RkVGNSwgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhMlwnKSxcbiAgICAoMHhGRUY3LCBcJ01cJywgXCdceGQ5XHg4NFx4ZDhceGEzXCcpLFxuICAgICgweEZFRjksIFwnTVwnLCBcJ1x4ZDlceDg0XHhkOFx4YTVcJyksXG4gICAgKDB4RkVGQiwgXCdNXCcsIFwnXHhkOVx4ODRceGQ4XHhhN1wnKSxcbiAgICAoMHhGRUZELCBcJ1hcJyksXG4gICAgKDB4RkVGRiwgXCdJXCcpLFxuICAgICgweEZGMDAsIFwnWFwnKSxcbiAgICAoMHhGRjAxLCBcJzNcJywgXCchXCcpLFxuICAgICgweEZGMDIsIFwnM1wnLCBcJyJcJyksXG4gICAgKDB4RkYwMywgXCczXCcsIFwnI1wnKSxcbiAgICAoMHhGRjA0LCBcJzNcJywgXCckXCcpLFxuICAgICgweEZGMDUsIFwnM1wnLCBcJyVcJyksXG4gICAgKDB4RkYwNiwgXCczXCcsIFwnJlwnKSxcbiAgICAoMHhGRjA3LCBcJzNcJywgXCdcXFwnXCcpLFxuICAgICgweEZGMDgsIFwnM1wnLCBcJyhcJyksXG4gICAgKDB4RkYwOSwgXCczXCcsIFwnKVwnKSxcbiAgICAoMHhGRjBBLCBcJzNcJywgXCcqXCcpLFxuICAgICgweEZGMEIsIFwnM1wnLCBcJytcJyksXG4gICAgKDB4RkYwQywgXCczXCcsIFwnLFwnKSxcbiAgICAoMHhGRjBELCBcJ01cJywgXCctXCcpLFxuICAgICgweEZGMEUsIFwnTVwnLCBcJy5cJyksXG4gICAgKDB4RkYwRiwgXCczXCcsIFwnL1wnKSxcbiAgICAoMHhGRjEwLCBcJ01cJywgXCcwXCcpLFxuICAgICgweEZGMTEsIFwnTVwnLCBcJzFcJyksXG4gICAgKDB4RkYxMiwgXCdNXCcsIFwnMlwnKSxcbiAgICAoMHhGRjEzLCBcJ01cJywgXCczXCcpLFxuICAgICgweEZGMTQsIFwnTVwnLCBcJzRcJyksXG4gICAgKDB4RkYxNSwgXCdNXCcsIFwnNVwnKSxcbiAgICAoMHhGRjE2LCBcJ01cJywgXCc2XCcpLFxuICAgICgweEZGMTcsIFwnTVwnLCBcJzdcJyksXG4gICAgKDB4RkYxOCwgXCdNXCcsIFwnOFwnKSxcbiAgICAoMHhGRjE5LCBcJ01cJywgXCc5XCcpLFxuICAgICgweEZGMUEsIFwnM1wnLCBcJzpcJyksXG4gICAgXVxuXG5kZWYgX3NlZ181MSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4RkYxQiwgXCczXCcsIFwnO1wnKSxcbiAgICAoMHhGRjFDLCBcJzNcJywgXCc8XCcpLFxuICAgICgweEZGMUQsIFwnM1wnLCBcJz1cJyksXG4gICAgKDB4RkYxRSwgXCczXCcsIFwnPlwnKSxcbiAgICAoMHhGRjFGLCBcJzNcJywgXCc/XCcpLFxuICAgICgweEZGMjAsIFwnM1wnLCBcJ0BcJyksXG4gICAgKDB4RkYyMSwgXCdNXCcsIFwnYVwnKSxcbiAgICAoMHhGRjIyLCBcJ01cJywgXCdiXCcpLFxuICAgICgweEZGMjMsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4RkYyNCwgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHhGRjI1LCBcJ01cJywgXCdlXCcpLFxuICAgICgweEZGMjYsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4RkYyNywgXCdNXCcsIFwnZ1wnKSxcbiAgICAoMHhGRjI4LCBcJ01cJywgXCdoXCcpLFxuICAgICgweEZGMjksIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4RkYyQSwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHhGRjJCLCBcJ01cJywgXCdrXCcpLFxuICAgICgweEZGMkMsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4RkYyRCwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHhGRjJFLCBcJ01cJywgXCduXCcpLFxuICAgICgweEZGMkYsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4RkYzMCwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHhGRjMxLCBcJ01cJywgXCdxXCcpLFxuICAgICgweEZGMzIsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4RkYzMywgXCdNXCcsIFwnc1wnKSxcbiAgICAoMHhGRjM0LCBcJ01cJywgXCd0XCcpLFxuICAgICgweEZGMzUsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4RkYzNiwgXCdNXCcsIFwndlwnKSxcbiAgICAoMHhGRjM3LCBcJ01cJywgXCd3XCcpLFxuICAgICgweEZGMzgsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4RkYzOSwgXCdNXCcsIFwneVwnKSxcbiAgICAoMHhGRjNBLCBcJ01cJywgXCd6XCcpLFxuICAgICgweEZGM0IsIFwnM1wnLCBcJ1tcJyksXG4gICAgKDB4RkYzQywgXCczXCcsIFwnXFxcXFwnKSxcbiAgICAoMHhGRjNELCBcJzNcJywgXCddXCcpLFxuICAgICgweEZGM0UsIFwnM1wnLCBcJ15cJyksXG4gICAgKDB4RkYzRiwgXCczXCcsIFwnX1wnKSxcbiAgICAoMHhGRjQwLCBcJzNcJywgXCdgXCcpLFxuICAgICgweEZGNDEsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4RkY0MiwgXCdNXCcsIFwnYlwnKSxcbiAgICAoMHhGRjQzLCBcJ01cJywgXCdjXCcpLFxuICAgICgweEZGNDQsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4RkY0NSwgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHhGRjQ2LCBcJ01cJywgXCdmXCcpLFxuICAgICgweEZGNDcsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4RkY0OCwgXCdNXCcsIFwnaFwnKSxcbiAgICAoMHhGRjQ5LCBcJ01cJywgXCdpXCcpLFxuICAgICgweEZGNEEsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4RkY0QiwgXCdNXCcsIFwna1wnKSxcbiAgICAoMHhGRjRDLCBcJ01cJywgXCdsXCcpLFxuICAgICgweEZGNEQsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4RkY0RSwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHhGRjRGLCBcJ01cJywgXCdvXCcpLFxuICAgICgweEZGNTAsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4RkY1MSwgXCdNXCcsIFwncVwnKSxcbiAgICAoMHhGRjUyLCBcJ01cJywgXCdyXCcpLFxuICAgICgweEZGNTMsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4RkY1NCwgXCdNXCcsIFwndFwnKSxcbiAgICAoMHhGRjU1LCBcJ01cJywgXCd1XCcpLFxuICAgICgweEZGNTYsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4RkY1NywgXCdNXCcsIFwnd1wnKSxcbiAgICAoMHhGRjU4LCBcJ01cJywgXCd4XCcpLFxuICAgICgweEZGNTksIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4RkY1QSwgXCdNXCcsIFwnelwnKSxcbiAgICAoMHhGRjVCLCBcJzNcJywgXCd7XCcpLFxuICAgICgweEZGNUMsIFwnM1wnLCBcJ3xcJyksXG4gICAgKDB4RkY1RCwgXCczXCcsIFwnfVwnKSxcbiAgICAoMHhGRjVFLCBcJzNcJywgXCd+XCcpLFxuICAgICgweEZGNUYsIFwnTVwnLCBcJ1x4ZTJceGE2XHg4NVwnKSxcbiAgICAoMHhGRjYwLCBcJ01cJywgXCdceGUyXHhhNlx4ODZcJyksXG4gICAgKDB4RkY2MSwgXCdNXCcsIFwnLlwnKSxcbiAgICAoMHhGRjYyLCBcJ01cJywgXCdceGUzXHg4MFx4OGNcJyksXG4gICAgKDB4RkY2MywgXCdNXCcsIFwnXHhlM1x4ODBceDhkXCcpLFxuICAgICgweEZGNjQsIFwnTVwnLCBcJ1x4ZTNceDgwXHg4MVwnKSxcbiAgICAoMHhGRjY1LCBcJ01cJywgXCdceGUzXHg4M1x4YmJcJyksXG4gICAgKDB4RkY2NiwgXCdNXCcsIFwnXHhlM1x4ODNceGIyXCcpLFxuICAgICgweEZGNjcsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhMVwnKSxcbiAgICAoMHhGRjY4LCBcJ01cJywgXCdceGUzXHg4Mlx4YTNcJyksXG4gICAgKDB4RkY2OSwgXCdNXCcsIFwnXHhlM1x4ODJceGE1XCcpLFxuICAgICgweEZGNkEsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhN1wnKSxcbiAgICAoMHhGRjZCLCBcJ01cJywgXCdceGUzXHg4Mlx4YTlcJyksXG4gICAgKDB4RkY2QywgXCdNXCcsIFwnXHhlM1x4ODNceGEzXCcpLFxuICAgICgweEZGNkQsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhNVwnKSxcbiAgICAoMHhGRjZFLCBcJ01cJywgXCdceGUzXHg4M1x4YTdcJyksXG4gICAgKDB4RkY2RiwgXCdNXCcsIFwnXHhlM1x4ODNceDgzXCcpLFxuICAgICgweEZGNzAsIFwnTVwnLCBcJ1x4ZTNceDgzXHhiY1wnKSxcbiAgICAoMHhGRjcxLCBcJ01cJywgXCdceGUzXHg4Mlx4YTJcJyksXG4gICAgKDB4RkY3MiwgXCdNXCcsIFwnXHhlM1x4ODJceGE0XCcpLFxuICAgICgweEZGNzMsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhNlwnKSxcbiAgICAoMHhGRjc0LCBcJ01cJywgXCdceGUzXHg4Mlx4YThcJyksXG4gICAgKDB4RkY3NSwgXCdNXCcsIFwnXHhlM1x4ODJceGFhXCcpLFxuICAgICgweEZGNzYsIFwnTVwnLCBcJ1x4ZTNceDgyXHhhYlwnKSxcbiAgICAoMHhGRjc3LCBcJ01cJywgXCdceGUzXHg4Mlx4YWRcJyksXG4gICAgKDB4RkY3OCwgXCdNXCcsIFwnXHhlM1x4ODJceGFmXCcpLFxuICAgICgweEZGNzksIFwnTVwnLCBcJ1x4ZTNceDgyXHhiMVwnKSxcbiAgICAoMHhGRjdBLCBcJ01cJywgXCdceGUzXHg4Mlx4YjNcJyksXG4gICAgKDB4RkY3QiwgXCdNXCcsIFwnXHhlM1x4ODJceGI1XCcpLFxuICAgICgweEZGN0MsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiN1wnKSxcbiAgICAoMHhGRjdELCBcJ01cJywgXCdceGUzXHg4Mlx4YjlcJyksXG4gICAgKDB4RkY3RSwgXCdNXCcsIFwnXHhlM1x4ODJceGJiXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNTIoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweEZGN0YsIFwnTVwnLCBcJ1x4ZTNceDgyXHhiZFwnKSxcbiAgICAoMHhGRjgwLCBcJ01cJywgXCdceGUzXHg4Mlx4YmZcJyksXG4gICAgKDB4RkY4MSwgXCdNXCcsIFwnXHhlM1x4ODNceDgxXCcpLFxuICAgICgweEZGODIsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4NFwnKSxcbiAgICAoMHhGRjgzLCBcJ01cJywgXCdceGUzXHg4M1x4ODZcJyksXG4gICAgKDB4RkY4NCwgXCdNXCcsIFwnXHhlM1x4ODNceDg4XCcpLFxuICAgICgweEZGODUsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4YVwnKSxcbiAgICAoMHhGRjg2LCBcJ01cJywgXCdceGUzXHg4M1x4OGJcJyksXG4gICAgKDB4RkY4NywgXCdNXCcsIFwnXHhlM1x4ODNceDhjXCcpLFxuICAgICgweEZGODgsIFwnTVwnLCBcJ1x4ZTNceDgzXHg4ZFwnKSxcbiAgICAoMHhGRjg5LCBcJ01cJywgXCdceGUzXHg4M1x4OGVcJyksXG4gICAgKDB4RkY4QSwgXCdNXCcsIFwnXHhlM1x4ODNceDhmXCcpLFxuICAgICgweEZGOEIsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5MlwnKSxcbiAgICAoMHhGRjhDLCBcJ01cJywgXCdceGUzXHg4M1x4OTVcJyksXG4gICAgKDB4RkY4RCwgXCdNXCcsIFwnXHhlM1x4ODNceDk4XCcpLFxuICAgICgweEZGOEUsIFwnTVwnLCBcJ1x4ZTNceDgzXHg5YlwnKSxcbiAgICAoMHhGRjhGLCBcJ01cJywgXCdceGUzXHg4M1x4OWVcJyksXG4gICAgKDB4RkY5MCwgXCdNXCcsIFwnXHhlM1x4ODNceDlmXCcpLFxuICAgICgweEZGOTEsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhMFwnKSxcbiAgICAoMHhGRjkyLCBcJ01cJywgXCdceGUzXHg4M1x4YTFcJyksXG4gICAgKDB4RkY5MywgXCdNXCcsIFwnXHhlM1x4ODNceGEyXCcpLFxuICAgICgweEZGOTQsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhNFwnKSxcbiAgICAoMHhGRjk1LCBcJ01cJywgXCdceGUzXHg4M1x4YTZcJyksXG4gICAgKDB4RkY5NiwgXCdNXCcsIFwnXHhlM1x4ODNceGE4XCcpLFxuICAgICgweEZGOTcsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhOVwnKSxcbiAgICAoMHhGRjk4LCBcJ01cJywgXCdceGUzXHg4M1x4YWFcJyksXG4gICAgKDB4RkY5OSwgXCdNXCcsIFwnXHhlM1x4ODNceGFiXCcpLFxuICAgICgweEZGOUEsIFwnTVwnLCBcJ1x4ZTNceDgzXHhhY1wnKSxcbiAgICAoMHhGRjlCLCBcJ01cJywgXCdceGUzXHg4M1x4YWRcJyksXG4gICAgKDB4RkY5QywgXCdNXCcsIFwnXHhlM1x4ODNceGFmXCcpLFxuICAgICgweEZGOUQsIFwnTVwnLCBcJ1x4ZTNceDgzXHhiM1wnKSxcbiAgICAoMHhGRjlFLCBcJ01cJywgXCdceGUzXHg4Mlx4OTlcJyksXG4gICAgKDB4RkY5RiwgXCdNXCcsIFwnXHhlM1x4ODJceDlhXCcpLFxuICAgICgweEZGQTAsIFwnWFwnKSxcbiAgICAoMHhGRkExLCBcJ01cJywgXCdceGUxXHg4NFx4ODBcJyksXG4gICAgKDB4RkZBMiwgXCdNXCcsIFwnXHhlMVx4ODRceDgxXCcpLFxuICAgICgweEZGQTMsIFwnTVwnLCBcJ1x4ZTFceDg2XHhhYVwnKSxcbiAgICAoMHhGRkE0LCBcJ01cJywgXCdceGUxXHg4NFx4ODJcJyksXG4gICAgKDB4RkZBNSwgXCdNXCcsIFwnXHhlMVx4ODZceGFjXCcpLFxuICAgICgweEZGQTYsIFwnTVwnLCBcJ1x4ZTFceDg2XHhhZFwnKSxcbiAgICAoMHhGRkE3LCBcJ01cJywgXCdceGUxXHg4NFx4ODNcJyksXG4gICAgKDB4RkZBOCwgXCdNXCcsIFwnXHhlMVx4ODRceDg0XCcpLFxuICAgICgweEZGQTksIFwnTVwnLCBcJ1x4ZTFceDg0XHg4NVwnKSxcbiAgICAoMHhGRkFBLCBcJ01cJywgXCdceGUxXHg4Nlx4YjBcJyksXG4gICAgKDB4RkZBQiwgXCdNXCcsIFwnXHhlMVx4ODZceGIxXCcpLFxuICAgICgweEZGQUMsIFwnTVwnLCBcJ1x4ZTFceDg2XHhiMlwnKSxcbiAgICAoMHhGRkFELCBcJ01cJywgXCdceGUxXHg4Nlx4YjNcJyksXG4gICAgKDB4RkZBRSwgXCdNXCcsIFwnXHhlMVx4ODZceGI0XCcpLFxuICAgICgweEZGQUYsIFwnTVwnLCBcJ1x4ZTFceDg2XHhiNVwnKSxcbiAgICAoMHhGRkIwLCBcJ01cJywgXCdceGUxXHg4NFx4OWFcJyksXG4gICAgKDB4RkZCMSwgXCdNXCcsIFwnXHhlMVx4ODRceDg2XCcpLFxuICAgICgweEZGQjIsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4N1wnKSxcbiAgICAoMHhGRkIzLCBcJ01cJywgXCdceGUxXHg4NFx4ODhcJyksXG4gICAgKDB4RkZCNCwgXCdNXCcsIFwnXHhlMVx4ODRceGExXCcpLFxuICAgICgweEZGQjUsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4OVwnKSxcbiAgICAoMHhGRkI2LCBcJ01cJywgXCdceGUxXHg4NFx4OGFcJyksXG4gICAgKDB4RkZCNywgXCdNXCcsIFwnXHhlMVx4ODRceDhiXCcpLFxuICAgICgweEZGQjgsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4Y1wnKSxcbiAgICAoMHhGRkI5LCBcJ01cJywgXCdceGUxXHg4NFx4OGRcJyksXG4gICAgKDB4RkZCQSwgXCdNXCcsIFwnXHhlMVx4ODRceDhlXCcpLFxuICAgICgweEZGQkIsIFwnTVwnLCBcJ1x4ZTFceDg0XHg4ZlwnKSxcbiAgICAoMHhGRkJDLCBcJ01cJywgXCdceGUxXHg4NFx4OTBcJyksXG4gICAgKDB4RkZCRCwgXCdNXCcsIFwnXHhlMVx4ODRceDkxXCcpLFxuICAgICgweEZGQkUsIFwnTVwnLCBcJ1x4ZTFceDg0XHg5MlwnKSxcbiAgICAoMHhGRkJGLCBcJ1hcJyksXG4gICAgKDB4RkZDMiwgXCdNXCcsIFwnXHhlMVx4ODVceGExXCcpLFxuICAgICgweEZGQzMsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhMlwnKSxcbiAgICAoMHhGRkM0LCBcJ01cJywgXCdceGUxXHg4NVx4YTNcJyksXG4gICAgKDB4RkZDNSwgXCdNXCcsIFwnXHhlMVx4ODVceGE0XCcpLFxuICAgICgweEZGQzYsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhNVwnKSxcbiAgICAoMHhGRkM3LCBcJ01cJywgXCdceGUxXHg4NVx4YTZcJyksXG4gICAgKDB4RkZDOCwgXCdYXCcpLFxuICAgICgweEZGQ0EsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhN1wnKSxcbiAgICAoMHhGRkNCLCBcJ01cJywgXCdceGUxXHg4NVx4YThcJyksXG4gICAgKDB4RkZDQywgXCdNXCcsIFwnXHhlMVx4ODVceGE5XCcpLFxuICAgICgweEZGQ0QsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhYVwnKSxcbiAgICAoMHhGRkNFLCBcJ01cJywgXCdceGUxXHg4NVx4YWJcJyksXG4gICAgKDB4RkZDRiwgXCdNXCcsIFwnXHhlMVx4ODVceGFjXCcpLFxuICAgICgweEZGRDAsIFwnWFwnKSxcbiAgICAoMHhGRkQyLCBcJ01cJywgXCdceGUxXHg4NVx4YWRcJyksXG4gICAgKDB4RkZEMywgXCdNXCcsIFwnXHhlMVx4ODVceGFlXCcpLFxuICAgICgweEZGRDQsIFwnTVwnLCBcJ1x4ZTFceDg1XHhhZlwnKSxcbiAgICAoMHhGRkQ1LCBcJ01cJywgXCdceGUxXHg4NVx4YjBcJyksXG4gICAgKDB4RkZENiwgXCdNXCcsIFwnXHhlMVx4ODVceGIxXCcpLFxuICAgICgweEZGRDcsIFwnTVwnLCBcJ1x4ZTFceDg1XHhiMlwnKSxcbiAgICAoMHhGRkQ4LCBcJ1hcJyksXG4gICAgKDB4RkZEQSwgXCdNXCcsIFwnXHhlMVx4ODVceGIzXCcpLFxuICAgICgweEZGREIsIFwnTVwnLCBcJ1x4ZTFceDg1XHhiNFwnKSxcbiAgICAoMHhGRkRDLCBcJ01cJywgXCdceGUxXHg4NVx4YjVcJyksXG4gICAgKDB4RkZERCwgXCdYXCcpLFxuICAgICgweEZGRTAsIFwnTVwnLCBcJ1x4YzJceGEyXCcpLFxuICAgICgweEZGRTEsIFwnTVwnLCBcJ1x4YzJceGEzXCcpLFxuICAgICgweEZGRTIsIFwnTVwnLCBcJ1x4YzJceGFjXCcpLFxuICAgICgweEZGRTMsIFwnM1wnLCBcJyBceGNjXHg4NFwnKSxcbiAgICAoMHhGRkU0LCBcJ01cJywgXCdceGMyXHhhNlwnKSxcbiAgICAoMHhGRkU1LCBcJ01cJywgXCdceGMyXHhhNVwnKSxcbiAgICAoMHhGRkU2LCBcJ01cJywgXCdceGUyXHg4Mlx4YTlcJyksXG4gICAgKDB4RkZFNywgXCdYXCcpLFxuICAgICgweEZGRTgsIFwnTVwnLCBcJ1x4ZTJceDk0XHg4MlwnKSxcbiAgICAoMHhGRkU5LCBcJ01cJywgXCdceGUyXHg4Nlx4OTBcJyksXG4gICAgXVxuXG5kZWYgX3NlZ181MygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4RkZFQSwgXCdNXCcsIFwnXHhlMlx4ODZceDkxXCcpLFxuICAgICgweEZGRUIsIFwnTVwnLCBcJ1x4ZTJceDg2XHg5MlwnKSxcbiAgICAoMHhGRkVDLCBcJ01cJywgXCdceGUyXHg4Nlx4OTNcJyksXG4gICAgKDB4RkZFRCwgXCdNXCcsIFwnXHhlMlx4OTZceGEwXCcpLFxuICAgICgweEZGRUUsIFwnTVwnLCBcJ1x4ZTJceDk3XHg4YlwnKSxcbiAgICAoMHhGRkVGLCBcJ1hcJyksXG4gICAgKDB4MTAwMDAsIFwnVlwnKSxcbiAgICAoMHgxMDAwQywgXCdYXCcpLFxuICAgICgweDEwMDBELCBcJ1ZcJyksXG4gICAgKDB4MTAwMjcsIFwnWFwnKSxcbiAgICAoMHgxMDAyOCwgXCdWXCcpLFxuICAgICgweDEwMDNCLCBcJ1hcJyksXG4gICAgKDB4MTAwM0MsIFwnVlwnKSxcbiAgICAoMHgxMDAzRSwgXCdYXCcpLFxuICAgICgweDEwMDNGLCBcJ1ZcJyksXG4gICAgKDB4MTAwNEUsIFwnWFwnKSxcbiAgICAoMHgxMDA1MCwgXCdWXCcpLFxuICAgICgweDEwMDVFLCBcJ1hcJyksXG4gICAgKDB4MTAwODAsIFwnVlwnKSxcbiAgICAoMHgxMDBGQiwgXCdYXCcpLFxuICAgICgweDEwMTAwLCBcJ1ZcJyksXG4gICAgKDB4MTAxMDMsIFwnWFwnKSxcbiAgICAoMHgxMDEwNywgXCdWXCcpLFxuICAgICgweDEwMTM0LCBcJ1hcJyksXG4gICAgKDB4MTAxMzcsIFwnVlwnKSxcbiAgICAoMHgxMDE4RiwgXCdYXCcpLFxuICAgICgweDEwMTkwLCBcJ1ZcJyksXG4gICAgKDB4MTAxOUQsIFwnWFwnKSxcbiAgICAoMHgxMDFBMCwgXCdWXCcpLFxuICAgICgweDEwMUExLCBcJ1hcJyksXG4gICAgKDB4MTAxRDAsIFwnVlwnKSxcbiAgICAoMHgxMDFGRSwgXCdYXCcpLFxuICAgICgweDEwMjgwLCBcJ1ZcJyksXG4gICAgKDB4MTAyOUQsIFwnWFwnKSxcbiAgICAoMHgxMDJBMCwgXCdWXCcpLFxuICAgICgweDEwMkQxLCBcJ1hcJyksXG4gICAgKDB4MTAyRTAsIFwnVlwnKSxcbiAgICAoMHgxMDJGQywgXCdYXCcpLFxuICAgICgweDEwMzAwLCBcJ1ZcJyksXG4gICAgKDB4MTAzMjQsIFwnWFwnKSxcbiAgICAoMHgxMDMyRCwgXCdWXCcpLFxuICAgICgweDEwMzRCLCBcJ1hcJyksXG4gICAgKDB4MTAzNTAsIFwnVlwnKSxcbiAgICAoMHgxMDM3QiwgXCdYXCcpLFxuICAgICgweDEwMzgwLCBcJ1ZcJyksXG4gICAgKDB4MTAzOUUsIFwnWFwnKSxcbiAgICAoMHgxMDM5RiwgXCdWXCcpLFxuICAgICgweDEwM0M0LCBcJ1hcJyksXG4gICAgKDB4MTAzQzgsIFwnVlwnKSxcbiAgICAoMHgxMDNENiwgXCdYXCcpLFxuICAgICgweDEwNDAwLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGE4XCcpLFxuICAgICgweDEwNDAxLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGE5XCcpLFxuICAgICgweDEwNDAyLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGFhXCcpLFxuICAgICgweDEwNDAzLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGFiXCcpLFxuICAgICgweDEwNDA0LCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGFjXCcpLFxuICAgICgweDEwNDA1LCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGFkXCcpLFxuICAgICgweDEwNDA2LCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGFlXCcpLFxuICAgICgweDEwNDA3LCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGFmXCcpLFxuICAgICgweDEwNDA4LCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGIwXCcpLFxuICAgICgweDEwNDA5LCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGIxXCcpLFxuICAgICgweDEwNDBBLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGIyXCcpLFxuICAgICgweDEwNDBCLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGIzXCcpLFxuICAgICgweDEwNDBDLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGI0XCcpLFxuICAgICgweDEwNDBELCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGI1XCcpLFxuICAgICgweDEwNDBFLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGI2XCcpLFxuICAgICgweDEwNDBGLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGI3XCcpLFxuICAgICgweDEwNDEwLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGI4XCcpLFxuICAgICgweDEwNDExLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGI5XCcpLFxuICAgICgweDEwNDEyLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGJhXCcpLFxuICAgICgweDEwNDEzLCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGJiXCcpLFxuICAgICgweDEwNDE0LCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGJjXCcpLFxuICAgICgweDEwNDE1LCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGJkXCcpLFxuICAgICgweDEwNDE2LCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGJlXCcpLFxuICAgICgweDEwNDE3LCBcJ01cJywgXCdceGYwXHg5MFx4OTBceGJmXCcpLFxuICAgICgweDEwNDE4LCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDgwXCcpLFxuICAgICgweDEwNDE5LCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDgxXCcpLFxuICAgICgweDEwNDFBLCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDgyXCcpLFxuICAgICgweDEwNDFCLCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDgzXCcpLFxuICAgICgweDEwNDFDLCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDg0XCcpLFxuICAgICgweDEwNDFELCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDg1XCcpLFxuICAgICgweDEwNDFFLCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDg2XCcpLFxuICAgICgweDEwNDFGLCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDg3XCcpLFxuICAgICgweDEwNDIwLCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDg4XCcpLFxuICAgICgweDEwNDIxLCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDg5XCcpLFxuICAgICgweDEwNDIyLCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDhhXCcpLFxuICAgICgweDEwNDIzLCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDhiXCcpLFxuICAgICgweDEwNDI0LCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDhjXCcpLFxuICAgICgweDEwNDI1LCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDhkXCcpLFxuICAgICgweDEwNDI2LCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDhlXCcpLFxuICAgICgweDEwNDI3LCBcJ01cJywgXCdceGYwXHg5MFx4OTFceDhmXCcpLFxuICAgICgweDEwNDI4LCBcJ1ZcJyksXG4gICAgKDB4MTA0OUUsIFwnWFwnKSxcbiAgICAoMHgxMDRBMCwgXCdWXCcpLFxuICAgICgweDEwNEFBLCBcJ1hcJyksXG4gICAgKDB4MTA0QjAsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4OThcJyksXG4gICAgKDB4MTA0QjEsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4OTlcJyksXG4gICAgKDB4MTA0QjIsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4OWFcJyksXG4gICAgKDB4MTA0QjMsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4OWJcJyksXG4gICAgKDB4MTA0QjQsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4OWNcJyksXG4gICAgKDB4MTA0QjUsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4OWRcJyksXG4gICAgXVxuXG5kZWYgX3NlZ181NCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MTA0QjYsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4OWVcJyksXG4gICAgKDB4MTA0QjcsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4OWZcJyksXG4gICAgKDB4MTA0QjgsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YTBcJyksXG4gICAgKDB4MTA0QjksIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YTFcJyksXG4gICAgKDB4MTA0QkEsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YTJcJyksXG4gICAgKDB4MTA0QkIsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YTNcJyksXG4gICAgKDB4MTA0QkMsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YTRcJyksXG4gICAgKDB4MTA0QkQsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YTVcJyksXG4gICAgKDB4MTA0QkUsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YTZcJyksXG4gICAgKDB4MTA0QkYsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YTdcJyksXG4gICAgKDB4MTA0QzAsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YThcJyksXG4gICAgKDB4MTA0QzEsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YTlcJyksXG4gICAgKDB4MTA0QzIsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YWFcJyksXG4gICAgKDB4MTA0QzMsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YWJcJyksXG4gICAgKDB4MTA0QzQsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YWNcJyksXG4gICAgKDB4MTA0QzUsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YWRcJyksXG4gICAgKDB4MTA0QzYsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YWVcJyksXG4gICAgKDB4MTA0QzcsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YWZcJyksXG4gICAgKDB4MTA0QzgsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YjBcJyksXG4gICAgKDB4MTA0QzksIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YjFcJyksXG4gICAgKDB4MTA0Q0EsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YjJcJyksXG4gICAgKDB4MTA0Q0IsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YjNcJyksXG4gICAgKDB4MTA0Q0MsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YjRcJyksXG4gICAgKDB4MTA0Q0QsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YjVcJyksXG4gICAgKDB4MTA0Q0UsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YjZcJyksXG4gICAgKDB4MTA0Q0YsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YjdcJyksXG4gICAgKDB4MTA0RDAsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YjhcJyksXG4gICAgKDB4MTA0RDEsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YjlcJyksXG4gICAgKDB4MTA0RDIsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YmFcJyksXG4gICAgKDB4MTA0RDMsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5M1x4YmJcJyksXG4gICAgKDB4MTA0RDQsIFwnWFwnKSxcbiAgICAoMHgxMDREOCwgXCdWXCcpLFxuICAgICgweDEwNEZDLCBcJ1hcJyksXG4gICAgKDB4MTA1MDAsIFwnVlwnKSxcbiAgICAoMHgxMDUyOCwgXCdYXCcpLFxuICAgICgweDEwNTMwLCBcJ1ZcJyksXG4gICAgKDB4MTA1NjQsIFwnWFwnKSxcbiAgICAoMHgxMDU2RiwgXCdWXCcpLFxuICAgICgweDEwNTcwLCBcJ01cJywgXCdceGYwXHg5MFx4OTZceDk3XCcpLFxuICAgICgweDEwNTcxLCBcJ01cJywgXCdceGYwXHg5MFx4OTZceDk4XCcpLFxuICAgICgweDEwNTcyLCBcJ01cJywgXCdceGYwXHg5MFx4OTZceDk5XCcpLFxuICAgICgweDEwNTczLCBcJ01cJywgXCdceGYwXHg5MFx4OTZceDlhXCcpLFxuICAgICgweDEwNTc0LCBcJ01cJywgXCdceGYwXHg5MFx4OTZceDliXCcpLFxuICAgICgweDEwNTc1LCBcJ01cJywgXCdceGYwXHg5MFx4OTZceDljXCcpLFxuICAgICgweDEwNTc2LCBcJ01cJywgXCdceGYwXHg5MFx4OTZceDlkXCcpLFxuICAgICgweDEwNTc3LCBcJ01cJywgXCdceGYwXHg5MFx4OTZceDllXCcpLFxuICAgICgweDEwNTc4LCBcJ01cJywgXCdceGYwXHg5MFx4OTZceDlmXCcpLFxuICAgICgweDEwNTc5LCBcJ01cJywgXCdceGYwXHg5MFx4OTZceGEwXCcpLFxuICAgICgweDEwNTdBLCBcJ01cJywgXCdceGYwXHg5MFx4OTZceGExXCcpLFxuICAgICgweDEwNTdCLCBcJ1hcJyksXG4gICAgKDB4MTA1N0MsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YTNcJyksXG4gICAgKDB4MTA1N0QsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YTRcJyksXG4gICAgKDB4MTA1N0UsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YTVcJyksXG4gICAgKDB4MTA1N0YsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YTZcJyksXG4gICAgKDB4MTA1ODAsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YTdcJyksXG4gICAgKDB4MTA1ODEsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YThcJyksXG4gICAgKDB4MTA1ODIsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YTlcJyksXG4gICAgKDB4MTA1ODMsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YWFcJyksXG4gICAgKDB4MTA1ODQsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YWJcJyksXG4gICAgKDB4MTA1ODUsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YWNcJyksXG4gICAgKDB4MTA1ODYsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YWRcJyksXG4gICAgKDB4MTA1ODcsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YWVcJyksXG4gICAgKDB4MTA1ODgsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YWZcJyksXG4gICAgKDB4MTA1ODksIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YjBcJyksXG4gICAgKDB4MTA1OEEsIFwnTVwnLCBcJ1x4ZjBceDkwXHg5Nlx4YjFcJyksXG4gICAgKDB4MTA1OEIsIFwnWFwnKSxcbiAgICAoMHgxMDU4QywgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhiM1wnKSxcbiAgICAoMHgxMDU4RCwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhiNFwnKSxcbiAgICAoMHgxMDU4RSwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhiNVwnKSxcbiAgICAoMHgxMDU4RiwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhiNlwnKSxcbiAgICAoMHgxMDU5MCwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhiN1wnKSxcbiAgICAoMHgxMDU5MSwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhiOFwnKSxcbiAgICAoMHgxMDU5MiwgXCdNXCcsIFwnXHhmMFx4OTBceDk2XHhiOVwnKSxcbiAgICAoMHgxMDU5MywgXCdYXCcpLFxuICAgICgweDEwNTk0LCBcJ01cJywgXCdceGYwXHg5MFx4OTZceGJiXCcpLFxuICAgICgweDEwNTk1LCBcJ01cJywgXCdceGYwXHg5MFx4OTZceGJjXCcpLFxuICAgICgweDEwNTk2LCBcJ1hcJyksXG4gICAgKDB4MTA1OTcsIFwnVlwnKSxcbiAgICAoMHgxMDVBMiwgXCdYXCcpLFxuICAgICgweDEwNUEzLCBcJ1ZcJyksXG4gICAgKDB4MTA1QjIsIFwnWFwnKSxcbiAgICAoMHgxMDVCMywgXCdWXCcpLFxuICAgICgweDEwNUJBLCBcJ1hcJyksXG4gICAgKDB4MTA1QkIsIFwnVlwnKSxcbiAgICAoMHgxMDVCRCwgXCdYXCcpLFxuICAgICgweDEwNjAwLCBcJ1ZcJyksXG4gICAgKDB4MTA3MzcsIFwnWFwnKSxcbiAgICAoMHgxMDc0MCwgXCdWXCcpLFxuICAgICgweDEwNzU2LCBcJ1hcJyksXG4gICAgKDB4MTA3NjAsIFwnVlwnKSxcbiAgICAoMHgxMDc2OCwgXCdYXCcpLFxuICAgICgweDEwNzgwLCBcJ1ZcJyksXG4gICAgKDB4MTA3ODEsIFwnTVwnLCBcJ1x4Y2JceDkwXCcpLFxuICAgICgweDEwNzgyLCBcJ01cJywgXCdceGNiXHg5MVwnKSxcbiAgICAoMHgxMDc4MywgXCdNXCcsIFwnXHhjM1x4YTZcJyksXG4gICAgKDB4MTA3ODQsIFwnTVwnLCBcJ1x4Y2FceDk5XCcpLFxuICAgICgweDEwNzg1LCBcJ01cJywgXCdceGM5XHg5M1wnKSxcbiAgICAoMHgxMDc4NiwgXCdYXCcpLFxuICAgICgweDEwNzg3LCBcJ01cJywgXCdceGNhXHhhM1wnKSxcbiAgICAoMHgxMDc4OCwgXCdNXCcsIFwnXHhlYVx4YWRceGE2XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNTUoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDEwNzg5LCBcJ01cJywgXCdceGNhXHhhNVwnKSxcbiAgICAoMHgxMDc4QSwgXCdNXCcsIFwnXHhjYVx4YTRcJyksXG4gICAgKDB4MTA3OEIsIFwnTVwnLCBcJ1x4YzlceDk2XCcpLFxuICAgICgweDEwNzhDLCBcJ01cJywgXCdceGM5XHg5N1wnKSxcbiAgICAoMHgxMDc4RCwgXCdNXCcsIFwnXHhlMVx4YjZceDkxXCcpLFxuICAgICgweDEwNzhFLCBcJ01cJywgXCdceGM5XHg5OFwnKSxcbiAgICAoMHgxMDc4RiwgXCdNXCcsIFwnXHhjOVx4OWVcJyksXG4gICAgKDB4MTA3OTAsIFwnTVwnLCBcJ1x4Y2FceGE5XCcpLFxuICAgICgweDEwNzkxLCBcJ01cJywgXCdceGM5XHhhNFwnKSxcbiAgICAoMHgxMDc5MiwgXCdNXCcsIFwnXHhjOVx4YTJcJyksXG4gICAgKDB4MTA3OTMsIFwnTVwnLCBcJ1x4YzlceGEwXCcpLFxuICAgICgweDEwNzk0LCBcJ01cJywgXCdceGNhXHg5YlwnKSxcbiAgICAoMHgxMDc5NSwgXCdNXCcsIFwnXHhjNFx4YTdcJyksXG4gICAgKDB4MTA3OTYsIFwnTVwnLCBcJ1x4Y2FceDljXCcpLFxuICAgICgweDEwNzk3LCBcJ01cJywgXCdceGM5XHhhN1wnKSxcbiAgICAoMHgxMDc5OCwgXCdNXCcsIFwnXHhjYVx4ODRcJyksXG4gICAgKDB4MTA3OTksIFwnTVwnLCBcJ1x4Y2FceGFhXCcpLFxuICAgICgweDEwNzlBLCBcJ01cJywgXCdceGNhXHhhYlwnKSxcbiAgICAoMHgxMDc5QiwgXCdNXCcsIFwnXHhjOVx4YWNcJyksXG4gICAgKDB4MTA3OUMsIFwnTVwnLCBcJ1x4ZjBceDlkXHhiY1x4ODRcJyksXG4gICAgKDB4MTA3OUQsIFwnTVwnLCBcJ1x4ZWFceDllXHg4ZVwnKSxcbiAgICAoMHgxMDc5RSwgXCdNXCcsIFwnXHhjOVx4YWVcJyksXG4gICAgKDB4MTA3OUYsIFwnTVwnLCBcJ1x4ZjBceDlkXHhiY1x4ODVcJyksXG4gICAgKDB4MTA3QTAsIFwnTVwnLCBcJ1x4Y2FceDhlXCcpLFxuICAgICgweDEwN0ExLCBcJ01cJywgXCdceGYwXHg5ZFx4YmNceDg2XCcpLFxuICAgICgweDEwN0EyLCBcJ01cJywgXCdceGMzXHhiOFwnKSxcbiAgICAoMHgxMDdBMywgXCdNXCcsIFwnXHhjOVx4YjZcJyksXG4gICAgKDB4MTA3QTQsIFwnTVwnLCBcJ1x4YzlceGI3XCcpLFxuICAgICgweDEwN0E1LCBcJ01cJywgXCdxXCcpLFxuICAgICgweDEwN0E2LCBcJ01cJywgXCdceGM5XHhiYVwnKSxcbiAgICAoMHgxMDdBNywgXCdNXCcsIFwnXHhmMFx4OWRceGJjXHg4OFwnKSxcbiAgICAoMHgxMDdBOCwgXCdNXCcsIFwnXHhjOVx4YmRcJyksXG4gICAgKDB4MTA3QTksIFwnTVwnLCBcJ1x4YzlceGJlXCcpLFxuICAgICgweDEwN0FBLCBcJ01cJywgXCdceGNhXHg4MFwnKSxcbiAgICAoMHgxMDdBQiwgXCdNXCcsIFwnXHhjYVx4YThcJyksXG4gICAgKDB4MTA3QUMsIFwnTVwnLCBcJ1x4Y2FceGE2XCcpLFxuICAgICgweDEwN0FELCBcJ01cJywgXCdceGVhXHhhZFx4YTdcJyksXG4gICAgKDB4MTA3QUUsIFwnTVwnLCBcJ1x4Y2FceGE3XCcpLFxuICAgICgweDEwN0FGLCBcJ01cJywgXCdceGNhXHg4OFwnKSxcbiAgICAoMHgxMDdCMCwgXCdNXCcsIFwnXHhlMlx4YjFceGIxXCcpLFxuICAgICgweDEwN0IxLCBcJ1hcJyksXG4gICAgKDB4MTA3QjIsIFwnTVwnLCBcJ1x4Y2FceDhmXCcpLFxuICAgICgweDEwN0IzLCBcJ01cJywgXCdceGNhXHhhMVwnKSxcbiAgICAoMHgxMDdCNCwgXCdNXCcsIFwnXHhjYVx4YTJcJyksXG4gICAgKDB4MTA3QjUsIFwnTVwnLCBcJ1x4Y2FceDk4XCcpLFxuICAgICgweDEwN0I2LCBcJ01cJywgXCdceGM3XHg4MFwnKSxcbiAgICAoMHgxMDdCNywgXCdNXCcsIFwnXHhjN1x4ODFcJyksXG4gICAgKDB4MTA3QjgsIFwnTVwnLCBcJ1x4YzdceDgyXCcpLFxuICAgICgweDEwN0I5LCBcJ01cJywgXCdceGYwXHg5ZFx4YmNceDhhXCcpLFxuICAgICgweDEwN0JBLCBcJ01cJywgXCdceGYwXHg5ZFx4YmNceDllXCcpLFxuICAgICgweDEwN0JCLCBcJ1hcJyksXG4gICAgKDB4MTA4MDAsIFwnVlwnKSxcbiAgICAoMHgxMDgwNiwgXCdYXCcpLFxuICAgICgweDEwODA4LCBcJ1ZcJyksXG4gICAgKDB4MTA4MDksIFwnWFwnKSxcbiAgICAoMHgxMDgwQSwgXCdWXCcpLFxuICAgICgweDEwODM2LCBcJ1hcJyksXG4gICAgKDB4MTA4MzcsIFwnVlwnKSxcbiAgICAoMHgxMDgzOSwgXCdYXCcpLFxuICAgICgweDEwODNDLCBcJ1ZcJyksXG4gICAgKDB4MTA4M0QsIFwnWFwnKSxcbiAgICAoMHgxMDgzRiwgXCdWXCcpLFxuICAgICgweDEwODU2LCBcJ1hcJyksXG4gICAgKDB4MTA4NTcsIFwnVlwnKSxcbiAgICAoMHgxMDg5RiwgXCdYXCcpLFxuICAgICgweDEwOEE3LCBcJ1ZcJyksXG4gICAgKDB4MTA4QjAsIFwnWFwnKSxcbiAgICAoMHgxMDhFMCwgXCdWXCcpLFxuICAgICgweDEwOEYzLCBcJ1hcJyksXG4gICAgKDB4MTA4RjQsIFwnVlwnKSxcbiAgICAoMHgxMDhGNiwgXCdYXCcpLFxuICAgICgweDEwOEZCLCBcJ1ZcJyksXG4gICAgKDB4MTA5MUMsIFwnWFwnKSxcbiAgICAoMHgxMDkxRiwgXCdWXCcpLFxuICAgICgweDEwOTNBLCBcJ1hcJyksXG4gICAgKDB4MTA5M0YsIFwnVlwnKSxcbiAgICAoMHgxMDk0MCwgXCdYXCcpLFxuICAgICgweDEwOTgwLCBcJ1ZcJyksXG4gICAgKDB4MTA5QjgsIFwnWFwnKSxcbiAgICAoMHgxMDlCQywgXCdWXCcpLFxuICAgICgweDEwOUQwLCBcJ1hcJyksXG4gICAgKDB4MTA5RDIsIFwnVlwnKSxcbiAgICAoMHgxMEEwNCwgXCdYXCcpLFxuICAgICgweDEwQTA1LCBcJ1ZcJyksXG4gICAgKDB4MTBBMDcsIFwnWFwnKSxcbiAgICAoMHgxMEEwQywgXCdWXCcpLFxuICAgICgweDEwQTE0LCBcJ1hcJyksXG4gICAgKDB4MTBBMTUsIFwnVlwnKSxcbiAgICAoMHgxMEExOCwgXCdYXCcpLFxuICAgICgweDEwQTE5LCBcJ1ZcJyksXG4gICAgKDB4MTBBMzYsIFwnWFwnKSxcbiAgICAoMHgxMEEzOCwgXCdWXCcpLFxuICAgICgweDEwQTNCLCBcJ1hcJyksXG4gICAgKDB4MTBBM0YsIFwnVlwnKSxcbiAgICAoMHgxMEE0OSwgXCdYXCcpLFxuICAgICgweDEwQTUwLCBcJ1ZcJyksXG4gICAgKDB4MTBBNTksIFwnWFwnKSxcbiAgICAoMHgxMEE2MCwgXCdWXCcpLFxuICAgICgweDEwQUEwLCBcJ1hcJyksXG4gICAgKDB4MTBBQzAsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzU2KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxMEFFNywgXCdYXCcpLFxuICAgICgweDEwQUVCLCBcJ1ZcJyksXG4gICAgKDB4MTBBRjcsIFwnWFwnKSxcbiAgICAoMHgxMEIwMCwgXCdWXCcpLFxuICAgICgweDEwQjM2LCBcJ1hcJyksXG4gICAgKDB4MTBCMzksIFwnVlwnKSxcbiAgICAoMHgxMEI1NiwgXCdYXCcpLFxuICAgICgweDEwQjU4LCBcJ1ZcJyksXG4gICAgKDB4MTBCNzMsIFwnWFwnKSxcbiAgICAoMHgxMEI3OCwgXCdWXCcpLFxuICAgICgweDEwQjkyLCBcJ1hcJyksXG4gICAgKDB4MTBCOTksIFwnVlwnKSxcbiAgICAoMHgxMEI5RCwgXCdYXCcpLFxuICAgICgweDEwQkE5LCBcJ1ZcJyksXG4gICAgKDB4MTBCQjAsIFwnWFwnKSxcbiAgICAoMHgxMEMwMCwgXCdWXCcpLFxuICAgICgweDEwQzQ5LCBcJ1hcJyksXG4gICAgKDB4MTBDODAsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4ODBcJyksXG4gICAgKDB4MTBDODEsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4ODFcJyksXG4gICAgKDB4MTBDODIsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4ODJcJyksXG4gICAgKDB4MTBDODMsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4ODNcJyksXG4gICAgKDB4MTBDODQsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4ODRcJyksXG4gICAgKDB4MTBDODUsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4ODVcJyksXG4gICAgKDB4MTBDODYsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4ODZcJyksXG4gICAgKDB4MTBDODcsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4ODdcJyksXG4gICAgKDB4MTBDODgsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4ODhcJyksXG4gICAgKDB4MTBDODksIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4ODlcJyksXG4gICAgKDB4MTBDOEEsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OGFcJyksXG4gICAgKDB4MTBDOEIsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OGJcJyksXG4gICAgKDB4MTBDOEMsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OGNcJyksXG4gICAgKDB4MTBDOEQsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OGRcJyksXG4gICAgKDB4MTBDOEUsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OGVcJyksXG4gICAgKDB4MTBDOEYsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OGZcJyksXG4gICAgKDB4MTBDOTAsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OTBcJyksXG4gICAgKDB4MTBDOTEsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OTFcJyksXG4gICAgKDB4MTBDOTIsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OTJcJyksXG4gICAgKDB4MTBDOTMsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OTNcJyksXG4gICAgKDB4MTBDOTQsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OTRcJyksXG4gICAgKDB4MTBDOTUsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OTVcJyksXG4gICAgKDB4MTBDOTYsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OTZcJyksXG4gICAgKDB4MTBDOTcsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OTdcJyksXG4gICAgKDB4MTBDOTgsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OThcJyksXG4gICAgKDB4MTBDOTksIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OTlcJyksXG4gICAgKDB4MTBDOUEsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OWFcJyksXG4gICAgKDB4MTBDOUIsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OWJcJyksXG4gICAgKDB4MTBDOUMsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OWNcJyksXG4gICAgKDB4MTBDOUQsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OWRcJyksXG4gICAgKDB4MTBDOUUsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OWVcJyksXG4gICAgKDB4MTBDOUYsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4OWZcJyksXG4gICAgKDB4MTBDQTAsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YTBcJyksXG4gICAgKDB4MTBDQTEsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YTFcJyksXG4gICAgKDB4MTBDQTIsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YTJcJyksXG4gICAgKDB4MTBDQTMsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YTNcJyksXG4gICAgKDB4MTBDQTQsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YTRcJyksXG4gICAgKDB4MTBDQTUsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YTVcJyksXG4gICAgKDB4MTBDQTYsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YTZcJyksXG4gICAgKDB4MTBDQTcsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YTdcJyksXG4gICAgKDB4MTBDQTgsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YThcJyksXG4gICAgKDB4MTBDQTksIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YTlcJyksXG4gICAgKDB4MTBDQUEsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YWFcJyksXG4gICAgKDB4MTBDQUIsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YWJcJyksXG4gICAgKDB4MTBDQUMsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YWNcJyksXG4gICAgKDB4MTBDQUQsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YWRcJyksXG4gICAgKDB4MTBDQUUsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YWVcJyksXG4gICAgKDB4MTBDQUYsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YWZcJyksXG4gICAgKDB4MTBDQjAsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YjBcJyksXG4gICAgKDB4MTBDQjEsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YjFcJyksXG4gICAgKDB4MTBDQjIsIFwnTVwnLCBcJ1x4ZjBceDkwXHhiM1x4YjJcJyksXG4gICAgKDB4MTBDQjMsIFwnWFwnKSxcbiAgICAoMHgxMENDMCwgXCdWXCcpLFxuICAgICgweDEwQ0YzLCBcJ1hcJyksXG4gICAgKDB4MTBDRkEsIFwnVlwnKSxcbiAgICAoMHgxMEQyOCwgXCdYXCcpLFxuICAgICgweDEwRDMwLCBcJ1ZcJyksXG4gICAgKDB4MTBEM0EsIFwnWFwnKSxcbiAgICAoMHgxMEU2MCwgXCdWXCcpLFxuICAgICgweDEwRTdGLCBcJ1hcJyksXG4gICAgKDB4MTBFODAsIFwnVlwnKSxcbiAgICAoMHgxMEVBQSwgXCdYXCcpLFxuICAgICgweDEwRUFCLCBcJ1ZcJyksXG4gICAgKDB4MTBFQUUsIFwnWFwnKSxcbiAgICAoMHgxMEVCMCwgXCdWXCcpLFxuICAgICgweDEwRUIyLCBcJ1hcJyksXG4gICAgKDB4MTBGMDAsIFwnVlwnKSxcbiAgICAoMHgxMEYyOCwgXCdYXCcpLFxuICAgICgweDEwRjMwLCBcJ1ZcJyksXG4gICAgKDB4MTBGNUEsIFwnWFwnKSxcbiAgICAoMHgxMEY3MCwgXCdWXCcpLFxuICAgICgweDEwRjhBLCBcJ1hcJyksXG4gICAgKDB4MTBGQjAsIFwnVlwnKSxcbiAgICAoMHgxMEZDQywgXCdYXCcpLFxuICAgICgweDEwRkUwLCBcJ1ZcJyksXG4gICAgKDB4MTBGRjcsIFwnWFwnKSxcbiAgICAoMHgxMTAwMCwgXCdWXCcpLFxuICAgICgweDExMDRFLCBcJ1hcJyksXG4gICAgKDB4MTEwNTIsIFwnVlwnKSxcbiAgICAoMHgxMTA3NiwgXCdYXCcpLFxuICAgICgweDExMDdGLCBcJ1ZcJyksXG4gICAgKDB4MTEwQkQsIFwnWFwnKSxcbiAgICAoMHgxMTBCRSwgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNTcoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDExMEMzLCBcJ1hcJyksXG4gICAgKDB4MTEwRDAsIFwnVlwnKSxcbiAgICAoMHgxMTBFOSwgXCdYXCcpLFxuICAgICgweDExMEYwLCBcJ1ZcJyksXG4gICAgKDB4MTEwRkEsIFwnWFwnKSxcbiAgICAoMHgxMTEwMCwgXCdWXCcpLFxuICAgICgweDExMTM1LCBcJ1hcJyksXG4gICAgKDB4MTExMzYsIFwnVlwnKSxcbiAgICAoMHgxMTE0OCwgXCdYXCcpLFxuICAgICgweDExMTUwLCBcJ1ZcJyksXG4gICAgKDB4MTExNzcsIFwnWFwnKSxcbiAgICAoMHgxMTE4MCwgXCdWXCcpLFxuICAgICgweDExMUUwLCBcJ1hcJyksXG4gICAgKDB4MTExRTEsIFwnVlwnKSxcbiAgICAoMHgxMTFGNSwgXCdYXCcpLFxuICAgICgweDExMjAwLCBcJ1ZcJyksXG4gICAgKDB4MTEyMTIsIFwnWFwnKSxcbiAgICAoMHgxMTIxMywgXCdWXCcpLFxuICAgICgweDExMjNGLCBcJ1hcJyksXG4gICAgKDB4MTEyODAsIFwnVlwnKSxcbiAgICAoMHgxMTI4NywgXCdYXCcpLFxuICAgICgweDExMjg4LCBcJ1ZcJyksXG4gICAgKDB4MTEyODksIFwnWFwnKSxcbiAgICAoMHgxMTI4QSwgXCdWXCcpLFxuICAgICgweDExMjhFLCBcJ1hcJyksXG4gICAgKDB4MTEyOEYsIFwnVlwnKSxcbiAgICAoMHgxMTI5RSwgXCdYXCcpLFxuICAgICgweDExMjlGLCBcJ1ZcJyksXG4gICAgKDB4MTEyQUEsIFwnWFwnKSxcbiAgICAoMHgxMTJCMCwgXCdWXCcpLFxuICAgICgweDExMkVCLCBcJ1hcJyksXG4gICAgKDB4MTEyRjAsIFwnVlwnKSxcbiAgICAoMHgxMTJGQSwgXCdYXCcpLFxuICAgICgweDExMzAwLCBcJ1ZcJyksXG4gICAgKDB4MTEzMDQsIFwnWFwnKSxcbiAgICAoMHgxMTMwNSwgXCdWXCcpLFxuICAgICgweDExMzBELCBcJ1hcJyksXG4gICAgKDB4MTEzMEYsIFwnVlwnKSxcbiAgICAoMHgxMTMxMSwgXCdYXCcpLFxuICAgICgweDExMzEzLCBcJ1ZcJyksXG4gICAgKDB4MTEzMjksIFwnWFwnKSxcbiAgICAoMHgxMTMyQSwgXCdWXCcpLFxuICAgICgweDExMzMxLCBcJ1hcJyksXG4gICAgKDB4MTEzMzIsIFwnVlwnKSxcbiAgICAoMHgxMTMzNCwgXCdYXCcpLFxuICAgICgweDExMzM1LCBcJ1ZcJyksXG4gICAgKDB4MTEzM0EsIFwnWFwnKSxcbiAgICAoMHgxMTMzQiwgXCdWXCcpLFxuICAgICgweDExMzQ1LCBcJ1hcJyksXG4gICAgKDB4MTEzNDcsIFwnVlwnKSxcbiAgICAoMHgxMTM0OSwgXCdYXCcpLFxuICAgICgweDExMzRCLCBcJ1ZcJyksXG4gICAgKDB4MTEzNEUsIFwnWFwnKSxcbiAgICAoMHgxMTM1MCwgXCdWXCcpLFxuICAgICgweDExMzUxLCBcJ1hcJyksXG4gICAgKDB4MTEzNTcsIFwnVlwnKSxcbiAgICAoMHgxMTM1OCwgXCdYXCcpLFxuICAgICgweDExMzVELCBcJ1ZcJyksXG4gICAgKDB4MTEzNjQsIFwnWFwnKSxcbiAgICAoMHgxMTM2NiwgXCdWXCcpLFxuICAgICgweDExMzZELCBcJ1hcJyksXG4gICAgKDB4MTEzNzAsIFwnVlwnKSxcbiAgICAoMHgxMTM3NSwgXCdYXCcpLFxuICAgICgweDExNDAwLCBcJ1ZcJyksXG4gICAgKDB4MTE0NUMsIFwnWFwnKSxcbiAgICAoMHgxMTQ1RCwgXCdWXCcpLFxuICAgICgweDExNDYyLCBcJ1hcJyksXG4gICAgKDB4MTE0ODAsIFwnVlwnKSxcbiAgICAoMHgxMTRDOCwgXCdYXCcpLFxuICAgICgweDExNEQwLCBcJ1ZcJyksXG4gICAgKDB4MTE0REEsIFwnWFwnKSxcbiAgICAoMHgxMTU4MCwgXCdWXCcpLFxuICAgICgweDExNUI2LCBcJ1hcJyksXG4gICAgKDB4MTE1QjgsIFwnVlwnKSxcbiAgICAoMHgxMTVERSwgXCdYXCcpLFxuICAgICgweDExNjAwLCBcJ1ZcJyksXG4gICAgKDB4MTE2NDUsIFwnWFwnKSxcbiAgICAoMHgxMTY1MCwgXCdWXCcpLFxuICAgICgweDExNjVBLCBcJ1hcJyksXG4gICAgKDB4MTE2NjAsIFwnVlwnKSxcbiAgICAoMHgxMTY2RCwgXCdYXCcpLFxuICAgICgweDExNjgwLCBcJ1ZcJyksXG4gICAgKDB4MTE2QkEsIFwnWFwnKSxcbiAgICAoMHgxMTZDMCwgXCdWXCcpLFxuICAgICgweDExNkNBLCBcJ1hcJyksXG4gICAgKDB4MTE3MDAsIFwnVlwnKSxcbiAgICAoMHgxMTcxQiwgXCdYXCcpLFxuICAgICgweDExNzFELCBcJ1ZcJyksXG4gICAgKDB4MTE3MkMsIFwnWFwnKSxcbiAgICAoMHgxMTczMCwgXCdWXCcpLFxuICAgICgweDExNzQ3LCBcJ1hcJyksXG4gICAgKDB4MTE4MDAsIFwnVlwnKSxcbiAgICAoMHgxMTgzQywgXCdYXCcpLFxuICAgICgweDExOEEwLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDgwXCcpLFxuICAgICgweDExOEExLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDgxXCcpLFxuICAgICgweDExOEEyLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDgyXCcpLFxuICAgICgweDExOEEzLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDgzXCcpLFxuICAgICgweDExOEE0LCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDg0XCcpLFxuICAgICgweDExOEE1LCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDg1XCcpLFxuICAgICgweDExOEE2LCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDg2XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNTgoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDExOEE3LCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDg3XCcpLFxuICAgICgweDExOEE4LCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDg4XCcpLFxuICAgICgweDExOEE5LCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDg5XCcpLFxuICAgICgweDExOEFBLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDhhXCcpLFxuICAgICgweDExOEFCLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDhiXCcpLFxuICAgICgweDExOEFDLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDhjXCcpLFxuICAgICgweDExOEFELCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDhkXCcpLFxuICAgICgweDExOEFFLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDhlXCcpLFxuICAgICgweDExOEFGLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDhmXCcpLFxuICAgICgweDExOEIwLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDkwXCcpLFxuICAgICgweDExOEIxLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDkxXCcpLFxuICAgICgweDExOEIyLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDkyXCcpLFxuICAgICgweDExOEIzLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDkzXCcpLFxuICAgICgweDExOEI0LCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDk0XCcpLFxuICAgICgweDExOEI1LCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDk1XCcpLFxuICAgICgweDExOEI2LCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDk2XCcpLFxuICAgICgweDExOEI3LCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDk3XCcpLFxuICAgICgweDExOEI4LCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDk4XCcpLFxuICAgICgweDExOEI5LCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDk5XCcpLFxuICAgICgweDExOEJBLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDlhXCcpLFxuICAgICgweDExOEJCLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDliXCcpLFxuICAgICgweDExOEJDLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDljXCcpLFxuICAgICgweDExOEJELCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDlkXCcpLFxuICAgICgweDExOEJFLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDllXCcpLFxuICAgICgweDExOEJGLCBcJ01cJywgXCdceGYwXHg5MVx4YTNceDlmXCcpLFxuICAgICgweDExOEMwLCBcJ1ZcJyksXG4gICAgKDB4MTE4RjMsIFwnWFwnKSxcbiAgICAoMHgxMThGRiwgXCdWXCcpLFxuICAgICgweDExOTA3LCBcJ1hcJyksXG4gICAgKDB4MTE5MDksIFwnVlwnKSxcbiAgICAoMHgxMTkwQSwgXCdYXCcpLFxuICAgICgweDExOTBDLCBcJ1ZcJyksXG4gICAgKDB4MTE5MTQsIFwnWFwnKSxcbiAgICAoMHgxMTkxNSwgXCdWXCcpLFxuICAgICgweDExOTE3LCBcJ1hcJyksXG4gICAgKDB4MTE5MTgsIFwnVlwnKSxcbiAgICAoMHgxMTkzNiwgXCdYXCcpLFxuICAgICgweDExOTM3LCBcJ1ZcJyksXG4gICAgKDB4MTE5MzksIFwnWFwnKSxcbiAgICAoMHgxMTkzQiwgXCdWXCcpLFxuICAgICgweDExOTQ3LCBcJ1hcJyksXG4gICAgKDB4MTE5NTAsIFwnVlwnKSxcbiAgICAoMHgxMTk1QSwgXCdYXCcpLFxuICAgICgweDExOUEwLCBcJ1ZcJyksXG4gICAgKDB4MTE5QTgsIFwnWFwnKSxcbiAgICAoMHgxMTlBQSwgXCdWXCcpLFxuICAgICgweDExOUQ4LCBcJ1hcJyksXG4gICAgKDB4MTE5REEsIFwnVlwnKSxcbiAgICAoMHgxMTlFNSwgXCdYXCcpLFxuICAgICgweDExQTAwLCBcJ1ZcJyksXG4gICAgKDB4MTFBNDgsIFwnWFwnKSxcbiAgICAoMHgxMUE1MCwgXCdWXCcpLFxuICAgICgweDExQUEzLCBcJ1hcJyksXG4gICAgKDB4MTFBQjAsIFwnVlwnKSxcbiAgICAoMHgxMUFGOSwgXCdYXCcpLFxuICAgICgweDExQzAwLCBcJ1ZcJyksXG4gICAgKDB4MTFDMDksIFwnWFwnKSxcbiAgICAoMHgxMUMwQSwgXCdWXCcpLFxuICAgICgweDExQzM3LCBcJ1hcJyksXG4gICAgKDB4MTFDMzgsIFwnVlwnKSxcbiAgICAoMHgxMUM0NiwgXCdYXCcpLFxuICAgICgweDExQzUwLCBcJ1ZcJyksXG4gICAgKDB4MTFDNkQsIFwnWFwnKSxcbiAgICAoMHgxMUM3MCwgXCdWXCcpLFxuICAgICgweDExQzkwLCBcJ1hcJyksXG4gICAgKDB4MTFDOTIsIFwnVlwnKSxcbiAgICAoMHgxMUNBOCwgXCdYXCcpLFxuICAgICgweDExQ0E5LCBcJ1ZcJyksXG4gICAgKDB4MTFDQjcsIFwnWFwnKSxcbiAgICAoMHgxMUQwMCwgXCdWXCcpLFxuICAgICgweDExRDA3LCBcJ1hcJyksXG4gICAgKDB4MTFEMDgsIFwnVlwnKSxcbiAgICAoMHgxMUQwQSwgXCdYXCcpLFxuICAgICgweDExRDBCLCBcJ1ZcJyksXG4gICAgKDB4MTFEMzcsIFwnWFwnKSxcbiAgICAoMHgxMUQzQSwgXCdWXCcpLFxuICAgICgweDExRDNCLCBcJ1hcJyksXG4gICAgKDB4MTFEM0MsIFwnVlwnKSxcbiAgICAoMHgxMUQzRSwgXCdYXCcpLFxuICAgICgweDExRDNGLCBcJ1ZcJyksXG4gICAgKDB4MTFENDgsIFwnWFwnKSxcbiAgICAoMHgxMUQ1MCwgXCdWXCcpLFxuICAgICgweDExRDVBLCBcJ1hcJyksXG4gICAgKDB4MTFENjAsIFwnVlwnKSxcbiAgICAoMHgxMUQ2NiwgXCdYXCcpLFxuICAgICgweDExRDY3LCBcJ1ZcJyksXG4gICAgKDB4MTFENjksIFwnWFwnKSxcbiAgICAoMHgxMUQ2QSwgXCdWXCcpLFxuICAgICgweDExRDhGLCBcJ1hcJyksXG4gICAgKDB4MTFEOTAsIFwnVlwnKSxcbiAgICAoMHgxMUQ5MiwgXCdYXCcpLFxuICAgICgweDExRDkzLCBcJ1ZcJyksXG4gICAgKDB4MTFEOTksIFwnWFwnKSxcbiAgICAoMHgxMURBMCwgXCdWXCcpLFxuICAgICgweDExREFBLCBcJ1hcJyksXG4gICAgKDB4MTFFRTAsIFwnVlwnKSxcbiAgICAoMHgxMUVGOSwgXCdYXCcpLFxuICAgICgweDExRkIwLCBcJ1ZcJyksXG4gICAgKDB4MTFGQjEsIFwnWFwnKSxcbiAgICAoMHgxMUZDMCwgXCdWXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNTkoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDExRkYyLCBcJ1hcJyksXG4gICAgKDB4MTFGRkYsIFwnVlwnKSxcbiAgICAoMHgxMjM5QSwgXCdYXCcpLFxuICAgICgweDEyNDAwLCBcJ1ZcJyksXG4gICAgKDB4MTI0NkYsIFwnWFwnKSxcbiAgICAoMHgxMjQ3MCwgXCdWXCcpLFxuICAgICgweDEyNDc1LCBcJ1hcJyksXG4gICAgKDB4MTI0ODAsIFwnVlwnKSxcbiAgICAoMHgxMjU0NCwgXCdYXCcpLFxuICAgICgweDEyRjkwLCBcJ1ZcJyksXG4gICAgKDB4MTJGRjMsIFwnWFwnKSxcbiAgICAoMHgxMzAwMCwgXCdWXCcpLFxuICAgICgweDEzNDJGLCBcJ1hcJyksXG4gICAgKDB4MTQ0MDAsIFwnVlwnKSxcbiAgICAoMHgxNDY0NywgXCdYXCcpLFxuICAgICgweDE2ODAwLCBcJ1ZcJyksXG4gICAgKDB4MTZBMzksIFwnWFwnKSxcbiAgICAoMHgxNkE0MCwgXCdWXCcpLFxuICAgICgweDE2QTVGLCBcJ1hcJyksXG4gICAgKDB4MTZBNjAsIFwnVlwnKSxcbiAgICAoMHgxNkE2QSwgXCdYXCcpLFxuICAgICgweDE2QTZFLCBcJ1ZcJyksXG4gICAgKDB4MTZBQkYsIFwnWFwnKSxcbiAgICAoMHgxNkFDMCwgXCdWXCcpLFxuICAgICgweDE2QUNBLCBcJ1hcJyksXG4gICAgKDB4MTZBRDAsIFwnVlwnKSxcbiAgICAoMHgxNkFFRSwgXCdYXCcpLFxuICAgICgweDE2QUYwLCBcJ1ZcJyksXG4gICAgKDB4MTZBRjYsIFwnWFwnKSxcbiAgICAoMHgxNkIwMCwgXCdWXCcpLFxuICAgICgweDE2QjQ2LCBcJ1hcJyksXG4gICAgKDB4MTZCNTAsIFwnVlwnKSxcbiAgICAoMHgxNkI1QSwgXCdYXCcpLFxuICAgICgweDE2QjVCLCBcJ1ZcJyksXG4gICAgKDB4MTZCNjIsIFwnWFwnKSxcbiAgICAoMHgxNkI2MywgXCdWXCcpLFxuICAgICgweDE2Qjc4LCBcJ1hcJyksXG4gICAgKDB4MTZCN0QsIFwnVlwnKSxcbiAgICAoMHgxNkI5MCwgXCdYXCcpLFxuICAgICgweDE2RTQwLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGEwXCcpLFxuICAgICgweDE2RTQxLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGExXCcpLFxuICAgICgweDE2RTQyLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGEyXCcpLFxuICAgICgweDE2RTQzLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGEzXCcpLFxuICAgICgweDE2RTQ0LCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGE0XCcpLFxuICAgICgweDE2RTQ1LCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGE1XCcpLFxuICAgICgweDE2RTQ2LCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGE2XCcpLFxuICAgICgweDE2RTQ3LCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGE3XCcpLFxuICAgICgweDE2RTQ4LCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGE4XCcpLFxuICAgICgweDE2RTQ5LCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGE5XCcpLFxuICAgICgweDE2RTRBLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGFhXCcpLFxuICAgICgweDE2RTRCLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGFiXCcpLFxuICAgICgweDE2RTRDLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGFjXCcpLFxuICAgICgweDE2RTRELCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGFkXCcpLFxuICAgICgweDE2RTRFLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGFlXCcpLFxuICAgICgweDE2RTRGLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGFmXCcpLFxuICAgICgweDE2RTUwLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGIwXCcpLFxuICAgICgweDE2RTUxLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGIxXCcpLFxuICAgICgweDE2RTUyLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGIyXCcpLFxuICAgICgweDE2RTUzLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGIzXCcpLFxuICAgICgweDE2RTU0LCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGI0XCcpLFxuICAgICgweDE2RTU1LCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGI1XCcpLFxuICAgICgweDE2RTU2LCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGI2XCcpLFxuICAgICgweDE2RTU3LCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGI3XCcpLFxuICAgICgweDE2RTU4LCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGI4XCcpLFxuICAgICgweDE2RTU5LCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGI5XCcpLFxuICAgICgweDE2RTVBLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGJhXCcpLFxuICAgICgweDE2RTVCLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGJiXCcpLFxuICAgICgweDE2RTVDLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGJjXCcpLFxuICAgICgweDE2RTVELCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGJkXCcpLFxuICAgICgweDE2RTVFLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGJlXCcpLFxuICAgICgweDE2RTVGLCBcJ01cJywgXCdceGYwXHg5Nlx4YjlceGJmXCcpLFxuICAgICgweDE2RTYwLCBcJ1ZcJyksXG4gICAgKDB4MTZFOUIsIFwnWFwnKSxcbiAgICAoMHgxNkYwMCwgXCdWXCcpLFxuICAgICgweDE2RjRCLCBcJ1hcJyksXG4gICAgKDB4MTZGNEYsIFwnVlwnKSxcbiAgICAoMHgxNkY4OCwgXCdYXCcpLFxuICAgICgweDE2RjhGLCBcJ1ZcJyksXG4gICAgKDB4MTZGQTAsIFwnWFwnKSxcbiAgICAoMHgxNkZFMCwgXCdWXCcpLFxuICAgICgweDE2RkU1LCBcJ1hcJyksXG4gICAgKDB4MTZGRjAsIFwnVlwnKSxcbiAgICAoMHgxNkZGMiwgXCdYXCcpLFxuICAgICgweDE3MDAwLCBcJ1ZcJyksXG4gICAgKDB4MTg3RjgsIFwnWFwnKSxcbiAgICAoMHgxODgwMCwgXCdWXCcpLFxuICAgICgweDE4Q0Q2LCBcJ1hcJyksXG4gICAgKDB4MThEMDAsIFwnVlwnKSxcbiAgICAoMHgxOEQwOSwgXCdYXCcpLFxuICAgICgweDFBRkYwLCBcJ1ZcJyksXG4gICAgKDB4MUFGRjQsIFwnWFwnKSxcbiAgICAoMHgxQUZGNSwgXCdWXCcpLFxuICAgICgweDFBRkZDLCBcJ1hcJyksXG4gICAgKDB4MUFGRkQsIFwnVlwnKSxcbiAgICAoMHgxQUZGRiwgXCdYXCcpLFxuICAgICgweDFCMDAwLCBcJ1ZcJyksXG4gICAgKDB4MUIxMjMsIFwnWFwnKSxcbiAgICAoMHgxQjE1MCwgXCdWXCcpLFxuICAgICgweDFCMTUzLCBcJ1hcJyksXG4gICAgKDB4MUIxNjQsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzYwKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxQjE2OCwgXCdYXCcpLFxuICAgICgweDFCMTcwLCBcJ1ZcJyksXG4gICAgKDB4MUIyRkMsIFwnWFwnKSxcbiAgICAoMHgxQkMwMCwgXCdWXCcpLFxuICAgICgweDFCQzZCLCBcJ1hcJyksXG4gICAgKDB4MUJDNzAsIFwnVlwnKSxcbiAgICAoMHgxQkM3RCwgXCdYXCcpLFxuICAgICgweDFCQzgwLCBcJ1ZcJyksXG4gICAgKDB4MUJDODksIFwnWFwnKSxcbiAgICAoMHgxQkM5MCwgXCdWXCcpLFxuICAgICgweDFCQzlBLCBcJ1hcJyksXG4gICAgKDB4MUJDOUMsIFwnVlwnKSxcbiAgICAoMHgxQkNBMCwgXCdJXCcpLFxuICAgICgweDFCQ0E0LCBcJ1hcJyksXG4gICAgKDB4MUNGMDAsIFwnVlwnKSxcbiAgICAoMHgxQ0YyRSwgXCdYXCcpLFxuICAgICgweDFDRjMwLCBcJ1ZcJyksXG4gICAgKDB4MUNGNDcsIFwnWFwnKSxcbiAgICAoMHgxQ0Y1MCwgXCdWXCcpLFxuICAgICgweDFDRkM0LCBcJ1hcJyksXG4gICAgKDB4MUQwMDAsIFwnVlwnKSxcbiAgICAoMHgxRDBGNiwgXCdYXCcpLFxuICAgICgweDFEMTAwLCBcJ1ZcJyksXG4gICAgKDB4MUQxMjcsIFwnWFwnKSxcbiAgICAoMHgxRDEyOSwgXCdWXCcpLFxuICAgICgweDFEMTVFLCBcJ01cJywgXCdceGYwXHg5ZFx4ODVceDk3XHhmMFx4OWRceDg1XHhhNVwnKSxcbiAgICAoMHgxRDE1RiwgXCdNXCcsIFwnXHhmMFx4OWRceDg1XHg5OFx4ZjBceDlkXHg4NVx4YTVcJyksXG4gICAgKDB4MUQxNjAsIFwnTVwnLCBcJ1x4ZjBceDlkXHg4NVx4OThceGYwXHg5ZFx4ODVceGE1XHhmMFx4OWRceDg1XHhhZVwnKSxcbiAgICAoMHgxRDE2MSwgXCdNXCcsIFwnXHhmMFx4OWRceDg1XHg5OFx4ZjBceDlkXHg4NVx4YTVceGYwXHg5ZFx4ODVceGFmXCcpLFxuICAgICgweDFEMTYyLCBcJ01cJywgXCdceGYwXHg5ZFx4ODVceDk4XHhmMFx4OWRceDg1XHhhNVx4ZjBceDlkXHg4NVx4YjBcJyksXG4gICAgKDB4MUQxNjMsIFwnTVwnLCBcJ1x4ZjBceDlkXHg4NVx4OThceGYwXHg5ZFx4ODVceGE1XHhmMFx4OWRceDg1XHhiMVwnKSxcbiAgICAoMHgxRDE2NCwgXCdNXCcsIFwnXHhmMFx4OWRceDg1XHg5OFx4ZjBceDlkXHg4NVx4YTVceGYwXHg5ZFx4ODVceGIyXCcpLFxuICAgICgweDFEMTY1LCBcJ1ZcJyksXG4gICAgKDB4MUQxNzMsIFwnWFwnKSxcbiAgICAoMHgxRDE3QiwgXCdWXCcpLFxuICAgICgweDFEMUJCLCBcJ01cJywgXCdceGYwXHg5ZFx4ODZceGI5XHhmMFx4OWRceDg1XHhhNVwnKSxcbiAgICAoMHgxRDFCQywgXCdNXCcsIFwnXHhmMFx4OWRceDg2XHhiYVx4ZjBceDlkXHg4NVx4YTVcJyksXG4gICAgKDB4MUQxQkQsIFwnTVwnLCBcJ1x4ZjBceDlkXHg4Nlx4YjlceGYwXHg5ZFx4ODVceGE1XHhmMFx4OWRceDg1XHhhZVwnKSxcbiAgICAoMHgxRDFCRSwgXCdNXCcsIFwnXHhmMFx4OWRceDg2XHhiYVx4ZjBceDlkXHg4NVx4YTVceGYwXHg5ZFx4ODVceGFlXCcpLFxuICAgICgweDFEMUJGLCBcJ01cJywgXCdceGYwXHg5ZFx4ODZceGI5XHhmMFx4OWRceDg1XHhhNVx4ZjBceDlkXHg4NVx4YWZcJyksXG4gICAgKDB4MUQxQzAsIFwnTVwnLCBcJ1x4ZjBceDlkXHg4Nlx4YmFceGYwXHg5ZFx4ODVceGE1XHhmMFx4OWRceDg1XHhhZlwnKSxcbiAgICAoMHgxRDFDMSwgXCdWXCcpLFxuICAgICgweDFEMUVCLCBcJ1hcJyksXG4gICAgKDB4MUQyMDAsIFwnVlwnKSxcbiAgICAoMHgxRDI0NiwgXCdYXCcpLFxuICAgICgweDFEMkUwLCBcJ1ZcJyksXG4gICAgKDB4MUQyRjQsIFwnWFwnKSxcbiAgICAoMHgxRDMwMCwgXCdWXCcpLFxuICAgICgweDFEMzU3LCBcJ1hcJyksXG4gICAgKDB4MUQzNjAsIFwnVlwnKSxcbiAgICAoMHgxRDM3OSwgXCdYXCcpLFxuICAgICgweDFENDAwLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENDAxLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENDAyLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENDAzLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENDA0LCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENDA1LCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENDA2LCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENDA3LCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENDA4LCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENDA5LCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENDBBLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENDBCLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENDBDLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENDBELCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENDBFLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENDBGLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENDEwLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENDExLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENDEyLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENDEzLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENDE0LCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENDE1LCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENDE2LCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENDE3LCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENDE4LCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENDE5LCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENDFBLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENDFCLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENDFDLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENDFELCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENDFFLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENDFGLCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENDIwLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENDIxLCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENDIyLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENDIzLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENDI0LCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENDI1LCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENDI2LCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENDI3LCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENDI4LCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENDI5LCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENDJBLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENDJCLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENDJDLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENDJELCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENDJFLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENDJGLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENDMwLCBcJ01cJywgXCd3XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNjEoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFENDMxLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENDMyLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENDMzLCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENDM0LCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENDM1LCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENDM2LCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENDM3LCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENDM4LCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENDM5LCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENDNBLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENDNCLCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENDNDLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENDNELCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENDNFLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENDNGLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENDQwLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENDQxLCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENDQyLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENDQzLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENDQ0LCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENDQ1LCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENDQ2LCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENDQ3LCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENDQ4LCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENDQ5LCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENDRBLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENDRCLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENDRDLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENDRELCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENDRFLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENDRGLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENDUwLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENDUxLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENDUyLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENDUzLCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENDU0LCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENDU1LCBcJ1hcJyksXG4gICAgKDB4MUQ0NTYsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ0NTcsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ0NTgsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ0NTksIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ0NUEsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ0NUIsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ0NUMsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ0NUQsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ0NUUsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ0NUYsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ0NjAsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ0NjEsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ0NjIsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ0NjMsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ0NjQsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ0NjUsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ0NjYsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ0NjcsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ0NjgsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ0NjksIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ0NkEsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ0NkIsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ0NkMsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ0NkQsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ0NkUsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ0NkYsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ0NzAsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ0NzEsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ0NzIsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ0NzMsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ0NzQsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ0NzUsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ0NzYsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ0NzcsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ0NzgsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ0NzksIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ0N0EsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ0N0IsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ0N0MsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ0N0QsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ0N0UsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ0N0YsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ0ODAsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ0ODEsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ0ODIsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ0ODMsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ0ODQsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ0ODUsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ0ODYsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ0ODcsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ0ODgsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ0ODksIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ0OEEsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ0OEIsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ0OEMsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ0OEQsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ0OEUsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ0OEYsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ0OTAsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ0OTEsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ0OTIsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ0OTMsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ0OTQsIFwnTVwnLCBcJ3NcJyksXG4gICAgXVxuXG5kZWYgX3NlZ182MigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUQ0OTUsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ0OTYsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ0OTcsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ0OTgsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ0OTksIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ0OUEsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ0OUIsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ0OUMsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ0OUQsIFwnWFwnKSxcbiAgICAoMHgxRDQ5RSwgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHgxRDQ5RiwgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHgxRDRBMCwgXCdYXCcpLFxuICAgICgweDFENEEyLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENEEzLCBcJ1hcJyksXG4gICAgKDB4MUQ0QTUsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ0QTYsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ0QTcsIFwnWFwnKSxcbiAgICAoMHgxRDRBOSwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHgxRDRBQSwgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHgxRDRBQiwgXCdNXCcsIFwncFwnKSxcbiAgICAoMHgxRDRBQywgXCdNXCcsIFwncVwnKSxcbiAgICAoMHgxRDRBRCwgXCdYXCcpLFxuICAgICgweDFENEFFLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENEFGLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENEIwLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENEIxLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENEIyLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENEIzLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENEI0LCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENEI1LCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENEI2LCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENEI3LCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENEI4LCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENEI5LCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENEJBLCBcJ1hcJyksXG4gICAgKDB4MUQ0QkIsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ0QkMsIFwnWFwnKSxcbiAgICAoMHgxRDRCRCwgXCdNXCcsIFwnaFwnKSxcbiAgICAoMHgxRDRCRSwgXCdNXCcsIFwnaVwnKSxcbiAgICAoMHgxRDRCRiwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgxRDRDMCwgXCdNXCcsIFwna1wnKSxcbiAgICAoMHgxRDRDMSwgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHgxRDRDMiwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgxRDRDMywgXCdNXCcsIFwnblwnKSxcbiAgICAoMHgxRDRDNCwgXCdYXCcpLFxuICAgICgweDFENEM1LCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENEM2LCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENEM3LCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENEM4LCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENEM5LCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENENBLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENENCLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENENDLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENENELCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENENFLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENENGLCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENEQwLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENEQxLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENEQyLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENEQzLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENEQ0LCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENEQ1LCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENEQ2LCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENEQ3LCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENEQ4LCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENEQ5LCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENERBLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENERCLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENERDLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENERELCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENERFLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENERGLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENEUwLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENEUxLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENEUyLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENEUzLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENEU0LCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENEU1LCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENEU2LCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENEU3LCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENEU4LCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENEU5LCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENEVBLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENEVCLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENEVDLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENEVELCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENEVFLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENEVGLCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENEYwLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENEYxLCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENEYyLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENEYzLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENEY0LCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENEY1LCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENEY2LCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENEY3LCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENEY4LCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENEY5LCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENEZBLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENEZCLCBcJ01cJywgXCdyXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNjMoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFENEZDLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENEZELCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENEZFLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENEZGLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENTAwLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENTAxLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENTAyLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENTAzLCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENTA0LCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENTA1LCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENTA2LCBcJ1hcJyksXG4gICAgKDB4MUQ1MDcsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ1MDgsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ1MDksIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ1MEEsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ1MEIsIFwnWFwnKSxcbiAgICAoMHgxRDUwRCwgXCdNXCcsIFwnalwnKSxcbiAgICAoMHgxRDUwRSwgXCdNXCcsIFwna1wnKSxcbiAgICAoMHgxRDUwRiwgXCdNXCcsIFwnbFwnKSxcbiAgICAoMHgxRDUxMCwgXCdNXCcsIFwnbVwnKSxcbiAgICAoMHgxRDUxMSwgXCdNXCcsIFwnblwnKSxcbiAgICAoMHgxRDUxMiwgXCdNXCcsIFwnb1wnKSxcbiAgICAoMHgxRDUxMywgXCdNXCcsIFwncFwnKSxcbiAgICAoMHgxRDUxNCwgXCdNXCcsIFwncVwnKSxcbiAgICAoMHgxRDUxNSwgXCdYXCcpLFxuICAgICgweDFENTE2LCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENTE3LCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENTE4LCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENTE5LCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENTFBLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENTFCLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENTFDLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENTFELCBcJ1hcJyksXG4gICAgKDB4MUQ1MUUsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ1MUYsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ1MjAsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUQ1MjEsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUQ1MjIsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUQ1MjMsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUQ1MjQsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUQ1MjUsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUQ1MjYsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUQ1MjcsIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUQ1MjgsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUQ1MjksIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUQ1MkEsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUQ1MkIsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUQ1MkMsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ1MkQsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUQ1MkUsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUQ1MkYsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUQ1MzAsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUQ1MzEsIFwnTVwnLCBcJ3RcJyksXG4gICAgKDB4MUQ1MzIsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUQ1MzMsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUQ1MzQsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUQ1MzUsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUQ1MzYsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUQ1MzcsIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUQ1MzgsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUQ1MzksIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUQ1M0EsIFwnWFwnKSxcbiAgICAoMHgxRDUzQiwgXCdNXCcsIFwnZFwnKSxcbiAgICAoMHgxRDUzQywgXCdNXCcsIFwnZVwnKSxcbiAgICAoMHgxRDUzRCwgXCdNXCcsIFwnZlwnKSxcbiAgICAoMHgxRDUzRSwgXCdNXCcsIFwnZ1wnKSxcbiAgICAoMHgxRDUzRiwgXCdYXCcpLFxuICAgICgweDFENTQwLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENTQxLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENTQyLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENTQzLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENTQ0LCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENTQ1LCBcJ1hcJyksXG4gICAgKDB4MUQ1NDYsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUQ1NDcsIFwnWFwnKSxcbiAgICAoMHgxRDU0QSwgXCdNXCcsIFwnc1wnKSxcbiAgICAoMHgxRDU0QiwgXCdNXCcsIFwndFwnKSxcbiAgICAoMHgxRDU0QywgXCdNXCcsIFwndVwnKSxcbiAgICAoMHgxRDU0RCwgXCdNXCcsIFwndlwnKSxcbiAgICAoMHgxRDU0RSwgXCdNXCcsIFwnd1wnKSxcbiAgICAoMHgxRDU0RiwgXCdNXCcsIFwneFwnKSxcbiAgICAoMHgxRDU1MCwgXCdNXCcsIFwneVwnKSxcbiAgICAoMHgxRDU1MSwgXCdYXCcpLFxuICAgICgweDFENTUyLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENTUzLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENTU0LCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENTU1LCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENTU2LCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENTU3LCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENTU4LCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENTU5LCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENTVBLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENTVCLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENTVDLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENTVELCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENTVFLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENTVGLCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENTYwLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENTYxLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENTYyLCBcJ01cJywgXCdxXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNjQoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFENTYzLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENTY0LCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENTY1LCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENTY2LCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENTY3LCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENTY4LCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENTY5LCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENTZBLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENTZCLCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENTZDLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENTZELCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENTZFLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENTZGLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENTcwLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENTcxLCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENTcyLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENTczLCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENTc0LCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENTc1LCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENTc2LCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENTc3LCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENTc4LCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENTc5LCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENTdBLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENTdCLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENTdDLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENTdELCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENTdFLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENTdGLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENTgwLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENTgxLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENTgyLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENTgzLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENTg0LCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENTg1LCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENTg2LCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENTg3LCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENTg4LCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENTg5LCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENThBLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENThCLCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENThDLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENThELCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENThFLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENThGLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENTkwLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENTkxLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENTkyLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENTkzLCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENTk0LCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENTk1LCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENTk2LCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENTk3LCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENTk4LCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENTk5LCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENTlBLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENTlCLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENTlDLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENTlELCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENTlFLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENTlGLCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENUEwLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENUExLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENUEyLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENUEzLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENUE0LCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENUE1LCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENUE2LCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENUE3LCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENUE4LCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENUE5LCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENUFBLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENUFCLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENUFDLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENUFELCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENUFFLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENUFGLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENUIwLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENUIxLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENUIyLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENUIzLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENUI0LCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENUI1LCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENUI2LCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENUI3LCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENUI4LCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENUI5LCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENUJBLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENUJCLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENUJDLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENUJELCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENUJFLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENUJGLCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENUMwLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENUMxLCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENUMyLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENUMzLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENUM0LCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENUM1LCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENUM2LCBcJ01cJywgXCdtXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNjUoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFENUM3LCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENUM4LCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENUM5LCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENUNBLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENUNCLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENUNDLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENUNELCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENUNFLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENUNGLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENUQwLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENUQxLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENUQyLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENUQzLCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENUQ0LCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENUQ1LCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENUQ2LCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENUQ3LCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENUQ4LCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENUQ5LCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENURBLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENURCLCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENURDLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENURELCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENURFLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENURGLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENUUwLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENUUxLCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENUUyLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENUUzLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENUU0LCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENUU1LCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENUU2LCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENUU3LCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENUU4LCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENUU5LCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENUVBLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENUVCLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENUVDLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENUVELCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENUVFLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENUVGLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENUYwLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENUYxLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENUYyLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENUYzLCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENUY0LCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENUY1LCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENUY2LCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENUY3LCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENUY4LCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENUY5LCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENUZBLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENUZCLCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENUZDLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENUZELCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENUZFLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENUZGLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENjAwLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENjAxLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENjAyLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENjAzLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENjA0LCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENjA1LCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENjA2LCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENjA3LCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENjA4LCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENjA5LCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENjBBLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENjBCLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENjBDLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENjBELCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENjBFLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENjBGLCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENjEwLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENjExLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENjEyLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENjEzLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENjE0LCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENjE1LCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENjE2LCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENjE3LCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENjE4LCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENjE5LCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENjFBLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENjFCLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENjFDLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENjFELCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENjFFLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENjFGLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENjIwLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENjIxLCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENjIyLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENjIzLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENjI0LCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENjI1LCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENjI2LCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENjI3LCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENjI4LCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENjI5LCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENjJBLCBcJ01cJywgXCdpXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNjYoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFENjJCLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENjJDLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENjJELCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENjJFLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENjJGLCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENjMwLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENjMxLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENjMyLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENjMzLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENjM0LCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENjM1LCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENjM2LCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENjM3LCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENjM4LCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENjM5LCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENjNBLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENjNCLCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENjNDLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENjNELCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENjNFLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENjNGLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENjQwLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENjQxLCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENjQyLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENjQzLCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENjQ0LCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENjQ1LCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENjQ2LCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENjQ3LCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENjQ4LCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENjQ5LCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENjRBLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENjRCLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENjRDLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENjRELCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENjRFLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENjRGLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENjUwLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENjUxLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENjUyLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENjUzLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENjU0LCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENjU1LCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENjU2LCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENjU3LCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENjU4LCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENjU5LCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENjVBLCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENjVCLCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENjVDLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENjVELCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENjVFLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENjVGLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENjYwLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENjYxLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENjYyLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENjYzLCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENjY0LCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENjY1LCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENjY2LCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENjY3LCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENjY4LCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENjY5LCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENjZBLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENjZCLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENjZDLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENjZELCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENjZFLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENjZGLCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENjcwLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENjcxLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENjcyLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENjczLCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENjc0LCBcJ01cJywgXCdlXCcpLFxuICAgICgweDFENjc1LCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENjc2LCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENjc3LCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENjc4LCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENjc5LCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENjdBLCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENjdCLCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENjdDLCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENjdELCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENjdFLCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENjdGLCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENjgwLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENjgxLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENjgyLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENjgzLCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENjg0LCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENjg1LCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENjg2LCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENjg3LCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENjg4LCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENjg5LCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENjhBLCBcJ01cJywgXCdhXCcpLFxuICAgICgweDFENjhCLCBcJ01cJywgXCdiXCcpLFxuICAgICgweDFENjhDLCBcJ01cJywgXCdjXCcpLFxuICAgICgweDFENjhELCBcJ01cJywgXCdkXCcpLFxuICAgICgweDFENjhFLCBcJ01cJywgXCdlXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNjcoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFENjhGLCBcJ01cJywgXCdmXCcpLFxuICAgICgweDFENjkwLCBcJ01cJywgXCdnXCcpLFxuICAgICgweDFENjkxLCBcJ01cJywgXCdoXCcpLFxuICAgICgweDFENjkyLCBcJ01cJywgXCdpXCcpLFxuICAgICgweDFENjkzLCBcJ01cJywgXCdqXCcpLFxuICAgICgweDFENjk0LCBcJ01cJywgXCdrXCcpLFxuICAgICgweDFENjk1LCBcJ01cJywgXCdsXCcpLFxuICAgICgweDFENjk2LCBcJ01cJywgXCdtXCcpLFxuICAgICgweDFENjk3LCBcJ01cJywgXCduXCcpLFxuICAgICgweDFENjk4LCBcJ01cJywgXCdvXCcpLFxuICAgICgweDFENjk5LCBcJ01cJywgXCdwXCcpLFxuICAgICgweDFENjlBLCBcJ01cJywgXCdxXCcpLFxuICAgICgweDFENjlCLCBcJ01cJywgXCdyXCcpLFxuICAgICgweDFENjlDLCBcJ01cJywgXCdzXCcpLFxuICAgICgweDFENjlELCBcJ01cJywgXCd0XCcpLFxuICAgICgweDFENjlFLCBcJ01cJywgXCd1XCcpLFxuICAgICgweDFENjlGLCBcJ01cJywgXCd2XCcpLFxuICAgICgweDFENkEwLCBcJ01cJywgXCd3XCcpLFxuICAgICgweDFENkExLCBcJ01cJywgXCd4XCcpLFxuICAgICgweDFENkEyLCBcJ01cJywgXCd5XCcpLFxuICAgICgweDFENkEzLCBcJ01cJywgXCd6XCcpLFxuICAgICgweDFENkE0LCBcJ01cJywgXCdceGM0XHhiMVwnKSxcbiAgICAoMHgxRDZBNSwgXCdNXCcsIFwnXHhjOFx4YjdcJyksXG4gICAgKDB4MUQ2QTYsIFwnWFwnKSxcbiAgICAoMHgxRDZBOCwgXCdNXCcsIFwnXHhjZVx4YjFcJyksXG4gICAgKDB4MUQ2QTksIFwnTVwnLCBcJ1x4Y2VceGIyXCcpLFxuICAgICgweDFENkFBLCBcJ01cJywgXCdceGNlXHhiM1wnKSxcbiAgICAoMHgxRDZBQiwgXCdNXCcsIFwnXHhjZVx4YjRcJyksXG4gICAgKDB4MUQ2QUMsIFwnTVwnLCBcJ1x4Y2VceGI1XCcpLFxuICAgICgweDFENkFELCBcJ01cJywgXCdceGNlXHhiNlwnKSxcbiAgICAoMHgxRDZBRSwgXCdNXCcsIFwnXHhjZVx4YjdcJyksXG4gICAgKDB4MUQ2QUYsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFENkIwLCBcJ01cJywgXCdceGNlXHhiOVwnKSxcbiAgICAoMHgxRDZCMSwgXCdNXCcsIFwnXHhjZVx4YmFcJyksXG4gICAgKDB4MUQ2QjIsIFwnTVwnLCBcJ1x4Y2VceGJiXCcpLFxuICAgICgweDFENkIzLCBcJ01cJywgXCdceGNlXHhiY1wnKSxcbiAgICAoMHgxRDZCNCwgXCdNXCcsIFwnXHhjZVx4YmRcJyksXG4gICAgKDB4MUQ2QjUsIFwnTVwnLCBcJ1x4Y2VceGJlXCcpLFxuICAgICgweDFENkI2LCBcJ01cJywgXCdceGNlXHhiZlwnKSxcbiAgICAoMHgxRDZCNywgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4MUQ2QjgsIFwnTVwnLCBcJ1x4Y2ZceDgxXCcpLFxuICAgICgweDFENkI5LCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDZCQSwgXCdNXCcsIFwnXHhjZlx4ODNcJyksXG4gICAgKDB4MUQ2QkIsIFwnTVwnLCBcJ1x4Y2ZceDg0XCcpLFxuICAgICgweDFENkJDLCBcJ01cJywgXCdceGNmXHg4NVwnKSxcbiAgICAoMHgxRDZCRCwgXCdNXCcsIFwnXHhjZlx4ODZcJyksXG4gICAgKDB4MUQ2QkUsIFwnTVwnLCBcJ1x4Y2ZceDg3XCcpLFxuICAgICgweDFENkJGLCBcJ01cJywgXCdceGNmXHg4OFwnKSxcbiAgICAoMHgxRDZDMCwgXCdNXCcsIFwnXHhjZlx4ODlcJyksXG4gICAgKDB4MUQ2QzEsIFwnTVwnLCBcJ1x4ZTJceDg4XHg4N1wnKSxcbiAgICAoMHgxRDZDMiwgXCdNXCcsIFwnXHhjZVx4YjFcJyksXG4gICAgKDB4MUQ2QzMsIFwnTVwnLCBcJ1x4Y2VceGIyXCcpLFxuICAgICgweDFENkM0LCBcJ01cJywgXCdceGNlXHhiM1wnKSxcbiAgICAoMHgxRDZDNSwgXCdNXCcsIFwnXHhjZVx4YjRcJyksXG4gICAgKDB4MUQ2QzYsIFwnTVwnLCBcJ1x4Y2VceGI1XCcpLFxuICAgICgweDFENkM3LCBcJ01cJywgXCdceGNlXHhiNlwnKSxcbiAgICAoMHgxRDZDOCwgXCdNXCcsIFwnXHhjZVx4YjdcJyksXG4gICAgKDB4MUQ2QzksIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFENkNBLCBcJ01cJywgXCdceGNlXHhiOVwnKSxcbiAgICAoMHgxRDZDQiwgXCdNXCcsIFwnXHhjZVx4YmFcJyksXG4gICAgKDB4MUQ2Q0MsIFwnTVwnLCBcJ1x4Y2VceGJiXCcpLFxuICAgICgweDFENkNELCBcJ01cJywgXCdceGNlXHhiY1wnKSxcbiAgICAoMHgxRDZDRSwgXCdNXCcsIFwnXHhjZVx4YmRcJyksXG4gICAgKDB4MUQ2Q0YsIFwnTVwnLCBcJ1x4Y2VceGJlXCcpLFxuICAgICgweDFENkQwLCBcJ01cJywgXCdceGNlXHhiZlwnKSxcbiAgICAoMHgxRDZEMSwgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4MUQ2RDIsIFwnTVwnLCBcJ1x4Y2ZceDgxXCcpLFxuICAgICgweDFENkQzLCBcJ01cJywgXCdceGNmXHg4M1wnKSxcbiAgICAoMHgxRDZENSwgXCdNXCcsIFwnXHhjZlx4ODRcJyksXG4gICAgKDB4MUQ2RDYsIFwnTVwnLCBcJ1x4Y2ZceDg1XCcpLFxuICAgICgweDFENkQ3LCBcJ01cJywgXCdceGNmXHg4NlwnKSxcbiAgICAoMHgxRDZEOCwgXCdNXCcsIFwnXHhjZlx4ODdcJyksXG4gICAgKDB4MUQ2RDksIFwnTVwnLCBcJ1x4Y2ZceDg4XCcpLFxuICAgICgweDFENkRBLCBcJ01cJywgXCdceGNmXHg4OVwnKSxcbiAgICAoMHgxRDZEQiwgXCdNXCcsIFwnXHhlMlx4ODhceDgyXCcpLFxuICAgICgweDFENkRDLCBcJ01cJywgXCdceGNlXHhiNVwnKSxcbiAgICAoMHgxRDZERCwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ2REUsIFwnTVwnLCBcJ1x4Y2VceGJhXCcpLFxuICAgICgweDFENkRGLCBcJ01cJywgXCdceGNmXHg4NlwnKSxcbiAgICAoMHgxRDZFMCwgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4MUQ2RTEsIFwnTVwnLCBcJ1x4Y2ZceDgwXCcpLFxuICAgICgweDFENkUyLCBcJ01cJywgXCdceGNlXHhiMVwnKSxcbiAgICAoMHgxRDZFMywgXCdNXCcsIFwnXHhjZVx4YjJcJyksXG4gICAgKDB4MUQ2RTQsIFwnTVwnLCBcJ1x4Y2VceGIzXCcpLFxuICAgICgweDFENkU1LCBcJ01cJywgXCdceGNlXHhiNFwnKSxcbiAgICAoMHgxRDZFNiwgXCdNXCcsIFwnXHhjZVx4YjVcJyksXG4gICAgKDB4MUQ2RTcsIFwnTVwnLCBcJ1x4Y2VceGI2XCcpLFxuICAgICgweDFENkU4LCBcJ01cJywgXCdceGNlXHhiN1wnKSxcbiAgICAoMHgxRDZFOSwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ2RUEsIFwnTVwnLCBcJ1x4Y2VceGI5XCcpLFxuICAgICgweDFENkVCLCBcJ01cJywgXCdceGNlXHhiYVwnKSxcbiAgICAoMHgxRDZFQywgXCdNXCcsIFwnXHhjZVx4YmJcJyksXG4gICAgKDB4MUQ2RUQsIFwnTVwnLCBcJ1x4Y2VceGJjXCcpLFxuICAgICgweDFENkVFLCBcJ01cJywgXCdceGNlXHhiZFwnKSxcbiAgICAoMHgxRDZFRiwgXCdNXCcsIFwnXHhjZVx4YmVcJyksXG4gICAgKDB4MUQ2RjAsIFwnTVwnLCBcJ1x4Y2VceGJmXCcpLFxuICAgICgweDFENkYxLCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgxRDZGMiwgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4MUQ2RjMsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFENkY0LCBcJ01cJywgXCdceGNmXHg4M1wnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzY4KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRDZGNSwgXCdNXCcsIFwnXHhjZlx4ODRcJyksXG4gICAgKDB4MUQ2RjYsIFwnTVwnLCBcJ1x4Y2ZceDg1XCcpLFxuICAgICgweDFENkY3LCBcJ01cJywgXCdceGNmXHg4NlwnKSxcbiAgICAoMHgxRDZGOCwgXCdNXCcsIFwnXHhjZlx4ODdcJyksXG4gICAgKDB4MUQ2RjksIFwnTVwnLCBcJ1x4Y2ZceDg4XCcpLFxuICAgICgweDFENkZBLCBcJ01cJywgXCdceGNmXHg4OVwnKSxcbiAgICAoMHgxRDZGQiwgXCdNXCcsIFwnXHhlMlx4ODhceDg3XCcpLFxuICAgICgweDFENkZDLCBcJ01cJywgXCdceGNlXHhiMVwnKSxcbiAgICAoMHgxRDZGRCwgXCdNXCcsIFwnXHhjZVx4YjJcJyksXG4gICAgKDB4MUQ2RkUsIFwnTVwnLCBcJ1x4Y2VceGIzXCcpLFxuICAgICgweDFENkZGLCBcJ01cJywgXCdceGNlXHhiNFwnKSxcbiAgICAoMHgxRDcwMCwgXCdNXCcsIFwnXHhjZVx4YjVcJyksXG4gICAgKDB4MUQ3MDEsIFwnTVwnLCBcJ1x4Y2VceGI2XCcpLFxuICAgICgweDFENzAyLCBcJ01cJywgXCdceGNlXHhiN1wnKSxcbiAgICAoMHgxRDcwMywgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ3MDQsIFwnTVwnLCBcJ1x4Y2VceGI5XCcpLFxuICAgICgweDFENzA1LCBcJ01cJywgXCdceGNlXHhiYVwnKSxcbiAgICAoMHgxRDcwNiwgXCdNXCcsIFwnXHhjZVx4YmJcJyksXG4gICAgKDB4MUQ3MDcsIFwnTVwnLCBcJ1x4Y2VceGJjXCcpLFxuICAgICgweDFENzA4LCBcJ01cJywgXCdceGNlXHhiZFwnKSxcbiAgICAoMHgxRDcwOSwgXCdNXCcsIFwnXHhjZVx4YmVcJyksXG4gICAgKDB4MUQ3MEEsIFwnTVwnLCBcJ1x4Y2VceGJmXCcpLFxuICAgICgweDFENzBCLCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgxRDcwQywgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4MUQ3MEQsIFwnTVwnLCBcJ1x4Y2ZceDgzXCcpLFxuICAgICgweDFENzBGLCBcJ01cJywgXCdceGNmXHg4NFwnKSxcbiAgICAoMHgxRDcxMCwgXCdNXCcsIFwnXHhjZlx4ODVcJyksXG4gICAgKDB4MUQ3MTEsIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFENzEyLCBcJ01cJywgXCdceGNmXHg4N1wnKSxcbiAgICAoMHgxRDcxMywgXCdNXCcsIFwnXHhjZlx4ODhcJyksXG4gICAgKDB4MUQ3MTQsIFwnTVwnLCBcJ1x4Y2ZceDg5XCcpLFxuICAgICgweDFENzE1LCBcJ01cJywgXCdceGUyXHg4OFx4ODJcJyksXG4gICAgKDB4MUQ3MTYsIFwnTVwnLCBcJ1x4Y2VceGI1XCcpLFxuICAgICgweDFENzE3LCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDcxOCwgXCdNXCcsIFwnXHhjZVx4YmFcJyksXG4gICAgKDB4MUQ3MTksIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFENzFBLCBcJ01cJywgXCdceGNmXHg4MVwnKSxcbiAgICAoMHgxRDcxQiwgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4MUQ3MUMsIFwnTVwnLCBcJ1x4Y2VceGIxXCcpLFxuICAgICgweDFENzFELCBcJ01cJywgXCdceGNlXHhiMlwnKSxcbiAgICAoMHgxRDcxRSwgXCdNXCcsIFwnXHhjZVx4YjNcJyksXG4gICAgKDB4MUQ3MUYsIFwnTVwnLCBcJ1x4Y2VceGI0XCcpLFxuICAgICgweDFENzIwLCBcJ01cJywgXCdceGNlXHhiNVwnKSxcbiAgICAoMHgxRDcyMSwgXCdNXCcsIFwnXHhjZVx4YjZcJyksXG4gICAgKDB4MUQ3MjIsIFwnTVwnLCBcJ1x4Y2VceGI3XCcpLFxuICAgICgweDFENzIzLCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDcyNCwgXCdNXCcsIFwnXHhjZVx4YjlcJyksXG4gICAgKDB4MUQ3MjUsIFwnTVwnLCBcJ1x4Y2VceGJhXCcpLFxuICAgICgweDFENzI2LCBcJ01cJywgXCdceGNlXHhiYlwnKSxcbiAgICAoMHgxRDcyNywgXCdNXCcsIFwnXHhjZVx4YmNcJyksXG4gICAgKDB4MUQ3MjgsIFwnTVwnLCBcJ1x4Y2VceGJkXCcpLFxuICAgICgweDFENzI5LCBcJ01cJywgXCdceGNlXHhiZVwnKSxcbiAgICAoMHgxRDcyQSwgXCdNXCcsIFwnXHhjZVx4YmZcJyksXG4gICAgKDB4MUQ3MkIsIFwnTVwnLCBcJ1x4Y2ZceDgwXCcpLFxuICAgICgweDFENzJDLCBcJ01cJywgXCdceGNmXHg4MVwnKSxcbiAgICAoMHgxRDcyRCwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ3MkUsIFwnTVwnLCBcJ1x4Y2ZceDgzXCcpLFxuICAgICgweDFENzJGLCBcJ01cJywgXCdceGNmXHg4NFwnKSxcbiAgICAoMHgxRDczMCwgXCdNXCcsIFwnXHhjZlx4ODVcJyksXG4gICAgKDB4MUQ3MzEsIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFENzMyLCBcJ01cJywgXCdceGNmXHg4N1wnKSxcbiAgICAoMHgxRDczMywgXCdNXCcsIFwnXHhjZlx4ODhcJyksXG4gICAgKDB4MUQ3MzQsIFwnTVwnLCBcJ1x4Y2ZceDg5XCcpLFxuICAgICgweDFENzM1LCBcJ01cJywgXCdceGUyXHg4OFx4ODdcJyksXG4gICAgKDB4MUQ3MzYsIFwnTVwnLCBcJ1x4Y2VceGIxXCcpLFxuICAgICgweDFENzM3LCBcJ01cJywgXCdceGNlXHhiMlwnKSxcbiAgICAoMHgxRDczOCwgXCdNXCcsIFwnXHhjZVx4YjNcJyksXG4gICAgKDB4MUQ3MzksIFwnTVwnLCBcJ1x4Y2VceGI0XCcpLFxuICAgICgweDFENzNBLCBcJ01cJywgXCdceGNlXHhiNVwnKSxcbiAgICAoMHgxRDczQiwgXCdNXCcsIFwnXHhjZVx4YjZcJyksXG4gICAgKDB4MUQ3M0MsIFwnTVwnLCBcJ1x4Y2VceGI3XCcpLFxuICAgICgweDFENzNELCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDczRSwgXCdNXCcsIFwnXHhjZVx4YjlcJyksXG4gICAgKDB4MUQ3M0YsIFwnTVwnLCBcJ1x4Y2VceGJhXCcpLFxuICAgICgweDFENzQwLCBcJ01cJywgXCdceGNlXHhiYlwnKSxcbiAgICAoMHgxRDc0MSwgXCdNXCcsIFwnXHhjZVx4YmNcJyksXG4gICAgKDB4MUQ3NDIsIFwnTVwnLCBcJ1x4Y2VceGJkXCcpLFxuICAgICgweDFENzQzLCBcJ01cJywgXCdceGNlXHhiZVwnKSxcbiAgICAoMHgxRDc0NCwgXCdNXCcsIFwnXHhjZVx4YmZcJyksXG4gICAgKDB4MUQ3NDUsIFwnTVwnLCBcJ1x4Y2ZceDgwXCcpLFxuICAgICgweDFENzQ2LCBcJ01cJywgXCdceGNmXHg4MVwnKSxcbiAgICAoMHgxRDc0NywgXCdNXCcsIFwnXHhjZlx4ODNcJyksXG4gICAgKDB4MUQ3NDksIFwnTVwnLCBcJ1x4Y2ZceDg0XCcpLFxuICAgICgweDFENzRBLCBcJ01cJywgXCdceGNmXHg4NVwnKSxcbiAgICAoMHgxRDc0QiwgXCdNXCcsIFwnXHhjZlx4ODZcJyksXG4gICAgKDB4MUQ3NEMsIFwnTVwnLCBcJ1x4Y2ZceDg3XCcpLFxuICAgICgweDFENzRELCBcJ01cJywgXCdceGNmXHg4OFwnKSxcbiAgICAoMHgxRDc0RSwgXCdNXCcsIFwnXHhjZlx4ODlcJyksXG4gICAgKDB4MUQ3NEYsIFwnTVwnLCBcJ1x4ZTJceDg4XHg4MlwnKSxcbiAgICAoMHgxRDc1MCwgXCdNXCcsIFwnXHhjZVx4YjVcJyksXG4gICAgKDB4MUQ3NTEsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFENzUyLCBcJ01cJywgXCdceGNlXHhiYVwnKSxcbiAgICAoMHgxRDc1MywgXCdNXCcsIFwnXHhjZlx4ODZcJyksXG4gICAgKDB4MUQ3NTQsIFwnTVwnLCBcJ1x4Y2ZceDgxXCcpLFxuICAgICgweDFENzU1LCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgxRDc1NiwgXCdNXCcsIFwnXHhjZVx4YjFcJyksXG4gICAgKDB4MUQ3NTcsIFwnTVwnLCBcJ1x4Y2VceGIyXCcpLFxuICAgICgweDFENzU4LCBcJ01cJywgXCdceGNlXHhiM1wnKSxcbiAgICAoMHgxRDc1OSwgXCdNXCcsIFwnXHhjZVx4YjRcJyksXG4gICAgKDB4MUQ3NUEsIFwnTVwnLCBcJ1x4Y2VceGI1XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNjkoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDFENzVCLCBcJ01cJywgXCdceGNlXHhiNlwnKSxcbiAgICAoMHgxRDc1QywgXCdNXCcsIFwnXHhjZVx4YjdcJyksXG4gICAgKDB4MUQ3NUQsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFENzVFLCBcJ01cJywgXCdceGNlXHhiOVwnKSxcbiAgICAoMHgxRDc1RiwgXCdNXCcsIFwnXHhjZVx4YmFcJyksXG4gICAgKDB4MUQ3NjAsIFwnTVwnLCBcJ1x4Y2VceGJiXCcpLFxuICAgICgweDFENzYxLCBcJ01cJywgXCdceGNlXHhiY1wnKSxcbiAgICAoMHgxRDc2MiwgXCdNXCcsIFwnXHhjZVx4YmRcJyksXG4gICAgKDB4MUQ3NjMsIFwnTVwnLCBcJ1x4Y2VceGJlXCcpLFxuICAgICgweDFENzY0LCBcJ01cJywgXCdceGNlXHhiZlwnKSxcbiAgICAoMHgxRDc2NSwgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4MUQ3NjYsIFwnTVwnLCBcJ1x4Y2ZceDgxXCcpLFxuICAgICgweDFENzY3LCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDc2OCwgXCdNXCcsIFwnXHhjZlx4ODNcJyksXG4gICAgKDB4MUQ3NjksIFwnTVwnLCBcJ1x4Y2ZceDg0XCcpLFxuICAgICgweDFENzZBLCBcJ01cJywgXCdceGNmXHg4NVwnKSxcbiAgICAoMHgxRDc2QiwgXCdNXCcsIFwnXHhjZlx4ODZcJyksXG4gICAgKDB4MUQ3NkMsIFwnTVwnLCBcJ1x4Y2ZceDg3XCcpLFxuICAgICgweDFENzZELCBcJ01cJywgXCdceGNmXHg4OFwnKSxcbiAgICAoMHgxRDc2RSwgXCdNXCcsIFwnXHhjZlx4ODlcJyksXG4gICAgKDB4MUQ3NkYsIFwnTVwnLCBcJ1x4ZTJceDg4XHg4N1wnKSxcbiAgICAoMHgxRDc3MCwgXCdNXCcsIFwnXHhjZVx4YjFcJyksXG4gICAgKDB4MUQ3NzEsIFwnTVwnLCBcJ1x4Y2VceGIyXCcpLFxuICAgICgweDFENzcyLCBcJ01cJywgXCdceGNlXHhiM1wnKSxcbiAgICAoMHgxRDc3MywgXCdNXCcsIFwnXHhjZVx4YjRcJyksXG4gICAgKDB4MUQ3NzQsIFwnTVwnLCBcJ1x4Y2VceGI1XCcpLFxuICAgICgweDFENzc1LCBcJ01cJywgXCdceGNlXHhiNlwnKSxcbiAgICAoMHgxRDc3NiwgXCdNXCcsIFwnXHhjZVx4YjdcJyksXG4gICAgKDB4MUQ3NzcsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFENzc4LCBcJ01cJywgXCdceGNlXHhiOVwnKSxcbiAgICAoMHgxRDc3OSwgXCdNXCcsIFwnXHhjZVx4YmFcJyksXG4gICAgKDB4MUQ3N0EsIFwnTVwnLCBcJ1x4Y2VceGJiXCcpLFxuICAgICgweDFENzdCLCBcJ01cJywgXCdceGNlXHhiY1wnKSxcbiAgICAoMHgxRDc3QywgXCdNXCcsIFwnXHhjZVx4YmRcJyksXG4gICAgKDB4MUQ3N0QsIFwnTVwnLCBcJ1x4Y2VceGJlXCcpLFxuICAgICgweDFENzdFLCBcJ01cJywgXCdceGNlXHhiZlwnKSxcbiAgICAoMHgxRDc3RiwgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4MUQ3ODAsIFwnTVwnLCBcJ1x4Y2ZceDgxXCcpLFxuICAgICgweDFENzgxLCBcJ01cJywgXCdceGNmXHg4M1wnKSxcbiAgICAoMHgxRDc4MywgXCdNXCcsIFwnXHhjZlx4ODRcJyksXG4gICAgKDB4MUQ3ODQsIFwnTVwnLCBcJ1x4Y2ZceDg1XCcpLFxuICAgICgweDFENzg1LCBcJ01cJywgXCdceGNmXHg4NlwnKSxcbiAgICAoMHgxRDc4NiwgXCdNXCcsIFwnXHhjZlx4ODdcJyksXG4gICAgKDB4MUQ3ODcsIFwnTVwnLCBcJ1x4Y2ZceDg4XCcpLFxuICAgICgweDFENzg4LCBcJ01cJywgXCdceGNmXHg4OVwnKSxcbiAgICAoMHgxRDc4OSwgXCdNXCcsIFwnXHhlMlx4ODhceDgyXCcpLFxuICAgICgweDFENzhBLCBcJ01cJywgXCdceGNlXHhiNVwnKSxcbiAgICAoMHgxRDc4QiwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ3OEMsIFwnTVwnLCBcJ1x4Y2VceGJhXCcpLFxuICAgICgweDFENzhELCBcJ01cJywgXCdceGNmXHg4NlwnKSxcbiAgICAoMHgxRDc4RSwgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4MUQ3OEYsIFwnTVwnLCBcJ1x4Y2ZceDgwXCcpLFxuICAgICgweDFENzkwLCBcJ01cJywgXCdceGNlXHhiMVwnKSxcbiAgICAoMHgxRDc5MSwgXCdNXCcsIFwnXHhjZVx4YjJcJyksXG4gICAgKDB4MUQ3OTIsIFwnTVwnLCBcJ1x4Y2VceGIzXCcpLFxuICAgICgweDFENzkzLCBcJ01cJywgXCdceGNlXHhiNFwnKSxcbiAgICAoMHgxRDc5NCwgXCdNXCcsIFwnXHhjZVx4YjVcJyksXG4gICAgKDB4MUQ3OTUsIFwnTVwnLCBcJ1x4Y2VceGI2XCcpLFxuICAgICgweDFENzk2LCBcJ01cJywgXCdceGNlXHhiN1wnKSxcbiAgICAoMHgxRDc5NywgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ3OTgsIFwnTVwnLCBcJ1x4Y2VceGI5XCcpLFxuICAgICgweDFENzk5LCBcJ01cJywgXCdceGNlXHhiYVwnKSxcbiAgICAoMHgxRDc5QSwgXCdNXCcsIFwnXHhjZVx4YmJcJyksXG4gICAgKDB4MUQ3OUIsIFwnTVwnLCBcJ1x4Y2VceGJjXCcpLFxuICAgICgweDFENzlDLCBcJ01cJywgXCdceGNlXHhiZFwnKSxcbiAgICAoMHgxRDc5RCwgXCdNXCcsIFwnXHhjZVx4YmVcJyksXG4gICAgKDB4MUQ3OUUsIFwnTVwnLCBcJ1x4Y2VceGJmXCcpLFxuICAgICgweDFENzlGLCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgxRDdBMCwgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4MUQ3QTEsIFwnTVwnLCBcJ1x4Y2VceGI4XCcpLFxuICAgICgweDFEN0EyLCBcJ01cJywgXCdceGNmXHg4M1wnKSxcbiAgICAoMHgxRDdBMywgXCdNXCcsIFwnXHhjZlx4ODRcJyksXG4gICAgKDB4MUQ3QTQsIFwnTVwnLCBcJ1x4Y2ZceDg1XCcpLFxuICAgICgweDFEN0E1LCBcJ01cJywgXCdceGNmXHg4NlwnKSxcbiAgICAoMHgxRDdBNiwgXCdNXCcsIFwnXHhjZlx4ODdcJyksXG4gICAgKDB4MUQ3QTcsIFwnTVwnLCBcJ1x4Y2ZceDg4XCcpLFxuICAgICgweDFEN0E4LCBcJ01cJywgXCdceGNmXHg4OVwnKSxcbiAgICAoMHgxRDdBOSwgXCdNXCcsIFwnXHhlMlx4ODhceDg3XCcpLFxuICAgICgweDFEN0FBLCBcJ01cJywgXCdceGNlXHhiMVwnKSxcbiAgICAoMHgxRDdBQiwgXCdNXCcsIFwnXHhjZVx4YjJcJyksXG4gICAgKDB4MUQ3QUMsIFwnTVwnLCBcJ1x4Y2VceGIzXCcpLFxuICAgICgweDFEN0FELCBcJ01cJywgXCdceGNlXHhiNFwnKSxcbiAgICAoMHgxRDdBRSwgXCdNXCcsIFwnXHhjZVx4YjVcJyksXG4gICAgKDB4MUQ3QUYsIFwnTVwnLCBcJ1x4Y2VceGI2XCcpLFxuICAgICgweDFEN0IwLCBcJ01cJywgXCdceGNlXHhiN1wnKSxcbiAgICAoMHgxRDdCMSwgXCdNXCcsIFwnXHhjZVx4YjhcJyksXG4gICAgKDB4MUQ3QjIsIFwnTVwnLCBcJ1x4Y2VceGI5XCcpLFxuICAgICgweDFEN0IzLCBcJ01cJywgXCdceGNlXHhiYVwnKSxcbiAgICAoMHgxRDdCNCwgXCdNXCcsIFwnXHhjZVx4YmJcJyksXG4gICAgKDB4MUQ3QjUsIFwnTVwnLCBcJ1x4Y2VceGJjXCcpLFxuICAgICgweDFEN0I2LCBcJ01cJywgXCdceGNlXHhiZFwnKSxcbiAgICAoMHgxRDdCNywgXCdNXCcsIFwnXHhjZVx4YmVcJyksXG4gICAgKDB4MUQ3QjgsIFwnTVwnLCBcJ1x4Y2VceGJmXCcpLFxuICAgICgweDFEN0I5LCBcJ01cJywgXCdceGNmXHg4MFwnKSxcbiAgICAoMHgxRDdCQSwgXCdNXCcsIFwnXHhjZlx4ODFcJyksXG4gICAgKDB4MUQ3QkIsIFwnTVwnLCBcJ1x4Y2ZceDgzXCcpLFxuICAgICgweDFEN0JELCBcJ01cJywgXCdceGNmXHg4NFwnKSxcbiAgICAoMHgxRDdCRSwgXCdNXCcsIFwnXHhjZlx4ODVcJyksXG4gICAgKDB4MUQ3QkYsIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFEN0MwLCBcJ01cJywgXCdceGNmXHg4N1wnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzcwKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRDdDMSwgXCdNXCcsIFwnXHhjZlx4ODhcJyksXG4gICAgKDB4MUQ3QzIsIFwnTVwnLCBcJ1x4Y2ZceDg5XCcpLFxuICAgICgweDFEN0MzLCBcJ01cJywgXCdceGUyXHg4OFx4ODJcJyksXG4gICAgKDB4MUQ3QzQsIFwnTVwnLCBcJ1x4Y2VceGI1XCcpLFxuICAgICgweDFEN0M1LCBcJ01cJywgXCdceGNlXHhiOFwnKSxcbiAgICAoMHgxRDdDNiwgXCdNXCcsIFwnXHhjZVx4YmFcJyksXG4gICAgKDB4MUQ3QzcsIFwnTVwnLCBcJ1x4Y2ZceDg2XCcpLFxuICAgICgweDFEN0M4LCBcJ01cJywgXCdceGNmXHg4MVwnKSxcbiAgICAoMHgxRDdDOSwgXCdNXCcsIFwnXHhjZlx4ODBcJyksXG4gICAgKDB4MUQ3Q0EsIFwnTVwnLCBcJ1x4Y2ZceDlkXCcpLFxuICAgICgweDFEN0NDLCBcJ1hcJyksXG4gICAgKDB4MUQ3Q0UsIFwnTVwnLCBcJzBcJyksXG4gICAgKDB4MUQ3Q0YsIFwnTVwnLCBcJzFcJyksXG4gICAgKDB4MUQ3RDAsIFwnTVwnLCBcJzJcJyksXG4gICAgKDB4MUQ3RDEsIFwnTVwnLCBcJzNcJyksXG4gICAgKDB4MUQ3RDIsIFwnTVwnLCBcJzRcJyksXG4gICAgKDB4MUQ3RDMsIFwnTVwnLCBcJzVcJyksXG4gICAgKDB4MUQ3RDQsIFwnTVwnLCBcJzZcJyksXG4gICAgKDB4MUQ3RDUsIFwnTVwnLCBcJzdcJyksXG4gICAgKDB4MUQ3RDYsIFwnTVwnLCBcJzhcJyksXG4gICAgKDB4MUQ3RDcsIFwnTVwnLCBcJzlcJyksXG4gICAgKDB4MUQ3RDgsIFwnTVwnLCBcJzBcJyksXG4gICAgKDB4MUQ3RDksIFwnTVwnLCBcJzFcJyksXG4gICAgKDB4MUQ3REEsIFwnTVwnLCBcJzJcJyksXG4gICAgKDB4MUQ3REIsIFwnTVwnLCBcJzNcJyksXG4gICAgKDB4MUQ3REMsIFwnTVwnLCBcJzRcJyksXG4gICAgKDB4MUQ3REQsIFwnTVwnLCBcJzVcJyksXG4gICAgKDB4MUQ3REUsIFwnTVwnLCBcJzZcJyksXG4gICAgKDB4MUQ3REYsIFwnTVwnLCBcJzdcJyksXG4gICAgKDB4MUQ3RTAsIFwnTVwnLCBcJzhcJyksXG4gICAgKDB4MUQ3RTEsIFwnTVwnLCBcJzlcJyksXG4gICAgKDB4MUQ3RTIsIFwnTVwnLCBcJzBcJyksXG4gICAgKDB4MUQ3RTMsIFwnTVwnLCBcJzFcJyksXG4gICAgKDB4MUQ3RTQsIFwnTVwnLCBcJzJcJyksXG4gICAgKDB4MUQ3RTUsIFwnTVwnLCBcJzNcJyksXG4gICAgKDB4MUQ3RTYsIFwnTVwnLCBcJzRcJyksXG4gICAgKDB4MUQ3RTcsIFwnTVwnLCBcJzVcJyksXG4gICAgKDB4MUQ3RTgsIFwnTVwnLCBcJzZcJyksXG4gICAgKDB4MUQ3RTksIFwnTVwnLCBcJzdcJyksXG4gICAgKDB4MUQ3RUEsIFwnTVwnLCBcJzhcJyksXG4gICAgKDB4MUQ3RUIsIFwnTVwnLCBcJzlcJyksXG4gICAgKDB4MUQ3RUMsIFwnTVwnLCBcJzBcJyksXG4gICAgKDB4MUQ3RUQsIFwnTVwnLCBcJzFcJyksXG4gICAgKDB4MUQ3RUUsIFwnTVwnLCBcJzJcJyksXG4gICAgKDB4MUQ3RUYsIFwnTVwnLCBcJzNcJyksXG4gICAgKDB4MUQ3RjAsIFwnTVwnLCBcJzRcJyksXG4gICAgKDB4MUQ3RjEsIFwnTVwnLCBcJzVcJyksXG4gICAgKDB4MUQ3RjIsIFwnTVwnLCBcJzZcJyksXG4gICAgKDB4MUQ3RjMsIFwnTVwnLCBcJzdcJyksXG4gICAgKDB4MUQ3RjQsIFwnTVwnLCBcJzhcJyksXG4gICAgKDB4MUQ3RjUsIFwnTVwnLCBcJzlcJyksXG4gICAgKDB4MUQ3RjYsIFwnTVwnLCBcJzBcJyksXG4gICAgKDB4MUQ3RjcsIFwnTVwnLCBcJzFcJyksXG4gICAgKDB4MUQ3RjgsIFwnTVwnLCBcJzJcJyksXG4gICAgKDB4MUQ3RjksIFwnTVwnLCBcJzNcJyksXG4gICAgKDB4MUQ3RkEsIFwnTVwnLCBcJzRcJyksXG4gICAgKDB4MUQ3RkIsIFwnTVwnLCBcJzVcJyksXG4gICAgKDB4MUQ3RkMsIFwnTVwnLCBcJzZcJyksXG4gICAgKDB4MUQ3RkQsIFwnTVwnLCBcJzdcJyksXG4gICAgKDB4MUQ3RkUsIFwnTVwnLCBcJzhcJyksXG4gICAgKDB4MUQ3RkYsIFwnTVwnLCBcJzlcJyksXG4gICAgKDB4MUQ4MDAsIFwnVlwnKSxcbiAgICAoMHgxREE4QywgXCdYXCcpLFxuICAgICgweDFEQTlCLCBcJ1ZcJyksXG4gICAgKDB4MURBQTAsIFwnWFwnKSxcbiAgICAoMHgxREFBMSwgXCdWXCcpLFxuICAgICgweDFEQUIwLCBcJ1hcJyksXG4gICAgKDB4MURGMDAsIFwnVlwnKSxcbiAgICAoMHgxREYxRiwgXCdYXCcpLFxuICAgICgweDFFMDAwLCBcJ1ZcJyksXG4gICAgKDB4MUUwMDcsIFwnWFwnKSxcbiAgICAoMHgxRTAwOCwgXCdWXCcpLFxuICAgICgweDFFMDE5LCBcJ1hcJyksXG4gICAgKDB4MUUwMUIsIFwnVlwnKSxcbiAgICAoMHgxRTAyMiwgXCdYXCcpLFxuICAgICgweDFFMDIzLCBcJ1ZcJyksXG4gICAgKDB4MUUwMjUsIFwnWFwnKSxcbiAgICAoMHgxRTAyNiwgXCdWXCcpLFxuICAgICgweDFFMDJCLCBcJ1hcJyksXG4gICAgKDB4MUUxMDAsIFwnVlwnKSxcbiAgICAoMHgxRTEyRCwgXCdYXCcpLFxuICAgICgweDFFMTMwLCBcJ1ZcJyksXG4gICAgKDB4MUUxM0UsIFwnWFwnKSxcbiAgICAoMHgxRTE0MCwgXCdWXCcpLFxuICAgICgweDFFMTRBLCBcJ1hcJyksXG4gICAgKDB4MUUxNEUsIFwnVlwnKSxcbiAgICAoMHgxRTE1MCwgXCdYXCcpLFxuICAgICgweDFFMjkwLCBcJ1ZcJyksXG4gICAgKDB4MUUyQUYsIFwnWFwnKSxcbiAgICAoMHgxRTJDMCwgXCdWXCcpLFxuICAgICgweDFFMkZBLCBcJ1hcJyksXG4gICAgKDB4MUUyRkYsIFwnVlwnKSxcbiAgICAoMHgxRTMwMCwgXCdYXCcpLFxuICAgICgweDFFN0UwLCBcJ1ZcJyksXG4gICAgKDB4MUU3RTcsIFwnWFwnKSxcbiAgICAoMHgxRTdFOCwgXCdWXCcpLFxuICAgICgweDFFN0VDLCBcJ1hcJyksXG4gICAgKDB4MUU3RUQsIFwnVlwnKSxcbiAgICAoMHgxRTdFRiwgXCdYXCcpLFxuICAgICgweDFFN0YwLCBcJ1ZcJyksXG4gICAgXVxuXG5kZWYgX3NlZ183MSgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUU3RkYsIFwnWFwnKSxcbiAgICAoMHgxRTgwMCwgXCdWXCcpLFxuICAgICgweDFFOEM1LCBcJ1hcJyksXG4gICAgKDB4MUU4QzcsIFwnVlwnKSxcbiAgICAoMHgxRThENywgXCdYXCcpLFxuICAgICgweDFFOTAwLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGEyXCcpLFxuICAgICgweDFFOTAxLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGEzXCcpLFxuICAgICgweDFFOTAyLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGE0XCcpLFxuICAgICgweDFFOTAzLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGE1XCcpLFxuICAgICgweDFFOTA0LCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGE2XCcpLFxuICAgICgweDFFOTA1LCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGE3XCcpLFxuICAgICgweDFFOTA2LCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGE4XCcpLFxuICAgICgweDFFOTA3LCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGE5XCcpLFxuICAgICgweDFFOTA4LCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGFhXCcpLFxuICAgICgweDFFOTA5LCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGFiXCcpLFxuICAgICgweDFFOTBBLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGFjXCcpLFxuICAgICgweDFFOTBCLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGFkXCcpLFxuICAgICgweDFFOTBDLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGFlXCcpLFxuICAgICgweDFFOTBELCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGFmXCcpLFxuICAgICgweDFFOTBFLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGIwXCcpLFxuICAgICgweDFFOTBGLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGIxXCcpLFxuICAgICgweDFFOTEwLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGIyXCcpLFxuICAgICgweDFFOTExLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGIzXCcpLFxuICAgICgweDFFOTEyLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGI0XCcpLFxuICAgICgweDFFOTEzLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGI1XCcpLFxuICAgICgweDFFOTE0LCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGI2XCcpLFxuICAgICgweDFFOTE1LCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGI3XCcpLFxuICAgICgweDFFOTE2LCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGI4XCcpLFxuICAgICgweDFFOTE3LCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGI5XCcpLFxuICAgICgweDFFOTE4LCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGJhXCcpLFxuICAgICgweDFFOTE5LCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGJiXCcpLFxuICAgICgweDFFOTFBLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGJjXCcpLFxuICAgICgweDFFOTFCLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGJkXCcpLFxuICAgICgweDFFOTFDLCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGJlXCcpLFxuICAgICgweDFFOTFELCBcJ01cJywgXCdceGYwXHg5ZVx4YTRceGJmXCcpLFxuICAgICgweDFFOTFFLCBcJ01cJywgXCdceGYwXHg5ZVx4YTVceDgwXCcpLFxuICAgICgweDFFOTFGLCBcJ01cJywgXCdceGYwXHg5ZVx4YTVceDgxXCcpLFxuICAgICgweDFFOTIwLCBcJ01cJywgXCdceGYwXHg5ZVx4YTVceDgyXCcpLFxuICAgICgweDFFOTIxLCBcJ01cJywgXCdceGYwXHg5ZVx4YTVceDgzXCcpLFxuICAgICgweDFFOTIyLCBcJ1ZcJyksXG4gICAgKDB4MUU5NEMsIFwnWFwnKSxcbiAgICAoMHgxRTk1MCwgXCdWXCcpLFxuICAgICgweDFFOTVBLCBcJ1hcJyksXG4gICAgKDB4MUU5NUUsIFwnVlwnKSxcbiAgICAoMHgxRTk2MCwgXCdYXCcpLFxuICAgICgweDFFQzcxLCBcJ1ZcJyksXG4gICAgKDB4MUVDQjUsIFwnWFwnKSxcbiAgICAoMHgxRUQwMSwgXCdWXCcpLFxuICAgICgweDFFRDNFLCBcJ1hcJyksXG4gICAgKDB4MUVFMDAsIFwnTVwnLCBcJ1x4ZDhceGE3XCcpLFxuICAgICgweDFFRTAxLCBcJ01cJywgXCdceGQ4XHhhOFwnKSxcbiAgICAoMHgxRUUwMiwgXCdNXCcsIFwnXHhkOFx4YWNcJyksXG4gICAgKDB4MUVFMDMsIFwnTVwnLCBcJ1x4ZDhceGFmXCcpLFxuICAgICgweDFFRTA0LCBcJ1hcJyksXG4gICAgKDB4MUVFMDUsIFwnTVwnLCBcJ1x4ZDlceDg4XCcpLFxuICAgICgweDFFRTA2LCBcJ01cJywgXCdceGQ4XHhiMlwnKSxcbiAgICAoMHgxRUUwNywgXCdNXCcsIFwnXHhkOFx4YWRcJyksXG4gICAgKDB4MUVFMDgsIFwnTVwnLCBcJ1x4ZDhceGI3XCcpLFxuICAgICgweDFFRTA5LCBcJ01cJywgXCdceGQ5XHg4YVwnKSxcbiAgICAoMHgxRUUwQSwgXCdNXCcsIFwnXHhkOVx4ODNcJyksXG4gICAgKDB4MUVFMEIsIFwnTVwnLCBcJ1x4ZDlceDg0XCcpLFxuICAgICgweDFFRTBDLCBcJ01cJywgXCdceGQ5XHg4NVwnKSxcbiAgICAoMHgxRUUwRCwgXCdNXCcsIFwnXHhkOVx4ODZcJyksXG4gICAgKDB4MUVFMEUsIFwnTVwnLCBcJ1x4ZDhceGIzXCcpLFxuICAgICgweDFFRTBGLCBcJ01cJywgXCdceGQ4XHhiOVwnKSxcbiAgICAoMHgxRUUxMCwgXCdNXCcsIFwnXHhkOVx4ODFcJyksXG4gICAgKDB4MUVFMTEsIFwnTVwnLCBcJ1x4ZDhceGI1XCcpLFxuICAgICgweDFFRTEyLCBcJ01cJywgXCdceGQ5XHg4MlwnKSxcbiAgICAoMHgxRUUxMywgXCdNXCcsIFwnXHhkOFx4YjFcJyksXG4gICAgKDB4MUVFMTQsIFwnTVwnLCBcJ1x4ZDhceGI0XCcpLFxuICAgICgweDFFRTE1LCBcJ01cJywgXCdceGQ4XHhhYVwnKSxcbiAgICAoMHgxRUUxNiwgXCdNXCcsIFwnXHhkOFx4YWJcJyksXG4gICAgKDB4MUVFMTcsIFwnTVwnLCBcJ1x4ZDhceGFlXCcpLFxuICAgICgweDFFRTE4LCBcJ01cJywgXCdceGQ4XHhiMFwnKSxcbiAgICAoMHgxRUUxOSwgXCdNXCcsIFwnXHhkOFx4YjZcJyksXG4gICAgKDB4MUVFMUEsIFwnTVwnLCBcJ1x4ZDhceGI4XCcpLFxuICAgICgweDFFRTFCLCBcJ01cJywgXCdceGQ4XHhiYVwnKSxcbiAgICAoMHgxRUUxQywgXCdNXCcsIFwnXHhkOVx4YWVcJyksXG4gICAgKDB4MUVFMUQsIFwnTVwnLCBcJ1x4ZGFceGJhXCcpLFxuICAgICgweDFFRTFFLCBcJ01cJywgXCdceGRhXHhhMVwnKSxcbiAgICAoMHgxRUUxRiwgXCdNXCcsIFwnXHhkOVx4YWZcJyksXG4gICAgKDB4MUVFMjAsIFwnWFwnKSxcbiAgICAoMHgxRUUyMSwgXCdNXCcsIFwnXHhkOFx4YThcJyksXG4gICAgKDB4MUVFMjIsIFwnTVwnLCBcJ1x4ZDhceGFjXCcpLFxuICAgICgweDFFRTIzLCBcJ1hcJyksXG4gICAgKDB4MUVFMjQsIFwnTVwnLCBcJ1x4ZDlceDg3XCcpLFxuICAgICgweDFFRTI1LCBcJ1hcJyksXG4gICAgKDB4MUVFMjcsIFwnTVwnLCBcJ1x4ZDhceGFkXCcpLFxuICAgICgweDFFRTI4LCBcJ1hcJyksXG4gICAgKDB4MUVFMjksIFwnTVwnLCBcJ1x4ZDlceDhhXCcpLFxuICAgICgweDFFRTJBLCBcJ01cJywgXCdceGQ5XHg4M1wnKSxcbiAgICAoMHgxRUUyQiwgXCdNXCcsIFwnXHhkOVx4ODRcJyksXG4gICAgKDB4MUVFMkMsIFwnTVwnLCBcJ1x4ZDlceDg1XCcpLFxuICAgICgweDFFRTJELCBcJ01cJywgXCdceGQ5XHg4NlwnKSxcbiAgICAoMHgxRUUyRSwgXCdNXCcsIFwnXHhkOFx4YjNcJyksXG4gICAgKDB4MUVFMkYsIFwnTVwnLCBcJ1x4ZDhceGI5XCcpLFxuICAgICgweDFFRTMwLCBcJ01cJywgXCdceGQ5XHg4MVwnKSxcbiAgICAoMHgxRUUzMSwgXCdNXCcsIFwnXHhkOFx4YjVcJyksXG4gICAgKDB4MUVFMzIsIFwnTVwnLCBcJ1x4ZDlceDgyXCcpLFxuICAgICgweDFFRTMzLCBcJ1hcJyksXG4gICAgXVxuXG5kZWYgX3NlZ183MigpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUVFMzQsIFwnTVwnLCBcJ1x4ZDhceGI0XCcpLFxuICAgICgweDFFRTM1LCBcJ01cJywgXCdceGQ4XHhhYVwnKSxcbiAgICAoMHgxRUUzNiwgXCdNXCcsIFwnXHhkOFx4YWJcJyksXG4gICAgKDB4MUVFMzcsIFwnTVwnLCBcJ1x4ZDhceGFlXCcpLFxuICAgICgweDFFRTM4LCBcJ1hcJyksXG4gICAgKDB4MUVFMzksIFwnTVwnLCBcJ1x4ZDhceGI2XCcpLFxuICAgICgweDFFRTNBLCBcJ1hcJyksXG4gICAgKDB4MUVFM0IsIFwnTVwnLCBcJ1x4ZDhceGJhXCcpLFxuICAgICgweDFFRTNDLCBcJ1hcJyksXG4gICAgKDB4MUVFNDIsIFwnTVwnLCBcJ1x4ZDhceGFjXCcpLFxuICAgICgweDFFRTQzLCBcJ1hcJyksXG4gICAgKDB4MUVFNDcsIFwnTVwnLCBcJ1x4ZDhceGFkXCcpLFxuICAgICgweDFFRTQ4LCBcJ1hcJyksXG4gICAgKDB4MUVFNDksIFwnTVwnLCBcJ1x4ZDlceDhhXCcpLFxuICAgICgweDFFRTRBLCBcJ1hcJyksXG4gICAgKDB4MUVFNEIsIFwnTVwnLCBcJ1x4ZDlceDg0XCcpLFxuICAgICgweDFFRTRDLCBcJ1hcJyksXG4gICAgKDB4MUVFNEQsIFwnTVwnLCBcJ1x4ZDlceDg2XCcpLFxuICAgICgweDFFRTRFLCBcJ01cJywgXCdceGQ4XHhiM1wnKSxcbiAgICAoMHgxRUU0RiwgXCdNXCcsIFwnXHhkOFx4YjlcJyksXG4gICAgKDB4MUVFNTAsIFwnWFwnKSxcbiAgICAoMHgxRUU1MSwgXCdNXCcsIFwnXHhkOFx4YjVcJyksXG4gICAgKDB4MUVFNTIsIFwnTVwnLCBcJ1x4ZDlceDgyXCcpLFxuICAgICgweDFFRTUzLCBcJ1hcJyksXG4gICAgKDB4MUVFNTQsIFwnTVwnLCBcJ1x4ZDhceGI0XCcpLFxuICAgICgweDFFRTU1LCBcJ1hcJyksXG4gICAgKDB4MUVFNTcsIFwnTVwnLCBcJ1x4ZDhceGFlXCcpLFxuICAgICgweDFFRTU4LCBcJ1hcJyksXG4gICAgKDB4MUVFNTksIFwnTVwnLCBcJ1x4ZDhceGI2XCcpLFxuICAgICgweDFFRTVBLCBcJ1hcJyksXG4gICAgKDB4MUVFNUIsIFwnTVwnLCBcJ1x4ZDhceGJhXCcpLFxuICAgICgweDFFRTVDLCBcJ1hcJyksXG4gICAgKDB4MUVFNUQsIFwnTVwnLCBcJ1x4ZGFceGJhXCcpLFxuICAgICgweDFFRTVFLCBcJ1hcJyksXG4gICAgKDB4MUVFNUYsIFwnTVwnLCBcJ1x4ZDlceGFmXCcpLFxuICAgICgweDFFRTYwLCBcJ1hcJyksXG4gICAgKDB4MUVFNjEsIFwnTVwnLCBcJ1x4ZDhceGE4XCcpLFxuICAgICgweDFFRTYyLCBcJ01cJywgXCdceGQ4XHhhY1wnKSxcbiAgICAoMHgxRUU2MywgXCdYXCcpLFxuICAgICgweDFFRTY0LCBcJ01cJywgXCdceGQ5XHg4N1wnKSxcbiAgICAoMHgxRUU2NSwgXCdYXCcpLFxuICAgICgweDFFRTY3LCBcJ01cJywgXCdceGQ4XHhhZFwnKSxcbiAgICAoMHgxRUU2OCwgXCdNXCcsIFwnXHhkOFx4YjdcJyksXG4gICAgKDB4MUVFNjksIFwnTVwnLCBcJ1x4ZDlceDhhXCcpLFxuICAgICgweDFFRTZBLCBcJ01cJywgXCdceGQ5XHg4M1wnKSxcbiAgICAoMHgxRUU2QiwgXCdYXCcpLFxuICAgICgweDFFRTZDLCBcJ01cJywgXCdceGQ5XHg4NVwnKSxcbiAgICAoMHgxRUU2RCwgXCdNXCcsIFwnXHhkOVx4ODZcJyksXG4gICAgKDB4MUVFNkUsIFwnTVwnLCBcJ1x4ZDhceGIzXCcpLFxuICAgICgweDFFRTZGLCBcJ01cJywgXCdceGQ4XHhiOVwnKSxcbiAgICAoMHgxRUU3MCwgXCdNXCcsIFwnXHhkOVx4ODFcJyksXG4gICAgKDB4MUVFNzEsIFwnTVwnLCBcJ1x4ZDhceGI1XCcpLFxuICAgICgweDFFRTcyLCBcJ01cJywgXCdceGQ5XHg4MlwnKSxcbiAgICAoMHgxRUU3MywgXCdYXCcpLFxuICAgICgweDFFRTc0LCBcJ01cJywgXCdceGQ4XHhiNFwnKSxcbiAgICAoMHgxRUU3NSwgXCdNXCcsIFwnXHhkOFx4YWFcJyksXG4gICAgKDB4MUVFNzYsIFwnTVwnLCBcJ1x4ZDhceGFiXCcpLFxuICAgICgweDFFRTc3LCBcJ01cJywgXCdceGQ4XHhhZVwnKSxcbiAgICAoMHgxRUU3OCwgXCdYXCcpLFxuICAgICgweDFFRTc5LCBcJ01cJywgXCdceGQ4XHhiNlwnKSxcbiAgICAoMHgxRUU3QSwgXCdNXCcsIFwnXHhkOFx4YjhcJyksXG4gICAgKDB4MUVFN0IsIFwnTVwnLCBcJ1x4ZDhceGJhXCcpLFxuICAgICgweDFFRTdDLCBcJ01cJywgXCdceGQ5XHhhZVwnKSxcbiAgICAoMHgxRUU3RCwgXCdYXCcpLFxuICAgICgweDFFRTdFLCBcJ01cJywgXCdceGRhXHhhMVwnKSxcbiAgICAoMHgxRUU3RiwgXCdYXCcpLFxuICAgICgweDFFRTgwLCBcJ01cJywgXCdceGQ4XHhhN1wnKSxcbiAgICAoMHgxRUU4MSwgXCdNXCcsIFwnXHhkOFx4YThcJyksXG4gICAgKDB4MUVFODIsIFwnTVwnLCBcJ1x4ZDhceGFjXCcpLFxuICAgICgweDFFRTgzLCBcJ01cJywgXCdceGQ4XHhhZlwnKSxcbiAgICAoMHgxRUU4NCwgXCdNXCcsIFwnXHhkOVx4ODdcJyksXG4gICAgKDB4MUVFODUsIFwnTVwnLCBcJ1x4ZDlceDg4XCcpLFxuICAgICgweDFFRTg2LCBcJ01cJywgXCdceGQ4XHhiMlwnKSxcbiAgICAoMHgxRUU4NywgXCdNXCcsIFwnXHhkOFx4YWRcJyksXG4gICAgKDB4MUVFODgsIFwnTVwnLCBcJ1x4ZDhceGI3XCcpLFxuICAgICgweDFFRTg5LCBcJ01cJywgXCdceGQ5XHg4YVwnKSxcbiAgICAoMHgxRUU4QSwgXCdYXCcpLFxuICAgICgweDFFRThCLCBcJ01cJywgXCdceGQ5XHg4NFwnKSxcbiAgICAoMHgxRUU4QywgXCdNXCcsIFwnXHhkOVx4ODVcJyksXG4gICAgKDB4MUVFOEQsIFwnTVwnLCBcJ1x4ZDlceDg2XCcpLFxuICAgICgweDFFRThFLCBcJ01cJywgXCdceGQ4XHhiM1wnKSxcbiAgICAoMHgxRUU4RiwgXCdNXCcsIFwnXHhkOFx4YjlcJyksXG4gICAgKDB4MUVFOTAsIFwnTVwnLCBcJ1x4ZDlceDgxXCcpLFxuICAgICgweDFFRTkxLCBcJ01cJywgXCdceGQ4XHhiNVwnKSxcbiAgICAoMHgxRUU5MiwgXCdNXCcsIFwnXHhkOVx4ODJcJyksXG4gICAgKDB4MUVFOTMsIFwnTVwnLCBcJ1x4ZDhceGIxXCcpLFxuICAgICgweDFFRTk0LCBcJ01cJywgXCdceGQ4XHhiNFwnKSxcbiAgICAoMHgxRUU5NSwgXCdNXCcsIFwnXHhkOFx4YWFcJyksXG4gICAgKDB4MUVFOTYsIFwnTVwnLCBcJ1x4ZDhceGFiXCcpLFxuICAgICgweDFFRTk3LCBcJ01cJywgXCdceGQ4XHhhZVwnKSxcbiAgICAoMHgxRUU5OCwgXCdNXCcsIFwnXHhkOFx4YjBcJyksXG4gICAgKDB4MUVFOTksIFwnTVwnLCBcJ1x4ZDhceGI2XCcpLFxuICAgICgweDFFRTlBLCBcJ01cJywgXCdceGQ4XHhiOFwnKSxcbiAgICAoMHgxRUU5QiwgXCdNXCcsIFwnXHhkOFx4YmFcJyksXG4gICAgKDB4MUVFOUMsIFwnWFwnKSxcbiAgICAoMHgxRUVBMSwgXCdNXCcsIFwnXHhkOFx4YThcJyksXG4gICAgKDB4MUVFQTIsIFwnTVwnLCBcJ1x4ZDhceGFjXCcpLFxuICAgICgweDFFRUEzLCBcJ01cJywgXCdceGQ4XHhhZlwnKSxcbiAgICAoMHgxRUVBNCwgXCdYXCcpLFxuICAgICgweDFFRUE1LCBcJ01cJywgXCdceGQ5XHg4OFwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzczKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRUVBNiwgXCdNXCcsIFwnXHhkOFx4YjJcJyksXG4gICAgKDB4MUVFQTcsIFwnTVwnLCBcJ1x4ZDhceGFkXCcpLFxuICAgICgweDFFRUE4LCBcJ01cJywgXCdceGQ4XHhiN1wnKSxcbiAgICAoMHgxRUVBOSwgXCdNXCcsIFwnXHhkOVx4OGFcJyksXG4gICAgKDB4MUVFQUEsIFwnWFwnKSxcbiAgICAoMHgxRUVBQiwgXCdNXCcsIFwnXHhkOVx4ODRcJyksXG4gICAgKDB4MUVFQUMsIFwnTVwnLCBcJ1x4ZDlceDg1XCcpLFxuICAgICgweDFFRUFELCBcJ01cJywgXCdceGQ5XHg4NlwnKSxcbiAgICAoMHgxRUVBRSwgXCdNXCcsIFwnXHhkOFx4YjNcJyksXG4gICAgKDB4MUVFQUYsIFwnTVwnLCBcJ1x4ZDhceGI5XCcpLFxuICAgICgweDFFRUIwLCBcJ01cJywgXCdceGQ5XHg4MVwnKSxcbiAgICAoMHgxRUVCMSwgXCdNXCcsIFwnXHhkOFx4YjVcJyksXG4gICAgKDB4MUVFQjIsIFwnTVwnLCBcJ1x4ZDlceDgyXCcpLFxuICAgICgweDFFRUIzLCBcJ01cJywgXCdceGQ4XHhiMVwnKSxcbiAgICAoMHgxRUVCNCwgXCdNXCcsIFwnXHhkOFx4YjRcJyksXG4gICAgKDB4MUVFQjUsIFwnTVwnLCBcJ1x4ZDhceGFhXCcpLFxuICAgICgweDFFRUI2LCBcJ01cJywgXCdceGQ4XHhhYlwnKSxcbiAgICAoMHgxRUVCNywgXCdNXCcsIFwnXHhkOFx4YWVcJyksXG4gICAgKDB4MUVFQjgsIFwnTVwnLCBcJ1x4ZDhceGIwXCcpLFxuICAgICgweDFFRUI5LCBcJ01cJywgXCdceGQ4XHhiNlwnKSxcbiAgICAoMHgxRUVCQSwgXCdNXCcsIFwnXHhkOFx4YjhcJyksXG4gICAgKDB4MUVFQkIsIFwnTVwnLCBcJ1x4ZDhceGJhXCcpLFxuICAgICgweDFFRUJDLCBcJ1hcJyksXG4gICAgKDB4MUVFRjAsIFwnVlwnKSxcbiAgICAoMHgxRUVGMiwgXCdYXCcpLFxuICAgICgweDFGMDAwLCBcJ1ZcJyksXG4gICAgKDB4MUYwMkMsIFwnWFwnKSxcbiAgICAoMHgxRjAzMCwgXCdWXCcpLFxuICAgICgweDFGMDk0LCBcJ1hcJyksXG4gICAgKDB4MUYwQTAsIFwnVlwnKSxcbiAgICAoMHgxRjBBRiwgXCdYXCcpLFxuICAgICgweDFGMEIxLCBcJ1ZcJyksXG4gICAgKDB4MUYwQzAsIFwnWFwnKSxcbiAgICAoMHgxRjBDMSwgXCdWXCcpLFxuICAgICgweDFGMEQwLCBcJ1hcJyksXG4gICAgKDB4MUYwRDEsIFwnVlwnKSxcbiAgICAoMHgxRjBGNiwgXCdYXCcpLFxuICAgICgweDFGMTAxLCBcJzNcJywgXCcwLFwnKSxcbiAgICAoMHgxRjEwMiwgXCczXCcsIFwnMSxcJyksXG4gICAgKDB4MUYxMDMsIFwnM1wnLCBcJzIsXCcpLFxuICAgICgweDFGMTA0LCBcJzNcJywgXCczLFwnKSxcbiAgICAoMHgxRjEwNSwgXCczXCcsIFwnNCxcJyksXG4gICAgKDB4MUYxMDYsIFwnM1wnLCBcJzUsXCcpLFxuICAgICgweDFGMTA3LCBcJzNcJywgXCc2LFwnKSxcbiAgICAoMHgxRjEwOCwgXCczXCcsIFwnNyxcJyksXG4gICAgKDB4MUYxMDksIFwnM1wnLCBcJzgsXCcpLFxuICAgICgweDFGMTBBLCBcJzNcJywgXCc5LFwnKSxcbiAgICAoMHgxRjEwQiwgXCdWXCcpLFxuICAgICgweDFGMTEwLCBcJzNcJywgXCcoYSlcJyksXG4gICAgKDB4MUYxMTEsIFwnM1wnLCBcJyhiKVwnKSxcbiAgICAoMHgxRjExMiwgXCczXCcsIFwnKGMpXCcpLFxuICAgICgweDFGMTEzLCBcJzNcJywgXCcoZClcJyksXG4gICAgKDB4MUYxMTQsIFwnM1wnLCBcJyhlKVwnKSxcbiAgICAoMHgxRjExNSwgXCczXCcsIFwnKGYpXCcpLFxuICAgICgweDFGMTE2LCBcJzNcJywgXCcoZylcJyksXG4gICAgKDB4MUYxMTcsIFwnM1wnLCBcJyhoKVwnKSxcbiAgICAoMHgxRjExOCwgXCczXCcsIFwnKGkpXCcpLFxuICAgICgweDFGMTE5LCBcJzNcJywgXCcoailcJyksXG4gICAgKDB4MUYxMUEsIFwnM1wnLCBcJyhrKVwnKSxcbiAgICAoMHgxRjExQiwgXCczXCcsIFwnKGwpXCcpLFxuICAgICgweDFGMTFDLCBcJzNcJywgXCcobSlcJyksXG4gICAgKDB4MUYxMUQsIFwnM1wnLCBcJyhuKVwnKSxcbiAgICAoMHgxRjExRSwgXCczXCcsIFwnKG8pXCcpLFxuICAgICgweDFGMTFGLCBcJzNcJywgXCcocClcJyksXG4gICAgKDB4MUYxMjAsIFwnM1wnLCBcJyhxKVwnKSxcbiAgICAoMHgxRjEyMSwgXCczXCcsIFwnKHIpXCcpLFxuICAgICgweDFGMTIyLCBcJzNcJywgXCcocylcJyksXG4gICAgKDB4MUYxMjMsIFwnM1wnLCBcJyh0KVwnKSxcbiAgICAoMHgxRjEyNCwgXCczXCcsIFwnKHUpXCcpLFxuICAgICgweDFGMTI1LCBcJzNcJywgXCcodilcJyksXG4gICAgKDB4MUYxMjYsIFwnM1wnLCBcJyh3KVwnKSxcbiAgICAoMHgxRjEyNywgXCczXCcsIFwnKHgpXCcpLFxuICAgICgweDFGMTI4LCBcJzNcJywgXCcoeSlcJyksXG4gICAgKDB4MUYxMjksIFwnM1wnLCBcJyh6KVwnKSxcbiAgICAoMHgxRjEyQSwgXCdNXCcsIFwnXHhlM1x4ODBceDk0c1x4ZTNceDgwXHg5NVwnKSxcbiAgICAoMHgxRjEyQiwgXCdNXCcsIFwnY1wnKSxcbiAgICAoMHgxRjEyQywgXCdNXCcsIFwnclwnKSxcbiAgICAoMHgxRjEyRCwgXCdNXCcsIFwnY2RcJyksXG4gICAgKDB4MUYxMkUsIFwnTVwnLCBcJ3d6XCcpLFxuICAgICgweDFGMTJGLCBcJ1ZcJyksXG4gICAgKDB4MUYxMzAsIFwnTVwnLCBcJ2FcJyksXG4gICAgKDB4MUYxMzEsIFwnTVwnLCBcJ2JcJyksXG4gICAgKDB4MUYxMzIsIFwnTVwnLCBcJ2NcJyksXG4gICAgKDB4MUYxMzMsIFwnTVwnLCBcJ2RcJyksXG4gICAgKDB4MUYxMzQsIFwnTVwnLCBcJ2VcJyksXG4gICAgKDB4MUYxMzUsIFwnTVwnLCBcJ2ZcJyksXG4gICAgKDB4MUYxMzYsIFwnTVwnLCBcJ2dcJyksXG4gICAgKDB4MUYxMzcsIFwnTVwnLCBcJ2hcJyksXG4gICAgKDB4MUYxMzgsIFwnTVwnLCBcJ2lcJyksXG4gICAgKDB4MUYxMzksIFwnTVwnLCBcJ2pcJyksXG4gICAgKDB4MUYxM0EsIFwnTVwnLCBcJ2tcJyksXG4gICAgKDB4MUYxM0IsIFwnTVwnLCBcJ2xcJyksXG4gICAgKDB4MUYxM0MsIFwnTVwnLCBcJ21cJyksXG4gICAgKDB4MUYxM0QsIFwnTVwnLCBcJ25cJyksXG4gICAgKDB4MUYxM0UsIFwnTVwnLCBcJ29cJyksXG4gICAgKDB4MUYxM0YsIFwnTVwnLCBcJ3BcJyksXG4gICAgKDB4MUYxNDAsIFwnTVwnLCBcJ3FcJyksXG4gICAgKDB4MUYxNDEsIFwnTVwnLCBcJ3JcJyksXG4gICAgKDB4MUYxNDIsIFwnTVwnLCBcJ3NcJyksXG4gICAgKDB4MUYxNDMsIFwnTVwnLCBcJ3RcJyksXG4gICAgXVxuXG5kZWYgX3NlZ183NCgpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MUYxNDQsIFwnTVwnLCBcJ3VcJyksXG4gICAgKDB4MUYxNDUsIFwnTVwnLCBcJ3ZcJyksXG4gICAgKDB4MUYxNDYsIFwnTVwnLCBcJ3dcJyksXG4gICAgKDB4MUYxNDcsIFwnTVwnLCBcJ3hcJyksXG4gICAgKDB4MUYxNDgsIFwnTVwnLCBcJ3lcJyksXG4gICAgKDB4MUYxNDksIFwnTVwnLCBcJ3pcJyksXG4gICAgKDB4MUYxNEEsIFwnTVwnLCBcJ2h2XCcpLFxuICAgICgweDFGMTRCLCBcJ01cJywgXCdtdlwnKSxcbiAgICAoMHgxRjE0QywgXCdNXCcsIFwnc2RcJyksXG4gICAgKDB4MUYxNEQsIFwnTVwnLCBcJ3NzXCcpLFxuICAgICgweDFGMTRFLCBcJ01cJywgXCdwcHZcJyksXG4gICAgKDB4MUYxNEYsIFwnTVwnLCBcJ3djXCcpLFxuICAgICgweDFGMTUwLCBcJ1ZcJyksXG4gICAgKDB4MUYxNkEsIFwnTVwnLCBcJ21jXCcpLFxuICAgICgweDFGMTZCLCBcJ01cJywgXCdtZFwnKSxcbiAgICAoMHgxRjE2QywgXCdNXCcsIFwnbXJcJyksXG4gICAgKDB4MUYxNkQsIFwnVlwnKSxcbiAgICAoMHgxRjE5MCwgXCdNXCcsIFwnZGpcJyksXG4gICAgKDB4MUYxOTEsIFwnVlwnKSxcbiAgICAoMHgxRjFBRSwgXCdYXCcpLFxuICAgICgweDFGMUU2LCBcJ1ZcJyksXG4gICAgKDB4MUYyMDAsIFwnTVwnLCBcJ1x4ZTNceDgxXHhiYlx4ZTNceDgxXHg4YlwnKSxcbiAgICAoMHgxRjIwMSwgXCdNXCcsIFwnXHhlM1x4ODJceGIzXHhlM1x4ODJceGIzXCcpLFxuICAgICgweDFGMjAyLCBcJ01cJywgXCdceGUzXHg4Mlx4YjVcJyksXG4gICAgKDB4MUYyMDMsIFwnWFwnKSxcbiAgICAoMHgxRjIxMCwgXCdNXCcsIFwnXHhlNlx4ODlceDhiXCcpLFxuICAgICgweDFGMjExLCBcJ01cJywgXCdceGU1XHhhZFx4OTdcJyksXG4gICAgKDB4MUYyMTIsIFwnTVwnLCBcJ1x4ZTVceDhmXHg4Y1wnKSxcbiAgICAoMHgxRjIxMywgXCdNXCcsIFwnXHhlM1x4ODNceDg3XCcpLFxuICAgICgweDFGMjE0LCBcJ01cJywgXCdceGU0XHhiYVx4OGNcJyksXG4gICAgKDB4MUYyMTUsIFwnTVwnLCBcJ1x4ZTVceGE0XHg5YVwnKSxcbiAgICAoMHgxRjIxNiwgXCdNXCcsIFwnXHhlOFx4YTdceGEzXCcpLFxuICAgICgweDFGMjE3LCBcJ01cJywgXCdceGU1XHhhNFx4YTlcJyksXG4gICAgKDB4MUYyMTgsIFwnTVwnLCBcJ1x4ZTRceGJhXHhhNFwnKSxcbiAgICAoMHgxRjIxOSwgXCdNXCcsIFwnXHhlNlx4OThceGEwXCcpLFxuICAgICgweDFGMjFBLCBcJ01cJywgXCdceGU3XHg4NFx4YTFcJyksXG4gICAgKDB4MUYyMUIsIFwnTVwnLCBcJ1x4ZTZceDk2XHg5OVwnKSxcbiAgICAoMHgxRjIxQywgXCdNXCcsIFwnXHhlNVx4ODlceDhkXCcpLFxuICAgICgweDFGMjFELCBcJ01cJywgXCdceGU1XHhiZVx4OGNcJyksXG4gICAgKDB4MUYyMUUsIFwnTVwnLCBcJ1x4ZTVceDg2XHg4ZFwnKSxcbiAgICAoMHgxRjIxRiwgXCdNXCcsIFwnXHhlNlx4OTZceGIwXCcpLFxuICAgICgweDFGMjIwLCBcJ01cJywgXCdceGU1XHg4OFx4OWRcJyksXG4gICAgKDB4MUYyMjEsIFwnTVwnLCBcJ1x4ZTdceGI1XHg4MlwnKSxcbiAgICAoMHgxRjIyMiwgXCdNXCcsIFwnXHhlN1x4OTRceDlmXCcpLFxuICAgICgweDFGMjIzLCBcJ01cJywgXCdceGU4XHhiMlx4YTlcJyksXG4gICAgKDB4MUYyMjQsIFwnTVwnLCBcJ1x4ZTVceGEzXHhiMFwnKSxcbiAgICAoMHgxRjIyNSwgXCdNXCcsIFwnXHhlNVx4OTBceGI5XCcpLFxuICAgICgweDFGMjI2LCBcJ01cJywgXCdceGU2XHhiY1x4OTRcJyksXG4gICAgKDB4MUYyMjcsIFwnTVwnLCBcJ1x4ZTZceDhhXHg5NVwnKSxcbiAgICAoMHgxRjIyOCwgXCdNXCcsIFwnXHhlNlx4OGRceDk1XCcpLFxuICAgICgweDFGMjI5LCBcJ01cJywgXCdceGU0XHhiOFx4ODBcJyksXG4gICAgKDB4MUYyMkEsIFwnTVwnLCBcJ1x4ZTRceGI4XHg4OVwnKSxcbiAgICAoMHgxRjIyQiwgXCdNXCcsIFwnXHhlOVx4ODFceDhhXCcpLFxuICAgICgweDFGMjJDLCBcJ01cJywgXCdceGU1XHhiN1x4YTZcJyksXG4gICAgKDB4MUYyMkQsIFwnTVwnLCBcJ1x4ZTRceGI4XHhhZFwnKSxcbiAgICAoMHgxRjIyRSwgXCdNXCcsIFwnXHhlNVx4OGZceGIzXCcpLFxuICAgICgweDFGMjJGLCBcJ01cJywgXCdceGU2XHg4Y1x4ODdcJyksXG4gICAgKDB4MUYyMzAsIFwnTVwnLCBcJ1x4ZThceGI1XHhiMFwnKSxcbiAgICAoMHgxRjIzMSwgXCdNXCcsIFwnXHhlNlx4ODlceDkzXCcpLFxuICAgICgweDFGMjMyLCBcJ01cJywgXCdceGU3XHhhNlx4ODFcJyksXG4gICAgKDB4MUYyMzMsIFwnTVwnLCBcJ1x4ZTdceGE5XHhiYVwnKSxcbiAgICAoMHgxRjIzNCwgXCdNXCcsIFwnXHhlNVx4OTBceDg4XCcpLFxuICAgICgweDFGMjM1LCBcJ01cJywgXCdceGU2XHhiYVx4ODBcJyksXG4gICAgKDB4MUYyMzYsIFwnTVwnLCBcJ1x4ZTZceDljXHg4OVwnKSxcbiAgICAoMHgxRjIzNywgXCdNXCcsIFwnXHhlNlx4OWNceDg4XCcpLFxuICAgICgweDFGMjM4LCBcJ01cJywgXCdceGU3XHg5NFx4YjNcJyksXG4gICAgKDB4MUYyMzksIFwnTVwnLCBcJ1x4ZTVceDg5XHhiMlwnKSxcbiAgICAoMHgxRjIzQSwgXCdNXCcsIFwnXHhlNVx4OTZceGI2XCcpLFxuICAgICgweDFGMjNCLCBcJ01cJywgXCdceGU5XHg4NVx4OGRcJyksXG4gICAgKDB4MUYyM0MsIFwnWFwnKSxcbiAgICAoMHgxRjI0MCwgXCdNXCcsIFwnXHhlM1x4ODBceDk0XHhlNlx4OWNceGFjXHhlM1x4ODBceDk1XCcpLFxuICAgICgweDFGMjQxLCBcJ01cJywgXCdceGUzXHg4MFx4OTRceGU0XHhiOFx4ODlceGUzXHg4MFx4OTVcJyksXG4gICAgKDB4MUYyNDIsIFwnTVwnLCBcJ1x4ZTNceDgwXHg5NFx4ZTRceGJhXHg4Y1x4ZTNceDgwXHg5NVwnKSxcbiAgICAoMHgxRjI0MywgXCdNXCcsIFwnXHhlM1x4ODBceDk0XHhlNVx4YWVceDg5XHhlM1x4ODBceDk1XCcpLFxuICAgICgweDFGMjQ0LCBcJ01cJywgXCdceGUzXHg4MFx4OTRceGU3XHg4Mlx4YjlceGUzXHg4MFx4OTVcJyksXG4gICAgKDB4MUYyNDUsIFwnTVwnLCBcJ1x4ZTNceDgwXHg5NFx4ZTZceDg5XHg5M1x4ZTNceDgwXHg5NVwnKSxcbiAgICAoMHgxRjI0NiwgXCdNXCcsIFwnXHhlM1x4ODBceDk0XHhlN1x4OWJceDk3XHhlM1x4ODBceDk1XCcpLFxuICAgICgweDFGMjQ3LCBcJ01cJywgXCdceGUzXHg4MFx4OTRceGU1XHg4Ylx4OWRceGUzXHg4MFx4OTVcJyksXG4gICAgKDB4MUYyNDgsIFwnTVwnLCBcJ1x4ZTNceDgwXHg5NFx4ZTZceDk1XHg5N1x4ZTNceDgwXHg5NVwnKSxcbiAgICAoMHgxRjI0OSwgXCdYXCcpLFxuICAgICgweDFGMjUwLCBcJ01cJywgXCdceGU1XHhiZVx4OTdcJyksXG4gICAgKDB4MUYyNTEsIFwnTVwnLCBcJ1x4ZTVceDhmXHhhZlwnKSxcbiAgICAoMHgxRjI1MiwgXCdYXCcpLFxuICAgICgweDFGMjYwLCBcJ1ZcJyksXG4gICAgKDB4MUYyNjYsIFwnWFwnKSxcbiAgICAoMHgxRjMwMCwgXCdWXCcpLFxuICAgICgweDFGNkQ4LCBcJ1hcJyksXG4gICAgKDB4MUY2REQsIFwnVlwnKSxcbiAgICAoMHgxRjZFRCwgXCdYXCcpLFxuICAgICgweDFGNkYwLCBcJ1ZcJyksXG4gICAgKDB4MUY2RkQsIFwnWFwnKSxcbiAgICAoMHgxRjcwMCwgXCdWXCcpLFxuICAgICgweDFGNzc0LCBcJ1hcJyksXG4gICAgKDB4MUY3ODAsIFwnVlwnKSxcbiAgICAoMHgxRjdEOSwgXCdYXCcpLFxuICAgICgweDFGN0UwLCBcJ1ZcJyksXG4gICAgKDB4MUY3RUMsIFwnWFwnKSxcbiAgICAoMHgxRjdGMCwgXCdWXCcpLFxuICAgICgweDFGN0YxLCBcJ1hcJyksXG4gICAgKDB4MUY4MDAsIFwnVlwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzc1KCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgxRjgwQywgXCdYXCcpLFxuICAgICgweDFGODEwLCBcJ1ZcJyksXG4gICAgKDB4MUY4NDgsIFwnWFwnKSxcbiAgICAoMHgxRjg1MCwgXCdWXCcpLFxuICAgICgweDFGODVBLCBcJ1hcJyksXG4gICAgKDB4MUY4NjAsIFwnVlwnKSxcbiAgICAoMHgxRjg4OCwgXCdYXCcpLFxuICAgICgweDFGODkwLCBcJ1ZcJyksXG4gICAgKDB4MUY4QUUsIFwnWFwnKSxcbiAgICAoMHgxRjhCMCwgXCdWXCcpLFxuICAgICgweDFGOEIyLCBcJ1hcJyksXG4gICAgKDB4MUY5MDAsIFwnVlwnKSxcbiAgICAoMHgxRkE1NCwgXCdYXCcpLFxuICAgICgweDFGQTYwLCBcJ1ZcJyksXG4gICAgKDB4MUZBNkUsIFwnWFwnKSxcbiAgICAoMHgxRkE3MCwgXCdWXCcpLFxuICAgICgweDFGQTc1LCBcJ1hcJyksXG4gICAgKDB4MUZBNzgsIFwnVlwnKSxcbiAgICAoMHgxRkE3RCwgXCdYXCcpLFxuICAgICgweDFGQTgwLCBcJ1ZcJyksXG4gICAgKDB4MUZBODcsIFwnWFwnKSxcbiAgICAoMHgxRkE5MCwgXCdWXCcpLFxuICAgICgweDFGQUFELCBcJ1hcJyksXG4gICAgKDB4MUZBQjAsIFwnVlwnKSxcbiAgICAoMHgxRkFCQiwgXCdYXCcpLFxuICAgICgweDFGQUMwLCBcJ1ZcJyksXG4gICAgKDB4MUZBQzYsIFwnWFwnKSxcbiAgICAoMHgxRkFEMCwgXCdWXCcpLFxuICAgICgweDFGQURBLCBcJ1hcJyksXG4gICAgKDB4MUZBRTAsIFwnVlwnKSxcbiAgICAoMHgxRkFFOCwgXCdYXCcpLFxuICAgICgweDFGQUYwLCBcJ1ZcJyksXG4gICAgKDB4MUZBRjcsIFwnWFwnKSxcbiAgICAoMHgxRkIwMCwgXCdWXCcpLFxuICAgICgweDFGQjkzLCBcJ1hcJyksXG4gICAgKDB4MUZCOTQsIFwnVlwnKSxcbiAgICAoMHgxRkJDQiwgXCdYXCcpLFxuICAgICgweDFGQkYwLCBcJ01cJywgXCcwXCcpLFxuICAgICgweDFGQkYxLCBcJ01cJywgXCcxXCcpLFxuICAgICgweDFGQkYyLCBcJ01cJywgXCcyXCcpLFxuICAgICgweDFGQkYzLCBcJ01cJywgXCczXCcpLFxuICAgICgweDFGQkY0LCBcJ01cJywgXCc0XCcpLFxuICAgICgweDFGQkY1LCBcJ01cJywgXCc1XCcpLFxuICAgICgweDFGQkY2LCBcJ01cJywgXCc2XCcpLFxuICAgICgweDFGQkY3LCBcJ01cJywgXCc3XCcpLFxuICAgICgweDFGQkY4LCBcJ01cJywgXCc4XCcpLFxuICAgICgweDFGQkY5LCBcJ01cJywgXCc5XCcpLFxuICAgICgweDFGQkZBLCBcJ1hcJyksXG4gICAgKDB4MjAwMDAsIFwnVlwnKSxcbiAgICAoMHgyQTZFMCwgXCdYXCcpLFxuICAgICgweDJBNzAwLCBcJ1ZcJyksXG4gICAgKDB4MkI3MzksIFwnWFwnKSxcbiAgICAoMHgyQjc0MCwgXCdWXCcpLFxuICAgICgweDJCODFFLCBcJ1hcJyksXG4gICAgKDB4MkI4MjAsIFwnVlwnKSxcbiAgICAoMHgyQ0VBMiwgXCdYXCcpLFxuICAgICgweDJDRUIwLCBcJ1ZcJyksXG4gICAgKDB4MkVCRTEsIFwnWFwnKSxcbiAgICAoMHgyRjgwMCwgXCdNXCcsIFwnXHhlNFx4YjhceGJkXCcpLFxuICAgICgweDJGODAxLCBcJ01cJywgXCdceGU0XHhiOFx4YjhcJyksXG4gICAgKDB4MkY4MDIsIFwnTVwnLCBcJ1x4ZTRceGI5XHg4MVwnKSxcbiAgICAoMHgyRjgwMywgXCdNXCcsIFwnXHhmMFx4YTBceDg0XHhhMlwnKSxcbiAgICAoMHgyRjgwNCwgXCdNXCcsIFwnXHhlNFx4YmRceGEwXCcpLFxuICAgICgweDJGODA1LCBcJ01cJywgXCdceGU0XHhiZVx4YWVcJyksXG4gICAgKDB4MkY4MDYsIFwnTVwnLCBcJ1x4ZTRceGJlXHhiYlwnKSxcbiAgICAoMHgyRjgwNywgXCdNXCcsIFwnXHhlNVx4ODBceDgyXCcpLFxuICAgICgweDJGODA4LCBcJ01cJywgXCdceGU1XHg4MVx4YmFcJyksXG4gICAgKDB4MkY4MDksIFwnTVwnLCBcJ1x4ZTVceDgyXHg5OVwnKSxcbiAgICAoMHgyRjgwQSwgXCdNXCcsIFwnXHhlNVx4ODNceGE3XCcpLFxuICAgICgweDJGODBCLCBcJ01cJywgXCdceGU1XHg4M1x4OGZcJyksXG4gICAgKDB4MkY4MEMsIFwnTVwnLCBcJ1x4ZTNceDkyXHg5ZVwnKSxcbiAgICAoMHgyRjgwRCwgXCdNXCcsIFwnXHhmMFx4YTBceDk4XHhiYVwnKSxcbiAgICAoMHgyRjgwRSwgXCdNXCcsIFwnXHhlNVx4ODVceDhkXCcpLFxuICAgICgweDJGODBGLCBcJ01cJywgXCdceGU1XHg4NVx4OTRcJyksXG4gICAgKDB4MkY4MTAsIFwnTVwnLCBcJ1x4ZTVceDg1XHhhNFwnKSxcbiAgICAoMHgyRjgxMSwgXCdNXCcsIFwnXHhlNVx4ODVceGI3XCcpLFxuICAgICgweDJGODEyLCBcJ01cJywgXCdceGYwXHhhMFx4OTRceDljXCcpLFxuICAgICgweDJGODEzLCBcJ01cJywgXCdceGUzXHg5Mlx4YjlcJyksXG4gICAgKDB4MkY4MTQsIFwnTVwnLCBcJ1x4ZTVceDg1XHhhN1wnKSxcbiAgICAoMHgyRjgxNSwgXCdNXCcsIFwnXHhlNVx4ODZceDhkXCcpLFxuICAgICgweDJGODE2LCBcJ01cJywgXCdceGYwXHhhMFx4OTVceDhiXCcpLFxuICAgICgweDJGODE3LCBcJ01cJywgXCdceGU1XHg4Nlx4OTdcJyksXG4gICAgKDB4MkY4MTgsIFwnTVwnLCBcJ1x4ZTVceDg2XHhhNFwnKSxcbiAgICAoMHgyRjgxOSwgXCdNXCcsIFwnXHhlNFx4YmJceDhjXCcpLFxuICAgICgweDJGODFBLCBcJ01cJywgXCdceGU1XHg4Nlx4YWNcJyksXG4gICAgKDB4MkY4MUIsIFwnTVwnLCBcJ1x4ZTVceDg2XHhiNVwnKSxcbiAgICAoMHgyRjgxQywgXCdNXCcsIFwnXHhmMFx4YTlceDg3XHg5ZlwnKSxcbiAgICAoMHgyRjgxRCwgXCdNXCcsIFwnXHhlNVx4ODdceGI1XCcpLFxuICAgICgweDJGODFFLCBcJ01cJywgXCdceGU1XHg4OFx4ODNcJyksXG4gICAgKDB4MkY4MUYsIFwnTVwnLCBcJ1x4ZTNceDkzXHg5ZlwnKSxcbiAgICAoMHgyRjgyMCwgXCdNXCcsIFwnXHhlNVx4ODhceGJiXCcpLFxuICAgICgweDJGODIxLCBcJ01cJywgXCdceGU1XHg4OVx4ODZcJyksXG4gICAgKDB4MkY4MjIsIFwnTVwnLCBcJ1x4ZTVceDg5XHhiMlwnKSxcbiAgICAoMHgyRjgyMywgXCdNXCcsIFwnXHhlNVx4ODlceGI3XCcpLFxuICAgICgweDJGODI0LCBcJ01cJywgXCdceGUzXHg5NFx4OTVcJyksXG4gICAgKDB4MkY4MjUsIFwnTVwnLCBcJ1x4ZTVceDhiXHg4N1wnKSxcbiAgICAoMHgyRjgyNiwgXCdNXCcsIFwnXHhlNVx4OGJceDg5XCcpLFxuICAgICgweDJGODI3LCBcJ01cJywgXCdceGU1XHg4Ylx4YTRcJyksXG4gICAgKDB4MkY4MjgsIFwnTVwnLCBcJ1x4ZTVceDhiXHhiYVwnKSxcbiAgICAoMHgyRjgyOSwgXCdNXCcsIFwnXHhlNVx4OGNceDg1XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNzYoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDJGODJBLCBcJ01cJywgXCdceGU1XHg4Y1x4ODZcJyksXG4gICAgKDB4MkY4MkIsIFwnTVwnLCBcJ1x4ZTVceDhjXHg5N1wnKSxcbiAgICAoMHgyRjgyQywgXCdNXCcsIFwnXHhlNVx4OGRceDg5XCcpLFxuICAgICgweDJGODJELCBcJ01cJywgXCdceGU1XHg4ZFx4OTFcJyksXG4gICAgKDB4MkY4MkUsIFwnTVwnLCBcJ1x4ZTVceDhkXHg5YVwnKSxcbiAgICAoMHgyRjgyRiwgXCdNXCcsIFwnXHhlNVx4OGRceGIzXCcpLFxuICAgICgweDJGODMwLCBcJ01cJywgXCdceGU1XHg4ZFx4YmRcJyksXG4gICAgKDB4MkY4MzEsIFwnTVwnLCBcJ1x4ZTVceDhkXHhiZlwnKSxcbiAgICAoMHgyRjgzNCwgXCdNXCcsIFwnXHhmMFx4YTBceGE4XHhhY1wnKSxcbiAgICAoMHgyRjgzNSwgXCdNXCcsIFwnXHhlN1x4ODFceGIwXCcpLFxuICAgICgweDJGODM2LCBcJ01cJywgXCdceGU1XHg4Zlx4OGFcJyksXG4gICAgKDB4MkY4MzcsIFwnTVwnLCBcJ1x4ZTVceDhmXHg5ZlwnKSxcbiAgICAoMHgyRjgzOCwgXCdNXCcsIFwnXHhmMFx4YTBceGFkXHhhM1wnKSxcbiAgICAoMHgyRjgzOSwgXCdNXCcsIFwnXHhlNVx4OGZceGFiXCcpLFxuICAgICgweDJGODNBLCBcJ01cJywgXCdceGU1XHg4Zlx4YjFcJyksXG4gICAgKDB4MkY4M0IsIFwnTVwnLCBcJ1x4ZTVceDkwXHg4NlwnKSxcbiAgICAoMHgyRjgzQywgXCdNXCcsIFwnXHhlNVx4OTJceDllXCcpLFxuICAgICgweDJGODNELCBcJ01cJywgXCdceGU1XHg5MFx4YjhcJyksXG4gICAgKDB4MkY4M0UsIFwnTVwnLCBcJ1x4ZTVceDkxXHg4OFwnKSxcbiAgICAoMHgyRjgzRiwgXCdNXCcsIFwnXHhlNVx4OTFceGE4XCcpLFxuICAgICgweDJGODQwLCBcJ01cJywgXCdceGU1XHg5Mlx4YTJcJyksXG4gICAgKDB4MkY4NDEsIFwnTVwnLCBcJ1x4ZTVceDkzXHhiNlwnKSxcbiAgICAoMHgyRjg0MiwgXCdNXCcsIFwnXHhlNVx4OTRceDkwXCcpLFxuICAgICgweDJGODQzLCBcJ01cJywgXCdceGU1XHg5NVx4OTNcJyksXG4gICAgKDB4MkY4NDQsIFwnTVwnLCBcJ1x4ZTVceDk1XHhhM1wnKSxcbiAgICAoMHgyRjg0NSwgXCdNXCcsIFwnXHhlNVx4OTZceDg0XCcpLFxuICAgICgweDJGODQ3LCBcJ01cJywgXCdceGU1XHg5Nlx4OTlcJyksXG4gICAgKDB4MkY4NDgsIFwnTVwnLCBcJ1x4ZTVceDk2XHhhYlwnKSxcbiAgICAoMHgyRjg0OSwgXCdNXCcsIFwnXHhlNVx4OTZceGIzXCcpLFxuICAgICgweDJGODRBLCBcJ01cJywgXCdceGU1XHg5N1x4ODJcJyksXG4gICAgKDB4MkY4NEIsIFwnTVwnLCBcJ1x4ZTVceDljXHg5NlwnKSxcbiAgICAoMHgyRjg0QywgXCdNXCcsIFwnXHhlNVx4OThceDg2XCcpLFxuICAgICgweDJGODRELCBcJ01cJywgXCdceGU1XHg5Y1x4OTdcJyksXG4gICAgKDB4MkY4NEUsIFwnTVwnLCBcJ1x4ZTVceDk5XHg5MVwnKSxcbiAgICAoMHgyRjg0RiwgXCdNXCcsIFwnXHhlNVx4OTlceGI0XCcpLFxuICAgICgweDJGODUwLCBcJ01cJywgXCdceGU1XHg4OFx4ODdcJyksXG4gICAgKDB4MkY4NTEsIFwnTVwnLCBcJ1x4ZTVceGEzXHhhZVwnKSxcbiAgICAoMHgyRjg1MiwgXCdNXCcsIFwnXHhlNVx4OWZceDhlXCcpLFxuICAgICgweDJGODUzLCBcJ01cJywgXCdceGU1XHg5Zlx4YjRcJyksXG4gICAgKDB4MkY4NTQsIFwnTVwnLCBcJ1x4ZTVceGEwXHg4ZFwnKSxcbiAgICAoMHgyRjg1NSwgXCdNXCcsIFwnXHhlNVx4OWVceDhiXCcpLFxuICAgICgweDJGODU2LCBcJ01cJywgXCdceGU1XHhhMFx4YjJcJyksXG4gICAgKDB4MkY4NTcsIFwnTVwnLCBcJ1x4ZTVceGEwXHhiMVwnKSxcbiAgICAoMHgyRjg1OCwgXCdNXCcsIFwnXHhlNVx4YTJceGFjXCcpLFxuICAgICgweDJGODU5LCBcJ01cJywgXCdceGYwXHhhMVx4OTNceGE0XCcpLFxuICAgICgweDJGODVBLCBcJ01cJywgXCdceGU1XHhhM1x4YjJcJyksXG4gICAgKDB4MkY4NUIsIFwnTVwnLCBcJ1x4ZTVceGEzXHhiN1wnKSxcbiAgICAoMHgyRjg1QywgXCdNXCcsIFwnXHhlNVx4YTRceDg2XCcpLFxuICAgICgweDJGODVELCBcJ01cJywgXCdceGU1XHhhNFx4OWFcJyksXG4gICAgKDB4MkY4NUUsIFwnTVwnLCBcJ1x4ZTVceGE0XHhhMlwnKSxcbiAgICAoMHgyRjg1RiwgXCdNXCcsIFwnXHhlNVx4YTVceGEyXCcpLFxuICAgICgweDJGODYwLCBcJ01cJywgXCdceGYwXHhhMVx4OWFceGE4XCcpLFxuICAgICgweDJGODYxLCBcJ01cJywgXCdceGYwXHhhMVx4OWJceGFhXCcpLFxuICAgICgweDJGODYyLCBcJ01cJywgXCdceGU1XHhhN1x4YWNcJyksXG4gICAgKDB4MkY4NjMsIFwnTVwnLCBcJ1x4ZTVceGE4XHg5YlwnKSxcbiAgICAoMHgyRjg2NCwgXCdNXCcsIFwnXHhlNVx4YThceGE3XCcpLFxuICAgICgweDJGODY1LCBcJ01cJywgXCdceGU1XHhhN1x4OThcJyksXG4gICAgKDB4MkY4NjYsIFwnTVwnLCBcJ1x4ZTVceGE5XHhhNlwnKSxcbiAgICAoMHgyRjg2NywgXCdNXCcsIFwnXHhlM1x4OWJceGFlXCcpLFxuICAgICgweDJGODY4LCBcJ1hcJyksXG4gICAgKDB4MkY4NjksIFwnTVwnLCBcJ1x4ZTVceGFjXHg4OFwnKSxcbiAgICAoMHgyRjg2QSwgXCdNXCcsIFwnXHhlNVx4YWNceGJlXCcpLFxuICAgICgweDJGODZDLCBcJ01cJywgXCdceGYwXHhhMVx4YTdceDg4XCcpLFxuICAgICgweDJGODZELCBcJ01cJywgXCdceGU1XHhhZlx4ODNcJyksXG4gICAgKDB4MkY4NkUsIFwnTVwnLCBcJ1x4ZTVceGFmXHg5OFwnKSxcbiAgICAoMHgyRjg2RiwgXCdNXCcsIFwnXHhlNVx4YWZceGE3XCcpLFxuICAgICgweDJGODcwLCBcJ01cJywgXCdceGU1XHhhZlx4YjNcJyksXG4gICAgKDB4MkY4NzEsIFwnTVwnLCBcJ1x4ZjBceGExXHhhY1x4OThcJyksXG4gICAgKDB4MkY4NzIsIFwnTVwnLCBcJ1x4ZTVceGFmXHhiZlwnKSxcbiAgICAoMHgyRjg3MywgXCdNXCcsIFwnXHhlNVx4YjBceDg2XCcpLFxuICAgICgweDJGODc0LCBcJ1hcJyksXG4gICAgKDB4MkY4NzUsIFwnTVwnLCBcJ1x4ZTVceGIwXHhhMlwnKSxcbiAgICAoMHgyRjg3NiwgXCdNXCcsIFwnXHhlM1x4OWVceDgxXCcpLFxuICAgICgweDJGODc3LCBcJ01cJywgXCdceGU1XHhiMVx4YTBcJyksXG4gICAgKDB4MkY4NzgsIFwnTVwnLCBcJ1x4ZTVceGIxXHhhZVwnKSxcbiAgICAoMHgyRjg3OSwgXCdNXCcsIFwnXHhlNVx4YjNceDgwXCcpLFxuICAgICgweDJGODdBLCBcJ01cJywgXCdceGU1XHhiMlx4OGRcJyksXG4gICAgKDB4MkY4N0IsIFwnTVwnLCBcJ1x4ZjBceGExXHhiN1x4YTRcJyksXG4gICAgKDB4MkY4N0MsIFwnTVwnLCBcJ1x4ZTVceGI1XHg4M1wnKSxcbiAgICAoMHgyRjg3RCwgXCdNXCcsIFwnXHhmMFx4YTFceGI3XHhhNlwnKSxcbiAgICAoMHgyRjg3RSwgXCdNXCcsIFwnXHhlNVx4YjVceGFlXCcpLFxuICAgICgweDJGODdGLCBcJ01cJywgXCdceGU1XHhiNVx4YWJcJyksXG4gICAgKDB4MkY4ODAsIFwnTVwnLCBcJ1x4ZTVceGI1XHhiY1wnKSxcbiAgICAoMHgyRjg4MSwgXCdNXCcsIFwnXHhlNVx4YjdceGExXCcpLFxuICAgICgweDJGODgyLCBcJ01cJywgXCdceGU1XHhiN1x4YTJcJyksXG4gICAgKDB4MkY4ODMsIFwnTVwnLCBcJ1x4ZTNceGEwXHhhZlwnKSxcbiAgICAoMHgyRjg4NCwgXCdNXCcsIFwnXHhlNVx4YjdceGJkXCcpLFxuICAgICgweDJGODg1LCBcJ01cJywgXCdceGU1XHhiOFx4YThcJyksXG4gICAgKDB4MkY4ODYsIFwnTVwnLCBcJ1x4ZTVceGI4XHhiZFwnKSxcbiAgICAoMHgyRjg4NywgXCdNXCcsIFwnXHhlNVx4YjlceGE5XCcpLFxuICAgICgweDJGODg4LCBcJ01cJywgXCdceGUzXHhhMVx4YTJcJyksXG4gICAgKDB4MkY4ODksIFwnTVwnLCBcJ1x4ZjBceGEyXHg4Nlx4ODNcJyksXG4gICAgKDB4MkY4OEEsIFwnTVwnLCBcJ1x4ZTNceGExXHhiY1wnKSxcbiAgICAoMHgyRjg4QiwgXCdNXCcsIFwnXHhlNVx4YmFceGIwXCcpLFxuICAgICgweDJGODhDLCBcJ01cJywgXCdceGU1XHhiYVx4YjNcJyksXG4gICAgKDB4MkY4OEQsIFwnTVwnLCBcJ1x4ZTVceGJhXHhiNlwnKSxcbiAgICAoMHgyRjg4RSwgXCdNXCcsIFwnXHhlNVx4YmJceDhhXCcpLFxuICAgICgweDJGODhGLCBcJ01cJywgXCdceGYwXHhhYVx4OGVceDkyXCcpLFxuICAgICgweDJGODkwLCBcJ01cJywgXCdceGU1XHhiYlx4YmVcJyksXG4gICAgKDB4MkY4OTEsIFwnTVwnLCBcJ1x4ZjBceGEyXHg4Y1x4YjFcJyksXG4gICAgXVxuXG5kZWYgX3NlZ183NygpIC0+IExpc3RbVW5pb25bVHVwbGVbaW50LCBzdHJdLCBUdXBsZVtpbnQsIHN0ciwgc3RyXV1dOlxuICAgIHJldHVybiBbXG4gICAgKDB4MkY4OTMsIFwnTVwnLCBcJ1x4ZThceDg4XHg4MVwnKSxcbiAgICAoMHgyRjg5NCwgXCdNXCcsIFwnXHhlNVx4YmNceGEyXCcpLFxuICAgICgweDJGODk2LCBcJ01cJywgXCdceGUzXHhhM1x4ODdcJyksXG4gICAgKDB4MkY4OTcsIFwnTVwnLCBcJ1x4ZjBceGEzXHg4YVx4YjhcJyksXG4gICAgKDB4MkY4OTgsIFwnTVwnLCBcJ1x4ZjBceGE2XHg4N1x4OWFcJyksXG4gICAgKDB4MkY4OTksIFwnTVwnLCBcJ1x4ZTVceGJkXHhhMlwnKSxcbiAgICAoMHgyRjg5QSwgXCdNXCcsIFwnXHhlNVx4YmRceGFiXCcpLFxuICAgICgweDJGODlCLCBcJ01cJywgXCdceGUzXHhhM1x4YTNcJyksXG4gICAgKDB4MkY4OUMsIFwnTVwnLCBcJ1x4ZTVceGJlXHg5YVwnKSxcbiAgICAoMHgyRjg5RCwgXCdNXCcsIFwnXHhlNVx4YmZceDhkXCcpLFxuICAgICgweDJGODlFLCBcJ01cJywgXCdceGU1XHhiZlx4OTdcJyksXG4gICAgKDB4MkY4OUYsIFwnTVwnLCBcJ1x4ZTVceGJmXHhiOVwnKSxcbiAgICAoMHgyRjhBMCwgXCdNXCcsIFwnXHhlNlx4ODJceDgxXCcpLFxuICAgICgweDJGOEExLCBcJ01cJywgXCdceGUzXHhhNFx4YmFcJyksXG4gICAgKDB4MkY4QTIsIFwnTVwnLCBcJ1x4ZTNceGE0XHg5Y1wnKSxcbiAgICAoMHgyRjhBMywgXCdNXCcsIFwnXHhlNlx4ODJceDk0XCcpLFxuICAgICgweDJGOEE0LCBcJ01cJywgXCdceGYwXHhhMlx4OWJceDk0XCcpLFxuICAgICgweDJGOEE1LCBcJ01cJywgXCdceGU2XHg4M1x4ODdcJyksXG4gICAgKDB4MkY4QTYsIFwnTVwnLCBcJ1x4ZTZceDg1XHg4OFwnKSxcbiAgICAoMHgyRjhBNywgXCdNXCcsIFwnXHhlNlx4ODVceDhjXCcpLFxuICAgICgweDJGOEE4LCBcJ01cJywgXCdceGU2XHg4NVx4OGVcJyksXG4gICAgKDB4MkY4QTksIFwnTVwnLCBcJ1x4ZTZceDg1XHg4Y1wnKSxcbiAgICAoMHgyRjhBQSwgXCdNXCcsIFwnXHhlNlx4ODVceGJhXCcpLFxuICAgICgweDJGOEFCLCBcJ01cJywgXCdceGU2XHg4Nlx4OGVcJyksXG4gICAgKDB4MkY4QUMsIFwnTVwnLCBcJ1x4ZTZceDg2XHhiMlwnKSxcbiAgICAoMHgyRjhBRCwgXCdNXCcsIFwnXHhlNlx4ODZceGE0XCcpLFxuICAgICgweDJGOEFFLCBcJ01cJywgXCdceGU2XHg4Nlx4YWZcJyksXG4gICAgKDB4MkY4QUYsIFwnTVwnLCBcJ1x4ZTZceDg3XHg5ZVwnKSxcbiAgICAoMHgyRjhCMCwgXCdNXCcsIFwnXHhlNlx4ODdceGIyXCcpLFxuICAgICgweDJGOEIxLCBcJ01cJywgXCdceGU2XHg4N1x4YjZcJyksXG4gICAgKDB4MkY4QjIsIFwnTVwnLCBcJ1x4ZTZceDg4XHg5MFwnKSxcbiAgICAoMHgyRjhCMywgXCdNXCcsIFwnXHhlNlx4ODhceDliXCcpLFxuICAgICgweDJGOEI0LCBcJ01cJywgXCdceGU2XHg4OVx4OWRcJyksXG4gICAgKDB4MkY4QjUsIFwnTVwnLCBcJ1x4ZTZceDhhXHhiMVwnKSxcbiAgICAoMHgyRjhCNiwgXCdNXCcsIFwnXHhlNlx4OGJceDk0XCcpLFxuICAgICgweDJGOEI3LCBcJ01cJywgXCdceGU2XHg4ZFx4OTBcJyksXG4gICAgKDB4MkY4QjgsIFwnTVwnLCBcJ1x4ZjBceGEyXHhhY1x4OGNcJyksXG4gICAgKDB4MkY4QjksIFwnTVwnLCBcJ1x4ZTZceDhjXHhiZFwnKSxcbiAgICAoMHgyRjhCQSwgXCdNXCcsIFwnXHhlNlx4OGJceGJjXCcpLFxuICAgICgweDJGOEJCLCBcJ01cJywgXCdceGU2XHg4ZFx4YThcJyksXG4gICAgKDB4MkY4QkMsIFwnTVwnLCBcJ1x4ZTZceDhlXHg4M1wnKSxcbiAgICAoMHgyRjhCRCwgXCdNXCcsIFwnXHhlNlx4OGZceGE0XCcpLFxuICAgICgweDJGOEJFLCBcJ01cJywgXCdceGYwXHhhMlx4YWZceGIxXCcpLFxuICAgICgweDJGOEJGLCBcJ01cJywgXCdceGU2XHg5MFx4YTJcJyksXG4gICAgKDB4MkY4QzAsIFwnTVwnLCBcJ1x4ZTZceDhmXHg4NVwnKSxcbiAgICAoMHgyRjhDMSwgXCdNXCcsIFwnXHhlNlx4OGVceGE5XCcpLFxuICAgICgweDJGOEMyLCBcJ01cJywgXCdceGUzXHhhOFx4YWVcJyksXG4gICAgKDB4MkY4QzMsIFwnTVwnLCBcJ1x4ZTZceDkxXHhhOVwnKSxcbiAgICAoMHgyRjhDNCwgXCdNXCcsIFwnXHhlNlx4OTFceGJlXCcpLFxuICAgICgweDJGOEM1LCBcJ01cJywgXCdceGU2XHg5Mlx4OWRcJyksXG4gICAgKDB4MkY4QzYsIFwnTVwnLCBcJ1x4ZTZceDkxXHhiN1wnKSxcbiAgICAoMHgyRjhDNywgXCdNXCcsIFwnXHhlM1x4YTlceGFjXCcpLFxuICAgICgweDJGOEM4LCBcJ01cJywgXCdceGU2XHg5NVx4OGZcJyksXG4gICAgKDB4MkY4QzksIFwnTVwnLCBcJ1x4ZTZceDk1XHhhY1wnKSxcbiAgICAoMHgyRjhDQSwgXCdNXCcsIFwnXHhmMFx4YTNceDgwXHg4YVwnKSxcbiAgICAoMHgyRjhDQiwgXCdNXCcsIFwnXHhlNlx4OTdceGEzXCcpLFxuICAgICgweDJGOENDLCBcJ01cJywgXCdceGU2XHg5Ylx4YjhcJyksXG4gICAgKDB4MkY4Q0QsIFwnTVwnLCBcJ1x4ZTZceDk5XHg4OVwnKSxcbiAgICAoMHgyRjhDRSwgXCdNXCcsIFwnXHhlM1x4YWNceDk5XCcpLFxuICAgICgweDJGOENGLCBcJ01cJywgXCdceGU2XHg5YVx4OTFcJyksXG4gICAgKDB4MkY4RDAsIFwnTVwnLCBcJ1x4ZTNceGFjXHg4OFwnKSxcbiAgICAoMHgyRjhEMSwgXCdNXCcsIFwnXHhlM1x4YWJceGE0XCcpLFxuICAgICgweDJGOEQyLCBcJ01cJywgXCdceGU1XHg4Nlx4OTJcJyksXG4gICAgKDB4MkY4RDMsIFwnTVwnLCBcJ1x4ZTVceDg2XHg5NVwnKSxcbiAgICAoMHgyRjhENCwgXCdNXCcsIFwnXHhlNlx4OWNceDgwXCcpLFxuICAgICgweDJGOEQ1LCBcJ01cJywgXCdceGU2XHg5YVx4OWNcJyksXG4gICAgKDB4MkY4RDYsIFwnTVwnLCBcJ1x4ZThceDgyXHhhZFwnKSxcbiAgICAoMHgyRjhENywgXCdNXCcsIFwnXHhlNFx4OGZceDk5XCcpLFxuICAgICgweDJGOEQ4LCBcJ01cJywgXCdceGU2XHg5Y1x4OTdcJyksXG4gICAgKDB4MkY4RDksIFwnTVwnLCBcJ1x4ZTZceDljXHg5YlwnKSxcbiAgICAoMHgyRjhEQSwgXCdNXCcsIFwnXHhlNlx4OWNceGExXCcpLFxuICAgICgweDJGOERCLCBcJ01cJywgXCdceGU2XHg5ZFx4OWVcJyksXG4gICAgKDB4MkY4REMsIFwnTVwnLCBcJ1x4ZTZceDlkXHg5M1wnKSxcbiAgICAoMHgyRjhERCwgXCdNXCcsIFwnXHhmMFx4YTNceDhmXHg4M1wnKSxcbiAgICAoMHgyRjhERSwgXCdNXCcsIFwnXHhlM1x4YWRceDg5XCcpLFxuICAgICgweDJGOERGLCBcJ01cJywgXCdceGU2XHg5Zlx4YmFcJyksXG4gICAgKDB4MkY4RTAsIFwnTVwnLCBcJ1x4ZTZceDllXHg4NVwnKSxcbiAgICAoMHgyRjhFMSwgXCdNXCcsIFwnXHhlNlx4YTFceDkyXCcpLFxuICAgICgweDJGOEUyLCBcJ01cJywgXCdceGU2XHhhMlx4ODVcJyksXG4gICAgKDB4MkY4RTMsIFwnTVwnLCBcJ1x4ZjBceGEzXHg5MVx4YWRcJyksXG4gICAgKDB4MkY4RTQsIFwnTVwnLCBcJ1x4ZTZceGEyXHg4ZVwnKSxcbiAgICAoMHgyRjhFNSwgXCdNXCcsIFwnXHhlNlx4YTBceDlmXCcpLFxuICAgICgweDJGOEU2LCBcJ01cJywgXCdceGU2XHhhNFx4OTRcJyksXG4gICAgKDB4MkY4RTcsIFwnTVwnLCBcJ1x4ZTNceGFlXHg5ZFwnKSxcbiAgICAoMHgyRjhFOCwgXCdNXCcsIFwnXHhlNlx4YTVceDgyXCcpLFxuICAgICgweDJGOEU5LCBcJ01cJywgXCdceGU2XHhhNlx4YTNcJyksXG4gICAgKDB4MkY4RUEsIFwnTVwnLCBcJ1x4ZTZceGE3XHhhYVwnKSxcbiAgICAoMHgyRjhFQiwgXCdNXCcsIFwnXHhlNlx4YWFceGE4XCcpLFxuICAgICgweDJGOEVDLCBcJ01cJywgXCdceGYwXHhhM1x4OWFceGEzXCcpLFxuICAgICgweDJGOEVELCBcJ01cJywgXCdceGU2XHhhYlx4OWJcJyksXG4gICAgKDB4MkY4RUUsIFwnTVwnLCBcJ1x4ZTNceGIwXHg5OFwnKSxcbiAgICAoMHgyRjhFRiwgXCdNXCcsIFwnXHhlNlx4YWNceGExXCcpLFxuICAgICgweDJGOEYwLCBcJ01cJywgXCdceGYwXHhhM1x4YTJceGE3XCcpLFxuICAgICgweDJGOEYxLCBcJ01cJywgXCdceGU2XHhhZFx4OTRcJyksXG4gICAgKDB4MkY4RjIsIFwnTVwnLCBcJ1x4ZTNceGIxXHg4ZVwnKSxcbiAgICAoMHgyRjhGMywgXCdNXCcsIFwnXHhlNlx4YWRceGIyXCcpLFxuICAgICgweDJGOEY0LCBcJ01cJywgXCdceGU2XHhhZVx4OWZcJyksXG4gICAgKDB4MkY4RjUsIFwnTVwnLCBcJ1x4ZTZceGFlXHhiYVwnKSxcbiAgICAoMHgyRjhGNiwgXCdNXCcsIFwnXHhlNlx4YWVceGJiXCcpLFxuICAgICgweDJGOEY3LCBcJ01cJywgXCdceGYwXHhhM1x4YWFceDhkXCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNzgoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDJGOEY4LCBcJ01cJywgXCdceGYwXHhhMVx4YjRceDhiXCcpLFxuICAgICgweDJGOEY5LCBcJ01cJywgXCdceGYwXHhhM1x4YWJceGJhXCcpLFxuICAgICgweDJGOEZBLCBcJ01cJywgXCdceGU2XHhiMVx4OGVcJyksXG4gICAgKDB4MkY4RkIsIFwnTVwnLCBcJ1x4ZjBceGEzXHhiMlx4YmNcJyksXG4gICAgKDB4MkY4RkMsIFwnTVwnLCBcJ1x4ZTZceGIyXHhiZlwnKSxcbiAgICAoMHgyRjhGRCwgXCdNXCcsIFwnXHhlNlx4YjNceDhkXCcpLFxuICAgICgweDJGOEZFLCBcJ01cJywgXCdceGU2XHhiMVx4YTdcJyksXG4gICAgKDB4MkY4RkYsIFwnTVwnLCBcJ1x4ZTZceGI0XHg5NlwnKSxcbiAgICAoMHgyRjkwMCwgXCdNXCcsIFwnXHhlNlx4YjRceGJlXCcpLFxuICAgICgweDJGOTAxLCBcJ01cJywgXCdceGU2XHhiNVx4YjdcJyksXG4gICAgKDB4MkY5MDIsIFwnTVwnLCBcJ1x4ZTZceGI1XHg4MVwnKSxcbiAgICAoMHgyRjkwMywgXCdNXCcsIFwnXHhlNlx4YjVceGE5XCcpLFxuICAgICgweDJGOTA0LCBcJ01cJywgXCdceGU2XHhiNVx4YjhcJyksXG4gICAgKDB4MkY5MDUsIFwnTVwnLCBcJ1x4ZTZceGI2XHg4NVwnKSxcbiAgICAoMHgyRjkwNiwgXCdNXCcsIFwnXHhmMFx4YTNceGI0XHg5ZVwnKSxcbiAgICAoMHgyRjkwNywgXCdNXCcsIFwnXHhlNlx4YjRceGI0XCcpLFxuICAgICgweDJGOTA4LCBcJ01cJywgXCdceGU2XHhiOFx4YWZcJyksXG4gICAgKDB4MkY5MDksIFwnTVwnLCBcJ1x4ZTZceGI5XHhhZVwnKSxcbiAgICAoMHgyRjkwQSwgXCdNXCcsIFwnXHhlM1x4YjRceGIzXCcpLFxuICAgICgweDJGOTBCLCBcJ01cJywgXCdceGU2XHhiYlx4OGJcJyksXG4gICAgKDB4MkY5MEMsIFwnTVwnLCBcJ1x4ZTZceGJiXHg4N1wnKSxcbiAgICAoMHgyRjkwRCwgXCdNXCcsIFwnXHhmMFx4YTNceGJiXHg5MVwnKSxcbiAgICAoMHgyRjkwRSwgXCdNXCcsIFwnXHhlNlx4YjdceGI5XCcpLFxuICAgICgweDJGOTBGLCBcJ01cJywgXCdceGU2XHhiZFx4YWVcJyksXG4gICAgKDB4MkY5MTAsIFwnTVwnLCBcJ1x4ZjBceGEzXHhiZFx4OWVcJyksXG4gICAgKDB4MkY5MTEsIFwnTVwnLCBcJ1x4ZjBceGEzXHhiZVx4OGVcJyksXG4gICAgKDB4MkY5MTIsIFwnTVwnLCBcJ1x4ZTZceGJmXHg4NlwnKSxcbiAgICAoMHgyRjkxMywgXCdNXCcsIFwnXHhlN1x4ODBceGI5XCcpLFxuICAgICgweDJGOTE0LCBcJ01cJywgXCdceGU3XHg4MFx4OWVcJyksXG4gICAgKDB4MkY5MTUsIFwnTVwnLCBcJ1x4ZTdceDgwXHg5YlwnKSxcbiAgICAoMHgyRjkxNiwgXCdNXCcsIFwnXHhlM1x4YjZceDk2XCcpLFxuICAgICgweDJGOTE3LCBcJ01cJywgXCdceGU3XHg4MVx4OGFcJyksXG4gICAgKDB4MkY5MTgsIFwnTVwnLCBcJ1x4ZTdceDgxXHhiZFwnKSxcbiAgICAoMHgyRjkxOSwgXCdNXCcsIFwnXHhlN1x4ODFceGI3XCcpLFxuICAgICgweDJGOTFBLCBcJ01cJywgXCdceGU3XHg4Mlx4YWRcJyksXG4gICAgKDB4MkY5MUIsIFwnTVwnLCBcJ1x4ZjBceGEwXHg5NFx4YTVcJyksXG4gICAgKDB4MkY5MUMsIFwnTVwnLCBcJ1x4ZTdceDg1XHg4NVwnKSxcbiAgICAoMHgyRjkxRCwgXCdNXCcsIFwnXHhmMFx4YTRceDg5XHhhM1wnKSxcbiAgICAoMHgyRjkxRSwgXCdNXCcsIFwnXHhlN1x4ODZceDljXCcpLFxuICAgICgweDJGOTFGLCBcJ1hcJyksXG4gICAgKDB4MkY5MjAsIFwnTVwnLCBcJ1x4ZTdceDg4XHhhOFwnKSxcbiAgICAoMHgyRjkyMSwgXCdNXCcsIFwnXHhlN1x4ODhceGI1XCcpLFxuICAgICgweDJGOTIyLCBcJ01cJywgXCdceGU3XHg4OVx4OTBcJyksXG4gICAgKDB4MkY5MjMsIFwnTVwnLCBcJ1x4ZjBceGE0XHg5OFx4ODhcJyksXG4gICAgKDB4MkY5MjQsIFwnTVwnLCBcJ1x4ZTdceDhhXHg4MFwnKSxcbiAgICAoMHgyRjkyNSwgXCdNXCcsIFwnXHhlN1x4OGFceDk1XCcpLFxuICAgICgweDJGOTI2LCBcJ01cJywgXCdceGYwXHhhNFx4OWNceGI1XCcpLFxuICAgICgweDJGOTI3LCBcJ01cJywgXCdceGYwXHhhNFx4YTBceDk0XCcpLFxuICAgICgweDJGOTI4LCBcJ01cJywgXCdceGU3XHg4ZFx4YmFcJyksXG4gICAgKDB4MkY5MjksIFwnTVwnLCBcJ1x4ZTdceDhlXHg4YlwnKSxcbiAgICAoMHgyRjkyQSwgXCdNXCcsIFwnXHhlM1x4YmFceGFjXCcpLFxuICAgICgweDJGOTJCLCBcJ01cJywgXCdceGU3XHg4ZVx4YTVcJyksXG4gICAgKDB4MkY5MkMsIFwnTVwnLCBcJ1x4ZTNceGJhXHhiOFwnKSxcbiAgICAoMHgyRjkyRSwgXCdNXCcsIFwnXHhlN1x4OTFceDg3XCcpLFxuICAgICgweDJGOTJGLCBcJ01cJywgXCdceGU3XHg5MVx4OWNcJyksXG4gICAgKDB4MkY5MzAsIFwnTVwnLCBcJ1x4ZTdceDkxXHhiMVwnKSxcbiAgICAoMHgyRjkzMSwgXCdNXCcsIFwnXHhlN1x4OTJceDg1XCcpLFxuICAgICgweDJGOTMyLCBcJ01cJywgXCdceGU3XHg5M1x4OGFcJyksXG4gICAgKDB4MkY5MzMsIFwnTVwnLCBcJ1x4ZTNceGJjXHg5YlwnKSxcbiAgICAoMHgyRjkzNCwgXCdNXCcsIFwnXHhlN1x4OTRceGE0XCcpLFxuICAgICgweDJGOTM1LCBcJ01cJywgXCdceGYwXHhhNFx4YjBceGI2XCcpLFxuICAgICgweDJGOTM2LCBcJ01cJywgXCdceGU3XHg5NFx4YmVcJyksXG4gICAgKDB4MkY5MzcsIFwnTVwnLCBcJ1x4ZjBceGE0XHhiMlx4OTJcJyksXG4gICAgKDB4MkY5MzgsIFwnTVwnLCBcJ1x4ZTdceDk1XHhiMFwnKSxcbiAgICAoMHgyRjkzOSwgXCdNXCcsIFwnXHhmMFx4YTJceDg2XHg5ZlwnKSxcbiAgICAoMHgyRjkzQSwgXCdNXCcsIFwnXHhlN1x4OThceDkwXCcpLFxuICAgICgweDJGOTNCLCBcJ01cJywgXCdceGYwXHhhNFx4YmVceGExXCcpLFxuICAgICgweDJGOTNDLCBcJ01cJywgXCdceGYwXHhhNFx4YmVceGI4XCcpLFxuICAgICgweDJGOTNELCBcJ01cJywgXCdceGYwXHhhNVx4ODFceDg0XCcpLFxuICAgICgweDJGOTNFLCBcJ01cJywgXCdceGUzXHhiZlx4YmNcJyksXG4gICAgKDB4MkY5M0YsIFwnTVwnLCBcJ1x4ZTRceDgwXHg4OFwnKSxcbiAgICAoMHgyRjk0MCwgXCdNXCcsIFwnXHhlN1x4OWJceGI0XCcpLFxuICAgICgweDJGOTQxLCBcJ01cJywgXCdceGYwXHhhNVx4ODNceGIzXCcpLFxuICAgICgweDJGOTQyLCBcJ01cJywgXCdceGYwXHhhNVx4ODNceGIyXCcpLFxuICAgICgweDJGOTQzLCBcJ01cJywgXCdceGYwXHhhNVx4ODRceDk5XCcpLFxuICAgICgweDJGOTQ0LCBcJ01cJywgXCdceGYwXHhhNVx4ODRceGIzXCcpLFxuICAgICgweDJGOTQ1LCBcJ01cJywgXCdceGU3XHg5Y1x4OWVcJyksXG4gICAgKDB4MkY5NDYsIFwnTVwnLCBcJ1x4ZTdceDljXHg5ZlwnKSxcbiAgICAoMHgyRjk0OCwgXCdNXCcsIFwnXHhlN1x4OWRceDhhXCcpLFxuICAgICgweDJGOTQ5LCBcJ01cJywgXCdceGU0XHg4MFx4YjlcJyksXG4gICAgKDB4MkY5NEEsIFwnTVwnLCBcJ1x4ZTdceDllXHg4YlwnKSxcbiAgICAoMHgyRjk0QiwgXCdNXCcsIFwnXHhlNFx4ODFceDg2XCcpLFxuICAgICgweDJGOTRDLCBcJ01cJywgXCdceGU0XHg4Mlx4OTZcJyksXG4gICAgKDB4MkY5NEQsIFwnTVwnLCBcJ1x4ZjBceGE1XHg5MFx4OWRcJyksXG4gICAgKDB4MkY5NEUsIFwnTVwnLCBcJ1x4ZTdceGExXHg4ZVwnKSxcbiAgICAoMHgyRjk0RiwgXCdNXCcsIFwnXHhlN1x4YTJceDhjXCcpLFxuICAgICgweDJGOTUwLCBcJ01cJywgXCdceGU3XHhhM1x4OGNcJyksXG4gICAgKDB4MkY5NTEsIFwnTVwnLCBcJ1x4ZTRceDgzXHhhM1wnKSxcbiAgICAoMHgyRjk1MiwgXCdNXCcsIFwnXHhmMFx4YTVceDk4XHhhNlwnKSxcbiAgICAoMHgyRjk1MywgXCdNXCcsIFwnXHhlN1x4YTVceDk2XCcpLFxuICAgICgweDJGOTU0LCBcJ01cJywgXCdceGYwXHhhNVx4OWFceDlhXCcpLFxuICAgICgweDJGOTU1LCBcJ01cJywgXCdceGYwXHhhNVx4OWJceDg1XCcpLFxuICAgICgweDJGOTU2LCBcJ01cJywgXCdceGU3XHhhNlx4OGZcJyksXG4gICAgKDB4MkY5NTcsIFwnTVwnLCBcJ1x4ZTdceGE3XHhhYlwnKSxcbiAgICAoMHgyRjk1OCwgXCdNXCcsIFwnXHhlNFx4ODRceGFmXCcpLFxuICAgICgweDJGOTU5LCBcJ01cJywgXCdceGU3XHhhOVx4ODBcJyksXG4gICAgKDB4MkY5NUEsIFwnTVwnLCBcJ1x4ZTdceGE5XHg4YVwnKSxcbiAgICAoMHgyRjk1QiwgXCdNXCcsIFwnXHhlN1x4YTlceDhmXCcpLFxuICAgICgweDJGOTVDLCBcJ01cJywgXCdceGYwXHhhNVx4YTVceGJjXCcpLFxuICAgICgweDJGOTVELCBcJ01cJywgXCdceGYwXHhhNVx4YWFceGE3XCcpLFxuICAgIF1cblxuZGVmIF9zZWdfNzkoKSAtPiBMaXN0W1VuaW9uW1R1cGxlW2ludCwgc3RyXSwgVHVwbGVbaW50LCBzdHIsIHN0cl1dXTpcbiAgICByZXR1cm4gW1xuICAgICgweDJGOTVGLCBcJ1hcJyksXG4gICAgKDB4MkY5NjAsIFwnTVwnLCBcJ1x4ZTRceDg4XHg4MlwnKSxcbiAgICAoMHgyRjk2MSwgXCdNXCcsIFwnXHhmMFx4YTVceGFlXHhhYlwnKSxcbiAgICAoMHgyRjk2MiwgXCdNXCcsIFwnXHhlN1x4YWZceDg2XCcpLFxuICAgICgweDJGOTYzLCBcJ01cJywgXCdceGU3XHhhZlx4ODlcJyksXG4gICAgKDB4MkY5NjQsIFwnTVwnLCBcJ1x4ZTRceDg4XHhhN1wnKSxcbiAgICAoMHgyRjk2NSwgXCdNXCcsIFwnXHhmMFx4YTVceGIyXHg4MFwnKSxcbiAgICAoMHgyRjk2NiwgXCdNXCcsIFwnXHhlN1x4YjNceDkyXCcpLFxuICAgICgweDJGOTY3LCBcJ01cJywgXCdceGU0XHg4YVx4YTBcJyksXG4gICAgKDB4MkY5NjgsIFwnTVwnLCBcJ1x4ZTdceGIzXHhhOFwnKSxcbiAgICAoMHgyRjk2OSwgXCdNXCcsIFwnXHhlN1x4YjNceGEzXCcpLFxuICAgICgweDJGOTZBLCBcJ01cJywgXCdceGU3XHhiNFx4ODBcJyksXG4gICAgKDB4MkY5NkIsIFwnTVwnLCBcJ1x4ZjBceGE1XHhiZVx4ODZcJyksXG4gICAgKDB4MkY5NkMsIFwnTVwnLCBcJ1x4ZTdceGI1XHhhM1wnKSxcbiAgICAoMHgyRjk2RCwgXCdNXCcsIFwnXHhlNFx4OGNceDgxXCcpLFxuICAgICgweDJGOTZFLCBcJ01cJywgXCdceGU3XHhiN1x4ODdcJyksXG4gICAgKDB4MkY5NkYsIFwnTVwnLCBcJ1x4ZTdceGI4XHg4MlwnKSxcbiAgICAoMHgyRjk3MCwgXCdNXCcsIFwnXHhlN1x4YjlceDg1XCcpLFxuICAgICgweDJGOTcxLCBcJ01cJywgXCdceGU0XHg4Y1x4YjRcJyksXG4gICAgKDB4MkY5NzIsIFwnTVwnLCBcJ1x4ZjBceGE2XHg4OFx4YThcJyksXG4gICAgKDB4MkY5NzMsIFwnTVwnLCBcJ1x4ZjBceGE2XHg4OVx4ODdcJyksXG4gICAgKDB4MkY5NzQsIFwnTVwnLCBcJ1x4ZTRceDhkXHg5OVwnKSxcbiAgICAoMHgyRjk3NSwgXCdNXCcsIFwnXHhmMFx4YTZceDhiXHg5OVwnKSxcbiAgICAoMHgyRjk3NiwgXCdNXCcsIFwnXHhlN1x4YmRceGJhXCcpLFxuICAgICgweDJGOTc3LCBcJ01cJywgXCdceGYwXHhhNlx4OGNceGJlXCcpLFxuICAgICgweDJGOTc4LCBcJ01cJywgXCdceGU3XHhiZVx4OTVcJyksXG4gICAgKDB4MkY5NzksIFwnTVwnLCBcJ1x4ZTdceGJmXHhiYVwnKSxcbiAgICAoMHgyRjk3QSwgXCdNXCcsIFwnXHhlOFx4ODBceDg1XCcpLFxuICAgICgweDJGOTdCLCBcJ01cJywgXCdceGYwXHhhNlx4OTNceDlhXCcpLFxuICAgICgweDJGOTdDLCBcJ01cJywgXCdceGYwXHhhNlx4OTRceGEzXCcpLFxuICAgICgweDJGOTdELCBcJ01cJywgXCdceGU4XHg4MVx4YTBcJyksXG4gICAgKDB4MkY5N0UsIFwnTVwnLCBcJ1x4ZjBceGE2XHg5Nlx4YThcJyksXG4gICAgKDB4MkY5N0YsIFwnTVwnLCBcJ1x4ZThceDgxXHhiMFwnKSxcbiAgICAoMHgyRjk4MCwgXCdNXCcsIFwnXHhmMFx4YTNceDhkXHg5ZlwnKSxcbiAgICAoMHgyRjk4MSwgXCdNXCcsIFwnXHhlNFx4OGZceDk1XCcpLFxuICAgICgweDJGOTgyLCBcJ01cJywgXCdceGU4XHg4Mlx4YjJcJyksXG4gICAgKDB4MkY5ODMsIFwnTVwnLCBcJ1x4ZThceDg0XHg4M1wnKSxcbiAgICAoMHgyRjk4NCwgXCdNXCcsIFwnXHhlNFx4OTBceDhiXCcpLFxuICAgICgweDJGOTg1LCBcJ01cJywgXCdceGU4XHg4NFx4YmVcJyksXG4gICAgKDB4MkY5ODYsIFwnTVwnLCBcJ1x4ZTVceGFhXHhiNVwnKSxcbiAgICAoMHgyRjk4NywgXCdNXCcsIFwnXHhmMFx4YTZceDllXHhhN1wnKSxcbiAgICAoMHgyRjk4OCwgXCdNXCcsIFwnXHhmMFx4YTZceDllXHhiNVwnKSxcbiAgICAoMHgyRjk4OSwgXCdNXCcsIFwnXHhmMFx4YTNceDhlXHg5M1wnKSxcbiAgICAoMHgyRjk4QSwgXCdNXCcsIFwnXHhmMFx4YTNceDhlXHg5Y1wnKSxcbiAgICAoMHgyRjk4QiwgXCdNXCcsIFwnXHhlOFx4ODhceDgxXCcpLFxuICAgICgweDJGOThDLCBcJ01cJywgXCdceGU4XHg4OFx4ODRcJyksXG4gICAgKDB4MkY5OEQsIFwnTVwnLCBcJ1x4ZThceGJlXHg5ZVwnKSxcbiAgICAoMHgyRjk4RSwgXCdNXCcsIFwnXHhlNFx4OTFceGFiXCcpLFxuICAgICgweDJGOThGLCBcJ01cJywgXCdceGU4XHg4YVx4OTFcJyksXG4gICAgKDB4MkY5OTAsIFwnTVwnLCBcJ1x4ZThceDhhXHg4YlwnKSxcbiAgICAoMHgyRjk5MSwgXCdNXCcsIFwnXHhlOFx4OGFceDlkXCcpLFxuICAgICgweDJGOTkyLCBcJ01cJywgXCdceGU1XHg4YVx4YjNcJyksXG4gICAgKDB4MkY5OTMsIFwnTVwnLCBcJ1x4ZThceDhhXHhiMVwnKSxcbiAgICAoMHgyRjk5NCwgXCdNXCcsIFwnXHhlOFx4OGFceGIzXCcpLFxuICAgICgweDJGOTk1LCBcJ01cJywgXCdceGU4XHg4YVx4YmRcJyksXG4gICAgKDB4MkY5OTYsIFwnTVwnLCBcJ1x4ZThceDhiXHhhNlwnKSxcbiAgICAoMHgyRjk5NywgXCdNXCcsIFwnXHhmMFx4YTZceGFjXHhiY1wnKSxcbiAgICAoMHgyRjk5OCwgXCdNXCcsIFwnXHhlOFx4OGJceGE1XCcpLFxuICAgICgweDJGOTk5LCBcJ01cJywgXCdceGU4XHg4Y1x4OWRcJyksXG4gICAgKDB4MkY5OUEsIFwnTVwnLCBcJ1x4ZThceDhkXHhhM1wnKSxcbiAgICAoMHgyRjk5QiwgXCdNXCcsIFwnXHhlOFx4OGVceGFkXCcpLFxuICAgICgweDJGOTlDLCBcJ01cJywgXCdceGU4XHg4Y1x4YTNcJyksXG4gICAgKDB4MkY5OUQsIFwnTVwnLCBcJ1x4ZThceDhlXHhiZFwnKSxcbiAgICAoMHgyRjk5RSwgXCdNXCcsIFwnXHhlOFx4OGZceGE3XCcpLFxuICAgICgweDJGOTlGLCBcJ01cJywgXCdceGU4XHg5MVx4OTdcJyksXG4gICAgKDB4MkY5QTAsIFwnTVwnLCBcJ1x4ZThceDhkXHg5M1wnKSxcbiAgICAoMHgyRjlBMSwgXCdNXCcsIFwnXHhlOFx4OGZceDhhXCcpLFxuICAgICgweDJGOUEyLCBcJ01cJywgXCdceGU4XHg4Zlx4OGNcJyksXG4gICAgKDB4MkY5QTMsIFwnTVwnLCBcJ1x4ZThceDhmXHg5Y1wnKSxcbiAgICAoMHgyRjlBNCwgXCdNXCcsIFwnXHhmMFx4YTZceGIwXHhiNlwnKSxcbiAgICAoMHgyRjlBNSwgXCdNXCcsIFwnXHhmMFx4YTZceGI1XHhhYlwnKSxcbiAgICAoMHgyRjlBNiwgXCdNXCcsIFwnXHhmMFx4YTZceGIzXHg5NVwnKSxcbiAgICAoMHgyRjlBNywgXCdNXCcsIFwnXHhlNFx4OTRceGFiXCcpLFxuICAgICgweDJGOUE4LCBcJ01cJywgXCdceGU4XHg5M1x4YjFcJyksXG4gICAgKDB4MkY5QTksIFwnTVwnLCBcJ1x4ZThceDkzXHhiM1wnKSxcbiAgICAoMHgyRjlBQSwgXCdNXCcsIFwnXHhlOFx4OTRceDk2XCcpLFxuICAgICgweDJGOUFCLCBcJ01cJywgXCdceGYwXHhhN1x4OGZceDhhXCcpLFxuICAgICgweDJGOUFDLCBcJ01cJywgXCdceGU4XHg5NVx4YTRcJyksXG4gICAgKDB4MkY5QUQsIFwnTVwnLCBcJ1x4ZjBceGE2XHhiY1x4YWNcJyksXG4gICAgKDB4MkY5QUUsIFwnTVwnLCBcJ1x4ZTRceDk1XHg5ZFwnKSxcbiAgICAoMHgyRjlBRiwgXCdNXCcsIFwnXHhlNFx4OTVceGExXCcpLFxuICAgICgweDJGOUIwLCBcJ01cJywgXCdceGYwXHhhNlx4YmVceGIxXCcpLFxuICAgICgweDJGOUIxLCBcJ01cJywgXCdceGYwXHhhN1x4ODNceDkyXCcpLFxuICAgICgweDJGOUIyLCBcJ01cJywgXCdceGU0XHg5NVx4YWJcJyksXG4gICAgKDB4MkY5QjMsIFwnTVwnLCBcJ1x4ZThceDk5XHg5MFwnKSxcbiAgICAoMHgyRjlCNCwgXCdNXCcsIFwnXHhlOFx4OTlceDljXCcpLFxuICAgICgweDJGOUI1LCBcJ01cJywgXCdceGU4XHg5OVx4YTdcJyksXG4gICAgKDB4MkY5QjYsIFwnTVwnLCBcJ1x4ZThceDk5XHhhOVwnKSxcbiAgICAoMHgyRjlCNywgXCdNXCcsIFwnXHhlOFx4OWFceGE5XCcpLFxuICAgICgweDJGOUI4LCBcJ01cJywgXCdceGU4XHg5YVx4ODhcJyksXG4gICAgKDB4MkY5QjksIFwnTVwnLCBcJ1x4ZThceDljXHg4ZVwnKSxcbiAgICAoMHgyRjlCQSwgXCdNXCcsIFwnXHhlOFx4OWJceGEyXCcpLFxuICAgICgweDJGOUJCLCBcJ01cJywgXCdceGU4XHg5ZFx4YjlcJyksXG4gICAgKDB4MkY5QkMsIFwnTVwnLCBcJ1x4ZThceDljXHhhOFwnKSxcbiAgICAoMHgyRjlCRCwgXCdNXCcsIFwnXHhlOFx4OWRceGFiXCcpLFxuICAgICgweDJGOUJFLCBcJ01cJywgXCdceGU4XHg5ZVx4ODZcJyksXG4gICAgKDB4MkY5QkYsIFwnWFwnKSxcbiAgICAoMHgyRjlDMCwgXCdNXCcsIFwnXHhlOFx4OWZceGExXCcpLFxuICAgICgweDJGOUMxLCBcJ01cJywgXCdceGU4XHhhMFx4ODFcJyksXG4gICAgKDB4MkY5QzIsIFwnTVwnLCBcJ1x4ZTRceDk3XHhiOVwnKSxcbiAgICBdXG5cbmRlZiBfc2VnXzgwKCkgLT4gTGlzdFtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXV06XG4gICAgcmV0dXJuIFtcbiAgICAoMHgyRjlDMywgXCdNXCcsIFwnXHhlOFx4YTFceGEwXCcpLFxuICAgICgweDJGOUM0LCBcJ01cJywgXCdceGU4XHhhMVx4YTNcJyksXG4gICAgKDB4MkY5QzUsIFwnTVwnLCBcJ1x4ZjBceGE3XHg5OVx4YTdcJyksXG4gICAgKDB4MkY5QzYsIFwnTVwnLCBcJ1x4ZThceGEzXHg5N1wnKSxcbiAgICAoMHgyRjlDNywgXCdNXCcsIFwnXHhlOFx4YTNceDllXCcpLFxuICAgICgweDJGOUM4LCBcJ01cJywgXCdceGU0XHg5OFx4YjVcJyksXG4gICAgKDB4MkY5QzksIFwnTVwnLCBcJ1x4ZThceGEzXHhiYVwnKSxcbiAgICAoMHgyRjlDQSwgXCdNXCcsIFwnXHhlM1x4OTJceGJiXCcpLFxuICAgICgweDJGOUNCLCBcJ01cJywgXCdceGYwXHhhN1x4YTJceGFlXCcpLFxuICAgICgweDJGOUNDLCBcJ01cJywgXCdceGYwXHhhN1x4YTVceGE2XCcpLFxuICAgICgweDJGOUNELCBcJ01cJywgXCdceGU0XHg5YVx4YmVcJyksXG4gICAgKDB4MkY5Q0UsIFwnTVwnLCBcJ1x4ZTRceDliXHg4N1wnKSxcbiAgICAoMHgyRjlDRiwgXCdNXCcsIFwnXHhlOFx4YWFceGEwXCcpLFxuICAgICgweDJGOUQwLCBcJ01cJywgXCdceGU4XHhhYlx4YWRcJyksXG4gICAgKDB4MkY5RDEsIFwnTVwnLCBcJ1x4ZThceGFlXHg4YVwnKSxcbiAgICAoMHgyRjlEMiwgXCdNXCcsIFwnXHhlOFx4YjFceDk1XCcpLFxuICAgICgweDJGOUQzLCBcJ01cJywgXCdceGYwXHhhN1x4YjJceGE4XCcpLFxuICAgICgweDJGOUQ0LCBcJ01cJywgXCdceGU4XHhiMlx4YWJcJyksXG4gICAgKDB4MkY5RDUsIFwnTVwnLCBcJ1x4ZThceGIzXHg4MVwnKSxcbiAgICAoMHgyRjlENiwgXCdNXCcsIFwnXHhlOFx4YjRceDliXCcpLFxuICAgICgweDJGOUQ3LCBcJ01cJywgXCdceGU4XHhiNVx4YjdcJyksXG4gICAgKDB4MkY5RDgsIFwnTVwnLCBcJ1x4ZjBceGE3XHhiY1x4YWZcJyksXG4gICAgKDB4MkY5RDksIFwnTVwnLCBcJ1x4ZjBceGEwXHhhMFx4ODRcJyksXG4gICAgKDB4MkY5REEsIFwnTVwnLCBcJ1x4ZThceGI3XHg4YlwnKSxcbiAgICAoMHgyRjlEQiwgXCdNXCcsIFwnXHhlOFx4YjZceGJjXCcpLFxuICAgICgweDJGOURDLCBcJ01cJywgXCdceGU4XHhiN1x4YjBcJyksXG4gICAgKDB4MkY5REQsIFwnTVwnLCBcJ1x4ZjBceGEwXHhhM1x4OWVcJyksXG4gICAgKDB4MkY5REUsIFwnTVwnLCBcJ1x4ZThceGJiXHg5NFwnKSxcbiAgICAoMHgyRjlERiwgXCdNXCcsIFwnXHhlOFx4YmNceGI4XCcpLFxuICAgICgweDJGOUUwLCBcJ01cJywgXCdceGYwXHhhOFx4OTdceDkyXCcpLFxuICAgICgweDJGOUUxLCBcJ01cJywgXCdceGYwXHhhOFx4OTdceGFkXCcpLFxuICAgICgweDJGOUUyLCBcJ01cJywgXCdceGU5XHg4Mlx4OTRcJyksXG4gICAgKDB4MkY5RTMsIFwnTVwnLCBcJ1x4ZTlceDgzXHhiMVwnKSxcbiAgICAoMHgyRjlFNCwgXCdNXCcsIFwnXHhlOVx4ODRceDkxXCcpLFxuICAgICgweDJGOUU1LCBcJ01cJywgXCdceGYwXHhhOFx4OWNceGFlXCcpLFxuICAgICgweDJGOUU2LCBcJ01cJywgXCdceGU5XHg4NFx4OWJcJyksXG4gICAgKDB4MkY5RTcsIFwnTVwnLCBcJ1x4ZTlceDg4XHhiOFwnKSxcbiAgICAoMHgyRjlFOCwgXCdNXCcsIFwnXHhlOVx4OGJceDk3XCcpLFxuICAgICgweDJGOUU5LCBcJ01cJywgXCdceGU5XHg4Ylx4OThcJyksXG4gICAgKDB4MkY5RUEsIFwnTVwnLCBcJ1x4ZTlceDg5XHhiY1wnKSxcbiAgICAoMHgyRjlFQiwgXCdNXCcsIFwnXHhlOVx4OGZceGI5XCcpLFxuICAgICgweDJGOUVDLCBcJ01cJywgXCdceGU5XHg5MFx4OTVcJyksXG4gICAgKDB4MkY5RUQsIFwnTVwnLCBcJ1x4ZjBceGE4XHhhZlx4YmFcJyksXG4gICAgKDB4MkY5RUUsIFwnTVwnLCBcJ1x4ZTlceDk2XHg4YlwnKSxcbiAgICAoMHgyRjlFRiwgXCdNXCcsIFwnXHhlNFx4YTZceDk1XCcpLFxuICAgICgweDJGOUYwLCBcJ01cJywgXCdceGU5XHg5Nlx4YjdcJyksXG4gICAgKDB4MkY5RjEsIFwnTVwnLCBcJ1x4ZjBceGE4XHhiNVx4YjdcJyksXG4gICAgKDB4MkY5RjIsIFwnTVwnLCBcJ1x4ZTRceGE3XHhhNlwnKSxcbiAgICAoMHgyRjlGMywgXCdNXCcsIFwnXHhlOVx4OWJceDgzXCcpLFxuICAgICgweDJGOUY0LCBcJ01cJywgXCdceGU1XHhiNlx4YjJcJyksXG4gICAgKDB4MkY5RjUsIFwnTVwnLCBcJ1x4ZTlceDljXHhhM1wnKSxcbiAgICAoMHgyRjlGNiwgXCdNXCcsIFwnXHhmMFx4YTlceDg1XHg4NVwnKSxcbiAgICAoMHgyRjlGNywgXCdNXCcsIFwnXHhmMFx4YTlceDg4XHg5YVwnKSxcbiAgICAoMHgyRjlGOCwgXCdNXCcsIFwnXHhlNFx4YTlceGFlXCcpLFxuICAgICgweDJGOUY5LCBcJ01cJywgXCdceGU0XHhhOVx4YjZcJyksXG4gICAgKDB4MkY5RkEsIFwnTVwnLCBcJ1x4ZTlceDlmXHhhMFwnKSxcbiAgICAoMHgyRjlGQiwgXCdNXCcsIFwnXHhmMFx4YTlceDkwXHg4YVwnKSxcbiAgICAoMHgyRjlGQywgXCdNXCcsIFwnXHhlNFx4YWFceGIyXCcpLFxuICAgICgweDJGOUZELCBcJ01cJywgXCdceGYwXHhhOVx4OTJceDk2XCcpLFxuICAgICgweDJGOUZFLCBcJ01cJywgXCdceGU5XHhhMFx4OGJcJyksXG4gICAgKDB4MkZBMDAsIFwnTVwnLCBcJ1x4ZTlceGEwXHhhOVwnKSxcbiAgICAoMHgyRkEwMSwgXCdNXCcsIFwnXHhmMFx4YTlceDk2XHhiNlwnKSxcbiAgICAoMHgyRkEwMiwgXCdNXCcsIFwnXHhlOVx4YTNceGEyXCcpLFxuICAgICgweDJGQTAzLCBcJ01cJywgXCdceGU0XHhhY1x4YjNcJyksXG4gICAgKDB4MkZBMDQsIFwnTVwnLCBcJ1x4ZTlceGE0XHhhOVwnKSxcbiAgICAoMHgyRkEwNSwgXCdNXCcsIFwnXHhlOVx4YTZceGE3XCcpLFxuICAgICgweDJGQTA2LCBcJ01cJywgXCdceGU5XHhhN1x4ODJcJyksXG4gICAgKDB4MkZBMDcsIFwnTVwnLCBcJ1x4ZTlceGE3XHhiZVwnKSxcbiAgICAoMHgyRkEwOCwgXCdNXCcsIFwnXHhlNFx4YWZceDhlXCcpLFxuICAgICgweDJGQTA5LCBcJ01cJywgXCdceGYwXHhhOVx4YWNceGIwXCcpLFxuICAgICgweDJGQTBBLCBcJ01cJywgXCdceGU5XHhhY1x4OTJcJyksXG4gICAgKDB4MkZBMEIsIFwnTVwnLCBcJ1x4ZTlceGIxXHg4MFwnKSxcbiAgICAoMHgyRkEwQywgXCdNXCcsIFwnXHhlOVx4YjNceGJkXCcpLFxuICAgICgweDJGQTBELCBcJ01cJywgXCdceGU0XHhiM1x4OGVcJyksXG4gICAgKDB4MkZBMEUsIFwnTVwnLCBcJ1x4ZTRceGIzXHhhZFwnKSxcbiAgICAoMHgyRkEwRiwgXCdNXCcsIFwnXHhlOVx4YjVceGE3XCcpLFxuICAgICgweDJGQTEwLCBcJ01cJywgXCdceGYwXHhhYVx4ODNceDhlXCcpLFxuICAgICgweDJGQTExLCBcJ01cJywgXCdceGU0XHhiM1x4YjhcJyksXG4gICAgKDB4MkZBMTIsIFwnTVwnLCBcJ1x4ZjBceGFhXHg4NFx4ODVcJyksXG4gICAgKDB4MkZBMTMsIFwnTVwnLCBcJ1x4ZjBceGFhXHg4OFx4OGVcJyksXG4gICAgKDB4MkZBMTQsIFwnTVwnLCBcJ1x4ZjBceGFhXHg4YVx4OTFcJyksXG4gICAgKDB4MkZBMTUsIFwnTVwnLCBcJ1x4ZTlceGJhXHhiYlwnKSxcbiAgICAoMHgyRkExNiwgXCdNXCcsIFwnXHhlNFx4YjVceDk2XCcpLFxuICAgICgweDJGQTE3LCBcJ01cJywgXCdceGU5XHhiYlx4YjlcJyksXG4gICAgKDB4MkZBMTgsIFwnTVwnLCBcJ1x4ZTlceGJiXHhiZVwnKSxcbiAgICAoMHgyRkExOSwgXCdNXCcsIFwnXHhlOVx4YmNceDg1XCcpLFxuICAgICgweDJGQTFBLCBcJ01cJywgXCdceGU5XHhiY1x4OGZcJyksXG4gICAgKDB4MkZBMUIsIFwnTVwnLCBcJ1x4ZTlceGJjXHg5NlwnKSxcbiAgICAoMHgyRkExQywgXCdNXCcsIFwnXHhlOVx4YmNceGJiXCcpLFxuICAgICgweDJGQTFELCBcJ01cJywgXCdceGYwXHhhYVx4OThceDgwXCcpLFxuICAgICgweDJGQTFFLCBcJ1hcJyksXG4gICAgKDB4MzAwMDAsIFwnVlwnKSxcbiAgICAoMHgzMTM0QiwgXCdYXCcpLFxuICAgICgweEUwMTAwLCBcJ0lcJyksXG4gICAgKDB4RTAxRjAsIFwnWFwnKSxcbiAgICBdXG5cbnV0czQ2ZGF0YSA9IHR1cGxlKFxuICAgIF9zZWdfMCgpXG4gICAgKyBfc2VnXzEoKVxuICAgICsgX3NlZ18yKClcbiAgICArIF9zZWdfMygpXG4gICAgKyBfc2VnXzQoKVxuICAgICsgX3NlZ181KClcbiAgICArIF9zZWdfNigpXG4gICAgKyBfc2VnXzcoKVxuICAgICsgX3NlZ184KClcbiAgICArIF9zZWdfOSgpXG4gICAgKyBfc2VnXzEwKClcbiAgICArIF9zZWdfMTEoKVxuICAgICsgX3NlZ18xMigpXG4gICAgKyBfc2VnXzEzKClcbiAgICArIF9zZWdfMTQoKVxuICAgICsgX3NlZ18xNSgpXG4gICAgKyBfc2VnXzE2KClcbiAgICArIF9zZWdfMTcoKVxuICAgICsgX3NlZ18xOCgpXG4gICAgKyBfc2VnXzE5KClcbiAgICArIF9zZWdfMjAoKVxuICAgICsgX3NlZ18yMSgpXG4gICAgKyBfc2VnXzIyKClcbiAgICArIF9zZWdfMjMoKVxuICAgICsgX3NlZ18yNCgpXG4gICAgKyBfc2VnXzI1KClcbiAgICArIF9zZWdfMjYoKVxuICAgICsgX3NlZ18yNygpXG4gICAgKyBfc2VnXzI4KClcbiAgICArIF9zZWdfMjkoKVxuICAgICsgX3NlZ18zMCgpXG4gICAgKyBfc2VnXzMxKClcbiAgICArIF9zZWdfMzIoKVxuICAgICsgX3NlZ18zMygpXG4gICAgKyBfc2VnXzM0KClcbiAgICArIF9zZWdfMzUoKVxuICAgICsgX3NlZ18zNigpXG4gICAgKyBfc2VnXzM3KClcbiAgICArIF9zZWdfMzgoKVxuICAgICsgX3NlZ18zOSgpXG4gICAgKyBfc2VnXzQwKClcbiAgICArIF9zZWdfNDEoKVxuICAgICsgX3NlZ180MigpXG4gICAgKyBfc2VnXzQzKClcbiAgICArIF9zZWdfNDQoKVxuICAgICsgX3NlZ180NSgpXG4gICAgKyBfc2VnXzQ2KClcbiAgICArIF9zZWdfNDcoKVxuICAgICsgX3NlZ180OCgpXG4gICAgKyBfc2VnXzQ5KClcbiAgICArIF9zZWdfNTAoKVxuICAgICsgX3NlZ181MSgpXG4gICAgKyBfc2VnXzUyKClcbiAgICArIF9zZWdfNTMoKVxuICAgICsgX3NlZ181NCgpXG4gICAgKyBfc2VnXzU1KClcbiAgICArIF9zZWdfNTYoKVxuICAgICsgX3NlZ181NygpXG4gICAgKyBfc2VnXzU4KClcbiAgICArIF9zZWdfNTkoKVxuICAgICsgX3NlZ182MCgpXG4gICAgKyBfc2VnXzYxKClcbiAgICArIF9zZWdfNjIoKVxuICAgICsgX3NlZ182MygpXG4gICAgKyBfc2VnXzY0KClcbiAgICArIF9zZWdfNjUoKVxuICAgICsgX3NlZ182NigpXG4gICAgKyBfc2VnXzY3KClcbiAgICArIF9zZWdfNjgoKVxuICAgICsgX3NlZ182OSgpXG4gICAgKyBfc2VnXzcwKClcbiAgICArIF9zZWdfNzEoKVxuICAgICsgX3NlZ183MigpXG4gICAgKyBfc2VnXzczKClcbiAgICArIF9zZWdfNzQoKVxuICAgICsgX3NlZ183NSgpXG4gICAgKyBfc2VnXzc2KClcbiAgICArIF9zZWdfNzcoKVxuICAgICsgX3NlZ183OCgpXG4gICAgKyBfc2VnXzc5KClcbiAgICArIF9zZWdfODAoKVxuKSAgIyB0eXBlOiBUdXBsZVtVbmlvbltUdXBsZVtpbnQsIHN0cl0sIFR1cGxlW2ludCwgc3RyLCBzdHJdXSwgLi4uXVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3lhcmwvX3F1b3RpbmcucHknLCBiJ2ltcG9ydCBvc1xyXG5pbXBvcnQgc3lzXHJcblxyXG5fX2FsbF9fID0gKCJfUXVvdGVyIiwgIl9VbnF1b3RlciIpXHJcblxyXG5cclxuTk9fRVhURU5TSU9OUyA9IGJvb2wob3MuZW52aXJvbi5nZXQoIllBUkxfTk9fRVhURU5TSU9OUyIpKSAgIyB0eXBlOiBib29sXHJcbmlmIHN5cy5pbXBsZW1lbnRhdGlvbi5uYW1lICE9ICJjcHl0aG9uIjpcclxuICAgIE5PX0VYVEVOU0lPTlMgPSBUcnVlXHJcblxyXG5cclxuaWYgbm90IE5PX0VYVEVOU0lPTlM6ICAjIHByYWdtYTogbm8gYnJhbmNoXHJcbiAgICB0cnk6XHJcbiAgICAgICAgZnJvbSAuX3F1b3RpbmdfYyBpbXBvcnQgX1F1b3RlciwgX1VucXVvdGVyICAjIHR5cGU6IGlnbm9yZVttaXNjXVxyXG4gICAgZXhjZXB0IEltcG9ydEVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICAgICAgZnJvbSAuX3F1b3RpbmdfcHkgaW1wb3J0IF9RdW90ZXIsIF9VbnF1b3RlciAgIyB0eXBlOiBpZ25vcmVbbWlzY11cclxuZWxzZTpcclxuICAgIGZyb20gLl9xdW90aW5nX3B5IGltcG9ydCBfUXVvdGVyLCBfVW5xdW90ZXIgICMgdHlwZTogaWdub3JlW21pc2NdXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCd5YXJsL19xdW90aW5nX3B5LnB5JywgYidpbXBvcnQgY29kZWNzXHJcbmltcG9ydCByZVxyXG5mcm9tIHN0cmluZyBpbXBvcnQgYXNjaWlfbGV0dGVycywgYXNjaWlfbG93ZXJjYXNlLCBkaWdpdHNcclxuZnJvbSB0eXBpbmcgaW1wb3J0IE9wdGlvbmFsLCBjYXN0XHJcblxyXG5cclxuQkFTQ0lJX0xPV0VSQ0FTRSA9IGFzY2lpX2xvd2VyY2FzZS5lbmNvZGUoImFzY2lpIilcclxuQlBDVF9BTExPV0VEID0geyIlezowMlh9Ii5mb3JtYXQoaSkuZW5jb2RlKCJhc2NpaSIpIGZvciBpIGluIHJhbmdlKDI1Nil9XHJcbkdFTl9ERUxJTVMgPSAiOi8/I1tdQCJcclxuU1VCX0RFTElNU19XSVRIT1VUX1FTID0gIiEkXCcoKSosIlxyXG5TVUJfREVMSU1TID0gU1VCX0RFTElNU19XSVRIT1VUX1FTICsgIismPTsiXHJcblJFU0VSVkVEID0gR0VOX0RFTElNUyArIFNVQl9ERUxJTVNcclxuVU5SRVNFUlZFRCA9IGFzY2lpX2xldHRlcnMgKyBkaWdpdHMgKyAiLS5ffiJcclxuQUxMT1dFRCA9IFVOUkVTRVJWRUQgKyBTVUJfREVMSU1TX1dJVEhPVVRfUVNcclxuXHJcblxyXG5fSVNfSEVYID0gcmUuY29tcGlsZShiIltBLVowLTldW0EtWjAtOV0iKVxyXG5fSVNfSEVYX1NUUiA9IHJlLmNvbXBpbGUoIltBLUZhLWYwLTldW0EtRmEtZjAtOV0iKVxyXG5cclxudXRmOF9kZWNvZGVyID0gY29kZWNzLmdldGluY3JlbWVudGFsZGVjb2RlcigidXRmLTgiKVxyXG5cclxuXHJcbmNsYXNzIF9RdW90ZXI6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIHNhZmU6IHN0ciA9ICIiLFxyXG4gICAgICAgIHByb3RlY3RlZDogc3RyID0gIiIsXHJcbiAgICAgICAgcXM6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICByZXF1b3RlOiBib29sID0gVHJ1ZVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3NhZmUgPSBzYWZlXHJcbiAgICAgICAgc2VsZi5fcHJvdGVjdGVkID0gcHJvdGVjdGVkXHJcbiAgICAgICAgc2VsZi5fcXMgPSBxc1xyXG4gICAgICAgIHNlbGYuX3JlcXVvdGUgPSByZXF1b3RlXHJcblxyXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIHZhbDogT3B0aW9uYWxbc3RyXSkgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICBpZiB2YWwgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh2YWwsIHN0cik6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiQXJndW1lbnQgc2hvdWxkIGJlIHN0ciIpXHJcbiAgICAgICAgaWYgbm90IHZhbDpcclxuICAgICAgICAgICAgcmV0dXJuICIiXHJcbiAgICAgICAgYnZhbCA9IGNhc3Qoc3RyLCB2YWwpLmVuY29kZSgidXRmOCIsIGVycm9ycz0iaWdub3JlIilcclxuICAgICAgICByZXQgPSBieXRlYXJyYXkoKVxyXG4gICAgICAgIHBjdCA9IGJ5dGVhcnJheSgpXHJcbiAgICAgICAgc2FmZSA9IHNlbGYuX3NhZmVcclxuICAgICAgICBzYWZlICs9IEFMTE9XRURcclxuICAgICAgICBpZiBub3Qgc2VsZi5fcXM6XHJcbiAgICAgICAgICAgIHNhZmUgKz0gIismPTsiXHJcbiAgICAgICAgc2FmZSArPSBzZWxmLl9wcm90ZWN0ZWRcclxuICAgICAgICBic2FmZSA9IHNhZmUuZW5jb2RlKCJhc2NpaSIpXHJcbiAgICAgICAgaWR4ID0gMFxyXG4gICAgICAgIHdoaWxlIGlkeCA8IGxlbihidmFsKTpcclxuICAgICAgICAgICAgY2ggPSBidmFsW2lkeF1cclxuICAgICAgICAgICAgaWR4ICs9IDFcclxuXHJcbiAgICAgICAgICAgIGlmIHBjdDpcclxuICAgICAgICAgICAgICAgIGlmIGNoIGluIEJBU0NJSV9MT1dFUkNBU0U6XHJcbiAgICAgICAgICAgICAgICAgICAgY2ggPSBjaCAtIDMyICAjIGNvbnZlcnQgdG8gdXBwZXJjYXNlXHJcbiAgICAgICAgICAgICAgICBwY3QuYXBwZW5kKGNoKVxyXG4gICAgICAgICAgICAgICAgaWYgbGVuKHBjdCkgPT0gMzogICMgcHJhZ21hOiBubyBicmFuY2ggICAjIHBlZXBob2xlIG9wdGltaXplclxyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZiA9IHBjdFsxOl1cclxuICAgICAgICAgICAgICAgICAgICBpZiBub3QgX0lTX0hFWC5tYXRjaChidWYpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuZXh0ZW5kKGIiJTI1IilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGN0LmNsZWFyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWR4IC09IDJcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucXVvdGVkID0gY2hyKGludChwY3RbMTpdLmRlY29kZSgiYXNjaWkiKSwgYmFzZT0xNikpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5leHRlbmQoYiIlMjUiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwY3QuY2xlYXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZHggLT0gMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiB1bnF1b3RlZCBpbiBzZWxmLl9wcm90ZWN0ZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5leHRlbmQocGN0KVxyXG4gICAgICAgICAgICAgICAgICAgIGVsaWYgdW5xdW90ZWQgaW4gc2FmZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LmFwcGVuZChvcmQodW5xdW90ZWQpKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5leHRlbmQocGN0KVxyXG4gICAgICAgICAgICAgICAgICAgIHBjdC5jbGVhcigpXHJcblxyXG4gICAgICAgICAgICAgICAgIyBzcGVjaWFsIGNhc2UsIGlmIHdlIGhhdmUgb25seSBvbmUgY2hhciBhZnRlciAiJSJcclxuICAgICAgICAgICAgICAgIGVsaWYgbGVuKHBjdCkgPT0gMiBhbmQgaWR4ID09IGxlbihidmFsKTpcclxuICAgICAgICAgICAgICAgICAgICByZXQuZXh0ZW5kKGIiJTI1IilcclxuICAgICAgICAgICAgICAgICAgICBwY3QuY2xlYXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIGlkeCAtPSAxXHJcblxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIGVsaWYgY2ggPT0gb3JkKCIlIikgYW5kIHNlbGYuX3JlcXVvdGU6XHJcbiAgICAgICAgICAgICAgICBwY3QuY2xlYXIoKVxyXG4gICAgICAgICAgICAgICAgcGN0LmFwcGVuZChjaClcclxuXHJcbiAgICAgICAgICAgICAgICAjIHNwZWNpYWwgY2FzZSBpZiAiJSIgaXMgbGFzdCBjaGFyXHJcbiAgICAgICAgICAgICAgICBpZiBpZHggPT0gbGVuKGJ2YWwpOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldC5leHRlbmQoYiIlMjUiKVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLl9xczpcclxuICAgICAgICAgICAgICAgIGlmIGNoID09IG9yZCgiICIpOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldC5hcHBlbmQob3JkKCIrIikpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgaWYgY2ggaW4gYnNhZmU6XHJcbiAgICAgICAgICAgICAgICByZXQuYXBwZW5kKGNoKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIHJldC5leHRlbmQoKCIlezowMlh9Ii5mb3JtYXQoY2gpKS5lbmNvZGUoImFzY2lpIikpXHJcblxyXG4gICAgICAgIHJldDIgPSByZXQuZGVjb2RlKCJhc2NpaSIpXHJcbiAgICAgICAgaWYgcmV0MiA9PSB2YWw6XHJcbiAgICAgICAgICAgIHJldHVybiB2YWxcclxuICAgICAgICByZXR1cm4gcmV0MlxyXG5cclxuXHJcbmNsYXNzIF9VbnF1b3RlcjpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqLCB1bnNhZmU6IHN0ciA9ICIiLCBxczogYm9vbCA9IEZhbHNlKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3Vuc2FmZSA9IHVuc2FmZVxyXG4gICAgICAgIHNlbGYuX3FzID0gcXNcclxuICAgICAgICBzZWxmLl9xdW90ZXIgPSBfUXVvdGVyKClcclxuICAgICAgICBzZWxmLl9xc19xdW90ZXIgPSBfUXVvdGVyKHFzPVRydWUpXHJcblxyXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIHZhbDogT3B0aW9uYWxbc3RyXSkgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICBpZiB2YWwgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh2YWwsIHN0cik6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiQXJndW1lbnQgc2hvdWxkIGJlIHN0ciIpXHJcbiAgICAgICAgaWYgbm90IHZhbDpcclxuICAgICAgICAgICAgcmV0dXJuICIiXHJcbiAgICAgICAgZGVjb2RlciA9IGNhc3QoY29kZWNzLkJ1ZmZlcmVkSW5jcmVtZW50YWxEZWNvZGVyLCB1dGY4X2RlY29kZXIoKSlcclxuICAgICAgICByZXQgPSBbXVxyXG4gICAgICAgIGlkeCA9IDBcclxuICAgICAgICB3aGlsZSBpZHggPCBsZW4odmFsKTpcclxuICAgICAgICAgICAgY2ggPSB2YWxbaWR4XVxyXG4gICAgICAgICAgICBpZHggKz0gMVxyXG4gICAgICAgICAgICBpZiBjaCA9PSAiJSIgYW5kIGlkeCA8PSBsZW4odmFsKSAtIDI6XHJcbiAgICAgICAgICAgICAgICBwY3QgPSB2YWxbaWR4IDogaWR4ICsgMl1cclxuICAgICAgICAgICAgICAgIGlmIF9JU19IRVhfU1RSLmZ1bGxtYXRjaChwY3QpOlxyXG4gICAgICAgICAgICAgICAgICAgIGIgPSBieXRlcyhbaW50KHBjdCwgYmFzZT0xNildKVxyXG4gICAgICAgICAgICAgICAgICAgIGlkeCArPSAyXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnF1b3RlZCA9IGRlY29kZXIuZGVjb2RlKGIpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRfcGN0ID0gaWR4IC0gMyAtIGxlbihkZWNvZGVyLmJ1ZmZlcikgKiAzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5hcHBlbmQodmFsW3N0YXJ0X3BjdCA6IGlkeCAtIDNdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVyLnJlc2V0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5xdW90ZWQgPSBkZWNvZGVyLmRlY29kZShiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgVW5pY29kZURlY29kZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0LmFwcGVuZCh2YWxbaWR4IC0gMyA6IGlkeF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG5vdCB1bnF1b3RlZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLl9xcyBhbmQgdW5xdW90ZWQgaW4gIis9JjsiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b19hZGQgPSBzZWxmLl9xc19xdW90ZXIodW5xdW90ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvX2FkZCBpcyBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbm5vdCBxdW90ZSBOb25lIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LmFwcGVuZCh0b19hZGQpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxpZiB1bnF1b3RlZCBpbiBzZWxmLl91bnNhZmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvX2FkZCA9IHNlbGYuX3F1b3Rlcih1bnF1b3RlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9fYWRkIGlzIE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IHF1b3RlIE5vbmUiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuYXBwZW5kKHRvX2FkZClcclxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQuYXBwZW5kKHVucXVvdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICBpZiBkZWNvZGVyLmJ1ZmZlcjpcclxuICAgICAgICAgICAgICAgIHN0YXJ0X3BjdCA9IGlkeCAtIDEgLSBsZW4oZGVjb2Rlci5idWZmZXIpICogM1xyXG4gICAgICAgICAgICAgICAgcmV0LmFwcGVuZCh2YWxbc3RhcnRfcGN0IDogaWR4IC0gMV0pXHJcbiAgICAgICAgICAgICAgICBkZWNvZGVyLnJlc2V0KClcclxuXHJcbiAgICAgICAgICAgIGlmIGNoID09ICIrIjpcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9xcyBvciBjaCBpbiBzZWxmLl91bnNhZmU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0LmFwcGVuZCgiKyIpXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldC5hcHBlbmQoIiAiKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIGlmIGNoIGluIHNlbGYuX3Vuc2FmZTpcclxuICAgICAgICAgICAgICAgIHJldC5hcHBlbmQoIiUiKVxyXG4gICAgICAgICAgICAgICAgaCA9IGhleChvcmQoY2gpKS51cHBlcigpWzI6XVxyXG4gICAgICAgICAgICAgICAgZm9yIGNoIGluIGg6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0LmFwcGVuZChjaClcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICByZXQuYXBwZW5kKGNoKVxyXG5cclxuICAgICAgICBpZiBkZWNvZGVyLmJ1ZmZlcjpcclxuICAgICAgICAgICAgcmV0LmFwcGVuZCh2YWxbLWxlbihkZWNvZGVyLmJ1ZmZlcikgKiAzIDpdKVxyXG5cclxuICAgICAgICByZXQyID0gIiIuam9pbihyZXQpXHJcbiAgICAgICAgaWYgcmV0MiA9PSB2YWw6XHJcbiAgICAgICAgICAgIHJldHVybiB2YWxcclxuICAgICAgICByZXR1cm4gcmV0MlxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9odHRwLnB5JywgYidpbXBvcnQgaHR0cC5zZXJ2ZXJcclxuaW1wb3J0IHN5c1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgTWFwcGluZywgVHVwbGVcclxuXHJcbmZyb20gLiBpbXBvcnQgX192ZXJzaW9uX19cclxuZnJvbSAuaHR0cF9leGNlcHRpb25zIGltcG9ydCBIdHRwUHJvY2Vzc2luZ0Vycm9yIGFzIEh0dHBQcm9jZXNzaW5nRXJyb3JcclxuZnJvbSAuaHR0cF9wYXJzZXIgaW1wb3J0IChcclxuICAgIEhlYWRlcnNQYXJzZXIgYXMgSGVhZGVyc1BhcnNlcixcclxuICAgIEh0dHBQYXJzZXIgYXMgSHR0cFBhcnNlcixcclxuICAgIEh0dHBSZXF1ZXN0UGFyc2VyIGFzIEh0dHBSZXF1ZXN0UGFyc2VyLFxyXG4gICAgSHR0cFJlc3BvbnNlUGFyc2VyIGFzIEh0dHBSZXNwb25zZVBhcnNlcixcclxuICAgIFJhd1JlcXVlc3RNZXNzYWdlIGFzIFJhd1JlcXVlc3RNZXNzYWdlLFxyXG4gICAgUmF3UmVzcG9uc2VNZXNzYWdlIGFzIFJhd1Jlc3BvbnNlTWVzc2FnZSxcclxuKVxyXG5mcm9tIC5odHRwX3dlYnNvY2tldCBpbXBvcnQgKFxyXG4gICAgV1NfQ0xPU0VEX01FU1NBR0UgYXMgV1NfQ0xPU0VEX01FU1NBR0UsXHJcbiAgICBXU19DTE9TSU5HX01FU1NBR0UgYXMgV1NfQ0xPU0lOR19NRVNTQUdFLFxyXG4gICAgV1NfS0VZIGFzIFdTX0tFWSxcclxuICAgIFdlYlNvY2tldEVycm9yIGFzIFdlYlNvY2tldEVycm9yLFxyXG4gICAgV2ViU29ja2V0UmVhZGVyIGFzIFdlYlNvY2tldFJlYWRlcixcclxuICAgIFdlYlNvY2tldFdyaXRlciBhcyBXZWJTb2NrZXRXcml0ZXIsXHJcbiAgICBXU0Nsb3NlQ29kZSBhcyBXU0Nsb3NlQ29kZSxcclxuICAgIFdTTWVzc2FnZSBhcyBXU01lc3NhZ2UsXHJcbiAgICBXU01zZ1R5cGUgYXMgV1NNc2dUeXBlLFxyXG4gICAgd3NfZXh0X2dlbiBhcyB3c19leHRfZ2VuLFxyXG4gICAgd3NfZXh0X3BhcnNlIGFzIHdzX2V4dF9wYXJzZSxcclxuKVxyXG5mcm9tIC5odHRwX3dyaXRlciBpbXBvcnQgKFxyXG4gICAgSHR0cFZlcnNpb24gYXMgSHR0cFZlcnNpb24sXHJcbiAgICBIdHRwVmVyc2lvbjEwIGFzIEh0dHBWZXJzaW9uMTAsXHJcbiAgICBIdHRwVmVyc2lvbjExIGFzIEh0dHBWZXJzaW9uMTEsXHJcbiAgICBTdHJlYW1Xcml0ZXIgYXMgU3RyZWFtV3JpdGVyLFxyXG4pXHJcblxyXG5fX2FsbF9fID0gKFxyXG4gICAgIkh0dHBQcm9jZXNzaW5nRXJyb3IiLFxyXG4gICAgIlJFU1BPTlNFUyIsXHJcbiAgICAiU0VSVkVSX1NPRlRXQVJFIixcclxuICAgICMgLmh0dHBfd3JpdGVyXHJcbiAgICAiU3RyZWFtV3JpdGVyIixcclxuICAgICJIdHRwVmVyc2lvbiIsXHJcbiAgICAiSHR0cFZlcnNpb24xMCIsXHJcbiAgICAiSHR0cFZlcnNpb24xMSIsXHJcbiAgICAjIC5odHRwX3BhcnNlclxyXG4gICAgIkhlYWRlcnNQYXJzZXIiLFxyXG4gICAgIkh0dHBQYXJzZXIiLFxyXG4gICAgIkh0dHBSZXF1ZXN0UGFyc2VyIixcclxuICAgICJIdHRwUmVzcG9uc2VQYXJzZXIiLFxyXG4gICAgIlJhd1JlcXVlc3RNZXNzYWdlIixcclxuICAgICJSYXdSZXNwb25zZU1lc3NhZ2UiLFxyXG4gICAgIyAuaHR0cF93ZWJzb2NrZXRcclxuICAgICJXU19DTE9TRURfTUVTU0FHRSIsXHJcbiAgICAiV1NfQ0xPU0lOR19NRVNTQUdFIixcclxuICAgICJXU19LRVkiLFxyXG4gICAgIldlYlNvY2tldFJlYWRlciIsXHJcbiAgICAiV2ViU29ja2V0V3JpdGVyIixcclxuICAgICJ3c19leHRfZ2VuIixcclxuICAgICJ3c19leHRfcGFyc2UiLFxyXG4gICAgIldTTWVzc2FnZSIsXHJcbiAgICAiV2ViU29ja2V0RXJyb3IiLFxyXG4gICAgIldTTXNnVHlwZSIsXHJcbiAgICAiV1NDbG9zZUNvZGUiLFxyXG4pXHJcblxyXG5cclxuU0VSVkVSX1NPRlRXQVJFID0gIlB5dGhvbi97MFswXX0uezBbMV19IGFpb2h0dHAvezF9Ii5mb3JtYXQoXHJcbiAgICBzeXMudmVyc2lvbl9pbmZvLCBfX3ZlcnNpb25fX1xyXG4pICAjIHR5cGU6IHN0clxyXG5cclxuUkVTUE9OU0VTID0gKFxyXG4gICAgaHR0cC5zZXJ2ZXIuQmFzZUhUVFBSZXF1ZXN0SGFuZGxlci5yZXNwb25zZXNcclxuKSAgIyB0eXBlOiBNYXBwaW5nW2ludCwgVHVwbGVbc3RyLCBzdHJdXVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9odHRwX2V4Y2VwdGlvbnMucHknLCBiJyIiIkxvdy1sZXZlbCBodHRwIHJlbGF0ZWQgZXhjZXB0aW9ucy4iIiJcclxuXHJcblxyXG5mcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIFVuaW9uXHJcblxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgX0NJTXVsdGlEaWN0XHJcblxyXG5fX2FsbF9fID0gKCJIdHRwUHJvY2Vzc2luZ0Vycm9yIiwpXHJcblxyXG5cclxuY2xhc3MgSHR0cFByb2Nlc3NpbmdFcnJvcihFeGNlcHRpb24pOlxyXG4gICAgIiIiSFRUUCBlcnJvci5cclxuXHJcbiAgICBTaG9ydGN1dCBmb3IgcmFpc2luZyBIVFRQIGVycm9ycyB3aXRoIGN1c3RvbSBjb2RlLCBtZXNzYWdlIGFuZCBoZWFkZXJzLlxyXG5cclxuICAgIGNvZGU6IEhUVFAgRXJyb3IgY29kZS5cclxuICAgIG1lc3NhZ2U6IChvcHRpb25hbCkgRXJyb3IgbWVzc2FnZS5cclxuICAgIGhlYWRlcnM6IChvcHRpb25hbCkgSGVhZGVycyB0byBiZSBzZW50IGluIHJlc3BvbnNlLCBhIGxpc3Qgb2YgcGFpcnNcclxuICAgICIiIlxyXG5cclxuICAgIGNvZGUgPSAwXHJcbiAgICBtZXNzYWdlID0gIiJcclxuICAgIGhlYWRlcnMgPSBOb25lXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgKixcclxuICAgICAgICBjb2RlOiBPcHRpb25hbFtpbnRdID0gTm9uZSxcclxuICAgICAgICBtZXNzYWdlOiBzdHIgPSAiIixcclxuICAgICAgICBoZWFkZXJzOiBPcHRpb25hbFtfQ0lNdWx0aURpY3RdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBjb2RlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLmNvZGUgPSBjb2RlXHJcbiAgICAgICAgc2VsZi5oZWFkZXJzID0gaGVhZGVyc1xyXG4gICAgICAgIHNlbGYubWVzc2FnZSA9IG1lc3NhZ2VcclxuXHJcbiAgICBkZWYgX19zdHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIGYie3NlbGYuY29kZX0sIG1lc3NhZ2U9e3NlbGYubWVzc2FnZSFyfSJcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBmIjx7c2VsZi5fX2NsYXNzX18uX19uYW1lX199OiB7c2VsZn0+IlxyXG5cclxuXHJcbmNsYXNzIEJhZEh0dHBNZXNzYWdlKEh0dHBQcm9jZXNzaW5nRXJyb3IpOlxyXG5cclxuICAgIGNvZGUgPSA0MDBcclxuICAgIG1lc3NhZ2UgPSAiQmFkIFJlcXVlc3QiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG1lc3NhZ2U6IHN0ciwgKiwgaGVhZGVyczogT3B0aW9uYWxbX0NJTXVsdGlEaWN0XSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhtZXNzYWdlPW1lc3NhZ2UsIGhlYWRlcnM9aGVhZGVycylcclxuICAgICAgICBzZWxmLmFyZ3MgPSAobWVzc2FnZSwpXHJcblxyXG5cclxuY2xhc3MgSHR0cEJhZFJlcXVlc3QoQmFkSHR0cE1lc3NhZ2UpOlxyXG5cclxuICAgIGNvZGUgPSA0MDBcclxuICAgIG1lc3NhZ2UgPSAiQmFkIFJlcXVlc3QiXHJcblxyXG5cclxuY2xhc3MgUGF5bG9hZEVuY29kaW5nRXJyb3IoQmFkSHR0cE1lc3NhZ2UpOlxyXG4gICAgIiIiQmFzZSBjbGFzcyBmb3IgcGF5bG9hZCBlcnJvcnMiIiJcclxuXHJcblxyXG5jbGFzcyBDb250ZW50RW5jb2RpbmdFcnJvcihQYXlsb2FkRW5jb2RpbmdFcnJvcik6XHJcbiAgICAiIiJDb250ZW50IGVuY29kaW5nIGVycm9yLiIiIlxyXG5cclxuXHJcbmNsYXNzIFRyYW5zZmVyRW5jb2RpbmdFcnJvcihQYXlsb2FkRW5jb2RpbmdFcnJvcik6XHJcbiAgICAiIiJ0cmFuc2ZlciBlbmNvZGluZyBlcnJvci4iIiJcclxuXHJcblxyXG5jbGFzcyBDb250ZW50TGVuZ3RoRXJyb3IoUGF5bG9hZEVuY29kaW5nRXJyb3IpOlxyXG4gICAgIiIiTm90IGVub3VnaCBkYXRhIGZvciBzYXRpc2Z5IGNvbnRlbnQgbGVuZ3RoIGhlYWRlci4iIiJcclxuXHJcblxyXG5jbGFzcyBMaW5lVG9vTG9uZyhCYWRIdHRwTWVzc2FnZSk6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgbGluZTogc3RyLCBsaW1pdDogc3RyID0gIlVua25vd24iLCBhY3R1YWxfc2l6ZTogc3RyID0gIlVua25vd24iXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhcclxuICAgICAgICAgICAgZiJHb3QgbW9yZSB0aGFuIHtsaW1pdH0gYnl0ZXMgKHthY3R1YWxfc2l6ZX0pIHdoZW4gcmVhZGluZyB7bGluZX0uIlxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLmFyZ3MgPSAobGluZSwgbGltaXQsIGFjdHVhbF9zaXplKVxyXG5cclxuXHJcbmNsYXNzIEludmFsaWRIZWFkZXIoQmFkSHR0cE1lc3NhZ2UpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGhkcjogVW5pb25bYnl0ZXMsIHN0cl0pIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShoZHIsIGJ5dGVzKTpcclxuICAgICAgICAgICAgaGRyID0gaGRyLmRlY29kZSgidXRmLTgiLCAic3Vycm9nYXRlZXNjYXBlIilcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKGYiSW52YWxpZCBIVFRQIEhlYWRlcjoge2hkcn0iKVxyXG4gICAgICAgIHNlbGYuaGRyID0gaGRyXHJcbiAgICAgICAgc2VsZi5hcmdzID0gKGhkciwpXHJcblxyXG5cclxuY2xhc3MgQmFkU3RhdHVzTGluZShCYWRIdHRwTWVzc2FnZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgbGluZTogc3RyID0gIiIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UobGluZSwgc3RyKTpcclxuICAgICAgICAgICAgbGluZSA9IHJlcHIobGluZSlcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKGYiQmFkIHN0YXR1cyBsaW5lIHtsaW5lIXJ9IilcclxuICAgICAgICBzZWxmLmFyZ3MgPSAobGluZSwpXHJcbiAgICAgICAgc2VsZi5saW5lID0gbGluZVxyXG5cclxuXHJcbmNsYXNzIEludmFsaWRVUkxFcnJvcihCYWRIdHRwTWVzc2FnZSk6XHJcbiAgICBwYXNzXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3R5cGVkZWZzLnB5JywgYidpbXBvcnQganNvblxyXG5pbXBvcnQgb3NcclxuaW1wb3J0IHN5c1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgKFxyXG4gICAgVFlQRV9DSEVDS0lORyxcclxuICAgIEFueSxcclxuICAgIEF3YWl0YWJsZSxcclxuICAgIENhbGxhYmxlLFxyXG4gICAgSXRlcmFibGUsXHJcbiAgICBNYXBwaW5nLFxyXG4gICAgVHVwbGUsXHJcbiAgICBVbmlvbixcclxuKVxyXG5cclxuZnJvbSBtdWx0aWRpY3QgaW1wb3J0IENJTXVsdGlEaWN0LCBDSU11bHRpRGljdFByb3h5LCBNdWx0aURpY3QsIE11bHRpRGljdFByb3h5LCBpc3RyXHJcbmZyb20geWFybCBpbXBvcnQgVVJMXHJcblxyXG4jIFRoZXNlIGFyZSBmb3Igb3RoZXIgbW9kdWxlcyB0byB1c2UgKHRvIGF2b2lkIHJlcGVhdGluZyB0aGUgY29uZGl0aW9uYWwgaW1wb3J0KS5cclxuaWYgc3lzLnZlcnNpb25faW5mbyA+PSAoMywgOCk6XHJcbiAgICBmcm9tIHR5cGluZyBpbXBvcnQgRmluYWwgYXMgRmluYWwsIFByb3RvY29sIGFzIFByb3RvY29sLCBUeXBlZERpY3QgYXMgVHlwZWREaWN0XHJcbmVsc2U6XHJcbiAgICBmcm9tIHR5cGluZ19leHRlbnNpb25zIGltcG9ydCAoICAjIG5vcWE6IEY0MDFcclxuICAgICAgICBGaW5hbCxcclxuICAgICAgICBQcm90b2NvbCBhcyBQcm90b2NvbCxcclxuICAgICAgICBUeXBlZERpY3QgYXMgVHlwZWREaWN0LFxyXG4gICAgKVxyXG5cclxuREVGQVVMVF9KU09OX0VOQ09ERVIgPSBqc29uLmR1bXBzXHJcbkRFRkFVTFRfSlNPTl9ERUNPREVSID0ganNvbi5sb2Fkc1xyXG5cclxuaWYgVFlQRV9DSEVDS0lORzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgX0NJTXVsdGlEaWN0ID0gQ0lNdWx0aURpY3Rbc3RyXVxyXG4gICAgX0NJTXVsdGlEaWN0UHJveHkgPSBDSU11bHRpRGljdFByb3h5W3N0cl1cclxuICAgIF9NdWx0aURpY3QgPSBNdWx0aURpY3Rbc3RyXVxyXG4gICAgX011bHRpRGljdFByb3h5ID0gTXVsdGlEaWN0UHJveHlbc3RyXVxyXG4gICAgZnJvbSBodHRwLmNvb2tpZXMgaW1wb3J0IEJhc2VDb29raWUsIE1vcnNlbFxyXG5cclxuICAgIGZyb20gLndlYiBpbXBvcnQgUmVxdWVzdCwgU3RyZWFtUmVzcG9uc2VcclxuZWxzZTpcclxuICAgIF9DSU11bHRpRGljdCA9IENJTXVsdGlEaWN0XHJcbiAgICBfQ0lNdWx0aURpY3RQcm94eSA9IENJTXVsdGlEaWN0UHJveHlcclxuICAgIF9NdWx0aURpY3QgPSBNdWx0aURpY3RcclxuICAgIF9NdWx0aURpY3RQcm94eSA9IE11bHRpRGljdFByb3h5XHJcblxyXG5CeXRlaXNoID0gVW5pb25bYnl0ZXMsIGJ5dGVhcnJheSwgbWVtb3J5dmlld11cclxuSlNPTkVuY29kZXIgPSBDYWxsYWJsZVtbQW55XSwgc3RyXVxyXG5KU09ORGVjb2RlciA9IENhbGxhYmxlW1tzdHJdLCBBbnldXHJcbkxvb3NlSGVhZGVycyA9IFVuaW9uW01hcHBpbmdbVW5pb25bc3RyLCBpc3RyXSwgc3RyXSwgX0NJTXVsdGlEaWN0LCBfQ0lNdWx0aURpY3RQcm94eV1cclxuUmF3SGVhZGVycyA9IFR1cGxlW1R1cGxlW2J5dGVzLCBieXRlc10sIC4uLl1cclxuU3RyT3JVUkwgPSBVbmlvbltzdHIsIFVSTF1cclxuXHJcbkxvb3NlQ29va2llc01hcHBpbmdzID0gTWFwcGluZ1tzdHIsIFVuaW9uW3N0ciwgIkJhc2VDb29raWVbc3RyXSIsICJNb3JzZWxbQW55XSJdXVxyXG5Mb29zZUNvb2tpZXNJdGVyYWJsZXMgPSBJdGVyYWJsZVtcclxuICAgIFR1cGxlW3N0ciwgVW5pb25bc3RyLCAiQmFzZUNvb2tpZVtzdHJdIiwgIk1vcnNlbFtBbnldIl1dXHJcbl1cclxuTG9vc2VDb29raWVzID0gVW5pb25bXHJcbiAgICBMb29zZUNvb2tpZXNNYXBwaW5ncyxcclxuICAgIExvb3NlQ29va2llc0l0ZXJhYmxlcyxcclxuICAgICJCYXNlQ29va2llW3N0cl0iLFxyXG5dXHJcblxyXG5IYW5kbGVyID0gQ2FsbGFibGVbWyJSZXF1ZXN0Il0sIEF3YWl0YWJsZVsiU3RyZWFtUmVzcG9uc2UiXV1cclxuXHJcblBhdGhMaWtlID0gVW5pb25bc3RyLCAib3MuUGF0aExpa2Vbc3RyXSJdXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3dlYi5weScsIGInaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IGxvZ2dpbmdcclxuaW1wb3J0IHNvY2tldFxyXG5pbXBvcnQgc3lzXHJcbmZyb20gYXJncGFyc2UgaW1wb3J0IEFyZ3VtZW50UGFyc2VyXHJcbmZyb20gY29sbGVjdGlvbnMuYWJjIGltcG9ydCBJdGVyYWJsZVxyXG5mcm9tIGltcG9ydGxpYiBpbXBvcnQgaW1wb3J0X21vZHVsZVxyXG5mcm9tIHR5cGluZyBpbXBvcnQgKFxyXG4gICAgQW55LFxyXG4gICAgQXdhaXRhYmxlLFxyXG4gICAgQ2FsbGFibGUsXHJcbiAgICBJdGVyYWJsZSBhcyBUeXBpbmdJdGVyYWJsZSxcclxuICAgIExpc3QsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFNldCxcclxuICAgIFR5cGUsXHJcbiAgICBVbmlvbixcclxuICAgIGNhc3QsXHJcbilcclxuXHJcbmZyb20gLmFiYyBpbXBvcnQgQWJzdHJhY3RBY2Nlc3NMb2dnZXJcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgYWxsX3Rhc2tzXHJcbmZyb20gLmxvZyBpbXBvcnQgYWNjZXNzX2xvZ2dlclxyXG5mcm9tIC53ZWJfYXBwIGltcG9ydCBBcHBsaWNhdGlvbiBhcyBBcHBsaWNhdGlvbiwgQ2xlYW51cEVycm9yIGFzIENsZWFudXBFcnJvclxyXG5mcm9tIC53ZWJfZXhjZXB0aW9ucyBpbXBvcnQgKFxyXG4gICAgSFRUUEFjY2VwdGVkIGFzIEhUVFBBY2NlcHRlZCxcclxuICAgIEhUVFBCYWRHYXRld2F5IGFzIEhUVFBCYWRHYXRld2F5LFxyXG4gICAgSFRUUEJhZFJlcXVlc3QgYXMgSFRUUEJhZFJlcXVlc3QsXHJcbiAgICBIVFRQQ2xpZW50RXJyb3IgYXMgSFRUUENsaWVudEVycm9yLFxyXG4gICAgSFRUUENvbmZsaWN0IGFzIEhUVFBDb25mbGljdCxcclxuICAgIEhUVFBDcmVhdGVkIGFzIEhUVFBDcmVhdGVkLFxyXG4gICAgSFRUUEVycm9yIGFzIEhUVFBFcnJvcixcclxuICAgIEhUVFBFeGNlcHRpb24gYXMgSFRUUEV4Y2VwdGlvbixcclxuICAgIEhUVFBFeHBlY3RhdGlvbkZhaWxlZCBhcyBIVFRQRXhwZWN0YXRpb25GYWlsZWQsXHJcbiAgICBIVFRQRmFpbGVkRGVwZW5kZW5jeSBhcyBIVFRQRmFpbGVkRGVwZW5kZW5jeSxcclxuICAgIEhUVFBGb3JiaWRkZW4gYXMgSFRUUEZvcmJpZGRlbixcclxuICAgIEhUVFBGb3VuZCBhcyBIVFRQRm91bmQsXHJcbiAgICBIVFRQR2F0ZXdheVRpbWVvdXQgYXMgSFRUUEdhdGV3YXlUaW1lb3V0LFxyXG4gICAgSFRUUEdvbmUgYXMgSFRUUEdvbmUsXHJcbiAgICBIVFRQSW5zdWZmaWNpZW50U3RvcmFnZSBhcyBIVFRQSW5zdWZmaWNpZW50U3RvcmFnZSxcclxuICAgIEhUVFBJbnRlcm5hbFNlcnZlckVycm9yIGFzIEhUVFBJbnRlcm5hbFNlcnZlckVycm9yLFxyXG4gICAgSFRUUExlbmd0aFJlcXVpcmVkIGFzIEhUVFBMZW5ndGhSZXF1aXJlZCxcclxuICAgIEhUVFBNZXRob2ROb3RBbGxvd2VkIGFzIEhUVFBNZXRob2ROb3RBbGxvd2VkLFxyXG4gICAgSFRUUE1pc2RpcmVjdGVkUmVxdWVzdCBhcyBIVFRQTWlzZGlyZWN0ZWRSZXF1ZXN0LFxyXG4gICAgSFRUUE1vdmVkUGVybWFuZW50bHkgYXMgSFRUUE1vdmVkUGVybWFuZW50bHksXHJcbiAgICBIVFRQTXVsdGlwbGVDaG9pY2VzIGFzIEhUVFBNdWx0aXBsZUNob2ljZXMsXHJcbiAgICBIVFRQTmV0d29ya0F1dGhlbnRpY2F0aW9uUmVxdWlyZWQgYXMgSFRUUE5ldHdvcmtBdXRoZW50aWNhdGlvblJlcXVpcmVkLFxyXG4gICAgSFRUUE5vQ29udGVudCBhcyBIVFRQTm9Db250ZW50LFxyXG4gICAgSFRUUE5vbkF1dGhvcml0YXRpdmVJbmZvcm1hdGlvbiBhcyBIVFRQTm9uQXV0aG9yaXRhdGl2ZUluZm9ybWF0aW9uLFxyXG4gICAgSFRUUE5vdEFjY2VwdGFibGUgYXMgSFRUUE5vdEFjY2VwdGFibGUsXHJcbiAgICBIVFRQTm90RXh0ZW5kZWQgYXMgSFRUUE5vdEV4dGVuZGVkLFxyXG4gICAgSFRUUE5vdEZvdW5kIGFzIEhUVFBOb3RGb3VuZCxcclxuICAgIEhUVFBOb3RJbXBsZW1lbnRlZCBhcyBIVFRQTm90SW1wbGVtZW50ZWQsXHJcbiAgICBIVFRQTm90TW9kaWZpZWQgYXMgSFRUUE5vdE1vZGlmaWVkLFxyXG4gICAgSFRUUE9rIGFzIEhUVFBPayxcclxuICAgIEhUVFBQYXJ0aWFsQ29udGVudCBhcyBIVFRQUGFydGlhbENvbnRlbnQsXHJcbiAgICBIVFRQUGF5bWVudFJlcXVpcmVkIGFzIEhUVFBQYXltZW50UmVxdWlyZWQsXHJcbiAgICBIVFRQUGVybWFuZW50UmVkaXJlY3QgYXMgSFRUUFBlcm1hbmVudFJlZGlyZWN0LFxyXG4gICAgSFRUUFByZWNvbmRpdGlvbkZhaWxlZCBhcyBIVFRQUHJlY29uZGl0aW9uRmFpbGVkLFxyXG4gICAgSFRUUFByZWNvbmRpdGlvblJlcXVpcmVkIGFzIEhUVFBQcmVjb25kaXRpb25SZXF1aXJlZCxcclxuICAgIEhUVFBQcm94eUF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgYXMgSFRUUFByb3h5QXV0aGVudGljYXRpb25SZXF1aXJlZCxcclxuICAgIEhUVFBSZWRpcmVjdGlvbiBhcyBIVFRQUmVkaXJlY3Rpb24sXHJcbiAgICBIVFRQUmVxdWVzdEVudGl0eVRvb0xhcmdlIGFzIEhUVFBSZXF1ZXN0RW50aXR5VG9vTGFyZ2UsXHJcbiAgICBIVFRQUmVxdWVzdEhlYWRlckZpZWxkc1Rvb0xhcmdlIGFzIEhUVFBSZXF1ZXN0SGVhZGVyRmllbGRzVG9vTGFyZ2UsXHJcbiAgICBIVFRQUmVxdWVzdFJhbmdlTm90U2F0aXNmaWFibGUgYXMgSFRUUFJlcXVlc3RSYW5nZU5vdFNhdGlzZmlhYmxlLFxyXG4gICAgSFRUUFJlcXVlc3RUaW1lb3V0IGFzIEhUVFBSZXF1ZXN0VGltZW91dCxcclxuICAgIEhUVFBSZXF1ZXN0VVJJVG9vTG9uZyBhcyBIVFRQUmVxdWVzdFVSSVRvb0xvbmcsXHJcbiAgICBIVFRQUmVzZXRDb250ZW50IGFzIEhUVFBSZXNldENvbnRlbnQsXHJcbiAgICBIVFRQU2VlT3RoZXIgYXMgSFRUUFNlZU90aGVyLFxyXG4gICAgSFRUUFNlcnZlckVycm9yIGFzIEhUVFBTZXJ2ZXJFcnJvcixcclxuICAgIEhUVFBTZXJ2aWNlVW5hdmFpbGFibGUgYXMgSFRUUFNlcnZpY2VVbmF2YWlsYWJsZSxcclxuICAgIEhUVFBTdWNjZXNzZnVsIGFzIEhUVFBTdWNjZXNzZnVsLFxyXG4gICAgSFRUUFRlbXBvcmFyeVJlZGlyZWN0IGFzIEhUVFBUZW1wb3JhcnlSZWRpcmVjdCxcclxuICAgIEhUVFBUb29NYW55UmVxdWVzdHMgYXMgSFRUUFRvb01hbnlSZXF1ZXN0cyxcclxuICAgIEhUVFBVbmF1dGhvcml6ZWQgYXMgSFRUUFVuYXV0aG9yaXplZCxcclxuICAgIEhUVFBVbmF2YWlsYWJsZUZvckxlZ2FsUmVhc29ucyBhcyBIVFRQVW5hdmFpbGFibGVGb3JMZWdhbFJlYXNvbnMsXHJcbiAgICBIVFRQVW5wcm9jZXNzYWJsZUVudGl0eSBhcyBIVFRQVW5wcm9jZXNzYWJsZUVudGl0eSxcclxuICAgIEhUVFBVbnN1cHBvcnRlZE1lZGlhVHlwZSBhcyBIVFRQVW5zdXBwb3J0ZWRNZWRpYVR5cGUsXHJcbiAgICBIVFRQVXBncmFkZVJlcXVpcmVkIGFzIEhUVFBVcGdyYWRlUmVxdWlyZWQsXHJcbiAgICBIVFRQVXNlUHJveHkgYXMgSFRUUFVzZVByb3h5LFxyXG4gICAgSFRUUFZhcmlhbnRBbHNvTmVnb3RpYXRlcyBhcyBIVFRQVmFyaWFudEFsc29OZWdvdGlhdGVzLFxyXG4gICAgSFRUUFZlcnNpb25Ob3RTdXBwb3J0ZWQgYXMgSFRUUFZlcnNpb25Ob3RTdXBwb3J0ZWQsXHJcbilcclxuZnJvbSAud2ViX2ZpbGVyZXNwb25zZSBpbXBvcnQgRmlsZVJlc3BvbnNlIGFzIEZpbGVSZXNwb25zZVxyXG5mcm9tIC53ZWJfbG9nIGltcG9ydCBBY2Nlc3NMb2dnZXJcclxuZnJvbSAud2ViX21pZGRsZXdhcmVzIGltcG9ydCAoXHJcbiAgICBtaWRkbGV3YXJlIGFzIG1pZGRsZXdhcmUsXHJcbiAgICBub3JtYWxpemVfcGF0aF9taWRkbGV3YXJlIGFzIG5vcm1hbGl6ZV9wYXRoX21pZGRsZXdhcmUsXHJcbilcclxuZnJvbSAud2ViX3Byb3RvY29sIGltcG9ydCAoXHJcbiAgICBQYXlsb2FkQWNjZXNzRXJyb3IgYXMgUGF5bG9hZEFjY2Vzc0Vycm9yLFxyXG4gICAgUmVxdWVzdEhhbmRsZXIgYXMgUmVxdWVzdEhhbmRsZXIsXHJcbiAgICBSZXF1ZXN0UGF5bG9hZEVycm9yIGFzIFJlcXVlc3RQYXlsb2FkRXJyb3IsXHJcbilcclxuZnJvbSAud2ViX3JlcXVlc3QgaW1wb3J0IChcclxuICAgIEJhc2VSZXF1ZXN0IGFzIEJhc2VSZXF1ZXN0LFxyXG4gICAgRmlsZUZpZWxkIGFzIEZpbGVGaWVsZCxcclxuICAgIFJlcXVlc3QgYXMgUmVxdWVzdCxcclxuKVxyXG5mcm9tIC53ZWJfcmVzcG9uc2UgaW1wb3J0IChcclxuICAgIENvbnRlbnRDb2RpbmcgYXMgQ29udGVudENvZGluZyxcclxuICAgIFJlc3BvbnNlIGFzIFJlc3BvbnNlLFxyXG4gICAgU3RyZWFtUmVzcG9uc2UgYXMgU3RyZWFtUmVzcG9uc2UsXHJcbiAgICBqc29uX3Jlc3BvbnNlIGFzIGpzb25fcmVzcG9uc2UsXHJcbilcclxuZnJvbSAud2ViX3JvdXRlZGVmIGltcG9ydCAoXHJcbiAgICBBYnN0cmFjdFJvdXRlRGVmIGFzIEFic3RyYWN0Um91dGVEZWYsXHJcbiAgICBSb3V0ZURlZiBhcyBSb3V0ZURlZixcclxuICAgIFJvdXRlVGFibGVEZWYgYXMgUm91dGVUYWJsZURlZixcclxuICAgIFN0YXRpY0RlZiBhcyBTdGF0aWNEZWYsXHJcbiAgICBkZWxldGUgYXMgZGVsZXRlLFxyXG4gICAgZ2V0IGFzIGdldCxcclxuICAgIGhlYWQgYXMgaGVhZCxcclxuICAgIG9wdGlvbnMgYXMgb3B0aW9ucyxcclxuICAgIHBhdGNoIGFzIHBhdGNoLFxyXG4gICAgcG9zdCBhcyBwb3N0LFxyXG4gICAgcHV0IGFzIHB1dCxcclxuICAgIHJvdXRlIGFzIHJvdXRlLFxyXG4gICAgc3RhdGljIGFzIHN0YXRpYyxcclxuICAgIHZpZXcgYXMgdmlldyxcclxuKVxyXG5mcm9tIC53ZWJfcnVubmVyIGltcG9ydCAoXHJcbiAgICBBcHBSdW5uZXIgYXMgQXBwUnVubmVyLFxyXG4gICAgQmFzZVJ1bm5lciBhcyBCYXNlUnVubmVyLFxyXG4gICAgQmFzZVNpdGUgYXMgQmFzZVNpdGUsXHJcbiAgICBHcmFjZWZ1bEV4aXQgYXMgR3JhY2VmdWxFeGl0LFxyXG4gICAgTmFtZWRQaXBlU2l0ZSBhcyBOYW1lZFBpcGVTaXRlLFxyXG4gICAgU2VydmVyUnVubmVyIGFzIFNlcnZlclJ1bm5lcixcclxuICAgIFNvY2tTaXRlIGFzIFNvY2tTaXRlLFxyXG4gICAgVENQU2l0ZSBhcyBUQ1BTaXRlLFxyXG4gICAgVW5peFNpdGUgYXMgVW5peFNpdGUsXHJcbilcclxuZnJvbSAud2ViX3NlcnZlciBpbXBvcnQgU2VydmVyIGFzIFNlcnZlclxyXG5mcm9tIC53ZWJfdXJsZGlzcGF0Y2hlciBpbXBvcnQgKFxyXG4gICAgQWJzdHJhY3RSZXNvdXJjZSBhcyBBYnN0cmFjdFJlc291cmNlLFxyXG4gICAgQWJzdHJhY3RSb3V0ZSBhcyBBYnN0cmFjdFJvdXRlLFxyXG4gICAgRHluYW1pY1Jlc291cmNlIGFzIER5bmFtaWNSZXNvdXJjZSxcclxuICAgIFBsYWluUmVzb3VyY2UgYXMgUGxhaW5SZXNvdXJjZSxcclxuICAgIFJlc291cmNlIGFzIFJlc291cmNlLFxyXG4gICAgUmVzb3VyY2VSb3V0ZSBhcyBSZXNvdXJjZVJvdXRlLFxyXG4gICAgU3RhdGljUmVzb3VyY2UgYXMgU3RhdGljUmVzb3VyY2UsXHJcbiAgICBVcmxEaXNwYXRjaGVyIGFzIFVybERpc3BhdGNoZXIsXHJcbiAgICBVcmxNYXBwaW5nTWF0Y2hJbmZvIGFzIFVybE1hcHBpbmdNYXRjaEluZm8sXHJcbiAgICBWaWV3IGFzIFZpZXcsXHJcbilcclxuZnJvbSAud2ViX3dzIGltcG9ydCAoXHJcbiAgICBXZWJTb2NrZXRSZWFkeSBhcyBXZWJTb2NrZXRSZWFkeSxcclxuICAgIFdlYlNvY2tldFJlc3BvbnNlIGFzIFdlYlNvY2tldFJlc3BvbnNlLFxyXG4gICAgV1NNc2dUeXBlIGFzIFdTTXNnVHlwZSxcclxuKVxyXG5cclxuX19hbGxfXyA9IChcclxuICAgICMgd2ViX2FwcFxyXG4gICAgIkFwcGxpY2F0aW9uIixcclxuICAgICJDbGVhbnVwRXJyb3IiLFxyXG4gICAgIyB3ZWJfZXhjZXB0aW9uc1xyXG4gICAgIkhUVFBBY2NlcHRlZCIsXHJcbiAgICAiSFRUUEJhZEdhdGV3YXkiLFxyXG4gICAgIkhUVFBCYWRSZXF1ZXN0IixcclxuICAgICJIVFRQQ2xpZW50RXJyb3IiLFxyXG4gICAgIkhUVFBDb25mbGljdCIsXHJcbiAgICAiSFRUUENyZWF0ZWQiLFxyXG4gICAgIkhUVFBFcnJvciIsXHJcbiAgICAiSFRUUEV4Y2VwdGlvbiIsXHJcbiAgICAiSFRUUEV4cGVjdGF0aW9uRmFpbGVkIixcclxuICAgICJIVFRQRmFpbGVkRGVwZW5kZW5jeSIsXHJcbiAgICAiSFRUUEZvcmJpZGRlbiIsXHJcbiAgICAiSFRUUEZvdW5kIixcclxuICAgICJIVFRQR2F0ZXdheVRpbWVvdXQiLFxyXG4gICAgIkhUVFBHb25lIixcclxuICAgICJIVFRQSW5zdWZmaWNpZW50U3RvcmFnZSIsXHJcbiAgICAiSFRUUEludGVybmFsU2VydmVyRXJyb3IiLFxyXG4gICAgIkhUVFBMZW5ndGhSZXF1aXJlZCIsXHJcbiAgICAiSFRUUE1ldGhvZE5vdEFsbG93ZWQiLFxyXG4gICAgIkhUVFBNaXNkaXJlY3RlZFJlcXVlc3QiLFxyXG4gICAgIkhUVFBNb3ZlZFBlcm1hbmVudGx5IixcclxuICAgICJIVFRQTXVsdGlwbGVDaG9pY2VzIixcclxuICAgICJIVFRQTmV0d29ya0F1dGhlbnRpY2F0aW9uUmVxdWlyZWQiLFxyXG4gICAgIkhUVFBOb0NvbnRlbnQiLFxyXG4gICAgIkhUVFBOb25BdXRob3JpdGF0aXZlSW5mb3JtYXRpb24iLFxyXG4gICAgIkhUVFBOb3RBY2NlcHRhYmxlIixcclxuICAgICJIVFRQTm90RXh0ZW5kZWQiLFxyXG4gICAgIkhUVFBOb3RGb3VuZCIsXHJcbiAgICAiSFRUUE5vdEltcGxlbWVudGVkIixcclxuICAgICJIVFRQTm90TW9kaWZpZWQiLFxyXG4gICAgIkhUVFBPayIsXHJcbiAgICAiSFRUUFBhcnRpYWxDb250ZW50IixcclxuICAgICJIVFRQUGF5bWVudFJlcXVpcmVkIixcclxuICAgICJIVFRQUGVybWFuZW50UmVkaXJlY3QiLFxyXG4gICAgIkhUVFBQcmVjb25kaXRpb25GYWlsZWQiLFxyXG4gICAgIkhUVFBQcmVjb25kaXRpb25SZXF1aXJlZCIsXHJcbiAgICAiSFRUUFByb3h5QXV0aGVudGljYXRpb25SZXF1aXJlZCIsXHJcbiAgICAiSFRUUFJlZGlyZWN0aW9uIixcclxuICAgICJIVFRQUmVxdWVzdEVudGl0eVRvb0xhcmdlIixcclxuICAgICJIVFRQUmVxdWVzdEhlYWRlckZpZWxkc1Rvb0xhcmdlIixcclxuICAgICJIVFRQUmVxdWVzdFJhbmdlTm90U2F0aXNmaWFibGUiLFxyXG4gICAgIkhUVFBSZXF1ZXN0VGltZW91dCIsXHJcbiAgICAiSFRUUFJlcXVlc3RVUklUb29Mb25nIixcclxuICAgICJIVFRQUmVzZXRDb250ZW50IixcclxuICAgICJIVFRQU2VlT3RoZXIiLFxyXG4gICAgIkhUVFBTZXJ2ZXJFcnJvciIsXHJcbiAgICAiSFRUUFNlcnZpY2VVbmF2YWlsYWJsZSIsXHJcbiAgICAiSFRUUFN1Y2Nlc3NmdWwiLFxyXG4gICAgIkhUVFBUZW1wb3JhcnlSZWRpcmVjdCIsXHJcbiAgICAiSFRUUFRvb01hbnlSZXF1ZXN0cyIsXHJcbiAgICAiSFRUUFVuYXV0aG9yaXplZCIsXHJcbiAgICAiSFRUUFVuYXZhaWxhYmxlRm9yTGVnYWxSZWFzb25zIixcclxuICAgICJIVFRQVW5wcm9jZXNzYWJsZUVudGl0eSIsXHJcbiAgICAiSFRUUFVuc3VwcG9ydGVkTWVkaWFUeXBlIixcclxuICAgICJIVFRQVXBncmFkZVJlcXVpcmVkIixcclxuICAgICJIVFRQVXNlUHJveHkiLFxyXG4gICAgIkhUVFBWYXJpYW50QWxzb05lZ290aWF0ZXMiLFxyXG4gICAgIkhUVFBWZXJzaW9uTm90U3VwcG9ydGVkIixcclxuICAgICMgd2ViX2ZpbGVyZXNwb25zZVxyXG4gICAgIkZpbGVSZXNwb25zZSIsXHJcbiAgICAjIHdlYl9taWRkbGV3YXJlc1xyXG4gICAgIm1pZGRsZXdhcmUiLFxyXG4gICAgIm5vcm1hbGl6ZV9wYXRoX21pZGRsZXdhcmUiLFxyXG4gICAgIyB3ZWJfcHJvdG9jb2xcclxuICAgICJQYXlsb2FkQWNjZXNzRXJyb3IiLFxyXG4gICAgIlJlcXVlc3RIYW5kbGVyIixcclxuICAgICJSZXF1ZXN0UGF5bG9hZEVycm9yIixcclxuICAgICMgd2ViX3JlcXVlc3RcclxuICAgICJCYXNlUmVxdWVzdCIsXHJcbiAgICAiRmlsZUZpZWxkIixcclxuICAgICJSZXF1ZXN0IixcclxuICAgICMgd2ViX3Jlc3BvbnNlXHJcbiAgICAiQ29udGVudENvZGluZyIsXHJcbiAgICAiUmVzcG9uc2UiLFxyXG4gICAgIlN0cmVhbVJlc3BvbnNlIixcclxuICAgICJqc29uX3Jlc3BvbnNlIixcclxuICAgICMgd2ViX3JvdXRlZGVmXHJcbiAgICAiQWJzdHJhY3RSb3V0ZURlZiIsXHJcbiAgICAiUm91dGVEZWYiLFxyXG4gICAgIlJvdXRlVGFibGVEZWYiLFxyXG4gICAgIlN0YXRpY0RlZiIsXHJcbiAgICAiZGVsZXRlIixcclxuICAgICJnZXQiLFxyXG4gICAgImhlYWQiLFxyXG4gICAgIm9wdGlvbnMiLFxyXG4gICAgInBhdGNoIixcclxuICAgICJwb3N0IixcclxuICAgICJwdXQiLFxyXG4gICAgInJvdXRlIixcclxuICAgICJzdGF0aWMiLFxyXG4gICAgInZpZXciLFxyXG4gICAgIyB3ZWJfcnVubmVyXHJcbiAgICAiQXBwUnVubmVyIixcclxuICAgICJCYXNlUnVubmVyIixcclxuICAgICJCYXNlU2l0ZSIsXHJcbiAgICAiR3JhY2VmdWxFeGl0IixcclxuICAgICJTZXJ2ZXJSdW5uZXIiLFxyXG4gICAgIlNvY2tTaXRlIixcclxuICAgICJUQ1BTaXRlIixcclxuICAgICJVbml4U2l0ZSIsXHJcbiAgICAiTmFtZWRQaXBlU2l0ZSIsXHJcbiAgICAjIHdlYl9zZXJ2ZXJcclxuICAgICJTZXJ2ZXIiLFxyXG4gICAgIyB3ZWJfdXJsZGlzcGF0Y2hlclxyXG4gICAgIkFic3RyYWN0UmVzb3VyY2UiLFxyXG4gICAgIkFic3RyYWN0Um91dGUiLFxyXG4gICAgIkR5bmFtaWNSZXNvdXJjZSIsXHJcbiAgICAiUGxhaW5SZXNvdXJjZSIsXHJcbiAgICAiUmVzb3VyY2UiLFxyXG4gICAgIlJlc291cmNlUm91dGUiLFxyXG4gICAgIlN0YXRpY1Jlc291cmNlIixcclxuICAgICJVcmxEaXNwYXRjaGVyIixcclxuICAgICJVcmxNYXBwaW5nTWF0Y2hJbmZvIixcclxuICAgICJWaWV3IixcclxuICAgICMgd2ViX3dzXHJcbiAgICAiV2ViU29ja2V0UmVhZHkiLFxyXG4gICAgIldlYlNvY2tldFJlc3BvbnNlIixcclxuICAgICJXU01zZ1R5cGUiLFxyXG4gICAgIyB3ZWJcclxuICAgICJydW5fYXBwIixcclxuKVxyXG5cclxuXHJcbnRyeTpcclxuICAgIGZyb20gc3NsIGltcG9ydCBTU0xDb250ZXh0XHJcbmV4Y2VwdCBJbXBvcnRFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgU1NMQ29udGV4dCA9IEFueSAgIyB0eXBlOiBpZ25vcmVbbWlzYyxhc3NpZ25tZW50XVxyXG5cclxuSG9zdFNlcXVlbmNlID0gVHlwaW5nSXRlcmFibGVbc3RyXVxyXG5cclxuXHJcbmFzeW5jIGRlZiBfcnVuX2FwcChcclxuICAgIGFwcDogVW5pb25bQXBwbGljYXRpb24sIEF3YWl0YWJsZVtBcHBsaWNhdGlvbl1dLFxyXG4gICAgKixcclxuICAgIGhvc3Q6IE9wdGlvbmFsW1VuaW9uW3N0ciwgSG9zdFNlcXVlbmNlXV0gPSBOb25lLFxyXG4gICAgcG9ydDogT3B0aW9uYWxbaW50XSA9IE5vbmUsXHJcbiAgICBwYXRoOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgIHNvY2s6IE9wdGlvbmFsW3NvY2tldC5zb2NrZXRdID0gTm9uZSxcclxuICAgIHNodXRkb3duX3RpbWVvdXQ6IGZsb2F0ID0gNjAuMCxcclxuICAgIGtlZXBhbGl2ZV90aW1lb3V0OiBmbG9hdCA9IDc1LjAsXHJcbiAgICBzc2xfY29udGV4dDogT3B0aW9uYWxbU1NMQ29udGV4dF0gPSBOb25lLFxyXG4gICAgcHJpbnQ6IENhbGxhYmxlWy4uLiwgTm9uZV0gPSBwcmludCxcclxuICAgIGJhY2tsb2c6IGludCA9IDEyOCxcclxuICAgIGFjY2Vzc19sb2dfY2xhc3M6IFR5cGVbQWJzdHJhY3RBY2Nlc3NMb2dnZXJdID0gQWNjZXNzTG9nZ2VyLFxyXG4gICAgYWNjZXNzX2xvZ19mb3JtYXQ6IHN0ciA9IEFjY2Vzc0xvZ2dlci5MT0dfRk9STUFULFxyXG4gICAgYWNjZXNzX2xvZzogT3B0aW9uYWxbbG9nZ2luZy5Mb2dnZXJdID0gYWNjZXNzX2xvZ2dlcixcclxuICAgIGhhbmRsZV9zaWduYWxzOiBib29sID0gVHJ1ZSxcclxuICAgIHJldXNlX2FkZHJlc3M6IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSxcclxuICAgIHJldXNlX3BvcnQ6IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSxcclxuKSAtPiBOb25lOlxyXG4gICAgIyBBIGludGVybmFsIGZ1bmN0aW8gdG8gYWN0dWFsbHkgZG8gYWxsIGRpcnR5IGpvYiBmb3IgYXBwbGljYXRpb24gcnVubmluZ1xyXG4gICAgaWYgYXN5bmNpby5pc2Nvcm91dGluZShhcHApOlxyXG4gICAgICAgIGFwcCA9IGF3YWl0IGFwcCAgIyB0eXBlOiBpZ25vcmVbbWlzY11cclxuXHJcbiAgICBhcHAgPSBjYXN0KEFwcGxpY2F0aW9uLCBhcHApXHJcblxyXG4gICAgcnVubmVyID0gQXBwUnVubmVyKFxyXG4gICAgICAgIGFwcCxcclxuICAgICAgICBoYW5kbGVfc2lnbmFscz1oYW5kbGVfc2lnbmFscyxcclxuICAgICAgICBhY2Nlc3NfbG9nX2NsYXNzPWFjY2Vzc19sb2dfY2xhc3MsXHJcbiAgICAgICAgYWNjZXNzX2xvZ19mb3JtYXQ9YWNjZXNzX2xvZ19mb3JtYXQsXHJcbiAgICAgICAgYWNjZXNzX2xvZz1hY2Nlc3NfbG9nLFxyXG4gICAgICAgIGtlZXBhbGl2ZV90aW1lb3V0PWtlZXBhbGl2ZV90aW1lb3V0LFxyXG4gICAgKVxyXG5cclxuICAgIGF3YWl0IHJ1bm5lci5zZXR1cCgpXHJcblxyXG4gICAgc2l0ZXMgPSBbXSAgIyB0eXBlOiBMaXN0W0Jhc2VTaXRlXVxyXG5cclxuICAgIHRyeTpcclxuICAgICAgICBpZiBob3N0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKGhvc3QsIChzdHIsIGJ5dGVzLCBieXRlYXJyYXksIG1lbW9yeXZpZXcpKTpcclxuICAgICAgICAgICAgICAgIHNpdGVzLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICBUQ1BTaXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5uZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNodXRkb3duX3RpbWVvdXQ9c2h1dGRvd25fdGltZW91dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3NsX2NvbnRleHQ9c3NsX2NvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tsb2c9YmFja2xvZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV1c2VfYWRkcmVzcz1yZXVzZV9hZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXVzZV9wb3J0PXJldXNlX3BvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgZm9yIGggaW4gaG9zdDpcclxuICAgICAgICAgICAgICAgICAgICBzaXRlcy5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRDUFNpdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW5uZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9ydCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNodXRkb3duX3RpbWVvdXQ9c2h1dGRvd25fdGltZW91dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNzbF9jb250ZXh0PXNzbF9jb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2xvZz1iYWNrbG9nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV1c2VfYWRkcmVzcz1yZXVzZV9hZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV1c2VfcG9ydD1yZXVzZV9wb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsaWYgcGF0aCBpcyBOb25lIGFuZCBzb2NrIGlzIE5vbmUgb3IgcG9ydCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2l0ZXMuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgVENQU2l0ZShcclxuICAgICAgICAgICAgICAgICAgICBydW5uZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9ydD1wb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgIHNodXRkb3duX3RpbWVvdXQ9c2h1dGRvd25fdGltZW91dCxcclxuICAgICAgICAgICAgICAgICAgICBzc2xfY29udGV4dD1zc2xfY29udGV4dCxcclxuICAgICAgICAgICAgICAgICAgICBiYWNrbG9nPWJhY2tsb2csXHJcbiAgICAgICAgICAgICAgICAgICAgcmV1c2VfYWRkcmVzcz1yZXVzZV9hZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldXNlX3BvcnQ9cmV1c2VfcG9ydCxcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBwYXRoIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKHBhdGgsIChzdHIsIGJ5dGVzLCBieXRlYXJyYXksIG1lbW9yeXZpZXcpKTpcclxuICAgICAgICAgICAgICAgIHNpdGVzLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICBVbml4U2l0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgcnVubmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaHV0ZG93bl90aW1lb3V0PXNodXRkb3duX3RpbWVvdXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNzbF9jb250ZXh0PXNzbF9jb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrbG9nPWJhY2tsb2csXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgZm9yIHAgaW4gcGF0aDpcclxuICAgICAgICAgICAgICAgICAgICBzaXRlcy5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFVuaXhTaXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVubmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNodXRkb3duX3RpbWVvdXQ9c2h1dGRvd25fdGltZW91dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNzbF9jb250ZXh0PXNzbF9jb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2xvZz1iYWNrbG9nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBzb2NrIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShzb2NrLCBJdGVyYWJsZSk6XHJcbiAgICAgICAgICAgICAgICBzaXRlcy5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgU29ja1NpdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc29jayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGRvd25fdGltZW91dD1zaHV0ZG93bl90aW1lb3V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzc2xfY29udGV4dD1zc2xfY29udGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2xvZz1iYWNrbG9nLFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGZvciBzIGluIHNvY2s6XHJcbiAgICAgICAgICAgICAgICAgICAgc2l0ZXMuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTb2NrU2l0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaHV0ZG93bl90aW1lb3V0PXNodXRkb3duX3RpbWVvdXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzc2xfY29udGV4dD1zc2xfY29udGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tsb2c9YmFja2xvZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICBmb3Igc2l0ZSBpbiBzaXRlczpcclxuICAgICAgICAgICAgYXdhaXQgc2l0ZS5zdGFydCgpXHJcblxyXG4gICAgICAgIGlmIHByaW50OiAgIyBwcmFnbWE6IG5vIGJyYW5jaFxyXG4gICAgICAgICAgICBuYW1lcyA9IHNvcnRlZChzdHIocy5uYW1lKSBmb3IgcyBpbiBydW5uZXIuc2l0ZXMpXHJcbiAgICAgICAgICAgIHByaW50KFxyXG4gICAgICAgICAgICAgICAgIj09PT09PT09IFJ1bm5pbmcgb24ge30gPT09PT09PT1cXG4iXHJcbiAgICAgICAgICAgICAgICAiKFByZXNzIENUUkwrQyB0byBxdWl0KSIuZm9ybWF0KCIsICIuam9pbihuYW1lcykpXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgIyBzbGVlcCBmb3JldmVyIGJ5IDEgaG91ciBpbnRlcnZhbHMsXHJcbiAgICAgICAgIyBvbiBXaW5kb3dzIGJlZm9yZSBQeXRob24gMy44IHdha2UgdXAgZXZlcnkgMSBzZWNvbmQgdG8gaGFuZGxlXHJcbiAgICAgICAgIyBDdHJsK0Mgc21vb3RobHlcclxuICAgICAgICBpZiBzeXMucGxhdGZvcm0gPT0gIndpbjMyIiBhbmQgc3lzLnZlcnNpb25faW5mbyA8ICgzLCA4KTpcclxuICAgICAgICAgICAgZGVsYXkgPSAxXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgZGVsYXkgPSAzNjAwXHJcblxyXG4gICAgICAgIHdoaWxlIFRydWU6XHJcbiAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoZGVsYXkpXHJcbiAgICBmaW5hbGx5OlxyXG4gICAgICAgIGF3YWl0IHJ1bm5lci5jbGVhbnVwKClcclxuXHJcblxyXG5kZWYgX2NhbmNlbF90YXNrcyhcclxuICAgIHRvX2NhbmNlbDogU2V0WyJhc3luY2lvLlRhc2tbQW55XSJdLCBsb29wOiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXHJcbikgLT4gTm9uZTpcclxuICAgIGlmIG5vdCB0b19jYW5jZWw6XHJcbiAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgZm9yIHRhc2sgaW4gdG9fY2FuY2VsOlxyXG4gICAgICAgIHRhc2suY2FuY2VsKClcclxuXHJcbiAgICBsb29wLnJ1bl91bnRpbF9jb21wbGV0ZShhc3luY2lvLmdhdGhlcigqdG9fY2FuY2VsLCByZXR1cm5fZXhjZXB0aW9ucz1UcnVlKSlcclxuXHJcbiAgICBmb3IgdGFzayBpbiB0b19jYW5jZWw6XHJcbiAgICAgICAgaWYgdGFzay5jYW5jZWxsZWQoKTpcclxuICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICBpZiB0YXNrLmV4Y2VwdGlvbigpIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBsb29wLmNhbGxfZXhjZXB0aW9uX2hhbmRsZXIoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgIm1lc3NhZ2UiOiAidW5oYW5kbGVkIGV4Y2VwdGlvbiBkdXJpbmcgYXN5bmNpby5ydW4oKSBzaHV0ZG93biIsXHJcbiAgICAgICAgICAgICAgICAgICAgImV4Y2VwdGlvbiI6IHRhc2suZXhjZXB0aW9uKCksXHJcbiAgICAgICAgICAgICAgICAgICAgInRhc2siOiB0YXNrLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcblxyXG5cclxuZGVmIHJ1bl9hcHAoXHJcbiAgICBhcHA6IFVuaW9uW0FwcGxpY2F0aW9uLCBBd2FpdGFibGVbQXBwbGljYXRpb25dXSxcclxuICAgICosXHJcbiAgICBob3N0OiBPcHRpb25hbFtVbmlvbltzdHIsIEhvc3RTZXF1ZW5jZV1dID0gTm9uZSxcclxuICAgIHBvcnQ6IE9wdGlvbmFsW2ludF0gPSBOb25lLFxyXG4gICAgcGF0aDogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICBzb2NrOiBPcHRpb25hbFtzb2NrZXQuc29ja2V0XSA9IE5vbmUsXHJcbiAgICBzaHV0ZG93bl90aW1lb3V0OiBmbG9hdCA9IDYwLjAsXHJcbiAgICBrZWVwYWxpdmVfdGltZW91dDogZmxvYXQgPSA3NS4wLFxyXG4gICAgc3NsX2NvbnRleHQ6IE9wdGlvbmFsW1NTTENvbnRleHRdID0gTm9uZSxcclxuICAgIHByaW50OiBDYWxsYWJsZVsuLi4sIE5vbmVdID0gcHJpbnQsXHJcbiAgICBiYWNrbG9nOiBpbnQgPSAxMjgsXHJcbiAgICBhY2Nlc3NfbG9nX2NsYXNzOiBUeXBlW0Fic3RyYWN0QWNjZXNzTG9nZ2VyXSA9IEFjY2Vzc0xvZ2dlcixcclxuICAgIGFjY2Vzc19sb2dfZm9ybWF0OiBzdHIgPSBBY2Nlc3NMb2dnZXIuTE9HX0ZPUk1BVCxcclxuICAgIGFjY2Vzc19sb2c6IE9wdGlvbmFsW2xvZ2dpbmcuTG9nZ2VyXSA9IGFjY2Vzc19sb2dnZXIsXHJcbiAgICBoYW5kbGVfc2lnbmFsczogYm9vbCA9IFRydWUsXHJcbiAgICByZXVzZV9hZGRyZXNzOiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICByZXVzZV9wb3J0OiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbikgLT4gTm9uZTpcclxuICAgICIiIlJ1biBhbiBhcHAgbG9jYWxseSIiIlxyXG4gICAgaWYgbG9vcCBpcyBOb25lOlxyXG4gICAgICAgIGxvb3AgPSBhc3luY2lvLm5ld19ldmVudF9sb29wKClcclxuXHJcbiAgICAjIENvbmZpZ3VyZSBpZiBhbmQgb25seSBpZiBpbiBkZWJ1Z2dpbmcgbW9kZSBhbmQgdXNpbmcgdGhlIGRlZmF1bHQgbG9nZ2VyXHJcbiAgICBpZiBsb29wLmdldF9kZWJ1ZygpIGFuZCBhY2Nlc3NfbG9nIGFuZCBhY2Nlc3NfbG9nLm5hbWUgPT0gImFpb2h0dHAuYWNjZXNzIjpcclxuICAgICAgICBpZiBhY2Nlc3NfbG9nLmxldmVsID09IGxvZ2dpbmcuTk9UU0VUOlxyXG4gICAgICAgICAgICBhY2Nlc3NfbG9nLnNldExldmVsKGxvZ2dpbmcuREVCVUcpXHJcbiAgICAgICAgaWYgbm90IGFjY2Vzc19sb2cuaGFzSGFuZGxlcnMoKTpcclxuICAgICAgICAgICAgYWNjZXNzX2xvZy5hZGRIYW5kbGVyKGxvZ2dpbmcuU3RyZWFtSGFuZGxlcigpKVxyXG5cclxuICAgIG1haW5fdGFzayA9IGxvb3AuY3JlYXRlX3Rhc2soXHJcbiAgICAgICAgX3J1bl9hcHAoXHJcbiAgICAgICAgICAgIGFwcCxcclxuICAgICAgICAgICAgaG9zdD1ob3N0LFxyXG4gICAgICAgICAgICBwb3J0PXBvcnQsXHJcbiAgICAgICAgICAgIHBhdGg9cGF0aCxcclxuICAgICAgICAgICAgc29jaz1zb2NrLFxyXG4gICAgICAgICAgICBzaHV0ZG93bl90aW1lb3V0PXNodXRkb3duX3RpbWVvdXQsXHJcbiAgICAgICAgICAgIGtlZXBhbGl2ZV90aW1lb3V0PWtlZXBhbGl2ZV90aW1lb3V0LFxyXG4gICAgICAgICAgICBzc2xfY29udGV4dD1zc2xfY29udGV4dCxcclxuICAgICAgICAgICAgcHJpbnQ9cHJpbnQsXHJcbiAgICAgICAgICAgIGJhY2tsb2c9YmFja2xvZyxcclxuICAgICAgICAgICAgYWNjZXNzX2xvZ19jbGFzcz1hY2Nlc3NfbG9nX2NsYXNzLFxyXG4gICAgICAgICAgICBhY2Nlc3NfbG9nX2Zvcm1hdD1hY2Nlc3NfbG9nX2Zvcm1hdCxcclxuICAgICAgICAgICAgYWNjZXNzX2xvZz1hY2Nlc3NfbG9nLFxyXG4gICAgICAgICAgICBoYW5kbGVfc2lnbmFscz1oYW5kbGVfc2lnbmFscyxcclxuICAgICAgICAgICAgcmV1c2VfYWRkcmVzcz1yZXVzZV9hZGRyZXNzLFxyXG4gICAgICAgICAgICByZXVzZV9wb3J0PXJldXNlX3BvcnQsXHJcbiAgICAgICAgKVxyXG4gICAgKVxyXG5cclxuICAgIHRyeTpcclxuICAgICAgICBhc3luY2lvLnNldF9ldmVudF9sb29wKGxvb3ApXHJcbiAgICAgICAgbG9vcC5ydW5fdW50aWxfY29tcGxldGUobWFpbl90YXNrKVxyXG4gICAgZXhjZXB0IChHcmFjZWZ1bEV4aXQsIEtleWJvYXJkSW50ZXJydXB0KTogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgIHBhc3NcclxuICAgIGZpbmFsbHk6XHJcbiAgICAgICAgX2NhbmNlbF90YXNrcyh7bWFpbl90YXNrfSwgbG9vcClcclxuICAgICAgICBfY2FuY2VsX3Rhc2tzKGFsbF90YXNrcyhsb29wKSwgbG9vcClcclxuICAgICAgICBsb29wLnJ1bl91bnRpbF9jb21wbGV0ZShsb29wLnNodXRkb3duX2FzeW5jZ2VucygpKVxyXG4gICAgICAgIGxvb3AuY2xvc2UoKVxyXG5cclxuXHJcbmRlZiBtYWluKGFyZ3Y6IExpc3Rbc3RyXSkgLT4gTm9uZTpcclxuICAgIGFyZ19wYXJzZXIgPSBBcmd1bWVudFBhcnNlcihcclxuICAgICAgICBkZXNjcmlwdGlvbj0iYWlvaHR0cC53ZWIgQXBwbGljYXRpb24gc2VydmVyIiwgcHJvZz0iYWlvaHR0cC53ZWIiXHJcbiAgICApXHJcbiAgICBhcmdfcGFyc2VyLmFkZF9hcmd1bWVudChcclxuICAgICAgICAiZW50cnlfZnVuYyIsXHJcbiAgICAgICAgaGVscD0oXHJcbiAgICAgICAgICAgICJDYWxsYWJsZSByZXR1cm5pbmcgdGhlIGBhaW9odHRwLndlYi5BcHBsaWNhdGlvbmAgaW5zdGFuY2UgdG8gIlxyXG4gICAgICAgICAgICAicnVuLiBTaG91bGQgYmUgc3BlY2lmaWVkIGluIHRoZSBcJ21vZHVsZTpmdW5jdGlvblwnIHN5bnRheC4iXHJcbiAgICAgICAgKSxcclxuICAgICAgICBtZXRhdmFyPSJlbnRyeS1mdW5jIixcclxuICAgIClcclxuICAgIGFyZ19wYXJzZXIuYWRkX2FyZ3VtZW50KFxyXG4gICAgICAgICItSCIsXHJcbiAgICAgICAgIi0taG9zdG5hbWUiLFxyXG4gICAgICAgIGhlbHA9IlRDUC9JUCBob3N0bmFtZSB0byBzZXJ2ZSBvbiAoZGVmYXVsdDogJShkZWZhdWx0KXIpIixcclxuICAgICAgICBkZWZhdWx0PSJsb2NhbGhvc3QiLFxyXG4gICAgKVxyXG4gICAgYXJnX3BhcnNlci5hZGRfYXJndW1lbnQoXHJcbiAgICAgICAgIi1QIixcclxuICAgICAgICAiLS1wb3J0IixcclxuICAgICAgICBoZWxwPSJUQ1AvSVAgcG9ydCB0byBzZXJ2ZSBvbiAoZGVmYXVsdDogJShkZWZhdWx0KXIpIixcclxuICAgICAgICB0eXBlPWludCxcclxuICAgICAgICBkZWZhdWx0PSI4MDgwIixcclxuICAgIClcclxuICAgIGFyZ19wYXJzZXIuYWRkX2FyZ3VtZW50KFxyXG4gICAgICAgICItVSIsXHJcbiAgICAgICAgIi0tcGF0aCIsXHJcbiAgICAgICAgaGVscD0iVW5peCBmaWxlIHN5c3RlbSBwYXRoIHRvIHNlcnZlIG9uLiBTcGVjaWZ5aW5nIGEgcGF0aCB3aWxsIGNhdXNlICJcclxuICAgICAgICAiaG9zdG5hbWUgYW5kIHBvcnQgYXJndW1lbnRzIHRvIGJlIGlnbm9yZWQuIixcclxuICAgIClcclxuICAgIGFyZ3MsIGV4dHJhX2FyZ3YgPSBhcmdfcGFyc2VyLnBhcnNlX2tub3duX2FyZ3MoYXJndilcclxuXHJcbiAgICAjIEltcG9ydCBsb2dpY1xyXG4gICAgbW9kX3N0ciwgXywgZnVuY19zdHIgPSBhcmdzLmVudHJ5X2Z1bmMucGFydGl0aW9uKCI6IilcclxuICAgIGlmIG5vdCBmdW5jX3N0ciBvciBub3QgbW9kX3N0cjpcclxuICAgICAgICBhcmdfcGFyc2VyLmVycm9yKCJcJ2VudHJ5LWZ1bmNcJyBub3QgaW4gXCdtb2R1bGU6ZnVuY3Rpb25cJyBzeW50YXgiKVxyXG4gICAgaWYgbW9kX3N0ci5zdGFydHN3aXRoKCIuIik6XHJcbiAgICAgICAgYXJnX3BhcnNlci5lcnJvcigicmVsYXRpdmUgbW9kdWxlIG5hbWVzIG5vdCBzdXBwb3J0ZWQiKVxyXG4gICAgdHJ5OlxyXG4gICAgICAgIG1vZHVsZSA9IGltcG9ydF9tb2R1bGUobW9kX3N0cilcclxuICAgIGV4Y2VwdCBJbXBvcnRFcnJvciBhcyBleDpcclxuICAgICAgICBhcmdfcGFyc2VyLmVycm9yKGYidW5hYmxlIHRvIGltcG9ydCB7bW9kX3N0cn06IHtleH0iKVxyXG4gICAgdHJ5OlxyXG4gICAgICAgIGZ1bmMgPSBnZXRhdHRyKG1vZHVsZSwgZnVuY19zdHIpXHJcbiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6XHJcbiAgICAgICAgYXJnX3BhcnNlci5lcnJvcihmIm1vZHVsZSB7bW9kX3N0ciFyfSBoYXMgbm8gYXR0cmlidXRlIHtmdW5jX3N0ciFyfSIpXHJcblxyXG4gICAgIyBDb21wYXRpYmlsaXR5IGxvZ2ljXHJcbiAgICBpZiBhcmdzLnBhdGggaXMgbm90IE5vbmUgYW5kIG5vdCBoYXNhdHRyKHNvY2tldCwgIkFGX1VOSVgiKTpcclxuICAgICAgICBhcmdfcGFyc2VyLmVycm9yKFxyXG4gICAgICAgICAgICAiZmlsZSBzeXN0ZW0gcGF0aHMgbm90IHN1cHBvcnRlZCBieSB5b3VyIG9wZXJhdGluZyIgIiBlbnZpcm9ubWVudCJcclxuICAgICAgICApXHJcblxyXG4gICAgbG9nZ2luZy5iYXNpY0NvbmZpZyhsZXZlbD1sb2dnaW5nLkRFQlVHKVxyXG5cclxuICAgIGFwcCA9IGZ1bmMoZXh0cmFfYXJndilcclxuICAgIHJ1bl9hcHAoYXBwLCBob3N0PWFyZ3MuaG9zdG5hbWUsIHBvcnQ9YXJncy5wb3J0LCBwYXRoPWFyZ3MucGF0aClcclxuICAgIGFyZ19wYXJzZXIuZXhpdChtZXNzYWdlPSJTdG9wcGVkXFxuIilcclxuXHJcblxyXG5pZiBfX25hbWVfXyA9PSAiX19tYWluX18iOiAgIyBwcmFnbWE6IG5vIGJyYW5jaFxyXG4gICAgbWFpbihzeXMuYXJndlsxOl0pICAjIHByYWdtYTogbm8gY292ZXJcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvYWJjLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgbG9nZ2luZ1xyXG5mcm9tIGFiYyBpbXBvcnQgQUJDLCBhYnN0cmFjdG1ldGhvZFxyXG5mcm9tIGNvbGxlY3Rpb25zLmFiYyBpbXBvcnQgU2l6ZWRcclxuZnJvbSBodHRwLmNvb2tpZXMgaW1wb3J0IEJhc2VDb29raWUsIE1vcnNlbFxyXG5mcm9tIHR5cGluZyBpbXBvcnQgKFxyXG4gICAgVFlQRV9DSEVDS0lORyxcclxuICAgIEFueSxcclxuICAgIEF3YWl0YWJsZSxcclxuICAgIENhbGxhYmxlLFxyXG4gICAgRGljdCxcclxuICAgIEdlbmVyYXRvcixcclxuICAgIEl0ZXJhYmxlLFxyXG4gICAgTGlzdCxcclxuICAgIE9wdGlvbmFsLFxyXG4gICAgVHVwbGUsXHJcbilcclxuXHJcbmZyb20gbXVsdGlkaWN0IGltcG9ydCBDSU11bHRpRGljdFxyXG5mcm9tIHlhcmwgaW1wb3J0IFVSTFxyXG5cclxuZnJvbSAuaGVscGVycyBpbXBvcnQgZ2V0X3J1bm5pbmdfbG9vcFxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgTG9vc2VDb29raWVzXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIC53ZWJfYXBwIGltcG9ydCBBcHBsaWNhdGlvblxyXG4gICAgZnJvbSAud2ViX2V4Y2VwdGlvbnMgaW1wb3J0IEhUVFBFeGNlcHRpb25cclxuICAgIGZyb20gLndlYl9yZXF1ZXN0IGltcG9ydCBCYXNlUmVxdWVzdCwgUmVxdWVzdFxyXG4gICAgZnJvbSAud2ViX3Jlc3BvbnNlIGltcG9ydCBTdHJlYW1SZXNwb25zZVxyXG5lbHNlOlxyXG4gICAgQmFzZVJlcXVlc3QgPSBSZXF1ZXN0ID0gQXBwbGljYXRpb24gPSBTdHJlYW1SZXNwb25zZSA9IE5vbmVcclxuICAgIEhUVFBFeGNlcHRpb24gPSBOb25lXHJcblxyXG5cclxuY2xhc3MgQWJzdHJhY3RSb3V0ZXIoQUJDKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2Zyb3plbiA9IEZhbHNlXHJcblxyXG4gICAgZGVmIHBvc3RfaW5pdChzZWxmLCBhcHA6IEFwcGxpY2F0aW9uKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlBvc3QgaW5pdCBzdGFnZS5cclxuXHJcbiAgICAgICAgTm90IGFuIGFic3RyYWN0IG1ldGhvZCBmb3Igc2FrZSBvZiBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LFxyXG4gICAgICAgIGJ1dCBpZiB0aGUgcm91dGVyIHdhbnRzIHRvIGJlIGF3YXJlIG9mIHRoZSBhcHBsaWNhdGlvblxyXG4gICAgICAgIGl0IGNhbiBvdmVycmlkZSB0aGlzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGZyb3plbihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mcm96ZW5cclxuXHJcbiAgICBkZWYgZnJlZXplKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiRnJlZXplIHJvdXRlci4iIiJcclxuICAgICAgICBzZWxmLl9mcm96ZW4gPSBUcnVlXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBhc3luYyBkZWYgcmVzb2x2ZShzZWxmLCByZXF1ZXN0OiBSZXF1ZXN0KSAtPiAiQWJzdHJhY3RNYXRjaEluZm8iOlxyXG4gICAgICAgICIiIlJldHVybiBNQVRDSF9JTkZPIGZvciBnaXZlbiByZXF1ZXN0IiIiXHJcblxyXG5cclxuY2xhc3MgQWJzdHJhY3RNYXRjaEluZm8oQUJDKTpcclxuICAgIEBwcm9wZXJ0eSAgIyBwcmFnbWE6IG5vIGJyYW5jaFxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgaGFuZGxlcihzZWxmKSAtPiBDYWxsYWJsZVtbUmVxdWVzdF0sIEF3YWl0YWJsZVtTdHJlYW1SZXNwb25zZV1dOlxyXG4gICAgICAgICIiIkV4ZWN1dGUgbWF0Y2hlZCByZXF1ZXN0IGhhbmRsZXIiIiJcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGV4cGVjdF9oYW5kbGVyKHNlbGYpIC0+IENhbGxhYmxlW1tSZXF1ZXN0XSwgQXdhaXRhYmxlW05vbmVdXTpcclxuICAgICAgICAiIiJFeHBlY3QgaGFuZGxlciBmb3IgMTAwLWNvbnRpbnVlIHByb2Nlc3NpbmciIiJcclxuXHJcbiAgICBAcHJvcGVydHkgICMgcHJhZ21hOiBubyBicmFuY2hcclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGh0dHBfZXhjZXB0aW9uKHNlbGYpIC0+IE9wdGlvbmFsW0hUVFBFeGNlcHRpb25dOlxyXG4gICAgICAgICIiIkhUVFBFeGNlcHRpb24gaW5zdGFuY2UgcmFpc2VkIG9uIHJvdXRlclwncyByZXNvbHZpbmcsIG9yIE5vbmUiIiJcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2QgICMgcHJhZ21hOiBubyBicmFuY2hcclxuICAgIGRlZiBnZXRfaW5mbyhzZWxmKSAtPiBEaWN0W3N0ciwgQW55XTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBkaWN0IHdpdGggYWRkaXRpb25hbCBpbmZvIHVzZWZ1bCBmb3IgaW50cm9zcGVjdGlvbiIiIlxyXG5cclxuICAgIEBwcm9wZXJ0eSAgIyBwcmFnbWE6IG5vIGJyYW5jaFxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgYXBwcyhzZWxmKSAtPiBUdXBsZVtBcHBsaWNhdGlvbiwgLi4uXTpcclxuICAgICAgICAiIiJTdGFjayBvZiBuZXN0ZWQgYXBwbGljYXRpb25zLlxyXG5cclxuICAgICAgICBUb3AgbGV2ZWwgYXBwbGljYXRpb24gaXMgbGVmdC1tb3N0IGVsZW1lbnQuXHJcblxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGFkZF9hcHAoc2VsZiwgYXBwOiBBcHBsaWNhdGlvbikgLT4gTm9uZTpcclxuICAgICAgICAiIiJBZGQgYXBwbGljYXRpb24gdG8gdGhlIG5lc3RlZCBhcHBzIHN0YWNrLiIiIlxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGZyZWV6ZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkZyZWV6ZSB0aGUgbWF0Y2ggaW5mby5cclxuXHJcbiAgICAgICAgVGhlIG1ldGhvZCBpcyBjYWxsZWQgYWZ0ZXIgcm91dGUgcmVzb2x1dGlvbi5cclxuXHJcbiAgICAgICAgQWZ0ZXIgdGhlIGNhbGwgLmFkZF9hcHAoKSBpcyBmb3JiaWRkZW4uXHJcblxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIEFic3RyYWN0VmlldyhBQkMpOlxyXG4gICAgIiIiQWJzdHJhY3QgY2xhc3MgYmFzZWQgdmlldy4iIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgcmVxdWVzdDogUmVxdWVzdCkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9yZXF1ZXN0ID0gcmVxdWVzdFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJlcXVlc3Qoc2VsZikgLT4gUmVxdWVzdDpcclxuICAgICAgICAiIiJSZXF1ZXN0IGluc3RhbmNlLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZXF1ZXN0XHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgX19hd2FpdF9fKHNlbGYpIC0+IEdlbmVyYXRvcltBbnksIE5vbmUsIFN0cmVhbVJlc3BvbnNlXTpcclxuICAgICAgICAiIiJFeGVjdXRlIHRoZSB2aWV3IGhhbmRsZXIuIiIiXHJcblxyXG5cclxuY2xhc3MgQWJzdHJhY3RSZXNvbHZlcihBQkMpOlxyXG4gICAgIiIiQWJzdHJhY3QgRE5TIHJlc29sdmVyLiIiIlxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgYXN5bmMgZGVmIHJlc29sdmUoc2VsZiwgaG9zdDogc3RyLCBwb3J0OiBpbnQsIGZhbWlseTogaW50KSAtPiBMaXN0W0RpY3Rbc3RyLCBBbnldXTpcclxuICAgICAgICAiIiJSZXR1cm4gSVAgYWRkcmVzcyBmb3IgZ2l2ZW4gaG9zdG5hbWUiIiJcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGFzeW5jIGRlZiBjbG9zZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlJlbGVhc2UgcmVzb2x2ZXIiIiJcclxuXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBJdGVyYWJsZUJhc2UgPSBJdGVyYWJsZVtNb3JzZWxbc3RyXV1cclxuZWxzZTpcclxuICAgIEl0ZXJhYmxlQmFzZSA9IEl0ZXJhYmxlXHJcblxyXG5cclxuQ2xlYXJDb29raWVQcmVkaWNhdGUgPSBDYWxsYWJsZVtbIk1vcnNlbFtzdHJdIl0sIGJvb2xdXHJcblxyXG5cclxuY2xhc3MgQWJzdHJhY3RDb29raWVKYXIoU2l6ZWQsIEl0ZXJhYmxlQmFzZSk6XHJcbiAgICAiIiJBYnN0cmFjdCBDb29raWUgSmFyLiIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqLCBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGdldF9ydW5uaW5nX2xvb3AobG9vcClcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBjbGVhcihzZWxmLCBwcmVkaWNhdGU6IE9wdGlvbmFsW0NsZWFyQ29va2llUHJlZGljYXRlXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQ2xlYXIgYWxsIGNvb2tpZXMgaWYgbm8gcHJlZGljYXRlIGlzIHBhc3NlZC4iIiJcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBjbGVhcl9kb21haW4oc2VsZiwgZG9tYWluOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQ2xlYXIgYWxsIGNvb2tpZXMgZm9yIGRvbWFpbiBhbmQgYWxsIHN1YmRvbWFpbnMuIiIiXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgdXBkYXRlX2Nvb2tpZXMoc2VsZiwgY29va2llczogTG9vc2VDb29raWVzLCByZXNwb25zZV91cmw6IFVSTCA9IFVSTCgpKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlVwZGF0ZSBjb29raWVzLiIiIlxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGZpbHRlcl9jb29raWVzKHNlbGYsIHJlcXVlc3RfdXJsOiBVUkwpIC0+ICJCYXNlQ29va2llW3N0cl0iOlxyXG4gICAgICAgICIiIlJldHVybiB0aGUgamFyXCdzIGNvb2tpZXMgZmlsdGVyZWQgYnkgdGhlaXIgYXR0cmlidXRlcy4iIiJcclxuXHJcblxyXG5jbGFzcyBBYnN0cmFjdFN0cmVhbVdyaXRlcihBQkMpOlxyXG4gICAgIiIiQWJzdHJhY3Qgc3RyZWFtIHdyaXRlci4iIiJcclxuXHJcbiAgICBidWZmZXJfc2l6ZSA9IDBcclxuICAgIG91dHB1dF9zaXplID0gMFxyXG4gICAgbGVuZ3RoID0gMCAgIyB0eXBlOiBPcHRpb25hbFtpbnRdXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBhc3luYyBkZWYgd3JpdGUoc2VsZiwgY2h1bms6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgICIiIldyaXRlIGNodW5rIGludG8gc3RyZWFtLiIiIlxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgYXN5bmMgZGVmIHdyaXRlX2VvZihzZWxmLCBjaHVuazogYnl0ZXMgPSBiIiIpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiV3JpdGUgbGFzdCBjaHVuay4iIiJcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGFzeW5jIGRlZiBkcmFpbihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkZsdXNoIHRoZSB3cml0ZSBidWZmZXIuIiIiXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZW5hYmxlX2NvbXByZXNzaW9uKHNlbGYsIGVuY29kaW5nOiBzdHIgPSAiZGVmbGF0ZSIpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiRW5hYmxlIEhUVFAgYm9keSBjb21wcmVzc2lvbiIiIlxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGVuYWJsZV9jaHVua2luZyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkVuYWJsZSBIVFRQIGNodW5rZWQgbW9kZSIiIlxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgYXN5bmMgZGVmIHdyaXRlX2hlYWRlcnMoXHJcbiAgICAgICAgc2VsZiwgc3RhdHVzX2xpbmU6IHN0ciwgaGVhZGVyczogIkNJTXVsdGlEaWN0W3N0cl0iXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiV3JpdGUgSFRUUCBoZWFkZXJzIiIiXHJcblxyXG5cclxuY2xhc3MgQWJzdHJhY3RBY2Nlc3NMb2dnZXIoQUJDKTpcclxuICAgICIiIkFic3RyYWN0IHdyaXRlciB0byBhY2Nlc3MgbG9nLiIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsb2dnZXI6IGxvZ2dpbmcuTG9nZ2VyLCBsb2dfZm9ybWF0OiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5sb2dnZXIgPSBsb2dnZXJcclxuICAgICAgICBzZWxmLmxvZ19mb3JtYXQgPSBsb2dfZm9ybWF0XHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgbG9nKHNlbGYsIHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LCByZXNwb25zZTogU3RyZWFtUmVzcG9uc2UsIHRpbWU6IGZsb2F0KSAtPiBOb25lOlxyXG4gICAgICAgICIiIkVtaXQgbG9nIHRvIGxvZ2dlci4iIiJcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvaGVscGVycy5weScsIGInIiIiVmFyaW91cyBoZWxwZXIgZnVuY3Rpb25zIiIiXHJcblxyXG5pbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgYmFzZTY0XHJcbmltcG9ydCBiaW5hc2NpaVxyXG5pbXBvcnQgY2dpXHJcbmltcG9ydCBkYXRldGltZVxyXG5pbXBvcnQgZnVuY3Rvb2xzXHJcbmltcG9ydCBpbnNwZWN0XHJcbmltcG9ydCBuZXRyY1xyXG5pbXBvcnQgb3NcclxuaW1wb3J0IHBsYXRmb3JtXHJcbmltcG9ydCByZVxyXG5pbXBvcnQgc3lzXHJcbmltcG9ydCB0aW1lXHJcbmltcG9ydCB3YXJuaW5nc1xyXG5pbXBvcnQgd2Vha3JlZlxyXG5mcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBuYW1lZHR1cGxlXHJcbmZyb20gY29udGV4dGxpYiBpbXBvcnQgc3VwcHJlc3NcclxuZnJvbSBlbWFpbC51dGlscyBpbXBvcnQgcGFyc2VkYXRlXHJcbmZyb20gbWF0aCBpbXBvcnQgY2VpbFxyXG5mcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGhcclxuZnJvbSB0eXBlcyBpbXBvcnQgVHJhY2ViYWNrVHlwZVxyXG5mcm9tIHR5cGluZyBpbXBvcnQgKFxyXG4gICAgQW55LFxyXG4gICAgQ2FsbGFibGUsXHJcbiAgICBDb250ZXh0TWFuYWdlcixcclxuICAgIERpY3QsXHJcbiAgICBHZW5lcmF0b3IsXHJcbiAgICBHZW5lcmljLFxyXG4gICAgSXRlcmFibGUsXHJcbiAgICBJdGVyYXRvcixcclxuICAgIExpc3QsXHJcbiAgICBNYXBwaW5nLFxyXG4gICAgT3B0aW9uYWwsXHJcbiAgICBQYXR0ZXJuLFxyXG4gICAgU2V0LFxyXG4gICAgVHVwbGUsXHJcbiAgICBUeXBlLFxyXG4gICAgVHlwZVZhcixcclxuICAgIFVuaW9uLFxyXG4gICAgY2FzdCxcclxuKVxyXG5mcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgcXVvdGVcclxuZnJvbSB1cmxsaWIucmVxdWVzdCBpbXBvcnQgZ2V0cHJveGllcywgcHJveHlfYnlwYXNzXHJcblxyXG5pbXBvcnQgYXN5bmNfdGltZW91dFxyXG5pbXBvcnQgYXR0clxyXG5mcm9tIG11bHRpZGljdCBpbXBvcnQgTXVsdGlEaWN0LCBNdWx0aURpY3RQcm94eVxyXG5mcm9tIHlhcmwgaW1wb3J0IFVSTFxyXG5cclxuZnJvbSAuIGltcG9ydCBoZHJzXHJcbmZyb20gLmxvZyBpbXBvcnQgY2xpZW50X2xvZ2dlciwgaW50ZXJuYWxfbG9nZ2VyXHJcbmZyb20gLnR5cGVkZWZzIGltcG9ydCBQYXRoTGlrZSwgUHJvdG9jb2wgICMgbm9xYVxyXG5cclxuX19hbGxfXyA9ICgiQmFzaWNBdXRoIiwgIkNoYWluTWFwUHJveHkiLCAiRVRhZyIpXHJcblxyXG5JU19NQUNPUyA9IHBsYXRmb3JtLnN5c3RlbSgpID09ICJEYXJ3aW4iXHJcbklTX1dJTkRPV1MgPSBwbGF0Zm9ybS5zeXN0ZW0oKSA9PSAiV2luZG93cyJcclxuXHJcblBZXzM2ID0gc3lzLnZlcnNpb25faW5mbyA+PSAoMywgNilcclxuUFlfMzcgPSBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA3KVxyXG5QWV8zOCA9IHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDgpXHJcblBZXzMxMCA9IHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDEwKVxyXG5cclxuaWYgc3lzLnZlcnNpb25faW5mbyA8ICgzLCA3KTpcclxuICAgIGltcG9ydCBpZG5hX3NzbFxyXG5cclxuICAgIGlkbmFfc3NsLnBhdGNoX21hdGNoX2hvc3RuYW1lKClcclxuXHJcbiAgICBkZWYgYWxsX3Rhc2tzKFxyXG4gICAgICAgIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSxcclxuICAgICkgLT4gU2V0WyJhc3luY2lvLlRhc2tbQW55XSJdOlxyXG4gICAgICAgIHRhc2tzID0gbGlzdChhc3luY2lvLlRhc2suYWxsX3Rhc2tzKGxvb3ApKVxyXG4gICAgICAgIHJldHVybiB7dCBmb3IgdCBpbiB0YXNrcyBpZiBub3QgdC5kb25lKCl9XHJcblxyXG5cclxuZWxzZTpcclxuICAgIGFsbF90YXNrcyA9IGFzeW5jaW8uYWxsX3Rhc2tzXHJcblxyXG5cclxuX1QgPSBUeXBlVmFyKCJfVCIpXHJcbl9TID0gVHlwZVZhcigiX1MiKVxyXG5cclxuXHJcbnNlbnRpbmVsID0gb2JqZWN0KCkgICMgdHlwZTogQW55XHJcbk5PX0VYVEVOU0lPTlMgPSBib29sKG9zLmVudmlyb24uZ2V0KCJBSU9IVFRQX05PX0VYVEVOU0lPTlMiKSkgICMgdHlwZTogYm9vbFxyXG5cclxuIyBOLkIuIHN5cy5mbGFncy5kZXZfbW9kZSBpcyBhdmFpbGFibGUgb24gUHl0aG9uIDMuNyssIHVzZSBnZXRhdHRyXHJcbiMgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBvbGRlciB2ZXJzaW9uc1xyXG5ERUJVRyA9IGdldGF0dHIoc3lzLmZsYWdzLCAiZGV2X21vZGUiLCBGYWxzZSkgb3IgKFxyXG4gICAgbm90IHN5cy5mbGFncy5pZ25vcmVfZW52aXJvbm1lbnQgYW5kIGJvb2wob3MuZW52aXJvbi5nZXQoIlBZVEhPTkFTWU5DSU9ERUJVRyIpKVxyXG4pICAjIHR5cGU6IGJvb2xcclxuXHJcblxyXG5DSEFSID0ge2NocihpKSBmb3IgaSBpbiByYW5nZSgwLCAxMjgpfVxyXG5DVEwgPSB7Y2hyKGkpIGZvciBpIGluIHJhbmdlKDAsIDMyKX0gfCB7XHJcbiAgICBjaHIoMTI3KSxcclxufVxyXG5TRVBBUkFUT1JTID0ge1xyXG4gICAgIigiLFxyXG4gICAgIikiLFxyXG4gICAgIjwiLFxyXG4gICAgIj4iLFxyXG4gICAgIkAiLFxyXG4gICAgIiwiLFxyXG4gICAgIjsiLFxyXG4gICAgIjoiLFxyXG4gICAgIlxcXFwiLFxyXG4gICAgXCciXCcsXHJcbiAgICAiLyIsXHJcbiAgICAiWyIsXHJcbiAgICAiXSIsXHJcbiAgICAiPyIsXHJcbiAgICAiPSIsXHJcbiAgICAieyIsXHJcbiAgICAifSIsXHJcbiAgICAiICIsXHJcbiAgICBjaHIoOSksXHJcbn1cclxuVE9LRU4gPSBDSEFSIF4gQ1RMIF4gU0VQQVJBVE9SU1xyXG5cclxuXHJcbmNsYXNzIG5vb3A6XHJcbiAgICBkZWYgX19hd2FpdF9fKHNlbGYpIC0+IEdlbmVyYXRvcltOb25lLCBOb25lLCBOb25lXTpcclxuICAgICAgICB5aWVsZFxyXG5cclxuXHJcbmNsYXNzIEJhc2ljQXV0aChuYW1lZHR1cGxlKCJCYXNpY0F1dGgiLCBbImxvZ2luIiwgInBhc3N3b3JkIiwgImVuY29kaW5nIl0pKTpcclxuICAgICIiIkh0dHAgYmFzaWMgYXV0aGVudGljYXRpb24gaGVscGVyLiIiIlxyXG5cclxuICAgIGRlZiBfX25ld19fKFxyXG4gICAgICAgIGNscywgbG9naW46IHN0ciwgcGFzc3dvcmQ6IHN0ciA9ICIiLCBlbmNvZGluZzogc3RyID0gImxhdGluMSJcclxuICAgICkgLT4gIkJhc2ljQXV0aCI6XHJcbiAgICAgICAgaWYgbG9naW4gaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTm9uZSBpcyBub3QgYWxsb3dlZCBhcyBsb2dpbiB2YWx1ZSIpXHJcblxyXG4gICAgICAgIGlmIHBhc3N3b3JkIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIk5vbmUgaXMgbm90IGFsbG93ZWQgYXMgcGFzc3dvcmQgdmFsdWUiKVxyXG5cclxuICAgICAgICBpZiAiOiIgaW4gbG9naW46XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXCdBICI6IiBpcyBub3QgYWxsb3dlZCBpbiBsb2dpbiAoUkZDIDE5NDUjc2VjdGlvbi0xMS4xKVwnKVxyXG5cclxuICAgICAgICByZXR1cm4gc3VwZXIoKS5fX25ld19fKGNscywgbG9naW4sIHBhc3N3b3JkLCBlbmNvZGluZylcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBkZWNvZGUoY2xzLCBhdXRoX2hlYWRlcjogc3RyLCBlbmNvZGluZzogc3RyID0gImxhdGluMSIpIC0+ICJCYXNpY0F1dGgiOlxyXG4gICAgICAgICIiIkNyZWF0ZSBhIEJhc2ljQXV0aCBvYmplY3QgZnJvbSBhbiBBdXRob3JpemF0aW9uIEhUVFAgaGVhZGVyLiIiIlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgYXV0aF90eXBlLCBlbmNvZGVkX2NyZWRlbnRpYWxzID0gYXV0aF9oZWFkZXIuc3BsaXQoIiAiLCAxKVxyXG4gICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDb3VsZCBub3QgcGFyc2UgYXV0aG9yaXphdGlvbiBoZWFkZXIuIilcclxuXHJcbiAgICAgICAgaWYgYXV0aF90eXBlLmxvd2VyKCkgIT0gImJhc2ljIjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5rbm93biBhdXRob3JpemF0aW9uIG1ldGhvZCAlcyIgJSBhdXRoX3R5cGUpXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgZGVjb2RlZCA9IGJhc2U2NC5iNjRkZWNvZGUoXHJcbiAgICAgICAgICAgICAgICBlbmNvZGVkX2NyZWRlbnRpYWxzLmVuY29kZSgiYXNjaWkiKSwgdmFsaWRhdGU9VHJ1ZVxyXG4gICAgICAgICAgICApLmRlY29kZShlbmNvZGluZylcclxuICAgICAgICBleGNlcHQgYmluYXNjaWkuRXJyb3I6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgYmFzZTY0IGVuY29kaW5nLiIpXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgIyBSRkMgMjYxNyBIVFRQIEF1dGhlbnRpY2F0aW9uXHJcbiAgICAgICAgICAgICMgaHR0cHM6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzI2MTcudHh0XHJcbiAgICAgICAgICAgICMgdGhlIGNvbG9uIG11c3QgYmUgcHJlc2VudCwgYnV0IHRoZSB1c2VybmFtZSBhbmQgcGFzc3dvcmQgbWF5IGJlXHJcbiAgICAgICAgICAgICMgb3RoZXJ3aXNlIGJsYW5rLlxyXG4gICAgICAgICAgICB1c2VybmFtZSwgcGFzc3dvcmQgPSBkZWNvZGVkLnNwbGl0KCI6IiwgMSlcclxuICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSW52YWxpZCBjcmVkZW50aWFscy4iKVxyXG5cclxuICAgICAgICByZXR1cm4gY2xzKHVzZXJuYW1lLCBwYXNzd29yZCwgZW5jb2Rpbmc9ZW5jb2RpbmcpXHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZnJvbV91cmwoY2xzLCB1cmw6IFVSTCwgKiwgZW5jb2Rpbmc6IHN0ciA9ICJsYXRpbjEiKSAtPiBPcHRpb25hbFsiQmFzaWNBdXRoIl06XHJcbiAgICAgICAgIiIiQ3JlYXRlIEJhc2ljQXV0aCBmcm9tIHVybC4iIiJcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh1cmwsIFVSTCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidXJsIHNob3VsZCBiZSB5YXJsLlVSTCBpbnN0YW5jZSIpXHJcbiAgICAgICAgaWYgdXJsLnVzZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICByZXR1cm4gY2xzKHVybC51c2VyLCB1cmwucGFzc3dvcmQgb3IgIiIsIGVuY29kaW5nPWVuY29kaW5nKVxyXG5cclxuICAgIGRlZiBlbmNvZGUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIkVuY29kZSBjcmVkZW50aWFscy4iIiJcclxuICAgICAgICBjcmVkcyA9IChmIntzZWxmLmxvZ2lufTp7c2VsZi5wYXNzd29yZH0iKS5lbmNvZGUoc2VsZi5lbmNvZGluZylcclxuICAgICAgICByZXR1cm4gIkJhc2ljICVzIiAlIGJhc2U2NC5iNjRlbmNvZGUoY3JlZHMpLmRlY29kZShzZWxmLmVuY29kaW5nKVxyXG5cclxuXHJcbmRlZiBzdHJpcF9hdXRoX2Zyb21fdXJsKHVybDogVVJMKSAtPiBUdXBsZVtVUkwsIE9wdGlvbmFsW0Jhc2ljQXV0aF1dOlxyXG4gICAgYXV0aCA9IEJhc2ljQXV0aC5mcm9tX3VybCh1cmwpXHJcbiAgICBpZiBhdXRoIGlzIE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIHVybCwgTm9uZVxyXG4gICAgZWxzZTpcclxuICAgICAgICByZXR1cm4gdXJsLndpdGhfdXNlcihOb25lKSwgYXV0aFxyXG5cclxuXHJcbmRlZiBuZXRyY19mcm9tX2VudigpIC0+IE9wdGlvbmFsW25ldHJjLm5ldHJjXTpcclxuICAgICIiIkxvYWQgbmV0cmMgZnJvbSBmaWxlLlxyXG5cclxuICAgIEF0dGVtcHQgdG8gbG9hZCBpdCBmcm9tIHRoZSBwYXRoIHNwZWNpZmllZCBieSB0aGUgZW52LXZhclxyXG4gICAgTkVUUkMgb3IgaW4gdGhlIGRlZmF1bHQgbG9jYXRpb24gaW4gdGhlIHVzZXJcJ3MgaG9tZSBkaXJlY3RvcnkuXHJcblxyXG4gICAgUmV0dXJucyBOb25lIGlmIGl0IGNvdWxkblwndCBiZSBmb3VuZCBvciBmYWlscyB0byBwYXJzZS5cclxuICAgICIiIlxyXG4gICAgbmV0cmNfZW52ID0gb3MuZW52aXJvbi5nZXQoIk5FVFJDIilcclxuXHJcbiAgICBpZiBuZXRyY19lbnYgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgbmV0cmNfcGF0aCA9IFBhdGgobmV0cmNfZW52KVxyXG4gICAgZWxzZTpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGhvbWVfZGlyID0gUGF0aC5ob21lKClcclxuICAgICAgICBleGNlcHQgUnVudGltZUVycm9yIGFzIGU6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgIyBpZiBwYXRobGliIGNhblwndCByZXNvbHZlIGhvbWUsIGl0IG1heSByYWlzZSBhIFJ1bnRpbWVFcnJvclxyXG4gICAgICAgICAgICBjbGllbnRfbG9nZ2VyLmRlYnVnKFxyXG4gICAgICAgICAgICAgICAgIkNvdWxkIG5vdCByZXNvbHZlIGhvbWUgZGlyZWN0b3J5IHdoZW4gIlxyXG4gICAgICAgICAgICAgICAgInRyeWluZyB0byBsb29rIGZvciAubmV0cmMgZmlsZTogJXMiLFxyXG4gICAgICAgICAgICAgICAgZSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgICAgICBuZXRyY19wYXRoID0gaG9tZV9kaXIgLyAoIl9uZXRyYyIgaWYgSVNfV0lORE9XUyBlbHNlICIubmV0cmMiKVxyXG5cclxuICAgIHRyeTpcclxuICAgICAgICByZXR1cm4gbmV0cmMubmV0cmMoc3RyKG5ldHJjX3BhdGgpKVxyXG4gICAgZXhjZXB0IG5ldHJjLk5ldHJjUGFyc2VFcnJvciBhcyBlOlxyXG4gICAgICAgIGNsaWVudF9sb2dnZXIud2FybmluZygiQ291bGQgbm90IHBhcnNlIC5uZXRyYyBmaWxlOiAlcyIsIGUpXHJcbiAgICBleGNlcHQgT1NFcnJvciBhcyBlOlxyXG4gICAgICAgICMgd2UgY291bGRuXCd0IHJlYWQgdGhlIGZpbGUgKGRvZXNuXCd0IGV4aXN0LCBwZXJtaXNzaW9ucywgZXRjLilcclxuICAgICAgICBpZiBuZXRyY19lbnYgb3IgbmV0cmNfcGF0aC5pc19maWxlKCk6XHJcbiAgICAgICAgICAgICMgb25seSB3YXJuIGlmIHRoZSBlbnZpcm9ubWVudCB3YW50ZWQgdXMgdG8gbG9hZCBpdCxcclxuICAgICAgICAgICAgIyBvciBpdCBhcHBlYXJzIGxpa2UgdGhlIGRlZmF1bHQgZmlsZSBkb2VzIGFjdHVhbGx5IGV4aXN0XHJcbiAgICAgICAgICAgIGNsaWVudF9sb2dnZXIud2FybmluZygiQ291bGQgbm90IHJlYWQgLm5ldHJjIGZpbGU6ICVzIiwgZSlcclxuXHJcbiAgICByZXR1cm4gTm9uZVxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBQcm94eUluZm86XHJcbiAgICBwcm94eTogVVJMXHJcbiAgICBwcm94eV9hdXRoOiBPcHRpb25hbFtCYXNpY0F1dGhdXHJcblxyXG5cclxuZGVmIHByb3hpZXNfZnJvbV9lbnYoKSAtPiBEaWN0W3N0ciwgUHJveHlJbmZvXTpcclxuICAgIHByb3h5X3VybHMgPSB7XHJcbiAgICAgICAgazogVVJMKHYpXHJcbiAgICAgICAgZm9yIGssIHYgaW4gZ2V0cHJveGllcygpLml0ZW1zKClcclxuICAgICAgICBpZiBrIGluICgiaHR0cCIsICJodHRwcyIsICJ3cyIsICJ3c3MiKVxyXG4gICAgfVxyXG4gICAgbmV0cmNfb2JqID0gbmV0cmNfZnJvbV9lbnYoKVxyXG4gICAgc3RyaXBwZWQgPSB7azogc3RyaXBfYXV0aF9mcm9tX3VybCh2KSBmb3IgaywgdiBpbiBwcm94eV91cmxzLml0ZW1zKCl9XHJcbiAgICByZXQgPSB7fVxyXG4gICAgZm9yIHByb3RvLCB2YWwgaW4gc3RyaXBwZWQuaXRlbXMoKTpcclxuICAgICAgICBwcm94eSwgYXV0aCA9IHZhbFxyXG4gICAgICAgIGlmIHByb3h5LnNjaGVtZSBpbiAoImh0dHBzIiwgIndzcyIpOlxyXG4gICAgICAgICAgICBjbGllbnRfbG9nZ2VyLndhcm5pbmcoXHJcbiAgICAgICAgICAgICAgICAiJXMgcHJveGllcyAlcyBhcmUgbm90IHN1cHBvcnRlZCwgaWdub3JpbmciLCBwcm94eS5zY2hlbWUudXBwZXIoKSwgcHJveHlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgIGlmIG5ldHJjX29iaiBhbmQgYXV0aCBpcyBOb25lOlxyXG4gICAgICAgICAgICBhdXRoX2Zyb21fbmV0cmMgPSBOb25lXHJcbiAgICAgICAgICAgIGlmIHByb3h5Lmhvc3QgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICBhdXRoX2Zyb21fbmV0cmMgPSBuZXRyY19vYmouYXV0aGVudGljYXRvcnMocHJveHkuaG9zdClcclxuICAgICAgICAgICAgaWYgYXV0aF9mcm9tX25ldHJjIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgIyBhdXRoX2Zyb21fbmV0cmMgaXMgYSAoYHVzZXJgLCBgYWNjb3VudGAsIGBwYXNzd29yZGApIHR1cGxlLFxyXG4gICAgICAgICAgICAgICAgIyBgdXNlcmAgYW5kIGBhY2NvdW50YCBib3RoIGNhbiBiZSB1c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICMgaWYgYHVzZXJgIGlzIE5vbmUsIHVzZSBgYWNjb3VudGBcclxuICAgICAgICAgICAgICAgICpsb2dpbnMsIHBhc3N3b3JkID0gYXV0aF9mcm9tX25ldHJjXHJcbiAgICAgICAgICAgICAgICBsb2dpbiA9IGxvZ2luc1swXSBpZiBsb2dpbnNbMF0gZWxzZSBsb2dpbnNbLTFdXHJcbiAgICAgICAgICAgICAgICBhdXRoID0gQmFzaWNBdXRoKGNhc3Qoc3RyLCBsb2dpbiksIGNhc3Qoc3RyLCBwYXNzd29yZCkpXHJcbiAgICAgICAgcmV0W3Byb3RvXSA9IFByb3h5SW5mbyhwcm94eSwgYXV0aClcclxuICAgIHJldHVybiByZXRcclxuXHJcblxyXG5kZWYgY3VycmVudF90YXNrKFxyXG4gICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4pIC0+ICJPcHRpb25hbFthc3luY2lvLlRhc2tbQW55XV0iOlxyXG4gICAgaWYgc3lzLnZlcnNpb25faW5mbyA+PSAoMywgNyk6XHJcbiAgICAgICAgcmV0dXJuIGFzeW5jaW8uY3VycmVudF90YXNrKGxvb3A9bG9vcClcclxuICAgIGVsc2U6XHJcbiAgICAgICAgcmV0dXJuIGFzeW5jaW8uVGFzay5jdXJyZW50X3Rhc2sobG9vcD1sb29wKVxyXG5cclxuXHJcbmRlZiBnZXRfcnVubmluZ19sb29wKFxyXG4gICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4pIC0+IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3A6XHJcbiAgICBpZiBsb29wIGlzIE5vbmU6XHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG4gICAgaWYgbm90IGxvb3AuaXNfcnVubmluZygpOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJUaGUgb2JqZWN0IHNob3VsZCBiZSBjcmVhdGVkIHdpdGhpbiBhbiBhc3luYyBmdW5jdGlvbiIsXHJcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgc3RhY2tsZXZlbD0zLFxyXG4gICAgICAgIClcclxuICAgICAgICBpZiBsb29wLmdldF9kZWJ1ZygpOlxyXG4gICAgICAgICAgICBpbnRlcm5hbF9sb2dnZXIud2FybmluZyhcclxuICAgICAgICAgICAgICAgICJUaGUgb2JqZWN0IHNob3VsZCBiZSBjcmVhdGVkIHdpdGhpbiBhbiBhc3luYyBmdW5jdGlvbiIsIHN0YWNrX2luZm89VHJ1ZVxyXG4gICAgICAgICAgICApXHJcbiAgICByZXR1cm4gbG9vcFxyXG5cclxuXHJcbmRlZiBpc2FzeW5jZ2VuZnVuY3Rpb24ob2JqOiBBbnkpIC0+IGJvb2w6XHJcbiAgICBmdW5jID0gZ2V0YXR0cihpbnNwZWN0LCAiaXNhc3luY2dlbmZ1bmN0aW9uIiwgTm9uZSlcclxuICAgIGlmIGZ1bmMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIGZ1bmMob2JqKSAgIyB0eXBlOiBpZ25vcmVbbm8tYW55LXJldHVybl1cclxuICAgIGVsc2U6XHJcbiAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG5cclxuZGVmIGdldF9lbnZfcHJveHlfZm9yX3VybCh1cmw6IFVSTCkgLT4gVHVwbGVbVVJMLCBPcHRpb25hbFtCYXNpY0F1dGhdXTpcclxuICAgICIiIkdldCBhIHBlcm1pdHRlZCBwcm94eSBmb3IgdGhlIGdpdmVuIFVSTCBmcm9tIHRoZSBlbnYuIiIiXHJcbiAgICBpZiB1cmwuaG9zdCBpcyBub3QgTm9uZSBhbmQgcHJveHlfYnlwYXNzKHVybC5ob3N0KTpcclxuICAgICAgICByYWlzZSBMb29rdXBFcnJvcihmIlByb3h5aW5nIGlzIGRpc2FsbG93ZWQgZm9yIGB7dXJsLmhvc3Qhcn1gIilcclxuXHJcbiAgICBwcm94aWVzX2luX2VudiA9IHByb3hpZXNfZnJvbV9lbnYoKVxyXG4gICAgdHJ5OlxyXG4gICAgICAgIHByb3h5X2luZm8gPSBwcm94aWVzX2luX2Vudlt1cmwuc2NoZW1lXVxyXG4gICAgZXhjZXB0IEtleUVycm9yOlxyXG4gICAgICAgIHJhaXNlIExvb2t1cEVycm9yKGYiTm8gcHJveGllcyBmb3VuZCBmb3IgYHt1cmwhc31gIGluIHRoZSBlbnYiKVxyXG4gICAgZWxzZTpcclxuICAgICAgICByZXR1cm4gcHJveHlfaW5mby5wcm94eSwgcHJveHlfaW5mby5wcm94eV9hdXRoXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIE1pbWVUeXBlOlxyXG4gICAgdHlwZTogc3RyXHJcbiAgICBzdWJ0eXBlOiBzdHJcclxuICAgIHN1ZmZpeDogc3RyXHJcbiAgICBwYXJhbWV0ZXJzOiAiTXVsdGlEaWN0UHJveHlbc3RyXSJcclxuXHJcblxyXG5AZnVuY3Rvb2xzLmxydV9jYWNoZShtYXhzaXplPTU2KVxyXG5kZWYgcGFyc2VfbWltZXR5cGUobWltZXR5cGU6IHN0cikgLT4gTWltZVR5cGU6XHJcbiAgICAiIiJQYXJzZXMgYSBNSU1FIHR5cGUgaW50byBpdHMgY29tcG9uZW50cy5cclxuXHJcbiAgICBtaW1ldHlwZSBpcyBhIE1JTUUgdHlwZSBzdHJpbmcuXHJcblxyXG4gICAgUmV0dXJucyBhIE1pbWVUeXBlIG9iamVjdC5cclxuXHJcbiAgICBFeGFtcGxlOlxyXG5cclxuICAgID4+PiBwYXJzZV9taW1ldHlwZShcJ3RleHQvaHRtbDsgY2hhcnNldD11dGYtOFwnKVxyXG4gICAgTWltZVR5cGUodHlwZT1cJ3RleHRcJywgc3VidHlwZT1cJ2h0bWxcJywgc3VmZml4PVwnXCcsXHJcbiAgICAgICAgICAgICBwYXJhbWV0ZXJzPXtcJ2NoYXJzZXRcJzogXCd1dGYtOFwnfSlcclxuXHJcbiAgICAiIiJcclxuICAgIGlmIG5vdCBtaW1ldHlwZTpcclxuICAgICAgICByZXR1cm4gTWltZVR5cGUoXHJcbiAgICAgICAgICAgIHR5cGU9IiIsIHN1YnR5cGU9IiIsIHN1ZmZpeD0iIiwgcGFyYW1ldGVycz1NdWx0aURpY3RQcm94eShNdWx0aURpY3QoKSlcclxuICAgICAgICApXHJcblxyXG4gICAgcGFydHMgPSBtaW1ldHlwZS5zcGxpdCgiOyIpXHJcbiAgICBwYXJhbXMgPSBNdWx0aURpY3QoKSAgIyB0eXBlOiBNdWx0aURpY3Rbc3RyXVxyXG4gICAgZm9yIGl0ZW0gaW4gcGFydHNbMTpdOlxyXG4gICAgICAgIGlmIG5vdCBpdGVtOlxyXG4gICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgIGtleSwgdmFsdWUgPSBjYXN0KFxyXG4gICAgICAgICAgICBUdXBsZVtzdHIsIHN0cl0sIGl0ZW0uc3BsaXQoIj0iLCAxKSBpZiAiPSIgaW4gaXRlbSBlbHNlIChpdGVtLCAiIilcclxuICAgICAgICApXHJcbiAgICAgICAgcGFyYW1zLmFkZChrZXkubG93ZXIoKS5zdHJpcCgpLCB2YWx1ZS5zdHJpcChcJyAiXCcpKVxyXG5cclxuICAgIGZ1bGx0eXBlID0gcGFydHNbMF0uc3RyaXAoKS5sb3dlcigpXHJcbiAgICBpZiBmdWxsdHlwZSA9PSAiKiI6XHJcbiAgICAgICAgZnVsbHR5cGUgPSAiKi8qIlxyXG5cclxuICAgIG10eXBlLCBzdHlwZSA9IChcclxuICAgICAgICBjYXN0KFR1cGxlW3N0ciwgc3RyXSwgZnVsbHR5cGUuc3BsaXQoIi8iLCAxKSlcclxuICAgICAgICBpZiAiLyIgaW4gZnVsbHR5cGVcclxuICAgICAgICBlbHNlIChmdWxsdHlwZSwgIiIpXHJcbiAgICApXHJcbiAgICBzdHlwZSwgc3VmZml4ID0gKFxyXG4gICAgICAgIGNhc3QoVHVwbGVbc3RyLCBzdHJdLCBzdHlwZS5zcGxpdCgiKyIsIDEpKSBpZiAiKyIgaW4gc3R5cGUgZWxzZSAoc3R5cGUsICIiKVxyXG4gICAgKVxyXG5cclxuICAgIHJldHVybiBNaW1lVHlwZShcclxuICAgICAgICB0eXBlPW10eXBlLCBzdWJ0eXBlPXN0eXBlLCBzdWZmaXg9c3VmZml4LCBwYXJhbWV0ZXJzPU11bHRpRGljdFByb3h5KHBhcmFtcylcclxuICAgIClcclxuXHJcblxyXG5kZWYgZ3Vlc3NfZmlsZW5hbWUob2JqOiBBbnksIGRlZmF1bHQ6IE9wdGlvbmFsW3N0cl0gPSBOb25lKSAtPiBPcHRpb25hbFtzdHJdOlxyXG4gICAgbmFtZSA9IGdldGF0dHIob2JqLCAibmFtZSIsIE5vbmUpXHJcbiAgICBpZiBuYW1lIGFuZCBpc2luc3RhbmNlKG5hbWUsIHN0cikgYW5kIG5hbWVbMF0gIT0gIjwiIGFuZCBuYW1lWy0xXSAhPSAiPiI6XHJcbiAgICAgICAgcmV0dXJuIFBhdGgobmFtZSkubmFtZVxyXG4gICAgcmV0dXJuIGRlZmF1bHRcclxuXHJcblxyXG5ub3RfcXRleHRfcmUgPSByZS5jb21waWxlKHIiW15cXDA0MVxcMDQzLVxcMTMzXFwxMzUtXFwxNzZdIilcclxuUUNPTlRFTlQgPSB7Y2hyKGkpIGZvciBpIGluIHJhbmdlKDB4MjAsIDB4N0YpfSB8IHsiXFx0In1cclxuXHJcblxyXG5kZWYgcXVvdGVkX3N0cmluZyhjb250ZW50OiBzdHIpIC0+IHN0cjpcclxuICAgICIiIlJldHVybiA3LWJpdCBjb250ZW50IGFzIHF1b3RlZC1zdHJpbmcuXHJcblxyXG4gICAgRm9ybWF0IGNvbnRlbnQgaW50byBhIHF1b3RlZC1zdHJpbmcgYXMgZGVmaW5lZCBpbiBSRkM1MzIyIGZvclxyXG4gICAgSW50ZXJuZXQgTWVzc2FnZSBGb3JtYXQuIE5vdGljZSB0aGF0IHRoaXMgaXMgbm90IHRoZSA4LWJpdCBIVFRQXHJcbiAgICBmb3JtYXQsIGJ1dCB0aGUgNy1iaXQgZW1haWwgZm9ybWF0LiBDb250ZW50IG11c3QgYmUgaW4gdXNhc2NpaSBvclxyXG4gICAgYSBWYWx1ZUVycm9yIGlzIHJhaXNlZC5cclxuICAgICIiIlxyXG4gICAgaWYgbm90IChRQ09OVEVOVCA+IHNldChjb250ZW50KSk6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmImJhZCBjb250ZW50IGZvciBxdW90ZWQtc3RyaW5nIHtjb250ZW50IXJ9IilcclxuICAgIHJldHVybiBub3RfcXRleHRfcmUuc3ViKGxhbWJkYSB4OiAiXFxcXCIgKyB4Lmdyb3VwKDApLCBjb250ZW50KVxyXG5cclxuXHJcbmRlZiBjb250ZW50X2Rpc3Bvc2l0aW9uX2hlYWRlcihcclxuICAgIGRpc3B0eXBlOiBzdHIsIHF1b3RlX2ZpZWxkczogYm9vbCA9IFRydWUsIF9jaGFyc2V0OiBzdHIgPSAidXRmLTgiLCAqKnBhcmFtczogc3RyXHJcbikgLT4gc3RyOlxyXG4gICAgIiIiU2V0cyBgYENvbnRlbnQtRGlzcG9zaXRpb25gYCBoZWFkZXIgZm9yIE1JTUUuXHJcblxyXG4gICAgVGhpcyBpcyB0aGUgTUlNRSBwYXlsb2FkIENvbnRlbnQtRGlzcG9zaXRpb24gaGVhZGVyIGZyb20gUkZDIDIxODNcclxuICAgIGFuZCBSRkMgNzU3OSBzZWN0aW9uIDQuMiwgbm90IHRoZSBIVFRQIENvbnRlbnQtRGlzcG9zaXRpb24gZnJvbVxyXG4gICAgUkZDIDYyNjYuXHJcblxyXG4gICAgZGlzcHR5cGUgaXMgYSBkaXNwb3NpdGlvbiB0eXBlOiBpbmxpbmUsIGF0dGFjaG1lbnQsIGZvcm0tZGF0YS5cclxuICAgIFNob3VsZCBiZSB2YWxpZCBleHRlbnNpb24gdG9rZW4gKHNlZSBSRkMgMjE4MylcclxuXHJcbiAgICBxdW90ZV9maWVsZHMgcGVyZm9ybXMgdmFsdWUgcXVvdGluZyB0byA3LWJpdCBNSU1FIGhlYWRlcnNcclxuICAgIGFjY29yZGluZyB0byBSRkMgNzU3OC4gU2V0IHRvIHF1b3RlX2ZpZWxkcyB0byBGYWxzZSBpZiByZWNpcGllbnRcclxuICAgIGNhbiB0YWtlIDgtYml0IGZpbGUgbmFtZXMgYW5kIGZpZWxkIHZhbHVlcy5cclxuXHJcbiAgICBfY2hhcnNldCBzcGVjaWZpZXMgdGhlIGNoYXJzZXQgdG8gdXNlIHdoZW4gcXVvdGVfZmllbGRzIGlzIFRydWUuXHJcblxyXG4gICAgcGFyYW1zIGlzIGEgZGljdCB3aXRoIGRpc3Bvc2l0aW9uIHBhcmFtcy5cclxuICAgICIiIlxyXG4gICAgaWYgbm90IGRpc3B0eXBlIG9yIG5vdCAoVE9LRU4gPiBzZXQoZGlzcHR5cGUpKTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJiYWQgY29udGVudCBkaXNwb3NpdGlvbiB0eXBlIHshcn0iICIiLmZvcm1hdChkaXNwdHlwZSkpXHJcblxyXG4gICAgdmFsdWUgPSBkaXNwdHlwZVxyXG4gICAgaWYgcGFyYW1zOlxyXG4gICAgICAgIGxwYXJhbXMgPSBbXVxyXG4gICAgICAgIGZvciBrZXksIHZhbCBpbiBwYXJhbXMuaXRlbXMoKTpcclxuICAgICAgICAgICAgaWYgbm90IGtleSBvciBub3QgKFRPS0VOID4gc2V0KGtleSkpOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiYmFkIGNvbnRlbnQgZGlzcG9zaXRpb24gcGFyYW1ldGVyIiAiIHshcn09eyFyfSIuZm9ybWF0KGtleSwgdmFsKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiBxdW90ZV9maWVsZHM6XHJcbiAgICAgICAgICAgICAgICBpZiBrZXkubG93ZXIoKSA9PSAiZmlsZW5hbWUiOlxyXG4gICAgICAgICAgICAgICAgICAgIHF2YWwgPSBxdW90ZSh2YWwsICIiLCBlbmNvZGluZz1fY2hhcnNldClcclxuICAgICAgICAgICAgICAgICAgICBscGFyYW1zLmFwcGVuZCgoa2V5LCBcJyIlcyJcJyAlIHF2YWwpKVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF2YWwgPSBxdW90ZWRfc3RyaW5nKHZhbClcclxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXZhbCA9ICIiLmpvaW4oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoX2NoYXJzZXQsICJcJ1wnIiwgcXVvdGUodmFsLCAiIiwgZW5jb2Rpbmc9X2NoYXJzZXQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxwYXJhbXMuYXBwZW5kKChrZXkgKyAiKiIsIHF2YWwpKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxwYXJhbXMuYXBwZW5kKChrZXksIFwnIiVzIlwnICUgcXZhbCkpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBxdmFsID0gdmFsLnJlcGxhY2UoIlxcXFwiLCAiXFxcXFxcXFwiKS5yZXBsYWNlKFwnIlwnLCBcJ1xcXFwiXCcpXHJcbiAgICAgICAgICAgICAgICBscGFyYW1zLmFwcGVuZCgoa2V5LCBcJyIlcyJcJyAlIHF2YWwpKVxyXG4gICAgICAgIHNwYXJhbXMgPSAiOyAiLmpvaW4oIj0iLmpvaW4ocGFpcikgZm9yIHBhaXIgaW4gbHBhcmFtcylcclxuICAgICAgICB2YWx1ZSA9ICI7ICIuam9pbigodmFsdWUsIHNwYXJhbXMpKVxyXG4gICAgcmV0dXJuIHZhbHVlXHJcblxyXG5cclxuY2xhc3MgX1RTZWxmKFByb3RvY29sLCBHZW5lcmljW19UXSk6XHJcbiAgICBfY2FjaGU6IERpY3Rbc3RyLCBfVF1cclxuXHJcblxyXG5jbGFzcyByZWlmeShHZW5lcmljW19UXSk6XHJcbiAgICAiIiJVc2UgYXMgYSBjbGFzcyBtZXRob2QgZGVjb3JhdG9yLlxyXG5cclxuICAgIEl0IG9wZXJhdGVzIGFsbW9zdCBleGFjdGx5IGxpa2VcclxuICAgIHRoZSBQeXRob24gYEBwcm9wZXJ0eWAgZGVjb3JhdG9yLCBidXQgaXQgcHV0cyB0aGUgcmVzdWx0IG9mIHRoZVxyXG4gICAgbWV0aG9kIGl0IGRlY29yYXRlcyBpbnRvIHRoZSBpbnN0YW5jZSBkaWN0IGFmdGVyIHRoZSBmaXJzdCBjYWxsLFxyXG4gICAgZWZmZWN0aXZlbHkgcmVwbGFjaW5nIHRoZSBmdW5jdGlvbiBpdCBkZWNvcmF0ZXMgd2l0aCBhbiBpbnN0YW5jZVxyXG4gICAgdmFyaWFibGUuICBJdCBpcywgaW4gUHl0aG9uIHBhcmxhbmNlLCBhIGRhdGEgZGVzY3JpcHRvci5cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB3cmFwcGVkOiBDYWxsYWJsZVsuLi4sIF9UXSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLndyYXBwZWQgPSB3cmFwcGVkXHJcbiAgICAgICAgc2VsZi5fX2RvY19fID0gd3JhcHBlZC5fX2RvY19fXHJcbiAgICAgICAgc2VsZi5uYW1lID0gd3JhcHBlZC5fX25hbWVfX1xyXG5cclxuICAgIGRlZiBfX2dldF9fKHNlbGYsIGluc3Q6IF9UU2VsZltfVF0sIG93bmVyOiBPcHRpb25hbFtUeXBlW0FueV1dID0gTm9uZSkgLT4gX1Q6XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdC5fY2FjaGVbc2VsZi5uYW1lXVxyXG4gICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6XHJcbiAgICAgICAgICAgICAgICB2YWwgPSBzZWxmLndyYXBwZWQoaW5zdClcclxuICAgICAgICAgICAgICAgIGluc3QuX2NhY2hlW3NlbGYubmFtZV0gPSB2YWxcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWxcclxuICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6XHJcbiAgICAgICAgICAgIGlmIGluc3QgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmXHJcbiAgICAgICAgICAgIHJhaXNlXHJcblxyXG4gICAgZGVmIF9fc2V0X18oc2VsZiwgaW5zdDogX1RTZWxmW19UXSwgdmFsdWU6IF9UKSAtPiBOb25lOlxyXG4gICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKCJyZWlmaWVkIHByb3BlcnR5IGlzIHJlYWQtb25seSIpXHJcblxyXG5cclxucmVpZnlfcHkgPSByZWlmeVxyXG5cclxudHJ5OlxyXG4gICAgZnJvbSAuX2hlbHBlcnMgaW1wb3J0IHJlaWZ5IGFzIHJlaWZ5X2NcclxuXHJcbiAgICBpZiBub3QgTk9fRVhURU5TSU9OUzpcclxuICAgICAgICByZWlmeSA9IHJlaWZ5X2MgICMgdHlwZTogaWdub3JlW21pc2MsYXNzaWdubWVudF1cclxuZXhjZXB0IEltcG9ydEVycm9yOlxyXG4gICAgcGFzc1xyXG5cclxuX2lwdjRfcGF0dGVybiA9IChcclxuICAgIHIiXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXC4pezN9IlxyXG4gICAgciIoPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pJCJcclxuKVxyXG5faXB2Nl9wYXR0ZXJuID0gKFxyXG4gICAgciJeKD86KD86KD86W0EtRjAtOV17MSw0fTopezZ9fCg/PSg/OltBLUYwLTldezAsNH06KXswLDZ9IlxyXG4gICAgciIoPzpbMC05XXsxLDN9XFwuKXszfVswLTldezEsM30kKSgoWzAtOUEtRl17MSw0fTopezAsNX18OikiXHJcbiAgICByIigoOlswLTlBLUZdezEsNH0pezEsNX06fDopfDo6KD86W0EtRjAtOV17MSw0fTopezV9KSJcclxuICAgIHIiKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XT9bMC05XSlcXC4pezN9IlxyXG4gICAgciIoPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldP1swLTldKXwoPzpbQS1GMC05XXsxLDR9Oil7N30iXHJcbiAgICByIltBLUYwLTldezEsNH18KD89KD86W0EtRjAtOV17MCw0fTopezAsN31bQS1GMC05XXswLDR9JCkiXHJcbiAgICByIigoWzAtOUEtRl17MSw0fTopezEsN318OikoKDpbMC05QS1GXXsxLDR9KXsxLDd9fDopfCg/OltBLUYwLTldezEsNH06KXs3fSJcclxuICAgIHIiOnw6KDpbQS1GMC05XXsxLDR9KXs3fSkkIlxyXG4pXHJcbl9pcHY0X3JlZ2V4ID0gcmUuY29tcGlsZShfaXB2NF9wYXR0ZXJuKVxyXG5faXB2Nl9yZWdleCA9IHJlLmNvbXBpbGUoX2lwdjZfcGF0dGVybiwgZmxhZ3M9cmUuSUdOT1JFQ0FTRSlcclxuX2lwdjRfcmVnZXhiID0gcmUuY29tcGlsZShfaXB2NF9wYXR0ZXJuLmVuY29kZSgiYXNjaWkiKSlcclxuX2lwdjZfcmVnZXhiID0gcmUuY29tcGlsZShfaXB2Nl9wYXR0ZXJuLmVuY29kZSgiYXNjaWkiKSwgZmxhZ3M9cmUuSUdOT1JFQ0FTRSlcclxuXHJcblxyXG5kZWYgX2lzX2lwX2FkZHJlc3MoXHJcbiAgICByZWdleDogUGF0dGVybltzdHJdLCByZWdleGI6IFBhdHRlcm5bYnl0ZXNdLCBob3N0OiBPcHRpb25hbFtVbmlvbltzdHIsIGJ5dGVzXV1cclxuKSAtPiBib29sOlxyXG4gICAgaWYgaG9zdCBpcyBOb25lOlxyXG4gICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgaWYgaXNpbnN0YW5jZShob3N0LCBzdHIpOlxyXG4gICAgICAgIHJldHVybiBib29sKHJlZ2V4Lm1hdGNoKGhvc3QpKVxyXG4gICAgZWxpZiBpc2luc3RhbmNlKGhvc3QsIChieXRlcywgYnl0ZWFycmF5LCBtZW1vcnl2aWV3KSk6XHJcbiAgICAgICAgcmV0dXJuIGJvb2wocmVnZXhiLm1hdGNoKGhvc3QpKVxyXG4gICAgZWxzZTpcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJ7aG9zdH0gW3t0eXBlKGhvc3QpfV0gaXMgbm90IGEgc3RyIG9yIGJ5dGVzIilcclxuXHJcblxyXG5pc19pcHY0X2FkZHJlc3MgPSBmdW5jdG9vbHMucGFydGlhbChfaXNfaXBfYWRkcmVzcywgX2lwdjRfcmVnZXgsIF9pcHY0X3JlZ2V4YilcclxuaXNfaXB2Nl9hZGRyZXNzID0gZnVuY3Rvb2xzLnBhcnRpYWwoX2lzX2lwX2FkZHJlc3MsIF9pcHY2X3JlZ2V4LCBfaXB2Nl9yZWdleGIpXHJcblxyXG5cclxuZGVmIGlzX2lwX2FkZHJlc3MoaG9zdDogT3B0aW9uYWxbVW5pb25bc3RyLCBieXRlcywgYnl0ZWFycmF5LCBtZW1vcnl2aWV3XV0pIC0+IGJvb2w6XHJcbiAgICByZXR1cm4gaXNfaXB2NF9hZGRyZXNzKGhvc3QpIG9yIGlzX2lwdjZfYWRkcmVzcyhob3N0KVxyXG5cclxuXHJcbmRlZiBuZXh0X3dob2xlX3NlY29uZCgpIC0+IGRhdGV0aW1lLmRhdGV0aW1lOlxyXG4gICAgIiIiUmV0dXJuIGN1cnJlbnQgdGltZSByb3VuZGVkIHVwIHRvIHRoZSBuZXh0IHdob2xlIHNlY29uZC4iIiJcclxuICAgIHJldHVybiBkYXRldGltZS5kYXRldGltZS5ub3coZGF0ZXRpbWUudGltZXpvbmUudXRjKS5yZXBsYWNlKFxyXG4gICAgICAgIG1pY3Jvc2Vjb25kPTBcclxuICAgICkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz0wKVxyXG5cclxuXHJcbl9jYWNoZWRfY3VycmVudF9kYXRldGltZSA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbaW50XVxyXG5fY2FjaGVkX2Zvcm1hdHRlZF9kYXRldGltZSA9ICIiXHJcblxyXG5cclxuZGVmIHJmYzgyMl9mb3JtYXR0ZWRfdGltZSgpIC0+IHN0cjpcclxuICAgIGdsb2JhbCBfY2FjaGVkX2N1cnJlbnRfZGF0ZXRpbWVcclxuICAgIGdsb2JhbCBfY2FjaGVkX2Zvcm1hdHRlZF9kYXRldGltZVxyXG5cclxuICAgIG5vdyA9IGludCh0aW1lLnRpbWUoKSlcclxuICAgIGlmIG5vdyAhPSBfY2FjaGVkX2N1cnJlbnRfZGF0ZXRpbWU6XHJcbiAgICAgICAgIyBXZWVrZGF5IGFuZCBtb250aCBuYW1lcyBmb3IgSFRUUCBkYXRlL3RpbWUgZm9ybWF0dGluZztcclxuICAgICAgICAjIGFsd2F5cyBFbmdsaXNoIVxyXG4gICAgICAgICMgVHVwbGVzIGFyZSBjb25zdGFudHMgc3RvcmVkIGluIGNvZGVvYmplY3QhXHJcbiAgICAgICAgX3dlZWtkYXluYW1lID0gKCJNb24iLCAiVHVlIiwgIldlZCIsICJUaHUiLCAiRnJpIiwgIlNhdCIsICJTdW4iKVxyXG4gICAgICAgIF9tb250aG5hbWUgPSAoXHJcbiAgICAgICAgICAgICIiLCAgIyBEdW1teSBzbyB3ZSBjYW4gdXNlIDEtYmFzZWQgbW9udGggbnVtYmVyc1xyXG4gICAgICAgICAgICAiSmFuIixcclxuICAgICAgICAgICAgIkZlYiIsXHJcbiAgICAgICAgICAgICJNYXIiLFxyXG4gICAgICAgICAgICAiQXByIixcclxuICAgICAgICAgICAgIk1heSIsXHJcbiAgICAgICAgICAgICJKdW4iLFxyXG4gICAgICAgICAgICAiSnVsIixcclxuICAgICAgICAgICAgIkF1ZyIsXHJcbiAgICAgICAgICAgICJTZXAiLFxyXG4gICAgICAgICAgICAiT2N0IixcclxuICAgICAgICAgICAgIk5vdiIsXHJcbiAgICAgICAgICAgICJEZWMiLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgeWVhciwgbW9udGgsIGRheSwgaGgsIG1tLCBzcywgd2QsICp0YWlsID0gdGltZS5nbXRpbWUobm93KVxyXG4gICAgICAgIF9jYWNoZWRfZm9ybWF0dGVkX2RhdGV0aW1lID0gIiVzLCAlMDJkICUzcyAlNGQgJTAyZDolMDJkOiUwMmQgR01UIiAlIChcclxuICAgICAgICAgICAgX3dlZWtkYXluYW1lW3dkXSxcclxuICAgICAgICAgICAgZGF5LFxyXG4gICAgICAgICAgICBfbW9udGhuYW1lW21vbnRoXSxcclxuICAgICAgICAgICAgeWVhcixcclxuICAgICAgICAgICAgaGgsXHJcbiAgICAgICAgICAgIG1tLFxyXG4gICAgICAgICAgICBzcyxcclxuICAgICAgICApXHJcbiAgICAgICAgX2NhY2hlZF9jdXJyZW50X2RhdGV0aW1lID0gbm93XHJcbiAgICByZXR1cm4gX2NhY2hlZF9mb3JtYXR0ZWRfZGF0ZXRpbWVcclxuXHJcblxyXG5kZWYgX3dlYWtyZWZfaGFuZGxlKGluZm86ICJUdXBsZVt3ZWFrcmVmLnJlZltvYmplY3RdLCBzdHJdIikgLT4gTm9uZTpcclxuICAgIHJlZiwgbmFtZSA9IGluZm9cclxuICAgIG9iID0gcmVmKClcclxuICAgIGlmIG9iIGlzIG5vdCBOb25lOlxyXG4gICAgICAgIHdpdGggc3VwcHJlc3MoRXhjZXB0aW9uKTpcclxuICAgICAgICAgICAgZ2V0YXR0cihvYiwgbmFtZSkoKVxyXG5cclxuXHJcbmRlZiB3ZWFrcmVmX2hhbmRsZShcclxuICAgIG9iOiBvYmplY3QsIG5hbWU6IHN0ciwgdGltZW91dDogZmxvYXQsIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BcclxuKSAtPiBPcHRpb25hbFthc3luY2lvLlRpbWVySGFuZGxlXTpcclxuICAgIGlmIHRpbWVvdXQgaXMgbm90IE5vbmUgYW5kIHRpbWVvdXQgPiAwOlxyXG4gICAgICAgIHdoZW4gPSBsb29wLnRpbWUoKSArIHRpbWVvdXRcclxuICAgICAgICBpZiB0aW1lb3V0ID49IDU6XHJcbiAgICAgICAgICAgIHdoZW4gPSBjZWlsKHdoZW4pXHJcblxyXG4gICAgICAgIHJldHVybiBsb29wLmNhbGxfYXQod2hlbiwgX3dlYWtyZWZfaGFuZGxlLCAod2Vha3JlZi5yZWYob2IpLCBuYW1lKSlcclxuICAgIHJldHVybiBOb25lXHJcblxyXG5cclxuZGVmIGNhbGxfbGF0ZXIoXHJcbiAgICBjYjogQ2FsbGFibGVbW10sIEFueV0sIHRpbWVvdXQ6IGZsb2F0LCBsb29wOiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXHJcbikgLT4gT3B0aW9uYWxbYXN5bmNpby5UaW1lckhhbmRsZV06XHJcbiAgICBpZiB0aW1lb3V0IGlzIG5vdCBOb25lIGFuZCB0aW1lb3V0ID4gMDpcclxuICAgICAgICB3aGVuID0gbG9vcC50aW1lKCkgKyB0aW1lb3V0XHJcbiAgICAgICAgaWYgdGltZW91dCA+IDU6XHJcbiAgICAgICAgICAgIHdoZW4gPSBjZWlsKHdoZW4pXHJcbiAgICAgICAgcmV0dXJuIGxvb3AuY2FsbF9hdCh3aGVuLCBjYilcclxuICAgIHJldHVybiBOb25lXHJcblxyXG5cclxuY2xhc3MgVGltZW91dEhhbmRsZTpcclxuICAgICIiIlRpbWVvdXQgaGFuZGxlIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3AsIHRpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3RpbWVvdXQgPSB0aW1lb3V0XHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3BcclxuICAgICAgICBzZWxmLl9jYWxsYmFja3MgPSAoXHJcbiAgICAgICAgICAgIFtdXHJcbiAgICAgICAgKSAgIyB0eXBlOiBMaXN0W1R1cGxlW0NhbGxhYmxlWy4uLiwgTm9uZV0sIFR1cGxlW0FueSwgLi4uXSwgRGljdFtzdHIsIEFueV1dXVxyXG5cclxuICAgIGRlZiByZWdpc3RlcihcclxuICAgICAgICBzZWxmLCBjYWxsYmFjazogQ2FsbGFibGVbLi4uLCBOb25lXSwgKmFyZ3M6IEFueSwgKiprd2FyZ3M6IEFueVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2NhbGxiYWNrcy5hcHBlbmQoKGNhbGxiYWNrLCBhcmdzLCBrd2FyZ3MpKVxyXG5cclxuICAgIGRlZiBjbG9zZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2NhbGxiYWNrcy5jbGVhcigpXHJcblxyXG4gICAgZGVmIHN0YXJ0KHNlbGYpIC0+IE9wdGlvbmFsW2FzeW5jaW8uSGFuZGxlXTpcclxuICAgICAgICB0aW1lb3V0ID0gc2VsZi5fdGltZW91dFxyXG4gICAgICAgIGlmIHRpbWVvdXQgaXMgbm90IE5vbmUgYW5kIHRpbWVvdXQgPiAwOlxyXG4gICAgICAgICAgICB3aGVuID0gc2VsZi5fbG9vcC50aW1lKCkgKyB0aW1lb3V0XHJcbiAgICAgICAgICAgIGlmIHRpbWVvdXQgPj0gNTpcclxuICAgICAgICAgICAgICAgIHdoZW4gPSBjZWlsKHdoZW4pXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9sb29wLmNhbGxfYXQod2hlbiwgc2VsZi5fX2NhbGxfXylcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgIGRlZiB0aW1lcihzZWxmKSAtPiAiQmFzZVRpbWVyQ29udGV4dCI6XHJcbiAgICAgICAgaWYgc2VsZi5fdGltZW91dCBpcyBub3QgTm9uZSBhbmQgc2VsZi5fdGltZW91dCA+IDA6XHJcbiAgICAgICAgICAgIHRpbWVyID0gVGltZXJDb250ZXh0KHNlbGYuX2xvb3ApXHJcbiAgICAgICAgICAgIHNlbGYucmVnaXN0ZXIodGltZXIudGltZW91dClcclxuICAgICAgICAgICAgcmV0dXJuIHRpbWVyXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIFRpbWVyTm9vcCgpXHJcblxyXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgZm9yIGNiLCBhcmdzLCBrd2FyZ3MgaW4gc2VsZi5fY2FsbGJhY2tzOlxyXG4gICAgICAgICAgICB3aXRoIHN1cHByZXNzKEV4Y2VwdGlvbik6XHJcbiAgICAgICAgICAgICAgICBjYigqYXJncywgKiprd2FyZ3MpXHJcblxyXG4gICAgICAgIHNlbGYuX2NhbGxiYWNrcy5jbGVhcigpXHJcblxyXG5cclxuY2xhc3MgQmFzZVRpbWVyQ29udGV4dChDb250ZXh0TWFuYWdlclsiQmFzZVRpbWVyQ29udGV4dCJdKTpcclxuICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBUaW1lck5vb3AoQmFzZVRpbWVyQ29udGV4dCk6XHJcbiAgICBkZWYgX19lbnRlcl9fKHNlbGYpIC0+IEJhc2VUaW1lckNvbnRleHQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGZcclxuXHJcbiAgICBkZWYgX19leGl0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBleGNfdHlwZTogT3B0aW9uYWxbVHlwZVtCYXNlRXhjZXB0aW9uXV0sXHJcbiAgICAgICAgZXhjX3ZhbDogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0sXHJcbiAgICAgICAgZXhjX3RiOiBPcHRpb25hbFtUcmFjZWJhY2tUeXBlXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm5cclxuXHJcblxyXG5jbGFzcyBUaW1lckNvbnRleHQoQmFzZVRpbWVyQ29udGV4dCk6XHJcbiAgICAiIiJMb3cgcmVzb2x1dGlvbiB0aW1lb3V0IGNvbnRleHQgbWFuYWdlciIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsb29wOiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2xvb3AgPSBsb29wXHJcbiAgICAgICAgc2VsZi5fdGFza3MgPSBbXSAgIyB0eXBlOiBMaXN0W2FzeW5jaW8uVGFza1tBbnldXVxyXG4gICAgICAgIHNlbGYuX2NhbmNlbGxlZCA9IEZhbHNlXHJcblxyXG4gICAgZGVmIF9fZW50ZXJfXyhzZWxmKSAtPiBCYXNlVGltZXJDb250ZXh0OlxyXG4gICAgICAgIHRhc2sgPSBjdXJyZW50X3Rhc2sobG9vcD1zZWxmLl9sb29wKVxyXG5cclxuICAgICAgICBpZiB0YXNrIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJUaW1lb3V0IGNvbnRleHQgbWFuYWdlciBzaG91bGQgYmUgdXNlZCAiICJpbnNpZGUgYSB0YXNrIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2NhbmNlbGxlZDpcclxuICAgICAgICAgICAgcmFpc2UgYXN5bmNpby5UaW1lb3V0RXJyb3IgZnJvbSBOb25lXHJcblxyXG4gICAgICAgIHNlbGYuX3Rhc2tzLmFwcGVuZCh0YXNrKVxyXG4gICAgICAgIHJldHVybiBzZWxmXHJcblxyXG4gICAgZGVmIF9fZXhpdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZXhjX3R5cGU6IE9wdGlvbmFsW1R5cGVbQmFzZUV4Y2VwdGlvbl1dLFxyXG4gICAgICAgIGV4Y192YWw6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dLFxyXG4gICAgICAgIGV4Y190YjogT3B0aW9uYWxbVHJhY2ViYWNrVHlwZV0sXHJcbiAgICApIC0+IE9wdGlvbmFsW2Jvb2xdOlxyXG4gICAgICAgIGlmIHNlbGYuX3Rhc2tzOlxyXG4gICAgICAgICAgICBzZWxmLl90YXNrcy5wb3AoKVxyXG5cclxuICAgICAgICBpZiBleGNfdHlwZSBpcyBhc3luY2lvLkNhbmNlbGxlZEVycm9yIGFuZCBzZWxmLl9jYW5jZWxsZWQ6XHJcbiAgICAgICAgICAgIHJhaXNlIGFzeW5jaW8uVGltZW91dEVycm9yIGZyb20gTm9uZVxyXG4gICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgZGVmIHRpbWVvdXQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3Qgc2VsZi5fY2FuY2VsbGVkOlxyXG4gICAgICAgICAgICBmb3IgdGFzayBpbiBzZXQoc2VsZi5fdGFza3MpOlxyXG4gICAgICAgICAgICAgICAgdGFzay5jYW5jZWwoKVxyXG5cclxuICAgICAgICAgICAgc2VsZi5fY2FuY2VsbGVkID0gVHJ1ZVxyXG5cclxuXHJcbmRlZiBjZWlsX3RpbWVvdXQoZGVsYXk6IE9wdGlvbmFsW2Zsb2F0XSkgLT4gYXN5bmNfdGltZW91dC5UaW1lb3V0OlxyXG4gICAgaWYgZGVsYXkgaXMgTm9uZSBvciBkZWxheSA8PSAwOlxyXG4gICAgICAgIHJldHVybiBhc3luY190aW1lb3V0LnRpbWVvdXQoTm9uZSlcclxuXHJcbiAgICBsb29wID0gZ2V0X3J1bm5pbmdfbG9vcCgpXHJcbiAgICBub3cgPSBsb29wLnRpbWUoKVxyXG4gICAgd2hlbiA9IG5vdyArIGRlbGF5XHJcbiAgICBpZiBkZWxheSA+IDU6XHJcbiAgICAgICAgd2hlbiA9IGNlaWwod2hlbilcclxuICAgIHJldHVybiBhc3luY190aW1lb3V0LnRpbWVvdXRfYXQod2hlbilcclxuXHJcblxyXG5jbGFzcyBIZWFkZXJzTWl4aW46XHJcblxyXG4gICAgQVRUUlMgPSBmcm96ZW5zZXQoWyJfY29udGVudF90eXBlIiwgIl9jb250ZW50X2RpY3QiLCAiX3N0b3JlZF9jb250ZW50X3R5cGUiXSlcclxuXHJcbiAgICBfY29udGVudF90eXBlID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXHJcbiAgICBfY29udGVudF9kaWN0ID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtEaWN0W3N0ciwgc3RyXV1cclxuICAgIF9zdG9yZWRfY29udGVudF90eXBlID0gc2VudGluZWxcclxuXHJcbiAgICBkZWYgX3BhcnNlX2NvbnRlbnRfdHlwZShzZWxmLCByYXc6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9zdG9yZWRfY29udGVudF90eXBlID0gcmF3XHJcbiAgICAgICAgaWYgcmF3IGlzIE5vbmU6XHJcbiAgICAgICAgICAgICMgZGVmYXVsdCB2YWx1ZSBhY2NvcmRpbmcgdG8gUkZDIDI2MTZcclxuICAgICAgICAgICAgc2VsZi5fY29udGVudF90eXBlID0gImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSJcclxuICAgICAgICAgICAgc2VsZi5fY29udGVudF9kaWN0ID0ge31cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9jb250ZW50X3R5cGUsIHNlbGYuX2NvbnRlbnRfZGljdCA9IGNnaS5wYXJzZV9oZWFkZXIocmF3KVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvbnRlbnRfdHlwZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiVGhlIHZhbHVlIG9mIGNvbnRlbnQgcGFydCBmb3IgQ29udGVudC1UeXBlIEhUVFAgaGVhZGVyLiIiIlxyXG4gICAgICAgIHJhdyA9IHNlbGYuX2hlYWRlcnMuZ2V0KGhkcnMuQ09OVEVOVF9UWVBFKSAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXVxyXG4gICAgICAgIGlmIHNlbGYuX3N0b3JlZF9jb250ZW50X3R5cGUgIT0gcmF3OlxyXG4gICAgICAgICAgICBzZWxmLl9wYXJzZV9jb250ZW50X3R5cGUocmF3KVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb250ZW50X3R5cGUgICMgdHlwZTogaWdub3JlW3JldHVybi12YWx1ZV1cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjaGFyc2V0KHNlbGYpIC0+IE9wdGlvbmFsW3N0cl06XHJcbiAgICAgICAgIiIiVGhlIHZhbHVlIG9mIGNoYXJzZXQgcGFydCBmb3IgQ29udGVudC1UeXBlIEhUVFAgaGVhZGVyLiIiIlxyXG4gICAgICAgIHJhdyA9IHNlbGYuX2hlYWRlcnMuZ2V0KGhkcnMuQ09OVEVOVF9UWVBFKSAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXVxyXG4gICAgICAgIGlmIHNlbGYuX3N0b3JlZF9jb250ZW50X3R5cGUgIT0gcmF3OlxyXG4gICAgICAgICAgICBzZWxmLl9wYXJzZV9jb250ZW50X3R5cGUocmF3KVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb250ZW50X2RpY3QuZ2V0KCJjaGFyc2V0IikgICMgdHlwZTogaWdub3JlW3VuaW9uLWF0dHJdXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY29udGVudF9sZW5ndGgoc2VsZikgLT4gT3B0aW9uYWxbaW50XTpcclxuICAgICAgICAiIiJUaGUgdmFsdWUgb2YgQ29udGVudC1MZW5ndGggSFRUUCBoZWFkZXIuIiIiXHJcbiAgICAgICAgY29udGVudF9sZW5ndGggPSBzZWxmLl9oZWFkZXJzLmdldCggICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF1cclxuICAgICAgICAgICAgaGRycy5DT05URU5UX0xFTkdUSFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgY29udGVudF9sZW5ndGggaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBpbnQoY29udGVudF9sZW5ndGgpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcblxyXG5kZWYgc2V0X3Jlc3VsdChmdXQ6ICJhc3luY2lvLkZ1dHVyZVtfVF0iLCByZXN1bHQ6IF9UKSAtPiBOb25lOlxyXG4gICAgaWYgbm90IGZ1dC5kb25lKCk6XHJcbiAgICAgICAgZnV0LnNldF9yZXN1bHQocmVzdWx0KVxyXG5cclxuXHJcbmRlZiBzZXRfZXhjZXB0aW9uKGZ1dDogImFzeW5jaW8uRnV0dXJlW19UXSIsIGV4YzogQmFzZUV4Y2VwdGlvbikgLT4gTm9uZTpcclxuICAgIGlmIG5vdCBmdXQuZG9uZSgpOlxyXG4gICAgICAgIGZ1dC5zZXRfZXhjZXB0aW9uKGV4YylcclxuXHJcblxyXG5jbGFzcyBDaGFpbk1hcFByb3h5KE1hcHBpbmdbc3RyLCBBbnldKTpcclxuICAgIF9fc2xvdHNfXyA9ICgiX21hcHMiLClcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgbWFwczogSXRlcmFibGVbTWFwcGluZ1tzdHIsIEFueV1dKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX21hcHMgPSB0dXBsZShtYXBzKVxyXG5cclxuICAgIGRlZiBfX2luaXRfc3ViY2xhc3NfXyhjbHMpIC0+IE5vbmU6XHJcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAiSW5oZXJpdGFuY2UgY2xhc3Mge30gZnJvbSBDaGFpbk1hcFByb3h5ICJcclxuICAgICAgICAgICAgImlzIGZvcmJpZGRlbiIuZm9ybWF0KGNscy5fX25hbWVfXylcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleTogc3RyKSAtPiBBbnk6XHJcbiAgICAgICAgZm9yIG1hcHBpbmcgaW4gc2VsZi5fbWFwczpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcHBpbmdba2V5XVxyXG4gICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6XHJcbiAgICAgICAgICAgICAgICBwYXNzXHJcbiAgICAgICAgcmFpc2UgS2V5RXJyb3Ioa2V5KVxyXG5cclxuICAgIGRlZiBnZXQoc2VsZiwga2V5OiBzdHIsIGRlZmF1bHQ6IEFueSA9IE5vbmUpIC0+IEFueTpcclxuICAgICAgICByZXR1cm4gc2VsZltrZXldIGlmIGtleSBpbiBzZWxmIGVsc2UgZGVmYXVsdFxyXG5cclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICAjIHJldXNlcyBzdG9yZWQgaGFzaCB2YWx1ZXMgaWYgcG9zc2libGVcclxuICAgICAgICByZXR1cm4gbGVuKHNldCgpLnVuaW9uKCpzZWxmLl9tYXBzKSkgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKSAtPiBJdGVyYXRvcltzdHJdOlxyXG4gICAgICAgIGQgPSB7fSAgIyB0eXBlOiBEaWN0W3N0ciwgQW55XVxyXG4gICAgICAgIGZvciBtYXBwaW5nIGluIHJldmVyc2VkKHNlbGYuX21hcHMpOlxyXG4gICAgICAgICAgICAjIHJldXNlcyBzdG9yZWQgaGFzaCB2YWx1ZXMgaWYgcG9zc2libGVcclxuICAgICAgICAgICAgZC51cGRhdGUobWFwcGluZylcclxuICAgICAgICByZXR1cm4gaXRlcihkKVxyXG5cclxuICAgIGRlZiBfX2NvbnRhaW5zX18oc2VsZiwga2V5OiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIGFueShrZXkgaW4gbSBmb3IgbSBpbiBzZWxmLl9tYXBzKVxyXG5cclxuICAgIGRlZiBfX2Jvb2xfXyhzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBhbnkoc2VsZi5fbWFwcylcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIGNvbnRlbnQgPSAiLCAiLmpvaW4obWFwKHJlcHIsIHNlbGYuX21hcHMpKVxyXG4gICAgICAgIHJldHVybiBmIkNoYWluTWFwUHJveHkoe2NvbnRlbnR9KSJcclxuXHJcblxyXG4jIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3MjMyI3NlY3Rpb24tMi4zXHJcbl9FVEFHQyA9IHIiWyEjLX1cXHg4MC1cXHhmZl0rIlxyXG5fRVRBR0NfUkUgPSByZS5jb21waWxlKF9FVEFHQylcclxuX1FVT1RFRF9FVEFHID0gZnJcJyhXLyk/Iih7X0VUQUdDfSkiXCdcclxuUVVPVEVEX0VUQUdfUkUgPSByZS5jb21waWxlKF9RVU9URURfRVRBRylcclxuTElTVF9RVU9URURfRVRBR19SRSA9IHJlLmNvbXBpbGUoZnIiKHtfUVVPVEVEX0VUQUd9KSg/OlxccyosXFxzKnwkKXwoLikiKVxyXG5cclxuRVRBR19BTlkgPSAiKiJcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgRVRhZzpcclxuICAgIHZhbHVlOiBzdHJcclxuICAgIGlzX3dlYWs6IGJvb2wgPSBGYWxzZVxyXG5cclxuXHJcbmRlZiB2YWxpZGF0ZV9ldGFnX3ZhbHVlKHZhbHVlOiBzdHIpIC0+IE5vbmU6XHJcbiAgICBpZiB2YWx1ZSAhPSBFVEFHX0FOWSBhbmQgbm90IF9FVEFHQ19SRS5mdWxsbWF0Y2godmFsdWUpOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgIGYiVmFsdWUge3ZhbHVlIXJ9IGlzIG5vdCBhIHZhbGlkIGV0YWcuIE1heWJlIGl0IGNvbnRhaW5zIFwnXFwiXCc/IlxyXG4gICAgICAgIClcclxuXHJcblxyXG5kZWYgcGFyc2VfaHR0cF9kYXRlKGRhdGVfc3RyOiBPcHRpb25hbFtzdHJdKSAtPiBPcHRpb25hbFtkYXRldGltZS5kYXRldGltZV06XHJcbiAgICAiIiJQcm9jZXNzIGEgZGF0ZSBzdHJpbmcsIHJldHVybiBhIGRhdGV0aW1lIG9iamVjdCIiIlxyXG4gICAgaWYgZGF0ZV9zdHIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgdGltZXR1cGxlID0gcGFyc2VkYXRlKGRhdGVfc3RyKVxyXG4gICAgICAgIGlmIHRpbWV0dXBsZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgd2l0aCBzdXBwcmVzcyhWYWx1ZUVycm9yKTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRldGltZS5kYXRldGltZSgqdGltZXR1cGxlWzo2XSwgdHppbmZvPWRhdGV0aW1lLnRpbWV6b25lLnV0YylcclxuICAgIHJldHVybiBOb25lXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhc3luY190aW1lb3V0L19faW5pdF9fLnB5JywgYidpbXBvcnQgYXN5bmNpb1xuaW1wb3J0IGVudW1cbmltcG9ydCBzeXNcbmltcG9ydCB3YXJuaW5nc1xuZnJvbSB0eXBlcyBpbXBvcnQgVHJhY2ViYWNrVHlwZVxuZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgT3B0aW9uYWwsIFR5cGVcblxuXG5pZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA4KTpcbiAgICBmcm9tIHR5cGluZyBpbXBvcnQgZmluYWxcbmVsc2U6XG4gICAgZnJvbSB0eXBpbmdfZXh0ZW5zaW9ucyBpbXBvcnQgZmluYWxcblxuXG5fX3ZlcnNpb25fXyA9ICI0LjAuMiJcblxuXG5fX2FsbF9fID0gKCJ0aW1lb3V0IiwgInRpbWVvdXRfYXQiLCAiVGltZW91dCIpXG5cblxuZGVmIHRpbWVvdXQoZGVsYXk6IE9wdGlvbmFsW2Zsb2F0XSkgLT4gIlRpbWVvdXQiOlxuICAgICIiInRpbWVvdXQgY29udGV4dCBtYW5hZ2VyLlxuXG4gICAgVXNlZnVsIGluIGNhc2VzIHdoZW4geW91IHdhbnQgdG8gYXBwbHkgdGltZW91dCBsb2dpYyBhcm91bmQgYmxvY2tcbiAgICBvZiBjb2RlIG9yIGluIGNhc2VzIHdoZW4gYXN5bmNpby53YWl0X2ZvciBpcyBub3Qgc3VpdGFibGUuIEZvciBleGFtcGxlOlxuXG4gICAgPj4+IGFzeW5jIHdpdGggdGltZW91dCgwLjAwMSk6XG4gICAgLi4uICAgICBhc3luYyB3aXRoIGFpb2h0dHAuZ2V0KFwnaHR0cHM6Ly9naXRodWIuY29tXCcpIGFzIHI6XG4gICAgLi4uICAgICAgICAgYXdhaXQgci50ZXh0KClcblxuXG4gICAgZGVsYXkgLSB2YWx1ZSBpbiBzZWNvbmRzIG9yIE5vbmUgdG8gZGlzYWJsZSB0aW1lb3V0IGxvZ2ljXG4gICAgIiIiXG4gICAgbG9vcCA9IF9nZXRfcnVubmluZ19sb29wKClcbiAgICBpZiBkZWxheSBpcyBub3QgTm9uZTpcbiAgICAgICAgZGVhZGxpbmUgPSBsb29wLnRpbWUoKSArIGRlbGF5ICAjIHR5cGU6IE9wdGlvbmFsW2Zsb2F0XVxuICAgIGVsc2U6XG4gICAgICAgIGRlYWRsaW5lID0gTm9uZVxuICAgIHJldHVybiBUaW1lb3V0KGRlYWRsaW5lLCBsb29wKVxuXG5cbmRlZiB0aW1lb3V0X2F0KGRlYWRsaW5lOiBPcHRpb25hbFtmbG9hdF0pIC0+ICJUaW1lb3V0IjpcbiAgICAiIiJTY2hlZHVsZSB0aGUgdGltZW91dCBhdCBhYnNvbHV0ZSB0aW1lLlxuXG4gICAgZGVhZGxpbmUgYXJndW1lbnQgcG9pbnRzIG9uIHRoZSB0aW1lIGluIHRoZSBzYW1lIGNsb2NrIHN5c3RlbVxuICAgIGFzIGxvb3AudGltZSgpLlxuXG4gICAgUGxlYXNlIG5vdGU6IGl0IGlzIG5vdCBQT1NJWCB0aW1lIGJ1dCBhIHRpbWUgd2l0aFxuICAgIHVuZGVmaW5lZCBzdGFydGluZyBiYXNlLCBlLmcuIHRoZSB0aW1lIG9mIHRoZSBzeXN0ZW0gcG93ZXIgb24uXG5cbiAgICA+Pj4gYXN5bmMgd2l0aCB0aW1lb3V0X2F0KGxvb3AudGltZSgpICsgMTApOlxuICAgIC4uLiAgICAgYXN5bmMgd2l0aCBhaW9odHRwLmdldChcJ2h0dHBzOi8vZ2l0aHViLmNvbVwnKSBhcyByOlxuICAgIC4uLiAgICAgICAgIGF3YWl0IHIudGV4dCgpXG5cblxuICAgICIiIlxuICAgIGxvb3AgPSBfZ2V0X3J1bm5pbmdfbG9vcCgpXG4gICAgcmV0dXJuIFRpbWVvdXQoZGVhZGxpbmUsIGxvb3ApXG5cblxuY2xhc3MgX1N0YXRlKGVudW0uRW51bSk6XG4gICAgSU5JVCA9ICJJTklUIlxuICAgIEVOVEVSID0gIkVOVEVSIlxuICAgIFRJTUVPVVQgPSAiVElNRU9VVCJcbiAgICBFWElUID0gIkVYSVQiXG5cblxuQGZpbmFsXG5jbGFzcyBUaW1lb3V0OlxuICAgICMgSW50ZXJuYWwgY2xhc3MsIHBsZWFzZSBkb25cJ3QgaW5zdGFudGlhdGUgaXQgZGlyZWN0bHlcbiAgICAjIFVzZSB0aW1lb3V0KCkgYW5kIHRpbWVvdXRfYXQoKSBwdWJsaWMgZmFjdG9yaWVzIGluc3RlYWQuXG4gICAgI1xuICAgICMgSW1wbGVtZW50YXRpb24gbm90ZTogYGFzeW5jIHdpdGggdGltZW91dCgpYCBpcyBwcmVmZXJyZWRcbiAgICAjIG92ZXIgYHdpdGggdGltZW91dCgpYC5cbiAgICAjIFdoaWxlIHRlY2huaWNhbGx5IHRoZSBUaW1lb3V0IGNsYXNzIGltcGxlbWVudGF0aW9uXG4gICAgIyBkb2VzblwndCBuZWVkIHRvIGJlIGFzeW5jIGF0IGFsbCxcbiAgICAjIHRoZSBgYXN5bmMgd2l0aGAgc3RhdGVtZW50IGV4cGxpY2l0bHkgcG9pbnRzIHRoYXRcbiAgICAjIHRoZSBjb250ZXh0IG1hbmFnZXIgc2hvdWxkIGJlIHVzZWQgZnJvbSBhc3luYyBmdW5jdGlvbiBjb250ZXh0LlxuICAgICNcbiAgICAjIFRoaXMgZGVzaWduIGFsbG93cyB0byBhdm9pZCBtYW55IHNpbGx5IG1pc3VzYWdlcy5cbiAgICAjXG4gICAgIyBUaW1lb3V0RXJyb3IgaXMgcmFpc2VkIGltbWFkaWF0ZWxseSB3aGVuIHNjaGVkdWxlZFxuICAgICMgaWYgdGhlIGRlYWRsaW5lIGlzIHBhc3NlZC5cbiAgICAjIFRoZSBwdXJwb3NlIGlzIHRvIHRpbWUgb3V0IGFzIHNzb24gYXMgcG9zc2libGVcbiAgICAjIHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIG5leHQgYXdhaXQgZXhwcmVzc2lvbi5cblxuICAgIF9fc2xvdHNfXyA9ICgiX2RlYWRsaW5lIiwgIl9sb29wIiwgIl9zdGF0ZSIsICJfdGltZW91dF9oYW5kbGVyIilcblxuICAgIGRlZiBfX2luaXRfXyhcbiAgICAgICAgc2VsZiwgZGVhZGxpbmU6IE9wdGlvbmFsW2Zsb2F0XSwgbG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcFxuICAgICkgLT4gTm9uZTpcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3BcbiAgICAgICAgc2VsZi5fc3RhdGUgPSBfU3RhdGUuSU5JVFxuXG4gICAgICAgIHNlbGYuX3RpbWVvdXRfaGFuZGxlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5IYW5kbGVdXG4gICAgICAgIGlmIGRlYWRsaW5lIGlzIE5vbmU6XG4gICAgICAgICAgICBzZWxmLl9kZWFkbGluZSA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbZmxvYXRdXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBzZWxmLnVwZGF0ZShkZWFkbGluZSlcblxuICAgIGRlZiBfX2VudGVyX18oc2VsZikgLT4gIlRpbWVvdXQiOlxuICAgICAgICB3YXJuaW5ncy53YXJuKFxuICAgICAgICAgICAgIndpdGggdGltZW91dCgpIGlzIGRlcHJlY2F0ZWQsIHVzZSBhc3luYyB3aXRoIHRpbWVvdXQoKSBpbnN0ZWFkIixcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcbiAgICAgICAgICAgIHN0YWNrbGV2ZWw9MixcbiAgICAgICAgKVxuICAgICAgICBzZWxmLl9kb19lbnRlcigpXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBkZWYgX19leGl0X18oXG4gICAgICAgIHNlbGYsXG4gICAgICAgIGV4Y190eXBlOiBPcHRpb25hbFtUeXBlW0Jhc2VFeGNlcHRpb25dXSxcbiAgICAgICAgZXhjX3ZhbDogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0sXG4gICAgICAgIGV4Y190YjogT3B0aW9uYWxbVHJhY2ViYWNrVHlwZV0sXG4gICAgKSAtPiBPcHRpb25hbFtib29sXTpcbiAgICAgICAgc2VsZi5fZG9fZXhpdChleGNfdHlwZSlcbiAgICAgICAgcmV0dXJuIE5vbmVcblxuICAgIGFzeW5jIGRlZiBfX2FlbnRlcl9fKHNlbGYpIC0+ICJUaW1lb3V0IjpcbiAgICAgICAgc2VsZi5fZG9fZW50ZXIoKVxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgYXN5bmMgZGVmIF9fYWV4aXRfXyhcbiAgICAgICAgc2VsZixcbiAgICAgICAgZXhjX3R5cGU6IE9wdGlvbmFsW1R5cGVbQmFzZUV4Y2VwdGlvbl1dLFxuICAgICAgICBleGNfdmFsOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXSxcbiAgICAgICAgZXhjX3RiOiBPcHRpb25hbFtUcmFjZWJhY2tUeXBlXSxcbiAgICApIC0+IE9wdGlvbmFsW2Jvb2xdOlxuICAgICAgICBzZWxmLl9kb19leGl0KGV4Y190eXBlKVxuICAgICAgICByZXR1cm4gTm9uZVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGV4cGlyZWQoc2VsZikgLT4gYm9vbDpcbiAgICAgICAgIiIiSXMgdGltZW91dCBleHBpcmVkIGR1cmluZyBleGVjdXRpb24/IiIiXG4gICAgICAgIHJldHVybiBzZWxmLl9zdGF0ZSA9PSBfU3RhdGUuVElNRU9VVFxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGRlYWRsaW5lKHNlbGYpIC0+IE9wdGlvbmFsW2Zsb2F0XTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2RlYWRsaW5lXG5cbiAgICBkZWYgcmVqZWN0KHNlbGYpIC0+IE5vbmU6XG4gICAgICAgICIiIlJlamVjdCBzY2hlZHVsZWQgdGltZW91dCBpZiBhbnkuIiIiXG4gICAgICAgICMgY2FuY2VsIGlzIG1heWJlIGJldHRlciBuYW1lIGJ1dFxuICAgICAgICAjIHRhc2suY2FuY2VsKCkgcmFpc2VzIENhbmNlbGxlZEVycm9yIGluIGFzeW5jaW8gd29ybGQuXG4gICAgICAgIGlmIHNlbGYuX3N0YXRlIG5vdCBpbiAoX1N0YXRlLklOSVQsIF9TdGF0ZS5FTlRFUik6XG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoZiJpbnZhbGlkIHN0YXRlIHtzZWxmLl9zdGF0ZS52YWx1ZX0iKVxuICAgICAgICBzZWxmLl9yZWplY3QoKVxuXG4gICAgZGVmIF9yZWplY3Qoc2VsZikgLT4gTm9uZTpcbiAgICAgICAgaWYgc2VsZi5fdGltZW91dF9oYW5kbGVyIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgc2VsZi5fdGltZW91dF9oYW5kbGVyLmNhbmNlbCgpXG4gICAgICAgICAgICBzZWxmLl90aW1lb3V0X2hhbmRsZXIgPSBOb25lXG5cbiAgICBkZWYgc2hpZnQoc2VsZiwgZGVsYXk6IGZsb2F0KSAtPiBOb25lOlxuICAgICAgICAiIiJBZHZhbmNlIHRpbWVvdXQgb24gZGVsYXkgc2Vjb25kcy5cblxuICAgICAgICBUaGUgZGVsYXkgY2FuIGJlIG5lZ2F0aXZlLlxuXG4gICAgICAgIFJhaXNlIFJ1bnRpbWVFcnJvciBpZiBzaGlmdCBpcyBjYWxsZWQgd2hlbiBkZWFkbGluZSBpcyBub3Qgc2NoZWR1bGVkXG4gICAgICAgICIiIlxuICAgICAgICBkZWFkbGluZSA9IHNlbGYuX2RlYWRsaW5lXG4gICAgICAgIGlmIGRlYWRsaW5lIGlzIE5vbmU6XG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoImNhbm5vdCBzaGlmdCB0aW1lb3V0IGlmIGRlYWRsaW5lIGlzIG5vdCBzY2hlZHVsZWQiKVxuICAgICAgICBzZWxmLnVwZGF0ZShkZWFkbGluZSArIGRlbGF5KVxuXG4gICAgZGVmIHVwZGF0ZShzZWxmLCBkZWFkbGluZTogZmxvYXQpIC0+IE5vbmU6XG4gICAgICAgICIiIlNldCBkZWFkbGluZSB0byBhYnNvbHV0ZSB2YWx1ZS5cblxuICAgICAgICBkZWFkbGluZSBhcmd1bWVudCBwb2ludHMgb24gdGhlIHRpbWUgaW4gdGhlIHNhbWUgY2xvY2sgc3lzdGVtXG4gICAgICAgIGFzIGxvb3AudGltZSgpLlxuXG4gICAgICAgIElmIG5ldyBkZWFkbGluZSBpcyBpbiB0aGUgcGFzdCB0aGUgdGltZW91dCBpcyByYWlzZWQgaW1tZWRpYXRlbGx5LlxuXG4gICAgICAgIFBsZWFzZSBub3RlOiBpdCBpcyBub3QgUE9TSVggdGltZSBidXQgYSB0aW1lIHdpdGhcbiAgICAgICAgdW5kZWZpbmVkIHN0YXJ0aW5nIGJhc2UsIGUuZy4gdGhlIHRpbWUgb2YgdGhlIHN5c3RlbSBwb3dlciBvbi5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIHNlbGYuX3N0YXRlID09IF9TdGF0ZS5FWElUOlxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJjYW5ub3QgcmVzY2hlZHVsZSBhZnRlciBleGl0IGZyb20gY29udGV4dCBtYW5hZ2VyIilcbiAgICAgICAgaWYgc2VsZi5fc3RhdGUgPT0gX1N0YXRlLlRJTUVPVVQ6XG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoImNhbm5vdCByZXNjaGVkdWxlIGV4cGlyZWQgdGltZW91dCIpXG4gICAgICAgIGlmIHNlbGYuX3RpbWVvdXRfaGFuZGxlciBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHNlbGYuX3RpbWVvdXRfaGFuZGxlci5jYW5jZWwoKVxuICAgICAgICBzZWxmLl9kZWFkbGluZSA9IGRlYWRsaW5lXG4gICAgICAgIGlmIHNlbGYuX3N0YXRlICE9IF9TdGF0ZS5JTklUOlxuICAgICAgICAgICAgc2VsZi5fcmVzY2hlZHVsZSgpXG5cbiAgICBkZWYgX3Jlc2NoZWR1bGUoc2VsZikgLT4gTm9uZTpcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3N0YXRlID09IF9TdGF0ZS5FTlRFUlxuICAgICAgICBkZWFkbGluZSA9IHNlbGYuX2RlYWRsaW5lXG4gICAgICAgIGlmIGRlYWRsaW5lIGlzIE5vbmU6XG4gICAgICAgICAgICByZXR1cm5cblxuICAgICAgICBub3cgPSBzZWxmLl9sb29wLnRpbWUoKVxuICAgICAgICBpZiBzZWxmLl90aW1lb3V0X2hhbmRsZXIgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICBzZWxmLl90aW1lb3V0X2hhbmRsZXIuY2FuY2VsKClcblxuICAgICAgICB0YXNrID0gX2N1cnJlbnRfdGFzayhzZWxmLl9sb29wKVxuICAgICAgICBpZiBkZWFkbGluZSA8PSBub3c6XG4gICAgICAgICAgICBzZWxmLl90aW1lb3V0X2hhbmRsZXIgPSBzZWxmLl9sb29wLmNhbGxfc29vbihzZWxmLl9vbl90aW1lb3V0LCB0YXNrKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgc2VsZi5fdGltZW91dF9oYW5kbGVyID0gc2VsZi5fbG9vcC5jYWxsX2F0KGRlYWRsaW5lLCBzZWxmLl9vbl90aW1lb3V0LCB0YXNrKVxuXG4gICAgZGVmIF9kb19lbnRlcihzZWxmKSAtPiBOb25lOlxuICAgICAgICBpZiBzZWxmLl9zdGF0ZSAhPSBfU3RhdGUuSU5JVDpcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihmImludmFsaWQgc3RhdGUge3NlbGYuX3N0YXRlLnZhbHVlfSIpXG4gICAgICAgIHNlbGYuX3N0YXRlID0gX1N0YXRlLkVOVEVSXG4gICAgICAgIHNlbGYuX3Jlc2NoZWR1bGUoKVxuXG4gICAgZGVmIF9kb19leGl0KHNlbGYsIGV4Y190eXBlOiBPcHRpb25hbFtUeXBlW0Jhc2VFeGNlcHRpb25dXSkgLT4gTm9uZTpcbiAgICAgICAgaWYgZXhjX3R5cGUgaXMgYXN5bmNpby5DYW5jZWxsZWRFcnJvciBhbmQgc2VsZi5fc3RhdGUgPT0gX1N0YXRlLlRJTUVPVVQ6XG4gICAgICAgICAgICBzZWxmLl90aW1lb3V0X2hhbmRsZXIgPSBOb25lXG4gICAgICAgICAgICByYWlzZSBhc3luY2lvLlRpbWVvdXRFcnJvclxuICAgICAgICAjIHRpbWVvdXQgaGFzIG5vdCBleHBpcmVkXG4gICAgICAgIHNlbGYuX3N0YXRlID0gX1N0YXRlLkVYSVRcbiAgICAgICAgc2VsZi5fcmVqZWN0KClcbiAgICAgICAgcmV0dXJuIE5vbmVcblxuICAgIGRlZiBfb25fdGltZW91dChzZWxmLCB0YXNrOiAiYXN5bmNpby5UYXNrW05vbmVdIikgLT4gTm9uZTpcbiAgICAgICAgdGFzay5jYW5jZWwoKVxuICAgICAgICBzZWxmLl9zdGF0ZSA9IF9TdGF0ZS5USU1FT1VUXG4gICAgICAgICMgZHJvcCB0aGUgcmVmZXJlbmNlIGVhcmx5XG4gICAgICAgIHNlbGYuX3RpbWVvdXRfaGFuZGxlciA9IE5vbmVcblxuXG5pZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA3KTpcblxuICAgIGRlZiBfY3VycmVudF90YXNrKGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3ApIC0+ICJPcHRpb25hbFthc3luY2lvLlRhc2tbQW55XV0iOlxuICAgICAgICByZXR1cm4gYXN5bmNpby5jdXJyZW50X3Rhc2sobG9vcD1sb29wKVxuXG5lbHNlOlxuXG4gICAgZGVmIF9jdXJyZW50X3Rhc2sobG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcCkgLT4gIk9wdGlvbmFsW2FzeW5jaW8uVGFza1tBbnldXSI6XG4gICAgICAgIHJldHVybiBhc3luY2lvLlRhc2suY3VycmVudF90YXNrKGxvb3A9bG9vcClcblxuXG5pZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA3KTpcblxuICAgIGRlZiBfZ2V0X3J1bm5pbmdfbG9vcCgpIC0+IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3A6XG4gICAgICAgIHJldHVybiBhc3luY2lvLmdldF9ydW5uaW5nX2xvb3AoKVxuXG5lbHNlOlxuXG4gICAgZGVmIF9nZXRfcnVubmluZ19sb29wKCkgLT4gYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcDpcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxuICAgICAgICBpZiBub3QgbG9vcC5pc19ydW5uaW5nKCk6XG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIm5vIHJ1bm5pbmcgZXZlbnQgbG9vcCIpXG4gICAgICAgIHJldHVybiBsb29wXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9sb2cucHknLCBiJ2ltcG9ydCBsb2dnaW5nXHJcblxyXG5hY2Nlc3NfbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoImFpb2h0dHAuYWNjZXNzIilcclxuY2xpZW50X2xvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCJhaW9odHRwLmNsaWVudCIpXHJcbmludGVybmFsX2xvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCJhaW9odHRwLmludGVybmFsIilcclxuc2VydmVyX2xvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCJhaW9odHRwLnNlcnZlciIpXHJcbndlYl9sb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcigiYWlvaHR0cC53ZWIiKVxyXG53c19sb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcigiYWlvaHR0cC53ZWJzb2NrZXQiKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC93ZWJfYXBwLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgbG9nZ2luZ1xyXG5pbXBvcnQgd2FybmluZ3NcclxuZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHBhcnRpYWwsIHVwZGF0ZV93cmFwcGVyXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBUWVBFX0NIRUNLSU5HLFxyXG4gICAgQW55LFxyXG4gICAgQXN5bmNJdGVyYXRvcixcclxuICAgIEF3YWl0YWJsZSxcclxuICAgIENhbGxhYmxlLFxyXG4gICAgRGljdCxcclxuICAgIEl0ZXJhYmxlLFxyXG4gICAgSXRlcmF0b3IsXHJcbiAgICBMaXN0LFxyXG4gICAgTWFwcGluZyxcclxuICAgIE11dGFibGVNYXBwaW5nLFxyXG4gICAgT3B0aW9uYWwsXHJcbiAgICBTZXF1ZW5jZSxcclxuICAgIFR1cGxlLFxyXG4gICAgVHlwZSxcclxuICAgIFVuaW9uLFxyXG4gICAgY2FzdCxcclxuKVxyXG5cclxuZnJvbSBhaW9zaWduYWwgaW1wb3J0IFNpZ25hbFxyXG5mcm9tIGZyb3plbmxpc3QgaW1wb3J0IEZyb3plbkxpc3RcclxuXHJcbmZyb20gLiBpbXBvcnQgaGRyc1xyXG5mcm9tIC5hYmMgaW1wb3J0IChcclxuICAgIEFic3RyYWN0QWNjZXNzTG9nZ2VyLFxyXG4gICAgQWJzdHJhY3RNYXRjaEluZm8sXHJcbiAgICBBYnN0cmFjdFJvdXRlcixcclxuICAgIEFic3RyYWN0U3RyZWFtV3JpdGVyLFxyXG4pXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IERFQlVHXHJcbmZyb20gLmh0dHBfcGFyc2VyIGltcG9ydCBSYXdSZXF1ZXN0TWVzc2FnZVxyXG5mcm9tIC5sb2cgaW1wb3J0IHdlYl9sb2dnZXJcclxuZnJvbSAuc3RyZWFtcyBpbXBvcnQgU3RyZWFtUmVhZGVyXHJcbmZyb20gLndlYl9sb2cgaW1wb3J0IEFjY2Vzc0xvZ2dlclxyXG5mcm9tIC53ZWJfbWlkZGxld2FyZXMgaW1wb3J0IF9maXhfcmVxdWVzdF9jdXJyZW50X2FwcFxyXG5mcm9tIC53ZWJfcHJvdG9jb2wgaW1wb3J0IFJlcXVlc3RIYW5kbGVyXHJcbmZyb20gLndlYl9yZXF1ZXN0IGltcG9ydCBSZXF1ZXN0XHJcbmZyb20gLndlYl9yZXNwb25zZSBpbXBvcnQgU3RyZWFtUmVzcG9uc2VcclxuZnJvbSAud2ViX3JvdXRlZGVmIGltcG9ydCBBYnN0cmFjdFJvdXRlRGVmXHJcbmZyb20gLndlYl9zZXJ2ZXIgaW1wb3J0IFNlcnZlclxyXG5mcm9tIC53ZWJfdXJsZGlzcGF0Y2hlciBpbXBvcnQgKFxyXG4gICAgQWJzdHJhY3RSZXNvdXJjZSxcclxuICAgIEFic3RyYWN0Um91dGUsXHJcbiAgICBEb21haW4sXHJcbiAgICBNYXNrRG9tYWluLFxyXG4gICAgTWF0Y2hlZFN1YkFwcFJlc291cmNlLFxyXG4gICAgUHJlZml4ZWRTdWJBcHBSZXNvdXJjZSxcclxuICAgIFVybERpc3BhdGNoZXIsXHJcbilcclxuXHJcbl9fYWxsX18gPSAoIkFwcGxpY2F0aW9uIiwgIkNsZWFudXBFcnJvciIpXHJcblxyXG5cclxuaWYgVFlQRV9DSEVDS0lORzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgZnJvbSAudHlwZWRlZnMgaW1wb3J0IEhhbmRsZXJcclxuXHJcbiAgICBfQXBwU2lnbmFsID0gU2lnbmFsW0NhbGxhYmxlW1siQXBwbGljYXRpb24iXSwgQXdhaXRhYmxlW05vbmVdXV1cclxuICAgIF9SZXNwUHJlcGFyZVNpZ25hbCA9IFNpZ25hbFtDYWxsYWJsZVtbUmVxdWVzdCwgU3RyZWFtUmVzcG9uc2VdLCBBd2FpdGFibGVbTm9uZV1dXVxyXG4gICAgX01pZGRsZXdhcmUgPSBVbmlvbltcclxuICAgICAgICBDYWxsYWJsZVtbUmVxdWVzdCwgSGFuZGxlcl0sIEF3YWl0YWJsZVtTdHJlYW1SZXNwb25zZV1dLFxyXG4gICAgICAgIENhbGxhYmxlW1siQXBwbGljYXRpb24iLCBIYW5kbGVyXSwgQXdhaXRhYmxlW0hhbmRsZXJdXSwgICMgb2xkLXN0eWxlXHJcbiAgICBdXHJcbiAgICBfTWlkZGxld2FyZXMgPSBGcm96ZW5MaXN0W19NaWRkbGV3YXJlXVxyXG4gICAgX01pZGRsZXdhcmVzSGFuZGxlcnMgPSBPcHRpb25hbFtTZXF1ZW5jZVtUdXBsZVtfTWlkZGxld2FyZSwgYm9vbF1dXVxyXG4gICAgX1N1YmFwcHMgPSBMaXN0WyJBcHBsaWNhdGlvbiJdXHJcbmVsc2U6XHJcbiAgICAjIE5vIHR5cGUgY2hlY2tlciBtb2RlLCBza2lwIHR5cGVzXHJcbiAgICBfQXBwU2lnbmFsID0gU2lnbmFsXHJcbiAgICBfUmVzcFByZXBhcmVTaWduYWwgPSBTaWduYWxcclxuICAgIF9NaWRkbGV3YXJlID0gQ2FsbGFibGVcclxuICAgIF9NaWRkbGV3YXJlcyA9IEZyb3plbkxpc3RcclxuICAgIF9NaWRkbGV3YXJlc0hhbmRsZXJzID0gT3B0aW9uYWxbU2VxdWVuY2VdXHJcbiAgICBfU3ViYXBwcyA9IExpc3RcclxuXHJcblxyXG5jbGFzcyBBcHBsaWNhdGlvbihNdXRhYmxlTWFwcGluZ1tzdHIsIEFueV0pOlxyXG4gICAgQVRUUlMgPSBmcm96ZW5zZXQoXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgICAibG9nZ2VyIixcclxuICAgICAgICAgICAgIl9kZWJ1ZyIsXHJcbiAgICAgICAgICAgICJfcm91dGVyIixcclxuICAgICAgICAgICAgIl9sb29wIixcclxuICAgICAgICAgICAgIl9oYW5kbGVyX2FyZ3MiLFxyXG4gICAgICAgICAgICAiX21pZGRsZXdhcmVzIixcclxuICAgICAgICAgICAgIl9taWRkbGV3YXJlc19oYW5kbGVycyIsXHJcbiAgICAgICAgICAgICJfcnVuX21pZGRsZXdhcmVzIixcclxuICAgICAgICAgICAgIl9zdGF0ZSIsXHJcbiAgICAgICAgICAgICJfZnJvemVuIixcclxuICAgICAgICAgICAgIl9wcmVfZnJvemVuIixcclxuICAgICAgICAgICAgIl9zdWJhcHBzIixcclxuICAgICAgICAgICAgIl9vbl9yZXNwb25zZV9wcmVwYXJlIixcclxuICAgICAgICAgICAgIl9vbl9zdGFydHVwIixcclxuICAgICAgICAgICAgIl9vbl9zaHV0ZG93biIsXHJcbiAgICAgICAgICAgICJfb25fY2xlYW51cCIsXHJcbiAgICAgICAgICAgICJfY2xpZW50X21heF9zaXplIixcclxuICAgICAgICAgICAgIl9jbGVhbnVwX2N0eCIsXHJcbiAgICAgICAgXVxyXG4gICAgKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgbG9nZ2VyOiBsb2dnaW5nLkxvZ2dlciA9IHdlYl9sb2dnZXIsXHJcbiAgICAgICAgcm91dGVyOiBPcHRpb25hbFtVcmxEaXNwYXRjaGVyXSA9IE5vbmUsXHJcbiAgICAgICAgbWlkZGxld2FyZXM6IEl0ZXJhYmxlW19NaWRkbGV3YXJlXSA9ICgpLFxyXG4gICAgICAgIGhhbmRsZXJfYXJnczogT3B0aW9uYWxbTWFwcGluZ1tzdHIsIEFueV1dID0gTm9uZSxcclxuICAgICAgICBjbGllbnRfbWF4X3NpemU6IGludCA9IDEwMjQgKiogMixcclxuICAgICAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbiAgICAgICAgZGVidWc6IEFueSA9IC4uLiwgICMgbXlweSBkb2VzblwndCBzdXBwb3J0IGVsbGlwc2lzXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgcm91dGVyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJvdXRlciA9IFVybERpc3BhdGNoZXIoKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAicm91dGVyIGFyZ3VtZW50IGlzIGRlcHJlY2F0ZWQiLCBEZXByZWNhdGlvbldhcm5pbmcsIHN0YWNrbGV2ZWw9MlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2Uocm91dGVyLCBBYnN0cmFjdFJvdXRlciksIHJvdXRlclxyXG5cclxuICAgICAgICBpZiBsb29wIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAgICAgImxvb3AgYXJndW1lbnQgaXMgZGVwcmVjYXRlZCIsIERlcHJlY2F0aW9uV2FybmluZywgc3RhY2tsZXZlbD0yXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgZGVidWcgaXMgbm90IC4uLjpcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICJkZWJ1ZyBhcmd1bWVudCBpcyBkZXByZWNhdGVkIiwgRGVwcmVjYXRpb25XYXJuaW5nLCBzdGFja2xldmVsPTJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2RlYnVnID0gZGVidWdcclxuICAgICAgICBzZWxmLl9yb3V0ZXIgPSByb3V0ZXIgICMgdHlwZTogVXJsRGlzcGF0Y2hlclxyXG4gICAgICAgIHNlbGYuX2xvb3AgPSBsb29wXHJcbiAgICAgICAgc2VsZi5faGFuZGxlcl9hcmdzID0gaGFuZGxlcl9hcmdzXHJcbiAgICAgICAgc2VsZi5sb2dnZXIgPSBsb2dnZXJcclxuXHJcbiAgICAgICAgc2VsZi5fbWlkZGxld2FyZXMgPSBGcm96ZW5MaXN0KG1pZGRsZXdhcmVzKSAgIyB0eXBlOiBfTWlkZGxld2FyZXNcclxuXHJcbiAgICAgICAgIyBpbml0aWFsaXplZCBvbiBmcmVlemluZ1xyXG4gICAgICAgIHNlbGYuX21pZGRsZXdhcmVzX2hhbmRsZXJzID0gTm9uZSAgIyB0eXBlOiBfTWlkZGxld2FyZXNIYW5kbGVyc1xyXG4gICAgICAgICMgaW5pdGlhbGl6ZWQgb24gZnJlZXppbmdcclxuICAgICAgICBzZWxmLl9ydW5fbWlkZGxld2FyZXMgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2Jvb2xdXHJcblxyXG4gICAgICAgIHNlbGYuX3N0YXRlID0ge30gICMgdHlwZTogRGljdFtzdHIsIEFueV1cclxuICAgICAgICBzZWxmLl9mcm96ZW4gPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX3ByZV9mcm96ZW4gPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX3N1YmFwcHMgPSBbXSAgIyB0eXBlOiBfU3ViYXBwc1xyXG5cclxuICAgICAgICBzZWxmLl9vbl9yZXNwb25zZV9wcmVwYXJlID0gU2lnbmFsKHNlbGYpICAjIHR5cGU6IF9SZXNwUHJlcGFyZVNpZ25hbFxyXG4gICAgICAgIHNlbGYuX29uX3N0YXJ0dXAgPSBTaWduYWwoc2VsZikgICMgdHlwZTogX0FwcFNpZ25hbFxyXG4gICAgICAgIHNlbGYuX29uX3NodXRkb3duID0gU2lnbmFsKHNlbGYpICAjIHR5cGU6IF9BcHBTaWduYWxcclxuICAgICAgICBzZWxmLl9vbl9jbGVhbnVwID0gU2lnbmFsKHNlbGYpICAjIHR5cGU6IF9BcHBTaWduYWxcclxuICAgICAgICBzZWxmLl9jbGVhbnVwX2N0eCA9IENsZWFudXBDb250ZXh0KClcclxuICAgICAgICBzZWxmLl9vbl9zdGFydHVwLmFwcGVuZChzZWxmLl9jbGVhbnVwX2N0eC5fb25fc3RhcnR1cClcclxuICAgICAgICBzZWxmLl9vbl9jbGVhbnVwLmFwcGVuZChzZWxmLl9jbGVhbnVwX2N0eC5fb25fY2xlYW51cClcclxuICAgICAgICBzZWxmLl9jbGllbnRfbWF4X3NpemUgPSBjbGllbnRfbWF4X3NpemVcclxuXHJcbiAgICBkZWYgX19pbml0X3N1YmNsYXNzX18oY2xzOiBUeXBlWyJBcHBsaWNhdGlvbiJdKSAtPiBOb25lOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJJbmhlcml0YW5jZSBjbGFzcyB7fSBmcm9tIHdlYi5BcHBsaWNhdGlvbiAiXHJcbiAgICAgICAgICAgICJpcyBkaXNjb3VyYWdlZCIuZm9ybWF0KGNscy5fX25hbWVfXyksXHJcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBpZiBERUJVRzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG5cclxuICAgICAgICBkZWYgX19zZXRhdHRyX18oc2VsZiwgbmFtZTogc3RyLCB2YWw6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICAgICAgaWYgbmFtZSBub3QgaW4gc2VsZi5BVFRSUzpcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAgICAgIlNldHRpbmcgY3VzdG9tIHdlYi5BcHBsaWNhdGlvbi57fSBhdHRyaWJ1dGUgIlxyXG4gICAgICAgICAgICAgICAgICAgICJpcyBkaXNjb3VyYWdlZCIuZm9ybWF0KG5hbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHN1cGVyKCkuX19zZXRhdHRyX18obmFtZSwgdmFsKVxyXG5cclxuICAgICMgTXV0YWJsZU1hcHBpbmcgQVBJXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmIGlzIG90aGVyXHJcblxyXG4gICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleTogc3RyKSAtPiBBbnk6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3N0YXRlW2tleV1cclxuXHJcbiAgICBkZWYgX2NoZWNrX2Zyb3plbihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2Zyb3plbjpcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICJDaGFuZ2luZyBzdGF0ZSBvZiBzdGFydGVkIG9yIGpvaW5lZCAiICJhcHBsaWNhdGlvbiBpcyBkZXByZWNhdGVkIixcclxuICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgICAgIHN0YWNrbGV2ZWw9MyxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBrZXk6IHN0ciwgdmFsdWU6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9jaGVja19mcm96ZW4oKVxyXG4gICAgICAgIHNlbGYuX3N0YXRlW2tleV0gPSB2YWx1ZVxyXG5cclxuICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBrZXk6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9jaGVja19mcm96ZW4oKVxyXG4gICAgICAgIGRlbCBzZWxmLl9zdGF0ZVtrZXldXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5fc3RhdGUpXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+IEl0ZXJhdG9yW3N0cl06XHJcbiAgICAgICAgcmV0dXJuIGl0ZXIoc2VsZi5fc3RhdGUpXHJcblxyXG4gICAgIyMjIyMjIyNcclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGxvb3Aoc2VsZikgLT4gYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcDpcclxuICAgICAgICAjIFRlY2huaWNhbGx5IHRoZSBsb29wIGNhbiBiZSBOb25lXHJcbiAgICAgICAgIyBidXQgd2UgbWFzayBpdCBieSBleHBsaWNpdCB0eXBlIGNhc3RcclxuICAgICAgICAjIHRvIHByb3ZpZGUgbW9yZSBjb252aW5pZW50IHR5cGUgYW5ub3RhdGlvblxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oImxvb3AgcHJvcGVydHkgaXMgZGVwcmVjYXRlZCIsIERlcHJlY2F0aW9uV2FybmluZywgc3RhY2tsZXZlbD0yKVxyXG4gICAgICAgIHJldHVybiBjYXN0KGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3AsIHNlbGYuX2xvb3ApXHJcblxyXG4gICAgZGVmIF9zZXRfbG9vcChzZWxmLCBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBsb29wIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuICAgICAgICBpZiBzZWxmLl9sb29wIGlzIG5vdCBOb25lIGFuZCBzZWxmLl9sb29wIGlzIG5vdCBsb29wOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAid2ViLkFwcGxpY2F0aW9uIGluc3RhbmNlIGluaXRpYWxpemVkIHdpdGggZGlmZmVyZW50IGxvb3AiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3BcclxuXHJcbiAgICAgICAgIyBzZXQgbG9vcCBkZWJ1Z1xyXG4gICAgICAgIGlmIHNlbGYuX2RlYnVnIGlzIC4uLjpcclxuICAgICAgICAgICAgc2VsZi5fZGVidWcgPSBsb29wLmdldF9kZWJ1ZygpXHJcblxyXG4gICAgICAgICMgc2V0IGxvb3AgdG8gc3ViIGFwcGxpY2F0aW9uc1xyXG4gICAgICAgIGZvciBzdWJhcHAgaW4gc2VsZi5fc3ViYXBwczpcclxuICAgICAgICAgICAgc3ViYXBwLl9zZXRfbG9vcChsb29wKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHByZV9mcm96ZW4oc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcHJlX2Zyb3plblxyXG5cclxuICAgIGRlZiBwcmVfZnJlZXplKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fcHJlX2Zyb3plbjpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHNlbGYuX3ByZV9mcm96ZW4gPSBUcnVlXHJcbiAgICAgICAgc2VsZi5fbWlkZGxld2FyZXMuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9yb3V0ZXIuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9yZXNwb25zZV9wcmVwYXJlLmZyZWV6ZSgpXHJcbiAgICAgICAgc2VsZi5fY2xlYW51cF9jdHguZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9zdGFydHVwLmZyZWV6ZSgpXHJcbiAgICAgICAgc2VsZi5fb25fc2h1dGRvd24uZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9jbGVhbnVwLmZyZWV6ZSgpXHJcbiAgICAgICAgc2VsZi5fbWlkZGxld2FyZXNfaGFuZGxlcnMgPSB0dXBsZShzZWxmLl9wcmVwYXJlX21pZGRsZXdhcmUoKSlcclxuXHJcbiAgICAgICAgIyBJZiBjdXJyZW50IGFwcCBhbmQgYW55IHN1YmFwcCBkbyBub3QgaGF2ZSBtaWRkbGV3YXJlcyBhdm9pZCBydW4gYWxsXHJcbiAgICAgICAgIyBvZiB0aGUgY29kZSBmb290cHJpbnQgdGhhdCBpdCBpbXBsaWVzLCB3aGljaCBoYXZlIGEgbWlkZGxld2FyZVxyXG4gICAgICAgICMgaGFyZGNvZGVkIHBlciBhcHAgdGhhdCBzZXRzIHVwIHRoZSBjdXJyZW50X2FwcCBhdHRyaWJ1dGUuIElmIG5vXHJcbiAgICAgICAgIyBtaWRkbGV3YXJlcyBhcmUgY29uZmlndXJlZCB0aGUgaGFuZGxlciB3aWxsIHJlY2VpdmUgdGhlIHByb3BlclxyXG4gICAgICAgICMgY3VycmVudF9hcHAgd2l0aG91dCBuZWVkaW5nIGFsbCBvZiB0aGlzIGNvZGUuXHJcbiAgICAgICAgc2VsZi5fcnVuX21pZGRsZXdhcmVzID0gVHJ1ZSBpZiBzZWxmLm1pZGRsZXdhcmVzIGVsc2UgRmFsc2VcclxuXHJcbiAgICAgICAgZm9yIHN1YmFwcCBpbiBzZWxmLl9zdWJhcHBzOlxyXG4gICAgICAgICAgICBzdWJhcHAucHJlX2ZyZWV6ZSgpXHJcbiAgICAgICAgICAgIHNlbGYuX3J1bl9taWRkbGV3YXJlcyA9IHNlbGYuX3J1bl9taWRkbGV3YXJlcyBvciBzdWJhcHAuX3J1bl9taWRkbGV3YXJlc1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGZyb3plbihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mcm96ZW5cclxuXHJcbiAgICBkZWYgZnJlZXplKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fZnJvemVuOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgc2VsZi5wcmVfZnJlZXplKClcclxuICAgICAgICBzZWxmLl9mcm96ZW4gPSBUcnVlXHJcbiAgICAgICAgZm9yIHN1YmFwcCBpbiBzZWxmLl9zdWJhcHBzOlxyXG4gICAgICAgICAgICBzdWJhcHAuZnJlZXplKClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBkZWJ1ZyhzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oImRlYnVnIHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQiLCBEZXByZWNhdGlvbldhcm5pbmcsIHN0YWNrbGV2ZWw9MilcclxuICAgICAgICByZXR1cm4gc2VsZi5fZGVidWcgICMgdHlwZTogaWdub3JlW25vLWFueS1yZXR1cm5dXHJcblxyXG4gICAgZGVmIF9yZWdfc3ViYXBwX3NpZ25hbHMoc2VsZiwgc3ViYXBwOiAiQXBwbGljYXRpb24iKSAtPiBOb25lOlxyXG4gICAgICAgIGRlZiByZWdfaGFuZGxlcihzaWduYW1lOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgICAgIHN1YnNpZyA9IGdldGF0dHIoc3ViYXBwLCBzaWduYW1lKVxyXG5cclxuICAgICAgICAgICAgYXN5bmMgZGVmIGhhbmRsZXIoYXBwOiAiQXBwbGljYXRpb24iKSAtPiBOb25lOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc3Vic2lnLnNlbmQoc3ViYXBwKVxyXG5cclxuICAgICAgICAgICAgYXBwc2lnID0gZ2V0YXR0cihzZWxmLCBzaWduYW1lKVxyXG4gICAgICAgICAgICBhcHBzaWcuYXBwZW5kKGhhbmRsZXIpXHJcblxyXG4gICAgICAgIHJlZ19oYW5kbGVyKCJvbl9zdGFydHVwIilcclxuICAgICAgICByZWdfaGFuZGxlcigib25fc2h1dGRvd24iKVxyXG4gICAgICAgIHJlZ19oYW5kbGVyKCJvbl9jbGVhbnVwIilcclxuXHJcbiAgICBkZWYgYWRkX3N1YmFwcChzZWxmLCBwcmVmaXg6IHN0ciwgc3ViYXBwOiAiQXBwbGljYXRpb24iKSAtPiBBYnN0cmFjdFJlc291cmNlOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHByZWZpeCwgc3RyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJQcmVmaXggbXVzdCBiZSBzdHIiKVxyXG4gICAgICAgIHByZWZpeCA9IHByZWZpeC5yc3RyaXAoIi8iKVxyXG4gICAgICAgIGlmIG5vdCBwcmVmaXg6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlByZWZpeCBjYW5ub3QgYmUgZW1wdHkiKVxyXG4gICAgICAgIGZhY3RvcnkgPSBwYXJ0aWFsKFByZWZpeGVkU3ViQXBwUmVzb3VyY2UsIHByZWZpeCwgc3ViYXBwKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hZGRfc3ViYXBwKGZhY3RvcnksIHN1YmFwcClcclxuXHJcbiAgICBkZWYgX2FkZF9zdWJhcHAoXHJcbiAgICAgICAgc2VsZiwgcmVzb3VyY2VfZmFjdG9yeTogQ2FsbGFibGVbW10sIEFic3RyYWN0UmVzb3VyY2VdLCBzdWJhcHA6ICJBcHBsaWNhdGlvbiJcclxuICAgICkgLT4gQWJzdHJhY3RSZXNvdXJjZTpcclxuICAgICAgICBpZiBzZWxmLmZyb3plbjpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYW5ub3QgYWRkIHN1YiBhcHBsaWNhdGlvbiB0byBmcm96ZW4gYXBwbGljYXRpb24iKVxyXG4gICAgICAgIGlmIHN1YmFwcC5mcm96ZW46XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IGFkZCBmcm96ZW4gYXBwbGljYXRpb24iKVxyXG4gICAgICAgIHJlc291cmNlID0gcmVzb3VyY2VfZmFjdG9yeSgpXHJcbiAgICAgICAgc2VsZi5yb3V0ZXIucmVnaXN0ZXJfcmVzb3VyY2UocmVzb3VyY2UpXHJcbiAgICAgICAgc2VsZi5fcmVnX3N1YmFwcF9zaWduYWxzKHN1YmFwcClcclxuICAgICAgICBzZWxmLl9zdWJhcHBzLmFwcGVuZChzdWJhcHApXHJcbiAgICAgICAgc3ViYXBwLnByZV9mcmVlemUoKVxyXG4gICAgICAgIGlmIHNlbGYuX2xvb3AgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHN1YmFwcC5fc2V0X2xvb3Aoc2VsZi5fbG9vcClcclxuICAgICAgICByZXR1cm4gcmVzb3VyY2VcclxuXHJcbiAgICBkZWYgYWRkX2RvbWFpbihzZWxmLCBkb21haW46IHN0ciwgc3ViYXBwOiAiQXBwbGljYXRpb24iKSAtPiBBYnN0cmFjdFJlc291cmNlOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGRvbWFpbiwgc3RyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJEb21haW4gbXVzdCBiZSBzdHIiKVxyXG4gICAgICAgIGVsaWYgIioiIGluIGRvbWFpbjpcclxuICAgICAgICAgICAgcnVsZSA9IE1hc2tEb21haW4oZG9tYWluKSAgIyB0eXBlOiBEb21haW5cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBydWxlID0gRG9tYWluKGRvbWFpbilcclxuICAgICAgICBmYWN0b3J5ID0gcGFydGlhbChNYXRjaGVkU3ViQXBwUmVzb3VyY2UsIHJ1bGUsIHN1YmFwcClcclxuICAgICAgICByZXR1cm4gc2VsZi5fYWRkX3N1YmFwcChmYWN0b3J5LCBzdWJhcHApXHJcblxyXG4gICAgZGVmIGFkZF9yb3V0ZXMoc2VsZiwgcm91dGVzOiBJdGVyYWJsZVtBYnN0cmFjdFJvdXRlRGVmXSkgLT4gTGlzdFtBYnN0cmFjdFJvdXRlXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5yb3V0ZXIuYWRkX3JvdXRlcyhyb3V0ZXMpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25fcmVzcG9uc2VfcHJlcGFyZShzZWxmKSAtPiBfUmVzcFByZXBhcmVTaWduYWw6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX3Jlc3BvbnNlX3ByZXBhcmVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvbl9zdGFydHVwKHNlbGYpIC0+IF9BcHBTaWduYWw6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX3N0YXJ0dXBcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvbl9zaHV0ZG93bihzZWxmKSAtPiBfQXBwU2lnbmFsOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbl9zaHV0ZG93blxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX2NsZWFudXAoc2VsZikgLT4gX0FwcFNpZ25hbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fY2xlYW51cFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNsZWFudXBfY3R4KHNlbGYpIC0+ICJDbGVhbnVwQ29udGV4dCI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NsZWFudXBfY3R4XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcm91dGVyKHNlbGYpIC0+IFVybERpc3BhdGNoZXI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JvdXRlclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG1pZGRsZXdhcmVzKHNlbGYpIC0+IF9NaWRkbGV3YXJlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fbWlkZGxld2FyZXNcclxuXHJcbiAgICBkZWYgX21ha2VfaGFuZGxlcihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4gICAgICAgIGFjY2Vzc19sb2dfY2xhc3M6IFR5cGVbQWJzdHJhY3RBY2Nlc3NMb2dnZXJdID0gQWNjZXNzTG9nZ2VyLFxyXG4gICAgICAgICoqa3dhcmdzOiBBbnksXHJcbiAgICApIC0+IFNlcnZlcjpcclxuXHJcbiAgICAgICAgaWYgbm90IGlzc3ViY2xhc3MoYWNjZXNzX2xvZ19jbGFzcywgQWJzdHJhY3RBY2Nlc3NMb2dnZXIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiYWNjZXNzX2xvZ19jbGFzcyBtdXN0IGJlIHN1YmNsYXNzIG9mICJcclxuICAgICAgICAgICAgICAgICJhaW9odHRwLmFiYy5BYnN0cmFjdEFjY2Vzc0xvZ2dlciwgZ290IHt9Ii5mb3JtYXQoYWNjZXNzX2xvZ19jbGFzcylcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9zZXRfbG9vcChsb29wKVxyXG4gICAgICAgIHNlbGYuZnJlZXplKClcclxuXHJcbiAgICAgICAga3dhcmdzWyJkZWJ1ZyJdID0gc2VsZi5fZGVidWdcclxuICAgICAgICBrd2FyZ3NbImFjY2Vzc19sb2dfY2xhc3MiXSA9IGFjY2Vzc19sb2dfY2xhc3NcclxuICAgICAgICBpZiBzZWxmLl9oYW5kbGVyX2FyZ3M6XHJcbiAgICAgICAgICAgIGZvciBrLCB2IGluIHNlbGYuX2hhbmRsZXJfYXJncy5pdGVtcygpOlxyXG4gICAgICAgICAgICAgICAga3dhcmdzW2tdID0gdlxyXG5cclxuICAgICAgICByZXR1cm4gU2VydmVyKFxyXG4gICAgICAgICAgICBzZWxmLl9oYW5kbGUsICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZV1cclxuICAgICAgICAgICAgcmVxdWVzdF9mYWN0b3J5PXNlbGYuX21ha2VfcmVxdWVzdCxcclxuICAgICAgICAgICAgbG9vcD1zZWxmLl9sb29wLFxyXG4gICAgICAgICAgICAqKmt3YXJncyxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIG1ha2VfaGFuZGxlcihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4gICAgICAgIGFjY2Vzc19sb2dfY2xhc3M6IFR5cGVbQWJzdHJhY3RBY2Nlc3NMb2dnZXJdID0gQWNjZXNzTG9nZ2VyLFxyXG4gICAgICAgICoqa3dhcmdzOiBBbnksXHJcbiAgICApIC0+IFNlcnZlcjpcclxuXHJcbiAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgIkFwcGxpY2F0aW9uLm1ha2VfaGFuZGxlciguLi4pIGlzIGRlcHJlY2F0ZWQsICIgInVzZSBBcHBSdW5uZXIgQVBJIGluc3RlYWQiLFxyXG4gICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgIHN0YWNrbGV2ZWw9MixcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9tYWtlX2hhbmRsZXIoXHJcbiAgICAgICAgICAgIGxvb3A9bG9vcCwgYWNjZXNzX2xvZ19jbGFzcz1hY2Nlc3NfbG9nX2NsYXNzLCAqKmt3YXJnc1xyXG4gICAgICAgIClcclxuXHJcbiAgICBhc3luYyBkZWYgc3RhcnR1cChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkNhdXNlcyBvbl9zdGFydHVwIHNpZ25hbFxyXG5cclxuICAgICAgICBTaG91bGQgYmUgY2FsbGVkIGluIHRoZSBldmVudCBsb29wIGFsb25nIHdpdGggdGhlIHJlcXVlc3QgaGFuZGxlci5cclxuICAgICAgICAiIiJcclxuICAgICAgICBhd2FpdCBzZWxmLm9uX3N0YXJ0dXAuc2VuZChzZWxmKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzaHV0ZG93bihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkNhdXNlcyBvbl9zaHV0ZG93biBzaWduYWxcclxuXHJcbiAgICAgICAgU2hvdWxkIGJlIGNhbGxlZCBiZWZvcmUgY2xlYW51cCgpXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgYXdhaXQgc2VsZi5vbl9zaHV0ZG93bi5zZW5kKHNlbGYpXHJcblxyXG4gICAgYXN5bmMgZGVmIGNsZWFudXAoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAiIiJDYXVzZXMgb25fY2xlYW51cCBzaWduYWxcclxuXHJcbiAgICAgICAgU2hvdWxkIGJlIGNhbGxlZCBhZnRlciBzaHV0ZG93bigpXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc2VsZi5vbl9jbGVhbnVwLmZyb3plbjpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5vbl9jbGVhbnVwLnNlbmQoc2VsZilcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAjIElmIGFuIGV4Y2VwdGlvbiBvY2N1cnMgaW4gc3RhcnR1cCwgZW5zdXJlIGNsZWFudXAgY29udGV4dHMgYXJlIGNvbXBsZXRlZC5cclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fY2xlYW51cF9jdHguX29uX2NsZWFudXAoc2VsZilcclxuXHJcbiAgICBkZWYgX21ha2VfcmVxdWVzdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1lc3NhZ2U6IFJhd1JlcXVlc3RNZXNzYWdlLFxyXG4gICAgICAgIHBheWxvYWQ6IFN0cmVhbVJlYWRlcixcclxuICAgICAgICBwcm90b2NvbDogUmVxdWVzdEhhbmRsZXIsXHJcbiAgICAgICAgd3JpdGVyOiBBYnN0cmFjdFN0cmVhbVdyaXRlcixcclxuICAgICAgICB0YXNrOiAiYXN5bmNpby5UYXNrW05vbmVdIixcclxuICAgICAgICBfY2xzOiBUeXBlW1JlcXVlc3RdID0gUmVxdWVzdCxcclxuICAgICkgLT4gUmVxdWVzdDpcclxuICAgICAgICByZXR1cm4gX2NscyhcclxuICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgcGF5bG9hZCxcclxuICAgICAgICAgICAgcHJvdG9jb2wsXHJcbiAgICAgICAgICAgIHdyaXRlcixcclxuICAgICAgICAgICAgdGFzayxcclxuICAgICAgICAgICAgc2VsZi5fbG9vcCxcclxuICAgICAgICAgICAgY2xpZW50X21heF9zaXplPXNlbGYuX2NsaWVudF9tYXhfc2l6ZSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9wcmVwYXJlX21pZGRsZXdhcmUoc2VsZikgLT4gSXRlcmF0b3JbVHVwbGVbX01pZGRsZXdhcmUsIGJvb2xdXTpcclxuICAgICAgICBmb3IgbSBpbiByZXZlcnNlZChzZWxmLl9taWRkbGV3YXJlcyk6XHJcbiAgICAgICAgICAgIGlmIGdldGF0dHIobSwgIl9fbWlkZGxld2FyZV92ZXJzaW9uX18iLCBOb25lKSA9PSAxOlxyXG4gICAgICAgICAgICAgICAgeWllbGQgbSwgVHJ1ZVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICAgICBcJ29sZC1zdHlsZSBtaWRkbGV3YXJlICJ7IXJ9IiBkZXByZWNhdGVkLCBcJyAic2VlICMyMjUyIi5mb3JtYXQobSksXHJcbiAgICAgICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrbGV2ZWw9MixcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIHlpZWxkIG0sIEZhbHNlXHJcblxyXG4gICAgICAgIHlpZWxkIF9maXhfcmVxdWVzdF9jdXJyZW50X2FwcChzZWxmKSwgVHJ1ZVxyXG5cclxuICAgIGFzeW5jIGRlZiBfaGFuZGxlKHNlbGYsIHJlcXVlc3Q6IFJlcXVlc3QpIC0+IFN0cmVhbVJlc3BvbnNlOlxyXG4gICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuICAgICAgICBkZWJ1ZyA9IGxvb3AuZ2V0X2RlYnVnKClcclxuICAgICAgICBtYXRjaF9pbmZvID0gYXdhaXQgc2VsZi5fcm91dGVyLnJlc29sdmUocmVxdWVzdClcclxuICAgICAgICBpZiBkZWJ1ZzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShtYXRjaF9pbmZvLCBBYnN0cmFjdE1hdGNoSW5mbyk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIm1hdGNoX2luZm8gc2hvdWxkIGJlIEFic3RyYWN0TWF0Y2hJbmZvICJcclxuICAgICAgICAgICAgICAgICAgICAiaW5zdGFuY2UsIG5vdCB7IXJ9Ii5mb3JtYXQobWF0Y2hfaW5mbylcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICBtYXRjaF9pbmZvLmFkZF9hcHAoc2VsZilcclxuXHJcbiAgICAgICAgbWF0Y2hfaW5mby5mcmVlemUoKVxyXG5cclxuICAgICAgICByZXNwID0gTm9uZVxyXG4gICAgICAgIHJlcXVlc3QuX21hdGNoX2luZm8gPSBtYXRjaF9pbmZvXHJcbiAgICAgICAgZXhwZWN0ID0gcmVxdWVzdC5oZWFkZXJzLmdldChoZHJzLkVYUEVDVClcclxuICAgICAgICBpZiBleHBlY3Q6XHJcbiAgICAgICAgICAgIHJlc3AgPSBhd2FpdCBtYXRjaF9pbmZvLmV4cGVjdF9oYW5kbGVyKHJlcXVlc3QpXHJcbiAgICAgICAgICAgIGF3YWl0IHJlcXVlc3Qud3JpdGVyLmRyYWluKClcclxuXHJcbiAgICAgICAgaWYgcmVzcCBpcyBOb25lOlxyXG4gICAgICAgICAgICBoYW5kbGVyID0gbWF0Y2hfaW5mby5oYW5kbGVyXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLl9ydW5fbWlkZGxld2FyZXM6XHJcbiAgICAgICAgICAgICAgICBmb3IgYXBwIGluIG1hdGNoX2luZm8uYXBwc1s6Oi0xXTpcclxuICAgICAgICAgICAgICAgICAgICBmb3IgbSwgbmV3X3N0eWxlIGluIGFwcC5fbWlkZGxld2FyZXNfaGFuZGxlcnM6ICAjIHR5cGU6IGlnbm9yZVt1bmlvbi1hdHRyXSAjIG5vcWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgbmV3X3N0eWxlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlciA9IHVwZGF0ZV93cmFwcGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpYWwobSwgaGFuZGxlcj1oYW5kbGVyKSwgaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlciA9IGF3YWl0IG0oYXBwLCBoYW5kbGVyKSAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGVdXHJcblxyXG4gICAgICAgICAgICByZXNwID0gYXdhaXQgaGFuZGxlcihyZXF1ZXN0KVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzcFxyXG5cclxuICAgIGRlZiBfX2NhbGxfXyhzZWxmKSAtPiAiQXBwbGljYXRpb24iOlxyXG4gICAgICAgICIiImd1bmljb3JuIGNvbXBhdGliaWxpdHkiIiJcclxuICAgICAgICByZXR1cm4gc2VsZlxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIGYiPEFwcGxpY2F0aW9uIDB4e2lkKHNlbGYpOnh9PiJcclxuXHJcbiAgICBkZWYgX19ib29sX18oc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuXHJcbmNsYXNzIENsZWFudXBFcnJvcihSdW50aW1lRXJyb3IpOlxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZXhjZXB0aW9ucyhzZWxmKSAtPiBMaXN0W0Jhc2VFeGNlcHRpb25dOlxyXG4gICAgICAgIHJldHVybiBjYXN0KExpc3RbQmFzZUV4Y2VwdGlvbl0sIHNlbGYuYXJnc1sxXSlcclxuXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBfQ2xlYW51cENvbnRleHRCYXNlID0gRnJvemVuTGlzdFtDYWxsYWJsZVtbQXBwbGljYXRpb25dLCBBc3luY0l0ZXJhdG9yW05vbmVdXV1cclxuZWxzZTpcclxuICAgIF9DbGVhbnVwQ29udGV4dEJhc2UgPSBGcm96ZW5MaXN0XHJcblxyXG5cclxuY2xhc3MgQ2xlYW51cENvbnRleHQoX0NsZWFudXBDb250ZXh0QmFzZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKClcclxuICAgICAgICBzZWxmLl9leGl0cyA9IFtdICAjIHR5cGU6IExpc3RbQXN5bmNJdGVyYXRvcltOb25lXV1cclxuXHJcbiAgICBhc3luYyBkZWYgX29uX3N0YXJ0dXAoc2VsZiwgYXBwOiBBcHBsaWNhdGlvbikgLT4gTm9uZTpcclxuICAgICAgICBmb3IgY2IgaW4gc2VsZjpcclxuICAgICAgICAgICAgaXQgPSBjYihhcHApLl9fYWl0ZXJfXygpXHJcbiAgICAgICAgICAgIGF3YWl0IGl0Ll9fYW5leHRfXygpXHJcbiAgICAgICAgICAgIHNlbGYuX2V4aXRzLmFwcGVuZChpdClcclxuXHJcbiAgICBhc3luYyBkZWYgX29uX2NsZWFudXAoc2VsZiwgYXBwOiBBcHBsaWNhdGlvbikgLT4gTm9uZTpcclxuICAgICAgICBlcnJvcnMgPSBbXVxyXG4gICAgICAgIGZvciBpdCBpbiByZXZlcnNlZChzZWxmLl9leGl0cyk6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IGl0Ll9fYW5leHRfXygpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBTdG9wQXN5bmNJdGVyYXRpb246XHJcbiAgICAgICAgICAgICAgICBwYXNzXHJcbiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgZXJyb3JzLmFwcGVuZChleGMpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMuYXBwZW5kKFJ1bnRpbWVFcnJvcihmIntpdCFyfSBoYXMgbW9yZSB0aGFuIG9uZSBcJ3lpZWxkXCciKSlcclxuICAgICAgICBpZiBlcnJvcnM6XHJcbiAgICAgICAgICAgIGlmIGxlbihlcnJvcnMpID09IDE6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBlcnJvcnNbMF1cclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIENsZWFudXBFcnJvcigiTXVsdGlwbGUgZXJyb3JzIG9uIGNsZWFudXAgc3RhZ2UiLCBlcnJvcnMpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9zaWduYWwvX19pbml0X18ucHknLCBiJ2Zyb20gZnJvemVubGlzdCBpbXBvcnQgRnJvemVuTGlzdFxuXG5fX3ZlcnNpb25fXyA9ICIxLjIuMCJcblxuX19hbGxfXyA9ICgiU2lnbmFsIiwpXG5cblxuY2xhc3MgU2lnbmFsKEZyb3plbkxpc3QpOlxuICAgICIiIkNvcm91dGluZS1iYXNlZCBzaWduYWwgaW1wbGVtZW50YXRpb24uXG5cbiAgICBUbyBjb25uZWN0IGEgY2FsbGJhY2sgdG8gYSBzaWduYWwsIHVzZSBhbnkgbGlzdCBtZXRob2QuXG5cbiAgICBTaWduYWxzIGFyZSBmaXJlZCB1c2luZyB0aGUgc2VuZCgpIGNvcm91dGluZSwgd2hpY2ggdGFrZXMgbmFtZWRcbiAgICBhcmd1bWVudHMuXG4gICAgIiIiXG5cbiAgICBfX3Nsb3RzX18gPSAoIl9vd25lciIsKVxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG93bmVyKTpcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpXG4gICAgICAgIHNlbGYuX293bmVyID0gb3duZXJcblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuICI8U2lnbmFsIG93bmVyPXt9LCBmcm96ZW49e30sIHshcn0+Ii5mb3JtYXQoXG4gICAgICAgICAgICBzZWxmLl9vd25lciwgc2VsZi5mcm96ZW4sIGxpc3Qoc2VsZilcbiAgICAgICAgKVxuXG4gICAgYXN5bmMgZGVmIHNlbmQoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKTpcbiAgICAgICAgIiIiXG4gICAgICAgIFNlbmRzIGRhdGEgdG8gYWxsIHJlZ2lzdGVyZWQgcmVjZWl2ZXJzLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgbm90IHNlbGYuZnJvemVuOlxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYW5ub3Qgc2VuZCBub24tZnJvemVuIHNpZ25hbC4iKVxuXG4gICAgICAgIGZvciByZWNlaXZlciBpbiBzZWxmOlxuICAgICAgICAgICAgYXdhaXQgcmVjZWl2ZXIoKmFyZ3MsICoqa3dhcmdzKSAgIyB0eXBlOiBpZ25vcmVcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdmcm96ZW5saXN0L19faW5pdF9fLnB5JywgYidpbXBvcnQgb3NcclxuaW1wb3J0IHN5c1xyXG5pbXBvcnQgdHlwZXNcclxuZnJvbSBjb2xsZWN0aW9ucy5hYmMgaW1wb3J0IE11dGFibGVTZXF1ZW5jZVxyXG5mcm9tIGZ1bmN0b29scyBpbXBvcnQgdG90YWxfb3JkZXJpbmdcclxuZnJvbSB0eXBpbmcgaW1wb3J0IFR1cGxlLCBUeXBlXHJcblxyXG5fX3ZlcnNpb25fXyA9ICIxLjMuMCJcclxuXHJcbl9fYWxsX18gPSAoIkZyb3plbkxpc3QiLCAiUHlGcm96ZW5MaXN0IikgICMgdHlwZTogVHVwbGVbc3RyLCAuLi5dXHJcblxyXG5cclxuTk9fRVhURU5TSU9OUyA9IGJvb2wob3MuZW52aXJvbi5nZXQoIkZST1pFTkxJU1RfTk9fRVhURU5TSU9OUyIpKSAgIyB0eXBlOiBib29sXHJcblxyXG5cclxuQHRvdGFsX29yZGVyaW5nXHJcbmNsYXNzIEZyb3plbkxpc3QoTXV0YWJsZVNlcXVlbmNlKTpcclxuXHJcbiAgICBfX3Nsb3RzX18gPSAoIl9mcm96ZW4iLCAiX2l0ZW1zIilcclxuXHJcbiAgICBpZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA5KTpcclxuICAgICAgICBfX2NsYXNzX2dldGl0ZW1fXyA9IGNsYXNzbWV0aG9kKHR5cGVzLkdlbmVyaWNBbGlhcylcclxuICAgIGVsc2U6XHJcblxyXG4gICAgICAgIEBjbGFzc21ldGhvZFxyXG4gICAgICAgIGRlZiBfX2NsYXNzX2dldGl0ZW1fXyhjbHM6IFR5cGVbIkZyb3plbkxpc3QiXSkgLT4gVHlwZVsiRnJvemVuTGlzdCJdOlxyXG4gICAgICAgICAgICByZXR1cm4gY2xzXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGl0ZW1zPU5vbmUpOlxyXG4gICAgICAgIHNlbGYuX2Zyb3plbiA9IEZhbHNlXHJcbiAgICAgICAgaWYgaXRlbXMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGl0ZW1zID0gbGlzdChpdGVtcylcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBpdGVtcyA9IFtdXHJcbiAgICAgICAgc2VsZi5faXRlbXMgPSBpdGVtc1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGZyb3plbihzZWxmKTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZnJvemVuXHJcblxyXG4gICAgZGVmIGZyZWV6ZShzZWxmKTpcclxuICAgICAgICBzZWxmLl9mcm96ZW4gPSBUcnVlXHJcblxyXG4gICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGluZGV4KTpcclxuICAgICAgICByZXR1cm4gc2VsZi5faXRlbXNbaW5kZXhdXHJcblxyXG4gICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGluZGV4LCB2YWx1ZSk6XHJcbiAgICAgICAgaWYgc2VsZi5fZnJvemVuOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbm5vdCBtb2RpZnkgZnJvemVuIGxpc3QuIilcclxuICAgICAgICBzZWxmLl9pdGVtc1tpbmRleF0gPSB2YWx1ZVxyXG5cclxuICAgIGRlZiBfX2RlbGl0ZW1fXyhzZWxmLCBpbmRleCk6XHJcbiAgICAgICAgaWYgc2VsZi5fZnJvemVuOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbm5vdCBtb2RpZnkgZnJvemVuIGxpc3QuIilcclxuICAgICAgICBkZWwgc2VsZi5faXRlbXNbaW5kZXhdXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZik6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2l0ZW1zLl9fbGVuX18oKVxyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKTpcclxuICAgICAgICByZXR1cm4gc2VsZi5faXRlbXMuX19pdGVyX18oKVxyXG5cclxuICAgIGRlZiBfX3JldmVyc2VkX18oc2VsZik6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2l0ZW1zLl9fcmV2ZXJzZWRfXygpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6XHJcbiAgICAgICAgcmV0dXJuIGxpc3Qoc2VsZikgPT0gb3RoZXJcclxuXHJcbiAgICBkZWYgX19sZV9fKHNlbGYsIG90aGVyKTpcclxuICAgICAgICByZXR1cm4gbGlzdChzZWxmKSA8PSBvdGhlclxyXG5cclxuICAgIGRlZiBpbnNlcnQoc2VsZiwgcG9zLCBpdGVtKTpcclxuICAgICAgICBpZiBzZWxmLl9mcm96ZW46XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IG1vZGlmeSBmcm96ZW4gbGlzdC4iKVxyXG4gICAgICAgIHNlbGYuX2l0ZW1zLmluc2VydChwb3MsIGl0ZW0pXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBmIjxGcm96ZW5MaXN0KGZyb3plbj17c2VsZi5fZnJvemVufSwge3NlbGYuX2l0ZW1zIXJ9KT4iXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpOlxyXG4gICAgICAgIGlmIHNlbGYuX2Zyb3plbjpcclxuICAgICAgICAgICAgcmV0dXJuIGhhc2godHVwbGUoc2VsZikpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYW5ub3QgaGFzaCB1bmZyb3plbiBsaXN0LiIpXHJcblxyXG5cclxuUHlGcm96ZW5MaXN0ID0gRnJvemVuTGlzdFxyXG5cclxuXHJcbnRyeTpcclxuICAgIGZyb20gLl9mcm96ZW5saXN0IGltcG9ydCBGcm96ZW5MaXN0IGFzIENGcm96ZW5MaXN0ICAjIHR5cGU6IGlnbm9yZVxyXG5cclxuICAgIGlmIG5vdCBOT19FWFRFTlNJT05TOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICAgICAgRnJvemVuTGlzdCA9IENGcm96ZW5MaXN0ICAjIHR5cGU6IGlnbm9yZVxyXG5leGNlcHQgSW1wb3J0RXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIHBhc3NcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvaHR0cF9wYXJzZXIucHknLCBiJ2ltcG9ydCBhYmNcclxuaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IGNvbGxlY3Rpb25zXHJcbmltcG9ydCByZVxyXG5pbXBvcnQgc3RyaW5nXHJcbmltcG9ydCB6bGliXHJcbmZyb20gY29udGV4dGxpYiBpbXBvcnQgc3VwcHJlc3NcclxuZnJvbSBlbnVtIGltcG9ydCBJbnRFbnVtXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBBbnksXHJcbiAgICBHZW5lcmljLFxyXG4gICAgTGlzdCxcclxuICAgIE5hbWVkVHVwbGUsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFBhdHRlcm4sXHJcbiAgICBTZXQsXHJcbiAgICBUdXBsZSxcclxuICAgIFR5cGUsXHJcbiAgICBUeXBlVmFyLFxyXG4gICAgVW5pb24sXHJcbiAgICBjYXN0LFxyXG4pXHJcblxyXG5mcm9tIG11bHRpZGljdCBpbXBvcnQgQ0lNdWx0aURpY3QsIENJTXVsdGlEaWN0UHJveHksIGlzdHJcclxuZnJvbSB5YXJsIGltcG9ydCBVUkxcclxuXHJcbmZyb20gLiBpbXBvcnQgaGRyc1xyXG5mcm9tIC5iYXNlX3Byb3RvY29sIGltcG9ydCBCYXNlUHJvdG9jb2xcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgTk9fRVhURU5TSU9OUywgQmFzZVRpbWVyQ29udGV4dFxyXG5mcm9tIC5odHRwX2V4Y2VwdGlvbnMgaW1wb3J0IChcclxuICAgIEJhZEh0dHBNZXNzYWdlLFxyXG4gICAgQmFkU3RhdHVzTGluZSxcclxuICAgIENvbnRlbnRFbmNvZGluZ0Vycm9yLFxyXG4gICAgQ29udGVudExlbmd0aEVycm9yLFxyXG4gICAgSW52YWxpZEhlYWRlcixcclxuICAgIExpbmVUb29Mb25nLFxyXG4gICAgVHJhbnNmZXJFbmNvZGluZ0Vycm9yLFxyXG4pXHJcbmZyb20gLmh0dHBfd3JpdGVyIGltcG9ydCBIdHRwVmVyc2lvbiwgSHR0cFZlcnNpb24xMFxyXG5mcm9tIC5sb2cgaW1wb3J0IGludGVybmFsX2xvZ2dlclxyXG5mcm9tIC5zdHJlYW1zIGltcG9ydCBFTVBUWV9QQVlMT0FELCBTdHJlYW1SZWFkZXJcclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IEZpbmFsLCBSYXdIZWFkZXJzXHJcblxyXG50cnk6XHJcbiAgICBpbXBvcnQgYnJvdGxpXHJcblxyXG4gICAgSEFTX0JST1RMSSA9IFRydWVcclxuZXhjZXB0IEltcG9ydEVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBIQVNfQlJPVExJID0gRmFsc2VcclxuXHJcblxyXG5fX2FsbF9fID0gKFxyXG4gICAgIkhlYWRlcnNQYXJzZXIiLFxyXG4gICAgIkh0dHBQYXJzZXIiLFxyXG4gICAgIkh0dHBSZXF1ZXN0UGFyc2VyIixcclxuICAgICJIdHRwUmVzcG9uc2VQYXJzZXIiLFxyXG4gICAgIlJhd1JlcXVlc3RNZXNzYWdlIixcclxuICAgICJSYXdSZXNwb25zZU1lc3NhZ2UiLFxyXG4pXHJcblxyXG5BU0NJSVNFVDogRmluYWxbU2V0W3N0cl1dID0gc2V0KHN0cmluZy5wcmludGFibGUpXHJcblxyXG4jIFNlZSBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzIzMCNzZWN0aW9uLTMuMS4xXHJcbiMgYW5kIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3MjMwI2FwcGVuZGl4LUJcclxuI1xyXG4jICAgICBtZXRob2QgPSB0b2tlblxyXG4jICAgICB0Y2hhciA9ICIhIiAvICIjIiAvICIkIiAvICIlIiAvICImIiAvICJcJyIgLyAiKiIgLyAiKyIgLyAiLSIgLyAiLiIgL1xyXG4jICAgICAgICAgICAgICJeIiAvICJfIiAvICJgIiAvICJ8IiAvICJ+IiAvIERJR0lUIC8gQUxQSEFcclxuIyAgICAgdG9rZW4gPSAxKnRjaGFyXHJcbk1FVEhSRTogRmluYWxbUGF0dGVybltzdHJdXSA9IHJlLmNvbXBpbGUociJbISMkJSZcJyorXFwtLl5fYHx+MC05QS1aYS16XSsiKVxyXG5WRVJTUkU6IEZpbmFsW1BhdHRlcm5bc3RyXV0gPSByZS5jb21waWxlKHIiSFRUUC8oXFxkKykuKFxcZCspIilcclxuSERSUkU6IEZpbmFsW1BhdHRlcm5bYnl0ZXNdXSA9IHJlLmNvbXBpbGUocmIiW1xceDAwLVxceDFGXFx4N0YoKTw+QCw7OlxcW1xcXT17fSBcXHRcXFxcXFxcXFxcIl0iKVxyXG5cclxuXHJcbmNsYXNzIFJhd1JlcXVlc3RNZXNzYWdlKE5hbWVkVHVwbGUpOlxyXG4gICAgbWV0aG9kOiBzdHJcclxuICAgIHBhdGg6IHN0clxyXG4gICAgdmVyc2lvbjogSHR0cFZlcnNpb25cclxuICAgIGhlYWRlcnM6ICJDSU11bHRpRGljdFByb3h5W3N0cl0iXHJcbiAgICByYXdfaGVhZGVyczogUmF3SGVhZGVyc1xyXG4gICAgc2hvdWxkX2Nsb3NlOiBib29sXHJcbiAgICBjb21wcmVzc2lvbjogT3B0aW9uYWxbc3RyXVxyXG4gICAgdXBncmFkZTogYm9vbFxyXG4gICAgY2h1bmtlZDogYm9vbFxyXG4gICAgdXJsOiBVUkxcclxuXHJcblxyXG5SYXdSZXNwb25zZU1lc3NhZ2UgPSBjb2xsZWN0aW9ucy5uYW1lZHR1cGxlKFxyXG4gICAgIlJhd1Jlc3BvbnNlTWVzc2FnZSIsXHJcbiAgICBbXHJcbiAgICAgICAgInZlcnNpb24iLFxyXG4gICAgICAgICJjb2RlIixcclxuICAgICAgICAicmVhc29uIixcclxuICAgICAgICAiaGVhZGVycyIsXHJcbiAgICAgICAgInJhd19oZWFkZXJzIixcclxuICAgICAgICAic2hvdWxkX2Nsb3NlIixcclxuICAgICAgICAiY29tcHJlc3Npb24iLFxyXG4gICAgICAgICJ1cGdyYWRlIixcclxuICAgICAgICAiY2h1bmtlZCIsXHJcbiAgICBdLFxyXG4pXHJcblxyXG5cclxuX01zZ1QgPSBUeXBlVmFyKCJfTXNnVCIsIFJhd1JlcXVlc3RNZXNzYWdlLCBSYXdSZXNwb25zZU1lc3NhZ2UpXHJcblxyXG5cclxuY2xhc3MgUGFyc2VTdGF0ZShJbnRFbnVtKTpcclxuXHJcbiAgICBQQVJTRV9OT05FID0gMFxyXG4gICAgUEFSU0VfTEVOR1RIID0gMVxyXG4gICAgUEFSU0VfQ0hVTktFRCA9IDJcclxuICAgIFBBUlNFX1VOVElMX0VPRiA9IDNcclxuXHJcblxyXG5jbGFzcyBDaHVua1N0YXRlKEludEVudW0pOlxyXG4gICAgUEFSU0VfQ0hVTktFRF9TSVpFID0gMFxyXG4gICAgUEFSU0VfQ0hVTktFRF9DSFVOSyA9IDFcclxuICAgIFBBUlNFX0NIVU5LRURfQ0hVTktfRU9GID0gMlxyXG4gICAgUEFSU0VfTUFZQkVfVFJBSUxFUlMgPSAzXHJcbiAgICBQQVJTRV9UUkFJTEVSUyA9IDRcclxuXHJcblxyXG5jbGFzcyBIZWFkZXJzUGFyc2VyOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbWF4X2xpbmVfc2l6ZTogaW50ID0gODE5MCxcclxuICAgICAgICBtYXhfaGVhZGVyczogaW50ID0gMzI3NjgsXHJcbiAgICAgICAgbWF4X2ZpZWxkX3NpemU6IGludCA9IDgxOTAsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5tYXhfbGluZV9zaXplID0gbWF4X2xpbmVfc2l6ZVxyXG4gICAgICAgIHNlbGYubWF4X2hlYWRlcnMgPSBtYXhfaGVhZGVyc1xyXG4gICAgICAgIHNlbGYubWF4X2ZpZWxkX3NpemUgPSBtYXhfZmllbGRfc2l6ZVxyXG5cclxuICAgIGRlZiBwYXJzZV9oZWFkZXJzKFxyXG4gICAgICAgIHNlbGYsIGxpbmVzOiBMaXN0W2J5dGVzXVxyXG4gICAgKSAtPiBUdXBsZVsiQ0lNdWx0aURpY3RQcm94eVtzdHJdIiwgUmF3SGVhZGVyc106XHJcbiAgICAgICAgaGVhZGVycyA9IENJTXVsdGlEaWN0KCkgICMgdHlwZTogQ0lNdWx0aURpY3Rbc3RyXVxyXG4gICAgICAgIHJhd19oZWFkZXJzID0gW11cclxuXHJcbiAgICAgICAgbGluZXNfaWR4ID0gMVxyXG4gICAgICAgIGxpbmUgPSBsaW5lc1sxXVxyXG4gICAgICAgIGxpbmVfY291bnQgPSBsZW4obGluZXMpXHJcblxyXG4gICAgICAgIHdoaWxlIGxpbmU6XHJcbiAgICAgICAgICAgICMgUGFyc2UgaW5pdGlhbCBoZWFkZXIgbmFtZSA6IHZhbHVlIHBhaXIuXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGJuYW1lLCBidmFsdWUgPSBsaW5lLnNwbGl0KGIiOiIsIDEpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgSW52YWxpZEhlYWRlcihsaW5lKSBmcm9tIE5vbmVcclxuXHJcbiAgICAgICAgICAgIGJuYW1lID0gYm5hbWUuc3RyaXAoYiIgXFx0IilcclxuICAgICAgICAgICAgYnZhbHVlID0gYnZhbHVlLmxzdHJpcCgpXHJcbiAgICAgICAgICAgIGlmIEhEUlJFLnNlYXJjaChibmFtZSk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBJbnZhbGlkSGVhZGVyKGJuYW1lKVxyXG4gICAgICAgICAgICBpZiBsZW4oYm5hbWUpID4gc2VsZi5tYXhfZmllbGRfc2l6ZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIExpbmVUb29Mb25nKFxyXG4gICAgICAgICAgICAgICAgICAgICJyZXF1ZXN0IGhlYWRlciBuYW1lIHt9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJuYW1lLmRlY29kZSgidXRmOCIsICJ4bWxjaGFycmVmcmVwbGFjZSIpXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICBzdHIoc2VsZi5tYXhfZmllbGRfc2l6ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyKGxlbihibmFtZSkpLFxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgaGVhZGVyX2xlbmd0aCA9IGxlbihidmFsdWUpXHJcblxyXG4gICAgICAgICAgICAjIG5leHQgbGluZVxyXG4gICAgICAgICAgICBsaW5lc19pZHggKz0gMVxyXG4gICAgICAgICAgICBsaW5lID0gbGluZXNbbGluZXNfaWR4XVxyXG5cclxuICAgICAgICAgICAgIyBjb25zdW1lIGNvbnRpbnVhdGlvbiBsaW5lc1xyXG4gICAgICAgICAgICBjb250aW51YXRpb24gPSBsaW5lIGFuZCBsaW5lWzBdIGluICgzMiwgOSkgICMgKFwnIFwnLCBcJ1xcdFwnKVxyXG5cclxuICAgICAgICAgICAgaWYgY29udGludWF0aW9uOlxyXG4gICAgICAgICAgICAgICAgYnZhbHVlX2xzdCA9IFtidmFsdWVdXHJcbiAgICAgICAgICAgICAgICB3aGlsZSBjb250aW51YXRpb246XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyX2xlbmd0aCArPSBsZW4obGluZSlcclxuICAgICAgICAgICAgICAgICAgICBpZiBoZWFkZXJfbGVuZ3RoID4gc2VsZi5tYXhfZmllbGRfc2l6ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgTGluZVRvb0xvbmcoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAicmVxdWVzdCBoZWFkZXIgZmllbGQge30iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibmFtZS5kZWNvZGUoInV0ZjgiLCAieG1sY2hhcnJlZnJlcGxhY2UiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cihzZWxmLm1heF9maWVsZF9zaXplKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cihoZWFkZXJfbGVuZ3RoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIGJ2YWx1ZV9sc3QuYXBwZW5kKGxpbmUpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICMgbmV4dCBsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZXNfaWR4ICs9IDFcclxuICAgICAgICAgICAgICAgICAgICBpZiBsaW5lc19pZHggPCBsaW5lX2NvdW50OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lID0gbGluZXNbbGluZXNfaWR4XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBsaW5lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uID0gbGluZVswXSBpbiAoMzIsIDkpICAjIChcJyBcJywgXCdcXHRcJylcclxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lID0gYiIiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBidmFsdWUgPSBiIiIuam9pbihidmFsdWVfbHN0KVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgaWYgaGVhZGVyX2xlbmd0aCA+IHNlbGYubWF4X2ZpZWxkX3NpemU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgTGluZVRvb0xvbmcoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJyZXF1ZXN0IGhlYWRlciBmaWVsZCB7fSIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm5hbWUuZGVjb2RlKCJ1dGY4IiwgInhtbGNoYXJyZWZyZXBsYWNlIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyKHNlbGYubWF4X2ZpZWxkX3NpemUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIoaGVhZGVyX2xlbmd0aCksXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgYnZhbHVlID0gYnZhbHVlLnN0cmlwKClcclxuICAgICAgICAgICAgbmFtZSA9IGJuYW1lLmRlY29kZSgidXRmLTgiLCAic3Vycm9nYXRlZXNjYXBlIilcclxuICAgICAgICAgICAgdmFsdWUgPSBidmFsdWUuZGVjb2RlKCJ1dGYtOCIsICJzdXJyb2dhdGVlc2NhcGUiKVxyXG5cclxuICAgICAgICAgICAgaGVhZGVycy5hZGQobmFtZSwgdmFsdWUpXHJcbiAgICAgICAgICAgIHJhd19oZWFkZXJzLmFwcGVuZCgoYm5hbWUsIGJ2YWx1ZSkpXHJcblxyXG4gICAgICAgIHJldHVybiAoQ0lNdWx0aURpY3RQcm94eShoZWFkZXJzKSwgdHVwbGUocmF3X2hlYWRlcnMpKVxyXG5cclxuXHJcbmNsYXNzIEh0dHBQYXJzZXIoYWJjLkFCQywgR2VuZXJpY1tfTXNnVF0pOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcHJvdG9jb2w6IE9wdGlvbmFsW0Jhc2VQcm90b2NvbF0gPSBOb25lLFxyXG4gICAgICAgIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSxcclxuICAgICAgICBsaW1pdDogaW50ID0gMiAqKiAxNixcclxuICAgICAgICBtYXhfbGluZV9zaXplOiBpbnQgPSA4MTkwLFxyXG4gICAgICAgIG1heF9oZWFkZXJzOiBpbnQgPSAzMjc2OCxcclxuICAgICAgICBtYXhfZmllbGRfc2l6ZTogaW50ID0gODE5MCxcclxuICAgICAgICB0aW1lcjogT3B0aW9uYWxbQmFzZVRpbWVyQ29udGV4dF0gPSBOb25lLFxyXG4gICAgICAgIGNvZGU6IE9wdGlvbmFsW2ludF0gPSBOb25lLFxyXG4gICAgICAgIG1ldGhvZDogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgcmVhZGFsbDogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIHBheWxvYWRfZXhjZXB0aW9uOiBPcHRpb25hbFtUeXBlW0Jhc2VFeGNlcHRpb25dXSA9IE5vbmUsXHJcbiAgICAgICAgcmVzcG9uc2Vfd2l0aF9ib2R5OiBib29sID0gVHJ1ZSxcclxuICAgICAgICByZWFkX3VudGlsX2VvZjogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIGF1dG9fZGVjb21wcmVzczogYm9vbCA9IFRydWUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5wcm90b2NvbCA9IHByb3RvY29sXHJcbiAgICAgICAgc2VsZi5sb29wID0gbG9vcFxyXG4gICAgICAgIHNlbGYubWF4X2xpbmVfc2l6ZSA9IG1heF9saW5lX3NpemVcclxuICAgICAgICBzZWxmLm1heF9oZWFkZXJzID0gbWF4X2hlYWRlcnNcclxuICAgICAgICBzZWxmLm1heF9maWVsZF9zaXplID0gbWF4X2ZpZWxkX3NpemVcclxuICAgICAgICBzZWxmLnRpbWVyID0gdGltZXJcclxuICAgICAgICBzZWxmLmNvZGUgPSBjb2RlXHJcbiAgICAgICAgc2VsZi5tZXRob2QgPSBtZXRob2RcclxuICAgICAgICBzZWxmLnJlYWRhbGwgPSByZWFkYWxsXHJcbiAgICAgICAgc2VsZi5wYXlsb2FkX2V4Y2VwdGlvbiA9IHBheWxvYWRfZXhjZXB0aW9uXHJcbiAgICAgICAgc2VsZi5yZXNwb25zZV93aXRoX2JvZHkgPSByZXNwb25zZV93aXRoX2JvZHlcclxuICAgICAgICBzZWxmLnJlYWRfdW50aWxfZW9mID0gcmVhZF91bnRpbF9lb2ZcclxuXHJcbiAgICAgICAgc2VsZi5fbGluZXMgPSBbXSAgIyB0eXBlOiBMaXN0W2J5dGVzXVxyXG4gICAgICAgIHNlbGYuX3RhaWwgPSBiIiJcclxuICAgICAgICBzZWxmLl91cGdyYWRlZCA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZCA9IE5vbmVcclxuICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbSHR0cFBheWxvYWRQYXJzZXJdXHJcbiAgICAgICAgc2VsZi5fYXV0b19kZWNvbXByZXNzID0gYXV0b19kZWNvbXByZXNzXHJcbiAgICAgICAgc2VsZi5fbGltaXQgPSBsaW1pdFxyXG4gICAgICAgIHNlbGYuX2hlYWRlcnNfcGFyc2VyID0gSGVhZGVyc1BhcnNlcihtYXhfbGluZV9zaXplLCBtYXhfaGVhZGVycywgbWF4X2ZpZWxkX3NpemUpXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHBhcnNlX21lc3NhZ2Uoc2VsZiwgbGluZXM6IExpc3RbYnl0ZXNdKSAtPiBfTXNnVDpcclxuICAgICAgICBwYXNzXHJcblxyXG4gICAgZGVmIGZlZWRfZW9mKHNlbGYpIC0+IE9wdGlvbmFsW19Nc2dUXTpcclxuICAgICAgICBpZiBzZWxmLl9wYXlsb2FkX3BhcnNlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fcGF5bG9hZF9wYXJzZXIuZmVlZF9lb2YoKVxyXG4gICAgICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlciA9IE5vbmVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAjIHRyeSB0byBleHRyYWN0IHBhcnRpYWwgbWVzc2FnZVxyXG4gICAgICAgICAgICBpZiBzZWxmLl90YWlsOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGluZXMuYXBwZW5kKHNlbGYuX3RhaWwpXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLl9saW5lczpcclxuICAgICAgICAgICAgICAgIGlmIHNlbGYuX2xpbmVzWy0xXSAhPSAiXFxyXFxuIjpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9saW5lcy5hcHBlbmQoYiIiKVxyXG4gICAgICAgICAgICAgICAgd2l0aCBzdXBwcmVzcyhFeGNlcHRpb24pOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlX21lc3NhZ2Uoc2VsZi5fbGluZXMpXHJcbiAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICBkZWYgZmVlZF9kYXRhKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgU0VQOiBieXRlcyA9IGIiXFxyXFxuIixcclxuICAgICAgICBFTVBUWTogYnl0ZXMgPSBiIiIsXHJcbiAgICAgICAgQ09OVEVOVF9MRU5HVEg6IGlzdHIgPSBoZHJzLkNPTlRFTlRfTEVOR1RILFxyXG4gICAgICAgIE1FVEhfQ09OTkVDVDogc3RyID0gaGRycy5NRVRIX0NPTk5FQ1QsXHJcbiAgICAgICAgU0VDX1dFQlNPQ0tFVF9LRVkxOiBpc3RyID0gaGRycy5TRUNfV0VCU09DS0VUX0tFWTEsXHJcbiAgICApIC0+IFR1cGxlW0xpc3RbVHVwbGVbX01zZ1QsIFN0cmVhbVJlYWRlcl1dLCBib29sLCBieXRlc106XHJcblxyXG4gICAgICAgIG1lc3NhZ2VzID0gW11cclxuXHJcbiAgICAgICAgaWYgc2VsZi5fdGFpbDpcclxuICAgICAgICAgICAgZGF0YSwgc2VsZi5fdGFpbCA9IHNlbGYuX3RhaWwgKyBkYXRhLCBiIiJcclxuXHJcbiAgICAgICAgZGF0YV9sZW4gPSBsZW4oZGF0YSlcclxuICAgICAgICBzdGFydF9wb3MgPSAwXHJcbiAgICAgICAgbG9vcCA9IHNlbGYubG9vcFxyXG5cclxuICAgICAgICB3aGlsZSBzdGFydF9wb3MgPCBkYXRhX2xlbjpcclxuXHJcbiAgICAgICAgICAgICMgcmVhZCBIVFRQIG1lc3NhZ2UgKHJlcXVlc3QvcmVzcG9uc2UgbGluZSArIGhlYWRlcnMpLCBcXHJcXG5cXHJcXG5cclxuICAgICAgICAgICAgIyBhbmQgc3BsaXQgYnkgbGluZXNcclxuICAgICAgICAgICAgaWYgc2VsZi5fcGF5bG9hZF9wYXJzZXIgaXMgTm9uZSBhbmQgbm90IHNlbGYuX3VwZ3JhZGVkOlxyXG4gICAgICAgICAgICAgICAgcG9zID0gZGF0YS5maW5kKFNFUCwgc3RhcnRfcG9zKVxyXG4gICAgICAgICAgICAgICAgIyBjb25zdW1lIFxcclxcblxyXG4gICAgICAgICAgICAgICAgaWYgcG9zID09IHN0YXJ0X3BvcyBhbmQgbm90IHNlbGYuX2xpbmVzOlxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0X3BvcyA9IHBvcyArIDJcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIHBvcyA+PSBzdGFydF9wb3M6XHJcbiAgICAgICAgICAgICAgICAgICAgIyBsaW5lIGZvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbGluZXMuYXBwZW5kKGRhdGFbc3RhcnRfcG9zOnBvc10pXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRfcG9zID0gcG9zICsgMlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAjIFxcclxcblxcclxcbiBmb3VuZFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX2xpbmVzWy0xXSA9PSBFTVBUWTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBfTXNnVCA9IHNlbGYucGFyc2VfbWVzc2FnZShzZWxmLl9saW5lcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2xpbmVzLmNsZWFyKClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZiBnZXRfY29udGVudF9sZW5ndGgoKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBwYXlsb2FkIGxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoX2hkciA9IG1zZy5oZWFkZXJzLmdldChDT05URU5UX0xFTkdUSClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbmd0aF9oZHIgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBpbnQobGVuZ3RoX2hkcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRIZWFkZXIoQ09OVEVOVF9MRU5HVEgpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuZ3RoIDwgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBJbnZhbGlkSGVhZGVyKENPTlRFTlRfTEVOR1RIKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsZW5ndGhcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGdldF9jb250ZW50X2xlbmd0aCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICMgZG8gbm90IHN1cHBvcnQgb2xkIHdlYnNvY2tldCBzcGVjXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIFNFQ19XRUJTT0NLRVRfS0VZMSBpbiBtc2cuaGVhZGVyczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRIZWFkZXIoU0VDX1dFQlNPQ0tFVF9LRVkxKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fdXBncmFkZWQgPSBtc2cudXBncmFkZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gZ2V0YXR0cihtc2csICJtZXRob2QiLCBzZWxmLm1ldGhvZClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBzZWxmLnByb3RvY29sIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICMgY2FsY3VsYXRlIHBheWxvYWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGxlbmd0aCBpcyBub3QgTm9uZSBhbmQgbGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIG1zZy5jaHVua2VkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgbm90IG1zZy51cGdyYWRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gU3RyZWFtUmVhZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJvdG9jb2wsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXI9c2VsZi50aW1lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wPWxvb3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ9c2VsZi5fbGltaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkX3BhcnNlciA9IEh0dHBQYXlsb2FkUGFyc2VyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoPWxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua2VkPW1zZy5jaHVua2VkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZD1tZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHJlc3Npb249bXNnLmNvbXByZXNzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU9c2VsZi5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRhbGw9c2VsZi5yZWFkYWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlX3dpdGhfYm9keT1zZWxmLnJlc3BvbnNlX3dpdGhfYm9keSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvX2RlY29tcHJlc3M9c2VsZi5fYXV0b19kZWNvbXByZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHBheWxvYWRfcGFyc2VyLmRvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGF5bG9hZF9wYXJzZXIgPSBwYXlsb2FkX3BhcnNlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGlmIG1ldGhvZCA9PSBNRVRIX0NPTk5FQ1Q6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShtc2csIFJhd1JlcXVlc3RNZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IFN0cmVhbVJlYWRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnByb3RvY29sLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyPXNlbGYudGltZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9vcD1sb29wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0PXNlbGYuX2xpbWl0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fdXBncmFkZWQgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlciA9IEh0dHBQYXlsb2FkUGFyc2VyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kPW1zZy5tZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHJlc3Npb249bXNnLmNvbXByZXNzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRhbGw9VHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvX2RlY29tcHJlc3M9c2VsZi5fYXV0b19kZWNvbXByZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldGF0dHIobXNnLCAiY29kZSIsIDEwMCkgPj0gMTk5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5kIGxlbmd0aCBpcyBOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5kIHNlbGYucmVhZF91bnRpbF9lb2ZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IFN0cmVhbVJlYWRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm90b2NvbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXI9c2VsZi50aW1lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9vcD1sb29wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdD1zZWxmLl9saW1pdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZF9wYXJzZXIgPSBIdHRwUGF5bG9hZFBhcnNlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoPWxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtlZD1tc2cuY2h1bmtlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kPW1ldGhvZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHJlc3Npb249bXNnLmNvbXByZXNzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlPXNlbGYuY29kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGFsbD1UcnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZV93aXRoX2JvZHk9c2VsZi5yZXNwb25zZV93aXRoX2JvZHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9fZGVjb21wcmVzcz1zZWxmLl9hdXRvX2RlY29tcHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBwYXlsb2FkX3BhcnNlci5kb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlciA9IHBheWxvYWRfcGFyc2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQgPSBFTVBUWV9QQVlMT0FEXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlcy5hcHBlbmQoKG1zZywgcGF5bG9hZCkpXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3RhaWwgPSBkYXRhW3N0YXJ0X3BvczpdXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IEVNUFRZXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgICMgbm8gcGFyc2VyLCBqdXN0IHN0b3JlXHJcbiAgICAgICAgICAgIGVsaWYgc2VsZi5fcGF5bG9hZF9wYXJzZXIgaXMgTm9uZSBhbmQgc2VsZi5fdXBncmFkZWQ6XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQgbm90IHNlbGYuX2xpbmVzXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgIyBmZWVkIHBheWxvYWRcclxuICAgICAgICAgICAgZWxpZiBkYXRhIGFuZCBzdGFydF9wb3MgPCBkYXRhX2xlbjpcclxuICAgICAgICAgICAgICAgIGFzc2VydCBub3Qgc2VsZi5fbGluZXNcclxuICAgICAgICAgICAgICAgIGFzc2VydCBzZWxmLl9wYXlsb2FkX3BhcnNlciBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIGVvZiwgZGF0YSA9IHNlbGYuX3BheWxvYWRfcGFyc2VyLmZlZWRfZGF0YShkYXRhW3N0YXJ0X3BvczpdKVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IEJhc2VFeGNlcHRpb24gYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHNlbGYucGF5bG9hZF9leGNlcHRpb24gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyLnBheWxvYWQuc2V0X2V4Y2VwdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGF5bG9hZF9leGNlcHRpb24oc3RyKGV4YykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlci5wYXlsb2FkLnNldF9leGNlcHRpb24oZXhjKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBlb2YgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGIiIlxyXG5cclxuICAgICAgICAgICAgICAgIGlmIGVvZjpcclxuICAgICAgICAgICAgICAgICAgICBzdGFydF9wb3MgPSAwXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9sZW4gPSBsZW4oZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlciA9IE5vbmVcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgaWYgZGF0YSBhbmQgc3RhcnRfcG9zIDwgZGF0YV9sZW46XHJcbiAgICAgICAgICAgIGRhdGEgPSBkYXRhW3N0YXJ0X3BvczpdXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgZGF0YSA9IEVNUFRZXHJcblxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlcywgc2VsZi5fdXBncmFkZWQsIGRhdGFcclxuXHJcbiAgICBkZWYgcGFyc2VfaGVhZGVycyhcclxuICAgICAgICBzZWxmLCBsaW5lczogTGlzdFtieXRlc11cclxuICAgICkgLT4gVHVwbGVbXHJcbiAgICAgICAgIkNJTXVsdGlEaWN0UHJveHlbc3RyXSIsIFJhd0hlYWRlcnMsIE9wdGlvbmFsW2Jvb2xdLCBPcHRpb25hbFtzdHJdLCBib29sLCBib29sXHJcbiAgICBdOlxyXG4gICAgICAgICIiIlBhcnNlcyBSRkMgNTMyMiBoZWFkZXJzIGZyb20gYSBzdHJlYW0uXHJcblxyXG4gICAgICAgIExpbmUgY29udGludWF0aW9ucyBhcmUgc3VwcG9ydGVkLiBSZXR1cm5zIGxpc3Qgb2YgaGVhZGVyIG5hbWVcclxuICAgICAgICBhbmQgdmFsdWUgcGFpcnMuIEhlYWRlciBuYW1lIGlzIGluIHVwcGVyIGNhc2UuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaGVhZGVycywgcmF3X2hlYWRlcnMgPSBzZWxmLl9oZWFkZXJzX3BhcnNlci5wYXJzZV9oZWFkZXJzKGxpbmVzKVxyXG4gICAgICAgIGNsb3NlX2Nvbm4gPSBOb25lXHJcbiAgICAgICAgZW5jb2RpbmcgPSBOb25lXHJcbiAgICAgICAgdXBncmFkZSA9IEZhbHNlXHJcbiAgICAgICAgY2h1bmtlZCA9IEZhbHNlXHJcblxyXG4gICAgICAgICMga2VlcC1hbGl2ZVxyXG4gICAgICAgIGNvbm4gPSBoZWFkZXJzLmdldChoZHJzLkNPTk5FQ1RJT04pXHJcbiAgICAgICAgaWYgY29ubjpcclxuICAgICAgICAgICAgdiA9IGNvbm4ubG93ZXIoKVxyXG4gICAgICAgICAgICBpZiB2ID09ICJjbG9zZSI6XHJcbiAgICAgICAgICAgICAgICBjbG9zZV9jb25uID0gVHJ1ZVxyXG4gICAgICAgICAgICBlbGlmIHYgPT0gImtlZXAtYWxpdmUiOlxyXG4gICAgICAgICAgICAgICAgY2xvc2VfY29ubiA9IEZhbHNlXHJcbiAgICAgICAgICAgIGVsaWYgdiA9PSAidXBncmFkZSI6XHJcbiAgICAgICAgICAgICAgICB1cGdyYWRlID0gVHJ1ZVxyXG5cclxuICAgICAgICAjIGVuY29kaW5nXHJcbiAgICAgICAgZW5jID0gaGVhZGVycy5nZXQoaGRycy5DT05URU5UX0VOQ09ESU5HKVxyXG4gICAgICAgIGlmIGVuYzpcclxuICAgICAgICAgICAgZW5jID0gZW5jLmxvd2VyKClcclxuICAgICAgICAgICAgaWYgZW5jIGluICgiZ3ppcCIsICJkZWZsYXRlIiwgImJyIik6XHJcbiAgICAgICAgICAgICAgICBlbmNvZGluZyA9IGVuY1xyXG5cclxuICAgICAgICAjIGNodW5raW5nXHJcbiAgICAgICAgdGUgPSBoZWFkZXJzLmdldChoZHJzLlRSQU5TRkVSX0VOQ09ESU5HKVxyXG4gICAgICAgIGlmIHRlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBpZiAiY2h1bmtlZCIgPT0gdGUubG93ZXIoKTpcclxuICAgICAgICAgICAgICAgIGNodW5rZWQgPSBUcnVlXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBCYWRIdHRwTWVzc2FnZSgiUmVxdWVzdCBoYXMgaW52YWxpZCBgVHJhbnNmZXItRW5jb2RpbmdgIilcclxuXHJcbiAgICAgICAgICAgIGlmIGhkcnMuQ09OVEVOVF9MRU5HVEggaW4gaGVhZGVyczpcclxuICAgICAgICAgICAgICAgIHJhaXNlIEJhZEh0dHBNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgICAgICJDb250ZW50LUxlbmd0aCBjYW5cJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nIixcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIChoZWFkZXJzLCByYXdfaGVhZGVycywgY2xvc2VfY29ubiwgZW5jb2RpbmcsIHVwZ3JhZGUsIGNodW5rZWQpXHJcblxyXG4gICAgZGVmIHNldF91cGdyYWRlZChzZWxmLCB2YWw6IGJvb2wpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiU2V0IGNvbm5lY3Rpb24gdXBncmFkZWQgKHRvIHdlYnNvY2tldCkgbW9kZS5cclxuXHJcbiAgICAgICAgOnBhcmFtIGJvb2wgdmFsOiBuZXcgc3RhdGUuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgc2VsZi5fdXBncmFkZWQgPSB2YWxcclxuXHJcblxyXG5jbGFzcyBIdHRwUmVxdWVzdFBhcnNlcihIdHRwUGFyc2VyW1Jhd1JlcXVlc3RNZXNzYWdlXSk6XHJcbiAgICAiIiJSZWFkIHJlcXVlc3Qgc3RhdHVzIGxpbmUuXHJcblxyXG4gICAgRXhjZXB0aW9uIC5odHRwX2V4Y2VwdGlvbnMuQmFkU3RhdHVzTGluZVxyXG4gICAgY291bGQgYmUgcmFpc2VkIGluIGNhc2Ugb2YgYW55IGVycm9ycyBpbiBzdGF0dXMgbGluZS5cclxuICAgIFJldHVybnMgUmF3UmVxdWVzdE1lc3NhZ2UuXHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgcGFyc2VfbWVzc2FnZShzZWxmLCBsaW5lczogTGlzdFtieXRlc10pIC0+IFJhd1JlcXVlc3RNZXNzYWdlOlxyXG4gICAgICAgICMgcmVxdWVzdCBsaW5lXHJcbiAgICAgICAgbGluZSA9IGxpbmVzWzBdLmRlY29kZSgidXRmLTgiLCAic3Vycm9nYXRlZXNjYXBlIilcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIG1ldGhvZCwgcGF0aCwgdmVyc2lvbiA9IGxpbmUuc3BsaXQoTm9uZSwgMilcclxuICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcclxuICAgICAgICAgICAgcmFpc2UgQmFkU3RhdHVzTGluZShsaW5lKSBmcm9tIE5vbmVcclxuXHJcbiAgICAgICAgaWYgbGVuKHBhdGgpID4gc2VsZi5tYXhfbGluZV9zaXplOlxyXG4gICAgICAgICAgICByYWlzZSBMaW5lVG9vTG9uZyhcclxuICAgICAgICAgICAgICAgICJTdGF0dXMgbGluZSBpcyB0b28gbG9uZyIsIHN0cihzZWxmLm1heF9saW5lX3NpemUpLCBzdHIobGVuKHBhdGgpKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHBhdGhfcGFydCwgX2hhc2hfc2VwYXJhdG9yLCB1cmxfZnJhZ21lbnQgPSBwYXRoLnBhcnRpdGlvbigiIyIpXHJcbiAgICAgICAgcGF0aF9wYXJ0LCBfcXVlc3Rpb25fbWFya19zZXBhcmF0b3IsIHFzX3BhcnQgPSBwYXRoX3BhcnQucGFydGl0aW9uKCI/IilcclxuXHJcbiAgICAgICAgIyBtZXRob2RcclxuICAgICAgICBpZiBub3QgTUVUSFJFLm1hdGNoKG1ldGhvZCk6XHJcbiAgICAgICAgICAgIHJhaXNlIEJhZFN0YXR1c0xpbmUobWV0aG9kKVxyXG5cclxuICAgICAgICAjIHZlcnNpb25cclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGlmIHZlcnNpb24uc3RhcnRzd2l0aCgiSFRUUC8iKTpcclxuICAgICAgICAgICAgICAgIG4xLCBuMiA9IHZlcnNpb25bNTpdLnNwbGl0KCIuIiwgMSlcclxuICAgICAgICAgICAgICAgIHZlcnNpb25fbyA9IEh0dHBWZXJzaW9uKGludChuMSksIGludChuMikpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBCYWRTdGF0dXNMaW5lKHZlcnNpb24pXHJcbiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgcmFpc2UgQmFkU3RhdHVzTGluZSh2ZXJzaW9uKVxyXG5cclxuICAgICAgICAjIHJlYWQgaGVhZGVyc1xyXG4gICAgICAgIChcclxuICAgICAgICAgICAgaGVhZGVycyxcclxuICAgICAgICAgICAgcmF3X2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGNsb3NlLFxyXG4gICAgICAgICAgICBjb21wcmVzc2lvbixcclxuICAgICAgICAgICAgdXBncmFkZSxcclxuICAgICAgICAgICAgY2h1bmtlZCxcclxuICAgICAgICApID0gc2VsZi5wYXJzZV9oZWFkZXJzKGxpbmVzKVxyXG5cclxuICAgICAgICBpZiBjbG9zZSBpcyBOb25lOiAgIyB0aGVuIHRoZSBoZWFkZXJzIHdlcmVuXCd0IHNldCBpbiB0aGUgcmVxdWVzdFxyXG4gICAgICAgICAgICBpZiB2ZXJzaW9uX28gPD0gSHR0cFZlcnNpb24xMDogICMgSFRUUCAxLjAgbXVzdCBhc2tzIHRvIG5vdCBjbG9zZVxyXG4gICAgICAgICAgICAgICAgY2xvc2UgPSBUcnVlXHJcbiAgICAgICAgICAgIGVsc2U6ICAjIEhUVFAgMS4xIG11c3QgYXNrIHRvIGNsb3NlLlxyXG4gICAgICAgICAgICAgICAgY2xvc2UgPSBGYWxzZVxyXG5cclxuICAgICAgICByZXR1cm4gUmF3UmVxdWVzdE1lc3NhZ2UoXHJcbiAgICAgICAgICAgIG1ldGhvZCxcclxuICAgICAgICAgICAgcGF0aCxcclxuICAgICAgICAgICAgdmVyc2lvbl9vLFxyXG4gICAgICAgICAgICBoZWFkZXJzLFxyXG4gICAgICAgICAgICByYXdfaGVhZGVycyxcclxuICAgICAgICAgICAgY2xvc2UsXHJcbiAgICAgICAgICAgIGNvbXByZXNzaW9uLFxyXG4gICAgICAgICAgICB1cGdyYWRlLFxyXG4gICAgICAgICAgICBjaHVua2VkLFxyXG4gICAgICAgICAgICAjIE5PVEU6IGB5YXJsLlVSTC5idWlsZCgpYCBpcyB1c2VkIHRvIG1pbWljIHdoYXQgdGhlIEN5dGhvbi1iYXNlZFxyXG4gICAgICAgICAgICAjIE5PVEU6IHBhcnNlciBkb2VzLCBvdGhlcndpc2UgaXQgcmVzdWx0cyBpbnRvIHRoZSBzYW1lXHJcbiAgICAgICAgICAgICMgTk9URTogSFRUUCBSZXF1ZXN0LUxpbmUgaW5wdXQgcHJvZHVjaW5nIGRpZmZlcmVudFxyXG4gICAgICAgICAgICAjIE5PVEU6IGB5YXJsLlVSTCgpYCBvYmplY3RzXHJcbiAgICAgICAgICAgIFVSTC5idWlsZChcclxuICAgICAgICAgICAgICAgIHBhdGg9cGF0aF9wYXJ0LFxyXG4gICAgICAgICAgICAgICAgcXVlcnlfc3RyaW5nPXFzX3BhcnQsXHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudD11cmxfZnJhZ21lbnQsXHJcbiAgICAgICAgICAgICAgICBlbmNvZGVkPVRydWUsXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIEh0dHBSZXNwb25zZVBhcnNlcihIdHRwUGFyc2VyW1Jhd1Jlc3BvbnNlTWVzc2FnZV0pOlxyXG4gICAgIiIiUmVhZCByZXNwb25zZSBzdGF0dXMgbGluZSBhbmQgaGVhZGVycy5cclxuXHJcbiAgICBCYWRTdGF0dXNMaW5lIGNvdWxkIGJlIHJhaXNlZCBpbiBjYXNlIG9mIGFueSBlcnJvcnMgaW4gc3RhdHVzIGxpbmUuXHJcbiAgICBSZXR1cm5zIFJhd1Jlc3BvbnNlTWVzc2FnZS5cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBwYXJzZV9tZXNzYWdlKHNlbGYsIGxpbmVzOiBMaXN0W2J5dGVzXSkgLT4gUmF3UmVzcG9uc2VNZXNzYWdlOlxyXG4gICAgICAgIGxpbmUgPSBsaW5lc1swXS5kZWNvZGUoInV0Zi04IiwgInN1cnJvZ2F0ZWVzY2FwZSIpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICB2ZXJzaW9uLCBzdGF0dXMgPSBsaW5lLnNwbGl0KE5vbmUsIDEpXHJcbiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XHJcbiAgICAgICAgICAgIHJhaXNlIEJhZFN0YXR1c0xpbmUobGluZSkgZnJvbSBOb25lXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgc3RhdHVzLCByZWFzb24gPSBzdGF0dXMuc3BsaXQoTm9uZSwgMSlcclxuICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcclxuICAgICAgICAgICAgcmVhc29uID0gIiJcclxuXHJcbiAgICAgICAgaWYgbGVuKHJlYXNvbikgPiBzZWxmLm1heF9saW5lX3NpemU6XHJcbiAgICAgICAgICAgIHJhaXNlIExpbmVUb29Mb25nKFxyXG4gICAgICAgICAgICAgICAgIlN0YXR1cyBsaW5lIGlzIHRvbyBsb25nIiwgc3RyKHNlbGYubWF4X2xpbmVfc2l6ZSksIHN0cihsZW4ocmVhc29uKSlcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAjIHZlcnNpb25cclxuICAgICAgICBtYXRjaCA9IFZFUlNSRS5tYXRjaCh2ZXJzaW9uKVxyXG4gICAgICAgIGlmIG1hdGNoIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIEJhZFN0YXR1c0xpbmUobGluZSlcclxuICAgICAgICB2ZXJzaW9uX28gPSBIdHRwVmVyc2lvbihpbnQobWF0Y2guZ3JvdXAoMSkpLCBpbnQobWF0Y2guZ3JvdXAoMikpKVxyXG5cclxuICAgICAgICAjIFRoZSBzdGF0dXMgY29kZSBpcyBhIHRocmVlLWRpZ2l0IG51bWJlclxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgc3RhdHVzX2kgPSBpbnQoc3RhdHVzKVxyXG4gICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICByYWlzZSBCYWRTdGF0dXNMaW5lKGxpbmUpIGZyb20gTm9uZVxyXG5cclxuICAgICAgICBpZiBzdGF0dXNfaSA+IDk5OTpcclxuICAgICAgICAgICAgcmFpc2UgQmFkU3RhdHVzTGluZShsaW5lKVxyXG5cclxuICAgICAgICAjIHJlYWQgaGVhZGVyc1xyXG4gICAgICAgIChcclxuICAgICAgICAgICAgaGVhZGVycyxcclxuICAgICAgICAgICAgcmF3X2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGNsb3NlLFxyXG4gICAgICAgICAgICBjb21wcmVzc2lvbixcclxuICAgICAgICAgICAgdXBncmFkZSxcclxuICAgICAgICAgICAgY2h1bmtlZCxcclxuICAgICAgICApID0gc2VsZi5wYXJzZV9oZWFkZXJzKGxpbmVzKVxyXG5cclxuICAgICAgICBpZiBjbG9zZSBpcyBOb25lOlxyXG4gICAgICAgICAgICBjbG9zZSA9IHZlcnNpb25fbyA8PSBIdHRwVmVyc2lvbjEwXHJcblxyXG4gICAgICAgIHJldHVybiBSYXdSZXNwb25zZU1lc3NhZ2UoXHJcbiAgICAgICAgICAgIHZlcnNpb25fbyxcclxuICAgICAgICAgICAgc3RhdHVzX2ksXHJcbiAgICAgICAgICAgIHJlYXNvbi5zdHJpcCgpLFxyXG4gICAgICAgICAgICBoZWFkZXJzLFxyXG4gICAgICAgICAgICByYXdfaGVhZGVycyxcclxuICAgICAgICAgICAgY2xvc2UsXHJcbiAgICAgICAgICAgIGNvbXByZXNzaW9uLFxyXG4gICAgICAgICAgICB1cGdyYWRlLFxyXG4gICAgICAgICAgICBjaHVua2VkLFxyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBIdHRwUGF5bG9hZFBhcnNlcjpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHBheWxvYWQ6IFN0cmVhbVJlYWRlcixcclxuICAgICAgICBsZW5ndGg6IE9wdGlvbmFsW2ludF0gPSBOb25lLFxyXG4gICAgICAgIGNodW5rZWQ6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBjb21wcmVzc2lvbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgY29kZTogT3B0aW9uYWxbaW50XSA9IE5vbmUsXHJcbiAgICAgICAgbWV0aG9kOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICByZWFkYWxsOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgcmVzcG9uc2Vfd2l0aF9ib2R5OiBib29sID0gVHJ1ZSxcclxuICAgICAgICBhdXRvX2RlY29tcHJlc3M6IGJvb2wgPSBUcnVlLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2xlbmd0aCA9IDBcclxuICAgICAgICBzZWxmLl90eXBlID0gUGFyc2VTdGF0ZS5QQVJTRV9OT05FXHJcbiAgICAgICAgc2VsZi5fY2h1bmsgPSBDaHVua1N0YXRlLlBBUlNFX0NIVU5LRURfU0laRVxyXG4gICAgICAgIHNlbGYuX2NodW5rX3NpemUgPSAwXHJcbiAgICAgICAgc2VsZi5fY2h1bmtfdGFpbCA9IGIiIlxyXG4gICAgICAgIHNlbGYuX2F1dG9fZGVjb21wcmVzcyA9IGF1dG9fZGVjb21wcmVzc1xyXG4gICAgICAgIHNlbGYuZG9uZSA9IEZhbHNlXHJcblxyXG4gICAgICAgICMgcGF5bG9hZCBkZWNvbXByZXNzaW9uIHdyYXBwZXJcclxuICAgICAgICBpZiByZXNwb25zZV93aXRoX2JvZHkgYW5kIGNvbXByZXNzaW9uIGFuZCBzZWxmLl9hdXRvX2RlY29tcHJlc3M6XHJcbiAgICAgICAgICAgIHJlYWxfcGF5bG9hZCA9IERlZmxhdGVCdWZmZXIoXHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkLCBjb21wcmVzc2lvblxyXG4gICAgICAgICAgICApICAjIHR5cGU6IFVuaW9uW1N0cmVhbVJlYWRlciwgRGVmbGF0ZUJ1ZmZlcl1cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZWFsX3BheWxvYWQgPSBwYXlsb2FkXHJcblxyXG4gICAgICAgICMgcGF5bG9hZCBwYXJzZXJcclxuICAgICAgICBpZiBub3QgcmVzcG9uc2Vfd2l0aF9ib2R5OlxyXG4gICAgICAgICAgICAjIGRvblwndCBwYXJzZSBwYXlsb2FkIGlmIGl0XCdzIG5vdCBleHBlY3RlZCB0byBiZSByZWNlaXZlZFxyXG4gICAgICAgICAgICBzZWxmLl90eXBlID0gUGFyc2VTdGF0ZS5QQVJTRV9OT05FXHJcbiAgICAgICAgICAgIHJlYWxfcGF5bG9hZC5mZWVkX2VvZigpXHJcbiAgICAgICAgICAgIHNlbGYuZG9uZSA9IFRydWVcclxuXHJcbiAgICAgICAgZWxpZiBjaHVua2VkOlxyXG4gICAgICAgICAgICBzZWxmLl90eXBlID0gUGFyc2VTdGF0ZS5QQVJTRV9DSFVOS0VEXHJcbiAgICAgICAgZWxpZiBsZW5ndGggaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3R5cGUgPSBQYXJzZVN0YXRlLlBBUlNFX0xFTkdUSFxyXG4gICAgICAgICAgICBzZWxmLl9sZW5ndGggPSBsZW5ndGhcclxuICAgICAgICAgICAgaWYgc2VsZi5fbGVuZ3RoID09IDA6XHJcbiAgICAgICAgICAgICAgICByZWFsX3BheWxvYWQuZmVlZF9lb2YoKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5kb25lID0gVHJ1ZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGlmIHJlYWRhbGwgYW5kIGNvZGUgIT0gMjA0OlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fdHlwZSA9IFBhcnNlU3RhdGUuUEFSU0VfVU5USUxfRU9GXHJcbiAgICAgICAgICAgIGVsaWYgbWV0aG9kIGluICgiUFVUIiwgIlBPU1QiKTpcclxuICAgICAgICAgICAgICAgIGludGVybmFsX2xvZ2dlci53YXJuaW5nKCAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtTGVuZ3RoIG9yIFRyYW5zZmVyLUVuY29kaW5nIGhlYWRlciBpcyByZXF1aXJlZCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIHNlbGYuX3R5cGUgPSBQYXJzZVN0YXRlLlBBUlNFX05PTkVcclxuICAgICAgICAgICAgICAgIHJlYWxfcGF5bG9hZC5mZWVkX2VvZigpXHJcbiAgICAgICAgICAgICAgICBzZWxmLmRvbmUgPSBUcnVlXHJcblxyXG4gICAgICAgIHNlbGYucGF5bG9hZCA9IHJlYWxfcGF5bG9hZFxyXG5cclxuICAgIGRlZiBmZWVkX2VvZihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX3R5cGUgPT0gUGFyc2VTdGF0ZS5QQVJTRV9VTlRJTF9FT0Y6XHJcbiAgICAgICAgICAgIHNlbGYucGF5bG9hZC5mZWVkX2VvZigpXHJcbiAgICAgICAgZWxpZiBzZWxmLl90eXBlID09IFBhcnNlU3RhdGUuUEFSU0VfTEVOR1RIOlxyXG4gICAgICAgICAgICByYWlzZSBDb250ZW50TGVuZ3RoRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiTm90IGVub3VnaCBkYXRhIGZvciBzYXRpc2Z5IGNvbnRlbnQgbGVuZ3RoIGhlYWRlci4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbGlmIHNlbGYuX3R5cGUgPT0gUGFyc2VTdGF0ZS5QQVJTRV9DSFVOS0VEOlxyXG4gICAgICAgICAgICByYWlzZSBUcmFuc2ZlckVuY29kaW5nRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiTm90IGVub3VnaCBkYXRhIGZvciBzYXRpc2Z5IHRyYW5zZmVyIGxlbmd0aCBoZWFkZXIuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIGZlZWRfZGF0YShcclxuICAgICAgICBzZWxmLCBjaHVuazogYnl0ZXMsIFNFUDogYnl0ZXMgPSBiIlxcclxcbiIsIENIVU5LX0VYVDogYnl0ZXMgPSBiIjsiXHJcbiAgICApIC0+IFR1cGxlW2Jvb2wsIGJ5dGVzXTpcclxuICAgICAgICAjIFJlYWQgc3BlY2lmaWVkIGFtb3VudCBvZiBieXRlc1xyXG4gICAgICAgIGlmIHNlbGYuX3R5cGUgPT0gUGFyc2VTdGF0ZS5QQVJTRV9MRU5HVEg6XHJcbiAgICAgICAgICAgIHJlcXVpcmVkID0gc2VsZi5fbGVuZ3RoXHJcbiAgICAgICAgICAgIGNodW5rX2xlbiA9IGxlbihjaHVuaylcclxuXHJcbiAgICAgICAgICAgIGlmIHJlcXVpcmVkID49IGNodW5rX2xlbjpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2xlbmd0aCA9IHJlcXVpcmVkIC0gY2h1bmtfbGVuXHJcbiAgICAgICAgICAgICAgICBzZWxmLnBheWxvYWQuZmVlZF9kYXRhKGNodW5rLCBjaHVua19sZW4pXHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9sZW5ndGggPT0gMDpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBheWxvYWQuZmVlZF9lb2YoKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUcnVlLCBiIiJcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2xlbmd0aCA9IDBcclxuICAgICAgICAgICAgICAgIHNlbGYucGF5bG9hZC5mZWVkX2RhdGEoY2h1bmtbOnJlcXVpcmVkXSwgcmVxdWlyZWQpXHJcbiAgICAgICAgICAgICAgICBzZWxmLnBheWxvYWQuZmVlZF9lb2YoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWUsIGNodW5rW3JlcXVpcmVkOl1cclxuXHJcbiAgICAgICAgIyBDaHVua2VkIHRyYW5zZmVyIGVuY29kaW5nIHBhcnNlclxyXG4gICAgICAgIGVsaWYgc2VsZi5fdHlwZSA9PSBQYXJzZVN0YXRlLlBBUlNFX0NIVU5LRUQ6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2NodW5rX3RhaWw6XHJcbiAgICAgICAgICAgICAgICBjaHVuayA9IHNlbGYuX2NodW5rX3RhaWwgKyBjaHVua1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2h1bmtfdGFpbCA9IGIiIlxyXG5cclxuICAgICAgICAgICAgd2hpbGUgY2h1bms6XHJcblxyXG4gICAgICAgICAgICAgICAgIyByZWFkIG5leHQgY2h1bmsgc2l6ZVxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fY2h1bmsgPT0gQ2h1bmtTdGF0ZS5QQVJTRV9DSFVOS0VEX1NJWkU6XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gY2h1bmsuZmluZChTRVApXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgcG9zID49IDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBjaHVuay5maW5kKENIVU5LX0VYVCwgMCwgcG9zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBpID49IDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplX2IgPSBjaHVua1s6aV0gICMgc3RyaXAgY2h1bmstZXh0ZW5zaW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZV9iID0gY2h1bmtbOnBvc11cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemUgPSBpbnQoYnl0ZXMoc2l6ZV9iKSwgMTYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjID0gVHJhbnNmZXJFbmNvZGluZ0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rWzpwb3NdLmRlY29kZSgiYXNjaWkiLCAic3Vycm9nYXRlZXNjYXBlIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGF5bG9hZC5zZXRfZXhjZXB0aW9uKGV4YylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIGV4YyBmcm9tIE5vbmVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmtbcG9zICsgMiA6XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBzaXplID09IDA6ICAjIGVvZiBtYXJrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NodW5rID0gQ2h1bmtTdGF0ZS5QQVJTRV9NQVlCRV9UUkFJTEVSU1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2h1bmsgPSBDaHVua1N0YXRlLlBBUlNFX0NIVU5LRURfQ0hVTktcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NodW5rX3NpemUgPSBzaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBheWxvYWQuYmVnaW5faHR0cF9jaHVua19yZWNlaXZpbmcoKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NodW5rX3RhaWwgPSBjaHVua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UsIGIiIlxyXG5cclxuICAgICAgICAgICAgICAgICMgcmVhZCBjaHVuayBhbmQgZmVlZCBidWZmZXJcclxuICAgICAgICAgICAgICAgIGlmIHNlbGYuX2NodW5rID09IENodW5rU3RhdGUuUEFSU0VfQ0hVTktFRF9DSFVOSzpcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZCA9IHNlbGYuX2NodW5rX3NpemVcclxuICAgICAgICAgICAgICAgICAgICBjaHVua19sZW4gPSBsZW4oY2h1bmspXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHJlcXVpcmVkID4gY2h1bmtfbGVuOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jaHVua19zaXplID0gcmVxdWlyZWQgLSBjaHVua19sZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXlsb2FkLmZlZWRfZGF0YShjaHVuaywgY2h1bmtfbGVuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UsIGIiIlxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NodW5rX3NpemUgPSAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGF5bG9hZC5mZWVkX2RhdGEoY2h1bmtbOnJlcXVpcmVkXSwgcmVxdWlyZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmtbcmVxdWlyZWQ6XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jaHVuayA9IENodW5rU3RhdGUuUEFSU0VfQ0hVTktFRF9DSFVOS19FT0ZcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXlsb2FkLmVuZF9odHRwX2NodW5rX3JlY2VpdmluZygpXHJcblxyXG4gICAgICAgICAgICAgICAgIyB0b3NzIHRoZSBDUkxGIGF0IHRoZSBlbmQgb2YgdGhlIGNodW5rXHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9jaHVuayA9PSBDaHVua1N0YXRlLlBBUlNFX0NIVU5LRURfQ0hVTktfRU9GOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGNodW5rWzoyXSA9PSBTRVA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gY2h1bmtbMjpdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NodW5rID0gQ2h1bmtTdGF0ZS5QQVJTRV9DSFVOS0VEX1NJWkVcclxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jaHVua190YWlsID0gY2h1bmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlLCBiIiJcclxuXHJcbiAgICAgICAgICAgICAgICAjIGlmIHN0cmVhbSBkb2VzIG5vdCBjb250YWluIHRyYWlsZXIsIGFmdGVyIDBcXHJcXG5cclxuICAgICAgICAgICAgICAgICMgd2Ugc2hvdWxkIGdldCBhbm90aGVyIFxcclxcbiBvdGhlcndpc2VcclxuICAgICAgICAgICAgICAgICMgdHJhaWxlcnMgbmVlZHMgdG8gYmUgc2tpcGVkIHVudGlsIFxcclxcblxcclxcblxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fY2h1bmsgPT0gQ2h1bmtTdGF0ZS5QQVJTRV9NQVlCRV9UUkFJTEVSUzpcclxuICAgICAgICAgICAgICAgICAgICBoZWFkID0gY2h1bmtbOjJdXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgaGVhZCA9PSBTRVA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICMgZW5kIG9mIHN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBheWxvYWQuZmVlZF9lb2YoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZSwgY2h1bmtbMjpdXHJcbiAgICAgICAgICAgICAgICAgICAgIyBCb3RoIENSIGFuZCBMRiwgb3Igb25seSBMRiBtYXkgbm90IGJlIHJlY2VpdmVkIHlldC4gSXQgaXNcclxuICAgICAgICAgICAgICAgICAgICAjIGV4cGVjdGVkIHRoYXQgQ1JMRiBvciBMRiB3aWxsIGJlIHNob3duIGF0IHRoZSB2ZXJ5IGZpcnN0XHJcbiAgICAgICAgICAgICAgICAgICAgIyBieXRlIG5leHQgdGltZSwgb3RoZXJ3aXNlIHRyYWlsZXJzIHNob3VsZCBjb21lLiBUaGUgbGFzdFxyXG4gICAgICAgICAgICAgICAgICAgICMgQ1JMRiB3aGljaCBtYXJrcyB0aGUgZW5kIG9mIHJlc3BvbnNlIG1pZ2h0IG5vdCBiZVxyXG4gICAgICAgICAgICAgICAgICAgICMgY29udGFpbmVkIGluIHRoZSBzYW1lIFRDUCBzZWdtZW50IHdoaWNoIGRlbGl2ZXJlZCB0aGVcclxuICAgICAgICAgICAgICAgICAgICAjIHNpemUgaW5kaWNhdG9yLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG5vdCBoZWFkOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UsIGIiIlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGhlYWQgPT0gU0VQWzoxXTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2h1bmtfdGFpbCA9IGhlYWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlLCBiIiJcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9jaHVuayA9IENodW5rU3RhdGUuUEFSU0VfVFJBSUxFUlNcclxuXHJcbiAgICAgICAgICAgICAgICAjIHJlYWQgYW5kIGRpc2NhcmQgdHJhaWxlciB1cCB0byB0aGUgQ1JMRiB0ZXJtaW5hdG9yXHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9jaHVuayA9PSBDaHVua1N0YXRlLlBBUlNFX1RSQUlMRVJTOlxyXG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IGNodW5rLmZpbmQoU0VQKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHBvcyA+PSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rW3BvcyArIDIgOl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2h1bmsgPSBDaHVua1N0YXRlLlBBUlNFX01BWUJFX1RSQUlMRVJTXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2h1bmtfdGFpbCA9IGNodW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZSwgYiIiXHJcblxyXG4gICAgICAgICMgUmVhZCBhbGwgYnl0ZXMgdW50aWwgZW9mXHJcbiAgICAgICAgZWxpZiBzZWxmLl90eXBlID09IFBhcnNlU3RhdGUuUEFSU0VfVU5USUxfRU9GOlxyXG4gICAgICAgICAgICBzZWxmLnBheWxvYWQuZmVlZF9kYXRhKGNodW5rLCBsZW4oY2h1bmspKVxyXG5cclxuICAgICAgICByZXR1cm4gRmFsc2UsIGIiIlxyXG5cclxuXHJcbmNsYXNzIERlZmxhdGVCdWZmZXI6XHJcbiAgICAiIiJEZWZsYXRlU3RyZWFtIGRlY29tcHJlc3Mgc3RyZWFtIGFuZCBmZWVkIGRhdGEgaW50byBzcGVjaWZpZWQgc3RyZWFtLiIiIlxyXG5cclxuICAgIGRlY29tcHJlc3NvcjogQW55XHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG91dDogU3RyZWFtUmVhZGVyLCBlbmNvZGluZzogT3B0aW9uYWxbc3RyXSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLm91dCA9IG91dFxyXG4gICAgICAgIHNlbGYuc2l6ZSA9IDBcclxuICAgICAgICBzZWxmLmVuY29kaW5nID0gZW5jb2RpbmdcclxuICAgICAgICBzZWxmLl9zdGFydGVkX2RlY29kaW5nID0gRmFsc2VcclxuXHJcbiAgICAgICAgaWYgZW5jb2RpbmcgPT0gImJyIjpcclxuICAgICAgICAgICAgaWYgbm90IEhBU19CUk9UTEk6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgICAgIHJhaXNlIENvbnRlbnRFbmNvZGluZ0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJDYW4gbm90IGRlY29kZSBjb250ZW50LWVuY29kaW5nOiBicm90bGkgKGJyKS4gIlxyXG4gICAgICAgICAgICAgICAgICAgICJQbGVhc2UgaW5zdGFsbCBgQnJvdGxpYCJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIGNsYXNzIEJyb3RsaURlY29kZXI6XHJcbiAgICAgICAgICAgICAgICAjIFN1cHBvcnRzIGJvdGggXCdicm90bGlweVwnIGFuZCBcJ0Jyb3RsaVwnIHBhY2thZ2VzXHJcbiAgICAgICAgICAgICAgICAjIHNpbmNlIHRoZXkgc2hhcmUgYW4gaW1wb3J0IG5hbWUuIFRoZSB0b3AgYnJhbmNoZXNcclxuICAgICAgICAgICAgICAgICMgYXJlIGZvciBcJ2Jyb3RsaXB5XCcgYW5kIGJvdHRvbSBicmFuY2hlcyBmb3IgXCdCcm90bGlcJ1xyXG4gICAgICAgICAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fb2JqID0gYnJvdGxpLkRlY29tcHJlc3NvcigpXHJcblxyXG4gICAgICAgICAgICAgICAgZGVmIGRlY29tcHJlc3Moc2VsZiwgZGF0YTogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGhhc2F0dHIoc2VsZi5fb2JqLCAiZGVjb21wcmVzcyIpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FzdChieXRlcywgc2VsZi5fb2JqLmRlY29tcHJlc3MoZGF0YSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhc3QoYnl0ZXMsIHNlbGYuX29iai5wcm9jZXNzKGRhdGEpKVxyXG5cclxuICAgICAgICAgICAgICAgIGRlZiBmbHVzaChzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAgICAgICAgICAgICBpZiBoYXNhdHRyKHNlbGYuX29iaiwgImZsdXNoIik6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXN0KGJ5dGVzLCBzZWxmLl9vYmouZmx1c2goKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYiIiXHJcblxyXG4gICAgICAgICAgICBzZWxmLmRlY29tcHJlc3NvciA9IEJyb3RsaURlY29kZXIoKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHpsaWJfbW9kZSA9IDE2ICsgemxpYi5NQVhfV0JJVFMgaWYgZW5jb2RpbmcgPT0gImd6aXAiIGVsc2UgemxpYi5NQVhfV0JJVFNcclxuICAgICAgICAgICAgc2VsZi5kZWNvbXByZXNzb3IgPSB6bGliLmRlY29tcHJlc3NvYmood2JpdHM9emxpYl9tb2RlKVxyXG5cclxuICAgIGRlZiBzZXRfZXhjZXB0aW9uKHNlbGYsIGV4YzogQmFzZUV4Y2VwdGlvbikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLm91dC5zZXRfZXhjZXB0aW9uKGV4YylcclxuXHJcbiAgICBkZWYgZmVlZF9kYXRhKHNlbGYsIGNodW5rOiBieXRlcywgc2l6ZTogaW50KSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBzaXplOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgc2VsZi5zaXplICs9IHNpemVcclxuXHJcbiAgICAgICAgIyBSRkMxOTUwXHJcbiAgICAgICAgIyBiaXRzIDAuLjMgPSBDTSA9IDBiMTAwMCA9IDggPSAiZGVmbGF0ZSJcclxuICAgICAgICAjIGJpdHMgNC4uNyA9IENJTkZPID0gMS4uNyA9IHdpbmRvd3Mgc2l6ZS5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG5vdCBzZWxmLl9zdGFydGVkX2RlY29kaW5nXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmVuY29kaW5nID09ICJkZWZsYXRlIlxyXG4gICAgICAgICAgICBhbmQgY2h1bmtbMF0gJiAweEYgIT0gOFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgICMgQ2hhbmdlIHRoZSBkZWNvZGVyIHRvIGRlY29tcHJlc3MgaW5jb3JyZWN0bHkgY29tcHJlc3NlZCBkYXRhXHJcbiAgICAgICAgICAgICMgQWN0dWFsbHkgd2Ugc2hvdWxkIGlzc3VlIGEgd2FybmluZyBhYm91dCBub24tUkZDLWNvbXBsaWFudCBkYXRhLlxyXG4gICAgICAgICAgICBzZWxmLmRlY29tcHJlc3NvciA9IHpsaWIuZGVjb21wcmVzc29iaih3Yml0cz0temxpYi5NQVhfV0JJVFMpXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgY2h1bmsgPSBzZWxmLmRlY29tcHJlc3Nvci5kZWNvbXByZXNzKGNodW5rKVxyXG4gICAgICAgIGV4Y2VwdCBFeGNlcHRpb246XHJcbiAgICAgICAgICAgIHJhaXNlIENvbnRlbnRFbmNvZGluZ0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgIkNhbiBub3QgZGVjb2RlIGNvbnRlbnQtZW5jb2Rpbmc6ICVzIiAlIHNlbGYuZW5jb2RpbmdcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9zdGFydGVkX2RlY29kaW5nID0gVHJ1ZVxyXG5cclxuICAgICAgICBpZiBjaHVuazpcclxuICAgICAgICAgICAgc2VsZi5vdXQuZmVlZF9kYXRhKGNodW5rLCBsZW4oY2h1bmspKVxyXG5cclxuICAgIGRlZiBmZWVkX2VvZihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGNodW5rID0gc2VsZi5kZWNvbXByZXNzb3IuZmx1c2goKVxyXG5cclxuICAgICAgICBpZiBjaHVuayBvciBzZWxmLnNpemUgPiAwOlxyXG4gICAgICAgICAgICBzZWxmLm91dC5mZWVkX2RhdGEoY2h1bmssIGxlbihjaHVuaykpXHJcbiAgICAgICAgICAgIGlmIHNlbGYuZW5jb2RpbmcgPT0gImRlZmxhdGUiIGFuZCBub3Qgc2VsZi5kZWNvbXByZXNzb3IuZW9mOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgQ29udGVudEVuY29kaW5nRXJyb3IoImRlZmxhdGUiKVxyXG5cclxuICAgICAgICBzZWxmLm91dC5mZWVkX2VvZigpXHJcblxyXG4gICAgZGVmIGJlZ2luX2h0dHBfY2h1bmtfcmVjZWl2aW5nKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5vdXQuYmVnaW5faHR0cF9jaHVua19yZWNlaXZpbmcoKVxyXG5cclxuICAgIGRlZiBlbmRfaHR0cF9jaHVua19yZWNlaXZpbmcoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLm91dC5lbmRfaHR0cF9jaHVua19yZWNlaXZpbmcoKVxyXG5cclxuXHJcbkh0dHBSZXF1ZXN0UGFyc2VyUHkgPSBIdHRwUmVxdWVzdFBhcnNlclxyXG5IdHRwUmVzcG9uc2VQYXJzZXJQeSA9IEh0dHBSZXNwb25zZVBhcnNlclxyXG5SYXdSZXF1ZXN0TWVzc2FnZVB5ID0gUmF3UmVxdWVzdE1lc3NhZ2VcclxuUmF3UmVzcG9uc2VNZXNzYWdlUHkgPSBSYXdSZXNwb25zZU1lc3NhZ2VcclxuXHJcbnRyeTpcclxuICAgIGlmIG5vdCBOT19FWFRFTlNJT05TOlxyXG4gICAgICAgIGZyb20gLl9odHRwX3BhcnNlciBpbXBvcnQgKCAgIyB0eXBlOiBpZ25vcmVbaW1wb3J0LG5vLXJlZGVmXVxyXG4gICAgICAgICAgICBIdHRwUmVxdWVzdFBhcnNlcixcclxuICAgICAgICAgICAgSHR0cFJlc3BvbnNlUGFyc2VyLFxyXG4gICAgICAgICAgICBSYXdSZXF1ZXN0TWVzc2FnZSxcclxuICAgICAgICAgICAgUmF3UmVzcG9uc2VNZXNzYWdlLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgSHR0cFJlcXVlc3RQYXJzZXJDID0gSHR0cFJlcXVlc3RQYXJzZXJcclxuICAgICAgICBIdHRwUmVzcG9uc2VQYXJzZXJDID0gSHR0cFJlc3BvbnNlUGFyc2VyXHJcbiAgICAgICAgUmF3UmVxdWVzdE1lc3NhZ2VDID0gUmF3UmVxdWVzdE1lc3NhZ2VcclxuICAgICAgICBSYXdSZXNwb25zZU1lc3NhZ2VDID0gUmF3UmVzcG9uc2VNZXNzYWdlXHJcbmV4Y2VwdCBJbXBvcnRFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgcGFzc1xyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9iYXNlX3Byb3RvY29sLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIGNhc3RcclxuXHJcbmZyb20gLnRjcF9oZWxwZXJzIGltcG9ydCB0Y3Bfbm9kZWxheVxyXG5cclxuXHJcbmNsYXNzIEJhc2VQcm90b2NvbChhc3luY2lvLlByb3RvY29sKTpcclxuICAgIF9fc2xvdHNfXyA9IChcclxuICAgICAgICAiX2xvb3AiLFxyXG4gICAgICAgICJfcGF1c2VkIixcclxuICAgICAgICAiX2RyYWluX3dhaXRlciIsXHJcbiAgICAgICAgIl9jb25uZWN0aW9uX2xvc3QiLFxyXG4gICAgICAgICJfcmVhZGluZ19wYXVzZWQiLFxyXG4gICAgICAgICJ0cmFuc3BvcnQiLFxyXG4gICAgKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsb29wOiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2xvb3AgPSBsb29wICAjIHR5cGU6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BcclxuICAgICAgICBzZWxmLl9wYXVzZWQgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX2RyYWluX3dhaXRlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5GdXR1cmVbTm9uZV1dXHJcbiAgICAgICAgc2VsZi5fY29ubmVjdGlvbl9sb3N0ID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9yZWFkaW5nX3BhdXNlZCA9IEZhbHNlXHJcblxyXG4gICAgICAgIHNlbGYudHJhbnNwb3J0ID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFthc3luY2lvLlRyYW5zcG9ydF1cclxuXHJcbiAgICBkZWYgcGF1c2Vfd3JpdGluZyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGFzc2VydCBub3Qgc2VsZi5fcGF1c2VkXHJcbiAgICAgICAgc2VsZi5fcGF1c2VkID0gVHJ1ZVxyXG5cclxuICAgIGRlZiByZXN1bWVfd3JpdGluZyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9wYXVzZWRcclxuICAgICAgICBzZWxmLl9wYXVzZWQgPSBGYWxzZVxyXG5cclxuICAgICAgICB3YWl0ZXIgPSBzZWxmLl9kcmFpbl93YWl0ZXJcclxuICAgICAgICBpZiB3YWl0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2RyYWluX3dhaXRlciA9IE5vbmVcclxuICAgICAgICAgICAgaWYgbm90IHdhaXRlci5kb25lKCk6XHJcbiAgICAgICAgICAgICAgICB3YWl0ZXIuc2V0X3Jlc3VsdChOb25lKVxyXG5cclxuICAgIGRlZiBwYXVzZV9yZWFkaW5nKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IHNlbGYuX3JlYWRpbmdfcGF1c2VkIGFuZCBzZWxmLnRyYW5zcG9ydCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgc2VsZi50cmFuc3BvcnQucGF1c2VfcmVhZGluZygpXHJcbiAgICAgICAgICAgIGV4Y2VwdCAoQXR0cmlidXRlRXJyb3IsIE5vdEltcGxlbWVudGVkRXJyb3IsIFJ1bnRpbWVFcnJvcik6XHJcbiAgICAgICAgICAgICAgICBwYXNzXHJcbiAgICAgICAgICAgIHNlbGYuX3JlYWRpbmdfcGF1c2VkID0gVHJ1ZVxyXG5cclxuICAgIGRlZiByZXN1bWVfcmVhZGluZyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX3JlYWRpbmdfcGF1c2VkIGFuZCBzZWxmLnRyYW5zcG9ydCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgc2VsZi50cmFuc3BvcnQucmVzdW1lX3JlYWRpbmcoKVxyXG4gICAgICAgICAgICBleGNlcHQgKEF0dHJpYnV0ZUVycm9yLCBOb3RJbXBsZW1lbnRlZEVycm9yLCBSdW50aW1lRXJyb3IpOlxyXG4gICAgICAgICAgICAgICAgcGFzc1xyXG4gICAgICAgICAgICBzZWxmLl9yZWFkaW5nX3BhdXNlZCA9IEZhbHNlXHJcblxyXG4gICAgZGVmIGNvbm5lY3Rpb25fbWFkZShzZWxmLCB0cmFuc3BvcnQ6IGFzeW5jaW8uQmFzZVRyYW5zcG9ydCkgLT4gTm9uZTpcclxuICAgICAgICB0ciA9IGNhc3QoYXN5bmNpby5UcmFuc3BvcnQsIHRyYW5zcG9ydClcclxuICAgICAgICB0Y3Bfbm9kZWxheSh0ciwgVHJ1ZSlcclxuICAgICAgICBzZWxmLnRyYW5zcG9ydCA9IHRyXHJcblxyXG4gICAgZGVmIGNvbm5lY3Rpb25fbG9zdChzZWxmLCBleGM6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2Nvbm5lY3Rpb25fbG9zdCA9IFRydWVcclxuICAgICAgICAjIFdha2UgdXAgdGhlIHdyaXRlciBpZiBjdXJyZW50bHkgcGF1c2VkLlxyXG4gICAgICAgIHNlbGYudHJhbnNwb3J0ID0gTm9uZVxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9wYXVzZWQ6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIHdhaXRlciA9IHNlbGYuX2RyYWluX3dhaXRlclxyXG4gICAgICAgIGlmIHdhaXRlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBzZWxmLl9kcmFpbl93YWl0ZXIgPSBOb25lXHJcbiAgICAgICAgaWYgd2FpdGVyLmRvbmUoKTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgaWYgZXhjIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHdhaXRlci5zZXRfcmVzdWx0KE5vbmUpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgd2FpdGVyLnNldF9leGNlcHRpb24oZXhjKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfZHJhaW5faGVscGVyKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fY29ubmVjdGlvbl9sb3N0OlxyXG4gICAgICAgICAgICByYWlzZSBDb25uZWN0aW9uUmVzZXRFcnJvcigiQ29ubmVjdGlvbiBsb3N0IilcclxuICAgICAgICBpZiBub3Qgc2VsZi5fcGF1c2VkOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB3YWl0ZXIgPSBzZWxmLl9kcmFpbl93YWl0ZXJcclxuICAgICAgICBpZiB3YWl0ZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgd2FpdGVyID0gc2VsZi5fbG9vcC5jcmVhdGVfZnV0dXJlKClcclxuICAgICAgICAgICAgc2VsZi5fZHJhaW5fd2FpdGVyID0gd2FpdGVyXHJcbiAgICAgICAgYXdhaXQgYXN5bmNpby5zaGllbGQod2FpdGVyKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC90Y3BfaGVscGVycy5weScsIGInIiIiSGVscGVyIG1ldGhvZHMgdG8gdHVuZSBhIFRDUCBjb25uZWN0aW9uIiIiXHJcblxyXG5pbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgc29ja2V0XHJcbmZyb20gY29udGV4dGxpYiBpbXBvcnQgc3VwcHJlc3NcclxuZnJvbSB0eXBpbmcgaW1wb3J0IE9wdGlvbmFsICAjIG5vcWFcclxuXHJcbl9fYWxsX18gPSAoInRjcF9rZWVwYWxpdmUiLCAidGNwX25vZGVsYXkiKVxyXG5cclxuXHJcbmlmIGhhc2F0dHIoc29ja2V0LCAiU09fS0VFUEFMSVZFIik6XHJcblxyXG4gICAgZGVmIHRjcF9rZWVwYWxpdmUodHJhbnNwb3J0OiBhc3luY2lvLlRyYW5zcG9ydCkgLT4gTm9uZTpcclxuICAgICAgICBzb2NrID0gdHJhbnNwb3J0LmdldF9leHRyYV9pbmZvKCJzb2NrZXQiKVxyXG4gICAgICAgIGlmIHNvY2sgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNvY2suc2V0c29ja29wdChzb2NrZXQuU09MX1NPQ0tFVCwgc29ja2V0LlNPX0tFRVBBTElWRSwgMSlcclxuXHJcblxyXG5lbHNlOlxyXG5cclxuICAgIGRlZiB0Y3Bfa2VlcGFsaXZlKHRyYW5zcG9ydDogYXN5bmNpby5UcmFuc3BvcnQpIC0+IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICBwYXNzXHJcblxyXG5cclxuZGVmIHRjcF9ub2RlbGF5KHRyYW5zcG9ydDogYXN5bmNpby5UcmFuc3BvcnQsIHZhbHVlOiBib29sKSAtPiBOb25lOlxyXG4gICAgc29jayA9IHRyYW5zcG9ydC5nZXRfZXh0cmFfaW5mbygic29ja2V0IilcclxuXHJcbiAgICBpZiBzb2NrIGlzIE5vbmU6XHJcbiAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgaWYgc29jay5mYW1pbHkgbm90IGluIChzb2NrZXQuQUZfSU5FVCwgc29ja2V0LkFGX0lORVQ2KTpcclxuICAgICAgICByZXR1cm5cclxuXHJcbiAgICB2YWx1ZSA9IGJvb2wodmFsdWUpXHJcblxyXG4gICAgIyBzb2NrZXQgbWF5IGJlIGNsb3NlZCBhbHJlYWR5LCBvbiB3aW5kb3dzIE9TRXJyb3IgZ2V0IHJhaXNlZFxyXG4gICAgd2l0aCBzdXBwcmVzcyhPU0Vycm9yKTpcclxuICAgICAgICBzb2NrLnNldHNvY2tvcHQoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIHZhbHVlKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9odHRwX3dyaXRlci5weScsIGInIiIiSHR0cCByZWxhdGVkIHBhcnNlcnMgYW5kIHByb3RvY29sLiIiIlxyXG5cclxuaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IHpsaWJcclxuZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgQXdhaXRhYmxlLCBDYWxsYWJsZSwgTmFtZWRUdXBsZSwgT3B0aW9uYWwsIFVuaW9uICAjIG5vcWFcclxuXHJcbmZyb20gbXVsdGlkaWN0IGltcG9ydCBDSU11bHRpRGljdFxyXG5cclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdFN0cmVhbVdyaXRlclxyXG5mcm9tIC5iYXNlX3Byb3RvY29sIGltcG9ydCBCYXNlUHJvdG9jb2xcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgTk9fRVhURU5TSU9OU1xyXG5cclxuX19hbGxfXyA9ICgiU3RyZWFtV3JpdGVyIiwgIkh0dHBWZXJzaW9uIiwgIkh0dHBWZXJzaW9uMTAiLCAiSHR0cFZlcnNpb24xMSIpXHJcblxyXG5cclxuY2xhc3MgSHR0cFZlcnNpb24oTmFtZWRUdXBsZSk6XHJcbiAgICBtYWpvcjogaW50XHJcbiAgICBtaW5vcjogaW50XHJcblxyXG5cclxuSHR0cFZlcnNpb24xMCA9IEh0dHBWZXJzaW9uKDEsIDApXHJcbkh0dHBWZXJzaW9uMTEgPSBIdHRwVmVyc2lvbigxLCAxKVxyXG5cclxuXHJcbl9UX09uQ2h1bmtTZW50ID0gT3B0aW9uYWxbQ2FsbGFibGVbW2J5dGVzXSwgQXdhaXRhYmxlW05vbmVdXV1cclxuX1RfT25IZWFkZXJzU2VudCA9IE9wdGlvbmFsW0NhbGxhYmxlW1siQ0lNdWx0aURpY3Rbc3RyXSJdLCBBd2FpdGFibGVbTm9uZV1dXVxyXG5cclxuXHJcbmNsYXNzIFN0cmVhbVdyaXRlcihBYnN0cmFjdFN0cmVhbVdyaXRlcik6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBwcm90b2NvbDogQmFzZVByb3RvY29sLFxyXG4gICAgICAgIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3AsXHJcbiAgICAgICAgb25fY2h1bmtfc2VudDogX1RfT25DaHVua1NlbnQgPSBOb25lLFxyXG4gICAgICAgIG9uX2hlYWRlcnNfc2VudDogX1RfT25IZWFkZXJzU2VudCA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fcHJvdG9jb2wgPSBwcm90b2NvbFxyXG4gICAgICAgIHNlbGYuX3RyYW5zcG9ydCA9IHByb3RvY29sLnRyYW5zcG9ydFxyXG5cclxuICAgICAgICBzZWxmLmxvb3AgPSBsb29wXHJcbiAgICAgICAgc2VsZi5sZW5ndGggPSBOb25lXHJcbiAgICAgICAgc2VsZi5jaHVua2VkID0gRmFsc2VcclxuICAgICAgICBzZWxmLmJ1ZmZlcl9zaXplID0gMFxyXG4gICAgICAgIHNlbGYub3V0cHV0X3NpemUgPSAwXHJcblxyXG4gICAgICAgIHNlbGYuX2VvZiA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fY29tcHJlc3MgPSBOb25lICAjIHR5cGU6IEFueVxyXG4gICAgICAgIHNlbGYuX2RyYWluX3dhaXRlciA9IE5vbmVcclxuXHJcbiAgICAgICAgc2VsZi5fb25fY2h1bmtfc2VudCA9IG9uX2NodW5rX3NlbnQgICMgdHlwZTogX1RfT25DaHVua1NlbnRcclxuICAgICAgICBzZWxmLl9vbl9oZWFkZXJzX3NlbnQgPSBvbl9oZWFkZXJzX3NlbnQgICMgdHlwZTogX1RfT25IZWFkZXJzU2VudFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHRyYW5zcG9ydChzZWxmKSAtPiBPcHRpb25hbFthc3luY2lvLlRyYW5zcG9ydF06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3RyYW5zcG9ydFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHByb3RvY29sKHNlbGYpIC0+IEJhc2VQcm90b2NvbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcHJvdG9jb2xcclxuXHJcbiAgICBkZWYgZW5hYmxlX2NodW5raW5nKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jaHVua2VkID0gVHJ1ZVxyXG5cclxuICAgIGRlZiBlbmFibGVfY29tcHJlc3Npb24oXHJcbiAgICAgICAgc2VsZiwgZW5jb2Rpbmc6IHN0ciA9ICJkZWZsYXRlIiwgc3RyYXRlZ3k6IGludCA9IHpsaWIuWl9ERUZBVUxUX1NUUkFURUdZXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgemxpYl9tb2RlID0gMTYgKyB6bGliLk1BWF9XQklUUyBpZiBlbmNvZGluZyA9PSAiZ3ppcCIgZWxzZSB6bGliLk1BWF9XQklUU1xyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzID0gemxpYi5jb21wcmVzc29iaih3Yml0cz16bGliX21vZGUsIHN0cmF0ZWd5PXN0cmF0ZWd5KVxyXG5cclxuICAgIGRlZiBfd3JpdGUoc2VsZiwgY2h1bms6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIHNpemUgPSBsZW4oY2h1bmspXHJcbiAgICAgICAgc2VsZi5idWZmZXJfc2l6ZSArPSBzaXplXHJcbiAgICAgICAgc2VsZi5vdXRwdXRfc2l6ZSArPSBzaXplXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX3RyYW5zcG9ydCBpcyBOb25lIG9yIHNlbGYuX3RyYW5zcG9ydC5pc19jbG9zaW5nKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIENvbm5lY3Rpb25SZXNldEVycm9yKCJDYW5ub3Qgd3JpdGUgdG8gY2xvc2luZyB0cmFuc3BvcnQiKVxyXG4gICAgICAgIHNlbGYuX3RyYW5zcG9ydC53cml0ZShjaHVuaylcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGUoXHJcbiAgICAgICAgc2VsZiwgY2h1bms6IGJ5dGVzLCAqLCBkcmFpbjogYm9vbCA9IFRydWUsIExJTUlUOiBpbnQgPSAweDEwMDAwXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiV3JpdGVzIGNodW5rIG9mIGRhdGEgdG8gYSBzdHJlYW0uXHJcblxyXG4gICAgICAgIHdyaXRlX2VvZigpIGluZGljYXRlcyBlbmQgb2Ygc3RyZWFtLlxyXG4gICAgICAgIHdyaXRlciBjYW5cJ3QgYmUgdXNlZCBhZnRlciB3cml0ZV9lb2YoKSBtZXRob2QgYmVpbmcgY2FsbGVkLlxyXG4gICAgICAgIHdyaXRlKCkgcmV0dXJuIGRyYWluIGZ1dHVyZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBzZWxmLl9vbl9jaHVua19zZW50IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9vbl9jaHVua19zZW50KGNodW5rKVxyXG5cclxuICAgICAgICBpZiBpc2luc3RhbmNlKGNodW5rLCBtZW1vcnl2aWV3KTpcclxuICAgICAgICAgICAgaWYgY2h1bmsubmJ5dGVzICE9IGxlbihjaHVuayk6XHJcbiAgICAgICAgICAgICAgICAjIGp1c3QgcmVzaGFwZSBpdFxyXG4gICAgICAgICAgICAgICAgY2h1bmsgPSBjaHVuay5jYXN0KCJjIilcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fY29tcHJlc3MgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGNodW5rID0gc2VsZi5fY29tcHJlc3MuY29tcHJlc3MoY2h1bmspXHJcbiAgICAgICAgICAgIGlmIG5vdCBjaHVuazpcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBpZiBzZWxmLmxlbmd0aCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgY2h1bmtfbGVuID0gbGVuKGNodW5rKVxyXG4gICAgICAgICAgICBpZiBzZWxmLmxlbmd0aCA+PSBjaHVua19sZW46XHJcbiAgICAgICAgICAgICAgICBzZWxmLmxlbmd0aCA9IHNlbGYubGVuZ3RoIC0gY2h1bmtfbGVuXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rWzogc2VsZi5sZW5ndGhdXHJcbiAgICAgICAgICAgICAgICBzZWxmLmxlbmd0aCA9IDBcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBjaHVuazpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgaWYgY2h1bms6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuY2h1bmtlZDpcclxuICAgICAgICAgICAgICAgIGNodW5rX2xlbl9wcmUgPSAoIiV4XFxyXFxuIiAlIGxlbihjaHVuaykpLmVuY29kZSgiYXNjaWkiKVxyXG4gICAgICAgICAgICAgICAgY2h1bmsgPSBjaHVua19sZW5fcHJlICsgY2h1bmsgKyBiIlxcclxcbiJcclxuXHJcbiAgICAgICAgICAgIHNlbGYuX3dyaXRlKGNodW5rKVxyXG5cclxuICAgICAgICAgICAgaWYgc2VsZi5idWZmZXJfc2l6ZSA+IExJTUlUIGFuZCBkcmFpbjpcclxuICAgICAgICAgICAgICAgIHNlbGYuYnVmZmVyX3NpemUgPSAwXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmRyYWluKClcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGVfaGVhZGVycyhcclxuICAgICAgICBzZWxmLCBzdGF0dXNfbGluZTogc3RyLCBoZWFkZXJzOiAiQ0lNdWx0aURpY3Rbc3RyXSJcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJXcml0ZSByZXF1ZXN0L3Jlc3BvbnNlIHN0YXR1cyBhbmQgaGVhZGVycy4iIiJcclxuICAgICAgICBpZiBzZWxmLl9vbl9oZWFkZXJzX3NlbnQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX29uX2hlYWRlcnNfc2VudChoZWFkZXJzKVxyXG5cclxuICAgICAgICAjIHN0YXR1cyArIGhlYWRlcnNcclxuICAgICAgICBidWYgPSBfc2VyaWFsaXplX2hlYWRlcnMoc3RhdHVzX2xpbmUsIGhlYWRlcnMpXHJcbiAgICAgICAgc2VsZi5fd3JpdGUoYnVmKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZV9lb2Yoc2VsZiwgY2h1bms6IGJ5dGVzID0gYiIiKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2VvZjpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGlmIGNodW5rIGFuZCBzZWxmLl9vbl9jaHVua19zZW50IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9vbl9jaHVua19zZW50KGNodW5rKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9jb21wcmVzczpcclxuICAgICAgICAgICAgaWYgY2h1bms6XHJcbiAgICAgICAgICAgICAgICBjaHVuayA9IHNlbGYuX2NvbXByZXNzLmNvbXByZXNzKGNodW5rKVxyXG5cclxuICAgICAgICAgICAgY2h1bmsgPSBjaHVuayArIHNlbGYuX2NvbXByZXNzLmZsdXNoKClcclxuICAgICAgICAgICAgaWYgY2h1bmsgYW5kIHNlbGYuY2h1bmtlZDpcclxuICAgICAgICAgICAgICAgIGNodW5rX2xlbiA9ICgiJXhcXHJcXG4iICUgbGVuKGNodW5rKSkuZW5jb2RlKCJhc2NpaSIpXHJcbiAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rX2xlbiArIGNodW5rICsgYiJcXHJcXG4wXFxyXFxuXFxyXFxuIlxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuY2h1bmtlZDpcclxuICAgICAgICAgICAgICAgIGlmIGNodW5rOlxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rX2xlbiA9ICgiJXhcXHJcXG4iICUgbGVuKGNodW5rKSkuZW5jb2RlKCJhc2NpaSIpXHJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsgPSBjaHVua19sZW4gKyBjaHVuayArIGIiXFxyXFxuMFxcclxcblxcclxcbiJcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsgPSBiIjBcXHJcXG5cXHJcXG4iXHJcblxyXG4gICAgICAgIGlmIGNodW5rOlxyXG4gICAgICAgICAgICBzZWxmLl93cml0ZShjaHVuaylcclxuXHJcbiAgICAgICAgYXdhaXQgc2VsZi5kcmFpbigpXHJcblxyXG4gICAgICAgIHNlbGYuX2VvZiA9IFRydWVcclxuICAgICAgICBzZWxmLl90cmFuc3BvcnQgPSBOb25lXHJcblxyXG4gICAgYXN5bmMgZGVmIGRyYWluKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiRmx1c2ggdGhlIHdyaXRlIGJ1ZmZlci5cclxuXHJcbiAgICAgICAgVGhlIGludGVuZGVkIHVzZSBpcyB0byB3cml0ZVxyXG5cclxuICAgICAgICAgIGF3YWl0IHcud3JpdGUoZGF0YSlcclxuICAgICAgICAgIGF3YWl0IHcuZHJhaW4oKVxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHNlbGYuX3Byb3RvY29sLnRyYW5zcG9ydCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fcHJvdG9jb2wuX2RyYWluX2hlbHBlcigpXHJcblxyXG5cclxuZGVmIF9zYWZlX2hlYWRlcihzdHJpbmc6IHN0cikgLT4gc3RyOlxyXG4gICAgaWYgIlxcciIgaW4gc3RyaW5nIG9yICJcXG4iIGluIHN0cmluZzpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAiTmV3bGluZSBvciBjYXJyaWFnZSByZXR1cm4gZGV0ZWN0ZWQgaW4gaGVhZGVycy4gIlxyXG4gICAgICAgICAgICAiUG90ZW50aWFsIGhlYWRlciBpbmplY3Rpb24gYXR0YWNrLiJcclxuICAgICAgICApXHJcbiAgICByZXR1cm4gc3RyaW5nXHJcblxyXG5cclxuZGVmIF9weV9zZXJpYWxpemVfaGVhZGVycyhzdGF0dXNfbGluZTogc3RyLCBoZWFkZXJzOiAiQ0lNdWx0aURpY3Rbc3RyXSIpIC0+IGJ5dGVzOlxyXG4gICAgaGVhZGVyc19nZW4gPSAoX3NhZmVfaGVhZGVyKGspICsgIjogIiArIF9zYWZlX2hlYWRlcih2KSBmb3IgaywgdiBpbiBoZWFkZXJzLml0ZW1zKCkpXHJcbiAgICBsaW5lID0gc3RhdHVzX2xpbmUgKyAiXFxyXFxuIiArICJcXHJcXG4iLmpvaW4oaGVhZGVyc19nZW4pICsgIlxcclxcblxcclxcbiJcclxuICAgIHJldHVybiBsaW5lLmVuY29kZSgidXRmLTgiKVxyXG5cclxuXHJcbl9zZXJpYWxpemVfaGVhZGVycyA9IF9weV9zZXJpYWxpemVfaGVhZGVyc1xyXG5cclxudHJ5OlxyXG4gICAgaW1wb3J0IGFpb2h0dHAuX2h0dHBfd3JpdGVyIGFzIF9odHRwX3dyaXRlciAgIyB0eXBlOiBpZ25vcmVbaW1wb3J0XVxyXG5cclxuICAgIF9jX3NlcmlhbGl6ZV9oZWFkZXJzID0gX2h0dHBfd3JpdGVyLl9zZXJpYWxpemVfaGVhZGVyc1xyXG4gICAgaWYgbm90IE5PX0VYVEVOU0lPTlM6XHJcbiAgICAgICAgX3NlcmlhbGl6ZV9oZWFkZXJzID0gX2Nfc2VyaWFsaXplX2hlYWRlcnNcclxuZXhjZXB0IEltcG9ydEVycm9yOlxyXG4gICAgcGFzc1xyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9zdHJlYW1zLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgY29sbGVjdGlvbnNcclxuaW1wb3J0IHdhcm5pbmdzXHJcbmZyb20gdHlwaW5nIGltcG9ydCBBd2FpdGFibGUsIENhbGxhYmxlLCBEZXF1ZSwgR2VuZXJpYywgTGlzdCwgT3B0aW9uYWwsIFR1cGxlLCBUeXBlVmFyXHJcblxyXG5mcm9tIC5iYXNlX3Byb3RvY29sIGltcG9ydCBCYXNlUHJvdG9jb2xcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgQmFzZVRpbWVyQ29udGV4dCwgc2V0X2V4Y2VwdGlvbiwgc2V0X3Jlc3VsdFxyXG5mcm9tIC5sb2cgaW1wb3J0IGludGVybmFsX2xvZ2dlclxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgRmluYWxcclxuXHJcbl9fYWxsX18gPSAoXHJcbiAgICAiRU1QVFlfUEFZTE9BRCIsXHJcbiAgICAiRW9mU3RyZWFtIixcclxuICAgICJTdHJlYW1SZWFkZXIiLFxyXG4gICAgIkRhdGFRdWV1ZSIsXHJcbiAgICAiRmxvd0NvbnRyb2xEYXRhUXVldWUiLFxyXG4pXHJcblxyXG5fVCA9IFR5cGVWYXIoIl9UIilcclxuXHJcblxyXG5jbGFzcyBFb2ZTdHJlYW0oRXhjZXB0aW9uKTpcclxuICAgICIiImVvZiBzdHJlYW0gaW5kaWNhdGlvbi4iIiJcclxuXHJcblxyXG5jbGFzcyBBc3luY1N0cmVhbUl0ZXJhdG9yKEdlbmVyaWNbX1RdKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCByZWFkX2Z1bmM6IENhbGxhYmxlW1tdLCBBd2FpdGFibGVbX1RdXSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLnJlYWRfZnVuYyA9IHJlYWRfZnVuY1xyXG5cclxuICAgIGRlZiBfX2FpdGVyX18oc2VsZikgLT4gIkFzeW5jU3RyZWFtSXRlcmF0b3JbX1RdIjpcclxuICAgICAgICByZXR1cm4gc2VsZlxyXG5cclxuICAgIGFzeW5jIGRlZiBfX2FuZXh0X18oc2VsZikgLT4gX1Q6XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBydiA9IGF3YWl0IHNlbGYucmVhZF9mdW5jKClcclxuICAgICAgICBleGNlcHQgRW9mU3RyZWFtOlxyXG4gICAgICAgICAgICByYWlzZSBTdG9wQXN5bmNJdGVyYXRpb25cclxuICAgICAgICBpZiBydiA9PSBiIiI6XHJcbiAgICAgICAgICAgIHJhaXNlIFN0b3BBc3luY0l0ZXJhdGlvblxyXG4gICAgICAgIHJldHVybiBydlxyXG5cclxuXHJcbmNsYXNzIENodW5rVHVwbGVBc3luY1N0cmVhbUl0ZXJhdG9yOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHN0cmVhbTogIlN0cmVhbVJlYWRlciIpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fc3RyZWFtID0gc3RyZWFtXHJcblxyXG4gICAgZGVmIF9fYWl0ZXJfXyhzZWxmKSAtPiAiQ2h1bmtUdXBsZUFzeW5jU3RyZWFtSXRlcmF0b3IiOlxyXG4gICAgICAgIHJldHVybiBzZWxmXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYW5leHRfXyhzZWxmKSAtPiBUdXBsZVtieXRlcywgYm9vbF06XHJcbiAgICAgICAgcnYgPSBhd2FpdCBzZWxmLl9zdHJlYW0ucmVhZGNodW5rKClcclxuICAgICAgICBpZiBydiA9PSAoYiIiLCBGYWxzZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFN0b3BBc3luY0l0ZXJhdGlvblxyXG4gICAgICAgIHJldHVybiBydlxyXG5cclxuXHJcbmNsYXNzIEFzeW5jU3RyZWFtUmVhZGVyTWl4aW46XHJcbiAgICBkZWYgX19haXRlcl9fKHNlbGYpIC0+IEFzeW5jU3RyZWFtSXRlcmF0b3JbYnl0ZXNdOlxyXG4gICAgICAgIHJldHVybiBBc3luY1N0cmVhbUl0ZXJhdG9yKHNlbGYucmVhZGxpbmUpICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdXHJcblxyXG4gICAgZGVmIGl0ZXJfY2h1bmtlZChzZWxmLCBuOiBpbnQpIC0+IEFzeW5jU3RyZWFtSXRlcmF0b3JbYnl0ZXNdOlxyXG4gICAgICAgICIiIlJldHVybnMgYW4gYXN5bmNocm9ub3VzIGl0ZXJhdG9yIHRoYXQgeWllbGRzIGNodW5rcyBvZiBzaXplIG4uXHJcblxyXG4gICAgICAgIFB5dGhvbi0zLjUgYXZhaWxhYmxlIGZvciBQeXRob24gMy41KyBvbmx5XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIEFzeW5jU3RyZWFtSXRlcmF0b3IoXHJcbiAgICAgICAgICAgIGxhbWJkYTogc2VsZi5yZWFkKG4pICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWQsbm8tYW55LXJldHVybl1cclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGl0ZXJfYW55KHNlbGYpIC0+IEFzeW5jU3RyZWFtSXRlcmF0b3JbYnl0ZXNdOlxyXG4gICAgICAgICIiIllpZWxkIGFsbCBhdmFpbGFibGUgZGF0YSBhcyBzb29uIGFzIGl0IGlzIHJlY2VpdmVkLlxyXG5cclxuICAgICAgICBQeXRob24tMy41IGF2YWlsYWJsZSBmb3IgUHl0aG9uIDMuNSsgb25seVxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBBc3luY1N0cmVhbUl0ZXJhdG9yKHNlbGYucmVhZGFueSkgICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF1cclxuXHJcbiAgICBkZWYgaXRlcl9jaHVua3Moc2VsZikgLT4gQ2h1bmtUdXBsZUFzeW5jU3RyZWFtSXRlcmF0b3I6XHJcbiAgICAgICAgIiIiWWllbGQgY2h1bmtzIG9mIGRhdGEgYXMgdGhleSBhcmUgcmVjZWl2ZWQgYnkgdGhlIHNlcnZlci5cclxuXHJcbiAgICAgICAgVGhlIHlpZWxkZWQgb2JqZWN0cyBhcmUgdHVwbGVzXHJcbiAgICAgICAgb2YgKGJ5dGVzLCBib29sKSBhcyByZXR1cm5lZCBieSB0aGUgU3RyZWFtUmVhZGVyLnJlYWRjaHVuayBtZXRob2QuXHJcblxyXG4gICAgICAgIFB5dGhvbi0zLjUgYXZhaWxhYmxlIGZvciBQeXRob24gMy41KyBvbmx5XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIENodW5rVHVwbGVBc3luY1N0cmVhbUl0ZXJhdG9yKHNlbGYpICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZV1cclxuXHJcblxyXG5jbGFzcyBTdHJlYW1SZWFkZXIoQXN5bmNTdHJlYW1SZWFkZXJNaXhpbik6XHJcbiAgICAiIiJBbiBlbmhhbmNlbWVudCBvZiBhc3luY2lvLlN0cmVhbVJlYWRlci5cclxuXHJcbiAgICBTdXBwb3J0cyBhc3luY2hyb25vdXMgaXRlcmF0aW9uIGJ5IGxpbmUsIGNodW5rIG9yIGFzIGF2YWlsYWJsZTo6XHJcblxyXG4gICAgICAgIGFzeW5jIGZvciBsaW5lIGluIHJlYWRlcjpcclxuICAgICAgICAgICAgLi4uXHJcbiAgICAgICAgYXN5bmMgZm9yIGNodW5rIGluIHJlYWRlci5pdGVyX2NodW5rZWQoMTAyNCk6XHJcbiAgICAgICAgICAgIC4uLlxyXG4gICAgICAgIGFzeW5jIGZvciBzbGljZSBpbiByZWFkZXIuaXRlcl9hbnkoKTpcclxuICAgICAgICAgICAgLi4uXHJcblxyXG4gICAgIiIiXHJcblxyXG4gICAgdG90YWxfYnl0ZXMgPSAwXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcHJvdG9jb2w6IEJhc2VQcm90b2NvbCxcclxuICAgICAgICBsaW1pdDogaW50LFxyXG4gICAgICAgICosXHJcbiAgICAgICAgdGltZXI6IE9wdGlvbmFsW0Jhc2VUaW1lckNvbnRleHRdID0gTm9uZSxcclxuICAgICAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fcHJvdG9jb2wgPSBwcm90b2NvbFxyXG4gICAgICAgIHNlbGYuX2xvd193YXRlciA9IGxpbWl0XHJcbiAgICAgICAgc2VsZi5faGlnaF93YXRlciA9IGxpbWl0ICogMlxyXG4gICAgICAgIGlmIGxvb3AgaXMgTm9uZTpcclxuICAgICAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG4gICAgICAgIHNlbGYuX2xvb3AgPSBsb29wXHJcbiAgICAgICAgc2VsZi5fc2l6ZSA9IDBcclxuICAgICAgICBzZWxmLl9jdXJzb3IgPSAwXHJcbiAgICAgICAgc2VsZi5faHR0cF9jaHVua19zcGxpdHMgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0xpc3RbaW50XV1cclxuICAgICAgICBzZWxmLl9idWZmZXIgPSBjb2xsZWN0aW9ucy5kZXF1ZSgpICAjIHR5cGU6IERlcXVlW2J5dGVzXVxyXG4gICAgICAgIHNlbGYuX2J1ZmZlcl9vZmZzZXQgPSAwXHJcbiAgICAgICAgc2VsZi5fZW9mID0gRmFsc2VcclxuICAgICAgICBzZWxmLl93YWl0ZXIgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2FzeW5jaW8uRnV0dXJlW05vbmVdXVxyXG4gICAgICAgIHNlbGYuX2VvZl93YWl0ZXIgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2FzeW5jaW8uRnV0dXJlW05vbmVdXVxyXG4gICAgICAgIHNlbGYuX2V4Y2VwdGlvbiA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl1cclxuICAgICAgICBzZWxmLl90aW1lciA9IHRpbWVyXHJcbiAgICAgICAgc2VsZi5fZW9mX2NhbGxiYWNrcyA9IFtdICAjIHR5cGU6IExpc3RbQ2FsbGFibGVbW10sIE5vbmVdXVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgaW5mbyA9IFtzZWxmLl9fY2xhc3NfXy5fX25hbWVfX11cclxuICAgICAgICBpZiBzZWxmLl9zaXplOlxyXG4gICAgICAgICAgICBpbmZvLmFwcGVuZCgiJWQgYnl0ZXMiICUgc2VsZi5fc2l6ZSlcclxuICAgICAgICBpZiBzZWxmLl9lb2Y6XHJcbiAgICAgICAgICAgIGluZm8uYXBwZW5kKCJlb2YiKVxyXG4gICAgICAgIGlmIHNlbGYuX2xvd193YXRlciAhPSAyICoqIDE2OiAgIyBkZWZhdWx0IGxpbWl0XHJcbiAgICAgICAgICAgIGluZm8uYXBwZW5kKCJsb3c9JWQgaGlnaD0lZCIgJSAoc2VsZi5fbG93X3dhdGVyLCBzZWxmLl9oaWdoX3dhdGVyKSlcclxuICAgICAgICBpZiBzZWxmLl93YWl0ZXI6XHJcbiAgICAgICAgICAgIGluZm8uYXBwZW5kKCJ3PSVyIiAlIHNlbGYuX3dhaXRlcilcclxuICAgICAgICBpZiBzZWxmLl9leGNlcHRpb246XHJcbiAgICAgICAgICAgIGluZm8uYXBwZW5kKCJlPSVyIiAlIHNlbGYuX2V4Y2VwdGlvbilcclxuICAgICAgICByZXR1cm4gIjwlcz4iICUgIiAiLmpvaW4oaW5mbylcclxuXHJcbiAgICBkZWYgZ2V0X3JlYWRfYnVmZmVyX2xpbWl0cyhzZWxmKSAtPiBUdXBsZVtpbnQsIGludF06XHJcbiAgICAgICAgcmV0dXJuIChzZWxmLl9sb3dfd2F0ZXIsIHNlbGYuX2hpZ2hfd2F0ZXIpXHJcblxyXG4gICAgZGVmIGV4Y2VwdGlvbihzZWxmKSAtPiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZXhjZXB0aW9uXHJcblxyXG4gICAgZGVmIHNldF9leGNlcHRpb24oc2VsZiwgZXhjOiBCYXNlRXhjZXB0aW9uKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2V4Y2VwdGlvbiA9IGV4Y1xyXG4gICAgICAgIHNlbGYuX2VvZl9jYWxsYmFja3MuY2xlYXIoKVxyXG5cclxuICAgICAgICB3YWl0ZXIgPSBzZWxmLl93YWl0ZXJcclxuICAgICAgICBpZiB3YWl0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlciA9IE5vbmVcclxuICAgICAgICAgICAgc2V0X2V4Y2VwdGlvbih3YWl0ZXIsIGV4YylcclxuXHJcbiAgICAgICAgd2FpdGVyID0gc2VsZi5fZW9mX3dhaXRlclxyXG4gICAgICAgIGlmIHdhaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fZW9mX3dhaXRlciA9IE5vbmVcclxuICAgICAgICAgICAgc2V0X2V4Y2VwdGlvbih3YWl0ZXIsIGV4YylcclxuXHJcbiAgICBkZWYgb25fZW9mKHNlbGYsIGNhbGxiYWNrOiBDYWxsYWJsZVtbXSwgTm9uZV0pIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fZW9mOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246XHJcbiAgICAgICAgICAgICAgICBpbnRlcm5hbF9sb2dnZXIuZXhjZXB0aW9uKCJFeGNlcHRpb24gaW4gZW9mIGNhbGxiYWNrIilcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9lb2ZfY2FsbGJhY2tzLmFwcGVuZChjYWxsYmFjaylcclxuXHJcbiAgICBkZWYgZmVlZF9lb2Yoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9lb2YgPSBUcnVlXHJcblxyXG4gICAgICAgIHdhaXRlciA9IHNlbGYuX3dhaXRlclxyXG4gICAgICAgIGlmIHdhaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fd2FpdGVyID0gTm9uZVxyXG4gICAgICAgICAgICBzZXRfcmVzdWx0KHdhaXRlciwgTm9uZSlcclxuXHJcbiAgICAgICAgd2FpdGVyID0gc2VsZi5fZW9mX3dhaXRlclxyXG4gICAgICAgIGlmIHdhaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fZW9mX3dhaXRlciA9IE5vbmVcclxuICAgICAgICAgICAgc2V0X3Jlc3VsdCh3YWl0ZXIsIE5vbmUpXHJcblxyXG4gICAgICAgIGZvciBjYiBpbiBzZWxmLl9lb2ZfY2FsbGJhY2tzOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBjYigpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246XHJcbiAgICAgICAgICAgICAgICBpbnRlcm5hbF9sb2dnZXIuZXhjZXB0aW9uKCJFeGNlcHRpb24gaW4gZW9mIGNhbGxiYWNrIilcclxuXHJcbiAgICAgICAgc2VsZi5fZW9mX2NhbGxiYWNrcy5jbGVhcigpXHJcblxyXG4gICAgZGVmIGlzX2VvZihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIlJldHVybiBUcnVlIGlmICBcJ2ZlZWRfZW9mXCcgd2FzIGNhbGxlZC4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fZW9mXHJcblxyXG4gICAgZGVmIGF0X2VvZihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIlJldHVybiBUcnVlIGlmIHRoZSBidWZmZXIgaXMgZW1wdHkgYW5kIFwnZmVlZF9lb2ZcJyB3YXMgY2FsbGVkLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9lb2YgYW5kIG5vdCBzZWxmLl9idWZmZXJcclxuXHJcbiAgICBhc3luYyBkZWYgd2FpdF9lb2Yoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9lb2Y6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBhc3NlcnQgc2VsZi5fZW9mX3dhaXRlciBpcyBOb25lXHJcbiAgICAgICAgc2VsZi5fZW9mX3dhaXRlciA9IHNlbGYuX2xvb3AuY3JlYXRlX2Z1dHVyZSgpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9lb2Zfd2FpdGVyXHJcbiAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgc2VsZi5fZW9mX3dhaXRlciA9IE5vbmVcclxuXHJcbiAgICBkZWYgdW5yZWFkX2RhdGEoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIicm9sbGJhY2sgcmVhZGluZyBzb21lIGRhdGEgZnJvbSBzdHJlYW0sIGluc2VydGluZyBpdCB0byBidWZmZXIgaGVhZC4iIiJcclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAidW5yZWFkX2RhdGEoKSBpcyBkZXByZWNhdGVkICJcclxuICAgICAgICAgICAgImFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gZnV0dXJlIHJlbGVhc2VzICgjMzI2MCkiLFxyXG4gICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgIHN0YWNrbGV2ZWw9MixcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgbm90IGRhdGE6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBpZiBzZWxmLl9idWZmZXJfb2Zmc2V0OlxyXG4gICAgICAgICAgICBzZWxmLl9idWZmZXJbMF0gPSBzZWxmLl9idWZmZXJbMF1bc2VsZi5fYnVmZmVyX29mZnNldCA6XVxyXG4gICAgICAgICAgICBzZWxmLl9idWZmZXJfb2Zmc2V0ID0gMFxyXG4gICAgICAgIHNlbGYuX3NpemUgKz0gbGVuKGRhdGEpXHJcbiAgICAgICAgc2VsZi5fY3Vyc29yIC09IGxlbihkYXRhKVxyXG4gICAgICAgIHNlbGYuX2J1ZmZlci5hcHBlbmRsZWZ0KGRhdGEpXHJcbiAgICAgICAgc2VsZi5fZW9mX2NvdW50ZXIgPSAwXHJcblxyXG4gICAgIyBUT0RPOiBzaXplIGlzIGlnbm9yZWQsIHJlbW92ZSB0aGUgcGFyYW0gbGF0ZXJcclxuICAgIGRlZiBmZWVkX2RhdGEoc2VsZiwgZGF0YTogYnl0ZXMsIHNpemU6IGludCA9IDApIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IG5vdCBzZWxmLl9lb2YsICJmZWVkX2RhdGEgYWZ0ZXIgZmVlZF9lb2YiXHJcblxyXG4gICAgICAgIGlmIG5vdCBkYXRhOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgc2VsZi5fc2l6ZSArPSBsZW4oZGF0YSlcclxuICAgICAgICBzZWxmLl9idWZmZXIuYXBwZW5kKGRhdGEpXHJcbiAgICAgICAgc2VsZi50b3RhbF9ieXRlcyArPSBsZW4oZGF0YSlcclxuXHJcbiAgICAgICAgd2FpdGVyID0gc2VsZi5fd2FpdGVyXHJcbiAgICAgICAgaWYgd2FpdGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl93YWl0ZXIgPSBOb25lXHJcbiAgICAgICAgICAgIHNldF9yZXN1bHQod2FpdGVyLCBOb25lKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9zaXplID4gc2VsZi5faGlnaF93YXRlciBhbmQgbm90IHNlbGYuX3Byb3RvY29sLl9yZWFkaW5nX3BhdXNlZDpcclxuICAgICAgICAgICAgc2VsZi5fcHJvdG9jb2wucGF1c2VfcmVhZGluZygpXHJcblxyXG4gICAgZGVmIGJlZ2luX2h0dHBfY2h1bmtfcmVjZWl2aW5nKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5faHR0cF9jaHVua19zcGxpdHMgaXMgTm9uZTpcclxuICAgICAgICAgICAgaWYgc2VsZi50b3RhbF9ieXRlczpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiQ2FsbGVkIGJlZ2luX2h0dHBfY2h1bmtfcmVjZWl2aW5nIHdoZW4iICJzb21lIGRhdGEgd2FzIGFscmVhZHkgZmVkIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBzZWxmLl9odHRwX2NodW5rX3NwbGl0cyA9IFtdXHJcblxyXG4gICAgZGVmIGVuZF9odHRwX2NodW5rX3JlY2VpdmluZyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2h0dHBfY2h1bmtfc3BsaXRzIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJDYWxsZWQgZW5kX2NodW5rX3JlY2VpdmluZyB3aXRob3V0IGNhbGxpbmcgIlxyXG4gICAgICAgICAgICAgICAgImJlZ2luX2NodW5rX3JlY2VpdmluZyBmaXJzdCJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAjIHNlbGYuX2h0dHBfY2h1bmtfc3BsaXRzIGNvbnRhaW5zIGxvZ2ljYWwgYnl0ZSBvZmZzZXRzIGZyb20gc3RhcnQgb2ZcclxuICAgICAgICAjIHRoZSBib2R5IHRyYW5zZmVyLiBFYWNoIG9mZnNldCBpcyB0aGUgb2Zmc2V0IG9mIHRoZSBlbmQgb2YgYSBjaHVuay5cclxuICAgICAgICAjICJMb2dpY2FsIiBtZWFucyBieXRlcywgYWNjZXNzaWJsZSBmb3IgYSB1c2VyLlxyXG4gICAgICAgICMgSWYgbm8gY2h1bmtzIGNvbnRhaW5pZyBsb2dpY2FsIGRhdGEgd2VyZSByZWNlaXZlZCwgY3VycmVudCBwb3NpdGlvblxyXG4gICAgICAgICMgaXMgZGlmaW5pdGVseSB6ZXJvLlxyXG4gICAgICAgIHBvcyA9IHNlbGYuX2h0dHBfY2h1bmtfc3BsaXRzWy0xXSBpZiBzZWxmLl9odHRwX2NodW5rX3NwbGl0cyBlbHNlIDBcclxuXHJcbiAgICAgICAgaWYgc2VsZi50b3RhbF9ieXRlcyA9PSBwb3M6XHJcbiAgICAgICAgICAgICMgV2Ugc2hvdWxkIG5vdCBhZGQgZW1wdHkgY2h1bmtzIGhlcmUuIFNvIHdlIGNoZWNrIGZvciB0aGF0LlxyXG4gICAgICAgICAgICAjIE5vdGUsIHdoZW4gY2h1bmtlZCArIGd6aXAgaXMgdXNlZCwgd2UgY2FuIHJlY2VpdmUgYSBjaHVua1xyXG4gICAgICAgICAgICAjIG9mIGNvbXByZXNzZWQgZGF0YSwgYnV0IHRoYXQgZGF0YSBtYXkgbm90IGJlIGVub3VnaCBmb3IgZ3ppcCBGU01cclxuICAgICAgICAgICAgIyB0byB5aWVsZCBhbnkgdW5jb21wcmVzc2VkIGRhdGEuIFRoYXRcJ3Mgd2h5IGN1cnJlbnQgcG9zaXRpb24gbWF5XHJcbiAgICAgICAgICAgICMgbm90IGNoYW5nZSBhZnRlciByZWNlaXZpbmcgYSBjaHVuay5cclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHNlbGYuX2h0dHBfY2h1bmtfc3BsaXRzLmFwcGVuZChzZWxmLnRvdGFsX2J5dGVzKVxyXG5cclxuICAgICAgICAjIHdha2UgdXAgcmVhZGNodW5rIHdoZW4gZW5kIG9mIGh0dHAgY2h1bmsgcmVjZWl2ZWRcclxuICAgICAgICB3YWl0ZXIgPSBzZWxmLl93YWl0ZXJcclxuICAgICAgICBpZiB3YWl0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlciA9IE5vbmVcclxuICAgICAgICAgICAgc2V0X3Jlc3VsdCh3YWl0ZXIsIE5vbmUpXHJcblxyXG4gICAgYXN5bmMgZGVmIF93YWl0KHNlbGYsIGZ1bmNfbmFtZTogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgICMgU3RyZWFtUmVhZGVyIHVzZXMgYSBmdXR1cmUgdG8gbGluayB0aGUgcHJvdG9jb2wgZmVlZF9kYXRhKCkgbWV0aG9kXHJcbiAgICAgICAgIyB0byBhIHJlYWQgY29yb3V0aW5lLiBSdW5uaW5nIHR3byByZWFkIGNvcm91dGluZXMgYXQgdGhlIHNhbWUgdGltZVxyXG4gICAgICAgICMgd291bGQgaGF2ZSBhbiB1bmV4cGVjdGVkIGJlaGF2aW91ci4gSXQgd291bGQgbm90IHBvc3NpYmxlIHRvIGtub3dcclxuICAgICAgICAjIHdoaWNoIGNvcm91dGluZSB3b3VsZCBnZXQgdGhlIG5leHQgZGF0YS5cclxuICAgICAgICBpZiBzZWxmLl93YWl0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICIlcygpIGNhbGxlZCB3aGlsZSBhbm90aGVyIGNvcm91dGluZSBpcyAiXHJcbiAgICAgICAgICAgICAgICAiYWxyZWFkeSB3YWl0aW5nIGZvciBpbmNvbWluZyBkYXRhIiAlIGZ1bmNfbmFtZVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHdhaXRlciA9IHNlbGYuX3dhaXRlciA9IHNlbGYuX2xvb3AuY3JlYXRlX2Z1dHVyZSgpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBpZiBzZWxmLl90aW1lcjpcclxuICAgICAgICAgICAgICAgIHdpdGggc2VsZi5fdGltZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2FpdGVyXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB3YWl0ZXJcclxuICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICBzZWxmLl93YWl0ZXIgPSBOb25lXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWRsaW5lKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLnJlYWR1bnRpbCgpXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWR1bnRpbChzZWxmLCBzZXBhcmF0b3I6IGJ5dGVzID0gYiJcXG4iKSAtPiBieXRlczpcclxuICAgICAgICBzZXBsZW4gPSBsZW4oc2VwYXJhdG9yKVxyXG4gICAgICAgIGlmIHNlcGxlbiA9PSAwOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJTZXBhcmF0b3Igc2hvdWxkIGJlIGF0IGxlYXN0IG9uZS1ieXRlIHN0cmluZyIpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2V4Y2VwdGlvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2Ugc2VsZi5fZXhjZXB0aW9uXHJcblxyXG4gICAgICAgIGNodW5rID0gYiIiXHJcbiAgICAgICAgY2h1bmtfc2l6ZSA9IDBcclxuICAgICAgICBub3RfZW5vdWdoID0gVHJ1ZVxyXG5cclxuICAgICAgICB3aGlsZSBub3RfZW5vdWdoOlxyXG4gICAgICAgICAgICB3aGlsZSBzZWxmLl9idWZmZXIgYW5kIG5vdF9lbm91Z2g6XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBzZWxmLl9idWZmZXJfb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICBpY2hhciA9IHNlbGYuX2J1ZmZlclswXS5maW5kKHNlcGFyYXRvciwgb2Zmc2V0KSArIDFcclxuICAgICAgICAgICAgICAgICMgUmVhZCBmcm9tIGN1cnJlbnQgb2Zmc2V0IHRvIGZvdW5kIHNlcGFyYXRvciBvciB0byB0aGUgZW5kLlxyXG4gICAgICAgICAgICAgICAgZGF0YSA9IHNlbGYuX3JlYWRfbm93YWl0X2NodW5rKGljaGFyIC0gb2Zmc2V0IGlmIGljaGFyIGVsc2UgLTEpXHJcbiAgICAgICAgICAgICAgICBjaHVuayArPSBkYXRhXHJcbiAgICAgICAgICAgICAgICBjaHVua19zaXplICs9IGxlbihkYXRhKVxyXG4gICAgICAgICAgICAgICAgaWYgaWNoYXI6XHJcbiAgICAgICAgICAgICAgICAgICAgbm90X2Vub3VnaCA9IEZhbHNlXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgY2h1bmtfc2l6ZSA+IHNlbGYuX2hpZ2hfd2F0ZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQ2h1bmsgdG9vIGJpZyIpXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLl9lb2Y6XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgaWYgbm90X2Vub3VnaDpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dhaXQoInJlYWR1bnRpbCIpXHJcblxyXG4gICAgICAgIHJldHVybiBjaHVua1xyXG5cclxuICAgIGFzeW5jIGRlZiByZWFkKHNlbGYsIG46IGludCA9IC0xKSAtPiBieXRlczpcclxuICAgICAgICBpZiBzZWxmLl9leGNlcHRpb24gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIHNlbGYuX2V4Y2VwdGlvblxyXG5cclxuICAgICAgICAjIG1pZ3JhdGlvbiBwcm9ibGVtOyB3aXRoIERhdGFRdWV1ZSB5b3UgaGF2ZSB0byBjYXRjaFxyXG4gICAgICAgICMgRW9mU3RyZWFtIGV4Y2VwdGlvbiwgc28gY29tbW9uIHdheSBpcyB0byBydW4gcGF5bG9hZC5yZWFkKCkgaW5zaWRlXHJcbiAgICAgICAgIyBpbmZpbml0ZSBsb29wLiB3aGF0IGNhbiBjYXVzZSByZWFsIGluZmluaXRlIGxvb3Agd2l0aCBTdHJlYW1SZWFkZXJcclxuICAgICAgICAjIGxldHMga2VlcCB0aGlzIGNvZGUgb25lIG1ham9yIHJlbGVhc2UuXHJcbiAgICAgICAgaWYgX19kZWJ1Z19fOlxyXG4gICAgICAgICAgICBpZiBzZWxmLl9lb2YgYW5kIG5vdCBzZWxmLl9idWZmZXI6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9lb2ZfY291bnRlciA9IGdldGF0dHIoc2VsZiwgIl9lb2ZfY291bnRlciIsIDApICsgMVxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fZW9mX2NvdW50ZXIgPiA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGludGVybmFsX2xvZ2dlci53YXJuaW5nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiTXVsdGlwbGUgYWNjZXNzIHRvIFN0cmVhbVJlYWRlciBpbiBlb2Ygc3RhdGUsICJcclxuICAgICAgICAgICAgICAgICAgICAgICAgIm1pZ2h0IGJlIGluZmluaXRlIGxvb3AuIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tfaW5mbz1UcnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgbm90IG46XHJcbiAgICAgICAgICAgIHJldHVybiBiIiJcclxuXHJcbiAgICAgICAgaWYgbiA8IDA6XHJcbiAgICAgICAgICAgICMgVGhpcyB1c2VkIHRvIGp1c3QgbG9vcCBjcmVhdGluZyBhIG5ldyB3YWl0ZXIgaG9waW5nIHRvXHJcbiAgICAgICAgICAgICMgY29sbGVjdCBldmVyeXRoaW5nIGluIHNlbGYuX2J1ZmZlciwgYnV0IHRoYXQgd291bGRcclxuICAgICAgICAgICAgIyBkZWFkbG9jayBpZiB0aGUgc3VicHJvY2VzcyBzZW5kcyBtb3JlIHRoYW4gc2VsZi5saW1pdFxyXG4gICAgICAgICAgICAjIGJ5dGVzLiAgU28ganVzdCBjYWxsIHNlbGYucmVhZGFueSgpIHVudGlsIEVPRi5cclxuICAgICAgICAgICAgYmxvY2tzID0gW11cclxuICAgICAgICAgICAgd2hpbGUgVHJ1ZTpcclxuICAgICAgICAgICAgICAgIGJsb2NrID0gYXdhaXQgc2VsZi5yZWFkYW55KClcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBibG9jazpcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgYmxvY2tzLmFwcGVuZChibG9jaylcclxuICAgICAgICAgICAgcmV0dXJuIGIiIi5qb2luKGJsb2NrcylcclxuXHJcbiAgICAgICAgIyBUT0RPOiBzaG91bGQgYmUgYGlmYCBpbnN0ZWFkIG9mIGB3aGlsZWBcclxuICAgICAgICAjIGJlY2F1c2Ugd2FpdGVyIG1heWJlIHRyaWdnZXJlZCBvbiBjaHVuayBlbmQsXHJcbiAgICAgICAgIyB3aXRob3V0IGZlZWRpbmcgYW55IGRhdGFcclxuICAgICAgICB3aGlsZSBub3Qgc2VsZi5fYnVmZmVyIGFuZCBub3Qgc2VsZi5fZW9mOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl93YWl0KCJyZWFkIilcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWRfbm93YWl0KG4pXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWRhbnkoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgc2VsZi5fZXhjZXB0aW9uIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBzZWxmLl9leGNlcHRpb25cclxuXHJcbiAgICAgICAgIyBUT0RPOiBzaG91bGQgYmUgYGlmYCBpbnN0ZWFkIG9mIGB3aGlsZWBcclxuICAgICAgICAjIGJlY2F1c2Ugd2FpdGVyIG1heWJlIHRyaWdnZXJlZCBvbiBjaHVuayBlbmQsXHJcbiAgICAgICAgIyB3aXRob3V0IGZlZWRpbmcgYW55IGRhdGFcclxuICAgICAgICB3aGlsZSBub3Qgc2VsZi5fYnVmZmVyIGFuZCBub3Qgc2VsZi5fZW9mOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl93YWl0KCJyZWFkYW55IilcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWRfbm93YWl0KC0xKVxyXG5cclxuICAgIGFzeW5jIGRlZiByZWFkY2h1bmsoc2VsZikgLT4gVHVwbGVbYnl0ZXMsIGJvb2xdOlxyXG4gICAgICAgICIiIlJldHVybnMgYSB0dXBsZSBvZiAoZGF0YSwgZW5kX29mX2h0dHBfY2h1bmspLlxyXG5cclxuICAgICAgICBXaGVuIGNodW5rZWQgdHJhbnNmZXJcclxuICAgICAgICBlbmNvZGluZyBpcyB1c2VkLCBlbmRfb2ZfaHR0cF9jaHVuayBpcyBhIGJvb2xlYW4gaW5kaWNhdGluZyBpZiB0aGUgZW5kXHJcbiAgICAgICAgb2YgdGhlIGRhdGEgY29ycmVzcG9uZHMgdG8gdGhlIGVuZCBvZiBhIEhUVFAgY2h1bmsgLCBvdGhlcndpc2UgaXQgaXNcclxuICAgICAgICBhbHdheXMgRmFsc2UuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgd2hpbGUgVHJ1ZTpcclxuICAgICAgICAgICAgaWYgc2VsZi5fZXhjZXB0aW9uIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgcmFpc2Ugc2VsZi5fZXhjZXB0aW9uXHJcblxyXG4gICAgICAgICAgICB3aGlsZSBzZWxmLl9odHRwX2NodW5rX3NwbGl0czpcclxuICAgICAgICAgICAgICAgIHBvcyA9IHNlbGYuX2h0dHBfY2h1bmtfc3BsaXRzLnBvcCgwKVxyXG4gICAgICAgICAgICAgICAgaWYgcG9zID09IHNlbGYuX2N1cnNvcjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGIiIiwgVHJ1ZSlcclxuICAgICAgICAgICAgICAgIGlmIHBvcyA+IHNlbGYuX2N1cnNvcjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHNlbGYuX3JlYWRfbm93YWl0KHBvcyAtIHNlbGYuX2N1cnNvciksIFRydWUpXHJcbiAgICAgICAgICAgICAgICBpbnRlcm5hbF9sb2dnZXIud2FybmluZyhcclxuICAgICAgICAgICAgICAgICAgICAiU2tpcHBpbmcgSFRUUCBjaHVuayBlbmQgZHVlIHRvIGRhdGEgIlxyXG4gICAgICAgICAgICAgICAgICAgICJjb25zdW1wdGlvbiBiZXlvbmQgY2h1bmsgYm91bmRhcnkiXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLl9idWZmZXI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNlbGYuX3JlYWRfbm93YWl0X2NodW5rKC0xKSwgRmFsc2UpXHJcbiAgICAgICAgICAgICAgICAjIHJldHVybiAoc2VsZi5fcmVhZF9ub3dhaXQoLTEpLCBGYWxzZSlcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2VvZjpcclxuICAgICAgICAgICAgICAgICMgU3BlY2lhbCBjYXNlIGZvciBzaWduaWZ5aW5nIEVPRi5cclxuICAgICAgICAgICAgICAgICMgKGJcJ1wnLCBUcnVlKSBpcyBub3QgYSBmaW5hbCByZXR1cm4gdmFsdWUgYWN0dWFsbHkuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGIiIiwgRmFsc2UpXHJcblxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl93YWl0KCJyZWFkY2h1bmsiKVxyXG5cclxuICAgIGFzeW5jIGRlZiByZWFkZXhhY3RseShzZWxmLCBuOiBpbnQpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIHNlbGYuX2V4Y2VwdGlvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2Ugc2VsZi5fZXhjZXB0aW9uXHJcblxyXG4gICAgICAgIGJsb2NrcyA9IFtdICAjIHR5cGU6IExpc3RbYnl0ZXNdXHJcbiAgICAgICAgd2hpbGUgbiA+IDA6XHJcbiAgICAgICAgICAgIGJsb2NrID0gYXdhaXQgc2VsZi5yZWFkKG4pXHJcbiAgICAgICAgICAgIGlmIG5vdCBibG9jazpcclxuICAgICAgICAgICAgICAgIHBhcnRpYWwgPSBiIiIuam9pbihibG9ja3MpXHJcbiAgICAgICAgICAgICAgICByYWlzZSBhc3luY2lvLkluY29tcGxldGVSZWFkRXJyb3IocGFydGlhbCwgbGVuKHBhcnRpYWwpICsgbilcclxuICAgICAgICAgICAgYmxvY2tzLmFwcGVuZChibG9jaylcclxuICAgICAgICAgICAgbiAtPSBsZW4oYmxvY2spXHJcblxyXG4gICAgICAgIHJldHVybiBiIiIuam9pbihibG9ja3MpXHJcblxyXG4gICAgZGVmIHJlYWRfbm93YWl0KHNlbGYsIG46IGludCA9IC0xKSAtPiBieXRlczpcclxuICAgICAgICAjIGRlZmF1bHQgd2FzIGNoYW5nZWQgdG8gYmUgY29uc2lzdGVudCB3aXRoIC5yZWFkKC0xKVxyXG4gICAgICAgICNcclxuICAgICAgICAjIEkgYmVsaWV2ZSB0aGUgbW9zdCB1c2VycyBkb25cJ3Qga25vdyBhYm91dCB0aGUgbWV0aG9kIGFuZFxyXG4gICAgICAgICMgdGhleSBhcmUgbm90IGFmZmVjdGVkLlxyXG4gICAgICAgIGlmIHNlbGYuX2V4Y2VwdGlvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2Ugc2VsZi5fZXhjZXB0aW9uXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX3dhaXRlciBhbmQgbm90IHNlbGYuX3dhaXRlci5kb25lKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJDYWxsZWQgd2hpbGUgc29tZSBjb3JvdXRpbmUgaXMgd2FpdGluZyBmb3IgaW5jb21pbmcgZGF0YS4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWRfbm93YWl0KG4pXHJcblxyXG4gICAgZGVmIF9yZWFkX25vd2FpdF9jaHVuayhzZWxmLCBuOiBpbnQpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGZpcnN0X2J1ZmZlciA9IHNlbGYuX2J1ZmZlclswXVxyXG4gICAgICAgIG9mZnNldCA9IHNlbGYuX2J1ZmZlcl9vZmZzZXRcclxuICAgICAgICBpZiBuICE9IC0xIGFuZCBsZW4oZmlyc3RfYnVmZmVyKSAtIG9mZnNldCA+IG46XHJcbiAgICAgICAgICAgIGRhdGEgPSBmaXJzdF9idWZmZXJbb2Zmc2V0IDogb2Zmc2V0ICsgbl1cclxuICAgICAgICAgICAgc2VsZi5fYnVmZmVyX29mZnNldCArPSBuXHJcblxyXG4gICAgICAgIGVsaWYgb2Zmc2V0OlxyXG4gICAgICAgICAgICBzZWxmLl9idWZmZXIucG9wbGVmdCgpXHJcbiAgICAgICAgICAgIGRhdGEgPSBmaXJzdF9idWZmZXJbb2Zmc2V0Ol1cclxuICAgICAgICAgICAgc2VsZi5fYnVmZmVyX29mZnNldCA9IDBcclxuXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgZGF0YSA9IHNlbGYuX2J1ZmZlci5wb3BsZWZ0KClcclxuXHJcbiAgICAgICAgc2VsZi5fc2l6ZSAtPSBsZW4oZGF0YSlcclxuICAgICAgICBzZWxmLl9jdXJzb3IgKz0gbGVuKGRhdGEpXHJcblxyXG4gICAgICAgIGNodW5rX3NwbGl0cyA9IHNlbGYuX2h0dHBfY2h1bmtfc3BsaXRzXHJcbiAgICAgICAgIyBQcmV2ZW50IG1lbW9yeSBsZWFrOiBkcm9wIHVzZWxlc3MgY2h1bmsgc3BsaXRzXHJcbiAgICAgICAgd2hpbGUgY2h1bmtfc3BsaXRzIGFuZCBjaHVua19zcGxpdHNbMF0gPCBzZWxmLl9jdXJzb3I6XHJcbiAgICAgICAgICAgIGNodW5rX3NwbGl0cy5wb3AoMClcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fc2l6ZSA8IHNlbGYuX2xvd193YXRlciBhbmQgc2VsZi5fcHJvdG9jb2wuX3JlYWRpbmdfcGF1c2VkOlxyXG4gICAgICAgICAgICBzZWxmLl9wcm90b2NvbC5yZXN1bWVfcmVhZGluZygpXHJcbiAgICAgICAgcmV0dXJuIGRhdGFcclxuXHJcbiAgICBkZWYgX3JlYWRfbm93YWl0KHNlbGYsIG46IGludCkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiUmVhZCBub3QgbW9yZSB0aGFuIG4gYnl0ZXMsIG9yIHdob2xlIGJ1ZmZlciBpZiBuID09IC0xIiIiXHJcbiAgICAgICAgY2h1bmtzID0gW11cclxuXHJcbiAgICAgICAgd2hpbGUgc2VsZi5fYnVmZmVyOlxyXG4gICAgICAgICAgICBjaHVuayA9IHNlbGYuX3JlYWRfbm93YWl0X2NodW5rKG4pXHJcbiAgICAgICAgICAgIGNodW5rcy5hcHBlbmQoY2h1bmspXHJcbiAgICAgICAgICAgIGlmIG4gIT0gLTE6XHJcbiAgICAgICAgICAgICAgICBuIC09IGxlbihjaHVuaylcclxuICAgICAgICAgICAgICAgIGlmIG4gPT0gMDpcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICByZXR1cm4gYiIiLmpvaW4oY2h1bmtzKSBpZiBjaHVua3MgZWxzZSBiIiJcclxuXHJcblxyXG5jbGFzcyBFbXB0eVN0cmVhbVJlYWRlcihTdHJlYW1SZWFkZXIpOiAgIyBsZ3RtIFtweS9taXNzaW5nLWNhbGwtdG8taW5pdF1cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHBhc3NcclxuXHJcbiAgICBkZWYgZXhjZXB0aW9uKHNlbGYpIC0+IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dOlxyXG4gICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgZGVmIHNldF9leGNlcHRpb24oc2VsZiwgZXhjOiBCYXNlRXhjZXB0aW9uKSAtPiBOb25lOlxyXG4gICAgICAgIHBhc3NcclxuXHJcbiAgICBkZWYgb25fZW9mKHNlbGYsIGNhbGxiYWNrOiBDYWxsYWJsZVtbXSwgTm9uZV0pIC0+IE5vbmU6XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBjYWxsYmFjaygpXHJcbiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgaW50ZXJuYWxfbG9nZ2VyLmV4Y2VwdGlvbigiRXhjZXB0aW9uIGluIGVvZiBjYWxsYmFjayIpXHJcblxyXG4gICAgZGVmIGZlZWRfZW9mKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcGFzc1xyXG5cclxuICAgIGRlZiBpc19lb2Yoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgIGRlZiBhdF9lb2Yoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgIGFzeW5jIGRlZiB3YWl0X2VvZihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVyblxyXG5cclxuICAgIGRlZiBmZWVkX2RhdGEoc2VsZiwgZGF0YTogYnl0ZXMsIG46IGludCA9IDApIC0+IE5vbmU6XHJcbiAgICAgICAgcGFzc1xyXG5cclxuICAgIGFzeW5jIGRlZiByZWFkbGluZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gYiIiXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWQoc2VsZiwgbjogaW50ID0gLTEpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBiIiJcclxuXHJcbiAgICAjIFRPRE8gYWRkIGFzeW5jIGRlZiByZWFkdW50aWxcclxuXHJcbiAgICBhc3luYyBkZWYgcmVhZGFueShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gYiIiXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWRjaHVuayhzZWxmKSAtPiBUdXBsZVtieXRlcywgYm9vbF06XHJcbiAgICAgICAgcmV0dXJuIChiIiIsIFRydWUpXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWRleGFjdGx5KHNlbGYsIG46IGludCkgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmFpc2UgYXN5bmNpby5JbmNvbXBsZXRlUmVhZEVycm9yKGIiIiwgbilcclxuXHJcbiAgICBkZWYgcmVhZF9ub3dhaXQoc2VsZiwgbjogaW50ID0gLTEpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBiIiJcclxuXHJcblxyXG5FTVBUWV9QQVlMT0FEOiBGaW5hbFtTdHJlYW1SZWFkZXJdID0gRW1wdHlTdHJlYW1SZWFkZXIoKVxyXG5cclxuXHJcbmNsYXNzIERhdGFRdWV1ZShHZW5lcmljW19UXSk6XHJcbiAgICAiIiJEYXRhUXVldWUgaXMgYSBnZW5lcmFsLXB1cnBvc2UgYmxvY2tpbmcgcXVldWUgd2l0aCBvbmUgcmVhZGVyLiIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsb29wOiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2xvb3AgPSBsb29wXHJcbiAgICAgICAgc2VsZi5fZW9mID0gRmFsc2VcclxuICAgICAgICBzZWxmLl93YWl0ZXIgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2FzeW5jaW8uRnV0dXJlW05vbmVdXVxyXG4gICAgICAgIHNlbGYuX2V4Y2VwdGlvbiA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl1cclxuICAgICAgICBzZWxmLl9zaXplID0gMFxyXG4gICAgICAgIHNlbGYuX2J1ZmZlciA9IGNvbGxlY3Rpb25zLmRlcXVlKCkgICMgdHlwZTogRGVxdWVbVHVwbGVbX1QsIGludF1dXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5fYnVmZmVyKVxyXG5cclxuICAgIGRlZiBpc19lb2Yoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZW9mXHJcblxyXG4gICAgZGVmIGF0X2VvZihzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9lb2YgYW5kIG5vdCBzZWxmLl9idWZmZXJcclxuXHJcbiAgICBkZWYgZXhjZXB0aW9uKHNlbGYpIC0+IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9leGNlcHRpb25cclxuXHJcbiAgICBkZWYgc2V0X2V4Y2VwdGlvbihzZWxmLCBleGM6IEJhc2VFeGNlcHRpb24pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZW9mID0gVHJ1ZVxyXG4gICAgICAgIHNlbGYuX2V4Y2VwdGlvbiA9IGV4Y1xyXG5cclxuICAgICAgICB3YWl0ZXIgPSBzZWxmLl93YWl0ZXJcclxuICAgICAgICBpZiB3YWl0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlciA9IE5vbmVcclxuICAgICAgICAgICAgc2V0X2V4Y2VwdGlvbih3YWl0ZXIsIGV4YylcclxuXHJcbiAgICBkZWYgZmVlZF9kYXRhKHNlbGYsIGRhdGE6IF9ULCBzaXplOiBpbnQgPSAwKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3NpemUgKz0gc2l6ZVxyXG4gICAgICAgIHNlbGYuX2J1ZmZlci5hcHBlbmQoKGRhdGEsIHNpemUpKVxyXG5cclxuICAgICAgICB3YWl0ZXIgPSBzZWxmLl93YWl0ZXJcclxuICAgICAgICBpZiB3YWl0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlciA9IE5vbmVcclxuICAgICAgICAgICAgc2V0X3Jlc3VsdCh3YWl0ZXIsIE5vbmUpXHJcblxyXG4gICAgZGVmIGZlZWRfZW9mKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZW9mID0gVHJ1ZVxyXG5cclxuICAgICAgICB3YWl0ZXIgPSBzZWxmLl93YWl0ZXJcclxuICAgICAgICBpZiB3YWl0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlciA9IE5vbmVcclxuICAgICAgICAgICAgc2V0X3Jlc3VsdCh3YWl0ZXIsIE5vbmUpXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWQoc2VsZikgLT4gX1Q6XHJcbiAgICAgICAgaWYgbm90IHNlbGYuX2J1ZmZlciBhbmQgbm90IHNlbGYuX2VvZjpcclxuICAgICAgICAgICAgYXNzZXJ0IG5vdCBzZWxmLl93YWl0ZXJcclxuICAgICAgICAgICAgc2VsZi5fd2FpdGVyID0gc2VsZi5fbG9vcC5jcmVhdGVfZnV0dXJlKClcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5fd2FpdGVyXHJcbiAgICAgICAgICAgIGV4Y2VwdCAoYXN5bmNpby5DYW5jZWxsZWRFcnJvciwgYXN5bmNpby5UaW1lb3V0RXJyb3IpOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fd2FpdGVyID0gTm9uZVxyXG4gICAgICAgICAgICAgICAgcmFpc2VcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fYnVmZmVyOlxyXG4gICAgICAgICAgICBkYXRhLCBzaXplID0gc2VsZi5fYnVmZmVyLnBvcGxlZnQoKVxyXG4gICAgICAgICAgICBzZWxmLl9zaXplIC09IHNpemVcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGFcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBpZiBzZWxmLl9leGNlcHRpb24gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBzZWxmLl9leGNlcHRpb25cclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIEVvZlN0cmVhbVxyXG5cclxuICAgIGRlZiBfX2FpdGVyX18oc2VsZikgLT4gQXN5bmNTdHJlYW1JdGVyYXRvcltfVF06XHJcbiAgICAgICAgcmV0dXJuIEFzeW5jU3RyZWFtSXRlcmF0b3Ioc2VsZi5yZWFkKVxyXG5cclxuXHJcbmNsYXNzIEZsb3dDb250cm9sRGF0YVF1ZXVlKERhdGFRdWV1ZVtfVF0pOlxyXG4gICAgIiIiRmxvd0NvbnRyb2xEYXRhUXVldWUgcmVzdW1lcyBhbmQgcGF1c2VzIGFuIHVuZGVybHlpbmcgc3RyZWFtLlxyXG5cclxuICAgIEl0IGlzIGEgZGVzdGluYXRpb24gZm9yIHBhcnNlZCBkYXRhLlxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIHByb3RvY29sOiBCYXNlUHJvdG9jb2wsIGxpbWl0OiBpbnQsICosIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKGxvb3A9bG9vcClcclxuXHJcbiAgICAgICAgc2VsZi5fcHJvdG9jb2wgPSBwcm90b2NvbFxyXG4gICAgICAgIHNlbGYuX2xpbWl0ID0gbGltaXQgKiAyXHJcblxyXG4gICAgZGVmIGZlZWRfZGF0YShzZWxmLCBkYXRhOiBfVCwgc2l6ZTogaW50ID0gMCkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLmZlZWRfZGF0YShkYXRhLCBzaXplKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9zaXplID4gc2VsZi5fbGltaXQgYW5kIG5vdCBzZWxmLl9wcm90b2NvbC5fcmVhZGluZ19wYXVzZWQ6XHJcbiAgICAgICAgICAgIHNlbGYuX3Byb3RvY29sLnBhdXNlX3JlYWRpbmcoKVxyXG5cclxuICAgIGFzeW5jIGRlZiByZWFkKHNlbGYpIC0+IF9UOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHN1cGVyKCkucmVhZCgpXHJcbiAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgaWYgc2VsZi5fc2l6ZSA8IHNlbGYuX2xpbWl0IGFuZCBzZWxmLl9wcm90b2NvbC5fcmVhZGluZ19wYXVzZWQ6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9wcm90b2NvbC5yZXN1bWVfcmVhZGluZygpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3dlYl9sb2cucHknLCBiJ2ltcG9ydCBkYXRldGltZVxyXG5pbXBvcnQgZnVuY3Rvb2xzXHJcbmltcG9ydCBsb2dnaW5nXHJcbmltcG9ydCBvc1xyXG5pbXBvcnQgcmVcclxuZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgbmFtZWR0dXBsZVxyXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBDYWxsYWJsZSwgRGljdCwgSXRlcmFibGUsIExpc3QsIFR1cGxlICAjIG5vcWFcclxuXHJcbmZyb20gLmFiYyBpbXBvcnQgQWJzdHJhY3RBY2Nlc3NMb2dnZXJcclxuZnJvbSAud2ViX3JlcXVlc3QgaW1wb3J0IEJhc2VSZXF1ZXN0XHJcbmZyb20gLndlYl9yZXNwb25zZSBpbXBvcnQgU3RyZWFtUmVzcG9uc2VcclxuXHJcbktleU1ldGhvZCA9IG5hbWVkdHVwbGUoIktleU1ldGhvZCIsICJrZXkgbWV0aG9kIilcclxuXHJcblxyXG5jbGFzcyBBY2Nlc3NMb2dnZXIoQWJzdHJhY3RBY2Nlc3NMb2dnZXIpOlxyXG4gICAgIiIiSGVscGVyIG9iamVjdCB0byBsb2cgYWNjZXNzLlxyXG5cclxuICAgIFVzYWdlOlxyXG4gICAgICAgIGxvZyA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCJzcGFtIilcclxuICAgICAgICBsb2dfZm9ybWF0ID0gIiVhICV7VXNlci1BZ2VudH1pIlxyXG4gICAgICAgIGFjY2Vzc19sb2dnZXIgPSBBY2Nlc3NMb2dnZXIobG9nLCBsb2dfZm9ybWF0KVxyXG4gICAgICAgIGFjY2Vzc19sb2dnZXIubG9nKHJlcXVlc3QsIHJlc3BvbnNlLCB0aW1lKVxyXG5cclxuICAgIEZvcm1hdDpcclxuICAgICAgICAlJSAgVGhlIHBlcmNlbnQgc2lnblxyXG4gICAgICAgICVhICBSZW1vdGUgSVAtYWRkcmVzcyAoSVAtYWRkcmVzcyBvZiBwcm94eSBpZiB1c2luZyByZXZlcnNlIHByb3h5KVxyXG4gICAgICAgICV0ICBUaW1lIHdoZW4gdGhlIHJlcXVlc3Qgd2FzIHN0YXJ0ZWQgdG8gcHJvY2Vzc1xyXG4gICAgICAgICVQICBUaGUgcHJvY2VzcyBJRCBvZiB0aGUgY2hpbGQgdGhhdCBzZXJ2aWNlZCB0aGUgcmVxdWVzdFxyXG4gICAgICAgICVyICBGaXJzdCBsaW5lIG9mIHJlcXVlc3RcclxuICAgICAgICAlcyAgUmVzcG9uc2Ugc3RhdHVzIGNvZGVcclxuICAgICAgICAlYiAgU2l6ZSBvZiByZXNwb25zZSBpbiBieXRlcywgaW5jbHVkaW5nIEhUVFAgaGVhZGVyc1xyXG4gICAgICAgICVUICBUaW1lIHRha2VuIHRvIHNlcnZlIHRoZSByZXF1ZXN0LCBpbiBzZWNvbmRzXHJcbiAgICAgICAgJVRmIFRpbWUgdGFrZW4gdG8gc2VydmUgdGhlIHJlcXVlc3QsIGluIHNlY29uZHMgd2l0aCBmbG9hdGluZyBmcmFjdGlvblxyXG4gICAgICAgICAgICBpbiAuMDZmIGZvcm1hdFxyXG4gICAgICAgICVEICBUaW1lIHRha2VuIHRvIHNlcnZlIHRoZSByZXF1ZXN0LCBpbiBtaWNyb3NlY29uZHNcclxuICAgICAgICAle0ZPT31pICByZXF1ZXN0LmhlYWRlcnNbXCdGT09cJ11cclxuICAgICAgICAle0ZPT31vICByZXNwb25zZS5oZWFkZXJzW1wnRk9PXCddXHJcbiAgICAgICAgJXtGT099ZSAgb3MuZW52aXJvbltcJ0ZPT1wnXVxyXG5cclxuICAgICIiIlxyXG5cclxuICAgIExPR19GT1JNQVRfTUFQID0ge1xyXG4gICAgICAgICJhIjogInJlbW90ZV9hZGRyZXNzIixcclxuICAgICAgICAidCI6ICJyZXF1ZXN0X3N0YXJ0X3RpbWUiLFxyXG4gICAgICAgICJQIjogInByb2Nlc3NfaWQiLFxyXG4gICAgICAgICJyIjogImZpcnN0X3JlcXVlc3RfbGluZSIsXHJcbiAgICAgICAgInMiOiAicmVzcG9uc2Vfc3RhdHVzIixcclxuICAgICAgICAiYiI6ICJyZXNwb25zZV9zaXplIixcclxuICAgICAgICAiVCI6ICJyZXF1ZXN0X3RpbWUiLFxyXG4gICAgICAgICJUZiI6ICJyZXF1ZXN0X3RpbWVfZnJhYyIsXHJcbiAgICAgICAgIkQiOiAicmVxdWVzdF90aW1lX21pY3JvIixcclxuICAgICAgICAiaSI6ICJyZXF1ZXN0X2hlYWRlciIsXHJcbiAgICAgICAgIm8iOiAicmVzcG9uc2VfaGVhZGVyIixcclxuICAgIH1cclxuXHJcbiAgICBMT0dfRk9STUFUID0gXCclYSAldCAiJXIiICVzICViICIle1JlZmVyZXJ9aSIgIiV7VXNlci1BZ2VudH1pIlwnXHJcbiAgICBGT1JNQVRfUkUgPSByZS5jb21waWxlKHIiJShcXHsoW0EtWmEtejAtOVxcLV9dKylcXH0oW2lvZV0pfFthdFByc2JPRF18VGY/KSIpXHJcbiAgICBDTEVBTlVQX1JFID0gcmUuY29tcGlsZShyIiglW15zXSkiKVxyXG4gICAgX0ZPUk1BVF9DQUNIRSA9IHt9ICAjIHR5cGU6IERpY3Rbc3RyLCBUdXBsZVtzdHIsIExpc3RbS2V5TWV0aG9kXV1dXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGxvZ2dlcjogbG9nZ2luZy5Mb2dnZXIsIGxvZ19mb3JtYXQ6IHN0ciA9IExPR19GT1JNQVQpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiSW5pdGlhbGlzZSB0aGUgbG9nZ2VyLlxyXG5cclxuICAgICAgICBsb2dnZXIgaXMgYSBsb2dnZXIgb2JqZWN0IHRvIGJlIHVzZWQgZm9yIGxvZ2dpbmcuXHJcbiAgICAgICAgbG9nX2Zvcm1hdCBpcyBhIHN0cmluZyB3aXRoIGFwYWNoZSBjb21wYXRpYmxlIGxvZyBmb3JtYXQgZGVzY3JpcHRpb24uXHJcblxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18obG9nZ2VyLCBsb2dfZm9ybWF0PWxvZ19mb3JtYXQpXHJcblxyXG4gICAgICAgIF9jb21waWxlZF9mb3JtYXQgPSBBY2Nlc3NMb2dnZXIuX0ZPUk1BVF9DQUNIRS5nZXQobG9nX2Zvcm1hdClcclxuICAgICAgICBpZiBub3QgX2NvbXBpbGVkX2Zvcm1hdDpcclxuICAgICAgICAgICAgX2NvbXBpbGVkX2Zvcm1hdCA9IHNlbGYuY29tcGlsZV9mb3JtYXQobG9nX2Zvcm1hdClcclxuICAgICAgICAgICAgQWNjZXNzTG9nZ2VyLl9GT1JNQVRfQ0FDSEVbbG9nX2Zvcm1hdF0gPSBfY29tcGlsZWRfZm9ybWF0XHJcblxyXG4gICAgICAgIHNlbGYuX2xvZ19mb3JtYXQsIHNlbGYuX21ldGhvZHMgPSBfY29tcGlsZWRfZm9ybWF0XHJcblxyXG4gICAgZGVmIGNvbXBpbGVfZm9ybWF0KHNlbGYsIGxvZ19mb3JtYXQ6IHN0cikgLT4gVHVwbGVbc3RyLCBMaXN0W0tleU1ldGhvZF1dOlxyXG4gICAgICAgICIiIlRyYW5zbGF0ZSBsb2dfZm9ybWF0IGludG8gZm9ybSB1c2FibGUgYnkgbW9kdWxvIGZvcm1hdHRpbmdcclxuXHJcbiAgICAgICAgQWxsIGtub3duIGF0b21zIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCAlc1xyXG4gICAgICAgIEFsc28gbWV0aG9kcyBmb3IgZm9ybWF0dGluZyBvZiB0aG9zZSBhdG9tcyB3aWxsIGJlIGFkZGVkIHRvXHJcbiAgICAgICAgX21ldGhvZHMgaW4gYXBwcm9wcmlhdGUgb3JkZXJcclxuXHJcbiAgICAgICAgRm9yIGV4YW1wbGUgd2UgaGF2ZSBsb2dfZm9ybWF0ID0gIiVhICV0IlxyXG4gICAgICAgIFRoaXMgZm9ybWF0IHdpbGwgYmUgdHJhbnNsYXRlZCB0byAiJXMgJXMiXHJcbiAgICAgICAgQWxzbyBjb250ZW50cyBvZiBfbWV0aG9kcyB3aWxsIGJlXHJcbiAgICAgICAgW3NlbGYuX2Zvcm1hdF9hLCBzZWxmLl9mb3JtYXRfdF1cclxuICAgICAgICBUaGVzZSBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgYW5kIHJlc3VsdHMgd2lsbCBiZSBwYXNzZWRcclxuICAgICAgICB0byB0cmFuc2xhdGVkIHN0cmluZyBmb3JtYXQuXHJcblxyXG4gICAgICAgIEVhY2ggX2Zvcm1hdF8qIG1ldGhvZCByZWNlaXZlIFwnYXJnc1wnIHdoaWNoIGlzIGxpc3Qgb2YgYXJndW1lbnRzXHJcbiAgICAgICAgZ2l2ZW4gdG8gc2VsZi5sb2dcclxuXHJcbiAgICAgICAgRXhjZXB0aW9ucyBhcmUgX2Zvcm1hdF9lLCBfZm9ybWF0X2kgYW5kIF9mb3JtYXRfbyBtZXRob2RzIHdoaWNoXHJcbiAgICAgICAgYWxzbyByZWNlaXZlIGtleSBuYW1lIChieSBmdW5jdG9vbHMucGFydGlhbClcclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgIyBsaXN0IG9mIChrZXksIG1ldGhvZCkgdHVwbGVzLCB3ZSBkb25cJ3QgdXNlIGFuIE9yZGVyZWREaWN0IGFzIHVzZXJzXHJcbiAgICAgICAgIyBjYW4gcmVwZWF0IHRoZSBzYW1lIGtleSBtb3JlIHRoYW4gb25jZVxyXG4gICAgICAgIG1ldGhvZHMgPSBsaXN0KClcclxuXHJcbiAgICAgICAgZm9yIGF0b20gaW4gc2VsZi5GT1JNQVRfUkUuZmluZGFsbChsb2dfZm9ybWF0KTpcclxuICAgICAgICAgICAgaWYgYXRvbVsxXSA9PSAiIjpcclxuICAgICAgICAgICAgICAgIGZvcm1hdF9rZXkxID0gc2VsZi5MT0dfRk9STUFUX01BUFthdG9tWzBdXVxyXG4gICAgICAgICAgICAgICAgbSA9IGdldGF0dHIoQWNjZXNzTG9nZ2VyLCAiX2Zvcm1hdF8lcyIgJSBhdG9tWzBdKVxyXG4gICAgICAgICAgICAgICAga2V5X21ldGhvZCA9IEtleU1ldGhvZChmb3JtYXRfa2V5MSwgbSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGZvcm1hdF9rZXkyID0gKHNlbGYuTE9HX0ZPUk1BVF9NQVBbYXRvbVsyXV0sIGF0b21bMV0pXHJcbiAgICAgICAgICAgICAgICBtID0gZ2V0YXR0cihBY2Nlc3NMb2dnZXIsICJfZm9ybWF0XyVzIiAlIGF0b21bMl0pXHJcbiAgICAgICAgICAgICAgICBrZXlfbWV0aG9kID0gS2V5TWV0aG9kKGZvcm1hdF9rZXkyLCBmdW5jdG9vbHMucGFydGlhbChtLCBhdG9tWzFdKSlcclxuXHJcbiAgICAgICAgICAgIG1ldGhvZHMuYXBwZW5kKGtleV9tZXRob2QpXHJcblxyXG4gICAgICAgIGxvZ19mb3JtYXQgPSBzZWxmLkZPUk1BVF9SRS5zdWIociIlcyIsIGxvZ19mb3JtYXQpXHJcbiAgICAgICAgbG9nX2Zvcm1hdCA9IHNlbGYuQ0xFQU5VUF9SRS5zdWIociIlXFwxIiwgbG9nX2Zvcm1hdClcclxuICAgICAgICByZXR1cm4gbG9nX2Zvcm1hdCwgbWV0aG9kc1xyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfZm9ybWF0X2koXHJcbiAgICAgICAga2V5OiBzdHIsIHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LCByZXNwb25zZTogU3RyZWFtUmVzcG9uc2UsIHRpbWU6IGZsb2F0XHJcbiAgICApIC0+IHN0cjpcclxuICAgICAgICBpZiByZXF1ZXN0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiAiKG5vIGhlYWRlcnMpIlxyXG5cclxuICAgICAgICAjIHN1Ym9wdGltYWwsIG1ha2UgaXN0cihrZXkpIG9uY2VcclxuICAgICAgICByZXR1cm4gcmVxdWVzdC5oZWFkZXJzLmdldChrZXksICItIilcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgX2Zvcm1hdF9vKFxyXG4gICAgICAgIGtleTogc3RyLCByZXF1ZXN0OiBCYXNlUmVxdWVzdCwgcmVzcG9uc2U6IFN0cmVhbVJlc3BvbnNlLCB0aW1lOiBmbG9hdFxyXG4gICAgKSAtPiBzdHI6XHJcbiAgICAgICAgIyBzdWJvcHRpbWFsLCBtYWtlIGlzdHIoa2V5KSBvbmNlXHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmhlYWRlcnMuZ2V0KGtleSwgIi0iKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfZm9ybWF0X2EocmVxdWVzdDogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBTdHJlYW1SZXNwb25zZSwgdGltZTogZmxvYXQpIC0+IHN0cjpcclxuICAgICAgICBpZiByZXF1ZXN0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiAiLSJcclxuICAgICAgICBpcCA9IHJlcXVlc3QucmVtb3RlXHJcbiAgICAgICAgcmV0dXJuIGlwIGlmIGlwIGlzIG5vdCBOb25lIGVsc2UgIi0iXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIF9mb3JtYXRfdChyZXF1ZXN0OiBCYXNlUmVxdWVzdCwgcmVzcG9uc2U6IFN0cmVhbVJlc3BvbnNlLCB0aW1lOiBmbG9hdCkgLT4gc3RyOlxyXG4gICAgICAgIG5vdyA9IGRhdGV0aW1lLmRhdGV0aW1lLnV0Y25vdygpXHJcbiAgICAgICAgc3RhcnRfdGltZSA9IG5vdyAtIGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPXRpbWUpXHJcbiAgICAgICAgcmV0dXJuIHN0YXJ0X3RpbWUuc3RyZnRpbWUoIlslZC8lYi8lWTolSDolTTolUyArMDAwMF0iKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfZm9ybWF0X1AocmVxdWVzdDogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBTdHJlYW1SZXNwb25zZSwgdGltZTogZmxvYXQpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjwlcz4iICUgb3MuZ2V0cGlkKClcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgX2Zvcm1hdF9yKHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LCByZXNwb25zZTogU3RyZWFtUmVzcG9uc2UsIHRpbWU6IGZsb2F0KSAtPiBzdHI6XHJcbiAgICAgICAgaWYgcmVxdWVzdCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gIi0iXHJcbiAgICAgICAgcmV0dXJuICJ7fSB7fSBIVFRQL3t9Lnt9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIHJlcXVlc3QubWV0aG9kLFxyXG4gICAgICAgICAgICByZXF1ZXN0LnBhdGhfcXMsXHJcbiAgICAgICAgICAgIHJlcXVlc3QudmVyc2lvbi5tYWpvcixcclxuICAgICAgICAgICAgcmVxdWVzdC52ZXJzaW9uLm1pbm9yLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgX2Zvcm1hdF9zKHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LCByZXNwb25zZTogU3RyZWFtUmVzcG9uc2UsIHRpbWU6IGZsb2F0KSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1c1xyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfZm9ybWF0X2IocmVxdWVzdDogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBTdHJlYW1SZXNwb25zZSwgdGltZTogZmxvYXQpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuYm9keV9sZW5ndGhcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgX2Zvcm1hdF9UKHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LCByZXNwb25zZTogU3RyZWFtUmVzcG9uc2UsIHRpbWU6IGZsb2F0KSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHN0cihyb3VuZCh0aW1lKSlcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgX2Zvcm1hdF9UZihyZXF1ZXN0OiBCYXNlUmVxdWVzdCwgcmVzcG9uc2U6IFN0cmVhbVJlc3BvbnNlLCB0aW1lOiBmbG9hdCkgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiJTA2ZiIgJSB0aW1lXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIF9mb3JtYXRfRChyZXF1ZXN0OiBCYXNlUmVxdWVzdCwgcmVzcG9uc2U6IFN0cmVhbVJlc3BvbnNlLCB0aW1lOiBmbG9hdCkgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzdHIocm91bmQodGltZSAqIDEwMDAwMDApKVxyXG5cclxuICAgIGRlZiBfZm9ybWF0X2xpbmUoXHJcbiAgICAgICAgc2VsZiwgcmVxdWVzdDogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBTdHJlYW1SZXNwb25zZSwgdGltZTogZmxvYXRcclxuICAgICkgLT4gSXRlcmFibGVbVHVwbGVbc3RyLCBDYWxsYWJsZVtbQmFzZVJlcXVlc3QsIFN0cmVhbVJlc3BvbnNlLCBmbG9hdF0sIHN0cl1dXTpcclxuICAgICAgICByZXR1cm4gWyhrZXksIG1ldGhvZChyZXF1ZXN0LCByZXNwb25zZSwgdGltZSkpIGZvciBrZXksIG1ldGhvZCBpbiBzZWxmLl9tZXRob2RzXVxyXG5cclxuICAgIGRlZiBsb2coc2VsZiwgcmVxdWVzdDogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBTdHJlYW1SZXNwb25zZSwgdGltZTogZmxvYXQpIC0+IE5vbmU6XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBmbXRfaW5mbyA9IHNlbGYuX2Zvcm1hdF9saW5lKHJlcXVlc3QsIHJlc3BvbnNlLCB0aW1lKVxyXG5cclxuICAgICAgICAgICAgdmFsdWVzID0gbGlzdCgpXHJcbiAgICAgICAgICAgIGV4dHJhID0gZGljdCgpXHJcbiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIGZtdF9pbmZvOlxyXG4gICAgICAgICAgICAgICAgdmFsdWVzLmFwcGVuZCh2YWx1ZSlcclxuXHJcbiAgICAgICAgICAgICAgICBpZiBrZXkuX19jbGFzc19fIGlzIHN0cjpcclxuICAgICAgICAgICAgICAgICAgICBleHRyYVtrZXldID0gdmFsdWVcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgazEsIGsyID0ga2V5ICAjIHR5cGU6IGlnbm9yZVttaXNjXVxyXG4gICAgICAgICAgICAgICAgICAgIGRjdCA9IGV4dHJhLmdldChrMSwge30pICAjIHR5cGU6IGlnbm9yZVt2YXItYW5ub3RhdGVkLGhhcy10eXBlXVxyXG4gICAgICAgICAgICAgICAgICAgIGRjdFtrMl0gPSB2YWx1ZSAgIyB0eXBlOiBpZ25vcmVbaW5kZXgsaGFzLXR5cGVdXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFbazFdID0gZGN0ICAjIHR5cGU6IGlnbm9yZVtoYXMtdHlwZSxhc3NpZ25tZW50XVxyXG5cclxuICAgICAgICAgICAgc2VsZi5sb2dnZXIuaW5mbyhzZWxmLl9sb2dfZm9ybWF0ICUgdHVwbGUodmFsdWVzKSwgZXh0cmE9ZXh0cmEpXHJcbiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgc2VsZi5sb2dnZXIuZXhjZXB0aW9uKCJFcnJvciBpbiBsb2dnaW5nIilcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvd2ViX3JlcXVlc3QucHknLCBiJ2ltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBkYXRldGltZVxyXG5pbXBvcnQgaW9cclxuaW1wb3J0IHJlXHJcbmltcG9ydCBzb2NrZXRcclxuaW1wb3J0IHN0cmluZ1xyXG5pbXBvcnQgdGVtcGZpbGVcclxuaW1wb3J0IHR5cGVzXHJcbmltcG9ydCB3YXJuaW5nc1xyXG5mcm9tIGh0dHAuY29va2llcyBpbXBvcnQgU2ltcGxlQ29va2llXHJcbmZyb20gdHlwZXMgaW1wb3J0IE1hcHBpbmdQcm94eVR5cGVcclxuZnJvbSB0eXBpbmcgaW1wb3J0IChcclxuICAgIFRZUEVfQ0hFQ0tJTkcsXHJcbiAgICBBbnksXHJcbiAgICBEaWN0LFxyXG4gICAgSXRlcmF0b3IsXHJcbiAgICBNYXBwaW5nLFxyXG4gICAgTXV0YWJsZU1hcHBpbmcsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFBhdHRlcm4sXHJcbiAgICBUdXBsZSxcclxuICAgIFVuaW9uLFxyXG4gICAgY2FzdCxcclxuKVxyXG5mcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgcGFyc2VfcXNsXHJcblxyXG5pbXBvcnQgYXR0clxyXG5mcm9tIG11bHRpZGljdCBpbXBvcnQgQ0lNdWx0aURpY3QsIENJTXVsdGlEaWN0UHJveHksIE11bHRpRGljdCwgTXVsdGlEaWN0UHJveHlcclxuZnJvbSB5YXJsIGltcG9ydCBVUkxcclxuXHJcbmZyb20gLiBpbXBvcnQgaGRyc1xyXG5mcm9tIC5hYmMgaW1wb3J0IEFic3RyYWN0U3RyZWFtV3JpdGVyXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IChcclxuICAgIERFQlVHLFxyXG4gICAgRVRBR19BTlksXHJcbiAgICBMSVNUX1FVT1RFRF9FVEFHX1JFLFxyXG4gICAgQ2hhaW5NYXBQcm94eSxcclxuICAgIEVUYWcsXHJcbiAgICBIZWFkZXJzTWl4aW4sXHJcbiAgICBwYXJzZV9odHRwX2RhdGUsXHJcbiAgICByZWlmeSxcclxuICAgIHNlbnRpbmVsLFxyXG4pXHJcbmZyb20gLmh0dHBfcGFyc2VyIGltcG9ydCBSYXdSZXF1ZXN0TWVzc2FnZVxyXG5mcm9tIC5odHRwX3dyaXRlciBpbXBvcnQgSHR0cFZlcnNpb25cclxuZnJvbSAubXVsdGlwYXJ0IGltcG9ydCBCb2R5UGFydFJlYWRlciwgTXVsdGlwYXJ0UmVhZGVyXHJcbmZyb20gLnN0cmVhbXMgaW1wb3J0IEVtcHR5U3RyZWFtUmVhZGVyLCBTdHJlYW1SZWFkZXJcclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IChcclxuICAgIERFRkFVTFRfSlNPTl9ERUNPREVSLFxyXG4gICAgRmluYWwsXHJcbiAgICBKU09ORGVjb2RlcixcclxuICAgIExvb3NlSGVhZGVycyxcclxuICAgIFJhd0hlYWRlcnMsXHJcbiAgICBTdHJPclVSTCxcclxuKVxyXG5mcm9tIC53ZWJfZXhjZXB0aW9ucyBpbXBvcnQgSFRUUFJlcXVlc3RFbnRpdHlUb29MYXJnZVxyXG5mcm9tIC53ZWJfcmVzcG9uc2UgaW1wb3J0IFN0cmVhbVJlc3BvbnNlXHJcblxyXG5fX2FsbF9fID0gKCJCYXNlUmVxdWVzdCIsICJGaWxlRmllbGQiLCAiUmVxdWVzdCIpXHJcblxyXG5cclxuaWYgVFlQRV9DSEVDS0lORzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgZnJvbSAud2ViX2FwcCBpbXBvcnQgQXBwbGljYXRpb25cclxuICAgIGZyb20gLndlYl9wcm90b2NvbCBpbXBvcnQgUmVxdWVzdEhhbmRsZXJcclxuICAgIGZyb20gLndlYl91cmxkaXNwYXRjaGVyIGltcG9ydCBVcmxNYXBwaW5nTWF0Y2hJbmZvXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIEZpbGVGaWVsZDpcclxuICAgIG5hbWU6IHN0clxyXG4gICAgZmlsZW5hbWU6IHN0clxyXG4gICAgZmlsZTogaW8uQnVmZmVyZWRSZWFkZXJcclxuICAgIGNvbnRlbnRfdHlwZTogc3RyXHJcbiAgICBoZWFkZXJzOiAiQ0lNdWx0aURpY3RQcm94eVtzdHJdIlxyXG5cclxuXHJcbl9UQ0hBUjogRmluYWxbc3RyXSA9IHN0cmluZy5kaWdpdHMgKyBzdHJpbmcuYXNjaWlfbGV0dGVycyArIHIiISMkJSZcJyorLl5fYHx+LSJcclxuIyBcJy1cJyBhdCB0aGUgZW5kIHRvIHByZXZlbnQgaW50ZXJwcmV0YXRpb24gYXMgcmFuZ2UgaW4gYSBjaGFyIGNsYXNzXHJcblxyXG5fVE9LRU46IEZpbmFsW3N0cl0gPSBmciJbe19UQ0hBUn1dKyJcclxuXHJcbl9RRFRFWFQ6IEZpbmFsW3N0cl0gPSByIlt7fV0iLmZvcm1hdChcclxuICAgIHIiIi5qb2luKGNocihjKSBmb3IgYyBpbiAoMHgwOSwgMHgyMCwgMHgyMSkgKyB0dXBsZShyYW5nZSgweDIzLCAweDdGKSkpXHJcbilcclxuIyBxZHRleHQgaW5jbHVkZXMgMHg1QyB0byBlc2NhcGUgMHg1RCAoXCdcXF1cJylcclxuIyBxZHRleHQgZXhjbHVkZXMgb2JzLXRleHQgKGJlY2F1c2Ugb2Jzb2xldGVkLCBhbmQgZW5jb2Rpbmcgbm90IHNwZWNpZmllZClcclxuXHJcbl9RVU9URURfUEFJUjogRmluYWxbc3RyXSA9IHIiXFxcXFtcXHQgIS1+XSJcclxuXHJcbl9RVU9URURfU1RSSU5HOiBGaW5hbFtzdHJdID0gclwnIig/OntxdW90ZWRfcGFpcn18e3FkdGV4dH0pKiJcJy5mb3JtYXQoXHJcbiAgICBxZHRleHQ9X1FEVEVYVCwgcXVvdGVkX3BhaXI9X1FVT1RFRF9QQUlSXHJcbilcclxuXHJcbl9GT1JXQVJERURfUEFJUjogRmluYWxbXHJcbiAgICBzdHJcclxuXSA9IHIiKHt0b2tlbn0pPSh7dG9rZW59fHtxdW90ZWRfc3RyaW5nfSkoOlxcZHt7MSw0fX0pPyIuZm9ybWF0KFxyXG4gICAgdG9rZW49X1RPS0VOLCBxdW90ZWRfc3RyaW5nPV9RVU9URURfU1RSSU5HXHJcbilcclxuXHJcbl9RVU9URURfUEFJUl9SRVBMQUNFX1JFOiBGaW5hbFtQYXR0ZXJuW3N0cl1dID0gcmUuY29tcGlsZShyIlxcXFwoW1xcdCAhLX5dKSIpXHJcbiMgc2FtZSBwYXR0ZXJuIGFzIF9RVU9URURfUEFJUiBidXQgY29udGFpbnMgYSBjYXB0dXJlIGdyb3VwXHJcblxyXG5fRk9SV0FSREVEX1BBSVJfUkU6IEZpbmFsW1BhdHRlcm5bc3RyXV0gPSByZS5jb21waWxlKF9GT1JXQVJERURfUEFJUilcclxuXHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4jIEhUVFAgUmVxdWVzdFxyXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcblxyXG5jbGFzcyBCYXNlUmVxdWVzdChNdXRhYmxlTWFwcGluZ1tzdHIsIEFueV0sIEhlYWRlcnNNaXhpbik6XHJcblxyXG4gICAgUE9TVF9NRVRIT0RTID0ge1xyXG4gICAgICAgIGhkcnMuTUVUSF9QQVRDSCxcclxuICAgICAgICBoZHJzLk1FVEhfUE9TVCxcclxuICAgICAgICBoZHJzLk1FVEhfUFVULFxyXG4gICAgICAgIGhkcnMuTUVUSF9UUkFDRSxcclxuICAgICAgICBoZHJzLk1FVEhfREVMRVRFLFxyXG4gICAgfVxyXG5cclxuICAgIEFUVFJTID0gSGVhZGVyc01peGluLkFUVFJTIHwgZnJvemVuc2V0KFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgIl9tZXNzYWdlIixcclxuICAgICAgICAgICAgIl9wcm90b2NvbCIsXHJcbiAgICAgICAgICAgICJfcGF5bG9hZF93cml0ZXIiLFxyXG4gICAgICAgICAgICAiX3BheWxvYWQiLFxyXG4gICAgICAgICAgICAiX2hlYWRlcnMiLFxyXG4gICAgICAgICAgICAiX21ldGhvZCIsXHJcbiAgICAgICAgICAgICJfdmVyc2lvbiIsXHJcbiAgICAgICAgICAgICJfcmVsX3VybCIsXHJcbiAgICAgICAgICAgICJfcG9zdCIsXHJcbiAgICAgICAgICAgICJfcmVhZF9ieXRlcyIsXHJcbiAgICAgICAgICAgICJfc3RhdGUiLFxyXG4gICAgICAgICAgICAiX2NhY2hlIixcclxuICAgICAgICAgICAgIl90YXNrIixcclxuICAgICAgICAgICAgIl9jbGllbnRfbWF4X3NpemUiLFxyXG4gICAgICAgICAgICAiX2xvb3AiLFxyXG4gICAgICAgICAgICAiX3RyYW5zcG9ydF9zc2xjb250ZXh0IixcclxuICAgICAgICAgICAgIl90cmFuc3BvcnRfcGVlcm5hbWUiLFxyXG4gICAgICAgIF1cclxuICAgIClcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZXNzYWdlOiBSYXdSZXF1ZXN0TWVzc2FnZSxcclxuICAgICAgICBwYXlsb2FkOiBTdHJlYW1SZWFkZXIsXHJcbiAgICAgICAgcHJvdG9jb2w6ICJSZXF1ZXN0SGFuZGxlciIsXHJcbiAgICAgICAgcGF5bG9hZF93cml0ZXI6IEFic3RyYWN0U3RyZWFtV3JpdGVyLFxyXG4gICAgICAgIHRhc2s6ICJhc3luY2lvLlRhc2tbTm9uZV0iLFxyXG4gICAgICAgIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3AsXHJcbiAgICAgICAgKixcclxuICAgICAgICBjbGllbnRfbWF4X3NpemU6IGludCA9IDEwMjQgKiogMixcclxuICAgICAgICBzdGF0ZTogT3B0aW9uYWxbRGljdFtzdHIsIEFueV1dID0gTm9uZSxcclxuICAgICAgICBzY2hlbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGhvc3Q6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIHJlbW90ZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc3RhdGUgaXMgTm9uZTpcclxuICAgICAgICAgICAgc3RhdGUgPSB7fVxyXG4gICAgICAgIHNlbGYuX21lc3NhZ2UgPSBtZXNzYWdlXHJcbiAgICAgICAgc2VsZi5fcHJvdG9jb2wgPSBwcm90b2NvbFxyXG4gICAgICAgIHNlbGYuX3BheWxvYWRfd3JpdGVyID0gcGF5bG9hZF93cml0ZXJcclxuXHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZCA9IHBheWxvYWRcclxuICAgICAgICBzZWxmLl9oZWFkZXJzID0gbWVzc2FnZS5oZWFkZXJzXHJcbiAgICAgICAgc2VsZi5fbWV0aG9kID0gbWVzc2FnZS5tZXRob2RcclxuICAgICAgICBzZWxmLl92ZXJzaW9uID0gbWVzc2FnZS52ZXJzaW9uXHJcbiAgICAgICAgc2VsZi5fcmVsX3VybCA9IG1lc3NhZ2UudXJsXHJcbiAgICAgICAgc2VsZi5fcG9zdCA9IChcclxuICAgICAgICAgICAgTm9uZVxyXG4gICAgICAgICkgICMgdHlwZTogT3B0aW9uYWxbTXVsdGlEaWN0UHJveHlbVW5pb25bc3RyLCBieXRlcywgRmlsZUZpZWxkXV1dXHJcbiAgICAgICAgc2VsZi5fcmVhZF9ieXRlcyA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYnl0ZXNdXHJcblxyXG4gICAgICAgIHNlbGYuX3N0YXRlID0gc3RhdGVcclxuICAgICAgICBzZWxmLl9jYWNoZSA9IHt9ICAjIHR5cGU6IERpY3Rbc3RyLCBBbnldXHJcbiAgICAgICAgc2VsZi5fdGFzayA9IHRhc2tcclxuICAgICAgICBzZWxmLl9jbGllbnRfbWF4X3NpemUgPSBjbGllbnRfbWF4X3NpemVcclxuICAgICAgICBzZWxmLl9sb29wID0gbG9vcFxyXG5cclxuICAgICAgICB0cmFuc3BvcnQgPSBzZWxmLl9wcm90b2NvbC50cmFuc3BvcnRcclxuICAgICAgICBhc3NlcnQgdHJhbnNwb3J0IGlzIG5vdCBOb25lXHJcbiAgICAgICAgc2VsZi5fdHJhbnNwb3J0X3NzbGNvbnRleHQgPSB0cmFuc3BvcnQuZ2V0X2V4dHJhX2luZm8oInNzbGNvbnRleHQiKVxyXG4gICAgICAgIHNlbGYuX3RyYW5zcG9ydF9wZWVybmFtZSA9IHRyYW5zcG9ydC5nZXRfZXh0cmFfaW5mbygicGVlcm5hbWUiKVxyXG5cclxuICAgICAgICBpZiBzY2hlbWUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2NhY2hlWyJzY2hlbWUiXSA9IHNjaGVtZVxyXG4gICAgICAgIGlmIGhvc3QgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2NhY2hlWyJob3N0Il0gPSBob3N0XHJcbiAgICAgICAgaWYgcmVtb3RlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9jYWNoZVsicmVtb3RlIl0gPSByZW1vdGVcclxuXHJcbiAgICBkZWYgY2xvbmUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIG1ldGhvZDogc3RyID0gc2VudGluZWwsXHJcbiAgICAgICAgcmVsX3VybDogU3RyT3JVUkwgPSBzZW50aW5lbCxcclxuICAgICAgICBoZWFkZXJzOiBMb29zZUhlYWRlcnMgPSBzZW50aW5lbCxcclxuICAgICAgICBzY2hlbWU6IHN0ciA9IHNlbnRpbmVsLFxyXG4gICAgICAgIGhvc3Q6IHN0ciA9IHNlbnRpbmVsLFxyXG4gICAgICAgIHJlbW90ZTogc3RyID0gc2VudGluZWwsXHJcbiAgICApIC0+ICJCYXNlUmVxdWVzdCI6XHJcbiAgICAgICAgIiIiQ2xvbmUgaXRzZWxmIHdpdGggcmVwbGFjZW1lbnQgc29tZSBhdHRyaWJ1dGVzLlxyXG5cclxuICAgICAgICBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGluc3RhbmNlIG9mIFJlcXVlc3Qgb2JqZWN0LiBJZiBubyBwYXJhbWV0ZXJzXHJcbiAgICAgICAgYXJlIGdpdmVuLCBhbiBleGFjdCBjb3B5IGlzIHJldHVybmVkLiBJZiBhIHBhcmFtZXRlciBpcyBub3QgcGFzc2VkLCBpdFxyXG4gICAgICAgIHdpbGwgcmV1c2UgdGhlIG9uZSBmcm9tIHRoZSBjdXJyZW50IHJlcXVlc3Qgb2JqZWN0LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHNlbGYuX3JlYWRfYnl0ZXM6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IGNsb25lIHJlcXVlc3QgIiAiYWZ0ZXIgcmVhZGluZyBpdHMgY29udGVudCIpXHJcblxyXG4gICAgICAgIGRjdCA9IHt9ICAjIHR5cGU6IERpY3Rbc3RyLCBBbnldXHJcbiAgICAgICAgaWYgbWV0aG9kIGlzIG5vdCBzZW50aW5lbDpcclxuICAgICAgICAgICAgZGN0WyJtZXRob2QiXSA9IG1ldGhvZFxyXG4gICAgICAgIGlmIHJlbF91cmwgaXMgbm90IHNlbnRpbmVsOlxyXG4gICAgICAgICAgICBuZXdfdXJsID0gVVJMKHJlbF91cmwpXHJcbiAgICAgICAgICAgIGRjdFsidXJsIl0gPSBuZXdfdXJsXHJcbiAgICAgICAgICAgIGRjdFsicGF0aCJdID0gc3RyKG5ld191cmwpXHJcbiAgICAgICAgaWYgaGVhZGVycyBpcyBub3Qgc2VudGluZWw6XHJcbiAgICAgICAgICAgICMgYSBjb3B5IHNlbWFudGljXHJcbiAgICAgICAgICAgIGRjdFsiaGVhZGVycyJdID0gQ0lNdWx0aURpY3RQcm94eShDSU11bHRpRGljdChoZWFkZXJzKSlcclxuICAgICAgICAgICAgZGN0WyJyYXdfaGVhZGVycyJdID0gdHVwbGUoXHJcbiAgICAgICAgICAgICAgICAoay5lbmNvZGUoInV0Zi04IiksIHYuZW5jb2RlKCJ1dGYtOCIpKSBmb3IgaywgdiBpbiBoZWFkZXJzLml0ZW1zKClcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBtZXNzYWdlID0gc2VsZi5fbWVzc2FnZS5fcmVwbGFjZSgqKmRjdClcclxuXHJcbiAgICAgICAga3dhcmdzID0ge31cclxuICAgICAgICBpZiBzY2hlbWUgaXMgbm90IHNlbnRpbmVsOlxyXG4gICAgICAgICAgICBrd2FyZ3NbInNjaGVtZSJdID0gc2NoZW1lXHJcbiAgICAgICAgaWYgaG9zdCBpcyBub3Qgc2VudGluZWw6XHJcbiAgICAgICAgICAgIGt3YXJnc1siaG9zdCJdID0gaG9zdFxyXG4gICAgICAgIGlmIHJlbW90ZSBpcyBub3Qgc2VudGluZWw6XHJcbiAgICAgICAgICAgIGt3YXJnc1sicmVtb3RlIl0gPSByZW1vdGVcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX19jbGFzc19fKFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBzZWxmLl9wYXlsb2FkLFxyXG4gICAgICAgICAgICBzZWxmLl9wcm90b2NvbCxcclxuICAgICAgICAgICAgc2VsZi5fcGF5bG9hZF93cml0ZXIsXHJcbiAgICAgICAgICAgIHNlbGYuX3Rhc2ssXHJcbiAgICAgICAgICAgIHNlbGYuX2xvb3AsXHJcbiAgICAgICAgICAgIGNsaWVudF9tYXhfc2l6ZT1zZWxmLl9jbGllbnRfbWF4X3NpemUsXHJcbiAgICAgICAgICAgIHN0YXRlPXNlbGYuX3N0YXRlLmNvcHkoKSxcclxuICAgICAgICAgICAgKiprd2FyZ3MsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHRhc2soc2VsZikgLT4gImFzeW5jaW8uVGFza1tOb25lXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Rhc2tcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwcm90b2NvbChzZWxmKSAtPiAiUmVxdWVzdEhhbmRsZXIiOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wcm90b2NvbFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHRyYW5zcG9ydChzZWxmKSAtPiBPcHRpb25hbFthc3luY2lvLlRyYW5zcG9ydF06XHJcbiAgICAgICAgaWYgc2VsZi5fcHJvdG9jb2wgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICByZXR1cm4gc2VsZi5fcHJvdG9jb2wudHJhbnNwb3J0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgd3JpdGVyKHNlbGYpIC0+IEFic3RyYWN0U3RyZWFtV3JpdGVyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wYXlsb2FkX3dyaXRlclxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIG1lc3NhZ2Uoc2VsZikgLT4gUmF3UmVxdWVzdE1lc3NhZ2U6XHJcbiAgICAgICAgd2FybmluZ3Mud2FybigiUmVxdWVzdC5tZXNzYWdlIGlzIGRlcHJlY2F0ZWQiLCBEZXByZWNhdGlvbldhcm5pbmcsIHN0YWNrbGV2ZWw9MylcclxuICAgICAgICByZXR1cm4gc2VsZi5fbWVzc2FnZVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIHJlbF91cmwoc2VsZikgLT4gVVJMOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZWxfdXJsXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgbG9vcChzZWxmKSAtPiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJyZXF1ZXN0Lmxvb3AgcHJvcGVydHkgaXMgZGVwcmVjYXRlZCIsIERlcHJlY2F0aW9uV2FybmluZywgc3RhY2tsZXZlbD0yXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9sb29wXHJcblxyXG4gICAgIyBNdXRhYmxlTWFwcGluZyBBUElcclxuXHJcbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5OiBzdHIpIC0+IEFueTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fc3RhdGVba2V5XVxyXG5cclxuICAgIGRlZiBfX3NldGl0ZW1fXyhzZWxmLCBrZXk6IHN0ciwgdmFsdWU6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9zdGF0ZVtrZXldID0gdmFsdWVcclxuXHJcbiAgICBkZWYgX19kZWxpdGVtX18oc2VsZiwga2V5OiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgZGVsIHNlbGYuX3N0YXRlW2tleV1cclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9zdGF0ZSlcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gSXRlcmF0b3Jbc3RyXTpcclxuICAgICAgICByZXR1cm4gaXRlcihzZWxmLl9zdGF0ZSlcclxuXHJcbiAgICAjIyMjIyMjI1xyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIHNlY3VyZShzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIkEgYm9vbCBpbmRpY2F0aW5nIGlmIHRoZSByZXF1ZXN0IGlzIGhhbmRsZWQgd2l0aCBTU0wuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuc2NoZW1lID09ICJodHRwcyJcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBmb3J3YXJkZWQoc2VsZikgLT4gVHVwbGVbTWFwcGluZ1tzdHIsIHN0cl0sIC4uLl06XHJcbiAgICAgICAgIiIiQSB0dXBsZSBjb250YWluaW5nIGFsbCBwYXJzZWQgRm9yd2FyZGVkIGhlYWRlcihzKS5cclxuXHJcbiAgICAgICAgTWFrZXMgYW4gZWZmb3J0IHRvIHBhcnNlIEZvcndhcmRlZCBoZWFkZXJzIGFzIHNwZWNpZmllZCBieSBSRkMgNzIzOTpcclxuXHJcbiAgICAgICAgLSBJdCBhZGRzIG9uZSAoaW1tdXRhYmxlKSBkaWN0aW9uYXJ5IHBlciBGb3J3YXJkZWQgXCdmaWVsZC12YWx1ZVwnLCBpZVxyXG4gICAgICAgICAgcGVyIHByb3h5LiBUaGUgZWxlbWVudCBjb3JyZXNwb25kcyB0byB0aGUgZGF0YSBpbiB0aGUgRm9yd2FyZGVkXHJcbiAgICAgICAgICBmaWVsZC12YWx1ZSBhZGRlZCBieSB0aGUgZmlyc3QgcHJveHkgZW5jb3VudGVyZWQgYnkgdGhlIGNsaWVudC4gRWFjaFxyXG4gICAgICAgICAgc3Vic2VxdWVudCBpdGVtIGNvcnJlc3BvbmRzIHRvIHRob3NlIGFkZGVkIGJ5IGxhdGVyIHByb3hpZXMuXHJcbiAgICAgICAgLSBJdCBjaGVja3MgdGhhdCBldmVyeSB2YWx1ZSBoYXMgdmFsaWQgc3ludGF4IGluIGdlbmVyYWwgYXMgc3BlY2lmaWVkXHJcbiAgICAgICAgICBpbiBzZWN0aW9uIDQ6IGVpdGhlciBhIFwndG9rZW5cJyBvciBhIFwncXVvdGVkLXN0cmluZ1wnLlxyXG4gICAgICAgIC0gSXQgdW4tZXNjYXBlcyBmb3VuZCBlc2NhcGUgc2VxdWVuY2VzLlxyXG4gICAgICAgIC0gSXQgZG9lcyBOT1QgdmFsaWRhdGUgXCdieVwnIGFuZCBcJ2ZvclwnIGNvbnRlbnRzIGFzIHNwZWNpZmllZCBpbiBzZWN0aW9uXHJcbiAgICAgICAgICA2LlxyXG4gICAgICAgIC0gSXQgZG9lcyBOT1QgdmFsaWRhdGUgXCdob3N0XCcgY29udGVudHMgKEhvc3QgQUJORikuXHJcbiAgICAgICAgLSBJdCBkb2VzIE5PVCB2YWxpZGF0ZSBcJ3Byb3RvXCcgY29udGVudHMgZm9yIHZhbGlkIFVSSSBzY2hlbWUgbmFtZXMuXHJcblxyXG4gICAgICAgIFJldHVybnMgYSB0dXBsZSBjb250YWluaW5nIG9uZSBvciBtb3JlIGltbXV0YWJsZSBkaWN0c1xyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGVsZW1zID0gW11cclxuICAgICAgICBmb3IgZmllbGRfdmFsdWUgaW4gc2VsZi5fbWVzc2FnZS5oZWFkZXJzLmdldGFsbChoZHJzLkZPUldBUkRFRCwgKCkpOlxyXG4gICAgICAgICAgICBsZW5ndGggPSBsZW4oZmllbGRfdmFsdWUpXHJcbiAgICAgICAgICAgIHBvcyA9IDBcclxuICAgICAgICAgICAgbmVlZF9zZXBhcmF0b3IgPSBGYWxzZVxyXG4gICAgICAgICAgICBlbGVtID0ge30gICMgdHlwZTogRGljdFtzdHIsIHN0cl1cclxuICAgICAgICAgICAgZWxlbXMuYXBwZW5kKHR5cGVzLk1hcHBpbmdQcm94eVR5cGUoZWxlbSkpXHJcbiAgICAgICAgICAgIHdoaWxlIDAgPD0gcG9zIDwgbGVuZ3RoOlxyXG4gICAgICAgICAgICAgICAgbWF0Y2ggPSBfRk9SV0FSREVEX1BBSVJfUkUubWF0Y2goZmllbGRfdmFsdWUsIHBvcylcclxuICAgICAgICAgICAgICAgIGlmIG1hdGNoIGlzIG5vdCBOb25lOiAgIyBnb3QgYSB2YWxpZCBmb3J3YXJkZWQtcGFpclxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG5lZWRfc2VwYXJhdG9yOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjIGJhZCBzeW50YXggaGVyZSwgc2tpcCB0byBuZXh0IGNvbW1hXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IGZpZWxkX3ZhbHVlLmZpbmQoIiwiLCBwb3MpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSwgdmFsdWUsIHBvcnQgPSBtYXRjaC5ncm91cHMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiB2YWx1ZVswXSA9PSBcJyJcJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcXVvdGVkIHN0cmluZzogcmVtb3ZlIHF1b3RlcyBhbmQgdW5lc2NhcGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX1FVT1RFRF9QQUlSX1JFUExBQ0VfUkUuc3ViKHIiXFwxIiwgdmFsdWVbMTotMV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBvcnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBwb3J0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1bbmFtZS5sb3dlcigpXSA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyArPSBsZW4obWF0Y2guZ3JvdXAoMCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRfc2VwYXJhdG9yID0gVHJ1ZVxyXG4gICAgICAgICAgICAgICAgZWxpZiBmaWVsZF92YWx1ZVtwb3NdID09ICIsIjogICMgbmV4dCBmb3J3YXJkZWQtZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRfc2VwYXJhdG9yID0gRmFsc2VcclxuICAgICAgICAgICAgICAgICAgICBlbGVtID0ge31cclxuICAgICAgICAgICAgICAgICAgICBlbGVtcy5hcHBlbmQodHlwZXMuTWFwcGluZ1Byb3h5VHlwZShlbGVtKSlcclxuICAgICAgICAgICAgICAgICAgICBwb3MgKz0gMVxyXG4gICAgICAgICAgICAgICAgZWxpZiBmaWVsZF92YWx1ZVtwb3NdID09ICI7IjogICMgbmV4dCBmb3J3YXJkZWQtcGFpclxyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRfc2VwYXJhdG9yID0gRmFsc2VcclxuICAgICAgICAgICAgICAgICAgICBwb3MgKz0gMVxyXG4gICAgICAgICAgICAgICAgZWxpZiBmaWVsZF92YWx1ZVtwb3NdIGluICIgXFx0IjpcclxuICAgICAgICAgICAgICAgICAgICAjIEFsbG93IHdoaXRlc3BhY2UgZXZlbiBiZXR3ZWVuIGZvcndhcmRlZC1wYWlycywgdGhvdWdoXHJcbiAgICAgICAgICAgICAgICAgICAgIyBSRkMgNzIzOSBkb2VzblwndC4gVGhpcyBzaW1wbGlmaWVzIGNvZGUgYW5kIGlzIGluIGxpbmVcclxuICAgICAgICAgICAgICAgICAgICAjIHdpdGggUG9zdGVsXCdzIGxhdy5cclxuICAgICAgICAgICAgICAgICAgICBwb3MgKz0gMVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAjIGJhZCBzeW50YXggaGVyZSwgc2tpcCB0byBuZXh0IGNvbW1hXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gZmllbGRfdmFsdWUuZmluZCgiLCIsIHBvcylcclxuICAgICAgICByZXR1cm4gdHVwbGUoZWxlbXMpXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgc2NoZW1lKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHNjaGVtZSBvZiB0aGUgcmVxdWVzdC5cclxuXHJcbiAgICAgICAgSG9zdG5hbWUgaXMgcmVzb2x2ZWQgaW4gdGhpcyBvcmRlcjpcclxuXHJcbiAgICAgICAgLSBvdmVycmlkZGVuIHZhbHVlIGJ5IC5jbG9uZShzY2hlbWU9bmV3X3NjaGVtZSkgY2FsbC5cclxuICAgICAgICAtIHR5cGUgb2YgY29ubmVjdGlvbiB0byBwZWVyOiBIVFRQUyBpZiBzb2NrZXQgaXMgU1NMLCBIVFRQIG90aGVyd2lzZS5cclxuXHJcbiAgICAgICAgXCdodHRwXCcgb3IgXCdodHRwc1wnLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHNlbGYuX3RyYW5zcG9ydF9zc2xjb250ZXh0OlxyXG4gICAgICAgICAgICByZXR1cm4gImh0dHBzIlxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiAiaHR0cCJcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBtZXRob2Qoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIlJlYWQgb25seSBwcm9wZXJ0eSBmb3IgZ2V0dGluZyBIVFRQIG1ldGhvZC5cclxuXHJcbiAgICAgICAgVGhlIHZhbHVlIGlzIHVwcGVyLWNhc2VkIHN0ciBsaWtlIFwnR0VUXCcsIFwnUE9TVFwnLCBcJ1BVVFwnIGV0Yy5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fbWV0aG9kXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgdmVyc2lvbihzZWxmKSAtPiBIdHRwVmVyc2lvbjpcclxuICAgICAgICAiIiJSZWFkIG9ubHkgcHJvcGVydHkgZm9yIGdldHRpbmcgSFRUUCB2ZXJzaW9uIG9mIHJlcXVlc3QuXHJcblxyXG4gICAgICAgIFJldHVybnMgYWlvaHR0cC5wcm90b2NvbC5IdHRwVmVyc2lvbiBpbnN0YW5jZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmVyc2lvblxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGhvc3Qoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIkhvc3RuYW1lIG9mIHRoZSByZXF1ZXN0LlxyXG5cclxuICAgICAgICBIb3N0bmFtZSBpcyByZXNvbHZlZCBpbiB0aGlzIG9yZGVyOlxyXG5cclxuICAgICAgICAtIG92ZXJyaWRkZW4gdmFsdWUgYnkgLmNsb25lKGhvc3Q9bmV3X2hvc3QpIGNhbGwuXHJcbiAgICAgICAgLSBIT1NUIEhUVFAgaGVhZGVyXHJcbiAgICAgICAgLSBzb2NrZXQuZ2V0ZnFkbigpIHZhbHVlXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaG9zdCA9IHNlbGYuX21lc3NhZ2UuaGVhZGVycy5nZXQoaGRycy5IT1NUKVxyXG4gICAgICAgIGlmIGhvc3QgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBob3N0XHJcbiAgICAgICAgcmV0dXJuIHNvY2tldC5nZXRmcWRuKClcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiByZW1vdGUoc2VsZikgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICAiIiJSZW1vdGUgSVAgb2YgY2xpZW50IGluaXRpYXRlZCBIVFRQIHJlcXVlc3QuXHJcblxyXG4gICAgICAgIFRoZSBJUCBpcyByZXNvbHZlZCBpbiB0aGlzIG9yZGVyOlxyXG5cclxuICAgICAgICAtIG92ZXJyaWRkZW4gdmFsdWUgYnkgLmNsb25lKHJlbW90ZT1uZXdfcmVtb3RlKSBjYWxsLlxyXG4gICAgICAgIC0gcGVlcm5hbWUgb2Ygb3BlbmVkIHNvY2tldFxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHNlbGYuX3RyYW5zcG9ydF9wZWVybmFtZSBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5fdHJhbnNwb3J0X3BlZXJuYW1lLCAobGlzdCwgdHVwbGUpKTpcclxuICAgICAgICAgICAgcmV0dXJuIHN0cihzZWxmLl90cmFuc3BvcnRfcGVlcm5hbWVbMF0pXHJcbiAgICAgICAgcmV0dXJuIHN0cihzZWxmLl90cmFuc3BvcnRfcGVlcm5hbWUpXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgdXJsKHNlbGYpIC0+IFVSTDpcclxuICAgICAgICB1cmwgPSBVUkwuYnVpbGQoc2NoZW1lPXNlbGYuc2NoZW1lLCBob3N0PXNlbGYuaG9zdClcclxuICAgICAgICByZXR1cm4gdXJsLmpvaW4oc2VsZi5fcmVsX3VybClcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBwYXRoKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJUaGUgVVJMIGluY2x1ZGluZyAqUEFUSCBJTkZPKiB3aXRob3V0IHRoZSBob3N0IG9yIHNjaGVtZS5cclxuXHJcbiAgICAgICAgRS5nLiwgYGAvYXBwL2Jsb2dgYFxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZWxfdXJsLnBhdGhcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBwYXRoX3FzKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJUaGUgVVJMIGluY2x1ZGluZyBQQVRIX0lORk8gYW5kIHRoZSBxdWVyeSBzdHJpbmcuXHJcblxyXG4gICAgICAgIEUuZywgL2FwcC9ibG9nP2lkPTEwXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHN0cihzZWxmLl9yZWxfdXJsKVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIHJhd19wYXRoKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJUaGUgVVJMIGluY2x1ZGluZyByYXcgKlBBVEggSU5GTyogd2l0aG91dCB0aGUgaG9zdCBvciBzY2hlbWUuXHJcblxyXG4gICAgICAgIFdhcm5pbmcsIHRoZSBwYXRoIGlzIHVucXVvdGVkIGFuZCBtYXkgY29udGFpbnMgbm9uIHZhbGlkIFVSTCBjaGFyYWN0ZXJzXHJcblxyXG4gICAgICAgIEUuZy4sIGBgL215JTJGcGF0aCU3Q3dpdGglMjFzb21lJTI1c3RyYW5nZSUyNGNoYXJhY3RlcnNgYFxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9tZXNzYWdlLnBhdGhcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBxdWVyeShzZWxmKSAtPiAiTXVsdGlEaWN0UHJveHlbc3RyXSI6XHJcbiAgICAgICAgIiIiQSBtdWx0aWRpY3Qgd2l0aCBhbGwgdGhlIHZhcmlhYmxlcyBpbiB0aGUgcXVlcnkgc3RyaW5nLiIiIlxyXG4gICAgICAgIHJldHVybiBNdWx0aURpY3RQcm94eShzZWxmLl9yZWxfdXJsLnF1ZXJ5KVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIHF1ZXJ5X3N0cmluZyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiVGhlIHF1ZXJ5IHN0cmluZyBpbiB0aGUgVVJMLlxyXG5cclxuICAgICAgICBFLmcuLCBpZD0xMFxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZWxfdXJsLnF1ZXJ5X3N0cmluZ1xyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGhlYWRlcnMoc2VsZikgLT4gIkNJTXVsdGlEaWN0UHJveHlbc3RyXSI6XHJcbiAgICAgICAgIiIiQSBjYXNlLWluc2Vuc2l0aXZlIG11bHRpZGljdCBwcm94eSB3aXRoIGFsbCBoZWFkZXJzLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9oZWFkZXJzXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgcmF3X2hlYWRlcnMoc2VsZikgLT4gUmF3SGVhZGVyczpcclxuICAgICAgICAiIiJBIHNlcXVlbmNlIG9mIHBhaXJzIGZvciBhbGwgaGVhZGVycy4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fbWVzc2FnZS5yYXdfaGVhZGVyc1xyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGlmX21vZGlmaWVkX3NpbmNlKHNlbGYpIC0+IE9wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXTpcclxuICAgICAgICAiIiJUaGUgdmFsdWUgb2YgSWYtTW9kaWZpZWQtU2luY2UgSFRUUCBoZWFkZXIsIG9yIE5vbmUuXHJcblxyXG4gICAgICAgIFRoaXMgaGVhZGVyIGlzIHJlcHJlc2VudGVkIGFzIGEgYGRhdGV0aW1lYCBvYmplY3QuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlX2h0dHBfZGF0ZShzZWxmLmhlYWRlcnMuZ2V0KGhkcnMuSUZfTU9ESUZJRURfU0lOQ0UpKVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGlmX3VubW9kaWZpZWRfc2luY2Uoc2VsZikgLT4gT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdOlxyXG4gICAgICAgICIiIlRoZSB2YWx1ZSBvZiBJZi1Vbm1vZGlmaWVkLVNpbmNlIEhUVFAgaGVhZGVyLCBvciBOb25lLlxyXG5cclxuICAgICAgICBUaGlzIGhlYWRlciBpcyByZXByZXNlbnRlZCBhcyBhIGBkYXRldGltZWAgb2JqZWN0LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBwYXJzZV9odHRwX2RhdGUoc2VsZi5oZWFkZXJzLmdldChoZHJzLklGX1VOTU9ESUZJRURfU0lOQ0UpKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfZXRhZ192YWx1ZXMoZXRhZ19oZWFkZXI6IHN0cikgLT4gSXRlcmF0b3JbRVRhZ106XHJcbiAgICAgICAgIiIiRXh0cmFjdCBgRVRhZ2Agb2JqZWN0cyBmcm9tIHJhdyBoZWFkZXIuIiIiXHJcbiAgICAgICAgaWYgZXRhZ19oZWFkZXIgPT0gRVRBR19BTlk6XHJcbiAgICAgICAgICAgIHlpZWxkIEVUYWcoXHJcbiAgICAgICAgICAgICAgICBpc193ZWFrPUZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU9RVRBR19BTlksXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBmb3IgbWF0Y2ggaW4gTElTVF9RVU9URURfRVRBR19SRS5maW5kaXRlcihldGFnX2hlYWRlcik6XHJcbiAgICAgICAgICAgICAgICBpc193ZWFrLCB2YWx1ZSwgZ2FyYmFnZSA9IG1hdGNoLmdyb3VwKDIsIDMsIDQpXHJcbiAgICAgICAgICAgICAgICAjIEFueSBzeW1ib2wgY2FwdHVyZWQgYnkgNHRoIGdyb3VwIG1lYW5zXHJcbiAgICAgICAgICAgICAgICAjIHRoYXQgdGhlIGZvbGxvd2luZyBzZXF1ZW5jZSBpcyBpbnZhbGlkLlxyXG4gICAgICAgICAgICAgICAgaWYgZ2FyYmFnZTpcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgICAgIHlpZWxkIEVUYWcoXHJcbiAgICAgICAgICAgICAgICAgICAgaXNfd2Vhaz1ib29sKGlzX3dlYWspLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXZhbHVlLFxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIF9pZl9tYXRjaF9vcl9ub25lX2ltcGwoXHJcbiAgICAgICAgY2xzLCBoZWFkZXJfdmFsdWU6IE9wdGlvbmFsW3N0cl1cclxuICAgICkgLT4gT3B0aW9uYWxbVHVwbGVbRVRhZywgLi4uXV06XHJcbiAgICAgICAgaWYgbm90IGhlYWRlcl92YWx1ZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICAgICAgcmV0dXJuIHR1cGxlKGNscy5fZXRhZ192YWx1ZXMoaGVhZGVyX3ZhbHVlKSlcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBpZl9tYXRjaChzZWxmKSAtPiBPcHRpb25hbFtUdXBsZVtFVGFnLCAuLi5dXTpcclxuICAgICAgICAiIiJUaGUgdmFsdWUgb2YgSWYtTWF0Y2ggSFRUUCBoZWFkZXIsIG9yIE5vbmUuXHJcblxyXG4gICAgICAgIFRoaXMgaGVhZGVyIGlzIHJlcHJlc2VudGVkIGFzIGEgYHR1cGxlYCBvZiBgRVRhZ2Agb2JqZWN0cy5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5faWZfbWF0Y2hfb3Jfbm9uZV9pbXBsKHNlbGYuaGVhZGVycy5nZXQoaGRycy5JRl9NQVRDSCkpXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgaWZfbm9uZV9tYXRjaChzZWxmKSAtPiBPcHRpb25hbFtUdXBsZVtFVGFnLCAuLi5dXTpcclxuICAgICAgICAiIiJUaGUgdmFsdWUgb2YgSWYtTm9uZS1NYXRjaCBIVFRQIGhlYWRlciwgb3IgTm9uZS5cclxuXHJcbiAgICAgICAgVGhpcyBoZWFkZXIgaXMgcmVwcmVzZW50ZWQgYXMgYSBgdHVwbGVgIG9mIGBFVGFnYCBvYmplY3RzLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9pZl9tYXRjaF9vcl9ub25lX2ltcGwoc2VsZi5oZWFkZXJzLmdldChoZHJzLklGX05PTkVfTUFUQ0gpKVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGlmX3JhbmdlKHNlbGYpIC0+IE9wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXTpcclxuICAgICAgICAiIiJUaGUgdmFsdWUgb2YgSWYtUmFuZ2UgSFRUUCBoZWFkZXIsIG9yIE5vbmUuXHJcblxyXG4gICAgICAgIFRoaXMgaGVhZGVyIGlzIHJlcHJlc2VudGVkIGFzIGEgYGRhdGV0aW1lYCBvYmplY3QuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlX2h0dHBfZGF0ZShzZWxmLmhlYWRlcnMuZ2V0KGhkcnMuSUZfUkFOR0UpKVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGtlZXBfYWxpdmUoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICAiIiJJcyBrZWVwYWxpdmUgZW5hYmxlZCBieSBjbGllbnQ/IiIiXHJcbiAgICAgICAgcmV0dXJuIG5vdCBzZWxmLl9tZXNzYWdlLnNob3VsZF9jbG9zZVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGNvb2tpZXMoc2VsZikgLT4gTWFwcGluZ1tzdHIsIHN0cl06XHJcbiAgICAgICAgIiIiUmV0dXJuIHJlcXVlc3QgY29va2llcy5cclxuXHJcbiAgICAgICAgQSByZWFkLW9ubHkgZGljdGlvbmFyeS1saWtlIG9iamVjdC5cclxuICAgICAgICAiIiJcclxuICAgICAgICByYXcgPSBzZWxmLmhlYWRlcnMuZ2V0KGhkcnMuQ09PS0lFLCAiIilcclxuICAgICAgICBwYXJzZWQgPSBTaW1wbGVDb29raWUocmF3KSAgIyB0eXBlOiBTaW1wbGVDb29raWVbc3RyXVxyXG4gICAgICAgIHJldHVybiBNYXBwaW5nUHJveHlUeXBlKHtrZXk6IHZhbC52YWx1ZSBmb3Iga2V5LCB2YWwgaW4gcGFyc2VkLml0ZW1zKCl9KVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGh0dHBfcmFuZ2Uoc2VsZikgLT4gc2xpY2U6XHJcbiAgICAgICAgIiIiVGhlIGNvbnRlbnQgb2YgUmFuZ2UgSFRUUCBoZWFkZXIuXHJcblxyXG4gICAgICAgIFJldHVybiBhIHNsaWNlIGluc3RhbmNlLlxyXG5cclxuICAgICAgICAiIiJcclxuICAgICAgICBybmcgPSBzZWxmLl9oZWFkZXJzLmdldChoZHJzLlJBTkdFKVxyXG4gICAgICAgIHN0YXJ0LCBlbmQgPSBOb25lLCBOb25lXHJcbiAgICAgICAgaWYgcm5nIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gciJeYnl0ZXM9KFxcZCopLShcXGQqKSQiXHJcbiAgICAgICAgICAgICAgICBzdGFydCwgZW5kID0gcmUuZmluZGFsbChwYXR0ZXJuLCBybmcpWzBdXHJcbiAgICAgICAgICAgIGV4Y2VwdCBJbmRleEVycm9yOiAgIyBwYXR0ZXJuIHdhcyBub3QgZm91bmQgaW4gaGVhZGVyXHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJyYW5nZSBub3QgaW4gYWNjZXB0YWJsZSBmb3JtYXQiKVxyXG5cclxuICAgICAgICAgICAgZW5kID0gaW50KGVuZCkgaWYgZW5kIGVsc2UgTm9uZVxyXG4gICAgICAgICAgICBzdGFydCA9IGludChzdGFydCkgaWYgc3RhcnQgZWxzZSBOb25lXHJcblxyXG4gICAgICAgICAgICBpZiBzdGFydCBpcyBOb25lIGFuZCBlbmQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAjIGVuZCB3aXRoIG5vIHN0YXJ0IGlzIHRvIHJldHVybiB0YWlsIG9mIGNvbnRlbnRcclxuICAgICAgICAgICAgICAgIHN0YXJ0ID0gLWVuZFxyXG4gICAgICAgICAgICAgICAgZW5kID0gTm9uZVxyXG5cclxuICAgICAgICAgICAgaWYgc3RhcnQgaXMgbm90IE5vbmUgYW5kIGVuZCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICMgZW5kIGlzIGluY2x1c2l2ZSBpbiByYW5nZSBoZWFkZXIsIGV4Y2x1c2l2ZSBmb3Igc2xpY2VcclxuICAgICAgICAgICAgICAgIGVuZCArPSAxXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgc3RhcnQgPj0gZW5kOlxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInN0YXJ0IGNhbm5vdCBiZSBhZnRlciBlbmQiKVxyXG5cclxuICAgICAgICAgICAgaWYgc3RhcnQgaXMgZW5kIGlzIE5vbmU6ICAjIE5vIHZhbGlkIHJhbmdlIHN1cHBsaWVkXHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJObyBzdGFydCBvciBlbmQgb2YgcmFuZ2Ugc3BlY2lmaWVkIilcclxuXHJcbiAgICAgICAgcmV0dXJuIHNsaWNlKHN0YXJ0LCBlbmQsIDEpXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgY29udGVudChzZWxmKSAtPiBTdHJlYW1SZWFkZXI6XHJcbiAgICAgICAgIiIiUmV0dXJuIHJhdyBwYXlsb2FkIHN0cmVhbS4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fcGF5bG9hZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGhhc19ib2R5KHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiUmV0dXJuIFRydWUgaWYgcmVxdWVzdFwncyBIVFRQIEJPRFkgY2FuIGJlIHJlYWQsIEZhbHNlIG90aGVyd2lzZS4iIiJcclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAiRGVwcmVjYXRlZCwgdXNlIC5jYW5fcmVhZF9ib2R5ICMyMDA1IiwgRGVwcmVjYXRpb25XYXJuaW5nLCBzdGFja2xldmVsPTJcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIG5vdCBzZWxmLl9wYXlsb2FkLmF0X2VvZigpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2FuX3JlYWRfYm9keShzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIlJldHVybiBUcnVlIGlmIHJlcXVlc3RcJ3MgSFRUUCBCT0RZIGNhbiBiZSByZWFkLCBGYWxzZSBvdGhlcndpc2UuIiIiXHJcbiAgICAgICAgcmV0dXJuIG5vdCBzZWxmLl9wYXlsb2FkLmF0X2VvZigpXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgYm9keV9leGlzdHMoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICAiIiJSZXR1cm4gVHJ1ZSBpZiByZXF1ZXN0IGhhcyBIVFRQIEJPRFksIEZhbHNlIG90aGVyd2lzZS4iIiJcclxuICAgICAgICByZXR1cm4gdHlwZShzZWxmLl9wYXlsb2FkKSBpcyBub3QgRW1wdHlTdHJlYW1SZWFkZXJcclxuXHJcbiAgICBhc3luYyBkZWYgcmVsZWFzZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlJlbGVhc2UgcmVxdWVzdC5cclxuXHJcbiAgICAgICAgRWF0IHVucmVhZCBwYXJ0IG9mIEhUVFAgQk9EWSBpZiBwcmVzZW50LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHdoaWxlIG5vdCBzZWxmLl9wYXlsb2FkLmF0X2VvZigpOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9wYXlsb2FkLnJlYWRhbnkoKVxyXG5cclxuICAgIGFzeW5jIGRlZiByZWFkKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlJlYWQgcmVxdWVzdCBib2R5IGlmIHByZXNlbnQuXHJcblxyXG4gICAgICAgIFJldHVybnMgYnl0ZXMgb2JqZWN0IHdpdGggZnVsbCByZXF1ZXN0IGNvbnRlbnQuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fcmVhZF9ieXRlcyBpcyBOb25lOlxyXG4gICAgICAgICAgICBib2R5ID0gYnl0ZWFycmF5KClcclxuICAgICAgICAgICAgd2hpbGUgVHJ1ZTpcclxuICAgICAgICAgICAgICAgIGNodW5rID0gYXdhaXQgc2VsZi5fcGF5bG9hZC5yZWFkYW55KClcclxuICAgICAgICAgICAgICAgIGJvZHkuZXh0ZW5kKGNodW5rKVxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fY2xpZW50X21heF9zaXplOlxyXG4gICAgICAgICAgICAgICAgICAgIGJvZHlfc2l6ZSA9IGxlbihib2R5KVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGJvZHlfc2l6ZSA+PSBzZWxmLl9jbGllbnRfbWF4X3NpemU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIEhUVFBSZXF1ZXN0RW50aXR5VG9vTGFyZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfc2l6ZT1zZWxmLl9jbGllbnRfbWF4X3NpemUsIGFjdHVhbF9zaXplPWJvZHlfc2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBpZiBub3QgY2h1bms6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgc2VsZi5fcmVhZF9ieXRlcyA9IGJ5dGVzKGJvZHkpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWRfYnl0ZXNcclxuXHJcbiAgICBhc3luYyBkZWYgdGV4dChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiUmV0dXJuIEJPRFkgYXMgdGV4dCB1c2luZyBlbmNvZGluZyBmcm9tIC5jaGFyc2V0LiIiIlxyXG4gICAgICAgIGJ5dGVzX2JvZHkgPSBhd2FpdCBzZWxmLnJlYWQoKVxyXG4gICAgICAgIGVuY29kaW5nID0gc2VsZi5jaGFyc2V0IG9yICJ1dGYtOCJcclxuICAgICAgICByZXR1cm4gYnl0ZXNfYm9keS5kZWNvZGUoZW5jb2RpbmcpXHJcblxyXG4gICAgYXN5bmMgZGVmIGpzb24oc2VsZiwgKiwgbG9hZHM6IEpTT05EZWNvZGVyID0gREVGQVVMVF9KU09OX0RFQ09ERVIpIC0+IEFueTpcclxuICAgICAgICAiIiJSZXR1cm4gQk9EWSBhcyBKU09OLiIiIlxyXG4gICAgICAgIGJvZHkgPSBhd2FpdCBzZWxmLnRleHQoKVxyXG4gICAgICAgIHJldHVybiBsb2Fkcyhib2R5KVxyXG5cclxuICAgIGFzeW5jIGRlZiBtdWx0aXBhcnQoc2VsZikgLT4gTXVsdGlwYXJ0UmVhZGVyOlxyXG4gICAgICAgICIiIlJldHVybiBhc3luYyBpdGVyYXRvciB0byBwcm9jZXNzIEJPRFkgYXMgbXVsdGlwYXJ0LiIiIlxyXG4gICAgICAgIHJldHVybiBNdWx0aXBhcnRSZWFkZXIoc2VsZi5faGVhZGVycywgc2VsZi5fcGF5bG9hZClcclxuXHJcbiAgICBhc3luYyBkZWYgcG9zdChzZWxmKSAtPiAiTXVsdGlEaWN0UHJveHlbVW5pb25bc3RyLCBieXRlcywgRmlsZUZpZWxkXV0iOlxyXG4gICAgICAgICIiIlJldHVybiBQT1NUIHBhcmFtZXRlcnMuIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fcG9zdCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Bvc3RcclxuICAgICAgICBpZiBzZWxmLl9tZXRob2Qgbm90IGluIHNlbGYuUE9TVF9NRVRIT0RTOlxyXG4gICAgICAgICAgICBzZWxmLl9wb3N0ID0gTXVsdGlEaWN0UHJveHkoTXVsdGlEaWN0KCkpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9wb3N0XHJcblxyXG4gICAgICAgIGNvbnRlbnRfdHlwZSA9IHNlbGYuY29udGVudF90eXBlXHJcbiAgICAgICAgaWYgY29udGVudF90eXBlIG5vdCBpbiAoXHJcbiAgICAgICAgICAgICIiLFxyXG4gICAgICAgICAgICAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIixcclxuICAgICAgICAgICAgIm11bHRpcGFydC9mb3JtLWRhdGEiLFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHNlbGYuX3Bvc3QgPSBNdWx0aURpY3RQcm94eShNdWx0aURpY3QoKSlcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Bvc3RcclxuXHJcbiAgICAgICAgb3V0ID0gTXVsdGlEaWN0KCkgICMgdHlwZTogTXVsdGlEaWN0W1VuaW9uW3N0ciwgYnl0ZXMsIEZpbGVGaWVsZF1dXHJcblxyXG4gICAgICAgIGlmIGNvbnRlbnRfdHlwZSA9PSAibXVsdGlwYXJ0L2Zvcm0tZGF0YSI6XHJcbiAgICAgICAgICAgIG11bHRpcGFydCA9IGF3YWl0IHNlbGYubXVsdGlwYXJ0KClcclxuICAgICAgICAgICAgbWF4X3NpemUgPSBzZWxmLl9jbGllbnRfbWF4X3NpemVcclxuXHJcbiAgICAgICAgICAgIGZpZWxkID0gYXdhaXQgbXVsdGlwYXJ0Lm5leHQoKVxyXG4gICAgICAgICAgICB3aGlsZSBmaWVsZCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIHNpemUgPSAwXHJcbiAgICAgICAgICAgICAgICBmaWVsZF9jdCA9IGZpZWxkLmhlYWRlcnMuZ2V0KGhkcnMuQ09OVEVOVF9UWVBFKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoZmllbGQsIEJvZHlQYXJ0UmVhZGVyKTpcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQgZmllbGQubmFtZSBpcyBub3QgTm9uZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAjIE5vdGUgdGhhdCBhY2NvcmRpbmcgdG8gUkZDIDc1NzgsIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgIyBpcyBvcHRpb25hbCwgZXZlbiBmb3IgZmlsZXMsIHNvIHdlIGNhblwndCBhc3N1bWUgaXRcJ3NcclxuICAgICAgICAgICAgICAgICAgICAjIHByZXNlbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgIyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzU3OCNzZWN0aW9uLTQuNFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGZpZWxkLmZpbGVuYW1lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjIHN0b3JlIGZpbGUgaW4gdGVtcCBmaWxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IHRlbXBmaWxlLlRlbXBvcmFyeUZpbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGF3YWl0IGZpZWxkLnJlYWRfY2h1bmsoc2l6ZT0yICoqIDE2KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSBjaHVuazpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gZmllbGQuZGVjb2RlKGNodW5rKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLndyaXRlKGNodW5rKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSArPSBsZW4oY2h1bmspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAwIDwgbWF4X3NpemUgPCBzaXplOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcC5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgSFRUUFJlcXVlc3RFbnRpdHlUb29MYXJnZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3NpemU9bWF4X3NpemUsIGFjdHVhbF9zaXplPXNpemVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGF3YWl0IGZpZWxkLnJlYWRfY2h1bmsoc2l6ZT0yICoqIDE2KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bXAuc2VlaygwKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgZmllbGRfY3QgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2N0ID0gImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZmID0gRmlsZUZpZWxkKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmZpbGVuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzdChpby5CdWZmZXJlZFJlYWRlciwgdG1wKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2N0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQuYWRkKGZpZWxkLm5hbWUsIGZmKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICMgZGVhbCB3aXRoIG9yZGluYXJ5IGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhd2FpdCBmaWVsZC5yZWFkKGRlY29kZT1UcnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBmaWVsZF9jdCBpcyBOb25lIG9yIGZpZWxkX2N0LnN0YXJ0c3dpdGgoInRleHQvIik6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyc2V0ID0gZmllbGQuZ2V0X2NoYXJzZXQoZGVmYXVsdD0idXRmLTgiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0LmFkZChmaWVsZC5uYW1lLCB2YWx1ZS5kZWNvZGUoY2hhcnNldCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXQuYWRkKGZpZWxkLm5hbWUsIHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplICs9IGxlbih2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgMCA8IG1heF9zaXplIDwgc2l6ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIEhUVFBSZXF1ZXN0RW50aXR5VG9vTGFyZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3NpemU9bWF4X3NpemUsIGFjdHVhbF9zaXplPXNpemVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgIlRvIGRlY29kZSBuZXN0ZWQgbXVsdGlwYXJ0IHlvdSBuZWVkICIgInRvIHVzZSBjdXN0b20gcmVhZGVyIixcclxuICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAgICAgZmllbGQgPSBhd2FpdCBtdWx0aXBhcnQubmV4dCgpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgZGF0YSA9IGF3YWl0IHNlbGYucmVhZCgpXHJcbiAgICAgICAgICAgIGlmIGRhdGE6XHJcbiAgICAgICAgICAgICAgICBjaGFyc2V0ID0gc2VsZi5jaGFyc2V0IG9yICJ1dGYtOCJcclxuICAgICAgICAgICAgICAgIG91dC5leHRlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VfcXNsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnJzdHJpcCgpLmRlY29kZShjaGFyc2V0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAga2VlcF9ibGFua192YWx1ZXM9VHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc9Y2hhcnNldCxcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3Bvc3QgPSBNdWx0aURpY3RQcm94eShvdXQpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Bvc3RcclxuXHJcbiAgICBkZWYgZ2V0X2V4dHJhX2luZm8oc2VsZiwgbmFtZTogc3RyLCBkZWZhdWx0OiBBbnkgPSBOb25lKSAtPiBBbnk6XHJcbiAgICAgICAgIiIiRXh0cmEgaW5mbyBmcm9tIHByb3RvY29sIHRyYW5zcG9ydCIiIlxyXG4gICAgICAgIHByb3RvY29sID0gc2VsZi5fcHJvdG9jb2xcclxuICAgICAgICBpZiBwcm90b2NvbCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFxyXG5cclxuICAgICAgICB0cmFuc3BvcnQgPSBwcm90b2NvbC50cmFuc3BvcnRcclxuICAgICAgICBpZiB0cmFuc3BvcnQgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRcclxuXHJcbiAgICAgICAgcmV0dXJuIHRyYW5zcG9ydC5nZXRfZXh0cmFfaW5mbyhuYW1lLCBkZWZhdWx0KVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgYXNjaWlfZW5jb2RhYmxlX3BhdGggPSBzZWxmLnBhdGguZW5jb2RlKCJhc2NpaSIsICJiYWNrc2xhc2hyZXBsYWNlIikuZGVjb2RlKFxyXG4gICAgICAgICAgICAiYXNjaWkiXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiAiPHt9IHt9IHt9ID4iLmZvcm1hdChcclxuICAgICAgICAgICAgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIHNlbGYuX21ldGhvZCwgYXNjaWlfZW5jb2RhYmxlX3BhdGhcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBpZChzZWxmKSA9PSBpZChvdGhlcilcclxuXHJcbiAgICBkZWYgX19ib29sX18oc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgIGFzeW5jIGRlZiBfcHJlcGFyZV9ob29rKHNlbGYsIHJlc3BvbnNlOiBTdHJlYW1SZXNwb25zZSkgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm5cclxuXHJcbiAgICBkZWYgX2NhbmNlbChzZWxmLCBleGM6IEJhc2VFeGNlcHRpb24pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZC5zZXRfZXhjZXB0aW9uKGV4YylcclxuXHJcblxyXG5jbGFzcyBSZXF1ZXN0KEJhc2VSZXF1ZXN0KTpcclxuXHJcbiAgICBBVFRSUyA9IEJhc2VSZXF1ZXN0LkFUVFJTIHwgZnJvemVuc2V0KFsiX21hdGNoX2luZm8iXSlcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3M6IEFueSwgKiprd2FyZ3M6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKCphcmdzLCAqKmt3YXJncylcclxuXHJcbiAgICAgICAgIyBtYXRjaGRpY3QsIHJvdXRlX25hbWUsIGhhbmRsZXJcclxuICAgICAgICAjIG9yIGluZm9ybWF0aW9uIGFib3V0IHRyYXZlcnNhbCBsb29rdXBcclxuXHJcbiAgICAgICAgIyBpbml0aWFsaXplZCBhZnRlciByb3V0ZSByZXNvbHZpbmdcclxuICAgICAgICBzZWxmLl9tYXRjaF9pbmZvID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtVcmxNYXBwaW5nTWF0Y2hJbmZvXVxyXG5cclxuICAgIGlmIERFQlVHOlxyXG5cclxuICAgICAgICBkZWYgX19zZXRhdHRyX18oc2VsZiwgbmFtZTogc3RyLCB2YWw6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICAgICAgaWYgbmFtZSBub3QgaW4gc2VsZi5BVFRSUzpcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAgICAgIlNldHRpbmcgY3VzdG9tIHt9Lnt9IGF0dHJpYnV0ZSAiXHJcbiAgICAgICAgICAgICAgICAgICAgImlzIGRpc2NvdXJhZ2VkIi5mb3JtYXQoc2VsZi5fX2NsYXNzX18uX19uYW1lX18sIG5hbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHN1cGVyKCkuX19zZXRhdHRyX18obmFtZSwgdmFsKVxyXG5cclxuICAgIGRlZiBjbG9uZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgbWV0aG9kOiBzdHIgPSBzZW50aW5lbCxcclxuICAgICAgICByZWxfdXJsOiBTdHJPclVSTCA9IHNlbnRpbmVsLFxyXG4gICAgICAgIGhlYWRlcnM6IExvb3NlSGVhZGVycyA9IHNlbnRpbmVsLFxyXG4gICAgICAgIHNjaGVtZTogc3RyID0gc2VudGluZWwsXHJcbiAgICAgICAgaG9zdDogc3RyID0gc2VudGluZWwsXHJcbiAgICAgICAgcmVtb3RlOiBzdHIgPSBzZW50aW5lbCxcclxuICAgICkgLT4gIlJlcXVlc3QiOlxyXG4gICAgICAgIHJldCA9IHN1cGVyKCkuY2xvbmUoXHJcbiAgICAgICAgICAgIG1ldGhvZD1tZXRob2QsXHJcbiAgICAgICAgICAgIHJlbF91cmw9cmVsX3VybCxcclxuICAgICAgICAgICAgaGVhZGVycz1oZWFkZXJzLFxyXG4gICAgICAgICAgICBzY2hlbWU9c2NoZW1lLFxyXG4gICAgICAgICAgICBob3N0PWhvc3QsXHJcbiAgICAgICAgICAgIHJlbW90ZT1yZW1vdGUsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIG5ld19yZXQgPSBjYXN0KFJlcXVlc3QsIHJldClcclxuICAgICAgICBuZXdfcmV0Ll9tYXRjaF9pbmZvID0gc2VsZi5fbWF0Y2hfaW5mb1xyXG4gICAgICAgIHJldHVybiBuZXdfcmV0XHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgbWF0Y2hfaW5mbyhzZWxmKSAtPiAiVXJsTWFwcGluZ01hdGNoSW5mbyI6XHJcbiAgICAgICAgIiIiUmVzdWx0IG9mIHJvdXRlIHJlc29sdmluZy4iIiJcclxuICAgICAgICBtYXRjaF9pbmZvID0gc2VsZi5fbWF0Y2hfaW5mb1xyXG4gICAgICAgIGFzc2VydCBtYXRjaF9pbmZvIGlzIG5vdCBOb25lXHJcbiAgICAgICAgcmV0dXJuIG1hdGNoX2luZm9cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBhcHAoc2VsZikgLT4gIkFwcGxpY2F0aW9uIjpcclxuICAgICAgICAiIiJBcHBsaWNhdGlvbiBpbnN0YW5jZS4iIiJcclxuICAgICAgICBtYXRjaF9pbmZvID0gc2VsZi5fbWF0Y2hfaW5mb1xyXG4gICAgICAgIGFzc2VydCBtYXRjaF9pbmZvIGlzIG5vdCBOb25lXHJcbiAgICAgICAgcmV0dXJuIG1hdGNoX2luZm8uY3VycmVudF9hcHBcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb25maWdfZGljdChzZWxmKSAtPiBDaGFpbk1hcFByb3h5OlxyXG4gICAgICAgIG1hdGNoX2luZm8gPSBzZWxmLl9tYXRjaF9pbmZvXHJcbiAgICAgICAgYXNzZXJ0IG1hdGNoX2luZm8gaXMgbm90IE5vbmVcclxuICAgICAgICBsc3QgPSBtYXRjaF9pbmZvLmFwcHNcclxuICAgICAgICBhcHAgPSBzZWxmLmFwcFxyXG4gICAgICAgIGlkeCA9IGxzdC5pbmRleChhcHApXHJcbiAgICAgICAgc3VibGlzdCA9IGxpc3QocmV2ZXJzZWQobHN0WzogaWR4ICsgMV0pKVxyXG4gICAgICAgIHJldHVybiBDaGFpbk1hcFByb3h5KHN1Ymxpc3QpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9wcmVwYXJlX2hvb2soc2VsZiwgcmVzcG9uc2U6IFN0cmVhbVJlc3BvbnNlKSAtPiBOb25lOlxyXG4gICAgICAgIG1hdGNoX2luZm8gPSBzZWxmLl9tYXRjaF9pbmZvXHJcbiAgICAgICAgaWYgbWF0Y2hfaW5mbyBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBmb3IgYXBwIGluIG1hdGNoX2luZm8uX2FwcHM6XHJcbiAgICAgICAgICAgIGF3YWl0IGFwcC5vbl9yZXNwb25zZV9wcmVwYXJlLnNlbmQoc2VsZiwgcmVzcG9uc2UpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL211bHRpcGFydC5weScsIGInaW1wb3J0IGJhc2U2NFxyXG5pbXBvcnQgYmluYXNjaWlcclxuaW1wb3J0IGpzb25cclxuaW1wb3J0IHJlXHJcbmltcG9ydCB1dWlkXHJcbmltcG9ydCB3YXJuaW5nc1xyXG5pbXBvcnQgemxpYlxyXG5mcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZXF1ZVxyXG5mcm9tIHR5cGVzIGltcG9ydCBUcmFjZWJhY2tUeXBlXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBUWVBFX0NIRUNLSU5HLFxyXG4gICAgQW55LFxyXG4gICAgQXN5bmNJdGVyYXRvcixcclxuICAgIERlcXVlLFxyXG4gICAgRGljdCxcclxuICAgIEl0ZXJhdG9yLFxyXG4gICAgTGlzdCxcclxuICAgIE1hcHBpbmcsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFNlcXVlbmNlLFxyXG4gICAgVHVwbGUsXHJcbiAgICBUeXBlLFxyXG4gICAgVW5pb24sXHJcbiAgICBjYXN0LFxyXG4pXHJcbmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCBwYXJzZV9xc2wsIHVucXVvdGUsIHVybGVuY29kZVxyXG5cclxuZnJvbSBtdWx0aWRpY3QgaW1wb3J0IENJTXVsdGlEaWN0LCBDSU11bHRpRGljdFByb3h5LCBNdWx0aU1hcHBpbmdcclxuXHJcbmZyb20gLmhkcnMgaW1wb3J0IChcclxuICAgIENPTlRFTlRfRElTUE9TSVRJT04sXHJcbiAgICBDT05URU5UX0VOQ09ESU5HLFxyXG4gICAgQ09OVEVOVF9MRU5HVEgsXHJcbiAgICBDT05URU5UX1RSQU5TRkVSX0VOQ09ESU5HLFxyXG4gICAgQ09OVEVOVF9UWVBFLFxyXG4pXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IENIQVIsIFRPS0VOLCBwYXJzZV9taW1ldHlwZSwgcmVpZnlcclxuZnJvbSAuaHR0cCBpbXBvcnQgSGVhZGVyc1BhcnNlclxyXG5mcm9tIC5wYXlsb2FkIGltcG9ydCAoXHJcbiAgICBKc29uUGF5bG9hZCxcclxuICAgIExvb2t1cEVycm9yLFxyXG4gICAgT3JkZXIsXHJcbiAgICBQYXlsb2FkLFxyXG4gICAgU3RyaW5nUGF5bG9hZCxcclxuICAgIGdldF9wYXlsb2FkLFxyXG4gICAgcGF5bG9hZF90eXBlLFxyXG4pXHJcbmZyb20gLnN0cmVhbXMgaW1wb3J0IFN0cmVhbVJlYWRlclxyXG5cclxuX19hbGxfXyA9IChcclxuICAgICJNdWx0aXBhcnRSZWFkZXIiLFxyXG4gICAgIk11bHRpcGFydFdyaXRlciIsXHJcbiAgICAiQm9keVBhcnRSZWFkZXIiLFxyXG4gICAgIkJhZENvbnRlbnREaXNwb3NpdGlvbkhlYWRlciIsXHJcbiAgICAiQmFkQ29udGVudERpc3Bvc2l0aW9uUGFyYW0iLFxyXG4gICAgInBhcnNlX2NvbnRlbnRfZGlzcG9zaXRpb24iLFxyXG4gICAgImNvbnRlbnRfZGlzcG9zaXRpb25fZmlsZW5hbWUiLFxyXG4pXHJcblxyXG5cclxuaWYgVFlQRV9DSEVDS0lORzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgZnJvbSAuY2xpZW50X3JlcXJlcCBpbXBvcnQgQ2xpZW50UmVzcG9uc2VcclxuXHJcblxyXG5jbGFzcyBCYWRDb250ZW50RGlzcG9zaXRpb25IZWFkZXIoUnVudGltZVdhcm5pbmcpOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbmNsYXNzIEJhZENvbnRlbnREaXNwb3NpdGlvblBhcmFtKFJ1bnRpbWVXYXJuaW5nKTpcclxuICAgIHBhc3NcclxuXHJcblxyXG5kZWYgcGFyc2VfY29udGVudF9kaXNwb3NpdGlvbihcclxuICAgIGhlYWRlcjogT3B0aW9uYWxbc3RyXSxcclxuKSAtPiBUdXBsZVtPcHRpb25hbFtzdHJdLCBEaWN0W3N0ciwgc3RyXV06XHJcbiAgICBkZWYgaXNfdG9rZW4oc3RyaW5nOiBzdHIpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIGJvb2woc3RyaW5nKSBhbmQgVE9LRU4gPj0gc2V0KHN0cmluZylcclxuXHJcbiAgICBkZWYgaXNfcXVvdGVkKHN0cmluZzogc3RyKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzdHJpbmdbMF0gPT0gc3RyaW5nWy0xXSA9PSBcJyJcJ1xyXG5cclxuICAgIGRlZiBpc19yZmM1OTg3KHN0cmluZzogc3RyKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBpc190b2tlbihzdHJpbmcpIGFuZCBzdHJpbmcuY291bnQoIlwnIikgPT0gMlxyXG5cclxuICAgIGRlZiBpc19leHRlbmRlZF9wYXJhbShzdHJpbmc6IHN0cikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc3RyaW5nLmVuZHN3aXRoKCIqIilcclxuXHJcbiAgICBkZWYgaXNfY29udGludW91c19wYXJhbShzdHJpbmc6IHN0cikgLT4gYm9vbDpcclxuICAgICAgICBwb3MgPSBzdHJpbmcuZmluZCgiKiIpICsgMVxyXG4gICAgICAgIGlmIG5vdCBwb3M6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIHN1YnN0cmluZyA9IHN0cmluZ1twb3M6LTFdIGlmIHN0cmluZy5lbmRzd2l0aCgiKiIpIGVsc2Ugc3RyaW5nW3BvczpdXHJcbiAgICAgICAgcmV0dXJuIHN1YnN0cmluZy5pc2RpZ2l0KClcclxuXHJcbiAgICBkZWYgdW5lc2NhcGUodGV4dDogc3RyLCAqLCBjaGFyczogc3RyID0gIiIuam9pbihtYXAocmUuZXNjYXBlLCBDSEFSKSkpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gcmUuc3ViKGYiXFxcXFxcXFwoW3tjaGFyc31dKSIsICJcXFxcMSIsIHRleHQpXHJcblxyXG4gICAgaWYgbm90IGhlYWRlcjpcclxuICAgICAgICByZXR1cm4gTm9uZSwge31cclxuXHJcbiAgICBkaXNwdHlwZSwgKnBhcnRzID0gaGVhZGVyLnNwbGl0KCI7IilcclxuICAgIGlmIG5vdCBpc190b2tlbihkaXNwdHlwZSk6XHJcbiAgICAgICAgd2FybmluZ3Mud2FybihCYWRDb250ZW50RGlzcG9zaXRpb25IZWFkZXIoaGVhZGVyKSlcclxuICAgICAgICByZXR1cm4gTm9uZSwge31cclxuXHJcbiAgICBwYXJhbXMgPSB7fSAgIyB0eXBlOiBEaWN0W3N0ciwgc3RyXVxyXG4gICAgd2hpbGUgcGFydHM6XHJcbiAgICAgICAgaXRlbSA9IHBhcnRzLnBvcCgwKVxyXG5cclxuICAgICAgICBpZiAiPSIgbm90IGluIGl0ZW06XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oQmFkQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyKGhlYWRlcikpXHJcbiAgICAgICAgICAgIHJldHVybiBOb25lLCB7fVxyXG5cclxuICAgICAgICBrZXksIHZhbHVlID0gaXRlbS5zcGxpdCgiPSIsIDEpXHJcbiAgICAgICAga2V5ID0ga2V5Lmxvd2VyKCkuc3RyaXAoKVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUubHN0cmlwKClcclxuXHJcbiAgICAgICAgaWYga2V5IGluIHBhcmFtczpcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihCYWRDb250ZW50RGlzcG9zaXRpb25IZWFkZXIoaGVhZGVyKSlcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmUsIHt9XHJcblxyXG4gICAgICAgIGlmIG5vdCBpc190b2tlbihrZXkpOlxyXG4gICAgICAgICAgICB3YXJuaW5ncy53YXJuKEJhZENvbnRlbnREaXNwb3NpdGlvblBhcmFtKGl0ZW0pKVxyXG4gICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICBlbGlmIGlzX2NvbnRpbnVvdXNfcGFyYW0oa2V5KTpcclxuICAgICAgICAgICAgaWYgaXNfcXVvdGVkKHZhbHVlKTpcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdW5lc2NhcGUodmFsdWVbMTotMV0pXHJcbiAgICAgICAgICAgIGVsaWYgbm90IGlzX3Rva2VuKHZhbHVlKTpcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oQmFkQ29udGVudERpc3Bvc2l0aW9uUGFyYW0oaXRlbSkpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICBlbGlmIGlzX2V4dGVuZGVkX3BhcmFtKGtleSk6XHJcbiAgICAgICAgICAgIGlmIGlzX3JmYzU5ODcodmFsdWUpOlxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcsIF8sIHZhbHVlID0gdmFsdWUuc3BsaXQoIlwnIiwgMilcclxuICAgICAgICAgICAgICAgIGVuY29kaW5nID0gZW5jb2Rpbmcgb3IgInV0Zi04IlxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybihCYWRDb250ZW50RGlzcG9zaXRpb25QYXJhbShpdGVtKSlcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHVucXVvdGUodmFsdWUsIGVuY29kaW5nLCAic3RyaWN0IilcclxuICAgICAgICAgICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvcjogICMgcHJhZ21hOiBub2NvdmVyXHJcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKEJhZENvbnRlbnREaXNwb3NpdGlvblBhcmFtKGl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgZmFpbGVkID0gVHJ1ZVxyXG4gICAgICAgICAgICBpZiBpc19xdW90ZWQodmFsdWUpOlxyXG4gICAgICAgICAgICAgICAgZmFpbGVkID0gRmFsc2VcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdW5lc2NhcGUodmFsdWVbMTotMV0ubHN0cmlwKCJcXFxcLyIpKVxyXG4gICAgICAgICAgICBlbGlmIGlzX3Rva2VuKHZhbHVlKTpcclxuICAgICAgICAgICAgICAgIGZhaWxlZCA9IEZhbHNlXHJcbiAgICAgICAgICAgIGVsaWYgcGFydHM6XHJcbiAgICAgICAgICAgICAgICAjIG1heWJlIGp1c3QgOyBpbiBmaWxlbmFtZSwgaW4gYW55IGNhc2UgdGhpcyBpcyBqdXN0XHJcbiAgICAgICAgICAgICAgICAjIG9uZSBjYXNlIGZpeCwgZm9yIHByb3BlciBmaXggd2UgbmVlZCB0byByZWRlc2lnbiBwYXJzZXJcclxuICAgICAgICAgICAgICAgIF92YWx1ZSA9IGYie3ZhbHVlfTt7cGFydHNbMF19IlxyXG4gICAgICAgICAgICAgICAgaWYgaXNfcXVvdGVkKF92YWx1ZSk6XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydHMucG9wKDApXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB1bmVzY2FwZShfdmFsdWVbMTotMV0ubHN0cmlwKCJcXFxcLyIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGZhaWxlZCA9IEZhbHNlXHJcblxyXG4gICAgICAgICAgICBpZiBmYWlsZWQ6XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKEJhZENvbnRlbnREaXNwb3NpdGlvbkhlYWRlcihoZWFkZXIpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUsIHt9XHJcblxyXG4gICAgICAgIHBhcmFtc1trZXldID0gdmFsdWVcclxuXHJcbiAgICByZXR1cm4gZGlzcHR5cGUubG93ZXIoKSwgcGFyYW1zXHJcblxyXG5cclxuZGVmIGNvbnRlbnRfZGlzcG9zaXRpb25fZmlsZW5hbWUoXHJcbiAgICBwYXJhbXM6IE1hcHBpbmdbc3RyLCBzdHJdLCBuYW1lOiBzdHIgPSAiZmlsZW5hbWUiXHJcbikgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgIG5hbWVfc3VmID0gIiVzKiIgJSBuYW1lXHJcbiAgICBpZiBub3QgcGFyYW1zOlxyXG4gICAgICAgIHJldHVybiBOb25lXHJcbiAgICBlbGlmIG5hbWVfc3VmIGluIHBhcmFtczpcclxuICAgICAgICByZXR1cm4gcGFyYW1zW25hbWVfc3VmXVxyXG4gICAgZWxpZiBuYW1lIGluIHBhcmFtczpcclxuICAgICAgICByZXR1cm4gcGFyYW1zW25hbWVdXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIHBhcnRzID0gW11cclxuICAgICAgICBmbnBhcmFtcyA9IHNvcnRlZChcclxuICAgICAgICAgICAgKGtleSwgdmFsdWUpIGZvciBrZXksIHZhbHVlIGluIHBhcmFtcy5pdGVtcygpIGlmIGtleS5zdGFydHN3aXRoKG5hbWVfc3VmKVxyXG4gICAgICAgIClcclxuICAgICAgICBmb3IgbnVtLCAoa2V5LCB2YWx1ZSkgaW4gZW51bWVyYXRlKGZucGFyYW1zKTpcclxuICAgICAgICAgICAgXywgdGFpbCA9IGtleS5zcGxpdCgiKiIsIDEpXHJcbiAgICAgICAgICAgIGlmIHRhaWwuZW5kc3dpdGgoIioiKTpcclxuICAgICAgICAgICAgICAgIHRhaWwgPSB0YWlsWzotMV1cclxuICAgICAgICAgICAgaWYgdGFpbCA9PSBzdHIobnVtKTpcclxuICAgICAgICAgICAgICAgIHBhcnRzLmFwcGVuZCh2YWx1ZSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgaWYgbm90IHBhcnRzOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIHZhbHVlID0gIiIuam9pbihwYXJ0cylcclxuICAgICAgICBpZiAiXCciIGluIHZhbHVlOlxyXG4gICAgICAgICAgICBlbmNvZGluZywgXywgdmFsdWUgPSB2YWx1ZS5zcGxpdCgiXCciLCAyKVxyXG4gICAgICAgICAgICBlbmNvZGluZyA9IGVuY29kaW5nIG9yICJ1dGYtOCJcclxuICAgICAgICAgICAgcmV0dXJuIHVucXVvdGUodmFsdWUsIGVuY29kaW5nLCAic3RyaWN0IilcclxuICAgICAgICByZXR1cm4gdmFsdWVcclxuXHJcblxyXG5jbGFzcyBNdWx0aXBhcnRSZXNwb25zZVdyYXBwZXI6XHJcbiAgICAiIiJXcmFwcGVyIGFyb3VuZCB0aGUgTXVsdGlwYXJ0UmVhZGVyLlxyXG5cclxuICAgIEl0IHRha2VzIGNhcmUgYWJvdXRcclxuICAgIHVuZGVybHlpbmcgY29ubmVjdGlvbiBhbmQgY2xvc2UgaXQgd2hlbiBpdCBuZWVkcyBpbi5cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHJlc3A6ICJDbGllbnRSZXNwb25zZSIsXHJcbiAgICAgICAgc3RyZWFtOiAiTXVsdGlwYXJ0UmVhZGVyIixcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLnJlc3AgPSByZXNwXHJcbiAgICAgICAgc2VsZi5zdHJlYW0gPSBzdHJlYW1cclxuXHJcbiAgICBkZWYgX19haXRlcl9fKHNlbGYpIC0+ICJNdWx0aXBhcnRSZXNwb25zZVdyYXBwZXIiOlxyXG4gICAgICAgIHJldHVybiBzZWxmXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYW5leHRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiBVbmlvblsiTXVsdGlwYXJ0UmVhZGVyIiwgIkJvZHlQYXJ0UmVhZGVyIl06XHJcbiAgICAgICAgcGFydCA9IGF3YWl0IHNlbGYubmV4dCgpXHJcbiAgICAgICAgaWYgcGFydCBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBTdG9wQXN5bmNJdGVyYXRpb25cclxuICAgICAgICByZXR1cm4gcGFydFxyXG5cclxuICAgIGRlZiBhdF9lb2Yoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICAiIiJSZXR1cm5zIFRydWUgd2hlbiBhbGwgcmVzcG9uc2UgZGF0YSBoYWQgYmVlbiByZWFkLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLnJlc3AuY29udGVudC5hdF9lb2YoKVxyXG5cclxuICAgIGFzeW5jIGRlZiBuZXh0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IE9wdGlvbmFsW1VuaW9uWyJNdWx0aXBhcnRSZWFkZXIiLCAiQm9keVBhcnRSZWFkZXIiXV06XHJcbiAgICAgICAgIiIiRW1pdHMgbmV4dCBtdWx0aXBhcnQgcmVhZGVyIG9iamVjdC4iIiJcclxuICAgICAgICBpdGVtID0gYXdhaXQgc2VsZi5zdHJlYW0ubmV4dCgpXHJcbiAgICAgICAgaWYgc2VsZi5zdHJlYW0uYXRfZW9mKCk6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYucmVsZWFzZSgpXHJcbiAgICAgICAgcmV0dXJuIGl0ZW1cclxuXHJcbiAgICBhc3luYyBkZWYgcmVsZWFzZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlJlbGVhc2UgdGhlIGNvbm5lY3Rpb24gZ3JhY2VmdWxseS5cclxuXHJcbiAgICAgICAgQWxsIHJlbWFpbmluZyBjb250ZW50IGlzIHJlYWQgdG8gdGhlIHZvaWQuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgYXdhaXQgc2VsZi5yZXNwLnJlbGVhc2UoKVxyXG5cclxuXHJcbmNsYXNzIEJvZHlQYXJ0UmVhZGVyOlxyXG4gICAgIiIiTXVsdGlwYXJ0IHJlYWRlciBmb3Igc2luZ2xlIGJvZHkgcGFydC4iIiJcclxuXHJcbiAgICBjaHVua19zaXplID0gODE5MlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLCBib3VuZGFyeTogYnl0ZXMsIGhlYWRlcnM6ICJDSU11bHRpRGljdFByb3h5W3N0cl0iLCBjb250ZW50OiBTdHJlYW1SZWFkZXJcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmhlYWRlcnMgPSBoZWFkZXJzXHJcbiAgICAgICAgc2VsZi5fYm91bmRhcnkgPSBib3VuZGFyeVxyXG4gICAgICAgIHNlbGYuX2NvbnRlbnQgPSBjb250ZW50XHJcbiAgICAgICAgc2VsZi5fYXRfZW9mID0gRmFsc2VcclxuICAgICAgICBsZW5ndGggPSBzZWxmLmhlYWRlcnMuZ2V0KENPTlRFTlRfTEVOR1RILCBOb25lKVxyXG4gICAgICAgIHNlbGYuX2xlbmd0aCA9IGludChsZW5ndGgpIGlmIGxlbmd0aCBpcyBub3QgTm9uZSBlbHNlIE5vbmVcclxuICAgICAgICBzZWxmLl9yZWFkX2J5dGVzID0gMFxyXG4gICAgICAgICMgVE9ETzogdHlwZWluZy5EZXF1ZSBpcyBub3Qgc3VwcG9ydGVkIGJ5IFB5dGhvbiAzLjVcclxuICAgICAgICBzZWxmLl91bnJlYWQ6IERlcXVlW2J5dGVzXSA9IGRlcXVlKClcclxuICAgICAgICBzZWxmLl9wcmV2X2NodW5rID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtieXRlc11cclxuICAgICAgICBzZWxmLl9jb250ZW50X2VvZiA9IDBcclxuICAgICAgICBzZWxmLl9jYWNoZSA9IHt9ICAjIHR5cGU6IERpY3Rbc3RyLCBBbnldXHJcblxyXG4gICAgZGVmIF9fYWl0ZXJfXyhzZWxmKSAtPiBBc3luY0l0ZXJhdG9yWyJCb2R5UGFydFJlYWRlciJdOlxyXG4gICAgICAgIHJldHVybiBzZWxmICAjIHR5cGU6IGlnbm9yZVtyZXR1cm4tdmFsdWVdXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYW5leHRfXyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICBwYXJ0ID0gYXdhaXQgc2VsZi5uZXh0KClcclxuICAgICAgICBpZiBwYXJ0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFN0b3BBc3luY0l0ZXJhdGlvblxyXG4gICAgICAgIHJldHVybiBwYXJ0XHJcblxyXG4gICAgYXN5bmMgZGVmIG5leHQoc2VsZikgLT4gT3B0aW9uYWxbYnl0ZXNdOlxyXG4gICAgICAgIGl0ZW0gPSBhd2FpdCBzZWxmLnJlYWQoKVxyXG4gICAgICAgIGlmIG5vdCBpdGVtOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIHJldHVybiBpdGVtXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWQoc2VsZiwgKiwgZGVjb2RlOiBib29sID0gRmFsc2UpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlJlYWRzIGJvZHkgcGFydCBkYXRhLlxyXG5cclxuICAgICAgICBkZWNvZGU6IERlY29kZXMgZGF0YSBmb2xsb3dpbmcgYnkgZW5jb2RpbmdcclxuICAgICAgICAgICAgICAgIG1ldGhvZCBmcm9tIENvbnRlbnQtRW5jb2RpbmcgaGVhZGVyLiBJZiBpdCBtaXNzZWRcclxuICAgICAgICAgICAgICAgIGRhdGEgcmVtYWlucyB1bnRvdWNoZWRcclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBzZWxmLl9hdF9lb2Y6XHJcbiAgICAgICAgICAgIHJldHVybiBiIiJcclxuICAgICAgICBkYXRhID0gYnl0ZWFycmF5KClcclxuICAgICAgICB3aGlsZSBub3Qgc2VsZi5fYXRfZW9mOlxyXG4gICAgICAgICAgICBkYXRhLmV4dGVuZChhd2FpdCBzZWxmLnJlYWRfY2h1bmsoc2VsZi5jaHVua19zaXplKSlcclxuICAgICAgICBpZiBkZWNvZGU6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmRlY29kZShkYXRhKVxyXG4gICAgICAgIHJldHVybiBkYXRhXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWRfY2h1bmsoc2VsZiwgc2l6ZTogaW50ID0gY2h1bmtfc2l6ZSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiUmVhZHMgYm9keSBwYXJ0IGNvbnRlbnQgY2h1bmsgb2YgdGhlIHNwZWNpZmllZCBzaXplLlxyXG5cclxuICAgICAgICBzaXplOiBjaHVuayBzaXplXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fYXRfZW9mOlxyXG4gICAgICAgICAgICByZXR1cm4gYiIiXHJcbiAgICAgICAgaWYgc2VsZi5fbGVuZ3RoOlxyXG4gICAgICAgICAgICBjaHVuayA9IGF3YWl0IHNlbGYuX3JlYWRfY2h1bmtfZnJvbV9sZW5ndGgoc2l6ZSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBjaHVuayA9IGF3YWl0IHNlbGYuX3JlYWRfY2h1bmtfZnJvbV9zdHJlYW0oc2l6ZSlcclxuXHJcbiAgICAgICAgc2VsZi5fcmVhZF9ieXRlcyArPSBsZW4oY2h1bmspXHJcbiAgICAgICAgaWYgc2VsZi5fcmVhZF9ieXRlcyA9PSBzZWxmLl9sZW5ndGg6XHJcbiAgICAgICAgICAgIHNlbGYuX2F0X2VvZiA9IFRydWVcclxuICAgICAgICBpZiBzZWxmLl9hdF9lb2Y6XHJcbiAgICAgICAgICAgIGNscmYgPSBhd2FpdCBzZWxmLl9jb250ZW50LnJlYWRsaW5lKClcclxuICAgICAgICAgICAgYXNzZXJ0IChcclxuICAgICAgICAgICAgICAgIGIiXFxyXFxuIiA9PSBjbHJmXHJcbiAgICAgICAgICAgICksICJyZWFkZXIgZGlkIG5vdCByZWFkIGFsbCB0aGUgZGF0YSBvciBpdCBpcyBtYWxmb3JtZWQiXHJcbiAgICAgICAgcmV0dXJuIGNodW5rXHJcblxyXG4gICAgYXN5bmMgZGVmIF9yZWFkX2NodW5rX2Zyb21fbGVuZ3RoKHNlbGYsIHNpemU6IGludCkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIyBSZWFkcyBib2R5IHBhcnQgY29udGVudCBjaHVuayBvZiB0aGUgc3BlY2lmaWVkIHNpemUuXHJcbiAgICAgICAgIyBUaGUgYm9keSBwYXJ0IG11c3QgaGFzIENvbnRlbnQtTGVuZ3RoIGhlYWRlciB3aXRoIHByb3BlciB2YWx1ZS5cclxuICAgICAgICBhc3NlcnQgc2VsZi5fbGVuZ3RoIGlzIG5vdCBOb25lLCAiQ29udGVudC1MZW5ndGggcmVxdWlyZWQgZm9yIGNodW5rZWQgcmVhZCJcclxuICAgICAgICBjaHVua19zaXplID0gbWluKHNpemUsIHNlbGYuX2xlbmd0aCAtIHNlbGYuX3JlYWRfYnl0ZXMpXHJcbiAgICAgICAgY2h1bmsgPSBhd2FpdCBzZWxmLl9jb250ZW50LnJlYWQoY2h1bmtfc2l6ZSlcclxuICAgICAgICByZXR1cm4gY2h1bmtcclxuXHJcbiAgICBhc3luYyBkZWYgX3JlYWRfY2h1bmtfZnJvbV9zdHJlYW0oc2VsZiwgc2l6ZTogaW50KSAtPiBieXRlczpcclxuICAgICAgICAjIFJlYWRzIGNvbnRlbnQgY2h1bmsgb2YgYm9keSBwYXJ0IHdpdGggdW5rbm93biBsZW5ndGguXHJcbiAgICAgICAgIyBUaGUgQ29udGVudC1MZW5ndGggaGVhZGVyIGZvciBib2R5IHBhcnQgaXMgbm90IG5lY2Vzc2FyeS5cclxuICAgICAgICBhc3NlcnQgKFxyXG4gICAgICAgICAgICBzaXplID49IGxlbihzZWxmLl9ib3VuZGFyeSkgKyAyXHJcbiAgICAgICAgKSwgIkNodW5rIHNpemUgbXVzdCBiZSBncmVhdGVyIG9yIGVxdWFsIHRoYW4gYm91bmRhcnkgbGVuZ3RoICsgMiJcclxuICAgICAgICBmaXJzdF9jaHVuayA9IHNlbGYuX3ByZXZfY2h1bmsgaXMgTm9uZVxyXG4gICAgICAgIGlmIGZpcnN0X2NodW5rOlxyXG4gICAgICAgICAgICBzZWxmLl9wcmV2X2NodW5rID0gYXdhaXQgc2VsZi5fY29udGVudC5yZWFkKHNpemUpXHJcblxyXG4gICAgICAgIGNodW5rID0gYXdhaXQgc2VsZi5fY29udGVudC5yZWFkKHNpemUpXHJcbiAgICAgICAgc2VsZi5fY29udGVudF9lb2YgKz0gaW50KHNlbGYuX2NvbnRlbnQuYXRfZW9mKCkpXHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX2NvbnRlbnRfZW9mIDwgMywgIlJlYWRpbmcgYWZ0ZXIgRU9GIlxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9wcmV2X2NodW5rIGlzIG5vdCBOb25lXHJcbiAgICAgICAgd2luZG93ID0gc2VsZi5fcHJldl9jaHVuayArIGNodW5rXHJcbiAgICAgICAgc3ViID0gYiJcXHJcXG4iICsgc2VsZi5fYm91bmRhcnlcclxuICAgICAgICBpZiBmaXJzdF9jaHVuazpcclxuICAgICAgICAgICAgaWR4ID0gd2luZG93LmZpbmQoc3ViKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGlkeCA9IHdpbmRvdy5maW5kKHN1YiwgbWF4KDAsIGxlbihzZWxmLl9wcmV2X2NodW5rKSAtIGxlbihzdWIpKSlcclxuICAgICAgICBpZiBpZHggPj0gMDpcclxuICAgICAgICAgICAgIyBwdXNoaW5nIGJvdW5kYXJ5IGJhY2sgdG8gY29udGVudFxyXG4gICAgICAgICAgICB3aXRoIHdhcm5pbmdzLmNhdGNoX3dhcm5pbmdzKCk6XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy5maWx0ZXJ3YXJuaW5ncygiaWdub3JlIiwgY2F0ZWdvcnk9RGVwcmVjYXRpb25XYXJuaW5nKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY29udGVudC51bnJlYWRfZGF0YSh3aW5kb3dbaWR4Ol0pXHJcbiAgICAgICAgICAgIGlmIHNpemUgPiBpZHg6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9wcmV2X2NodW5rID0gc2VsZi5fcHJldl9jaHVua1s6aWR4XVxyXG4gICAgICAgICAgICBjaHVuayA9IHdpbmRvd1tsZW4oc2VsZi5fcHJldl9jaHVuaykgOiBpZHhdXHJcbiAgICAgICAgICAgIGlmIG5vdCBjaHVuazpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2F0X2VvZiA9IFRydWVcclxuICAgICAgICByZXN1bHQgPSBzZWxmLl9wcmV2X2NodW5rXHJcbiAgICAgICAgc2VsZi5fcHJldl9jaHVuayA9IGNodW5rXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG5cclxuICAgIGFzeW5jIGRlZiByZWFkbGluZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJSZWFkcyBib2R5IHBhcnQgYnkgbGluZSBieSBsaW5lLiIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2F0X2VvZjpcclxuICAgICAgICAgICAgcmV0dXJuIGIiIlxyXG5cclxuICAgICAgICBpZiBzZWxmLl91bnJlYWQ6XHJcbiAgICAgICAgICAgIGxpbmUgPSBzZWxmLl91bnJlYWQucG9wbGVmdCgpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgbGluZSA9IGF3YWl0IHNlbGYuX2NvbnRlbnQucmVhZGxpbmUoKVxyXG5cclxuICAgICAgICBpZiBsaW5lLnN0YXJ0c3dpdGgoc2VsZi5fYm91bmRhcnkpOlxyXG4gICAgICAgICAgICAjIHRoZSB2ZXJ5IGxhc3QgYm91bmRhcnkgbWF5IG5vdCBjb21lIHdpdGggXFxyXFxuLFxyXG4gICAgICAgICAgICAjIHNvIHNldCBzaW5nbGUgcnVsZXMgZm9yIGV2ZXJ5b25lXHJcbiAgICAgICAgICAgIHNsaW5lID0gbGluZS5yc3RyaXAoYiJcXHJcXG4iKVxyXG4gICAgICAgICAgICBib3VuZGFyeSA9IHNlbGYuX2JvdW5kYXJ5XHJcbiAgICAgICAgICAgIGxhc3RfYm91bmRhcnkgPSBzZWxmLl9ib3VuZGFyeSArIGIiLS0iXHJcbiAgICAgICAgICAgICMgZW5zdXJlIHRoYXQgd2UgcmVhZCBleGFjdGx5IHRoZSBib3VuZGFyeSwgbm90IHNvbWV0aGluZyBhbGlrZVxyXG4gICAgICAgICAgICBpZiBzbGluZSA9PSBib3VuZGFyeSBvciBzbGluZSA9PSBsYXN0X2JvdW5kYXJ5OlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYXRfZW9mID0gVHJ1ZVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fdW5yZWFkLmFwcGVuZChsaW5lKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGIiIlxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIG5leHRfbGluZSA9IGF3YWl0IHNlbGYuX2NvbnRlbnQucmVhZGxpbmUoKVxyXG4gICAgICAgICAgICBpZiBuZXh0X2xpbmUuc3RhcnRzd2l0aChzZWxmLl9ib3VuZGFyeSk6XHJcbiAgICAgICAgICAgICAgICBsaW5lID0gbGluZVs6LTJdICAjIHN0cmlwIENSTEYgYnV0IG9ubHkgb25jZVxyXG4gICAgICAgICAgICBzZWxmLl91bnJlYWQuYXBwZW5kKG5leHRfbGluZSlcclxuXHJcbiAgICAgICAgcmV0dXJuIGxpbmVcclxuXHJcbiAgICBhc3luYyBkZWYgcmVsZWFzZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkxpa2UgcmVhZCgpLCBidXQgcmVhZHMgYWxsIHRoZSBkYXRhIHRvIHRoZSB2b2lkLiIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2F0X2VvZjpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgd2hpbGUgbm90IHNlbGYuX2F0X2VvZjpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5yZWFkX2NodW5rKHNlbGYuY2h1bmtfc2l6ZSlcclxuXHJcbiAgICBhc3luYyBkZWYgdGV4dChzZWxmLCAqLCBlbmNvZGluZzogT3B0aW9uYWxbc3RyXSA9IE5vbmUpIC0+IHN0cjpcclxuICAgICAgICAiIiJMaWtlIHJlYWQoKSwgYnV0IGFzc3VtZXMgdGhhdCBib2R5IHBhcnQgY29udGFpbnMgdGV4dCBkYXRhLiIiIlxyXG4gICAgICAgIGRhdGEgPSBhd2FpdCBzZWxmLnJlYWQoZGVjb2RlPVRydWUpXHJcbiAgICAgICAgIyBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2Zvcm1zLmh0bWwjbXVsdGlwYXJ0L2Zvcm0tZGF0YS1lbmNvZGluZy1hbGdvcml0aG0gIyBOT1FBXHJcbiAgICAgICAgIyBhbmQgaHR0cHM6Ly9kdmNzLnczLm9yZy9oZy94aHIvcmF3LWZpbGUvdGlwL092ZXJ2aWV3Lmh0bWwjZG9tLXhtbGh0dHByZXF1ZXN0LXNlbmQgIyBOT1FBXHJcbiAgICAgICAgZW5jb2RpbmcgPSBlbmNvZGluZyBvciBzZWxmLmdldF9jaGFyc2V0KGRlZmF1bHQ9InV0Zi04IilcclxuICAgICAgICByZXR1cm4gZGF0YS5kZWNvZGUoZW5jb2RpbmcpXHJcblxyXG4gICAgYXN5bmMgZGVmIGpzb24oc2VsZiwgKiwgZW5jb2Rpbmc6IE9wdGlvbmFsW3N0cl0gPSBOb25lKSAtPiBPcHRpb25hbFtEaWN0W3N0ciwgQW55XV06XHJcbiAgICAgICAgIiIiTGlrZSByZWFkKCksIGJ1dCBhc3N1bWVzIHRoYXQgYm9keSBwYXJ0cyBjb250YWlucyBKU09OIGRhdGEuIiIiXHJcbiAgICAgICAgZGF0YSA9IGF3YWl0IHNlbGYucmVhZChkZWNvZGU9VHJ1ZSlcclxuICAgICAgICBpZiBub3QgZGF0YTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICBlbmNvZGluZyA9IGVuY29kaW5nIG9yIHNlbGYuZ2V0X2NoYXJzZXQoZGVmYXVsdD0idXRmLTgiKVxyXG4gICAgICAgIHJldHVybiBjYXN0KERpY3Rbc3RyLCBBbnldLCBqc29uLmxvYWRzKGRhdGEuZGVjb2RlKGVuY29kaW5nKSkpXHJcblxyXG4gICAgYXN5bmMgZGVmIGZvcm0oc2VsZiwgKiwgZW5jb2Rpbmc6IE9wdGlvbmFsW3N0cl0gPSBOb25lKSAtPiBMaXN0W1R1cGxlW3N0ciwgc3RyXV06XHJcbiAgICAgICAgIiIiTGlrZSByZWFkKCksIGJ1dCBhc3N1bWVzIHRoYXQgYm9keSBwYXJ0cyBjb250YWluIGZvcm0gdXJsZW5jb2RlZCBkYXRhLiIiIlxyXG4gICAgICAgIGRhdGEgPSBhd2FpdCBzZWxmLnJlYWQoZGVjb2RlPVRydWUpXHJcbiAgICAgICAgaWYgbm90IGRhdGE6XHJcbiAgICAgICAgICAgIHJldHVybiBbXVxyXG4gICAgICAgIGlmIGVuY29kaW5nIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByZWFsX2VuY29kaW5nID0gZW5jb2RpbmdcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZWFsX2VuY29kaW5nID0gc2VsZi5nZXRfY2hhcnNldChkZWZhdWx0PSJ1dGYtOCIpXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlX3FzbChcclxuICAgICAgICAgICAgZGF0YS5yc3RyaXAoKS5kZWNvZGUocmVhbF9lbmNvZGluZyksXHJcbiAgICAgICAgICAgIGtlZXBfYmxhbmtfdmFsdWVzPVRydWUsXHJcbiAgICAgICAgICAgIGVuY29kaW5nPXJlYWxfZW5jb2RpbmcsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBhdF9lb2Yoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICAiIiJSZXR1cm5zIFRydWUgaWYgdGhlIGJvdW5kYXJ5IHdhcyByZWFjaGVkIG9yIEZhbHNlIG90aGVyd2lzZS4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fYXRfZW9mXHJcblxyXG4gICAgZGVmIGRlY29kZShzZWxmLCBkYXRhOiBieXRlcykgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiRGVjb2RlcyBkYXRhLlxyXG5cclxuICAgICAgICBEZWNvZGluZyBpcyBkb25lIGFjY29yZGluZyB0aGUgc3BlY2lmaWVkIENvbnRlbnQtRW5jb2RpbmdcclxuICAgICAgICBvciBDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nIGhlYWRlcnMgdmFsdWUuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgQ09OVEVOVF9UUkFOU0ZFUl9FTkNPRElORyBpbiBzZWxmLmhlYWRlcnM6XHJcbiAgICAgICAgICAgIGRhdGEgPSBzZWxmLl9kZWNvZGVfY29udGVudF90cmFuc2ZlcihkYXRhKVxyXG4gICAgICAgIGlmIENPTlRFTlRfRU5DT0RJTkcgaW4gc2VsZi5oZWFkZXJzOlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZGVjb2RlX2NvbnRlbnQoZGF0YSlcclxuICAgICAgICByZXR1cm4gZGF0YVxyXG5cclxuICAgIGRlZiBfZGVjb2RlX2NvbnRlbnQoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGVuY29kaW5nID0gc2VsZi5oZWFkZXJzLmdldChDT05URU5UX0VOQ09ESU5HLCAiIikubG93ZXIoKVxyXG5cclxuICAgICAgICBpZiBlbmNvZGluZyA9PSAiZGVmbGF0ZSI6XHJcbiAgICAgICAgICAgIHJldHVybiB6bGliLmRlY29tcHJlc3MoZGF0YSwgLXpsaWIuTUFYX1dCSVRTKVxyXG4gICAgICAgIGVsaWYgZW5jb2RpbmcgPT0gImd6aXAiOlxyXG4gICAgICAgICAgICByZXR1cm4gemxpYi5kZWNvbXByZXNzKGRhdGEsIDE2ICsgemxpYi5NQVhfV0JJVFMpXHJcbiAgICAgICAgZWxpZiBlbmNvZGluZyA9PSAiaWRlbnRpdHkiOlxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihmInVua25vd24gY29udGVudCBlbmNvZGluZzoge2VuY29kaW5nfSIpXHJcblxyXG4gICAgZGVmIF9kZWNvZGVfY29udGVudF90cmFuc2ZlcihzZWxmLCBkYXRhOiBieXRlcykgLT4gYnl0ZXM6XHJcbiAgICAgICAgZW5jb2RpbmcgPSBzZWxmLmhlYWRlcnMuZ2V0KENPTlRFTlRfVFJBTlNGRVJfRU5DT0RJTkcsICIiKS5sb3dlcigpXHJcblxyXG4gICAgICAgIGlmIGVuY29kaW5nID09ICJiYXNlNjQiOlxyXG4gICAgICAgICAgICByZXR1cm4gYmFzZTY0LmI2NGRlY29kZShkYXRhKVxyXG4gICAgICAgIGVsaWYgZW5jb2RpbmcgPT0gInF1b3RlZC1wcmludGFibGUiOlxyXG4gICAgICAgICAgICByZXR1cm4gYmluYXNjaWkuYTJiX3FwKGRhdGEpXHJcbiAgICAgICAgZWxpZiBlbmNvZGluZyBpbiAoImJpbmFyeSIsICI4Yml0IiwgIjdiaXQiKTpcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGFcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAidW5rbm93biBjb250ZW50IHRyYW5zZmVyIGVuY29kaW5nOiB7fSIgIiIuZm9ybWF0KGVuY29kaW5nKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIGdldF9jaGFyc2V0KHNlbGYsIGRlZmF1bHQ6IHN0cikgLT4gc3RyOlxyXG4gICAgICAgICIiIlJldHVybnMgY2hhcnNldCBwYXJhbWV0ZXIgZnJvbSBDb250ZW50LVR5cGUgaGVhZGVyIG9yIGRlZmF1bHQuIiIiXHJcbiAgICAgICAgY3R5cGUgPSBzZWxmLmhlYWRlcnMuZ2V0KENPTlRFTlRfVFlQRSwgIiIpXHJcbiAgICAgICAgbWltZXR5cGUgPSBwYXJzZV9taW1ldHlwZShjdHlwZSlcclxuICAgICAgICByZXR1cm4gbWltZXR5cGUucGFyYW1ldGVycy5nZXQoImNoYXJzZXQiLCBkZWZhdWx0KVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIG5hbWUoc2VsZikgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICAiIiJSZXR1cm5zIG5hbWUgc3BlY2lmaWVkIGluIENvbnRlbnQtRGlzcG9zaXRpb24gaGVhZGVyLlxyXG5cclxuICAgICAgICBJZiB0aGUgaGVhZGVyIGlzIG1pc3Npbmcgb3IgbWFsZm9ybWVkLCByZXR1cm5zIE5vbmUuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgXywgcGFyYW1zID0gcGFyc2VfY29udGVudF9kaXNwb3NpdGlvbihzZWxmLmhlYWRlcnMuZ2V0KENPTlRFTlRfRElTUE9TSVRJT04pKVxyXG4gICAgICAgIHJldHVybiBjb250ZW50X2Rpc3Bvc2l0aW9uX2ZpbGVuYW1lKHBhcmFtcywgIm5hbWUiKVxyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIGZpbGVuYW1lKHNlbGYpIC0+IE9wdGlvbmFsW3N0cl06XHJcbiAgICAgICAgIiIiUmV0dXJucyBmaWxlbmFtZSBzcGVjaWZpZWQgaW4gQ29udGVudC1EaXNwb3NpdGlvbiBoZWFkZXIuXHJcblxyXG4gICAgICAgIFJldHVybnMgTm9uZSBpZiB0aGUgaGVhZGVyIGlzIG1pc3Npbmcgb3IgbWFsZm9ybWVkLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIF8sIHBhcmFtcyA9IHBhcnNlX2NvbnRlbnRfZGlzcG9zaXRpb24oc2VsZi5oZWFkZXJzLmdldChDT05URU5UX0RJU1BPU0lUSU9OKSlcclxuICAgICAgICByZXR1cm4gY29udGVudF9kaXNwb3NpdGlvbl9maWxlbmFtZShwYXJhbXMsICJmaWxlbmFtZSIpXHJcblxyXG5cclxuQHBheWxvYWRfdHlwZShCb2R5UGFydFJlYWRlciwgb3JkZXI9T3JkZXIudHJ5X2ZpcnN0KVxyXG5jbGFzcyBCb2R5UGFydFJlYWRlclBheWxvYWQoUGF5bG9hZCk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgdmFsdWU6IEJvZHlQYXJ0UmVhZGVyLCAqYXJnczogQW55LCAqKmt3YXJnczogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18odmFsdWUsICphcmdzLCAqKmt3YXJncylcclxuXHJcbiAgICAgICAgcGFyYW1zID0ge30gICMgdHlwZTogRGljdFtzdHIsIHN0cl1cclxuICAgICAgICBpZiB2YWx1ZS5uYW1lIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBwYXJhbXNbIm5hbWUiXSA9IHZhbHVlLm5hbWVcclxuICAgICAgICBpZiB2YWx1ZS5maWxlbmFtZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcGFyYW1zWyJmaWxlbmFtZSJdID0gdmFsdWUuZmlsZW5hbWVcclxuXHJcbiAgICAgICAgaWYgcGFyYW1zOlxyXG4gICAgICAgICAgICBzZWxmLnNldF9jb250ZW50X2Rpc3Bvc2l0aW9uKCJhdHRhY2htZW50IiwgVHJ1ZSwgKipwYXJhbXMpXHJcblxyXG4gICAgYXN5bmMgZGVmIHdyaXRlKHNlbGYsIHdyaXRlcjogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIGZpZWxkID0gc2VsZi5fdmFsdWVcclxuICAgICAgICBjaHVuayA9IGF3YWl0IGZpZWxkLnJlYWRfY2h1bmsoc2l6ZT0yICoqIDE2KVxyXG4gICAgICAgIHdoaWxlIGNodW5rOlxyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZXIud3JpdGUoZmllbGQuZGVjb2RlKGNodW5rKSlcclxuICAgICAgICAgICAgY2h1bmsgPSBhd2FpdCBmaWVsZC5yZWFkX2NodW5rKHNpemU9MiAqKiAxNilcclxuXHJcblxyXG5jbGFzcyBNdWx0aXBhcnRSZWFkZXI6XHJcbiAgICAiIiJNdWx0aXBhcnQgYm9keSByZWFkZXIuIiIiXHJcblxyXG4gICAgIzogUmVzcG9uc2Ugd3JhcHBlciwgdXNlZCB3aGVuIG11bHRpcGFydCByZWFkZXJzIGNvbnN0cnVjdHMgZnJvbSByZXNwb25zZS5cclxuICAgIHJlc3BvbnNlX3dyYXBwZXJfY2xzID0gTXVsdGlwYXJ0UmVzcG9uc2VXcmFwcGVyXHJcbiAgICAjOiBNdWx0aXBhcnQgcmVhZGVyIGNsYXNzLCB1c2VkIHRvIGhhbmRsZSBtdWx0aXBhcnQvKiBib2R5IHBhcnRzLlxyXG4gICAgIzogTm9uZSBwb2ludHMgdG8gdHlwZShzZWxmKVxyXG4gICAgbXVsdGlwYXJ0X3JlYWRlcl9jbHMgPSBOb25lXHJcbiAgICAjOiBCb2R5IHBhcnQgcmVhZGVyIGNsYXNzIGZvciBub24gbXVsdGlwYXJ0LyogY29udGVudCB0eXBlcy5cclxuICAgIHBhcnRfcmVhZGVyX2NscyA9IEJvZHlQYXJ0UmVhZGVyXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGhlYWRlcnM6IE1hcHBpbmdbc3RyLCBzdHJdLCBjb250ZW50OiBTdHJlYW1SZWFkZXIpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5oZWFkZXJzID0gaGVhZGVyc1xyXG4gICAgICAgIHNlbGYuX2JvdW5kYXJ5ID0gKCItLSIgKyBzZWxmLl9nZXRfYm91bmRhcnkoKSkuZW5jb2RlKClcclxuICAgICAgICBzZWxmLl9jb250ZW50ID0gY29udGVudFxyXG4gICAgICAgIHNlbGYuX2xhc3RfcGFydCA9IChcclxuICAgICAgICAgICAgTm9uZVxyXG4gICAgICAgICkgICMgdHlwZTogT3B0aW9uYWxbVW5pb25bXCdNdWx0aXBhcnRSZWFkZXJcJywgQm9keVBhcnRSZWFkZXJdXVxyXG4gICAgICAgIHNlbGYuX2F0X2VvZiA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fYXRfYm9mID0gVHJ1ZVxyXG4gICAgICAgIHNlbGYuX3VucmVhZCA9IFtdICAjIHR5cGU6IExpc3RbYnl0ZXNdXHJcblxyXG4gICAgZGVmIF9fYWl0ZXJfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiBBc3luY0l0ZXJhdG9yWyJCb2R5UGFydFJlYWRlciJdOlxyXG4gICAgICAgIHJldHVybiBzZWxmICAjIHR5cGU6IGlnbm9yZVtyZXR1cm4tdmFsdWVdXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYW5leHRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiBPcHRpb25hbFtVbmlvblsiTXVsdGlwYXJ0UmVhZGVyIiwgQm9keVBhcnRSZWFkZXJdXTpcclxuICAgICAgICBwYXJ0ID0gYXdhaXQgc2VsZi5uZXh0KClcclxuICAgICAgICBpZiBwYXJ0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFN0b3BBc3luY0l0ZXJhdGlvblxyXG4gICAgICAgIHJldHVybiBwYXJ0XHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZnJvbV9yZXNwb25zZShcclxuICAgICAgICBjbHMsXHJcbiAgICAgICAgcmVzcG9uc2U6ICJDbGllbnRSZXNwb25zZSIsXHJcbiAgICApIC0+IE11bHRpcGFydFJlc3BvbnNlV3JhcHBlcjpcclxuICAgICAgICAiIiJDb25zdHJ1Y3RzIHJlYWRlciBpbnN0YW5jZSBmcm9tIEhUVFAgcmVzcG9uc2UuXHJcblxyXG4gICAgICAgIDpwYXJhbSByZXNwb25zZTogOmNsYXNzOmB+YWlvaHR0cC5jbGllbnQuQ2xpZW50UmVzcG9uc2VgIGluc3RhbmNlXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgb2JqID0gY2xzLnJlc3BvbnNlX3dyYXBwZXJfY2xzKFxyXG4gICAgICAgICAgICByZXNwb25zZSwgY2xzKHJlc3BvbnNlLmhlYWRlcnMsIHJlc3BvbnNlLmNvbnRlbnQpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBvYmpcclxuXHJcbiAgICBkZWYgYXRfZW9mKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiUmV0dXJucyBUcnVlIGlmIHRoZSBmaW5hbCBib3VuZGFyeSB3YXMgcmVhY2hlZCwgZmFsc2Ugb3RoZXJ3aXNlLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hdF9lb2ZcclxuXHJcbiAgICBhc3luYyBkZWYgbmV4dChcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiBPcHRpb25hbFtVbmlvblsiTXVsdGlwYXJ0UmVhZGVyIiwgQm9keVBhcnRSZWFkZXJdXTpcclxuICAgICAgICAiIiJFbWl0cyB0aGUgbmV4dCBtdWx0aXBhcnQgYm9keSBwYXJ0LiIiIlxyXG4gICAgICAgICMgU28sIGlmIHdlXCdyZSBhdCBCT0YsIHdlIG5lZWQgdG8gc2tpcCB0aWxsIHRoZSBib3VuZGFyeS5cclxuICAgICAgICBpZiBzZWxmLl9hdF9lb2Y6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fbWF5YmVfcmVsZWFzZV9sYXN0X3BhcnQoKVxyXG4gICAgICAgIGlmIHNlbGYuX2F0X2JvZjpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fcmVhZF91bnRpbF9maXJzdF9ib3VuZGFyeSgpXHJcbiAgICAgICAgICAgIHNlbGYuX2F0X2JvZiA9IEZhbHNlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fcmVhZF9ib3VuZGFyeSgpXHJcbiAgICAgICAgaWYgc2VsZi5fYXRfZW9mOiAgIyB3ZSBqdXN0IHJlYWQgdGhlIGxhc3QgYm91bmRhcnksIG5vdGhpbmcgdG8gZG8gdGhlcmVcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICBzZWxmLl9sYXN0X3BhcnQgPSBhd2FpdCBzZWxmLmZldGNoX25leHRfcGFydCgpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xhc3RfcGFydFxyXG5cclxuICAgIGFzeW5jIGRlZiByZWxlYXNlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiUmVhZHMgYWxsIHRoZSBib2R5IHBhcnRzIHRvIHRoZSB2b2lkIHRpbGwgdGhlIGZpbmFsIGJvdW5kYXJ5LiIiIlxyXG4gICAgICAgIHdoaWxlIG5vdCBzZWxmLl9hdF9lb2Y6XHJcbiAgICAgICAgICAgIGl0ZW0gPSBhd2FpdCBzZWxmLm5leHQoKVxyXG4gICAgICAgICAgICBpZiBpdGVtIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBhd2FpdCBpdGVtLnJlbGVhc2UoKVxyXG5cclxuICAgIGFzeW5jIGRlZiBmZXRjaF9uZXh0X3BhcnQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gVW5pb25bIk11bHRpcGFydFJlYWRlciIsIEJvZHlQYXJ0UmVhZGVyXTpcclxuICAgICAgICAiIiJSZXR1cm5zIHRoZSBuZXh0IGJvZHkgcGFydCByZWFkZXIuIiIiXHJcbiAgICAgICAgaGVhZGVycyA9IGF3YWl0IHNlbGYuX3JlYWRfaGVhZGVycygpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2dldF9wYXJ0X3JlYWRlcihoZWFkZXJzKVxyXG5cclxuICAgIGRlZiBfZ2V0X3BhcnRfcmVhZGVyKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgaGVhZGVyczogIkNJTXVsdGlEaWN0UHJveHlbc3RyXSIsXHJcbiAgICApIC0+IFVuaW9uWyJNdWx0aXBhcnRSZWFkZXIiLCBCb2R5UGFydFJlYWRlcl06XHJcbiAgICAgICAgIiIiRGlzcGF0Y2hlcyB0aGUgcmVzcG9uc2UgYnkgdGhlIGBDb250ZW50LVR5cGVgIGhlYWRlci5cclxuXHJcbiAgICAgICAgUmV0dXJucyBhIHN1aXRhYmxlIHJlYWRlciBpbnN0YW5jZS5cclxuXHJcbiAgICAgICAgOnBhcmFtIGRpY3QgaGVhZGVyczogUmVzcG9uc2UgaGVhZGVyc1xyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGN0eXBlID0gaGVhZGVycy5nZXQoQ09OVEVOVF9UWVBFLCAiIilcclxuICAgICAgICBtaW1ldHlwZSA9IHBhcnNlX21pbWV0eXBlKGN0eXBlKVxyXG5cclxuICAgICAgICBpZiBtaW1ldHlwZS50eXBlID09ICJtdWx0aXBhcnQiOlxyXG4gICAgICAgICAgICBpZiBzZWxmLm11bHRpcGFydF9yZWFkZXJfY2xzIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZShzZWxmKShoZWFkZXJzLCBzZWxmLl9jb250ZW50KVxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5tdWx0aXBhcnRfcmVhZGVyX2NscyhoZWFkZXJzLCBzZWxmLl9jb250ZW50KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnRfcmVhZGVyX2NscyhzZWxmLl9ib3VuZGFyeSwgaGVhZGVycywgc2VsZi5fY29udGVudClcclxuXHJcbiAgICBkZWYgX2dldF9ib3VuZGFyeShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgbWltZXR5cGUgPSBwYXJzZV9taW1ldHlwZShzZWxmLmhlYWRlcnNbQ09OVEVOVF9UWVBFXSlcclxuXHJcbiAgICAgICAgYXNzZXJ0IG1pbWV0eXBlLnR5cGUgPT0gIm11bHRpcGFydCIsICJtdWx0aXBhcnQvKiBjb250ZW50IHR5cGUgZXhwZWN0ZWQiXHJcblxyXG4gICAgICAgIGlmICJib3VuZGFyeSIgbm90IGluIG1pbWV0eXBlLnBhcmFtZXRlcnM6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiYm91bmRhcnkgbWlzc2VkIGZvciBDb250ZW50LVR5cGU6ICVzIiAlIHNlbGYuaGVhZGVyc1tDT05URU5UX1RZUEVdXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgYm91bmRhcnkgPSBtaW1ldHlwZS5wYXJhbWV0ZXJzWyJib3VuZGFyeSJdXHJcbiAgICAgICAgaWYgbGVuKGJvdW5kYXJ5KSA+IDcwOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJib3VuZGFyeSAlciBpcyB0b28gbG9uZyAoNzAgY2hhcnMgbWF4KSIgJSBib3VuZGFyeSlcclxuXHJcbiAgICAgICAgcmV0dXJuIGJvdW5kYXJ5XHJcblxyXG4gICAgYXN5bmMgZGVmIF9yZWFkbGluZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICBpZiBzZWxmLl91bnJlYWQ6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl91bnJlYWQucG9wKClcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fY29udGVudC5yZWFkbGluZSgpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9yZWFkX3VudGlsX2ZpcnN0X2JvdW5kYXJ5KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgd2hpbGUgVHJ1ZTpcclxuICAgICAgICAgICAgY2h1bmsgPSBhd2FpdCBzZWxmLl9yZWFkbGluZSgpXHJcbiAgICAgICAgICAgIGlmIGNodW5rID09IGIiIjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIkNvdWxkIG5vdCBmaW5kIHN0YXJ0aW5nIGJvdW5kYXJ5ICVyIiAlIChzZWxmLl9ib3VuZGFyeSlcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgY2h1bmsgPSBjaHVuay5yc3RyaXAoKVxyXG4gICAgICAgICAgICBpZiBjaHVuayA9PSBzZWxmLl9ib3VuZGFyeTpcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICBlbGlmIGNodW5rID09IHNlbGYuX2JvdW5kYXJ5ICsgYiItLSI6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9hdF9lb2YgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICBhc3luYyBkZWYgX3JlYWRfYm91bmRhcnkoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBjaHVuayA9IChhd2FpdCBzZWxmLl9yZWFkbGluZSgpKS5yc3RyaXAoKVxyXG4gICAgICAgIGlmIGNodW5rID09IHNlbGYuX2JvdW5kYXJ5OlxyXG4gICAgICAgICAgICBwYXNzXHJcbiAgICAgICAgZWxpZiBjaHVuayA9PSBzZWxmLl9ib3VuZGFyeSArIGIiLS0iOlxyXG4gICAgICAgICAgICBzZWxmLl9hdF9lb2YgPSBUcnVlXHJcbiAgICAgICAgICAgIGVwaWxvZ3VlID0gYXdhaXQgc2VsZi5fcmVhZGxpbmUoKVxyXG4gICAgICAgICAgICBuZXh0X2xpbmUgPSBhd2FpdCBzZWxmLl9yZWFkbGluZSgpXHJcblxyXG4gICAgICAgICAgICAjIHRoZSBlcGlsb2d1ZSBpcyBleHBlY3RlZCBhbmQgdGhlbiBlaXRoZXIgdGhlIGVuZCBvZiBpbnB1dCBvciB0aGVcclxuICAgICAgICAgICAgIyBwYXJlbnQgbXVsdGlwYXJ0IGJvdW5kYXJ5LCBpZiB0aGUgcGFyZW50IGJvdW5kYXJ5IGlzIGZvdW5kIHRoZW5cclxuICAgICAgICAgICAgIyBpdCBzaG91bGQgYmUgbWFya2VkIGFzIHVucmVhZCBhbmQgaGFuZGVkIHRvIHRoZSBwYXJlbnQgZm9yXHJcbiAgICAgICAgICAgICMgcHJvY2Vzc2luZ1xyXG4gICAgICAgICAgICBpZiBuZXh0X2xpbmVbOjJdID09IGIiLS0iOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fdW5yZWFkLmFwcGVuZChuZXh0X2xpbmUpXHJcbiAgICAgICAgICAgICMgb3RoZXJ3aXNlIHRoZSByZXF1ZXN0IGlzIGxpa2VseSBtaXNzaW5nIGFuIGVwaWxvZ3VlIGFuZCBib3RoXHJcbiAgICAgICAgICAgICMgbGluZXMgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgcGFyZW50IGZvciBwcm9jZXNzaW5nXHJcbiAgICAgICAgICAgICMgKHRoaXMgaGFuZGxlcyB0aGUgb2xkIGJlaGF2aW9yIGdyYWNlZnVsbHkpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl91bnJlYWQuZXh0ZW5kKFtuZXh0X2xpbmUsIGVwaWxvZ3VlXSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiSW52YWxpZCBib3VuZGFyeSB7Y2h1bmshcn0sIGV4cGVjdGVkIHtzZWxmLl9ib3VuZGFyeSFyfSIpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9yZWFkX2hlYWRlcnMoc2VsZikgLT4gIkNJTXVsdGlEaWN0UHJveHlbc3RyXSI6XHJcbiAgICAgICAgbGluZXMgPSBbYiIiXVxyXG4gICAgICAgIHdoaWxlIFRydWU6XHJcbiAgICAgICAgICAgIGNodW5rID0gYXdhaXQgc2VsZi5fY29udGVudC5yZWFkbGluZSgpXHJcbiAgICAgICAgICAgIGNodW5rID0gY2h1bmsuc3RyaXAoKVxyXG4gICAgICAgICAgICBsaW5lcy5hcHBlbmQoY2h1bmspXHJcbiAgICAgICAgICAgIGlmIG5vdCBjaHVuazpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgcGFyc2VyID0gSGVhZGVyc1BhcnNlcigpXHJcbiAgICAgICAgaGVhZGVycywgcmF3X2hlYWRlcnMgPSBwYXJzZXIucGFyc2VfaGVhZGVycyhsaW5lcylcclxuICAgICAgICByZXR1cm4gaGVhZGVyc1xyXG5cclxuICAgIGFzeW5jIGRlZiBfbWF5YmVfcmVsZWFzZV9sYXN0X3BhcnQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAiIiJFbnN1cmVzIHRoYXQgdGhlIGxhc3QgcmVhZCBib2R5IHBhcnQgaXMgcmVhZCBjb21wbGV0ZWx5LiIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2xhc3RfcGFydCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgaWYgbm90IHNlbGYuX2xhc3RfcGFydC5hdF9lb2YoKTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuX2xhc3RfcGFydC5yZWxlYXNlKClcclxuICAgICAgICAgICAgc2VsZi5fdW5yZWFkLmV4dGVuZChzZWxmLl9sYXN0X3BhcnQuX3VucmVhZClcclxuICAgICAgICAgICAgc2VsZi5fbGFzdF9wYXJ0ID0gTm9uZVxyXG5cclxuXHJcbl9QYXJ0ID0gVHVwbGVbUGF5bG9hZCwgc3RyLCBzdHJdXHJcblxyXG5cclxuY2xhc3MgTXVsdGlwYXJ0V3JpdGVyKFBheWxvYWQpOlxyXG4gICAgIiIiTXVsdGlwYXJ0IGJvZHkgd3JpdGVyLiIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzdWJ0eXBlOiBzdHIgPSAibWl4ZWQiLCBib3VuZGFyeTogT3B0aW9uYWxbc3RyXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgYm91bmRhcnkgPSBib3VuZGFyeSBpZiBib3VuZGFyeSBpcyBub3QgTm9uZSBlbHNlIHV1aWQudXVpZDQoKS5oZXhcclxuICAgICAgICAjIFRoZSB1bmRlcmx5aW5nIFBheWxvYWQgQVBJIGRlbWFuZHMgYSBzdHIgKHV0Zi04KSwgbm90IGJ5dGVzLFxyXG4gICAgICAgICMgc28gd2UgbmVlZCB0byBlbnN1cmUgd2UgZG9uXCd0IGxvc2UgYW55dGhpbmcgZHVyaW5nIGNvbnZlcnNpb24uXHJcbiAgICAgICAgIyBBcyBhIHJlc3VsdCwgcmVxdWlyZSB0aGUgYm91bmRhcnkgdG8gYmUgQVNDSUkgb25seS5cclxuICAgICAgICAjIEluIGJvdGggc2l0dWF0aW9ucy5cclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBzZWxmLl9ib3VuZGFyeSA9IGJvdW5kYXJ5LmVuY29kZSgiYXNjaWkiKVxyXG4gICAgICAgIGV4Y2VwdCBVbmljb2RlRW5jb2RlRXJyb3I6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImJvdW5kYXJ5IHNob3VsZCBjb250YWluIEFTQ0lJIG9ubHkgY2hhcnMiKSBmcm9tIE5vbmVcclxuICAgICAgICBjdHlwZSA9IGYibXVsdGlwYXJ0L3tzdWJ0eXBlfTsgYm91bmRhcnk9e3NlbGYuX2JvdW5kYXJ5X3ZhbHVlfSJcclxuXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhOb25lLCBjb250ZW50X3R5cGU9Y3R5cGUpXHJcblxyXG4gICAgICAgIHNlbGYuX3BhcnRzID0gW10gICMgdHlwZTogTGlzdFtfUGFydF1cclxuXHJcbiAgICBkZWYgX19lbnRlcl9fKHNlbGYpIC0+ICJNdWx0aXBhcnRXcml0ZXIiOlxyXG4gICAgICAgIHJldHVybiBzZWxmXHJcblxyXG4gICAgZGVmIF9fZXhpdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZXhjX3R5cGU6IE9wdGlvbmFsW1R5cGVbQmFzZUV4Y2VwdGlvbl1dLFxyXG4gICAgICAgIGV4Y192YWw6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dLFxyXG4gICAgICAgIGV4Y190YjogT3B0aW9uYWxbVHJhY2ViYWNrVHlwZV0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgcGFzc1xyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKSAtPiBJdGVyYXRvcltfUGFydF06XHJcbiAgICAgICAgcmV0dXJuIGl0ZXIoc2VsZi5fcGFydHMpXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5fcGFydHMpXHJcblxyXG4gICAgZGVmIF9fYm9vbF9fKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICBfdmFsaWRfdGNoYXJfcmVnZXggPSByZS5jb21waWxlKGJyIlxcQVshIyQlJlwnKitcXC0uXl9gfH5cXHddK1xcWiIpXHJcbiAgICBfaW52YWxpZF9xZHRleHRfY2hhcl9yZWdleCA9IHJlLmNvbXBpbGUoYnIiW1xceDAwLVxceDA4XFx4MEEtXFx4MUZcXHg3Rl0iKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIF9ib3VuZGFyeV92YWx1ZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiV3JhcCBib3VuZGFyeSBwYXJhbWV0ZXIgdmFsdWUgaW4gcXVvdGVzLCBpZiBuZWNlc3NhcnkuXHJcblxyXG4gICAgICAgIFJlYWRzIHNlbGYuYm91bmRhcnkgYW5kIHJldHVybnMgYSB1bmljb2RlIHN0aW5nLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgICMgUmVmZXIgdG8gUkZDcyA3MjMxLCA3MjMwLCA1MjM0LlxyXG4gICAgICAgICNcclxuICAgICAgICAjIHBhcmFtZXRlciAgICAgID0gdG9rZW4gIj0iICggdG9rZW4gLyBxdW90ZWQtc3RyaW5nIClcclxuICAgICAgICAjIHRva2VuICAgICAgICAgID0gMSp0Y2hhclxyXG4gICAgICAgICMgcXVvdGVkLXN0cmluZyAgPSBEUVVPVEUgKiggcWR0ZXh0IC8gcXVvdGVkLXBhaXIgKSBEUVVPVEVcclxuICAgICAgICAjIHFkdGV4dCAgICAgICAgID0gSFRBQiAvIFNQIC8gJXgyMSAvICV4MjMtNUIgLyAleDVELTdFIC8gb2JzLXRleHRcclxuICAgICAgICAjIG9icy10ZXh0ICAgICAgID0gJXg4MC1GRlxyXG4gICAgICAgICMgcXVvdGVkLXBhaXIgICAgPSAiXFwiICggSFRBQiAvIFNQIC8gVkNIQVIgLyBvYnMtdGV4dCApXHJcbiAgICAgICAgIyB0Y2hhciAgICAgICAgICA9ICIhIiAvICIjIiAvICIkIiAvICIlIiAvICImIiAvICJcJyIgLyAiKiJcclxuICAgICAgICAjICAgICAgICAgICAgICAgICAgLyAiKyIgLyAiLSIgLyAiLiIgLyAiXiIgLyAiXyIgLyAiYCIgLyAifCIgLyAifiJcclxuICAgICAgICAjICAgICAgICAgICAgICAgICAgLyBESUdJVCAvIEFMUEhBXHJcbiAgICAgICAgIyAgICAgICAgICAgICAgICAgIDsgYW55IFZDSEFSLCBleGNlcHQgZGVsaW1pdGVyc1xyXG4gICAgICAgICMgVkNIQVIgICAgICAgICAgID0gJXgyMS03RVxyXG4gICAgICAgIHZhbHVlID0gc2VsZi5fYm91bmRhcnlcclxuICAgICAgICBpZiByZS5tYXRjaChzZWxmLl92YWxpZF90Y2hhcl9yZWdleCwgdmFsdWUpOlxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuZGVjb2RlKCJhc2NpaSIpICAjIGNhbm5vdCBmYWlsXHJcblxyXG4gICAgICAgIGlmIHJlLnNlYXJjaChzZWxmLl9pbnZhbGlkX3FkdGV4dF9jaGFyX3JlZ2V4LCB2YWx1ZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImJvdW5kYXJ5IHZhbHVlIGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyIpXHJcblxyXG4gICAgICAgICMgZXNjYXBlICV4NUMgYW5kICV4MjJcclxuICAgICAgICBxdW90ZWRfdmFsdWVfY29udGVudCA9IHZhbHVlLnJlcGxhY2UoYiJcXFxcIiwgYiJcXFxcXFxcXCIpXHJcbiAgICAgICAgcXVvdGVkX3ZhbHVlX2NvbnRlbnQgPSBxdW90ZWRfdmFsdWVfY29udGVudC5yZXBsYWNlKGJcJyJcJywgYlwnXFxcXCJcJylcclxuXHJcbiAgICAgICAgcmV0dXJuIFwnIlwnICsgcXVvdGVkX3ZhbHVlX2NvbnRlbnQuZGVjb2RlKCJhc2NpaSIpICsgXCciXCdcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBib3VuZGFyeShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JvdW5kYXJ5LmRlY29kZSgiYXNjaWkiKVxyXG5cclxuICAgIGRlZiBhcHBlbmQoc2VsZiwgb2JqOiBBbnksIGhlYWRlcnM6IE9wdGlvbmFsW011bHRpTWFwcGluZ1tzdHJdXSA9IE5vbmUpIC0+IFBheWxvYWQ6XHJcbiAgICAgICAgaWYgaGVhZGVycyBpcyBOb25lOlxyXG4gICAgICAgICAgICBoZWFkZXJzID0gQ0lNdWx0aURpY3QoKVxyXG5cclxuICAgICAgICBpZiBpc2luc3RhbmNlKG9iaiwgUGF5bG9hZCk6XHJcbiAgICAgICAgICAgIG9iai5oZWFkZXJzLnVwZGF0ZShoZWFkZXJzKVxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5hcHBlbmRfcGF5bG9hZChvYmopXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgcGF5bG9hZCA9IGdldF9wYXlsb2FkKG9iaiwgaGVhZGVycz1oZWFkZXJzKVxyXG4gICAgICAgICAgICBleGNlcHQgTG9va3VwRXJyb3I6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkNhbm5vdCBjcmVhdGUgcGF5bG9hZCBmcm9tICVyIiAlIG9iailcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmFwcGVuZF9wYXlsb2FkKHBheWxvYWQpXHJcblxyXG4gICAgZGVmIGFwcGVuZF9wYXlsb2FkKHNlbGYsIHBheWxvYWQ6IFBheWxvYWQpIC0+IFBheWxvYWQ6XHJcbiAgICAgICAgIiIiQWRkcyBhIG5ldyBib2R5IHBhcnQgdG8gbXVsdGlwYXJ0IHdyaXRlci4iIiJcclxuICAgICAgICAjIGNvbXByZXNzaW9uXHJcbiAgICAgICAgZW5jb2RpbmcgPSBwYXlsb2FkLmhlYWRlcnMuZ2V0KFxyXG4gICAgICAgICAgICBDT05URU5UX0VOQ09ESU5HLFxyXG4gICAgICAgICAgICAiIixcclxuICAgICAgICApLmxvd2VyKCkgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxyXG4gICAgICAgIGlmIGVuY29kaW5nIGFuZCBlbmNvZGluZyBub3QgaW4gKCJkZWZsYXRlIiwgImd6aXAiLCAiaWRlbnRpdHkiKTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKGYidW5rbm93biBjb250ZW50IGVuY29kaW5nOiB7ZW5jb2Rpbmd9IilcclxuICAgICAgICBpZiBlbmNvZGluZyA9PSAiaWRlbnRpdHkiOlxyXG4gICAgICAgICAgICBlbmNvZGluZyA9IE5vbmVcclxuXHJcbiAgICAgICAgIyB0ZSBlbmNvZGluZ1xyXG4gICAgICAgIHRlX2VuY29kaW5nID0gcGF5bG9hZC5oZWFkZXJzLmdldChcclxuICAgICAgICAgICAgQ09OVEVOVF9UUkFOU0ZFUl9FTkNPRElORyxcclxuICAgICAgICAgICAgIiIsXHJcbiAgICAgICAgKS5sb3dlcigpICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cclxuICAgICAgICBpZiB0ZV9lbmNvZGluZyBub3QgaW4gKCIiLCAiYmFzZTY0IiwgInF1b3RlZC1wcmludGFibGUiLCAiYmluYXJ5Iik6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJ1bmtub3duIGNvbnRlbnQgdHJhbnNmZXIgZW5jb2Rpbmc6IHt9IiAiIi5mb3JtYXQodGVfZW5jb2RpbmcpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiB0ZV9lbmNvZGluZyA9PSAiYmluYXJ5IjpcclxuICAgICAgICAgICAgdGVfZW5jb2RpbmcgPSBOb25lXHJcblxyXG4gICAgICAgICMgc2l6ZVxyXG4gICAgICAgIHNpemUgPSBwYXlsb2FkLnNpemVcclxuICAgICAgICBpZiBzaXplIGlzIG5vdCBOb25lIGFuZCBub3QgKGVuY29kaW5nIG9yIHRlX2VuY29kaW5nKTpcclxuICAgICAgICAgICAgcGF5bG9hZC5oZWFkZXJzW0NPTlRFTlRfTEVOR1RIXSA9IHN0cihzaXplKVxyXG5cclxuICAgICAgICBzZWxmLl9wYXJ0cy5hcHBlbmQoKHBheWxvYWQsIGVuY29kaW5nLCB0ZV9lbmNvZGluZykpICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZV1cclxuICAgICAgICByZXR1cm4gcGF5bG9hZFxyXG5cclxuICAgIGRlZiBhcHBlbmRfanNvbihcclxuICAgICAgICBzZWxmLCBvYmo6IEFueSwgaGVhZGVyczogT3B0aW9uYWxbTXVsdGlNYXBwaW5nW3N0cl1dID0gTm9uZVxyXG4gICAgKSAtPiBQYXlsb2FkOlxyXG4gICAgICAgICIiIkhlbHBlciB0byBhcHBlbmQgSlNPTiBwYXJ0LiIiIlxyXG4gICAgICAgIGlmIGhlYWRlcnMgaXMgTm9uZTpcclxuICAgICAgICAgICAgaGVhZGVycyA9IENJTXVsdGlEaWN0KClcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuYXBwZW5kX3BheWxvYWQoSnNvblBheWxvYWQob2JqLCBoZWFkZXJzPWhlYWRlcnMpKVxyXG5cclxuICAgIGRlZiBhcHBlbmRfZm9ybShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG9iajogVW5pb25bU2VxdWVuY2VbVHVwbGVbc3RyLCBzdHJdXSwgTWFwcGluZ1tzdHIsIHN0cl1dLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW011bHRpTWFwcGluZ1tzdHJdXSA9IE5vbmUsXHJcbiAgICApIC0+IFBheWxvYWQ6XHJcbiAgICAgICAgIiIiSGVscGVyIHRvIGFwcGVuZCBmb3JtIHVybGVuY29kZWQgcGFydC4iIiJcclxuICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZShvYmosIChTZXF1ZW5jZSwgTWFwcGluZykpXHJcblxyXG4gICAgICAgIGlmIGhlYWRlcnMgaXMgTm9uZTpcclxuICAgICAgICAgICAgaGVhZGVycyA9IENJTXVsdGlEaWN0KClcclxuXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShvYmosIE1hcHBpbmcpOlxyXG4gICAgICAgICAgICBvYmogPSBsaXN0KG9iai5pdGVtcygpKVxyXG4gICAgICAgIGRhdGEgPSB1cmxlbmNvZGUob2JqLCBkb3NlcT1UcnVlKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5hcHBlbmRfcGF5bG9hZChcclxuICAgICAgICAgICAgU3RyaW5nUGF5bG9hZChcclxuICAgICAgICAgICAgICAgIGRhdGEsIGhlYWRlcnM9aGVhZGVycywgY29udGVudF90eXBlPSJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc2l6ZShzZWxmKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgICIiIlNpemUgb2YgdGhlIHBheWxvYWQuIiIiXHJcbiAgICAgICAgdG90YWwgPSAwXHJcbiAgICAgICAgZm9yIHBhcnQsIGVuY29kaW5nLCB0ZV9lbmNvZGluZyBpbiBzZWxmLl9wYXJ0czpcclxuICAgICAgICAgICAgaWYgZW5jb2Rpbmcgb3IgdGVfZW5jb2Rpbmcgb3IgcGFydC5zaXplIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgICAgICAgICAgdG90YWwgKz0gaW50KFxyXG4gICAgICAgICAgICAgICAgMlxyXG4gICAgICAgICAgICAgICAgKyBsZW4oc2VsZi5fYm91bmRhcnkpXHJcbiAgICAgICAgICAgICAgICArIDJcclxuICAgICAgICAgICAgICAgICsgcGFydC5zaXplICAjIGJcJy0tXCcrc2VsZi5fYm91bmRhcnkrYlwnXFxyXFxuXCdcclxuICAgICAgICAgICAgICAgICsgbGVuKHBhcnQuX2JpbmFyeV9oZWFkZXJzKVxyXG4gICAgICAgICAgICAgICAgKyAyICAjIGJcJ1xcclxcblwnXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgdG90YWwgKz0gMiArIGxlbihzZWxmLl9ib3VuZGFyeSkgKyA0ICAjIGJcJy0tXCcrc2VsZi5fYm91bmRhcnkrYlwnLS1cXHJcXG5cJ1xyXG4gICAgICAgIHJldHVybiB0b3RhbFxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZShzZWxmLCB3cml0ZXI6IEFueSwgY2xvc2VfYm91bmRhcnk6IGJvb2wgPSBUcnVlKSAtPiBOb25lOlxyXG4gICAgICAgICIiIldyaXRlIGJvZHkuIiIiXHJcbiAgICAgICAgZm9yIHBhcnQsIGVuY29kaW5nLCB0ZV9lbmNvZGluZyBpbiBzZWxmLl9wYXJ0czpcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGVyLndyaXRlKGIiLS0iICsgc2VsZi5fYm91bmRhcnkgKyBiIlxcclxcbiIpXHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlci53cml0ZShwYXJ0Ll9iaW5hcnlfaGVhZGVycylcclxuXHJcbiAgICAgICAgICAgIGlmIGVuY29kaW5nIG9yIHRlX2VuY29kaW5nOlxyXG4gICAgICAgICAgICAgICAgdyA9IE11bHRpcGFydFBheWxvYWRXcml0ZXIod3JpdGVyKVxyXG4gICAgICAgICAgICAgICAgaWYgZW5jb2Rpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgdy5lbmFibGVfY29tcHJlc3Npb24oZW5jb2RpbmcpXHJcbiAgICAgICAgICAgICAgICBpZiB0ZV9lbmNvZGluZzpcclxuICAgICAgICAgICAgICAgICAgICB3LmVuYWJsZV9lbmNvZGluZyh0ZV9lbmNvZGluZylcclxuICAgICAgICAgICAgICAgIGF3YWl0IHBhcnQud3JpdGUodykgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdy53cml0ZV9lb2YoKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgcGFydC53cml0ZSh3cml0ZXIpXHJcblxyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZXIud3JpdGUoYiJcXHJcXG4iKVxyXG5cclxuICAgICAgICBpZiBjbG9zZV9ib3VuZGFyeTpcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGVyLndyaXRlKGIiLS0iICsgc2VsZi5fYm91bmRhcnkgKyBiIi0tXFxyXFxuIilcclxuXHJcblxyXG5jbGFzcyBNdWx0aXBhcnRQYXlsb2FkV3JpdGVyOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHdyaXRlcjogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3dyaXRlciA9IHdyaXRlclxyXG4gICAgICAgIHNlbGYuX2VuY29kaW5nID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXHJcbiAgICAgICAgc2VsZi5fY29tcHJlc3MgPSBOb25lICAjIHR5cGU6IEFueVxyXG4gICAgICAgIHNlbGYuX2VuY29kaW5nX2J1ZmZlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYnl0ZWFycmF5XVxyXG5cclxuICAgIGRlZiBlbmFibGVfZW5jb2Rpbmcoc2VsZiwgZW5jb2Rpbmc6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBpZiBlbmNvZGluZyA9PSAiYmFzZTY0IjpcclxuICAgICAgICAgICAgc2VsZi5fZW5jb2RpbmcgPSBlbmNvZGluZ1xyXG4gICAgICAgICAgICBzZWxmLl9lbmNvZGluZ19idWZmZXIgPSBieXRlYXJyYXkoKVxyXG4gICAgICAgIGVsaWYgZW5jb2RpbmcgPT0gInF1b3RlZC1wcmludGFibGUiOlxyXG4gICAgICAgICAgICBzZWxmLl9lbmNvZGluZyA9ICJxdW90ZWQtcHJpbnRhYmxlIlxyXG5cclxuICAgIGRlZiBlbmFibGVfY29tcHJlc3Npb24oXHJcbiAgICAgICAgc2VsZiwgZW5jb2Rpbmc6IHN0ciA9ICJkZWZsYXRlIiwgc3RyYXRlZ3k6IGludCA9IHpsaWIuWl9ERUZBVUxUX1NUUkFURUdZXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgemxpYl9tb2RlID0gMTYgKyB6bGliLk1BWF9XQklUUyBpZiBlbmNvZGluZyA9PSAiZ3ppcCIgZWxzZSAtemxpYi5NQVhfV0JJVFNcclxuICAgICAgICBzZWxmLl9jb21wcmVzcyA9IHpsaWIuY29tcHJlc3NvYmood2JpdHM9emxpYl9tb2RlLCBzdHJhdGVneT1zdHJhdGVneSlcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGVfZW9mKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fY29tcHJlc3MgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGNodW5rID0gc2VsZi5fY29tcHJlc3MuZmx1c2goKVxyXG4gICAgICAgICAgICBpZiBjaHVuazpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2NvbXByZXNzID0gTm9uZVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi53cml0ZShjaHVuaylcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fZW5jb2RpbmcgPT0gImJhc2U2NCI6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2VuY29kaW5nX2J1ZmZlcjpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dyaXRlci53cml0ZShiYXNlNjQuYjY0ZW5jb2RlKHNlbGYuX2VuY29kaW5nX2J1ZmZlcikpXHJcblxyXG4gICAgYXN5bmMgZGVmIHdyaXRlKHNlbGYsIGNodW5rOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9jb21wcmVzcyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgaWYgY2h1bms6XHJcbiAgICAgICAgICAgICAgICBjaHVuayA9IHNlbGYuX2NvbXByZXNzLmNvbXByZXNzKGNodW5rKVxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGNodW5rOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBpZiBzZWxmLl9lbmNvZGluZyA9PSAiYmFzZTY0IjpcclxuICAgICAgICAgICAgYnVmID0gc2VsZi5fZW5jb2RpbmdfYnVmZmVyXHJcbiAgICAgICAgICAgIGFzc2VydCBidWYgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgYnVmLmV4dGVuZChjaHVuaylcclxuXHJcbiAgICAgICAgICAgIGlmIGJ1ZjpcclxuICAgICAgICAgICAgICAgIGRpdiwgbW9kID0gZGl2bW9kKGxlbihidWYpLCAzKVxyXG4gICAgICAgICAgICAgICAgZW5jX2NodW5rLCBzZWxmLl9lbmNvZGluZ19idWZmZXIgPSAoYnVmWzogZGl2ICogM10sIGJ1ZltkaXYgKiAzIDpdKVxyXG4gICAgICAgICAgICAgICAgaWYgZW5jX2NodW5rOlxyXG4gICAgICAgICAgICAgICAgICAgIGI2NGNodW5rID0gYmFzZTY0LmI2NGVuY29kZShlbmNfY2h1bmspXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5fd3JpdGVyLndyaXRlKGI2NGNodW5rKVxyXG4gICAgICAgIGVsaWYgc2VsZi5fZW5jb2RpbmcgPT0gInF1b3RlZC1wcmludGFibGUiOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl93cml0ZXIud3JpdGUoYmluYXNjaWkuYjJhX3FwKGNodW5rKSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl93cml0ZXIud3JpdGUoY2h1bmspXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3BheWxvYWQucHknLCBiJ2ltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBlbnVtXHJcbmltcG9ydCBpb1xyXG5pbXBvcnQganNvblxyXG5pbXBvcnQgbWltZXR5cGVzXHJcbmltcG9ydCBvc1xyXG5pbXBvcnQgd2FybmluZ3NcclxuZnJvbSBhYmMgaW1wb3J0IEFCQywgYWJzdHJhY3RtZXRob2RcclxuZnJvbSBpdGVydG9vbHMgaW1wb3J0IGNoYWluXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBJTyxcclxuICAgIFRZUEVfQ0hFQ0tJTkcsXHJcbiAgICBBbnksXHJcbiAgICBCeXRlU3RyaW5nLFxyXG4gICAgRGljdCxcclxuICAgIEl0ZXJhYmxlLFxyXG4gICAgT3B0aW9uYWwsXHJcbiAgICBUZXh0SU8sXHJcbiAgICBUdXBsZSxcclxuICAgIFR5cGUsXHJcbiAgICBVbmlvbixcclxuKVxyXG5cclxuZnJvbSBtdWx0aWRpY3QgaW1wb3J0IENJTXVsdGlEaWN0XHJcblxyXG5mcm9tIC4gaW1wb3J0IGhkcnNcclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdFN0cmVhbVdyaXRlclxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCAoXHJcbiAgICBQWV8zNixcclxuICAgIGNvbnRlbnRfZGlzcG9zaXRpb25faGVhZGVyLFxyXG4gICAgZ3Vlc3NfZmlsZW5hbWUsXHJcbiAgICBwYXJzZV9taW1ldHlwZSxcclxuICAgIHNlbnRpbmVsLFxyXG4pXHJcbmZyb20gLnN0cmVhbXMgaW1wb3J0IFN0cmVhbVJlYWRlclxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgRmluYWwsIEpTT05FbmNvZGVyLCBfQ0lNdWx0aURpY3RcclxuXHJcbl9fYWxsX18gPSAoXHJcbiAgICAiUEFZTE9BRF9SRUdJU1RSWSIsXHJcbiAgICAiZ2V0X3BheWxvYWQiLFxyXG4gICAgInBheWxvYWRfdHlwZSIsXHJcbiAgICAiUGF5bG9hZCIsXHJcbiAgICAiQnl0ZXNQYXlsb2FkIixcclxuICAgICJTdHJpbmdQYXlsb2FkIixcclxuICAgICJJT0Jhc2VQYXlsb2FkIixcclxuICAgICJCeXRlc0lPUGF5bG9hZCIsXHJcbiAgICAiQnVmZmVyZWRSZWFkZXJQYXlsb2FkIixcclxuICAgICJUZXh0SU9QYXlsb2FkIixcclxuICAgICJTdHJpbmdJT1BheWxvYWQiLFxyXG4gICAgIkpzb25QYXlsb2FkIixcclxuICAgICJBc3luY0l0ZXJhYmxlUGF5bG9hZCIsXHJcbilcclxuXHJcblRPT19MQVJHRV9CWVRFU19CT0RZOiBGaW5hbFtpbnRdID0gMiAqKiAyMCAgIyAxIE1CXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIHR5cGluZyBpbXBvcnQgTGlzdFxyXG5cclxuXHJcbmNsYXNzIExvb2t1cEVycm9yKEV4Y2VwdGlvbik6XHJcbiAgICBwYXNzXHJcblxyXG5cclxuY2xhc3MgT3JkZXIoc3RyLCBlbnVtLkVudW0pOlxyXG4gICAgbm9ybWFsID0gIm5vcm1hbCJcclxuICAgIHRyeV9maXJzdCA9ICJ0cnlfZmlyc3QiXHJcbiAgICB0cnlfbGFzdCA9ICJ0cnlfbGFzdCJcclxuXHJcblxyXG5kZWYgZ2V0X3BheWxvYWQoZGF0YTogQW55LCAqYXJnczogQW55LCAqKmt3YXJnczogQW55KSAtPiAiUGF5bG9hZCI6XHJcbiAgICByZXR1cm4gUEFZTE9BRF9SRUdJU1RSWS5nZXQoZGF0YSwgKmFyZ3MsICoqa3dhcmdzKVxyXG5cclxuXHJcbmRlZiByZWdpc3Rlcl9wYXlsb2FkKFxyXG4gICAgZmFjdG9yeTogVHlwZVsiUGF5bG9hZCJdLCB0eXBlOiBBbnksICosIG9yZGVyOiBPcmRlciA9IE9yZGVyLm5vcm1hbFxyXG4pIC0+IE5vbmU6XHJcbiAgICBQQVlMT0FEX1JFR0lTVFJZLnJlZ2lzdGVyKGZhY3RvcnksIHR5cGUsIG9yZGVyPW9yZGVyKVxyXG5cclxuXHJcbmNsYXNzIHBheWxvYWRfdHlwZTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0eXBlOiBBbnksICosIG9yZGVyOiBPcmRlciA9IE9yZGVyLm5vcm1hbCkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLnR5cGUgPSB0eXBlXHJcbiAgICAgICAgc2VsZi5vcmRlciA9IG9yZGVyXHJcblxyXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIGZhY3Rvcnk6IFR5cGVbIlBheWxvYWQiXSkgLT4gVHlwZVsiUGF5bG9hZCJdOlxyXG4gICAgICAgIHJlZ2lzdGVyX3BheWxvYWQoZmFjdG9yeSwgc2VsZi50eXBlLCBvcmRlcj1zZWxmLm9yZGVyKVxyXG4gICAgICAgIHJldHVybiBmYWN0b3J5XHJcblxyXG5cclxuUGF5bG9hZFR5cGUgPSBUeXBlWyJQYXlsb2FkIl1cclxuX1BheWxvYWRSZWdpc3RyeUl0ZW0gPSBUdXBsZVtQYXlsb2FkVHlwZSwgQW55XVxyXG5cclxuXHJcbmNsYXNzIFBheWxvYWRSZWdpc3RyeTpcclxuICAgICIiIlBheWxvYWQgcmVnaXN0cnkuXHJcblxyXG4gICAgbm90ZTogd2UgbmVlZCB6b3BlLmludGVyZmFjZSBmb3IgbW9yZSBlZmZpY2llbnQgYWRhcHRlciBzZWFyY2hcclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2ZpcnN0ID0gW10gICMgdHlwZTogTGlzdFtfUGF5bG9hZFJlZ2lzdHJ5SXRlbV1cclxuICAgICAgICBzZWxmLl9ub3JtYWwgPSBbXSAgIyB0eXBlOiBMaXN0W19QYXlsb2FkUmVnaXN0cnlJdGVtXVxyXG4gICAgICAgIHNlbGYuX2xhc3QgPSBbXSAgIyB0eXBlOiBMaXN0W19QYXlsb2FkUmVnaXN0cnlJdGVtXVxyXG5cclxuICAgIGRlZiBnZXQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBkYXRhOiBBbnksXHJcbiAgICAgICAgKmFyZ3M6IEFueSxcclxuICAgICAgICBfQ0hBSU46ICJUeXBlW2NoYWluW19QYXlsb2FkUmVnaXN0cnlJdGVtXV0iID0gY2hhaW4sXHJcbiAgICAgICAgKiprd2FyZ3M6IEFueSxcclxuICAgICkgLT4gIlBheWxvYWQiOlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UoZGF0YSwgUGF5bG9hZCk6XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhXHJcbiAgICAgICAgZm9yIGZhY3RvcnksIHR5cGUgaW4gX0NIQUlOKHNlbGYuX2ZpcnN0LCBzZWxmLl9ub3JtYWwsIHNlbGYuX2xhc3QpOlxyXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKGRhdGEsIHR5cGUpOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkoZGF0YSwgKmFyZ3MsICoqa3dhcmdzKVxyXG5cclxuICAgICAgICByYWlzZSBMb29rdXBFcnJvcigpXHJcblxyXG4gICAgZGVmIHJlZ2lzdGVyKFxyXG4gICAgICAgIHNlbGYsIGZhY3Rvcnk6IFBheWxvYWRUeXBlLCB0eXBlOiBBbnksICosIG9yZGVyOiBPcmRlciA9IE9yZGVyLm5vcm1hbFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG9yZGVyIGlzIE9yZGVyLnRyeV9maXJzdDpcclxuICAgICAgICAgICAgc2VsZi5fZmlyc3QuYXBwZW5kKChmYWN0b3J5LCB0eXBlKSlcclxuICAgICAgICBlbGlmIG9yZGVyIGlzIE9yZGVyLm5vcm1hbDpcclxuICAgICAgICAgICAgc2VsZi5fbm9ybWFsLmFwcGVuZCgoZmFjdG9yeSwgdHlwZSkpXHJcbiAgICAgICAgZWxpZiBvcmRlciBpcyBPcmRlci50cnlfbGFzdDpcclxuICAgICAgICAgICAgc2VsZi5fbGFzdC5hcHBlbmQoKGZhY3RvcnksIHR5cGUpKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJVbnN1cHBvcnRlZCBvcmRlciB7b3JkZXIhcn0iKVxyXG5cclxuXHJcbmNsYXNzIFBheWxvYWQoQUJDKTpcclxuXHJcbiAgICBfZGVmYXVsdF9jb250ZW50X3R5cGUgPSAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIiAgIyB0eXBlOiBzdHJcclxuICAgIF9zaXplID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtpbnRdXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdmFsdWU6IEFueSxcclxuICAgICAgICBoZWFkZXJzOiBPcHRpb25hbFtcclxuICAgICAgICAgICAgVW5pb25bX0NJTXVsdGlEaWN0LCBEaWN0W3N0ciwgc3RyXSwgSXRlcmFibGVbVHVwbGVbc3RyLCBzdHJdXV1cclxuICAgICAgICBdID0gTm9uZSxcclxuICAgICAgICBjb250ZW50X3R5cGU6IE9wdGlvbmFsW3N0cl0gPSBzZW50aW5lbCxcclxuICAgICAgICBmaWxlbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgZW5jb2Rpbmc6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgICoqa3dhcmdzOiBBbnksXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZW5jb2RpbmcgPSBlbmNvZGluZ1xyXG4gICAgICAgIHNlbGYuX2ZpbGVuYW1lID0gZmlsZW5hbWVcclxuICAgICAgICBzZWxmLl9oZWFkZXJzID0gQ0lNdWx0aURpY3QoKSAgIyB0eXBlOiBfQ0lNdWx0aURpY3RcclxuICAgICAgICBzZWxmLl92YWx1ZSA9IHZhbHVlXHJcbiAgICAgICAgaWYgY29udGVudF90eXBlIGlzIG5vdCBzZW50aW5lbCBhbmQgY29udGVudF90eXBlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzW2hkcnMuQ09OVEVOVF9UWVBFXSA9IGNvbnRlbnRfdHlwZVxyXG4gICAgICAgIGVsaWYgc2VsZi5fZmlsZW5hbWUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGNvbnRlbnRfdHlwZSA9IG1pbWV0eXBlcy5ndWVzc190eXBlKHNlbGYuX2ZpbGVuYW1lKVswXVxyXG4gICAgICAgICAgICBpZiBjb250ZW50X3R5cGUgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRfdHlwZSA9IHNlbGYuX2RlZmF1bHRfY29udGVudF90eXBlXHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnNbaGRycy5DT05URU5UX1RZUEVdID0gY29udGVudF90eXBlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5faGVhZGVyc1toZHJzLkNPTlRFTlRfVFlQRV0gPSBzZWxmLl9kZWZhdWx0X2NvbnRlbnRfdHlwZVxyXG4gICAgICAgIHNlbGYuX2hlYWRlcnMudXBkYXRlKGhlYWRlcnMgb3Ige30pXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc2l6ZShzZWxmKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgICIiIlNpemUgb2YgdGhlIHBheWxvYWQuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3NpemVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBmaWxlbmFtZShzZWxmKSAtPiBPcHRpb25hbFtzdHJdOlxyXG4gICAgICAgICIiIkZpbGVuYW1lIG9mIHRoZSBwYXlsb2FkLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9maWxlbmFtZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGhlYWRlcnMoc2VsZikgLT4gX0NJTXVsdGlEaWN0OlxyXG4gICAgICAgICIiIkN1c3RvbSBpdGVtIGhlYWRlcnMiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5faGVhZGVyc1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIF9iaW5hcnlfaGVhZGVycyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAiIi5qb2luKFtrICsgIjogIiArIHYgKyAiXFxyXFxuIiBmb3IgaywgdiBpbiBzZWxmLmhlYWRlcnMuaXRlbXMoKV0pLmVuY29kZShcclxuICAgICAgICAgICAgICAgICJ1dGYtOCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICArIGIiXFxyXFxuIlxyXG4gICAgICAgIClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBlbmNvZGluZyhzZWxmKSAtPiBPcHRpb25hbFtzdHJdOlxyXG4gICAgICAgICIiIlBheWxvYWQgZW5jb2RpbmciIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fZW5jb2RpbmdcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb250ZW50X3R5cGUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIkNvbnRlbnQgdHlwZSIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9oZWFkZXJzW2hkcnMuQ09OVEVOVF9UWVBFXVxyXG5cclxuICAgIGRlZiBzZXRfY29udGVudF9kaXNwb3NpdGlvbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGRpc3B0eXBlOiBzdHIsXHJcbiAgICAgICAgcXVvdGVfZmllbGRzOiBib29sID0gVHJ1ZSxcclxuICAgICAgICBfY2hhcnNldDogc3RyID0gInV0Zi04IixcclxuICAgICAgICAqKnBhcmFtczogQW55LFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlNldHMgYGBDb250ZW50LURpc3Bvc2l0aW9uYGAgaGVhZGVyLiIiIlxyXG4gICAgICAgIHNlbGYuX2hlYWRlcnNbaGRycy5DT05URU5UX0RJU1BPU0lUSU9OXSA9IGNvbnRlbnRfZGlzcG9zaXRpb25faGVhZGVyKFxyXG4gICAgICAgICAgICBkaXNwdHlwZSwgcXVvdGVfZmllbGRzPXF1b3RlX2ZpZWxkcywgX2NoYXJzZXQ9X2NoYXJzZXQsICoqcGFyYW1zXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgYXN5bmMgZGVmIHdyaXRlKHNlbGYsIHdyaXRlcjogQWJzdHJhY3RTdHJlYW1Xcml0ZXIpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiV3JpdGUgcGF5bG9hZC5cclxuXHJcbiAgICAgICAgd3JpdGVyIGlzIGFuIEFic3RyYWN0U3RyZWFtV3JpdGVyIGluc3RhbmNlOlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIEJ5dGVzUGF5bG9hZChQYXlsb2FkKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZTogQnl0ZVN0cmluZywgKmFyZ3M6IEFueSwgKiprd2FyZ3M6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh2YWx1ZSwgKGJ5dGVzLCBieXRlYXJyYXksIG1lbW9yeXZpZXcpKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKGYidmFsdWUgYXJndW1lbnQgbXVzdCBiZSBieXRlLWlzaCwgbm90IHt0eXBlKHZhbHVlKSFyfSIpXHJcblxyXG4gICAgICAgIGlmICJjb250ZW50X3R5cGUiIG5vdCBpbiBrd2FyZ3M6XHJcbiAgICAgICAgICAgIGt3YXJnc1siY29udGVudF90eXBlIl0gPSAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIlxyXG5cclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKHZhbHVlLCAqYXJncywgKiprd2FyZ3MpXHJcblxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIG1lbW9yeXZpZXcpOlxyXG4gICAgICAgICAgICBzZWxmLl9zaXplID0gdmFsdWUubmJ5dGVzXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5fc2l6ZSA9IGxlbih2YWx1ZSlcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fc2l6ZSA+IFRPT19MQVJHRV9CWVRFU19CT0RZOlxyXG4gICAgICAgICAgICBpZiBQWV8zNjpcclxuICAgICAgICAgICAgICAgIGt3YXJncyA9IHsic291cmNlIjogc2VsZn1cclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGt3YXJncyA9IHt9XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAiU2VuZGluZyBhIGxhcmdlIGJvZHkgZGlyZWN0bHkgd2l0aCByYXcgYnl0ZXMgbWlnaHQiXHJcbiAgICAgICAgICAgICAgICAiIGxvY2sgdGhlIGV2ZW50IGxvb3AuIFlvdSBzaG91bGQgcHJvYmFibHkgcGFzcyBhbiAiXHJcbiAgICAgICAgICAgICAgICAiaW8uQnl0ZXNJTyBvYmplY3QgaW5zdGVhZCIsXHJcbiAgICAgICAgICAgICAgICBSZXNvdXJjZVdhcm5pbmcsXHJcbiAgICAgICAgICAgICAgICAqKmt3YXJncyxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZShzZWxmLCB3cml0ZXI6IEFic3RyYWN0U3RyZWFtV3JpdGVyKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHdyaXRlci53cml0ZShzZWxmLl92YWx1ZSlcclxuXHJcblxyXG5jbGFzcyBTdHJpbmdQYXlsb2FkKEJ5dGVzUGF5bG9hZCk6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB2YWx1ZTogc3RyLFxyXG4gICAgICAgICphcmdzOiBBbnksXHJcbiAgICAgICAgZW5jb2Rpbmc6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGNvbnRlbnRfdHlwZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgKiprd2FyZ3M6IEFueSxcclxuICAgICkgLT4gTm9uZTpcclxuXHJcbiAgICAgICAgaWYgZW5jb2RpbmcgaXMgTm9uZTpcclxuICAgICAgICAgICAgaWYgY29udGVudF90eXBlIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICByZWFsX2VuY29kaW5nID0gInV0Zi04IlxyXG4gICAgICAgICAgICAgICAgY29udGVudF90eXBlID0gInRleHQvcGxhaW47IGNoYXJzZXQ9dXRmLTgiXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBtaW1ldHlwZSA9IHBhcnNlX21pbWV0eXBlKGNvbnRlbnRfdHlwZSlcclxuICAgICAgICAgICAgICAgIHJlYWxfZW5jb2RpbmcgPSBtaW1ldHlwZS5wYXJhbWV0ZXJzLmdldCgiY2hhcnNldCIsICJ1dGYtOCIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaWYgY29udGVudF90eXBlIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICBjb250ZW50X3R5cGUgPSAidGV4dC9wbGFpbjsgY2hhcnNldD0lcyIgJSBlbmNvZGluZ1xyXG4gICAgICAgICAgICByZWFsX2VuY29kaW5nID0gZW5jb2RpbmdcclxuXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhcclxuICAgICAgICAgICAgdmFsdWUuZW5jb2RlKHJlYWxfZW5jb2RpbmcpLFxyXG4gICAgICAgICAgICBlbmNvZGluZz1yZWFsX2VuY29kaW5nLFxyXG4gICAgICAgICAgICBjb250ZW50X3R5cGU9Y29udGVudF90eXBlLFxyXG4gICAgICAgICAgICAqYXJncyxcclxuICAgICAgICAgICAgKiprd2FyZ3MsXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIFN0cmluZ0lPUGF5bG9hZChTdHJpbmdQYXlsb2FkKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZTogSU9bc3RyXSwgKmFyZ3M6IEFueSwgKiprd2FyZ3M6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKHZhbHVlLnJlYWQoKSwgKmFyZ3MsICoqa3dhcmdzKVxyXG5cclxuXHJcbmNsYXNzIElPQmFzZVBheWxvYWQoUGF5bG9hZCk6XHJcbiAgICBfdmFsdWU6IElPW0FueV1cclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgdmFsdWU6IElPW0FueV0sIGRpc3Bvc2l0aW9uOiBzdHIgPSAiYXR0YWNobWVudCIsICphcmdzOiBBbnksICoqa3dhcmdzOiBBbnlcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiAiZmlsZW5hbWUiIG5vdCBpbiBrd2FyZ3M6XHJcbiAgICAgICAgICAgIGt3YXJnc1siZmlsZW5hbWUiXSA9IGd1ZXNzX2ZpbGVuYW1lKHZhbHVlKVxyXG5cclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKHZhbHVlLCAqYXJncywgKiprd2FyZ3MpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2ZpbGVuYW1lIGlzIG5vdCBOb25lIGFuZCBkaXNwb3NpdGlvbiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgaWYgaGRycy5DT05URU5UX0RJU1BPU0lUSU9OIG5vdCBpbiBzZWxmLmhlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNldF9jb250ZW50X2Rpc3Bvc2l0aW9uKGRpc3Bvc2l0aW9uLCBmaWxlbmFtZT1zZWxmLl9maWxlbmFtZSlcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGUoc2VsZiwgd3JpdGVyOiBBYnN0cmFjdFN0cmVhbVdyaXRlcikgLT4gTm9uZTpcclxuICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBjaHVuayA9IGF3YWl0IGxvb3AucnVuX2luX2V4ZWN1dG9yKE5vbmUsIHNlbGYuX3ZhbHVlLnJlYWQsIDIgKiogMTYpXHJcbiAgICAgICAgICAgIHdoaWxlIGNodW5rOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgd3JpdGVyLndyaXRlKGNodW5rKVxyXG4gICAgICAgICAgICAgICAgY2h1bmsgPSBhd2FpdCBsb29wLnJ1bl9pbl9leGVjdXRvcihOb25lLCBzZWxmLl92YWx1ZS5yZWFkLCAyICoqIDE2KVxyXG4gICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgIGF3YWl0IGxvb3AucnVuX2luX2V4ZWN1dG9yKE5vbmUsIHNlbGYuX3ZhbHVlLmNsb3NlKVxyXG5cclxuXHJcbmNsYXNzIFRleHRJT1BheWxvYWQoSU9CYXNlUGF5bG9hZCk6XHJcbiAgICBfdmFsdWU6IFRleHRJT1xyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHZhbHVlOiBUZXh0SU8sXHJcbiAgICAgICAgKmFyZ3M6IEFueSxcclxuICAgICAgICBlbmNvZGluZzogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgY29udGVudF90eXBlOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICAqKmt3YXJnczogQW55LFxyXG4gICAgKSAtPiBOb25lOlxyXG5cclxuICAgICAgICBpZiBlbmNvZGluZyBpcyBOb25lOlxyXG4gICAgICAgICAgICBpZiBjb250ZW50X3R5cGUgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIGVuY29kaW5nID0gInV0Zi04IlxyXG4gICAgICAgICAgICAgICAgY29udGVudF90eXBlID0gInRleHQvcGxhaW47IGNoYXJzZXQ9dXRmLTgiXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBtaW1ldHlwZSA9IHBhcnNlX21pbWV0eXBlKGNvbnRlbnRfdHlwZSlcclxuICAgICAgICAgICAgICAgIGVuY29kaW5nID0gbWltZXR5cGUucGFyYW1ldGVycy5nZXQoImNoYXJzZXQiLCAidXRmLTgiKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGlmIGNvbnRlbnRfdHlwZSBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgY29udGVudF90eXBlID0gInRleHQvcGxhaW47IGNoYXJzZXQ9JXMiICUgZW5jb2RpbmdcclxuXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgIGNvbnRlbnRfdHlwZT1jb250ZW50X3R5cGUsXHJcbiAgICAgICAgICAgIGVuY29kaW5nPWVuY29kaW5nLFxyXG4gICAgICAgICAgICAqYXJncyxcclxuICAgICAgICAgICAgKiprd2FyZ3MsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHNpemUoc2VsZikgLT4gT3B0aW9uYWxbaW50XTpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHJldHVybiBvcy5mc3RhdChzZWxmLl92YWx1ZS5maWxlbm8oKSkuc3Rfc2l6ZSAtIHNlbGYuX3ZhbHVlLnRlbGwoKVxyXG4gICAgICAgIGV4Y2VwdCBPU0Vycm9yOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZShzZWxmLCB3cml0ZXI6IEFic3RyYWN0U3RyZWFtV3JpdGVyKSAtPiBOb25lOlxyXG4gICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGNodW5rID0gYXdhaXQgbG9vcC5ydW5faW5fZXhlY3V0b3IoTm9uZSwgc2VsZi5fdmFsdWUucmVhZCwgMiAqKiAxNilcclxuICAgICAgICAgICAgd2hpbGUgY2h1bms6XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gKFxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rLmVuY29kZShlbmNvZGluZz1zZWxmLl9lbmNvZGluZylcclxuICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLl9lbmNvZGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgY2h1bmsuZW5jb2RlKClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlci53cml0ZShkYXRhKVxyXG4gICAgICAgICAgICAgICAgY2h1bmsgPSBhd2FpdCBsb29wLnJ1bl9pbl9leGVjdXRvcihOb25lLCBzZWxmLl92YWx1ZS5yZWFkLCAyICoqIDE2KVxyXG4gICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgIGF3YWl0IGxvb3AucnVuX2luX2V4ZWN1dG9yKE5vbmUsIHNlbGYuX3ZhbHVlLmNsb3NlKVxyXG5cclxuXHJcbmNsYXNzIEJ5dGVzSU9QYXlsb2FkKElPQmFzZVBheWxvYWQpOlxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcG9zaXRpb24gPSBzZWxmLl92YWx1ZS50ZWxsKClcclxuICAgICAgICBlbmQgPSBzZWxmLl92YWx1ZS5zZWVrKDAsIG9zLlNFRUtfRU5EKVxyXG4gICAgICAgIHNlbGYuX3ZhbHVlLnNlZWsocG9zaXRpb24pXHJcbiAgICAgICAgcmV0dXJuIGVuZCAtIHBvc2l0aW9uXHJcblxyXG5cclxuY2xhc3MgQnVmZmVyZWRSZWFkZXJQYXlsb2FkKElPQmFzZVBheWxvYWQpOlxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc2l6ZShzZWxmKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgcmV0dXJuIG9zLmZzdGF0KHNlbGYuX3ZhbHVlLmZpbGVubygpKS5zdF9zaXplIC0gc2VsZi5fdmFsdWUudGVsbCgpXHJcbiAgICAgICAgZXhjZXB0IE9TRXJyb3I6XHJcbiAgICAgICAgICAgICMgZGF0YS5maWxlbm8oKSBpcyBub3Qgc3VwcG9ydGVkLCBlLmcuXHJcbiAgICAgICAgICAgICMgaW8uQnVmZmVyZWRSZWFkZXIoaW8uQnl0ZXNJTyhiXCdkYXRhXCcpKVxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuXHJcbmNsYXNzIEpzb25QYXlsb2FkKEJ5dGVzUGF5bG9hZCk6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB2YWx1ZTogQW55LFxyXG4gICAgICAgIGVuY29kaW5nOiBzdHIgPSAidXRmLTgiLFxyXG4gICAgICAgIGNvbnRlbnRfdHlwZTogc3RyID0gImFwcGxpY2F0aW9uL2pzb24iLFxyXG4gICAgICAgIGR1bXBzOiBKU09ORW5jb2RlciA9IGpzb24uZHVtcHMsXHJcbiAgICAgICAgKmFyZ3M6IEFueSxcclxuICAgICAgICAqKmt3YXJnczogQW55LFxyXG4gICAgKSAtPiBOb25lOlxyXG5cclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKFxyXG4gICAgICAgICAgICBkdW1wcyh2YWx1ZSkuZW5jb2RlKGVuY29kaW5nKSxcclxuICAgICAgICAgICAgY29udGVudF90eXBlPWNvbnRlbnRfdHlwZSxcclxuICAgICAgICAgICAgZW5jb2Rpbmc9ZW5jb2RpbmcsXHJcbiAgICAgICAgICAgICphcmdzLFxyXG4gICAgICAgICAgICAqKmt3YXJncyxcclxuICAgICAgICApXHJcblxyXG5cclxuaWYgVFlQRV9DSEVDS0lORzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgZnJvbSB0eXBpbmcgaW1wb3J0IEFzeW5jSXRlcmFibGUsIEFzeW5jSXRlcmF0b3JcclxuXHJcbiAgICBfQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3JbYnl0ZXNdXHJcbiAgICBfQXN5bmNJdGVyYWJsZSA9IEFzeW5jSXRlcmFibGVbYnl0ZXNdXHJcbmVsc2U6XHJcbiAgICBmcm9tIGNvbGxlY3Rpb25zLmFiYyBpbXBvcnQgQXN5bmNJdGVyYWJsZSwgQXN5bmNJdGVyYXRvclxyXG5cclxuICAgIF9Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvclxyXG4gICAgX0FzeW5jSXRlcmFibGUgPSBBc3luY0l0ZXJhYmxlXHJcblxyXG5cclxuY2xhc3MgQXN5bmNJdGVyYWJsZVBheWxvYWQoUGF5bG9hZCk6XHJcblxyXG4gICAgX2l0ZXIgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW19Bc3luY0l0ZXJhdG9yXVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZTogX0FzeW5jSXRlcmFibGUsICphcmdzOiBBbnksICoqa3dhcmdzOiBBbnkpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodmFsdWUsIEFzeW5jSXRlcmFibGUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAidmFsdWUgYXJndW1lbnQgbXVzdCBzdXBwb3J0ICJcclxuICAgICAgICAgICAgICAgICJjb2xsZWN0aW9ucy5hYmMuQXN5bmNJdGVyYWJsZWJlIGludGVyZmFjZSwgIlxyXG4gICAgICAgICAgICAgICAgImdvdCB7IXJ9Ii5mb3JtYXQodHlwZSh2YWx1ZSkpXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgImNvbnRlbnRfdHlwZSIgbm90IGluIGt3YXJnczpcclxuICAgICAgICAgICAga3dhcmdzWyJjb250ZW50X3R5cGUiXSA9ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iXHJcblxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18odmFsdWUsICphcmdzLCAqKmt3YXJncylcclxuXHJcbiAgICAgICAgc2VsZi5faXRlciA9IHZhbHVlLl9fYWl0ZXJfXygpXHJcblxyXG4gICAgYXN5bmMgZGVmIHdyaXRlKHNlbGYsIHdyaXRlcjogQWJzdHJhY3RTdHJlYW1Xcml0ZXIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5faXRlcjpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgIyBpdGVyIGlzIG5vdCBOb25lIGNoZWNrIHByZXZlbnRzIHJhcmUgY2FzZXNcclxuICAgICAgICAgICAgICAgICMgd2hlbiB0aGUgY2FzZSBpdGVyYWJsZSBpcyB1c2VkIHR3aWNlXHJcbiAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOlxyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rID0gYXdhaXQgc2VsZi5faXRlci5fX2FuZXh0X18oKVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlci53cml0ZShjaHVuaylcclxuICAgICAgICAgICAgZXhjZXB0IFN0b3BBc3luY0l0ZXJhdGlvbjpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2l0ZXIgPSBOb25lXHJcblxyXG5cclxuY2xhc3MgU3RyZWFtUmVhZGVyUGF5bG9hZChBc3luY0l0ZXJhYmxlUGF5bG9hZCk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgdmFsdWU6IFN0cmVhbVJlYWRlciwgKmFyZ3M6IEFueSwgKiprd2FyZ3M6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKHZhbHVlLml0ZXJfYW55KCksICphcmdzLCAqKmt3YXJncylcclxuXHJcblxyXG5QQVlMT0FEX1JFR0lTVFJZID0gUGF5bG9hZFJlZ2lzdHJ5KClcclxuUEFZTE9BRF9SRUdJU1RSWS5yZWdpc3RlcihCeXRlc1BheWxvYWQsIChieXRlcywgYnl0ZWFycmF5LCBtZW1vcnl2aWV3KSlcclxuUEFZTE9BRF9SRUdJU1RSWS5yZWdpc3RlcihTdHJpbmdQYXlsb2FkLCBzdHIpXHJcblBBWUxPQURfUkVHSVNUUlkucmVnaXN0ZXIoU3RyaW5nSU9QYXlsb2FkLCBpby5TdHJpbmdJTylcclxuUEFZTE9BRF9SRUdJU1RSWS5yZWdpc3RlcihUZXh0SU9QYXlsb2FkLCBpby5UZXh0SU9CYXNlKVxyXG5QQVlMT0FEX1JFR0lTVFJZLnJlZ2lzdGVyKEJ5dGVzSU9QYXlsb2FkLCBpby5CeXRlc0lPKVxyXG5QQVlMT0FEX1JFR0lTVFJZLnJlZ2lzdGVyKEJ1ZmZlcmVkUmVhZGVyUGF5bG9hZCwgKGlvLkJ1ZmZlcmVkUmVhZGVyLCBpby5CdWZmZXJlZFJhbmRvbSkpXHJcblBBWUxPQURfUkVHSVNUUlkucmVnaXN0ZXIoSU9CYXNlUGF5bG9hZCwgaW8uSU9CYXNlKVxyXG5QQVlMT0FEX1JFR0lTVFJZLnJlZ2lzdGVyKFN0cmVhbVJlYWRlclBheWxvYWQsIFN0cmVhbVJlYWRlcilcclxuIyB0cnlfbGFzdCBmb3IgZ2l2aW5nIGEgY2hhbmNlIHRvIG1vcmUgc3BlY2lhbGl6ZWQgYXN5bmMgaW50ZXJhYmxlcyBsaWtlXHJcbiMgbXVsdGlkaWN0LkJvZHlQYXJ0UmVhZGVyUGF5bG9hZCBvdmVycmlkZSB0aGUgZGVmYXVsdFxyXG5QQVlMT0FEX1JFR0lTVFJZLnJlZ2lzdGVyKEFzeW5jSXRlcmFibGVQYXlsb2FkLCBBc3luY0l0ZXJhYmxlLCBvcmRlcj1PcmRlci50cnlfbGFzdClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvY2xpZW50X3JlcXJlcC5weScsIGInaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IGNvZGVjc1xyXG5pbXBvcnQgZnVuY3Rvb2xzXHJcbmltcG9ydCBpb1xyXG5pbXBvcnQgcmVcclxuaW1wb3J0IHN5c1xyXG5pbXBvcnQgdHJhY2ViYWNrXHJcbmltcG9ydCB3YXJuaW5nc1xyXG5mcm9tIGhhc2hsaWIgaW1wb3J0IG1kNSwgc2hhMSwgc2hhMjU2XHJcbmZyb20gaHR0cC5jb29raWVzIGltcG9ydCBDb29raWVFcnJvciwgTW9yc2VsLCBTaW1wbGVDb29raWVcclxuZnJvbSB0eXBlcyBpbXBvcnQgTWFwcGluZ1Byb3h5VHlwZSwgVHJhY2ViYWNrVHlwZVxyXG5mcm9tIHR5cGluZyBpbXBvcnQgKFxyXG4gICAgVFlQRV9DSEVDS0lORyxcclxuICAgIEFueSxcclxuICAgIERpY3QsXHJcbiAgICBJdGVyYWJsZSxcclxuICAgIExpc3QsXHJcbiAgICBNYXBwaW5nLFxyXG4gICAgT3B0aW9uYWwsXHJcbiAgICBUdXBsZSxcclxuICAgIFR5cGUsXHJcbiAgICBVbmlvbixcclxuICAgIGNhc3QsXHJcbilcclxuXHJcbmltcG9ydCBhdHRyXHJcbmZyb20gbXVsdGlkaWN0IGltcG9ydCBDSU11bHRpRGljdCwgQ0lNdWx0aURpY3RQcm94eSwgTXVsdGlEaWN0LCBNdWx0aURpY3RQcm94eVxyXG5mcm9tIHlhcmwgaW1wb3J0IFVSTFxyXG5cclxuZnJvbSAuIGltcG9ydCBoZHJzLCBoZWxwZXJzLCBodHRwLCBtdWx0aXBhcnQsIHBheWxvYWRcclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdFN0cmVhbVdyaXRlclxyXG5mcm9tIC5jbGllbnRfZXhjZXB0aW9ucyBpbXBvcnQgKFxyXG4gICAgQ2xpZW50Q29ubmVjdGlvbkVycm9yLFxyXG4gICAgQ2xpZW50T1NFcnJvcixcclxuICAgIENsaWVudFJlc3BvbnNlRXJyb3IsXHJcbiAgICBDb250ZW50VHlwZUVycm9yLFxyXG4gICAgSW52YWxpZFVSTCxcclxuICAgIFNlcnZlckZpbmdlcnByaW50TWlzbWF0Y2gsXHJcbilcclxuZnJvbSAuZm9ybWRhdGEgaW1wb3J0IEZvcm1EYXRhXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IChcclxuICAgIFBZXzM2LFxyXG4gICAgQmFzZVRpbWVyQ29udGV4dCxcclxuICAgIEJhc2ljQXV0aCxcclxuICAgIEhlYWRlcnNNaXhpbixcclxuICAgIFRpbWVyTm9vcCxcclxuICAgIG5vb3AsXHJcbiAgICByZWlmeSxcclxuICAgIHNldF9yZXN1bHQsXHJcbilcclxuZnJvbSAuaHR0cCBpbXBvcnQgU0VSVkVSX1NPRlRXQVJFLCBIdHRwVmVyc2lvbjEwLCBIdHRwVmVyc2lvbjExLCBTdHJlYW1Xcml0ZXJcclxuZnJvbSAubG9nIGltcG9ydCBjbGllbnRfbG9nZ2VyXHJcbmZyb20gLnN0cmVhbXMgaW1wb3J0IFN0cmVhbVJlYWRlclxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgKFxyXG4gICAgREVGQVVMVF9KU09OX0RFQ09ERVIsXHJcbiAgICBKU09ORGVjb2RlcixcclxuICAgIExvb3NlQ29va2llcyxcclxuICAgIExvb3NlSGVhZGVycyxcclxuICAgIFJhd0hlYWRlcnMsXHJcbilcclxuXHJcbnRyeTpcclxuICAgIGltcG9ydCBzc2xcclxuICAgIGZyb20gc3NsIGltcG9ydCBTU0xDb250ZXh0XHJcbmV4Y2VwdCBJbXBvcnRFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgc3NsID0gTm9uZSAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuICAgIFNTTENvbnRleHQgPSBvYmplY3QgICMgdHlwZTogaWdub3JlW21pc2MsYXNzaWdubWVudF1cclxuXHJcbnRyeTpcclxuICAgIGltcG9ydCBjY2hhcmRldCBhcyBjaGFyZGV0XHJcbmV4Y2VwdCBJbXBvcnRFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgaW1wb3J0IGNoYXJzZXRfbm9ybWFsaXplciBhcyBjaGFyZGV0ICAjIHR5cGU6IGlnbm9yZVtuby1yZWRlZl1cclxuXHJcblxyXG5fX2FsbF9fID0gKCJDbGllbnRSZXF1ZXN0IiwgIkNsaWVudFJlc3BvbnNlIiwgIlJlcXVlc3RJbmZvIiwgIkZpbmdlcnByaW50IilcclxuXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIC5jbGllbnQgaW1wb3J0IENsaWVudFNlc3Npb25cclxuICAgIGZyb20gLmNvbm5lY3RvciBpbXBvcnQgQ29ubmVjdGlvblxyXG4gICAgZnJvbSAudHJhY2luZyBpbXBvcnQgVHJhY2VcclxuXHJcblxyXG5qc29uX3JlID0gcmUuY29tcGlsZShyIl5hcHBsaWNhdGlvbi8oPzpbXFx3ListXSs/XFwrKT9qc29uIilcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgQ29udGVudERpc3Bvc2l0aW9uOlxyXG4gICAgdHlwZTogT3B0aW9uYWxbc3RyXVxyXG4gICAgcGFyYW1ldGVyczogIk1hcHBpbmdQcm94eVR5cGVbc3RyLCBzdHJdIlxyXG4gICAgZmlsZW5hbWU6IE9wdGlvbmFsW3N0cl1cclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgUmVxdWVzdEluZm86XHJcbiAgICB1cmw6IFVSTFxyXG4gICAgbWV0aG9kOiBzdHJcclxuICAgIGhlYWRlcnM6ICJDSU11bHRpRGljdFByb3h5W3N0cl0iXHJcbiAgICByZWFsX3VybDogVVJMID0gYXR0ci5pYigpXHJcblxyXG4gICAgQHJlYWxfdXJsLmRlZmF1bHRcclxuICAgIGRlZiByZWFsX3VybF9kZWZhdWx0KHNlbGYpIC0+IFVSTDpcclxuICAgICAgICByZXR1cm4gc2VsZi51cmxcclxuXHJcblxyXG5jbGFzcyBGaW5nZXJwcmludDpcclxuICAgIEhBU0hGVU5DX0JZX0RJR0VTVExFTiA9IHtcclxuICAgICAgICAxNjogbWQ1LFxyXG4gICAgICAgIDIwOiBzaGExLFxyXG4gICAgICAgIDMyOiBzaGEyNTYsXHJcbiAgICB9XHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGZpbmdlcnByaW50OiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBkaWdlc3RsZW4gPSBsZW4oZmluZ2VycHJpbnQpXHJcbiAgICAgICAgaGFzaGZ1bmMgPSBzZWxmLkhBU0hGVU5DX0JZX0RJR0VTVExFTi5nZXQoZGlnZXN0bGVuKVxyXG4gICAgICAgIGlmIG5vdCBoYXNoZnVuYzpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZmluZ2VycHJpbnQgaGFzIGludmFsaWQgbGVuZ3RoIilcclxuICAgICAgICBlbGlmIGhhc2hmdW5jIGlzIG1kNSBvciBoYXNoZnVuYyBpcyBzaGExOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIm1kNSBhbmQgc2hhMSBhcmUgaW5zZWN1cmUgYW5kICIgIm5vdCBzdXBwb3J0ZWQuIFVzZSBzaGEyNTYuIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5faGFzaGZ1bmMgPSBoYXNoZnVuY1xyXG4gICAgICAgIHNlbGYuX2ZpbmdlcnByaW50ID0gZmluZ2VycHJpbnRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBmaW5nZXJwcmludChzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZmluZ2VycHJpbnRcclxuXHJcbiAgICBkZWYgY2hlY2soc2VsZiwgdHJhbnNwb3J0OiBhc3luY2lvLlRyYW5zcG9ydCkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgdHJhbnNwb3J0LmdldF9leHRyYV9pbmZvKCJzc2xjb250ZXh0Iik6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIHNzbG9iaiA9IHRyYW5zcG9ydC5nZXRfZXh0cmFfaW5mbygic3NsX29iamVjdCIpXHJcbiAgICAgICAgY2VydCA9IHNzbG9iai5nZXRwZWVyY2VydChiaW5hcnlfZm9ybT1UcnVlKVxyXG4gICAgICAgIGdvdCA9IHNlbGYuX2hhc2hmdW5jKGNlcnQpLmRpZ2VzdCgpXHJcbiAgICAgICAgaWYgZ290ICE9IHNlbGYuX2ZpbmdlcnByaW50OlxyXG4gICAgICAgICAgICBob3N0LCBwb3J0LCAqXyA9IHRyYW5zcG9ydC5nZXRfZXh0cmFfaW5mbygicGVlcm5hbWUiKVxyXG4gICAgICAgICAgICByYWlzZSBTZXJ2ZXJGaW5nZXJwcmludE1pc21hdGNoKHNlbGYuX2ZpbmdlcnByaW50LCBnb3QsIGhvc3QsIHBvcnQpXHJcblxyXG5cclxuaWYgc3NsIGlzIG5vdCBOb25lOlxyXG4gICAgU1NMX0FMTE9XRURfVFlQRVMgPSAoc3NsLlNTTENvbnRleHQsIGJvb2wsIEZpbmdlcnByaW50LCB0eXBlKE5vbmUpKVxyXG5lbHNlOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBTU0xfQUxMT1dFRF9UWVBFUyA9IHR5cGUoTm9uZSlcclxuXHJcblxyXG5kZWYgX21lcmdlX3NzbF9wYXJhbXMoXHJcbiAgICBzc2w6IFVuaW9uWyJTU0xDb250ZXh0IiwgYm9vbCwgRmluZ2VycHJpbnQsIE5vbmVdLFxyXG4gICAgdmVyaWZ5X3NzbDogT3B0aW9uYWxbYm9vbF0sXHJcbiAgICBzc2xfY29udGV4dDogT3B0aW9uYWxbIlNTTENvbnRleHQiXSxcclxuICAgIGZpbmdlcnByaW50OiBPcHRpb25hbFtieXRlc10sXHJcbikgLT4gVW5pb25bIlNTTENvbnRleHQiLCBib29sLCBGaW5nZXJwcmludCwgTm9uZV06XHJcbiAgICBpZiB2ZXJpZnlfc3NsIGlzIG5vdCBOb25lIGFuZCBub3QgdmVyaWZ5X3NzbDpcclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAidmVyaWZ5X3NzbCBpcyBkZXByZWNhdGVkLCB1c2Ugc3NsPUZhbHNlIGluc3RlYWQiLFxyXG4gICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgIHN0YWNrbGV2ZWw9MyxcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgc3NsIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInZlcmlmeV9zc2wsIHNzbF9jb250ZXh0LCBmaW5nZXJwcmludCBhbmQgc3NsICJcclxuICAgICAgICAgICAgICAgICJwYXJhbWV0ZXJzIGFyZSBtdXR1YWxseSBleGNsdXNpdmUiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzc2wgPSBGYWxzZVxyXG4gICAgaWYgc3NsX2NvbnRleHQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgInNzbF9jb250ZXh0IGlzIGRlcHJlY2F0ZWQsIHVzZSBzc2w9Y29udGV4dCBpbnN0ZWFkIixcclxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICBzdGFja2xldmVsPTMsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGlmIHNzbCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJ2ZXJpZnlfc3NsLCBzc2xfY29udGV4dCwgZmluZ2VycHJpbnQgYW5kIHNzbCAiXHJcbiAgICAgICAgICAgICAgICAicGFyYW1ldGVycyBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc3NsID0gc3NsX2NvbnRleHRcclxuICAgIGlmIGZpbmdlcnByaW50IGlzIG5vdCBOb25lOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJmaW5nZXJwcmludCBpcyBkZXByZWNhdGVkLCAiICJ1c2Ugc3NsPUZpbmdlcnByaW50KGZpbmdlcnByaW50KSBpbnN0ZWFkIixcclxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICBzdGFja2xldmVsPTMsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGlmIHNzbCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJ2ZXJpZnlfc3NsLCBzc2xfY29udGV4dCwgZmluZ2VycHJpbnQgYW5kIHNzbCAiXHJcbiAgICAgICAgICAgICAgICAicGFyYW1ldGVycyBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc3NsID0gRmluZ2VycHJpbnQoZmluZ2VycHJpbnQpXHJcbiAgICBpZiBub3QgaXNpbnN0YW5jZShzc2wsIFNTTF9BTExPV0VEX1RZUEVTKTpcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICJzc2wgc2hvdWxkIGJlIFNTTENvbnRleHQsIGJvb2wsIEZpbmdlcnByaW50IG9yIE5vbmUsICJcclxuICAgICAgICAgICAgImdvdCB7IXJ9IGluc3RlYWQuIi5mb3JtYXQoc3NsKVxyXG4gICAgICAgIClcclxuICAgIHJldHVybiBzc2xcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBzbG90cz1UcnVlLCBmcm96ZW49VHJ1ZSlcclxuY2xhc3MgQ29ubmVjdGlvbktleTpcclxuICAgICMgdGhlIGtleSBzaG91bGQgY29udGFpbiBhbiBpbmZvcm1hdGlvbiBhYm91dCB1c2VkIHByb3h5IC8gVExTXHJcbiAgICAjIHRvIHByZXZlbnQgcmV1c2luZyB3cm9uZyBjb25uZWN0aW9ucyBmcm9tIGEgcG9vbFxyXG4gICAgaG9zdDogc3RyXHJcbiAgICBwb3J0OiBPcHRpb25hbFtpbnRdXHJcbiAgICBpc19zc2w6IGJvb2xcclxuICAgIHNzbDogVW5pb25bU1NMQ29udGV4dCwgTm9uZSwgYm9vbCwgRmluZ2VycHJpbnRdXHJcbiAgICBwcm94eTogT3B0aW9uYWxbVVJMXVxyXG4gICAgcHJveHlfYXV0aDogT3B0aW9uYWxbQmFzaWNBdXRoXVxyXG4gICAgcHJveHlfaGVhZGVyc19oYXNoOiBPcHRpb25hbFtpbnRdICAjIGhhc2goQ0lNdWx0aURpY3QpXHJcblxyXG5cclxuZGVmIF9pc19leHBlY3RlZF9jb250ZW50X3R5cGUoXHJcbiAgICByZXNwb25zZV9jb250ZW50X3R5cGU6IHN0ciwgZXhwZWN0ZWRfY29udGVudF90eXBlOiBzdHJcclxuKSAtPiBib29sOlxyXG4gICAgaWYgZXhwZWN0ZWRfY29udGVudF90eXBlID09ICJhcHBsaWNhdGlvbi9qc29uIjpcclxuICAgICAgICByZXR1cm4ganNvbl9yZS5tYXRjaChyZXNwb25zZV9jb250ZW50X3R5cGUpIGlzIG5vdCBOb25lXHJcbiAgICByZXR1cm4gZXhwZWN0ZWRfY29udGVudF90eXBlIGluIHJlc3BvbnNlX2NvbnRlbnRfdHlwZVxyXG5cclxuXHJcbmNsYXNzIENsaWVudFJlcXVlc3Q6XHJcbiAgICBHRVRfTUVUSE9EUyA9IHtcclxuICAgICAgICBoZHJzLk1FVEhfR0VULFxyXG4gICAgICAgIGhkcnMuTUVUSF9IRUFELFxyXG4gICAgICAgIGhkcnMuTUVUSF9PUFRJT05TLFxyXG4gICAgICAgIGhkcnMuTUVUSF9UUkFDRSxcclxuICAgIH1cclxuICAgIFBPU1RfTUVUSE9EUyA9IHtoZHJzLk1FVEhfUEFUQ0gsIGhkcnMuTUVUSF9QT1NULCBoZHJzLk1FVEhfUFVUfVxyXG4gICAgQUxMX01FVEhPRFMgPSBHRVRfTUVUSE9EUy51bmlvbihQT1NUX01FVEhPRFMpLnVuaW9uKHtoZHJzLk1FVEhfREVMRVRFfSlcclxuXHJcbiAgICBERUZBVUxUX0hFQURFUlMgPSB7XHJcbiAgICAgICAgaGRycy5BQ0NFUFQ6ICIqLyoiLFxyXG4gICAgICAgIGhkcnMuQUNDRVBUX0VOQ09ESU5HOiAiZ3ppcCwgZGVmbGF0ZSIsXHJcbiAgICB9XHJcblxyXG4gICAgYm9keSA9IGIiIlxyXG4gICAgYXV0aCA9IE5vbmVcclxuICAgIHJlc3BvbnNlID0gTm9uZVxyXG5cclxuICAgIF93cml0ZXIgPSBOb25lICAjIGFzeW5jIHRhc2sgZm9yIHN0cmVhbWluZyBkYXRhXHJcbiAgICBfY29udGludWUgPSBOb25lICAjIHdhaXRlciBmdXR1cmUgZm9yIFwnMTAwIENvbnRpbnVlXCcgcmVzcG9uc2VcclxuXHJcbiAgICAjIE4uQi5cclxuICAgICMgQWRkaW5nIF9fZGVsX18gbWV0aG9kIHdpdGggc2VsZi5fd3JpdGVyIGNsb3NpbmcgZG9lc25cJ3QgbWFrZSBzZW5zZVxyXG4gICAgIyBiZWNhdXNlIF93cml0ZXIgaXMgaW5zdGFuY2UgbWV0aG9kLCB0aHVzIGl0IGtlZXBzIGEgcmVmZXJlbmNlIHRvIHNlbGYuXHJcbiAgICAjIFVudGlsIHdyaXRlciBoYXMgZmluaXNoZWQgZmluYWxpemVyIHdpbGwgbm90IGJlIGNhbGxlZC5cclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZXRob2Q6IHN0cixcclxuICAgICAgICB1cmw6IFVSTCxcclxuICAgICAgICAqLFxyXG4gICAgICAgIHBhcmFtczogT3B0aW9uYWxbTWFwcGluZ1tzdHIsIHN0cl1dID0gTm9uZSxcclxuICAgICAgICBoZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICAgICBza2lwX2F1dG9faGVhZGVyczogSXRlcmFibGVbc3RyXSA9IGZyb3plbnNldCgpLFxyXG4gICAgICAgIGRhdGE6IEFueSA9IE5vbmUsXHJcbiAgICAgICAgY29va2llczogT3B0aW9uYWxbTG9vc2VDb29raWVzXSA9IE5vbmUsXHJcbiAgICAgICAgYXV0aDogT3B0aW9uYWxbQmFzaWNBdXRoXSA9IE5vbmUsXHJcbiAgICAgICAgdmVyc2lvbjogaHR0cC5IdHRwVmVyc2lvbiA9IGh0dHAuSHR0cFZlcnNpb24xMSxcclxuICAgICAgICBjb21wcmVzczogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgY2h1bmtlZDogT3B0aW9uYWxbYm9vbF0gPSBOb25lLFxyXG4gICAgICAgIGV4cGVjdDEwMDogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSxcclxuICAgICAgICByZXNwb25zZV9jbGFzczogT3B0aW9uYWxbVHlwZVsiQ2xpZW50UmVzcG9uc2UiXV0gPSBOb25lLFxyXG4gICAgICAgIHByb3h5OiBPcHRpb25hbFtVUkxdID0gTm9uZSxcclxuICAgICAgICBwcm94eV9hdXRoOiBPcHRpb25hbFtCYXNpY0F1dGhdID0gTm9uZSxcclxuICAgICAgICB0aW1lcjogT3B0aW9uYWxbQmFzZVRpbWVyQ29udGV4dF0gPSBOb25lLFxyXG4gICAgICAgIHNlc3Npb246IE9wdGlvbmFsWyJDbGllbnRTZXNzaW9uIl0gPSBOb25lLFxyXG4gICAgICAgIHNzbDogVW5pb25bU1NMQ29udGV4dCwgYm9vbCwgRmluZ2VycHJpbnQsIE5vbmVdID0gTm9uZSxcclxuICAgICAgICBwcm94eV9oZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICAgICB0cmFjZXM6IE9wdGlvbmFsW0xpc3RbIlRyYWNlIl1dID0gTm9uZSxcclxuICAgICk6XHJcblxyXG4gICAgICAgIGlmIGxvb3AgaXMgTm9uZTpcclxuICAgICAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG5cclxuICAgICAgICBhc3NlcnQgaXNpbnN0YW5jZSh1cmwsIFVSTCksIHVybFxyXG4gICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHByb3h5LCAoVVJMLCB0eXBlKE5vbmUpKSksIHByb3h5XHJcbiAgICAgICAgIyBGSVhNRTogc2Vzc2lvbiBpcyBOb25lIGluIHRlc3RzIG9ubHksIG5lZWQgdG8gZml4IHRlc3RzXHJcbiAgICAgICAgIyBhc3NlcnQgc2Vzc2lvbiBpcyBub3QgTm9uZVxyXG4gICAgICAgIHNlbGYuX3Nlc3Npb24gPSBjYXN0KCJDbGllbnRTZXNzaW9uIiwgc2Vzc2lvbilcclxuICAgICAgICBpZiBwYXJhbXM6XHJcbiAgICAgICAgICAgIHEgPSBNdWx0aURpY3QodXJsLnF1ZXJ5KVxyXG4gICAgICAgICAgICB1cmwyID0gdXJsLndpdGhfcXVlcnkocGFyYW1zKVxyXG4gICAgICAgICAgICBxLmV4dGVuZCh1cmwyLnF1ZXJ5KVxyXG4gICAgICAgICAgICB1cmwgPSB1cmwud2l0aF9xdWVyeShxKVxyXG4gICAgICAgIHNlbGYub3JpZ2luYWxfdXJsID0gdXJsXHJcbiAgICAgICAgc2VsZi51cmwgPSB1cmwud2l0aF9mcmFnbWVudChOb25lKVxyXG4gICAgICAgIHNlbGYubWV0aG9kID0gbWV0aG9kLnVwcGVyKClcclxuICAgICAgICBzZWxmLmNodW5rZWQgPSBjaHVua2VkXHJcbiAgICAgICAgc2VsZi5jb21wcmVzcyA9IGNvbXByZXNzXHJcbiAgICAgICAgc2VsZi5sb29wID0gbG9vcFxyXG4gICAgICAgIHNlbGYubGVuZ3RoID0gTm9uZVxyXG4gICAgICAgIGlmIHJlc3BvbnNlX2NsYXNzIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJlYWxfcmVzcG9uc2VfY2xhc3MgPSBDbGllbnRSZXNwb25zZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJlYWxfcmVzcG9uc2VfY2xhc3MgPSByZXNwb25zZV9jbGFzc1xyXG4gICAgICAgIHNlbGYucmVzcG9uc2VfY2xhc3MgPSByZWFsX3Jlc3BvbnNlX2NsYXNzICAjIHR5cGU6IFR5cGVbQ2xpZW50UmVzcG9uc2VdXHJcbiAgICAgICAgc2VsZi5fdGltZXIgPSB0aW1lciBpZiB0aW1lciBpcyBub3QgTm9uZSBlbHNlIFRpbWVyTm9vcCgpXHJcbiAgICAgICAgc2VsZi5fc3NsID0gc3NsXHJcblxyXG4gICAgICAgIGlmIGxvb3AuZ2V0X2RlYnVnKCk6XHJcbiAgICAgICAgICAgIHNlbGYuX3NvdXJjZV90cmFjZWJhY2sgPSB0cmFjZWJhY2suZXh0cmFjdF9zdGFjayhzeXMuX2dldGZyYW1lKDEpKVxyXG5cclxuICAgICAgICBzZWxmLnVwZGF0ZV92ZXJzaW9uKHZlcnNpb24pXHJcbiAgICAgICAgc2VsZi51cGRhdGVfaG9zdCh1cmwpXHJcbiAgICAgICAgc2VsZi51cGRhdGVfaGVhZGVycyhoZWFkZXJzKVxyXG4gICAgICAgIHNlbGYudXBkYXRlX2F1dG9faGVhZGVycyhza2lwX2F1dG9faGVhZGVycylcclxuICAgICAgICBzZWxmLnVwZGF0ZV9jb29raWVzKGNvb2tpZXMpXHJcbiAgICAgICAgc2VsZi51cGRhdGVfY29udGVudF9lbmNvZGluZyhkYXRhKVxyXG4gICAgICAgIHNlbGYudXBkYXRlX2F1dGgoYXV0aClcclxuICAgICAgICBzZWxmLnVwZGF0ZV9wcm94eShwcm94eSwgcHJveHlfYXV0aCwgcHJveHlfaGVhZGVycylcclxuXHJcbiAgICAgICAgc2VsZi51cGRhdGVfYm9keV9mcm9tX2RhdGEoZGF0YSlcclxuICAgICAgICBpZiBkYXRhIGlzIG5vdCBOb25lIG9yIHNlbGYubWV0aG9kIG5vdCBpbiBzZWxmLkdFVF9NRVRIT0RTOlxyXG4gICAgICAgICAgICBzZWxmLnVwZGF0ZV90cmFuc2Zlcl9lbmNvZGluZygpXHJcbiAgICAgICAgc2VsZi51cGRhdGVfZXhwZWN0X2NvbnRpbnVlKGV4cGVjdDEwMClcclxuICAgICAgICBpZiB0cmFjZXMgaXMgTm9uZTpcclxuICAgICAgICAgICAgdHJhY2VzID0gW11cclxuICAgICAgICBzZWxmLl90cmFjZXMgPSB0cmFjZXNcclxuXHJcbiAgICBkZWYgaXNfc3NsKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYudXJsLnNjaGVtZSBpbiAoImh0dHBzIiwgIndzcyIpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc3NsKHNlbGYpIC0+IFVuaW9uWyJTU0xDb250ZXh0IiwgTm9uZSwgYm9vbCwgRmluZ2VycHJpbnRdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9zc2xcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb25uZWN0aW9uX2tleShzZWxmKSAtPiBDb25uZWN0aW9uS2V5OlxyXG4gICAgICAgIHByb3h5X2hlYWRlcnMgPSBzZWxmLnByb3h5X2hlYWRlcnNcclxuICAgICAgICBpZiBwcm94eV9oZWFkZXJzOlxyXG4gICAgICAgICAgICBoID0gaGFzaChcclxuICAgICAgICAgICAgICAgIHR1cGxlKChrLCB2KSBmb3IgaywgdiBpbiBwcm94eV9oZWFkZXJzLml0ZW1zKCkpXHJcbiAgICAgICAgICAgICkgICMgdHlwZTogT3B0aW9uYWxbaW50XVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGggPSBOb25lXHJcbiAgICAgICAgcmV0dXJuIENvbm5lY3Rpb25LZXkoXHJcbiAgICAgICAgICAgIHNlbGYuaG9zdCxcclxuICAgICAgICAgICAgc2VsZi5wb3J0LFxyXG4gICAgICAgICAgICBzZWxmLmlzX3NzbCgpLFxyXG4gICAgICAgICAgICBzZWxmLnNzbCxcclxuICAgICAgICAgICAgc2VsZi5wcm94eSxcclxuICAgICAgICAgICAgc2VsZi5wcm94eV9hdXRoLFxyXG4gICAgICAgICAgICBoLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBob3N0KHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXQgPSBzZWxmLnVybC5yYXdfaG9zdFxyXG4gICAgICAgIGFzc2VydCByZXQgaXMgbm90IE5vbmVcclxuICAgICAgICByZXR1cm4gcmV0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcG9ydChzZWxmKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLnVybC5wb3J0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmVxdWVzdF9pbmZvKHNlbGYpIC0+IFJlcXVlc3RJbmZvOlxyXG4gICAgICAgIGhlYWRlcnMgPSBDSU11bHRpRGljdFByb3h5KHNlbGYuaGVhZGVycykgICMgdHlwZTogQ0lNdWx0aURpY3RQcm94eVtzdHJdXHJcbiAgICAgICAgcmV0dXJuIFJlcXVlc3RJbmZvKHNlbGYudXJsLCBzZWxmLm1ldGhvZCwgaGVhZGVycywgc2VsZi5vcmlnaW5hbF91cmwpXHJcblxyXG4gICAgZGVmIHVwZGF0ZV9ob3N0KHNlbGYsIHVybDogVVJMKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlVwZGF0ZSBkZXN0aW5hdGlvbiBob3N0LCBwb3J0IGFuZCBjb25uZWN0aW9uIHR5cGUgKHNzbCkuIiIiXHJcbiAgICAgICAgIyBnZXQgaG9zdC9wb3J0XHJcbiAgICAgICAgaWYgbm90IHVybC5yYXdfaG9zdDpcclxuICAgICAgICAgICAgcmFpc2UgSW52YWxpZFVSTCh1cmwpXHJcblxyXG4gICAgICAgICMgYmFzaWMgYXV0aCBpbmZvXHJcbiAgICAgICAgdXNlcm5hbWUsIHBhc3N3b3JkID0gdXJsLnVzZXIsIHVybC5wYXNzd29yZFxyXG4gICAgICAgIGlmIHVzZXJuYW1lOlxyXG4gICAgICAgICAgICBzZWxmLmF1dGggPSBoZWxwZXJzLkJhc2ljQXV0aCh1c2VybmFtZSwgcGFzc3dvcmQgb3IgIiIpXHJcblxyXG4gICAgZGVmIHVwZGF0ZV92ZXJzaW9uKHNlbGYsIHZlcnNpb246IFVuaW9uW2h0dHAuSHR0cFZlcnNpb24sIHN0cl0pIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQ29udmVydCByZXF1ZXN0IHZlcnNpb24gdG8gdHdvIGVsZW1lbnRzIHR1cGxlLlxyXG5cclxuICAgICAgICBwYXJzZXIgSFRUUCB2ZXJzaW9uIFwnMS4xXCcgPT4gKDEsIDEpXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZSh2ZXJzaW9uLCBzdHIpOlxyXG4gICAgICAgICAgICB2ID0gW3BhcnQuc3RyaXAoKSBmb3IgcGFydCBpbiB2ZXJzaW9uLnNwbGl0KCIuIiwgMSldXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHZlcnNpb24gPSBodHRwLkh0dHBWZXJzaW9uKGludCh2WzBdKSwgaW50KHZbMV0pKVxyXG4gICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgZiJDYW4gbm90IHBhcnNlIGh0dHAgdmVyc2lvbiBudW1iZXI6IHt2ZXJzaW9ufSJcclxuICAgICAgICAgICAgICAgICkgZnJvbSBOb25lXHJcbiAgICAgICAgc2VsZi52ZXJzaW9uID0gdmVyc2lvblxyXG5cclxuICAgIGRlZiB1cGRhdGVfaGVhZGVycyhzZWxmLCBoZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlVwZGF0ZSByZXF1ZXN0IGhlYWRlcnMuIiIiXHJcbiAgICAgICAgc2VsZi5oZWFkZXJzID0gQ0lNdWx0aURpY3QoKSAgIyB0eXBlOiBDSU11bHRpRGljdFtzdHJdXHJcblxyXG4gICAgICAgICMgYWRkIGhvc3RcclxuICAgICAgICBuZXRsb2MgPSBjYXN0KHN0ciwgc2VsZi51cmwucmF3X2hvc3QpXHJcbiAgICAgICAgaWYgaGVscGVycy5pc19pcHY2X2FkZHJlc3MobmV0bG9jKTpcclxuICAgICAgICAgICAgbmV0bG9jID0gZiJbe25ldGxvY31dIlxyXG4gICAgICAgIGlmIHNlbGYudXJsLnBvcnQgaXMgbm90IE5vbmUgYW5kIG5vdCBzZWxmLnVybC5pc19kZWZhdWx0X3BvcnQoKTpcclxuICAgICAgICAgICAgbmV0bG9jICs9ICI6IiArIHN0cihzZWxmLnVybC5wb3J0KVxyXG4gICAgICAgIHNlbGYuaGVhZGVyc1toZHJzLkhPU1RdID0gbmV0bG9jXHJcblxyXG4gICAgICAgIGlmIGhlYWRlcnM6XHJcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoaGVhZGVycywgKGRpY3QsIE11bHRpRGljdFByb3h5LCBNdWx0aURpY3QpKTpcclxuICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzLml0ZW1zKCkgICMgdHlwZTogaWdub3JlW2Fzc2lnbm1lbnRdXHJcblxyXG4gICAgICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBoZWFkZXJzOiAgIyB0eXBlOiBpZ25vcmVbbWlzY11cclxuICAgICAgICAgICAgICAgICMgQSBzcGVjaWFsIGNhc2UgZm9yIEhvc3QgaGVhZGVyXHJcbiAgICAgICAgICAgICAgICBpZiBrZXkubG93ZXIoKSA9PSAiaG9zdCI6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5oZWFkZXJzW2tleV0gPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmhlYWRlcnMuYWRkKGtleSwgdmFsdWUpXHJcblxyXG4gICAgZGVmIHVwZGF0ZV9hdXRvX2hlYWRlcnMoc2VsZiwgc2tpcF9hdXRvX2hlYWRlcnM6IEl0ZXJhYmxlW3N0cl0pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5za2lwX2F1dG9faGVhZGVycyA9IENJTXVsdGlEaWN0KFxyXG4gICAgICAgICAgICAoaGRyLCBOb25lKSBmb3IgaGRyIGluIHNvcnRlZChza2lwX2F1dG9faGVhZGVycylcclxuICAgICAgICApXHJcbiAgICAgICAgdXNlZF9oZWFkZXJzID0gc2VsZi5oZWFkZXJzLmNvcHkoKVxyXG4gICAgICAgIHVzZWRfaGVhZGVycy5leHRlbmQoc2VsZi5za2lwX2F1dG9faGVhZGVycykgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG5cclxuICAgICAgICBmb3IgaGRyLCB2YWwgaW4gc2VsZi5ERUZBVUxUX0hFQURFUlMuaXRlbXMoKTpcclxuICAgICAgICAgICAgaWYgaGRyIG5vdCBpbiB1c2VkX2hlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICBzZWxmLmhlYWRlcnMuYWRkKGhkciwgdmFsKVxyXG5cclxuICAgICAgICBpZiBoZHJzLlVTRVJfQUdFTlQgbm90IGluIHVzZWRfaGVhZGVyczpcclxuICAgICAgICAgICAgc2VsZi5oZWFkZXJzW2hkcnMuVVNFUl9BR0VOVF0gPSBTRVJWRVJfU09GVFdBUkVcclxuXHJcbiAgICBkZWYgdXBkYXRlX2Nvb2tpZXMoc2VsZiwgY29va2llczogT3B0aW9uYWxbTG9vc2VDb29raWVzXSkgLT4gTm9uZTpcclxuICAgICAgICAiIiJVcGRhdGUgcmVxdWVzdCBjb29raWVzIGhlYWRlci4iIiJcclxuICAgICAgICBpZiBub3QgY29va2llczpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGMgPSBTaW1wbGVDb29raWUoKSAgIyB0eXBlOiBTaW1wbGVDb29raWVbc3RyXVxyXG4gICAgICAgIGlmIGhkcnMuQ09PS0lFIGluIHNlbGYuaGVhZGVyczpcclxuICAgICAgICAgICAgYy5sb2FkKHNlbGYuaGVhZGVycy5nZXQoaGRycy5DT09LSUUsICIiKSlcclxuICAgICAgICAgICAgZGVsIHNlbGYuaGVhZGVyc1toZHJzLkNPT0tJRV1cclxuXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShjb29raWVzLCBNYXBwaW5nKTpcclxuICAgICAgICAgICAgaXRlcl9jb29raWVzID0gY29va2llcy5pdGVtcygpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaXRlcl9jb29raWVzID0gY29va2llcyAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuICAgICAgICBmb3IgbmFtZSwgdmFsdWUgaW4gaXRlcl9jb29raWVzOlxyXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBNb3JzZWwpOlxyXG4gICAgICAgICAgICAgICAgIyBQcmVzZXJ2ZSBjb2RlZF92YWx1ZVxyXG4gICAgICAgICAgICAgICAgbXJzbF92YWwgPSB2YWx1ZS5nZXQodmFsdWUua2V5LCBNb3JzZWwoKSlcclxuICAgICAgICAgICAgICAgIG1yc2xfdmFsLnNldCh2YWx1ZS5rZXksIHZhbHVlLnZhbHVlLCB2YWx1ZS5jb2RlZF92YWx1ZSlcclxuICAgICAgICAgICAgICAgIGNbbmFtZV0gPSBtcnNsX3ZhbFxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgY1tuYW1lXSA9IHZhbHVlICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG5cclxuICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5DT09LSUVdID0gYy5vdXRwdXQoaGVhZGVyPSIiLCBzZXA9IjsiKS5zdHJpcCgpXHJcblxyXG4gICAgZGVmIHVwZGF0ZV9jb250ZW50X2VuY29kaW5nKHNlbGYsIGRhdGE6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICAiIiJTZXQgcmVxdWVzdCBjb250ZW50IGVuY29kaW5nLiIiIlxyXG4gICAgICAgIGlmIGRhdGEgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGVuYyA9IHNlbGYuaGVhZGVycy5nZXQoaGRycy5DT05URU5UX0VOQ09ESU5HLCAiIikubG93ZXIoKVxyXG4gICAgICAgIGlmIGVuYzpcclxuICAgICAgICAgICAgaWYgc2VsZi5jb21wcmVzczpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgImNvbXByZXNzIGNhbiBub3QgYmUgc2V0ICIgImlmIENvbnRlbnQtRW5jb2RpbmcgaGVhZGVyIGlzIHNldCJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICBlbGlmIHNlbGYuY29tcHJlc3M6XHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHNlbGYuY29tcHJlc3MsIHN0cik6XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNvbXByZXNzID0gImRlZmxhdGUiXHJcbiAgICAgICAgICAgIHNlbGYuaGVhZGVyc1toZHJzLkNPTlRFTlRfRU5DT0RJTkddID0gc2VsZi5jb21wcmVzc1xyXG4gICAgICAgICAgICBzZWxmLmNodW5rZWQgPSBUcnVlICAjIGVuYWJsZSBjaHVua2VkLCBubyBuZWVkIHRvIGRlYWwgd2l0aCBsZW5ndGhcclxuXHJcbiAgICBkZWYgdXBkYXRlX3RyYW5zZmVyX2VuY29kaW5nKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQW5hbHl6ZSB0cmFuc2Zlci1lbmNvZGluZyBoZWFkZXIuIiIiXHJcbiAgICAgICAgdGUgPSBzZWxmLmhlYWRlcnMuZ2V0KGhkcnMuVFJBTlNGRVJfRU5DT0RJTkcsICIiKS5sb3dlcigpXHJcblxyXG4gICAgICAgIGlmICJjaHVua2VkIiBpbiB0ZTpcclxuICAgICAgICAgICAgaWYgc2VsZi5jaHVua2VkOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiY2h1bmtlZCBjYW4gbm90IGJlIHNldCAiXHJcbiAgICAgICAgICAgICAgICAgICAgXCdpZiAiVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWQiIGhlYWRlciBpcyBzZXRcJ1xyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBlbGlmIHNlbGYuY2h1bmtlZDpcclxuICAgICAgICAgICAgaWYgaGRycy5DT05URU5UX0xFTkdUSCBpbiBzZWxmLmhlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJjaHVua2VkIGNhbiBub3QgYmUgc2V0ICIgImlmIENvbnRlbnQtTGVuZ3RoIGhlYWRlciBpcyBzZXQiXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5UUkFOU0ZFUl9FTkNPRElOR10gPSAiY2h1bmtlZCJcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBpZiBoZHJzLkNPTlRFTlRfTEVOR1RIIG5vdCBpbiBzZWxmLmhlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5DT05URU5UX0xFTkdUSF0gPSBzdHIobGVuKHNlbGYuYm9keSkpXHJcblxyXG4gICAgZGVmIHVwZGF0ZV9hdXRoKHNlbGYsIGF1dGg6IE9wdGlvbmFsW0Jhc2ljQXV0aF0pIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiU2V0IGJhc2ljIGF1dGguIiIiXHJcbiAgICAgICAgaWYgYXV0aCBpcyBOb25lOlxyXG4gICAgICAgICAgICBhdXRoID0gc2VsZi5hdXRoXHJcbiAgICAgICAgaWYgYXV0aCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYXV0aCwgaGVscGVycy5CYXNpY0F1dGgpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkJhc2ljQXV0aCgpIHR1cGxlIGlzIHJlcXVpcmVkIGluc3RlYWQiKVxyXG5cclxuICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5BVVRIT1JJWkFUSU9OXSA9IGF1dGguZW5jb2RlKClcclxuXHJcbiAgICBkZWYgdXBkYXRlX2JvZHlfZnJvbV9kYXRhKHNlbGYsIGJvZHk6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBib2R5IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICAjIEZvcm1EYXRhXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShib2R5LCBGb3JtRGF0YSk6XHJcbiAgICAgICAgICAgIGJvZHkgPSBib2R5KClcclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBib2R5ID0gcGF5bG9hZC5QQVlMT0FEX1JFR0lTVFJZLmdldChib2R5LCBkaXNwb3NpdGlvbj1Ob25lKVxyXG4gICAgICAgIGV4Y2VwdCBwYXlsb2FkLkxvb2t1cEVycm9yOlxyXG4gICAgICAgICAgICBib2R5ID0gRm9ybURhdGEoYm9keSkoKVxyXG5cclxuICAgICAgICBzZWxmLmJvZHkgPSBib2R5XHJcblxyXG4gICAgICAgICMgZW5hYmxlIGNodW5rZWQgZW5jb2RpbmcgaWYgbmVlZGVkXHJcbiAgICAgICAgaWYgbm90IHNlbGYuY2h1bmtlZDpcclxuICAgICAgICAgICAgaWYgaGRycy5DT05URU5UX0xFTkdUSCBub3QgaW4gc2VsZi5oZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgc2l6ZSA9IGJvZHkuc2l6ZVxyXG4gICAgICAgICAgICAgICAgaWYgc2l6ZSBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2h1bmtlZCA9IFRydWVcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgaGRycy5DT05URU5UX0xFTkdUSCBub3QgaW4gc2VsZi5oZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5DT05URU5UX0xFTkdUSF0gPSBzdHIoc2l6ZSlcclxuXHJcbiAgICAgICAgIyBjb3B5IHBheWxvYWQgaGVhZGVyc1xyXG4gICAgICAgIGFzc2VydCBib2R5LmhlYWRlcnNcclxuICAgICAgICBmb3IgKGtleSwgdmFsdWUpIGluIGJvZHkuaGVhZGVycy5pdGVtcygpOlxyXG4gICAgICAgICAgICBpZiBrZXkgaW4gc2VsZi5oZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgaWYga2V5IGluIHNlbGYuc2tpcF9hdXRvX2hlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICBzZWxmLmhlYWRlcnNba2V5XSA9IHZhbHVlXHJcblxyXG4gICAgZGVmIHVwZGF0ZV9leHBlY3RfY29udGludWUoc2VsZiwgZXhwZWN0OiBib29sID0gRmFsc2UpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgZXhwZWN0OlxyXG4gICAgICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5FWFBFQ1RdID0gIjEwMC1jb250aW51ZSJcclxuICAgICAgICBlbGlmIHNlbGYuaGVhZGVycy5nZXQoaGRycy5FWFBFQ1QsICIiKS5sb3dlcigpID09ICIxMDAtY29udGludWUiOlxyXG4gICAgICAgICAgICBleHBlY3QgPSBUcnVlXHJcblxyXG4gICAgICAgIGlmIGV4cGVjdDpcclxuICAgICAgICAgICAgc2VsZi5fY29udGludWUgPSBzZWxmLmxvb3AuY3JlYXRlX2Z1dHVyZSgpXHJcblxyXG4gICAgZGVmIHVwZGF0ZV9wcm94eShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHByb3h5OiBPcHRpb25hbFtVUkxdLFxyXG4gICAgICAgIHByb3h5X2F1dGg6IE9wdGlvbmFsW0Jhc2ljQXV0aF0sXHJcbiAgICAgICAgcHJveHlfaGVhZGVyczogT3B0aW9uYWxbTG9vc2VIZWFkZXJzXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBwcm94eV9hdXRoIGFuZCBub3QgaXNpbnN0YW5jZShwcm94eV9hdXRoLCBoZWxwZXJzLkJhc2ljQXV0aCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInByb3h5X2F1dGggbXVzdCBiZSBOb25lIG9yIEJhc2ljQXV0aCgpIHR1cGxlIilcclxuICAgICAgICBzZWxmLnByb3h5ID0gcHJveHlcclxuICAgICAgICBzZWxmLnByb3h5X2F1dGggPSBwcm94eV9hdXRoXHJcbiAgICAgICAgc2VsZi5wcm94eV9oZWFkZXJzID0gcHJveHlfaGVhZGVyc1xyXG5cclxuICAgIGRlZiBrZWVwX2FsaXZlKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgc2VsZi52ZXJzaW9uIDwgSHR0cFZlcnNpb24xMDpcclxuICAgICAgICAgICAgIyBrZWVwIGFsaXZlIG5vdCBzdXBwb3J0ZWQgYXQgYWxsXHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIGlmIHNlbGYudmVyc2lvbiA9PSBIdHRwVmVyc2lvbjEwOlxyXG4gICAgICAgICAgICBpZiBzZWxmLmhlYWRlcnMuZ2V0KGhkcnMuQ09OTkVDVElPTikgPT0gImtlZXAtYWxpdmUiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuICAgICAgICAgICAgZWxzZTogICMgbm8gaGVhZGVycyBtZWFucyB3ZSBjbG9zZSBmb3IgSHR0cCAxLjBcclxuICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIGVsaWYgc2VsZi5oZWFkZXJzLmdldChoZHJzLkNPTk5FQ1RJT04pID09ICJjbG9zZSI6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLCB3cml0ZXI6IEFic3RyYWN0U3RyZWFtV3JpdGVyLCBjb25uOiAiQ29ubmVjdGlvbiJcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJTdXBwb3J0IGNvcm91dGluZXMgdGhhdCB5aWVsZHMgYnl0ZXMgb2JqZWN0cy4iIiJcclxuICAgICAgICAjIDEwMCByZXNwb25zZVxyXG4gICAgICAgIGlmIHNlbGYuX2NvbnRpbnVlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZXIuZHJhaW4oKVxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9jb250aW51ZVxyXG5cclxuICAgICAgICBwcm90b2NvbCA9IGNvbm4ucHJvdG9jb2xcclxuICAgICAgICBhc3NlcnQgcHJvdG9jb2wgaXMgbm90IE5vbmVcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5ib2R5LCBwYXlsb2FkLlBheWxvYWQpOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5ib2R5LndyaXRlKHdyaXRlcilcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5ib2R5LCAoYnl0ZXMsIGJ5dGVhcnJheSkpOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYm9keSA9IChzZWxmLmJvZHksKSAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgY2h1bmsgaW4gc2VsZi5ib2R5OlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRlci53cml0ZShjaHVuaykgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgd3JpdGVyLndyaXRlX2VvZigpXHJcbiAgICAgICAgZXhjZXB0IE9TRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICBuZXdfZXhjID0gQ2xpZW50T1NFcnJvcihcclxuICAgICAgICAgICAgICAgIGV4Yy5lcnJubywgIkNhbiBub3Qgd3JpdGUgcmVxdWVzdCBib2R5IGZvciAlcyIgJSBzZWxmLnVybFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIG5ld19leGMuX19jb250ZXh0X18gPSBleGNcclxuICAgICAgICAgICAgbmV3X2V4Yy5fX2NhdXNlX18gPSBleGNcclxuICAgICAgICAgICAgcHJvdG9jb2wuc2V0X2V4Y2VwdGlvbihuZXdfZXhjKVxyXG4gICAgICAgIGV4Y2VwdCBhc3luY2lvLkNhbmNlbGxlZEVycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgaWYgbm90IGNvbm4uY2xvc2VkOlxyXG4gICAgICAgICAgICAgICAgcHJvdG9jb2wuc2V0X2V4Y2VwdGlvbihleGMpXHJcbiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleGM6XHJcbiAgICAgICAgICAgIHByb3RvY29sLnNldF9leGNlcHRpb24oZXhjKVxyXG4gICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgIHNlbGYuX3dyaXRlciA9IE5vbmVcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZChzZWxmLCBjb25uOiAiQ29ubmVjdGlvbiIpIC0+ICJDbGllbnRSZXNwb25zZSI6XHJcbiAgICAgICAgIyBTcGVjaWZ5IHJlcXVlc3QgdGFyZ2V0OlxyXG4gICAgICAgICMgLSBDT05ORUNUIHJlcXVlc3QgbXVzdCBzZW5kIGF1dGhvcml0eSBmb3JtIFVSSVxyXG4gICAgICAgICMgLSBub3QgQ09OTkVDVCBwcm94eSBtdXN0IHNlbmQgYWJzb2x1dGUgZm9ybSBVUklcclxuICAgICAgICAjIC0gbW9zdCBjb21tb24gaXMgb3JpZ2luIGZvcm0gVVJJXHJcbiAgICAgICAgaWYgc2VsZi5tZXRob2QgPT0gaGRycy5NRVRIX0NPTk5FQ1Q6XHJcbiAgICAgICAgICAgIGNvbm5lY3RfaG9zdCA9IHNlbGYudXJsLnJhd19ob3N0XHJcbiAgICAgICAgICAgIGFzc2VydCBjb25uZWN0X2hvc3QgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgaWYgaGVscGVycy5pc19pcHY2X2FkZHJlc3MoY29ubmVjdF9ob3N0KTpcclxuICAgICAgICAgICAgICAgIGNvbm5lY3RfaG9zdCA9IGYiW3tjb25uZWN0X2hvc3R9XSJcclxuICAgICAgICAgICAgcGF0aCA9IGYie2Nvbm5lY3RfaG9zdH06e3NlbGYudXJsLnBvcnR9IlxyXG4gICAgICAgIGVsaWYgc2VsZi5wcm94eSBhbmQgbm90IHNlbGYuaXNfc3NsKCk6XHJcbiAgICAgICAgICAgIHBhdGggPSBzdHIoc2VsZi51cmwpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcGF0aCA9IHNlbGYudXJsLnJhd19wYXRoXHJcbiAgICAgICAgICAgIGlmIHNlbGYudXJsLnJhd19xdWVyeV9zdHJpbmc6XHJcbiAgICAgICAgICAgICAgICBwYXRoICs9ICI/IiArIHNlbGYudXJsLnJhd19xdWVyeV9zdHJpbmdcclxuXHJcbiAgICAgICAgcHJvdG9jb2wgPSBjb25uLnByb3RvY29sXHJcbiAgICAgICAgYXNzZXJ0IHByb3RvY29sIGlzIG5vdCBOb25lXHJcbiAgICAgICAgd3JpdGVyID0gU3RyZWFtV3JpdGVyKFxyXG4gICAgICAgICAgICBwcm90b2NvbCxcclxuICAgICAgICAgICAgc2VsZi5sb29wLFxyXG4gICAgICAgICAgICBvbl9jaHVua19zZW50PWZ1bmN0b29scy5wYXJ0aWFsKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fb25fY2h1bmtfcmVxdWVzdF9zZW50LCBzZWxmLm1ldGhvZCwgc2VsZi51cmxcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgb25faGVhZGVyc19zZW50PWZ1bmN0b29scy5wYXJ0aWFsKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fb25faGVhZGVyc19yZXF1ZXN0X3NlbnQsIHNlbGYubWV0aG9kLCBzZWxmLnVybFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgc2VsZi5jb21wcmVzczpcclxuICAgICAgICAgICAgd3JpdGVyLmVuYWJsZV9jb21wcmVzc2lvbihzZWxmLmNvbXByZXNzKVxyXG5cclxuICAgICAgICBpZiBzZWxmLmNodW5rZWQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHdyaXRlci5lbmFibGVfY2h1bmtpbmcoKVxyXG5cclxuICAgICAgICAjIHNldCBkZWZhdWx0IGNvbnRlbnQtdHlwZVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgc2VsZi5tZXRob2QgaW4gc2VsZi5QT1NUX01FVEhPRFNcclxuICAgICAgICAgICAgYW5kIGhkcnMuQ09OVEVOVF9UWVBFIG5vdCBpbiBzZWxmLnNraXBfYXV0b19oZWFkZXJzXHJcbiAgICAgICAgICAgIGFuZCBoZHJzLkNPTlRFTlRfVFlQRSBub3QgaW4gc2VsZi5oZWFkZXJzXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgc2VsZi5oZWFkZXJzW2hkcnMuQ09OVEVOVF9UWVBFXSA9ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iXHJcblxyXG4gICAgICAgICMgc2V0IHRoZSBjb25uZWN0aW9uIGhlYWRlclxyXG4gICAgICAgIGNvbm5lY3Rpb24gPSBzZWxmLmhlYWRlcnMuZ2V0KGhkcnMuQ09OTkVDVElPTilcclxuICAgICAgICBpZiBub3QgY29ubmVjdGlvbjpcclxuICAgICAgICAgICAgaWYgc2VsZi5rZWVwX2FsaXZlKCk6XHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLnZlcnNpb24gPT0gSHR0cFZlcnNpb24xMDpcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0gImtlZXAtYWxpdmUiXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLnZlcnNpb24gPT0gSHR0cFZlcnNpb24xMTpcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0gImNsb3NlIlxyXG5cclxuICAgICAgICBpZiBjb25uZWN0aW9uIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLmhlYWRlcnNbaGRycy5DT05ORUNUSU9OXSA9IGNvbm5lY3Rpb25cclxuXHJcbiAgICAgICAgIyBzdGF0dXMgKyBoZWFkZXJzXHJcbiAgICAgICAgc3RhdHVzX2xpbmUgPSAiezB9IHsxfSBIVFRQL3syWzBdfS57MlsxXX0iLmZvcm1hdChcclxuICAgICAgICAgICAgc2VsZi5tZXRob2QsIHBhdGgsIHNlbGYudmVyc2lvblxyXG4gICAgICAgIClcclxuICAgICAgICBhd2FpdCB3cml0ZXIud3JpdGVfaGVhZGVycyhzdGF0dXNfbGluZSwgc2VsZi5oZWFkZXJzKVxyXG5cclxuICAgICAgICBzZWxmLl93cml0ZXIgPSBzZWxmLmxvb3AuY3JlYXRlX3Rhc2soc2VsZi53cml0ZV9ieXRlcyh3cml0ZXIsIGNvbm4pKVxyXG5cclxuICAgICAgICByZXNwb25zZV9jbGFzcyA9IHNlbGYucmVzcG9uc2VfY2xhc3NcclxuICAgICAgICBhc3NlcnQgcmVzcG9uc2VfY2xhc3MgaXMgbm90IE5vbmVcclxuICAgICAgICBzZWxmLnJlc3BvbnNlID0gcmVzcG9uc2VfY2xhc3MoXHJcbiAgICAgICAgICAgIHNlbGYubWV0aG9kLFxyXG4gICAgICAgICAgICBzZWxmLm9yaWdpbmFsX3VybCxcclxuICAgICAgICAgICAgd3JpdGVyPXNlbGYuX3dyaXRlcixcclxuICAgICAgICAgICAgY29udGludWUxMDA9c2VsZi5fY29udGludWUsXHJcbiAgICAgICAgICAgIHRpbWVyPXNlbGYuX3RpbWVyLFxyXG4gICAgICAgICAgICByZXF1ZXN0X2luZm89c2VsZi5yZXF1ZXN0X2luZm8sXHJcbiAgICAgICAgICAgIHRyYWNlcz1zZWxmLl90cmFjZXMsXHJcbiAgICAgICAgICAgIGxvb3A9c2VsZi5sb29wLFxyXG4gICAgICAgICAgICBzZXNzaW9uPXNlbGYuX3Nlc3Npb24sXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBzZWxmLnJlc3BvbnNlXHJcblxyXG4gICAgYXN5bmMgZGVmIGNsb3NlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fd3JpdGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLl93cml0ZXJcclxuICAgICAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3dyaXRlciA9IE5vbmVcclxuXHJcbiAgICBkZWYgdGVybWluYXRlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fd3JpdGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBpZiBub3Qgc2VsZi5sb29wLmlzX2Nsb3NlZCgpOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fd3JpdGVyLmNhbmNlbCgpXHJcbiAgICAgICAgICAgIHNlbGYuX3dyaXRlciA9IE5vbmVcclxuXHJcbiAgICBhc3luYyBkZWYgX29uX2NodW5rX3JlcXVlc3Rfc2VudChzZWxmLCBtZXRob2Q6IHN0ciwgdXJsOiBVUkwsIGNodW5rOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBmb3IgdHJhY2UgaW4gc2VsZi5fdHJhY2VzOlxyXG4gICAgICAgICAgICBhd2FpdCB0cmFjZS5zZW5kX3JlcXVlc3RfY2h1bmtfc2VudChtZXRob2QsIHVybCwgY2h1bmspXHJcblxyXG4gICAgYXN5bmMgZGVmIF9vbl9oZWFkZXJzX3JlcXVlc3Rfc2VudChcclxuICAgICAgICBzZWxmLCBtZXRob2Q6IHN0ciwgdXJsOiBVUkwsIGhlYWRlcnM6ICJDSU11bHRpRGljdFtzdHJdIlxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGZvciB0cmFjZSBpbiBzZWxmLl90cmFjZXM6XHJcbiAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfcmVxdWVzdF9oZWFkZXJzKG1ldGhvZCwgdXJsLCBoZWFkZXJzKVxyXG5cclxuXHJcbmNsYXNzIENsaWVudFJlc3BvbnNlKEhlYWRlcnNNaXhpbik6XHJcblxyXG4gICAgIyBmcm9tIHRoZSBTdGF0dXMtTGluZSBvZiB0aGUgcmVzcG9uc2VcclxuICAgIHZlcnNpb24gPSBOb25lICAjIEhUVFAtVmVyc2lvblxyXG4gICAgc3RhdHVzID0gTm9uZSAgIyB0eXBlOiBpbnQgICMgU3RhdHVzLUNvZGVcclxuICAgIHJlYXNvbiA9IE5vbmUgICMgUmVhc29uLVBocmFzZVxyXG5cclxuICAgIGNvbnRlbnQgPSBOb25lICAjIHR5cGU6IFN0cmVhbVJlYWRlciAgIyBQYXlsb2FkIHN0cmVhbVxyXG4gICAgX2hlYWRlcnMgPSBOb25lICAjIHR5cGU6IENJTXVsdGlEaWN0UHJveHlbc3RyXSAgIyBSZXNwb25zZSBoZWFkZXJzXHJcbiAgICBfcmF3X2hlYWRlcnMgPSBOb25lICAjIHR5cGU6IFJhd0hlYWRlcnMgICMgUmVzcG9uc2UgcmF3IGhlYWRlcnNcclxuXHJcbiAgICBfY29ubmVjdGlvbiA9IE5vbmUgICMgY3VycmVudCBjb25uZWN0aW9uXHJcbiAgICBfc291cmNlX3RyYWNlYmFjayA9IE5vbmVcclxuICAgICMgc2V0dGVkIHVwIGJ5IENsaWVudFJlcXVlc3QgYWZ0ZXIgQ2xpZW50UmVzcG9uc2Ugb2JqZWN0IGNyZWF0aW9uXHJcbiAgICAjIHBvc3QtaW5pdCBzdGFnZSBhbGxvd3MgdG8gbm90IGNoYW5nZSBjdG9yIHNpZ25hdHVyZVxyXG4gICAgX2Nsb3NlZCA9IFRydWUgICMgdG8gYWxsb3cgX19kZWxfXyBmb3Igbm9uLWluaXRpYWxpemVkIHByb3Blcmx5IHJlc3BvbnNlXHJcbiAgICBfcmVsZWFzZWQgPSBGYWxzZVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1ldGhvZDogc3RyLFxyXG4gICAgICAgIHVybDogVVJMLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgd3JpdGVyOiAiYXN5bmNpby5UYXNrW05vbmVdIixcclxuICAgICAgICBjb250aW51ZTEwMDogT3B0aW9uYWxbImFzeW5jaW8uRnV0dXJlW2Jvb2xdIl0sXHJcbiAgICAgICAgdGltZXI6IEJhc2VUaW1lckNvbnRleHQsXHJcbiAgICAgICAgcmVxdWVzdF9pbmZvOiBSZXF1ZXN0SW5mbyxcclxuICAgICAgICB0cmFjZXM6IExpc3RbIlRyYWNlIl0sXHJcbiAgICAgICAgbG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcCxcclxuICAgICAgICBzZXNzaW9uOiAiQ2xpZW50U2Vzc2lvbiIsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UodXJsLCBVUkwpXHJcblxyXG4gICAgICAgIHNlbGYubWV0aG9kID0gbWV0aG9kXHJcbiAgICAgICAgc2VsZi5jb29raWVzID0gU2ltcGxlQ29va2llKCkgICMgdHlwZTogU2ltcGxlQ29va2llW3N0cl1cclxuXHJcbiAgICAgICAgc2VsZi5fcmVhbF91cmwgPSB1cmxcclxuICAgICAgICBzZWxmLl91cmwgPSB1cmwud2l0aF9mcmFnbWVudChOb25lKVxyXG4gICAgICAgIHNlbGYuX2JvZHkgPSBOb25lICAjIHR5cGU6IEFueVxyXG4gICAgICAgIHNlbGYuX3dyaXRlciA9IHdyaXRlciAgIyB0eXBlOiBPcHRpb25hbFthc3luY2lvLlRhc2tbTm9uZV1dXHJcbiAgICAgICAgc2VsZi5fY29udGludWUgPSBjb250aW51ZTEwMCAgIyBOb25lIGJ5IGRlZmF1bHRcclxuICAgICAgICBzZWxmLl9jbG9zZWQgPSBUcnVlXHJcbiAgICAgICAgc2VsZi5faGlzdG9yeSA9ICgpICAjIHR5cGU6IFR1cGxlW0NsaWVudFJlc3BvbnNlLCAuLi5dXHJcbiAgICAgICAgc2VsZi5fcmVxdWVzdF9pbmZvID0gcmVxdWVzdF9pbmZvXHJcbiAgICAgICAgc2VsZi5fdGltZXIgPSB0aW1lciBpZiB0aW1lciBpcyBub3QgTm9uZSBlbHNlIFRpbWVyTm9vcCgpXHJcbiAgICAgICAgc2VsZi5fY2FjaGUgPSB7fSAgIyB0eXBlOiBEaWN0W3N0ciwgQW55XVxyXG4gICAgICAgIHNlbGYuX3RyYWNlcyA9IHRyYWNlc1xyXG4gICAgICAgIHNlbGYuX2xvb3AgPSBsb29wXHJcbiAgICAgICAgIyBzdG9yZSBhIHJlZmVyZW5jZSB0byBzZXNzaW9uICMxOTg1XHJcbiAgICAgICAgc2VsZi5fc2Vzc2lvbiA9IHNlc3Npb24gICMgdHlwZTogT3B0aW9uYWxbQ2xpZW50U2Vzc2lvbl1cclxuICAgICAgICBpZiBsb29wLmdldF9kZWJ1ZygpOlxyXG4gICAgICAgICAgICBzZWxmLl9zb3VyY2VfdHJhY2ViYWNrID0gdHJhY2ViYWNrLmV4dHJhY3Rfc3RhY2soc3lzLl9nZXRmcmFtZSgxKSlcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiB1cmwoc2VsZikgLT4gVVJMOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl91cmxcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiB1cmxfb2JqKHNlbGYpIC0+IFVSTDpcclxuICAgICAgICB3YXJuaW5ncy53YXJuKCJEZXByZWNhdGVkLCB1c2UgLnVybCAjMTY1NCIsIERlcHJlY2F0aW9uV2FybmluZywgc3RhY2tsZXZlbD0yKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl91cmxcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiByZWFsX3VybChzZWxmKSAtPiBVUkw6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWxfdXJsXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgaG9zdChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3VybC5ob3N0IGlzIG5vdCBOb25lXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3VybC5ob3N0XHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgaGVhZGVycyhzZWxmKSAtPiAiQ0lNdWx0aURpY3RQcm94eVtzdHJdIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5faGVhZGVyc1xyXG5cclxuICAgIEByZWlmeVxyXG4gICAgZGVmIHJhd19oZWFkZXJzKHNlbGYpIC0+IFJhd0hlYWRlcnM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Jhd19oZWFkZXJzXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgcmVxdWVzdF9pbmZvKHNlbGYpIC0+IFJlcXVlc3RJbmZvOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZXF1ZXN0X2luZm9cclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBjb250ZW50X2Rpc3Bvc2l0aW9uKHNlbGYpIC0+IE9wdGlvbmFsW0NvbnRlbnREaXNwb3NpdGlvbl06XHJcbiAgICAgICAgcmF3ID0gc2VsZi5faGVhZGVycy5nZXQoaGRycy5DT05URU5UX0RJU1BPU0lUSU9OKVxyXG4gICAgICAgIGlmIHJhdyBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIGRpc3Bvc2l0aW9uX3R5cGUsIHBhcmFtc19kY3QgPSBtdWx0aXBhcnQucGFyc2VfY29udGVudF9kaXNwb3NpdGlvbihyYXcpXHJcbiAgICAgICAgcGFyYW1zID0gTWFwcGluZ1Byb3h5VHlwZShwYXJhbXNfZGN0KVxyXG4gICAgICAgIGZpbGVuYW1lID0gbXVsdGlwYXJ0LmNvbnRlbnRfZGlzcG9zaXRpb25fZmlsZW5hbWUocGFyYW1zKVxyXG4gICAgICAgIHJldHVybiBDb250ZW50RGlzcG9zaXRpb24oZGlzcG9zaXRpb25fdHlwZSwgcGFyYW1zLCBmaWxlbmFtZSlcclxuXHJcbiAgICBkZWYgX19kZWxfXyhzZWxmLCBfd2FybmluZ3M6IEFueSA9IHdhcm5pbmdzKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2Nvbm5lY3Rpb24gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24ucmVsZWFzZSgpXHJcbiAgICAgICAgICAgIHNlbGYuX2NsZWFudXBfd3JpdGVyKClcclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2xvb3AuZ2V0X2RlYnVnKCk6XHJcbiAgICAgICAgICAgICAgICBpZiBQWV8zNjpcclxuICAgICAgICAgICAgICAgICAgICBrd2FyZ3MgPSB7InNvdXJjZSI6IHNlbGZ9XHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIGt3YXJncyA9IHt9XHJcbiAgICAgICAgICAgICAgICBfd2FybmluZ3Mud2FybihmIlVuY2xvc2VkIHJlc3BvbnNlIHtzZWxmIXJ9IiwgUmVzb3VyY2VXYXJuaW5nLCAqKmt3YXJncylcclxuICAgICAgICAgICAgICAgIGNvbnRleHQgPSB7ImNsaWVudF9yZXNwb25zZSI6IHNlbGYsICJtZXNzYWdlIjogIlVuY2xvc2VkIHJlc3BvbnNlIn1cclxuICAgICAgICAgICAgICAgIGlmIHNlbGYuX3NvdXJjZV90cmFjZWJhY2s6XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dFsic291cmNlX3RyYWNlYmFjayJdID0gc2VsZi5fc291cmNlX3RyYWNlYmFja1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fbG9vcC5jYWxsX2V4Y2VwdGlvbl9oYW5kbGVyKGNvbnRleHQpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICBvdXQgPSBpby5TdHJpbmdJTygpXHJcbiAgICAgICAgYXNjaWlfZW5jb2RhYmxlX3VybCA9IHN0cihzZWxmLnVybClcclxuICAgICAgICBpZiBzZWxmLnJlYXNvbjpcclxuICAgICAgICAgICAgYXNjaWlfZW5jb2RhYmxlX3JlYXNvbiA9IHNlbGYucmVhc29uLmVuY29kZShcclxuICAgICAgICAgICAgICAgICJhc2NpaSIsICJiYWNrc2xhc2hyZXBsYWNlIlxyXG4gICAgICAgICAgICApLmRlY29kZSgiYXNjaWkiKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGFzY2lpX2VuY29kYWJsZV9yZWFzb24gPSBzZWxmLnJlYXNvblxyXG4gICAgICAgIHByaW50KFxyXG4gICAgICAgICAgICAiPENsaWVudFJlc3BvbnNlKHt9KSBbe30ge31dPiIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgYXNjaWlfZW5jb2RhYmxlX3VybCwgc2VsZi5zdGF0dXMsIGFzY2lpX2VuY29kYWJsZV9yZWFzb25cclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgZmlsZT1vdXQsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHByaW50KHNlbGYuaGVhZGVycywgZmlsZT1vdXQpXHJcbiAgICAgICAgcmV0dXJuIG91dC5nZXR2YWx1ZSgpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY29ubmVjdGlvbihzZWxmKSAtPiBPcHRpb25hbFsiQ29ubmVjdGlvbiJdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uZWN0aW9uXHJcblxyXG4gICAgQHJlaWZ5XHJcbiAgICBkZWYgaGlzdG9yeShzZWxmKSAtPiBUdXBsZVsiQ2xpZW50UmVzcG9uc2UiLCAuLi5dOlxyXG4gICAgICAgICIiIkEgc2VxdWVuY2Ugb2Ygb2YgcmVzcG9uc2VzLCBpZiByZWRpcmVjdHMgb2NjdXJyZWQuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2hpc3RvcnlcclxuXHJcbiAgICBAcmVpZnlcclxuICAgIGRlZiBsaW5rcyhzZWxmKSAtPiAiTXVsdGlEaWN0UHJveHlbTXVsdGlEaWN0UHJveHlbVW5pb25bc3RyLCBVUkxdXV0iOlxyXG4gICAgICAgIGxpbmtzX3N0ciA9ICIsICIuam9pbihzZWxmLmhlYWRlcnMuZ2V0YWxsKCJsaW5rIiwgW10pKVxyXG5cclxuICAgICAgICBpZiBub3QgbGlua3Nfc3RyOlxyXG4gICAgICAgICAgICByZXR1cm4gTXVsdGlEaWN0UHJveHkoTXVsdGlEaWN0KCkpXHJcblxyXG4gICAgICAgIGxpbmtzID0gTXVsdGlEaWN0KCkgICMgdHlwZTogTXVsdGlEaWN0W011bHRpRGljdFByb3h5W1VuaW9uW3N0ciwgVVJMXV1dXHJcblxyXG4gICAgICAgIGZvciB2YWwgaW4gcmUuc3BsaXQociIsKD89XFxzKjwpIiwgbGlua3Nfc3RyKTpcclxuICAgICAgICAgICAgbWF0Y2ggPSByZS5tYXRjaChyIlxccyo8KC4qKT4oLiopIiwgdmFsKVxyXG4gICAgICAgICAgICBpZiBtYXRjaCBpcyBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICAgICAgICAgICAgICAjIHRoZSBjaGVjayBleGlzdHMgdG8gc3VwcHJlc3MgbXlweSBlcnJvclxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgdXJsLCBwYXJhbXNfc3RyID0gbWF0Y2guZ3JvdXBzKClcclxuICAgICAgICAgICAgcGFyYW1zID0gcGFyYW1zX3N0ci5zcGxpdCgiOyIpWzE6XVxyXG5cclxuICAgICAgICAgICAgbGluayA9IE11bHRpRGljdCgpICAjIHR5cGU6IE11bHRpRGljdFtVbmlvbltzdHIsIFVSTF1dXHJcblxyXG4gICAgICAgICAgICBmb3IgcGFyYW0gaW4gcGFyYW1zOlxyXG4gICAgICAgICAgICAgICAgbWF0Y2ggPSByZS5tYXRjaChyIl5cXHMqKFxcUyopXFxzKj1cXHMqKFtcJ1xcIl0/KSguKj8pKFxcMilcXHMqJCIsIHBhcmFtLCByZS5NKVxyXG4gICAgICAgICAgICAgICAgaWYgbWF0Y2ggaXMgTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgICAgICAgICAgICAgICMgdGhlIGNoZWNrIGV4aXN0cyB0byBzdXBwcmVzcyBteXB5IGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgICAgIGtleSwgXywgdmFsdWUsIF8gPSBtYXRjaC5ncm91cHMoKVxyXG5cclxuICAgICAgICAgICAgICAgIGxpbmsuYWRkKGtleSwgdmFsdWUpXHJcblxyXG4gICAgICAgICAgICBrZXkgPSBsaW5rLmdldCgicmVsIiwgdXJsKSAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuXHJcbiAgICAgICAgICAgIGxpbmsuYWRkKCJ1cmwiLCBzZWxmLnVybC5qb2luKFVSTCh1cmwpKSlcclxuXHJcbiAgICAgICAgICAgIGxpbmtzLmFkZChrZXksIE11bHRpRGljdFByb3h5KGxpbmspKVxyXG5cclxuICAgICAgICByZXR1cm4gTXVsdGlEaWN0UHJveHkobGlua3MpXHJcblxyXG4gICAgYXN5bmMgZGVmIHN0YXJ0KHNlbGYsIGNvbm5lY3Rpb246ICJDb25uZWN0aW9uIikgLT4gIkNsaWVudFJlc3BvbnNlIjpcclxuICAgICAgICAiIiJTdGFydCByZXNwb25zZSBwcm9jZXNzaW5nLiIiIlxyXG4gICAgICAgIHNlbGYuX2Nsb3NlZCA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fcHJvdG9jb2wgPSBjb25uZWN0aW9uLnByb3RvY29sXHJcbiAgICAgICAgc2VsZi5fY29ubmVjdGlvbiA9IGNvbm5lY3Rpb25cclxuXHJcbiAgICAgICAgd2l0aCBzZWxmLl90aW1lcjpcclxuICAgICAgICAgICAgd2hpbGUgVHJ1ZTpcclxuICAgICAgICAgICAgICAgICMgcmVhZCByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvY29sID0gc2VsZi5fcHJvdG9jb2xcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLCBwYXlsb2FkID0gYXdhaXQgcHJvdG9jb2wucmVhZCgpICAjIHR5cGU6IGlnbm9yZVt1bmlvbi1hdHRyXVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IGh0dHAuSHR0cFByb2Nlc3NpbmdFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgQ2xpZW50UmVzcG9uc2VFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXF1ZXN0X2luZm8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGlzdG9yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzPWV4Yy5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPWV4Yy5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPWV4Yy5oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICkgZnJvbSBleGNcclxuXHJcbiAgICAgICAgICAgICAgICBpZiBtZXNzYWdlLmNvZGUgPCAxMDAgb3IgbWVzc2FnZS5jb2RlID4gMTk5IG9yIG1lc3NhZ2UuY29kZSA9PSAxMDE6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9jb250aW51ZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICBzZXRfcmVzdWx0KHNlbGYuX2NvbnRpbnVlLCBUcnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2NvbnRpbnVlID0gTm9uZVxyXG5cclxuICAgICAgICAjIHBheWxvYWQgZW9mIGhhbmRsZXJcclxuICAgICAgICBwYXlsb2FkLm9uX2VvZihzZWxmLl9yZXNwb25zZV9lb2YpXHJcblxyXG4gICAgICAgICMgcmVzcG9uc2Ugc3RhdHVzXHJcbiAgICAgICAgc2VsZi52ZXJzaW9uID0gbWVzc2FnZS52ZXJzaW9uXHJcbiAgICAgICAgc2VsZi5zdGF0dXMgPSBtZXNzYWdlLmNvZGVcclxuICAgICAgICBzZWxmLnJlYXNvbiA9IG1lc3NhZ2UucmVhc29uXHJcblxyXG4gICAgICAgICMgaGVhZGVyc1xyXG4gICAgICAgIHNlbGYuX2hlYWRlcnMgPSBtZXNzYWdlLmhlYWRlcnMgICMgdHlwZSBpcyBDSU11bHRpRGljdFByb3h5XHJcbiAgICAgICAgc2VsZi5fcmF3X2hlYWRlcnMgPSBtZXNzYWdlLnJhd19oZWFkZXJzICAjIHR5cGUgaXMgVHVwbGVbYnl0ZXMsIGJ5dGVzXVxyXG5cclxuICAgICAgICAjIHBheWxvYWRcclxuICAgICAgICBzZWxmLmNvbnRlbnQgPSBwYXlsb2FkXHJcblxyXG4gICAgICAgICMgY29va2llc1xyXG4gICAgICAgIGZvciBoZHIgaW4gc2VsZi5oZWFkZXJzLmdldGFsbChoZHJzLlNFVF9DT09LSUUsICgpKTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgc2VsZi5jb29raWVzLmxvYWQoaGRyKVxyXG4gICAgICAgICAgICBleGNlcHQgQ29va2llRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgY2xpZW50X2xvZ2dlci53YXJuaW5nKCJDYW4gbm90IGxvYWQgcmVzcG9uc2UgY29va2llczogJXMiLCBleGMpXHJcbiAgICAgICAgcmV0dXJuIHNlbGZcclxuXHJcbiAgICBkZWYgX3Jlc3BvbnNlX2VvZihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2Nvbm5lY3Rpb24gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICMgd2Vic29ja2V0LCBwcm90b2NvbCBjb3VsZCBiZSBOb25lIGJlY2F1c2VcclxuICAgICAgICAgICAgIyBjb25uZWN0aW9uIGNvdWxkIGJlIGRldGFjaGVkXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24ucHJvdG9jb2wgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgICAgIGFuZCBzZWxmLl9jb25uZWN0aW9uLnByb3RvY29sLnVwZ3JhZGVkXHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24ucmVsZWFzZSgpXHJcbiAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24gPSBOb25lXHJcblxyXG4gICAgICAgIHNlbGYuX2Nsb3NlZCA9IFRydWVcclxuICAgICAgICBzZWxmLl9jbGVhbnVwX3dyaXRlcigpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2xvc2VkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nsb3NlZFxyXG5cclxuICAgIGRlZiBjbG9zZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9yZWxlYXNlZDpcclxuICAgICAgICAgICAgc2VsZi5fbm90aWZ5X2NvbnRlbnQoKVxyXG4gICAgICAgIGlmIHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHNlbGYuX2Nsb3NlZCA9IFRydWVcclxuICAgICAgICBpZiBzZWxmLl9sb29wIGlzIE5vbmUgb3Igc2VsZi5fbG9vcC5pc19jbG9zZWQoKTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2Nvbm5lY3Rpb24gaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24uY2xvc2UoKVxyXG4gICAgICAgICAgICBzZWxmLl9jb25uZWN0aW9uID0gTm9uZVxyXG4gICAgICAgIHNlbGYuX2NsZWFudXBfd3JpdGVyKClcclxuXHJcbiAgICBkZWYgcmVsZWFzZShzZWxmKSAtPiBBbnk6XHJcbiAgICAgICAgaWYgbm90IHNlbGYuX3JlbGVhc2VkOlxyXG4gICAgICAgICAgICBzZWxmLl9ub3RpZnlfY29udGVudCgpXHJcbiAgICAgICAgaWYgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICByZXR1cm4gbm9vcCgpXHJcblxyXG4gICAgICAgIHNlbGYuX2Nsb3NlZCA9IFRydWVcclxuICAgICAgICBpZiBzZWxmLl9jb25uZWN0aW9uIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9jb25uZWN0aW9uLnJlbGVhc2UoKVxyXG4gICAgICAgICAgICBzZWxmLl9jb25uZWN0aW9uID0gTm9uZVxyXG5cclxuICAgICAgICBzZWxmLl9jbGVhbnVwX3dyaXRlcigpXHJcbiAgICAgICAgcmV0dXJuIG5vb3AoKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9rKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiUmV0dXJucyBgYFRydWVgYCBpZiBgYHN0YXR1c2BgIGlzIGxlc3MgdGhhbiBgYDQwMGBgLCBgYEZhbHNlYGAgaWYgbm90LlxyXG5cclxuICAgICAgICBUaGlzIGlzICoqbm90KiogYSBjaGVjayBmb3IgYGAyMDAgT0tgYCBidXQgYSBjaGVjayB0aGF0IHRoZSByZXNwb25zZVxyXG4gICAgICAgIHN0YXR1cyBpcyB1bmRlciA0MDAuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIDQwMCA+IHNlbGYuc3RhdHVzXHJcblxyXG4gICAgZGVmIHJhaXNlX2Zvcl9zdGF0dXMoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3Qgc2VsZi5vazpcclxuICAgICAgICAgICAgIyByZWFzb24gc2hvdWxkIGFsd2F5cyBiZSBub3QgTm9uZSBmb3IgYSBzdGFydGVkIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGFzc2VydCBzZWxmLnJlYXNvbiBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICBzZWxmLnJlbGVhc2UoKVxyXG4gICAgICAgICAgICByYWlzZSBDbGllbnRSZXNwb25zZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5yZXF1ZXN0X2luZm8sXHJcbiAgICAgICAgICAgICAgICBzZWxmLmhpc3RvcnksXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM9c2VsZi5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlPXNlbGYucmVhc29uLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVycz1zZWxmLmhlYWRlcnMsXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgX2NsZWFudXBfd3JpdGVyKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fd3JpdGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl93cml0ZXIuY2FuY2VsKClcclxuICAgICAgICBzZWxmLl93cml0ZXIgPSBOb25lXHJcbiAgICAgICAgc2VsZi5fc2Vzc2lvbiA9IE5vbmVcclxuXHJcbiAgICBkZWYgX25vdGlmeV9jb250ZW50KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgY29udGVudCA9IHNlbGYuY29udGVudFxyXG4gICAgICAgIGlmIGNvbnRlbnQgYW5kIGNvbnRlbnQuZXhjZXB0aW9uKCkgaXMgTm9uZTpcclxuICAgICAgICAgICAgY29udGVudC5zZXRfZXhjZXB0aW9uKENsaWVudENvbm5lY3Rpb25FcnJvcigiQ29ubmVjdGlvbiBjbG9zZWQiKSlcclxuICAgICAgICBzZWxmLl9yZWxlYXNlZCA9IFRydWVcclxuXHJcbiAgICBhc3luYyBkZWYgd2FpdF9mb3JfY2xvc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl93cml0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dyaXRlclxyXG4gICAgICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fd3JpdGVyID0gTm9uZVxyXG4gICAgICAgIHNlbGYucmVsZWFzZSgpXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlYWQoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiUmVhZCByZXNwb25zZSBwYXlsb2FkLiIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2JvZHkgaXMgTm9uZTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYm9keSA9IGF3YWl0IHNlbGYuY29udGVudC5yZWFkKClcclxuICAgICAgICAgICAgICAgIGZvciB0cmFjZSBpbiBzZWxmLl90cmFjZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc2VuZF9yZXNwb25zZV9jaHVua19yZWNlaXZlZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tZXRob2QsIHNlbGYudXJsLCBzZWxmLl9ib2R5XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICBlbGlmIHNlbGYuX3JlbGVhc2VkOlxyXG4gICAgICAgICAgICByYWlzZSBDbGllbnRDb25uZWN0aW9uRXJyb3IoIkNvbm5lY3Rpb24gY2xvc2VkIilcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JvZHkgICMgdHlwZTogaWdub3JlW25vLWFueS1yZXR1cm5dXHJcblxyXG4gICAgZGVmIGdldF9lbmNvZGluZyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgY3R5cGUgPSBzZWxmLmhlYWRlcnMuZ2V0KGhkcnMuQ09OVEVOVF9UWVBFLCAiIikubG93ZXIoKVxyXG4gICAgICAgIG1pbWV0eXBlID0gaGVscGVycy5wYXJzZV9taW1ldHlwZShjdHlwZSlcclxuXHJcbiAgICAgICAgZW5jb2RpbmcgPSBtaW1ldHlwZS5wYXJhbWV0ZXJzLmdldCgiY2hhcnNldCIpXHJcbiAgICAgICAgaWYgZW5jb2Rpbmc6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGNvZGVjcy5sb29rdXAoZW5jb2RpbmcpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBMb29rdXBFcnJvcjpcclxuICAgICAgICAgICAgICAgIGVuY29kaW5nID0gTm9uZVxyXG4gICAgICAgIGlmIG5vdCBlbmNvZGluZzpcclxuICAgICAgICAgICAgaWYgbWltZXR5cGUudHlwZSA9PSAiYXBwbGljYXRpb24iIGFuZCAoXHJcbiAgICAgICAgICAgICAgICBtaW1ldHlwZS5zdWJ0eXBlID09ICJqc29uIiBvciBtaW1ldHlwZS5zdWJ0eXBlID09ICJyZGFwIlxyXG4gICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgIyBSRkMgNzE1OSBzdGF0ZXMgdGhhdCB0aGUgZGVmYXVsdCBlbmNvZGluZyBpcyBVVEYtOC5cclxuICAgICAgICAgICAgICAgICMgUkZDIDc0ODMgZGVmaW5lcyBhcHBsaWNhdGlvbi9yZGFwK2pzb25cclxuICAgICAgICAgICAgICAgIGVuY29kaW5nID0gInV0Zi04IlxyXG4gICAgICAgICAgICBlbGlmIHNlbGYuX2JvZHkgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiQ2Fubm90IGd1ZXNzIHRoZSBlbmNvZGluZyBvZiAiICJhIG5vdCB5ZXQgcmVhZCBib2R5IlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgPSBjaGFyZGV0LmRldGVjdChzZWxmLl9ib2R5KVsiZW5jb2RpbmciXVxyXG4gICAgICAgIGlmIG5vdCBlbmNvZGluZzpcclxuICAgICAgICAgICAgZW5jb2RpbmcgPSAidXRmLTgiXHJcblxyXG4gICAgICAgIHJldHVybiBlbmNvZGluZ1xyXG5cclxuICAgIGFzeW5jIGRlZiB0ZXh0KHNlbGYsIGVuY29kaW5nOiBPcHRpb25hbFtzdHJdID0gTm9uZSwgZXJyb3JzOiBzdHIgPSAic3RyaWN0IikgLT4gc3RyOlxyXG4gICAgICAgICIiIlJlYWQgcmVzcG9uc2UgcGF5bG9hZCBhbmQgZGVjb2RlLiIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2JvZHkgaXMgTm9uZTpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5yZWFkKClcclxuXHJcbiAgICAgICAgaWYgZW5jb2RpbmcgaXMgTm9uZTpcclxuICAgICAgICAgICAgZW5jb2RpbmcgPSBzZWxmLmdldF9lbmNvZGluZygpXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9ib2R5LmRlY29kZSggICMgdHlwZTogaWdub3JlW25vLWFueS1yZXR1cm4sdW5pb24tYXR0cl1cclxuICAgICAgICAgICAgZW5jb2RpbmcsIGVycm9ycz1lcnJvcnNcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIGpzb24oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIGVuY29kaW5nOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBsb2FkczogSlNPTkRlY29kZXIgPSBERUZBVUxUX0pTT05fREVDT0RFUixcclxuICAgICAgICBjb250ZW50X3R5cGU6IE9wdGlvbmFsW3N0cl0gPSAiYXBwbGljYXRpb24vanNvbiIsXHJcbiAgICApIC0+IEFueTpcclxuICAgICAgICAiIiJSZWFkIGFuZCBkZWNvZGVzIEpTT04gcmVzcG9uc2UuIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fYm9keSBpcyBOb25lOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLnJlYWQoKVxyXG5cclxuICAgICAgICBpZiBjb250ZW50X3R5cGU6XHJcbiAgICAgICAgICAgIGN0eXBlID0gc2VsZi5oZWFkZXJzLmdldChoZHJzLkNPTlRFTlRfVFlQRSwgIiIpLmxvd2VyKClcclxuICAgICAgICAgICAgaWYgbm90IF9pc19leHBlY3RlZF9jb250ZW50X3R5cGUoY3R5cGUsIGNvbnRlbnRfdHlwZSk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBDb250ZW50VHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVxdWVzdF9pbmZvLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGlzdG9yeSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPShcclxuICAgICAgICAgICAgICAgICAgICAgICAgIkF0dGVtcHQgdG8gZGVjb2RlIEpTT04gd2l0aCAiICJ1bmV4cGVjdGVkIG1pbWV0eXBlOiAlcyIgJSBjdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycz1zZWxmLmhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHN0cmlwcGVkID0gc2VsZi5fYm9keS5zdHJpcCgpICAjIHR5cGU6IGlnbm9yZVt1bmlvbi1hdHRyXVxyXG4gICAgICAgIGlmIG5vdCBzdHJpcHBlZDpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICAgICAgaWYgZW5jb2RpbmcgaXMgTm9uZTpcclxuICAgICAgICAgICAgZW5jb2RpbmcgPSBzZWxmLmdldF9lbmNvZGluZygpXHJcblxyXG4gICAgICAgIHJldHVybiBsb2FkcyhzdHJpcHBlZC5kZWNvZGUoZW5jb2RpbmcpKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfX2FlbnRlcl9fKHNlbGYpIC0+ICJDbGllbnRSZXNwb25zZSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGZcclxuXHJcbiAgICBhc3luYyBkZWYgX19hZXhpdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZXhjX3R5cGU6IE9wdGlvbmFsW1R5cGVbQmFzZUV4Y2VwdGlvbl1dLFxyXG4gICAgICAgIGV4Y192YWw6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dLFxyXG4gICAgICAgIGV4Y190YjogT3B0aW9uYWxbVHJhY2ViYWNrVHlwZV0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIyBzaW1pbGFyIHRvIF9SZXF1ZXN0Q29udGV4dE1hbmFnZXIsIHdlIGRvIG5vdCBuZWVkIHRvIGNoZWNrXHJcbiAgICAgICAgIyBmb3IgZXhjZXB0aW9ucywgcmVzcG9uc2Ugb2JqZWN0IGNhbiBjbG9zZSBjb25uZWN0aW9uXHJcbiAgICAgICAgIyBpZiBzdGF0ZSBpcyBicm9rZW5cclxuICAgICAgICBzZWxmLnJlbGVhc2UoKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9jbGllbnRfZXhjZXB0aW9ucy5weScsIGInIiIiSFRUUCByZWxhdGVkIGVycm9ycy4iIiJcclxuXHJcbmltcG9ydCBhc3luY2lvXHJcbmltcG9ydCB3YXJuaW5nc1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgVFlQRV9DSEVDS0lORywgQW55LCBPcHRpb25hbCwgVHVwbGUsIFVuaW9uXHJcblxyXG5mcm9tIC5odHRwX3BhcnNlciBpbXBvcnQgUmF3UmVzcG9uc2VNZXNzYWdlXHJcbmZyb20gLnR5cGVkZWZzIGltcG9ydCBMb29zZUhlYWRlcnNcclxuXHJcbnRyeTpcclxuICAgIGltcG9ydCBzc2xcclxuXHJcbiAgICBTU0xDb250ZXh0ID0gc3NsLlNTTENvbnRleHRcclxuZXhjZXB0IEltcG9ydEVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBzc2wgPSBTU0xDb250ZXh0ID0gTm9uZSAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIC5jbGllbnRfcmVxcmVwIGltcG9ydCBDbGllbnRSZXNwb25zZSwgQ29ubmVjdGlvbktleSwgRmluZ2VycHJpbnQsIFJlcXVlc3RJbmZvXHJcbmVsc2U6XHJcbiAgICBSZXF1ZXN0SW5mbyA9IENsaWVudFJlc3BvbnNlID0gQ29ubmVjdGlvbktleSA9IE5vbmVcclxuXHJcbl9fYWxsX18gPSAoXHJcbiAgICAiQ2xpZW50RXJyb3IiLFxyXG4gICAgIkNsaWVudENvbm5lY3Rpb25FcnJvciIsXHJcbiAgICAiQ2xpZW50T1NFcnJvciIsXHJcbiAgICAiQ2xpZW50Q29ubmVjdG9yRXJyb3IiLFxyXG4gICAgIkNsaWVudFByb3h5Q29ubmVjdGlvbkVycm9yIixcclxuICAgICJDbGllbnRTU0xFcnJvciIsXHJcbiAgICAiQ2xpZW50Q29ubmVjdG9yU1NMRXJyb3IiLFxyXG4gICAgIkNsaWVudENvbm5lY3RvckNlcnRpZmljYXRlRXJyb3IiLFxyXG4gICAgIlNlcnZlckNvbm5lY3Rpb25FcnJvciIsXHJcbiAgICAiU2VydmVyVGltZW91dEVycm9yIixcclxuICAgICJTZXJ2ZXJEaXNjb25uZWN0ZWRFcnJvciIsXHJcbiAgICAiU2VydmVyRmluZ2VycHJpbnRNaXNtYXRjaCIsXHJcbiAgICAiQ2xpZW50UmVzcG9uc2VFcnJvciIsXHJcbiAgICAiQ2xpZW50SHR0cFByb3h5RXJyb3IiLFxyXG4gICAgIldTU2VydmVySGFuZHNoYWtlRXJyb3IiLFxyXG4gICAgIkNvbnRlbnRUeXBlRXJyb3IiLFxyXG4gICAgIkNsaWVudFBheWxvYWRFcnJvciIsXHJcbiAgICAiSW52YWxpZFVSTCIsXHJcbilcclxuXHJcblxyXG5jbGFzcyBDbGllbnRFcnJvcihFeGNlcHRpb24pOlxyXG4gICAgIiIiQmFzZSBjbGFzcyBmb3IgY2xpZW50IGNvbm5lY3Rpb24gZXJyb3JzLiIiIlxyXG5cclxuXHJcbmNsYXNzIENsaWVudFJlc3BvbnNlRXJyb3IoQ2xpZW50RXJyb3IpOlxyXG4gICAgIiIiQ29ubmVjdGlvbiBlcnJvciBkdXJpbmcgcmVhZGluZyByZXNwb25zZS5cclxuXHJcbiAgICByZXF1ZXN0X2luZm86IGluc3RhbmNlIG9mIFJlcXVlc3RJbmZvXHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICByZXF1ZXN0X2luZm86IFJlcXVlc3RJbmZvLFxyXG4gICAgICAgIGhpc3Rvcnk6IFR1cGxlW0NsaWVudFJlc3BvbnNlLCAuLi5dLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgY29kZTogT3B0aW9uYWxbaW50XSA9IE5vbmUsXHJcbiAgICAgICAgc3RhdHVzOiBPcHRpb25hbFtpbnRdID0gTm9uZSxcclxuICAgICAgICBtZXNzYWdlOiBzdHIgPSAiIixcclxuICAgICAgICBoZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLnJlcXVlc3RfaW5mbyA9IHJlcXVlc3RfaW5mb1xyXG4gICAgICAgIGlmIGNvZGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIHN0YXR1cyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIkJvdGggY29kZSBhbmQgc3RhdHVzIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQ7ICJcclxuICAgICAgICAgICAgICAgICAgICAiY29kZSBpcyBkZXByZWNhdGVkLCB1c2Ugc3RhdHVzIGluc3RlYWQiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAiY29kZSBhcmd1bWVudCBpcyBkZXByZWNhdGVkLCB1c2Ugc3RhdHVzIGluc3RlYWQiLFxyXG4gICAgICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYgc3RhdHVzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLnN0YXR1cyA9IHN0YXR1c1xyXG4gICAgICAgIGVsaWYgY29kZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5zdGF0dXMgPSBjb2RlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5zdGF0dXMgPSAwXHJcbiAgICAgICAgc2VsZi5tZXNzYWdlID0gbWVzc2FnZVxyXG4gICAgICAgIHNlbGYuaGVhZGVycyA9IGhlYWRlcnNcclxuICAgICAgICBzZWxmLmhpc3RvcnkgPSBoaXN0b3J5XHJcbiAgICAgICAgc2VsZi5hcmdzID0gKHJlcXVlc3RfaW5mbywgaGlzdG9yeSlcclxuXHJcbiAgICBkZWYgX19zdHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICJ7fSwgbWVzc2FnZT17IXJ9LCB1cmw9eyFyfSIuZm9ybWF0KFxyXG4gICAgICAgICAgICBzZWxmLnN0YXR1cyxcclxuICAgICAgICAgICAgc2VsZi5tZXNzYWdlLFxyXG4gICAgICAgICAgICBzZWxmLnJlcXVlc3RfaW5mby5yZWFsX3VybCxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICBhcmdzID0gZiJ7c2VsZi5yZXF1ZXN0X2luZm8hcn0sIHtzZWxmLmhpc3Rvcnkhcn0iXHJcbiAgICAgICAgaWYgc2VsZi5zdGF0dXMgIT0gMDpcclxuICAgICAgICAgICAgYXJncyArPSBmIiwgc3RhdHVzPXtzZWxmLnN0YXR1cyFyfSJcclxuICAgICAgICBpZiBzZWxmLm1lc3NhZ2UgIT0gIiI6XHJcbiAgICAgICAgICAgIGFyZ3MgKz0gZiIsIG1lc3NhZ2U9e3NlbGYubWVzc2FnZSFyfSJcclxuICAgICAgICBpZiBzZWxmLmhlYWRlcnMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGFyZ3MgKz0gZiIsIGhlYWRlcnM9e3NlbGYuaGVhZGVycyFyfSJcclxuICAgICAgICByZXR1cm4gZiJ7dHlwZShzZWxmKS5fX25hbWVfX30oe2FyZ3N9KSJcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb2RlKHNlbGYpIC0+IGludDpcclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAiY29kZSBwcm9wZXJ0eSBpcyBkZXByZWNhdGVkLCB1c2Ugc3RhdHVzIGluc3RlYWQiLFxyXG4gICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgIHN0YWNrbGV2ZWw9MixcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuc3RhdHVzXHJcblxyXG4gICAgQGNvZGUuc2V0dGVyXHJcbiAgICBkZWYgY29kZShzZWxmLCB2YWx1ZTogaW50KSAtPiBOb25lOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJjb2RlIHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQsIHVzZSBzdGF0dXMgaW5zdGVhZCIsXHJcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLnN0YXR1cyA9IHZhbHVlXHJcblxyXG5cclxuY2xhc3MgQ29udGVudFR5cGVFcnJvcihDbGllbnRSZXNwb25zZUVycm9yKTpcclxuICAgICIiIkNvbnRlbnRUeXBlIGZvdW5kIGlzIG5vdCB2YWxpZC4iIiJcclxuXHJcblxyXG5jbGFzcyBXU1NlcnZlckhhbmRzaGFrZUVycm9yKENsaWVudFJlc3BvbnNlRXJyb3IpOlxyXG4gICAgIiIid2Vic29ja2V0IHNlcnZlciBoYW5kc2hha2UgZXJyb3IuIiIiXHJcblxyXG5cclxuY2xhc3MgQ2xpZW50SHR0cFByb3h5RXJyb3IoQ2xpZW50UmVzcG9uc2VFcnJvcik6XHJcbiAgICAiIiJIVFRQIHByb3h5IGVycm9yLlxyXG5cclxuICAgIFJhaXNlZCBpbiA6Y2xhc3M6YGFpb2h0dHAuY29ubmVjdG9yLlRDUENvbm5lY3RvcmAgaWZcclxuICAgIHByb3h5IHJlc3BvbmRzIHdpdGggc3RhdHVzIG90aGVyIHRoYW4gYGAyMDAgT0tgYFxyXG4gICAgb24gYGBDT05ORUNUYGAgcmVxdWVzdC5cclxuICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIFRvb01hbnlSZWRpcmVjdHMoQ2xpZW50UmVzcG9uc2VFcnJvcik6XHJcbiAgICAiIiJDbGllbnQgd2FzIHJlZGlyZWN0ZWQgdG9vIG1hbnkgdGltZXMuIiIiXHJcblxyXG5cclxuY2xhc3MgQ2xpZW50Q29ubmVjdGlvbkVycm9yKENsaWVudEVycm9yKTpcclxuICAgICIiIkJhc2UgY2xhc3MgZm9yIGNsaWVudCBzb2NrZXQgZXJyb3JzLiIiIlxyXG5cclxuXHJcbmNsYXNzIENsaWVudE9TRXJyb3IoQ2xpZW50Q29ubmVjdGlvbkVycm9yLCBPU0Vycm9yKTpcclxuICAgICIiIk9TRXJyb3IgZXJyb3IuIiIiXHJcblxyXG5cclxuY2xhc3MgQ2xpZW50Q29ubmVjdG9yRXJyb3IoQ2xpZW50T1NFcnJvcik6XHJcbiAgICAiIiJDbGllbnQgY29ubmVjdG9yIGVycm9yLlxyXG5cclxuICAgIFJhaXNlZCBpbiA6Y2xhc3M6YGFpb2h0dHAuY29ubmVjdG9yLlRDUENvbm5lY3RvcmAgaWZcclxuICAgICAgICBjb25uZWN0aW9uIHRvIHByb3h5IGNhbiBub3QgYmUgZXN0YWJsaXNoZWQuXHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29ubmVjdGlvbl9rZXk6IENvbm5lY3Rpb25LZXksIG9zX2Vycm9yOiBPU0Vycm9yKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2Nvbm5fa2V5ID0gY29ubmVjdGlvbl9rZXlcclxuICAgICAgICBzZWxmLl9vc19lcnJvciA9IG9zX2Vycm9yXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhvc19lcnJvci5lcnJubywgb3NfZXJyb3Iuc3RyZXJyb3IpXHJcbiAgICAgICAgc2VsZi5hcmdzID0gKGNvbm5lY3Rpb25fa2V5LCBvc19lcnJvcilcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvc19lcnJvcihzZWxmKSAtPiBPU0Vycm9yOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vc19lcnJvclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGhvc3Qoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uX2tleS5ob3N0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcG9ydChzZWxmKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uX2tleS5wb3J0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc3NsKHNlbGYpIC0+IFVuaW9uW1NTTENvbnRleHQsIE5vbmUsIGJvb2wsICJGaW5nZXJwcmludCJdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uX2tleS5zc2xcclxuXHJcbiAgICBkZWYgX19zdHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICJDYW5ub3QgY29ubmVjdCB0byBob3N0IHswLmhvc3R9OnswLnBvcnR9IHNzbDp7MX0gW3syfV0iLmZvcm1hdChcclxuICAgICAgICAgICAgc2VsZiwgc2VsZi5zc2wgaWYgc2VsZi5zc2wgaXMgbm90IE5vbmUgZWxzZSAiZGVmYXVsdCIsIHNlbGYuc3RyZXJyb3JcclxuICAgICAgICApXHJcblxyXG4gICAgIyBPU0Vycm9yLl9fcmVkdWNlX18gZG9lcyB0b28gbXVjaCBibGFjayBtYWdpY2tcclxuICAgIF9fcmVkdWNlX18gPSBCYXNlRXhjZXB0aW9uLl9fcmVkdWNlX19cclxuXHJcblxyXG5jbGFzcyBDbGllbnRQcm94eUNvbm5lY3Rpb25FcnJvcihDbGllbnRDb25uZWN0b3JFcnJvcik6XHJcbiAgICAiIiJQcm94eSBjb25uZWN0aW9uIGVycm9yLlxyXG5cclxuICAgIFJhaXNlZCBpbiA6Y2xhc3M6YGFpb2h0dHAuY29ubmVjdG9yLlRDUENvbm5lY3RvcmAgaWZcclxuICAgICAgICBjb25uZWN0aW9uIHRvIHByb3h5IGNhbiBub3QgYmUgZXN0YWJsaXNoZWQuXHJcbiAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBVbml4Q2xpZW50Q29ubmVjdG9yRXJyb3IoQ2xpZW50Q29ubmVjdG9yRXJyb3IpOlxyXG4gICAgIiIiVW5peCBjb25uZWN0b3IgZXJyb3IuXHJcblxyXG4gICAgUmFpc2VkIGluIDpweTpjbGFzczpgYWlvaHR0cC5jb25uZWN0b3IuVW5peENvbm5lY3RvcmBcclxuICAgIGlmIGNvbm5lY3Rpb24gdG8gdW5peCBzb2NrZXQgY2FuIG5vdCBiZSBlc3RhYmxpc2hlZC5cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLCBwYXRoOiBzdHIsIGNvbm5lY3Rpb25fa2V5OiBDb25uZWN0aW9uS2V5LCBvc19lcnJvcjogT1NFcnJvclxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3BhdGggPSBwYXRoXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhjb25uZWN0aW9uX2tleSwgb3NfZXJyb3IpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcGF0aChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BhdGhcclxuXHJcbiAgICBkZWYgX19zdHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICJDYW5ub3QgY29ubmVjdCB0byB1bml4IHNvY2tldCB7MC5wYXRofSBzc2w6ezF9IFt7Mn1dIi5mb3JtYXQoXHJcbiAgICAgICAgICAgIHNlbGYsIHNlbGYuc3NsIGlmIHNlbGYuc3NsIGlzIG5vdCBOb25lIGVsc2UgImRlZmF1bHQiLCBzZWxmLnN0cmVycm9yXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIFNlcnZlckNvbm5lY3Rpb25FcnJvcihDbGllbnRDb25uZWN0aW9uRXJyb3IpOlxyXG4gICAgIiIiU2VydmVyIGNvbm5lY3Rpb24gZXJyb3JzLiIiIlxyXG5cclxuXHJcbmNsYXNzIFNlcnZlckRpc2Nvbm5lY3RlZEVycm9yKFNlcnZlckNvbm5lY3Rpb25FcnJvcik6XHJcbiAgICAiIiJTZXJ2ZXIgZGlzY29ubmVjdGVkLiIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtZXNzYWdlOiBVbmlvbltSYXdSZXNwb25zZU1lc3NhZ2UsIHN0ciwgTm9uZV0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG1lc3NhZ2UgaXMgTm9uZTpcclxuICAgICAgICAgICAgbWVzc2FnZSA9ICJTZXJ2ZXIgZGlzY29ubmVjdGVkIlxyXG5cclxuICAgICAgICBzZWxmLmFyZ3MgPSAobWVzc2FnZSwpXHJcbiAgICAgICAgc2VsZi5tZXNzYWdlID0gbWVzc2FnZVxyXG5cclxuXHJcbmNsYXNzIFNlcnZlclRpbWVvdXRFcnJvcihTZXJ2ZXJDb25uZWN0aW9uRXJyb3IsIGFzeW5jaW8uVGltZW91dEVycm9yKTpcclxuICAgICIiIlNlcnZlciB0aW1lb3V0IGVycm9yLiIiIlxyXG5cclxuXHJcbmNsYXNzIFNlcnZlckZpbmdlcnByaW50TWlzbWF0Y2goU2VydmVyQ29ubmVjdGlvbkVycm9yKTpcclxuICAgICIiIlNTTCBjZXJ0aWZpY2F0ZSBkb2VzIG5vdCBtYXRjaCBleHBlY3RlZCBmaW5nZXJwcmludC4iIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZXhwZWN0ZWQ6IGJ5dGVzLCBnb3Q6IGJ5dGVzLCBob3N0OiBzdHIsIHBvcnQ6IGludCkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmV4cGVjdGVkID0gZXhwZWN0ZWRcclxuICAgICAgICBzZWxmLmdvdCA9IGdvdFxyXG4gICAgICAgIHNlbGYuaG9zdCA9IGhvc3RcclxuICAgICAgICBzZWxmLnBvcnQgPSBwb3J0XHJcbiAgICAgICAgc2VsZi5hcmdzID0gKGV4cGVjdGVkLCBnb3QsIGhvc3QsIHBvcnQpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjx7fSBleHBlY3RlZD17IXJ9IGdvdD17IXJ9IGhvc3Q9eyFyfSBwb3J0PXshcn0+Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIHNlbGYuX19jbGFzc19fLl9fbmFtZV9fLCBzZWxmLmV4cGVjdGVkLCBzZWxmLmdvdCwgc2VsZi5ob3N0LCBzZWxmLnBvcnRcclxuICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgQ2xpZW50UGF5bG9hZEVycm9yKENsaWVudEVycm9yKTpcclxuICAgICIiIlJlc3BvbnNlIHBheWxvYWQgZXJyb3IuIiIiXHJcblxyXG5cclxuY2xhc3MgSW52YWxpZFVSTChDbGllbnRFcnJvciwgVmFsdWVFcnJvcik6XHJcbiAgICAiIiJJbnZhbGlkIFVSTC5cclxuXHJcbiAgICBVUkwgdXNlZCBmb3IgZmV0Y2hpbmcgaXMgbWFsZm9ybWVkLCBlLmcuIGl0IGRvZXNuXCd0IGNvbnRhaW5zIGhvc3RcclxuICAgIHBhcnQuXHJcbiAgICAiIiJcclxuXHJcbiAgICAjIERlcml2ZSBmcm9tIFZhbHVlRXJyb3IgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgdXJsOiBBbnkpIC0+IE5vbmU6XHJcbiAgICAgICAgIyBUaGUgdHlwZSBvZiB1cmwgaXMgbm90IHlhcmwuVVJMIGJlY2F1c2UgdGhlIGV4Y2VwdGlvbiBjYW4gYmUgcmFpc2VkXHJcbiAgICAgICAgIyBvbiBVUkwodXJsKSBjYWxsXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyh1cmwpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdXJsKHNlbGYpIC0+IEFueTpcclxuICAgICAgICByZXR1cm4gc2VsZi5hcmdzWzBdXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gZiI8e3NlbGYuX19jbGFzc19fLl9fbmFtZV9ffSB7c2VsZi51cmx9PiJcclxuXHJcblxyXG5jbGFzcyBDbGllbnRTU0xFcnJvcihDbGllbnRDb25uZWN0b3JFcnJvcik6XHJcbiAgICAiIiJCYXNlIGVycm9yIGZvciBzc2wuKkVycm9ycy4iIiJcclxuXHJcblxyXG5pZiBzc2wgaXMgbm90IE5vbmU6XHJcbiAgICBjZXJ0X2Vycm9ycyA9IChzc2wuQ2VydGlmaWNhdGVFcnJvciwpXHJcbiAgICBjZXJ0X2Vycm9yc19iYXNlcyA9IChcclxuICAgICAgICBDbGllbnRTU0xFcnJvcixcclxuICAgICAgICBzc2wuQ2VydGlmaWNhdGVFcnJvcixcclxuICAgIClcclxuXHJcbiAgICBzc2xfZXJyb3JzID0gKHNzbC5TU0xFcnJvciwpXHJcbiAgICBzc2xfZXJyb3JfYmFzZXMgPSAoQ2xpZW50U1NMRXJyb3IsIHNzbC5TU0xFcnJvcilcclxuZWxzZTogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgY2VydF9lcnJvcnMgPSB0dXBsZSgpXHJcbiAgICBjZXJ0X2Vycm9yc19iYXNlcyA9IChcclxuICAgICAgICBDbGllbnRTU0xFcnJvcixcclxuICAgICAgICBWYWx1ZUVycm9yLFxyXG4gICAgKVxyXG5cclxuICAgIHNzbF9lcnJvcnMgPSB0dXBsZSgpXHJcbiAgICBzc2xfZXJyb3JfYmFzZXMgPSAoQ2xpZW50U1NMRXJyb3IsKVxyXG5cclxuXHJcbmNsYXNzIENsaWVudENvbm5lY3RvclNTTEVycm9yKCpzc2xfZXJyb3JfYmFzZXMpOiAgIyB0eXBlOiBpZ25vcmVbbWlzY11cclxuICAgICIiIlJlc3BvbnNlIHNzbCBlcnJvci4iIiJcclxuXHJcblxyXG5jbGFzcyBDbGllbnRDb25uZWN0b3JDZXJ0aWZpY2F0ZUVycm9yKCpjZXJ0X2Vycm9yc19iYXNlcyk6ICAjIHR5cGU6IGlnbm9yZVttaXNjXVxyXG4gICAgIiIiUmVzcG9uc2UgY2VydGlmaWNhdGUgZXJyb3IuIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIGNvbm5lY3Rpb25fa2V5OiBDb25uZWN0aW9uS2V5LCBjZXJ0aWZpY2F0ZV9lcnJvcjogRXhjZXB0aW9uXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fY29ubl9rZXkgPSBjb25uZWN0aW9uX2tleVxyXG4gICAgICAgIHNlbGYuX2NlcnRpZmljYXRlX2Vycm9yID0gY2VydGlmaWNhdGVfZXJyb3JcclxuICAgICAgICBzZWxmLmFyZ3MgPSAoY29ubmVjdGlvbl9rZXksIGNlcnRpZmljYXRlX2Vycm9yKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNlcnRpZmljYXRlX2Vycm9yKHNlbGYpIC0+IEV4Y2VwdGlvbjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY2VydGlmaWNhdGVfZXJyb3JcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBob3N0KHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY29ubl9rZXkuaG9zdFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHBvcnQoc2VsZikgLT4gT3B0aW9uYWxbaW50XTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY29ubl9rZXkucG9ydFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHNzbChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uX2tleS5pc19zc2xcclxuXHJcbiAgICBkZWYgX19zdHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIkNhbm5vdCBjb25uZWN0IHRvIGhvc3QgezAuaG9zdH06ezAucG9ydH0gc3NsOnswLnNzbH0gIlxyXG4gICAgICAgICAgICAiW3swLmNlcnRpZmljYXRlX2Vycm9yLl9fY2xhc3NfXy5fX25hbWVfX306ICJcclxuICAgICAgICAgICAgInswLmNlcnRpZmljYXRlX2Vycm9yLmFyZ3N9XSIuZm9ybWF0KHNlbGYpXHJcbiAgICAgICAgKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9mb3JtZGF0YS5weScsIGInaW1wb3J0IGlvXHJcbmZyb20gdHlwaW5nIGltcG9ydCBBbnksIEl0ZXJhYmxlLCBMaXN0LCBPcHRpb25hbFxyXG5mcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgdXJsZW5jb2RlXHJcblxyXG5mcm9tIG11bHRpZGljdCBpbXBvcnQgTXVsdGlEaWN0LCBNdWx0aURpY3RQcm94eVxyXG5cclxuZnJvbSAuIGltcG9ydCBoZHJzLCBtdWx0aXBhcnQsIHBheWxvYWRcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgZ3Vlc3NfZmlsZW5hbWVcclxuZnJvbSAucGF5bG9hZCBpbXBvcnQgUGF5bG9hZFxyXG5cclxuX19hbGxfXyA9ICgiRm9ybURhdGEiLClcclxuXHJcblxyXG5jbGFzcyBGb3JtRGF0YTpcclxuICAgICIiIkhlbHBlciBjbGFzcyBmb3IgZm9ybSBib2R5IGdlbmVyYXRpb24uXHJcblxyXG4gICAgU3VwcG9ydHMgbXVsdGlwYXJ0L2Zvcm0tZGF0YSBhbmQgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkLlxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZmllbGRzOiBJdGVyYWJsZVtBbnldID0gKCksXHJcbiAgICAgICAgcXVvdGVfZmllbGRzOiBib29sID0gVHJ1ZSxcclxuICAgICAgICBjaGFyc2V0OiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl93cml0ZXIgPSBtdWx0aXBhcnQuTXVsdGlwYXJ0V3JpdGVyKCJmb3JtLWRhdGEiKVxyXG4gICAgICAgIHNlbGYuX2ZpZWxkcyA9IFtdICAjIHR5cGU6IExpc3RbQW55XVxyXG4gICAgICAgIHNlbGYuX2lzX211bHRpcGFydCA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5faXNfcHJvY2Vzc2VkID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9xdW90ZV9maWVsZHMgPSBxdW90ZV9maWVsZHNcclxuICAgICAgICBzZWxmLl9jaGFyc2V0ID0gY2hhcnNldFxyXG5cclxuICAgICAgICBpZiBpc2luc3RhbmNlKGZpZWxkcywgZGljdCk6XHJcbiAgICAgICAgICAgIGZpZWxkcyA9IGxpc3QoZmllbGRzLml0ZW1zKCkpXHJcbiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShmaWVsZHMsIChsaXN0LCB0dXBsZSkpOlxyXG4gICAgICAgICAgICBmaWVsZHMgPSAoZmllbGRzLClcclxuICAgICAgICBzZWxmLmFkZF9maWVsZHMoKmZpZWxkcylcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBpc19tdWx0aXBhcnQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5faXNfbXVsdGlwYXJ0XHJcblxyXG4gICAgZGVmIGFkZF9maWVsZChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG5hbWU6IHN0cixcclxuICAgICAgICB2YWx1ZTogQW55LFxyXG4gICAgICAgICosXHJcbiAgICAgICAgY29udGVudF90eXBlOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBmaWxlbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgY29udGVudF90cmFuc2Zlcl9lbmNvZGluZzogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcblxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIGlvLklPQmFzZSk6XHJcbiAgICAgICAgICAgIHNlbGYuX2lzX211bHRpcGFydCA9IFRydWVcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UodmFsdWUsIChieXRlcywgYnl0ZWFycmF5LCBtZW1vcnl2aWV3KSk6XHJcbiAgICAgICAgICAgIGlmIGZpbGVuYW1lIGlzIE5vbmUgYW5kIGNvbnRlbnRfdHJhbnNmZXJfZW5jb2RpbmcgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gbmFtZVxyXG5cclxuICAgICAgICB0eXBlX29wdGlvbnMgPSBNdWx0aURpY3QoeyJuYW1lIjogbmFtZX0pICAjIHR5cGU6IE11bHRpRGljdFtzdHJdXHJcbiAgICAgICAgaWYgZmlsZW5hbWUgaXMgbm90IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKGZpbGVuYW1lLCBzdHIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiZmlsZW5hbWUgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBzdHIuICIgIkdvdDogJXMiICUgZmlsZW5hbWVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGlmIGZpbGVuYW1lIGlzIE5vbmUgYW5kIGlzaW5zdGFuY2UodmFsdWUsIGlvLklPQmFzZSk6XHJcbiAgICAgICAgICAgIGZpbGVuYW1lID0gZ3Vlc3NfZmlsZW5hbWUodmFsdWUsIG5hbWUpXHJcbiAgICAgICAgaWYgZmlsZW5hbWUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHR5cGVfb3B0aW9uc1siZmlsZW5hbWUiXSA9IGZpbGVuYW1lXHJcbiAgICAgICAgICAgIHNlbGYuX2lzX211bHRpcGFydCA9IFRydWVcclxuXHJcbiAgICAgICAgaGVhZGVycyA9IHt9XHJcbiAgICAgICAgaWYgY29udGVudF90eXBlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShjb250ZW50X3R5cGUsIHN0cik6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgImNvbnRlbnRfdHlwZSBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIHN0ci4gIiAiR290OiAlcyIgJSBjb250ZW50X3R5cGVcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgaGVhZGVyc1toZHJzLkNPTlRFTlRfVFlQRV0gPSBjb250ZW50X3R5cGVcclxuICAgICAgICAgICAgc2VsZi5faXNfbXVsdGlwYXJ0ID0gVHJ1ZVxyXG4gICAgICAgIGlmIGNvbnRlbnRfdHJhbnNmZXJfZW5jb2RpbmcgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGNvbnRlbnRfdHJhbnNmZXJfZW5jb2RpbmcsIHN0cik6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgImNvbnRlbnRfdHJhbnNmZXJfZW5jb2RpbmcgbXVzdCBiZSBhbiBpbnN0YW5jZSJcclxuICAgICAgICAgICAgICAgICAgICAiIG9mIHN0ci4gR290OiAlcyIgJSBjb250ZW50X3RyYW5zZmVyX2VuY29kaW5nXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGhlYWRlcnNbaGRycy5DT05URU5UX1RSQU5TRkVSX0VOQ09ESU5HXSA9IGNvbnRlbnRfdHJhbnNmZXJfZW5jb2RpbmdcclxuICAgICAgICAgICAgc2VsZi5faXNfbXVsdGlwYXJ0ID0gVHJ1ZVxyXG5cclxuICAgICAgICBzZWxmLl9maWVsZHMuYXBwZW5kKCh0eXBlX29wdGlvbnMsIGhlYWRlcnMsIHZhbHVlKSlcclxuXHJcbiAgICBkZWYgYWRkX2ZpZWxkcyhzZWxmLCAqZmllbGRzOiBBbnkpIC0+IE5vbmU6XHJcbiAgICAgICAgdG9fYWRkID0gbGlzdChmaWVsZHMpXHJcblxyXG4gICAgICAgIHdoaWxlIHRvX2FkZDpcclxuICAgICAgICAgICAgcmVjID0gdG9fYWRkLnBvcCgwKVxyXG5cclxuICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShyZWMsIGlvLklPQmFzZSk6XHJcbiAgICAgICAgICAgICAgICBrID0gZ3Vlc3NfZmlsZW5hbWUocmVjLCAidW5rbm93biIpXHJcbiAgICAgICAgICAgICAgICBzZWxmLmFkZF9maWVsZChrLCByZWMpICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZV1cclxuXHJcbiAgICAgICAgICAgIGVsaWYgaXNpbnN0YW5jZShyZWMsIChNdWx0aURpY3RQcm94eSwgTXVsdGlEaWN0KSk6XHJcbiAgICAgICAgICAgICAgICB0b19hZGQuZXh0ZW5kKHJlYy5pdGVtcygpKVxyXG5cclxuICAgICAgICAgICAgZWxpZiBpc2luc3RhbmNlKHJlYywgKGxpc3QsIHR1cGxlKSkgYW5kIGxlbihyZWMpID09IDI6XHJcbiAgICAgICAgICAgICAgICBrLCBmcCA9IHJlY1xyXG4gICAgICAgICAgICAgICAgc2VsZi5hZGRfZmllbGQoaywgZnApICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZV1cclxuXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIk9ubHkgaW8uSU9CYXNlLCBtdWx0aWRpY3QgYW5kIChuYW1lLCBmaWxlKSAiXHJcbiAgICAgICAgICAgICAgICAgICAgInBhaXJzIGFsbG93ZWQsIHVzZSAuYWRkX2ZpZWxkKCkgZm9yIHBhc3NpbmcgIlxyXG4gICAgICAgICAgICAgICAgICAgICJtb3JlIGNvbXBsZXggcGFyYW1ldGVycywgZ290IHshcn0iLmZvcm1hdChyZWMpXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIF9nZW5fZm9ybV91cmxlbmNvZGVkKHNlbGYpIC0+IHBheWxvYWQuQnl0ZXNQYXlsb2FkOlxyXG4gICAgICAgICMgZm9ybSBkYXRhICh4LXd3dy1mb3JtLXVybGVuY29kZWQpXHJcbiAgICAgICAgZGF0YSA9IFtdXHJcbiAgICAgICAgZm9yIHR5cGVfb3B0aW9ucywgXywgdmFsdWUgaW4gc2VsZi5fZmllbGRzOlxyXG4gICAgICAgICAgICBkYXRhLmFwcGVuZCgodHlwZV9vcHRpb25zWyJuYW1lIl0sIHZhbHVlKSlcclxuXHJcbiAgICAgICAgY2hhcnNldCA9IHNlbGYuX2NoYXJzZXQgaWYgc2VsZi5fY2hhcnNldCBpcyBub3QgTm9uZSBlbHNlICJ1dGYtOCJcclxuXHJcbiAgICAgICAgaWYgY2hhcnNldCA9PSAidXRmLTgiOlxyXG4gICAgICAgICAgICBjb250ZW50X3R5cGUgPSAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIlxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGNvbnRlbnRfdHlwZSA9ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7ICIgImNoYXJzZXQ9JXMiICUgY2hhcnNldFxyXG5cclxuICAgICAgICByZXR1cm4gcGF5bG9hZC5CeXRlc1BheWxvYWQoXHJcbiAgICAgICAgICAgIHVybGVuY29kZShkYXRhLCBkb3NlcT1UcnVlLCBlbmNvZGluZz1jaGFyc2V0KS5lbmNvZGUoKSxcclxuICAgICAgICAgICAgY29udGVudF90eXBlPWNvbnRlbnRfdHlwZSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9nZW5fZm9ybV9kYXRhKHNlbGYpIC0+IG11bHRpcGFydC5NdWx0aXBhcnRXcml0ZXI6XHJcbiAgICAgICAgIiIiRW5jb2RlIGEgbGlzdCBvZiBmaWVsZHMgdXNpbmcgdGhlIG11bHRpcGFydC9mb3JtLWRhdGEgTUlNRSBmb3JtYXQiIiJcclxuICAgICAgICBpZiBzZWxmLl9pc19wcm9jZXNzZWQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiRm9ybSBkYXRhIGhhcyBiZWVuIHByb2Nlc3NlZCBhbHJlYWR5IilcclxuICAgICAgICBmb3IgZGlzcHBhcmFtcywgaGVhZGVycywgdmFsdWUgaW4gc2VsZi5fZmllbGRzOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBpZiBoZHJzLkNPTlRFTlRfVFlQRSBpbiBoZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnQgPSBwYXlsb2FkLmdldF9wYXlsb2FkKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudF90eXBlPWhlYWRlcnNbaGRycy5DT05URU5UX1RZUEVdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kaW5nPXNlbGYuX2NoYXJzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0ID0gcGF5bG9hZC5nZXRfcGF5bG9hZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsIGhlYWRlcnM9aGVhZGVycywgZW5jb2Rpbmc9c2VsZi5fY2hhcnNldFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIkNhbiBub3Qgc2VyaWFsaXplIHZhbHVlIHR5cGU6ICVyXFxuICJcclxuICAgICAgICAgICAgICAgICAgICAiaGVhZGVyczogJXJcXG4gdmFsdWU6ICVyIiAlICh0eXBlKHZhbHVlKSwgaGVhZGVycywgdmFsdWUpXHJcbiAgICAgICAgICAgICAgICApIGZyb20gZXhjXHJcblxyXG4gICAgICAgICAgICBpZiBkaXNwcGFyYW1zOlxyXG4gICAgICAgICAgICAgICAgcGFydC5zZXRfY29udGVudF9kaXNwb3NpdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAiZm9ybS1kYXRhIiwgcXVvdGVfZmllbGRzPXNlbGYuX3F1b3RlX2ZpZWxkcywgKipkaXNwcGFyYW1zXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAjIEZJWE1FIGNnaS5GaWVsZFN0b3JhZ2UgZG9lc25cJ3QgbGlrZXMgYm9keSBwYXJ0cyB3aXRoXHJcbiAgICAgICAgICAgICAgICAjIENvbnRlbnQtTGVuZ3RoIHdoaWNoIHdlcmUgc2VudCB2aWEgY2h1bmtlZCB0cmFuc2ZlciBlbmNvZGluZ1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0IHBhcnQuaGVhZGVycyBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICAgICAgcGFydC5oZWFkZXJzLnBvcGFsbChoZHJzLkNPTlRFTlRfTEVOR1RILCBOb25lKVxyXG5cclxuICAgICAgICAgICAgc2VsZi5fd3JpdGVyLmFwcGVuZF9wYXlsb2FkKHBhcnQpXHJcblxyXG4gICAgICAgIHNlbGYuX2lzX3Byb2Nlc3NlZCA9IFRydWVcclxuICAgICAgICByZXR1cm4gc2VsZi5fd3JpdGVyXHJcblxyXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYpIC0+IFBheWxvYWQ6XHJcbiAgICAgICAgaWYgc2VsZi5faXNfbXVsdGlwYXJ0OlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZ2VuX2Zvcm1fZGF0YSgpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2dlbl9mb3JtX3VybGVuY29kZWQoKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC9jb25uZWN0b3IucHknLCBiJ2ltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBmdW5jdG9vbHNcclxuaW1wb3J0IHJhbmRvbVxyXG5pbXBvcnQgc3lzXHJcbmltcG9ydCB0cmFjZWJhY2tcclxuaW1wb3J0IHdhcm5pbmdzXHJcbmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IGRlZmF1bHRkaWN0LCBkZXF1ZVxyXG5mcm9tIGNvbnRleHRsaWIgaW1wb3J0IHN1cHByZXNzXHJcbmZyb20gaHR0cC5jb29raWVzIGltcG9ydCBTaW1wbGVDb29raWVcclxuZnJvbSBpdGVydG9vbHMgaW1wb3J0IGN5Y2xlLCBpc2xpY2VcclxuZnJvbSB0aW1lIGltcG9ydCBtb25vdG9uaWNcclxuZnJvbSB0eXBlcyBpbXBvcnQgVHJhY2ViYWNrVHlwZVxyXG5mcm9tIHR5cGluZyBpbXBvcnQgKFxyXG4gICAgVFlQRV9DSEVDS0lORyxcclxuICAgIEFueSxcclxuICAgIEF3YWl0YWJsZSxcclxuICAgIENhbGxhYmxlLFxyXG4gICAgRGVmYXVsdERpY3QsXHJcbiAgICBEaWN0LFxyXG4gICAgSXRlcmF0b3IsXHJcbiAgICBMaXN0LFxyXG4gICAgT3B0aW9uYWwsXHJcbiAgICBTZXQsXHJcbiAgICBUdXBsZSxcclxuICAgIFR5cGUsXHJcbiAgICBVbmlvbixcclxuICAgIGNhc3QsXHJcbilcclxuXHJcbmltcG9ydCBhdHRyXHJcblxyXG5mcm9tIC4gaW1wb3J0IGhkcnMsIGhlbHBlcnNcclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdFJlc29sdmVyXHJcbmZyb20gLmNsaWVudF9leGNlcHRpb25zIGltcG9ydCAoXHJcbiAgICBDbGllbnRDb25uZWN0aW9uRXJyb3IsXHJcbiAgICBDbGllbnRDb25uZWN0b3JDZXJ0aWZpY2F0ZUVycm9yLFxyXG4gICAgQ2xpZW50Q29ubmVjdG9yRXJyb3IsXHJcbiAgICBDbGllbnRDb25uZWN0b3JTU0xFcnJvcixcclxuICAgIENsaWVudEh0dHBQcm94eUVycm9yLFxyXG4gICAgQ2xpZW50UHJveHlDb25uZWN0aW9uRXJyb3IsXHJcbiAgICBTZXJ2ZXJGaW5nZXJwcmludE1pc21hdGNoLFxyXG4gICAgVW5peENsaWVudENvbm5lY3RvckVycm9yLFxyXG4gICAgY2VydF9lcnJvcnMsXHJcbiAgICBzc2xfZXJyb3JzLFxyXG4pXHJcbmZyb20gLmNsaWVudF9wcm90byBpbXBvcnQgUmVzcG9uc2VIYW5kbGVyXHJcbmZyb20gLmNsaWVudF9yZXFyZXAgaW1wb3J0IENsaWVudFJlcXVlc3QsIEZpbmdlcnByaW50LCBfbWVyZ2Vfc3NsX3BhcmFtc1xyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCAoXHJcbiAgICBQWV8zNixcclxuICAgIGNlaWxfdGltZW91dCxcclxuICAgIGdldF9ydW5uaW5nX2xvb3AsXHJcbiAgICBpc19pcF9hZGRyZXNzLFxyXG4gICAgbm9vcCxcclxuICAgIHNlbnRpbmVsLFxyXG4pXHJcbmZyb20gLmh0dHAgaW1wb3J0IFJFU1BPTlNFU1xyXG5mcm9tIC5sb2NrcyBpbXBvcnQgRXZlbnRSZXN1bHRPckVycm9yXHJcbmZyb20gLnJlc29sdmVyIGltcG9ydCBEZWZhdWx0UmVzb2x2ZXJcclxuXHJcbnRyeTpcclxuICAgIGltcG9ydCBzc2xcclxuXHJcbiAgICBTU0xDb250ZXh0ID0gc3NsLlNTTENvbnRleHRcclxuZXhjZXB0IEltcG9ydEVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBzc2wgPSBOb25lICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG4gICAgU1NMQ29udGV4dCA9IG9iamVjdCAgIyB0eXBlOiBpZ25vcmVbbWlzYyxhc3NpZ25tZW50XVxyXG5cclxuXHJcbl9fYWxsX18gPSAoIkJhc2VDb25uZWN0b3IiLCAiVENQQ29ubmVjdG9yIiwgIlVuaXhDb25uZWN0b3IiLCAiTmFtZWRQaXBlQ29ubmVjdG9yIilcclxuXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIC5jbGllbnQgaW1wb3J0IENsaWVudFRpbWVvdXRcclxuICAgIGZyb20gLmNsaWVudF9yZXFyZXAgaW1wb3J0IENvbm5lY3Rpb25LZXlcclxuICAgIGZyb20gLnRyYWNpbmcgaW1wb3J0IFRyYWNlXHJcblxyXG5cclxuY2xhc3MgX0RlcHJlY2F0aW9uV2FpdGVyOlxyXG4gICAgX19zbG90c19fID0gKCJfYXdhaXRhYmxlIiwgIl9hd2FpdGVkIilcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYXdhaXRhYmxlOiBBd2FpdGFibGVbQW55XSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9hd2FpdGFibGUgPSBhd2FpdGFibGVcclxuICAgICAgICBzZWxmLl9hd2FpdGVkID0gRmFsc2VcclxuXHJcbiAgICBkZWYgX19hd2FpdF9fKHNlbGYpIC0+IEFueTpcclxuICAgICAgICBzZWxmLl9hd2FpdGVkID0gVHJ1ZVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hd2FpdGFibGUuX19hd2FpdF9fKClcclxuXHJcbiAgICBkZWYgX19kZWxfXyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9hd2FpdGVkOlxyXG4gICAgICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAgICAgIkNvbm5lY3Rvci5jbG9zZSgpIGlzIGEgY29yb3V0aW5lLCAiXHJcbiAgICAgICAgICAgICAgICAicGxlYXNlIHVzZSBhd2FpdCBjb25uZWN0b3IuY2xvc2UoKSIsXHJcbiAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBDb25uZWN0aW9uOlxyXG5cclxuICAgIF9zb3VyY2VfdHJhY2ViYWNrID0gTm9uZVxyXG4gICAgX3RyYW5zcG9ydCA9IE5vbmVcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBjb25uZWN0b3I6ICJCYXNlQ29ubmVjdG9yIixcclxuICAgICAgICBrZXk6ICJDb25uZWN0aW9uS2V5IixcclxuICAgICAgICBwcm90b2NvbDogUmVzcG9uc2VIYW5kbGVyLFxyXG4gICAgICAgIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3AsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fa2V5ID0ga2V5XHJcbiAgICAgICAgc2VsZi5fY29ubmVjdG9yID0gY29ubmVjdG9yXHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3BcclxuICAgICAgICBzZWxmLl9wcm90b2NvbCA9IHByb3RvY29sICAjIHR5cGU6IE9wdGlvbmFsW1Jlc3BvbnNlSGFuZGxlcl1cclxuICAgICAgICBzZWxmLl9jYWxsYmFja3MgPSBbXSAgIyB0eXBlOiBMaXN0W0NhbGxhYmxlW1tdLCBOb25lXV1cclxuXHJcbiAgICAgICAgaWYgbG9vcC5nZXRfZGVidWcoKTpcclxuICAgICAgICAgICAgc2VsZi5fc291cmNlX3RyYWNlYmFjayA9IHRyYWNlYmFjay5leHRyYWN0X3N0YWNrKHN5cy5fZ2V0ZnJhbWUoMSkpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gZiJDb25uZWN0aW9uPHtzZWxmLl9rZXl9PiJcclxuXHJcbiAgICBkZWYgX19kZWxfXyhzZWxmLCBfd2FybmluZ3M6IEFueSA9IHdhcm5pbmdzKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX3Byb3RvY29sIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBpZiBQWV8zNjpcclxuICAgICAgICAgICAgICAgIGt3YXJncyA9IHsic291cmNlIjogc2VsZn1cclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGt3YXJncyA9IHt9XHJcbiAgICAgICAgICAgIF93YXJuaW5ncy53YXJuKGYiVW5jbG9zZWQgY29ubmVjdGlvbiB7c2VsZiFyfSIsIFJlc291cmNlV2FybmluZywgKiprd2FyZ3MpXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2xvb3AuaXNfY2xvc2VkKCk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3Rvci5fcmVsZWFzZShzZWxmLl9rZXksIHNlbGYuX3Byb3RvY29sLCBzaG91bGRfY2xvc2U9VHJ1ZSlcclxuXHJcbiAgICAgICAgICAgIGNvbnRleHQgPSB7ImNsaWVudF9jb25uZWN0aW9uIjogc2VsZiwgIm1lc3NhZ2UiOiAiVW5jbG9zZWQgY29ubmVjdGlvbiJ9XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3NvdXJjZV90cmFjZWJhY2sgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0WyJzb3VyY2VfdHJhY2ViYWNrIl0gPSBzZWxmLl9zb3VyY2VfdHJhY2ViYWNrXHJcbiAgICAgICAgICAgIHNlbGYuX2xvb3AuY2FsbF9leGNlcHRpb25faGFuZGxlcihjb250ZXh0KVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGxvb3Aoc2VsZikgLT4gYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcDpcclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAiY29ubmVjdG9yLmxvb3AgcHJvcGVydHkgaXMgZGVwcmVjYXRlZCIsIERlcHJlY2F0aW9uV2FybmluZywgc3RhY2tsZXZlbD0yXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9sb29wXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdHJhbnNwb3J0KHNlbGYpIC0+IE9wdGlvbmFsW2FzeW5jaW8uVHJhbnNwb3J0XTpcclxuICAgICAgICBpZiBzZWxmLl9wcm90b2NvbCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wcm90b2NvbC50cmFuc3BvcnRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwcm90b2NvbChzZWxmKSAtPiBPcHRpb25hbFtSZXNwb25zZUhhbmRsZXJdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wcm90b2NvbFxyXG5cclxuICAgIGRlZiBhZGRfY2FsbGJhY2soc2VsZiwgY2FsbGJhY2s6IENhbGxhYmxlW1tdLCBOb25lXSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBjYWxsYmFjayBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fY2FsbGJhY2tzLmFwcGVuZChjYWxsYmFjaylcclxuXHJcbiAgICBkZWYgX25vdGlmeV9yZWxlYXNlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgY2FsbGJhY2tzLCBzZWxmLl9jYWxsYmFja3MgPSBzZWxmLl9jYWxsYmFja3NbOl0sIFtdXHJcblxyXG4gICAgICAgIGZvciBjYiBpbiBjYWxsYmFja3M6XHJcbiAgICAgICAgICAgIHdpdGggc3VwcHJlc3MoRXhjZXB0aW9uKTpcclxuICAgICAgICAgICAgICAgIGNiKClcclxuXHJcbiAgICBkZWYgY2xvc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9ub3RpZnlfcmVsZWFzZSgpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX3Byb3RvY29sIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9jb25uZWN0b3IuX3JlbGVhc2Uoc2VsZi5fa2V5LCBzZWxmLl9wcm90b2NvbCwgc2hvdWxkX2Nsb3NlPVRydWUpXHJcbiAgICAgICAgICAgIHNlbGYuX3Byb3RvY29sID0gTm9uZVxyXG5cclxuICAgIGRlZiByZWxlYXNlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fbm90aWZ5X3JlbGVhc2UoKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9wcm90b2NvbCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fY29ubmVjdG9yLl9yZWxlYXNlKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fa2V5LCBzZWxmLl9wcm90b2NvbCwgc2hvdWxkX2Nsb3NlPXNlbGYuX3Byb3RvY29sLnNob3VsZF9jbG9zZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHNlbGYuX3Byb3RvY29sID0gTm9uZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNsb3NlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wcm90b2NvbCBpcyBOb25lIG9yIG5vdCBzZWxmLl9wcm90b2NvbC5pc19jb25uZWN0ZWQoKVxyXG5cclxuXHJcbmNsYXNzIF9UcmFuc3BvcnRQbGFjZWhvbGRlcjpcclxuICAgICIiInBsYWNlaG9sZGVyIGZvciBCYXNlQ29ubmVjdG9yLmNvbm5lY3QgZnVuY3Rpb24iIiJcclxuXHJcbiAgICBkZWYgY2xvc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBwYXNzXHJcblxyXG5cclxuY2xhc3MgQmFzZUNvbm5lY3RvcjpcclxuICAgICIiIkJhc2UgY29ubmVjdG9yIGNsYXNzLlxyXG5cclxuICAgIGtlZXBhbGl2ZV90aW1lb3V0IC0gKG9wdGlvbmFsKSBLZWVwLWFsaXZlIHRpbWVvdXQuXHJcbiAgICBmb3JjZV9jbG9zZSAtIFNldCB0byBUcnVlIHRvIGZvcmNlIGNsb3NlIGFuZCBkbyByZWNvbm5lY3RcclxuICAgICAgICBhZnRlciBlYWNoIHJlcXVlc3QgKGFuZCBiZXR3ZWVuIHJlZGlyZWN0cykuXHJcbiAgICBsaW1pdCAtIFRoZSB0b3RhbCBudW1iZXIgb2Ygc2ltdWx0YW5lb3VzIGNvbm5lY3Rpb25zLlxyXG4gICAgbGltaXRfcGVyX2hvc3QgLSBOdW1iZXIgb2Ygc2ltdWx0YW5lb3VzIGNvbm5lY3Rpb25zIHRvIG9uZSBob3N0LlxyXG4gICAgZW5hYmxlX2NsZWFudXBfY2xvc2VkIC0gRW5hYmxlcyBjbGVhbi11cCBjbG9zZWQgc3NsIHRyYW5zcG9ydHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXNhYmxlZCBieSBkZWZhdWx0LlxyXG4gICAgbG9vcCAtIE9wdGlvbmFsIGV2ZW50IGxvb3AuXHJcbiAgICAiIiJcclxuXHJcbiAgICBfY2xvc2VkID0gVHJ1ZSAgIyBwcmV2ZW50IEF0dHJpYnV0ZUVycm9yIGluIF9fZGVsX18gaWYgY3RvciB3YXMgZmFpbGVkXHJcbiAgICBfc291cmNlX3RyYWNlYmFjayA9IE5vbmVcclxuXHJcbiAgICAjIGFib3J0IHRyYW5zcG9ydCBhZnRlciAyIHNlY29uZHMgKGNsZWFudXAgYnJva2VuIGNvbm5lY3Rpb25zKVxyXG4gICAgX2NsZWFudXBfY2xvc2VkX3BlcmlvZCA9IDIuMFxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgICosXHJcbiAgICAgICAga2VlcGFsaXZlX3RpbWVvdXQ6IFVuaW9uW29iamVjdCwgTm9uZSwgZmxvYXRdID0gc2VudGluZWwsXHJcbiAgICAgICAgZm9yY2VfY2xvc2U6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBsaW1pdDogaW50ID0gMTAwLFxyXG4gICAgICAgIGxpbWl0X3Blcl9ob3N0OiBpbnQgPSAwLFxyXG4gICAgICAgIGVuYWJsZV9jbGVhbnVwX2Nsb3NlZDogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuXHJcbiAgICAgICAgaWYgZm9yY2VfY2xvc2U6XHJcbiAgICAgICAgICAgIGlmIGtlZXBhbGl2ZV90aW1lb3V0IGlzIG5vdCBOb25lIGFuZCBrZWVwYWxpdmVfdGltZW91dCBpcyBub3Qgc2VudGluZWw6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJrZWVwYWxpdmVfdGltZW91dCBjYW5ub3QgIiAiYmUgc2V0IGlmIGZvcmNlX2Nsb3NlIGlzIFRydWUiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaWYga2VlcGFsaXZlX3RpbWVvdXQgaXMgc2VudGluZWw6XHJcbiAgICAgICAgICAgICAgICBrZWVwYWxpdmVfdGltZW91dCA9IDE1LjBcclxuXHJcbiAgICAgICAgbG9vcCA9IGdldF9ydW5uaW5nX2xvb3AobG9vcClcclxuXHJcbiAgICAgICAgc2VsZi5fY2xvc2VkID0gRmFsc2VcclxuICAgICAgICBpZiBsb29wLmdldF9kZWJ1ZygpOlxyXG4gICAgICAgICAgICBzZWxmLl9zb3VyY2VfdHJhY2ViYWNrID0gdHJhY2ViYWNrLmV4dHJhY3Rfc3RhY2soc3lzLl9nZXRmcmFtZSgxKSlcclxuXHJcbiAgICAgICAgc2VsZi5fY29ubnMgPSAoXHJcbiAgICAgICAgICAgIHt9XHJcbiAgICAgICAgKSAgIyB0eXBlOiBEaWN0W0Nvbm5lY3Rpb25LZXksIExpc3RbVHVwbGVbUmVzcG9uc2VIYW5kbGVyLCBmbG9hdF1dXVxyXG4gICAgICAgIHNlbGYuX2xpbWl0ID0gbGltaXRcclxuICAgICAgICBzZWxmLl9saW1pdF9wZXJfaG9zdCA9IGxpbWl0X3Blcl9ob3N0XHJcbiAgICAgICAgc2VsZi5fYWNxdWlyZWQgPSBzZXQoKSAgIyB0eXBlOiBTZXRbUmVzcG9uc2VIYW5kbGVyXVxyXG4gICAgICAgIHNlbGYuX2FjcXVpcmVkX3Blcl9ob3N0ID0gZGVmYXVsdGRpY3QoXHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICkgICMgdHlwZTogRGVmYXVsdERpY3RbQ29ubmVjdGlvbktleSwgU2V0W1Jlc3BvbnNlSGFuZGxlcl1dXHJcbiAgICAgICAgc2VsZi5fa2VlcGFsaXZlX3RpbWVvdXQgPSBjYXN0KGZsb2F0LCBrZWVwYWxpdmVfdGltZW91dClcclxuICAgICAgICBzZWxmLl9mb3JjZV9jbG9zZSA9IGZvcmNlX2Nsb3NlXHJcblxyXG4gICAgICAgICMge2hvc3Rfa2V5OiBGSUZPIGxpc3Qgb2Ygd2FpdGVyc31cclxuICAgICAgICBzZWxmLl93YWl0ZXJzID0gZGVmYXVsdGRpY3QoZGVxdWUpICAjIHR5cGU6IGlnbm9yZVt2YXItYW5ub3RhdGVkXVxyXG5cclxuICAgICAgICBzZWxmLl9sb29wID0gbG9vcFxyXG4gICAgICAgIHNlbGYuX2ZhY3RvcnkgPSBmdW5jdG9vbHMucGFydGlhbChSZXNwb25zZUhhbmRsZXIsIGxvb3A9bG9vcClcclxuXHJcbiAgICAgICAgc2VsZi5jb29raWVzID0gU2ltcGxlQ29va2llKCkgICMgdHlwZTogU2ltcGxlQ29va2llW3N0cl1cclxuXHJcbiAgICAgICAgIyBzdGFydCBrZWVwLWFsaXZlIGNvbm5lY3Rpb24gY2xlYW51cCB0YXNrXHJcbiAgICAgICAgc2VsZi5fY2xlYW51cF9oYW5kbGU6IE9wdGlvbmFsW2FzeW5jaW8uVGltZXJIYW5kbGVdID0gTm9uZVxyXG5cclxuICAgICAgICAjIHN0YXJ0IGNsZWFudXAgY2xvc2VkIHRyYW5zcG9ydHMgdGFza1xyXG4gICAgICAgIHNlbGYuX2NsZWFudXBfY2xvc2VkX2hhbmRsZTogT3B0aW9uYWxbYXN5bmNpby5UaW1lckhhbmRsZV0gPSBOb25lXHJcbiAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfZGlzYWJsZWQgPSBub3QgZW5hYmxlX2NsZWFudXBfY2xvc2VkXHJcbiAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfdHJhbnNwb3J0cyA9IFtdICAjIHR5cGU6IExpc3RbT3B0aW9uYWxbYXN5bmNpby5UcmFuc3BvcnRdXVxyXG4gICAgICAgIHNlbGYuX2NsZWFudXBfY2xvc2VkKClcclxuXHJcbiAgICBkZWYgX19kZWxfXyhzZWxmLCBfd2FybmluZ3M6IEFueSA9IHdhcm5pbmdzKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgaWYgbm90IHNlbGYuX2Nvbm5zOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgY29ubnMgPSBbcmVwcihjKSBmb3IgYyBpbiBzZWxmLl9jb25ucy52YWx1ZXMoKV1cclxuXHJcbiAgICAgICAgc2VsZi5fY2xvc2UoKVxyXG5cclxuICAgICAgICBpZiBQWV8zNjpcclxuICAgICAgICAgICAga3dhcmdzID0geyJzb3VyY2UiOiBzZWxmfVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGt3YXJncyA9IHt9XHJcbiAgICAgICAgX3dhcm5pbmdzLndhcm4oZiJVbmNsb3NlZCBjb25uZWN0b3Ige3NlbGYhcn0iLCBSZXNvdXJjZVdhcm5pbmcsICoqa3dhcmdzKVxyXG4gICAgICAgIGNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICJjb25uZWN0b3IiOiBzZWxmLFxyXG4gICAgICAgICAgICAiY29ubmVjdGlvbnMiOiBjb25ucyxcclxuICAgICAgICAgICAgIm1lc3NhZ2UiOiAiVW5jbG9zZWQgY29ubmVjdG9yIixcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgc2VsZi5fc291cmNlX3RyYWNlYmFjayBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgY29udGV4dFsic291cmNlX3RyYWNlYmFjayJdID0gc2VsZi5fc291cmNlX3RyYWNlYmFja1xyXG4gICAgICAgIHNlbGYuX2xvb3AuY2FsbF9leGNlcHRpb25faGFuZGxlcihjb250ZXh0KVxyXG5cclxuICAgIGRlZiBfX2VudGVyX18oc2VsZikgLT4gIkJhc2VDb25uZWN0b3IiOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgIFwnIndpdG4gQ29ubmVjdG9yKCk6IiBpcyBkZXByZWNhdGVkLCBcJ1xyXG4gICAgICAgICAgICBcJ3VzZSAiYXN5bmMgd2l0aCBDb25uZWN0b3IoKToiIGluc3RlYWRcJyxcclxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gc2VsZlxyXG5cclxuICAgIGRlZiBfX2V4aXRfXyhzZWxmLCAqZXhjOiBBbnkpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jbG9zZSgpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYWVudGVyX18oc2VsZikgLT4gIkJhc2VDb25uZWN0b3IiOlxyXG4gICAgICAgIHJldHVybiBzZWxmXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYWV4aXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGV4Y190eXBlOiBPcHRpb25hbFtUeXBlW0Jhc2VFeGNlcHRpb25dXSA9IE5vbmUsXHJcbiAgICAgICAgZXhjX3ZhbHVlOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXSA9IE5vbmUsXHJcbiAgICAgICAgZXhjX3RyYWNlYmFjazogT3B0aW9uYWxbVHJhY2ViYWNrVHlwZV0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuY2xvc2UoKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGZvcmNlX2Nsb3NlKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiVWx0aW1hdGVseSBjbG9zZSBjb25uZWN0aW9uIG9uIHJlbGVhc2luZyBpZiBUcnVlLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mb3JjZV9jbG9zZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGxpbWl0KHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJUaGUgdG90YWwgbnVtYmVyIGZvciBzaW11bHRhbmVvdXMgY29ubmVjdGlvbnMuXHJcblxyXG4gICAgICAgIElmIGxpbWl0IGlzIDAgdGhlIGNvbm5lY3RvciBoYXMgbm8gbGltaXQuXHJcbiAgICAgICAgVGhlIGRlZmF1bHQgbGltaXQgc2l6ZSBpcyAxMDAuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xpbWl0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbGltaXRfcGVyX2hvc3Qoc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlRoZSBsaW1pdCBmb3Igc2ltdWx0YW5lb3VzIGNvbm5lY3Rpb25zIHRvIHRoZSBzYW1lIGVuZHBvaW50LlxyXG5cclxuICAgICAgICBFbmRwb2ludHMgYXJlIHRoZSBzYW1lIGlmIHRoZXkgYXJlIGhhdmUgZXF1YWxcclxuICAgICAgICAoaG9zdCwgcG9ydCwgaXNfc3NsKSB0cmlwbGUuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xpbWl0X3Blcl9ob3N0XHJcblxyXG4gICAgZGVmIF9jbGVhbnVwKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQ2xlYW51cCB1bnVzZWQgdHJhbnNwb3J0cy4iIiJcclxuICAgICAgICBpZiBzZWxmLl9jbGVhbnVwX2hhbmRsZTpcclxuICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9oYW5kbGUuY2FuY2VsKClcclxuICAgICAgICAgICAgIyBfY2xlYW51cF9oYW5kbGUgc2hvdWxkIGJlIHVuc2V0LCBvdGhlcndpc2UgX3JlbGVhc2UoKSB3aWxsIG5vdFxyXG4gICAgICAgICAgICAjIHJlY3JlYXRlIGl0IGV2ZXIhXHJcbiAgICAgICAgICAgIHNlbGYuX2NsZWFudXBfaGFuZGxlID0gTm9uZVxyXG5cclxuICAgICAgICBub3cgPSBzZWxmLl9sb29wLnRpbWUoKVxyXG4gICAgICAgIHRpbWVvdXQgPSBzZWxmLl9rZWVwYWxpdmVfdGltZW91dFxyXG5cclxuICAgICAgICBpZiBzZWxmLl9jb25uczpcclxuICAgICAgICAgICAgY29ubmVjdGlvbnMgPSB7fVxyXG4gICAgICAgICAgICBkZWFkbGluZSA9IG5vdyAtIHRpbWVvdXRcclxuICAgICAgICAgICAgZm9yIGtleSwgY29ubnMgaW4gc2VsZi5fY29ubnMuaXRlbXMoKTpcclxuICAgICAgICAgICAgICAgIGFsaXZlID0gW11cclxuICAgICAgICAgICAgICAgIGZvciBwcm90bywgdXNlX3RpbWUgaW4gY29ubnM6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgcHJvdG8uaXNfY29ubmVjdGVkKCk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHVzZV90aW1lIC0gZGVhZGxpbmUgPCAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0ID0gcHJvdG8udHJhbnNwb3J0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm90by5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBrZXkuaXNfc3NsIGFuZCBub3Qgc2VsZi5fY2xlYW51cF9jbG9zZWRfZGlzYWJsZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfdHJhbnNwb3J0cy5hcHBlbmQodHJhbnNwb3J0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpdmUuYXBwZW5kKChwcm90bywgdXNlX3RpbWUpKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydCA9IHByb3RvLnRyYW5zcG9ydFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm90by5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGtleS5pc19zc2wgYW5kIG5vdCBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9kaXNhYmxlZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFudXBfY2xvc2VkX3RyYW5zcG9ydHMuYXBwZW5kKHRyYW5zcG9ydClcclxuXHJcbiAgICAgICAgICAgICAgICBpZiBhbGl2ZTpcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uc1trZXldID0gYWxpdmVcclxuXHJcbiAgICAgICAgICAgIHNlbGYuX2Nvbm5zID0gY29ubmVjdGlvbnNcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fY29ubnM6XHJcbiAgICAgICAgICAgIHNlbGYuX2NsZWFudXBfaGFuZGxlID0gaGVscGVycy53ZWFrcmVmX2hhbmRsZShcclxuICAgICAgICAgICAgICAgIHNlbGYsICJfY2xlYW51cCIsIHRpbWVvdXQsIHNlbGYuX2xvb3BcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfZHJvcF9hY3F1aXJlZF9wZXJfaG9zdChcclxuICAgICAgICBzZWxmLCBrZXk6ICJDb25uZWN0aW9uS2V5IiwgdmFsOiBSZXNwb25zZUhhbmRsZXJcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBhY3F1aXJlZF9wZXJfaG9zdCA9IHNlbGYuX2FjcXVpcmVkX3Blcl9ob3N0XHJcbiAgICAgICAgaWYga2V5IG5vdCBpbiBhY3F1aXJlZF9wZXJfaG9zdDpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgY29ubnMgPSBhY3F1aXJlZF9wZXJfaG9zdFtrZXldXHJcbiAgICAgICAgY29ubnMucmVtb3ZlKHZhbClcclxuICAgICAgICBpZiBub3QgY29ubnM6XHJcbiAgICAgICAgICAgIGRlbCBzZWxmLl9hY3F1aXJlZF9wZXJfaG9zdFtrZXldXHJcblxyXG4gICAgZGVmIF9jbGVhbnVwX2Nsb3NlZChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkRvdWJsZSBjb25maXJtYXRpb24gZm9yIHRyYW5zcG9ydCBjbG9zZS5cclxuXHJcbiAgICAgICAgU29tZSBicm9rZW4gc3NsIHNlcnZlcnMgbWF5IGxlYXZlIHNvY2tldCBvcGVuIHdpdGhvdXQgcHJvcGVyIGNsb3NlLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHNlbGYuX2NsZWFudXBfY2xvc2VkX2hhbmRsZTpcclxuICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfaGFuZGxlLmNhbmNlbCgpXHJcblxyXG4gICAgICAgIGZvciB0cmFuc3BvcnQgaW4gc2VsZi5fY2xlYW51cF9jbG9zZWRfdHJhbnNwb3J0czpcclxuICAgICAgICAgICAgaWYgdHJhbnNwb3J0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0LmFib3J0KClcclxuXHJcbiAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfdHJhbnNwb3J0cyA9IFtdXHJcblxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9kaXNhYmxlZDpcclxuICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfaGFuZGxlID0gaGVscGVycy53ZWFrcmVmX2hhbmRsZShcclxuICAgICAgICAgICAgICAgIHNlbGYsICJfY2xlYW51cF9jbG9zZWQiLCBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9wZXJpb2QsIHNlbGYuX2xvb3BcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBjbG9zZShzZWxmKSAtPiBBd2FpdGFibGVbTm9uZV06XHJcbiAgICAgICAgIiIiQ2xvc2UgYWxsIG9wZW5lZCB0cmFuc3BvcnRzLiIiIlxyXG4gICAgICAgIHNlbGYuX2Nsb3NlKClcclxuICAgICAgICByZXR1cm4gX0RlcHJlY2F0aW9uV2FpdGVyKG5vb3AoKSlcclxuXHJcbiAgICBkZWYgX2Nsb3NlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgc2VsZi5fY2xvc2VkID0gVHJ1ZVxyXG5cclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX2xvb3AuaXNfY2xvc2VkKCk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgICAgICMgY2FuY2VsIGNsZWFudXAgdGFza1xyXG4gICAgICAgICAgICBpZiBzZWxmLl9jbGVhbnVwX2hhbmRsZTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFudXBfaGFuZGxlLmNhbmNlbCgpXHJcblxyXG4gICAgICAgICAgICAjIGNhbmNlbCBjbGVhbnVwIGNsb3NlIHRhc2tcclxuICAgICAgICAgICAgaWYgc2VsZi5fY2xlYW51cF9jbG9zZWRfaGFuZGxlOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfaGFuZGxlLmNhbmNlbCgpXHJcblxyXG4gICAgICAgICAgICBmb3IgZGF0YSBpbiBzZWxmLl9jb25ucy52YWx1ZXMoKTpcclxuICAgICAgICAgICAgICAgIGZvciBwcm90bywgdDAgaW4gZGF0YTpcclxuICAgICAgICAgICAgICAgICAgICBwcm90by5jbG9zZSgpXHJcblxyXG4gICAgICAgICAgICBmb3IgcHJvdG8gaW4gc2VsZi5fYWNxdWlyZWQ6XHJcbiAgICAgICAgICAgICAgICBwcm90by5jbG9zZSgpXHJcblxyXG4gICAgICAgICAgICBmb3IgdHJhbnNwb3J0IGluIHNlbGYuX2NsZWFudXBfY2xvc2VkX3RyYW5zcG9ydHM6XHJcbiAgICAgICAgICAgICAgICBpZiB0cmFuc3BvcnQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0LmFib3J0KClcclxuXHJcbiAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgc2VsZi5fY29ubnMuY2xlYXIoKVxyXG4gICAgICAgICAgICBzZWxmLl9hY3F1aXJlZC5jbGVhcigpXHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlcnMuY2xlYXIoKVxyXG4gICAgICAgICAgICBzZWxmLl9jbGVhbnVwX2hhbmRsZSA9IE5vbmVcclxuICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfdHJhbnNwb3J0cy5jbGVhcigpXHJcbiAgICAgICAgICAgIHNlbGYuX2NsZWFudXBfY2xvc2VkX2hhbmRsZSA9IE5vbmVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjbG9zZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICAiIiJJcyBjb25uZWN0b3IgY2xvc2VkLlxyXG5cclxuICAgICAgICBBIHJlYWRvbmx5IHByb3BlcnR5LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jbG9zZWRcclxuXHJcbiAgICBkZWYgX2F2YWlsYWJsZV9jb25uZWN0aW9ucyhzZWxmLCBrZXk6ICJDb25uZWN0aW9uS2V5IikgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybiBudW1iZXIgb2YgYXZhaWxhYmxlIGNvbm5lY3Rpb25zLlxyXG5cclxuICAgICAgICBUaGUgbGltaXQsIGxpbWl0X3Blcl9ob3N0IGFuZCB0aGUgY29ubmVjdGlvbiBrZXkgYXJlIHRha2VuIGludG8gYWNjb3VudC5cclxuXHJcbiAgICAgICAgSWYgaXQgcmV0dXJucyBsZXNzIHRoYW4gMSBtZWFucyB0aGF0IHRoZXJlIGFyZSBubyBjb25uZWN0aW9uc1xyXG4gICAgICAgIGF2YWlsYWJsZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBzZWxmLl9saW1pdDpcclxuICAgICAgICAgICAgIyB0b3RhbCBjYWxjIGF2YWlsYWJsZSBjb25uZWN0aW9uc1xyXG4gICAgICAgICAgICBhdmFpbGFibGUgPSBzZWxmLl9saW1pdCAtIGxlbihzZWxmLl9hY3F1aXJlZClcclxuXHJcbiAgICAgICAgICAgICMgY2hlY2sgbGltaXQgcGVyIGhvc3RcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGltaXRfcGVyX2hvc3RcclxuICAgICAgICAgICAgICAgIGFuZCBhdmFpbGFibGUgPiAwXHJcbiAgICAgICAgICAgICAgICBhbmQga2V5IGluIHNlbGYuX2FjcXVpcmVkX3Blcl9ob3N0XHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICBhY3F1aXJlZCA9IHNlbGYuX2FjcXVpcmVkX3Blcl9ob3N0LmdldChrZXkpXHJcbiAgICAgICAgICAgICAgICBhc3NlcnQgYWNxdWlyZWQgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZSA9IHNlbGYuX2xpbWl0X3Blcl9ob3N0IC0gbGVuKGFjcXVpcmVkKVxyXG5cclxuICAgICAgICBlbGlmIHNlbGYuX2xpbWl0X3Blcl9ob3N0IGFuZCBrZXkgaW4gc2VsZi5fYWNxdWlyZWRfcGVyX2hvc3Q6XHJcbiAgICAgICAgICAgICMgY2hlY2sgbGltaXQgcGVyIGhvc3RcclxuICAgICAgICAgICAgYWNxdWlyZWQgPSBzZWxmLl9hY3F1aXJlZF9wZXJfaG9zdC5nZXQoa2V5KVxyXG4gICAgICAgICAgICBhc3NlcnQgYWNxdWlyZWQgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgYXZhaWxhYmxlID0gc2VsZi5fbGltaXRfcGVyX2hvc3QgLSBsZW4oYWNxdWlyZWQpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYXZhaWxhYmxlID0gMVxyXG5cclxuICAgICAgICByZXR1cm4gYXZhaWxhYmxlXHJcblxyXG4gICAgYXN5bmMgZGVmIGNvbm5lY3QoXHJcbiAgICAgICAgc2VsZiwgcmVxOiAiQ2xpZW50UmVxdWVzdCIsIHRyYWNlczogTGlzdFsiVHJhY2UiXSwgdGltZW91dDogIkNsaWVudFRpbWVvdXQiXHJcbiAgICApIC0+IENvbm5lY3Rpb246XHJcbiAgICAgICAgIiIiR2V0IGZyb20gcG9vbCBvciBjcmVhdGUgbmV3IGNvbm5lY3Rpb24uIiIiXHJcbiAgICAgICAga2V5ID0gcmVxLmNvbm5lY3Rpb25fa2V5XHJcbiAgICAgICAgYXZhaWxhYmxlID0gc2VsZi5fYXZhaWxhYmxlX2Nvbm5lY3Rpb25zKGtleSlcclxuXHJcbiAgICAgICAgIyBXYWl0IGlmIHRoZXJlIGFyZSBubyBhdmFpbGFibGUgY29ubmVjdGlvbnMgb3IgaWYgdGhlcmUgYXJlL3dlcmVcclxuICAgICAgICAjIHdhaXRlcnMgKGkuZS4gZG9uXCd0IHN0ZWFsIGNvbm5lY3Rpb24gZnJvbSBhIHdhaXRlciBhYm91dCB0byB3YWtlIHVwKVxyXG4gICAgICAgIGlmIGF2YWlsYWJsZSA8PSAwIG9yIGtleSBpbiBzZWxmLl93YWl0ZXJzOlxyXG4gICAgICAgICAgICBmdXQgPSBzZWxmLl9sb29wLmNyZWF0ZV9mdXR1cmUoKVxyXG5cclxuICAgICAgICAgICAgIyBUaGlzIGNvbm5lY3Rpb24gd2lsbCBub3cgY291bnQgdG93YXJkcyB0aGUgbGltaXQuXHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlcnNba2V5XS5hcHBlbmQoZnV0KVxyXG5cclxuICAgICAgICAgICAgaWYgdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgZm9yIHRyYWNlIGluIHRyYWNlczpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5zZW5kX2Nvbm5lY3Rpb25fcXVldWVkX3N0YXJ0KClcclxuXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IGZ1dFxyXG4gICAgICAgICAgICBleGNlcHQgQmFzZUV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICAgICAgaWYga2V5IGluIHNlbGYuX3dhaXRlcnM6XHJcbiAgICAgICAgICAgICAgICAgICAgIyByZW1vdmUgYSB3YWl0ZXIgZXZlbiBpZiBpdCB3YXMgY2FuY2VsbGVkLCBub3JtYWxseSBpdFwnc1xyXG4gICAgICAgICAgICAgICAgICAgICMgIHJlbW92ZWQgd2hlbiBpdFwncyBub3RpZmllZFxyXG4gICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fd2FpdGVyc1trZXldLnJlbW92ZShmdXQpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6ICAjIGZ1dCBtYXkgbm8gbG9uZ2VyIGJlIGluIGxpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzc1xyXG5cclxuICAgICAgICAgICAgICAgIHJhaXNlIGVcclxuICAgICAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgICAgIGlmIGtleSBpbiBzZWxmLl93YWl0ZXJzIGFuZCBub3Qgc2VsZi5fd2FpdGVyc1trZXldOlxyXG4gICAgICAgICAgICAgICAgICAgIGRlbCBzZWxmLl93YWl0ZXJzW2tleV1cclxuXHJcbiAgICAgICAgICAgIGlmIHRyYWNlczpcclxuICAgICAgICAgICAgICAgIGZvciB0cmFjZSBpbiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc2VuZF9jb25uZWN0aW9uX3F1ZXVlZF9lbmQoKVxyXG5cclxuICAgICAgICBwcm90byA9IHNlbGYuX2dldChrZXkpXHJcbiAgICAgICAgaWYgcHJvdG8gaXMgTm9uZTpcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSBjYXN0KFJlc3BvbnNlSGFuZGxlciwgX1RyYW5zcG9ydFBsYWNlaG9sZGVyKCkpXHJcbiAgICAgICAgICAgIHNlbGYuX2FjcXVpcmVkLmFkZChwbGFjZWhvbGRlcilcclxuICAgICAgICAgICAgc2VsZi5fYWNxdWlyZWRfcGVyX2hvc3Rba2V5XS5hZGQocGxhY2Vob2xkZXIpXHJcblxyXG4gICAgICAgICAgICBpZiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICBmb3IgdHJhY2UgaW4gdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfY29ubmVjdGlvbl9jcmVhdGVfc3RhcnQoKVxyXG5cclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgcHJvdG8gPSBhd2FpdCBzZWxmLl9jcmVhdGVfY29ubmVjdGlvbihyZXEsIHRyYWNlcywgdGltZW91dClcclxuICAgICAgICAgICAgICAgIGlmIHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgICAgICAgICBwcm90by5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgQ2xpZW50Q29ubmVjdGlvbkVycm9yKCJDb25uZWN0b3IgaXMgY2xvc2VkLiIpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICAgICAgaWYgbm90IHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9hY3F1aXJlZC5yZW1vdmUocGxhY2Vob2xkZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZHJvcF9hY3F1aXJlZF9wZXJfaG9zdChrZXksIHBsYWNlaG9sZGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3JlbGVhc2Vfd2FpdGVyKClcclxuICAgICAgICAgICAgICAgIHJhaXNlXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2FjcXVpcmVkLnJlbW92ZShwbGFjZWhvbGRlcilcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9kcm9wX2FjcXVpcmVkX3Blcl9ob3N0KGtleSwgcGxhY2Vob2xkZXIpXHJcblxyXG4gICAgICAgICAgICBpZiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICBmb3IgdHJhY2UgaW4gdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfY29ubmVjdGlvbl9jcmVhdGVfZW5kKClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBpZiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICAjIEFjcXVpcmUgdGhlIGNvbm5lY3Rpb24gdG8gcHJldmVudCByYWNlIGNvbmRpdGlvbnMgd2l0aCBsaW1pdHNcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyID0gY2FzdChSZXNwb25zZUhhbmRsZXIsIF9UcmFuc3BvcnRQbGFjZWhvbGRlcigpKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYWNxdWlyZWQuYWRkKHBsYWNlaG9sZGVyKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYWNxdWlyZWRfcGVyX2hvc3Rba2V5XS5hZGQocGxhY2Vob2xkZXIpXHJcbiAgICAgICAgICAgICAgICBmb3IgdHJhY2UgaW4gdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfY29ubmVjdGlvbl9yZXVzZWNvbm4oKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYWNxdWlyZWQucmVtb3ZlKHBsYWNlaG9sZGVyKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fZHJvcF9hY3F1aXJlZF9wZXJfaG9zdChrZXksIHBsYWNlaG9sZGVyKVxyXG5cclxuICAgICAgICBzZWxmLl9hY3F1aXJlZC5hZGQocHJvdG8pXHJcbiAgICAgICAgc2VsZi5fYWNxdWlyZWRfcGVyX2hvc3Rba2V5XS5hZGQocHJvdG8pXHJcbiAgICAgICAgcmV0dXJuIENvbm5lY3Rpb24oc2VsZiwga2V5LCBwcm90bywgc2VsZi5fbG9vcClcclxuXHJcbiAgICBkZWYgX2dldChzZWxmLCBrZXk6ICJDb25uZWN0aW9uS2V5IikgLT4gT3B0aW9uYWxbUmVzcG9uc2VIYW5kbGVyXTpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGNvbm5zID0gc2VsZi5fY29ubnNba2V5XVxyXG4gICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICAgICAgdDEgPSBzZWxmLl9sb29wLnRpbWUoKVxyXG4gICAgICAgIHdoaWxlIGNvbm5zOlxyXG4gICAgICAgICAgICBwcm90bywgdDAgPSBjb25ucy5wb3AoKVxyXG4gICAgICAgICAgICBpZiBwcm90by5pc19jb25uZWN0ZWQoKTpcclxuICAgICAgICAgICAgICAgIGlmIHQxIC0gdDAgPiBzZWxmLl9rZWVwYWxpdmVfdGltZW91dDpcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnQgPSBwcm90by50cmFuc3BvcnRcclxuICAgICAgICAgICAgICAgICAgICBwcm90by5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgIyBvbmx5IGZvciBTU0wgdHJhbnNwb3J0c1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIGtleS5pc19zc2wgYW5kIG5vdCBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9kaXNhYmxlZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfdHJhbnNwb3J0cy5hcHBlbmQodHJhbnNwb3J0KVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBpZiBub3QgY29ubnM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICMgVGhlIHZlcnkgbGFzdCBjb25uZWN0aW9uIHdhcyByZWNsYWltZWQ6IGRyb3AgdGhlIGtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWwgc2VsZi5fY29ubnNba2V5XVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm90b1xyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0ID0gcHJvdG8udHJhbnNwb3J0XHJcbiAgICAgICAgICAgICAgICBwcm90by5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICBpZiBrZXkuaXNfc3NsIGFuZCBub3Qgc2VsZi5fY2xlYW51cF9jbG9zZWRfZGlzYWJsZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfdHJhbnNwb3J0cy5hcHBlbmQodHJhbnNwb3J0KVxyXG5cclxuICAgICAgICAjIE5vIG1vcmUgY29ubmVjdGlvbnM6IGRyb3AgdGhlIGtleVxyXG4gICAgICAgIGRlbCBzZWxmLl9jb25uc1trZXldXHJcbiAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICBkZWYgX3JlbGVhc2Vfd2FpdGVyKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgSXRlcmF0ZXMgb3ZlciBhbGwgd2FpdGVycyB1bnRpbCBvbmUgdG8gYmUgcmVsZWFzZWQgaXMgZm91bmQuXHJcblxyXG4gICAgICAgIFRoZSBvbmUgdG8gYmUgcmVsZWFzZWQgaXMgbm90IGZpbnNpaGVkIGFuZFxyXG4gICAgICAgIGJlbG9uZ3MgdG8gYSBob3N0IHRoYXQgaGFzIGF2YWlsYWJsZSBjb25uZWN0aW9ucy5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBub3Qgc2VsZi5fd2FpdGVyczpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgICMgSGF2aW5nIHRoZSBkaWN0IGtleXMgb3JkZXJlZCB0aGlzIGF2b2lkcyB0byBpdGVyYXRlXHJcbiAgICAgICAgIyBhdCB0aGUgc2FtZSBvcmRlciBhdCBlYWNoIGNhbGwuXHJcbiAgICAgICAgcXVldWVzID0gbGlzdChzZWxmLl93YWl0ZXJzLmtleXMoKSlcclxuICAgICAgICByYW5kb20uc2h1ZmZsZShxdWV1ZXMpXHJcblxyXG4gICAgICAgIGZvciBrZXkgaW4gcXVldWVzOlxyXG4gICAgICAgICAgICBpZiBzZWxmLl9hdmFpbGFibGVfY29ubmVjdGlvbnMoa2V5KSA8IDE6XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgd2FpdGVycyA9IHNlbGYuX3dhaXRlcnNba2V5XVxyXG4gICAgICAgICAgICB3aGlsZSB3YWl0ZXJzOlxyXG4gICAgICAgICAgICAgICAgd2FpdGVyID0gd2FpdGVycy5wb3BsZWZ0KClcclxuICAgICAgICAgICAgICAgIGlmIG5vdCB3YWl0ZXIuZG9uZSgpOlxyXG4gICAgICAgICAgICAgICAgICAgIHdhaXRlci5zZXRfcmVzdWx0KE5vbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgZGVmIF9yZWxlYXNlX2FjcXVpcmVkKHNlbGYsIGtleTogIkNvbm5lY3Rpb25LZXkiLCBwcm90bzogUmVzcG9uc2VIYW5kbGVyKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgIyBhY3F1aXJlZCBjb25uZWN0aW9uIGlzIGFscmVhZHkgcmVsZWFzZWQgb24gY29ubmVjdG9yIGNsb3NpbmdcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgc2VsZi5fYWNxdWlyZWQucmVtb3ZlKHByb3RvKVxyXG4gICAgICAgICAgICBzZWxmLl9kcm9wX2FjcXVpcmVkX3Blcl9ob3N0KGtleSwgcHJvdG8pXHJcbiAgICAgICAgZXhjZXB0IEtleUVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICAgICAgICAgICMgdGhpcyBtYXkgYmUgcmVzdWx0IG9mIHVuZGV0ZXJtZW5pc3RpYyBvcmRlciBvZiBvYmplY3RzXHJcbiAgICAgICAgICAgICMgZmluYWxpemF0aW9uIGR1ZSBnYXJiYWdlIGNvbGxlY3Rpb24uXHJcbiAgICAgICAgICAgIHBhc3NcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9yZWxlYXNlX3dhaXRlcigpXHJcblxyXG4gICAgZGVmIF9yZWxlYXNlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAga2V5OiAiQ29ubmVjdGlvbktleSIsXHJcbiAgICAgICAgcHJvdG9jb2w6IFJlc3BvbnNlSGFuZGxlcixcclxuICAgICAgICAqLFxyXG4gICAgICAgIHNob3VsZF9jbG9zZTogYm9vbCA9IEZhbHNlLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgIyBhY3F1aXJlZCBjb25uZWN0aW9uIGlzIGFscmVhZHkgcmVsZWFzZWQgb24gY29ubmVjdG9yIGNsb3NpbmdcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHNlbGYuX3JlbGVhc2VfYWNxdWlyZWQoa2V5LCBwcm90b2NvbClcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fZm9yY2VfY2xvc2U6XHJcbiAgICAgICAgICAgIHNob3VsZF9jbG9zZSA9IFRydWVcclxuXHJcbiAgICAgICAgaWYgc2hvdWxkX2Nsb3NlIG9yIHByb3RvY29sLnNob3VsZF9jbG9zZTpcclxuICAgICAgICAgICAgdHJhbnNwb3J0ID0gcHJvdG9jb2wudHJhbnNwb3J0XHJcbiAgICAgICAgICAgIHByb3RvY29sLmNsb3NlKClcclxuXHJcbiAgICAgICAgICAgIGlmIGtleS5pc19zc2wgYW5kIG5vdCBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9kaXNhYmxlZDpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFudXBfY2xvc2VkX3RyYW5zcG9ydHMuYXBwZW5kKHRyYW5zcG9ydClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBjb25ucyA9IHNlbGYuX2Nvbm5zLmdldChrZXkpXHJcbiAgICAgICAgICAgIGlmIGNvbm5zIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICBjb25ucyA9IHNlbGYuX2Nvbm5zW2tleV0gPSBbXVxyXG4gICAgICAgICAgICBjb25ucy5hcHBlbmQoKHByb3RvY29sLCBzZWxmLl9sb29wLnRpbWUoKSkpXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLl9jbGVhbnVwX2hhbmRsZSBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9oYW5kbGUgPSBoZWxwZXJzLndlYWtyZWZfaGFuZGxlKFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYsICJfY2xlYW51cCIsIHNlbGYuX2tlZXBhbGl2ZV90aW1lb3V0LCBzZWxmLl9sb29wXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIF9jcmVhdGVfY29ubmVjdGlvbihcclxuICAgICAgICBzZWxmLCByZXE6ICJDbGllbnRSZXF1ZXN0IiwgdHJhY2VzOiBMaXN0WyJUcmFjZSJdLCB0aW1lb3V0OiAiQ2xpZW50VGltZW91dCJcclxuICAgICkgLT4gUmVzcG9uc2VIYW5kbGVyOlxyXG4gICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoKVxyXG5cclxuXHJcbmNsYXNzIF9ETlNDYWNoZVRhYmxlOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHR0bDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9hZGRyc19yciA9IChcclxuICAgICAgICAgICAge31cclxuICAgICAgICApICAjIHR5cGU6IERpY3RbVHVwbGVbc3RyLCBpbnRdLCBUdXBsZVtJdGVyYXRvcltEaWN0W3N0ciwgQW55XV0sIGludF1dXHJcbiAgICAgICAgc2VsZi5fdGltZXN0YW1wcyA9IHt9ICAjIHR5cGU6IERpY3RbVHVwbGVbc3RyLCBpbnRdLCBmbG9hdF1cclxuICAgICAgICBzZWxmLl90dGwgPSB0dGxcclxuXHJcbiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIGhvc3Q6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gaG9zdCBpbiBzZWxmLl9hZGRyc19yclxyXG5cclxuICAgIGRlZiBhZGQoc2VsZiwga2V5OiBUdXBsZVtzdHIsIGludF0sIGFkZHJzOiBMaXN0W0RpY3Rbc3RyLCBBbnldXSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9hZGRyc19ycltrZXldID0gKGN5Y2xlKGFkZHJzKSwgbGVuKGFkZHJzKSlcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fdHRsOlxyXG4gICAgICAgICAgICBzZWxmLl90aW1lc3RhbXBzW2tleV0gPSBtb25vdG9uaWMoKVxyXG5cclxuICAgIGRlZiByZW1vdmUoc2VsZiwga2V5OiBUdXBsZVtzdHIsIGludF0pIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fYWRkcnNfcnIucG9wKGtleSwgTm9uZSlcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fdHRsOlxyXG4gICAgICAgICAgICBzZWxmLl90aW1lc3RhbXBzLnBvcChrZXksIE5vbmUpXHJcblxyXG4gICAgZGVmIGNsZWFyKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fYWRkcnNfcnIuY2xlYXIoKVxyXG4gICAgICAgIHNlbGYuX3RpbWVzdGFtcHMuY2xlYXIoKVxyXG5cclxuICAgIGRlZiBuZXh0X2FkZHJzKHNlbGYsIGtleTogVHVwbGVbc3RyLCBpbnRdKSAtPiBMaXN0W0RpY3Rbc3RyLCBBbnldXTpcclxuICAgICAgICBsb29wLCBsZW5ndGggPSBzZWxmLl9hZGRyc19ycltrZXldXHJcbiAgICAgICAgYWRkcnMgPSBsaXN0KGlzbGljZShsb29wLCBsZW5ndGgpKVxyXG4gICAgICAgICMgQ29uc3VtZSBvbmUgbW9yZSBlbGVtZW50IHRvIHNoaWZ0IGludGVybmFsIHN0YXRlIG9mIGBjeWNsZWBcclxuICAgICAgICBuZXh0KGxvb3ApXHJcbiAgICAgICAgcmV0dXJuIGFkZHJzXHJcblxyXG4gICAgZGVmIGV4cGlyZWQoc2VsZiwga2V5OiBUdXBsZVtzdHIsIGludF0pIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgc2VsZi5fdHRsIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fdGltZXN0YW1wc1trZXldICsgc2VsZi5fdHRsIDwgbW9ub3RvbmljKClcclxuXHJcblxyXG5jbGFzcyBUQ1BDb25uZWN0b3IoQmFzZUNvbm5lY3Rvcik6XHJcbiAgICAiIiJUQ1AgY29ubmVjdG9yLlxyXG5cclxuICAgIHZlcmlmeV9zc2wgLSBTZXQgdG8gVHJ1ZSB0byBjaGVjayBzc2wgY2VydGlmaWNhdGlvbnMuXHJcbiAgICBmaW5nZXJwcmludCAtIFBhc3MgdGhlIGJpbmFyeSBzaGEyNTZcclxuICAgICAgICBkaWdlc3Qgb2YgdGhlIGV4cGVjdGVkIGNlcnRpZmljYXRlIGluIERFUiBmb3JtYXQgdG8gdmVyaWZ5XHJcbiAgICAgICAgdGhhdCB0aGUgY2VydGlmaWNhdGUgdGhlIHNlcnZlciBwcmVzZW50cyBtYXRjaGVzLiBTZWUgYWxzb1xyXG4gICAgICAgIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1RyYW5zcG9ydF9MYXllcl9TZWN1cml0eSNDZXJ0aWZpY2F0ZV9waW5uaW5nXHJcbiAgICByZXNvbHZlciAtIEVuYWJsZSBETlMgbG9va3VwcyBhbmQgdXNlIHRoaXNcclxuICAgICAgICByZXNvbHZlclxyXG4gICAgdXNlX2Ruc19jYWNoZSAtIFVzZSBtZW1vcnkgY2FjaGUgZm9yIEROUyBsb29rdXBzLlxyXG4gICAgdHRsX2Ruc19jYWNoZSAtIE1heCBzZWNvbmRzIGhhdmluZyBjYWNoZWQgYSBETlMgZW50cnksIE5vbmUgZm9yZXZlci5cclxuICAgIGZhbWlseSAtIHNvY2tldCBhZGRyZXNzIGZhbWlseVxyXG4gICAgbG9jYWxfYWRkciAtIGxvY2FsIHR1cGxlIG9mIChob3N0LCBwb3J0KSB0byBiaW5kIHNvY2tldCB0b1xyXG5cclxuICAgIGtlZXBhbGl2ZV90aW1lb3V0IC0gKG9wdGlvbmFsKSBLZWVwLWFsaXZlIHRpbWVvdXQuXHJcbiAgICBmb3JjZV9jbG9zZSAtIFNldCB0byBUcnVlIHRvIGZvcmNlIGNsb3NlIGFuZCBkbyByZWNvbm5lY3RcclxuICAgICAgICBhZnRlciBlYWNoIHJlcXVlc3QgKGFuZCBiZXR3ZWVuIHJlZGlyZWN0cykuXHJcbiAgICBsaW1pdCAtIFRoZSB0b3RhbCBudW1iZXIgb2Ygc2ltdWx0YW5lb3VzIGNvbm5lY3Rpb25zLlxyXG4gICAgbGltaXRfcGVyX2hvc3QgLSBOdW1iZXIgb2Ygc2ltdWx0YW5lb3VzIGNvbm5lY3Rpb25zIHRvIG9uZSBob3N0LlxyXG4gICAgZW5hYmxlX2NsZWFudXBfY2xvc2VkIC0gRW5hYmxlcyBjbGVhbi11cCBjbG9zZWQgc3NsIHRyYW5zcG9ydHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXNhYmxlZCBieSBkZWZhdWx0LlxyXG4gICAgbG9vcCAtIE9wdGlvbmFsIGV2ZW50IGxvb3AuXHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIHZlcmlmeV9zc2w6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIGZpbmdlcnByaW50OiBPcHRpb25hbFtieXRlc10gPSBOb25lLFxyXG4gICAgICAgIHVzZV9kbnNfY2FjaGU6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIHR0bF9kbnNfY2FjaGU6IE9wdGlvbmFsW2ludF0gPSAxMCxcclxuICAgICAgICBmYW1pbHk6IGludCA9IDAsXHJcbiAgICAgICAgc3NsX2NvbnRleHQ6IE9wdGlvbmFsW1NTTENvbnRleHRdID0gTm9uZSxcclxuICAgICAgICBzc2w6IFVuaW9uW05vbmUsIGJvb2wsIEZpbmdlcnByaW50LCBTU0xDb250ZXh0XSA9IE5vbmUsXHJcbiAgICAgICAgbG9jYWxfYWRkcjogT3B0aW9uYWxbVHVwbGVbc3RyLCBpbnRdXSA9IE5vbmUsXHJcbiAgICAgICAgcmVzb2x2ZXI6IE9wdGlvbmFsW0Fic3RyYWN0UmVzb2x2ZXJdID0gTm9uZSxcclxuICAgICAgICBrZWVwYWxpdmVfdGltZW91dDogVW5pb25bTm9uZSwgZmxvYXQsIG9iamVjdF0gPSBzZW50aW5lbCxcclxuICAgICAgICBmb3JjZV9jbG9zZTogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIGxpbWl0OiBpbnQgPSAxMDAsXHJcbiAgICAgICAgbGltaXRfcGVyX2hvc3Q6IGludCA9IDAsXHJcbiAgICAgICAgZW5hYmxlX2NsZWFudXBfY2xvc2VkOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4gICAgKTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKFxyXG4gICAgICAgICAgICBrZWVwYWxpdmVfdGltZW91dD1rZWVwYWxpdmVfdGltZW91dCxcclxuICAgICAgICAgICAgZm9yY2VfY2xvc2U9Zm9yY2VfY2xvc2UsXHJcbiAgICAgICAgICAgIGxpbWl0PWxpbWl0LFxyXG4gICAgICAgICAgICBsaW1pdF9wZXJfaG9zdD1saW1pdF9wZXJfaG9zdCxcclxuICAgICAgICAgICAgZW5hYmxlX2NsZWFudXBfY2xvc2VkPWVuYWJsZV9jbGVhbnVwX2Nsb3NlZCxcclxuICAgICAgICAgICAgbG9vcD1sb29wLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fc3NsID0gX21lcmdlX3NzbF9wYXJhbXMoc3NsLCB2ZXJpZnlfc3NsLCBzc2xfY29udGV4dCwgZmluZ2VycHJpbnQpXHJcbiAgICAgICAgaWYgcmVzb2x2ZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmVzb2x2ZXIgPSBEZWZhdWx0UmVzb2x2ZXIobG9vcD1zZWxmLl9sb29wKVxyXG4gICAgICAgIHNlbGYuX3Jlc29sdmVyID0gcmVzb2x2ZXJcclxuXHJcbiAgICAgICAgc2VsZi5fdXNlX2Ruc19jYWNoZSA9IHVzZV9kbnNfY2FjaGVcclxuICAgICAgICBzZWxmLl9jYWNoZWRfaG9zdHMgPSBfRE5TQ2FjaGVUYWJsZSh0dGw9dHRsX2Ruc19jYWNoZSlcclxuICAgICAgICBzZWxmLl90aHJvdHRsZV9kbnNfZXZlbnRzID0gKFxyXG4gICAgICAgICAgICB7fVxyXG4gICAgICAgICkgICMgdHlwZTogRGljdFtUdXBsZVtzdHIsIGludF0sIEV2ZW50UmVzdWx0T3JFcnJvcl1cclxuICAgICAgICBzZWxmLl9mYW1pbHkgPSBmYW1pbHlcclxuICAgICAgICBzZWxmLl9sb2NhbF9hZGRyID0gbG9jYWxfYWRkclxyXG5cclxuICAgIGRlZiBjbG9zZShzZWxmKSAtPiBBd2FpdGFibGVbTm9uZV06XHJcbiAgICAgICAgIiIiQ2xvc2UgYWxsIG9uZ29pbmcgRE5TIGNhbGxzLiIiIlxyXG4gICAgICAgIGZvciBldiBpbiBzZWxmLl90aHJvdHRsZV9kbnNfZXZlbnRzLnZhbHVlcygpOlxyXG4gICAgICAgICAgICBldi5jYW5jZWwoKVxyXG5cclxuICAgICAgICByZXR1cm4gc3VwZXIoKS5jbG9zZSgpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZmFtaWx5KHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJTb2NrZXQgZmFtaWx5IGxpa2UgQUZfSU5FVC4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fZmFtaWx5XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdXNlX2Ruc19jYWNoZShzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIlRydWUgaWYgbG9jYWwgRE5TIGNhY2hpbmcgaXMgZW5hYmxlZC4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fdXNlX2Ruc19jYWNoZVxyXG5cclxuICAgIGRlZiBjbGVhcl9kbnNfY2FjaGUoXHJcbiAgICAgICAgc2VsZiwgaG9zdDogT3B0aW9uYWxbc3RyXSA9IE5vbmUsIHBvcnQ6IE9wdGlvbmFsW2ludF0gPSBOb25lXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiUmVtb3ZlIHNwZWNpZmllZCBob3N0L3BvcnQgb3IgY2xlYXIgYWxsIGRucyBsb2NhbCBjYWNoZS4iIiJcclxuICAgICAgICBpZiBob3N0IGlzIG5vdCBOb25lIGFuZCBwb3J0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9jYWNoZWRfaG9zdHMucmVtb3ZlKChob3N0LCBwb3J0KSlcclxuICAgICAgICBlbGlmIGhvc3QgaXMgbm90IE5vbmUgb3IgcG9ydCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZWl0aGVyIGJvdGggaG9zdCBhbmQgcG9ydCAiICJvciBub25lIG9mIHRoZW0gYXJlIGFsbG93ZWQiKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX2NhY2hlZF9ob3N0cy5jbGVhcigpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9yZXNvbHZlX2hvc3QoXHJcbiAgICAgICAgc2VsZiwgaG9zdDogc3RyLCBwb3J0OiBpbnQsIHRyYWNlczogT3B0aW9uYWxbTGlzdFsiVHJhY2UiXV0gPSBOb25lXHJcbiAgICApIC0+IExpc3RbRGljdFtzdHIsIEFueV1dOlxyXG4gICAgICAgIGlmIGlzX2lwX2FkZHJlc3MoaG9zdCk6XHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgImhvc3RuYW1lIjogaG9zdCxcclxuICAgICAgICAgICAgICAgICAgICAiaG9zdCI6IGhvc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgInBvcnQiOiBwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICJmYW1pbHkiOiBzZWxmLl9mYW1pbHksXHJcbiAgICAgICAgICAgICAgICAgICAgInByb3RvIjogMCxcclxuICAgICAgICAgICAgICAgICAgICAiZmxhZ3MiOiAwLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcblxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl91c2VfZG5zX2NhY2hlOlxyXG5cclxuICAgICAgICAgICAgaWYgdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgZm9yIHRyYWNlIGluIHRyYWNlczpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5zZW5kX2Ruc19yZXNvbHZlaG9zdF9zdGFydChob3N0KVxyXG5cclxuICAgICAgICAgICAgcmVzID0gYXdhaXQgc2VsZi5fcmVzb2x2ZXIucmVzb2x2ZShob3N0LCBwb3J0LCBmYW1pbHk9c2VsZi5fZmFtaWx5KVxyXG5cclxuICAgICAgICAgICAgaWYgdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgZm9yIHRyYWNlIGluIHRyYWNlczpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5zZW5kX2Ruc19yZXNvbHZlaG9zdF9lbmQoaG9zdClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXNcclxuXHJcbiAgICAgICAga2V5ID0gKGhvc3QsIHBvcnQpXHJcblxyXG4gICAgICAgIGlmIChrZXkgaW4gc2VsZi5fY2FjaGVkX2hvc3RzKSBhbmQgKG5vdCBzZWxmLl9jYWNoZWRfaG9zdHMuZXhwaXJlZChrZXkpKTpcclxuICAgICAgICAgICAgIyBnZXQgcmVzdWx0IGVhcmx5LCBiZWZvcmUgYW55IGF3YWl0ICgjNDAxNClcclxuICAgICAgICAgICAgcmVzdWx0ID0gc2VsZi5fY2FjaGVkX2hvc3RzLm5leHRfYWRkcnMoa2V5KVxyXG5cclxuICAgICAgICAgICAgaWYgdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgZm9yIHRyYWNlIGluIHRyYWNlczpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0cmFjZS5zZW5kX2Ruc19jYWNoZV9oaXQoaG9zdClcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG5cclxuICAgICAgICBpZiBrZXkgaW4gc2VsZi5fdGhyb3R0bGVfZG5zX2V2ZW50czpcclxuICAgICAgICAgICAgIyBnZXQgZXZlbnQgZWFybHksIGJlZm9yZSBhbnkgYXdhaXQgKCM0MDE0KVxyXG4gICAgICAgICAgICBldmVudCA9IHNlbGYuX3Rocm90dGxlX2Ruc19ldmVudHNba2V5XVxyXG4gICAgICAgICAgICBpZiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICBmb3IgdHJhY2UgaW4gdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfZG5zX2NhY2hlX2hpdChob3N0KVxyXG4gICAgICAgICAgICBhd2FpdCBldmVudC53YWl0KClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAjIHVwZGF0ZSBkaWN0IGVhcmx5LCBiZWZvcmUgYW55IGF3YWl0ICgjNDAxNClcclxuICAgICAgICAgICAgc2VsZi5fdGhyb3R0bGVfZG5zX2V2ZW50c1trZXldID0gRXZlbnRSZXN1bHRPckVycm9yKHNlbGYuX2xvb3ApXHJcbiAgICAgICAgICAgIGlmIHRyYWNlczpcclxuICAgICAgICAgICAgICAgIGZvciB0cmFjZSBpbiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc2VuZF9kbnNfY2FjaGVfbWlzcyhob3N0KVxyXG4gICAgICAgICAgICB0cnk6XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgdHJhY2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIGZvciB0cmFjZSBpbiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRyYWNlLnNlbmRfZG5zX3Jlc29sdmVob3N0X3N0YXJ0KGhvc3QpXHJcblxyXG4gICAgICAgICAgICAgICAgYWRkcnMgPSBhd2FpdCBzZWxmLl9yZXNvbHZlci5yZXNvbHZlKGhvc3QsIHBvcnQsIGZhbWlseT1zZWxmLl9mYW1pbHkpXHJcbiAgICAgICAgICAgICAgICBpZiB0cmFjZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIHRyYWNlIGluIHRyYWNlczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdHJhY2Uuc2VuZF9kbnNfcmVzb2x2ZWhvc3RfZW5kKGhvc3QpXHJcblxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2FjaGVkX2hvc3RzLmFkZChrZXksIGFkZHJzKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fdGhyb3R0bGVfZG5zX2V2ZW50c1trZXldLnNldCgpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgICAgICAjIGFueSBETlMgZXhjZXB0aW9uLCBpbmRlcGVuZGVudGx5IG9mIHRoZSBpbXBsZW1lbnRhdGlvblxyXG4gICAgICAgICAgICAgICAgIyBpcyBzZXQgZm9yIHRoZSB3YWl0ZXJzIHRvIHJhaXNlIHRoZSBzYW1lIGV4Y2VwdGlvbi5cclxuICAgICAgICAgICAgICAgIHNlbGYuX3Rocm90dGxlX2Ruc19ldmVudHNba2V5XS5zZXQoZXhjPWUpXHJcbiAgICAgICAgICAgICAgICByYWlzZVxyXG4gICAgICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fdGhyb3R0bGVfZG5zX2V2ZW50cy5wb3Aoa2V5KVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fY2FjaGVkX2hvc3RzLm5leHRfYWRkcnMoa2V5KVxyXG5cclxuICAgIGFzeW5jIGRlZiBfY3JlYXRlX2Nvbm5lY3Rpb24oXHJcbiAgICAgICAgc2VsZiwgcmVxOiAiQ2xpZW50UmVxdWVzdCIsIHRyYWNlczogTGlzdFsiVHJhY2UiXSwgdGltZW91dDogIkNsaWVudFRpbWVvdXQiXHJcbiAgICApIC0+IFJlc3BvbnNlSGFuZGxlcjpcclxuICAgICAgICAiIiJDcmVhdGUgY29ubmVjdGlvbi5cclxuXHJcbiAgICAgICAgSGFzIHNhbWUga2V5d29yZCBhcmd1bWVudHMgYXMgQmFzZUV2ZW50TG9vcC5jcmVhdGVfY29ubmVjdGlvbi5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiByZXEucHJveHk6XHJcbiAgICAgICAgICAgIF8sIHByb3RvID0gYXdhaXQgc2VsZi5fY3JlYXRlX3Byb3h5X2Nvbm5lY3Rpb24ocmVxLCB0cmFjZXMsIHRpbWVvdXQpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgXywgcHJvdG8gPSBhd2FpdCBzZWxmLl9jcmVhdGVfZGlyZWN0X2Nvbm5lY3Rpb24ocmVxLCB0cmFjZXMsIHRpbWVvdXQpXHJcblxyXG4gICAgICAgIHJldHVybiBwcm90b1xyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIEBmdW5jdG9vbHMubHJ1X2NhY2hlKE5vbmUpXHJcbiAgICBkZWYgX21ha2Vfc3NsX2NvbnRleHQodmVyaWZpZWQ6IGJvb2wpIC0+IFNTTENvbnRleHQ6XHJcbiAgICAgICAgaWYgdmVyaWZpZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiBzc2wuY3JlYXRlX2RlZmF1bHRfY29udGV4dCgpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc3NsY29udGV4dCA9IHNzbC5TU0xDb250ZXh0KHNzbC5QUk9UT0NPTF9UTFNfQ0xJRU5UKVxyXG4gICAgICAgICAgICBzc2xjb250ZXh0Lm9wdGlvbnMgfD0gc3NsLk9QX05PX1NTTHYyXHJcbiAgICAgICAgICAgIHNzbGNvbnRleHQub3B0aW9ucyB8PSBzc2wuT1BfTk9fU1NMdjNcclxuICAgICAgICAgICAgc3NsY29udGV4dC5jaGVja19ob3N0bmFtZSA9IEZhbHNlXHJcbiAgICAgICAgICAgIHNzbGNvbnRleHQudmVyaWZ5X21vZGUgPSBzc2wuQ0VSVF9OT05FXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHNzbGNvbnRleHQub3B0aW9ucyB8PSBzc2wuT1BfTk9fQ09NUFJFU1NJT05cclxuICAgICAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yIGFzIGF0dHJfZXJyOlxyXG4gICAgICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICAgICAieyFzfTogVGhlIFB5dGhvbiBpbnRlcnByZXRlciBpcyBjb21waWxlZCAiXHJcbiAgICAgICAgICAgICAgICAgICAgImFnYWluc3QgT3BlblNTTCA8IDEuMC4wLiBSZWY6ICJcclxuICAgICAgICAgICAgICAgICAgICAiaHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMy9saWJyYXJ5L3NzbC5odG1sIlxyXG4gICAgICAgICAgICAgICAgICAgICIjc3NsLk9QX05PX0NPTVBSRVNTSU9OIi5mb3JtYXQoYXR0cl9lcnIpLFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBzc2xjb250ZXh0LnNldF9kZWZhdWx0X3ZlcmlmeV9wYXRocygpXHJcbiAgICAgICAgICAgIHJldHVybiBzc2xjb250ZXh0XHJcblxyXG4gICAgZGVmIF9nZXRfc3NsX2NvbnRleHQoc2VsZiwgcmVxOiAiQ2xpZW50UmVxdWVzdCIpIC0+IE9wdGlvbmFsW1NTTENvbnRleHRdOlxyXG4gICAgICAgICIiIkxvZ2ljIHRvIGdldCB0aGUgY29ycmVjdCBTU0wgY29udGV4dFxyXG5cclxuICAgICAgICAwLiBpZiByZXEuc3NsIGlzIGZhbHNlLCByZXR1cm4gTm9uZVxyXG5cclxuICAgICAgICAxLiBpZiBzc2xfY29udGV4dCBpcyBzcGVjaWZpZWQgaW4gcmVxLCB1c2UgaXRcclxuICAgICAgICAyLiBpZiBfc3NsX2NvbnRleHQgaXMgc3BlY2lmaWVkIGluIHNlbGYsIHVzZSBpdFxyXG4gICAgICAgIDMuIG90aGVyd2lzZTpcclxuICAgICAgICAgICAgMS4gaWYgdmVyaWZ5X3NzbCBpcyBub3Qgc3BlY2lmaWVkIGluIHJlcSwgdXNlIHNlbGYuc3NsX2NvbnRleHRcclxuICAgICAgICAgICAgICAgKHdpbGwgZ2VuZXJhdGUgYSBkZWZhdWx0IGNvbnRleHQgYWNjb3JkaW5nIHRvIHNlbGYudmVyaWZ5X3NzbClcclxuICAgICAgICAgICAgMi4gaWYgdmVyaWZ5X3NzbCBpcyBUcnVlIGluIHJlcSwgZ2VuZXJhdGUgYSBkZWZhdWx0IFNTTCBjb250ZXh0XHJcbiAgICAgICAgICAgIDMuIGlmIHZlcmlmeV9zc2wgaXMgRmFsc2UgaW4gcmVxLCBnZW5lcmF0ZSBhIFNTTCBjb250ZXh0IHRoYXRcclxuICAgICAgICAgICAgICAgd29uXCd0IHZlcmlmeVxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHJlcS5pc19zc2woKTpcclxuICAgICAgICAgICAgaWYgc3NsIGlzIE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiU1NMIGlzIG5vdCBzdXBwb3J0ZWQuIilcclxuICAgICAgICAgICAgc3NsY29udGV4dCA9IHJlcS5zc2xcclxuICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShzc2xjb250ZXh0LCBzc2wuU1NMQ29udGV4dCk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3NsY29udGV4dFxyXG4gICAgICAgICAgICBpZiBzc2xjb250ZXh0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgIyBub3QgdmVyaWZpZWQgb3IgZmluZ2VycHJpbnRlZFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX21ha2Vfc3NsX2NvbnRleHQoRmFsc2UpXHJcbiAgICAgICAgICAgIHNzbGNvbnRleHQgPSBzZWxmLl9zc2xcclxuICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShzc2xjb250ZXh0LCBzc2wuU1NMQ29udGV4dCk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3NsY29udGV4dFxyXG4gICAgICAgICAgICBpZiBzc2xjb250ZXh0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgIyBub3QgdmVyaWZpZWQgb3IgZmluZ2VycHJpbnRlZFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX21ha2Vfc3NsX2NvbnRleHQoRmFsc2UpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9tYWtlX3NzbF9jb250ZXh0KFRydWUpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICBkZWYgX2dldF9maW5nZXJwcmludChzZWxmLCByZXE6ICJDbGllbnRSZXF1ZXN0IikgLT4gT3B0aW9uYWxbIkZpbmdlcnByaW50Il06XHJcbiAgICAgICAgcmV0ID0gcmVxLnNzbFxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UocmV0LCBGaW5nZXJwcmludCk6XHJcbiAgICAgICAgICAgIHJldHVybiByZXRcclxuICAgICAgICByZXQgPSBzZWxmLl9zc2xcclxuICAgICAgICBpZiBpc2luc3RhbmNlKHJldCwgRmluZ2VycHJpbnQpOlxyXG4gICAgICAgICAgICByZXR1cm4gcmV0XHJcbiAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICBhc3luYyBkZWYgX3dyYXBfY3JlYXRlX2Nvbm5lY3Rpb24oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqYXJnczogQW55LFxyXG4gICAgICAgIHJlcTogIkNsaWVudFJlcXVlc3QiLFxyXG4gICAgICAgIHRpbWVvdXQ6ICJDbGllbnRUaW1lb3V0IixcclxuICAgICAgICBjbGllbnRfZXJyb3I6IFR5cGVbRXhjZXB0aW9uXSA9IENsaWVudENvbm5lY3RvckVycm9yLFxyXG4gICAgICAgICoqa3dhcmdzOiBBbnksXHJcbiAgICApIC0+IFR1cGxlW2FzeW5jaW8uVHJhbnNwb3J0LCBSZXNwb25zZUhhbmRsZXJdOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgYXN5bmMgd2l0aCBjZWlsX3RpbWVvdXQodGltZW91dC5zb2NrX2Nvbm5lY3QpOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX2xvb3AuY3JlYXRlX2Nvbm5lY3Rpb24oKmFyZ3MsICoqa3dhcmdzKSAgIyB0eXBlOiBpZ25vcmVbcmV0dXJuLXZhbHVlXSAgIyBub3FhXHJcbiAgICAgICAgZXhjZXB0IGNlcnRfZXJyb3JzIGFzIGV4YzpcclxuICAgICAgICAgICAgcmFpc2UgQ2xpZW50Q29ubmVjdG9yQ2VydGlmaWNhdGVFcnJvcihyZXEuY29ubmVjdGlvbl9rZXksIGV4YykgZnJvbSBleGNcclxuICAgICAgICBleGNlcHQgc3NsX2Vycm9ycyBhcyBleGM6XHJcbiAgICAgICAgICAgIHJhaXNlIENsaWVudENvbm5lY3RvclNTTEVycm9yKHJlcS5jb25uZWN0aW9uX2tleSwgZXhjKSBmcm9tIGV4Y1xyXG4gICAgICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgcmFpc2UgY2xpZW50X2Vycm9yKHJlcS5jb25uZWN0aW9uX2tleSwgZXhjKSBmcm9tIGV4Y1xyXG5cclxuICAgIGRlZiBfZmFpbF9vbl9ub19zdGFydF90bHMoc2VsZiwgcmVxOiAiQ2xpZW50UmVxdWVzdCIpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiUmFpc2UgYSA6cHk6ZXhjOmBSdW50aW1lRXJyb3JgIG9uIG1pc3NpbmcgYGBzdGFydF90bHMoKWBgLlxyXG5cclxuICAgICAgICBPbmUgY2FzZSBpcyB0aGF0IDpweTptZXRoOmBhc3luY2lvLmxvb3Auc3RhcnRfdGxzYCBpcyBub3QgeWV0XHJcbiAgICAgICAgaW1wbGVtZW50ZWQgdW5kZXIgUHl0aG9uIDMuNi4gSXQgaXMgbmVjZXNzYXJ5IGZvciBUTFMtaW4tVExTIHNvXHJcbiAgICAgICAgdGhhdCBpdCBpcyBwb3NzaWJsZSB0byBzZW5kIEhUVFBTIHF1ZXJpZXMgdGhyb3VnaCBIVFRQUyBwcm94aWVzLlxyXG5cclxuICAgICAgICBUaGlzIGRvZXNuXCd0IGFmZmVjdCByZWd1bGFyIEhUVFAgcmVxdWVzdHMsIHRob3VnaC5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBub3QgcmVxLmlzX3NzbCgpOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgcHJveHlfdXJsID0gcmVxLnByb3h5XHJcbiAgICAgICAgYXNzZXJ0IHByb3h5X3VybCBpcyBub3QgTm9uZVxyXG4gICAgICAgIGlmIHByb3h5X3VybC5zY2hlbWUgIT0gImh0dHBzIjpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHNlbGYuX2NoZWNrX2xvb3BfZm9yX3N0YXJ0X3RscygpXHJcblxyXG4gICAgZGVmIF9jaGVja19sb29wX2Zvcl9zdGFydF90bHMoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHNlbGYuX2xvb3Auc3RhcnRfdGxzXHJcbiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yIGFzIGF0dHJfZXhjOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiQW4gSFRUUFMgcmVxdWVzdCBpcyBiZWluZyBzZW50IHRocm91Z2ggYW4gSFRUUFMgcHJveHkuICJcclxuICAgICAgICAgICAgICAgICJUaGlzIG5lZWRzIHN1cHBvcnQgZm9yIFRMUyBpbiBUTFMgYnV0IGl0IGlzIG5vdCBpbXBsZW1lbnRlZCAiXHJcbiAgICAgICAgICAgICAgICAiaW4geW91ciBydW50aW1lIGZvciB0aGUgc3RkbGliIGFzeW5jaW8uXFxuXFxuIlxyXG4gICAgICAgICAgICAgICAgIlBsZWFzZSB1cGdyYWRlIHRvIFB5dGhvbiAzLjcgb3IgaGlnaGVyLiBGb3IgbW9yZSBkZXRhaWxzLCAiXHJcbiAgICAgICAgICAgICAgICAicGxlYXNlIHNlZTpcXG4iXHJcbiAgICAgICAgICAgICAgICAiKiBodHRwczovL2J1Z3MucHl0aG9uLm9yZy9pc3N1ZTM3MTc5XFxuIlxyXG4gICAgICAgICAgICAgICAgIiogaHR0cHM6Ly9naXRodWIuY29tL3B5dGhvbi9jcHl0aG9uL3B1bGwvMjgwNzNcXG4iXHJcbiAgICAgICAgICAgICAgICAiKiBodHRwczovL2RvY3MuYWlvaHR0cC5vcmcvZW4vc3RhYmxlLyJcclxuICAgICAgICAgICAgICAgICJjbGllbnRfYWR2YW5jZWQuaHRtbCNwcm94eS1zdXBwb3J0XFxuIlxyXG4gICAgICAgICAgICAgICAgIiogaHR0cHM6Ly9naXRodWIuY29tL2Fpby1saWJzL2Fpb2h0dHAvZGlzY3Vzc2lvbnMvNjA0NFxcbiIsXHJcbiAgICAgICAgICAgICkgZnJvbSBhdHRyX2V4Y1xyXG5cclxuICAgIGRlZiBfbG9vcF9zdXBwb3J0c19zdGFydF90bHMoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHNlbGYuX2NoZWNrX2xvb3BfZm9yX3N0YXJ0X3RscygpXHJcbiAgICAgICAgZXhjZXB0IFJ1bnRpbWVFcnJvcjpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICBkZWYgX3dhcm5fYWJvdXRfdGxzX2luX3RscyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHVuZGVybHlpbmdfdHJhbnNwb3J0OiBhc3luY2lvLlRyYW5zcG9ydCxcclxuICAgICAgICByZXE6ICJDbGllbnRSZXF1ZXN0IixcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJJc3N1ZSBhIHdhcm5pbmcgaWYgdGhlIHJlcXVlc3RlZCBVUkwgaGFzIEhUVFBTIHNjaGVtZS4iIiJcclxuICAgICAgICBpZiByZXEucmVxdWVzdF9pbmZvLnVybC5zY2hlbWUgIT0gImh0dHBzIjpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGFzeW5jaW9fc3VwcG9ydHNfdGxzX2luX3RscyA9IGdldGF0dHIoXHJcbiAgICAgICAgICAgIHVuZGVybHlpbmdfdHJhbnNwb3J0LFxyXG4gICAgICAgICAgICAiX3N0YXJ0X3Rsc19jb21wYXRpYmxlIixcclxuICAgICAgICAgICAgRmFsc2UsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBhc3luY2lvX3N1cHBvcnRzX3Rsc19pbl90bHM6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAiQW4gSFRUUFMgcmVxdWVzdCBpcyBiZWluZyBzZW50IHRocm91Z2ggYW4gSFRUUFMgcHJveHkuICJcclxuICAgICAgICAgICAgIlRoaXMgc3VwcG9ydCBmb3IgVExTIGluIFRMUyBpcyBrbm93biB0byBiZSBkaXNhYmxlZCAiXHJcbiAgICAgICAgICAgICJpbiB0aGUgc3RkbGliIGFzeW5jaW8uIFRoaXMgaXMgd2h5IHlvdVwnbGwgcHJvYmFibHkgc2VlICJcclxuICAgICAgICAgICAgImFuIGVycm9yIGluIHRoZSBsb2cgYmVsb3cuXFxuXFxuIlxyXG4gICAgICAgICAgICAiSXQgaXMgcG9zc2libGUgdG8gZW5hYmxlIGl0IHZpYSBtb25rZXlwYXRjaGluZyB1bmRlciAiXHJcbiAgICAgICAgICAgICJQeXRob24gMy43IG9yIGhpZ2hlci4gRm9yIG1vcmUgZGV0YWlscywgc2VlOlxcbiJcclxuICAgICAgICAgICAgIiogaHR0cHM6Ly9idWdzLnB5dGhvbi5vcmcvaXNzdWUzNzE3OVxcbiJcclxuICAgICAgICAgICAgIiogaHR0cHM6Ly9naXRodWIuY29tL3B5dGhvbi9jcHl0aG9uL3B1bGwvMjgwNzNcXG5cXG4iXHJcbiAgICAgICAgICAgICJZb3UgY2FuIHRlbXBvcmFyaWx5IHBhdGNoIHRoaXMgYXMgZm9sbG93czpcXG4iXHJcbiAgICAgICAgICAgICIqIGh0dHBzOi8vZG9jcy5haW9odHRwLm9yZy9lbi9zdGFibGUvY2xpZW50X2FkdmFuY2VkLmh0bWwjcHJveHktc3VwcG9ydFxcbiJcclxuICAgICAgICAgICAgIiogaHR0cHM6Ly9naXRodWIuY29tL2Fpby1saWJzL2Fpb2h0dHAvZGlzY3Vzc2lvbnMvNjA0NFxcbiIsXHJcbiAgICAgICAgICAgIFJ1bnRpbWVXYXJuaW5nLFxyXG4gICAgICAgICAgICBzb3VyY2U9c2VsZixcclxuICAgICAgICAgICAgIyBXaHkgYDRgPyBBdCBsZWFzdCAzIG9mIHRoZSBjYWxscyBpbiB0aGUgc3RhY2sgb3JpZ2luYXRlXHJcbiAgICAgICAgICAgICMgZnJvbSB0aGUgbWV0aG9kcyBpbiB0aGlzIGNsYXNzLlxyXG4gICAgICAgICAgICBzdGFja2xldmVsPTMsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfc3RhcnRfdGxzX2Nvbm5lY3Rpb24oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB1bmRlcmx5aW5nX3RyYW5zcG9ydDogYXN5bmNpby5UcmFuc3BvcnQsXHJcbiAgICAgICAgcmVxOiAiQ2xpZW50UmVxdWVzdCIsXHJcbiAgICAgICAgdGltZW91dDogIkNsaWVudFRpbWVvdXQiLFxyXG4gICAgICAgIGNsaWVudF9lcnJvcjogVHlwZVtFeGNlcHRpb25dID0gQ2xpZW50Q29ubmVjdG9yRXJyb3IsXHJcbiAgICApIC0+IFR1cGxlW2FzeW5jaW8uQmFzZVRyYW5zcG9ydCwgUmVzcG9uc2VIYW5kbGVyXTpcclxuICAgICAgICAiIiJXcmFwIHRoZSByYXcgVENQIHRyYW5zcG9ydCB3aXRoIFRMUy4iIiJcclxuICAgICAgICB0bHNfcHJvdG8gPSBzZWxmLl9mYWN0b3J5KCkgICMgQ3JlYXRlIGEgYnJhbmQgbmV3IHByb3RvIGZvciBUTFNcclxuXHJcbiAgICAgICAgIyBTYWZldHkgb2YgdGhlIGBjYXN0KClgIGNhbGwgaGVyZSBpcyBiYXNlZCBvbiB0aGUgZmFjdCB0aGF0XHJcbiAgICAgICAgIyBpbnRlcm5hbGx5IGBfZ2V0X3NzbF9jb250ZXh0KClgIG9ubHkgcmV0dXJucyBgTm9uZWAgd2hlblxyXG4gICAgICAgICMgYHJlcS5pc19zc2woKWAgZXZhbHVhdGVzIHRvIGBGYWxzZWAgd2hpY2ggaXMgbmV2ZXIgZ29ubmEgaGFwcGVuXHJcbiAgICAgICAgIyBpbiB0aGlzIGNvZGUgcGF0aC4gT2YgY291cnNlLCBpdFwncyByYXRoZXIgZnJhZ2lsZVxyXG4gICAgICAgICMgbWFpbnRhaW5hYmlsaXR5LXdpc2UgYnV0IHRoaXMgaXMgdG8gYmUgc29sdmVkIHNlcGFyYXRlbHkuXHJcbiAgICAgICAgc3NsY29udGV4dCA9IGNhc3Qoc3NsLlNTTENvbnRleHQsIHNlbGYuX2dldF9zc2xfY29udGV4dChyZXEpKVxyXG5cclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGFzeW5jIHdpdGggY2VpbF90aW1lb3V0KHRpbWVvdXQuc29ja19jb25uZWN0KTpcclxuICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICB0bHNfdHJhbnNwb3J0ID0gYXdhaXQgc2VsZi5fbG9vcC5zdGFydF90bHMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVybHlpbmdfdHJhbnNwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bHNfcHJvdG8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNzbGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlcl9ob3N0bmFtZT1yZXEuaG9zdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3NsX2hhbmRzaGFrZV90aW1lb3V0PXRpbWVvdXQudG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IEJhc2VFeGNlcHRpb246XHJcbiAgICAgICAgICAgICAgICAgICAgIyBXZSBuZWVkIHRvIGNsb3NlIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBzaW5jZVxyXG4gICAgICAgICAgICAgICAgICAgICMgYHN0YXJ0X3RscygpYCBwcm9iYWJseSBmYWlsZWQgYmVmb3JlIGl0IGhhZCBhXHJcbiAgICAgICAgICAgICAgICAgICAgIyBjaGFuY2UgdG8gZG8gdGhpczpcclxuICAgICAgICAgICAgICAgICAgICB1bmRlcmx5aW5nX3RyYW5zcG9ydC5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICBleGNlcHQgY2VydF9lcnJvcnMgYXMgZXhjOlxyXG4gICAgICAgICAgICByYWlzZSBDbGllbnRDb25uZWN0b3JDZXJ0aWZpY2F0ZUVycm9yKHJlcS5jb25uZWN0aW9uX2tleSwgZXhjKSBmcm9tIGV4Y1xyXG4gICAgICAgIGV4Y2VwdCBzc2xfZXJyb3JzIGFzIGV4YzpcclxuICAgICAgICAgICAgcmFpc2UgQ2xpZW50Q29ubmVjdG9yU1NMRXJyb3IocmVxLmNvbm5lY3Rpb25fa2V5LCBleGMpIGZyb20gZXhjXHJcbiAgICAgICAgZXhjZXB0IE9TRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICByYWlzZSBjbGllbnRfZXJyb3IocmVxLmNvbm5lY3Rpb25fa2V5LCBleGMpIGZyb20gZXhjXHJcbiAgICAgICAgZXhjZXB0IFR5cGVFcnJvciBhcyB0eXBlX2VycjpcclxuICAgICAgICAgICAgIyBFeGFtcGxlIGNhdXNlIGxvb2tzIGxpa2UgdGhpczpcclxuICAgICAgICAgICAgIyBUeXBlRXJyb3I6IHRyYW5zcG9ydCA8YXN5bmNpby5zc2xwcm90by5fU1NMUHJvdG9jb2xUcmFuc3BvcnRcclxuICAgICAgICAgICAgIyBvYmplY3QgYXQgMHg3Zjc2MDYxNWU0NjA+IGlzIG5vdCBzdXBwb3J0ZWQgYnkgc3RhcnRfdGxzKClcclxuXHJcbiAgICAgICAgICAgIHJhaXNlIENsaWVudENvbm5lY3Rpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICJDYW5ub3QgaW5pdGlhbGl6ZSBhIFRMUy1pbi1UTFMgY29ubmVjdGlvbiB0byBob3N0ICJcclxuICAgICAgICAgICAgICAgIGYie3JlcS5ob3N0IXN9OntyZXEucG9ydDpkfSB0aHJvdWdoIGFuIHVuZGVybHlpbmcgY29ubmVjdGlvbiAiXHJcbiAgICAgICAgICAgICAgICBmInRvIGFuIEhUVFBTIHByb3h5IHtyZXEucHJveHkhc30gc3NsOntyZXEuc3NsIG9yIFwnZGVmYXVsdFwnfSAiXHJcbiAgICAgICAgICAgICAgICBmIlt7dHlwZV9lcnIhc31dIlxyXG4gICAgICAgICAgICApIGZyb20gdHlwZV9lcnJcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICB0bHNfcHJvdG8uY29ubmVjdGlvbl9tYWRlKFxyXG4gICAgICAgICAgICAgICAgdGxzX3RyYW5zcG9ydFxyXG4gICAgICAgICAgICApICAjIEtpY2sgdGhlIHN0YXRlIG1hY2hpbmUgb2YgdGhlIG5ldyBUTFMgcHJvdG9jb2xcclxuXHJcbiAgICAgICAgcmV0dXJuIHRsc190cmFuc3BvcnQsIHRsc19wcm90b1xyXG5cclxuICAgIGFzeW5jIGRlZiBfY3JlYXRlX2RpcmVjdF9jb25uZWN0aW9uKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcmVxOiAiQ2xpZW50UmVxdWVzdCIsXHJcbiAgICAgICAgdHJhY2VzOiBMaXN0WyJUcmFjZSJdLFxyXG4gICAgICAgIHRpbWVvdXQ6ICJDbGllbnRUaW1lb3V0IixcclxuICAgICAgICAqLFxyXG4gICAgICAgIGNsaWVudF9lcnJvcjogVHlwZVtFeGNlcHRpb25dID0gQ2xpZW50Q29ubmVjdG9yRXJyb3IsXHJcbiAgICApIC0+IFR1cGxlW2FzeW5jaW8uVHJhbnNwb3J0LCBSZXNwb25zZUhhbmRsZXJdOlxyXG4gICAgICAgIHNzbGNvbnRleHQgPSBzZWxmLl9nZXRfc3NsX2NvbnRleHQocmVxKVxyXG4gICAgICAgIGZpbmdlcnByaW50ID0gc2VsZi5fZ2V0X2ZpbmdlcnByaW50KHJlcSlcclxuXHJcbiAgICAgICAgaG9zdCA9IHJlcS51cmwucmF3X2hvc3RcclxuICAgICAgICBhc3NlcnQgaG9zdCBpcyBub3QgTm9uZVxyXG4gICAgICAgIHBvcnQgPSByZXEucG9ydFxyXG4gICAgICAgIGFzc2VydCBwb3J0IGlzIG5vdCBOb25lXHJcbiAgICAgICAgaG9zdF9yZXNvbHZlZCA9IGFzeW5jaW8uZW5zdXJlX2Z1dHVyZShcclxuICAgICAgICAgICAgc2VsZi5fcmVzb2x2ZV9ob3N0KGhvc3QsIHBvcnQsIHRyYWNlcz10cmFjZXMpLCBsb29wPXNlbGYuX2xvb3BcclxuICAgICAgICApXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAjIENhbmNlbGxpbmcgdGhpcyBsb29rdXAgc2hvdWxkIG5vdCBjYW5jZWwgdGhlIHVuZGVybHlpbmcgbG9va3VwXHJcbiAgICAgICAgICAgICMgIG9yIGVsc2UgdGhlIGNhbmNlbCBldmVudCB3aWxsIGdldCBicm9hZGNhc3QgdG8gYWxsIHRoZSB3YWl0ZXJzXHJcbiAgICAgICAgICAgICMgIGFjcm9zcyBhbGwgY29ubmVjdGlvbnMuXHJcbiAgICAgICAgICAgIGhvc3RzID0gYXdhaXQgYXN5bmNpby5zaGllbGQoaG9zdF9yZXNvbHZlZClcclxuICAgICAgICBleGNlcHQgYXN5bmNpby5DYW5jZWxsZWRFcnJvcjpcclxuXHJcbiAgICAgICAgICAgIGRlZiBkcm9wX2V4Y2VwdGlvbihmdXQ6ICJhc3luY2lvLkZ1dHVyZVtMaXN0W0RpY3Rbc3RyLCBBbnldXV0iKSAtPiBOb25lOlxyXG4gICAgICAgICAgICAgICAgd2l0aCBzdXBwcmVzcyhFeGNlcHRpb24sIGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3IpOlxyXG4gICAgICAgICAgICAgICAgICAgIGZ1dC5yZXN1bHQoKVxyXG5cclxuICAgICAgICAgICAgaG9zdF9yZXNvbHZlZC5hZGRfZG9uZV9jYWxsYmFjayhkcm9wX2V4Y2VwdGlvbilcclxuICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICBleGNlcHQgT1NFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgICMgaW4gY2FzZSBvZiBwcm94eSBpdCBpcyBub3QgQ2xpZW50UHJveHlDb25uZWN0aW9uRXJyb3JcclxuICAgICAgICAgICAgIyBpdCBpcyBwcm9ibGVtIG9mIHJlc29sdmluZyBwcm94eSBpcCBpdHNlbGZcclxuICAgICAgICAgICAgcmFpc2UgQ2xpZW50Q29ubmVjdG9yRXJyb3IocmVxLmNvbm5lY3Rpb25fa2V5LCBleGMpIGZyb20gZXhjXHJcblxyXG4gICAgICAgIGxhc3RfZXhjID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtFeGNlcHRpb25dXHJcblxyXG4gICAgICAgIGZvciBoaW5mbyBpbiBob3N0czpcclxuICAgICAgICAgICAgaG9zdCA9IGhpbmZvWyJob3N0Il1cclxuICAgICAgICAgICAgcG9ydCA9IGhpbmZvWyJwb3J0Il1cclxuXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHRyYW5zcCwgcHJvdG8gPSBhd2FpdCBzZWxmLl93cmFwX2NyZWF0ZV9jb25uZWN0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZhY3RvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgaG9zdCxcclxuICAgICAgICAgICAgICAgICAgICBwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ9dGltZW91dCxcclxuICAgICAgICAgICAgICAgICAgICBzc2w9c3NsY29udGV4dCxcclxuICAgICAgICAgICAgICAgICAgICBmYW1pbHk9aGluZm9bImZhbWlseSJdLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvPWhpbmZvWyJwcm90byJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZsYWdzPWhpbmZvWyJmbGFncyJdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcl9ob3N0bmFtZT1oaW5mb1siaG9zdG5hbWUiXSBpZiBzc2xjb250ZXh0IGVsc2UgTm9uZSxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbF9hZGRyPXNlbGYuX2xvY2FsX2FkZHIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxPXJlcSxcclxuICAgICAgICAgICAgICAgICAgICBjbGllbnRfZXJyb3I9Y2xpZW50X2Vycm9yLFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBleGNlcHQgQ2xpZW50Q29ubmVjdG9yRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgbGFzdF9leGMgPSBleGNcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICBpZiByZXEuaXNfc3NsKCkgYW5kIGZpbmdlcnByaW50OlxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIGZpbmdlcnByaW50LmNoZWNrKHRyYW5zcClcclxuICAgICAgICAgICAgICAgIGV4Y2VwdCBTZXJ2ZXJGaW5nZXJwcmludE1pc21hdGNoIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3AuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9jbGVhbnVwX2Nsb3NlZF9kaXNhYmxlZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2xlYW51cF9jbG9zZWRfdHJhbnNwb3J0cy5hcHBlbmQodHJhbnNwKVxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RfZXhjID0gZXhjXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cmFuc3AsIHByb3RvXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYXNzZXJ0IGxhc3RfZXhjIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIHJhaXNlIGxhc3RfZXhjXHJcblxyXG4gICAgYXN5bmMgZGVmIF9jcmVhdGVfcHJveHlfY29ubmVjdGlvbihcclxuICAgICAgICBzZWxmLCByZXE6ICJDbGllbnRSZXF1ZXN0IiwgdHJhY2VzOiBMaXN0WyJUcmFjZSJdLCB0aW1lb3V0OiAiQ2xpZW50VGltZW91dCJcclxuICAgICkgLT4gVHVwbGVbYXN5bmNpby5CYXNlVHJhbnNwb3J0LCBSZXNwb25zZUhhbmRsZXJdOlxyXG4gICAgICAgIHNlbGYuX2ZhaWxfb25fbm9fc3RhcnRfdGxzKHJlcSlcclxuICAgICAgICBydW50aW1lX2hhc19zdGFydF90bHMgPSBzZWxmLl9sb29wX3N1cHBvcnRzX3N0YXJ0X3RscygpXHJcblxyXG4gICAgICAgIGhlYWRlcnMgPSB7fSAgIyB0eXBlOiBEaWN0W3N0ciwgc3RyXVxyXG4gICAgICAgIGlmIHJlcS5wcm94eV9oZWFkZXJzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBoZWFkZXJzID0gcmVxLnByb3h5X2hlYWRlcnMgICMgdHlwZTogaWdub3JlW2Fzc2lnbm1lbnRdXHJcbiAgICAgICAgaGVhZGVyc1toZHJzLkhPU1RdID0gcmVxLmhlYWRlcnNbaGRycy5IT1NUXVxyXG5cclxuICAgICAgICB1cmwgPSByZXEucHJveHlcclxuICAgICAgICBhc3NlcnQgdXJsIGlzIG5vdCBOb25lXHJcbiAgICAgICAgcHJveHlfcmVxID0gQ2xpZW50UmVxdWVzdChcclxuICAgICAgICAgICAgaGRycy5NRVRIX0dFVCxcclxuICAgICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsXHJcbiAgICAgICAgICAgIGF1dGg9cmVxLnByb3h5X2F1dGgsXHJcbiAgICAgICAgICAgIGxvb3A9c2VsZi5fbG9vcCxcclxuICAgICAgICAgICAgc3NsPXJlcS5zc2wsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICAjIGNyZWF0ZSBjb25uZWN0aW9uIHRvIHByb3h5IHNlcnZlclxyXG4gICAgICAgIHRyYW5zcG9ydCwgcHJvdG8gPSBhd2FpdCBzZWxmLl9jcmVhdGVfZGlyZWN0X2Nvbm5lY3Rpb24oXHJcbiAgICAgICAgICAgIHByb3h5X3JlcSwgW10sIHRpbWVvdXQsIGNsaWVudF9lcnJvcj1DbGllbnRQcm94eUNvbm5lY3Rpb25FcnJvclxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgIyBNYW55IEhUVFAgcHJveGllcyBoYXMgYnVnZ3kga2VlcGFsaXZlIHN1cHBvcnQuICBMZXRcJ3Mgbm90XHJcbiAgICAgICAgIyByZXVzZSBjb25uZWN0aW9uIGJ1dCBjbG9zZSBpdCBhZnRlciBwcm9jZXNzaW5nIGV2ZXJ5XHJcbiAgICAgICAgIyByZXNwb25zZS5cclxuICAgICAgICBwcm90by5mb3JjZV9jbG9zZSgpXHJcblxyXG4gICAgICAgIGF1dGggPSBwcm94eV9yZXEuaGVhZGVycy5wb3AoaGRycy5BVVRIT1JJWkFUSU9OLCBOb25lKVxyXG4gICAgICAgIGlmIGF1dGggaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIG5vdCByZXEuaXNfc3NsKCk6XHJcbiAgICAgICAgICAgICAgICByZXEuaGVhZGVyc1toZHJzLlBST1hZX0FVVEhPUklaQVRJT05dID0gYXV0aFxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcHJveHlfcmVxLmhlYWRlcnNbaGRycy5QUk9YWV9BVVRIT1JJWkFUSU9OXSA9IGF1dGhcclxuXHJcbiAgICAgICAgaWYgcmVxLmlzX3NzbCgpOlxyXG4gICAgICAgICAgICBpZiBydW50aW1lX2hhc19zdGFydF90bHM6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl93YXJuX2Fib3V0X3Rsc19pbl90bHModHJhbnNwb3J0LCByZXEpXHJcblxyXG4gICAgICAgICAgICAjIEZvciBIVFRQUyByZXF1ZXN0cyBvdmVyIEhUVFAgcHJveHlcclxuICAgICAgICAgICAgIyB3ZSBtdXN0IG5vdGlmeSBwcm94eSB0byB0dW5uZWwgY29ubmVjdGlvblxyXG4gICAgICAgICAgICAjIHNvIHdlIHNlbmQgQ09OTkVDVCBjb21tYW5kOlxyXG4gICAgICAgICAgICAjICAgQ09OTkVDVCB3d3cucHl0aG9uLm9yZzo0NDMgSFRUUC8xLjFcclxuICAgICAgICAgICAgIyAgIEhvc3Q6IHd3dy5weXRob24ub3JnXHJcbiAgICAgICAgICAgICNcclxuICAgICAgICAgICAgIyBuZXh0IHdlIG11c3QgZG8gVExTIGhhbmRzaGFrZSBhbmQgc28gb25cclxuICAgICAgICAgICAgIyB0byBkbyB0aGlzIHdlIG11c3Qgd3JhcCByYXcgc29ja2V0IGludG8gc2VjdXJlIG9uZVxyXG4gICAgICAgICAgICAjIGFzeW5jaW8gaGFuZGxlcyB0aGlzIHBlcmZlY3RseVxyXG4gICAgICAgICAgICBwcm94eV9yZXEubWV0aG9kID0gaGRycy5NRVRIX0NPTk5FQ1RcclxuICAgICAgICAgICAgcHJveHlfcmVxLnVybCA9IHJlcS51cmxcclxuICAgICAgICAgICAga2V5ID0gYXR0ci5ldm9sdmUoXHJcbiAgICAgICAgICAgICAgICByZXEuY29ubmVjdGlvbl9rZXksIHByb3h5PU5vbmUsIHByb3h5X2F1dGg9Tm9uZSwgcHJveHlfaGVhZGVyc19oYXNoPU5vbmVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBjb25uID0gQ29ubmVjdGlvbihzZWxmLCBrZXksIHByb3RvLCBzZWxmLl9sb29wKVxyXG4gICAgICAgICAgICBwcm94eV9yZXNwID0gYXdhaXQgcHJveHlfcmVxLnNlbmQoY29ubilcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgcHJvdG9jb2wgPSBjb25uLl9wcm90b2NvbFxyXG4gICAgICAgICAgICAgICAgYXNzZXJ0IHByb3RvY29sIGlzIG5vdCBOb25lXHJcblxyXG4gICAgICAgICAgICAgICAgIyByZWFkX3VudGlsX2VvZj1UcnVlIHdpbGwgZW5zdXJlIHRoZSBjb25uZWN0aW9uIGlzblwndCBjbG9zZWRcclxuICAgICAgICAgICAgICAgICMgb25jZSB0aGUgcmVzcG9uc2UgaXMgcmVjZWl2ZWQgYW5kIHByb2Nlc3NlZCBhbGxvd2luZ1xyXG4gICAgICAgICAgICAgICAgIyBTVEFSVF9UTFMgdG8gd29yayBvbiB0aGUgY29ubmVjdGlvbiBiZWxvdy5cclxuICAgICAgICAgICAgICAgIHByb3RvY29sLnNldF9yZXNwb25zZV9wYXJhbXMocmVhZF91bnRpbF9lb2Y9cnVudGltZV9oYXNfc3RhcnRfdGxzKVxyXG4gICAgICAgICAgICAgICAgcmVzcCA9IGF3YWl0IHByb3h5X3Jlc3Auc3RhcnQoY29ubilcclxuICAgICAgICAgICAgZXhjZXB0IEJhc2VFeGNlcHRpb246XHJcbiAgICAgICAgICAgICAgICBwcm94eV9yZXNwLmNsb3NlKClcclxuICAgICAgICAgICAgICAgIGNvbm4uY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGNvbm4uX3Byb3RvY29sID0gTm9uZVxyXG4gICAgICAgICAgICAgICAgY29ubi5fdHJhbnNwb3J0ID0gTm9uZVxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHJlc3Auc3RhdHVzICE9IDIwMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHJlc3AucmVhc29uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1lc3NhZ2UgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBSRVNQT05TRVNbcmVzcC5zdGF0dXNdWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIENsaWVudEh0dHBQcm94eUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlfcmVzcC5yZXF1ZXN0X2luZm8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwLmhpc3RvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM9cmVzcC5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlPW1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXJlc3AuaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG5vdCBydW50aW1lX2hhc19zdGFydF90bHM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhd3NvY2sgPSB0cmFuc3BvcnQuZ2V0X2V4dHJhX2luZm8oInNvY2tldCIsIGRlZmF1bHQ9Tm9uZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgcmF3c29jayBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUcmFuc3BvcnQgZG9lcyBub3QgZXhwb3NlIHNvY2tldCBpbnN0YW5jZSJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgIyBEdXBsaWNhdGUgdGhlIHNvY2tldCwgc28gbm93IHdlIGNhbiBjbG9zZSBwcm94eSB0cmFuc3BvcnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmF3c29jayA9IHJhd3NvY2suZHVwKClcclxuICAgICAgICAgICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgICMgSXQgc2hvdWxkblwndCBiZSBjbG9zZWQgaW4gYGZpbmFsbHlgIGJlY2F1c2UgaXRcJ3MgZmVkIHRvXHJcbiAgICAgICAgICAgICAgICAgICAgIyBgbG9vcC5zdGFydF90bHMoKWAgYW5kIHRoZSBkb2NzIHNheSBub3QgdG8gdG91Y2ggaXQgYWZ0ZXJcclxuICAgICAgICAgICAgICAgICAgICAjIHBhc3NpbmcgdGhlcmUuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0LmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICByYWlzZVxyXG4gICAgICAgICAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgICAgICAgICBpZiBub3QgcnVudGltZV9oYXNfc3RhcnRfdGxzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnQuY2xvc2UoKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIG5vdCBydW50aW1lX2hhc19zdGFydF90bHM6XHJcbiAgICAgICAgICAgICAgICAgICAgIyBIVFRQIHByb3h5IHdpdGggc3VwcG9ydCBmb3IgdXBncmFkZSB0byBIVFRQU1xyXG4gICAgICAgICAgICAgICAgICAgIHNzbGNvbnRleHQgPSBzZWxmLl9nZXRfc3NsX2NvbnRleHQocmVxKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl93cmFwX2NyZWF0ZV9jb25uZWN0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9mYWN0b3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0PXRpbWVvdXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNzbD1zc2xjb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb2NrPXJhd3NvY2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlcl9ob3N0bmFtZT1yZXEuaG9zdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxPXJlcSxcclxuICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX3N0YXJ0X3Rsc19jb25uZWN0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICMgQWNjZXNzIHRoZSBvbGQgdHJhbnNwb3J0IGZvciB0aGUgbGFzdCB0aW1lIGJlZm9yZSBpdFwnc1xyXG4gICAgICAgICAgICAgICAgICAgICMgY2xvc2VkIGFuZCBmb3Jnb3R0ZW4gZm9yZXZlcjpcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxPXJlcSxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0PXRpbWVvdXQsXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgICAgICBwcm94eV9yZXNwLmNsb3NlKClcclxuXHJcbiAgICAgICAgcmV0dXJuIHRyYW5zcG9ydCwgcHJvdG9cclxuXHJcblxyXG5jbGFzcyBVbml4Q29ubmVjdG9yKEJhc2VDb25uZWN0b3IpOlxyXG4gICAgIiIiVW5peCBzb2NrZXQgY29ubmVjdG9yLlxyXG5cclxuICAgIHBhdGggLSBVbml4IHNvY2tldCBwYXRoLlxyXG4gICAga2VlcGFsaXZlX3RpbWVvdXQgLSAob3B0aW9uYWwpIEtlZXAtYWxpdmUgdGltZW91dC5cclxuICAgIGZvcmNlX2Nsb3NlIC0gU2V0IHRvIFRydWUgdG8gZm9yY2UgY2xvc2UgYW5kIGRvIHJlY29ubmVjdFxyXG4gICAgICAgIGFmdGVyIGVhY2ggcmVxdWVzdCAoYW5kIGJldHdlZW4gcmVkaXJlY3RzKS5cclxuICAgIGxpbWl0IC0gVGhlIHRvdGFsIG51bWJlciBvZiBzaW11bHRhbmVvdXMgY29ubmVjdGlvbnMuXHJcbiAgICBsaW1pdF9wZXJfaG9zdCAtIE51bWJlciBvZiBzaW11bHRhbmVvdXMgY29ubmVjdGlvbnMgdG8gb25lIGhvc3QuXHJcbiAgICBsb29wIC0gT3B0aW9uYWwgZXZlbnQgbG9vcC5cclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHBhdGg6IHN0cixcclxuICAgICAgICBmb3JjZV9jbG9zZTogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIGtlZXBhbGl2ZV90aW1lb3V0OiBVbmlvbltvYmplY3QsIGZsb2F0LCBOb25lXSA9IHNlbnRpbmVsLFxyXG4gICAgICAgIGxpbWl0OiBpbnQgPSAxMDAsXHJcbiAgICAgICAgbGltaXRfcGVyX2hvc3Q6IGludCA9IDAsXHJcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oXHJcbiAgICAgICAgICAgIGZvcmNlX2Nsb3NlPWZvcmNlX2Nsb3NlLFxyXG4gICAgICAgICAgICBrZWVwYWxpdmVfdGltZW91dD1rZWVwYWxpdmVfdGltZW91dCxcclxuICAgICAgICAgICAgbGltaXQ9bGltaXQsXHJcbiAgICAgICAgICAgIGxpbWl0X3Blcl9ob3N0PWxpbWl0X3Blcl9ob3N0LFxyXG4gICAgICAgICAgICBsb29wPWxvb3AsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX3BhdGggPSBwYXRoXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcGF0aChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiUGF0aCB0byB1bml4IHNvY2tldC4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fcGF0aFxyXG5cclxuICAgIGFzeW5jIGRlZiBfY3JlYXRlX2Nvbm5lY3Rpb24oXHJcbiAgICAgICAgc2VsZiwgcmVxOiAiQ2xpZW50UmVxdWVzdCIsIHRyYWNlczogTGlzdFsiVHJhY2UiXSwgdGltZW91dDogIkNsaWVudFRpbWVvdXQiXHJcbiAgICApIC0+IFJlc3BvbnNlSGFuZGxlcjpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGFzeW5jIHdpdGggY2VpbF90aW1lb3V0KHRpbWVvdXQuc29ja19jb25uZWN0KTpcclxuICAgICAgICAgICAgICAgIF8sIHByb3RvID0gYXdhaXQgc2VsZi5fbG9vcC5jcmVhdGVfdW5peF9jb25uZWN0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZhY3RvcnksIHNlbGYuX3BhdGhcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICBleGNlcHQgT1NFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuaXhDbGllbnRDb25uZWN0b3JFcnJvcihzZWxmLnBhdGgsIHJlcS5jb25uZWN0aW9uX2tleSwgZXhjKSBmcm9tIGV4Y1xyXG5cclxuICAgICAgICByZXR1cm4gY2FzdChSZXNwb25zZUhhbmRsZXIsIHByb3RvKVxyXG5cclxuXHJcbmNsYXNzIE5hbWVkUGlwZUNvbm5lY3RvcihCYXNlQ29ubmVjdG9yKTpcclxuICAgICIiIk5hbWVkIHBpcGUgY29ubmVjdG9yLlxyXG5cclxuICAgIE9ubHkgc3VwcG9ydGVkIGJ5IHRoZSBwcm9hY3RvciBldmVudCBsb29wLlxyXG4gICAgU2VlIGFsc286IGh0dHBzOi8vZG9jcy5weXRob24ub3JnLzMuNy9saWJyYXJ5L2FzeW5jaW8tZXZlbnRsb29wLmh0bWxcclxuXHJcbiAgICBwYXRoIC0gV2luZG93cyBuYW1lZCBwaXBlIHBhdGguXHJcbiAgICBrZWVwYWxpdmVfdGltZW91dCAtIChvcHRpb25hbCkgS2VlcC1hbGl2ZSB0aW1lb3V0LlxyXG4gICAgZm9yY2VfY2xvc2UgLSBTZXQgdG8gVHJ1ZSB0byBmb3JjZSBjbG9zZSBhbmQgZG8gcmVjb25uZWN0XHJcbiAgICAgICAgYWZ0ZXIgZWFjaCByZXF1ZXN0IChhbmQgYmV0d2VlbiByZWRpcmVjdHMpLlxyXG4gICAgbGltaXQgLSBUaGUgdG90YWwgbnVtYmVyIG9mIHNpbXVsdGFuZW91cyBjb25uZWN0aW9ucy5cclxuICAgIGxpbWl0X3Blcl9ob3N0IC0gTnVtYmVyIG9mIHNpbXVsdGFuZW91cyBjb25uZWN0aW9ucyB0byBvbmUgaG9zdC5cclxuICAgIGxvb3AgLSBPcHRpb25hbCBldmVudCBsb29wLlxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcGF0aDogc3RyLFxyXG4gICAgICAgIGZvcmNlX2Nsb3NlOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAga2VlcGFsaXZlX3RpbWVvdXQ6IFVuaW9uW29iamVjdCwgZmxvYXQsIE5vbmVdID0gc2VudGluZWwsXHJcbiAgICAgICAgbGltaXQ6IGludCA9IDEwMCxcclxuICAgICAgICBsaW1pdF9wZXJfaG9zdDogaW50ID0gMCxcclxuICAgICAgICBsb29wOiBPcHRpb25hbFthc3luY2lvLkFic3RyYWN0RXZlbnRMb29wXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhcclxuICAgICAgICAgICAgZm9yY2VfY2xvc2U9Zm9yY2VfY2xvc2UsXHJcbiAgICAgICAgICAgIGtlZXBhbGl2ZV90aW1lb3V0PWtlZXBhbGl2ZV90aW1lb3V0LFxyXG4gICAgICAgICAgICBsaW1pdD1saW1pdCxcclxuICAgICAgICAgICAgbGltaXRfcGVyX2hvc3Q9bGltaXRfcGVyX2hvc3QsXHJcbiAgICAgICAgICAgIGxvb3A9bG9vcCxcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIHNlbGYuX2xvb3AsIGFzeW5jaW8uUHJvYWN0b3JFdmVudExvb3AgICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF1cclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiTmFtZWQgUGlwZXMgb25seSBhdmFpbGFibGUgaW4gcHJvYWN0b3IgIiAibG9vcCB1bmRlciB3aW5kb3dzIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fcGF0aCA9IHBhdGhcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwYXRoKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJQYXRoIHRvIHRoZSBuYW1lZCBwaXBlLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wYXRoXHJcblxyXG4gICAgYXN5bmMgZGVmIF9jcmVhdGVfY29ubmVjdGlvbihcclxuICAgICAgICBzZWxmLCByZXE6ICJDbGllbnRSZXF1ZXN0IiwgdHJhY2VzOiBMaXN0WyJUcmFjZSJdLCB0aW1lb3V0OiAiQ2xpZW50VGltZW91dCJcclxuICAgICkgLT4gUmVzcG9uc2VIYW5kbGVyOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgYXN5bmMgd2l0aCBjZWlsX3RpbWVvdXQodGltZW91dC5zb2NrX2Nvbm5lY3QpOlxyXG4gICAgICAgICAgICAgICAgXywgcHJvdG8gPSBhd2FpdCBzZWxmLl9sb29wLmNyZWF0ZV9waXBlX2Nvbm5lY3Rpb24oICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdICMgbm9xYTogRTUwMVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZhY3RvcnksIHNlbGYuX3BhdGhcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICMgdGhlIGRyYWluIGlzIHJlcXVpcmVkIHNvIHRoYXQgdGhlIGNvbm5lY3Rpb25fbWFkZSBpcyBjYWxsZWRcclxuICAgICAgICAgICAgICAgICMgYW5kIHRyYW5zcG9ydCBpcyBzZXQgb3RoZXJ3aXNlIGl0IGlzIG5vdCBzZXQgYmVmb3JlIHRoZVxyXG4gICAgICAgICAgICAgICAgIyBgYXNzZXJ0IGNvbm4udHJhbnNwb3J0IGlzIG5vdCBOb25lYFxyXG4gICAgICAgICAgICAgICAgIyBpbiBjbGllbnQucHlcJ3MgX3JlcXVlc3QgbWV0aG9kXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKDApXHJcbiAgICAgICAgICAgICAgICAjIG90aGVyIG9wdGlvbiBpcyB0byBtYW51YWxseSBzZXQgdHJhbnNwb3J0IGxpa2VcclxuICAgICAgICAgICAgICAgICMgYHByb3RvLnRyYW5zcG9ydCA9IHRyYW5zYFxyXG4gICAgICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgcmFpc2UgQ2xpZW50Q29ubmVjdG9yRXJyb3IocmVxLmNvbm5lY3Rpb25fa2V5LCBleGMpIGZyb20gZXhjXHJcblxyXG4gICAgICAgIHJldHVybiBjYXN0KFJlc3BvbnNlSGFuZGxlciwgcHJvdG8pXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2NsaWVudF9wcm90by5weScsIGInaW1wb3J0IGFzeW5jaW9cclxuZnJvbSBjb250ZXh0bGliIGltcG9ydCBzdXBwcmVzc1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBPcHRpb25hbCwgVHVwbGVcclxuXHJcbmZyb20gLmJhc2VfcHJvdG9jb2wgaW1wb3J0IEJhc2VQcm90b2NvbFxyXG5mcm9tIC5jbGllbnRfZXhjZXB0aW9ucyBpbXBvcnQgKFxyXG4gICAgQ2xpZW50T1NFcnJvcixcclxuICAgIENsaWVudFBheWxvYWRFcnJvcixcclxuICAgIFNlcnZlckRpc2Nvbm5lY3RlZEVycm9yLFxyXG4gICAgU2VydmVyVGltZW91dEVycm9yLFxyXG4pXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IEJhc2VUaW1lckNvbnRleHRcclxuZnJvbSAuaHR0cCBpbXBvcnQgSHR0cFJlc3BvbnNlUGFyc2VyLCBSYXdSZXNwb25zZU1lc3NhZ2VcclxuZnJvbSAuc3RyZWFtcyBpbXBvcnQgRU1QVFlfUEFZTE9BRCwgRGF0YVF1ZXVlLCBTdHJlYW1SZWFkZXJcclxuXHJcblxyXG5jbGFzcyBSZXNwb25zZUhhbmRsZXIoQmFzZVByb3RvY29sLCBEYXRhUXVldWVbVHVwbGVbUmF3UmVzcG9uc2VNZXNzYWdlLCBTdHJlYW1SZWFkZXJdXSk6XHJcbiAgICAiIiJIZWxwZXIgY2xhc3MgdG8gYWRhcHQgYmV0d2VlbiBQcm90b2NvbCBhbmQgU3RyZWFtUmVhZGVyLiIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsb29wOiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wKSAtPiBOb25lOlxyXG4gICAgICAgIEJhc2VQcm90b2NvbC5fX2luaXRfXyhzZWxmLCBsb29wPWxvb3ApXHJcbiAgICAgICAgRGF0YVF1ZXVlLl9faW5pdF9fKHNlbGYsIGxvb3ApXHJcblxyXG4gICAgICAgIHNlbGYuX3Nob3VsZF9jbG9zZSA9IEZhbHNlXHJcblxyXG4gICAgICAgIHNlbGYuX3BheWxvYWQ6IE9wdGlvbmFsW1N0cmVhbVJlYWRlcl0gPSBOb25lXHJcbiAgICAgICAgc2VsZi5fc2tpcF9wYXlsb2FkID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlciA9IE5vbmVcclxuXHJcbiAgICAgICAgc2VsZi5fdGltZXIgPSBOb25lXHJcblxyXG4gICAgICAgIHNlbGYuX3RhaWwgPSBiIiJcclxuICAgICAgICBzZWxmLl91cGdyYWRlZCA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fcGFyc2VyID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtIdHRwUmVzcG9uc2VQYXJzZXJdXHJcblxyXG4gICAgICAgIHNlbGYuX3JlYWRfdGltZW91dCA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbZmxvYXRdXHJcbiAgICAgICAgc2VsZi5fcmVhZF90aW1lb3V0X2hhbmRsZSA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5UaW1lckhhbmRsZV1cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB1cGdyYWRlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl91cGdyYWRlZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHNob3VsZF9jbG9zZShzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIGlmIHNlbGYuX3BheWxvYWQgaXMgbm90IE5vbmUgYW5kIG5vdCBzZWxmLl9wYXlsb2FkLmlzX2VvZigpIG9yIHNlbGYuX3VwZ3JhZGVkOlxyXG4gICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLl9zaG91bGRfY2xvc2VcclxuICAgICAgICAgICAgb3Igc2VsZi5fdXBncmFkZWRcclxuICAgICAgICAgICAgb3Igc2VsZi5leGNlcHRpb24oKSBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICBvciBzZWxmLl9wYXlsb2FkX3BhcnNlciBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICBvciBsZW4oc2VsZikgPiAwXHJcbiAgICAgICAgICAgIG9yIGJvb2woc2VsZi5fdGFpbClcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGZvcmNlX2Nsb3NlKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fc2hvdWxkX2Nsb3NlID0gVHJ1ZVxyXG5cclxuICAgIGRlZiBjbG9zZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHRyYW5zcG9ydCA9IHNlbGYudHJhbnNwb3J0XHJcbiAgICAgICAgaWYgdHJhbnNwb3J0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB0cmFuc3BvcnQuY2xvc2UoKVxyXG4gICAgICAgICAgICBzZWxmLnRyYW5zcG9ydCA9IE5vbmVcclxuICAgICAgICAgICAgc2VsZi5fcGF5bG9hZCA9IE5vbmVcclxuICAgICAgICAgICAgc2VsZi5fZHJvcF90aW1lb3V0KClcclxuXHJcbiAgICBkZWYgaXNfY29ubmVjdGVkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYudHJhbnNwb3J0IGlzIG5vdCBOb25lIGFuZCBub3Qgc2VsZi50cmFuc3BvcnQuaXNfY2xvc2luZygpXHJcblxyXG4gICAgZGVmIGNvbm5lY3Rpb25fbG9zdChzZWxmLCBleGM6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2Ryb3BfdGltZW91dCgpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX3BheWxvYWRfcGFyc2VyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB3aXRoIHN1cHByZXNzKEV4Y2VwdGlvbik6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlci5mZWVkX2VvZigpXHJcblxyXG4gICAgICAgIHVuY29tcGxldGVkID0gTm9uZVxyXG4gICAgICAgIGlmIHNlbGYuX3BhcnNlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgdW5jb21wbGV0ZWQgPSBzZWxmLl9wYXJzZXIuZmVlZF9lb2YoKVxyXG4gICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fcGF5bG9hZCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXlsb2FkLnNldF9leGNlcHRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENsaWVudFBheWxvYWRFcnJvcigiUmVzcG9uc2UgcGF5bG9hZCBpcyBub3QgY29tcGxldGVkIilcclxuICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIG5vdCBzZWxmLmlzX2VvZigpOlxyXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKGV4YywgT1NFcnJvcik6XHJcbiAgICAgICAgICAgICAgICBleGMgPSBDbGllbnRPU0Vycm9yKCpleGMuYXJncylcclxuICAgICAgICAgICAgaWYgZXhjIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICBleGMgPSBTZXJ2ZXJEaXNjb25uZWN0ZWRFcnJvcih1bmNvbXBsZXRlZClcclxuICAgICAgICAgICAgIyBhc3NpZ25zIHNlbGYuX3Nob3VsZF9jbG9zZSB0byBUcnVlIGFzIHNpZGUgZWZmZWN0LFxyXG4gICAgICAgICAgICAjIHdlIGRvIGl0IGFueXdheSBiZWxvd1xyXG4gICAgICAgICAgICBzZWxmLnNldF9leGNlcHRpb24oZXhjKVxyXG5cclxuICAgICAgICBzZWxmLl9zaG91bGRfY2xvc2UgPSBUcnVlXHJcbiAgICAgICAgc2VsZi5fcGFyc2VyID0gTm9uZVxyXG4gICAgICAgIHNlbGYuX3BheWxvYWQgPSBOb25lXHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZF9wYXJzZXIgPSBOb25lXHJcbiAgICAgICAgc2VsZi5fcmVhZGluZ19wYXVzZWQgPSBGYWxzZVxyXG5cclxuICAgICAgICBzdXBlcigpLmNvbm5lY3Rpb25fbG9zdChleGMpXHJcblxyXG4gICAgZGVmIGVvZl9yZWNlaXZlZChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICMgc2hvdWxkIGNhbGwgcGFyc2VyLmZlZWRfZW9mKCkgbW9zdCBsaWtlbHlcclxuICAgICAgICBzZWxmLl9kcm9wX3RpbWVvdXQoKVxyXG5cclxuICAgIGRlZiBwYXVzZV9yZWFkaW5nKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5wYXVzZV9yZWFkaW5nKClcclxuICAgICAgICBzZWxmLl9kcm9wX3RpbWVvdXQoKVxyXG5cclxuICAgIGRlZiByZXN1bWVfcmVhZGluZyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkucmVzdW1lX3JlYWRpbmcoKVxyXG4gICAgICAgIHNlbGYuX3Jlc2NoZWR1bGVfdGltZW91dCgpXHJcblxyXG4gICAgZGVmIHNldF9leGNlcHRpb24oc2VsZiwgZXhjOiBCYXNlRXhjZXB0aW9uKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3Nob3VsZF9jbG9zZSA9IFRydWVcclxuICAgICAgICBzZWxmLl9kcm9wX3RpbWVvdXQoKVxyXG4gICAgICAgIHN1cGVyKCkuc2V0X2V4Y2VwdGlvbihleGMpXHJcblxyXG4gICAgZGVmIHNldF9wYXJzZXIoc2VsZiwgcGFyc2VyOiBBbnksIHBheWxvYWQ6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICAjIFRPRE86IGFjdHVhbCB0eXBlcyBhcmU6XHJcbiAgICAgICAgIyAgIHBhcnNlcjogV2ViU29ja2V0UmVhZGVyXHJcbiAgICAgICAgIyAgIHBheWxvYWQ6IEZsb3dDb250cm9sRGF0YVF1ZXVlXHJcbiAgICAgICAgIyBidXQgdGhleSBhcmUgbm90IGdlbmVyaSBlbm91Z2hcclxuICAgICAgICAjIE5lZWQgYW4gQUJDIGZvciBib3RoIHR5cGVzXHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZCA9IHBheWxvYWRcclxuICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlciA9IHBhcnNlclxyXG5cclxuICAgICAgICBzZWxmLl9kcm9wX3RpbWVvdXQoKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl90YWlsOlxyXG4gICAgICAgICAgICBkYXRhLCBzZWxmLl90YWlsID0gc2VsZi5fdGFpbCwgYiIiXHJcbiAgICAgICAgICAgIHNlbGYuZGF0YV9yZWNlaXZlZChkYXRhKVxyXG5cclxuICAgIGRlZiBzZXRfcmVzcG9uc2VfcGFyYW1zKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgKixcclxuICAgICAgICB0aW1lcjogT3B0aW9uYWxbQmFzZVRpbWVyQ29udGV4dF0gPSBOb25lLFxyXG4gICAgICAgIHNraXBfcGF5bG9hZDogYm9vbCA9IEZhbHNlLFxyXG4gICAgICAgIHJlYWRfdW50aWxfZW9mOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgYXV0b19kZWNvbXByZXNzOiBib29sID0gVHJ1ZSxcclxuICAgICAgICByZWFkX3RpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUsXHJcbiAgICAgICAgcmVhZF9idWZzaXplOiBpbnQgPSAyICoqIDE2LFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3NraXBfcGF5bG9hZCA9IHNraXBfcGF5bG9hZFxyXG5cclxuICAgICAgICBzZWxmLl9yZWFkX3RpbWVvdXQgPSByZWFkX3RpbWVvdXRcclxuICAgICAgICBzZWxmLl9yZXNjaGVkdWxlX3RpbWVvdXQoKVxyXG5cclxuICAgICAgICBzZWxmLl9wYXJzZXIgPSBIdHRwUmVzcG9uc2VQYXJzZXIoXHJcbiAgICAgICAgICAgIHNlbGYsXHJcbiAgICAgICAgICAgIHNlbGYuX2xvb3AsXHJcbiAgICAgICAgICAgIHJlYWRfYnVmc2l6ZSxcclxuICAgICAgICAgICAgdGltZXI9dGltZXIsXHJcbiAgICAgICAgICAgIHBheWxvYWRfZXhjZXB0aW9uPUNsaWVudFBheWxvYWRFcnJvcixcclxuICAgICAgICAgICAgcmVzcG9uc2Vfd2l0aF9ib2R5PW5vdCBza2lwX3BheWxvYWQsXHJcbiAgICAgICAgICAgIHJlYWRfdW50aWxfZW9mPXJlYWRfdW50aWxfZW9mLFxyXG4gICAgICAgICAgICBhdXRvX2RlY29tcHJlc3M9YXV0b19kZWNvbXByZXNzLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fdGFpbDpcclxuICAgICAgICAgICAgZGF0YSwgc2VsZi5fdGFpbCA9IHNlbGYuX3RhaWwsIGIiIlxyXG4gICAgICAgICAgICBzZWxmLmRhdGFfcmVjZWl2ZWQoZGF0YSlcclxuXHJcbiAgICBkZWYgX2Ryb3BfdGltZW91dChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX3JlYWRfdGltZW91dF9oYW5kbGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3JlYWRfdGltZW91dF9oYW5kbGUuY2FuY2VsKClcclxuICAgICAgICAgICAgc2VsZi5fcmVhZF90aW1lb3V0X2hhbmRsZSA9IE5vbmVcclxuXHJcbiAgICBkZWYgX3Jlc2NoZWR1bGVfdGltZW91dChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHRpbWVvdXQgPSBzZWxmLl9yZWFkX3RpbWVvdXRcclxuICAgICAgICBpZiBzZWxmLl9yZWFkX3RpbWVvdXRfaGFuZGxlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9yZWFkX3RpbWVvdXRfaGFuZGxlLmNhbmNlbCgpXHJcblxyXG4gICAgICAgIGlmIHRpbWVvdXQ6XHJcbiAgICAgICAgICAgIHNlbGYuX3JlYWRfdGltZW91dF9oYW5kbGUgPSBzZWxmLl9sb29wLmNhbGxfbGF0ZXIoXHJcbiAgICAgICAgICAgICAgICB0aW1lb3V0LCBzZWxmLl9vbl9yZWFkX3RpbWVvdXRcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX3JlYWRfdGltZW91dF9oYW5kbGUgPSBOb25lXHJcblxyXG4gICAgZGVmIF9vbl9yZWFkX3RpbWVvdXQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBleGMgPSBTZXJ2ZXJUaW1lb3V0RXJyb3IoIlRpbWVvdXQgb24gcmVhZGluZyBkYXRhIGZyb20gc29ja2V0IilcclxuICAgICAgICBzZWxmLnNldF9leGNlcHRpb24oZXhjKVxyXG4gICAgICAgIGlmIHNlbGYuX3BheWxvYWQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3BheWxvYWQuc2V0X2V4Y2VwdGlvbihleGMpXHJcblxyXG4gICAgZGVmIGRhdGFfcmVjZWl2ZWQoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fcmVzY2hlZHVsZV90aW1lb3V0KClcclxuXHJcbiAgICAgICAgaWYgbm90IGRhdGE6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICAjIGN1c3RvbSBwYXlsb2FkIHBhcnNlclxyXG4gICAgICAgIGlmIHNlbGYuX3BheWxvYWRfcGFyc2VyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBlb2YsIHRhaWwgPSBzZWxmLl9wYXlsb2FkX3BhcnNlci5mZWVkX2RhdGEoZGF0YSlcclxuICAgICAgICAgICAgaWYgZW9mOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fcGF5bG9hZCA9IE5vbmVcclxuICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyID0gTm9uZVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIHRhaWw6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhX3JlY2VpdmVkKHRhaWwpXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3VwZ3JhZGVkIG9yIHNlbGYuX3BhcnNlciBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgIyBpLmUuIHdlYnNvY2tldCBjb25uZWN0aW9uLCB3ZWJzb2NrZXQgcGFyc2VyIGlzIG5vdCBzZXQgeWV0XHJcbiAgICAgICAgICAgICAgICBzZWxmLl90YWlsICs9IGRhdGFcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICMgcGFyc2UgaHR0cCBtZXNzYWdlc1xyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLCB1cGdyYWRlZCwgdGFpbCA9IHNlbGYuX3BhcnNlci5mZWVkX2RhdGEoZGF0YSlcclxuICAgICAgICAgICAgICAgIGV4Y2VwdCBCYXNlRXhjZXB0aW9uIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnRyYW5zcG9ydCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgIyBjb25uZWN0aW9uLnJlbGVhc2UoKSBjb3VsZCBiZSBjYWxsZWQgQkVGT1JFXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICMgZGF0YV9yZWNlaXZlZCgpLCB0aGUgdHJhbnNwb3J0IGlzIGFscmVhZHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgIyBjbG9zZWQgaW4gdGhpcyBjYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHJhbnNwb3J0LmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICAjIHNob3VsZF9jbG9zZSBpcyBUcnVlIGFmdGVyIHRoZSBjYWxsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRfZXhjZXB0aW9uKGV4YylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgICAgICAgICBzZWxmLl91cGdyYWRlZCA9IHVwZ3JhZGVkXHJcblxyXG4gICAgICAgICAgICAgICAgcGF5bG9hZDogT3B0aW9uYWxbU3RyZWFtUmVhZGVyXSA9IE5vbmVcclxuICAgICAgICAgICAgICAgIGZvciBtZXNzYWdlLCBwYXlsb2FkIGluIG1lc3NhZ2VzOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG1lc3NhZ2Uuc2hvdWxkX2Nsb3NlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zaG91bGRfY2xvc2UgPSBUcnVlXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWQgPSBwYXlsb2FkXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX3NraXBfcGF5bG9hZCBvciBtZXNzYWdlLmNvZGUgaW4gKDIwNCwgMzA0KTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mZWVkX2RhdGEoKG1lc3NhZ2UsIEVNUFRZX1BBWUxPQUQpLCAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmVlZF9kYXRhKChtZXNzYWdlLCBwYXlsb2FkKSwgMClcclxuICAgICAgICAgICAgICAgIGlmIHBheWxvYWQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgIyBuZXcgbWVzc2FnZShzKSB3YXMgcHJvY2Vzc2VkXHJcbiAgICAgICAgICAgICAgICAgICAgIyByZWdpc3RlciB0aW1lb3V0IGhhbmRsZXIgdW5zdWJzY3JpYmluZ1xyXG4gICAgICAgICAgICAgICAgICAgICMgZWl0aGVyIG9uIGVuZC1vZi1zdHJlYW0gb3IgaW1tZWRpYXRlbHkgZm9yXHJcbiAgICAgICAgICAgICAgICAgICAgIyBFTVBUWV9QQVlMT0FEXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgcGF5bG9hZCBpcyBub3QgRU1QVFlfUEFZTE9BRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5vbl9lb2Yoc2VsZi5fZHJvcF90aW1lb3V0KVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2Ryb3BfdGltZW91dCgpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgdGFpbDpcclxuICAgICAgICAgICAgICAgICAgICBpZiB1cGdyYWRlZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXRhX3JlY2VpdmVkKHRhaWwpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fdGFpbCA9IHRhaWxcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvbG9ja3MucHknLCBiJ2ltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBjb2xsZWN0aW9uc1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBEZXF1ZSwgT3B0aW9uYWxcclxuXHJcblxyXG5jbGFzcyBFdmVudFJlc3VsdE9yRXJyb3I6XHJcbiAgICAiIiJFdmVudCBhc3luY2lvIGxvY2sgaGVscGVyIGNsYXNzLlxyXG5cclxuICAgIFdyYXBzIHRoZSBFdmVudCBhc3luY2lvIGxvY2sgYWxsb3dpbmcgZWl0aGVyIHRvIGF3YWtlIHRoZVxyXG4gICAgbG9ja2VkIFRhc2tzIHdpdGhvdXQgYW55IGVycm9yIG9yIHJhaXNpbmcgYW4gZXhjZXB0aW9uLlxyXG5cclxuICAgIHRoYW5rcyB0byBAdm9ycGFsc21pdGggZm9yIHRoZSBzaW1wbGUgZGVzaWduLlxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3ApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3BcclxuICAgICAgICBzZWxmLl9leGMgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dXHJcbiAgICAgICAgc2VsZi5fZXZlbnQgPSBhc3luY2lvLkV2ZW50KClcclxuICAgICAgICBzZWxmLl93YWl0ZXJzID0gY29sbGVjdGlvbnMuZGVxdWUoKSAgIyB0eXBlOiBEZXF1ZVthc3luY2lvLkZ1dHVyZVtBbnldXVxyXG5cclxuICAgIGRlZiBzZXQoc2VsZiwgZXhjOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZXhjID0gZXhjXHJcbiAgICAgICAgc2VsZi5fZXZlbnQuc2V0KClcclxuXHJcbiAgICBhc3luYyBkZWYgd2FpdChzZWxmKSAtPiBBbnk6XHJcbiAgICAgICAgd2FpdGVyID0gc2VsZi5fbG9vcC5jcmVhdGVfdGFzayhzZWxmLl9ldmVudC53YWl0KCkpXHJcbiAgICAgICAgc2VsZi5fd2FpdGVycy5hcHBlbmQod2FpdGVyKVxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgdmFsID0gYXdhaXQgd2FpdGVyXHJcbiAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgc2VsZi5fd2FpdGVycy5yZW1vdmUod2FpdGVyKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9leGMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIHNlbGYuX2V4Y1xyXG5cclxuICAgICAgICByZXR1cm4gdmFsXHJcblxyXG4gICAgZGVmIGNhbmNlbChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkNhbmNlbCBhbGwgd2FpdGVycyIiIlxyXG4gICAgICAgIGZvciB3YWl0ZXIgaW4gc2VsZi5fd2FpdGVyczpcclxuICAgICAgICAgICAgd2FpdGVyLmNhbmNlbCgpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3Jlc29sdmVyLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgc29ja2V0XHJcbmZyb20gdHlwaW5nIGltcG9ydCBBbnksIERpY3QsIExpc3QsIE9wdGlvbmFsLCBUeXBlLCBVbmlvblxyXG5cclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdFJlc29sdmVyXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IGdldF9ydW5uaW5nX2xvb3BcclxuXHJcbl9fYWxsX18gPSAoIlRocmVhZGVkUmVzb2x2ZXIiLCAiQXN5bmNSZXNvbHZlciIsICJEZWZhdWx0UmVzb2x2ZXIiKVxyXG5cclxudHJ5OlxyXG4gICAgaW1wb3J0IGFpb2Ruc1xyXG5cclxuICAgICMgYWlvZG5zX2RlZmF1bHQgPSBoYXNhdHRyKGFpb2Rucy5ETlNSZXNvbHZlciwgXCdnZXRob3N0YnluYW1lXCcpXHJcbmV4Y2VwdCBJbXBvcnRFcnJvcjogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgYWlvZG5zID0gTm9uZVxyXG5cclxuYWlvZG5zX2RlZmF1bHQgPSBGYWxzZVxyXG5cclxuXHJcbmNsYXNzIFRocmVhZGVkUmVzb2x2ZXIoQWJzdHJhY3RSZXNvbHZlcik6XHJcbiAgICAiIiJUaHJlYWRlZCByZXNvbHZlci5cclxuXHJcbiAgICBVc2VzIGFuIEV4ZWN1dG9yIGZvciBzeW5jaHJvbm91cyBnZXRhZGRyaW5mbygpIGNhbGxzLlxyXG4gICAgY29uY3VycmVudC5mdXR1cmVzLlRocmVhZFBvb2xFeGVjdXRvciBpcyB1c2VkIGJ5IGRlZmF1bHQuXHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2xvb3AgPSBnZXRfcnVubmluZ19sb29wKGxvb3ApXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlc29sdmUoXHJcbiAgICAgICAgc2VsZiwgaG9zdG5hbWU6IHN0ciwgcG9ydDogaW50ID0gMCwgZmFtaWx5OiBpbnQgPSBzb2NrZXQuQUZfSU5FVFxyXG4gICAgKSAtPiBMaXN0W0RpY3Rbc3RyLCBBbnldXTpcclxuICAgICAgICBpbmZvcyA9IGF3YWl0IHNlbGYuX2xvb3AuZ2V0YWRkcmluZm8oXHJcbiAgICAgICAgICAgIGhvc3RuYW1lLFxyXG4gICAgICAgICAgICBwb3J0LFxyXG4gICAgICAgICAgICB0eXBlPXNvY2tldC5TT0NLX1NUUkVBTSxcclxuICAgICAgICAgICAgZmFtaWx5PWZhbWlseSxcclxuICAgICAgICAgICAgZmxhZ3M9c29ja2V0LkFJX0FERFJDT05GSUcsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBob3N0cyA9IFtdXHJcbiAgICAgICAgZm9yIGZhbWlseSwgXywgcHJvdG8sIF8sIGFkZHJlc3MgaW4gaW5mb3M6XHJcbiAgICAgICAgICAgIGlmIGZhbWlseSA9PSBzb2NrZXQuQUZfSU5FVDY6XHJcbiAgICAgICAgICAgICAgICBpZiBsZW4oYWRkcmVzcykgPCAzOlxyXG4gICAgICAgICAgICAgICAgICAgICMgSVB2NiBpcyBub3Qgc3VwcG9ydGVkIGJ5IFB5dGhvbiBidWlsZCxcclxuICAgICAgICAgICAgICAgICAgICAjIG9yIElQdjYgaXMgbm90IGVuYWJsZWQgaW4gdGhlIGhvc3RcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgaWYgYWRkcmVzc1szXTogICMgdHlwZTogaWdub3JlW21pc2NdXHJcbiAgICAgICAgICAgICAgICAgICAgIyBUaGlzIGlzIGVzc2VudGlhbCBmb3IgbGluay1sb2NhbCBJUHY2IGFkZHJlc3Nlcy5cclxuICAgICAgICAgICAgICAgICAgICAjIExMIElQdjYgaXMgYSBWRVJZIHJhcmUgY2FzZS4gU3RyaWN0bHkgc3BlYWtpbmcsIHdlIHNob3VsZCB1c2VcclxuICAgICAgICAgICAgICAgICAgICAjIGdldG5hbWVpbmZvKCkgdW5jb25kaXRpb25hbGx5LCBidXQgcGVyZm9ybWFuY2UgbWFrZXMgc2Vuc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgaG9zdCwgX3BvcnQgPSBzb2NrZXQuZ2V0bmFtZWluZm8oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MsIHNvY2tldC5OSV9OVU1FUklDSE9TVCB8IHNvY2tldC5OSV9OVU1FUklDU0VSVlxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICBwb3J0ID0gaW50KF9wb3J0KVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBob3N0LCBwb3J0ID0gYWRkcmVzc1s6Ml1cclxuICAgICAgICAgICAgZWxzZTogICMgSVB2NFxyXG4gICAgICAgICAgICAgICAgYXNzZXJ0IGZhbWlseSA9PSBzb2NrZXQuQUZfSU5FVFxyXG4gICAgICAgICAgICAgICAgaG9zdCwgcG9ydCA9IGFkZHJlc3MgICMgdHlwZTogaWdub3JlW21pc2NdXHJcbiAgICAgICAgICAgIGhvc3RzLmFwcGVuZChcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAiaG9zdG5hbWUiOiBob3N0bmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAiaG9zdCI6IGhvc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgInBvcnQiOiBwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICJmYW1pbHkiOiBmYW1pbHksXHJcbiAgICAgICAgICAgICAgICAgICAgInByb3RvIjogcHJvdG8sXHJcbiAgICAgICAgICAgICAgICAgICAgImZsYWdzIjogc29ja2V0LkFJX05VTUVSSUNIT1NUIHwgc29ja2V0LkFJX05VTUVSSUNTRVJWLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBob3N0c1xyXG5cclxuICAgIGFzeW5jIGRlZiBjbG9zZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBBc3luY1Jlc29sdmVyKEFic3RyYWN0UmVzb2x2ZXIpOlxyXG4gICAgIiIiVXNlIHRoZSBgYWlvZG5zYCBwYWNrYWdlIHRvIG1ha2UgYXN5bmNocm9ub3VzIEROUyBsb29rdXBzIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxyXG4gICAgICAgICphcmdzOiBBbnksXHJcbiAgICAgICAgKiprd2FyZ3M6IEFueVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGFpb2RucyBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIlJlc29sdmVyIHJlcXVpcmVzIGFpb2RucyBsaWJyYXJ5IilcclxuXHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGdldF9ydW5uaW5nX2xvb3AobG9vcClcclxuICAgICAgICBzZWxmLl9yZXNvbHZlciA9IGFpb2Rucy5ETlNSZXNvbHZlcigqYXJncywgbG9vcD1sb29wLCAqKmt3YXJncylcclxuXHJcbiAgICAgICAgaWYgbm90IGhhc2F0dHIoc2VsZi5fcmVzb2x2ZXIsICJnZXRob3N0YnluYW1lIik6XHJcbiAgICAgICAgICAgICMgYWlvZG5zIDEuMSBpcyBub3QgYXZhaWxhYmxlLCBmYWxsYmFjayB0byBETlNSZXNvbHZlci5xdWVyeVxyXG4gICAgICAgICAgICBzZWxmLnJlc29sdmUgPSBzZWxmLl9yZXNvbHZlX3dpdGhfcXVlcnkgICMgdHlwZTogaWdub3JlXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlc29sdmUoXHJcbiAgICAgICAgc2VsZiwgaG9zdDogc3RyLCBwb3J0OiBpbnQgPSAwLCBmYW1pbHk6IGludCA9IHNvY2tldC5BRl9JTkVUXHJcbiAgICApIC0+IExpc3RbRGljdFtzdHIsIEFueV1dOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgcmVzcCA9IGF3YWl0IHNlbGYuX3Jlc29sdmVyLmdldGhvc3RieW5hbWUoaG9zdCwgZmFtaWx5KVxyXG4gICAgICAgIGV4Y2VwdCBhaW9kbnMuZXJyb3IuRE5TRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICBtc2cgPSBleGMuYXJnc1sxXSBpZiBsZW4oZXhjLmFyZ3MpID49IDEgZWxzZSAiRE5TIGxvb2t1cCBmYWlsZWQiXHJcbiAgICAgICAgICAgIHJhaXNlIE9TRXJyb3IobXNnKSBmcm9tIGV4Y1xyXG4gICAgICAgIGhvc3RzID0gW11cclxuICAgICAgICBmb3IgYWRkcmVzcyBpbiByZXNwLmFkZHJlc3NlczpcclxuICAgICAgICAgICAgaG9zdHMuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICJob3N0bmFtZSI6IGhvc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgImhvc3QiOiBhZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICJwb3J0IjogcG9ydCxcclxuICAgICAgICAgICAgICAgICAgICAiZmFtaWx5IjogZmFtaWx5LFxyXG4gICAgICAgICAgICAgICAgICAgICJwcm90byI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgImZsYWdzIjogc29ja2V0LkFJX05VTUVSSUNIT1NUIHwgc29ja2V0LkFJX05VTUVSSUNTRVJWLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIG5vdCBob3N0czpcclxuICAgICAgICAgICAgcmFpc2UgT1NFcnJvcigiRE5TIGxvb2t1cCBmYWlsZWQiKVxyXG5cclxuICAgICAgICByZXR1cm4gaG9zdHNcclxuXHJcbiAgICBhc3luYyBkZWYgX3Jlc29sdmVfd2l0aF9xdWVyeShcclxuICAgICAgICBzZWxmLCBob3N0OiBzdHIsIHBvcnQ6IGludCA9IDAsIGZhbWlseTogaW50ID0gc29ja2V0LkFGX0lORVRcclxuICAgICkgLT4gTGlzdFtEaWN0W3N0ciwgQW55XV06XHJcbiAgICAgICAgaWYgZmFtaWx5ID09IHNvY2tldC5BRl9JTkVUNjpcclxuICAgICAgICAgICAgcXR5cGUgPSAiQUFBQSJcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBxdHlwZSA9ICJBIlxyXG5cclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHJlc3AgPSBhd2FpdCBzZWxmLl9yZXNvbHZlci5xdWVyeShob3N0LCBxdHlwZSlcclxuICAgICAgICBleGNlcHQgYWlvZG5zLmVycm9yLkROU0Vycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgbXNnID0gZXhjLmFyZ3NbMV0gaWYgbGVuKGV4Yy5hcmdzKSA+PSAxIGVsc2UgIkROUyBsb29rdXAgZmFpbGVkIlxyXG4gICAgICAgICAgICByYWlzZSBPU0Vycm9yKG1zZykgZnJvbSBleGNcclxuXHJcbiAgICAgICAgaG9zdHMgPSBbXVxyXG4gICAgICAgIGZvciByciBpbiByZXNwOlxyXG4gICAgICAgICAgICBob3N0cy5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgImhvc3RuYW1lIjogaG9zdCxcclxuICAgICAgICAgICAgICAgICAgICAiaG9zdCI6IHJyLmhvc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgInBvcnQiOiBwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICJmYW1pbHkiOiBmYW1pbHksXHJcbiAgICAgICAgICAgICAgICAgICAgInByb3RvIjogMCxcclxuICAgICAgICAgICAgICAgICAgICAiZmxhZ3MiOiBzb2NrZXQuQUlfTlVNRVJJQ0hPU1QsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgbm90IGhvc3RzOlxyXG4gICAgICAgICAgICByYWlzZSBPU0Vycm9yKCJETlMgbG9va3VwIGZhaWxlZCIpXHJcblxyXG4gICAgICAgIHJldHVybiBob3N0c1xyXG5cclxuICAgIGFzeW5jIGRlZiBjbG9zZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3Jlc29sdmVyLmNhbmNlbCgpXHJcblxyXG5cclxuX0RlZmF1bHRUeXBlID0gVHlwZVtVbmlvbltBc3luY1Jlc29sdmVyLCBUaHJlYWRlZFJlc29sdmVyXV1cclxuRGVmYXVsdFJlc29sdmVyOiBfRGVmYXVsdFR5cGUgPSBBc3luY1Jlc29sdmVyIGlmIGFpb2Ruc19kZWZhdWx0IGVsc2UgVGhyZWFkZWRSZXNvbHZlclxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC90cmFjaW5nLnB5JywgYidmcm9tIHR5cGVzIGltcG9ydCBTaW1wbGVOYW1lc3BhY2VcclxuZnJvbSB0eXBpbmcgaW1wb3J0IFRZUEVfQ0hFQ0tJTkcsIEF3YWl0YWJsZSwgT3B0aW9uYWwsIFR5cGUsIFR5cGVWYXJcclxuXHJcbmltcG9ydCBhdHRyXHJcbmZyb20gYWlvc2lnbmFsIGltcG9ydCBTaWduYWxcclxuZnJvbSBtdWx0aWRpY3QgaW1wb3J0IENJTXVsdGlEaWN0XHJcbmZyb20geWFybCBpbXBvcnQgVVJMXHJcblxyXG5mcm9tIC5jbGllbnRfcmVxcmVwIGltcG9ydCBDbGllbnRSZXNwb25zZVxyXG5cclxuaWYgVFlQRV9DSEVDS0lORzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgZnJvbSAuY2xpZW50IGltcG9ydCBDbGllbnRTZXNzaW9uXHJcbiAgICBmcm9tIC50eXBlZGVmcyBpbXBvcnQgUHJvdG9jb2xcclxuXHJcbiAgICBfUGFyYW1UX2NvbnRyYSA9IFR5cGVWYXIoIl9QYXJhbVRfY29udHJhIiwgY29udHJhdmFyaWFudD1UcnVlKVxyXG5cclxuICAgIGNsYXNzIF9TaWduYWxDYWxsYmFjayhQcm90b2NvbFtfUGFyYW1UX2NvbnRyYV0pOlxyXG4gICAgICAgIGRlZiBfX2NhbGxfXyhcclxuICAgICAgICAgICAgc2VsZixcclxuICAgICAgICAgICAgX19jbGllbnRfc2Vzc2lvbjogQ2xpZW50U2Vzc2lvbixcclxuICAgICAgICAgICAgX190cmFjZV9jb25maWdfY3R4OiBTaW1wbGVOYW1lc3BhY2UsXHJcbiAgICAgICAgICAgIF9fcGFyYW1zOiBfUGFyYW1UX2NvbnRyYSxcclxuICAgICAgICApIC0+IEF3YWl0YWJsZVtOb25lXTpcclxuICAgICAgICAgICAgLi4uXHJcblxyXG5cclxuX19hbGxfXyA9IChcclxuICAgICJUcmFjZUNvbmZpZyIsXHJcbiAgICAiVHJhY2VSZXF1ZXN0U3RhcnRQYXJhbXMiLFxyXG4gICAgIlRyYWNlUmVxdWVzdEVuZFBhcmFtcyIsXHJcbiAgICAiVHJhY2VSZXF1ZXN0RXhjZXB0aW9uUGFyYW1zIixcclxuICAgICJUcmFjZUNvbm5lY3Rpb25RdWV1ZWRTdGFydFBhcmFtcyIsXHJcbiAgICAiVHJhY2VDb25uZWN0aW9uUXVldWVkRW5kUGFyYW1zIixcclxuICAgICJUcmFjZUNvbm5lY3Rpb25DcmVhdGVTdGFydFBhcmFtcyIsXHJcbiAgICAiVHJhY2VDb25uZWN0aW9uQ3JlYXRlRW5kUGFyYW1zIixcclxuICAgICJUcmFjZUNvbm5lY3Rpb25SZXVzZWNvbm5QYXJhbXMiLFxyXG4gICAgIlRyYWNlRG5zUmVzb2x2ZUhvc3RTdGFydFBhcmFtcyIsXHJcbiAgICAiVHJhY2VEbnNSZXNvbHZlSG9zdEVuZFBhcmFtcyIsXHJcbiAgICAiVHJhY2VEbnNDYWNoZUhpdFBhcmFtcyIsXHJcbiAgICAiVHJhY2VEbnNDYWNoZU1pc3NQYXJhbXMiLFxyXG4gICAgIlRyYWNlUmVxdWVzdFJlZGlyZWN0UGFyYW1zIixcclxuICAgICJUcmFjZVJlcXVlc3RDaHVua1NlbnRQYXJhbXMiLFxyXG4gICAgIlRyYWNlUmVzcG9uc2VDaHVua1JlY2VpdmVkUGFyYW1zIixcclxuICAgICJUcmFjZVJlcXVlc3RIZWFkZXJzU2VudFBhcmFtcyIsXHJcbilcclxuXHJcblxyXG5jbGFzcyBUcmFjZUNvbmZpZzpcclxuICAgICIiIkZpcnN0LWNsYXNzIHVzZWQgdG8gdHJhY2UgcmVxdWVzdHMgbGF1bmNoZWQgdmlhIENsaWVudFNlc3Npb24gb2JqZWN0cy4iIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgdHJhY2VfY29uZmlnX2N0eF9mYWN0b3J5OiBUeXBlW1NpbXBsZU5hbWVzcGFjZV0gPSBTaW1wbGVOYW1lc3BhY2VcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9vbl9yZXF1ZXN0X3N0YXJ0ID0gU2lnbmFsKFxyXG4gICAgICAgICAgICBzZWxmXHJcbiAgICAgICAgKSAgIyB0eXBlOiBTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlUmVxdWVzdFN0YXJ0UGFyYW1zXV1cclxuICAgICAgICBzZWxmLl9vbl9yZXF1ZXN0X2NodW5rX3NlbnQgPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VSZXF1ZXN0Q2h1bmtTZW50UGFyYW1zXV1cclxuICAgICAgICBzZWxmLl9vbl9yZXNwb25zZV9jaHVua19yZWNlaXZlZCA9IFNpZ25hbChcclxuICAgICAgICAgICAgc2VsZlxyXG4gICAgICAgICkgICMgdHlwZTogU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZVJlc3BvbnNlQ2h1bmtSZWNlaXZlZFBhcmFtc11dXHJcbiAgICAgICAgc2VsZi5fb25fcmVxdWVzdF9lbmQgPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VSZXF1ZXN0RW5kUGFyYW1zXV1cclxuICAgICAgICBzZWxmLl9vbl9yZXF1ZXN0X2V4Y2VwdGlvbiA9IFNpZ25hbChcclxuICAgICAgICAgICAgc2VsZlxyXG4gICAgICAgICkgICMgdHlwZTogU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZVJlcXVlc3RFeGNlcHRpb25QYXJhbXNdXVxyXG4gICAgICAgIHNlbGYuX29uX3JlcXVlc3RfcmVkaXJlY3QgPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VSZXF1ZXN0UmVkaXJlY3RQYXJhbXNdXVxyXG4gICAgICAgIHNlbGYuX29uX2Nvbm5lY3Rpb25fcXVldWVkX3N0YXJ0ID0gU2lnbmFsKFxyXG4gICAgICAgICAgICBzZWxmXHJcbiAgICAgICAgKSAgIyB0eXBlOiBTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlQ29ubmVjdGlvblF1ZXVlZFN0YXJ0UGFyYW1zXV1cclxuICAgICAgICBzZWxmLl9vbl9jb25uZWN0aW9uX3F1ZXVlZF9lbmQgPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VDb25uZWN0aW9uUXVldWVkRW5kUGFyYW1zXV1cclxuICAgICAgICBzZWxmLl9vbl9jb25uZWN0aW9uX2NyZWF0ZV9zdGFydCA9IFNpZ25hbChcclxuICAgICAgICAgICAgc2VsZlxyXG4gICAgICAgICkgICMgdHlwZTogU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZUNvbm5lY3Rpb25DcmVhdGVTdGFydFBhcmFtc11dXHJcbiAgICAgICAgc2VsZi5fb25fY29ubmVjdGlvbl9jcmVhdGVfZW5kID0gU2lnbmFsKFxyXG4gICAgICAgICAgICBzZWxmXHJcbiAgICAgICAgKSAgIyB0eXBlOiBTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlQ29ubmVjdGlvbkNyZWF0ZUVuZFBhcmFtc11dXHJcbiAgICAgICAgc2VsZi5fb25fY29ubmVjdGlvbl9yZXVzZWNvbm4gPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VDb25uZWN0aW9uUmV1c2Vjb25uUGFyYW1zXV1cclxuICAgICAgICBzZWxmLl9vbl9kbnNfcmVzb2x2ZWhvc3Rfc3RhcnQgPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VEbnNSZXNvbHZlSG9zdFN0YXJ0UGFyYW1zXV1cclxuICAgICAgICBzZWxmLl9vbl9kbnNfcmVzb2x2ZWhvc3RfZW5kID0gU2lnbmFsKFxyXG4gICAgICAgICAgICBzZWxmXHJcbiAgICAgICAgKSAgIyB0eXBlOiBTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlRG5zUmVzb2x2ZUhvc3RFbmRQYXJhbXNdXVxyXG4gICAgICAgIHNlbGYuX29uX2Ruc19jYWNoZV9oaXQgPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VEbnNDYWNoZUhpdFBhcmFtc11dXHJcbiAgICAgICAgc2VsZi5fb25fZG5zX2NhY2hlX21pc3MgPSBTaWduYWwoXHJcbiAgICAgICAgICAgIHNlbGZcclxuICAgICAgICApICAjIHR5cGU6IFNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VEbnNDYWNoZU1pc3NQYXJhbXNdXVxyXG4gICAgICAgIHNlbGYuX29uX3JlcXVlc3RfaGVhZGVyc19zZW50ID0gU2lnbmFsKFxyXG4gICAgICAgICAgICBzZWxmXHJcbiAgICAgICAgKSAgIyB0eXBlOiBTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlUmVxdWVzdEhlYWRlcnNTZW50UGFyYW1zXV1cclxuXHJcbiAgICAgICAgc2VsZi5fdHJhY2VfY29uZmlnX2N0eF9mYWN0b3J5ID0gdHJhY2VfY29uZmlnX2N0eF9mYWN0b3J5XHJcblxyXG4gICAgZGVmIHRyYWNlX2NvbmZpZ19jdHgoXHJcbiAgICAgICAgc2VsZiwgdHJhY2VfcmVxdWVzdF9jdHg6IE9wdGlvbmFsW1NpbXBsZU5hbWVzcGFjZV0gPSBOb25lXHJcbiAgICApIC0+IFNpbXBsZU5hbWVzcGFjZTpcclxuICAgICAgICAiIiJSZXR1cm4gYSBuZXcgdHJhY2VfY29uZmlnX2N0eCBpbnN0YW5jZSIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLl90cmFjZV9jb25maWdfY3R4X2ZhY3RvcnkodHJhY2VfcmVxdWVzdF9jdHg9dHJhY2VfcmVxdWVzdF9jdHgpXHJcblxyXG4gICAgZGVmIGZyZWV6ZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX29uX3JlcXVlc3Rfc3RhcnQuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9yZXF1ZXN0X2NodW5rX3NlbnQuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9yZXNwb25zZV9jaHVua19yZWNlaXZlZC5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX3JlcXVlc3RfZW5kLmZyZWV6ZSgpXHJcbiAgICAgICAgc2VsZi5fb25fcmVxdWVzdF9leGNlcHRpb24uZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9yZXF1ZXN0X3JlZGlyZWN0LmZyZWV6ZSgpXHJcbiAgICAgICAgc2VsZi5fb25fY29ubmVjdGlvbl9xdWV1ZWRfc3RhcnQuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9jb25uZWN0aW9uX3F1ZXVlZF9lbmQuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9jb25uZWN0aW9uX2NyZWF0ZV9zdGFydC5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX2Nvbm5lY3Rpb25fY3JlYXRlX2VuZC5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX2Nvbm5lY3Rpb25fcmV1c2Vjb25uLmZyZWV6ZSgpXHJcbiAgICAgICAgc2VsZi5fb25fZG5zX3Jlc29sdmVob3N0X3N0YXJ0LmZyZWV6ZSgpXHJcbiAgICAgICAgc2VsZi5fb25fZG5zX3Jlc29sdmVob3N0X2VuZC5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX2Ruc19jYWNoZV9oaXQuZnJlZXplKClcclxuICAgICAgICBzZWxmLl9vbl9kbnNfY2FjaGVfbWlzcy5mcmVlemUoKVxyXG4gICAgICAgIHNlbGYuX29uX3JlcXVlc3RfaGVhZGVyc19zZW50LmZyZWV6ZSgpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25fcmVxdWVzdF9zdGFydChzZWxmKSAtPiAiU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZVJlcXVlc3RTdGFydFBhcmFtc11dIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fcmVxdWVzdF9zdGFydFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX3JlcXVlc3RfY2h1bmtfc2VudChcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiAiU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZVJlcXVlc3RDaHVua1NlbnRQYXJhbXNdXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX3JlcXVlc3RfY2h1bmtfc2VudFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX3Jlc3BvbnNlX2NodW5rX3JlY2VpdmVkKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlUmVzcG9uc2VDaHVua1JlY2VpdmVkUGFyYW1zXV0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbl9yZXNwb25zZV9jaHVua19yZWNlaXZlZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX3JlcXVlc3RfZW5kKHNlbGYpIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlUmVxdWVzdEVuZFBhcmFtc11dIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fcmVxdWVzdF9lbmRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvbl9yZXF1ZXN0X2V4Y2VwdGlvbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiAiU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZVJlcXVlc3RFeGNlcHRpb25QYXJhbXNdXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX3JlcXVlc3RfZXhjZXB0aW9uXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25fcmVxdWVzdF9yZWRpcmVjdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiAiU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZVJlcXVlc3RSZWRpcmVjdFBhcmFtc11dIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fcmVxdWVzdF9yZWRpcmVjdFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX2Nvbm5lY3Rpb25fcXVldWVkX3N0YXJ0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlQ29ubmVjdGlvblF1ZXVlZFN0YXJ0UGFyYW1zXV0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbl9jb25uZWN0aW9uX3F1ZXVlZF9zdGFydFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX2Nvbm5lY3Rpb25fcXVldWVkX2VuZChcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiAiU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZUNvbm5lY3Rpb25RdWV1ZWRFbmRQYXJhbXNdXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX2Nvbm5lY3Rpb25fcXVldWVkX2VuZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX2Nvbm5lY3Rpb25fY3JlYXRlX3N0YXJ0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlQ29ubmVjdGlvbkNyZWF0ZVN0YXJ0UGFyYW1zXV0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbl9jb25uZWN0aW9uX2NyZWF0ZV9zdGFydFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX2Nvbm5lY3Rpb25fY3JlYXRlX2VuZChcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiAiU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZUNvbm5lY3Rpb25DcmVhdGVFbmRQYXJhbXNdXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX2Nvbm5lY3Rpb25fY3JlYXRlX2VuZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9uX2Nvbm5lY3Rpb25fcmV1c2Vjb25uKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlQ29ubmVjdGlvblJldXNlY29ublBhcmFtc11dIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fY29ubmVjdGlvbl9yZXVzZWNvbm5cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvbl9kbnNfcmVzb2x2ZWhvc3Rfc3RhcnQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gIlNpZ25hbFtfU2lnbmFsQ2FsbGJhY2tbVHJhY2VEbnNSZXNvbHZlSG9zdFN0YXJ0UGFyYW1zXV0iOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vbl9kbnNfcmVzb2x2ZWhvc3Rfc3RhcnRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvbl9kbnNfcmVzb2x2ZWhvc3RfZW5kKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlRG5zUmVzb2x2ZUhvc3RFbmRQYXJhbXNdXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX2Ruc19yZXNvbHZlaG9zdF9lbmRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvbl9kbnNfY2FjaGVfaGl0KHNlbGYpIC0+ICJTaWduYWxbX1NpZ25hbENhbGxiYWNrW1RyYWNlRG5zQ2FjaGVIaXRQYXJhbXNdXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29uX2Ruc19jYWNoZV9oaXRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvbl9kbnNfY2FjaGVfbWlzcyhzZWxmKSAtPiAiU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZURuc0NhY2hlTWlzc1BhcmFtc11dIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fZG5zX2NhY2hlX21pc3NcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBvbl9yZXF1ZXN0X2hlYWRlcnNfc2VudChcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiAiU2lnbmFsW19TaWduYWxDYWxsYmFja1tUcmFjZVJlcXVlc3RIZWFkZXJzU2VudFBhcmFtc11dIjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25fcmVxdWVzdF9oZWFkZXJzX3NlbnRcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgVHJhY2VSZXF1ZXN0U3RhcnRQYXJhbXM6XHJcbiAgICAiIiJQYXJhbWV0ZXJzIHNlbnQgYnkgdGhlIGBvbl9yZXF1ZXN0X3N0YXJ0YCBzaWduYWwiIiJcclxuXHJcbiAgICBtZXRob2Q6IHN0clxyXG4gICAgdXJsOiBVUkxcclxuICAgIGhlYWRlcnM6ICJDSU11bHRpRGljdFtzdHJdIlxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBUcmFjZVJlcXVlc3RDaHVua1NlbnRQYXJhbXM6XHJcbiAgICAiIiJQYXJhbWV0ZXJzIHNlbnQgYnkgdGhlIGBvbl9yZXF1ZXN0X2NodW5rX3NlbnRgIHNpZ25hbCIiIlxyXG5cclxuICAgIG1ldGhvZDogc3RyXHJcbiAgICB1cmw6IFVSTFxyXG4gICAgY2h1bms6IGJ5dGVzXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFRyYWNlUmVzcG9uc2VDaHVua1JlY2VpdmVkUGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fcmVzcG9uc2VfY2h1bmtfcmVjZWl2ZWRgIHNpZ25hbCIiIlxyXG5cclxuICAgIG1ldGhvZDogc3RyXHJcbiAgICB1cmw6IFVSTFxyXG4gICAgY2h1bms6IGJ5dGVzXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFRyYWNlUmVxdWVzdEVuZFBhcmFtczpcclxuICAgICIiIlBhcmFtZXRlcnMgc2VudCBieSB0aGUgYG9uX3JlcXVlc3RfZW5kYCBzaWduYWwiIiJcclxuXHJcbiAgICBtZXRob2Q6IHN0clxyXG4gICAgdXJsOiBVUkxcclxuICAgIGhlYWRlcnM6ICJDSU11bHRpRGljdFtzdHJdIlxyXG4gICAgcmVzcG9uc2U6IENsaWVudFJlc3BvbnNlXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFRyYWNlUmVxdWVzdEV4Y2VwdGlvblBhcmFtczpcclxuICAgICIiIlBhcmFtZXRlcnMgc2VudCBieSB0aGUgYG9uX3JlcXVlc3RfZXhjZXB0aW9uYCBzaWduYWwiIiJcclxuXHJcbiAgICBtZXRob2Q6IHN0clxyXG4gICAgdXJsOiBVUkxcclxuICAgIGhlYWRlcnM6ICJDSU11bHRpRGljdFtzdHJdIlxyXG4gICAgZXhjZXB0aW9uOiBCYXNlRXhjZXB0aW9uXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFRyYWNlUmVxdWVzdFJlZGlyZWN0UGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fcmVxdWVzdF9yZWRpcmVjdGAgc2lnbmFsIiIiXHJcblxyXG4gICAgbWV0aG9kOiBzdHJcclxuICAgIHVybDogVVJMXHJcbiAgICBoZWFkZXJzOiAiQ0lNdWx0aURpY3Rbc3RyXSJcclxuICAgIHJlc3BvbnNlOiBDbGllbnRSZXNwb25zZVxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBUcmFjZUNvbm5lY3Rpb25RdWV1ZWRTdGFydFBhcmFtczpcclxuICAgICIiIlBhcmFtZXRlcnMgc2VudCBieSB0aGUgYG9uX2Nvbm5lY3Rpb25fcXVldWVkX3N0YXJ0YCBzaWduYWwiIiJcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgVHJhY2VDb25uZWN0aW9uUXVldWVkRW5kUGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fY29ubmVjdGlvbl9xdWV1ZWRfZW5kYCBzaWduYWwiIiJcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgVHJhY2VDb25uZWN0aW9uQ3JlYXRlU3RhcnRQYXJhbXM6XHJcbiAgICAiIiJQYXJhbWV0ZXJzIHNlbnQgYnkgdGhlIGBvbl9jb25uZWN0aW9uX2NyZWF0ZV9zdGFydGAgc2lnbmFsIiIiXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFRyYWNlQ29ubmVjdGlvbkNyZWF0ZUVuZFBhcmFtczpcclxuICAgICIiIlBhcmFtZXRlcnMgc2VudCBieSB0aGUgYG9uX2Nvbm5lY3Rpb25fY3JlYXRlX2VuZGAgc2lnbmFsIiIiXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFRyYWNlQ29ubmVjdGlvblJldXNlY29ublBhcmFtczpcclxuICAgICIiIlBhcmFtZXRlcnMgc2VudCBieSB0aGUgYG9uX2Nvbm5lY3Rpb25fcmV1c2Vjb25uYCBzaWduYWwiIiJcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgVHJhY2VEbnNSZXNvbHZlSG9zdFN0YXJ0UGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fZG5zX3Jlc29sdmVob3N0X3N0YXJ0YCBzaWduYWwiIiJcclxuXHJcbiAgICBob3N0OiBzdHJcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgVHJhY2VEbnNSZXNvbHZlSG9zdEVuZFBhcmFtczpcclxuICAgICIiIlBhcmFtZXRlcnMgc2VudCBieSB0aGUgYG9uX2Ruc19yZXNvbHZlaG9zdF9lbmRgIHNpZ25hbCIiIlxyXG5cclxuICAgIGhvc3Q6IHN0clxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBUcmFjZURuc0NhY2hlSGl0UGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fZG5zX2NhY2hlX2hpdGAgc2lnbmFsIiIiXHJcblxyXG4gICAgaG9zdDogc3RyXHJcblxyXG5cclxuQGF0dHIucyhhdXRvX2F0dHJpYnM9VHJ1ZSwgZnJvemVuPVRydWUsIHNsb3RzPVRydWUpXHJcbmNsYXNzIFRyYWNlRG5zQ2FjaGVNaXNzUGFyYW1zOlxyXG4gICAgIiIiUGFyYW1ldGVycyBzZW50IGJ5IHRoZSBgb25fZG5zX2NhY2hlX21pc3NgIHNpZ25hbCIiIlxyXG5cclxuICAgIGhvc3Q6IHN0clxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBUcmFjZVJlcXVlc3RIZWFkZXJzU2VudFBhcmFtczpcclxuICAgICIiIlBhcmFtZXRlcnMgc2VudCBieSB0aGUgYG9uX3JlcXVlc3RfaGVhZGVyc19zZW50YCBzaWduYWwiIiJcclxuXHJcbiAgICBtZXRob2Q6IHN0clxyXG4gICAgdXJsOiBVUkxcclxuICAgIGhlYWRlcnM6ICJDSU11bHRpRGljdFtzdHJdIlxyXG5cclxuXHJcbmNsYXNzIFRyYWNlOlxyXG4gICAgIiIiSW50ZXJuYWwgZGVwZW5kZW5jeSBob2xkZXIgY2xhc3MuXHJcblxyXG4gICAgVXNlZCB0byBrZWVwIHRvZ2V0aGVyIHRoZSBtYWluIGRlcGVuZGVuY2llcyB1c2VkXHJcbiAgICBhdCB0aGUgbW9tZW50IG9mIHNlbmQgYSBzaWduYWwuXHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBzZXNzaW9uOiAiQ2xpZW50U2Vzc2lvbiIsXHJcbiAgICAgICAgdHJhY2VfY29uZmlnOiBUcmFjZUNvbmZpZyxcclxuICAgICAgICB0cmFjZV9jb25maWdfY3R4OiBTaW1wbGVOYW1lc3BhY2UsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fdHJhY2VfY29uZmlnID0gdHJhY2VfY29uZmlnXHJcbiAgICAgICAgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCA9IHRyYWNlX2NvbmZpZ19jdHhcclxuICAgICAgICBzZWxmLl9zZXNzaW9uID0gc2Vzc2lvblxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX3JlcXVlc3Rfc3RhcnQoXHJcbiAgICAgICAgc2VsZiwgbWV0aG9kOiBzdHIsIHVybDogVVJMLCBoZWFkZXJzOiAiQ0lNdWx0aURpY3Rbc3RyXSJcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fdHJhY2VfY29uZmlnLm9uX3JlcXVlc3Rfc3RhcnQuc2VuZChcclxuICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbixcclxuICAgICAgICAgICAgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCxcclxuICAgICAgICAgICAgVHJhY2VSZXF1ZXN0U3RhcnRQYXJhbXMobWV0aG9kLCB1cmwsIGhlYWRlcnMpLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9yZXF1ZXN0X2NodW5rX3NlbnQoXHJcbiAgICAgICAgc2VsZiwgbWV0aG9kOiBzdHIsIHVybDogVVJMLCBjaHVuazogYnl0ZXNcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fdHJhY2VfY29uZmlnLm9uX3JlcXVlc3RfY2h1bmtfc2VudC5zZW5kKFxyXG4gICAgICAgICAgICBzZWxmLl9zZXNzaW9uLFxyXG4gICAgICAgICAgICBzZWxmLl90cmFjZV9jb25maWdfY3R4LFxyXG4gICAgICAgICAgICBUcmFjZVJlcXVlc3RDaHVua1NlbnRQYXJhbXMobWV0aG9kLCB1cmwsIGNodW5rKSxcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfcmVzcG9uc2VfY2h1bmtfcmVjZWl2ZWQoXHJcbiAgICAgICAgc2VsZiwgbWV0aG9kOiBzdHIsIHVybDogVVJMLCBjaHVuazogYnl0ZXNcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fdHJhY2VfY29uZmlnLm9uX3Jlc3BvbnNlX2NodW5rX3JlY2VpdmVkLnNlbmQoXHJcbiAgICAgICAgICAgIHNlbGYuX3Nlc3Npb24sXHJcbiAgICAgICAgICAgIHNlbGYuX3RyYWNlX2NvbmZpZ19jdHgsXHJcbiAgICAgICAgICAgIFRyYWNlUmVzcG9uc2VDaHVua1JlY2VpdmVkUGFyYW1zKG1ldGhvZCwgdXJsLCBjaHVuayksXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX3JlcXVlc3RfZW5kKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbWV0aG9kOiBzdHIsXHJcbiAgICAgICAgdXJsOiBVUkwsXHJcbiAgICAgICAgaGVhZGVyczogIkNJTXVsdGlEaWN0W3N0cl0iLFxyXG4gICAgICAgIHJlc3BvbnNlOiBDbGllbnRSZXNwb25zZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fdHJhY2VfY29uZmlnLm9uX3JlcXVlc3RfZW5kLnNlbmQoXHJcbiAgICAgICAgICAgIHNlbGYuX3Nlc3Npb24sXHJcbiAgICAgICAgICAgIHNlbGYuX3RyYWNlX2NvbmZpZ19jdHgsXHJcbiAgICAgICAgICAgIFRyYWNlUmVxdWVzdEVuZFBhcmFtcyhtZXRob2QsIHVybCwgaGVhZGVycywgcmVzcG9uc2UpLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9yZXF1ZXN0X2V4Y2VwdGlvbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1ldGhvZDogc3RyLFxyXG4gICAgICAgIHVybDogVVJMLFxyXG4gICAgICAgIGhlYWRlcnM6ICJDSU11bHRpRGljdFtzdHJdIixcclxuICAgICAgICBleGNlcHRpb246IEJhc2VFeGNlcHRpb24sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX3RyYWNlX2NvbmZpZy5vbl9yZXF1ZXN0X2V4Y2VwdGlvbi5zZW5kKFxyXG4gICAgICAgICAgICBzZWxmLl9zZXNzaW9uLFxyXG4gICAgICAgICAgICBzZWxmLl90cmFjZV9jb25maWdfY3R4LFxyXG4gICAgICAgICAgICBUcmFjZVJlcXVlc3RFeGNlcHRpb25QYXJhbXMobWV0aG9kLCB1cmwsIGhlYWRlcnMsIGV4Y2VwdGlvbiksXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX3JlcXVlc3RfcmVkaXJlY3QoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZXRob2Q6IHN0cixcclxuICAgICAgICB1cmw6IFVSTCxcclxuICAgICAgICBoZWFkZXJzOiAiQ0lNdWx0aURpY3Rbc3RyXSIsXHJcbiAgICAgICAgcmVzcG9uc2U6IENsaWVudFJlc3BvbnNlLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl90cmFjZV9jb25maWcuX29uX3JlcXVlc3RfcmVkaXJlY3Quc2VuZChcclxuICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbixcclxuICAgICAgICAgICAgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCxcclxuICAgICAgICAgICAgVHJhY2VSZXF1ZXN0UmVkaXJlY3RQYXJhbXMobWV0aG9kLCB1cmwsIGhlYWRlcnMsIHJlc3BvbnNlKSxcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfY29ubmVjdGlvbl9xdWV1ZWRfc3RhcnQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fdHJhY2VfY29uZmlnLm9uX2Nvbm5lY3Rpb25fcXVldWVkX3N0YXJ0LnNlbmQoXHJcbiAgICAgICAgICAgIHNlbGYuX3Nlc3Npb24sIHNlbGYuX3RyYWNlX2NvbmZpZ19jdHgsIFRyYWNlQ29ubmVjdGlvblF1ZXVlZFN0YXJ0UGFyYW1zKClcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfY29ubmVjdGlvbl9xdWV1ZWRfZW5kKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX3RyYWNlX2NvbmZpZy5vbl9jb25uZWN0aW9uX3F1ZXVlZF9lbmQuc2VuZChcclxuICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbiwgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCwgVHJhY2VDb25uZWN0aW9uUXVldWVkRW5kUGFyYW1zKClcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfY29ubmVjdGlvbl9jcmVhdGVfc3RhcnQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fdHJhY2VfY29uZmlnLm9uX2Nvbm5lY3Rpb25fY3JlYXRlX3N0YXJ0LnNlbmQoXHJcbiAgICAgICAgICAgIHNlbGYuX3Nlc3Npb24sIHNlbGYuX3RyYWNlX2NvbmZpZ19jdHgsIFRyYWNlQ29ubmVjdGlvbkNyZWF0ZVN0YXJ0UGFyYW1zKClcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfY29ubmVjdGlvbl9jcmVhdGVfZW5kKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX3RyYWNlX2NvbmZpZy5vbl9jb25uZWN0aW9uX2NyZWF0ZV9lbmQuc2VuZChcclxuICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbiwgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCwgVHJhY2VDb25uZWN0aW9uQ3JlYXRlRW5kUGFyYW1zKClcclxuICAgICAgICApXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfY29ubmVjdGlvbl9yZXVzZWNvbm4oc2VsZikgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fdHJhY2VfY29uZmlnLm9uX2Nvbm5lY3Rpb25fcmV1c2Vjb25uLnNlbmQoXHJcbiAgICAgICAgICAgIHNlbGYuX3Nlc3Npb24sIHNlbGYuX3RyYWNlX2NvbmZpZ19jdHgsIFRyYWNlQ29ubmVjdGlvblJldXNlY29ublBhcmFtcygpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX2Ruc19yZXNvbHZlaG9zdF9zdGFydChzZWxmLCBob3N0OiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX3RyYWNlX2NvbmZpZy5vbl9kbnNfcmVzb2x2ZWhvc3Rfc3RhcnQuc2VuZChcclxuICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbiwgc2VsZi5fdHJhY2VfY29uZmlnX2N0eCwgVHJhY2VEbnNSZXNvbHZlSG9zdFN0YXJ0UGFyYW1zKGhvc3QpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX2Ruc19yZXNvbHZlaG9zdF9lbmQoc2VsZiwgaG9zdDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl90cmFjZV9jb25maWcub25fZG5zX3Jlc29sdmVob3N0X2VuZC5zZW5kKFxyXG4gICAgICAgICAgICBzZWxmLl9zZXNzaW9uLCBzZWxmLl90cmFjZV9jb25maWdfY3R4LCBUcmFjZURuc1Jlc29sdmVIb3N0RW5kUGFyYW1zKGhvc3QpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX2Ruc19jYWNoZV9oaXQoc2VsZiwgaG9zdDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl90cmFjZV9jb25maWcub25fZG5zX2NhY2hlX2hpdC5zZW5kKFxyXG4gICAgICAgICAgICBzZWxmLl9zZXNzaW9uLCBzZWxmLl90cmFjZV9jb25maWdfY3R4LCBUcmFjZURuc0NhY2hlSGl0UGFyYW1zKGhvc3QpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX2Ruc19jYWNoZV9taXNzKHNlbGYsIGhvc3Q6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fdHJhY2VfY29uZmlnLm9uX2Ruc19jYWNoZV9taXNzLnNlbmQoXHJcbiAgICAgICAgICAgIHNlbGYuX3Nlc3Npb24sIHNlbGYuX3RyYWNlX2NvbmZpZ19jdHgsIFRyYWNlRG5zQ2FjaGVNaXNzUGFyYW1zKGhvc3QpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX3JlcXVlc3RfaGVhZGVycyhcclxuICAgICAgICBzZWxmLCBtZXRob2Q6IHN0ciwgdXJsOiBVUkwsIGhlYWRlcnM6ICJDSU11bHRpRGljdFtzdHJdIlxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl90cmFjZV9jb25maWcuX29uX3JlcXVlc3RfaGVhZGVyc19zZW50LnNlbmQoXHJcbiAgICAgICAgICAgIHNlbGYuX3Nlc3Npb24sXHJcbiAgICAgICAgICAgIHNlbGYuX3RyYWNlX2NvbmZpZ19jdHgsXHJcbiAgICAgICAgICAgIFRyYWNlUmVxdWVzdEhlYWRlcnNTZW50UGFyYW1zKG1ldGhvZCwgdXJsLCBoZWFkZXJzKSxcclxuICAgICAgICApXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjaGFyc2V0X25vcm1hbGl6ZXIvX19pbml0X18ucHknLCBiJyMgLSotIGNvZGluZzogdXRmXzggLSotXG4iIiJcbkNoYXJzZXQtTm9ybWFsaXplclxufn5+fn5+fn5+fn5+fn5cblRoZSBSZWFsIEZpcnN0IFVuaXZlcnNhbCBDaGFyc2V0IERldGVjdG9yLlxuQSBsaWJyYXJ5IHRoYXQgaGVscHMgeW91IHJlYWQgdGV4dCBmcm9tIGFuIHVua25vd24gY2hhcnNldCBlbmNvZGluZy5cbk1vdGl2YXRlZCBieSBjaGFyZGV0LCBUaGlzIHBhY2thZ2UgaXMgdHJ5aW5nIHRvIHJlc29sdmUgdGhlIGlzc3VlIGJ5IHRha2luZyBhIG5ldyBhcHByb2FjaC5cbkFsbCBJQU5BIGNoYXJhY3RlciBzZXQgbmFtZXMgZm9yIHdoaWNoIHRoZSBQeXRob24gY29yZSBsaWJyYXJ5IHByb3ZpZGVzIGNvZGVjcyBhcmUgc3VwcG9ydGVkLlxuXG5CYXNpYyB1c2FnZTpcbiAgID4+PiBmcm9tIGNoYXJzZXRfbm9ybWFsaXplciBpbXBvcnQgZnJvbV9ieXRlc1xuICAgPj4+IHJlc3VsdHMgPSBmcm9tX2J5dGVzKFwnQlx4ZDFceDgxXHhkMFx4YjVceGQwXHhiYVx4ZDBceGI4IFx4ZDFceDg3XHhkMFx4YmVceGQwXHhiMlx4ZDBceGI1XHhkMFx4YmEgXHhkMFx4YjhceGQwXHhiY1x4ZDBceGIwIFx4ZDBceGJmXHhkMVx4ODBceGQwXHhiMFx4ZDBceGIyXHhkMFx4YmUgXHhkMFx4YmRceGQwXHhiMCBceGQwXHhiZVx4ZDBceGIxXHhkMVx4ODBceGQwXHhiMFx4ZDBceGI3XHhkMFx4YmVceGQwXHhiMlx4ZDBceGIwXHhkMFx4YmRceGQwXHhiOFx4ZDBceGI1LiBPXHhkMFx4YjFceGQxXHg4MFx4ZDBceGIwXHhkMFx4YjdceGQwXHhiZVx4ZDBceGIyXHhkMFx4YjBceGQwXHhiZFx4ZDBceGI4XHhkMFx4YjVceGQxXHg4Mlx4ZDBceGJlIVwnLmVuY29kZShcJ3V0Zl84XCcpKVxuICAgPj4+IGJlc3RfZ3Vlc3MgPSByZXN1bHRzLmJlc3QoKVxuICAgPj4+IHN0cihiZXN0X2d1ZXNzKVxuICAgXCdCXHhkMVx4ODFceGQwXHhiNVx4ZDBceGJhXHhkMFx4YjggXHhkMVx4ODdceGQwXHhiZVx4ZDBceGIyXHhkMFx4YjVceGQwXHhiYSBceGQwXHhiOFx4ZDBceGJjXHhkMFx4YjAgXHhkMFx4YmZceGQxXHg4MFx4ZDBceGIwXHhkMFx4YjJceGQwXHhiZSBceGQwXHhiZFx4ZDBceGIwIFx4ZDBceGJlXHhkMFx4YjFceGQxXHg4MFx4ZDBceGIwXHhkMFx4YjdceGQwXHhiZVx4ZDBceGIyXHhkMFx4YjBceGQwXHhiZFx4ZDBceGI4XHhkMFx4YjUuIE9ceGQwXHhiMVx4ZDFceDgwXHhkMFx4YjBceGQwXHhiN1x4ZDBceGJlXHhkMFx4YjJceGQwXHhiMFx4ZDBceGJkXHhkMFx4YjhceGQwXHhiNVx4ZDFceDgyXHhkMFx4YmUhXCdcblxuT3RoZXJzIG1ldGhvZHMgYW5kIHVzYWdlcyBhcmUgYXZhaWxhYmxlIC0gc2VlIHRoZSBmdWxsIGRvY3VtZW50YXRpb25cbmF0IDxodHRwczovL2dpdGh1Yi5jb20vT3VzcmV0L2NoYXJzZXRfbm9ybWFsaXplcj4uXG46Y29weXJpZ2h0OiAoYykgMjAyMSBieSBBaG1lZCBUQUhSSVxuOmxpY2Vuc2U6IE1JVCwgc2VlIExJQ0VOU0UgZm9yIG1vcmUgZGV0YWlscy5cbiIiIlxuaW1wb3J0IGxvZ2dpbmdcblxuZnJvbSAuYXBpIGltcG9ydCBmcm9tX2J5dGVzLCBmcm9tX2ZwLCBmcm9tX3BhdGgsIG5vcm1hbGl6ZVxuZnJvbSAubGVnYWN5IGltcG9ydCAoXG4gICAgQ2hhcnNldERldGVjdG9yLFxuICAgIENoYXJzZXREb2N0b3IsXG4gICAgQ2hhcnNldE5vcm1hbGl6ZXJNYXRjaCxcbiAgICBDaGFyc2V0Tm9ybWFsaXplck1hdGNoZXMsXG4gICAgZGV0ZWN0LFxuKVxuZnJvbSAubW9kZWxzIGltcG9ydCBDaGFyc2V0TWF0Y2gsIENoYXJzZXRNYXRjaGVzXG5mcm9tIC51dGlscyBpbXBvcnQgc2V0X2xvZ2dpbmdfaGFuZGxlclxuZnJvbSAudmVyc2lvbiBpbXBvcnQgVkVSU0lPTiwgX192ZXJzaW9uX19cblxuX19hbGxfXyA9IChcbiAgICAiZnJvbV9mcCIsXG4gICAgImZyb21fcGF0aCIsXG4gICAgImZyb21fYnl0ZXMiLFxuICAgICJub3JtYWxpemUiLFxuICAgICJkZXRlY3QiLFxuICAgICJDaGFyc2V0TWF0Y2giLFxuICAgICJDaGFyc2V0TWF0Y2hlcyIsXG4gICAgIkNoYXJzZXROb3JtYWxpemVyTWF0Y2giLFxuICAgICJDaGFyc2V0Tm9ybWFsaXplck1hdGNoZXMiLFxuICAgICJDaGFyc2V0RGV0ZWN0b3IiLFxuICAgICJDaGFyc2V0RG9jdG9yIixcbiAgICAiX192ZXJzaW9uX18iLFxuICAgICJWRVJTSU9OIixcbiAgICAic2V0X2xvZ2dpbmdfaGFuZGxlciIsXG4pXG5cbiMgQXR0YWNoIGEgTnVsbEhhbmRsZXIgdG8gdGhlIHRvcCBsZXZlbCBsb2dnZXIgYnkgZGVmYXVsdFxuIyBodHRwczovL2RvY3MucHl0aG9uLm9yZy8zLjMvaG93dG8vbG9nZ2luZy5odG1sI2NvbmZpZ3VyaW5nLWxvZ2dpbmctZm9yLWEtbGlicmFyeVxuXG5sb2dnaW5nLmdldExvZ2dlcigiY2hhcnNldF9ub3JtYWxpemVyIikuYWRkSGFuZGxlcihsb2dnaW5nLk51bGxIYW5kbGVyKCkpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY2hhcnNldF9ub3JtYWxpemVyL2FwaS5weScsIGInaW1wb3J0IGxvZ2dpbmdcbmZyb20gb3MucGF0aCBpbXBvcnQgYmFzZW5hbWUsIHNwbGl0ZXh0XG5mcm9tIHR5cGluZyBpbXBvcnQgQmluYXJ5SU8sIExpc3QsIE9wdGlvbmFsLCBTZXRcblxudHJ5OlxuICAgIGZyb20gb3MgaW1wb3J0IFBhdGhMaWtlXG5leGNlcHQgSW1wb3J0RXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcbiAgICBQYXRoTGlrZSA9IHN0ciAgIyB0eXBlOiBpZ25vcmVcblxuZnJvbSAuY2QgaW1wb3J0IChcbiAgICBjb2hlcmVuY2VfcmF0aW8sXG4gICAgZW5jb2RpbmdfbGFuZ3VhZ2VzLFxuICAgIG1iX2VuY29kaW5nX2xhbmd1YWdlcyxcbiAgICBtZXJnZV9jb2hlcmVuY2VfcmF0aW9zLFxuKVxuZnJvbSAuY29uc3RhbnQgaW1wb3J0IElBTkFfU1VQUE9SVEVELCBUT09fQklHX1NFUVVFTkNFLCBUT09fU01BTExfU0VRVUVOQ0UsIFRSQUNFXG5mcm9tIC5tZCBpbXBvcnQgbWVzc19yYXRpb1xuZnJvbSAubW9kZWxzIGltcG9ydCBDaGFyc2V0TWF0Y2gsIENoYXJzZXRNYXRjaGVzXG5mcm9tIC51dGlscyBpbXBvcnQgKFxuICAgIGFueV9zcGVjaWZpZWRfZW5jb2RpbmcsXG4gICAgaWFuYV9uYW1lLFxuICAgIGlkZW50aWZ5X3NpZ19vcl9ib20sXG4gICAgaXNfY3Bfc2ltaWxhcixcbiAgICBpc19tdWx0aV9ieXRlX2VuY29kaW5nLFxuICAgIHNob3VsZF9zdHJpcF9zaWdfb3JfYm9tLFxuKVxuXG4jIFdpbGwgbW9zdCBsaWtlbHkgYmUgY29udHJvdmVyc2lhbFxuIyBsb2dnaW5nLmFkZExldmVsTmFtZShUUkFDRSwgIlRSQUNFIilcbmxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCJjaGFyc2V0X25vcm1hbGl6ZXIiKVxuZXhwbGFpbl9oYW5kbGVyID0gbG9nZ2luZy5TdHJlYW1IYW5kbGVyKClcbmV4cGxhaW5faGFuZGxlci5zZXRGb3JtYXR0ZXIoXG4gICAgbG9nZ2luZy5Gb3JtYXR0ZXIoIiUoYXNjdGltZSlzIHwgJShsZXZlbG5hbWUpcyB8ICUobWVzc2FnZSlzIilcbilcblxuXG5kZWYgZnJvbV9ieXRlcyhcbiAgICBzZXF1ZW5jZXM6IGJ5dGVzLFxuICAgIHN0ZXBzOiBpbnQgPSA1LFxuICAgIGNodW5rX3NpemU6IGludCA9IDUxMixcbiAgICB0aHJlc2hvbGQ6IGZsb2F0ID0gMC4yLFxuICAgIGNwX2lzb2xhdGlvbjogTGlzdFtzdHJdID0gTm9uZSxcbiAgICBjcF9leGNsdXNpb246IExpc3Rbc3RyXSA9IE5vbmUsXG4gICAgcHJlZW1wdGl2ZV9iZWhhdmlvdXI6IGJvb2wgPSBUcnVlLFxuICAgIGV4cGxhaW46IGJvb2wgPSBGYWxzZSxcbikgLT4gQ2hhcnNldE1hdGNoZXM6XG4gICAgIiIiXG4gICAgR2l2ZW4gYSByYXcgYnl0ZXMgc2VxdWVuY2UsIHJldHVybiB0aGUgYmVzdCBwb3NzaWJsZXMgY2hhcnNldCB1c2FibGUgdG8gcmVuZGVyIHN0ciBvYmplY3RzLlxuICAgIElmIHRoZXJlIGlzIG5vIHJlc3VsdHMsIGl0IGlzIGEgc3Ryb25nIGluZGljYXRvciB0aGF0IHRoZSBzb3VyY2UgaXMgYmluYXJ5L25vdCB0ZXh0LlxuICAgIEJ5IGRlZmF1bHQsIHRoZSBwcm9jZXNzIHdpbGwgZXh0cmFjdCA1IGJsb2NzIG9mIDUxMm8gZWFjaCB0byBhc3Nlc3MgdGhlIG1lc3MgYW5kIGNvaGVyZW5jZSBvZiBhIGdpdmVuIHNlcXVlbmNlLlxuICAgIEFuZCB3aWxsIGdpdmUgdXAgYSBwYXJ0aWN1bGFyIGNvZGUgcGFnZSBhZnRlciAyMCUgb2YgbWVhc3VyZWQgbWVzcy4gVGhvc2UgY3JpdGVyaWEgYXJlIGN1c3RvbWl6YWJsZSBhdCB3aWxsLlxuXG4gICAgVGhlIHByZWVtcHRpdmUgYmVoYXZpb3IgRE9FUyBOT1QgcmVwbGFjZSB0aGUgdHJhZGl0aW9uYWwgZGV0ZWN0aW9uIHdvcmtmbG93LCBpdCBwcmlvcml0aXplIGEgcGFydGljdWxhciBjb2RlIHBhZ2VcbiAgICBidXQgbmV2ZXIgdGFrZSBpdCBmb3IgZ3JhbnRlZC4gQ2FuIGltcHJvdmUgdGhlIHBlcmZvcm1hbmNlLlxuXG4gICAgWW91IG1heSB3YW50IHRvIGZvY3VzIHlvdXIgYXR0ZW50aW9uIHRvIHNvbWUgY29kZSBwYWdlIG9yL2FuZCBub3Qgb3RoZXJzLCB1c2UgY3BfaXNvbGF0aW9uIGFuZCBjcF9leGNsdXNpb24gZm9yIHRoYXRcbiAgICBwdXJwb3NlLlxuXG4gICAgVGhpcyBmdW5jdGlvbiB3aWxsIHN0cmlwIHRoZSBTSUcgaW4gdGhlIHBheWxvYWQvc2VxdWVuY2UgZXZlcnkgdGltZSBleGNlcHQgb24gVVRGLTE2LCBVVEYtMzIuXG4gICAgQnkgZGVmYXVsdCB0aGUgbGlicmFyeSBkb2VzIG5vdCBzZXR1cCBhbnkgaGFuZGxlciBvdGhlciB0aGFuIHRoZSBOdWxsSGFuZGxlciwgaWYgeW91IGNob29zZSB0byBzZXQgdGhlIFwnZXhwbGFpblwnXG4gICAgdG9nZ2xlIHRvIFRydWUgaXQgd2lsbCBhbHRlciB0aGUgbG9nZ2VyIGNvbmZpZ3VyYXRpb24gdG8gYWRkIGEgU3RyZWFtSGFuZGxlciB0aGF0IGlzIHN1aXRhYmxlIGZvciBkZWJ1Z2dpbmcuXG4gICAgQ3VzdG9tIGxvZ2dpbmcgZm9ybWF0IGFuZCBoYW5kbGVyIGNhbiBiZSBzZXQgbWFudWFsbHkuXG4gICAgIiIiXG5cbiAgICBpZiBub3QgaXNpbnN0YW5jZShzZXF1ZW5jZXMsIChieXRlYXJyYXksIGJ5dGVzKSk6XG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICJFeHBlY3RlZCBvYmplY3Qgb2YgdHlwZSBieXRlcyBvciBieXRlYXJyYXksIGdvdDogezB9Ii5mb3JtYXQoXG4gICAgICAgICAgICAgICAgdHlwZShzZXF1ZW5jZXMpXG4gICAgICAgICAgICApXG4gICAgICAgIClcblxuICAgIGlmIGV4cGxhaW46XG4gICAgICAgIHByZXZpb3VzX2xvZ2dlcl9sZXZlbCA9IGxvZ2dlci5sZXZlbCAgIyB0eXBlOiBpbnRcbiAgICAgICAgbG9nZ2VyLmFkZEhhbmRsZXIoZXhwbGFpbl9oYW5kbGVyKVxuICAgICAgICBsb2dnZXIuc2V0TGV2ZWwoVFJBQ0UpXG5cbiAgICBsZW5ndGggPSBsZW4oc2VxdWVuY2VzKSAgIyB0eXBlOiBpbnRcblxuICAgIGlmIGxlbmd0aCA9PSAwOlxuICAgICAgICBsb2dnZXIuZGVidWcoIkVuY29kaW5nIGRldGVjdGlvbiBvbiBlbXB0eSBieXRlcywgYXNzdW1pbmcgdXRmXzggaW50ZW50aW9uLiIpXG4gICAgICAgIGlmIGV4cGxhaW46XG4gICAgICAgICAgICBsb2dnZXIucmVtb3ZlSGFuZGxlcihleHBsYWluX2hhbmRsZXIpXG4gICAgICAgICAgICBsb2dnZXIuc2V0TGV2ZWwocHJldmlvdXNfbG9nZ2VyX2xldmVsIG9yIGxvZ2dpbmcuV0FSTklORylcbiAgICAgICAgcmV0dXJuIENoYXJzZXRNYXRjaGVzKFtDaGFyc2V0TWF0Y2goc2VxdWVuY2VzLCAidXRmXzgiLCAwLjAsIEZhbHNlLCBbXSwgIiIpXSlcblxuICAgIGlmIGNwX2lzb2xhdGlvbiBpcyBub3QgTm9uZTpcbiAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgImNwX2lzb2xhdGlvbiBpcyBzZXQuIHVzZSB0aGlzIGZsYWcgZm9yIGRlYnVnZ2luZyBwdXJwb3NlLiAiXG4gICAgICAgICAgICAibGltaXRlZCBsaXN0IG9mIGVuY29kaW5nIGFsbG93ZWQgOiAlcy4iLFxuICAgICAgICAgICAgIiwgIi5qb2luKGNwX2lzb2xhdGlvbiksXG4gICAgICAgIClcbiAgICAgICAgY3BfaXNvbGF0aW9uID0gW2lhbmFfbmFtZShjcCwgRmFsc2UpIGZvciBjcCBpbiBjcF9pc29sYXRpb25dXG4gICAgZWxzZTpcbiAgICAgICAgY3BfaXNvbGF0aW9uID0gW11cblxuICAgIGlmIGNwX2V4Y2x1c2lvbiBpcyBub3QgTm9uZTpcbiAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgImNwX2V4Y2x1c2lvbiBpcyBzZXQuIHVzZSB0aGlzIGZsYWcgZm9yIGRlYnVnZ2luZyBwdXJwb3NlLiAiXG4gICAgICAgICAgICAibGltaXRlZCBsaXN0IG9mIGVuY29kaW5nIGV4Y2x1ZGVkIDogJXMuIixcbiAgICAgICAgICAgICIsICIuam9pbihjcF9leGNsdXNpb24pLFxuICAgICAgICApXG4gICAgICAgIGNwX2V4Y2x1c2lvbiA9IFtpYW5hX25hbWUoY3AsIEZhbHNlKSBmb3IgY3AgaW4gY3BfZXhjbHVzaW9uXVxuICAgIGVsc2U6XG4gICAgICAgIGNwX2V4Y2x1c2lvbiA9IFtdXG5cbiAgICBpZiBsZW5ndGggPD0gKGNodW5rX3NpemUgKiBzdGVwcyk6XG4gICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICJvdmVycmlkZSBzdGVwcyAoJWkpIGFuZCBjaHVua19zaXplICglaSkgYXMgY29udGVudCBkb2VzIG5vdCBmaXQgKCVpIGJ5dGUocykgZ2l2ZW4pIHBhcmFtZXRlcnMuIixcbiAgICAgICAgICAgIHN0ZXBzLFxuICAgICAgICAgICAgY2h1bmtfc2l6ZSxcbiAgICAgICAgICAgIGxlbmd0aCxcbiAgICAgICAgKVxuICAgICAgICBzdGVwcyA9IDFcbiAgICAgICAgY2h1bmtfc2l6ZSA9IGxlbmd0aFxuXG4gICAgaWYgc3RlcHMgPiAxIGFuZCBsZW5ndGggLyBzdGVwcyA8IGNodW5rX3NpemU6XG4gICAgICAgIGNodW5rX3NpemUgPSBpbnQobGVuZ3RoIC8gc3RlcHMpXG5cbiAgICBpc190b29fc21hbGxfc2VxdWVuY2UgPSBsZW4oc2VxdWVuY2VzKSA8IFRPT19TTUFMTF9TRVFVRU5DRSAgIyB0eXBlOiBib29sXG4gICAgaXNfdG9vX2xhcmdlX3NlcXVlbmNlID0gbGVuKHNlcXVlbmNlcykgPj0gVE9PX0JJR19TRVFVRU5DRSAgIyB0eXBlOiBib29sXG5cbiAgICBpZiBpc190b29fc21hbGxfc2VxdWVuY2U6XG4gICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICJUcnlpbmcgdG8gZGV0ZWN0IGVuY29kaW5nIGZyb20gYSB0aW55IHBvcnRpb24gb2YgKHt9KSBieXRlKHMpLiIuZm9ybWF0KFxuICAgICAgICAgICAgICAgIGxlbmd0aFxuICAgICAgICAgICAgKSxcbiAgICAgICAgKVxuICAgIGVsaWYgaXNfdG9vX2xhcmdlX3NlcXVlbmNlOlxuICAgICAgICBsb2dnZXIubG9nKFxuICAgICAgICAgICAgVFJBQ0UsXG4gICAgICAgICAgICAiVXNpbmcgbGF6eSBzdHIgZGVjb2RpbmcgYmVjYXVzZSB0aGUgcGF5bG9hZCBpcyBxdWl0ZSBsYXJnZSwgKHt9KSBieXRlKHMpLiIuZm9ybWF0KFxuICAgICAgICAgICAgICAgIGxlbmd0aFxuICAgICAgICAgICAgKSxcbiAgICAgICAgKVxuXG4gICAgcHJpb3JpdGl6ZWRfZW5jb2RpbmdzID0gW10gICMgdHlwZTogTGlzdFtzdHJdXG5cbiAgICBzcGVjaWZpZWRfZW5jb2RpbmcgPSAoXG4gICAgICAgIGFueV9zcGVjaWZpZWRfZW5jb2Rpbmcoc2VxdWVuY2VzKSBpZiBwcmVlbXB0aXZlX2JlaGF2aW91ciBlbHNlIE5vbmVcbiAgICApICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cblxuICAgIGlmIHNwZWNpZmllZF9lbmNvZGluZyBpcyBub3QgTm9uZTpcbiAgICAgICAgcHJpb3JpdGl6ZWRfZW5jb2RpbmdzLmFwcGVuZChzcGVjaWZpZWRfZW5jb2RpbmcpXG4gICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICJEZXRlY3RlZCBkZWNsYXJhdGl2ZSBtYXJrIGluIHNlcXVlbmNlLiBQcmlvcml0eSArMSBnaXZlbiBmb3IgJXMuIixcbiAgICAgICAgICAgIHNwZWNpZmllZF9lbmNvZGluZyxcbiAgICAgICAgKVxuXG4gICAgdGVzdGVkID0gc2V0KCkgICMgdHlwZTogU2V0W3N0cl1cbiAgICB0ZXN0ZWRfYnV0X2hhcmRfZmFpbHVyZSA9IFtdICAjIHR5cGU6IExpc3Rbc3RyXVxuICAgIHRlc3RlZF9idXRfc29mdF9mYWlsdXJlID0gW10gICMgdHlwZTogTGlzdFtzdHJdXG5cbiAgICBmYWxsYmFja19hc2NpaSA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbQ2hhcnNldE1hdGNoXVxuICAgIGZhbGxiYWNrX3U4ID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtDaGFyc2V0TWF0Y2hdXG4gICAgZmFsbGJhY2tfc3BlY2lmaWVkID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtDaGFyc2V0TWF0Y2hdXG5cbiAgICByZXN1bHRzID0gQ2hhcnNldE1hdGNoZXMoKSAgIyB0eXBlOiBDaGFyc2V0TWF0Y2hlc1xuXG4gICAgc2lnX2VuY29kaW5nLCBzaWdfcGF5bG9hZCA9IGlkZW50aWZ5X3NpZ19vcl9ib20oc2VxdWVuY2VzKVxuXG4gICAgaWYgc2lnX2VuY29kaW5nIGlzIG5vdCBOb25lOlxuICAgICAgICBwcmlvcml0aXplZF9lbmNvZGluZ3MuYXBwZW5kKHNpZ19lbmNvZGluZylcbiAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgIkRldGVjdGVkIGEgU0lHIG9yIEJPTSBtYXJrIG9uIGZpcnN0ICVpIGJ5dGUocykuIFByaW9yaXR5ICsxIGdpdmVuIGZvciAlcy4iLFxuICAgICAgICAgICAgbGVuKHNpZ19wYXlsb2FkKSxcbiAgICAgICAgICAgIHNpZ19lbmNvZGluZyxcbiAgICAgICAgKVxuXG4gICAgcHJpb3JpdGl6ZWRfZW5jb2RpbmdzLmFwcGVuZCgiYXNjaWkiKVxuXG4gICAgaWYgInV0Zl84IiBub3QgaW4gcHJpb3JpdGl6ZWRfZW5jb2RpbmdzOlxuICAgICAgICBwcmlvcml0aXplZF9lbmNvZGluZ3MuYXBwZW5kKCJ1dGZfOCIpXG5cbiAgICBmb3IgZW5jb2RpbmdfaWFuYSBpbiBwcmlvcml0aXplZF9lbmNvZGluZ3MgKyBJQU5BX1NVUFBPUlRFRDpcblxuICAgICAgICBpZiBjcF9pc29sYXRpb24gYW5kIGVuY29kaW5nX2lhbmEgbm90IGluIGNwX2lzb2xhdGlvbjpcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgaWYgY3BfZXhjbHVzaW9uIGFuZCBlbmNvZGluZ19pYW5hIGluIGNwX2V4Y2x1c2lvbjpcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgaWYgZW5jb2RpbmdfaWFuYSBpbiB0ZXN0ZWQ6XG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIHRlc3RlZC5hZGQoZW5jb2RpbmdfaWFuYSlcblxuICAgICAgICBkZWNvZGVkX3BheWxvYWQgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cbiAgICAgICAgYm9tX29yX3NpZ19hdmFpbGFibGUgPSBzaWdfZW5jb2RpbmcgPT0gZW5jb2RpbmdfaWFuYSAgIyB0eXBlOiBib29sXG4gICAgICAgIHN0cmlwX3NpZ19vcl9ib20gPSBib21fb3Jfc2lnX2F2YWlsYWJsZSBhbmQgc2hvdWxkX3N0cmlwX3NpZ19vcl9ib20oXG4gICAgICAgICAgICBlbmNvZGluZ19pYW5hXG4gICAgICAgICkgICMgdHlwZTogYm9vbFxuXG4gICAgICAgIGlmIGVuY29kaW5nX2lhbmEgaW4geyJ1dGZfMTYiLCAidXRmXzMyIn0gYW5kIG5vdCBib21fb3Jfc2lnX2F2YWlsYWJsZTpcbiAgICAgICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICAgICAgVFJBQ0UsXG4gICAgICAgICAgICAgICAgIkVuY29kaW5nICVzIHdvbnQgYmUgdGVzdGVkIGFzLWlzIGJlY2F1c2UgaXQgcmVxdWlyZSBhIEJPTS4gV2lsbCB0cnkgc29tZSBzdWItZW5jb2RlciBMRS9CRS4iLFxuICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGlzX211bHRpX2J5dGVfZGVjb2RlciA9IGlzX211bHRpX2J5dGVfZW5jb2RpbmcoZW5jb2RpbmdfaWFuYSkgICMgdHlwZTogYm9vbFxuICAgICAgICBleGNlcHQgKE1vZHVsZU5vdEZvdW5kRXJyb3IsIEltcG9ydEVycm9yKTpcbiAgICAgICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICAgICAgVFJBQ0UsXG4gICAgICAgICAgICAgICAgIkVuY29kaW5nICVzIGRvZXMgbm90IHByb3ZpZGUgYW4gSW5jcmVtZW50YWxEZWNvZGVyIixcbiAgICAgICAgICAgICAgICBlbmNvZGluZ19pYW5hLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBpZiBpc190b29fbGFyZ2Vfc2VxdWVuY2UgYW5kIGlzX211bHRpX2J5dGVfZGVjb2RlciBpcyBGYWxzZTpcbiAgICAgICAgICAgICAgICBzdHIoXG4gICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlc1s6IGludCg1MGU0KV1cbiAgICAgICAgICAgICAgICAgICAgaWYgc3RyaXBfc2lnX29yX2JvbSBpcyBGYWxzZVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHNlcXVlbmNlc1tsZW4oc2lnX3BheWxvYWQpIDogaW50KDUwZTQpXSxcbiAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc9ZW5jb2RpbmdfaWFuYSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGRlY29kZWRfcGF5bG9hZCA9IHN0cihcbiAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VzXG4gICAgICAgICAgICAgICAgICAgIGlmIHN0cmlwX3NpZ19vcl9ib20gaXMgRmFsc2VcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBzZXF1ZW5jZXNbbGVuKHNpZ19wYXlsb2FkKSA6XSxcbiAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc9ZW5jb2RpbmdfaWFuYSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgIGV4Y2VwdCAoVW5pY29kZURlY29kZUVycm9yLCBMb29rdXBFcnJvcikgYXMgZTpcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGUsIExvb2t1cEVycm9yKTpcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKFxuICAgICAgICAgICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICAgICAgICAgIkNvZGUgcGFnZSAlcyBkb2VzIG5vdCBmaXQgZ2l2ZW4gYnl0ZXMgc2VxdWVuY2UgYXQgQUxMLiAlcyIsXG4gICAgICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsXG4gICAgICAgICAgICAgICAgICAgIHN0cihlKSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB0ZXN0ZWRfYnV0X2hhcmRfZmFpbHVyZS5hcHBlbmQoZW5jb2RpbmdfaWFuYSlcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgc2ltaWxhcl9zb2Z0X2ZhaWx1cmVfdGVzdCA9IEZhbHNlICAjIHR5cGU6IGJvb2xcblxuICAgICAgICBmb3IgZW5jb2Rpbmdfc29mdF9mYWlsZWQgaW4gdGVzdGVkX2J1dF9zb2Z0X2ZhaWx1cmU6XG4gICAgICAgICAgICBpZiBpc19jcF9zaW1pbGFyKGVuY29kaW5nX2lhbmEsIGVuY29kaW5nX3NvZnRfZmFpbGVkKTpcbiAgICAgICAgICAgICAgICBzaW1pbGFyX3NvZnRfZmFpbHVyZV90ZXN0ID0gVHJ1ZVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgaWYgc2ltaWxhcl9zb2Z0X2ZhaWx1cmVfdGVzdDpcbiAgICAgICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICAgICAgVFJBQ0UsXG4gICAgICAgICAgICAgICAgIiVzIGlzIGRlZW1lZCB0b28gc2ltaWxhciB0byBjb2RlIHBhZ2UgJXMgYW5kIHdhcyBjb25zaWRlciB1bnN1aXRlZCBhbHJlYWR5LiBDb250aW51aW5nISIsXG4gICAgICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSxcbiAgICAgICAgICAgICAgICBlbmNvZGluZ19zb2Z0X2ZhaWxlZCxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgcl8gPSByYW5nZShcbiAgICAgICAgICAgIDAgaWYgbm90IGJvbV9vcl9zaWdfYXZhaWxhYmxlIGVsc2UgbGVuKHNpZ19wYXlsb2FkKSxcbiAgICAgICAgICAgIGxlbmd0aCxcbiAgICAgICAgICAgIGludChsZW5ndGggLyBzdGVwcyksXG4gICAgICAgIClcblxuICAgICAgICBtdWx0aV9ieXRlX2JvbnVzID0gKFxuICAgICAgICAgICAgaXNfbXVsdGlfYnl0ZV9kZWNvZGVyXG4gICAgICAgICAgICBhbmQgZGVjb2RlZF9wYXlsb2FkIGlzIG5vdCBOb25lXG4gICAgICAgICAgICBhbmQgbGVuKGRlY29kZWRfcGF5bG9hZCkgPCBsZW5ndGhcbiAgICAgICAgKSAgIyB0eXBlOiBib29sXG5cbiAgICAgICAgaWYgbXVsdGlfYnl0ZV9ib251czpcbiAgICAgICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICAgICAgVFJBQ0UsXG4gICAgICAgICAgICAgICAgIkNvZGUgcGFnZSAlcyBpcyBhIG11bHRpIGJ5dGUgZW5jb2RpbmcgdGFibGUgYW5kIGl0IGFwcGVhciB0aGF0IGF0IGxlYXN0IG9uZSBjaGFyYWN0ZXIgIlxuICAgICAgICAgICAgICAgICJ3YXMgZW5jb2RlZCB1c2luZyBuLWJ5dGVzLiIsXG4gICAgICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSxcbiAgICAgICAgICAgIClcblxuICAgICAgICBtYXhfY2h1bmtfZ2F2ZV91cCA9IGludChsZW4ocl8pIC8gNCkgICMgdHlwZTogaW50XG5cbiAgICAgICAgbWF4X2NodW5rX2dhdmVfdXAgPSBtYXgobWF4X2NodW5rX2dhdmVfdXAsIDIpXG4gICAgICAgIGVhcmx5X3N0b3BfY291bnQgPSAwICAjIHR5cGU6IGludFxuICAgICAgICBsYXp5X3N0cl9oYXJkX2ZhaWx1cmUgPSBGYWxzZVxuXG4gICAgICAgIG1kX2NodW5rcyA9IFtdICAjIHR5cGU6IExpc3Rbc3RyXVxuICAgICAgICBtZF9yYXRpb3MgPSBbXVxuXG4gICAgICAgIGZvciBpIGluIHJfOlxuICAgICAgICAgICAgaWYgaSArIGNodW5rX3NpemUgPiBsZW5ndGggKyA4OlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgICAgIGN1dF9zZXF1ZW5jZSA9IHNlcXVlbmNlc1tpIDogaSArIGNodW5rX3NpemVdXG5cbiAgICAgICAgICAgIGlmIGJvbV9vcl9zaWdfYXZhaWxhYmxlIGFuZCBzdHJpcF9zaWdfb3JfYm9tIGlzIEZhbHNlOlxuICAgICAgICAgICAgICAgIGN1dF9zZXF1ZW5jZSA9IHNpZ19wYXlsb2FkICsgY3V0X3NlcXVlbmNlXG5cbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBjaHVuayA9IGN1dF9zZXF1ZW5jZS5kZWNvZGUoXG4gICAgICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsXG4gICAgICAgICAgICAgICAgICAgIGVycm9ycz0iaWdub3JlIiBpZiBpc19tdWx0aV9ieXRlX2RlY29kZXIgZWxzZSAic3RyaWN0IixcbiAgICAgICAgICAgICAgICApICAjIHR5cGU6IHN0clxuICAgICAgICAgICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvciBhcyBlOiAgIyBMYXp5IHN0ciBsb2FkaW5nIG1heSBoYXZlIG1pc3NlZCBzb21ldGhpbmcgdGhlcmVcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKFxuICAgICAgICAgICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICAgICAgICAgIkxhenlTdHIgTG9hZGluZzogQWZ0ZXIgTUQgY2h1bmsgZGVjb2RlLCBjb2RlIHBhZ2UgJXMgZG9lcyBub3QgZml0IGdpdmVuIGJ5dGVzIHNlcXVlbmNlIGF0IEFMTC4gJXMiLFxuICAgICAgICAgICAgICAgICAgICBlbmNvZGluZ19pYW5hLFxuICAgICAgICAgICAgICAgICAgICBzdHIoZSksXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGVhcmx5X3N0b3BfY291bnQgPSBtYXhfY2h1bmtfZ2F2ZV91cFxuICAgICAgICAgICAgICAgIGxhenlfc3RyX2hhcmRfZmFpbHVyZSA9IFRydWVcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAjIG11bHRpLWJ5dGUgYmFkIGN1dHRpbmcgZGV0ZWN0b3IgYW5kIGFkanVzdG1lbnRcbiAgICAgICAgICAgICMgbm90IHRoZSBjbGVhbmVzdCB3YXkgdG8gcGVyZm9ybSB0aGF0IGZpeCBidXQgY2xldmVyIGVub3VnaCBmb3Igbm93LlxuICAgICAgICAgICAgaWYgaXNfbXVsdGlfYnl0ZV9kZWNvZGVyIGFuZCBpID4gMCBhbmQgc2VxdWVuY2VzW2ldID49IDB4ODA6XG5cbiAgICAgICAgICAgICAgICBjaHVua19wYXJ0aWFsX3NpemVfY2hrID0gbWluKGNodW5rX3NpemUsIDE2KSAgIyB0eXBlOiBpbnRcblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgZGVjb2RlZF9wYXlsb2FkXG4gICAgICAgICAgICAgICAgICAgIGFuZCBjaHVua1s6Y2h1bmtfcGFydGlhbF9zaXplX2Noa10gbm90IGluIGRlY29kZWRfcGF5bG9hZFxuICAgICAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgICAgIGZvciBqIGluIHJhbmdlKGksIGkgLSA0LCAtMSk6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXRfc2VxdWVuY2UgPSBzZXF1ZW5jZXNbaiA6IGkgKyBjaHVua19zaXplXVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBib21fb3Jfc2lnX2F2YWlsYWJsZSBhbmQgc3RyaXBfc2lnX29yX2JvbSBpcyBGYWxzZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXRfc2VxdWVuY2UgPSBzaWdfcGF5bG9hZCArIGN1dF9zZXF1ZW5jZVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGN1dF9zZXF1ZW5jZS5kZWNvZGUoZW5jb2RpbmdfaWFuYSwgZXJyb3JzPSJpZ25vcmUiKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBjaHVua1s6Y2h1bmtfcGFydGlhbF9zaXplX2Noa10gaW4gZGVjb2RlZF9wYXlsb2FkOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIG1kX2NodW5rcy5hcHBlbmQoY2h1bmspXG5cbiAgICAgICAgICAgIG1kX3JhdGlvcy5hcHBlbmQobWVzc19yYXRpbyhjaHVuaywgdGhyZXNob2xkKSlcblxuICAgICAgICAgICAgaWYgbWRfcmF0aW9zWy0xXSA+PSB0aHJlc2hvbGQ6XG4gICAgICAgICAgICAgICAgZWFybHlfc3RvcF9jb3VudCArPSAxXG5cbiAgICAgICAgICAgIGlmIChlYXJseV9zdG9wX2NvdW50ID49IG1heF9jaHVua19nYXZlX3VwKSBvciAoXG4gICAgICAgICAgICAgICAgYm9tX29yX3NpZ19hdmFpbGFibGUgYW5kIHN0cmlwX3NpZ19vcl9ib20gaXMgRmFsc2VcbiAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAjIFdlIG1pZ2h0IHdhbnQgdG8gY2hlY2sgdGhlIHNlcXVlbmNlIGFnYWluIHdpdGggdGhlIHdob2xlIGNvbnRlbnRcbiAgICAgICAgIyBPbmx5IGlmIGluaXRpYWwgTUQgdGVzdHMgcGFzc2VzXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIG5vdCBsYXp5X3N0cl9oYXJkX2ZhaWx1cmVcbiAgICAgICAgICAgIGFuZCBpc190b29fbGFyZ2Vfc2VxdWVuY2VcbiAgICAgICAgICAgIGFuZCBub3QgaXNfbXVsdGlfYnl0ZV9kZWNvZGVyXG4gICAgICAgICk6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgc2VxdWVuY2VzW2ludCg1MGUzKSA6XS5kZWNvZGUoZW5jb2RpbmdfaWFuYSwgZXJyb3JzPSJzdHJpY3QiKVxuICAgICAgICAgICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvciBhcyBlOlxuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgICAgICAgICAiTGF6eVN0ciBMb2FkaW5nOiBBZnRlciBmaW5hbCBsb29rdXAsIGNvZGUgcGFnZSAlcyBkb2VzIG5vdCBmaXQgZ2l2ZW4gYnl0ZXMgc2VxdWVuY2UgYXQgQUxMLiAlcyIsXG4gICAgICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsXG4gICAgICAgICAgICAgICAgICAgIHN0cihlKSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgdGVzdGVkX2J1dF9oYXJkX2ZhaWx1cmUuYXBwZW5kKGVuY29kaW5nX2lhbmEpXG4gICAgICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBtZWFuX21lc3NfcmF0aW8gPSAoXG4gICAgICAgICAgICBzdW0obWRfcmF0aW9zKSAvIGxlbihtZF9yYXRpb3MpIGlmIG1kX3JhdGlvcyBlbHNlIDAuMFxuICAgICAgICApICAjIHR5cGU6IGZsb2F0XG4gICAgICAgIGlmIG1lYW5fbWVzc19yYXRpbyA+PSB0aHJlc2hvbGQgb3IgZWFybHlfc3RvcF9jb3VudCA+PSBtYXhfY2h1bmtfZ2F2ZV91cDpcbiAgICAgICAgICAgIHRlc3RlZF9idXRfc29mdF9mYWlsdXJlLmFwcGVuZChlbmNvZGluZ19pYW5hKVxuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICAgICAiJXMgd2FzIGV4Y2x1ZGVkIGJlY2F1c2Ugb2YgaW5pdGlhbCBjaGFvcyBwcm9iaW5nLiBHYXZlIHVwICVpIHRpbWUocykuICJcbiAgICAgICAgICAgICAgICAiQ29tcHV0ZWQgbWVhbiBjaGFvcyBpcyAlZiAlJS4iLFxuICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsXG4gICAgICAgICAgICAgICAgZWFybHlfc3RvcF9jb3VudCxcbiAgICAgICAgICAgICAgICByb3VuZChtZWFuX21lc3NfcmF0aW8gKiAxMDAsIG5kaWdpdHM9MyksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAjIFByZXBhcmluZyB0aG9zZSBmYWxsYmFja3MgaW4gY2FzZSB3ZSBnb3Qgbm90aGluZy5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBlbmNvZGluZ19pYW5hIGluIFsiYXNjaWkiLCAidXRmXzgiLCBzcGVjaWZpZWRfZW5jb2RpbmddXG4gICAgICAgICAgICAgICAgYW5kIG5vdCBsYXp5X3N0cl9oYXJkX2ZhaWx1cmVcbiAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgZmFsbGJhY2tfZW50cnkgPSBDaGFyc2V0TWF0Y2goXG4gICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlcywgZW5jb2RpbmdfaWFuYSwgdGhyZXNob2xkLCBGYWxzZSwgW10sIGRlY29kZWRfcGF5bG9hZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBpZiBlbmNvZGluZ19pYW5hID09IHNwZWNpZmllZF9lbmNvZGluZzpcbiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tfc3BlY2lmaWVkID0gZmFsbGJhY2tfZW50cnlcbiAgICAgICAgICAgICAgICBlbGlmIGVuY29kaW5nX2lhbmEgPT0gImFzY2lpIjpcbiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tfYXNjaWkgPSBmYWxsYmFja19lbnRyeVxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIGZhbGxiYWNrX3U4ID0gZmFsbGJhY2tfZW50cnlcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgIiVzIHBhc3NlZCBpbml0aWFsIGNoYW9zIHByb2JpbmcuIE1lYW4gbWVhc3VyZWQgY2hhb3MgaXMgJWYgJSUiLFxuICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSxcbiAgICAgICAgICAgIHJvdW5kKG1lYW5fbWVzc19yYXRpbyAqIDEwMCwgbmRpZ2l0cz0zKSxcbiAgICAgICAgKVxuXG4gICAgICAgIGlmIG5vdCBpc19tdWx0aV9ieXRlX2RlY29kZXI6XG4gICAgICAgICAgICB0YXJnZXRfbGFuZ3VhZ2VzID0gZW5jb2RpbmdfbGFuZ3VhZ2VzKGVuY29kaW5nX2lhbmEpICAjIHR5cGU6IExpc3Rbc3RyXVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgdGFyZ2V0X2xhbmd1YWdlcyA9IG1iX2VuY29kaW5nX2xhbmd1YWdlcyhlbmNvZGluZ19pYW5hKVxuXG4gICAgICAgIGlmIHRhcmdldF9sYW5ndWFnZXM6XG4gICAgICAgICAgICBsb2dnZXIubG9nKFxuICAgICAgICAgICAgICAgIFRSQUNFLFxuICAgICAgICAgICAgICAgICJ7fSBzaG91bGQgdGFyZ2V0IGFueSBsYW5ndWFnZShzKSBvZiB7fSIuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICBlbmNvZGluZ19pYW5hLCBzdHIodGFyZ2V0X2xhbmd1YWdlcylcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgKVxuXG4gICAgICAgIGNkX3JhdGlvcyA9IFtdXG5cbiAgICAgICAgIyBXZSBzaGFsbCBza2lwIHRoZSBDRCB3aGVuIGl0cyBhYm91dCBBU0NJSVxuICAgICAgICAjIE1vc3Qgb2YgdGhlIHRpbWUgaXRzIG5vdCByZWxldmFudCB0byBydW4gImxhbmd1YWdlLWRldGVjdGlvbiIgb24gaXQuXG4gICAgICAgIGlmIGVuY29kaW5nX2lhbmEgIT0gImFzY2lpIjpcbiAgICAgICAgICAgIGZvciBjaHVuayBpbiBtZF9jaHVua3M6XG4gICAgICAgICAgICAgICAgY2h1bmtfbGFuZ3VhZ2VzID0gY29oZXJlbmNlX3JhdGlvKFxuICAgICAgICAgICAgICAgICAgICBjaHVuaywgMC4xLCAiLCIuam9pbih0YXJnZXRfbGFuZ3VhZ2VzKSBpZiB0YXJnZXRfbGFuZ3VhZ2VzIGVsc2UgTm9uZVxuICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgIGNkX3JhdGlvcy5hcHBlbmQoY2h1bmtfbGFuZ3VhZ2VzKVxuXG4gICAgICAgIGNkX3JhdGlvc19tZXJnZWQgPSBtZXJnZV9jb2hlcmVuY2VfcmF0aW9zKGNkX3JhdGlvcylcblxuICAgICAgICBpZiBjZF9yYXRpb3NfbWVyZ2VkOlxuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICAgICAiV2UgZGV0ZWN0ZWQgbGFuZ3VhZ2Uge30gdXNpbmcge30iLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgY2RfcmF0aW9zX21lcmdlZCwgZW5jb2RpbmdfaWFuYVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICApXG5cbiAgICAgICAgcmVzdWx0cy5hcHBlbmQoXG4gICAgICAgICAgICBDaGFyc2V0TWF0Y2goXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VzLFxuICAgICAgICAgICAgICAgIGVuY29kaW5nX2lhbmEsXG4gICAgICAgICAgICAgICAgbWVhbl9tZXNzX3JhdGlvLFxuICAgICAgICAgICAgICAgIGJvbV9vcl9zaWdfYXZhaWxhYmxlLFxuICAgICAgICAgICAgICAgIGNkX3JhdGlvc19tZXJnZWQsXG4gICAgICAgICAgICAgICAgZGVjb2RlZF9wYXlsb2FkLFxuICAgICAgICAgICAgKVxuICAgICAgICApXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZW5jb2RpbmdfaWFuYSBpbiBbc3BlY2lmaWVkX2VuY29kaW5nLCAiYXNjaWkiLCAidXRmXzgiXVxuICAgICAgICAgICAgYW5kIG1lYW5fbWVzc19yYXRpbyA8IDAuMVxuICAgICAgICApOlxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICAgICJFbmNvZGluZyBkZXRlY3Rpb246ICVzIGlzIG1vc3QgbGlrZWx5IHRoZSBvbmUuIiwgZW5jb2RpbmdfaWFuYVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaWYgZXhwbGFpbjpcbiAgICAgICAgICAgICAgICBsb2dnZXIucmVtb3ZlSGFuZGxlcihleHBsYWluX2hhbmRsZXIpXG4gICAgICAgICAgICAgICAgbG9nZ2VyLnNldExldmVsKHByZXZpb3VzX2xvZ2dlcl9sZXZlbClcbiAgICAgICAgICAgIHJldHVybiBDaGFyc2V0TWF0Y2hlcyhbcmVzdWx0c1tlbmNvZGluZ19pYW5hXV0pXG5cbiAgICAgICAgaWYgZW5jb2RpbmdfaWFuYSA9PSBzaWdfZW5jb2Rpbmc6XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgICAgICAgICAgIkVuY29kaW5nIGRldGVjdGlvbjogJXMgaXMgbW9zdCBsaWtlbHkgdGhlIG9uZSBhcyB3ZSBkZXRlY3RlZCBhIEJPTSBvciBTSUcgd2l0aGluICJcbiAgICAgICAgICAgICAgICAidGhlIGJlZ2lubmluZyBvZiB0aGUgc2VxdWVuY2UuIixcbiAgICAgICAgICAgICAgICBlbmNvZGluZ19pYW5hLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaWYgZXhwbGFpbjpcbiAgICAgICAgICAgICAgICBsb2dnZXIucmVtb3ZlSGFuZGxlcihleHBsYWluX2hhbmRsZXIpXG4gICAgICAgICAgICAgICAgbG9nZ2VyLnNldExldmVsKHByZXZpb3VzX2xvZ2dlcl9sZXZlbClcbiAgICAgICAgICAgIHJldHVybiBDaGFyc2V0TWF0Y2hlcyhbcmVzdWx0c1tlbmNvZGluZ19pYW5hXV0pXG5cbiAgICBpZiBsZW4ocmVzdWx0cykgPT0gMDpcbiAgICAgICAgaWYgZmFsbGJhY2tfdTggb3IgZmFsbGJhY2tfYXNjaWkgb3IgZmFsbGJhY2tfc3BlY2lmaWVkOlxuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgICAgICBUUkFDRSxcbiAgICAgICAgICAgICAgICAiTm90aGluZyBnb3Qgb3V0IG9mIHRoZSBkZXRlY3Rpb24gcHJvY2Vzcy4gVXNpbmcgQVNDSUkvVVRGLTgvU3BlY2lmaWVkIGZhbGxiYWNrLiIsXG4gICAgICAgICAgICApXG5cbiAgICAgICAgaWYgZmFsbGJhY2tfc3BlY2lmaWVkOlxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICAgICJFbmNvZGluZyBkZXRlY3Rpb246ICVzIHdpbGwgYmUgdXNlZCBhcyBhIGZhbGxiYWNrIG1hdGNoIixcbiAgICAgICAgICAgICAgICBmYWxsYmFja19zcGVjaWZpZWQuZW5jb2RpbmcsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXN1bHRzLmFwcGVuZChmYWxsYmFja19zcGVjaWZpZWQpXG4gICAgICAgIGVsaWYgKFxuICAgICAgICAgICAgKGZhbGxiYWNrX3U4IGFuZCBmYWxsYmFja19hc2NpaSBpcyBOb25lKVxuICAgICAgICAgICAgb3IgKFxuICAgICAgICAgICAgICAgIGZhbGxiYWNrX3U4XG4gICAgICAgICAgICAgICAgYW5kIGZhbGxiYWNrX2FzY2lpXG4gICAgICAgICAgICAgICAgYW5kIGZhbGxiYWNrX3U4LmZpbmdlcnByaW50ICE9IGZhbGxiYWNrX2FzY2lpLmZpbmdlcnByaW50XG4gICAgICAgICAgICApXG4gICAgICAgICAgICBvciAoZmFsbGJhY2tfdTggaXMgbm90IE5vbmUpXG4gICAgICAgICk6XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoIkVuY29kaW5nIGRldGVjdGlvbjogdXRmXzggd2lsbCBiZSB1c2VkIGFzIGEgZmFsbGJhY2sgbWF0Y2giKVxuICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoZmFsbGJhY2tfdTgpXG4gICAgICAgIGVsaWYgZmFsbGJhY2tfYXNjaWk6XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoIkVuY29kaW5nIGRldGVjdGlvbjogYXNjaWkgd2lsbCBiZSB1c2VkIGFzIGEgZmFsbGJhY2sgbWF0Y2giKVxuICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoZmFsbGJhY2tfYXNjaWkpXG5cbiAgICBpZiByZXN1bHRzOlxuICAgICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgICAgICAiRW5jb2RpbmcgZGV0ZWN0aW9uOiBGb3VuZCAlcyBhcyBwbGF1c2libGUgKGJlc3QtY2FuZGlkYXRlKSBmb3IgY29udGVudC4gV2l0aCAlaSBhbHRlcm5hdGl2ZXMuIixcbiAgICAgICAgICAgIHJlc3VsdHMuYmVzdCgpLmVuY29kaW5nLCAgIyB0eXBlOiBpZ25vcmVcbiAgICAgICAgICAgIGxlbihyZXN1bHRzKSAtIDEsXG4gICAgICAgIClcbiAgICBlbHNlOlxuICAgICAgICBsb2dnZXIuZGVidWcoIkVuY29kaW5nIGRldGVjdGlvbjogVW5hYmxlIHRvIGRldGVybWluZSBhbnkgc3VpdGFibGUgY2hhcnNldC4iKVxuXG4gICAgaWYgZXhwbGFpbjpcbiAgICAgICAgbG9nZ2VyLnJlbW92ZUhhbmRsZXIoZXhwbGFpbl9oYW5kbGVyKVxuICAgICAgICBsb2dnZXIuc2V0TGV2ZWwocHJldmlvdXNfbG9nZ2VyX2xldmVsKVxuXG4gICAgcmV0dXJuIHJlc3VsdHNcblxuXG5kZWYgZnJvbV9mcChcbiAgICBmcDogQmluYXJ5SU8sXG4gICAgc3RlcHM6IGludCA9IDUsXG4gICAgY2h1bmtfc2l6ZTogaW50ID0gNTEyLFxuICAgIHRocmVzaG9sZDogZmxvYXQgPSAwLjIwLFxuICAgIGNwX2lzb2xhdGlvbjogTGlzdFtzdHJdID0gTm9uZSxcbiAgICBjcF9leGNsdXNpb246IExpc3Rbc3RyXSA9IE5vbmUsXG4gICAgcHJlZW1wdGl2ZV9iZWhhdmlvdXI6IGJvb2wgPSBUcnVlLFxuICAgIGV4cGxhaW46IGJvb2wgPSBGYWxzZSxcbikgLT4gQ2hhcnNldE1hdGNoZXM6XG4gICAgIiIiXG4gICAgU2FtZSB0aGluZyB0aGFuIHRoZSBmdW5jdGlvbiBmcm9tX2J5dGVzIGJ1dCB1c2luZyBhIGZpbGUgcG9pbnRlciB0aGF0IGlzIGFscmVhZHkgcmVhZHkuXG4gICAgV2lsbCBub3QgY2xvc2UgdGhlIGZpbGUgcG9pbnRlci5cbiAgICAiIiJcbiAgICByZXR1cm4gZnJvbV9ieXRlcyhcbiAgICAgICAgZnAucmVhZCgpLFxuICAgICAgICBzdGVwcyxcbiAgICAgICAgY2h1bmtfc2l6ZSxcbiAgICAgICAgdGhyZXNob2xkLFxuICAgICAgICBjcF9pc29sYXRpb24sXG4gICAgICAgIGNwX2V4Y2x1c2lvbixcbiAgICAgICAgcHJlZW1wdGl2ZV9iZWhhdmlvdXIsXG4gICAgICAgIGV4cGxhaW4sXG4gICAgKVxuXG5cbmRlZiBmcm9tX3BhdGgoXG4gICAgcGF0aDogUGF0aExpa2UsXG4gICAgc3RlcHM6IGludCA9IDUsXG4gICAgY2h1bmtfc2l6ZTogaW50ID0gNTEyLFxuICAgIHRocmVzaG9sZDogZmxvYXQgPSAwLjIwLFxuICAgIGNwX2lzb2xhdGlvbjogTGlzdFtzdHJdID0gTm9uZSxcbiAgICBjcF9leGNsdXNpb246IExpc3Rbc3RyXSA9IE5vbmUsXG4gICAgcHJlZW1wdGl2ZV9iZWhhdmlvdXI6IGJvb2wgPSBUcnVlLFxuICAgIGV4cGxhaW46IGJvb2wgPSBGYWxzZSxcbikgLT4gQ2hhcnNldE1hdGNoZXM6XG4gICAgIiIiXG4gICAgU2FtZSB0aGluZyB0aGFuIHRoZSBmdW5jdGlvbiBmcm9tX2J5dGVzIGJ1dCB3aXRoIG9uZSBleHRyYSBzdGVwLiBPcGVuaW5nIGFuZCByZWFkaW5nIGdpdmVuIGZpbGUgcGF0aCBpbiBiaW5hcnkgbW9kZS5cbiAgICBDYW4gcmFpc2UgSU9FcnJvci5cbiAgICAiIiJcbiAgICB3aXRoIG9wZW4ocGF0aCwgInJiIikgYXMgZnA6XG4gICAgICAgIHJldHVybiBmcm9tX2ZwKFxuICAgICAgICAgICAgZnAsXG4gICAgICAgICAgICBzdGVwcyxcbiAgICAgICAgICAgIGNodW5rX3NpemUsXG4gICAgICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgICAgICBjcF9pc29sYXRpb24sXG4gICAgICAgICAgICBjcF9leGNsdXNpb24sXG4gICAgICAgICAgICBwcmVlbXB0aXZlX2JlaGF2aW91cixcbiAgICAgICAgICAgIGV4cGxhaW4sXG4gICAgICAgIClcblxuXG5kZWYgbm9ybWFsaXplKFxuICAgIHBhdGg6IFBhdGhMaWtlLFxuICAgIHN0ZXBzOiBpbnQgPSA1LFxuICAgIGNodW5rX3NpemU6IGludCA9IDUxMixcbiAgICB0aHJlc2hvbGQ6IGZsb2F0ID0gMC4yMCxcbiAgICBjcF9pc29sYXRpb246IExpc3Rbc3RyXSA9IE5vbmUsXG4gICAgY3BfZXhjbHVzaW9uOiBMaXN0W3N0cl0gPSBOb25lLFxuICAgIHByZWVtcHRpdmVfYmVoYXZpb3VyOiBib29sID0gVHJ1ZSxcbikgLT4gQ2hhcnNldE1hdGNoOlxuICAgICIiIlxuICAgIFRha2UgYSAodGV4dC1iYXNlZCkgZmlsZSBwYXRoIGFuZCB0cnkgdG8gY3JlYXRlIGFub3RoZXIgZmlsZSBuZXh0IHRvIGl0LCB0aGlzIHRpbWUgdXNpbmcgVVRGLTguXG4gICAgIiIiXG4gICAgcmVzdWx0cyA9IGZyb21fcGF0aChcbiAgICAgICAgcGF0aCxcbiAgICAgICAgc3RlcHMsXG4gICAgICAgIGNodW5rX3NpemUsXG4gICAgICAgIHRocmVzaG9sZCxcbiAgICAgICAgY3BfaXNvbGF0aW9uLFxuICAgICAgICBjcF9leGNsdXNpb24sXG4gICAgICAgIHByZWVtcHRpdmVfYmVoYXZpb3VyLFxuICAgIClcblxuICAgIGZpbGVuYW1lID0gYmFzZW5hbWUocGF0aClcbiAgICB0YXJnZXRfZXh0ZW5zaW9ucyA9IGxpc3Qoc3BsaXRleHQoZmlsZW5hbWUpKVxuXG4gICAgaWYgbGVuKHJlc3VsdHMpID09IDA6XG4gICAgICAgIHJhaXNlIElPRXJyb3IoXG4gICAgICAgICAgICBcJ1VuYWJsZSB0byBub3JtYWxpemUgInt9Iiwgbm8gZW5jb2RpbmcgY2hhcnNldCBzZWVtcyB0byBmaXQuXCcuZm9ybWF0KFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lXG4gICAgICAgICAgICApXG4gICAgICAgIClcblxuICAgIHJlc3VsdCA9IHJlc3VsdHMuYmVzdCgpXG5cbiAgICB0YXJnZXRfZXh0ZW5zaW9uc1swXSArPSAiLSIgKyByZXN1bHQuZW5jb2RpbmcgICMgdHlwZTogaWdub3JlXG5cbiAgICB3aXRoIG9wZW4oXG4gICAgICAgICJ7fSIuZm9ybWF0KHN0cihwYXRoKS5yZXBsYWNlKGZpbGVuYW1lLCAiIi5qb2luKHRhcmdldF9leHRlbnNpb25zKSkpLCAid2IiXG4gICAgKSBhcyBmcDpcbiAgICAgICAgZnAud3JpdGUocmVzdWx0Lm91dHB1dCgpKSAgIyB0eXBlOiBpZ25vcmVcblxuICAgIHJldHVybiByZXN1bHQgICMgdHlwZTogaWdub3JlXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY2hhcnNldF9ub3JtYWxpemVyL2NkLnB5JywgYidpbXBvcnQgaW1wb3J0bGliXG5mcm9tIGNvZGVjcyBpbXBvcnQgSW5jcmVtZW50YWxEZWNvZGVyXG5mcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBDb3VudGVyLCBPcmRlcmVkRGljdFxuZnJvbSBmdW5jdG9vbHMgaW1wb3J0IGxydV9jYWNoZVxuZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIExpc3QsIE9wdGlvbmFsLCBUdXBsZVxuXG5mcm9tIC5hc3NldHMgaW1wb3J0IEZSRVFVRU5DSUVTXG5mcm9tIC5jb25zdGFudCBpbXBvcnQgS09fTkFNRVMsIExBTkdVQUdFX1NVUFBPUlRFRF9DT1VOVCwgVE9PX1NNQUxMX1NFUVVFTkNFLCBaSF9OQU1FU1xuZnJvbSAubWQgaW1wb3J0IGlzX3N1c3BpY2lvdXNseV9zdWNjZXNzaXZlX3JhbmdlXG5mcm9tIC5tb2RlbHMgaW1wb3J0IENvaGVyZW5jZU1hdGNoZXNcbmZyb20gLnV0aWxzIGltcG9ydCAoXG4gICAgaXNfYWNjZW50dWF0ZWQsXG4gICAgaXNfbGF0aW4sXG4gICAgaXNfbXVsdGlfYnl0ZV9lbmNvZGluZyxcbiAgICBpc191bmljb2RlX3JhbmdlX3NlY29uZGFyeSxcbiAgICB1bmljb2RlX3JhbmdlLFxuKVxuXG5cbmRlZiBlbmNvZGluZ191bmljb2RlX3JhbmdlKGlhbmFfbmFtZTogc3RyKSAtPiBMaXN0W3N0cl06XG4gICAgIiIiXG4gICAgUmV0dXJuIGFzc29jaWF0ZWQgdW5pY29kZSByYW5nZXMgaW4gYSBzaW5nbGUgYnl0ZSBjb2RlIHBhZ2UuXG4gICAgIiIiXG4gICAgaWYgaXNfbXVsdGlfYnl0ZV9lbmNvZGluZyhpYW5hX25hbWUpOlxuICAgICAgICByYWlzZSBJT0Vycm9yKCJGdW5jdGlvbiBub3Qgc3VwcG9ydGVkIG9uIG11bHRpLWJ5dGUgY29kZSBwYWdlIilcblxuICAgIGRlY29kZXIgPSBpbXBvcnRsaWIuaW1wb3J0X21vZHVsZSgiZW5jb2RpbmdzLnt9Ii5mb3JtYXQoaWFuYV9uYW1lKSkuSW5jcmVtZW50YWxEZWNvZGVyICAjIHR5cGU6IGlnbm9yZVxuXG4gICAgcCA9IGRlY29kZXIoZXJyb3JzPSJpZ25vcmUiKSAgIyB0eXBlOiBJbmNyZW1lbnRhbERlY29kZXJcbiAgICBzZWVuX3JhbmdlcyA9IHt9ICAjIHR5cGU6IERpY3Rbc3RyLCBpbnRdXG4gICAgY2hhcmFjdGVyX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcblxuICAgIGZvciBpIGluIHJhbmdlKDB4NDAsIDB4RkYpOlxuICAgICAgICBjaHVuayA9IHAuZGVjb2RlKGJ5dGVzKFtpXSkpICAjIHR5cGU6IHN0clxuXG4gICAgICAgIGlmIGNodW5rOlxuICAgICAgICAgICAgY2hhcmFjdGVyX3JhbmdlID0gdW5pY29kZV9yYW5nZShjaHVuaykgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuXG4gICAgICAgICAgICBpZiBjaGFyYWN0ZXJfcmFuZ2UgaXMgTm9uZTpcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgICAgICBpZiBpc191bmljb2RlX3JhbmdlX3NlY29uZGFyeShjaGFyYWN0ZXJfcmFuZ2UpIGlzIEZhbHNlOlxuICAgICAgICAgICAgICAgIGlmIGNoYXJhY3Rlcl9yYW5nZSBub3QgaW4gc2Vlbl9yYW5nZXM6XG4gICAgICAgICAgICAgICAgICAgIHNlZW5fcmFuZ2VzW2NoYXJhY3Rlcl9yYW5nZV0gPSAwXG4gICAgICAgICAgICAgICAgc2Vlbl9yYW5nZXNbY2hhcmFjdGVyX3JhbmdlXSArPSAxXG4gICAgICAgICAgICAgICAgY2hhcmFjdGVyX2NvdW50ICs9IDFcblxuICAgIHJldHVybiBzb3J0ZWQoXG4gICAgICAgIFtcbiAgICAgICAgICAgIGNoYXJhY3Rlcl9yYW5nZVxuICAgICAgICAgICAgZm9yIGNoYXJhY3Rlcl9yYW5nZSBpbiBzZWVuX3Jhbmdlc1xuICAgICAgICAgICAgaWYgc2Vlbl9yYW5nZXNbY2hhcmFjdGVyX3JhbmdlXSAvIGNoYXJhY3Rlcl9jb3VudCA+PSAwLjE1XG4gICAgICAgIF1cbiAgICApXG5cblxuZGVmIHVuaWNvZGVfcmFuZ2VfbGFuZ3VhZ2VzKHByaW1hcnlfcmFuZ2U6IHN0cikgLT4gTGlzdFtzdHJdOlxuICAgICIiIlxuICAgIFJldHVybiBpbmZlcnJlZCBsYW5ndWFnZXMgdXNlZCB3aXRoIGEgdW5pY29kZSByYW5nZS5cbiAgICAiIiJcbiAgICBsYW5ndWFnZXMgPSBbXSAgIyB0eXBlOiBMaXN0W3N0cl1cblxuICAgIGZvciBsYW5ndWFnZSwgY2hhcmFjdGVycyBpbiBGUkVRVUVOQ0lFUy5pdGVtcygpOlxuICAgICAgICBmb3IgY2hhcmFjdGVyIGluIGNoYXJhY3RlcnM6XG4gICAgICAgICAgICBpZiB1bmljb2RlX3JhbmdlKGNoYXJhY3RlcikgPT0gcHJpbWFyeV9yYW5nZTpcbiAgICAgICAgICAgICAgICBsYW5ndWFnZXMuYXBwZW5kKGxhbmd1YWdlKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICByZXR1cm4gbGFuZ3VhZ2VzXG5cblxuQGxydV9jYWNoZSgpXG5kZWYgZW5jb2RpbmdfbGFuZ3VhZ2VzKGlhbmFfbmFtZTogc3RyKSAtPiBMaXN0W3N0cl06XG4gICAgIiIiXG4gICAgU2luZ2xlLWJ5dGUgZW5jb2RpbmcgbGFuZ3VhZ2UgYXNzb2NpYXRpb24uIFNvbWUgY29kZSBwYWdlIGFyZSBoZWF2aWx5IGxpbmtlZCB0byBwYXJ0aWN1bGFyIGxhbmd1YWdlKHMpLlxuICAgIFRoaXMgZnVuY3Rpb24gZG9lcyB0aGUgY29ycmVzcG9uZGVuY2UuXG4gICAgIiIiXG4gICAgdW5pY29kZV9yYW5nZXMgPSBlbmNvZGluZ191bmljb2RlX3JhbmdlKGlhbmFfbmFtZSkgICMgdHlwZTogTGlzdFtzdHJdXG4gICAgcHJpbWFyeV9yYW5nZSA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuXG4gICAgZm9yIHNwZWNpZmllZF9yYW5nZSBpbiB1bmljb2RlX3JhbmdlczpcbiAgICAgICAgaWYgIkxhdGluIiBub3QgaW4gc3BlY2lmaWVkX3JhbmdlOlxuICAgICAgICAgICAgcHJpbWFyeV9yYW5nZSA9IHNwZWNpZmllZF9yYW5nZVxuICAgICAgICAgICAgYnJlYWtcblxuICAgIGlmIHByaW1hcnlfcmFuZ2UgaXMgTm9uZTpcbiAgICAgICAgcmV0dXJuIFsiTGF0aW4gQmFzZWQiXVxuXG4gICAgcmV0dXJuIHVuaWNvZGVfcmFuZ2VfbGFuZ3VhZ2VzKHByaW1hcnlfcmFuZ2UpXG5cblxuQGxydV9jYWNoZSgpXG5kZWYgbWJfZW5jb2RpbmdfbGFuZ3VhZ2VzKGlhbmFfbmFtZTogc3RyKSAtPiBMaXN0W3N0cl06XG4gICAgIiIiXG4gICAgTXVsdGktYnl0ZSBlbmNvZGluZyBsYW5ndWFnZSBhc3NvY2lhdGlvbi4gU29tZSBjb2RlIHBhZ2UgYXJlIGhlYXZpbHkgbGlua2VkIHRvIHBhcnRpY3VsYXIgbGFuZ3VhZ2UocykuXG4gICAgVGhpcyBmdW5jdGlvbiBkb2VzIHRoZSBjb3JyZXNwb25kZW5jZS5cbiAgICAiIiJcbiAgICBpZiAoXG4gICAgICAgIGlhbmFfbmFtZS5zdGFydHN3aXRoKCJzaGlmdF8iKVxuICAgICAgICBvciBpYW5hX25hbWUuc3RhcnRzd2l0aCgiaXNvMjAyMl9qcCIpXG4gICAgICAgIG9yIGlhbmFfbmFtZS5zdGFydHN3aXRoKCJldWNfaiIpXG4gICAgICAgIG9yIGlhbmFfbmFtZSA9PSAiY3A5MzIiXG4gICAgKTpcbiAgICAgICAgcmV0dXJuIFsiSmFwYW5lc2UiXVxuICAgIGlmIGlhbmFfbmFtZS5zdGFydHN3aXRoKCJnYiIpIG9yIGlhbmFfbmFtZSBpbiBaSF9OQU1FUzpcbiAgICAgICAgcmV0dXJuIFsiQ2hpbmVzZSIsICJDbGFzc2ljYWwgQ2hpbmVzZSJdXG4gICAgaWYgaWFuYV9uYW1lLnN0YXJ0c3dpdGgoImlzbzIwMjJfa3IiKSBvciBpYW5hX25hbWUgaW4gS09fTkFNRVM6XG4gICAgICAgIHJldHVybiBbIktvcmVhbiJdXG5cbiAgICByZXR1cm4gW11cblxuXG5AbHJ1X2NhY2hlKG1heHNpemU9TEFOR1VBR0VfU1VQUE9SVEVEX0NPVU5UKVxuZGVmIGdldF90YXJnZXRfZmVhdHVyZXMobGFuZ3VhZ2U6IHN0cikgLT4gVHVwbGVbYm9vbCwgYm9vbF06XG4gICAgIiIiXG4gICAgRGV0ZXJtaW5lIG1haW4gYXNwZWN0cyBmcm9tIGEgc3VwcG9ydGVkIGxhbmd1YWdlIGlmIGl0IGNvbnRhaW5zIGFjY2VudHMgYW5kIGlmIGlzIHB1cmUgTGF0aW4uXG4gICAgIiIiXG4gICAgdGFyZ2V0X2hhdmVfYWNjZW50cyA9IEZhbHNlICAjIHR5cGU6IGJvb2xcbiAgICB0YXJnZXRfcHVyZV9sYXRpbiA9IFRydWUgICMgdHlwZTogYm9vbFxuXG4gICAgZm9yIGNoYXJhY3RlciBpbiBGUkVRVUVOQ0lFU1tsYW5ndWFnZV06XG4gICAgICAgIGlmIG5vdCB0YXJnZXRfaGF2ZV9hY2NlbnRzIGFuZCBpc19hY2NlbnR1YXRlZChjaGFyYWN0ZXIpOlxuICAgICAgICAgICAgdGFyZ2V0X2hhdmVfYWNjZW50cyA9IFRydWVcbiAgICAgICAgaWYgdGFyZ2V0X3B1cmVfbGF0aW4gYW5kIGlzX2xhdGluKGNoYXJhY3RlcikgaXMgRmFsc2U6XG4gICAgICAgICAgICB0YXJnZXRfcHVyZV9sYXRpbiA9IEZhbHNlXG5cbiAgICByZXR1cm4gdGFyZ2V0X2hhdmVfYWNjZW50cywgdGFyZ2V0X3B1cmVfbGF0aW5cblxuXG5kZWYgYWxwaGFiZXRfbGFuZ3VhZ2VzKFxuICAgIGNoYXJhY3RlcnM6IExpc3Rbc3RyXSwgaWdub3JlX25vbl9sYXRpbjogYm9vbCA9IEZhbHNlXG4pIC0+IExpc3Rbc3RyXTpcbiAgICAiIiJcbiAgICBSZXR1cm4gYXNzb2NpYXRlZCBsYW5ndWFnZXMgYXNzb2NpYXRlZCB0byBnaXZlbiBjaGFyYWN0ZXJzLlxuICAgICIiIlxuICAgIGxhbmd1YWdlcyA9IFtdICAjIHR5cGU6IExpc3RbVHVwbGVbc3RyLCBmbG9hdF1dXG5cbiAgICBzb3VyY2VfaGF2ZV9hY2NlbnRzID0gYW55KGlzX2FjY2VudHVhdGVkKGNoYXJhY3RlcikgZm9yIGNoYXJhY3RlciBpbiBjaGFyYWN0ZXJzKVxuXG4gICAgZm9yIGxhbmd1YWdlLCBsYW5ndWFnZV9jaGFyYWN0ZXJzIGluIEZSRVFVRU5DSUVTLml0ZW1zKCk6XG5cbiAgICAgICAgdGFyZ2V0X2hhdmVfYWNjZW50cywgdGFyZ2V0X3B1cmVfbGF0aW4gPSBnZXRfdGFyZ2V0X2ZlYXR1cmVzKGxhbmd1YWdlKVxuXG4gICAgICAgIGlmIGlnbm9yZV9ub25fbGF0aW4gYW5kIHRhcmdldF9wdXJlX2xhdGluIGlzIEZhbHNlOlxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBpZiB0YXJnZXRfaGF2ZV9hY2NlbnRzIGlzIEZhbHNlIGFuZCBzb3VyY2VfaGF2ZV9hY2NlbnRzOlxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBjaGFyYWN0ZXJfY291bnQgPSBsZW4obGFuZ3VhZ2VfY2hhcmFjdGVycykgICMgdHlwZTogaW50XG5cbiAgICAgICAgY2hhcmFjdGVyX21hdGNoX2NvdW50ID0gbGVuKFxuICAgICAgICAgICAgW2MgZm9yIGMgaW4gbGFuZ3VhZ2VfY2hhcmFjdGVycyBpZiBjIGluIGNoYXJhY3RlcnNdXG4gICAgICAgICkgICMgdHlwZTogaW50XG5cbiAgICAgICAgcmF0aW8gPSBjaGFyYWN0ZXJfbWF0Y2hfY291bnQgLyBjaGFyYWN0ZXJfY291bnQgICMgdHlwZTogZmxvYXRcblxuICAgICAgICBpZiByYXRpbyA+PSAwLjI6XG4gICAgICAgICAgICBsYW5ndWFnZXMuYXBwZW5kKChsYW5ndWFnZSwgcmF0aW8pKVxuXG4gICAgbGFuZ3VhZ2VzID0gc29ydGVkKGxhbmd1YWdlcywga2V5PWxhbWJkYSB4OiB4WzFdLCByZXZlcnNlPVRydWUpXG5cbiAgICByZXR1cm4gW2NvbXBhdGlibGVfbGFuZ3VhZ2VbMF0gZm9yIGNvbXBhdGlibGVfbGFuZ3VhZ2UgaW4gbGFuZ3VhZ2VzXVxuXG5cbmRlZiBjaGFyYWN0ZXJzX3BvcHVsYXJpdHlfY29tcGFyZShcbiAgICBsYW5ndWFnZTogc3RyLCBvcmRlcmVkX2NoYXJhY3RlcnM6IExpc3Rbc3RyXVxuKSAtPiBmbG9hdDpcbiAgICAiIiJcbiAgICBEZXRlcm1pbmUgaWYgYSBvcmRlcmVkIGNoYXJhY3RlcnMgbGlzdCAoYnkgb2NjdXJyZW5jZSBmcm9tIG1vc3QgYXBwZWFyYW5jZSB0byByYXJlc3QpIG1hdGNoIGEgcGFydGljdWxhciBsYW5ndWFnZS5cbiAgICBUaGUgcmVzdWx0IGlzIGEgcmF0aW8gYmV0d2VlbiAwLiAoYWJzb2x1dGVseSBubyBjb3JyZXNwb25kZW5jZSkgYW5kIDEuIChuZWFyIHBlcmZlY3QgZml0KS5cbiAgICBCZXdhcmUgdGhhdCBpcyBmdW5jdGlvbiBpcyBub3Qgc3RyaWN0IG9uIHRoZSBtYXRjaCBpbiBvcmRlciB0byBlYXNlIHRoZSBkZXRlY3Rpb24uIChNZWFuaW5nIGNsb3NlIG1hdGNoIGlzIDEuKVxuICAgICIiIlxuICAgIGlmIGxhbmd1YWdlIG5vdCBpbiBGUkVRVUVOQ0lFUzpcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigie30gbm90IGF2YWlsYWJsZSIuZm9ybWF0KGxhbmd1YWdlKSlcblxuICAgIGNoYXJhY3Rlcl9hcHByb3ZlZF9jb3VudCA9IDAgICMgdHlwZTogaW50XG5cbiAgICBmb3IgY2hhcmFjdGVyIGluIG9yZGVyZWRfY2hhcmFjdGVyczpcbiAgICAgICAgaWYgY2hhcmFjdGVyIG5vdCBpbiBGUkVRVUVOQ0lFU1tsYW5ndWFnZV06XG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNoYXJhY3RlcnNfYmVmb3JlX3NvdXJjZSA9IEZSRVFVRU5DSUVTW2xhbmd1YWdlXVtcbiAgICAgICAgICAgIDAgOiBGUkVRVUVOQ0lFU1tsYW5ndWFnZV0uaW5kZXgoY2hhcmFjdGVyKVxuICAgICAgICBdICAjIHR5cGU6IExpc3Rbc3RyXVxuICAgICAgICBjaGFyYWN0ZXJzX2FmdGVyX3NvdXJjZSA9IEZSRVFVRU5DSUVTW2xhbmd1YWdlXVtcbiAgICAgICAgICAgIEZSRVFVRU5DSUVTW2xhbmd1YWdlXS5pbmRleChjaGFyYWN0ZXIpIDpcbiAgICAgICAgXSAgIyB0eXBlOiBMaXN0W3N0cl1cblxuICAgICAgICBjaGFyYWN0ZXJzX2JlZm9yZSA9IG9yZGVyZWRfY2hhcmFjdGVyc1tcbiAgICAgICAgICAgIDAgOiBvcmRlcmVkX2NoYXJhY3RlcnMuaW5kZXgoY2hhcmFjdGVyKVxuICAgICAgICBdICAjIHR5cGU6IExpc3Rbc3RyXVxuICAgICAgICBjaGFyYWN0ZXJzX2FmdGVyID0gb3JkZXJlZF9jaGFyYWN0ZXJzW1xuICAgICAgICAgICAgb3JkZXJlZF9jaGFyYWN0ZXJzLmluZGV4KGNoYXJhY3RlcikgOlxuICAgICAgICBdICAjIHR5cGU6IExpc3Rbc3RyXVxuXG4gICAgICAgIGJlZm9yZV9tYXRjaF9jb3VudCA9IFtcbiAgICAgICAgICAgIGUgaW4gY2hhcmFjdGVyc19iZWZvcmUgZm9yIGUgaW4gY2hhcmFjdGVyc19iZWZvcmVfc291cmNlXG4gICAgICAgIF0uY291bnQoXG4gICAgICAgICAgICBUcnVlXG4gICAgICAgICkgICMgdHlwZTogaW50XG4gICAgICAgIGFmdGVyX21hdGNoX2NvdW50ID0gW1xuICAgICAgICAgICAgZSBpbiBjaGFyYWN0ZXJzX2FmdGVyIGZvciBlIGluIGNoYXJhY3RlcnNfYWZ0ZXJfc291cmNlXG4gICAgICAgIF0uY291bnQoXG4gICAgICAgICAgICBUcnVlXG4gICAgICAgICkgICMgdHlwZTogaW50XG5cbiAgICAgICAgaWYgbGVuKGNoYXJhY3RlcnNfYmVmb3JlX3NvdXJjZSkgPT0gMCBhbmQgYmVmb3JlX21hdGNoX2NvdW50IDw9IDQ6XG4gICAgICAgICAgICBjaGFyYWN0ZXJfYXBwcm92ZWRfY291bnQgKz0gMVxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBpZiBsZW4oY2hhcmFjdGVyc19hZnRlcl9zb3VyY2UpID09IDAgYW5kIGFmdGVyX21hdGNoX2NvdW50IDw9IDQ6XG4gICAgICAgICAgICBjaGFyYWN0ZXJfYXBwcm92ZWRfY291bnQgKz0gMVxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBiZWZvcmVfbWF0Y2hfY291bnQgLyBsZW4oY2hhcmFjdGVyc19iZWZvcmVfc291cmNlKSA+PSAwLjRcbiAgICAgICAgICAgIG9yIGFmdGVyX21hdGNoX2NvdW50IC8gbGVuKGNoYXJhY3RlcnNfYWZ0ZXJfc291cmNlKSA+PSAwLjRcbiAgICAgICAgKTpcbiAgICAgICAgICAgIGNoYXJhY3Rlcl9hcHByb3ZlZF9jb3VudCArPSAxXG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgcmV0dXJuIGNoYXJhY3Rlcl9hcHByb3ZlZF9jb3VudCAvIGxlbihvcmRlcmVkX2NoYXJhY3RlcnMpXG5cblxuZGVmIGFscGhhX3VuaWNvZGVfc3BsaXQoZGVjb2RlZF9zZXF1ZW5jZTogc3RyKSAtPiBMaXN0W3N0cl06XG4gICAgIiIiXG4gICAgR2l2ZW4gYSBkZWNvZGVkIHRleHQgc2VxdWVuY2UsIHJldHVybiBhIGxpc3Qgb2Ygc3RyLiBVbmljb2RlIHJhbmdlIC8gYWxwaGFiZXQgc2VwYXJhdGlvbi5cbiAgICBFeC4gYSB0ZXh0IGNvbnRhaW5pbmcgRW5nbGlzaC9MYXRpbiB3aXRoIGEgYml0IGEgSGVicmV3IHdpbGwgcmV0dXJuIHR3byBpdGVtcyBpbiB0aGUgcmVzdWx0aW5nIGxpc3Q7XG4gICAgT25lIGNvbnRhaW5pbmcgdGhlIGxhdGluIGxldHRlcnMgYW5kIHRoZSBvdGhlciBoZWJyZXcuXG4gICAgIiIiXG4gICAgbGF5ZXJzID0gT3JkZXJlZERpY3QoKSAgIyB0eXBlOiBEaWN0W3N0ciwgc3RyXVxuXG4gICAgZm9yIGNoYXJhY3RlciBpbiBkZWNvZGVkX3NlcXVlbmNlOlxuICAgICAgICBpZiBjaGFyYWN0ZXIuaXNhbHBoYSgpIGlzIEZhbHNlOlxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBjaGFyYWN0ZXJfcmFuZ2UgPSB1bmljb2RlX3JhbmdlKGNoYXJhY3RlcikgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuXG4gICAgICAgIGlmIGNoYXJhY3Rlcl9yYW5nZSBpcyBOb25lOlxuICAgICAgICAgICAgY29udGludWVcblxuICAgICAgICBsYXllcl90YXJnZXRfcmFuZ2UgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cblxuICAgICAgICBmb3IgZGlzY292ZXJlZF9yYW5nZSBpbiBsYXllcnM6XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaXNfc3VzcGljaW91c2x5X3N1Y2Nlc3NpdmVfcmFuZ2UoZGlzY292ZXJlZF9yYW5nZSwgY2hhcmFjdGVyX3JhbmdlKVxuICAgICAgICAgICAgICAgIGlzIEZhbHNlXG4gICAgICAgICAgICApOlxuICAgICAgICAgICAgICAgIGxheWVyX3RhcmdldF9yYW5nZSA9IGRpc2NvdmVyZWRfcmFuZ2VcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgIGlmIGxheWVyX3RhcmdldF9yYW5nZSBpcyBOb25lOlxuICAgICAgICAgICAgbGF5ZXJfdGFyZ2V0X3JhbmdlID0gY2hhcmFjdGVyX3JhbmdlXG5cbiAgICAgICAgaWYgbGF5ZXJfdGFyZ2V0X3JhbmdlIG5vdCBpbiBsYXllcnM6XG4gICAgICAgICAgICBsYXllcnNbbGF5ZXJfdGFyZ2V0X3JhbmdlXSA9IGNoYXJhY3Rlci5sb3dlcigpXG4gICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGxheWVyc1tsYXllcl90YXJnZXRfcmFuZ2VdICs9IGNoYXJhY3Rlci5sb3dlcigpXG5cbiAgICByZXR1cm4gbGlzdChsYXllcnMudmFsdWVzKCkpXG5cblxuZGVmIG1lcmdlX2NvaGVyZW5jZV9yYXRpb3MocmVzdWx0czogTGlzdFtDb2hlcmVuY2VNYXRjaGVzXSkgLT4gQ29oZXJlbmNlTWF0Y2hlczpcbiAgICAiIiJcbiAgICBUaGlzIGZ1bmN0aW9uIG1lcmdlIHJlc3VsdHMgcHJldmlvdXNseSBnaXZlbiBieSB0aGUgZnVuY3Rpb24gY29oZXJlbmNlX3JhdGlvLlxuICAgIFRoZSByZXR1cm4gdHlwZSBpcyB0aGUgc2FtZSBhcyBjb2hlcmVuY2VfcmF0aW8uXG4gICAgIiIiXG4gICAgcGVyX2xhbmd1YWdlX3JhdGlvcyA9IE9yZGVyZWREaWN0KCkgICMgdHlwZTogRGljdFtzdHIsIExpc3RbZmxvYXRdXVxuICAgIGZvciByZXN1bHQgaW4gcmVzdWx0czpcbiAgICAgICAgZm9yIHN1Yl9yZXN1bHQgaW4gcmVzdWx0OlxuICAgICAgICAgICAgbGFuZ3VhZ2UsIHJhdGlvID0gc3ViX3Jlc3VsdFxuICAgICAgICAgICAgaWYgbGFuZ3VhZ2Ugbm90IGluIHBlcl9sYW5ndWFnZV9yYXRpb3M6XG4gICAgICAgICAgICAgICAgcGVyX2xhbmd1YWdlX3JhdGlvc1tsYW5ndWFnZV0gPSBbcmF0aW9dXG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIHBlcl9sYW5ndWFnZV9yYXRpb3NbbGFuZ3VhZ2VdLmFwcGVuZChyYXRpbylcblxuICAgIG1lcmdlID0gW1xuICAgICAgICAoXG4gICAgICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgICAgIHJvdW5kKFxuICAgICAgICAgICAgICAgIHN1bShwZXJfbGFuZ3VhZ2VfcmF0aW9zW2xhbmd1YWdlXSkgLyBsZW4ocGVyX2xhbmd1YWdlX3JhdGlvc1tsYW5ndWFnZV0pLFxuICAgICAgICAgICAgICAgIDQsXG4gICAgICAgICAgICApLFxuICAgICAgICApXG4gICAgICAgIGZvciBsYW5ndWFnZSBpbiBwZXJfbGFuZ3VhZ2VfcmF0aW9zXG4gICAgXVxuXG4gICAgcmV0dXJuIHNvcnRlZChtZXJnZSwga2V5PWxhbWJkYSB4OiB4WzFdLCByZXZlcnNlPVRydWUpXG5cblxuQGxydV9jYWNoZShtYXhzaXplPTIwNDgpXG5kZWYgY29oZXJlbmNlX3JhdGlvKFxuICAgIGRlY29kZWRfc2VxdWVuY2U6IHN0ciwgdGhyZXNob2xkOiBmbG9hdCA9IDAuMSwgbGdfaW5jbHVzaW9uOiBPcHRpb25hbFtzdHJdID0gTm9uZVxuKSAtPiBDb2hlcmVuY2VNYXRjaGVzOlxuICAgICIiIlxuICAgIERldGVjdCBBTlkgbGFuZ3VhZ2UgdGhhdCBjYW4gYmUgaWRlbnRpZmllZCBpbiBnaXZlbiBzZXF1ZW5jZS4gVGhlIHNlcXVlbmNlIHdpbGwgYmUgYW5hbHlzZWQgYnkgbGF5ZXJzLlxuICAgIEEgbGF5ZXIgPSBDaGFyYWN0ZXIgZXh0cmFjdGlvbiBieSBhbHBoYWJldHMvcmFuZ2VzLlxuICAgICIiIlxuXG4gICAgcmVzdWx0cyA9IFtdICAjIHR5cGU6IExpc3RbVHVwbGVbc3RyLCBmbG9hdF1dXG4gICAgaWdub3JlX25vbl9sYXRpbiA9IEZhbHNlICAjIHR5cGU6IGJvb2xcblxuICAgIHN1ZmZpY2llbnRfbWF0Y2hfY291bnQgPSAwICAjIHR5cGU6IGludFxuXG4gICAgbGdfaW5jbHVzaW9uX2xpc3QgPSBsZ19pbmNsdXNpb24uc3BsaXQoIiwiKSBpZiBsZ19pbmNsdXNpb24gaXMgbm90IE5vbmUgZWxzZSBbXVxuICAgIGlmICJMYXRpbiBCYXNlZCIgaW4gbGdfaW5jbHVzaW9uX2xpc3Q6XG4gICAgICAgIGlnbm9yZV9ub25fbGF0aW4gPSBUcnVlXG4gICAgICAgIGxnX2luY2x1c2lvbl9saXN0LnJlbW92ZSgiTGF0aW4gQmFzZWQiKVxuXG4gICAgZm9yIGxheWVyIGluIGFscGhhX3VuaWNvZGVfc3BsaXQoZGVjb2RlZF9zZXF1ZW5jZSk6XG4gICAgICAgIHNlcXVlbmNlX2ZyZXF1ZW5jaWVzID0gQ291bnRlcihsYXllcikgICMgdHlwZTogQ291bnRlclxuICAgICAgICBtb3N0X2NvbW1vbiA9IHNlcXVlbmNlX2ZyZXF1ZW5jaWVzLm1vc3RfY29tbW9uKClcblxuICAgICAgICBjaGFyYWN0ZXJfY291bnQgPSBzdW0obyBmb3IgYywgbyBpbiBtb3N0X2NvbW1vbikgICMgdHlwZTogaW50XG5cbiAgICAgICAgaWYgY2hhcmFjdGVyX2NvdW50IDw9IFRPT19TTUFMTF9TRVFVRU5DRTpcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgcG9wdWxhcl9jaGFyYWN0ZXJfb3JkZXJlZCA9IFtjIGZvciBjLCBvIGluIG1vc3RfY29tbW9uXSAgIyB0eXBlOiBMaXN0W3N0cl1cblxuICAgICAgICBmb3IgbGFuZ3VhZ2UgaW4gbGdfaW5jbHVzaW9uX2xpc3Qgb3IgYWxwaGFiZXRfbGFuZ3VhZ2VzKFxuICAgICAgICAgICAgcG9wdWxhcl9jaGFyYWN0ZXJfb3JkZXJlZCwgaWdub3JlX25vbl9sYXRpblxuICAgICAgICApOlxuICAgICAgICAgICAgcmF0aW8gPSBjaGFyYWN0ZXJzX3BvcHVsYXJpdHlfY29tcGFyZShcbiAgICAgICAgICAgICAgICBsYW5ndWFnZSwgcG9wdWxhcl9jaGFyYWN0ZXJfb3JkZXJlZFxuICAgICAgICAgICAgKSAgIyB0eXBlOiBmbG9hdFxuXG4gICAgICAgICAgICBpZiByYXRpbyA8IHRocmVzaG9sZDpcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgZWxpZiByYXRpbyA+PSAwLjg6XG4gICAgICAgICAgICAgICAgc3VmZmljaWVudF9tYXRjaF9jb3VudCArPSAxXG5cbiAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKChsYW5ndWFnZSwgcm91bmQocmF0aW8sIDQpKSlcblxuICAgICAgICAgICAgaWYgc3VmZmljaWVudF9tYXRjaF9jb3VudCA+PSAzOlxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICByZXR1cm4gc29ydGVkKHJlc3VsdHMsIGtleT1sYW1iZGEgeDogeFsxXSwgcmV2ZXJzZT1UcnVlKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NoYXJzZXRfbm9ybWFsaXplci9hc3NldHMvX19pbml0X18ucHknLCBiJyMgLSotIGNvZGluZzogdXRmXzggLSotXG5mcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBPcmRlcmVkRGljdFxuXG5GUkVRVUVOQ0lFUyA9IE9yZGVyZWREaWN0KFxuICAgIFtcbiAgICAgICAgKFxuICAgICAgICAgICAgIkVuZ2xpc2giLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgImMiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAibSIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiZyIsXG4gICAgICAgICAgICAgICAgInciLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgInYiLFxuICAgICAgICAgICAgICAgICJrIixcbiAgICAgICAgICAgICAgICAieCIsXG4gICAgICAgICAgICAgICAgImoiLFxuICAgICAgICAgICAgICAgICJ6IixcbiAgICAgICAgICAgICAgICAicSIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiR2VybWFuIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgInMiLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgImMiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJrIixcbiAgICAgICAgICAgICAgICAidyIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGJjIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTQiLFxuICAgICAgICAgICAgICAgICJceGMzXHhiNiIsXG4gICAgICAgICAgICAgICAgImoiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkZyZW5jaCIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgInAiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTkiLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiZyIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJiIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgInEiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhMCIsXG4gICAgICAgICAgICAgICAgIngiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhOCIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJEdXRjaCIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgInYiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJ3IixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJmIixcbiAgICAgICAgICAgICAgICAieSIsXG4gICAgICAgICAgICAgICAgIngiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhYiIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiSXRhbGlhbiIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgImMiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgInAiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAiZyIsXG4gICAgICAgICAgICAgICAgInYiLFxuICAgICAgICAgICAgICAgICJmIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAicSIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE4IixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTAiLFxuICAgICAgICAgICAgICAgICJrIixcbiAgICAgICAgICAgICAgICAieSIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGIyIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJQb2xpc2giLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJ6IixcbiAgICAgICAgICAgICAgICAidyIsXG4gICAgICAgICAgICAgICAgInMiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgInAiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgICAgICAiXHhjNVx4ODIiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJceGM0XHg4NSIsXG4gICAgICAgICAgICAgICAgIlx4YzRceDk5IixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YjMiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIlNwYW5pc2giLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YjMiLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAicSIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGFkIixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhMSIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiUnVzc2lhbiIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJlIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjAiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiNSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI4IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmQiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MSIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgyIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODAiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiMiIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJiIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmEiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiYyIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI0IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmYiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MyIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIzIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4OGYiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4YiIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI3IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjEiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiOSIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDhjIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODciLFxuICAgICAgICAgICAgICAgICJceGQxXHg4NSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI2IixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODYiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkphcGFuZXNlIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceGFlIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceGFiIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODJceDhiIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceDlmIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceGFmIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODNceGJjIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceGE4IixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceDk3IixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODJceDkyIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceGE3IixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceGE2IixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceDhjIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceDg0IixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODNceGIzIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODJceDhjIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceGFhIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4YjlceGI0IixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODJceGI5IixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceGEzIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODNceGFiIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceDhiIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODJceDg5IixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceDgyIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODFceDk1IixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODJceDgyIixcbiAgICAgICAgICAgICAgICAiXHhlM1x4ODJceDhhIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJQb3J0dWd1ZXNlIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAibSIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgInAiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJmIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGEzIixcbiAgICAgICAgICAgICAgICAicSIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE5IixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTciLFxuICAgICAgICAgICAgICAgICJceGMzXHhhMSIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhZCIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiU3dlZGlzaCIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAiayIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE0IixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJceGMzXHhiNiIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE1IixcbiAgICAgICAgICAgICAgICAieSIsXG4gICAgICAgICAgICAgICAgImoiLFxuICAgICAgICAgICAgICAgICJ4IixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJDaGluZXNlIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiXHhlN1x4OWFceDg0IixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YjhceDgwIixcbiAgICAgICAgICAgICAgICAiXHhlNlx4OThceGFmIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YjhceDhkIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YmFceDg2IixcbiAgICAgICAgICAgICAgICAiXHhlNVx4OWNceGE4IixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YmFceGJhIixcbiAgICAgICAgICAgICAgICAiXHhlNlx4OWNceDg5IixcbiAgICAgICAgICAgICAgICAiXHhlNlx4ODhceDkxIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YmJceDk2IixcbiAgICAgICAgICAgICAgICAiXHhlOFx4YmZceDk5IixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YjhceGFhIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YmJceGFjIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YjhceGFkIixcbiAgICAgICAgICAgICAgICAiXHhlNlx4OWRceGE1IixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YjhceDhhIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4YTRceGE3IixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YjhceGJhIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4OTJceDhjIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4OWJceGJkIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4OWNceGIwIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4ODhceGIwIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YmJceGE1IixcbiAgICAgICAgICAgICAgICAiXHhlOFx4YWZceGI0IixcbiAgICAgICAgICAgICAgICAiXHhlNlx4OTdceGI2IixcbiAgICAgICAgICAgICAgICAiXHhlOFx4YTZceDgxIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4YjBceGIxIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4ODdceGJhIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YmNceDlhIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJVa3JhaW5pYW4iLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJceGQwXHhiZSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIwIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmQiLFxuICAgICAgICAgICAgICAgICJceGQxXHg5NiIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI4IixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODAiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiMiIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgyIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjUiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJhIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmIiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MyIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI0IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmMiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiZiIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI3IixcbiAgICAgICAgICAgICAgICAiXHhkMVx4OGYiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4YyIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIxIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjMiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiOSIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDg3IixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODUiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4NiIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDk3IixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJOb3J3ZWdpYW4iLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgInMiLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAiZyIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTUiLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGI4IixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE2IixcbiAgICAgICAgICAgICAgICAidyIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiRmlubmlzaCIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhNCIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgImoiLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YjYiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJmIixcbiAgICAgICAgICAgICAgICAidyIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIlZpZXRuYW1lc2UiLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhMCIsXG4gICAgICAgICAgICAgICAgIlx4YzRceDkxIixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgICAgICAiXHhjNlx4YjAiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTEiLFxuICAgICAgICAgICAgICAgICJrIixcbiAgICAgICAgICAgICAgICAiXHhlMVx4YmJceDk5IixcbiAgICAgICAgICAgICAgICAiXHhlMVx4YmFceGJmIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJDemVjaCIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJrIixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGFkIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJ6IixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTEiLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJceGM0XHg5YiIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE5IixcbiAgICAgICAgICAgICAgICAiXHhjNVx4OTkiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkh1bmdhcmlhbiIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJ6IixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTEiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhOSIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgImoiLFxuICAgICAgICAgICAgICAgICJceGMzXHhiNiIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJLb3JlYW4iLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJceGVjXHg5ZFx4YjQiLFxuICAgICAgICAgICAgICAgICJceGViXHg4Ylx4YTQiLFxuICAgICAgICAgICAgICAgICJceGVjXHg5N1x4OTAiLFxuICAgICAgICAgICAgICAgICJceGVjXHg5ZFx4OTgiLFxuICAgICAgICAgICAgICAgICJceGViXHg4YVx4OTQiLFxuICAgICAgICAgICAgICAgICJceGViXHhhMVx4OWMiLFxuICAgICAgICAgICAgICAgICJceGVkXHg5NVx4OTgiLFxuICAgICAgICAgICAgICAgICJceGVjXHg5ZFx4ODQiLFxuICAgICAgICAgICAgICAgICJceGVhXHhiMFx4ODAiLFxuICAgICAgICAgICAgICAgICJceGVhXHhiM1x4YTAiLFxuICAgICAgICAgICAgICAgICJceGVjXHhhN1x4ODAiLFxuICAgICAgICAgICAgICAgICJceGVjXHg4NFx4OWMiLFxuICAgICAgICAgICAgICAgICJceGVkXHg5NVx4OWMiLFxuICAgICAgICAgICAgICAgICJceGVjXHg5ZFx4ODAiLFxuICAgICAgICAgICAgICAgICJceGVhXHhiOFx4YjAiLFxuICAgICAgICAgICAgICAgICJceGVjXHg5Y1x4YmMiLFxuICAgICAgICAgICAgICAgICJceGViXHg4NVx4ODQiLFxuICAgICAgICAgICAgICAgICJceGViXHg4Y1x4ODAiLFxuICAgICAgICAgICAgICAgICJceGVjXHg4Mlx4YWMiLFxuICAgICAgICAgICAgICAgICJceGVjXHg4Ylx4OWMiLFxuICAgICAgICAgICAgICAgICJceGViXHhhNVx4YmMiLFxuICAgICAgICAgICAgICAgICJceGViXHhhNlx4YWMiLFxuICAgICAgICAgICAgICAgICJceGViXHg4Zlx4ODQiLFxuICAgICAgICAgICAgICAgICJceGVjXHg5ZFx4YjgiLFxuICAgICAgICAgICAgICAgICJceGVjXHg4YVx4YTQiLFxuICAgICAgICAgICAgICAgICJceGVjXHg5ZFx4YmMiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkluZG9uZXNpYW4iLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJpIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJrIixcbiAgICAgICAgICAgICAgICAibSIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgInciLFxuICAgICAgICAgICAgICAgICJmIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJ4IixcbiAgICAgICAgICAgICAgICAicSIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiVHVya2lzaCIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgIlx4YzRceGIxIixcbiAgICAgICAgICAgICAgICAiayIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJiIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YmMiLFxuICAgICAgICAgICAgICAgICJceGM1XHg5ZiIsXG4gICAgICAgICAgICAgICAgInYiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAieiIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGE3IixcbiAgICAgICAgICAgICAgICAiXHhjNFx4OWYiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIlJvbWFuaWFuIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgInMiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJceGM0XHg4MyIsXG4gICAgICAgICAgICAgICAgImYiLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YWUiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgIlx4YzhceDk5IixcbiAgICAgICAgICAgICAgICAiXHhjOFx4OWIiLFxuICAgICAgICAgICAgICAgICJ6IixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGEyIixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiRmFyc2kiLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJceGQ4XHhhNyIsXG4gICAgICAgICAgICAgICAgIlx4ZGJceDhjIixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YjEiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhZiIsXG4gICAgICAgICAgICAgICAgIlx4ZDlceDg2IixcbiAgICAgICAgICAgICAgICAiXHhkOVx4ODciLFxuICAgICAgICAgICAgICAgICJceGQ5XHg4OCIsXG4gICAgICAgICAgICAgICAgIlx4ZDlceDg1IixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YWEiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhOCIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGIzIixcbiAgICAgICAgICAgICAgICAiXHhkOVx4ODQiLFxuICAgICAgICAgICAgICAgICJceGRhXHhhOSIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGI0IixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YjIiLFxuICAgICAgICAgICAgICAgICJceGQ5XHg4MSIsXG4gICAgICAgICAgICAgICAgIlx4ZGFceGFmIixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YjkiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhZSIsXG4gICAgICAgICAgICAgICAgIlx4ZDlceDgyIixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YWMiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhMiIsXG4gICAgICAgICAgICAgICAgIlx4ZDlceGJlIixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YWQiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhiNyIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGI1IixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJBcmFiaWMiLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJceGQ4XHhhNyIsXG4gICAgICAgICAgICAgICAgIlx4ZDlceDg0IixcbiAgICAgICAgICAgICAgICAiXHhkOVx4OGEiLFxuICAgICAgICAgICAgICAgICJceGQ5XHg4NSIsXG4gICAgICAgICAgICAgICAgIlx4ZDlceDg4IixcbiAgICAgICAgICAgICAgICAiXHhkOVx4ODYiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhiMSIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGFhIixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YTgiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhOSIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGI5IixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YWYiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhiMyIsXG4gICAgICAgICAgICAgICAgIlx4ZDlceDgxIixcbiAgICAgICAgICAgICAgICAiXHhkOVx4ODciLFxuICAgICAgICAgICAgICAgICJceGQ5XHg4MyIsXG4gICAgICAgICAgICAgICAgIlx4ZDlceDgyIixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YTMiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhZCIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGFjIixcbiAgICAgICAgICAgICAgICAiXHhkOFx4YjQiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhiNyIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGI1IixcbiAgICAgICAgICAgICAgICAiXHhkOVx4ODkiLFxuICAgICAgICAgICAgICAgICJceGQ4XHhhZSIsXG4gICAgICAgICAgICAgICAgIlx4ZDhceGE1IixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJEYW5pc2giLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAiZCIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAiZyIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJrIixcbiAgICAgICAgICAgICAgICAiZiIsXG4gICAgICAgICAgICAgICAgInYiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YTUiLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgICAgICAiXHhjM1x4YjgiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhNiIsXG4gICAgICAgICAgICAgICAgImMiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgICAgICAidyIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiU2VyYmlhbiIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIwIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjgiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiZSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI1IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmQiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MCIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgxIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODMiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MiIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJhIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4OTgiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiMiIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI0IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmMiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiZiIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJiIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjMiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiNyIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIxIixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJceGQxXHg4NiIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDg4IixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJMaXRodWFuaWFuIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAiayIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgInYiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJceGM0XHg5NyIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJ5IixcbiAgICAgICAgICAgICAgICAiXHhjNVx4YjMiLFxuICAgICAgICAgICAgICAgICJceGM1XHhhMSIsXG4gICAgICAgICAgICAgICAgIlx4YzVceGJlIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgIlx4YzRceDg1IixcbiAgICAgICAgICAgICAgICAiXHhjNFx4YWYiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIlNsb3ZlbmUiLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgIm0iLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAieiIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJnIixcbiAgICAgICAgICAgICAgICAiaCIsXG4gICAgICAgICAgICAgICAgIlx4YzRceDhkIixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgIlx4YzVceGExIixcbiAgICAgICAgICAgICAgICAiXHhjNVx4YmUiLFxuICAgICAgICAgICAgICAgICJmIixcbiAgICAgICAgICAgICAgICAieSIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiU2xvdmFrIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAibyIsXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJlIixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgInQiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJkIixcbiAgICAgICAgICAgICAgICAibSIsXG4gICAgICAgICAgICAgICAgInAiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAiYyIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJqIixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgInoiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhMSIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJceGMzXHhiZCIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGFkIixcbiAgICAgICAgICAgICAgICAiXHhjNFx4OGQiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhOSIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiSGVicmV3IixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiXHhkN1x4OTkiLFxuICAgICAgICAgICAgICAgICJceGQ3XHg5NSIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceDk0IixcbiAgICAgICAgICAgICAgICAiXHhkN1x4OWMiLFxuICAgICAgICAgICAgICAgICJceGQ3XHhhOCIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceDkxIixcbiAgICAgICAgICAgICAgICAiXHhkN1x4YWEiLFxuICAgICAgICAgICAgICAgICJceGQ3XHg5ZSIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceDkwIixcbiAgICAgICAgICAgICAgICAiXHhkN1x4YTkiLFxuICAgICAgICAgICAgICAgICJceGQ3XHhhMCIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceGEyIixcbiAgICAgICAgICAgICAgICAiXHhkN1x4OWQiLFxuICAgICAgICAgICAgICAgICJceGQ3XHg5MyIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceGE3IixcbiAgICAgICAgICAgICAgICAiXHhkN1x4OTciLFxuICAgICAgICAgICAgICAgICJceGQ3XHhhNCIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceGExIixcbiAgICAgICAgICAgICAgICAiXHhkN1x4OWIiLFxuICAgICAgICAgICAgICAgICJceGQ3XHg5MiIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceDk4IixcbiAgICAgICAgICAgICAgICAiXHhkN1x4YTYiLFxuICAgICAgICAgICAgICAgICJceGQ3XHg5ZiIsXG4gICAgICAgICAgICAgICAgIlx4ZDdceDk2IixcbiAgICAgICAgICAgICAgICAiXHhkN1x4OWEiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkJ1bGdhcmlhbiIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIwIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjgiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiZSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI1IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmQiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MiIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgwIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODEiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiMiIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJiIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmEiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiNCIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJmIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmMiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiNyIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGIzIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4OGYiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4YSIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgzIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjEiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4NyIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDg2IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjkiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiNiIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDg5IixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODUiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkNyb2F0aWFuIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiYSIsXG4gICAgICAgICAgICAgICAgImkiLFxuICAgICAgICAgICAgICAgICJvIixcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgIm4iLFxuICAgICAgICAgICAgICAgICJyIixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICAgICAgInMiLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAidSIsXG4gICAgICAgICAgICAgICAgImsiLFxuICAgICAgICAgICAgICAgICJsIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJ6IixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgImMiLFxuICAgICAgICAgICAgICAgICJceGM0XHg4ZCIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJceGM1XHhhMSIsXG4gICAgICAgICAgICAgICAgIlx4YzVceGJlIixcbiAgICAgICAgICAgICAgICAiXHhjNFx4ODciLFxuICAgICAgICAgICAgICAgICJmIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJIaW5kaSIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHg5NSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhiMCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhiOCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhhOCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhhNCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhhZSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhiOSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhhYSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhhZiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhiMiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhiNSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHg5YyIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhhNiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHg5NyIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhhYyIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhiNiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHg5ZiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHg4NSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHg4ZiIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhhNSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhhZCIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhhMSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHg5YSIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhhNyIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHhiNyIsXG4gICAgICAgICAgICAgICAgIlx4ZTBceGE0XHg4NyIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiRXN0b25pYW4iLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJhIixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgImUiLFxuICAgICAgICAgICAgICAgICJzIixcbiAgICAgICAgICAgICAgICAidCIsXG4gICAgICAgICAgICAgICAgImwiLFxuICAgICAgICAgICAgICAgICJ1IixcbiAgICAgICAgICAgICAgICAibiIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJrIixcbiAgICAgICAgICAgICAgICAiciIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJtIixcbiAgICAgICAgICAgICAgICAidiIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJwIixcbiAgICAgICAgICAgICAgICAiaiIsXG4gICAgICAgICAgICAgICAgImgiLFxuICAgICAgICAgICAgICAgICJceGMzXHhhNCIsXG4gICAgICAgICAgICAgICAgImIiLFxuICAgICAgICAgICAgICAgICJceGMzXHhiNSIsXG4gICAgICAgICAgICAgICAgIlx4YzNceGJjIixcbiAgICAgICAgICAgICAgICAiZiIsXG4gICAgICAgICAgICAgICAgImMiLFxuICAgICAgICAgICAgICAgICJceGMzXHhiNiIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIlNpbXBsZSBFbmdsaXNoIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiZSIsXG4gICAgICAgICAgICAgICAgImEiLFxuICAgICAgICAgICAgICAgICJ0IixcbiAgICAgICAgICAgICAgICAiaSIsXG4gICAgICAgICAgICAgICAgIm8iLFxuICAgICAgICAgICAgICAgICJuIixcbiAgICAgICAgICAgICAgICAicyIsXG4gICAgICAgICAgICAgICAgInIiLFxuICAgICAgICAgICAgICAgICJoIixcbiAgICAgICAgICAgICAgICAibCIsXG4gICAgICAgICAgICAgICAgImQiLFxuICAgICAgICAgICAgICAgICJjIixcbiAgICAgICAgICAgICAgICAibSIsXG4gICAgICAgICAgICAgICAgInUiLFxuICAgICAgICAgICAgICAgICJmIixcbiAgICAgICAgICAgICAgICAicCIsXG4gICAgICAgICAgICAgICAgImciLFxuICAgICAgICAgICAgICAgICJ3IixcbiAgICAgICAgICAgICAgICAiYiIsXG4gICAgICAgICAgICAgICAgInkiLFxuICAgICAgICAgICAgICAgICJ2IixcbiAgICAgICAgICAgICAgICAiayIsXG4gICAgICAgICAgICAgICAgImoiLFxuICAgICAgICAgICAgICAgICJ4IixcbiAgICAgICAgICAgICAgICAieiIsXG4gICAgICAgICAgICAgICAgInEiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIlRoYWkiLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4YjIiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4OTkiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4YTMiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4YWQiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4ODEiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOVx4ODAiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4ODciLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4YTEiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4YTIiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4YTUiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4YTciLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4OTQiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4OTciLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4YWEiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4OTUiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4YjAiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4OWIiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4OWEiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4ODQiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4YWIiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOVx4ODEiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4ODgiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4OWUiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4OGEiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOFx4ODIiLFxuICAgICAgICAgICAgICAgICJceGUwXHhiOVx4ODMiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkdyZWVrIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiXHhjZVx4YjEiLFxuICAgICAgICAgICAgICAgICJceGNmXHg4NCIsXG4gICAgICAgICAgICAgICAgIlx4Y2VceGJmIixcbiAgICAgICAgICAgICAgICAiXHhjZVx4YjkiLFxuICAgICAgICAgICAgICAgICJceGNlXHhiNSIsXG4gICAgICAgICAgICAgICAgIlx4Y2VceGJkIixcbiAgICAgICAgICAgICAgICAiXHhjZlx4ODEiLFxuICAgICAgICAgICAgICAgICJceGNmXHg4MyIsXG4gICAgICAgICAgICAgICAgIlx4Y2VceGJhIixcbiAgICAgICAgICAgICAgICAiXHhjZVx4YjciLFxuICAgICAgICAgICAgICAgICJceGNmXHg4MCIsXG4gICAgICAgICAgICAgICAgIlx4Y2ZceDgyIixcbiAgICAgICAgICAgICAgICAiXHhjZlx4ODUiLFxuICAgICAgICAgICAgICAgICJceGNlXHhiYyIsXG4gICAgICAgICAgICAgICAgIlx4Y2VceGJiIixcbiAgICAgICAgICAgICAgICAiXHhjZVx4YWYiLFxuICAgICAgICAgICAgICAgICJceGNmXHg4YyIsXG4gICAgICAgICAgICAgICAgIlx4Y2VceGFjIixcbiAgICAgICAgICAgICAgICAiXHhjZVx4YjMiLFxuICAgICAgICAgICAgICAgICJceGNlXHhhZCIsXG4gICAgICAgICAgICAgICAgIlx4Y2VceGI0IixcbiAgICAgICAgICAgICAgICAiXHhjZVx4YWUiLFxuICAgICAgICAgICAgICAgICJceGNmXHg4OSIsXG4gICAgICAgICAgICAgICAgIlx4Y2ZceDg3IixcbiAgICAgICAgICAgICAgICAiXHhjZVx4YjgiLFxuICAgICAgICAgICAgICAgICJceGNmXHg4ZCIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoXG4gICAgICAgICAgICAiVGFtaWwiLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4OTUiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YTQiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YWEiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4OWYiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YjAiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YWUiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YjIiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YTkiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YjUiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YjEiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YWYiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YjMiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4OWEiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YTgiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4ODciLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YTMiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4ODUiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4ODYiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YjQiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4OTkiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4OGUiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4ODkiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4OTIiLFxuICAgICAgICAgICAgICAgICJceGUwXHhhZVx4YjgiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgKSxcbiAgICAgICAgKFxuICAgICAgICAgICAgIkNsYXNzaWNhbCBDaGluZXNlIixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAiXHhlNFx4YjlceDhiIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4YjlceGI0IixcbiAgICAgICAgICAgICAgICAiXHhlN1x4ODJceGJhIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YjlceDlmIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YmJceGE1IixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YjhceDgwIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YmFceGJhIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4ODVceGI2IixcbiAgICAgICAgICAgICAgICAiXHhlOFx4ODBceDg1IixcbiAgICAgICAgICAgICAgICAiXHhlNVx4OWNceDhiIixcbiAgICAgICAgICAgICAgICAiXHhlNlx4OWNceDg5IixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YmFceDhjIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4OGRceDgxIixcbiAgICAgICAgICAgICAgICAiXHhlNlx4OTZceGJjIixcbiAgICAgICAgICAgICAgICAiXHhlNlx4OWJceGIwIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YjhceDg5IixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YjhceDhkIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4YTRceGE3IixcbiAgICAgICAgICAgICAgICAiXHhlOFx4ODBceDhjIixcbiAgICAgICAgICAgICAgICAiXHhlNVx4YWRceDkwIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YjhceGFkIixcbiAgICAgICAgICAgICAgICAiXHhlNFx4YmFceDk0IixcbiAgICAgICAgICAgICAgICAiXHhlNVx4OWJceDliIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgICAgIChcbiAgICAgICAgICAgICJLYXpha2giLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICJceGQwXHhiMCIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDhiIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjUiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiZCIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgyIixcbiAgICAgICAgICAgICAgICAiXHhkMVx4ODAiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiYiIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDk2IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjQiLFxuICAgICAgICAgICAgICAgICJceGQxXHg4MSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJjIixcbiAgICAgICAgICAgICAgICAiXHhkMlx4OWIiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiYSIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGJlIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjEiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiOCIsXG4gICAgICAgICAgICAgICAgIlx4ZDFceDgzIixcbiAgICAgICAgICAgICAgICAiXHhkMlx4OTMiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiNiIsXG4gICAgICAgICAgICAgICAgIlx4ZDJceGEzIixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YjciLFxuICAgICAgICAgICAgICAgICJceGQxXHg4OCIsXG4gICAgICAgICAgICAgICAgIlx4ZDBceGI5IixcbiAgICAgICAgICAgICAgICAiXHhkMFx4YmYiLFxuICAgICAgICAgICAgICAgICJceGQwXHhiMyIsXG4gICAgICAgICAgICAgICAgIlx4ZDNceGE5IixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICksXG4gICAgXVxuKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NoYXJzZXRfbm9ybWFsaXplci9jb25zdGFudC5weScsIGInZnJvbSBjb2RlY3MgaW1wb3J0IEJPTV9VVEY4LCBCT01fVVRGMTZfQkUsIEJPTV9VVEYxNl9MRSwgQk9NX1VURjMyX0JFLCBCT01fVVRGMzJfTEVcbmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IE9yZGVyZWREaWN0XG5mcm9tIGVuY29kaW5ncy5hbGlhc2VzIGltcG9ydCBhbGlhc2VzXG5mcm9tIHJlIGltcG9ydCBJR05PUkVDQVNFLCBjb21waWxlIGFzIHJlX2NvbXBpbGVcbmZyb20gdHlwaW5nIGltcG9ydCBEaWN0LCBMaXN0LCBTZXQsIFVuaW9uXG5cbmZyb20gLmFzc2V0cyBpbXBvcnQgRlJFUVVFTkNJRVNcblxuIyBDb250YWluIGZvciBlYWNoIGVsaWdpYmxlIGVuY29kaW5nIGEgbGlzdCBvZi9pdGVtIGJ5dGVzIFNJRy9CT01cbkVOQ09ESU5HX01BUktTID0gT3JkZXJlZERpY3QoXG4gICAgW1xuICAgICAgICAoInV0Zl84IiwgQk9NX1VURjgpLFxuICAgICAgICAoXG4gICAgICAgICAgICAidXRmXzciLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIGIiXFx4MmJcXHgyZlxceDc2XFx4MzgiLFxuICAgICAgICAgICAgICAgIGIiXFx4MmJcXHgyZlxceDc2XFx4MzkiLFxuICAgICAgICAgICAgICAgIGIiXFx4MmJcXHgyZlxceDc2XFx4MmIiLFxuICAgICAgICAgICAgICAgIGIiXFx4MmJcXHgyZlxceDc2XFx4MmYiLFxuICAgICAgICAgICAgICAgIGIiXFx4MmJcXHgyZlxceDc2XFx4MzhcXHgyZCIsXG4gICAgICAgICAgICBdLFxuICAgICAgICApLFxuICAgICAgICAoImdiMTgwMzAiLCBiIlxceDg0XFx4MzFcXHg5NVxceDMzIiksXG4gICAgICAgICgidXRmXzMyIiwgW0JPTV9VVEYzMl9CRSwgQk9NX1VURjMyX0xFXSksXG4gICAgICAgICgidXRmXzE2IiwgW0JPTV9VVEYxNl9CRSwgQk9NX1VURjE2X0xFXSksXG4gICAgXVxuKSAgIyB0eXBlOiBEaWN0W3N0ciwgVW5pb25bYnl0ZXMsIExpc3RbYnl0ZXNdXV1cblxuVE9PX1NNQUxMX1NFUVVFTkNFID0gMzIgICMgdHlwZTogaW50XG5UT09fQklHX1NFUVVFTkNFID0gaW50KDEwZTYpICAjIHR5cGU6IGludFxuXG5VVEY4X01BWElNQUxfQUxMT0NBVElPTiA9IDExMTIwNjQgICMgdHlwZTogaW50XG5cblVOSUNPREVfUkFOR0VTX0NPTUJJTkVEID0ge1xuICAgICJDb250cm9sIGNoYXJhY3RlciI6IHJhbmdlKDMxICsgMSksXG4gICAgIkJhc2ljIExhdGluIjogcmFuZ2UoMzIsIDEyNyArIDEpLFxuICAgICJMYXRpbi0xIFN1cHBsZW1lbnQiOiByYW5nZSgxMjgsIDI1NSArIDEpLFxuICAgICJMYXRpbiBFeHRlbmRlZC1BIjogcmFuZ2UoMjU2LCAzODMgKyAxKSxcbiAgICAiTGF0aW4gRXh0ZW5kZWQtQiI6IHJhbmdlKDM4NCwgNTkxICsgMSksXG4gICAgIklQQSBFeHRlbnNpb25zIjogcmFuZ2UoNTkyLCA2ODcgKyAxKSxcbiAgICAiU3BhY2luZyBNb2RpZmllciBMZXR0ZXJzIjogcmFuZ2UoNjg4LCA3NjcgKyAxKSxcbiAgICAiQ29tYmluaW5nIERpYWNyaXRpY2FsIE1hcmtzIjogcmFuZ2UoNzY4LCA4NzkgKyAxKSxcbiAgICAiR3JlZWsgYW5kIENvcHRpYyI6IHJhbmdlKDg4MCwgMTAyMyArIDEpLFxuICAgICJDeXJpbGxpYyI6IHJhbmdlKDEwMjQsIDEyNzkgKyAxKSxcbiAgICAiQ3lyaWxsaWMgU3VwcGxlbWVudCI6IHJhbmdlKDEyODAsIDEzMjcgKyAxKSxcbiAgICAiQXJtZW5pYW4iOiByYW5nZSgxMzI4LCAxNDIzICsgMSksXG4gICAgIkhlYnJldyI6IHJhbmdlKDE0MjQsIDE1MzUgKyAxKSxcbiAgICAiQXJhYmljIjogcmFuZ2UoMTUzNiwgMTc5MSArIDEpLFxuICAgICJTeXJpYWMiOiByYW5nZSgxNzkyLCAxODcxICsgMSksXG4gICAgIkFyYWJpYyBTdXBwbGVtZW50IjogcmFuZ2UoMTg3MiwgMTkxOSArIDEpLFxuICAgICJUaGFhbmEiOiByYW5nZSgxOTIwLCAxOTgzICsgMSksXG4gICAgIk5LbyI6IHJhbmdlKDE5ODQsIDIwNDcgKyAxKSxcbiAgICAiU2FtYXJpdGFuIjogcmFuZ2UoMjA0OCwgMjExMSArIDEpLFxuICAgICJNYW5kYWljIjogcmFuZ2UoMjExMiwgMjE0MyArIDEpLFxuICAgICJTeXJpYWMgU3VwcGxlbWVudCI6IHJhbmdlKDIxNDQsIDIxNTkgKyAxKSxcbiAgICAiQXJhYmljIEV4dGVuZGVkLUEiOiByYW5nZSgyMjA4LCAyMzAzICsgMSksXG4gICAgIkRldmFuYWdhcmkiOiByYW5nZSgyMzA0LCAyNDMxICsgMSksXG4gICAgIkJlbmdhbGkiOiByYW5nZSgyNDMyLCAyNTU5ICsgMSksXG4gICAgIkd1cm11a2hpIjogcmFuZ2UoMjU2MCwgMjY4NyArIDEpLFxuICAgICJHdWphcmF0aSI6IHJhbmdlKDI2ODgsIDI4MTUgKyAxKSxcbiAgICAiT3JpeWEiOiByYW5nZSgyODE2LCAyOTQzICsgMSksXG4gICAgIlRhbWlsIjogcmFuZ2UoMjk0NCwgMzA3MSArIDEpLFxuICAgICJUZWx1Z3UiOiByYW5nZSgzMDcyLCAzMTk5ICsgMSksXG4gICAgIkthbm5hZGEiOiByYW5nZSgzMjAwLCAzMzI3ICsgMSksXG4gICAgIk1hbGF5YWxhbSI6IHJhbmdlKDMzMjgsIDM0NTUgKyAxKSxcbiAgICAiU2luaGFsYSI6IHJhbmdlKDM0NTYsIDM1ODMgKyAxKSxcbiAgICAiVGhhaSI6IHJhbmdlKDM1ODQsIDM3MTEgKyAxKSxcbiAgICAiTGFvIjogcmFuZ2UoMzcxMiwgMzgzOSArIDEpLFxuICAgICJUaWJldGFuIjogcmFuZ2UoMzg0MCwgNDA5NSArIDEpLFxuICAgICJNeWFubWFyIjogcmFuZ2UoNDA5NiwgNDI1NSArIDEpLFxuICAgICJHZW9yZ2lhbiI6IHJhbmdlKDQyNTYsIDQzNTEgKyAxKSxcbiAgICAiSGFuZ3VsIEphbW8iOiByYW5nZSg0MzUyLCA0NjA3ICsgMSksXG4gICAgIkV0aGlvcGljIjogcmFuZ2UoNDYwOCwgNDk5MSArIDEpLFxuICAgICJFdGhpb3BpYyBTdXBwbGVtZW50IjogcmFuZ2UoNDk5MiwgNTAyMyArIDEpLFxuICAgICJDaGVyb2tlZSI6IHJhbmdlKDUwMjQsIDUxMTkgKyAxKSxcbiAgICAiVW5pZmllZCBDYW5hZGlhbiBBYm9yaWdpbmFsIFN5bGxhYmljcyI6IHJhbmdlKDUxMjAsIDU3NTkgKyAxKSxcbiAgICAiT2doYW0iOiByYW5nZSg1NzYwLCA1NzkxICsgMSksXG4gICAgIlJ1bmljIjogcmFuZ2UoNTc5MiwgNTg4NyArIDEpLFxuICAgICJUYWdhbG9nIjogcmFuZ2UoNTg4OCwgNTkxOSArIDEpLFxuICAgICJIYW51bm9vIjogcmFuZ2UoNTkyMCwgNTk1MSArIDEpLFxuICAgICJCdWhpZCI6IHJhbmdlKDU5NTIsIDU5ODMgKyAxKSxcbiAgICAiVGFnYmFud2EiOiByYW5nZSg1OTg0LCA2MDE1ICsgMSksXG4gICAgIktobWVyIjogcmFuZ2UoNjAxNiwgNjE0MyArIDEpLFxuICAgICJNb25nb2xpYW4iOiByYW5nZSg2MTQ0LCA2MzE5ICsgMSksXG4gICAgIlVuaWZpZWQgQ2FuYWRpYW4gQWJvcmlnaW5hbCBTeWxsYWJpY3MgRXh0ZW5kZWQiOiByYW5nZSg2MzIwLCA2Mzk5ICsgMSksXG4gICAgIkxpbWJ1IjogcmFuZ2UoNjQwMCwgNjQ3OSArIDEpLFxuICAgICJUYWkgTGUiOiByYW5nZSg2NDgwLCA2NTI3ICsgMSksXG4gICAgIk5ldyBUYWkgTHVlIjogcmFuZ2UoNjUyOCwgNjYyMyArIDEpLFxuICAgICJLaG1lciBTeW1ib2xzIjogcmFuZ2UoNjYyNCwgNjY1NSArIDEpLFxuICAgICJCdWdpbmVzZSI6IHJhbmdlKDY2NTYsIDY2ODcgKyAxKSxcbiAgICAiVGFpIFRoYW0iOiByYW5nZSg2Njg4LCA2ODMxICsgMSksXG4gICAgIkNvbWJpbmluZyBEaWFjcml0aWNhbCBNYXJrcyBFeHRlbmRlZCI6IHJhbmdlKDY4MzIsIDY5MTEgKyAxKSxcbiAgICAiQmFsaW5lc2UiOiByYW5nZSg2OTEyLCA3MDM5ICsgMSksXG4gICAgIlN1bmRhbmVzZSI6IHJhbmdlKDcwNDAsIDcxMDMgKyAxKSxcbiAgICAiQmF0YWsiOiByYW5nZSg3MTA0LCA3MTY3ICsgMSksXG4gICAgIkxlcGNoYSI6IHJhbmdlKDcxNjgsIDcyNDcgKyAxKSxcbiAgICAiT2wgQ2hpa2kiOiByYW5nZSg3MjQ4LCA3Mjk1ICsgMSksXG4gICAgIkN5cmlsbGljIEV4dGVuZGVkIEMiOiByYW5nZSg3Mjk2LCA3MzExICsgMSksXG4gICAgIlN1bmRhbmVzZSBTdXBwbGVtZW50IjogcmFuZ2UoNzM2MCwgNzM3NSArIDEpLFxuICAgICJWZWRpYyBFeHRlbnNpb25zIjogcmFuZ2UoNzM3NiwgNzQyMyArIDEpLFxuICAgICJQaG9uZXRpYyBFeHRlbnNpb25zIjogcmFuZ2UoNzQyNCwgNzU1MSArIDEpLFxuICAgICJQaG9uZXRpYyBFeHRlbnNpb25zIFN1cHBsZW1lbnQiOiByYW5nZSg3NTUyLCA3NjE1ICsgMSksXG4gICAgIkNvbWJpbmluZyBEaWFjcml0aWNhbCBNYXJrcyBTdXBwbGVtZW50IjogcmFuZ2UoNzYxNiwgNzY3OSArIDEpLFxuICAgICJMYXRpbiBFeHRlbmRlZCBBZGRpdGlvbmFsIjogcmFuZ2UoNzY4MCwgNzkzNSArIDEpLFxuICAgICJHcmVlayBFeHRlbmRlZCI6IHJhbmdlKDc5MzYsIDgxOTEgKyAxKSxcbiAgICAiR2VuZXJhbCBQdW5jdHVhdGlvbiI6IHJhbmdlKDgxOTIsIDgzMDMgKyAxKSxcbiAgICAiU3VwZXJzY3JpcHRzIGFuZCBTdWJzY3JpcHRzIjogcmFuZ2UoODMwNCwgODM1MSArIDEpLFxuICAgICJDdXJyZW5jeSBTeW1ib2xzIjogcmFuZ2UoODM1MiwgODM5OSArIDEpLFxuICAgICJDb21iaW5pbmcgRGlhY3JpdGljYWwgTWFya3MgZm9yIFN5bWJvbHMiOiByYW5nZSg4NDAwLCA4NDQ3ICsgMSksXG4gICAgIkxldHRlcmxpa2UgU3ltYm9scyI6IHJhbmdlKDg0NDgsIDg1MjcgKyAxKSxcbiAgICAiTnVtYmVyIEZvcm1zIjogcmFuZ2UoODUyOCwgODU5MSArIDEpLFxuICAgICJBcnJvd3MiOiByYW5nZSg4NTkyLCA4NzAzICsgMSksXG4gICAgIk1hdGhlbWF0aWNhbCBPcGVyYXRvcnMiOiByYW5nZSg4NzA0LCA4OTU5ICsgMSksXG4gICAgIk1pc2NlbGxhbmVvdXMgVGVjaG5pY2FsIjogcmFuZ2UoODk2MCwgOTIxNSArIDEpLFxuICAgICJDb250cm9sIFBpY3R1cmVzIjogcmFuZ2UoOTIxNiwgOTI3OSArIDEpLFxuICAgICJPcHRpY2FsIENoYXJhY3RlciBSZWNvZ25pdGlvbiI6IHJhbmdlKDkyODAsIDkzMTEgKyAxKSxcbiAgICAiRW5jbG9zZWQgQWxwaGFudW1lcmljcyI6IHJhbmdlKDkzMTIsIDk0NzEgKyAxKSxcbiAgICAiQm94IERyYXdpbmciOiByYW5nZSg5NDcyLCA5NTk5ICsgMSksXG4gICAgIkJsb2NrIEVsZW1lbnRzIjogcmFuZ2UoOTYwMCwgOTYzMSArIDEpLFxuICAgICJHZW9tZXRyaWMgU2hhcGVzIjogcmFuZ2UoOTYzMiwgOTcyNyArIDEpLFxuICAgICJNaXNjZWxsYW5lb3VzIFN5bWJvbHMiOiByYW5nZSg5NzI4LCA5OTgzICsgMSksXG4gICAgIkRpbmdiYXRzIjogcmFuZ2UoOTk4NCwgMTAxNzUgKyAxKSxcbiAgICAiTWlzY2VsbGFuZW91cyBNYXRoZW1hdGljYWwgU3ltYm9scy1BIjogcmFuZ2UoMTAxNzYsIDEwMjIzICsgMSksXG4gICAgIlN1cHBsZW1lbnRhbCBBcnJvd3MtQSI6IHJhbmdlKDEwMjI0LCAxMDIzOSArIDEpLFxuICAgICJCcmFpbGxlIFBhdHRlcm5zIjogcmFuZ2UoMTAyNDAsIDEwNDk1ICsgMSksXG4gICAgIlN1cHBsZW1lbnRhbCBBcnJvd3MtQiI6IHJhbmdlKDEwNDk2LCAxMDYyMyArIDEpLFxuICAgICJNaXNjZWxsYW5lb3VzIE1hdGhlbWF0aWNhbCBTeW1ib2xzLUIiOiByYW5nZSgxMDYyNCwgMTA3NTEgKyAxKSxcbiAgICAiU3VwcGxlbWVudGFsIE1hdGhlbWF0aWNhbCBPcGVyYXRvcnMiOiByYW5nZSgxMDc1MiwgMTEwMDcgKyAxKSxcbiAgICAiTWlzY2VsbGFuZW91cyBTeW1ib2xzIGFuZCBBcnJvd3MiOiByYW5nZSgxMTAwOCwgMTEyNjMgKyAxKSxcbiAgICAiR2xhZ29saXRpYyI6IHJhbmdlKDExMjY0LCAxMTM1OSArIDEpLFxuICAgICJMYXRpbiBFeHRlbmRlZC1DIjogcmFuZ2UoMTEzNjAsIDExMzkxICsgMSksXG4gICAgIkNvcHRpYyI6IHJhbmdlKDExMzkyLCAxMTUxOSArIDEpLFxuICAgICJHZW9yZ2lhbiBTdXBwbGVtZW50IjogcmFuZ2UoMTE1MjAsIDExNTY3ICsgMSksXG4gICAgIlRpZmluYWdoIjogcmFuZ2UoMTE1NjgsIDExNjQ3ICsgMSksXG4gICAgIkV0aGlvcGljIEV4dGVuZGVkIjogcmFuZ2UoMTE2NDgsIDExNzQzICsgMSksXG4gICAgIkN5cmlsbGljIEV4dGVuZGVkLUEiOiByYW5nZSgxMTc0NCwgMTE3NzUgKyAxKSxcbiAgICAiU3VwcGxlbWVudGFsIFB1bmN0dWF0aW9uIjogcmFuZ2UoMTE3NzYsIDExOTAzICsgMSksXG4gICAgIkNKSyBSYWRpY2FscyBTdXBwbGVtZW50IjogcmFuZ2UoMTE5MDQsIDEyMDMxICsgMSksXG4gICAgIkthbmd4aSBSYWRpY2FscyI6IHJhbmdlKDEyMDMyLCAxMjI1NSArIDEpLFxuICAgICJJZGVvZ3JhcGhpYyBEZXNjcmlwdGlvbiBDaGFyYWN0ZXJzIjogcmFuZ2UoMTIyNzIsIDEyMjg3ICsgMSksXG4gICAgIkNKSyBTeW1ib2xzIGFuZCBQdW5jdHVhdGlvbiI6IHJhbmdlKDEyMjg4LCAxMjM1MSArIDEpLFxuICAgICJIaXJhZ2FuYSI6IHJhbmdlKDEyMzUyLCAxMjQ0NyArIDEpLFxuICAgICJLYXRha2FuYSI6IHJhbmdlKDEyNDQ4LCAxMjU0MyArIDEpLFxuICAgICJCb3BvbW9mbyI6IHJhbmdlKDEyNTQ0LCAxMjU5MSArIDEpLFxuICAgICJIYW5ndWwgQ29tcGF0aWJpbGl0eSBKYW1vIjogcmFuZ2UoMTI1OTIsIDEyNjg3ICsgMSksXG4gICAgIkthbmJ1biI6IHJhbmdlKDEyNjg4LCAxMjcwMyArIDEpLFxuICAgICJCb3BvbW9mbyBFeHRlbmRlZCI6IHJhbmdlKDEyNzA0LCAxMjczNSArIDEpLFxuICAgICJDSksgU3Ryb2tlcyI6IHJhbmdlKDEyNzM2LCAxMjc4MyArIDEpLFxuICAgICJLYXRha2FuYSBQaG9uZXRpYyBFeHRlbnNpb25zIjogcmFuZ2UoMTI3ODQsIDEyNzk5ICsgMSksXG4gICAgIkVuY2xvc2VkIENKSyBMZXR0ZXJzIGFuZCBNb250aHMiOiByYW5nZSgxMjgwMCwgMTMwNTUgKyAxKSxcbiAgICAiQ0pLIENvbXBhdGliaWxpdHkiOiByYW5nZSgxMzA1NiwgMTMzMTEgKyAxKSxcbiAgICAiQ0pLIFVuaWZpZWQgSWRlb2dyYXBocyBFeHRlbnNpb24gQSI6IHJhbmdlKDEzMzEyLCAxOTkwMyArIDEpLFxuICAgICJZaWppbmcgSGV4YWdyYW0gU3ltYm9scyI6IHJhbmdlKDE5OTA0LCAxOTk2NyArIDEpLFxuICAgICJDSksgVW5pZmllZCBJZGVvZ3JhcGhzIjogcmFuZ2UoMTk5NjgsIDQwOTU5ICsgMSksXG4gICAgIllpIFN5bGxhYmxlcyI6IHJhbmdlKDQwOTYwLCA0MjEyNyArIDEpLFxuICAgICJZaSBSYWRpY2FscyI6IHJhbmdlKDQyMTI4LCA0MjE5MSArIDEpLFxuICAgICJMaXN1IjogcmFuZ2UoNDIxOTIsIDQyMjM5ICsgMSksXG4gICAgIlZhaSI6IHJhbmdlKDQyMjQwLCA0MjU1OSArIDEpLFxuICAgICJDeXJpbGxpYyBFeHRlbmRlZC1CIjogcmFuZ2UoNDI1NjAsIDQyNjU1ICsgMSksXG4gICAgIkJhbXVtIjogcmFuZ2UoNDI2NTYsIDQyNzUxICsgMSksXG4gICAgIk1vZGlmaWVyIFRvbmUgTGV0dGVycyI6IHJhbmdlKDQyNzUyLCA0Mjc4MyArIDEpLFxuICAgICJMYXRpbiBFeHRlbmRlZC1EIjogcmFuZ2UoNDI3ODQsIDQzMDA3ICsgMSksXG4gICAgIlN5bG90aSBOYWdyaSI6IHJhbmdlKDQzMDA4LCA0MzA1NSArIDEpLFxuICAgICJDb21tb24gSW5kaWMgTnVtYmVyIEZvcm1zIjogcmFuZ2UoNDMwNTYsIDQzMDcxICsgMSksXG4gICAgIlBoYWdzLXBhIjogcmFuZ2UoNDMwNzIsIDQzMTM1ICsgMSksXG4gICAgIlNhdXJhc2h0cmEiOiByYW5nZSg0MzEzNiwgNDMyMzEgKyAxKSxcbiAgICAiRGV2YW5hZ2FyaSBFeHRlbmRlZCI6IHJhbmdlKDQzMjMyLCA0MzI2MyArIDEpLFxuICAgICJLYXlhaCBMaSI6IHJhbmdlKDQzMjY0LCA0MzMxMSArIDEpLFxuICAgICJSZWphbmciOiByYW5nZSg0MzMxMiwgNDMzNTkgKyAxKSxcbiAgICAiSGFuZ3VsIEphbW8gRXh0ZW5kZWQtQSI6IHJhbmdlKDQzMzYwLCA0MzM5MSArIDEpLFxuICAgICJKYXZhbmVzZSI6IHJhbmdlKDQzMzkyLCA0MzQ4NyArIDEpLFxuICAgICJNeWFubWFyIEV4dGVuZGVkLUIiOiByYW5nZSg0MzQ4OCwgNDM1MTkgKyAxKSxcbiAgICAiQ2hhbSI6IHJhbmdlKDQzNTIwLCA0MzYxNSArIDEpLFxuICAgICJNeWFubWFyIEV4dGVuZGVkLUEiOiByYW5nZSg0MzYxNiwgNDM2NDcgKyAxKSxcbiAgICAiVGFpIFZpZXQiOiByYW5nZSg0MzY0OCwgNDM3NDMgKyAxKSxcbiAgICAiTWVldGVpIE1heWVrIEV4dGVuc2lvbnMiOiByYW5nZSg0Mzc0NCwgNDM3NzUgKyAxKSxcbiAgICAiRXRoaW9waWMgRXh0ZW5kZWQtQSI6IHJhbmdlKDQzNzc2LCA0MzgyMyArIDEpLFxuICAgICJMYXRpbiBFeHRlbmRlZC1FIjogcmFuZ2UoNDM4MjQsIDQzODg3ICsgMSksXG4gICAgIkNoZXJva2VlIFN1cHBsZW1lbnQiOiByYW5nZSg0Mzg4OCwgNDM5NjcgKyAxKSxcbiAgICAiTWVldGVpIE1heWVrIjogcmFuZ2UoNDM5NjgsIDQ0MDMxICsgMSksXG4gICAgIkhhbmd1bCBTeWxsYWJsZXMiOiByYW5nZSg0NDAzMiwgNTUyMTUgKyAxKSxcbiAgICAiSGFuZ3VsIEphbW8gRXh0ZW5kZWQtQiI6IHJhbmdlKDU1MjE2LCA1NTI5NSArIDEpLFxuICAgICJIaWdoIFN1cnJvZ2F0ZXMiOiByYW5nZSg1NTI5NiwgNTYxOTEgKyAxKSxcbiAgICAiSGlnaCBQcml2YXRlIFVzZSBTdXJyb2dhdGVzIjogcmFuZ2UoNTYxOTIsIDU2MzE5ICsgMSksXG4gICAgIkxvdyBTdXJyb2dhdGVzIjogcmFuZ2UoNTYzMjAsIDU3MzQzICsgMSksXG4gICAgIlByaXZhdGUgVXNlIEFyZWEiOiByYW5nZSg1NzM0NCwgNjM3NDMgKyAxKSxcbiAgICAiQ0pLIENvbXBhdGliaWxpdHkgSWRlb2dyYXBocyI6IHJhbmdlKDYzNzQ0LCA2NDI1NSArIDEpLFxuICAgICJBbHBoYWJldGljIFByZXNlbnRhdGlvbiBGb3JtcyI6IHJhbmdlKDY0MjU2LCA2NDMzNSArIDEpLFxuICAgICJBcmFiaWMgUHJlc2VudGF0aW9uIEZvcm1zLUEiOiByYW5nZSg2NDMzNiwgNjUwMjMgKyAxKSxcbiAgICAiVmFyaWF0aW9uIFNlbGVjdG9ycyI6IHJhbmdlKDY1MDI0LCA2NTAzOSArIDEpLFxuICAgICJWZXJ0aWNhbCBGb3JtcyI6IHJhbmdlKDY1MDQwLCA2NTA1NSArIDEpLFxuICAgICJDb21iaW5pbmcgSGFsZiBNYXJrcyI6IHJhbmdlKDY1MDU2LCA2NTA3MSArIDEpLFxuICAgICJDSksgQ29tcGF0aWJpbGl0eSBGb3JtcyI6IHJhbmdlKDY1MDcyLCA2NTEwMyArIDEpLFxuICAgICJTbWFsbCBGb3JtIFZhcmlhbnRzIjogcmFuZ2UoNjUxMDQsIDY1MTM1ICsgMSksXG4gICAgIkFyYWJpYyBQcmVzZW50YXRpb24gRm9ybXMtQiI6IHJhbmdlKDY1MTM2LCA2NTI3OSArIDEpLFxuICAgICJIYWxmd2lkdGggYW5kIEZ1bGx3aWR0aCBGb3JtcyI6IHJhbmdlKDY1MjgwLCA2NTUxOSArIDEpLFxuICAgICJTcGVjaWFscyI6IHJhbmdlKDY1NTIwLCA2NTUzNSArIDEpLFxuICAgICJMaW5lYXIgQiBTeWxsYWJhcnkiOiByYW5nZSg2NTUzNiwgNjU2NjMgKyAxKSxcbiAgICAiTGluZWFyIEIgSWRlb2dyYW1zIjogcmFuZ2UoNjU2NjQsIDY1NzkxICsgMSksXG4gICAgIkFlZ2VhbiBOdW1iZXJzIjogcmFuZ2UoNjU3OTIsIDY1ODU1ICsgMSksXG4gICAgIkFuY2llbnQgR3JlZWsgTnVtYmVycyI6IHJhbmdlKDY1ODU2LCA2NTkzNSArIDEpLFxuICAgICJBbmNpZW50IFN5bWJvbHMiOiByYW5nZSg2NTkzNiwgNjU5OTkgKyAxKSxcbiAgICAiUGhhaXN0b3MgRGlzYyI6IHJhbmdlKDY2MDAwLCA2NjA0NyArIDEpLFxuICAgICJMeWNpYW4iOiByYW5nZSg2NjE3NiwgNjYyMDcgKyAxKSxcbiAgICAiQ2FyaWFuIjogcmFuZ2UoNjYyMDgsIDY2MjcxICsgMSksXG4gICAgIkNvcHRpYyBFcGFjdCBOdW1iZXJzIjogcmFuZ2UoNjYyNzIsIDY2MzAzICsgMSksXG4gICAgIk9sZCBJdGFsaWMiOiByYW5nZSg2NjMwNCwgNjYzNTEgKyAxKSxcbiAgICAiR290aGljIjogcmFuZ2UoNjYzNTIsIDY2MzgzICsgMSksXG4gICAgIk9sZCBQZXJtaWMiOiByYW5nZSg2NjM4NCwgNjY0MzEgKyAxKSxcbiAgICAiVWdhcml0aWMiOiByYW5nZSg2NjQzMiwgNjY0NjMgKyAxKSxcbiAgICAiT2xkIFBlcnNpYW4iOiByYW5nZSg2NjQ2NCwgNjY1MjcgKyAxKSxcbiAgICAiRGVzZXJldCI6IHJhbmdlKDY2NTYwLCA2NjYzOSArIDEpLFxuICAgICJTaGF2aWFuIjogcmFuZ2UoNjY2NDAsIDY2Njg3ICsgMSksXG4gICAgIk9zbWFueWEiOiByYW5nZSg2NjY4OCwgNjY3MzUgKyAxKSxcbiAgICAiT3NhZ2UiOiByYW5nZSg2NjczNiwgNjY4MTUgKyAxKSxcbiAgICAiRWxiYXNhbiI6IHJhbmdlKDY2ODE2LCA2Njg2MyArIDEpLFxuICAgICJDYXVjYXNpYW4gQWxiYW5pYW4iOiByYW5nZSg2Njg2NCwgNjY5MjcgKyAxKSxcbiAgICAiTGluZWFyIEEiOiByYW5nZSg2NzA3MiwgNjc0NTUgKyAxKSxcbiAgICAiQ3lwcmlvdCBTeWxsYWJhcnkiOiByYW5nZSg2NzU4NCwgNjc2NDcgKyAxKSxcbiAgICAiSW1wZXJpYWwgQXJhbWFpYyI6IHJhbmdlKDY3NjQ4LCA2NzY3OSArIDEpLFxuICAgICJQYWxteXJlbmUiOiByYW5nZSg2NzY4MCwgNjc3MTEgKyAxKSxcbiAgICAiTmFiYXRhZWFuIjogcmFuZ2UoNjc3MTIsIDY3NzU5ICsgMSksXG4gICAgIkhhdHJhbiI6IHJhbmdlKDY3ODA4LCA2NzgzOSArIDEpLFxuICAgICJQaG9lbmljaWFuIjogcmFuZ2UoNjc4NDAsIDY3ODcxICsgMSksXG4gICAgIkx5ZGlhbiI6IHJhbmdlKDY3ODcyLCA2NzkwMyArIDEpLFxuICAgICJNZXJvaXRpYyBIaWVyb2dseXBocyI6IHJhbmdlKDY3OTY4LCA2Nzk5OSArIDEpLFxuICAgICJNZXJvaXRpYyBDdXJzaXZlIjogcmFuZ2UoNjgwMDAsIDY4MDk1ICsgMSksXG4gICAgIktoYXJvc2h0aGkiOiByYW5nZSg2ODA5NiwgNjgxOTEgKyAxKSxcbiAgICAiT2xkIFNvdXRoIEFyYWJpYW4iOiByYW5nZSg2ODE5MiwgNjgyMjMgKyAxKSxcbiAgICAiT2xkIE5vcnRoIEFyYWJpYW4iOiByYW5nZSg2ODIyNCwgNjgyNTUgKyAxKSxcbiAgICAiTWFuaWNoYWVhbiI6IHJhbmdlKDY4Mjg4LCA2ODM1MSArIDEpLFxuICAgICJBdmVzdGFuIjogcmFuZ2UoNjgzNTIsIDY4NDE1ICsgMSksXG4gICAgIkluc2NyaXB0aW9uYWwgUGFydGhpYW4iOiByYW5nZSg2ODQxNiwgNjg0NDcgKyAxKSxcbiAgICAiSW5zY3JpcHRpb25hbCBQYWhsYXZpIjogcmFuZ2UoNjg0NDgsIDY4NDc5ICsgMSksXG4gICAgIlBzYWx0ZXIgUGFobGF2aSI6IHJhbmdlKDY4NDgwLCA2ODUyNyArIDEpLFxuICAgICJPbGQgVHVya2ljIjogcmFuZ2UoNjg2MDgsIDY4Njg3ICsgMSksXG4gICAgIk9sZCBIdW5nYXJpYW4iOiByYW5nZSg2ODczNiwgNjg4NjMgKyAxKSxcbiAgICAiUnVtaSBOdW1lcmFsIFN5bWJvbHMiOiByYW5nZSg2OTIxNiwgNjkyNDcgKyAxKSxcbiAgICAiQnJhaG1pIjogcmFuZ2UoNjk2MzIsIDY5NzU5ICsgMSksXG4gICAgIkthaXRoaSI6IHJhbmdlKDY5NzYwLCA2OTgzOSArIDEpLFxuICAgICJTb3JhIFNvbXBlbmciOiByYW5nZSg2OTg0MCwgNjk4ODcgKyAxKSxcbiAgICAiQ2hha21hIjogcmFuZ2UoNjk4ODgsIDY5OTY3ICsgMSksXG4gICAgIk1haGFqYW5pIjogcmFuZ2UoNjk5NjgsIDcwMDE1ICsgMSksXG4gICAgIlNoYXJhZGEiOiByYW5nZSg3MDAxNiwgNzAxMTEgKyAxKSxcbiAgICAiU2luaGFsYSBBcmNoYWljIE51bWJlcnMiOiByYW5nZSg3MDExMiwgNzAxNDMgKyAxKSxcbiAgICAiS2hvamtpIjogcmFuZ2UoNzAxNDQsIDcwMjIzICsgMSksXG4gICAgIk11bHRhbmkiOiByYW5nZSg3MDI3MiwgNzAzMTkgKyAxKSxcbiAgICAiS2h1ZGF3YWRpIjogcmFuZ2UoNzAzMjAsIDcwMzk5ICsgMSksXG4gICAgIkdyYW50aGEiOiByYW5nZSg3MDQwMCwgNzA1MjcgKyAxKSxcbiAgICAiTmV3YSI6IHJhbmdlKDcwNjU2LCA3MDc4MyArIDEpLFxuICAgICJUaXJodXRhIjogcmFuZ2UoNzA3ODQsIDcwODc5ICsgMSksXG4gICAgIlNpZGRoYW0iOiByYW5nZSg3MTA0MCwgNzExNjcgKyAxKSxcbiAgICAiTW9kaSI6IHJhbmdlKDcxMTY4LCA3MTI2MyArIDEpLFxuICAgICJNb25nb2xpYW4gU3VwcGxlbWVudCI6IHJhbmdlKDcxMjY0LCA3MTI5NSArIDEpLFxuICAgICJUYWtyaSI6IHJhbmdlKDcxMjk2LCA3MTM3NSArIDEpLFxuICAgICJBaG9tIjogcmFuZ2UoNzE0MjQsIDcxNDg3ICsgMSksXG4gICAgIldhcmFuZyBDaXRpIjogcmFuZ2UoNzE4NDAsIDcxOTM1ICsgMSksXG4gICAgIlphbmFiYXphciBTcXVhcmUiOiByYW5nZSg3MjE5MiwgNzIyNzEgKyAxKSxcbiAgICAiU295b21ibyI6IHJhbmdlKDcyMjcyLCA3MjM2NyArIDEpLFxuICAgICJQYXUgQ2luIEhhdSI6IHJhbmdlKDcyMzg0LCA3MjQ0NyArIDEpLFxuICAgICJCaGFpa3N1a2kiOiByYW5nZSg3MjcwNCwgNzI4MTUgKyAxKSxcbiAgICAiTWFyY2hlbiI6IHJhbmdlKDcyODE2LCA3Mjg5NSArIDEpLFxuICAgICJNYXNhcmFtIEdvbmRpIjogcmFuZ2UoNzI5NjAsIDczMDU1ICsgMSksXG4gICAgIkN1bmVpZm9ybSI6IHJhbmdlKDczNzI4LCA3NDc1MSArIDEpLFxuICAgICJDdW5laWZvcm0gTnVtYmVycyBhbmQgUHVuY3R1YXRpb24iOiByYW5nZSg3NDc1MiwgNzQ4NzkgKyAxKSxcbiAgICAiRWFybHkgRHluYXN0aWMgQ3VuZWlmb3JtIjogcmFuZ2UoNzQ4ODAsIDc1MDg3ICsgMSksXG4gICAgIkVneXB0aWFuIEhpZXJvZ2x5cGhzIjogcmFuZ2UoNzc4MjQsIDc4ODk1ICsgMSksXG4gICAgIkFuYXRvbGlhbiBIaWVyb2dseXBocyI6IHJhbmdlKDgyOTQ0LCA4MzU4MyArIDEpLFxuICAgICJCYW11bSBTdXBwbGVtZW50IjogcmFuZ2UoOTIxNjAsIDkyNzM1ICsgMSksXG4gICAgIk1ybyI6IHJhbmdlKDkyNzM2LCA5Mjc4MyArIDEpLFxuICAgICJCYXNzYSBWYWgiOiByYW5nZSg5Mjg4MCwgOTI5MjcgKyAxKSxcbiAgICAiUGFoYXdoIEhtb25nIjogcmFuZ2UoOTI5MjgsIDkzMDcxICsgMSksXG4gICAgIk1pYW8iOiByYW5nZSg5Mzk1MiwgOTQxMTEgKyAxKSxcbiAgICAiSWRlb2dyYXBoaWMgU3ltYm9scyBhbmQgUHVuY3R1YXRpb24iOiByYW5nZSg5NDE3NiwgOTQyMDcgKyAxKSxcbiAgICAiVGFuZ3V0IjogcmFuZ2UoOTQyMDgsIDEwMDM1MSArIDEpLFxuICAgICJUYW5ndXQgQ29tcG9uZW50cyI6IHJhbmdlKDEwMDM1MiwgMTAxMTE5ICsgMSksXG4gICAgIkthbmEgU3VwcGxlbWVudCI6IHJhbmdlKDExMDU5MiwgMTEwODQ3ICsgMSksXG4gICAgIkthbmEgRXh0ZW5kZWQtQSI6IHJhbmdlKDExMDg0OCwgMTEwODk1ICsgMSksXG4gICAgIk51c2h1IjogcmFuZ2UoMTEwOTYwLCAxMTEzNTkgKyAxKSxcbiAgICAiRHVwbG95YW4iOiByYW5nZSgxMTM2NjQsIDExMzgyMyArIDEpLFxuICAgICJTaG9ydGhhbmQgRm9ybWF0IENvbnRyb2xzIjogcmFuZ2UoMTEzODI0LCAxMTM4MzkgKyAxKSxcbiAgICAiQnl6YW50aW5lIE11c2ljYWwgU3ltYm9scyI6IHJhbmdlKDExODc4NCwgMTE5MDM5ICsgMSksXG4gICAgIk11c2ljYWwgU3ltYm9scyI6IHJhbmdlKDExOTA0MCwgMTE5Mjk1ICsgMSksXG4gICAgIkFuY2llbnQgR3JlZWsgTXVzaWNhbCBOb3RhdGlvbiI6IHJhbmdlKDExOTI5NiwgMTE5Mzc1ICsgMSksXG4gICAgIlRhaSBYdWFuIEppbmcgU3ltYm9scyI6IHJhbmdlKDExOTU1MiwgMTE5NjQ3ICsgMSksXG4gICAgIkNvdW50aW5nIFJvZCBOdW1lcmFscyI6IHJhbmdlKDExOTY0OCwgMTE5Njc5ICsgMSksXG4gICAgIk1hdGhlbWF0aWNhbCBBbHBoYW51bWVyaWMgU3ltYm9scyI6IHJhbmdlKDExOTgwOCwgMTIwODMxICsgMSksXG4gICAgIlN1dHRvbiBTaWduV3JpdGluZyI6IHJhbmdlKDEyMDgzMiwgMTIxNTE5ICsgMSksXG4gICAgIkdsYWdvbGl0aWMgU3VwcGxlbWVudCI6IHJhbmdlKDEyMjg4MCwgMTIyOTI3ICsgMSksXG4gICAgIk1lbmRlIEtpa2FrdWkiOiByYW5nZSgxMjQ5MjgsIDEyNTE1MSArIDEpLFxuICAgICJBZGxhbSI6IHJhbmdlKDEyNTE4NCwgMTI1Mjc5ICsgMSksXG4gICAgIkFyYWJpYyBNYXRoZW1hdGljYWwgQWxwaGFiZXRpYyBTeW1ib2xzIjogcmFuZ2UoMTI2NDY0LCAxMjY3MTkgKyAxKSxcbiAgICAiTWFoam9uZyBUaWxlcyI6IHJhbmdlKDEyNjk3NiwgMTI3MDIzICsgMSksXG4gICAgIkRvbWlubyBUaWxlcyI6IHJhbmdlKDEyNzAyNCwgMTI3MTM1ICsgMSksXG4gICAgIlBsYXlpbmcgQ2FyZHMiOiByYW5nZSgxMjcxMzYsIDEyNzIzMSArIDEpLFxuICAgICJFbmNsb3NlZCBBbHBoYW51bWVyaWMgU3VwcGxlbWVudCI6IHJhbmdlKDEyNzIzMiwgMTI3NDg3ICsgMSksXG4gICAgIkVuY2xvc2VkIElkZW9ncmFwaGljIFN1cHBsZW1lbnQiOiByYW5nZSgxMjc0ODgsIDEyNzc0MyArIDEpLFxuICAgICJNaXNjZWxsYW5lb3VzIFN5bWJvbHMgYW5kIFBpY3RvZ3JhcGhzIjogcmFuZ2UoMTI3NzQ0LCAxMjg1MTEgKyAxKSxcbiAgICAiRW1vdGljb25zIHJhbmdlKEVtb2ppKSI6IHJhbmdlKDEyODUxMiwgMTI4NTkxICsgMSksXG4gICAgIk9ybmFtZW50YWwgRGluZ2JhdHMiOiByYW5nZSgxMjg1OTIsIDEyODYzOSArIDEpLFxuICAgICJUcmFuc3BvcnQgYW5kIE1hcCBTeW1ib2xzIjogcmFuZ2UoMTI4NjQwLCAxMjg3NjcgKyAxKSxcbiAgICAiQWxjaGVtaWNhbCBTeW1ib2xzIjogcmFuZ2UoMTI4NzY4LCAxMjg4OTUgKyAxKSxcbiAgICAiR2VvbWV0cmljIFNoYXBlcyBFeHRlbmRlZCI6IHJhbmdlKDEyODg5NiwgMTI5MDIzICsgMSksXG4gICAgIlN1cHBsZW1lbnRhbCBBcnJvd3MtQyI6IHJhbmdlKDEyOTAyNCwgMTI5Mjc5ICsgMSksXG4gICAgIlN1cHBsZW1lbnRhbCBTeW1ib2xzIGFuZCBQaWN0b2dyYXBocyI6IHJhbmdlKDEyOTI4MCwgMTI5NTM1ICsgMSksXG4gICAgIkNKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEIiOiByYW5nZSgxMzEwNzIsIDE3Mzc5MSArIDEpLFxuICAgICJDSksgVW5pZmllZCBJZGVvZ3JhcGhzIEV4dGVuc2lvbiBDIjogcmFuZ2UoMTczODI0LCAxNzc5ODMgKyAxKSxcbiAgICAiQ0pLIFVuaWZpZWQgSWRlb2dyYXBocyBFeHRlbnNpb24gRCI6IHJhbmdlKDE3Nzk4NCwgMTc4MjA3ICsgMSksXG4gICAgIkNKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEUiOiByYW5nZSgxNzgyMDgsIDE4Mzk4MyArIDEpLFxuICAgICJDSksgVW5pZmllZCBJZGVvZ3JhcGhzIEV4dGVuc2lvbiBGIjogcmFuZ2UoMTgzOTg0LCAxOTE0NzEgKyAxKSxcbiAgICAiQ0pLIENvbXBhdGliaWxpdHkgSWRlb2dyYXBocyBTdXBwbGVtZW50IjogcmFuZ2UoMTk0NTYwLCAxOTUxMDMgKyAxKSxcbiAgICAiVGFncyI6IHJhbmdlKDkxNzUwNCwgOTE3NjMxICsgMSksXG4gICAgIlZhcmlhdGlvbiBTZWxlY3RvcnMgU3VwcGxlbWVudCI6IHJhbmdlKDkxNzc2MCwgOTE3OTk5ICsgMSksXG59ICAjIHR5cGU6IERpY3Rbc3RyLCByYW5nZV1cblxuXG5VTklDT0RFX1NFQ09OREFSWV9SQU5HRV9LRVlXT1JEID0gW1xuICAgICJTdXBwbGVtZW50IixcbiAgICAiRXh0ZW5kZWQiLFxuICAgICJFeHRlbnNpb25zIixcbiAgICAiTW9kaWZpZXIiLFxuICAgICJNYXJrcyIsXG4gICAgIlB1bmN0dWF0aW9uIixcbiAgICAiU3ltYm9scyIsXG4gICAgIkZvcm1zIixcbiAgICAiT3BlcmF0b3JzIixcbiAgICAiTWlzY2VsbGFuZW91cyIsXG4gICAgIkRyYXdpbmciLFxuICAgICJCbG9jayIsXG4gICAgIlNoYXBlcyIsXG4gICAgIlN1cHBsZW1lbnRhbCIsXG4gICAgIlRhZ3MiLFxuXSAgIyB0eXBlOiBMaXN0W3N0cl1cblxuUkVfUE9TU0lCTEVfRU5DT0RJTkdfSU5ESUNBVElPTiA9IHJlX2NvbXBpbGUoXG4gICAgciIoPzooPzplbmNvZGluZyl8KD86Y2hhcnNldCl8KD86Y29kaW5nKSkoPzpbXFw6PSBdezEsMTB9KSg/OltcXCJcXFwnXT8pKFthLXpBLVowLTlcXC1fXSspKD86W1xcIlxcXCddPykiLFxuICAgIElHTk9SRUNBU0UsXG4pXG5cbklBTkFfU1VQUE9SVEVEID0gc29ydGVkKFxuICAgIGZpbHRlcihcbiAgICAgICAgbGFtYmRhIHg6IHguZW5kc3dpdGgoIl9jb2RlYyIpIGlzIEZhbHNlXG4gICAgICAgIGFuZCB4IG5vdCBpbiB7InJvdF8xMyIsICJ0YWN0aXMiLCAibWJjcyJ9LFxuICAgICAgICBsaXN0KHNldChhbGlhc2VzLnZhbHVlcygpKSksXG4gICAgKVxuKSAgIyB0eXBlOiBMaXN0W3N0cl1cblxuSUFOQV9TVVBQT1JURURfQ09VTlQgPSBsZW4oSUFOQV9TVVBQT1JURUQpICAjIHR5cGU6IGludFxuXG4jIHByZS1jb21wdXRlZCBjb2RlIHBhZ2UgdGhhdCBhcmUgc2ltaWxhciB1c2luZyB0aGUgZnVuY3Rpb24gY3Bfc2ltaWxhcml0eS5cbklBTkFfU1VQUE9SVEVEX1NJTUlMQVIgPSB7XG4gICAgImNwMDM3IjogWyJjcDEwMjYiLCAiY3AxMTQwIiwgImNwMjczIiwgImNwNTAwIl0sXG4gICAgImNwMTAyNiI6IFsiY3AwMzciLCAiY3AxMTQwIiwgImNwMjczIiwgImNwNTAwIl0sXG4gICAgImNwMTEyNSI6IFsiY3A4NjYiXSxcbiAgICAiY3AxMTQwIjogWyJjcDAzNyIsICJjcDEwMjYiLCAiY3AyNzMiLCAiY3A1MDAiXSxcbiAgICAiY3AxMjUwIjogWyJpc284ODU5XzIiXSxcbiAgICAiY3AxMjUxIjogWyJrejEwNDgiLCAicHRjcDE1NCJdLFxuICAgICJjcDEyNTIiOiBbImlzbzg4NTlfMTUiLCAiaXNvODg1OV85IiwgImxhdGluXzEiXSxcbiAgICAiY3AxMjUzIjogWyJpc284ODU5XzciXSxcbiAgICAiY3AxMjU0IjogWyJpc284ODU5XzE1IiwgImlzbzg4NTlfOSIsICJsYXRpbl8xIl0sXG4gICAgImNwMTI1NyI6IFsiaXNvODg1OV8xMyJdLFxuICAgICJjcDI3MyI6IFsiY3AwMzciLCAiY3AxMDI2IiwgImNwMTE0MCIsICJjcDUwMCJdLFxuICAgICJjcDQzNyI6IFsiY3A4NTAiLCAiY3A4NTgiLCAiY3A4NjAiLCAiY3A4NjEiLCAiY3A4NjIiLCAiY3A4NjMiLCAiY3A4NjUiXSxcbiAgICAiY3A1MDAiOiBbImNwMDM3IiwgImNwMTAyNiIsICJjcDExNDAiLCAiY3AyNzMiXSxcbiAgICAiY3A4NTAiOiBbImNwNDM3IiwgImNwODU3IiwgImNwODU4IiwgImNwODY1Il0sXG4gICAgImNwODU3IjogWyJjcDg1MCIsICJjcDg1OCIsICJjcDg2NSJdLFxuICAgICJjcDg1OCI6IFsiY3A0MzciLCAiY3A4NTAiLCAiY3A4NTciLCAiY3A4NjUiXSxcbiAgICAiY3A4NjAiOiBbImNwNDM3IiwgImNwODYxIiwgImNwODYyIiwgImNwODYzIiwgImNwODY1Il0sXG4gICAgImNwODYxIjogWyJjcDQzNyIsICJjcDg2MCIsICJjcDg2MiIsICJjcDg2MyIsICJjcDg2NSJdLFxuICAgICJjcDg2MiI6IFsiY3A0MzciLCAiY3A4NjAiLCAiY3A4NjEiLCAiY3A4NjMiLCAiY3A4NjUiXSxcbiAgICAiY3A4NjMiOiBbImNwNDM3IiwgImNwODYwIiwgImNwODYxIiwgImNwODYyIiwgImNwODY1Il0sXG4gICAgImNwODY1IjogWyJjcDQzNyIsICJjcDg1MCIsICJjcDg1NyIsICJjcDg1OCIsICJjcDg2MCIsICJjcDg2MSIsICJjcDg2MiIsICJjcDg2MyJdLFxuICAgICJjcDg2NiI6IFsiY3AxMTI1Il0sXG4gICAgImlzbzg4NTlfMTAiOiBbImlzbzg4NTlfMTQiLCAiaXNvODg1OV8xNSIsICJpc284ODU5XzQiLCAiaXNvODg1OV85IiwgImxhdGluXzEiXSxcbiAgICAiaXNvODg1OV8xMSI6IFsidGlzXzYyMCJdLFxuICAgICJpc284ODU5XzEzIjogWyJjcDEyNTciXSxcbiAgICAiaXNvODg1OV8xNCI6IFtcbiAgICAgICAgImlzbzg4NTlfMTAiLFxuICAgICAgICAiaXNvODg1OV8xNSIsXG4gICAgICAgICJpc284ODU5XzE2IixcbiAgICAgICAgImlzbzg4NTlfMyIsXG4gICAgICAgICJpc284ODU5XzkiLFxuICAgICAgICAibGF0aW5fMSIsXG4gICAgXSxcbiAgICAiaXNvODg1OV8xNSI6IFtcbiAgICAgICAgImNwMTI1MiIsXG4gICAgICAgICJjcDEyNTQiLFxuICAgICAgICAiaXNvODg1OV8xMCIsXG4gICAgICAgICJpc284ODU5XzE0IixcbiAgICAgICAgImlzbzg4NTlfMTYiLFxuICAgICAgICAiaXNvODg1OV8zIixcbiAgICAgICAgImlzbzg4NTlfOSIsXG4gICAgICAgICJsYXRpbl8xIixcbiAgICBdLFxuICAgICJpc284ODU5XzE2IjogW1xuICAgICAgICAiaXNvODg1OV8xNCIsXG4gICAgICAgICJpc284ODU5XzE1IixcbiAgICAgICAgImlzbzg4NTlfMiIsXG4gICAgICAgICJpc284ODU5XzMiLFxuICAgICAgICAiaXNvODg1OV85IixcbiAgICAgICAgImxhdGluXzEiLFxuICAgIF0sXG4gICAgImlzbzg4NTlfMiI6IFsiY3AxMjUwIiwgImlzbzg4NTlfMTYiLCAiaXNvODg1OV80Il0sXG4gICAgImlzbzg4NTlfMyI6IFsiaXNvODg1OV8xNCIsICJpc284ODU5XzE1IiwgImlzbzg4NTlfMTYiLCAiaXNvODg1OV85IiwgImxhdGluXzEiXSxcbiAgICAiaXNvODg1OV80IjogWyJpc284ODU5XzEwIiwgImlzbzg4NTlfMiIsICJpc284ODU5XzkiLCAibGF0aW5fMSJdLFxuICAgICJpc284ODU5XzciOiBbImNwMTI1MyJdLFxuICAgICJpc284ODU5XzkiOiBbXG4gICAgICAgICJjcDEyNTIiLFxuICAgICAgICAiY3AxMjU0IixcbiAgICAgICAgImNwMTI1OCIsXG4gICAgICAgICJpc284ODU5XzEwIixcbiAgICAgICAgImlzbzg4NTlfMTQiLFxuICAgICAgICAiaXNvODg1OV8xNSIsXG4gICAgICAgICJpc284ODU5XzE2IixcbiAgICAgICAgImlzbzg4NTlfMyIsXG4gICAgICAgICJpc284ODU5XzQiLFxuICAgICAgICAibGF0aW5fMSIsXG4gICAgXSxcbiAgICAia3oxMDQ4IjogWyJjcDEyNTEiLCAicHRjcDE1NCJdLFxuICAgICJsYXRpbl8xIjogW1xuICAgICAgICAiY3AxMjUyIixcbiAgICAgICAgImNwMTI1NCIsXG4gICAgICAgICJjcDEyNTgiLFxuICAgICAgICAiaXNvODg1OV8xMCIsXG4gICAgICAgICJpc284ODU5XzE0IixcbiAgICAgICAgImlzbzg4NTlfMTUiLFxuICAgICAgICAiaXNvODg1OV8xNiIsXG4gICAgICAgICJpc284ODU5XzMiLFxuICAgICAgICAiaXNvODg1OV80IixcbiAgICAgICAgImlzbzg4NTlfOSIsXG4gICAgXSxcbiAgICAibWFjX2ljZWxhbmQiOiBbIm1hY19yb21hbiIsICJtYWNfdHVya2lzaCJdLFxuICAgICJtYWNfcm9tYW4iOiBbIm1hY19pY2VsYW5kIiwgIm1hY190dXJraXNoIl0sXG4gICAgIm1hY190dXJraXNoIjogWyJtYWNfaWNlbGFuZCIsICJtYWNfcm9tYW4iXSxcbiAgICAicHRjcDE1NCI6IFsiY3AxMjUxIiwgImt6MTA0OCJdLFxuICAgICJ0aXNfNjIwIjogWyJpc284ODU5XzExIl0sXG59ICAjIHR5cGU6IERpY3Rbc3RyLCBMaXN0W3N0cl1dXG5cblxuQ0hBUkRFVF9DT1JSRVNQT05ERU5DRSA9IHtcbiAgICAiaXNvMjAyMl9rciI6ICJJU08tMjAyMi1LUiIsXG4gICAgImlzbzIwMjJfanAiOiAiSVNPLTIwMjItSlAiLFxuICAgICJldWNfa3IiOiAiRVVDLUtSIixcbiAgICAidGlzXzYyMCI6ICJUSVMtNjIwIixcbiAgICAidXRmXzMyIjogIlVURi0zMiIsXG4gICAgImV1Y19qcCI6ICJFVUMtSlAiLFxuICAgICJrb2k4X3IiOiAiS09JOC1SIixcbiAgICAiaXNvODg1OV8xIjogIklTTy04ODU5LTEiLFxuICAgICJpc284ODU5XzIiOiAiSVNPLTg4NTktMiIsXG4gICAgImlzbzg4NTlfNSI6ICJJU08tODg1OS01IixcbiAgICAiaXNvODg1OV82IjogIklTTy04ODU5LTYiLFxuICAgICJpc284ODU5XzciOiAiSVNPLTg4NTktNyIsXG4gICAgImlzbzg4NTlfOCI6ICJJU08tODg1OS04IixcbiAgICAidXRmXzE2IjogIlVURi0xNiIsXG4gICAgImNwODU1IjogIklCTTg1NSIsXG4gICAgIm1hY19jeXJpbGxpYyI6ICJNYWNDeXJpbGxpYyIsXG4gICAgImdiMjMxMiI6ICJHQjIzMTIiLFxuICAgICJnYjE4MDMwIjogIkdCMTgwMzAiLFxuICAgICJjcDkzMiI6ICJDUDkzMiIsXG4gICAgImNwODY2IjogIklCTTg2NiIsXG4gICAgInV0Zl84IjogInV0Zi04IixcbiAgICAidXRmXzhfc2lnIjogIlVURi04LVNJRyIsXG4gICAgInNoaWZ0X2ppcyI6ICJTSElGVF9KSVMiLFxuICAgICJiaWc1IjogIkJpZzUiLFxuICAgICJjcDEyNTAiOiAid2luZG93cy0xMjUwIixcbiAgICAiY3AxMjUxIjogIndpbmRvd3MtMTI1MSIsXG4gICAgImNwMTI1MiI6ICJXaW5kb3dzLTEyNTIiLFxuICAgICJjcDEyNTMiOiAid2luZG93cy0xMjUzIixcbiAgICAiY3AxMjU1IjogIndpbmRvd3MtMTI1NSIsXG4gICAgImNwMTI1NiI6ICJ3aW5kb3dzLTEyNTYiLFxuICAgICJjcDEyNTQiOiAiV2luZG93cy0xMjU0IixcbiAgICAiY3A5NDkiOiAiQ1A5NDkiLFxufSAgIyB0eXBlOiBEaWN0W3N0ciwgc3RyXVxuXG5cbkNPTU1PTl9TQUZFX0FTQ0lJX0NIQVJBQ1RFUlMgPSB7XG4gICAgIjwiLFxuICAgICI+IixcbiAgICAiPSIsXG4gICAgIjoiLFxuICAgICIvIixcbiAgICAiJiIsXG4gICAgIjsiLFxuICAgICJ7IixcbiAgICAifSIsXG4gICAgIlsiLFxuICAgICJdIixcbiAgICAiLCIsXG4gICAgInwiLFxuICAgIFwnIlwnLFxuICAgICItIixcbn0gICMgdHlwZTogU2V0W3N0cl1cblxuXG5LT19OQU1FUyA9IHsiam9oYWIiLCAiY3A5NDkiLCAiZXVjX2tyIn0gICMgdHlwZTogU2V0W3N0cl1cblpIX05BTUVTID0geyJiaWc1IiwgImNwOTUwIiwgImJpZzVoa3NjcyIsICJoeiJ9ICAjIHR5cGU6IFNldFtzdHJdXG5cbk5PVF9QUklOVEFCTEVfUEFUVEVSTiA9IHJlX2NvbXBpbGUociJbMC05XFxXXFxuXFxyXFx0XSsiKVxuXG5MQU5HVUFHRV9TVVBQT1JURURfQ09VTlQgPSBsZW4oRlJFUVVFTkNJRVMpICAjIHR5cGU6IGludFxuXG4jIExvZ2dpbmcgTEVWRUwgYmVsbG93IERFQlVHXG5UUkFDRSA9IDUgICMgdHlwZTogaW50XG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY2hhcnNldF9ub3JtYWxpemVyL21kLnB5JywgYidmcm9tIGZ1bmN0b29scyBpbXBvcnQgbHJ1X2NhY2hlXG5mcm9tIHR5cGluZyBpbXBvcnQgTGlzdCwgT3B0aW9uYWxcblxuZnJvbSAuY29uc3RhbnQgaW1wb3J0IENPTU1PTl9TQUZFX0FTQ0lJX0NIQVJBQ1RFUlMsIFVOSUNPREVfU0VDT05EQVJZX1JBTkdFX0tFWVdPUkRcbmZyb20gLnV0aWxzIGltcG9ydCAoXG4gICAgaXNfYWNjZW50dWF0ZWQsXG4gICAgaXNfYXNjaWksXG4gICAgaXNfY2FzZV92YXJpYWJsZSxcbiAgICBpc19jamssXG4gICAgaXNfZW1vdGljb24sXG4gICAgaXNfaGFuZ3VsLFxuICAgIGlzX2hpcmFnYW5hLFxuICAgIGlzX2thdGFrYW5hLFxuICAgIGlzX2xhdGluLFxuICAgIGlzX3B1bmN0dWF0aW9uLFxuICAgIGlzX3NlcGFyYXRvcixcbiAgICBpc19zeW1ib2wsXG4gICAgaXNfdGhhaSxcbiAgICByZW1vdmVfYWNjZW50LFxuICAgIHVuaWNvZGVfcmFuZ2UsXG4pXG5cblxuY2xhc3MgTWVzc0RldGVjdG9yUGx1Z2luOlxuICAgICIiIlxuICAgIEJhc2UgYWJzdHJhY3QgY2xhc3MgdXNlZCBmb3IgbWVzcyBkZXRlY3Rpb24gcGx1Z2lucy5cbiAgICBBbGwgZGV0ZWN0b3JzIE1VU1QgZXh0ZW5kIGFuZCBpbXBsZW1lbnQgZ2l2ZW4gbWV0aG9kcy5cbiAgICAiIiJcblxuICAgIGRlZiBlbGlnaWJsZShzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICAgICAgIiIiXG4gICAgICAgIERldGVybWluZSBpZiBnaXZlbiBjaGFyYWN0ZXIgc2hvdWxkIGJlIGZlZCBpbi5cbiAgICAgICAgIiIiXG4gICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IgICMgcHJhZ21hOiBub2NvdmVyXG5cbiAgICBkZWYgZmVlZChzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gTm9uZTpcbiAgICAgICAgIiIiXG4gICAgICAgIFRoZSBtYWluIHJvdXRpbmUgdG8gYmUgZXhlY3V0ZWQgdXBvbiBjaGFyYWN0ZXIuXG4gICAgICAgIEluc2VydCB0aGUgbG9naWMgaW4gd2l0Y2ggdGhlIHRleHQgd291bGQgYmUgY29uc2lkZXJlZCBjaGFvdGljLlxuICAgICAgICAiIiJcbiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvciAgIyBwcmFnbWE6IG5vY292ZXJcblxuICAgIGRlZiByZXNldChzZWxmKSAtPiBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyXG4gICAgICAgICIiIlxuICAgICAgICBQZXJtaXQgdG8gcmVzZXQgdGhlIHBsdWdpbiB0byB0aGUgaW5pdGlhbCBzdGF0ZS5cbiAgICAgICAgIiIiXG4gICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3JcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiByYXRpbyhzZWxmKSAtPiBmbG9hdDpcbiAgICAgICAgIiIiXG4gICAgICAgIENvbXB1dGUgdGhlIGNoYW9zIHJhdGlvIGJhc2VkIG9uIHdoYXQgeW91ciBmZWVkKCkgaGFzIHNlZW4uXG4gICAgICAgIE11c3QgTk9UIGJlIGxvd2VyIHRoYW4gMC47IE5vIHJlc3RyaWN0aW9uIGd0IDAuXG4gICAgICAgICIiIlxuICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yICAjIHByYWdtYTogbm9jb3ZlclxuXG5cbmNsYXNzIFRvb01hbnlTeW1ib2xPclB1bmN0dWF0aW9uUGx1Z2luKE1lc3NEZXRlY3RvclBsdWdpbik6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6XG4gICAgICAgIHNlbGYuX3B1bmN0dWF0aW9uX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcbiAgICAgICAgc2VsZi5fc3ltYm9sX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcblxuICAgICAgICBzZWxmLl9sYXN0X3ByaW50YWJsZV9jaGFyID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG4gICAgICAgIHNlbGYuX2ZyZW56eV9zeW1ib2xfaW5fd29yZCA9IEZhbHNlICAjIHR5cGU6IGJvb2xcblxuICAgIGRlZiBlbGlnaWJsZShzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICAgICAgcmV0dXJuIGNoYXJhY3Rlci5pc3ByaW50YWJsZSgpXG5cbiAgICBkZWYgZmVlZChzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gTm9uZTpcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ICs9IDFcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBjaGFyYWN0ZXIgIT0gc2VsZi5fbGFzdF9wcmludGFibGVfY2hhclxuICAgICAgICAgICAgYW5kIGNoYXJhY3RlciBub3QgaW4gQ09NTU9OX1NBRkVfQVNDSUlfQ0hBUkFDVEVSU1xuICAgICAgICApOlxuICAgICAgICAgICAgaWYgaXNfcHVuY3R1YXRpb24oY2hhcmFjdGVyKTpcbiAgICAgICAgICAgICAgICBzZWxmLl9wdW5jdHVhdGlvbl9jb3VudCArPSAxXG4gICAgICAgICAgICBlbGlmIChcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXIuaXNkaWdpdCgpIGlzIEZhbHNlXG4gICAgICAgICAgICAgICAgYW5kIGlzX3N5bWJvbChjaGFyYWN0ZXIpXG4gICAgICAgICAgICAgICAgYW5kIGlzX2Vtb3RpY29uKGNoYXJhY3RlcikgaXMgRmFsc2VcbiAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgc2VsZi5fc3ltYm9sX2NvdW50ICs9IDJcblxuICAgICAgICBzZWxmLl9sYXN0X3ByaW50YWJsZV9jaGFyID0gY2hhcmFjdGVyXG5cbiAgICBkZWYgcmVzZXQoc2VsZikgLT4gTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxuICAgICAgICBzZWxmLl9wdW5jdHVhdGlvbl9jb3VudCA9IDBcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID0gMFxuICAgICAgICBzZWxmLl9zeW1ib2xfY291bnQgPSAwXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgcmF0aW8oc2VsZikgLT4gZmxvYXQ6XG4gICAgICAgIGlmIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9PSAwOlxuICAgICAgICAgICAgcmV0dXJuIDAuMFxuXG4gICAgICAgIHJhdGlvX29mX3B1bmN0dWF0aW9uID0gKFxuICAgICAgICAgICAgc2VsZi5fcHVuY3R1YXRpb25fY291bnQgKyBzZWxmLl9zeW1ib2xfY291bnRcbiAgICAgICAgKSAvIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCAgIyB0eXBlOiBmbG9hdFxuXG4gICAgICAgIHJldHVybiByYXRpb19vZl9wdW5jdHVhdGlvbiBpZiByYXRpb19vZl9wdW5jdHVhdGlvbiA+PSAwLjMgZWxzZSAwLjBcblxuXG5jbGFzcyBUb29NYW55QWNjZW50dWF0ZWRQbHVnaW4oTWVzc0RldGVjdG9yUGx1Z2luKTpcbiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZTpcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcbiAgICAgICAgc2VsZi5fYWNjZW50dWF0ZWRfY291bnQgPSAwICAjIHR5cGU6IGludFxuXG4gICAgZGVmIGVsaWdpYmxlKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgICAgICByZXR1cm4gY2hhcmFjdGVyLmlzYWxwaGEoKVxuXG4gICAgZGVmIGZlZWQoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IE5vbmU6XG4gICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCArPSAxXG5cbiAgICAgICAgaWYgaXNfYWNjZW50dWF0ZWQoY2hhcmFjdGVyKTpcbiAgICAgICAgICAgIHNlbGYuX2FjY2VudHVhdGVkX2NvdW50ICs9IDFcblxuICAgIGRlZiByZXNldChzZWxmKSAtPiBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyXG4gICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9IDBcbiAgICAgICAgc2VsZi5fYWNjZW50dWF0ZWRfY291bnQgPSAwXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgcmF0aW8oc2VsZikgLT4gZmxvYXQ6XG4gICAgICAgIGlmIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9PSAwOlxuICAgICAgICAgICAgcmV0dXJuIDAuMFxuICAgICAgICByYXRpb19vZl9hY2NlbnR1YXRpb24gPSAoXG4gICAgICAgICAgICBzZWxmLl9hY2NlbnR1YXRlZF9jb3VudCAvIHNlbGYuX2NoYXJhY3Rlcl9jb3VudFxuICAgICAgICApICAjIHR5cGU6IGZsb2F0XG4gICAgICAgIHJldHVybiByYXRpb19vZl9hY2NlbnR1YXRpb24gaWYgcmF0aW9fb2ZfYWNjZW50dWF0aW9uID49IDAuMzUgZWxzZSAwLjBcblxuXG5jbGFzcyBVbnByaW50YWJsZVBsdWdpbihNZXNzRGV0ZWN0b3JQbHVnaW4pOlxuICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOlxuICAgICAgICBzZWxmLl91bnByaW50YWJsZV9jb3VudCA9IDAgICMgdHlwZTogaW50XG4gICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9IDAgICMgdHlwZTogaW50XG5cbiAgICBkZWYgZWxpZ2libGUoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6XG4gICAgICAgIHJldHVybiBUcnVlXG5cbiAgICBkZWYgZmVlZChzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gTm9uZTpcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2hhcmFjdGVyLmlzc3BhY2UoKSBpcyBGYWxzZSAgIyBpbmNsdWRlcyBcXG4gXFx0IFxcciBcXHZcbiAgICAgICAgICAgIGFuZCBjaGFyYWN0ZXIuaXNwcmludGFibGUoKSBpcyBGYWxzZVxuICAgICAgICAgICAgYW5kIGNoYXJhY3RlciAhPSAiXFx4MUEiICAjIFdoeT8gSXRzIHRoZSBBU0NJSSBzdWJzdGl0dXRlIGNoYXJhY3Rlci5cbiAgICAgICAgKTpcbiAgICAgICAgICAgIHNlbGYuX3VucHJpbnRhYmxlX2NvdW50ICs9IDFcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ICs9IDFcblxuICAgIGRlZiByZXNldChzZWxmKSAtPiBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyXG4gICAgICAgIHNlbGYuX3VucHJpbnRhYmxlX2NvdW50ID0gMFxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIHJhdGlvKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICBpZiBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPT0gMDpcbiAgICAgICAgICAgIHJldHVybiAwLjBcblxuICAgICAgICByZXR1cm4gKHNlbGYuX3VucHJpbnRhYmxlX2NvdW50ICogOCkgLyBzZWxmLl9jaGFyYWN0ZXJfY291bnRcblxuXG5jbGFzcyBTdXNwaWNpb3VzRHVwbGljYXRlQWNjZW50UGx1Z2luKE1lc3NEZXRlY3RvclBsdWdpbik6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6XG4gICAgICAgIHNlbGYuX3N1Y2Nlc3NpdmVfY291bnQgPSAwICAjIHR5cGU6IGludFxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwICAjIHR5cGU6IGludFxuXG4gICAgICAgIHNlbGYuX2xhc3RfbGF0aW5fY2hhcmFjdGVyID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG5cbiAgICBkZWYgZWxpZ2libGUoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6XG4gICAgICAgIHJldHVybiBjaGFyYWN0ZXIuaXNhbHBoYSgpIGFuZCBpc19sYXRpbihjaGFyYWN0ZXIpXG5cbiAgICBkZWYgZmVlZChzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gTm9uZTpcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ICs9IDFcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgc2VsZi5fbGFzdF9sYXRpbl9jaGFyYWN0ZXIgaXMgbm90IE5vbmVcbiAgICAgICAgICAgIGFuZCBpc19hY2NlbnR1YXRlZChjaGFyYWN0ZXIpXG4gICAgICAgICAgICBhbmQgaXNfYWNjZW50dWF0ZWQoc2VsZi5fbGFzdF9sYXRpbl9jaGFyYWN0ZXIpXG4gICAgICAgICk6XG4gICAgICAgICAgICBpZiBjaGFyYWN0ZXIuaXN1cHBlcigpIGFuZCBzZWxmLl9sYXN0X2xhdGluX2NoYXJhY3Rlci5pc3VwcGVyKCk6XG4gICAgICAgICAgICAgICAgc2VsZi5fc3VjY2Vzc2l2ZV9jb3VudCArPSAxXG4gICAgICAgICAgICAjIFdvcnNlIGlmIGl0cyB0aGUgc2FtZSBjaGFyIGR1cGxpY2F0ZWQgd2l0aCBkaWZmZXJlbnQgYWNjZW50LlxuICAgICAgICAgICAgaWYgcmVtb3ZlX2FjY2VudChjaGFyYWN0ZXIpID09IHJlbW92ZV9hY2NlbnQoc2VsZi5fbGFzdF9sYXRpbl9jaGFyYWN0ZXIpOlxuICAgICAgICAgICAgICAgIHNlbGYuX3N1Y2Nlc3NpdmVfY291bnQgKz0gMVxuICAgICAgICBzZWxmLl9sYXN0X2xhdGluX2NoYXJhY3RlciA9IGNoYXJhY3RlclxuXG4gICAgZGVmIHJlc2V0KHNlbGYpIC0+IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcbiAgICAgICAgc2VsZi5fc3VjY2Vzc2l2ZV9jb3VudCA9IDBcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID0gMFxuICAgICAgICBzZWxmLl9sYXN0X2xhdGluX2NoYXJhY3RlciA9IE5vbmVcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiByYXRpbyhzZWxmKSAtPiBmbG9hdDpcbiAgICAgICAgaWYgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID09IDA6XG4gICAgICAgICAgICByZXR1cm4gMC4wXG5cbiAgICAgICAgcmV0dXJuIChzZWxmLl9zdWNjZXNzaXZlX2NvdW50ICogMikgLyBzZWxmLl9jaGFyYWN0ZXJfY291bnRcblxuXG5jbGFzcyBTdXNwaWNpb3VzUmFuZ2UoTWVzc0RldGVjdG9yUGx1Z2luKTpcbiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZTpcbiAgICAgICAgc2VsZi5fc3VzcGljaW91c19zdWNjZXNzaXZlX3JhbmdlX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcbiAgICAgICAgc2VsZi5fbGFzdF9wcmludGFibGVfc2VlbiA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuXG4gICAgZGVmIGVsaWdpYmxlKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgICAgICByZXR1cm4gY2hhcmFjdGVyLmlzcHJpbnRhYmxlKClcblxuICAgIGRlZiBmZWVkKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBOb25lOlxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgKz0gMVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNoYXJhY3Rlci5pc3NwYWNlKClcbiAgICAgICAgICAgIG9yIGlzX3B1bmN0dWF0aW9uKGNoYXJhY3RlcilcbiAgICAgICAgICAgIG9yIGNoYXJhY3RlciBpbiBDT01NT05fU0FGRV9BU0NJSV9DSEFSQUNURVJTXG4gICAgICAgICk6XG4gICAgICAgICAgICBzZWxmLl9sYXN0X3ByaW50YWJsZV9zZWVuID0gTm9uZVxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgaWYgc2VsZi5fbGFzdF9wcmludGFibGVfc2VlbiBpcyBOb25lOlxuICAgICAgICAgICAgc2VsZi5fbGFzdF9wcmludGFibGVfc2VlbiA9IGNoYXJhY3RlclxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgdW5pY29kZV9yYW5nZV9hID0gdW5pY29kZV9yYW5nZShcbiAgICAgICAgICAgIHNlbGYuX2xhc3RfcHJpbnRhYmxlX3NlZW5cbiAgICAgICAgKSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG4gICAgICAgIHVuaWNvZGVfcmFuZ2VfYiA9IHVuaWNvZGVfcmFuZ2UoY2hhcmFjdGVyKSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG5cbiAgICAgICAgaWYgaXNfc3VzcGljaW91c2x5X3N1Y2Nlc3NpdmVfcmFuZ2UodW5pY29kZV9yYW5nZV9hLCB1bmljb2RlX3JhbmdlX2IpOlxuICAgICAgICAgICAgc2VsZi5fc3VzcGljaW91c19zdWNjZXNzaXZlX3JhbmdlX2NvdW50ICs9IDFcblxuICAgICAgICBzZWxmLl9sYXN0X3ByaW50YWJsZV9zZWVuID0gY2hhcmFjdGVyXG5cbiAgICBkZWYgcmVzZXQoc2VsZikgLT4gTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwXG4gICAgICAgIHNlbGYuX3N1c3BpY2lvdXNfc3VjY2Vzc2l2ZV9yYW5nZV9jb3VudCA9IDBcbiAgICAgICAgc2VsZi5fbGFzdF9wcmludGFibGVfc2VlbiA9IE5vbmVcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiByYXRpbyhzZWxmKSAtPiBmbG9hdDpcbiAgICAgICAgaWYgc2VsZi5fY2hhcmFjdGVyX2NvdW50ID09IDA6XG4gICAgICAgICAgICByZXR1cm4gMC4wXG5cbiAgICAgICAgcmF0aW9fb2Zfc3VzcGljaW91c19yYW5nZV91c2FnZSA9IChcbiAgICAgICAgICAgIHNlbGYuX3N1c3BpY2lvdXNfc3VjY2Vzc2l2ZV9yYW5nZV9jb3VudCAqIDJcbiAgICAgICAgKSAvIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCAgIyB0eXBlOiBmbG9hdFxuXG4gICAgICAgIGlmIHJhdGlvX29mX3N1c3BpY2lvdXNfcmFuZ2VfdXNhZ2UgPCAwLjE6XG4gICAgICAgICAgICByZXR1cm4gMC4wXG5cbiAgICAgICAgcmV0dXJuIHJhdGlvX29mX3N1c3BpY2lvdXNfcmFuZ2VfdXNhZ2VcblxuXG5jbGFzcyBTdXBlcldlaXJkV29yZFBsdWdpbihNZXNzRGV0ZWN0b3JQbHVnaW4pOlxuICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOlxuICAgICAgICBzZWxmLl93b3JkX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcbiAgICAgICAgc2VsZi5fYmFkX3dvcmRfY291bnQgPSAwICAjIHR5cGU6IGludFxuICAgICAgICBzZWxmLl9mb3JlaWduX2xvbmdfY291bnQgPSAwICAjIHR5cGU6IGludFxuXG4gICAgICAgIHNlbGYuX2lzX2N1cnJlbnRfd29yZF9iYWQgPSBGYWxzZSAgIyB0eXBlOiBib29sXG4gICAgICAgIHNlbGYuX2ZvcmVpZ25fbG9uZ193YXRjaCA9IEZhbHNlICAjIHR5cGU6IGJvb2xcblxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwICAjIHR5cGU6IGludFxuICAgICAgICBzZWxmLl9iYWRfY2hhcmFjdGVyX2NvdW50ID0gMCAgIyB0eXBlOiBpbnRcblxuICAgICAgICBzZWxmLl9idWZmZXIgPSAiIiAgIyB0eXBlOiBzdHJcbiAgICAgICAgc2VsZi5fYnVmZmVyX2FjY2VudF9jb3VudCA9IDAgICMgdHlwZTogaW50XG5cbiAgICBkZWYgZWxpZ2libGUoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IGJvb2w6XG4gICAgICAgIHJldHVybiBUcnVlXG5cbiAgICBkZWYgZmVlZChzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gTm9uZTpcbiAgICAgICAgaWYgY2hhcmFjdGVyLmlzYWxwaGEoKTpcbiAgICAgICAgICAgIHNlbGYuX2J1ZmZlciA9ICIiLmpvaW4oW3NlbGYuX2J1ZmZlciwgY2hhcmFjdGVyXSlcbiAgICAgICAgICAgIGlmIGlzX2FjY2VudHVhdGVkKGNoYXJhY3Rlcik6XG4gICAgICAgICAgICAgICAgc2VsZi5fYnVmZmVyX2FjY2VudF9jb3VudCArPSAxXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgc2VsZi5fZm9yZWlnbl9sb25nX3dhdGNoIGlzIEZhbHNlXG4gICAgICAgICAgICAgICAgYW5kIChpc19sYXRpbihjaGFyYWN0ZXIpIGlzIEZhbHNlIG9yIGlzX2FjY2VudHVhdGVkKGNoYXJhY3RlcikpXG4gICAgICAgICAgICAgICAgYW5kIGlzX2NqayhjaGFyYWN0ZXIpIGlzIEZhbHNlXG4gICAgICAgICAgICAgICAgYW5kIGlzX2hhbmd1bChjaGFyYWN0ZXIpIGlzIEZhbHNlXG4gICAgICAgICAgICAgICAgYW5kIGlzX2thdGFrYW5hKGNoYXJhY3RlcikgaXMgRmFsc2VcbiAgICAgICAgICAgICAgICBhbmQgaXNfaGlyYWdhbmEoY2hhcmFjdGVyKSBpcyBGYWxzZVxuICAgICAgICAgICAgICAgIGFuZCBpc190aGFpKGNoYXJhY3RlcikgaXMgRmFsc2VcbiAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgc2VsZi5fZm9yZWlnbl9sb25nX3dhdGNoID0gVHJ1ZVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIGlmIG5vdCBzZWxmLl9idWZmZXI6XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2hhcmFjdGVyLmlzc3BhY2UoKSBvciBpc19wdW5jdHVhdGlvbihjaGFyYWN0ZXIpIG9yIGlzX3NlcGFyYXRvcihjaGFyYWN0ZXIpXG4gICAgICAgICkgYW5kIHNlbGYuX2J1ZmZlcjpcbiAgICAgICAgICAgIHNlbGYuX3dvcmRfY291bnQgKz0gMVxuICAgICAgICAgICAgYnVmZmVyX2xlbmd0aCA9IGxlbihzZWxmLl9idWZmZXIpICAjIHR5cGU6IGludFxuXG4gICAgICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgKz0gYnVmZmVyX2xlbmd0aFxuXG4gICAgICAgICAgICBpZiBidWZmZXJfbGVuZ3RoID49IDQ6XG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fYnVmZmVyX2FjY2VudF9jb3VudCAvIGJ1ZmZlcl9sZW5ndGggPiAwLjM0OlxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9pc19jdXJyZW50X3dvcmRfYmFkID0gVHJ1ZVxuICAgICAgICAgICAgICAgICMgV29yZC9CdWZmZXIgZW5kaW5nIHdpdGggYSB1cHBlciBjYXNlIGFjY2VudHVhdGVkIGxldHRlciBhcmUgc28gcmFyZSxcbiAgICAgICAgICAgICAgICAjIHRoYXQgd2Ugd2lsbCBjb25zaWRlciB0aGVtIGFsbCBhcyBzdXNwaWNpb3VzLiBTYW1lIHdlaWdodCBhcyBmb3JlaWduX2xvbmcgc3VzcGljaW91cy5cbiAgICAgICAgICAgICAgICBpZiBpc19hY2NlbnR1YXRlZChzZWxmLl9idWZmZXJbLTFdKSBhbmQgc2VsZi5fYnVmZmVyWy0xXS5pc3VwcGVyKCk6XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZvcmVpZ25fbG9uZ19jb3VudCArPSAxXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2lzX2N1cnJlbnRfd29yZF9iYWQgPSBUcnVlXG4gICAgICAgICAgICBpZiBidWZmZXJfbGVuZ3RoID49IDI0IGFuZCBzZWxmLl9mb3JlaWduX2xvbmdfd2F0Y2g6XG4gICAgICAgICAgICAgICAgc2VsZi5fZm9yZWlnbl9sb25nX2NvdW50ICs9IDFcbiAgICAgICAgICAgICAgICBzZWxmLl9pc19jdXJyZW50X3dvcmRfYmFkID0gVHJ1ZVxuXG4gICAgICAgICAgICBpZiBzZWxmLl9pc19jdXJyZW50X3dvcmRfYmFkOlxuICAgICAgICAgICAgICAgIHNlbGYuX2JhZF93b3JkX2NvdW50ICs9IDFcbiAgICAgICAgICAgICAgICBzZWxmLl9iYWRfY2hhcmFjdGVyX2NvdW50ICs9IGxlbihzZWxmLl9idWZmZXIpXG4gICAgICAgICAgICAgICAgc2VsZi5faXNfY3VycmVudF93b3JkX2JhZCA9IEZhbHNlXG5cbiAgICAgICAgICAgIHNlbGYuX2ZvcmVpZ25fbG9uZ193YXRjaCA9IEZhbHNlXG4gICAgICAgICAgICBzZWxmLl9idWZmZXIgPSAiIlxuICAgICAgICAgICAgc2VsZi5fYnVmZmVyX2FjY2VudF9jb3VudCA9IDBcbiAgICAgICAgZWxpZiAoXG4gICAgICAgICAgICBjaGFyYWN0ZXIgbm90IGluIHsiPCIsICI+IiwgIi0iLCAiPSIsICJ+IiwgInwiLCAiXyJ9XG4gICAgICAgICAgICBhbmQgY2hhcmFjdGVyLmlzZGlnaXQoKSBpcyBGYWxzZVxuICAgICAgICAgICAgYW5kIGlzX3N5bWJvbChjaGFyYWN0ZXIpXG4gICAgICAgICk6XG4gICAgICAgICAgICBzZWxmLl9pc19jdXJyZW50X3dvcmRfYmFkID0gVHJ1ZVxuICAgICAgICAgICAgc2VsZi5fYnVmZmVyICs9IGNoYXJhY3RlclxuXG4gICAgZGVmIHJlc2V0KHNlbGYpIC0+IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcbiAgICAgICAgc2VsZi5fYnVmZmVyID0gIiJcbiAgICAgICAgc2VsZi5faXNfY3VycmVudF93b3JkX2JhZCA9IEZhbHNlXG4gICAgICAgIHNlbGYuX2ZvcmVpZ25fbG9uZ193YXRjaCA9IEZhbHNlXG4gICAgICAgIHNlbGYuX2JhZF93b3JkX2NvdW50ID0gMFxuICAgICAgICBzZWxmLl93b3JkX2NvdW50ID0gMFxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwXG4gICAgICAgIHNlbGYuX2JhZF9jaGFyYWN0ZXJfY291bnQgPSAwXG4gICAgICAgIHNlbGYuX2ZvcmVpZ25fbG9uZ19jb3VudCA9IDBcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiByYXRpbyhzZWxmKSAtPiBmbG9hdDpcbiAgICAgICAgaWYgc2VsZi5fd29yZF9jb3VudCA8PSAxMCBhbmQgc2VsZi5fZm9yZWlnbl9sb25nX2NvdW50ID09IDA6XG4gICAgICAgICAgICByZXR1cm4gMC4wXG5cbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhZF9jaGFyYWN0ZXJfY291bnQgLyBzZWxmLl9jaGFyYWN0ZXJfY291bnRcblxuXG5jbGFzcyBDamtJbnZhbGlkU3RvcFBsdWdpbihNZXNzRGV0ZWN0b3JQbHVnaW4pOlxuICAgICIiIlxuICAgIEdCKENoaW5lc2UpIGJhc2VkIGVuY29kaW5nIG9mdGVuIHJlbmRlciB0aGUgc3RvcCBpbmNvcnJlY3RseSB3aGVuIHRoZSBjb250ZW50IGRvZXMgbm90IGZpdCBhbmRcbiAgICBjYW4gYmUgZWFzaWx5IGRldGVjdGVkLiBTZWFyY2hpbmcgZm9yIHRoZSBvdmVydXNlIG9mIFwnXHhlNFx4YjhceDg1XCcgYW5kIFwnXHhlNFx4YjhceDg0XCcuXG4gICAgIiIiXG5cbiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZTpcbiAgICAgICAgc2VsZi5fd3Jvbmdfc3RvcF9jb3VudCA9IDAgICMgdHlwZTogaW50XG4gICAgICAgIHNlbGYuX2Nqa19jaGFyYWN0ZXJfY291bnQgPSAwICAjIHR5cGU6IGludFxuXG4gICAgZGVmIGVsaWdpYmxlKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgICAgICByZXR1cm4gVHJ1ZVxuXG4gICAgZGVmIGZlZWQoc2VsZiwgY2hhcmFjdGVyOiBzdHIpIC0+IE5vbmU6XG4gICAgICAgIGlmIGNoYXJhY3RlciBpbiB7Ilx4ZTRceGI4XHg4NSIsICJceGU0XHhiOFx4ODQifTpcbiAgICAgICAgICAgIHNlbGYuX3dyb25nX3N0b3BfY291bnQgKz0gMVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIGlmIGlzX2NqayhjaGFyYWN0ZXIpOlxuICAgICAgICAgICAgc2VsZi5fY2prX2NoYXJhY3Rlcl9jb3VudCArPSAxXG5cbiAgICBkZWYgcmVzZXQoc2VsZikgLT4gTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxuICAgICAgICBzZWxmLl93cm9uZ19zdG9wX2NvdW50ID0gMFxuICAgICAgICBzZWxmLl9jamtfY2hhcmFjdGVyX2NvdW50ID0gMFxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIHJhdGlvKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICBpZiBzZWxmLl9jamtfY2hhcmFjdGVyX2NvdW50IDwgMTY6XG4gICAgICAgICAgICByZXR1cm4gMC4wXG4gICAgICAgIHJldHVybiBzZWxmLl93cm9uZ19zdG9wX2NvdW50IC8gc2VsZi5fY2prX2NoYXJhY3Rlcl9jb3VudFxuXG5cbmNsYXNzIEFyY2hhaWNVcHBlckxvd2VyUGx1Z2luKE1lc3NEZXRlY3RvclBsdWdpbik6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6XG4gICAgICAgIHNlbGYuX2J1ZiA9IEZhbHNlICAjIHR5cGU6IGJvb2xcblxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnRfc2luY2VfbGFzdF9zZXAgPSAwICAjIHR5cGU6IGludFxuXG4gICAgICAgIHNlbGYuX3N1Y2Nlc3NpdmVfdXBwZXJfbG93ZXJfY291bnQgPSAwICAjIHR5cGU6IGludFxuICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50X2ZpbmFsID0gMCAgIyB0eXBlOiBpbnRcblxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwICAjIHR5cGU6IGludFxuXG4gICAgICAgIHNlbGYuX2xhc3RfYWxwaGFfc2VlbiA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuICAgICAgICBzZWxmLl9jdXJyZW50X2FzY2lpX29ubHkgPSBUcnVlICAjIHR5cGU6IGJvb2xcblxuICAgIGRlZiBlbGlnaWJsZShzZWxmLCBjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICAgICAgcmV0dXJuIFRydWVcblxuICAgIGRlZiBmZWVkKHNlbGYsIGNoYXJhY3Rlcjogc3RyKSAtPiBOb25lOlxuICAgICAgICBpc19jb25jZXJuZWQgPSBjaGFyYWN0ZXIuaXNhbHBoYSgpIGFuZCBpc19jYXNlX3ZhcmlhYmxlKGNoYXJhY3RlcilcbiAgICAgICAgY2h1bmtfc2VwID0gaXNfY29uY2VybmVkIGlzIEZhbHNlXG5cbiAgICAgICAgaWYgY2h1bmtfc2VwIGFuZCBzZWxmLl9jaGFyYWN0ZXJfY291bnRfc2luY2VfbGFzdF9zZXAgPiAwOlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudF9zaW5jZV9sYXN0X3NlcCA8PSA2NFxuICAgICAgICAgICAgICAgIGFuZCBjaGFyYWN0ZXIuaXNkaWdpdCgpIGlzIEZhbHNlXG4gICAgICAgICAgICAgICAgYW5kIHNlbGYuX2N1cnJlbnRfYXNjaWlfb25seSBpcyBGYWxzZVxuICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50X2ZpbmFsICs9IChcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fc3VjY2Vzc2l2ZV91cHBlcl9sb3dlcl9jb3VudFxuICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgc2VsZi5fc3VjY2Vzc2l2ZV91cHBlcl9sb3dlcl9jb3VudCA9IDBcbiAgICAgICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudF9zaW5jZV9sYXN0X3NlcCA9IDBcbiAgICAgICAgICAgIHNlbGYuX2xhc3RfYWxwaGFfc2VlbiA9IE5vbmVcbiAgICAgICAgICAgIHNlbGYuX2J1ZiA9IEZhbHNlXG4gICAgICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgKz0gMVxuICAgICAgICAgICAgc2VsZi5fY3VycmVudF9hc2NpaV9vbmx5ID0gVHJ1ZVxuXG4gICAgICAgICAgICByZXR1cm5cblxuICAgICAgICBpZiBzZWxmLl9jdXJyZW50X2FzY2lpX29ubHkgaXMgVHJ1ZSBhbmQgaXNfYXNjaWkoY2hhcmFjdGVyKSBpcyBGYWxzZTpcbiAgICAgICAgICAgIHNlbGYuX2N1cnJlbnRfYXNjaWlfb25seSA9IEZhbHNlXG5cbiAgICAgICAgaWYgc2VsZi5fbGFzdF9hbHBoYV9zZWVuIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgaWYgKGNoYXJhY3Rlci5pc3VwcGVyKCkgYW5kIHNlbGYuX2xhc3RfYWxwaGFfc2Vlbi5pc2xvd2VyKCkpIG9yIChcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXIuaXNsb3dlcigpIGFuZCBzZWxmLl9sYXN0X2FscGhhX3NlZW4uaXN1cHBlcigpXG4gICAgICAgICAgICApOlxuICAgICAgICAgICAgICAgIGlmIHNlbGYuX2J1ZiBpcyBUcnVlOlxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50ICs9IDJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYnVmID0gRmFsc2VcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9idWYgPSBUcnVlXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIHNlbGYuX2J1ZiA9IEZhbHNlXG5cbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50ICs9IDFcbiAgICAgICAgc2VsZi5fY2hhcmFjdGVyX2NvdW50X3NpbmNlX2xhc3Rfc2VwICs9IDFcbiAgICAgICAgc2VsZi5fbGFzdF9hbHBoYV9zZWVuID0gY2hhcmFjdGVyXG5cbiAgICBkZWYgcmVzZXQoc2VsZikgLT4gTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxuICAgICAgICBzZWxmLl9jaGFyYWN0ZXJfY291bnQgPSAwXG4gICAgICAgIHNlbGYuX2NoYXJhY3Rlcl9jb3VudF9zaW5jZV9sYXN0X3NlcCA9IDBcbiAgICAgICAgc2VsZi5fc3VjY2Vzc2l2ZV91cHBlcl9sb3dlcl9jb3VudCA9IDBcbiAgICAgICAgc2VsZi5fc3VjY2Vzc2l2ZV91cHBlcl9sb3dlcl9jb3VudF9maW5hbCA9IDBcbiAgICAgICAgc2VsZi5fbGFzdF9hbHBoYV9zZWVuID0gTm9uZVxuICAgICAgICBzZWxmLl9idWYgPSBGYWxzZVxuICAgICAgICBzZWxmLl9jdXJyZW50X2FzY2lpX29ubHkgPSBUcnVlXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgcmF0aW8oc2VsZikgLT4gZmxvYXQ6XG4gICAgICAgIGlmIHNlbGYuX2NoYXJhY3Rlcl9jb3VudCA9PSAwOlxuICAgICAgICAgICAgcmV0dXJuIDAuMFxuXG4gICAgICAgIHJldHVybiBzZWxmLl9zdWNjZXNzaXZlX3VwcGVyX2xvd2VyX2NvdW50X2ZpbmFsIC8gc2VsZi5fY2hhcmFjdGVyX2NvdW50XG5cblxuZGVmIGlzX3N1c3BpY2lvdXNseV9zdWNjZXNzaXZlX3JhbmdlKFxuICAgIHVuaWNvZGVfcmFuZ2VfYTogT3B0aW9uYWxbc3RyXSwgdW5pY29kZV9yYW5nZV9iOiBPcHRpb25hbFtzdHJdXG4pIC0+IGJvb2w6XG4gICAgIiIiXG4gICAgRGV0ZXJtaW5lIGlmIHR3byBVbmljb2RlIHJhbmdlIHNlZW4gbmV4dCB0byBlYWNoIG90aGVyIGNhbiBiZSBjb25zaWRlcmVkIGFzIHN1c3BpY2lvdXMuXG4gICAgIiIiXG4gICAgaWYgdW5pY29kZV9yYW5nZV9hIGlzIE5vbmUgb3IgdW5pY29kZV9yYW5nZV9iIGlzIE5vbmU6XG4gICAgICAgIHJldHVybiBUcnVlXG5cbiAgICBpZiB1bmljb2RlX3JhbmdlX2EgPT0gdW5pY29kZV9yYW5nZV9iOlxuICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIGlmICJMYXRpbiIgaW4gdW5pY29kZV9yYW5nZV9hIGFuZCAiTGF0aW4iIGluIHVuaWNvZGVfcmFuZ2VfYjpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICBpZiAiRW1vdGljb25zIiBpbiB1bmljb2RlX3JhbmdlX2Egb3IgIkVtb3RpY29ucyIgaW4gdW5pY29kZV9yYW5nZV9iOlxuICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgICMgTGF0aW4gY2hhcmFjdGVycyBjYW4gYmUgYWNjb21wYW5pZWQgd2l0aCBhIGNvbWJpbmluZyBkaWFjcml0aWNhbCBtYXJrXG4gICAgIyBlZy4gVmlldG5hbWVzZS5cbiAgICBpZiAoIkxhdGluIiBpbiB1bmljb2RlX3JhbmdlX2Egb3IgIkxhdGluIiBpbiB1bmljb2RlX3JhbmdlX2IpIGFuZCAoXG4gICAgICAgICJDb21iaW5pbmciIGluIHVuaWNvZGVfcmFuZ2VfYSBvciAiQ29tYmluaW5nIiBpbiB1bmljb2RlX3JhbmdlX2JcbiAgICApOlxuICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgIGtleXdvcmRzX3JhbmdlX2EsIGtleXdvcmRzX3JhbmdlX2IgPSB1bmljb2RlX3JhbmdlX2Euc3BsaXQoXG4gICAgICAgICIgIlxuICAgICksIHVuaWNvZGVfcmFuZ2VfYi5zcGxpdCgiICIpXG5cbiAgICBmb3IgZWwgaW4ga2V5d29yZHNfcmFuZ2VfYTpcbiAgICAgICAgaWYgZWwgaW4gVU5JQ09ERV9TRUNPTkRBUllfUkFOR0VfS0VZV09SRDpcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIGlmIGVsIGluIGtleXdvcmRzX3JhbmdlX2I6XG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcblxuICAgICMgSmFwYW5lc2UgRXhjZXB0aW9uXG4gICAgcmFuZ2VfYV9qcF9jaGFycywgcmFuZ2VfYl9qcF9jaGFycyA9IChcbiAgICAgICAgdW5pY29kZV9yYW5nZV9hXG4gICAgICAgIGluIChcbiAgICAgICAgICAgICJIaXJhZ2FuYSIsXG4gICAgICAgICAgICAiS2F0YWthbmEiLFxuICAgICAgICApLFxuICAgICAgICB1bmljb2RlX3JhbmdlX2IgaW4gKCJIaXJhZ2FuYSIsICJLYXRha2FuYSIpLFxuICAgIClcbiAgICBpZiAocmFuZ2VfYV9qcF9jaGFycyBvciByYW5nZV9iX2pwX2NoYXJzKSBhbmQgKFxuICAgICAgICAiQ0pLIiBpbiB1bmljb2RlX3JhbmdlX2Egb3IgIkNKSyIgaW4gdW5pY29kZV9yYW5nZV9iXG4gICAgKTpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG4gICAgaWYgcmFuZ2VfYV9qcF9jaGFycyBhbmQgcmFuZ2VfYl9qcF9jaGFyczpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICBpZiAiSGFuZ3VsIiBpbiB1bmljb2RlX3JhbmdlX2Egb3IgIkhhbmd1bCIgaW4gdW5pY29kZV9yYW5nZV9iOlxuICAgICAgICBpZiAiQ0pLIiBpbiB1bmljb2RlX3JhbmdlX2Egb3IgIkNKSyIgaW4gdW5pY29kZV9yYW5nZV9iOlxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXG4gICAgICAgIGlmIHVuaWNvZGVfcmFuZ2VfYSA9PSAiQmFzaWMgTGF0aW4iIG9yIHVuaWNvZGVfcmFuZ2VfYiA9PSAiQmFzaWMgTGF0aW4iOlxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICAjIENoaW5lc2UvSmFwYW5lc2UgdXNlIGRlZGljYXRlZCByYW5nZSBmb3IgcHVuY3R1YXRpb24gYW5kL29yIHNlcGFyYXRvcnMuXG4gICAgaWYgKCJDSksiIGluIHVuaWNvZGVfcmFuZ2VfYSBvciAiQ0pLIiBpbiB1bmljb2RlX3JhbmdlX2IpIG9yIChcbiAgICAgICAgdW5pY29kZV9yYW5nZV9hIGluIFsiS2F0YWthbmEiLCAiSGlyYWdhbmEiXVxuICAgICAgICBhbmQgdW5pY29kZV9yYW5nZV9iIGluIFsiS2F0YWthbmEiLCAiSGlyYWdhbmEiXVxuICAgICk6XG4gICAgICAgIGlmICJQdW5jdHVhdGlvbiIgaW4gdW5pY29kZV9yYW5nZV9hIG9yICJQdW5jdHVhdGlvbiIgaW4gdW5pY29kZV9yYW5nZV9iOlxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXG4gICAgICAgIGlmICJGb3JtcyIgaW4gdW5pY29kZV9yYW5nZV9hIG9yICJGb3JtcyIgaW4gdW5pY29kZV9yYW5nZV9iOlxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICByZXR1cm4gVHJ1ZVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT0yMDQ4KVxuZGVmIG1lc3NfcmF0aW8oXG4gICAgZGVjb2RlZF9zZXF1ZW5jZTogc3RyLCBtYXhpbXVtX3RocmVzaG9sZDogZmxvYXQgPSAwLjIsIGRlYnVnOiBib29sID0gRmFsc2VcbikgLT4gZmxvYXQ6XG4gICAgIiIiXG4gICAgQ29tcHV0ZSBhIG1lc3MgcmF0aW8gZ2l2ZW4gYSBkZWNvZGVkIGJ5dGVzIHNlcXVlbmNlLiBUaGUgbWF4aW11bSB0aHJlc2hvbGQgZG9lcyBzdG9wIHRoZSBjb21wdXRhdGlvbiBlYXJsaWVyLlxuICAgICIiIlxuXG4gICAgZGV0ZWN0b3JzID0gW1xuICAgICAgICBtZF9jbGFzcygpIGZvciBtZF9jbGFzcyBpbiBNZXNzRGV0ZWN0b3JQbHVnaW4uX19zdWJjbGFzc2VzX18oKVxuICAgIF0gICMgdHlwZTogTGlzdFtNZXNzRGV0ZWN0b3JQbHVnaW5dXG5cbiAgICBsZW5ndGggPSBsZW4oZGVjb2RlZF9zZXF1ZW5jZSkgKyAxICAjIHR5cGU6IGludFxuXG4gICAgbWVhbl9tZXNzX3JhdGlvID0gMC4wICAjIHR5cGU6IGZsb2F0XG5cbiAgICBpZiBsZW5ndGggPCA1MTI6XG4gICAgICAgIGludGVybWVkaWFyeV9tZWFuX21lc3NfcmF0aW9fY2FsYyA9IDMyICAjIHR5cGU6IGludFxuICAgIGVsaWYgbGVuZ3RoIDw9IDEwMjQ6XG4gICAgICAgIGludGVybWVkaWFyeV9tZWFuX21lc3NfcmF0aW9fY2FsYyA9IDY0XG4gICAgZWxzZTpcbiAgICAgICAgaW50ZXJtZWRpYXJ5X21lYW5fbWVzc19yYXRpb19jYWxjID0gMTI4XG5cbiAgICBmb3IgY2hhcmFjdGVyLCBpbmRleCBpbiB6aXAoZGVjb2RlZF9zZXF1ZW5jZSArICJcXG4iLCByYW5nZShsZW5ndGgpKTpcbiAgICAgICAgZm9yIGRldGVjdG9yIGluIGRldGVjdG9yczpcbiAgICAgICAgICAgIGlmIGRldGVjdG9yLmVsaWdpYmxlKGNoYXJhY3Rlcik6XG4gICAgICAgICAgICAgICAgZGV0ZWN0b3IuZmVlZChjaGFyYWN0ZXIpXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaW5kZXggPiAwIGFuZCBpbmRleCAlIGludGVybWVkaWFyeV9tZWFuX21lc3NfcmF0aW9fY2FsYyA9PSAwXG4gICAgICAgICkgb3IgaW5kZXggPT0gbGVuZ3RoIC0gMTpcbiAgICAgICAgICAgIG1lYW5fbWVzc19yYXRpbyA9IHN1bShkdC5yYXRpbyBmb3IgZHQgaW4gZGV0ZWN0b3JzKVxuXG4gICAgICAgICAgICBpZiBtZWFuX21lc3NfcmF0aW8gPj0gbWF4aW11bV90aHJlc2hvbGQ6XG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgIGlmIGRlYnVnOlxuICAgICAgICBmb3IgZHQgaW4gZGV0ZWN0b3JzOiAgIyBwcmFnbWE6IG5vY292ZXJcbiAgICAgICAgICAgIHByaW50KGR0Ll9fY2xhc3NfXywgZHQucmF0aW8pXG5cbiAgICByZXR1cm4gcm91bmQobWVhbl9tZXNzX3JhdGlvLCAzKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NoYXJzZXRfbm9ybWFsaXplci91dGlscy5weScsIGIndHJ5OlxuICAgIGltcG9ydCB1bmljb2RlZGF0YTIgYXMgdW5pY29kZWRhdGFcbmV4Y2VwdCBJbXBvcnRFcnJvcjpcbiAgICBpbXBvcnQgdW5pY29kZWRhdGEgICMgdHlwZTogaWdub3JlW25vLXJlZGVmXVxuXG5pbXBvcnQgaW1wb3J0bGliXG5pbXBvcnQgbG9nZ2luZ1xuZnJvbSBjb2RlY3MgaW1wb3J0IEluY3JlbWVudGFsRGVjb2RlclxuZnJvbSBlbmNvZGluZ3MuYWxpYXNlcyBpbXBvcnQgYWxpYXNlc1xuZnJvbSBmdW5jdG9vbHMgaW1wb3J0IGxydV9jYWNoZVxuZnJvbSByZSBpbXBvcnQgZmluZGFsbFxuZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QsIE9wdGlvbmFsLCBTZXQsIFR1cGxlLCBVbmlvblxuXG5mcm9tIF9tdWx0aWJ5dGVjb2RlYyBpbXBvcnQgTXVsdGlieXRlSW5jcmVtZW50YWxEZWNvZGVyICAjIHR5cGU6IGlnbm9yZVxuXG5mcm9tIC5jb25zdGFudCBpbXBvcnQgKFxuICAgIEVOQ09ESU5HX01BUktTLFxuICAgIElBTkFfU1VQUE9SVEVEX1NJTUlMQVIsXG4gICAgUkVfUE9TU0lCTEVfRU5DT0RJTkdfSU5ESUNBVElPTixcbiAgICBVTklDT0RFX1JBTkdFU19DT01CSU5FRCxcbiAgICBVTklDT0RFX1NFQ09OREFSWV9SQU5HRV9LRVlXT1JELFxuICAgIFVURjhfTUFYSU1BTF9BTExPQ0FUSU9OLFxuKVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT1VVEY4X01BWElNQUxfQUxMT0NBVElPTilcbmRlZiBpc19hY2NlbnR1YXRlZChjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICB0cnk6XG4gICAgICAgIGRlc2NyaXB0aW9uID0gdW5pY29kZWRhdGEubmFtZShjaGFyYWN0ZXIpICAjIHR5cGU6IHN0clxuICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxuICAgICAgICByZXR1cm4gRmFsc2VcbiAgICByZXR1cm4gKFxuICAgICAgICAiV0lUSCBHUkFWRSIgaW4gZGVzY3JpcHRpb25cbiAgICAgICAgb3IgIldJVEggQUNVVEUiIGluIGRlc2NyaXB0aW9uXG4gICAgICAgIG9yICJXSVRIIENFRElMTEEiIGluIGRlc2NyaXB0aW9uXG4gICAgICAgIG9yICJXSVRIIERJQUVSRVNJUyIgaW4gZGVzY3JpcHRpb25cbiAgICAgICAgb3IgIldJVEggQ0lSQ1VNRkxFWCIgaW4gZGVzY3JpcHRpb25cbiAgICAgICAgb3IgIldJVEggVElMREUiIGluIGRlc2NyaXB0aW9uXG4gICAgKVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT1VVEY4X01BWElNQUxfQUxMT0NBVElPTilcbmRlZiByZW1vdmVfYWNjZW50KGNoYXJhY3Rlcjogc3RyKSAtPiBzdHI6XG4gICAgZGVjb21wb3NlZCA9IHVuaWNvZGVkYXRhLmRlY29tcG9zaXRpb24oY2hhcmFjdGVyKSAgIyB0eXBlOiBzdHJcbiAgICBpZiBub3QgZGVjb21wb3NlZDpcbiAgICAgICAgcmV0dXJuIGNoYXJhY3RlclxuXG4gICAgY29kZXMgPSBkZWNvbXBvc2VkLnNwbGl0KCIgIikgICMgdHlwZTogTGlzdFtzdHJdXG5cbiAgICByZXR1cm4gY2hyKGludChjb2Rlc1swXSwgMTYpKVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT1VVEY4X01BWElNQUxfQUxMT0NBVElPTilcbmRlZiB1bmljb2RlX3JhbmdlKGNoYXJhY3Rlcjogc3RyKSAtPiBPcHRpb25hbFtzdHJdOlxuICAgICIiIlxuICAgIFJldHJpZXZlIHRoZSBVbmljb2RlIHJhbmdlIG9mZmljaWFsIG5hbWUgZnJvbSBhIHNpbmdsZSBjaGFyYWN0ZXIuXG4gICAgIiIiXG4gICAgY2hhcmFjdGVyX29yZCA9IG9yZChjaGFyYWN0ZXIpICAjIHR5cGU6IGludFxuXG4gICAgZm9yIHJhbmdlX25hbWUsIG9yZF9yYW5nZSBpbiBVTklDT0RFX1JBTkdFU19DT01CSU5FRC5pdGVtcygpOlxuICAgICAgICBpZiBjaGFyYWN0ZXJfb3JkIGluIG9yZF9yYW5nZTpcbiAgICAgICAgICAgIHJldHVybiByYW5nZV9uYW1lXG5cbiAgICByZXR1cm4gTm9uZVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT1VVEY4X01BWElNQUxfQUxMT0NBVElPTilcbmRlZiBpc19sYXRpbihjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICB0cnk6XG4gICAgICAgIGRlc2NyaXB0aW9uID0gdW5pY29kZWRhdGEubmFtZShjaGFyYWN0ZXIpICAjIHR5cGU6IHN0clxuICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxuICAgICAgICByZXR1cm4gRmFsc2VcbiAgICByZXR1cm4gIkxBVElOIiBpbiBkZXNjcmlwdGlvblxuXG5cbmRlZiBpc19hc2NpaShjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICB0cnk6XG4gICAgICAgIGNoYXJhY3Rlci5lbmNvZGUoImFzY2lpIilcbiAgICBleGNlcHQgVW5pY29kZUVuY29kZUVycm9yOlxuICAgICAgICByZXR1cm4gRmFsc2VcbiAgICByZXR1cm4gVHJ1ZVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT1VVEY4X01BWElNQUxfQUxMT0NBVElPTilcbmRlZiBpc19wdW5jdHVhdGlvbihjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICBjaGFyYWN0ZXJfY2F0ZWdvcnkgPSB1bmljb2RlZGF0YS5jYXRlZ29yeShjaGFyYWN0ZXIpICAjIHR5cGU6IHN0clxuXG4gICAgaWYgIlAiIGluIGNoYXJhY3Rlcl9jYXRlZ29yeTpcbiAgICAgICAgcmV0dXJuIFRydWVcblxuICAgIGNoYXJhY3Rlcl9yYW5nZSA9IHVuaWNvZGVfcmFuZ2UoY2hhcmFjdGVyKSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG5cbiAgICBpZiBjaGFyYWN0ZXJfcmFuZ2UgaXMgTm9uZTpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICByZXR1cm4gIlB1bmN0dWF0aW9uIiBpbiBjaGFyYWN0ZXJfcmFuZ2VcblxuXG5AbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pXG5kZWYgaXNfc3ltYm9sKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIGNoYXJhY3Rlcl9jYXRlZ29yeSA9IHVuaWNvZGVkYXRhLmNhdGVnb3J5KGNoYXJhY3RlcikgICMgdHlwZTogc3RyXG5cbiAgICBpZiAiUyIgaW4gY2hhcmFjdGVyX2NhdGVnb3J5IG9yICJOIiBpbiBjaGFyYWN0ZXJfY2F0ZWdvcnk6XG4gICAgICAgIHJldHVybiBUcnVlXG5cbiAgICBjaGFyYWN0ZXJfcmFuZ2UgPSB1bmljb2RlX3JhbmdlKGNoYXJhY3RlcikgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuXG4gICAgaWYgY2hhcmFjdGVyX3JhbmdlIGlzIE5vbmU6XG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgcmV0dXJuICJGb3JtcyIgaW4gY2hhcmFjdGVyX3JhbmdlXG5cblxuQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKVxuZGVmIGlzX2Vtb3RpY29uKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIGNoYXJhY3Rlcl9yYW5nZSA9IHVuaWNvZGVfcmFuZ2UoY2hhcmFjdGVyKSAgIyB0eXBlOiBPcHRpb25hbFtzdHJdXG5cbiAgICBpZiBjaGFyYWN0ZXJfcmFuZ2UgaXMgTm9uZTpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICByZXR1cm4gIkVtb3RpY29ucyIgaW4gY2hhcmFjdGVyX3JhbmdlXG5cblxuQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKVxuZGVmIGlzX3NlcGFyYXRvcihjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICBpZiBjaGFyYWN0ZXIuaXNzcGFjZSgpIG9yIGNoYXJhY3RlciBpbiB7Ilx4ZWZceGJkXHg5YyIsICIrIiwgIiwiLCAiOyIsICI8IiwgIj4ifTpcbiAgICAgICAgcmV0dXJuIFRydWVcblxuICAgIGNoYXJhY3Rlcl9jYXRlZ29yeSA9IHVuaWNvZGVkYXRhLmNhdGVnb3J5KGNoYXJhY3RlcikgICMgdHlwZTogc3RyXG5cbiAgICByZXR1cm4gIloiIGluIGNoYXJhY3Rlcl9jYXRlZ29yeVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT1VVEY4X01BWElNQUxfQUxMT0NBVElPTilcbmRlZiBpc19jYXNlX3ZhcmlhYmxlKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIHJldHVybiBjaGFyYWN0ZXIuaXNsb3dlcigpICE9IGNoYXJhY3Rlci5pc3VwcGVyKClcblxuXG5kZWYgaXNfcHJpdmF0ZV91c2Vfb25seShjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICBjaGFyYWN0ZXJfY2F0ZWdvcnkgPSB1bmljb2RlZGF0YS5jYXRlZ29yeShjaGFyYWN0ZXIpICAjIHR5cGU6IHN0clxuXG4gICAgcmV0dXJuIGNoYXJhY3Rlcl9jYXRlZ29yeSA9PSAiQ28iXG5cblxuQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKVxuZGVmIGlzX2NqayhjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICB0cnk6XG4gICAgICAgIGNoYXJhY3Rlcl9uYW1lID0gdW5pY29kZWRhdGEubmFtZShjaGFyYWN0ZXIpXG4gICAgZXhjZXB0IFZhbHVlRXJyb3I6XG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgcmV0dXJuICJDSksiIGluIGNoYXJhY3Rlcl9uYW1lXG5cblxuQGxydV9jYWNoZShtYXhzaXplPVVURjhfTUFYSU1BTF9BTExPQ0FUSU9OKVxuZGVmIGlzX2hpcmFnYW5hKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIHRyeTpcbiAgICAgICAgY2hhcmFjdGVyX25hbWUgPSB1bmljb2RlZGF0YS5uYW1lKGNoYXJhY3RlcilcbiAgICBleGNlcHQgVmFsdWVFcnJvcjpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICByZXR1cm4gIkhJUkFHQU5BIiBpbiBjaGFyYWN0ZXJfbmFtZVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT1VVEY4X01BWElNQUxfQUxMT0NBVElPTilcbmRlZiBpc19rYXRha2FuYShjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICB0cnk6XG4gICAgICAgIGNoYXJhY3Rlcl9uYW1lID0gdW5pY29kZWRhdGEubmFtZShjaGFyYWN0ZXIpXG4gICAgZXhjZXB0IFZhbHVlRXJyb3I6XG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgcmV0dXJuICJLQVRBS0FOQSIgaW4gY2hhcmFjdGVyX25hbWVcblxuXG5AbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pXG5kZWYgaXNfaGFuZ3VsKGNoYXJhY3Rlcjogc3RyKSAtPiBib29sOlxuICAgIHRyeTpcbiAgICAgICAgY2hhcmFjdGVyX25hbWUgPSB1bmljb2RlZGF0YS5uYW1lKGNoYXJhY3RlcilcbiAgICBleGNlcHQgVmFsdWVFcnJvcjpcbiAgICAgICAgcmV0dXJuIEZhbHNlXG5cbiAgICByZXR1cm4gIkhBTkdVTCIgaW4gY2hhcmFjdGVyX25hbWVcblxuXG5AbHJ1X2NhY2hlKG1heHNpemU9VVRGOF9NQVhJTUFMX0FMTE9DQVRJT04pXG5kZWYgaXNfdGhhaShjaGFyYWN0ZXI6IHN0cikgLT4gYm9vbDpcbiAgICB0cnk6XG4gICAgICAgIGNoYXJhY3Rlcl9uYW1lID0gdW5pY29kZWRhdGEubmFtZShjaGFyYWN0ZXIpXG4gICAgZXhjZXB0IFZhbHVlRXJyb3I6XG4gICAgICAgIHJldHVybiBGYWxzZVxuXG4gICAgcmV0dXJuICJUSEFJIiBpbiBjaGFyYWN0ZXJfbmFtZVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT1sZW4oVU5JQ09ERV9SQU5HRVNfQ09NQklORUQpKVxuZGVmIGlzX3VuaWNvZGVfcmFuZ2Vfc2Vjb25kYXJ5KHJhbmdlX25hbWU6IHN0cikgLT4gYm9vbDpcbiAgICByZXR1cm4gYW55KGtleXdvcmQgaW4gcmFuZ2VfbmFtZSBmb3Iga2V5d29yZCBpbiBVTklDT0RFX1NFQ09OREFSWV9SQU5HRV9LRVlXT1JEKVxuXG5cbmRlZiBhbnlfc3BlY2lmaWVkX2VuY29kaW5nKHNlcXVlbmNlOiBieXRlcywgc2VhcmNoX3pvbmU6IGludCA9IDQwOTYpIC0+IE9wdGlvbmFsW3N0cl06XG4gICAgIiIiXG4gICAgRXh0cmFjdCB1c2luZyBBU0NJSS1vbmx5IGRlY29kZXIgYW55IHNwZWNpZmllZCBlbmNvZGluZyBpbiB0aGUgZmlyc3Qgbi1ieXRlcy5cbiAgICAiIiJcbiAgICBpZiBub3QgaXNpbnN0YW5jZShzZXF1ZW5jZSwgYnl0ZXMpOlxuICAgICAgICByYWlzZSBUeXBlRXJyb3JcblxuICAgIHNlcV9sZW4gPSBsZW4oc2VxdWVuY2UpICAjIHR5cGU6IGludFxuXG4gICAgcmVzdWx0cyA9IGZpbmRhbGwoXG4gICAgICAgIFJFX1BPU1NJQkxFX0VOQ09ESU5HX0lORElDQVRJT04sXG4gICAgICAgIHNlcXVlbmNlWzogbWluKHNlcV9sZW4sIHNlYXJjaF96b25lKV0uZGVjb2RlKCJhc2NpaSIsIGVycm9ycz0iaWdub3JlIiksXG4gICAgKSAgIyB0eXBlOiBMaXN0W3N0cl1cblxuICAgIGlmIGxlbihyZXN1bHRzKSA9PSAwOlxuICAgICAgICByZXR1cm4gTm9uZVxuXG4gICAgZm9yIHNwZWNpZmllZF9lbmNvZGluZyBpbiByZXN1bHRzOlxuICAgICAgICBzcGVjaWZpZWRfZW5jb2RpbmcgPSBzcGVjaWZpZWRfZW5jb2RpbmcubG93ZXIoKS5yZXBsYWNlKCItIiwgIl8iKVxuXG4gICAgICAgIGZvciBlbmNvZGluZ19hbGlhcywgZW5jb2RpbmdfaWFuYSBpbiBhbGlhc2VzLml0ZW1zKCk6XG4gICAgICAgICAgICBpZiBlbmNvZGluZ19hbGlhcyA9PSBzcGVjaWZpZWRfZW5jb2Rpbmc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nX2lhbmFcbiAgICAgICAgICAgIGlmIGVuY29kaW5nX2lhbmEgPT0gc3BlY2lmaWVkX2VuY29kaW5nOlxuICAgICAgICAgICAgICAgIHJldHVybiBlbmNvZGluZ19pYW5hXG5cbiAgICByZXR1cm4gTm9uZVxuXG5cbkBscnVfY2FjaGUobWF4c2l6ZT0xMjgpXG5kZWYgaXNfbXVsdGlfYnl0ZV9lbmNvZGluZyhuYW1lOiBzdHIpIC0+IGJvb2w6XG4gICAgIiIiXG4gICAgVmVyaWZ5IGlzIGEgc3BlY2lmaWMgZW5jb2RpbmcgaXMgYSBtdWx0aSBieXRlIG9uZSBiYXNlZCBvbiBpdCBJQU5BIG5hbWVcbiAgICAiIiJcbiAgICByZXR1cm4gbmFtZSBpbiB7XG4gICAgICAgICJ1dGZfOCIsXG4gICAgICAgICJ1dGZfOF9zaWciLFxuICAgICAgICAidXRmXzE2IixcbiAgICAgICAgInV0Zl8xNl9iZSIsXG4gICAgICAgICJ1dGZfMTZfbGUiLFxuICAgICAgICAidXRmXzMyIixcbiAgICAgICAgInV0Zl8zMl9sZSIsXG4gICAgICAgICJ1dGZfMzJfYmUiLFxuICAgICAgICAidXRmXzciLFxuICAgIH0gb3IgaXNzdWJjbGFzcyhcbiAgICAgICAgaW1wb3J0bGliLmltcG9ydF9tb2R1bGUoImVuY29kaW5ncy57fSIuZm9ybWF0KG5hbWUpKS5JbmNyZW1lbnRhbERlY29kZXIsICAjIHR5cGU6IGlnbm9yZVxuICAgICAgICBNdWx0aWJ5dGVJbmNyZW1lbnRhbERlY29kZXIsXG4gICAgKVxuXG5cbmRlZiBpZGVudGlmeV9zaWdfb3JfYm9tKHNlcXVlbmNlOiBieXRlcykgLT4gVHVwbGVbT3B0aW9uYWxbc3RyXSwgYnl0ZXNdOlxuICAgICIiIlxuICAgIElkZW50aWZ5IGFuZCBleHRyYWN0IFNJRy9CT00gaW4gZ2l2ZW4gc2VxdWVuY2UuXG4gICAgIiIiXG5cbiAgICBmb3IgaWFuYV9lbmNvZGluZyBpbiBFTkNPRElOR19NQVJLUzpcbiAgICAgICAgbWFya3MgPSBFTkNPRElOR19NQVJLU1tpYW5hX2VuY29kaW5nXSAgIyB0eXBlOiBVbmlvbltieXRlcywgTGlzdFtieXRlc11dXG5cbiAgICAgICAgaWYgaXNpbnN0YW5jZShtYXJrcywgYnl0ZXMpOlxuICAgICAgICAgICAgbWFya3MgPSBbbWFya3NdXG5cbiAgICAgICAgZm9yIG1hcmsgaW4gbWFya3M6XG4gICAgICAgICAgICBpZiBzZXF1ZW5jZS5zdGFydHN3aXRoKG1hcmspOlxuICAgICAgICAgICAgICAgIHJldHVybiBpYW5hX2VuY29kaW5nLCBtYXJrXG5cbiAgICByZXR1cm4gTm9uZSwgYiIiXG5cblxuZGVmIHNob3VsZF9zdHJpcF9zaWdfb3JfYm9tKGlhbmFfZW5jb2Rpbmc6IHN0cikgLT4gYm9vbDpcbiAgICByZXR1cm4gaWFuYV9lbmNvZGluZyBub3QgaW4geyJ1dGZfMTYiLCAidXRmXzMyIn1cblxuXG5kZWYgaWFuYV9uYW1lKGNwX25hbWU6IHN0ciwgc3RyaWN0OiBib29sID0gVHJ1ZSkgLT4gc3RyOlxuICAgIGNwX25hbWUgPSBjcF9uYW1lLmxvd2VyKCkucmVwbGFjZSgiLSIsICJfIilcblxuICAgIGZvciBlbmNvZGluZ19hbGlhcywgZW5jb2RpbmdfaWFuYSBpbiBhbGlhc2VzLml0ZW1zKCk6XG4gICAgICAgIGlmIGNwX25hbWUgaW4gW2VuY29kaW5nX2FsaWFzLCBlbmNvZGluZ19pYW5hXTpcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGluZ19pYW5hXG5cbiAgICBpZiBzdHJpY3Q6XG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVuYWJsZSB0byByZXRyaWV2ZSBJQU5BIGZvciBcJ3t9XCciLmZvcm1hdChjcF9uYW1lKSlcblxuICAgIHJldHVybiBjcF9uYW1lXG5cblxuZGVmIHJhbmdlX3NjYW4oZGVjb2RlZF9zZXF1ZW5jZTogc3RyKSAtPiBMaXN0W3N0cl06XG4gICAgcmFuZ2VzID0gc2V0KCkgICMgdHlwZTogU2V0W3N0cl1cblxuICAgIGZvciBjaGFyYWN0ZXIgaW4gZGVjb2RlZF9zZXF1ZW5jZTpcbiAgICAgICAgY2hhcmFjdGVyX3JhbmdlID0gdW5pY29kZV9yYW5nZShjaGFyYWN0ZXIpICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cblxuICAgICAgICBpZiBjaGFyYWN0ZXJfcmFuZ2UgaXMgTm9uZTpcbiAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgcmFuZ2VzLmFkZChjaGFyYWN0ZXJfcmFuZ2UpXG5cbiAgICByZXR1cm4gbGlzdChyYW5nZXMpXG5cblxuZGVmIGNwX3NpbWlsYXJpdHkoaWFuYV9uYW1lX2E6IHN0ciwgaWFuYV9uYW1lX2I6IHN0cikgLT4gZmxvYXQ6XG5cbiAgICBpZiBpc19tdWx0aV9ieXRlX2VuY29kaW5nKGlhbmFfbmFtZV9hKSBvciBpc19tdWx0aV9ieXRlX2VuY29kaW5nKGlhbmFfbmFtZV9iKTpcbiAgICAgICAgcmV0dXJuIDAuMFxuXG4gICAgZGVjb2Rlcl9hID0gaW1wb3J0bGliLmltcG9ydF9tb2R1bGUoImVuY29kaW5ncy57fSIuZm9ybWF0KGlhbmFfbmFtZV9hKSkuSW5jcmVtZW50YWxEZWNvZGVyICAjIHR5cGU6IGlnbm9yZVxuICAgIGRlY29kZXJfYiA9IGltcG9ydGxpYi5pbXBvcnRfbW9kdWxlKCJlbmNvZGluZ3Mue30iLmZvcm1hdChpYW5hX25hbWVfYikpLkluY3JlbWVudGFsRGVjb2RlciAgIyB0eXBlOiBpZ25vcmVcblxuICAgIGlkX2EgPSBkZWNvZGVyX2EoZXJyb3JzPSJpZ25vcmUiKSAgIyB0eXBlOiBJbmNyZW1lbnRhbERlY29kZXJcbiAgICBpZF9iID0gZGVjb2Rlcl9iKGVycm9ycz0iaWdub3JlIikgICMgdHlwZTogSW5jcmVtZW50YWxEZWNvZGVyXG5cbiAgICBjaGFyYWN0ZXJfbWF0Y2hfY291bnQgPSAwICAjIHR5cGU6IGludFxuXG4gICAgZm9yIGkgaW4gcmFuZ2UoMjU1KTpcbiAgICAgICAgdG9fYmVfZGVjb2RlZCA9IGJ5dGVzKFtpXSkgICMgdHlwZTogYnl0ZXNcbiAgICAgICAgaWYgaWRfYS5kZWNvZGUodG9fYmVfZGVjb2RlZCkgPT0gaWRfYi5kZWNvZGUodG9fYmVfZGVjb2RlZCk6XG4gICAgICAgICAgICBjaGFyYWN0ZXJfbWF0Y2hfY291bnQgKz0gMVxuXG4gICAgcmV0dXJuIGNoYXJhY3Rlcl9tYXRjaF9jb3VudCAvIDI1NFxuXG5cbmRlZiBpc19jcF9zaW1pbGFyKGlhbmFfbmFtZV9hOiBzdHIsIGlhbmFfbmFtZV9iOiBzdHIpIC0+IGJvb2w6XG4gICAgIiIiXG4gICAgRGV0ZXJtaW5lIGlmIHR3byBjb2RlIHBhZ2UgYXJlIGF0IGxlYXN0IDgwJSBzaW1pbGFyLiBJQU5BX1NVUFBPUlRFRF9TSU1JTEFSIGRpY3Qgd2FzIGdlbmVyYXRlZCB1c2luZ1xuICAgIHRoZSBmdW5jdGlvbiBjcF9zaW1pbGFyaXR5LlxuICAgICIiIlxuICAgIHJldHVybiAoXG4gICAgICAgIGlhbmFfbmFtZV9hIGluIElBTkFfU1VQUE9SVEVEX1NJTUlMQVJcbiAgICAgICAgYW5kIGlhbmFfbmFtZV9iIGluIElBTkFfU1VQUE9SVEVEX1NJTUlMQVJbaWFuYV9uYW1lX2FdXG4gICAgKVxuXG5cbmRlZiBzZXRfbG9nZ2luZ19oYW5kbGVyKFxuICAgIG5hbWU6IHN0ciA9ICJjaGFyc2V0X25vcm1hbGl6ZXIiLFxuICAgIGxldmVsOiBpbnQgPSBsb2dnaW5nLklORk8sXG4gICAgZm9ybWF0X3N0cmluZzogc3RyID0gIiUoYXNjdGltZSlzIHwgJShsZXZlbG5hbWUpcyB8ICUobWVzc2FnZSlzIixcbikgLT4gTm9uZTpcblxuICAgIGxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKG5hbWUpXG4gICAgbG9nZ2VyLnNldExldmVsKGxldmVsKVxuXG4gICAgaGFuZGxlciA9IGxvZ2dpbmcuU3RyZWFtSGFuZGxlcigpXG4gICAgaGFuZGxlci5zZXRGb3JtYXR0ZXIobG9nZ2luZy5Gb3JtYXR0ZXIoZm9ybWF0X3N0cmluZykpXG4gICAgbG9nZ2VyLmFkZEhhbmRsZXIoaGFuZGxlcilcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjaGFyc2V0X25vcm1hbGl6ZXIvbW9kZWxzLnB5JywgYidpbXBvcnQgd2FybmluZ3NcbmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IENvdW50ZXJcbmZyb20gZW5jb2RpbmdzLmFsaWFzZXMgaW1wb3J0IGFsaWFzZXNcbmZyb20gaGFzaGxpYiBpbXBvcnQgc2hhMjU2XG5mcm9tIGpzb24gaW1wb3J0IGR1bXBzXG5mcm9tIHJlIGltcG9ydCBzdWJcbmZyb20gdHlwaW5nIGltcG9ydCBBbnksIERpY3QsIEl0ZXJhdG9yLCBMaXN0LCBPcHRpb25hbCwgVHVwbGUsIFVuaW9uXG5cbmZyb20gLmNvbnN0YW50IGltcG9ydCBOT1RfUFJJTlRBQkxFX1BBVFRFUk4sIFRPT19CSUdfU0VRVUVOQ0VcbmZyb20gLm1kIGltcG9ydCBtZXNzX3JhdGlvXG5mcm9tIC51dGlscyBpbXBvcnQgaWFuYV9uYW1lLCBpc19tdWx0aV9ieXRlX2VuY29kaW5nLCB1bmljb2RlX3JhbmdlXG5cblxuY2xhc3MgQ2hhcnNldE1hdGNoOlxuICAgIGRlZiBfX2luaXRfXyhcbiAgICAgICAgc2VsZixcbiAgICAgICAgcGF5bG9hZDogYnl0ZXMsXG4gICAgICAgIGd1ZXNzZWRfZW5jb2Rpbmc6IHN0cixcbiAgICAgICAgbWVhbl9tZXNzX3JhdGlvOiBmbG9hdCxcbiAgICAgICAgaGFzX3NpZ19vcl9ib206IGJvb2wsXG4gICAgICAgIGxhbmd1YWdlczogIkNvaGVyZW5jZU1hdGNoZXMiLFxuICAgICAgICBkZWNvZGVkX3BheWxvYWQ6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxuICAgICk6XG4gICAgICAgIHNlbGYuX3BheWxvYWQgPSBwYXlsb2FkICAjIHR5cGU6IGJ5dGVzXG5cbiAgICAgICAgc2VsZi5fZW5jb2RpbmcgPSBndWVzc2VkX2VuY29kaW5nICAjIHR5cGU6IHN0clxuICAgICAgICBzZWxmLl9tZWFuX21lc3NfcmF0aW8gPSBtZWFuX21lc3NfcmF0aW8gICMgdHlwZTogZmxvYXRcbiAgICAgICAgc2VsZi5fbGFuZ3VhZ2VzID0gbGFuZ3VhZ2VzICAjIHR5cGU6IENvaGVyZW5jZU1hdGNoZXNcbiAgICAgICAgc2VsZi5faGFzX3NpZ19vcl9ib20gPSBoYXNfc2lnX29yX2JvbSAgIyB0eXBlOiBib29sXG4gICAgICAgIHNlbGYuX3VuaWNvZGVfcmFuZ2VzID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtMaXN0W3N0cl1dXG5cbiAgICAgICAgc2VsZi5fbGVhdmVzID0gW10gICMgdHlwZTogTGlzdFtDaGFyc2V0TWF0Y2hdXG4gICAgICAgIHNlbGYuX21lYW5fY29oZXJlbmNlX3JhdGlvID0gMC4wICAjIHR5cGU6IGZsb2F0XG5cbiAgICAgICAgc2VsZi5fb3V0cHV0X3BheWxvYWQgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2J5dGVzXVxuICAgICAgICBzZWxmLl9vdXRwdXRfZW5jb2RpbmcgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cblxuICAgICAgICBzZWxmLl9zdHJpbmcgPSBkZWNvZGVkX3BheWxvYWQgICMgdHlwZTogT3B0aW9uYWxbc3RyXVxuXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgQ2hhcnNldE1hdGNoKTpcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAiX19lcV9fIGNhbm5vdCBiZSBpbnZva2VkIG9uIHt9IGFuZCB7fS4iLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgc3RyKG90aGVyLl9fY2xhc3NfXyksIHN0cihzZWxmLl9fY2xhc3NfXylcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgIHJldHVybiBzZWxmLmVuY29kaW5nID09IG90aGVyLmVuY29kaW5nIGFuZCBzZWxmLmZpbmdlcnByaW50ID09IG90aGVyLmZpbmdlcnByaW50XG5cbiAgICBkZWYgX19sdF9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XG4gICAgICAgICIiIlxuICAgICAgICBJbXBsZW1lbnRlZCB0byBtYWtlIHNvcnRlZCBhdmFpbGFibGUgdXBvbiBDaGFyc2V0TWF0Y2hlcyBpdGVtcy5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBDaGFyc2V0TWF0Y2gpOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvclxuXG4gICAgICAgIGNoYW9zX2RpZmZlcmVuY2UgPSBhYnMoc2VsZi5jaGFvcyAtIG90aGVyLmNoYW9zKSAgIyB0eXBlOiBmbG9hdFxuICAgICAgICBjb2hlcmVuY2VfZGlmZmVyZW5jZSA9IGFicyhzZWxmLmNvaGVyZW5jZSAtIG90aGVyLmNvaGVyZW5jZSkgICMgdHlwZTogZmxvYXRcblxuICAgICAgICAjIEJlbGxvdyAxJSBkaWZmZXJlbmNlIC0tPiBVc2UgQ29oZXJlbmNlXG4gICAgICAgIGlmIGNoYW9zX2RpZmZlcmVuY2UgPCAwLjAxIGFuZCBjb2hlcmVuY2VfZGlmZmVyZW5jZSA+IDAuMDI6XG4gICAgICAgICAgICAjIFdoZW4gaGF2aW5nIGEgdG91Z2ggZGVjaXNpb24sIHVzZSB0aGUgcmVzdWx0IHRoYXQgZGVjb2RlZCBhcyBtYW55IG11bHRpLWJ5dGUgYXMgcG9zc2libGUuXG4gICAgICAgICAgICBpZiBjaGFvc19kaWZmZXJlbmNlID09IDAuMCBhbmQgc2VsZi5jb2hlcmVuY2UgPT0gb3RoZXIuY29oZXJlbmNlOlxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLm11bHRpX2J5dGVfdXNhZ2UgPiBvdGhlci5tdWx0aV9ieXRlX3VzYWdlXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb2hlcmVuY2UgPiBvdGhlci5jb2hlcmVuY2VcblxuICAgICAgICByZXR1cm4gc2VsZi5jaGFvcyA8IG90aGVyLmNoYW9zXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgbXVsdGlfYnl0ZV91c2FnZShzZWxmKSAtPiBmbG9hdDpcbiAgICAgICAgcmV0dXJuIDEuMCAtIGxlbihzdHIoc2VsZikpIC8gbGVuKHNlbGYucmF3KVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGNoYW9zX3NlY29uZGFyeV9wYXNzKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICAiIiJcbiAgICAgICAgQ2hlY2sgb25jZSBhZ2FpbiBjaGFvcyBpbiBkZWNvZGVkIHRleHQsIGV4Y2VwdCB0aGlzIHRpbWUsIHdpdGggZnVsbCBjb250ZW50LlxuICAgICAgICBVc2Ugd2l0aCBjYXV0aW9uLCB0aGlzIGNhbiBiZSB2ZXJ5IHNsb3cuXG4gICAgICAgIE5vdGljZTogV2lsbCBiZSByZW1vdmVkIGluIDMuMFxuICAgICAgICAiIiJcbiAgICAgICAgd2FybmluZ3Mud2FybihcbiAgICAgICAgICAgICJjaGFvc19zZWNvbmRhcnlfcGFzcyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gMy4wIixcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gbWVzc19yYXRpbyhzdHIoc2VsZiksIDEuMClcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBjb2hlcmVuY2Vfbm9uX2xhdGluKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICAiIiJcbiAgICAgICAgQ29oZXJlbmNlIHJhdGlvIG9uIHRoZSBmaXJzdCBub24tbGF0aW4gbGFuZ3VhZ2UgZGV0ZWN0ZWQgaWYgQU5ZLlxuICAgICAgICBOb3RpY2U6IFdpbGwgYmUgcmVtb3ZlZCBpbiAzLjBcbiAgICAgICAgIiIiXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXG4gICAgICAgICAgICAiY29oZXJlbmNlX25vbl9sYXRpbiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gMy4wIixcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gMC4wXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgd19jb3VudGVyKHNlbGYpIC0+IENvdW50ZXI6XG4gICAgICAgICIiIlxuICAgICAgICBXb3JkIGNvdW50ZXIgaW5zdGFuY2Ugb24gZGVjb2RlZCB0ZXh0LlxuICAgICAgICBOb3RpY2U6IFdpbGwgYmUgcmVtb3ZlZCBpbiAzLjBcbiAgICAgICAgIiIiXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXG4gICAgICAgICAgICAid19jb3VudGVyIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiAzLjAiLCBEZXByZWNhdGlvbldhcm5pbmdcbiAgICAgICAgKVxuXG4gICAgICAgIHN0cmluZ19wcmludGFibGVfb25seSA9IHN1YihOT1RfUFJJTlRBQkxFX1BBVFRFUk4sICIgIiwgc3RyKHNlbGYpLmxvd2VyKCkpXG5cbiAgICAgICAgcmV0dXJuIENvdW50ZXIoc3RyaW5nX3ByaW50YWJsZV9vbmx5LnNwbGl0KCkpXG5cbiAgICBkZWYgX19zdHJfXyhzZWxmKSAtPiBzdHI6XG4gICAgICAgICMgTGF6eSBTdHIgTG9hZGluZ1xuICAgICAgICBpZiBzZWxmLl9zdHJpbmcgaXMgTm9uZTpcbiAgICAgICAgICAgIHNlbGYuX3N0cmluZyA9IHN0cihzZWxmLl9wYXlsb2FkLCBzZWxmLl9lbmNvZGluZywgInN0cmljdCIpXG4gICAgICAgIHJldHVybiBzZWxmLl9zdHJpbmdcblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XG4gICAgICAgIHJldHVybiAiPENoYXJzZXRNYXRjaCBcJ3t9XCcgYnl0ZXMoe30pPiIuZm9ybWF0KHNlbGYuZW5jb2RpbmcsIHNlbGYuZmluZ2VycHJpbnQpXG5cbiAgICBkZWYgYWRkX3N1Ym1hdGNoKHNlbGYsIG90aGVyOiAiQ2hhcnNldE1hdGNoIikgLT4gTm9uZTpcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENoYXJzZXRNYXRjaCkgb3Igb3RoZXIgPT0gc2VsZjpcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlVuYWJsZSB0byBhZGQgaW5zdGFuY2UgPHt9PiBhcyBhIHN1Ym1hdGNoIG9mIGEgQ2hhcnNldE1hdGNoIi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgIG90aGVyLl9fY2xhc3NfX1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcblxuICAgICAgICBvdGhlci5fc3RyaW5nID0gTm9uZSAgIyBVbmxvYWQgUkFNIHVzYWdlOyBkaXJ0eSB0cmljay5cbiAgICAgICAgc2VsZi5fbGVhdmVzLmFwcGVuZChvdGhlcilcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBlbmNvZGluZyhzZWxmKSAtPiBzdHI6XG4gICAgICAgIHJldHVybiBzZWxmLl9lbmNvZGluZ1xuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGVuY29kaW5nX2FsaWFzZXMoc2VsZikgLT4gTGlzdFtzdHJdOlxuICAgICAgICAiIiJcbiAgICAgICAgRW5jb2RpbmcgbmFtZSBhcmUga25vd24gYnkgbWFueSBuYW1lLCB1c2luZyB0aGlzIGNvdWxkIGhlbHAgd2hlbiBzZWFyY2hpbmcgZm9yIElCTTg1NSB3aGVuIGl0XCdzIGxpc3RlZCBhcyBDUDg1NS5cbiAgICAgICAgIiIiXG4gICAgICAgIGFsc29fa25vd25fYXMgPSBbXSAgIyB0eXBlOiBMaXN0W3N0cl1cbiAgICAgICAgZm9yIHUsIHAgaW4gYWxpYXNlcy5pdGVtcygpOlxuICAgICAgICAgICAgaWYgc2VsZi5lbmNvZGluZyA9PSB1OlxuICAgICAgICAgICAgICAgIGFsc29fa25vd25fYXMuYXBwZW5kKHApXG4gICAgICAgICAgICBlbGlmIHNlbGYuZW5jb2RpbmcgPT0gcDpcbiAgICAgICAgICAgICAgICBhbHNvX2tub3duX2FzLmFwcGVuZCh1KVxuICAgICAgICByZXR1cm4gYWxzb19rbm93bl9hc1xuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGJvbShzZWxmKSAtPiBib29sOlxuICAgICAgICByZXR1cm4gc2VsZi5faGFzX3NpZ19vcl9ib21cblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBieXRlX29yZGVyX21hcmsoc2VsZikgLT4gYm9vbDpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2hhc19zaWdfb3JfYm9tXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgbGFuZ3VhZ2VzKHNlbGYpIC0+IExpc3Rbc3RyXTpcbiAgICAgICAgIiIiXG4gICAgICAgIFJldHVybiB0aGUgY29tcGxldGUgbGlzdCBvZiBwb3NzaWJsZSBsYW5ndWFnZXMgZm91bmQgaW4gZGVjb2RlZCBzZXF1ZW5jZS5cbiAgICAgICAgVXN1YWxseSBub3QgcmVhbGx5IHVzZWZ1bC4gUmV0dXJuZWQgbGlzdCBtYXkgYmUgZW1wdHkgZXZlbiBpZiBcJ2xhbmd1YWdlXCcgcHJvcGVydHkgcmV0dXJuIHNvbWV0aGluZyAhPSBcJ1Vua25vd25cJy5cbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiBbZVswXSBmb3IgZSBpbiBzZWxmLl9sYW5ndWFnZXNdXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgbGFuZ3VhZ2Uoc2VsZikgLT4gc3RyOlxuICAgICAgICAiIiJcbiAgICAgICAgTW9zdCBwcm9iYWJsZSBsYW5ndWFnZSBmb3VuZCBpbiBkZWNvZGVkIHNlcXVlbmNlLiBJZiBub25lIHdlcmUgZGV0ZWN0ZWQgb3IgaW5mZXJyZWQsIHRoZSBwcm9wZXJ0eSB3aWxsIHJldHVyblxuICAgICAgICAiVW5rbm93biIuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBub3Qgc2VsZi5fbGFuZ3VhZ2VzOlxuICAgICAgICAgICAgIyBUcnlpbmcgdG8gaW5mZXIgdGhlIGxhbmd1YWdlIGJhc2VkIG9uIHRoZSBnaXZlbiBlbmNvZGluZ1xuICAgICAgICAgICAgIyBJdHMgZWl0aGVyIEVuZ2xpc2ggb3Igd2Ugc2hvdWxkIG5vdCBwcm9ub3VuY2Ugb3Vyc2VsdmVzIGluIGNlcnRhaW4gY2FzZXMuXG4gICAgICAgICAgICBpZiAiYXNjaWkiIGluIHNlbGYuY291bGRfYmVfZnJvbV9jaGFyc2V0OlxuICAgICAgICAgICAgICAgIHJldHVybiAiRW5nbGlzaCJcblxuICAgICAgICAgICAgIyBkb2luZyBpdCB0aGVyZSB0byBhdm9pZCBjaXJjdWxhciBpbXBvcnRcbiAgICAgICAgICAgIGZyb20gY2hhcnNldF9ub3JtYWxpemVyLmNkIGltcG9ydCBlbmNvZGluZ19sYW5ndWFnZXMsIG1iX2VuY29kaW5nX2xhbmd1YWdlc1xuXG4gICAgICAgICAgICBsYW5ndWFnZXMgPSAoXG4gICAgICAgICAgICAgICAgbWJfZW5jb2RpbmdfbGFuZ3VhZ2VzKHNlbGYuZW5jb2RpbmcpXG4gICAgICAgICAgICAgICAgaWYgaXNfbXVsdGlfYnl0ZV9lbmNvZGluZyhzZWxmLmVuY29kaW5nKVxuICAgICAgICAgICAgICAgIGVsc2UgZW5jb2RpbmdfbGFuZ3VhZ2VzKHNlbGYuZW5jb2RpbmcpXG4gICAgICAgICAgICApXG5cbiAgICAgICAgICAgIGlmIGxlbihsYW5ndWFnZXMpID09IDAgb3IgIkxhdGluIEJhc2VkIiBpbiBsYW5ndWFnZXM6XG4gICAgICAgICAgICAgICAgcmV0dXJuICJVbmtub3duIlxuXG4gICAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2VzWzBdXG5cbiAgICAgICAgcmV0dXJuIHNlbGYuX2xhbmd1YWdlc1swXVswXVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGNoYW9zKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICByZXR1cm4gc2VsZi5fbWVhbl9tZXNzX3JhdGlvXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgY29oZXJlbmNlKHNlbGYpIC0+IGZsb2F0OlxuICAgICAgICBpZiBub3Qgc2VsZi5fbGFuZ3VhZ2VzOlxuICAgICAgICAgICAgcmV0dXJuIDAuMFxuICAgICAgICByZXR1cm4gc2VsZi5fbGFuZ3VhZ2VzWzBdWzFdXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgcGVyY2VudF9jaGFvcyhzZWxmKSAtPiBmbG9hdDpcbiAgICAgICAgcmV0dXJuIHJvdW5kKHNlbGYuY2hhb3MgKiAxMDAsIG5kaWdpdHM9MylcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBwZXJjZW50X2NvaGVyZW5jZShzZWxmKSAtPiBmbG9hdDpcbiAgICAgICAgcmV0dXJuIHJvdW5kKHNlbGYuY29oZXJlbmNlICogMTAwLCBuZGlnaXRzPTMpXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgcmF3KHNlbGYpIC0+IGJ5dGVzOlxuICAgICAgICAiIiJcbiAgICAgICAgT3JpZ2luYWwgdW50b3VjaGVkIGJ5dGVzLlxuICAgICAgICAiIiJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BheWxvYWRcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBzdWJtYXRjaChzZWxmKSAtPiBMaXN0WyJDaGFyc2V0TWF0Y2giXTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xlYXZlc1xuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGhhc19zdWJtYXRjaChzZWxmKSAtPiBib29sOlxuICAgICAgICByZXR1cm4gbGVuKHNlbGYuX2xlYXZlcykgPiAwXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgYWxwaGFiZXRzKHNlbGYpIC0+IExpc3Rbc3RyXTpcbiAgICAgICAgaWYgc2VsZi5fdW5pY29kZV9yYW5nZXMgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fdW5pY29kZV9yYW5nZXNcbiAgICAgICAgIyBsaXN0IGRldGVjdGVkIHJhbmdlc1xuICAgICAgICBkZXRlY3RlZF9yYW5nZXMgPSBbXG4gICAgICAgICAgICB1bmljb2RlX3JhbmdlKGNoYXIpIGZvciBjaGFyIGluIHN0cihzZWxmKVxuICAgICAgICBdICAjIHR5cGU6IExpc3RbT3B0aW9uYWxbc3RyXV1cbiAgICAgICAgIyBmaWx0ZXIgYW5kIHNvcnRcbiAgICAgICAgc2VsZi5fdW5pY29kZV9yYW5nZXMgPSBzb3J0ZWQobGlzdCh7ciBmb3IgciBpbiBkZXRlY3RlZF9yYW5nZXMgaWYgcn0pKVxuICAgICAgICByZXR1cm4gc2VsZi5fdW5pY29kZV9yYW5nZXNcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBjb3VsZF9iZV9mcm9tX2NoYXJzZXQoc2VsZikgLT4gTGlzdFtzdHJdOlxuICAgICAgICAiIiJcbiAgICAgICAgVGhlIGNvbXBsZXRlIGxpc3Qgb2YgZW5jb2RpbmcgdGhhdCBvdXRwdXQgdGhlIGV4YWN0IFNBTUUgc3RyIHJlc3VsdCBhbmQgdGhlcmVmb3JlIGNvdWxkIGJlIHRoZSBvcmlnaW5hdGluZ1xuICAgICAgICBlbmNvZGluZy5cbiAgICAgICAgVGhpcyBsaXN0IGRvZXMgaW5jbHVkZSB0aGUgZW5jb2RpbmcgYXZhaWxhYmxlIGluIHByb3BlcnR5IFwnZW5jb2RpbmdcJy5cbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiBbc2VsZi5fZW5jb2RpbmddICsgW20uZW5jb2RpbmcgZm9yIG0gaW4gc2VsZi5fbGVhdmVzXVxuXG4gICAgZGVmIGZpcnN0KHNlbGYpIC0+ICJDaGFyc2V0TWF0Y2giOlxuICAgICAgICAiIiJcbiAgICAgICAgS2VwdCBmb3IgQkMgcmVhc29ucy4gV2lsbCBiZSByZW1vdmVkIGluIDMuMC5cbiAgICAgICAgIiIiXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBkZWYgYmVzdChzZWxmKSAtPiAiQ2hhcnNldE1hdGNoIjpcbiAgICAgICAgIiIiXG4gICAgICAgIEtlcHQgZm9yIEJDIHJlYXNvbnMuIFdpbGwgYmUgcmVtb3ZlZCBpbiAzLjAuXG4gICAgICAgICIiIlxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIG91dHB1dChzZWxmLCBlbmNvZGluZzogc3RyID0gInV0Zl84IikgLT4gYnl0ZXM6XG4gICAgICAgICIiIlxuICAgICAgICBNZXRob2QgdG8gZ2V0IHJlLWVuY29kZWQgYnl0ZXMgcGF5bG9hZCB1c2luZyBnaXZlbiB0YXJnZXQgZW5jb2RpbmcuIERlZmF1bHQgdG8gVVRGLTguXG4gICAgICAgIEFueSBlcnJvcnMgd2lsbCBiZSBzaW1wbHkgaWdub3JlZCBieSB0aGUgZW5jb2RlciBOT1QgcmVwbGFjZWQuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBzZWxmLl9vdXRwdXRfZW5jb2RpbmcgaXMgTm9uZSBvciBzZWxmLl9vdXRwdXRfZW5jb2RpbmcgIT0gZW5jb2Rpbmc6XG4gICAgICAgICAgICBzZWxmLl9vdXRwdXRfZW5jb2RpbmcgPSBlbmNvZGluZ1xuICAgICAgICAgICAgc2VsZi5fb3V0cHV0X3BheWxvYWQgPSBzdHIoc2VsZikuZW5jb2RlKGVuY29kaW5nLCAicmVwbGFjZSIpXG5cbiAgICAgICAgcmV0dXJuIHNlbGYuX291dHB1dF9wYXlsb2FkICAjIHR5cGU6IGlnbm9yZVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGZpbmdlcnByaW50KHNlbGYpIC0+IHN0cjpcbiAgICAgICAgIiIiXG4gICAgICAgIFJldHJpZXZlIHRoZSB1bmlxdWUgU0hBMjU2IGNvbXB1dGVkIHVzaW5nIHRoZSB0cmFuc2Zvcm1lZCAocmUtZW5jb2RlZCkgcGF5bG9hZC4gTm90IHRoZSBvcmlnaW5hbCBvbmUuXG4gICAgICAgICIiIlxuICAgICAgICByZXR1cm4gc2hhMjU2KHNlbGYub3V0cHV0KCkpLmhleGRpZ2VzdCgpXG5cblxuY2xhc3MgQ2hhcnNldE1hdGNoZXM6XG4gICAgIiIiXG4gICAgQ29udGFpbmVyIHdpdGggZXZlcnkgQ2hhcnNldE1hdGNoIGl0ZW1zIG9yZGVyZWQgYnkgZGVmYXVsdCBmcm9tIG1vc3QgcHJvYmFibGUgdG8gdGhlIGxlc3Mgb25lLlxuICAgIEFjdCBsaWtlIGEgbGlzdChpdGVyYWJsZSkgYnV0IGRvZXMgbm90IGltcGxlbWVudHMgYWxsIHJlbGF0ZWQgbWV0aG9kcy5cbiAgICAiIiJcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCByZXN1bHRzOiBMaXN0W0NoYXJzZXRNYXRjaF0gPSBOb25lKTpcbiAgICAgICAgc2VsZi5fcmVzdWx0cyA9IHNvcnRlZChyZXN1bHRzKSBpZiByZXN1bHRzIGVsc2UgW10gICMgdHlwZTogTGlzdFtDaGFyc2V0TWF0Y2hdXG5cbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gSXRlcmF0b3JbQ2hhcnNldE1hdGNoXTpcbiAgICAgICAgeWllbGQgZnJvbSBzZWxmLl9yZXN1bHRzXG5cbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaXRlbTogVW5pb25baW50LCBzdHJdKSAtPiBDaGFyc2V0TWF0Y2g6XG4gICAgICAgICIiIlxuICAgICAgICBSZXRyaWV2ZSBhIHNpbmdsZSBpdGVtIGVpdGhlciBieSBpdHMgcG9zaXRpb24gb3IgZW5jb2RpbmcgbmFtZSAoYWxpYXMgbWF5IGJlIHVzZWQgaGVyZSkuXG4gICAgICAgIFJhaXNlIEtleUVycm9yIHVwb24gaW52YWxpZCBpbmRleCBvciBlbmNvZGluZyBub3QgcHJlc2VudCBpbiByZXN1bHRzLlxuICAgICAgICAiIiJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShpdGVtLCBpbnQpOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Jlc3VsdHNbaXRlbV1cbiAgICAgICAgaWYgaXNpbnN0YW5jZShpdGVtLCBzdHIpOlxuICAgICAgICAgICAgaXRlbSA9IGlhbmFfbmFtZShpdGVtLCBGYWxzZSlcbiAgICAgICAgICAgIGZvciByZXN1bHQgaW4gc2VsZi5fcmVzdWx0czpcbiAgICAgICAgICAgICAgICBpZiBpdGVtIGluIHJlc3VsdC5jb3VsZF9iZV9mcm9tX2NoYXJzZXQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgcmFpc2UgS2V5RXJyb3JcblxuICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDpcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9yZXN1bHRzKVxuXG4gICAgZGVmIF9fYm9vbF9fKHNlbGYpIC0+IGJvb2w6XG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5fcmVzdWx0cykgPiAwXG5cbiAgICBkZWYgYXBwZW5kKHNlbGYsIGl0ZW06IENoYXJzZXRNYXRjaCkgLT4gTm9uZTpcbiAgICAgICAgIiIiXG4gICAgICAgIEluc2VydCBhIHNpbmdsZSBtYXRjaC4gV2lsbCBiZSBpbnNlcnRlZCBhY2NvcmRpbmdseSB0byBwcmVzZXJ2ZSBzb3J0LlxuICAgICAgICBDYW4gYmUgaW5zZXJ0ZWQgYXMgYSBzdWJtYXRjaC5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGl0ZW0sIENoYXJzZXRNYXRjaCk6XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxuICAgICAgICAgICAgICAgICJDYW5ub3QgYXBwZW5kIGluc3RhbmNlIFwne31cJyB0byBDaGFyc2V0TWF0Y2hlcyIuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICBzdHIoaXRlbS5fX2NsYXNzX18pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAjIFdlIHNob3VsZCBkaXNhYmxlIHRoZSBzdWJtYXRjaCBmYWN0b3Jpbmcgd2hlbiB0aGUgaW5wdXQgZmlsZSBpcyB0b28gaGVhdnkgKGNvbnNlcnZlIFJBTSB1c2FnZSlcbiAgICAgICAgaWYgbGVuKGl0ZW0ucmF3KSA8PSBUT09fQklHX1NFUVVFTkNFOlxuICAgICAgICAgICAgZm9yIG1hdGNoIGluIHNlbGYuX3Jlc3VsdHM6XG4gICAgICAgICAgICAgICAgaWYgbWF0Y2guZmluZ2VycHJpbnQgPT0gaXRlbS5maW5nZXJwcmludCBhbmQgbWF0Y2guY2hhb3MgPT0gaXRlbS5jaGFvczpcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2guYWRkX3N1Ym1hdGNoKGl0ZW0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICBzZWxmLl9yZXN1bHRzLmFwcGVuZChpdGVtKVxuICAgICAgICBzZWxmLl9yZXN1bHRzID0gc29ydGVkKHNlbGYuX3Jlc3VsdHMpXG5cbiAgICBkZWYgYmVzdChzZWxmKSAtPiBPcHRpb25hbFsiQ2hhcnNldE1hdGNoIl06XG4gICAgICAgICIiIlxuICAgICAgICBTaW1wbHkgcmV0dXJuIHRoZSBmaXJzdCBtYXRjaC4gU3RyaWN0IGVxdWl2YWxlbnQgdG8gbWF0Y2hlc1swXS5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIG5vdCBzZWxmLl9yZXN1bHRzOlxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Jlc3VsdHNbMF1cblxuICAgIGRlZiBmaXJzdChzZWxmKSAtPiBPcHRpb25hbFsiQ2hhcnNldE1hdGNoIl06XG4gICAgICAgICIiIlxuICAgICAgICBSZWR1bmRhbnQgbWV0aG9kLCBjYWxsIHRoZSBtZXRob2QgYmVzdCgpLiBLZXB0IGZvciBCQyByZWFzb25zLlxuICAgICAgICAiIiJcbiAgICAgICAgcmV0dXJuIHNlbGYuYmVzdCgpXG5cblxuQ29oZXJlbmNlTWF0Y2ggPSBUdXBsZVtzdHIsIGZsb2F0XVxuQ29oZXJlbmNlTWF0Y2hlcyA9IExpc3RbQ29oZXJlbmNlTWF0Y2hdXG5cblxuY2xhc3MgQ2xpRGV0ZWN0aW9uUmVzdWx0OlxuICAgIGRlZiBfX2luaXRfXyhcbiAgICAgICAgc2VsZixcbiAgICAgICAgcGF0aDogc3RyLFxuICAgICAgICBlbmNvZGluZzogT3B0aW9uYWxbc3RyXSxcbiAgICAgICAgZW5jb2RpbmdfYWxpYXNlczogTGlzdFtzdHJdLFxuICAgICAgICBhbHRlcm5hdGl2ZV9lbmNvZGluZ3M6IExpc3Rbc3RyXSxcbiAgICAgICAgbGFuZ3VhZ2U6IHN0cixcbiAgICAgICAgYWxwaGFiZXRzOiBMaXN0W3N0cl0sXG4gICAgICAgIGhhc19zaWdfb3JfYm9tOiBib29sLFxuICAgICAgICBjaGFvczogZmxvYXQsXG4gICAgICAgIGNvaGVyZW5jZTogZmxvYXQsXG4gICAgICAgIHVuaWNvZGVfcGF0aDogT3B0aW9uYWxbc3RyXSxcbiAgICAgICAgaXNfcHJlZmVycmVkOiBib29sLFxuICAgICk6XG4gICAgICAgIHNlbGYucGF0aCA9IHBhdGggICMgdHlwZTogc3RyXG4gICAgICAgIHNlbGYudW5pY29kZV9wYXRoID0gdW5pY29kZV9wYXRoICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cbiAgICAgICAgc2VsZi5lbmNvZGluZyA9IGVuY29kaW5nICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cbiAgICAgICAgc2VsZi5lbmNvZGluZ19hbGlhc2VzID0gZW5jb2RpbmdfYWxpYXNlcyAgIyB0eXBlOiBMaXN0W3N0cl1cbiAgICAgICAgc2VsZi5hbHRlcm5hdGl2ZV9lbmNvZGluZ3MgPSBhbHRlcm5hdGl2ZV9lbmNvZGluZ3MgICMgdHlwZTogTGlzdFtzdHJdXG4gICAgICAgIHNlbGYubGFuZ3VhZ2UgPSBsYW5ndWFnZSAgIyB0eXBlOiBzdHJcbiAgICAgICAgc2VsZi5hbHBoYWJldHMgPSBhbHBoYWJldHMgICMgdHlwZTogTGlzdFtzdHJdXG4gICAgICAgIHNlbGYuaGFzX3NpZ19vcl9ib20gPSBoYXNfc2lnX29yX2JvbSAgIyB0eXBlOiBib29sXG4gICAgICAgIHNlbGYuY2hhb3MgPSBjaGFvcyAgIyB0eXBlOiBmbG9hdFxuICAgICAgICBzZWxmLmNvaGVyZW5jZSA9IGNvaGVyZW5jZSAgIyB0eXBlOiBmbG9hdFxuICAgICAgICBzZWxmLmlzX3ByZWZlcnJlZCA9IGlzX3ByZWZlcnJlZCAgIyB0eXBlOiBib29sXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgX19kaWN0X18oc2VsZikgLT4gRGljdFtzdHIsIEFueV06ICAjIHR5cGU6IGlnbm9yZVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgInBhdGgiOiBzZWxmLnBhdGgsXG4gICAgICAgICAgICAiZW5jb2RpbmciOiBzZWxmLmVuY29kaW5nLFxuICAgICAgICAgICAgImVuY29kaW5nX2FsaWFzZXMiOiBzZWxmLmVuY29kaW5nX2FsaWFzZXMsXG4gICAgICAgICAgICAiYWx0ZXJuYXRpdmVfZW5jb2RpbmdzIjogc2VsZi5hbHRlcm5hdGl2ZV9lbmNvZGluZ3MsXG4gICAgICAgICAgICAibGFuZ3VhZ2UiOiBzZWxmLmxhbmd1YWdlLFxuICAgICAgICAgICAgImFscGhhYmV0cyI6IHNlbGYuYWxwaGFiZXRzLFxuICAgICAgICAgICAgImhhc19zaWdfb3JfYm9tIjogc2VsZi5oYXNfc2lnX29yX2JvbSxcbiAgICAgICAgICAgICJjaGFvcyI6IHNlbGYuY2hhb3MsXG4gICAgICAgICAgICAiY29oZXJlbmNlIjogc2VsZi5jb2hlcmVuY2UsXG4gICAgICAgICAgICAidW5pY29kZV9wYXRoIjogc2VsZi51bmljb2RlX3BhdGgsXG4gICAgICAgICAgICAiaXNfcHJlZmVycmVkIjogc2VsZi5pc19wcmVmZXJyZWQsXG4gICAgICAgIH1cblxuICAgIGRlZiB0b19qc29uKHNlbGYpIC0+IHN0cjpcbiAgICAgICAgcmV0dXJuIGR1bXBzKHNlbGYuX19kaWN0X18sIGVuc3VyZV9hc2NpaT1UcnVlLCBpbmRlbnQ9NClcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjaGFyc2V0X25vcm1hbGl6ZXIvbGVnYWN5LnB5JywgYidpbXBvcnQgd2FybmluZ3NcbmZyb20gdHlwaW5nIGltcG9ydCBEaWN0LCBPcHRpb25hbCwgVW5pb25cblxuZnJvbSAuYXBpIGltcG9ydCBmcm9tX2J5dGVzLCBmcm9tX2ZwLCBmcm9tX3BhdGgsIG5vcm1hbGl6ZVxuZnJvbSAuY29uc3RhbnQgaW1wb3J0IENIQVJERVRfQ09SUkVTUE9OREVOQ0VcbmZyb20gLm1vZGVscyBpbXBvcnQgQ2hhcnNldE1hdGNoLCBDaGFyc2V0TWF0Y2hlc1xuXG5cbmRlZiBkZXRlY3QoYnl0ZV9zdHI6IGJ5dGVzKSAtPiBEaWN0W3N0ciwgT3B0aW9uYWxbVW5pb25bc3RyLCBmbG9hdF1dXTpcbiAgICAiIiJcbiAgICBjaGFyZGV0IGxlZ2FjeSBtZXRob2RcbiAgICBEZXRlY3QgdGhlIGVuY29kaW5nIG9mIHRoZSBnaXZlbiBieXRlIHN0cmluZy4gSXQgc2hvdWxkIGJlIG1vc3RseSBiYWNrd2FyZC1jb21wYXRpYmxlLlxuICAgIEVuY29kaW5nIG5hbWUgd2lsbCBtYXRjaCBDaGFyZGV0IG93biB3cml0aW5nIHdoZW5ldmVyIHBvc3NpYmxlLiAoTm90IG9uIGVuY29kaW5nIG5hbWUgdW5zdXBwb3J0ZWQgYnkgaXQpXG4gICAgVGhpcyBmdW5jdGlvbiBpcyBkZXByZWNhdGVkIGFuZCBzaG91bGQgYmUgdXNlZCB0byBtaWdyYXRlIHlvdXIgcHJvamVjdCBlYXNpbHksIGNvbnN1bHQgdGhlIGRvY3VtZW50YXRpb24gZm9yXG4gICAgZnVydGhlciBpbmZvcm1hdGlvbi4gTm90IHBsYW5uZWQgZm9yIHJlbW92YWwuXG5cbiAgICA6cGFyYW0gYnl0ZV9zdHI6ICAgICBUaGUgYnl0ZSBzZXF1ZW5jZSB0byBleGFtaW5lLlxuICAgICIiIlxuICAgIGlmIG5vdCBpc2luc3RhbmNlKGJ5dGVfc3RyLCAoYnl0ZWFycmF5LCBieXRlcykpOlxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoICAjIHByYWdtYTogbm9jb3ZlclxuICAgICAgICAgICAgIkV4cGVjdGVkIG9iamVjdCBvZiB0eXBlIGJ5dGVzIG9yIGJ5dGVhcnJheSwgZ290OiAiXG4gICAgICAgICAgICAiezB9Ii5mb3JtYXQodHlwZShieXRlX3N0cikpXG4gICAgICAgIClcblxuICAgIGlmIGlzaW5zdGFuY2UoYnl0ZV9zdHIsIGJ5dGVhcnJheSk6XG4gICAgICAgIGJ5dGVfc3RyID0gYnl0ZXMoYnl0ZV9zdHIpXG5cbiAgICByID0gZnJvbV9ieXRlcyhieXRlX3N0cikuYmVzdCgpXG5cbiAgICBlbmNvZGluZyA9IHIuZW5jb2RpbmcgaWYgciBpcyBub3QgTm9uZSBlbHNlIE5vbmVcbiAgICBsYW5ndWFnZSA9IHIubGFuZ3VhZ2UgaWYgciBpcyBub3QgTm9uZSBhbmQgci5sYW5ndWFnZSAhPSAiVW5rbm93biIgZWxzZSAiIlxuICAgIGNvbmZpZGVuY2UgPSAxLjAgLSByLmNoYW9zIGlmIHIgaXMgbm90IE5vbmUgZWxzZSBOb25lXG5cbiAgICAjIE5vdGU6IENoYXJzZXROb3JtYWxpemVyIGRvZXMgbm90IHJldHVybiBcJ1VURi04LVNJR1wnIGFzIHRoZSBzaWcgZ2V0IHN0cmlwcGVkIGluIHRoZSBkZXRlY3Rpb24vbm9ybWFsaXphdGlvbiBwcm9jZXNzXG4gICAgIyBidXQgY2hhcmRldCBkb2VzIHJldHVybiBcJ3V0Zi04LXNpZ1wnIGFuZCBpdCBpcyBhIHZhbGlkIGNvZGVjIG5hbWUuXG4gICAgaWYgciBpcyBub3QgTm9uZSBhbmQgZW5jb2RpbmcgPT0gInV0Zl84IiBhbmQgci5ib206XG4gICAgICAgIGVuY29kaW5nICs9ICJfc2lnIlxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgImVuY29kaW5nIjogZW5jb2RpbmdcbiAgICAgICAgaWYgZW5jb2Rpbmcgbm90IGluIENIQVJERVRfQ09SUkVTUE9OREVOQ0VcbiAgICAgICAgZWxzZSBDSEFSREVUX0NPUlJFU1BPTkRFTkNFW2VuY29kaW5nXSxcbiAgICAgICAgImxhbmd1YWdlIjogbGFuZ3VhZ2UsXG4gICAgICAgICJjb25maWRlbmNlIjogY29uZmlkZW5jZSxcbiAgICB9XG5cblxuY2xhc3MgQ2hhcnNldE5vcm1hbGl6ZXJNYXRjaChDaGFyc2V0TWF0Y2gpOlxuICAgIHBhc3NcblxuXG5jbGFzcyBDaGFyc2V0Tm9ybWFsaXplck1hdGNoZXMoQ2hhcnNldE1hdGNoZXMpOlxuICAgIEBzdGF0aWNtZXRob2RcbiAgICBkZWYgZnJvbV9mcCgqYXJncywgKiprd2FyZ3MpOiAgIyB0eXBlOiBpZ25vcmVcbiAgICAgICAgd2FybmluZ3Mud2FybiggICMgcHJhZ21hOiBub2NvdmVyXG4gICAgICAgICAgICAic3RhdGljbWV0aG9kIGZyb21fZnAsIGZyb21fYnl0ZXMsIGZyb21fcGF0aCBhbmQgbm9ybWFsaXplIGFyZSBkZXByZWNhdGVkICJcbiAgICAgICAgICAgICJhbmQgc2NoZWR1bGVkIHRvIGJlIHJlbW92ZWQgaW4gMy4wIixcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gZnJvbV9mcCgqYXJncywgKiprd2FyZ3MpICAjIHByYWdtYTogbm9jb3ZlclxuXG4gICAgQHN0YXRpY21ldGhvZFxuICAgIGRlZiBmcm9tX2J5dGVzKCphcmdzLCAqKmt3YXJncyk6ICAjIHR5cGU6IGlnbm9yZVxuICAgICAgICB3YXJuaW5ncy53YXJuKCAgIyBwcmFnbWE6IG5vY292ZXJcbiAgICAgICAgICAgICJzdGF0aWNtZXRob2QgZnJvbV9mcCwgZnJvbV9ieXRlcywgZnJvbV9wYXRoIGFuZCBub3JtYWxpemUgYXJlIGRlcHJlY2F0ZWQgIlxuICAgICAgICAgICAgImFuZCBzY2hlZHVsZWQgdG8gYmUgcmVtb3ZlZCBpbiAzLjAiLFxuICAgICAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nLFxuICAgICAgICApXG4gICAgICAgIHJldHVybiBmcm9tX2J5dGVzKCphcmdzLCAqKmt3YXJncykgICMgcHJhZ21hOiBub2NvdmVyXG5cbiAgICBAc3RhdGljbWV0aG9kXG4gICAgZGVmIGZyb21fcGF0aCgqYXJncywgKiprd2FyZ3MpOiAgIyB0eXBlOiBpZ25vcmVcbiAgICAgICAgd2FybmluZ3Mud2FybiggICMgcHJhZ21hOiBub2NvdmVyXG4gICAgICAgICAgICAic3RhdGljbWV0aG9kIGZyb21fZnAsIGZyb21fYnl0ZXMsIGZyb21fcGF0aCBhbmQgbm9ybWFsaXplIGFyZSBkZXByZWNhdGVkICJcbiAgICAgICAgICAgICJhbmQgc2NoZWR1bGVkIHRvIGJlIHJlbW92ZWQgaW4gMy4wIixcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gZnJvbV9wYXRoKCphcmdzLCAqKmt3YXJncykgICMgcHJhZ21hOiBub2NvdmVyXG5cbiAgICBAc3RhdGljbWV0aG9kXG4gICAgZGVmIG5vcm1hbGl6ZSgqYXJncywgKiprd2FyZ3MpOiAgIyB0eXBlOiBpZ25vcmVcbiAgICAgICAgd2FybmluZ3Mud2FybiggICMgcHJhZ21hOiBub2NvdmVyXG4gICAgICAgICAgICAic3RhdGljbWV0aG9kIGZyb21fZnAsIGZyb21fYnl0ZXMsIGZyb21fcGF0aCBhbmQgbm9ybWFsaXplIGFyZSBkZXByZWNhdGVkICJcbiAgICAgICAgICAgICJhbmQgc2NoZWR1bGVkIHRvIGJlIHJlbW92ZWQgaW4gMy4wIixcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gbm9ybWFsaXplKCphcmdzLCAqKmt3YXJncykgICMgcHJhZ21hOiBub2NvdmVyXG5cblxuY2xhc3MgQ2hhcnNldERldGVjdG9yKENoYXJzZXROb3JtYWxpemVyTWF0Y2hlcyk6XG4gICAgcGFzc1xuXG5cbmNsYXNzIENoYXJzZXREb2N0b3IoQ2hhcnNldE5vcm1hbGl6ZXJNYXRjaGVzKTpcbiAgICBwYXNzXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY2hhcnNldF9ub3JtYWxpemVyL3ZlcnNpb24ucHknLCBiJyIiIlxuRXhwb3NlIHZlcnNpb25cbiIiIlxuXG5fX3ZlcnNpb25fXyA9ICIyLjAuMTIiXG5WRVJTSU9OID0gX192ZXJzaW9uX18uc3BsaXQoIi4iKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvd2ViX2V4Y2VwdGlvbnMucHknLCBiJ2ltcG9ydCB3YXJuaW5nc1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBEaWN0LCBJdGVyYWJsZSwgTGlzdCwgT3B0aW9uYWwsIFNldCAgIyBub3FhXHJcblxyXG5mcm9tIHlhcmwgaW1wb3J0IFVSTFxyXG5cclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IExvb3NlSGVhZGVycywgU3RyT3JVUkxcclxuZnJvbSAud2ViX3Jlc3BvbnNlIGltcG9ydCBSZXNwb25zZVxyXG5cclxuX19hbGxfXyA9IChcclxuICAgICJIVFRQRXhjZXB0aW9uIixcclxuICAgICJIVFRQRXJyb3IiLFxyXG4gICAgIkhUVFBSZWRpcmVjdGlvbiIsXHJcbiAgICAiSFRUUFN1Y2Nlc3NmdWwiLFxyXG4gICAgIkhUVFBPayIsXHJcbiAgICAiSFRUUENyZWF0ZWQiLFxyXG4gICAgIkhUVFBBY2NlcHRlZCIsXHJcbiAgICAiSFRUUE5vbkF1dGhvcml0YXRpdmVJbmZvcm1hdGlvbiIsXHJcbiAgICAiSFRUUE5vQ29udGVudCIsXHJcbiAgICAiSFRUUFJlc2V0Q29udGVudCIsXHJcbiAgICAiSFRUUFBhcnRpYWxDb250ZW50IixcclxuICAgICJIVFRQTXVsdGlwbGVDaG9pY2VzIixcclxuICAgICJIVFRQTW92ZWRQZXJtYW5lbnRseSIsXHJcbiAgICAiSFRUUEZvdW5kIixcclxuICAgICJIVFRQU2VlT3RoZXIiLFxyXG4gICAgIkhUVFBOb3RNb2RpZmllZCIsXHJcbiAgICAiSFRUUFVzZVByb3h5IixcclxuICAgICJIVFRQVGVtcG9yYXJ5UmVkaXJlY3QiLFxyXG4gICAgIkhUVFBQZXJtYW5lbnRSZWRpcmVjdCIsXHJcbiAgICAiSFRUUENsaWVudEVycm9yIixcclxuICAgICJIVFRQQmFkUmVxdWVzdCIsXHJcbiAgICAiSFRUUFVuYXV0aG9yaXplZCIsXHJcbiAgICAiSFRUUFBheW1lbnRSZXF1aXJlZCIsXHJcbiAgICAiSFRUUEZvcmJpZGRlbiIsXHJcbiAgICAiSFRUUE5vdEZvdW5kIixcclxuICAgICJIVFRQTWV0aG9kTm90QWxsb3dlZCIsXHJcbiAgICAiSFRUUE5vdEFjY2VwdGFibGUiLFxyXG4gICAgIkhUVFBQcm94eUF1dGhlbnRpY2F0aW9uUmVxdWlyZWQiLFxyXG4gICAgIkhUVFBSZXF1ZXN0VGltZW91dCIsXHJcbiAgICAiSFRUUENvbmZsaWN0IixcclxuICAgICJIVFRQR29uZSIsXHJcbiAgICAiSFRUUExlbmd0aFJlcXVpcmVkIixcclxuICAgICJIVFRQUHJlY29uZGl0aW9uRmFpbGVkIixcclxuICAgICJIVFRQUmVxdWVzdEVudGl0eVRvb0xhcmdlIixcclxuICAgICJIVFRQUmVxdWVzdFVSSVRvb0xvbmciLFxyXG4gICAgIkhUVFBVbnN1cHBvcnRlZE1lZGlhVHlwZSIsXHJcbiAgICAiSFRUUFJlcXVlc3RSYW5nZU5vdFNhdGlzZmlhYmxlIixcclxuICAgICJIVFRQRXhwZWN0YXRpb25GYWlsZWQiLFxyXG4gICAgIkhUVFBNaXNkaXJlY3RlZFJlcXVlc3QiLFxyXG4gICAgIkhUVFBVbnByb2Nlc3NhYmxlRW50aXR5IixcclxuICAgICJIVFRQRmFpbGVkRGVwZW5kZW5jeSIsXHJcbiAgICAiSFRUUFVwZ3JhZGVSZXF1aXJlZCIsXHJcbiAgICAiSFRUUFByZWNvbmRpdGlvblJlcXVpcmVkIixcclxuICAgICJIVFRQVG9vTWFueVJlcXVlc3RzIixcclxuICAgICJIVFRQUmVxdWVzdEhlYWRlckZpZWxkc1Rvb0xhcmdlIixcclxuICAgICJIVFRQVW5hdmFpbGFibGVGb3JMZWdhbFJlYXNvbnMiLFxyXG4gICAgIkhUVFBTZXJ2ZXJFcnJvciIsXHJcbiAgICAiSFRUUEludGVybmFsU2VydmVyRXJyb3IiLFxyXG4gICAgIkhUVFBOb3RJbXBsZW1lbnRlZCIsXHJcbiAgICAiSFRUUEJhZEdhdGV3YXkiLFxyXG4gICAgIkhUVFBTZXJ2aWNlVW5hdmFpbGFibGUiLFxyXG4gICAgIkhUVFBHYXRld2F5VGltZW91dCIsXHJcbiAgICAiSFRUUFZlcnNpb25Ob3RTdXBwb3J0ZWQiLFxyXG4gICAgIkhUVFBWYXJpYW50QWxzb05lZ290aWF0ZXMiLFxyXG4gICAgIkhUVFBJbnN1ZmZpY2llbnRTdG9yYWdlIixcclxuICAgICJIVFRQTm90RXh0ZW5kZWQiLFxyXG4gICAgIkhUVFBOZXR3b3JrQXV0aGVudGljYXRpb25SZXF1aXJlZCIsXHJcbilcclxuXHJcblxyXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuIyBIVFRQIEV4Y2VwdGlvbnNcclxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG5cclxuY2xhc3MgSFRUUEV4Y2VwdGlvbihSZXNwb25zZSwgRXhjZXB0aW9uKTpcclxuXHJcbiAgICAjIFlvdSBzaG91bGQgc2V0IGluIHN1YmNsYXNzZXM6XHJcbiAgICAjIHN0YXR1cyA9IDIwMFxyXG5cclxuICAgIHN0YXR1c19jb2RlID0gLTFcclxuICAgIGVtcHR5X2JvZHkgPSBGYWxzZVxyXG5cclxuICAgIF9faHR0cF9leGNlcHRpb25fXyA9IFRydWVcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgICAgIHJlYXNvbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgYm9keTogQW55ID0gTm9uZSxcclxuICAgICAgICB0ZXh0OiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBjb250ZW50X3R5cGU6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGJvZHkgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAiYm9keSBhcmd1bWVudCBpcyBkZXByZWNhdGVkIGZvciBodHRwIHdlYiBleGNlcHRpb25zIixcclxuICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIFJlc3BvbnNlLl9faW5pdF9fKFxyXG4gICAgICAgICAgICBzZWxmLFxyXG4gICAgICAgICAgICBzdGF0dXM9c2VsZi5zdGF0dXNfY29kZSxcclxuICAgICAgICAgICAgaGVhZGVycz1oZWFkZXJzLFxyXG4gICAgICAgICAgICByZWFzb249cmVhc29uLFxyXG4gICAgICAgICAgICBib2R5PWJvZHksXHJcbiAgICAgICAgICAgIHRleHQ9dGV4dCxcclxuICAgICAgICAgICAgY29udGVudF90eXBlPWNvbnRlbnRfdHlwZSxcclxuICAgICAgICApXHJcbiAgICAgICAgRXhjZXB0aW9uLl9faW5pdF9fKHNlbGYsIHNlbGYucmVhc29uKVxyXG4gICAgICAgIGlmIHNlbGYuYm9keSBpcyBOb25lIGFuZCBub3Qgc2VsZi5lbXB0eV9ib2R5OlxyXG4gICAgICAgICAgICBzZWxmLnRleHQgPSBmIntzZWxmLnN0YXR1c306IHtzZWxmLnJlYXNvbn0iXHJcblxyXG4gICAgZGVmIF9fYm9vbF9fKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcblxyXG5jbGFzcyBIVFRQRXJyb3IoSFRUUEV4Y2VwdGlvbik6XHJcbiAgICAiIiJCYXNlIGNsYXNzIGZvciBleGNlcHRpb25zIHdpdGggc3RhdHVzIGNvZGVzIGluIHRoZSA0MDBzIGFuZCA1MDBzLiIiIlxyXG5cclxuXHJcbmNsYXNzIEhUVFBSZWRpcmVjdGlvbihIVFRQRXhjZXB0aW9uKTpcclxuICAgICIiIkJhc2UgY2xhc3MgZm9yIGV4Y2VwdGlvbnMgd2l0aCBzdGF0dXMgY29kZXMgaW4gdGhlIDMwMHMuIiIiXHJcblxyXG5cclxuY2xhc3MgSFRUUFN1Y2Nlc3NmdWwoSFRUUEV4Y2VwdGlvbik6XHJcbiAgICAiIiJCYXNlIGNsYXNzIGZvciBleGNlcHRpb25zIHdpdGggc3RhdHVzIGNvZGVzIGluIHRoZSAyMDBzLiIiIlxyXG5cclxuXHJcbmNsYXNzIEhUVFBPayhIVFRQU3VjY2Vzc2Z1bCk6XHJcbiAgICBzdGF0dXNfY29kZSA9IDIwMFxyXG5cclxuXHJcbmNsYXNzIEhUVFBDcmVhdGVkKEhUVFBTdWNjZXNzZnVsKTpcclxuICAgIHN0YXR1c19jb2RlID0gMjAxXHJcblxyXG5cclxuY2xhc3MgSFRUUEFjY2VwdGVkKEhUVFBTdWNjZXNzZnVsKTpcclxuICAgIHN0YXR1c19jb2RlID0gMjAyXHJcblxyXG5cclxuY2xhc3MgSFRUUE5vbkF1dGhvcml0YXRpdmVJbmZvcm1hdGlvbihIVFRQU3VjY2Vzc2Z1bCk6XHJcbiAgICBzdGF0dXNfY29kZSA9IDIwM1xyXG5cclxuXHJcbmNsYXNzIEhUVFBOb0NvbnRlbnQoSFRUUFN1Y2Nlc3NmdWwpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSAyMDRcclxuICAgIGVtcHR5X2JvZHkgPSBUcnVlXHJcblxyXG5cclxuY2xhc3MgSFRUUFJlc2V0Q29udGVudChIVFRQU3VjY2Vzc2Z1bCk6XHJcbiAgICBzdGF0dXNfY29kZSA9IDIwNVxyXG4gICAgZW1wdHlfYm9keSA9IFRydWVcclxuXHJcblxyXG5jbGFzcyBIVFRQUGFydGlhbENvbnRlbnQoSFRUUFN1Y2Nlc3NmdWwpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSAyMDZcclxuXHJcblxyXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuIyAzeHggcmVkaXJlY3Rpb25cclxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG5cclxuY2xhc3MgX0hUVFBNb3ZlKEhUVFBSZWRpcmVjdGlvbik6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBsb2NhdGlvbjogU3RyT3JVUkwsXHJcbiAgICAgICAgKixcclxuICAgICAgICBoZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICAgICByZWFzb246IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGJvZHk6IEFueSA9IE5vbmUsXHJcbiAgICAgICAgdGV4dDogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgY29udGVudF90eXBlOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgbG9jYXRpb246XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkhUVFAgcmVkaXJlY3RzIG5lZWQgYSBsb2NhdGlvbiB0byByZWRpcmVjdCB0by4iKVxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oXHJcbiAgICAgICAgICAgIGhlYWRlcnM9aGVhZGVycyxcclxuICAgICAgICAgICAgcmVhc29uPXJlYXNvbixcclxuICAgICAgICAgICAgYm9keT1ib2R5LFxyXG4gICAgICAgICAgICB0ZXh0PXRleHQsXHJcbiAgICAgICAgICAgIGNvbnRlbnRfdHlwZT1jb250ZW50X3R5cGUsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuaGVhZGVyc1siTG9jYXRpb24iXSA9IHN0cihVUkwobG9jYXRpb24pKVxyXG4gICAgICAgIHNlbGYubG9jYXRpb24gPSBsb2NhdGlvblxyXG5cclxuXHJcbmNsYXNzIEhUVFBNdWx0aXBsZUNob2ljZXMoX0hUVFBNb3ZlKTpcclxuICAgIHN0YXR1c19jb2RlID0gMzAwXHJcblxyXG5cclxuY2xhc3MgSFRUUE1vdmVkUGVybWFuZW50bHkoX0hUVFBNb3ZlKTpcclxuICAgIHN0YXR1c19jb2RlID0gMzAxXHJcblxyXG5cclxuY2xhc3MgSFRUUEZvdW5kKF9IVFRQTW92ZSk6XHJcbiAgICBzdGF0dXNfY29kZSA9IDMwMlxyXG5cclxuXHJcbiMgVGhpcyBvbmUgaXMgc2FmZSBhZnRlciBhIFBPU1QgKHRoZSByZWRpcmVjdGVkIGxvY2F0aW9uIHdpbGwgYmVcclxuIyByZXRyaWV2ZWQgd2l0aCBHRVQpOlxyXG5jbGFzcyBIVFRQU2VlT3RoZXIoX0hUVFBNb3ZlKTpcclxuICAgIHN0YXR1c19jb2RlID0gMzAzXHJcblxyXG5cclxuY2xhc3MgSFRUUE5vdE1vZGlmaWVkKEhUVFBSZWRpcmVjdGlvbik6XHJcbiAgICAjIEZJWE1FOiB0aGlzIHNob3VsZCBpbmNsdWRlIGEgZGF0ZSBvciBldGFnIGhlYWRlclxyXG4gICAgc3RhdHVzX2NvZGUgPSAzMDRcclxuICAgIGVtcHR5X2JvZHkgPSBUcnVlXHJcblxyXG5cclxuY2xhc3MgSFRUUFVzZVByb3h5KF9IVFRQTW92ZSk6XHJcbiAgICAjIE5vdCBhIG1vdmUsIGJ1dCBsb29rcyBhIGxpdHRsZSBsaWtlIG9uZVxyXG4gICAgc3RhdHVzX2NvZGUgPSAzMDVcclxuXHJcblxyXG5jbGFzcyBIVFRQVGVtcG9yYXJ5UmVkaXJlY3QoX0hUVFBNb3ZlKTpcclxuICAgIHN0YXR1c19jb2RlID0gMzA3XHJcblxyXG5cclxuY2xhc3MgSFRUUFBlcm1hbmVudFJlZGlyZWN0KF9IVFRQTW92ZSk6XHJcbiAgICBzdGF0dXNfY29kZSA9IDMwOFxyXG5cclxuXHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4jIDR4eCBjbGllbnQgZXJyb3JcclxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG5cclxuY2xhc3MgSFRUUENsaWVudEVycm9yKEhUVFBFcnJvcik6XHJcbiAgICBwYXNzXHJcblxyXG5cclxuY2xhc3MgSFRUUEJhZFJlcXVlc3QoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDAwXHJcblxyXG5cclxuY2xhc3MgSFRUUFVuYXV0aG9yaXplZChIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MDFcclxuXHJcblxyXG5jbGFzcyBIVFRQUGF5bWVudFJlcXVpcmVkKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQwMlxyXG5cclxuXHJcbmNsYXNzIEhUVFBGb3JiaWRkZW4oSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDAzXHJcblxyXG5cclxuY2xhc3MgSFRUUE5vdEZvdW5kKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQwNFxyXG5cclxuXHJcbmNsYXNzIEhUVFBNZXRob2ROb3RBbGxvd2VkKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQwNVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1ldGhvZDogc3RyLFxyXG4gICAgICAgIGFsbG93ZWRfbWV0aG9kczogSXRlcmFibGVbc3RyXSxcclxuICAgICAgICAqLFxyXG4gICAgICAgIGhlYWRlcnM6IE9wdGlvbmFsW0xvb3NlSGVhZGVyc10gPSBOb25lLFxyXG4gICAgICAgIHJlYXNvbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgYm9keTogQW55ID0gTm9uZSxcclxuICAgICAgICB0ZXh0OiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBjb250ZW50X3R5cGU6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGFsbG93ID0gIiwiLmpvaW4oc29ydGVkKGFsbG93ZWRfbWV0aG9kcykpXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhcclxuICAgICAgICAgICAgaGVhZGVycz1oZWFkZXJzLFxyXG4gICAgICAgICAgICByZWFzb249cmVhc29uLFxyXG4gICAgICAgICAgICBib2R5PWJvZHksXHJcbiAgICAgICAgICAgIHRleHQ9dGV4dCxcclxuICAgICAgICAgICAgY29udGVudF90eXBlPWNvbnRlbnRfdHlwZSxcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5oZWFkZXJzWyJBbGxvdyJdID0gYWxsb3dcclxuICAgICAgICBzZWxmLmFsbG93ZWRfbWV0aG9kcyA9IHNldChhbGxvd2VkX21ldGhvZHMpICAjIHR5cGU6IFNldFtzdHJdXHJcbiAgICAgICAgc2VsZi5tZXRob2QgPSBtZXRob2QudXBwZXIoKVxyXG5cclxuXHJcbmNsYXNzIEhUVFBOb3RBY2NlcHRhYmxlKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQwNlxyXG5cclxuXHJcbmNsYXNzIEhUVFBQcm94eUF1dGhlbnRpY2F0aW9uUmVxdWlyZWQoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDA3XHJcblxyXG5cclxuY2xhc3MgSFRUUFJlcXVlc3RUaW1lb3V0KEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQwOFxyXG5cclxuXHJcbmNsYXNzIEhUVFBDb25mbGljdChIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MDlcclxuXHJcblxyXG5jbGFzcyBIVFRQR29uZShIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MTBcclxuXHJcblxyXG5jbGFzcyBIVFRQTGVuZ3RoUmVxdWlyZWQoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDExXHJcblxyXG5cclxuY2xhc3MgSFRUUFByZWNvbmRpdGlvbkZhaWxlZChIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MTJcclxuXHJcblxyXG5jbGFzcyBIVFRQUmVxdWVzdEVudGl0eVRvb0xhcmdlKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQxM1xyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtYXhfc2l6ZTogZmxvYXQsIGFjdHVhbF9zaXplOiBmbG9hdCwgKiprd2FyZ3M6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBrd2FyZ3Muc2V0ZGVmYXVsdChcclxuICAgICAgICAgICAgInRleHQiLFxyXG4gICAgICAgICAgICAiTWF4aW11bSByZXF1ZXN0IGJvZHkgc2l6ZSB7fSBleGNlZWRlZCwgIlxyXG4gICAgICAgICAgICAiYWN0dWFsIGJvZHkgc2l6ZSB7fSIuZm9ybWF0KG1heF9zaXplLCBhY3R1YWxfc2l6ZSksXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oKiprd2FyZ3MpXHJcblxyXG5cclxuY2xhc3MgSFRUUFJlcXVlc3RVUklUb29Mb25nKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQxNFxyXG5cclxuXHJcbmNsYXNzIEhUVFBVbnN1cHBvcnRlZE1lZGlhVHlwZShIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MTVcclxuXHJcblxyXG5jbGFzcyBIVFRQUmVxdWVzdFJhbmdlTm90U2F0aXNmaWFibGUoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDE2XHJcblxyXG5cclxuY2xhc3MgSFRUUEV4cGVjdGF0aW9uRmFpbGVkKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQxN1xyXG5cclxuXHJcbmNsYXNzIEhUVFBNaXNkaXJlY3RlZFJlcXVlc3QoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDIxXHJcblxyXG5cclxuY2xhc3MgSFRUUFVucHJvY2Vzc2FibGVFbnRpdHkoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDIyXHJcblxyXG5cclxuY2xhc3MgSFRUUEZhaWxlZERlcGVuZGVuY3koSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDI0XHJcblxyXG5cclxuY2xhc3MgSFRUUFVwZ3JhZGVSZXF1aXJlZChIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MjZcclxuXHJcblxyXG5jbGFzcyBIVFRQUHJlY29uZGl0aW9uUmVxdWlyZWQoSFRUUENsaWVudEVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNDI4XHJcblxyXG5cclxuY2xhc3MgSFRUUFRvb01hbnlSZXF1ZXN0cyhIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0MjlcclxuXHJcblxyXG5jbGFzcyBIVFRQUmVxdWVzdEhlYWRlckZpZWxkc1Rvb0xhcmdlKEhUVFBDbGllbnRFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDQzMVxyXG5cclxuXHJcbmNsYXNzIEhUVFBVbmF2YWlsYWJsZUZvckxlZ2FsUmVhc29ucyhIVFRQQ2xpZW50RXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA0NTFcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBsaW5rOiBzdHIsXHJcbiAgICAgICAgKixcclxuICAgICAgICBoZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICAgICByZWFzb246IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGJvZHk6IEFueSA9IE5vbmUsXHJcbiAgICAgICAgdGV4dDogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgY29udGVudF90eXBlOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKFxyXG4gICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsXHJcbiAgICAgICAgICAgIHJlYXNvbj1yZWFzb24sXHJcbiAgICAgICAgICAgIGJvZHk9Ym9keSxcclxuICAgICAgICAgICAgdGV4dD10ZXh0LFxyXG4gICAgICAgICAgICBjb250ZW50X3R5cGU9Y29udGVudF90eXBlLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLmhlYWRlcnNbIkxpbmsiXSA9IFwnPCVzPjsgcmVsPSJibG9ja2VkLWJ5IlwnICUgbGlua1xyXG4gICAgICAgIHNlbGYubGluayA9IGxpbmtcclxuXHJcblxyXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuIyA1eHggU2VydmVyIEVycm9yXHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4jICBSZXNwb25zZSBzdGF0dXMgY29kZXMgYmVnaW5uaW5nIHdpdGggdGhlIGRpZ2l0ICI1IiBpbmRpY2F0ZSBjYXNlcyBpblxyXG4jICB3aGljaCB0aGUgc2VydmVyIGlzIGF3YXJlIHRoYXQgaXQgaGFzIGVycmVkIG9yIGlzIGluY2FwYWJsZSBvZlxyXG4jICBwZXJmb3JtaW5nIHRoZSByZXF1ZXN0LiBFeGNlcHQgd2hlbiByZXNwb25kaW5nIHRvIGEgSEVBRCByZXF1ZXN0LCB0aGVcclxuIyAgc2VydmVyIFNIT1VMRCBpbmNsdWRlIGFuIGVudGl0eSBjb250YWluaW5nIGFuIGV4cGxhbmF0aW9uIG9mIHRoZSBlcnJvclxyXG4jICBzaXR1YXRpb24sIGFuZCB3aGV0aGVyIGl0IGlzIGEgdGVtcG9yYXJ5IG9yIHBlcm1hbmVudCBjb25kaXRpb24uIFVzZXJcclxuIyAgYWdlbnRzIFNIT1VMRCBkaXNwbGF5IGFueSBpbmNsdWRlZCBlbnRpdHkgdG8gdGhlIHVzZXIuIFRoZXNlIHJlc3BvbnNlXHJcbiMgIGNvZGVzIGFyZSBhcHBsaWNhYmxlIHRvIGFueSByZXF1ZXN0IG1ldGhvZC5cclxuXHJcblxyXG5jbGFzcyBIVFRQU2VydmVyRXJyb3IoSFRUUEVycm9yKTpcclxuICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBIVFRQSW50ZXJuYWxTZXJ2ZXJFcnJvcihIVFRQU2VydmVyRXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA1MDBcclxuXHJcblxyXG5jbGFzcyBIVFRQTm90SW1wbGVtZW50ZWQoSFRUUFNlcnZlckVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNTAxXHJcblxyXG5cclxuY2xhc3MgSFRUUEJhZEdhdGV3YXkoSFRUUFNlcnZlckVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNTAyXHJcblxyXG5cclxuY2xhc3MgSFRUUFNlcnZpY2VVbmF2YWlsYWJsZShIVFRQU2VydmVyRXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA1MDNcclxuXHJcblxyXG5jbGFzcyBIVFRQR2F0ZXdheVRpbWVvdXQoSFRUUFNlcnZlckVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNTA0XHJcblxyXG5cclxuY2xhc3MgSFRUUFZlcnNpb25Ob3RTdXBwb3J0ZWQoSFRUUFNlcnZlckVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNTA1XHJcblxyXG5cclxuY2xhc3MgSFRUUFZhcmlhbnRBbHNvTmVnb3RpYXRlcyhIVFRQU2VydmVyRXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA1MDZcclxuXHJcblxyXG5jbGFzcyBIVFRQSW5zdWZmaWNpZW50U3RvcmFnZShIVFRQU2VydmVyRXJyb3IpOlxyXG4gICAgc3RhdHVzX2NvZGUgPSA1MDdcclxuXHJcblxyXG5jbGFzcyBIVFRQTm90RXh0ZW5kZWQoSFRUUFNlcnZlckVycm9yKTpcclxuICAgIHN0YXR1c19jb2RlID0gNTEwXHJcblxyXG5cclxuY2xhc3MgSFRUUE5ldHdvcmtBdXRoZW50aWNhdGlvblJlcXVpcmVkKEhUVFBTZXJ2ZXJFcnJvcik6XHJcbiAgICBzdGF0dXNfY29kZSA9IDUxMVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC93ZWJfcmVzcG9uc2UucHknLCBiJ2ltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBjb2xsZWN0aW9ucy5hYmNcclxuaW1wb3J0IGRhdGV0aW1lXHJcbmltcG9ydCBlbnVtXHJcbmltcG9ydCBqc29uXHJcbmltcG9ydCBtYXRoXHJcbmltcG9ydCB0aW1lXHJcbmltcG9ydCB3YXJuaW5nc1xyXG5pbXBvcnQgemxpYlxyXG5mcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgRXhlY3V0b3JcclxuZnJvbSBodHRwLmNvb2tpZXMgaW1wb3J0IE1vcnNlbCwgU2ltcGxlQ29va2llXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBUWVBFX0NIRUNLSU5HLFxyXG4gICAgQW55LFxyXG4gICAgRGljdCxcclxuICAgIEl0ZXJhdG9yLFxyXG4gICAgTWFwcGluZyxcclxuICAgIE11dGFibGVNYXBwaW5nLFxyXG4gICAgT3B0aW9uYWwsXHJcbiAgICBUdXBsZSxcclxuICAgIFVuaW9uLFxyXG4gICAgY2FzdCxcclxuKVxyXG5cclxuZnJvbSBtdWx0aWRpY3QgaW1wb3J0IENJTXVsdGlEaWN0LCBpc3RyXHJcblxyXG5mcm9tIC4gaW1wb3J0IGhkcnMsIHBheWxvYWRcclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdFN0cmVhbVdyaXRlclxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCAoXHJcbiAgICBFVEFHX0FOWSxcclxuICAgIFBZXzM4LFxyXG4gICAgUVVPVEVEX0VUQUdfUkUsXHJcbiAgICBFVGFnLFxyXG4gICAgSGVhZGVyc01peGluLFxyXG4gICAgcGFyc2VfaHR0cF9kYXRlLFxyXG4gICAgcmZjODIyX2Zvcm1hdHRlZF90aW1lLFxyXG4gICAgc2VudGluZWwsXHJcbiAgICB2YWxpZGF0ZV9ldGFnX3ZhbHVlLFxyXG4pXHJcbmZyb20gLmh0dHAgaW1wb3J0IFJFU1BPTlNFUywgU0VSVkVSX1NPRlRXQVJFLCBIdHRwVmVyc2lvbjEwLCBIdHRwVmVyc2lvbjExXHJcbmZyb20gLnBheWxvYWQgaW1wb3J0IFBheWxvYWRcclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IEpTT05FbmNvZGVyLCBMb29zZUhlYWRlcnNcclxuXHJcbl9fYWxsX18gPSAoIkNvbnRlbnRDb2RpbmciLCAiU3RyZWFtUmVzcG9uc2UiLCAiUmVzcG9uc2UiLCAianNvbl9yZXNwb25zZSIpXHJcblxyXG5cclxuaWYgVFlQRV9DSEVDS0lORzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgZnJvbSAud2ViX3JlcXVlc3QgaW1wb3J0IEJhc2VSZXF1ZXN0XHJcblxyXG4gICAgQmFzZUNsYXNzID0gTXV0YWJsZU1hcHBpbmdbc3RyLCBBbnldXHJcbmVsc2U6XHJcbiAgICBCYXNlQ2xhc3MgPSBjb2xsZWN0aW9ucy5hYmMuTXV0YWJsZU1hcHBpbmdcclxuXHJcblxyXG5pZiBub3QgUFlfMzg6XHJcbiAgICAjIGFsbG93IHNhbWVzaXRlIHRvIGJlIHVzZWQgaW4gcHl0aG9uIDwgMy44XHJcbiAgICAjIGFscmVhZHkgcGVybWl0dGVkIGluIHB5dGhvbiAzLjgsIHNlZSBodHRwczovL2J1Z3MucHl0aG9uLm9yZy9pc3N1ZTI5NjEzXHJcbiAgICBNb3JzZWwuX3Jlc2VydmVkWyJzYW1lc2l0ZSJdID0gIlNhbWVTaXRlIiAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXVxyXG5cclxuXHJcbmNsYXNzIENvbnRlbnRDb2RpbmcoZW51bS5FbnVtKTpcclxuICAgICMgVGhlIGNvbnRlbnQgY29kaW5ncyB0aGF0IHdlIGhhdmUgc3VwcG9ydCBmb3IuXHJcbiAgICAjXHJcbiAgICAjIEFkZGl0aW9uYWwgcmVnaXN0ZXJlZCBjb2RpbmdzIGFyZSBsaXN0ZWQgYXQ6XHJcbiAgICAjIGh0dHBzOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL2h0dHAtcGFyYW1ldGVycy9odHRwLXBhcmFtZXRlcnMueGh0bWwjY29udGVudC1jb2RpbmdcclxuICAgIGRlZmxhdGUgPSAiZGVmbGF0ZSJcclxuICAgIGd6aXAgPSAiZ3ppcCJcclxuICAgIGlkZW50aXR5ID0gImlkZW50aXR5IlxyXG5cclxuXHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4jIEhUVFAgUmVzcG9uc2UgY2xhc3Nlc1xyXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcblxyXG5jbGFzcyBTdHJlYW1SZXNwb25zZShCYXNlQ2xhc3MsIEhlYWRlcnNNaXhpbik6XHJcblxyXG4gICAgX2xlbmd0aF9jaGVjayA9IFRydWVcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIHN0YXR1czogaW50ID0gMjAwLFxyXG4gICAgICAgIHJlYXNvbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgaGVhZGVyczogT3B0aW9uYWxbTG9vc2VIZWFkZXJzXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fYm9keSA9IE5vbmVcclxuICAgICAgICBzZWxmLl9rZWVwX2FsaXZlID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtib29sXVxyXG4gICAgICAgIHNlbGYuX2NodW5rZWQgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzaW9uID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9jb21wcmVzc2lvbl9mb3JjZSA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbQ29udGVudENvZGluZ11cclxuICAgICAgICBzZWxmLl9jb29raWVzID0gU2ltcGxlQ29va2llKCkgICMgdHlwZTogU2ltcGxlQ29va2llW3N0cl1cclxuXHJcbiAgICAgICAgc2VsZi5fcmVxID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtCYXNlUmVxdWVzdF1cclxuICAgICAgICBzZWxmLl9wYXlsb2FkX3dyaXRlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbQWJzdHJhY3RTdHJlYW1Xcml0ZXJdXHJcbiAgICAgICAgc2VsZi5fZW9mX3NlbnQgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX2JvZHlfbGVuZ3RoID0gMFxyXG4gICAgICAgIHNlbGYuX3N0YXRlID0ge30gICMgdHlwZTogRGljdFtzdHIsIEFueV1cclxuXHJcbiAgICAgICAgaWYgaGVhZGVycyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5faGVhZGVycyA9IENJTXVsdGlEaWN0KGhlYWRlcnMpICAjIHR5cGU6IENJTXVsdGlEaWN0W3N0cl1cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzID0gQ0lNdWx0aURpY3QoKVxyXG5cclxuICAgICAgICBzZWxmLnNldF9zdGF0dXMoc3RhdHVzLCByZWFzb24pXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcHJlcGFyZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcGF5bG9hZF93cml0ZXIgaXMgbm90IE5vbmVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB0YXNrKHNlbGYpIC0+ICJPcHRpb25hbFthc3luY2lvLlRhc2tbTm9uZV1dIjpcclxuICAgICAgICBpZiBzZWxmLl9yZXE6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9yZXEudGFza1xyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc3RhdHVzKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fc3RhdHVzXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2h1bmtlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jaHVua2VkXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY29tcHJlc3Npb24oc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY29tcHJlc3Npb25cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByZWFzb24oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZWFzb25cclxuXHJcbiAgICBkZWYgc2V0X3N0YXR1cyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHN0YXR1czogaW50LFxyXG4gICAgICAgIHJlYXNvbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgX1JFU1BPTlNFUzogTWFwcGluZ1tpbnQsIFR1cGxlW3N0ciwgc3RyXV0gPSBSRVNQT05TRVMsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IG5vdCBzZWxmLnByZXBhcmVkLCAoXHJcbiAgICAgICAgICAgICJDYW5ub3QgY2hhbmdlIHRoZSByZXNwb25zZSBzdGF0dXMgY29kZSBhZnRlciAiICJ0aGUgaGVhZGVycyBoYXZlIGJlZW4gc2VudCJcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fc3RhdHVzID0gaW50KHN0YXR1cylcclxuICAgICAgICBpZiByZWFzb24gaXMgTm9uZTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgcmVhc29uID0gX1JFU1BPTlNFU1tzZWxmLl9zdGF0dXNdWzBdXHJcbiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb246XHJcbiAgICAgICAgICAgICAgICByZWFzb24gPSAiIlxyXG4gICAgICAgIHNlbGYuX3JlYXNvbiA9IHJlYXNvblxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtlZXBfYWxpdmUoc2VsZikgLT4gT3B0aW9uYWxbYm9vbF06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2tlZXBfYWxpdmVcclxuXHJcbiAgICBkZWYgZm9yY2VfY2xvc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9rZWVwX2FsaXZlID0gRmFsc2VcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBib2R5X2xlbmd0aChzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JvZHlfbGVuZ3RoXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb3V0cHV0X2xlbmd0aChzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgd2FybmluZ3Mud2Fybigib3V0cHV0X2xlbmd0aCBpcyBkZXByZWNhdGVkIiwgRGVwcmVjYXRpb25XYXJuaW5nKVxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9wYXlsb2FkX3dyaXRlclxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wYXlsb2FkX3dyaXRlci5idWZmZXJfc2l6ZVxyXG5cclxuICAgIGRlZiBlbmFibGVfY2h1bmtlZF9lbmNvZGluZyhzZWxmLCBjaHVua19zaXplOiBPcHRpb25hbFtpbnRdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICAiIiJFbmFibGVzIGF1dG9tYXRpYyBjaHVua2VkIHRyYW5zZmVyIGVuY29kaW5nLiIiIlxyXG4gICAgICAgIHNlbGYuX2NodW5rZWQgPSBUcnVlXHJcblxyXG4gICAgICAgIGlmIGhkcnMuQ09OVEVOVF9MRU5HVEggaW4gc2VsZi5faGVhZGVyczpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIllvdSBjYW5cJ3QgZW5hYmxlIGNodW5rZWQgZW5jb2Rpbmcgd2hlbiAiICJhIGNvbnRlbnQgbGVuZ3RoIGlzIHNldCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGlmIGNodW5rX3NpemUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oIkNodW5rIHNpemUgaXMgZGVwcmVjYXRlZCAjMTYxNSIsIERlcHJlY2F0aW9uV2FybmluZylcclxuXHJcbiAgICBkZWYgZW5hYmxlX2NvbXByZXNzaW9uKFxyXG4gICAgICAgIHNlbGYsIGZvcmNlOiBPcHRpb25hbFtVbmlvbltib29sLCBDb250ZW50Q29kaW5nXV0gPSBOb25lXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiRW5hYmxlcyByZXNwb25zZSBjb21wcmVzc2lvbiBlbmNvZGluZy4iIiJcclxuICAgICAgICAjIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZvciB3aGVuIGZvcmNlIHdhcyBhIGJvb2wgPDAuMTcuXHJcbiAgICAgICAgaWYgdHlwZShmb3JjZSkgPT0gYm9vbDpcclxuICAgICAgICAgICAgZm9yY2UgPSBDb250ZW50Q29kaW5nLmRlZmxhdGUgaWYgZm9yY2UgZWxzZSBDb250ZW50Q29kaW5nLmlkZW50aXR5XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAiVXNpbmcgYm9vbGVhbiBmb3IgZm9yY2UgaXMgZGVwcmVjYXRlZCAjMzMxOCIsIERlcHJlY2F0aW9uV2FybmluZ1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxpZiBmb3JjZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoZm9yY2UsIENvbnRlbnRDb2RpbmcpLCAoXHJcbiAgICAgICAgICAgICAgICAiZm9yY2Ugc2hvdWxkIG9uZSBvZiAiICJOb25lLCBib29sIG9yICIgIkNvbnRlbnRFbmNvZGluZyJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9jb21wcmVzc2lvbiA9IFRydWVcclxuICAgICAgICBzZWxmLl9jb21wcmVzc2lvbl9mb3JjZSA9IGZvcmNlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgaGVhZGVycyhzZWxmKSAtPiAiQ0lNdWx0aURpY3Rbc3RyXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2hlYWRlcnNcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb29raWVzKHNlbGYpIC0+ICJTaW1wbGVDb29raWVbc3RyXSI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvb2tpZXNcclxuXHJcbiAgICBkZWYgc2V0X2Nvb2tpZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG5hbWU6IHN0cixcclxuICAgICAgICB2YWx1ZTogc3RyLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgZXhwaXJlczogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgZG9tYWluOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBtYXhfYWdlOiBPcHRpb25hbFtVbmlvbltpbnQsIHN0cl1dID0gTm9uZSxcclxuICAgICAgICBwYXRoOiBzdHIgPSAiLyIsXHJcbiAgICAgICAgc2VjdXJlOiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICAgICAgaHR0cG9ubHk6IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSxcclxuICAgICAgICB2ZXJzaW9uOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBzYW1lc2l0ZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiU2V0IG9yIHVwZGF0ZSByZXNwb25zZSBjb29raWUuXHJcblxyXG4gICAgICAgIFNldHMgbmV3IGNvb2tpZSBvciB1cGRhdGVzIGV4aXN0ZW50IHdpdGggbmV3IHZhbHVlLlxyXG4gICAgICAgIEFsc28gdXBkYXRlcyBvbmx5IHRob3NlIHBhcmFtcyB3aGljaCBhcmUgbm90IE5vbmUuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgb2xkID0gc2VsZi5fY29va2llcy5nZXQobmFtZSlcclxuICAgICAgICBpZiBvbGQgaXMgbm90IE5vbmUgYW5kIG9sZC5jb2RlZF92YWx1ZSA9PSAiIjpcclxuICAgICAgICAgICAgIyBkZWxldGVkIGNvb2tpZVxyXG4gICAgICAgICAgICBzZWxmLl9jb29raWVzLnBvcChuYW1lLCBOb25lKVxyXG5cclxuICAgICAgICBzZWxmLl9jb29raWVzW25hbWVdID0gdmFsdWVcclxuICAgICAgICBjID0gc2VsZi5fY29va2llc1tuYW1lXVxyXG5cclxuICAgICAgICBpZiBleHBpcmVzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBjWyJleHBpcmVzIl0gPSBleHBpcmVzXHJcbiAgICAgICAgZWxpZiBjLmdldCgiZXhwaXJlcyIpID09ICJUaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVCI6XHJcbiAgICAgICAgICAgIGRlbCBjWyJleHBpcmVzIl1cclxuXHJcbiAgICAgICAgaWYgZG9tYWluIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBjWyJkb21haW4iXSA9IGRvbWFpblxyXG5cclxuICAgICAgICBpZiBtYXhfYWdlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBjWyJtYXgtYWdlIl0gPSBzdHIobWF4X2FnZSlcclxuICAgICAgICBlbGlmICJtYXgtYWdlIiBpbiBjOlxyXG4gICAgICAgICAgICBkZWwgY1sibWF4LWFnZSJdXHJcblxyXG4gICAgICAgIGNbInBhdGgiXSA9IHBhdGhcclxuXHJcbiAgICAgICAgaWYgc2VjdXJlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBjWyJzZWN1cmUiXSA9IHNlY3VyZVxyXG4gICAgICAgIGlmIGh0dHBvbmx5IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBjWyJodHRwb25seSJdID0gaHR0cG9ubHlcclxuICAgICAgICBpZiB2ZXJzaW9uIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBjWyJ2ZXJzaW9uIl0gPSB2ZXJzaW9uXHJcbiAgICAgICAgaWYgc2FtZXNpdGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGNbInNhbWVzaXRlIl0gPSBzYW1lc2l0ZVxyXG5cclxuICAgIGRlZiBkZWxfY29va2llKFxyXG4gICAgICAgIHNlbGYsIG5hbWU6IHN0ciwgKiwgZG9tYWluOiBPcHRpb25hbFtzdHJdID0gTm9uZSwgcGF0aDogc3RyID0gIi8iXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiRGVsZXRlIGNvb2tpZS5cclxuXHJcbiAgICAgICAgQ3JlYXRlcyBuZXcgZW1wdHkgZXhwaXJlZCBjb29raWUuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgIyBUT0RPOiBkbyB3ZSBuZWVkIGRvbWFpbi9wYXRoIGhlcmU/XHJcbiAgICAgICAgc2VsZi5fY29va2llcy5wb3AobmFtZSwgTm9uZSlcclxuICAgICAgICBzZWxmLnNldF9jb29raWUoXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgICIiLFxyXG4gICAgICAgICAgICBtYXhfYWdlPTAsXHJcbiAgICAgICAgICAgIGV4cGlyZXM9IlRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UIixcclxuICAgICAgICAgICAgZG9tYWluPWRvbWFpbixcclxuICAgICAgICAgICAgcGF0aD1wYXRoLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb250ZW50X2xlbmd0aChzZWxmKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgICMgSnVzdCBhIHBsYWNlaG9sZGVyIGZvciBhZGRpbmcgc2V0dGVyXHJcbiAgICAgICAgcmV0dXJuIHN1cGVyKCkuY29udGVudF9sZW5ndGhcclxuXHJcbiAgICBAY29udGVudF9sZW5ndGguc2V0dGVyXHJcbiAgICBkZWYgY29udGVudF9sZW5ndGgoc2VsZiwgdmFsdWU6IE9wdGlvbmFsW2ludF0pIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgdmFsdWUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHZhbHVlID0gaW50KHZhbHVlKVxyXG4gICAgICAgICAgICBpZiBzZWxmLl9jaHVua2VkOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJZb3UgY2FuXCd0IHNldCBjb250ZW50IGxlbmd0aCB3aGVuICIgImNodW5rZWQgZW5jb2RpbmcgaXMgZW5hYmxlIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzW2hkcnMuQ09OVEVOVF9MRU5HVEhdID0gc3RyKHZhbHVlKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnMucG9wKGhkcnMuQ09OVEVOVF9MRU5HVEgsIE5vbmUpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY29udGVudF90eXBlKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAjIEp1c3QgYSBwbGFjZWhvbGRlciBmb3IgYWRkaW5nIHNldHRlclxyXG4gICAgICAgIHJldHVybiBzdXBlcigpLmNvbnRlbnRfdHlwZVxyXG5cclxuICAgIEBjb250ZW50X3R5cGUuc2V0dGVyXHJcbiAgICBkZWYgY29udGVudF90eXBlKHNlbGYsIHZhbHVlOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jb250ZW50X3R5cGUgICMgcmVhZCBoZWFkZXIgdmFsdWVzIGlmIG5lZWRlZFxyXG4gICAgICAgIHNlbGYuX2NvbnRlbnRfdHlwZSA9IHN0cih2YWx1ZSlcclxuICAgICAgICBzZWxmLl9nZW5lcmF0ZV9jb250ZW50X3R5cGVfaGVhZGVyKClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjaGFyc2V0KHNlbGYpIC0+IE9wdGlvbmFsW3N0cl06XHJcbiAgICAgICAgIyBKdXN0IGEgcGxhY2Vob2xkZXIgZm9yIGFkZGluZyBzZXR0ZXJcclxuICAgICAgICByZXR1cm4gc3VwZXIoKS5jaGFyc2V0XHJcblxyXG4gICAgQGNoYXJzZXQuc2V0dGVyXHJcbiAgICBkZWYgY2hhcnNldChzZWxmLCB2YWx1ZTogT3B0aW9uYWxbc3RyXSkgLT4gTm9uZTpcclxuICAgICAgICBjdHlwZSA9IHNlbGYuY29udGVudF90eXBlICAjIHJlYWQgaGVhZGVyIHZhbHVlcyBpZiBuZWVkZWRcclxuICAgICAgICBpZiBjdHlwZSA9PSAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIjpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlNldHRpbmcgY2hhcnNldCBmb3IgYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtICJcclxuICAgICAgICAgICAgICAgICJkb2VzblwndCBtYWtlIHNlbnNlLCBzZXR1cCBjb250ZW50X3R5cGUgZmlyc3QiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBhc3NlcnQgc2VsZi5fY29udGVudF9kaWN0IGlzIG5vdCBOb25lXHJcbiAgICAgICAgaWYgdmFsdWUgaXMgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fY29udGVudF9kaWN0LnBvcCgiY2hhcnNldCIsIE5vbmUpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5fY29udGVudF9kaWN0WyJjaGFyc2V0Il0gPSBzdHIodmFsdWUpLmxvd2VyKClcclxuICAgICAgICBzZWxmLl9nZW5lcmF0ZV9jb250ZW50X3R5cGVfaGVhZGVyKClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBsYXN0X21vZGlmaWVkKHNlbGYpIC0+IE9wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXTpcclxuICAgICAgICAiIiJUaGUgdmFsdWUgb2YgTGFzdC1Nb2RpZmllZCBIVFRQIGhlYWRlciwgb3IgTm9uZS5cclxuXHJcbiAgICAgICAgVGhpcyBoZWFkZXIgaXMgcmVwcmVzZW50ZWQgYXMgYSBgZGF0ZXRpbWVgIG9iamVjdC5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gcGFyc2VfaHR0cF9kYXRlKHNlbGYuX2hlYWRlcnMuZ2V0KGhkcnMuTEFTVF9NT0RJRklFRCkpXHJcblxyXG4gICAgQGxhc3RfbW9kaWZpZWQuc2V0dGVyXHJcbiAgICBkZWYgbGFzdF9tb2RpZmllZChcclxuICAgICAgICBzZWxmLCB2YWx1ZTogT3B0aW9uYWxbVW5pb25baW50LCBmbG9hdCwgZGF0ZXRpbWUuZGF0ZXRpbWUsIHN0cl1dXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgdmFsdWUgaXMgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5faGVhZGVycy5wb3AoaGRycy5MQVNUX01PRElGSUVELCBOb25lKVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZSh2YWx1ZSwgKGludCwgZmxvYXQpKTpcclxuICAgICAgICAgICAgc2VsZi5faGVhZGVyc1toZHJzLkxBU1RfTU9ESUZJRURdID0gdGltZS5zdHJmdGltZShcclxuICAgICAgICAgICAgICAgICIlYSwgJWQgJWIgJVkgJUg6JU06JVMgR01UIiwgdGltZS5nbXRpbWUobWF0aC5jZWlsKHZhbHVlKSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZSh2YWx1ZSwgZGF0ZXRpbWUuZGF0ZXRpbWUpOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzW2hkcnMuTEFTVF9NT0RJRklFRF0gPSB0aW1lLnN0cmZ0aW1lKFxyXG4gICAgICAgICAgICAgICAgIiVhLCAlZCAlYiAlWSAlSDolTTolUyBHTVQiLCB2YWx1ZS51dGN0aW1ldHVwbGUoKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHZhbHVlLCBzdHIpOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzW2hkcnMuTEFTVF9NT0RJRklFRF0gPSB2YWx1ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGV0YWcoc2VsZikgLT4gT3B0aW9uYWxbRVRhZ106XHJcbiAgICAgICAgcXVvdGVkX3ZhbHVlID0gc2VsZi5faGVhZGVycy5nZXQoaGRycy5FVEFHKVxyXG4gICAgICAgIGlmIG5vdCBxdW90ZWRfdmFsdWU6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcbiAgICAgICAgZWxpZiBxdW90ZWRfdmFsdWUgPT0gRVRBR19BTlk6XHJcbiAgICAgICAgICAgIHJldHVybiBFVGFnKHZhbHVlPUVUQUdfQU5ZKVxyXG4gICAgICAgIG1hdGNoID0gUVVPVEVEX0VUQUdfUkUuZnVsbG1hdGNoKHF1b3RlZF92YWx1ZSlcclxuICAgICAgICBpZiBub3QgbWF0Y2g6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcbiAgICAgICAgaXNfd2VhaywgdmFsdWUgPSBtYXRjaC5ncm91cCgxLCAyKVxyXG4gICAgICAgIHJldHVybiBFVGFnKFxyXG4gICAgICAgICAgICBpc193ZWFrPWJvb2woaXNfd2VhayksXHJcbiAgICAgICAgICAgIHZhbHVlPXZhbHVlLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBAZXRhZy5zZXR0ZXJcclxuICAgIGRlZiBldGFnKHNlbGYsIHZhbHVlOiBPcHRpb25hbFtVbmlvbltFVGFnLCBzdHJdXSkgLT4gTm9uZTpcclxuICAgICAgICBpZiB2YWx1ZSBpcyBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzLnBvcChoZHJzLkVUQUcsIE5vbmUpXHJcbiAgICAgICAgZWxpZiAoaXNpbnN0YW5jZSh2YWx1ZSwgc3RyKSBhbmQgdmFsdWUgPT0gRVRBR19BTlkpIG9yIChcclxuICAgICAgICAgICAgaXNpbnN0YW5jZSh2YWx1ZSwgRVRhZykgYW5kIHZhbHVlLnZhbHVlID09IEVUQUdfQU5ZXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgc2VsZi5faGVhZGVyc1toZHJzLkVUQUddID0gRVRBR19BTllcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UodmFsdWUsIHN0cik6XHJcbiAgICAgICAgICAgIHZhbGlkYXRlX2V0YWdfdmFsdWUodmFsdWUpXHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnNbaGRycy5FVEFHXSA9IGZcJyJ7dmFsdWV9IlwnXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHZhbHVlLCBFVGFnKSBhbmQgaXNpbnN0YW5jZSh2YWx1ZS52YWx1ZSwgc3RyKTpcclxuICAgICAgICAgICAgdmFsaWRhdGVfZXRhZ192YWx1ZSh2YWx1ZS52YWx1ZSlcclxuICAgICAgICAgICAgaGRyX3ZhbHVlID0gZlwnVy8ie3ZhbHVlLnZhbHVlfSJcJyBpZiB2YWx1ZS5pc193ZWFrIGVsc2UgZlwnInt2YWx1ZS52YWx1ZX0iXCdcclxuICAgICAgICAgICAgc2VsZi5faGVhZGVyc1toZHJzLkVUQUddID0gaGRyX3ZhbHVlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgIGYiVW5zdXBwb3J0ZWQgZXRhZyB0eXBlOiB7dHlwZSh2YWx1ZSl9LiAiXHJcbiAgICAgICAgICAgICAgICBmImV0YWcgbXVzdCBiZSBzdHIsIEVUYWcgb3IgTm9uZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfZ2VuZXJhdGVfY29udGVudF90eXBlX2hlYWRlcihcclxuICAgICAgICBzZWxmLCBDT05URU5UX1RZUEU6IGlzdHIgPSBoZHJzLkNPTlRFTlRfVFlQRVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9jb250ZW50X2RpY3QgaXMgbm90IE5vbmVcclxuICAgICAgICBhc3NlcnQgc2VsZi5fY29udGVudF90eXBlIGlzIG5vdCBOb25lXHJcbiAgICAgICAgcGFyYW1zID0gIjsgIi5qb2luKGYie2t9PXt2fSIgZm9yIGssIHYgaW4gc2VsZi5fY29udGVudF9kaWN0Lml0ZW1zKCkpXHJcbiAgICAgICAgaWYgcGFyYW1zOlxyXG4gICAgICAgICAgICBjdHlwZSA9IHNlbGYuX2NvbnRlbnRfdHlwZSArICI7ICIgKyBwYXJhbXNcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBjdHlwZSA9IHNlbGYuX2NvbnRlbnRfdHlwZVxyXG4gICAgICAgIHNlbGYuX2hlYWRlcnNbQ09OVEVOVF9UWVBFXSA9IGN0eXBlXHJcblxyXG4gICAgYXN5bmMgZGVmIF9kb19zdGFydF9jb21wcmVzc2lvbihzZWxmLCBjb2Rpbmc6IENvbnRlbnRDb2RpbmcpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgY29kaW5nICE9IENvbnRlbnRDb2RpbmcuaWRlbnRpdHk6XHJcbiAgICAgICAgICAgIGFzc2VydCBzZWxmLl9wYXlsb2FkX3dyaXRlciBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzW2hkcnMuQ09OVEVOVF9FTkNPRElOR10gPSBjb2RpbmcudmFsdWVcclxuICAgICAgICAgICAgc2VsZi5fcGF5bG9hZF93cml0ZXIuZW5hYmxlX2NvbXByZXNzaW9uKGNvZGluZy52YWx1ZSlcclxuICAgICAgICAgICAgIyBDb21wcmVzc2VkIHBheWxvYWQgbWF5IGhhdmUgZGlmZmVyZW50IGNvbnRlbnQgbGVuZ3RoLFxyXG4gICAgICAgICAgICAjIHJlbW92ZSB0aGUgaGVhZGVyXHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnMucG9wYWxsKGhkcnMuQ09OVEVOVF9MRU5HVEgsIE5vbmUpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9zdGFydF9jb21wcmVzc2lvbihzZWxmLCByZXF1ZXN0OiAiQmFzZVJlcXVlc3QiKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2NvbXByZXNzaW9uX2ZvcmNlOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9kb19zdGFydF9jb21wcmVzc2lvbihzZWxmLl9jb21wcmVzc2lvbl9mb3JjZSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBhY2NlcHRfZW5jb2RpbmcgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KGhkcnMuQUNDRVBUX0VOQ09ESU5HLCAiIikubG93ZXIoKVxyXG4gICAgICAgICAgICBmb3IgY29kaW5nIGluIENvbnRlbnRDb2Rpbmc6XHJcbiAgICAgICAgICAgICAgICBpZiBjb2RpbmcudmFsdWUgaW4gYWNjZXB0X2VuY29kaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuX2RvX3N0YXJ0X2NvbXByZXNzaW9uKGNvZGluZylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICBhc3luYyBkZWYgcHJlcGFyZShzZWxmLCByZXF1ZXN0OiAiQmFzZVJlcXVlc3QiKSAtPiBPcHRpb25hbFtBYnN0cmFjdFN0cmVhbVdyaXRlcl06XHJcbiAgICAgICAgaWYgc2VsZi5fZW9mX3NlbnQ6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcbiAgICAgICAgaWYgc2VsZi5fcGF5bG9hZF93cml0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9wYXlsb2FkX3dyaXRlclxyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fc3RhcnQocmVxdWVzdClcclxuXHJcbiAgICBhc3luYyBkZWYgX3N0YXJ0KHNlbGYsIHJlcXVlc3Q6ICJCYXNlUmVxdWVzdCIpIC0+IEFic3RyYWN0U3RyZWFtV3JpdGVyOlxyXG4gICAgICAgIHNlbGYuX3JlcSA9IHJlcXVlc3RcclxuICAgICAgICB3cml0ZXIgPSBzZWxmLl9wYXlsb2FkX3dyaXRlciA9IHJlcXVlc3QuX3BheWxvYWRfd3JpdGVyXHJcblxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3ByZXBhcmVfaGVhZGVycygpXHJcbiAgICAgICAgYXdhaXQgcmVxdWVzdC5fcHJlcGFyZV9ob29rKHNlbGYpXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fd3JpdGVfaGVhZGVycygpXHJcblxyXG4gICAgICAgIHJldHVybiB3cml0ZXJcclxuXHJcbiAgICBhc3luYyBkZWYgX3ByZXBhcmVfaGVhZGVycyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHJlcXVlc3QgPSBzZWxmLl9yZXFcclxuICAgICAgICBhc3NlcnQgcmVxdWVzdCBpcyBub3QgTm9uZVxyXG4gICAgICAgIHdyaXRlciA9IHNlbGYuX3BheWxvYWRfd3JpdGVyXHJcbiAgICAgICAgYXNzZXJ0IHdyaXRlciBpcyBub3QgTm9uZVxyXG4gICAgICAgIGtlZXBfYWxpdmUgPSBzZWxmLl9rZWVwX2FsaXZlXHJcbiAgICAgICAgaWYga2VlcF9hbGl2ZSBpcyBOb25lOlxyXG4gICAgICAgICAgICBrZWVwX2FsaXZlID0gcmVxdWVzdC5rZWVwX2FsaXZlXHJcbiAgICAgICAgc2VsZi5fa2VlcF9hbGl2ZSA9IGtlZXBfYWxpdmVcclxuXHJcbiAgICAgICAgdmVyc2lvbiA9IHJlcXVlc3QudmVyc2lvblxyXG5cclxuICAgICAgICBoZWFkZXJzID0gc2VsZi5faGVhZGVyc1xyXG4gICAgICAgIGZvciBjb29raWUgaW4gc2VsZi5fY29va2llcy52YWx1ZXMoKTpcclxuICAgICAgICAgICAgdmFsdWUgPSBjb29raWUub3V0cHV0KGhlYWRlcj0iIilbMTpdXHJcbiAgICAgICAgICAgIGhlYWRlcnMuYWRkKGhkcnMuU0VUX0NPT0tJRSwgdmFsdWUpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2NvbXByZXNzaW9uOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9zdGFydF9jb21wcmVzc2lvbihyZXF1ZXN0KVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9jaHVua2VkOlxyXG4gICAgICAgICAgICBpZiB2ZXJzaW9uICE9IEh0dHBWZXJzaW9uMTE6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIlVzaW5nIGNodW5rZWQgZW5jb2RpbmcgaXMgZm9yYmlkZGVuICJcclxuICAgICAgICAgICAgICAgICAgICAiZm9yIEhUVFAvezAubWFqb3J9LnswLm1pbm9yfSIuZm9ybWF0KHJlcXVlc3QudmVyc2lvbilcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgd3JpdGVyLmVuYWJsZV9jaHVua2luZygpXHJcbiAgICAgICAgICAgIGhlYWRlcnNbaGRycy5UUkFOU0ZFUl9FTkNPRElOR10gPSAiY2h1bmtlZCJcclxuICAgICAgICAgICAgaWYgaGRycy5DT05URU5UX0xFTkdUSCBpbiBoZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgZGVsIGhlYWRlcnNbaGRycy5DT05URU5UX0xFTkdUSF1cclxuICAgICAgICBlbGlmIHNlbGYuX2xlbmd0aF9jaGVjazpcclxuICAgICAgICAgICAgd3JpdGVyLmxlbmd0aCA9IHNlbGYuY29udGVudF9sZW5ndGhcclxuICAgICAgICAgICAgaWYgd3JpdGVyLmxlbmd0aCBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgaWYgdmVyc2lvbiA+PSBIdHRwVmVyc2lvbjExIGFuZCBzZWxmLnN0YXR1cyAhPSAyMDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVyLmVuYWJsZV9jaHVua2luZygpXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1toZHJzLlRSQU5TRkVSX0VOQ09ESU5HXSA9ICJjaHVua2VkIlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGhkcnMuQ09OVEVOVF9MRU5HVEggaW4gaGVhZGVyczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsIGhlYWRlcnNbaGRycy5DT05URU5UX0xFTkdUSF1cclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAga2VlcF9hbGl2ZSA9IEZhbHNlXHJcbiAgICAgICAgICAgICMgSFRUUCAxLjE6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3MjMwI3NlY3Rpb24tMy4zLjJcclxuICAgICAgICAgICAgIyBIVFRQIDEuMDogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzE5NDUjc2VjdGlvbi0xMC40XHJcbiAgICAgICAgICAgIGVsaWYgdmVyc2lvbiA+PSBIdHRwVmVyc2lvbjExIGFuZCBzZWxmLnN0YXR1cyBpbiAoMTAwLCAxMDEsIDEwMiwgMTAzLCAyMDQpOlxyXG4gICAgICAgICAgICAgICAgZGVsIGhlYWRlcnNbaGRycy5DT05URU5UX0xFTkdUSF1cclxuXHJcbiAgICAgICAgaWYgc2VsZi5zdGF0dXMgbm90IGluICgyMDQsIDMwNCk6XHJcbiAgICAgICAgICAgIGhlYWRlcnMuc2V0ZGVmYXVsdChoZHJzLkNPTlRFTlRfVFlQRSwgImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIpXHJcbiAgICAgICAgaGVhZGVycy5zZXRkZWZhdWx0KGhkcnMuREFURSwgcmZjODIyX2Zvcm1hdHRlZF90aW1lKCkpXHJcbiAgICAgICAgaGVhZGVycy5zZXRkZWZhdWx0KGhkcnMuU0VSVkVSLCBTRVJWRVJfU09GVFdBUkUpXHJcblxyXG4gICAgICAgICMgY29ubmVjdGlvbiBoZWFkZXJcclxuICAgICAgICBpZiBoZHJzLkNPTk5FQ1RJT04gbm90IGluIGhlYWRlcnM6XHJcbiAgICAgICAgICAgIGlmIGtlZXBfYWxpdmU6XHJcbiAgICAgICAgICAgICAgICBpZiB2ZXJzaW9uID09IEh0dHBWZXJzaW9uMTA6XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1toZHJzLkNPTk5FQ1RJT05dID0gImtlZXAtYWxpdmUiXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBpZiB2ZXJzaW9uID09IEh0dHBWZXJzaW9uMTE6XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1toZHJzLkNPTk5FQ1RJT05dID0gImNsb3NlIlxyXG5cclxuICAgIGFzeW5jIGRlZiBfd3JpdGVfaGVhZGVycyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHJlcXVlc3QgPSBzZWxmLl9yZXFcclxuICAgICAgICBhc3NlcnQgcmVxdWVzdCBpcyBub3QgTm9uZVxyXG4gICAgICAgIHdyaXRlciA9IHNlbGYuX3BheWxvYWRfd3JpdGVyXHJcbiAgICAgICAgYXNzZXJ0IHdyaXRlciBpcyBub3QgTm9uZVxyXG4gICAgICAgICMgc3RhdHVzIGxpbmVcclxuICAgICAgICB2ZXJzaW9uID0gcmVxdWVzdC52ZXJzaW9uXHJcbiAgICAgICAgc3RhdHVzX2xpbmUgPSAiSFRUUC97fS57fSB7fSB7fSIuZm9ybWF0KFxyXG4gICAgICAgICAgICB2ZXJzaW9uWzBdLCB2ZXJzaW9uWzFdLCBzZWxmLl9zdGF0dXMsIHNlbGYuX3JlYXNvblxyXG4gICAgICAgIClcclxuICAgICAgICBhd2FpdCB3cml0ZXIud3JpdGVfaGVhZGVycyhzdGF0dXNfbGluZSwgc2VsZi5faGVhZGVycylcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGUoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIGRhdGEsIChieXRlcywgYnl0ZWFycmF5LCBtZW1vcnl2aWV3KVxyXG4gICAgICAgICksICJkYXRhIGFyZ3VtZW50IG11c3QgYmUgYnl0ZS1pc2ggKCVyKSIgJSB0eXBlKGRhdGEpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2VvZl9zZW50OlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbm5vdCBjYWxsIHdyaXRlKCkgYWZ0ZXIgd3JpdGVfZW9mKCkiKVxyXG4gICAgICAgIGlmIHNlbGYuX3BheWxvYWRfd3JpdGVyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IGNhbGwgd3JpdGUoKSBiZWZvcmUgcHJlcGFyZSgpIilcclxuXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fcGF5bG9hZF93cml0ZXIud3JpdGUoZGF0YSlcclxuXHJcbiAgICBhc3luYyBkZWYgZHJhaW4oc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBhc3NlcnQgbm90IHNlbGYuX2VvZl9zZW50LCAiRU9GIGhhcyBhbHJlYWR5IGJlZW4gc2VudCJcclxuICAgICAgICBhc3NlcnQgc2VsZi5fcGF5bG9hZF93cml0ZXIgaXMgbm90IE5vbmUsICJSZXNwb25zZSBoYXMgbm90IGJlZW4gc3RhcnRlZCJcclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAiZHJhaW4gbWV0aG9kIGlzIGRlcHJlY2F0ZWQsIHVzZSBhd2FpdCByZXNwLndyaXRlKCkiLFxyXG4gICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgIHN0YWNrbGV2ZWw9MixcclxuICAgICAgICApXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fcGF5bG9hZF93cml0ZXIuZHJhaW4oKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZV9lb2Yoc2VsZiwgZGF0YTogYnl0ZXMgPSBiIiIpIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIGRhdGEsIChieXRlcywgYnl0ZWFycmF5LCBtZW1vcnl2aWV3KVxyXG4gICAgICAgICksICJkYXRhIGFyZ3VtZW50IG11c3QgYmUgYnl0ZS1pc2ggKCVyKSIgJSB0eXBlKGRhdGEpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2VvZl9zZW50OlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3BheWxvYWRfd3JpdGVyIGlzIG5vdCBOb25lLCAiUmVzcG9uc2UgaGFzIG5vdCBiZWVuIHN0YXJ0ZWQiXHJcblxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3BheWxvYWRfd3JpdGVyLndyaXRlX2VvZihkYXRhKVxyXG4gICAgICAgIHNlbGYuX2VvZl9zZW50ID0gVHJ1ZVxyXG4gICAgICAgIHNlbGYuX3JlcSA9IE5vbmVcclxuICAgICAgICBzZWxmLl9ib2R5X2xlbmd0aCA9IHNlbGYuX3BheWxvYWRfd3JpdGVyLm91dHB1dF9zaXplXHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZF93cml0ZXIgPSBOb25lXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICBpZiBzZWxmLl9lb2Zfc2VudDpcclxuICAgICAgICAgICAgaW5mbyA9ICJlb2YiXHJcbiAgICAgICAgZWxpZiBzZWxmLnByZXBhcmVkOlxyXG4gICAgICAgICAgICBhc3NlcnQgc2VsZi5fcmVxIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIGluZm8gPSBmIntzZWxmLl9yZXEubWV0aG9kfSB7c2VsZi5fcmVxLnBhdGh9ICJcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBpbmZvID0gIm5vdCBwcmVwYXJlZCJcclxuICAgICAgICByZXR1cm4gZiI8e3NlbGYuX19jbGFzc19fLl9fbmFtZV9ffSB7c2VsZi5yZWFzb259IHtpbmZvfT4iXHJcblxyXG4gICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGtleTogc3RyKSAtPiBBbnk6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3N0YXRlW2tleV1cclxuXHJcbiAgICBkZWYgX19zZXRpdGVtX18oc2VsZiwga2V5OiBzdHIsIHZhbHVlOiBBbnkpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fc3RhdGVba2V5XSA9IHZhbHVlXHJcblxyXG4gICAgZGVmIF9fZGVsaXRlbV9fKHNlbGYsIGtleTogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIGRlbCBzZWxmLl9zdGF0ZVtrZXldXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5fc3RhdGUpXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+IEl0ZXJhdG9yW3N0cl06XHJcbiAgICAgICAgcmV0dXJuIGl0ZXIoc2VsZi5fc3RhdGUpXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChpZChzZWxmKSlcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYgaXMgb3RoZXJcclxuXHJcblxyXG5jbGFzcyBSZXNwb25zZShTdHJlYW1SZXNwb25zZSk6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIGJvZHk6IEFueSA9IE5vbmUsXHJcbiAgICAgICAgc3RhdHVzOiBpbnQgPSAyMDAsXHJcbiAgICAgICAgcmVhc29uOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICB0ZXh0OiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBoZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICAgICBjb250ZW50X3R5cGU6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGNoYXJzZXQ6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIHpsaWJfZXhlY3V0b3Jfc2l6ZTogT3B0aW9uYWxbaW50XSA9IE5vbmUsXHJcbiAgICAgICAgemxpYl9leGVjdXRvcjogT3B0aW9uYWxbRXhlY3V0b3JdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBib2R5IGlzIG5vdCBOb25lIGFuZCB0ZXh0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJib2R5IGFuZCB0ZXh0IGFyZSBub3QgYWxsb3dlZCB0b2dldGhlciIpXHJcblxyXG4gICAgICAgIGlmIGhlYWRlcnMgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmVhbF9oZWFkZXJzID0gQ0lNdWx0aURpY3QoKSAgIyB0eXBlOiBDSU11bHRpRGljdFtzdHJdXHJcbiAgICAgICAgZWxpZiBub3QgaXNpbnN0YW5jZShoZWFkZXJzLCBDSU11bHRpRGljdCk6XHJcbiAgICAgICAgICAgIHJlYWxfaGVhZGVycyA9IENJTXVsdGlEaWN0KGhlYWRlcnMpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmVhbF9oZWFkZXJzID0gaGVhZGVycyAgIyA9IGNhc3QoXCdDSU11bHRpRGljdFtzdHJdXCcsIGhlYWRlcnMpXHJcblxyXG4gICAgICAgIGlmIGNvbnRlbnRfdHlwZSBpcyBub3QgTm9uZSBhbmQgImNoYXJzZXQiIGluIGNvbnRlbnRfdHlwZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiY2hhcnNldCBtdXN0IG5vdCBiZSBpbiBjb250ZW50X3R5cGUgIiAiYXJndW1lbnQiKVxyXG5cclxuICAgICAgICBpZiB0ZXh0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBpZiBoZHJzLkNPTlRFTlRfVFlQRSBpbiByZWFsX2hlYWRlcnM6XHJcbiAgICAgICAgICAgICAgICBpZiBjb250ZW50X3R5cGUgb3IgY2hhcnNldDpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAicGFzc2luZyBib3RoIENvbnRlbnQtVHlwZSBoZWFkZXIgYW5kICJcclxuICAgICAgICAgICAgICAgICAgICAgICAgImNvbnRlbnRfdHlwZSBvciBjaGFyc2V0IHBhcmFtcyAiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJpcyBmb3JiaWRkZW4iXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgIyBmYXN0IHBhdGggZm9yIGZpbGxpbmcgaGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodGV4dCwgc3RyKTpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInRleHQgYXJndW1lbnQgbXVzdCBiZSBzdHIgKCVyKSIgJSB0eXBlKHRleHQpKVxyXG4gICAgICAgICAgICAgICAgaWYgY29udGVudF90eXBlIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudF90eXBlID0gInRleHQvcGxhaW4iXHJcbiAgICAgICAgICAgICAgICBpZiBjaGFyc2V0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcnNldCA9ICJ1dGYtOCJcclxuICAgICAgICAgICAgICAgIHJlYWxfaGVhZGVyc1toZHJzLkNPTlRFTlRfVFlQRV0gPSBjb250ZW50X3R5cGUgKyAiOyBjaGFyc2V0PSIgKyBjaGFyc2V0XHJcbiAgICAgICAgICAgICAgICBib2R5ID0gdGV4dC5lbmNvZGUoY2hhcnNldClcclxuICAgICAgICAgICAgICAgIHRleHQgPSBOb25lXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaWYgaGRycy5DT05URU5UX1RZUEUgaW4gcmVhbF9oZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgaWYgY29udGVudF90eXBlIGlzIG5vdCBOb25lIG9yIGNoYXJzZXQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgInBhc3NpbmcgYm90aCBDb250ZW50LVR5cGUgaGVhZGVyIGFuZCAiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJjb250ZW50X3R5cGUgb3IgY2hhcnNldCBwYXJhbXMgIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiaXMgZm9yYmlkZGVuIlxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGlmIGNvbnRlbnRfdHlwZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICBpZiBjaGFyc2V0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50X3R5cGUgKz0gIjsgY2hhcnNldD0iICsgY2hhcnNldFxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxfaGVhZGVyc1toZHJzLkNPTlRFTlRfVFlQRV0gPSBjb250ZW50X3R5cGVcclxuXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhzdGF0dXM9c3RhdHVzLCByZWFzb249cmVhc29uLCBoZWFkZXJzPXJlYWxfaGVhZGVycylcclxuXHJcbiAgICAgICAgaWYgdGV4dCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi50ZXh0ID0gdGV4dFxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuYm9keSA9IGJvZHlcclxuXHJcbiAgICAgICAgc2VsZi5fY29tcHJlc3NlZF9ib2R5ID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtieXRlc11cclxuICAgICAgICBzZWxmLl96bGliX2V4ZWN1dG9yX3NpemUgPSB6bGliX2V4ZWN1dG9yX3NpemVcclxuICAgICAgICBzZWxmLl96bGliX2V4ZWN1dG9yID0gemxpYl9leGVjdXRvclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGJvZHkoc2VsZikgLT4gT3B0aW9uYWxbVW5pb25bYnl0ZXMsIFBheWxvYWRdXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYm9keVxyXG5cclxuICAgIEBib2R5LnNldHRlclxyXG4gICAgZGVmIGJvZHkoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBib2R5OiBieXRlcyxcclxuICAgICAgICBDT05URU5UX1RZUEU6IGlzdHIgPSBoZHJzLkNPTlRFTlRfVFlQRSxcclxuICAgICAgICBDT05URU5UX0xFTkdUSDogaXN0ciA9IGhkcnMuQ09OVEVOVF9MRU5HVEgsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgYm9keSBpcyBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9ib2R5ID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtieXRlc11cclxuICAgICAgICAgICAgc2VsZi5fYm9keV9wYXlsb2FkID0gRmFsc2UgICMgdHlwZTogYm9vbFxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShib2R5LCAoYnl0ZXMsIGJ5dGVhcnJheSkpOlxyXG4gICAgICAgICAgICBzZWxmLl9ib2R5ID0gYm9keVxyXG4gICAgICAgICAgICBzZWxmLl9ib2R5X3BheWxvYWQgPSBGYWxzZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2JvZHkgPSBib2R5ID0gcGF5bG9hZC5QQVlMT0FEX1JFR0lTVFJZLmdldChib2R5KVxyXG4gICAgICAgICAgICBleGNlcHQgcGF5bG9hZC5Mb29rdXBFcnJvcjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVuc3VwcG9ydGVkIGJvZHkgdHlwZSAlciIgJSB0eXBlKGJvZHkpKVxyXG5cclxuICAgICAgICAgICAgc2VsZi5fYm9keV9wYXlsb2FkID0gVHJ1ZVxyXG5cclxuICAgICAgICAgICAgaGVhZGVycyA9IHNlbGYuX2hlYWRlcnNcclxuXHJcbiAgICAgICAgICAgICMgc2V0IGNvbnRlbnQtbGVuZ3RoIGhlYWRlciBpZiBuZWVkZWRcclxuICAgICAgICAgICAgaWYgbm90IHNlbGYuX2NodW5rZWQgYW5kIENPTlRFTlRfTEVOR1RIIG5vdCBpbiBoZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgc2l6ZSA9IGJvZHkuc2l6ZVxyXG4gICAgICAgICAgICAgICAgaWYgc2l6ZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW0NPTlRFTlRfTEVOR1RIXSA9IHN0cihzaXplKVxyXG5cclxuICAgICAgICAgICAgIyBzZXQgY29udGVudC10eXBlXHJcbiAgICAgICAgICAgIGlmIENPTlRFTlRfVFlQRSBub3QgaW4gaGVhZGVyczpcclxuICAgICAgICAgICAgICAgIGhlYWRlcnNbQ09OVEVOVF9UWVBFXSA9IGJvZHkuY29udGVudF90eXBlXHJcblxyXG4gICAgICAgICAgICAjIGNvcHkgcGF5bG9hZCBoZWFkZXJzXHJcbiAgICAgICAgICAgIGlmIGJvZHkuaGVhZGVyczpcclxuICAgICAgICAgICAgICAgIGZvciAoa2V5LCB2YWx1ZSkgaW4gYm9keS5oZWFkZXJzLml0ZW1zKCk6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYga2V5IG5vdCBpbiBoZWFkZXJzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW2tleV0gPSB2YWx1ZVxyXG5cclxuICAgICAgICBzZWxmLl9jb21wcmVzc2VkX2JvZHkgPSBOb25lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdGV4dChzZWxmKSAtPiBPcHRpb25hbFtzdHJdOlxyXG4gICAgICAgIGlmIHNlbGYuX2JvZHkgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICByZXR1cm4gc2VsZi5fYm9keS5kZWNvZGUoc2VsZi5jaGFyc2V0IG9yICJ1dGYtOCIpXHJcblxyXG4gICAgQHRleHQuc2V0dGVyXHJcbiAgICBkZWYgdGV4dChzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IHRleHQgaXMgTm9uZSBvciBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICB0ZXh0LCBzdHJcclxuICAgICAgICApLCAidGV4dCBhcmd1bWVudCBtdXN0IGJlIHN0ciAoJXIpIiAlIHR5cGUodGV4dClcclxuXHJcbiAgICAgICAgaWYgc2VsZi5jb250ZW50X3R5cGUgPT0gImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSI6XHJcbiAgICAgICAgICAgIHNlbGYuY29udGVudF90eXBlID0gInRleHQvcGxhaW4iXHJcbiAgICAgICAgaWYgc2VsZi5jaGFyc2V0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuY2hhcnNldCA9ICJ1dGYtOCJcclxuXHJcbiAgICAgICAgc2VsZi5fYm9keSA9IHRleHQuZW5jb2RlKHNlbGYuY2hhcnNldClcclxuICAgICAgICBzZWxmLl9ib2R5X3BheWxvYWQgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzZWRfYm9keSA9IE5vbmVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb250ZW50X2xlbmd0aChzZWxmKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgIGlmIHNlbGYuX2NodW5rZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgICAgIGlmIGhkcnMuQ09OVEVOVF9MRU5HVEggaW4gc2VsZi5faGVhZGVyczpcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyKCkuY29udGVudF9sZW5ndGhcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fY29tcHJlc3NlZF9ib2R5IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAjIFJldHVybiBsZW5ndGggb2YgdGhlIGNvbXByZXNzZWQgYm9keVxyXG4gICAgICAgICAgICByZXR1cm4gbGVuKHNlbGYuX2NvbXByZXNzZWRfYm9keSlcclxuICAgICAgICBlbGlmIHNlbGYuX2JvZHlfcGF5bG9hZDpcclxuICAgICAgICAgICAgIyBBIHBheWxvYWQgd2l0aG91dCBjb250ZW50IGxlbmd0aCwgb3IgYSBjb21wcmVzc2VkIHBheWxvYWRcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICBlbGlmIHNlbGYuX2JvZHkgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBsZW4oc2VsZi5fYm9keSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gMFxyXG5cclxuICAgIEBjb250ZW50X2xlbmd0aC5zZXR0ZXJcclxuICAgIGRlZiBjb250ZW50X2xlbmd0aChzZWxmLCB2YWx1ZTogT3B0aW9uYWxbaW50XSkgLT4gTm9uZTpcclxuICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNvbnRlbnQgbGVuZ3RoIGlzIHNldCBhdXRvbWF0aWNhbGx5IilcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGVfZW9mKHNlbGYsIGRhdGE6IGJ5dGVzID0gYiIiKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2VvZl9zZW50OlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICBpZiBzZWxmLl9jb21wcmVzc2VkX2JvZHkgaXMgTm9uZTpcclxuICAgICAgICAgICAgYm9keSA9IHNlbGYuX2JvZHkgICMgdHlwZTogT3B0aW9uYWxbVW5pb25bYnl0ZXMsIFBheWxvYWRdXVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGJvZHkgPSBzZWxmLl9jb21wcmVzc2VkX2JvZHlcclxuICAgICAgICBhc3NlcnQgbm90IGRhdGEsIGYiZGF0YSBhcmcgaXMgbm90IHN1cHBvcnRlZCwgZ290IHtkYXRhIXJ9IlxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9yZXEgaXMgbm90IE5vbmVcclxuICAgICAgICBhc3NlcnQgc2VsZi5fcGF5bG9hZF93cml0ZXIgaXMgbm90IE5vbmVcclxuICAgICAgICBpZiBib2R5IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBpZiBzZWxmLl9yZXEuX21ldGhvZCA9PSBoZHJzLk1FVEhfSEVBRCBvciBzZWxmLl9zdGF0dXMgaW4gWzIwNCwgMzA0XTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHN1cGVyKCkud3JpdGVfZW9mKClcclxuICAgICAgICAgICAgZWxpZiBzZWxmLl9ib2R5X3BheWxvYWQ6XHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkID0gY2FzdChQYXlsb2FkLCBib2R5KVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgcGF5bG9hZC53cml0ZShzZWxmLl9wYXlsb2FkX3dyaXRlcilcclxuICAgICAgICAgICAgICAgIGF3YWl0IHN1cGVyKCkud3JpdGVfZW9mKClcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHN1cGVyKCkud3JpdGVfZW9mKGNhc3QoYnl0ZXMsIGJvZHkpKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGF3YWl0IHN1cGVyKCkud3JpdGVfZW9mKClcclxuXHJcbiAgICBhc3luYyBkZWYgX3N0YXJ0KHNlbGYsIHJlcXVlc3Q6ICJCYXNlUmVxdWVzdCIpIC0+IEFic3RyYWN0U3RyZWFtV3JpdGVyOlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9jaHVua2VkIGFuZCBoZHJzLkNPTlRFTlRfTEVOR1RIIG5vdCBpbiBzZWxmLl9oZWFkZXJzOlxyXG4gICAgICAgICAgICBpZiBub3Qgc2VsZi5fYm9keV9wYXlsb2FkOlxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fYm9keSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9oZWFkZXJzW2hkcnMuQ09OVEVOVF9MRU5HVEhdID0gc3RyKGxlbihzZWxmLl9ib2R5KSlcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5faGVhZGVyc1toZHJzLkNPTlRFTlRfTEVOR1RIXSA9ICIwIlxyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgc3VwZXIoKS5fc3RhcnQocmVxdWVzdClcclxuXHJcbiAgICBkZWYgX2NvbXByZXNzX2JvZHkoc2VsZiwgemxpYl9tb2RlOiBpbnQpIC0+IE5vbmU6XHJcbiAgICAgICAgYXNzZXJ0IHpsaWJfbW9kZSA+IDBcclxuICAgICAgICBjb21wcmVzc29iaiA9IHpsaWIuY29tcHJlc3NvYmood2JpdHM9emxpYl9tb2RlKVxyXG4gICAgICAgIGJvZHlfaW4gPSBzZWxmLl9ib2R5XHJcbiAgICAgICAgYXNzZXJ0IGJvZHlfaW4gaXMgbm90IE5vbmVcclxuICAgICAgICBzZWxmLl9jb21wcmVzc2VkX2JvZHkgPSBjb21wcmVzc29iai5jb21wcmVzcyhib2R5X2luKSArIGNvbXByZXNzb2JqLmZsdXNoKClcclxuXHJcbiAgICBhc3luYyBkZWYgX2RvX3N0YXJ0X2NvbXByZXNzaW9uKHNlbGYsIGNvZGluZzogQ29udGVudENvZGluZykgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9ib2R5X3BheWxvYWQgb3Igc2VsZi5fY2h1bmtlZDpcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHN1cGVyKCkuX2RvX3N0YXJ0X2NvbXByZXNzaW9uKGNvZGluZylcclxuXHJcbiAgICAgICAgaWYgY29kaW5nICE9IENvbnRlbnRDb2RpbmcuaWRlbnRpdHk6XHJcbiAgICAgICAgICAgICMgSW5zdGVhZCBvZiB1c2luZyBfcGF5bG9hZF93cml0ZXIuZW5hYmxlX2NvbXByZXNzaW9uLFxyXG4gICAgICAgICAgICAjIGNvbXByZXNzIHRoZSB3aG9sZSBib2R5XHJcbiAgICAgICAgICAgIHpsaWJfbW9kZSA9IChcclxuICAgICAgICAgICAgICAgIDE2ICsgemxpYi5NQVhfV0JJVFMgaWYgY29kaW5nID09IENvbnRlbnRDb2RpbmcuZ3ppcCBlbHNlIHpsaWIuTUFYX1dCSVRTXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgYm9keV9pbiA9IHNlbGYuX2JvZHlcclxuICAgICAgICAgICAgYXNzZXJ0IGJvZHlfaW4gaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5femxpYl9leGVjdXRvcl9zaXplIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICAgICBhbmQgbGVuKGJvZHlfaW4pID4gc2VsZi5femxpYl9leGVjdXRvcl9zaXplXHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luY2lvLmdldF9ldmVudF9sb29wKCkucnVuX2luX2V4ZWN1dG9yKFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3psaWJfZXhlY3V0b3IsIHNlbGYuX2NvbXByZXNzX2JvZHksIHpsaWJfbW9kZVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY29tcHJlc3NfYm9keSh6bGliX21vZGUpXHJcblxyXG4gICAgICAgICAgICBib2R5X291dCA9IHNlbGYuX2NvbXByZXNzZWRfYm9keVxyXG4gICAgICAgICAgICBhc3NlcnQgYm9keV9vdXQgaXMgbm90IE5vbmVcclxuXHJcbiAgICAgICAgICAgIHNlbGYuX2hlYWRlcnNbaGRycy5DT05URU5UX0VOQ09ESU5HXSA9IGNvZGluZy52YWx1ZVxyXG4gICAgICAgICAgICBzZWxmLl9oZWFkZXJzW2hkcnMuQ09OVEVOVF9MRU5HVEhdID0gc3RyKGxlbihib2R5X291dCkpXHJcblxyXG5cclxuZGVmIGpzb25fcmVzcG9uc2UoXHJcbiAgICBkYXRhOiBBbnkgPSBzZW50aW5lbCxcclxuICAgICosXHJcbiAgICB0ZXh0OiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgIGJvZHk6IE9wdGlvbmFsW2J5dGVzXSA9IE5vbmUsXHJcbiAgICBzdGF0dXM6IGludCA9IDIwMCxcclxuICAgIHJlYXNvbjogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICBoZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgIGNvbnRlbnRfdHlwZTogc3RyID0gImFwcGxpY2F0aW9uL2pzb24iLFxyXG4gICAgZHVtcHM6IEpTT05FbmNvZGVyID0ganNvbi5kdW1wcyxcclxuKSAtPiBSZXNwb25zZTpcclxuICAgIGlmIGRhdGEgaXMgbm90IHNlbnRpbmVsOlxyXG4gICAgICAgIGlmIHRleHQgb3IgYm9keTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigib25seSBvbmUgb2YgZGF0YSwgdGV4dCwgb3IgYm9keSBzaG91bGQgYmUgc3BlY2lmaWVkIilcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICB0ZXh0ID0gZHVtcHMoZGF0YSlcclxuICAgIHJldHVybiBSZXNwb25zZShcclxuICAgICAgICB0ZXh0PXRleHQsXHJcbiAgICAgICAgYm9keT1ib2R5LFxyXG4gICAgICAgIHN0YXR1cz1zdGF0dXMsXHJcbiAgICAgICAgcmVhc29uPXJlYXNvbixcclxuICAgICAgICBoZWFkZXJzPWhlYWRlcnMsXHJcbiAgICAgICAgY29udGVudF90eXBlPWNvbnRlbnRfdHlwZSxcclxuICAgIClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvd2ViX3Byb3RvY29sLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgYXN5bmNpby5zdHJlYW1zXHJcbmltcG9ydCB0cmFjZWJhY2tcclxuaW1wb3J0IHdhcm5pbmdzXHJcbmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IGRlcXVlXHJcbmZyb20gY29udGV4dGxpYiBpbXBvcnQgc3VwcHJlc3NcclxuZnJvbSBodG1sIGltcG9ydCBlc2NhcGUgYXMgaHRtbF9lc2NhcGVcclxuZnJvbSBodHRwIGltcG9ydCBIVFRQU3RhdHVzXHJcbmZyb20gbG9nZ2luZyBpbXBvcnQgTG9nZ2VyXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBUWVBFX0NIRUNLSU5HLFxyXG4gICAgQW55LFxyXG4gICAgQXdhaXRhYmxlLFxyXG4gICAgQ2FsbGFibGUsXHJcbiAgICBEZXF1ZSxcclxuICAgIE9wdGlvbmFsLFxyXG4gICAgU2VxdWVuY2UsXHJcbiAgICBUdXBsZSxcclxuICAgIFR5cGUsXHJcbiAgICBVbmlvbixcclxuICAgIGNhc3QsXHJcbilcclxuXHJcbmltcG9ydCBhdHRyXHJcbmltcG9ydCB5YXJsXHJcblxyXG5mcm9tIC5hYmMgaW1wb3J0IEFic3RyYWN0QWNjZXNzTG9nZ2VyLCBBYnN0cmFjdFN0cmVhbVdyaXRlclxyXG5mcm9tIC5iYXNlX3Byb3RvY29sIGltcG9ydCBCYXNlUHJvdG9jb2xcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgY2VpbF90aW1lb3V0XHJcbmZyb20gLmh0dHAgaW1wb3J0IChcclxuICAgIEh0dHBQcm9jZXNzaW5nRXJyb3IsXHJcbiAgICBIdHRwUmVxdWVzdFBhcnNlcixcclxuICAgIEh0dHBWZXJzaW9uMTAsXHJcbiAgICBSYXdSZXF1ZXN0TWVzc2FnZSxcclxuICAgIFN0cmVhbVdyaXRlcixcclxuKVxyXG5mcm9tIC5sb2cgaW1wb3J0IGFjY2Vzc19sb2dnZXIsIHNlcnZlcl9sb2dnZXJcclxuZnJvbSAuc3RyZWFtcyBpbXBvcnQgRU1QVFlfUEFZTE9BRCwgU3RyZWFtUmVhZGVyXHJcbmZyb20gLnRjcF9oZWxwZXJzIGltcG9ydCB0Y3Bfa2VlcGFsaXZlXHJcbmZyb20gLndlYl9leGNlcHRpb25zIGltcG9ydCBIVFRQRXhjZXB0aW9uXHJcbmZyb20gLndlYl9sb2cgaW1wb3J0IEFjY2Vzc0xvZ2dlclxyXG5mcm9tIC53ZWJfcmVxdWVzdCBpbXBvcnQgQmFzZVJlcXVlc3RcclxuZnJvbSAud2ViX3Jlc3BvbnNlIGltcG9ydCBSZXNwb25zZSwgU3RyZWFtUmVzcG9uc2VcclxuXHJcbl9fYWxsX18gPSAoIlJlcXVlc3RIYW5kbGVyIiwgIlJlcXVlc3RQYXlsb2FkRXJyb3IiLCAiUGF5bG9hZEFjY2Vzc0Vycm9yIilcclxuXHJcbmlmIFRZUEVfQ0hFQ0tJTkc6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIGZyb20gLndlYl9zZXJ2ZXIgaW1wb3J0IFNlcnZlclxyXG5cclxuXHJcbl9SZXF1ZXN0RmFjdG9yeSA9IENhbGxhYmxlW1xyXG4gICAgW1xyXG4gICAgICAgIFJhd1JlcXVlc3RNZXNzYWdlLFxyXG4gICAgICAgIFN0cmVhbVJlYWRlcixcclxuICAgICAgICAiUmVxdWVzdEhhbmRsZXIiLFxyXG4gICAgICAgIEFic3RyYWN0U3RyZWFtV3JpdGVyLFxyXG4gICAgICAgICJhc3luY2lvLlRhc2tbTm9uZV0iLFxyXG4gICAgXSxcclxuICAgIEJhc2VSZXF1ZXN0LFxyXG5dXHJcblxyXG5fUmVxdWVzdEhhbmRsZXIgPSBDYWxsYWJsZVtbQmFzZVJlcXVlc3RdLCBBd2FpdGFibGVbU3RyZWFtUmVzcG9uc2VdXVxyXG5cclxuRVJST1IgPSBSYXdSZXF1ZXN0TWVzc2FnZShcclxuICAgICJVTktOT1dOIixcclxuICAgICIvIixcclxuICAgIEh0dHBWZXJzaW9uMTAsXHJcbiAgICB7fSwgICMgdHlwZTogaWdub3JlW2FyZy10eXBlXVxyXG4gICAge30sICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZV1cclxuICAgIFRydWUsXHJcbiAgICBOb25lLFxyXG4gICAgRmFsc2UsXHJcbiAgICBGYWxzZSxcclxuICAgIHlhcmwuVVJMKCIvIiksXHJcbilcclxuXHJcblxyXG5jbGFzcyBSZXF1ZXN0UGF5bG9hZEVycm9yKEV4Y2VwdGlvbik6XHJcbiAgICAiIiJQYXlsb2FkIHBhcnNpbmcgZXJyb3IuIiIiXHJcblxyXG5cclxuY2xhc3MgUGF5bG9hZEFjY2Vzc0Vycm9yKEV4Y2VwdGlvbik6XHJcbiAgICAiIiJQYXlsb2FkIHdhcyBhY2Nlc3NlZCBhZnRlciByZXNwb25zZSB3YXMgc2VudC4iIiJcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgX0VyckluZm86XHJcbiAgICBzdGF0dXM6IGludFxyXG4gICAgZXhjOiBCYXNlRXhjZXB0aW9uXHJcbiAgICBtZXNzYWdlOiBzdHJcclxuXHJcblxyXG5fTXNnVHlwZSA9IFR1cGxlW1VuaW9uW1Jhd1JlcXVlc3RNZXNzYWdlLCBfRXJySW5mb10sIFN0cmVhbVJlYWRlcl1cclxuXHJcblxyXG5jbGFzcyBSZXF1ZXN0SGFuZGxlcihCYXNlUHJvdG9jb2wpOlxyXG4gICAgIiIiSFRUUCBwcm90b2NvbCBpbXBsZW1lbnRhdGlvbi5cclxuXHJcbiAgICBSZXF1ZXN0SGFuZGxlciBoYW5kbGVzIGluY29taW5nIEhUVFAgcmVxdWVzdC4gSXQgcmVhZHMgcmVxdWVzdCBsaW5lLFxyXG4gICAgcmVxdWVzdCBoZWFkZXJzIGFuZCByZXF1ZXN0IHBheWxvYWQgYW5kIGNhbGxzIGhhbmRsZV9yZXF1ZXN0KCkgbWV0aG9kLlxyXG4gICAgQnkgZGVmYXVsdCBpdCBhbHdheXMgcmV0dXJucyB3aXRoIDQwNCByZXNwb25zZS5cclxuXHJcbiAgICBSZXF1ZXN0SGFuZGxlciBoYW5kbGVzIGVycm9ycyBpbiBpbmNvbWluZyByZXF1ZXN0LCBsaWtlIGJhZFxyXG4gICAgc3RhdHVzIGxpbmUsIGJhZCBoZWFkZXJzIG9yIGluY29tcGxldGUgcGF5bG9hZC4gSWYgYW55IGVycm9yIG9jY3VycyxcclxuICAgIGNvbm5lY3Rpb24gZ2V0cyBjbG9zZWQuXHJcblxyXG4gICAga2VlcGFsaXZlX3RpbWVvdXQgLS0gbnVtYmVyIG9mIHNlY29uZHMgYmVmb3JlIGNsb3NpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgIGtlZXAtYWxpdmUgY29ubmVjdGlvblxyXG5cclxuICAgIHRjcF9rZWVwYWxpdmUgLS0gVENQIGtlZXAtYWxpdmUgaXMgb24sIGRlZmF1bHQgaXMgb25cclxuXHJcbiAgICBkZWJ1ZyAtLSBlbmFibGUgZGVidWcgbW9kZVxyXG5cclxuICAgIGxvZ2dlciAtLSBjdXN0b20gbG9nZ2VyIG9iamVjdFxyXG5cclxuICAgIGFjY2Vzc19sb2dfY2xhc3MgLS0gY3VzdG9tIGNsYXNzIGZvciBhY2Nlc3NfbG9nZ2VyXHJcblxyXG4gICAgYWNjZXNzX2xvZyAtLSBjdXN0b20gbG9nZ2luZyBvYmplY3RcclxuXHJcbiAgICBhY2Nlc3NfbG9nX2Zvcm1hdCAtLSBhY2Nlc3MgbG9nIGZvcm1hdCBzdHJpbmdcclxuXHJcbiAgICBsb29wIC0tIE9wdGlvbmFsIGV2ZW50IGxvb3BcclxuXHJcbiAgICBtYXhfbGluZV9zaXplIC0tIE9wdGlvbmFsIG1heGltdW0gaGVhZGVyIGxpbmUgc2l6ZVxyXG5cclxuICAgIG1heF9maWVsZF9zaXplIC0tIE9wdGlvbmFsIG1heGltdW0gaGVhZGVyIGZpZWxkIHNpemVcclxuXHJcbiAgICBtYXhfaGVhZGVycyAtLSBPcHRpb25hbCBtYXhpbXVtIGhlYWRlciBzaXplXHJcblxyXG4gICAgIiIiXHJcblxyXG4gICAgS0VFUEFMSVZFX1JFU0NIRURVTEVfREVMQVkgPSAxXHJcblxyXG4gICAgX19zbG90c19fID0gKFxyXG4gICAgICAgICJfcmVxdWVzdF9jb3VudCIsXHJcbiAgICAgICAgIl9rZWVwYWxpdmUiLFxyXG4gICAgICAgICJfbWFuYWdlciIsXHJcbiAgICAgICAgIl9yZXF1ZXN0X2hhbmRsZXIiLFxyXG4gICAgICAgICJfcmVxdWVzdF9mYWN0b3J5IixcclxuICAgICAgICAiX3RjcF9rZWVwYWxpdmUiLFxyXG4gICAgICAgICJfa2VlcGFsaXZlX3RpbWUiLFxyXG4gICAgICAgICJfa2VlcGFsaXZlX2hhbmRsZSIsXHJcbiAgICAgICAgIl9rZWVwYWxpdmVfdGltZW91dCIsXHJcbiAgICAgICAgIl9saW5nZXJpbmdfdGltZSIsXHJcbiAgICAgICAgIl9tZXNzYWdlcyIsXHJcbiAgICAgICAgIl9tZXNzYWdlX3RhaWwiLFxyXG4gICAgICAgICJfd2FpdGVyIixcclxuICAgICAgICAiX3Rhc2tfaGFuZGxlciIsXHJcbiAgICAgICAgIl91cGdyYWRlIixcclxuICAgICAgICAiX3BheWxvYWRfcGFyc2VyIixcclxuICAgICAgICAiX3JlcXVlc3RfcGFyc2VyIixcclxuICAgICAgICAiX3JlYWRpbmdfcGF1c2VkIixcclxuICAgICAgICAibG9nZ2VyIixcclxuICAgICAgICAiZGVidWciLFxyXG4gICAgICAgICJhY2Nlc3NfbG9nIixcclxuICAgICAgICAiYWNjZXNzX2xvZ2dlciIsXHJcbiAgICAgICAgIl9jbG9zZSIsXHJcbiAgICAgICAgIl9mb3JjZV9jbG9zZSIsXHJcbiAgICAgICAgIl9jdXJyZW50X3JlcXVlc3QiLFxyXG4gICAgKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG1hbmFnZXI6ICJTZXJ2ZXIiLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgbG9vcDogYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcCxcclxuICAgICAgICBrZWVwYWxpdmVfdGltZW91dDogZmxvYXQgPSA3NS4wLCAgIyBOR0lOWCBkZWZhdWx0IGlzIDc1IHNlY3NcclxuICAgICAgICB0Y3Bfa2VlcGFsaXZlOiBib29sID0gVHJ1ZSxcclxuICAgICAgICBsb2dnZXI6IExvZ2dlciA9IHNlcnZlcl9sb2dnZXIsXHJcbiAgICAgICAgYWNjZXNzX2xvZ19jbGFzczogVHlwZVtBYnN0cmFjdEFjY2Vzc0xvZ2dlcl0gPSBBY2Nlc3NMb2dnZXIsXHJcbiAgICAgICAgYWNjZXNzX2xvZzogTG9nZ2VyID0gYWNjZXNzX2xvZ2dlcixcclxuICAgICAgICBhY2Nlc3NfbG9nX2Zvcm1hdDogc3RyID0gQWNjZXNzTG9nZ2VyLkxPR19GT1JNQVQsXHJcbiAgICAgICAgZGVidWc6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBtYXhfbGluZV9zaXplOiBpbnQgPSA4MTkwLFxyXG4gICAgICAgIG1heF9oZWFkZXJzOiBpbnQgPSAzMjc2OCxcclxuICAgICAgICBtYXhfZmllbGRfc2l6ZTogaW50ID0gODE5MCxcclxuICAgICAgICBsaW5nZXJpbmdfdGltZTogZmxvYXQgPSAxMC4wLFxyXG4gICAgICAgIHJlYWRfYnVmc2l6ZTogaW50ID0gMiAqKiAxNixcclxuICAgICAgICBhdXRvX2RlY29tcHJlc3M6IGJvb2wgPSBUcnVlLFxyXG4gICAgKTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKGxvb3ApXHJcblxyXG4gICAgICAgIHNlbGYuX3JlcXVlc3RfY291bnQgPSAwXHJcbiAgICAgICAgc2VsZi5fa2VlcGFsaXZlID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9jdXJyZW50X3JlcXVlc3QgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0Jhc2VSZXF1ZXN0XVxyXG4gICAgICAgIHNlbGYuX21hbmFnZXIgPSBtYW5hZ2VyICAjIHR5cGU6IE9wdGlvbmFsW1NlcnZlcl1cclxuICAgICAgICBzZWxmLl9yZXF1ZXN0X2hhbmRsZXI6IE9wdGlvbmFsW19SZXF1ZXN0SGFuZGxlcl0gPSBtYW5hZ2VyLnJlcXVlc3RfaGFuZGxlclxyXG4gICAgICAgIHNlbGYuX3JlcXVlc3RfZmFjdG9yeTogT3B0aW9uYWxbX1JlcXVlc3RGYWN0b3J5XSA9IG1hbmFnZXIucmVxdWVzdF9mYWN0b3J5XHJcblxyXG4gICAgICAgIHNlbGYuX3RjcF9rZWVwYWxpdmUgPSB0Y3Bfa2VlcGFsaXZlXHJcbiAgICAgICAgIyBwbGFjZWhvbGRlciB0byBiZSByZXBsYWNlZCBvbiBrZWVwYWxpdmUgdGltZW91dCBzZXR1cFxyXG4gICAgICAgIHNlbGYuX2tlZXBhbGl2ZV90aW1lID0gMC4wXHJcbiAgICAgICAgc2VsZi5fa2VlcGFsaXZlX2hhbmRsZSA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5IYW5kbGVdXHJcbiAgICAgICAgc2VsZi5fa2VlcGFsaXZlX3RpbWVvdXQgPSBrZWVwYWxpdmVfdGltZW91dFxyXG4gICAgICAgIHNlbGYuX2xpbmdlcmluZ190aW1lID0gZmxvYXQobGluZ2VyaW5nX3RpbWUpXHJcblxyXG4gICAgICAgIHNlbGYuX21lc3NhZ2VzOiBEZXF1ZVtfTXNnVHlwZV0gPSBkZXF1ZSgpXHJcbiAgICAgICAgc2VsZi5fbWVzc2FnZV90YWlsID0gYiIiXHJcblxyXG4gICAgICAgIHNlbGYuX3dhaXRlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5GdXR1cmVbTm9uZV1dXHJcbiAgICAgICAgc2VsZi5fdGFza19oYW5kbGVyID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFthc3luY2lvLlRhc2tbTm9uZV1dXHJcblxyXG4gICAgICAgIHNlbGYuX3VwZ3JhZGUgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyID0gTm9uZSAgIyB0eXBlOiBBbnlcclxuICAgICAgICBzZWxmLl9yZXF1ZXN0X3BhcnNlciA9IEh0dHBSZXF1ZXN0UGFyc2VyKFxyXG4gICAgICAgICAgICBzZWxmLFxyXG4gICAgICAgICAgICBsb29wLFxyXG4gICAgICAgICAgICByZWFkX2J1ZnNpemUsXHJcbiAgICAgICAgICAgIG1heF9saW5lX3NpemU9bWF4X2xpbmVfc2l6ZSxcclxuICAgICAgICAgICAgbWF4X2ZpZWxkX3NpemU9bWF4X2ZpZWxkX3NpemUsXHJcbiAgICAgICAgICAgIG1heF9oZWFkZXJzPW1heF9oZWFkZXJzLFxyXG4gICAgICAgICAgICBwYXlsb2FkX2V4Y2VwdGlvbj1SZXF1ZXN0UGF5bG9hZEVycm9yLFxyXG4gICAgICAgICAgICBhdXRvX2RlY29tcHJlc3M9YXV0b19kZWNvbXByZXNzLFxyXG4gICAgICAgICkgICMgdHlwZTogT3B0aW9uYWxbSHR0cFJlcXVlc3RQYXJzZXJdXHJcblxyXG4gICAgICAgIHNlbGYubG9nZ2VyID0gbG9nZ2VyXHJcbiAgICAgICAgc2VsZi5kZWJ1ZyA9IGRlYnVnXHJcbiAgICAgICAgc2VsZi5hY2Nlc3NfbG9nID0gYWNjZXNzX2xvZ1xyXG4gICAgICAgIGlmIGFjY2Vzc19sb2c6XHJcbiAgICAgICAgICAgIHNlbGYuYWNjZXNzX2xvZ2dlciA9IGFjY2Vzc19sb2dfY2xhc3MoXHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NfbG9nLCBhY2Nlc3NfbG9nX2Zvcm1hdFxyXG4gICAgICAgICAgICApICAjIHR5cGU6IE9wdGlvbmFsW0Fic3RyYWN0QWNjZXNzTG9nZ2VyXVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuYWNjZXNzX2xvZ2dlciA9IE5vbmVcclxuXHJcbiAgICAgICAgc2VsZi5fY2xvc2UgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX2ZvcmNlX2Nsb3NlID0gRmFsc2VcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPHt9IHt9PiIuZm9ybWF0KFxyXG4gICAgICAgICAgICBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXyxcclxuICAgICAgICAgICAgImNvbm5lY3RlZCIgaWYgc2VsZi50cmFuc3BvcnQgaXMgbm90IE5vbmUgZWxzZSAiZGlzY29ubmVjdGVkIixcclxuICAgICAgICApXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2VlcGFsaXZlX3RpbWVvdXQoc2VsZikgLT4gZmxvYXQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2tlZXBhbGl2ZV90aW1lb3V0XHJcblxyXG4gICAgYXN5bmMgZGVmIHNodXRkb3duKHNlbGYsIHRpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IDE1LjApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiRG8gd29ya2VyIHByb2Nlc3MgZXhpdCBwcmVwYXJhdGlvbnMuXHJcblxyXG4gICAgICAgIFdlIG5lZWQgdG8gY2xlYW4gdXAgZXZlcnl0aGluZyBhbmQgc3RvcCBhY2NlcHRpbmcgcmVxdWVzdHMuXHJcbiAgICAgICAgSXQgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIGtlZXAtYWxpdmUgY29ubmVjdGlvbnMuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgc2VsZi5fZm9yY2VfY2xvc2UgPSBUcnVlXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2tlZXBhbGl2ZV9oYW5kbGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX2tlZXBhbGl2ZV9oYW5kbGUuY2FuY2VsKClcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fd2FpdGVyOlxyXG4gICAgICAgICAgICBzZWxmLl93YWl0ZXIuY2FuY2VsKClcclxuXHJcbiAgICAgICAgIyB3YWl0IGZvciBoYW5kbGVyc1xyXG4gICAgICAgIHdpdGggc3VwcHJlc3MoYXN5bmNpby5DYW5jZWxsZWRFcnJvciwgYXN5bmNpby5UaW1lb3V0RXJyb3IpOlxyXG4gICAgICAgICAgICBhc3luYyB3aXRoIGNlaWxfdGltZW91dCh0aW1lb3V0KTpcclxuICAgICAgICAgICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfcmVxdWVzdCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9jdXJyZW50X3JlcXVlc3QuX2NhbmNlbChhc3luY2lvLkNhbmNlbGxlZEVycm9yKCkpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fdGFza19oYW5kbGVyIGlzIG5vdCBOb25lIGFuZCBub3Qgc2VsZi5fdGFza19oYW5kbGVyLmRvbmUoKTpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLl90YXNrX2hhbmRsZXJcclxuXHJcbiAgICAgICAgIyBmb3JjZS1jbG9zZSBub24taWRsZSBoYW5kbGVyXHJcbiAgICAgICAgaWYgc2VsZi5fdGFza19oYW5kbGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl90YXNrX2hhbmRsZXIuY2FuY2VsKClcclxuXHJcbiAgICAgICAgaWYgc2VsZi50cmFuc3BvcnQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYudHJhbnNwb3J0LmNsb3NlKClcclxuICAgICAgICAgICAgc2VsZi50cmFuc3BvcnQgPSBOb25lXHJcblxyXG4gICAgZGVmIGNvbm5lY3Rpb25fbWFkZShzZWxmLCB0cmFuc3BvcnQ6IGFzeW5jaW8uQmFzZVRyYW5zcG9ydCkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLmNvbm5lY3Rpb25fbWFkZSh0cmFuc3BvcnQpXHJcblxyXG4gICAgICAgIHJlYWxfdHJhbnNwb3J0ID0gY2FzdChhc3luY2lvLlRyYW5zcG9ydCwgdHJhbnNwb3J0KVxyXG4gICAgICAgIGlmIHNlbGYuX3RjcF9rZWVwYWxpdmU6XHJcbiAgICAgICAgICAgIHRjcF9rZWVwYWxpdmUocmVhbF90cmFuc3BvcnQpXHJcblxyXG4gICAgICAgIHNlbGYuX3Rhc2tfaGFuZGxlciA9IHNlbGYuX2xvb3AuY3JlYXRlX3Rhc2soc2VsZi5zdGFydCgpKVxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9tYW5hZ2VyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgc2VsZi5fbWFuYWdlci5jb25uZWN0aW9uX21hZGUoc2VsZiwgcmVhbF90cmFuc3BvcnQpXHJcblxyXG4gICAgZGVmIGNvbm5lY3Rpb25fbG9zdChzZWxmLCBleGM6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX21hbmFnZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgc2VsZi5fbWFuYWdlci5jb25uZWN0aW9uX2xvc3Qoc2VsZiwgZXhjKVxyXG5cclxuICAgICAgICBzdXBlcigpLmNvbm5lY3Rpb25fbG9zdChleGMpXHJcblxyXG4gICAgICAgIHNlbGYuX21hbmFnZXIgPSBOb25lXHJcbiAgICAgICAgc2VsZi5fZm9yY2VfY2xvc2UgPSBUcnVlXHJcbiAgICAgICAgc2VsZi5fcmVxdWVzdF9mYWN0b3J5ID0gTm9uZVxyXG4gICAgICAgIHNlbGYuX3JlcXVlc3RfaGFuZGxlciA9IE5vbmVcclxuICAgICAgICBzZWxmLl9yZXF1ZXN0X3BhcnNlciA9IE5vbmVcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fa2VlcGFsaXZlX2hhbmRsZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fa2VlcGFsaXZlX2hhbmRsZS5jYW5jZWwoKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9jdXJyZW50X3JlcXVlc3QgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGlmIGV4YyBpcyBOb25lOlxyXG4gICAgICAgICAgICAgICAgZXhjID0gQ29ubmVjdGlvblJlc2V0RXJyb3IoIkNvbm5lY3Rpb24gbG9zdCIpXHJcbiAgICAgICAgICAgIHNlbGYuX2N1cnJlbnRfcmVxdWVzdC5fY2FuY2VsKGV4YylcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fdGFza19oYW5kbGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl90YXNrX2hhbmRsZXIuY2FuY2VsKClcclxuICAgICAgICBpZiBzZWxmLl93YWl0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3dhaXRlci5jYW5jZWwoKVxyXG5cclxuICAgICAgICBzZWxmLl90YXNrX2hhbmRsZXIgPSBOb25lXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX3BheWxvYWRfcGFyc2VyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlci5mZWVkX2VvZigpXHJcbiAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfcGFyc2VyID0gTm9uZVxyXG5cclxuICAgIGRlZiBzZXRfcGFyc2VyKHNlbGYsIHBhcnNlcjogQW55KSAtPiBOb25lOlxyXG4gICAgICAgICMgQWN0dWFsIHR5cGUgaXMgV2ViUmVhZGVyXHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3BheWxvYWRfcGFyc2VyIGlzIE5vbmVcclxuXHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZF9wYXJzZXIgPSBwYXJzZXJcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fbWVzc2FnZV90YWlsOlxyXG4gICAgICAgICAgICBzZWxmLl9wYXlsb2FkX3BhcnNlci5mZWVkX2RhdGEoc2VsZi5fbWVzc2FnZV90YWlsKVxyXG4gICAgICAgICAgICBzZWxmLl9tZXNzYWdlX3RhaWwgPSBiIiJcclxuXHJcbiAgICBkZWYgZW9mX3JlY2VpdmVkKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcGFzc1xyXG5cclxuICAgIGRlZiBkYXRhX3JlY2VpdmVkKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2ZvcmNlX2Nsb3NlIG9yIHNlbGYuX2Nsb3NlOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAjIHBhcnNlIGh0dHAgbWVzc2FnZXNcclxuICAgICAgICBtZXNzYWdlczogU2VxdWVuY2VbX01zZ1R5cGVdXHJcbiAgICAgICAgaWYgc2VsZi5fcGF5bG9hZF9wYXJzZXIgaXMgTm9uZSBhbmQgbm90IHNlbGYuX3VwZ3JhZGU6XHJcbiAgICAgICAgICAgIGFzc2VydCBzZWxmLl9yZXF1ZXN0X3BhcnNlciBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlcywgdXBncmFkZWQsIHRhaWwgPSBzZWxmLl9yZXF1ZXN0X3BhcnNlci5mZWVkX2RhdGEoZGF0YSlcclxuICAgICAgICAgICAgZXhjZXB0IEh0dHBQcm9jZXNzaW5nRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgKF9FcnJJbmZvKHN0YXR1cz00MDAsIGV4Yz1leGMsIG1lc3NhZ2U9ZXhjLm1lc3NhZ2UpLCBFTVBUWV9QQVlMT0FEKVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgdXBncmFkZWQgPSBGYWxzZVxyXG4gICAgICAgICAgICAgICAgdGFpbCA9IGIiIlxyXG5cclxuICAgICAgICAgICAgZm9yIG1zZywgcGF5bG9hZCBpbiBtZXNzYWdlcyBvciAoKTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3JlcXVlc3RfY291bnQgKz0gMVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbWVzc2FnZXMuYXBwZW5kKChtc2csIHBheWxvYWQpKVxyXG5cclxuICAgICAgICAgICAgd2FpdGVyID0gc2VsZi5fd2FpdGVyXHJcbiAgICAgICAgICAgIGlmIG1lc3NhZ2VzIGFuZCB3YWl0ZXIgaXMgbm90IE5vbmUgYW5kIG5vdCB3YWl0ZXIuZG9uZSgpOlxyXG4gICAgICAgICAgICAgICAgIyBkb25cJ3Qgc2V0IHJlc3VsdCB0d2ljZVxyXG4gICAgICAgICAgICAgICAgd2FpdGVyLnNldF9yZXN1bHQoTm9uZSlcclxuXHJcbiAgICAgICAgICAgIHNlbGYuX3VwZ3JhZGUgPSB1cGdyYWRlZFxyXG4gICAgICAgICAgICBpZiB1cGdyYWRlZCBhbmQgdGFpbDpcclxuICAgICAgICAgICAgICAgIHNlbGYuX21lc3NhZ2VfdGFpbCA9IHRhaWxcclxuXHJcbiAgICAgICAgIyBubyBwYXJzZXIsIGp1c3Qgc3RvcmVcclxuICAgICAgICBlbGlmIHNlbGYuX3BheWxvYWRfcGFyc2VyIGlzIE5vbmUgYW5kIHNlbGYuX3VwZ3JhZGUgYW5kIGRhdGE6XHJcbiAgICAgICAgICAgIHNlbGYuX21lc3NhZ2VfdGFpbCArPSBkYXRhXHJcblxyXG4gICAgICAgICMgZmVlZCBwYXlsb2FkXHJcbiAgICAgICAgZWxpZiBkYXRhOlxyXG4gICAgICAgICAgICBlb2YsIHRhaWwgPSBzZWxmLl9wYXlsb2FkX3BhcnNlci5mZWVkX2RhdGEoZGF0YSlcclxuICAgICAgICAgICAgaWYgZW9mOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5jbG9zZSgpXHJcblxyXG4gICAgZGVmIGtlZXBfYWxpdmUoc2VsZiwgdmFsOiBib29sKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlNldCBrZWVwLWFsaXZlIGNvbm5lY3Rpb24gbW9kZS5cclxuXHJcbiAgICAgICAgOnBhcmFtIGJvb2wgdmFsOiBuZXcgc3RhdGUuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgc2VsZi5fa2VlcGFsaXZlID0gdmFsXHJcbiAgICAgICAgaWYgc2VsZi5fa2VlcGFsaXZlX2hhbmRsZTpcclxuICAgICAgICAgICAgc2VsZi5fa2VlcGFsaXZlX2hhbmRsZS5jYW5jZWwoKVxyXG4gICAgICAgICAgICBzZWxmLl9rZWVwYWxpdmVfaGFuZGxlID0gTm9uZVxyXG5cclxuICAgIGRlZiBjbG9zZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkNsb3NlIGNvbm5lY3Rpb24uXHJcblxyXG4gICAgICAgIFN0b3AgYWNjZXB0aW5nIG5ldyBwaXBlbGluaW5nIG1lc3NhZ2VzIGFuZCBjbG9zZVxyXG4gICAgICAgIGNvbm5lY3Rpb24gd2hlbiBoYW5kbGVycyBkb25lIHByb2Nlc3NpbmcgbWVzc2FnZXMuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgc2VsZi5fY2xvc2UgPSBUcnVlXHJcbiAgICAgICAgaWYgc2VsZi5fd2FpdGVyOlxyXG4gICAgICAgICAgICBzZWxmLl93YWl0ZXIuY2FuY2VsKClcclxuXHJcbiAgICBkZWYgZm9yY2VfY2xvc2Uoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAiIiJGb3JjZWZ1bGx5IGNsb3NlIGNvbm5lY3Rpb24uIiIiXHJcbiAgICAgICAgc2VsZi5fZm9yY2VfY2xvc2UgPSBUcnVlXHJcbiAgICAgICAgaWYgc2VsZi5fd2FpdGVyOlxyXG4gICAgICAgICAgICBzZWxmLl93YWl0ZXIuY2FuY2VsKClcclxuICAgICAgICBpZiBzZWxmLnRyYW5zcG9ydCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi50cmFuc3BvcnQuY2xvc2UoKVxyXG4gICAgICAgICAgICBzZWxmLnRyYW5zcG9ydCA9IE5vbmVcclxuXHJcbiAgICBkZWYgbG9nX2FjY2VzcyhcclxuICAgICAgICBzZWxmLCByZXF1ZXN0OiBCYXNlUmVxdWVzdCwgcmVzcG9uc2U6IFN0cmVhbVJlc3BvbnNlLCB0aW1lOiBmbG9hdFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuYWNjZXNzX2xvZ2dlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5hY2Nlc3NfbG9nZ2VyLmxvZyhyZXF1ZXN0LCByZXNwb25zZSwgc2VsZi5fbG9vcC50aW1lKCkgLSB0aW1lKVxyXG5cclxuICAgIGRlZiBsb2dfZGVidWcoc2VsZiwgKmFyZ3M6IEFueSwgKiprdzogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuZGVidWc6XHJcbiAgICAgICAgICAgIHNlbGYubG9nZ2VyLmRlYnVnKCphcmdzLCAqKmt3KVxyXG5cclxuICAgIGRlZiBsb2dfZXhjZXB0aW9uKHNlbGYsICphcmdzOiBBbnksICoqa3c6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmxvZ2dlci5leGNlcHRpb24oKmFyZ3MsICoqa3cpXHJcblxyXG4gICAgZGVmIF9wcm9jZXNzX2tlZXBhbGl2ZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2ZvcmNlX2Nsb3NlIG9yIG5vdCBzZWxmLl9rZWVwYWxpdmU6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBuZXh0ID0gc2VsZi5fa2VlcGFsaXZlX3RpbWUgKyBzZWxmLl9rZWVwYWxpdmVfdGltZW91dFxyXG5cclxuICAgICAgICAjIGhhbmRsZXIgaW4gaWRsZSBzdGF0ZVxyXG4gICAgICAgIGlmIHNlbGYuX3dhaXRlcjpcclxuICAgICAgICAgICAgaWYgc2VsZi5fbG9vcC50aW1lKCkgPiBuZXh0OlxyXG4gICAgICAgICAgICAgICAgc2VsZi5mb3JjZV9jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgIyBub3QgYWxsIHJlcXVlc3QgaGFuZGxlcnMgYXJlIGRvbmUsXHJcbiAgICAgICAgIyByZXNjaGVkdWxlIGl0c2VsZiB0byBuZXh0IHNlY29uZFxyXG4gICAgICAgIHNlbGYuX2tlZXBhbGl2ZV9oYW5kbGUgPSBzZWxmLl9sb29wLmNhbGxfbGF0ZXIoXHJcbiAgICAgICAgICAgIHNlbGYuS0VFUEFMSVZFX1JFU0NIRURVTEVfREVMQVksIHNlbGYuX3Byb2Nlc3Nfa2VlcGFsaXZlXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfaGFuZGxlX3JlcXVlc3QoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICByZXF1ZXN0OiBCYXNlUmVxdWVzdCxcclxuICAgICAgICBzdGFydF90aW1lOiBmbG9hdCxcclxuICAgICAgICByZXF1ZXN0X2hhbmRsZXI6IENhbGxhYmxlW1tCYXNlUmVxdWVzdF0sIEF3YWl0YWJsZVtTdHJlYW1SZXNwb25zZV1dLFxyXG4gICAgKSAtPiBUdXBsZVtTdHJlYW1SZXNwb25zZSwgYm9vbF06XHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3JlcXVlc3RfaGFuZGxlciBpcyBub3QgTm9uZVxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY3VycmVudF9yZXF1ZXN0ID0gcmVxdWVzdFxyXG4gICAgICAgICAgICAgICAgcmVzcCA9IGF3YWl0IHJlcXVlc3RfaGFuZGxlcihyZXF1ZXN0KVxyXG4gICAgICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY3VycmVudF9yZXF1ZXN0ID0gTm9uZVxyXG4gICAgICAgIGV4Y2VwdCBIVFRQRXhjZXB0aW9uIGFzIGV4YzpcclxuICAgICAgICAgICAgcmVzcCA9IGV4Y1xyXG4gICAgICAgICAgICByZXNldCA9IGF3YWl0IHNlbGYuZmluaXNoX3Jlc3BvbnNlKHJlcXVlc3QsIHJlc3AsIHN0YXJ0X3RpbWUpXHJcbiAgICAgICAgZXhjZXB0IGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3I6XHJcbiAgICAgICAgICAgIHJhaXNlXHJcbiAgICAgICAgZXhjZXB0IGFzeW5jaW8uVGltZW91dEVycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgc2VsZi5sb2dfZGVidWcoIlJlcXVlc3QgaGFuZGxlciB0aW1lZCBvdXQuIiwgZXhjX2luZm89ZXhjKVxyXG4gICAgICAgICAgICByZXNwID0gc2VsZi5oYW5kbGVfZXJyb3IocmVxdWVzdCwgNTA0KVxyXG4gICAgICAgICAgICByZXNldCA9IGF3YWl0IHNlbGYuZmluaXNoX3Jlc3BvbnNlKHJlcXVlc3QsIHJlc3AsIHN0YXJ0X3RpbWUpXHJcbiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleGM6XHJcbiAgICAgICAgICAgIHJlc3AgPSBzZWxmLmhhbmRsZV9lcnJvcihyZXF1ZXN0LCA1MDAsIGV4YylcclxuICAgICAgICAgICAgcmVzZXQgPSBhd2FpdCBzZWxmLmZpbmlzaF9yZXNwb25zZShyZXF1ZXN0LCByZXNwLCBzdGFydF90aW1lKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICMgRGVwcmVjYXRpb24gd2FybmluZyAoU2VlICMyNDE1KVxyXG4gICAgICAgICAgICBpZiBnZXRhdHRyKHJlc3AsICJfX2h0dHBfZXhjZXB0aW9uX18iLCBGYWxzZSk6XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAgICAgICAgICJyZXR1cm5pbmcgSFRUUEV4Y2VwdGlvbiBvYmplY3QgaXMgZGVwcmVjYXRlZCAiXHJcbiAgICAgICAgICAgICAgICAgICAgIigjMjQxNSkgYW5kIHdpbGwgYmUgcmVtb3ZlZCwgIlxyXG4gICAgICAgICAgICAgICAgICAgICJwbGVhc2UgcmFpc2UgdGhlIGV4Y2VwdGlvbiBpbnN0ZWFkIixcclxuICAgICAgICAgICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICByZXNldCA9IGF3YWl0IHNlbGYuZmluaXNoX3Jlc3BvbnNlKHJlcXVlc3QsIHJlc3AsIHN0YXJ0X3RpbWUpXHJcblxyXG4gICAgICAgIHJldHVybiByZXNwLCByZXNldFxyXG5cclxuICAgIGFzeW5jIGRlZiBzdGFydChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlByb2Nlc3MgaW5jb21pbmcgcmVxdWVzdC5cclxuXHJcbiAgICAgICAgSXQgcmVhZHMgcmVxdWVzdCBsaW5lLCByZXF1ZXN0IGhlYWRlcnMgYW5kIHJlcXVlc3QgcGF5bG9hZCwgdGhlblxyXG4gICAgICAgIGNhbGxzIGhhbmRsZV9yZXF1ZXN0KCkgbWV0aG9kLiBTdWJjbGFzcyBoYXMgdG8gb3ZlcnJpZGVcclxuICAgICAgICBoYW5kbGVfcmVxdWVzdCgpLiBzdGFydCgpIGhhbmRsZXMgdmFyaW91cyBleGNlcHRpb25zIGluIHJlcXVlc3RcclxuICAgICAgICBvciByZXNwb25zZSBoYW5kbGluZy4gQ29ubmVjdGlvbiBpcyBiZWluZyBjbG9zZWQgYWx3YXlzIHVubGVzc1xyXG4gICAgICAgIGtlZXBfYWxpdmUoVHJ1ZSkgc3BlY2lmaWVkLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGxvb3AgPSBzZWxmLl9sb29wXHJcbiAgICAgICAgaGFuZGxlciA9IHNlbGYuX3Rhc2tfaGFuZGxlclxyXG4gICAgICAgIGFzc2VydCBoYW5kbGVyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgbWFuYWdlciA9IHNlbGYuX21hbmFnZXJcclxuICAgICAgICBhc3NlcnQgbWFuYWdlciBpcyBub3QgTm9uZVxyXG4gICAgICAgIGtlZXBhbGl2ZV90aW1lb3V0ID0gc2VsZi5fa2VlcGFsaXZlX3RpbWVvdXRcclxuICAgICAgICByZXNwID0gTm9uZVxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9yZXF1ZXN0X2ZhY3RvcnkgaXMgbm90IE5vbmVcclxuICAgICAgICBhc3NlcnQgc2VsZi5fcmVxdWVzdF9oYW5kbGVyIGlzIG5vdCBOb25lXHJcblxyXG4gICAgICAgIHdoaWxlIG5vdCBzZWxmLl9mb3JjZV9jbG9zZTpcclxuICAgICAgICAgICAgaWYgbm90IHNlbGYuX21lc3NhZ2VzOlxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICMgd2FpdCBmb3IgbmV4dCByZXF1ZXN0XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fd2FpdGVyID0gbG9vcC5jcmVhdGVfZnV0dXJlKClcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLl93YWl0ZXJcclxuICAgICAgICAgICAgICAgIGV4Y2VwdCBhc3luY2lvLkNhbmNlbGxlZEVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3dhaXRlciA9IE5vbmVcclxuXHJcbiAgICAgICAgICAgIG1lc3NhZ2UsIHBheWxvYWQgPSBzZWxmLl9tZXNzYWdlcy5wb3BsZWZ0KClcclxuXHJcbiAgICAgICAgICAgIHN0YXJ0ID0gbG9vcC50aW1lKClcclxuXHJcbiAgICAgICAgICAgIG1hbmFnZXIucmVxdWVzdHNfY291bnQgKz0gMVxyXG4gICAgICAgICAgICB3cml0ZXIgPSBTdHJlYW1Xcml0ZXIoc2VsZiwgbG9vcClcclxuICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShtZXNzYWdlLCBfRXJySW5mbyk6XHJcbiAgICAgICAgICAgICAgICAjIG1ha2UgcmVxdWVzdF9mYWN0b3J5IHdvcmtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RfaGFuZGxlciA9IHNlbGYuX21ha2VfZXJyb3JfaGFuZGxlcihtZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IEVSUk9SXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0X2hhbmRsZXIgPSBzZWxmLl9yZXF1ZXN0X2hhbmRsZXJcclxuXHJcbiAgICAgICAgICAgIHJlcXVlc3QgPSBzZWxmLl9yZXF1ZXN0X2ZhY3RvcnkobWVzc2FnZSwgcGF5bG9hZCwgc2VsZiwgd3JpdGVyLCBoYW5kbGVyKVxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAjIGEgbmV3IHRhc2sgaXMgdXNlZCBmb3IgY29weSBjb250ZXh0IHZhcnMgKCMzNDA2KVxyXG4gICAgICAgICAgICAgICAgdGFzayA9IHNlbGYuX2xvb3AuY3JlYXRlX3Rhc2soXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5faGFuZGxlX3JlcXVlc3QocmVxdWVzdCwgc3RhcnQsIHJlcXVlc3RfaGFuZGxlcilcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwLCByZXNldCA9IGF3YWl0IHRhc2tcclxuICAgICAgICAgICAgICAgIGV4Y2VwdCAoYXN5bmNpby5DYW5jZWxsZWRFcnJvciwgQ29ubmVjdGlvbkVycm9yKTpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZ19kZWJ1ZygiSWdub3JlZCBwcmVtYXR1cmUgY2xpZW50IGRpc2Nvbm5lY3Rpb24iKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICAgICAgIyBEcm9wIHRoZSBwcm9jZXNzZWQgdGFzayBmcm9tIGFzeW5jaW8uVGFzay5hbGxfdGFza3MoKSBlYXJseVxyXG4gICAgICAgICAgICAgICAgZGVsIHRhc2tcclxuICAgICAgICAgICAgICAgIGlmIHJlc2V0OlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9nX2RlYnVnKCJJZ25vcmVkIHByZW1hdHVyZSBjbGllbnQgZGlzY29ubmVjdGlvbiAyIilcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICAgICAgICAgICMgbm90aWZ5IHNlcnZlciBhYm91dCBrZWVwLWFsaXZlXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9rZWVwYWxpdmUgPSBib29sKHJlc3Aua2VlcF9hbGl2ZSlcclxuXHJcbiAgICAgICAgICAgICAgICAjIGNoZWNrIHBheWxvYWRcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBwYXlsb2FkLmlzX2VvZigpOlxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmdlcmluZ190aW1lID0gc2VsZi5fbGluZ2VyaW5nX3RpbWVcclxuICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5fZm9yY2VfY2xvc2UgYW5kIGxpbmdlcmluZ190aW1lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZ19kZWJ1ZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTdGFydCBsaW5nZXJpbmcgY2xvc2UgdGltZXIgZm9yICVzIHNlYy4iLCBsaW5nZXJpbmdfdGltZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBsb29wLnRpbWUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRfdCA9IG5vdyArIGxpbmdlcmluZ190aW1lXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aXRoIHN1cHByZXNzKGFzeW5jaW8uVGltZW91dEVycm9yLCBhc3luY2lvLkNhbmNlbGxlZEVycm9yKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIG5vdCBwYXlsb2FkLmlzX2VvZigpIGFuZCBub3cgPCBlbmRfdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3luYyB3aXRoIGNlaWxfdGltZW91dChlbmRfdCAtIG5vdyk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgcmVhZCBhbmQgaWdub3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBheWxvYWQucmVhZGFueSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93ID0gbG9vcC50aW1lKClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgIyBpZiBwYXlsb2FkIHN0aWxsIHVuY29tcGxldGVkXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHBheWxvYWQuaXNfZW9mKCkgYW5kIG5vdCBzZWxmLl9mb3JjZV9jbG9zZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2dfZGVidWcoIlVuY29tcGxldGVkIHJlcXVlc3QuIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZSgpXHJcblxyXG4gICAgICAgICAgICAgICAgcGF5bG9hZC5zZXRfZXhjZXB0aW9uKFBheWxvYWRBY2Nlc3NFcnJvcigpKVxyXG5cclxuICAgICAgICAgICAgZXhjZXB0IGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3I6XHJcbiAgICAgICAgICAgICAgICBzZWxmLmxvZ19kZWJ1ZygiSWdub3JlZCBwcmVtYXR1cmUgY2xpZW50IGRpc2Nvbm5lY3Rpb24gIilcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGV4Y2VwdCBSdW50aW1lRXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5kZWJ1ZzpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZ19leGNlcHRpb24oIlVuaGFuZGxlZCBydW50aW1lIGV4Y2VwdGlvbiIsIGV4Y19pbmZvPWV4YylcclxuICAgICAgICAgICAgICAgIHNlbGYuZm9yY2VfY2xvc2UoKVxyXG4gICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgIHNlbGYubG9nX2V4Y2VwdGlvbigiVW5oYW5kbGVkIGV4Y2VwdGlvbiIsIGV4Y19pbmZvPWV4YylcclxuICAgICAgICAgICAgICAgIHNlbGYuZm9yY2VfY2xvc2UoKVxyXG4gICAgICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi50cmFuc3BvcnQgaXMgTm9uZSBhbmQgcmVzcCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZ19kZWJ1ZygiSWdub3JlZCBwcmVtYXR1cmUgY2xpZW50IGRpc2Nvbm5lY3Rpb24uIilcclxuICAgICAgICAgICAgICAgIGVsaWYgbm90IHNlbGYuX2ZvcmNlX2Nsb3NlOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX2tlZXBhbGl2ZSBhbmQgbm90IHNlbGYuX2Nsb3NlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjIHN0YXJ0IGtlZXAtYWxpdmUgdGltZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYga2VlcGFsaXZlX3RpbWVvdXQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBzZWxmLl9sb29wLnRpbWUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fa2VlcGFsaXZlX3RpbWUgPSBub3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX2tlZXBhbGl2ZV9oYW5kbGUgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9rZWVwYWxpdmVfaGFuZGxlID0gbG9vcC5jYWxsX2F0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgKyBrZWVwYWxpdmVfdGltZW91dCwgc2VsZi5fcHJvY2Vzc19rZWVwYWxpdmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgIyByZW1vdmUgaGFuZGxlciwgY2xvc2UgdHJhbnNwb3J0IGlmIG5vIGhhbmRsZXJzIGxlZnRcclxuICAgICAgICBpZiBub3Qgc2VsZi5fZm9yY2VfY2xvc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX3Rhc2tfaGFuZGxlciA9IE5vbmVcclxuICAgICAgICAgICAgaWYgc2VsZi50cmFuc3BvcnQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICBzZWxmLnRyYW5zcG9ydC5jbG9zZSgpXHJcblxyXG4gICAgYXN5bmMgZGVmIGZpbmlzaF9yZXNwb25zZShcclxuICAgICAgICBzZWxmLCByZXF1ZXN0OiBCYXNlUmVxdWVzdCwgcmVzcDogU3RyZWFtUmVzcG9uc2UsIHN0YXJ0X3RpbWU6IGZsb2F0XHJcbiAgICApIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiUHJlcGFyZSB0aGUgcmVzcG9uc2UgYW5kIHdyaXRlX2VvZiwgdGhlbiBsb2cgYWNjZXNzLlxyXG5cclxuICAgICAgICBUaGlzIGhhcyB0b1xyXG4gICAgICAgIGJlIGNhbGxlZCB3aXRoaW4gdGhlIGNvbnRleHQgb2YgYW55IGV4Y2VwdGlvbiBzbyB0aGUgYWNjZXNzIGxvZ2dlclxyXG4gICAgICAgIGNhbiBnZXQgZXhjZXB0aW9uIGluZm9ybWF0aW9uLiBSZXR1cm5zIFRydWUgaWYgdGhlIGNsaWVudCBkaXNjb25uZWN0c1xyXG4gICAgICAgIHByZW1hdHVyZWx5LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHNlbGYuX3JlcXVlc3RfcGFyc2VyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9yZXF1ZXN0X3BhcnNlci5zZXRfdXBncmFkZWQoRmFsc2UpXHJcbiAgICAgICAgICAgIHNlbGYuX3VwZ3JhZGUgPSBGYWxzZVxyXG4gICAgICAgICAgICBpZiBzZWxmLl9tZXNzYWdlX3RhaWw6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9yZXF1ZXN0X3BhcnNlci5mZWVkX2RhdGEoc2VsZi5fbWVzc2FnZV90YWlsKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbWVzc2FnZV90YWlsID0gYiIiXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBwcmVwYXJlX21ldGggPSByZXNwLnByZXBhcmVcclxuICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6XHJcbiAgICAgICAgICAgIGlmIHJlc3AgaXMgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiTWlzc2luZyByZXR1cm4gIiAic3RhdGVtZW50IG9uIHJlcXVlc3QgaGFuZGxlciIpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIldlYi1oYW5kbGVyIHNob3VsZCByZXR1cm4gIlxyXG4gICAgICAgICAgICAgICAgICAgICJhIHJlc3BvbnNlIGluc3RhbmNlLCAiXHJcbiAgICAgICAgICAgICAgICAgICAgImdvdCB7IXJ9Ii5mb3JtYXQocmVzcClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGF3YWl0IHByZXBhcmVfbWV0aChyZXF1ZXN0KVxyXG4gICAgICAgICAgICBhd2FpdCByZXNwLndyaXRlX2VvZigpXHJcbiAgICAgICAgZXhjZXB0IENvbm5lY3Rpb25FcnJvcjpcclxuICAgICAgICAgICAgc2VsZi5sb2dfYWNjZXNzKHJlcXVlc3QsIHJlc3AsIHN0YXJ0X3RpbWUpXHJcbiAgICAgICAgICAgIHJldHVybiBUcnVlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5sb2dfYWNjZXNzKHJlcXVlc3QsIHJlc3AsIHN0YXJ0X3RpbWUpXHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgIGRlZiBoYW5kbGVfZXJyb3IoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICByZXF1ZXN0OiBCYXNlUmVxdWVzdCxcclxuICAgICAgICBzdGF0dXM6IGludCA9IDUwMCxcclxuICAgICAgICBleGM6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dID0gTm9uZSxcclxuICAgICAgICBtZXNzYWdlOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICkgLT4gU3RyZWFtUmVzcG9uc2U6XHJcbiAgICAgICAgIiIiSGFuZGxlIGVycm9ycy5cclxuXHJcbiAgICAgICAgUmV0dXJucyBIVFRQIHJlc3BvbnNlIHdpdGggc3BlY2lmaWMgc3RhdHVzIGNvZGUuIExvZ3MgYWRkaXRpb25hbFxyXG4gICAgICAgIGluZm9ybWF0aW9uLiBJdCBhbHdheXMgY2xvc2VzIGN1cnJlbnQgY29ubmVjdGlvbi5cclxuICAgICAgICAiIiJcclxuICAgICAgICBzZWxmLmxvZ19leGNlcHRpb24oIkVycm9yIGhhbmRsaW5nIHJlcXVlc3QiLCBleGNfaW5mbz1leGMpXHJcblxyXG4gICAgICAgICMgc29tZSBkYXRhIGFscmVhZHkgZ290IHNlbnQsIGNvbm5lY3Rpb24gaXMgYnJva2VuXHJcbiAgICAgICAgaWYgcmVxdWVzdC53cml0ZXIub3V0cHV0X3NpemUgPiAwOlxyXG4gICAgICAgICAgICByYWlzZSBDb25uZWN0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiUmVzcG9uc2UgaXMgc2VudCBhbHJlYWR5LCBjYW5ub3Qgc2VuZCBhbm90aGVyIHJlc3BvbnNlICJcclxuICAgICAgICAgICAgICAgICJ3aXRoIHRoZSBlcnJvciBtZXNzYWdlIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGN0ID0gInRleHQvcGxhaW4iXHJcbiAgICAgICAgaWYgc3RhdHVzID09IEhUVFBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SOlxyXG4gICAgICAgICAgICB0aXRsZSA9ICJ7MC52YWx1ZX0gezAucGhyYXNlfSIuZm9ybWF0KEhUVFBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SKVxyXG4gICAgICAgICAgICBtc2cgPSBIVFRQU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUi5kZXNjcmlwdGlvblxyXG4gICAgICAgICAgICB0YiA9IE5vbmVcclxuICAgICAgICAgICAgaWYgc2VsZi5kZWJ1ZzpcclxuICAgICAgICAgICAgICAgIHdpdGggc3VwcHJlc3MoRXhjZXB0aW9uKTpcclxuICAgICAgICAgICAgICAgICAgICB0YiA9IHRyYWNlYmFjay5mb3JtYXRfZXhjKClcclxuXHJcbiAgICAgICAgICAgIGlmICJ0ZXh0L2h0bWwiIGluIHJlcXVlc3QuaGVhZGVycy5nZXQoIkFjY2VwdCIsICIiKTpcclxuICAgICAgICAgICAgICAgIGlmIHRiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRiID0gaHRtbF9lc2NhcGUodGIpXHJcbiAgICAgICAgICAgICAgICAgICAgbXNnID0gZiI8aDI+VHJhY2ViYWNrOjwvaDI+XFxuPHByZT57dGJ9PC9wcmU+IlxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IChcclxuICAgICAgICAgICAgICAgICAgICAiPGh0bWw+PGhlYWQ+IlxyXG4gICAgICAgICAgICAgICAgICAgICI8dGl0bGU+e3RpdGxlfTwvdGl0bGU+IlxyXG4gICAgICAgICAgICAgICAgICAgICI8L2hlYWQ+PGJvZHk+XFxuPGgxPnt0aXRsZX08L2gxPiJcclxuICAgICAgICAgICAgICAgICAgICAiXFxue21zZ31cXG48L2JvZHk+PC9odG1sPlxcbiJcclxuICAgICAgICAgICAgICAgICkuZm9ybWF0KHRpdGxlPXRpdGxlLCBtc2c9bXNnKVxyXG4gICAgICAgICAgICAgICAgY3QgPSAidGV4dC9odG1sIlxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgaWYgdGI6XHJcbiAgICAgICAgICAgICAgICAgICAgbXNnID0gdGJcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSB0aXRsZSArICJcXG5cXG4iICsgbXNnXHJcblxyXG4gICAgICAgIHJlc3AgPSBSZXNwb25zZShzdGF0dXM9c3RhdHVzLCB0ZXh0PW1lc3NhZ2UsIGNvbnRlbnRfdHlwZT1jdClcclxuICAgICAgICByZXNwLmZvcmNlX2Nsb3NlKClcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3BcclxuXHJcbiAgICBkZWYgX21ha2VfZXJyb3JfaGFuZGxlcihcclxuICAgICAgICBzZWxmLCBlcnJfaW5mbzogX0VyckluZm9cclxuICAgICkgLT4gQ2FsbGFibGVbW0Jhc2VSZXF1ZXN0XSwgQXdhaXRhYmxlW1N0cmVhbVJlc3BvbnNlXV06XHJcbiAgICAgICAgYXN5bmMgZGVmIGhhbmRsZXIocmVxdWVzdDogQmFzZVJlcXVlc3QpIC0+IFN0cmVhbVJlc3BvbnNlOlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5oYW5kbGVfZXJyb3IoXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LCBlcnJfaW5mby5zdGF0dXMsIGVycl9pbmZvLmV4YywgZXJyX2luZm8ubWVzc2FnZVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBoYW5kbGVyXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3dlYl9zZXJ2ZXIucHknLCBiJyIiIkxvdyBsZXZlbCBIVFRQIHNlcnZlci4iIiJcclxuaW1wb3J0IGFzeW5jaW9cclxuZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgQXdhaXRhYmxlLCBDYWxsYWJsZSwgRGljdCwgTGlzdCwgT3B0aW9uYWwgICMgbm9xYVxyXG5cclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdFN0cmVhbVdyaXRlclxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBnZXRfcnVubmluZ19sb29wXHJcbmZyb20gLmh0dHBfcGFyc2VyIGltcG9ydCBSYXdSZXF1ZXN0TWVzc2FnZVxyXG5mcm9tIC5zdHJlYW1zIGltcG9ydCBTdHJlYW1SZWFkZXJcclxuZnJvbSAud2ViX3Byb3RvY29sIGltcG9ydCBSZXF1ZXN0SGFuZGxlciwgX1JlcXVlc3RGYWN0b3J5LCBfUmVxdWVzdEhhbmRsZXJcclxuZnJvbSAud2ViX3JlcXVlc3QgaW1wb3J0IEJhc2VSZXF1ZXN0XHJcblxyXG5fX2FsbF9fID0gKCJTZXJ2ZXIiLClcclxuXHJcblxyXG5jbGFzcyBTZXJ2ZXI6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBoYW5kbGVyOiBfUmVxdWVzdEhhbmRsZXIsXHJcbiAgICAgICAgKixcclxuICAgICAgICByZXF1ZXN0X2ZhY3Rvcnk6IE9wdGlvbmFsW19SZXF1ZXN0RmFjdG9yeV0gPSBOb25lLFxyXG4gICAgICAgIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSxcclxuICAgICAgICAqKmt3YXJnczogQW55XHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fbG9vcCA9IGdldF9ydW5uaW5nX2xvb3AobG9vcClcclxuICAgICAgICBzZWxmLl9jb25uZWN0aW9ucyA9IHt9ICAjIHR5cGU6IERpY3RbUmVxdWVzdEhhbmRsZXIsIGFzeW5jaW8uVHJhbnNwb3J0XVxyXG4gICAgICAgIHNlbGYuX2t3YXJncyA9IGt3YXJnc1xyXG4gICAgICAgIHNlbGYucmVxdWVzdHNfY291bnQgPSAwXHJcbiAgICAgICAgc2VsZi5yZXF1ZXN0X2hhbmRsZXIgPSBoYW5kbGVyXHJcbiAgICAgICAgc2VsZi5yZXF1ZXN0X2ZhY3RvcnkgPSByZXF1ZXN0X2ZhY3Rvcnkgb3Igc2VsZi5fbWFrZV9yZXF1ZXN0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY29ubmVjdGlvbnMoc2VsZikgLT4gTGlzdFtSZXF1ZXN0SGFuZGxlcl06XHJcbiAgICAgICAgcmV0dXJuIGxpc3Qoc2VsZi5fY29ubmVjdGlvbnMua2V5cygpKVxyXG5cclxuICAgIGRlZiBjb25uZWN0aW9uX21hZGUoXHJcbiAgICAgICAgc2VsZiwgaGFuZGxlcjogUmVxdWVzdEhhbmRsZXIsIHRyYW5zcG9ydDogYXN5bmNpby5UcmFuc3BvcnRcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9jb25uZWN0aW9uc1toYW5kbGVyXSA9IHRyYW5zcG9ydFxyXG5cclxuICAgIGRlZiBjb25uZWN0aW9uX2xvc3QoXHJcbiAgICAgICAgc2VsZiwgaGFuZGxlcjogUmVxdWVzdEhhbmRsZXIsIGV4YzogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl0gPSBOb25lXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgaGFuZGxlciBpbiBzZWxmLl9jb25uZWN0aW9uczpcclxuICAgICAgICAgICAgZGVsIHNlbGYuX2Nvbm5lY3Rpb25zW2hhbmRsZXJdXHJcblxyXG4gICAgZGVmIF9tYWtlX3JlcXVlc3QoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZXNzYWdlOiBSYXdSZXF1ZXN0TWVzc2FnZSxcclxuICAgICAgICBwYXlsb2FkOiBTdHJlYW1SZWFkZXIsXHJcbiAgICAgICAgcHJvdG9jb2w6IFJlcXVlc3RIYW5kbGVyLFxyXG4gICAgICAgIHdyaXRlcjogQWJzdHJhY3RTdHJlYW1Xcml0ZXIsXHJcbiAgICAgICAgdGFzazogImFzeW5jaW8uVGFza1tOb25lXSIsXHJcbiAgICApIC0+IEJhc2VSZXF1ZXN0OlxyXG4gICAgICAgIHJldHVybiBCYXNlUmVxdWVzdChtZXNzYWdlLCBwYXlsb2FkLCBwcm90b2NvbCwgd3JpdGVyLCB0YXNrLCBzZWxmLl9sb29wKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzaHV0ZG93bihzZWxmLCB0aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIGNvcm9zID0gW2Nvbm4uc2h1dGRvd24odGltZW91dCkgZm9yIGNvbm4gaW4gc2VsZi5fY29ubmVjdGlvbnNdXHJcbiAgICAgICAgYXdhaXQgYXN5bmNpby5nYXRoZXIoKmNvcm9zKVxyXG4gICAgICAgIHNlbGYuX2Nvbm5lY3Rpb25zLmNsZWFyKClcclxuXHJcbiAgICBkZWYgX19jYWxsX18oc2VsZikgLT4gUmVxdWVzdEhhbmRsZXI6XHJcbiAgICAgICAgcmV0dXJuIFJlcXVlc3RIYW5kbGVyKHNlbGYsIGxvb3A9c2VsZi5fbG9vcCwgKipzZWxmLl9rd2FyZ3MpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3dlYl91cmxkaXNwYXRjaGVyLnB5JywgYidpbXBvcnQgYWJjXHJcbmltcG9ydCBhc3luY2lvXHJcbmltcG9ydCBiYXNlNjRcclxuaW1wb3J0IGhhc2hsaWJcclxuaW1wb3J0IGluc3BlY3RcclxuaW1wb3J0IGtleXdvcmRcclxuaW1wb3J0IG9zXHJcbmltcG9ydCByZVxyXG5pbXBvcnQgd2FybmluZ3NcclxuZnJvbSBjb250ZXh0bGliIGltcG9ydCBjb250ZXh0bWFuYWdlclxyXG5mcm9tIGZ1bmN0b29scyBpbXBvcnQgd3JhcHNcclxuZnJvbSBwYXRobGliIGltcG9ydCBQYXRoXHJcbmZyb20gdHlwZXMgaW1wb3J0IE1hcHBpbmdQcm94eVR5cGVcclxuZnJvbSB0eXBpbmcgaW1wb3J0IChcclxuICAgIFRZUEVfQ0hFQ0tJTkcsXHJcbiAgICBBbnksXHJcbiAgICBBd2FpdGFibGUsXHJcbiAgICBDYWxsYWJsZSxcclxuICAgIENvbnRhaW5lcixcclxuICAgIERpY3QsXHJcbiAgICBHZW5lcmF0b3IsXHJcbiAgICBJdGVyYWJsZSxcclxuICAgIEl0ZXJhdG9yLFxyXG4gICAgTGlzdCxcclxuICAgIE1hcHBpbmcsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFBhdHRlcm4sXHJcbiAgICBTZXQsXHJcbiAgICBTaXplZCxcclxuICAgIFR1cGxlLFxyXG4gICAgVHlwZSxcclxuICAgIFVuaW9uLFxyXG4gICAgY2FzdCxcclxuKVxyXG5cclxuZnJvbSB5YXJsIGltcG9ydCBVUkwsIF9fdmVyc2lvbl9fIGFzIHlhcmxfdmVyc2lvbiAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXVxyXG5cclxuZnJvbSAuIGltcG9ydCBoZHJzXHJcbmZyb20gLmFiYyBpbXBvcnQgQWJzdHJhY3RNYXRjaEluZm8sIEFic3RyYWN0Um91dGVyLCBBYnN0cmFjdFZpZXdcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgREVCVUdcclxuZnJvbSAuaHR0cCBpbXBvcnQgSHR0cFZlcnNpb24xMVxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgRmluYWwsIEhhbmRsZXIsIFBhdGhMaWtlLCBUeXBlZERpY3RcclxuZnJvbSAud2ViX2V4Y2VwdGlvbnMgaW1wb3J0IChcclxuICAgIEhUVFBFeGNlcHRpb24sXHJcbiAgICBIVFRQRXhwZWN0YXRpb25GYWlsZWQsXHJcbiAgICBIVFRQRm9yYmlkZGVuLFxyXG4gICAgSFRUUE1ldGhvZE5vdEFsbG93ZWQsXHJcbiAgICBIVFRQTm90Rm91bmQsXHJcbilcclxuZnJvbSAud2ViX2ZpbGVyZXNwb25zZSBpbXBvcnQgRmlsZVJlc3BvbnNlXHJcbmZyb20gLndlYl9yZXF1ZXN0IGltcG9ydCBSZXF1ZXN0XHJcbmZyb20gLndlYl9yZXNwb25zZSBpbXBvcnQgUmVzcG9uc2UsIFN0cmVhbVJlc3BvbnNlXHJcbmZyb20gLndlYl9yb3V0ZWRlZiBpbXBvcnQgQWJzdHJhY3RSb3V0ZURlZlxyXG5cclxuX19hbGxfXyA9IChcclxuICAgICJVcmxEaXNwYXRjaGVyIixcclxuICAgICJVcmxNYXBwaW5nTWF0Y2hJbmZvIixcclxuICAgICJBYnN0cmFjdFJlc291cmNlIixcclxuICAgICJSZXNvdXJjZSIsXHJcbiAgICAiUGxhaW5SZXNvdXJjZSIsXHJcbiAgICAiRHluYW1pY1Jlc291cmNlIixcclxuICAgICJBYnN0cmFjdFJvdXRlIixcclxuICAgICJSZXNvdXJjZVJvdXRlIixcclxuICAgICJTdGF0aWNSZXNvdXJjZSIsXHJcbiAgICAiVmlldyIsXHJcbilcclxuXHJcblxyXG5pZiBUWVBFX0NIRUNLSU5HOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBmcm9tIC53ZWJfYXBwIGltcG9ydCBBcHBsaWNhdGlvblxyXG5cclxuICAgIEJhc2VEaWN0ID0gRGljdFtzdHIsIHN0cl1cclxuZWxzZTpcclxuICAgIEJhc2VEaWN0ID0gZGljdFxyXG5cclxuWUFSTF9WRVJTSU9OOiBGaW5hbFtUdXBsZVtpbnQsIC4uLl1dID0gdHVwbGUobWFwKGludCwgeWFybF92ZXJzaW9uLnNwbGl0KCIuIilbOjJdKSlcclxuXHJcbkhUVFBfTUVUSE9EX1JFOiBGaW5hbFtQYXR0ZXJuW3N0cl1dID0gcmUuY29tcGlsZShcclxuICAgIHIiXlswLTlBLVphLXohI1xcJCUmXCdcXCpcXCtcXC1cXC5cXF5fYFxcfH5dKyQiXHJcbilcclxuUk9VVEVfUkU6IEZpbmFsW1BhdHRlcm5bc3RyXV0gPSByZS5jb21waWxlKFxyXG4gICAgciIoXFx7W19hLXpBLVpdW157fV0qKD86XFx7W157fV0qXFx9W157fV0qKSpcXH0pIlxyXG4pXHJcblBBVEhfU0VQOiBGaW5hbFtzdHJdID0gcmUuZXNjYXBlKCIvIilcclxuXHJcblxyXG5fRXhwZWN0SGFuZGxlciA9IENhbGxhYmxlW1tSZXF1ZXN0XSwgQXdhaXRhYmxlW05vbmVdXVxyXG5fUmVzb2x2ZSA9IFR1cGxlW09wdGlvbmFsWyJVcmxNYXBwaW5nTWF0Y2hJbmZvIl0sIFNldFtzdHJdXVxyXG5cclxuXHJcbmNsYXNzIF9JbmZvRGljdChUeXBlZERpY3QsIHRvdGFsPUZhbHNlKTpcclxuICAgIHBhdGg6IHN0clxyXG5cclxuICAgIGZvcm1hdHRlcjogc3RyXHJcbiAgICBwYXR0ZXJuOiBQYXR0ZXJuW3N0cl1cclxuXHJcbiAgICBkaXJlY3Rvcnk6IFBhdGhcclxuICAgIHByZWZpeDogc3RyXHJcbiAgICByb3V0ZXM6IE1hcHBpbmdbc3RyLCAiQWJzdHJhY3RSb3V0ZSJdXHJcblxyXG4gICAgYXBwOiAiQXBwbGljYXRpb24iXHJcblxyXG4gICAgZG9tYWluOiBzdHJcclxuXHJcbiAgICBydWxlOiAiQWJzdHJhY3RSdWxlTWF0Y2hpbmciXHJcblxyXG4gICAgaHR0cF9leGNlcHRpb246IEhUVFBFeGNlcHRpb25cclxuXHJcblxyXG5jbGFzcyBBYnN0cmFjdFJlc291cmNlKFNpemVkLCBJdGVyYWJsZVsiQWJzdHJhY3RSb3V0ZSJdKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqLCBuYW1lOiBPcHRpb25hbFtzdHJdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9uYW1lID0gbmFtZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG5hbWUoc2VsZikgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fbmFtZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGNhbm9uaWNhbChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiRXhwb3NlcyB0aGUgcmVzb3VyY2VcJ3MgY2Fub25pY2FsIHBhdGguXHJcblxyXG4gICAgICAgIEZvciBleGFtcGxlIFwnL2Zvby9iYXIve25hbWV9XCdcclxuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZCAgIyBwcmFnbWE6IG5vIGJyYW5jaFxyXG4gICAgZGVmIHVybF9mb3Ioc2VsZiwgKiprd2FyZ3M6IHN0cikgLT4gVVJMOlxyXG4gICAgICAgICIiIkNvbnN0cnVjdCB1cmwgZm9yIHJlc291cmNlIHdpdGggYWRkaXRpb25hbCBwYXJhbXMuIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZCAgIyBwcmFnbWE6IG5vIGJyYW5jaFxyXG4gICAgYXN5bmMgZGVmIHJlc29sdmUoc2VsZiwgcmVxdWVzdDogUmVxdWVzdCkgLT4gX1Jlc29sdmU6XHJcbiAgICAgICAgIiIiUmVzb2x2ZSByZXNvdXJjZS5cclxuXHJcbiAgICAgICAgUmV0dXJuIChVcmxNYXBwaW5nTWF0Y2hJbmZvLCBhbGxvd2VkX21ldGhvZHMpIHBhaXIuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGFkZF9wcmVmaXgoc2VsZiwgcHJlZml4OiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQWRkIGEgcHJlZml4IHRvIHByb2Nlc3NlZCBVUkxzLlxyXG5cclxuICAgICAgICBSZXF1aXJlZCBmb3Igc3ViYXBwbGljYXRpb25zIHN1cHBvcnQuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGdldF9pbmZvKHNlbGYpIC0+IF9JbmZvRGljdDpcclxuICAgICAgICAiIiJSZXR1cm4gYSBkaWN0IHdpdGggYWRkaXRpb25hbCBpbmZvIHVzZWZ1bCBmb3IgaW50cm9zcGVjdGlvbiIiIlxyXG5cclxuICAgIGRlZiBmcmVlemUoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBwYXNzXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHJhd19tYXRjaChzZWxmLCBwYXRoOiBzdHIpIC0+IGJvb2w6XHJcbiAgICAgICAgIiIiUGVyZm9ybSBhIHJhdyBtYXRjaCBhZ2FpbnN0IHBhdGgiIiJcclxuXHJcblxyXG5jbGFzcyBBYnN0cmFjdFJvdXRlKGFiYy5BQkMpOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbWV0aG9kOiBzdHIsXHJcbiAgICAgICAgaGFuZGxlcjogVW5pb25bSGFuZGxlciwgVHlwZVtBYnN0cmFjdFZpZXddXSxcclxuICAgICAgICAqLFxyXG4gICAgICAgIGV4cGVjdF9oYW5kbGVyOiBPcHRpb25hbFtfRXhwZWN0SGFuZGxlcl0gPSBOb25lLFxyXG4gICAgICAgIHJlc291cmNlOiBPcHRpb25hbFtBYnN0cmFjdFJlc291cmNlXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcblxyXG4gICAgICAgIGlmIGV4cGVjdF9oYW5kbGVyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGV4cGVjdF9oYW5kbGVyID0gX2RlZmF1bHRfZXhwZWN0X2hhbmRsZXJcclxuXHJcbiAgICAgICAgYXNzZXJ0IGFzeW5jaW8uaXNjb3JvdXRpbmVmdW5jdGlvbihcclxuICAgICAgICAgICAgZXhwZWN0X2hhbmRsZXJcclxuICAgICAgICApLCBmIkNvcm91dGluZSBpcyBleHBlY3RlZCwgZ290IHtleHBlY3RfaGFuZGxlciFyfSJcclxuXHJcbiAgICAgICAgbWV0aG9kID0gbWV0aG9kLnVwcGVyKClcclxuICAgICAgICBpZiBub3QgSFRUUF9NRVRIT0RfUkUubWF0Y2gobWV0aG9kKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmInttZXRob2R9IGlzIG5vdCBhbGxvd2VkIEhUVFAgbWV0aG9kIilcclxuXHJcbiAgICAgICAgYXNzZXJ0IGNhbGxhYmxlKGhhbmRsZXIpLCBoYW5kbGVyXHJcbiAgICAgICAgaWYgYXN5bmNpby5pc2Nvcm91dGluZWZ1bmN0aW9uKGhhbmRsZXIpOlxyXG4gICAgICAgICAgICBwYXNzXHJcbiAgICAgICAgZWxpZiBpbnNwZWN0LmlzZ2VuZXJhdG9yZnVuY3Rpb24oaGFuZGxlcik6XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAiQmFyZSBnZW5lcmF0b3JzIGFyZSBkZXByZWNhdGVkLCAiICJ1c2UgQGNvcm91dGluZSB3cmFwcGVyIixcclxuICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShoYW5kbGVyLCB0eXBlKSBhbmQgaXNzdWJjbGFzcyhoYW5kbGVyLCBBYnN0cmFjdFZpZXcpOlxyXG4gICAgICAgICAgICBwYXNzXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgICAgICJCYXJlIGZ1bmN0aW9ucyBhcmUgZGVwcmVjYXRlZCwgIiAidXNlIGFzeW5jIG9uZXMiLCBEZXByZWNhdGlvbldhcm5pbmdcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgQHdyYXBzKGhhbmRsZXIpXHJcbiAgICAgICAgICAgIGFzeW5jIGRlZiBoYW5kbGVyX3dyYXBwZXIocmVxdWVzdDogUmVxdWVzdCkgLT4gU3RyZWFtUmVzcG9uc2U6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBvbGRfaGFuZGxlcihyZXF1ZXN0KVxyXG4gICAgICAgICAgICAgICAgaWYgYXN5bmNpby5pc2Nvcm91dGluZShyZXN1bHQpOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXN1bHRcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQgICMgdHlwZTogaWdub3JlW3JldHVybi12YWx1ZV1cclxuXHJcbiAgICAgICAgICAgIG9sZF9oYW5kbGVyID0gaGFuZGxlclxyXG4gICAgICAgICAgICBoYW5kbGVyID0gaGFuZGxlcl93cmFwcGVyXHJcblxyXG4gICAgICAgIHNlbGYuX21ldGhvZCA9IG1ldGhvZFxyXG4gICAgICAgIHNlbGYuX2hhbmRsZXIgPSBoYW5kbGVyXHJcbiAgICAgICAgc2VsZi5fZXhwZWN0X2hhbmRsZXIgPSBleHBlY3RfaGFuZGxlclxyXG4gICAgICAgIHNlbGYuX3Jlc291cmNlID0gcmVzb3VyY2VcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBtZXRob2Qoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9tZXRob2RcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBoYW5kbGVyKHNlbGYpIC0+IEhhbmRsZXI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2hhbmRsZXJcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBuYW1lKHNlbGYpIC0+IE9wdGlvbmFsW3N0cl06XHJcbiAgICAgICAgIiIiT3B0aW9uYWwgcm91dGVcJ3MgbmFtZSwgYWx3YXlzIGVxdWFscyB0byByZXNvdXJjZVwncyBuYW1lLiIiIlxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJlc291cmNlKHNlbGYpIC0+IE9wdGlvbmFsW0Fic3RyYWN0UmVzb3VyY2VdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZXNvdXJjZVxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBnZXRfaW5mbyhzZWxmKSAtPiBfSW5mb0RpY3Q6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgZGljdCB3aXRoIGFkZGl0aW9uYWwgaW5mbyB1c2VmdWwgZm9yIGludHJvc3BlY3Rpb24iIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kICAjIHByYWdtYTogbm8gYnJhbmNoXHJcbiAgICBkZWYgdXJsX2ZvcihzZWxmLCAqYXJnczogc3RyLCAqKmt3YXJnczogc3RyKSAtPiBVUkw6XHJcbiAgICAgICAgIiIiQ29uc3RydWN0IHVybCBmb3Igcm91dGUgd2l0aCBhZGRpdGlvbmFsIHBhcmFtcy4iIiJcclxuXHJcbiAgICBhc3luYyBkZWYgaGFuZGxlX2V4cGVjdF9oZWFkZXIoc2VsZiwgcmVxdWVzdDogUmVxdWVzdCkgLT4gTm9uZTpcclxuICAgICAgICBhd2FpdCBzZWxmLl9leHBlY3RfaGFuZGxlcihyZXF1ZXN0KVxyXG5cclxuXHJcbmNsYXNzIFVybE1hcHBpbmdNYXRjaEluZm8oQmFzZURpY3QsIEFic3RyYWN0TWF0Y2hJbmZvKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtYXRjaF9kaWN0OiBEaWN0W3N0ciwgc3RyXSwgcm91dGU6IEFic3RyYWN0Um91dGUpOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18obWF0Y2hfZGljdClcclxuICAgICAgICBzZWxmLl9yb3V0ZSA9IHJvdXRlXHJcbiAgICAgICAgc2VsZi5fYXBwcyA9IFtdICAjIHR5cGU6IExpc3RbQXBwbGljYXRpb25dXHJcbiAgICAgICAgc2VsZi5fY3VycmVudF9hcHAgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0FwcGxpY2F0aW9uXVxyXG4gICAgICAgIHNlbGYuX2Zyb3plbiA9IEZhbHNlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgaGFuZGxlcihzZWxmKSAtPiBIYW5kbGVyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yb3V0ZS5oYW5kbGVyXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcm91dGUoc2VsZikgLT4gQWJzdHJhY3RSb3V0ZTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcm91dGVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBleHBlY3RfaGFuZGxlcihzZWxmKSAtPiBfRXhwZWN0SGFuZGxlcjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcm91dGUuaGFuZGxlX2V4cGVjdF9oZWFkZXJcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBodHRwX2V4Y2VwdGlvbihzZWxmKSAtPiBPcHRpb25hbFtIVFRQRXhjZXB0aW9uXTpcclxuICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgIGRlZiBnZXRfaW5mbyhzZWxmKSAtPiBfSW5mb0RpY3Q6ICAjIHR5cGU6IGlnbm9yZVtvdmVycmlkZV1cclxuICAgICAgICByZXR1cm4gc2VsZi5fcm91dGUuZ2V0X2luZm8oKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGFwcHMoc2VsZikgLT4gVHVwbGVbIkFwcGxpY2F0aW9uIiwgLi4uXTpcclxuICAgICAgICByZXR1cm4gdHVwbGUoc2VsZi5fYXBwcylcclxuXHJcbiAgICBkZWYgYWRkX2FwcChzZWxmLCBhcHA6ICJBcHBsaWNhdGlvbiIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fZnJvemVuOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbm5vdCBjaGFuZ2UgYXBwcyBzdGFjayBhZnRlciAuZnJlZXplKCkgY2FsbCIpXHJcbiAgICAgICAgaWYgc2VsZi5fY3VycmVudF9hcHAgaXMgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fY3VycmVudF9hcHAgPSBhcHBcclxuICAgICAgICBzZWxmLl9hcHBzLmluc2VydCgwLCBhcHApXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY3VycmVudF9hcHAoc2VsZikgLT4gIkFwcGxpY2F0aW9uIjpcclxuICAgICAgICBhcHAgPSBzZWxmLl9jdXJyZW50X2FwcFxyXG4gICAgICAgIGFzc2VydCBhcHAgaXMgbm90IE5vbmVcclxuICAgICAgICByZXR1cm4gYXBwXHJcblxyXG4gICAgQGNvbnRleHRtYW5hZ2VyXHJcbiAgICBkZWYgc2V0X2N1cnJlbnRfYXBwKHNlbGYsIGFwcDogIkFwcGxpY2F0aW9uIikgLT4gR2VuZXJhdG9yW05vbmUsIE5vbmUsIE5vbmVdOlxyXG4gICAgICAgIGlmIERFQlVHOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICAgICAgICAgIGlmIGFwcCBub3QgaW4gc2VsZi5fYXBwczpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiRXhwZWN0ZWQgb25lIG9mIHRoZSBmb2xsb3dpbmcgYXBwcyB7IXJ9LCBnb3QgeyFyfSIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hcHBzLCBhcHBcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgcHJldiA9IHNlbGYuX2N1cnJlbnRfYXBwXHJcbiAgICAgICAgc2VsZi5fY3VycmVudF9hcHAgPSBhcHBcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHlpZWxkXHJcbiAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgc2VsZi5fY3VycmVudF9hcHAgPSBwcmV2XHJcblxyXG4gICAgZGVmIGZyZWV6ZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2Zyb3plbiA9IFRydWVcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBmIjxNYXRjaEluZm8ge3N1cGVyKCkuX19yZXByX18oKX06IHtzZWxmLl9yb3V0ZX0+IlxyXG5cclxuXHJcbmNsYXNzIE1hdGNoSW5mb0Vycm9yKFVybE1hcHBpbmdNYXRjaEluZm8pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGh0dHBfZXhjZXB0aW9uOiBIVFRQRXhjZXB0aW9uKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2V4Y2VwdGlvbiA9IGh0dHBfZXhjZXB0aW9uXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyh7fSwgU3lzdGVtUm91dGUoc2VsZi5fZXhjZXB0aW9uKSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBodHRwX2V4Y2VwdGlvbihzZWxmKSAtPiBIVFRQRXhjZXB0aW9uOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9leGNlcHRpb25cclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPE1hdGNoSW5mb0Vycm9yIHt9OiB7fT4iLmZvcm1hdChcclxuICAgICAgICAgICAgc2VsZi5fZXhjZXB0aW9uLnN0YXR1cywgc2VsZi5fZXhjZXB0aW9uLnJlYXNvblxyXG4gICAgICAgIClcclxuXHJcblxyXG5hc3luYyBkZWYgX2RlZmF1bHRfZXhwZWN0X2hhbmRsZXIocmVxdWVzdDogUmVxdWVzdCkgLT4gTm9uZTpcclxuICAgICIiIkRlZmF1bHQgaGFuZGxlciBmb3IgRXhwZWN0IGhlYWRlci5cclxuXHJcbiAgICBKdXN0IHNlbmQgIjEwMCBDb250aW51ZSIgdG8gY2xpZW50LlxyXG4gICAgcmFpc2UgSFRUUEV4cGVjdGF0aW9uRmFpbGVkIGlmIHZhbHVlIG9mIGhlYWRlciBpcyBub3QgIjEwMC1jb250aW51ZSJcclxuICAgICIiIlxyXG4gICAgZXhwZWN0ID0gcmVxdWVzdC5oZWFkZXJzLmdldChoZHJzLkVYUEVDVCwgIiIpXHJcbiAgICBpZiByZXF1ZXN0LnZlcnNpb24gPT0gSHR0cFZlcnNpb24xMTpcclxuICAgICAgICBpZiBleHBlY3QubG93ZXIoKSA9PSAiMTAwLWNvbnRpbnVlIjpcclxuICAgICAgICAgICAgYXdhaXQgcmVxdWVzdC53cml0ZXIud3JpdGUoYiJIVFRQLzEuMSAxMDAgQ29udGludWVcXHJcXG5cXHJcXG4iKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIEhUVFBFeHBlY3RhdGlvbkZhaWxlZCh0ZXh0PSJVbmtub3duIEV4cGVjdDogJXMiICUgZXhwZWN0KVxyXG5cclxuXHJcbmNsYXNzIFJlc291cmNlKEFic3RyYWN0UmVzb3VyY2UpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsICosIG5hbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18obmFtZT1uYW1lKVxyXG4gICAgICAgIHNlbGYuX3JvdXRlcyA9IFtdICAjIHR5cGU6IExpc3RbUmVzb3VyY2VSb3V0ZV1cclxuXHJcbiAgICBkZWYgYWRkX3JvdXRlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbWV0aG9kOiBzdHIsXHJcbiAgICAgICAgaGFuZGxlcjogVW5pb25bVHlwZVtBYnN0cmFjdFZpZXddLCBIYW5kbGVyXSxcclxuICAgICAgICAqLFxyXG4gICAgICAgIGV4cGVjdF9oYW5kbGVyOiBPcHRpb25hbFtfRXhwZWN0SGFuZGxlcl0gPSBOb25lLFxyXG4gICAgKSAtPiAiUmVzb3VyY2VSb3V0ZSI6XHJcblxyXG4gICAgICAgIGZvciByb3V0ZV9vYmogaW4gc2VsZi5fcm91dGVzOlxyXG4gICAgICAgICAgICBpZiByb3V0ZV9vYmoubWV0aG9kID09IG1ldGhvZCBvciByb3V0ZV9vYmoubWV0aG9kID09IGhkcnMuTUVUSF9BTlk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIkFkZGVkIHJvdXRlIHdpbGwgbmV2ZXIgYmUgZXhlY3V0ZWQsICJcclxuICAgICAgICAgICAgICAgICAgICAibWV0aG9kIHtyb3V0ZS5tZXRob2R9IGlzIGFscmVhZHkgIlxyXG4gICAgICAgICAgICAgICAgICAgICJyZWdpc3RlcmVkIi5mb3JtYXQocm91dGU9cm91dGVfb2JqKVxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByb3V0ZV9vYmogPSBSZXNvdXJjZVJvdXRlKG1ldGhvZCwgaGFuZGxlciwgc2VsZiwgZXhwZWN0X2hhbmRsZXI9ZXhwZWN0X2hhbmRsZXIpXHJcbiAgICAgICAgc2VsZi5yZWdpc3Rlcl9yb3V0ZShyb3V0ZV9vYmopXHJcbiAgICAgICAgcmV0dXJuIHJvdXRlX29ialxyXG5cclxuICAgIGRlZiByZWdpc3Rlcl9yb3V0ZShzZWxmLCByb3V0ZTogIlJlc291cmNlUm91dGUiKSAtPiBOb25lOlxyXG4gICAgICAgIGFzc2VydCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICByb3V0ZSwgUmVzb3VyY2VSb3V0ZVxyXG4gICAgICAgICksIGYiSW5zdGFuY2Ugb2YgUm91dGUgY2xhc3MgaXMgcmVxdWlyZWQsIGdvdCB7cm91dGUhcn0iXHJcbiAgICAgICAgc2VsZi5fcm91dGVzLmFwcGVuZChyb3V0ZSlcclxuXHJcbiAgICBhc3luYyBkZWYgcmVzb2x2ZShzZWxmLCByZXF1ZXN0OiBSZXF1ZXN0KSAtPiBfUmVzb2x2ZTpcclxuICAgICAgICBhbGxvd2VkX21ldGhvZHMgPSBzZXQoKSAgIyB0eXBlOiBTZXRbc3RyXVxyXG5cclxuICAgICAgICBtYXRjaF9kaWN0ID0gc2VsZi5fbWF0Y2gocmVxdWVzdC5yZWxfdXJsLnJhd19wYXRoKVxyXG4gICAgICAgIGlmIG1hdGNoX2RpY3QgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmUsIGFsbG93ZWRfbWV0aG9kc1xyXG5cclxuICAgICAgICBmb3Igcm91dGVfb2JqIGluIHNlbGYuX3JvdXRlczpcclxuICAgICAgICAgICAgcm91dGVfbWV0aG9kID0gcm91dGVfb2JqLm1ldGhvZFxyXG4gICAgICAgICAgICBhbGxvd2VkX21ldGhvZHMuYWRkKHJvdXRlX21ldGhvZClcclxuXHJcbiAgICAgICAgICAgIGlmIHJvdXRlX21ldGhvZCA9PSByZXF1ZXN0Lm1ldGhvZCBvciByb3V0ZV9tZXRob2QgPT0gaGRycy5NRVRIX0FOWTpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoVXJsTWFwcGluZ01hdGNoSW5mbyhtYXRjaF9kaWN0LCByb3V0ZV9vYmopLCBhbGxvd2VkX21ldGhvZHMpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmUsIGFsbG93ZWRfbWV0aG9kc1xyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBfbWF0Y2goc2VsZiwgcGF0aDogc3RyKSAtPiBPcHRpb25hbFtEaWN0W3N0ciwgc3RyXV06XHJcbiAgICAgICAgcGFzcyAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5fcm91dGVzKVxyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKSAtPiBJdGVyYXRvcltBYnN0cmFjdFJvdXRlXTpcclxuICAgICAgICByZXR1cm4gaXRlcihzZWxmLl9yb3V0ZXMpXHJcblxyXG4gICAgIyBUT0RPOiBpbXBsZW1lbnQgYWxsIGFic3RyYWN0IG1ldGhvZHNcclxuXHJcblxyXG5jbGFzcyBQbGFpblJlc291cmNlKFJlc291cmNlKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwYXRoOiBzdHIsICosIG5hbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18obmFtZT1uYW1lKVxyXG4gICAgICAgIGFzc2VydCBub3QgcGF0aCBvciBwYXRoLnN0YXJ0c3dpdGgoIi8iKVxyXG4gICAgICAgIHNlbGYuX3BhdGggPSBwYXRoXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2Fub25pY2FsKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcGF0aFxyXG5cclxuICAgIGRlZiBmcmVlemUoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3Qgc2VsZi5fcGF0aDpcclxuICAgICAgICAgICAgc2VsZi5fcGF0aCA9ICIvIlxyXG5cclxuICAgIGRlZiBhZGRfcHJlZml4KHNlbGYsIHByZWZpeDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIGFzc2VydCBwcmVmaXguc3RhcnRzd2l0aCgiLyIpXHJcbiAgICAgICAgYXNzZXJ0IG5vdCBwcmVmaXguZW5kc3dpdGgoIi8iKVxyXG4gICAgICAgIGFzc2VydCBsZW4ocHJlZml4KSA+IDFcclxuICAgICAgICBzZWxmLl9wYXRoID0gcHJlZml4ICsgc2VsZi5fcGF0aFxyXG5cclxuICAgIGRlZiBfbWF0Y2goc2VsZiwgcGF0aDogc3RyKSAtPiBPcHRpb25hbFtEaWN0W3N0ciwgc3RyXV06XHJcbiAgICAgICAgIyBzdHJpbmcgY29tcGFyaXNvbiBpcyBhYm91dCAxMCB0aW1lcyBmYXN0ZXIgdGhhbiByZWdleHAgbWF0Y2hpbmdcclxuICAgICAgICBpZiBzZWxmLl9wYXRoID09IHBhdGg6XHJcbiAgICAgICAgICAgIHJldHVybiB7fVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgZGVmIHJhd19tYXRjaChzZWxmLCBwYXRoOiBzdHIpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BhdGggPT0gcGF0aFxyXG5cclxuICAgIGRlZiBnZXRfaW5mbyhzZWxmKSAtPiBfSW5mb0RpY3Q6XHJcbiAgICAgICAgcmV0dXJuIHsicGF0aCI6IHNlbGYuX3BhdGh9XHJcblxyXG4gICAgZGVmIHVybF9mb3Ioc2VsZikgLT4gVVJMOiAgIyB0eXBlOiBpZ25vcmVbb3ZlcnJpZGVdXHJcbiAgICAgICAgcmV0dXJuIFVSTC5idWlsZChwYXRoPXNlbGYuX3BhdGgsIGVuY29kZWQ9VHJ1ZSlcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIG5hbWUgPSAiXCciICsgc2VsZi5uYW1lICsgIlwnICIgaWYgc2VsZi5uYW1lIGlzIG5vdCBOb25lIGVsc2UgIiJcclxuICAgICAgICByZXR1cm4gZiI8UGxhaW5SZXNvdXJjZSB7bmFtZX0ge3NlbGYuX3BhdGh9PiJcclxuXHJcblxyXG5jbGFzcyBEeW5hbWljUmVzb3VyY2UoUmVzb3VyY2UpOlxyXG5cclxuICAgIERZTiA9IHJlLmNvbXBpbGUociJcXHsoP1A8dmFyPltfYS16QS1aXVtfYS16QS1aMC05XSopXFx9IilcclxuICAgIERZTl9XSVRIX1JFID0gcmUuY29tcGlsZShyIlxceyg/UDx2YXI+W19hLXpBLVpdW19hLXpBLVowLTldKik6KD9QPHJlPi4rKVxcfSIpXHJcbiAgICBHT09EID0gciJbXnt9L10rIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwYXRoOiBzdHIsICosIG5hbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18obmFtZT1uYW1lKVxyXG4gICAgICAgIHBhdHRlcm4gPSAiIlxyXG4gICAgICAgIGZvcm1hdHRlciA9ICIiXHJcbiAgICAgICAgZm9yIHBhcnQgaW4gUk9VVEVfUkUuc3BsaXQocGF0aCk6XHJcbiAgICAgICAgICAgIG1hdGNoID0gc2VsZi5EWU4uZnVsbG1hdGNoKHBhcnQpXHJcbiAgICAgICAgICAgIGlmIG1hdGNoOlxyXG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSAiKD9QPHt9Pnt9KSIuZm9ybWF0KG1hdGNoLmdyb3VwKCJ2YXIiKSwgc2VsZi5HT09EKVxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVyICs9ICJ7IiArIG1hdGNoLmdyb3VwKCJ2YXIiKSArICJ9IlxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIG1hdGNoID0gc2VsZi5EWU5fV0lUSF9SRS5mdWxsbWF0Y2gocGFydClcclxuICAgICAgICAgICAgaWYgbWF0Y2g6XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9ICIoP1A8e3Zhcn0+e3JlfSkiLmZvcm1hdCgqKm1hdGNoLmdyb3VwZGljdCgpKVxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVyICs9ICJ7IiArIG1hdGNoLmdyb3VwKCJ2YXIiKSArICJ9IlxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIGlmICJ7IiBpbiBwYXJ0IG9yICJ9IiBpbiBwYXJ0OlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIkludmFsaWQgcGF0aCBcJ3twYXRofVwnW1wne3BhcnR9XCddIilcclxuXHJcbiAgICAgICAgICAgIHBhcnQgPSBfcmVxdW90ZV9wYXRoKHBhcnQpXHJcbiAgICAgICAgICAgIGZvcm1hdHRlciArPSBwYXJ0XHJcbiAgICAgICAgICAgIHBhdHRlcm4gKz0gcmUuZXNjYXBlKHBhcnQpXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgY29tcGlsZWQgPSByZS5jb21waWxlKHBhdHRlcm4pXHJcbiAgICAgICAgZXhjZXB0IHJlLmVycm9yIGFzIGV4YzpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIkJhZCBwYXR0ZXJuIFwne3BhdHRlcm59XCc6IHtleGN9IikgZnJvbSBOb25lXHJcbiAgICAgICAgYXNzZXJ0IGNvbXBpbGVkLnBhdHRlcm4uc3RhcnRzd2l0aChQQVRIX1NFUClcclxuICAgICAgICBhc3NlcnQgZm9ybWF0dGVyLnN0YXJ0c3dpdGgoIi8iKVxyXG4gICAgICAgIHNlbGYuX3BhdHRlcm4gPSBjb21waWxlZFxyXG4gICAgICAgIHNlbGYuX2Zvcm1hdHRlciA9IGZvcm1hdHRlclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNhbm9uaWNhbChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Zvcm1hdHRlclxyXG5cclxuICAgIGRlZiBhZGRfcHJlZml4KHNlbGYsIHByZWZpeDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIGFzc2VydCBwcmVmaXguc3RhcnRzd2l0aCgiLyIpXHJcbiAgICAgICAgYXNzZXJ0IG5vdCBwcmVmaXguZW5kc3dpdGgoIi8iKVxyXG4gICAgICAgIGFzc2VydCBsZW4ocHJlZml4KSA+IDFcclxuICAgICAgICBzZWxmLl9wYXR0ZXJuID0gcmUuY29tcGlsZShyZS5lc2NhcGUocHJlZml4KSArIHNlbGYuX3BhdHRlcm4ucGF0dGVybilcclxuICAgICAgICBzZWxmLl9mb3JtYXR0ZXIgPSBwcmVmaXggKyBzZWxmLl9mb3JtYXR0ZXJcclxuXHJcbiAgICBkZWYgX21hdGNoKHNlbGYsIHBhdGg6IHN0cikgLT4gT3B0aW9uYWxbRGljdFtzdHIsIHN0cl1dOlxyXG4gICAgICAgIG1hdGNoID0gc2VsZi5fcGF0dGVybi5mdWxsbWF0Y2gocGF0aClcclxuICAgICAgICBpZiBtYXRjaCBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBrZXk6IF91bnF1b3RlX3BhdGgodmFsdWUpIGZvciBrZXksIHZhbHVlIGluIG1hdGNoLmdyb3VwZGljdCgpLml0ZW1zKClcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgIGRlZiByYXdfbWF0Y2goc2VsZiwgcGF0aDogc3RyKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mb3JtYXR0ZXIgPT0gcGF0aFxyXG5cclxuICAgIGRlZiBnZXRfaW5mbyhzZWxmKSAtPiBfSW5mb0RpY3Q6XHJcbiAgICAgICAgcmV0dXJuIHsiZm9ybWF0dGVyIjogc2VsZi5fZm9ybWF0dGVyLCAicGF0dGVybiI6IHNlbGYuX3BhdHRlcm59XHJcblxyXG4gICAgZGVmIHVybF9mb3Ioc2VsZiwgKipwYXJ0czogc3RyKSAtPiBVUkw6XHJcbiAgICAgICAgdXJsID0gc2VsZi5fZm9ybWF0dGVyLmZvcm1hdF9tYXAoe2s6IF9xdW90ZV9wYXRoKHYpIGZvciBrLCB2IGluIHBhcnRzLml0ZW1zKCl9KVxyXG4gICAgICAgIHJldHVybiBVUkwuYnVpbGQocGF0aD11cmwsIGVuY29kZWQ9VHJ1ZSlcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIG5hbWUgPSAiXCciICsgc2VsZi5uYW1lICsgIlwnICIgaWYgc2VsZi5uYW1lIGlzIG5vdCBOb25lIGVsc2UgIiJcclxuICAgICAgICByZXR1cm4gIjxEeW5hbWljUmVzb3VyY2Uge25hbWV9IHtmb3JtYXR0ZXJ9PiIuZm9ybWF0KFxyXG4gICAgICAgICAgICBuYW1lPW5hbWUsIGZvcm1hdHRlcj1zZWxmLl9mb3JtYXR0ZXJcclxuICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgUHJlZml4UmVzb3VyY2UoQWJzdHJhY3RSZXNvdXJjZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgcHJlZml4OiBzdHIsICosIG5hbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIGFzc2VydCBub3QgcHJlZml4IG9yIHByZWZpeC5zdGFydHN3aXRoKCIvIiksIHByZWZpeFxyXG4gICAgICAgIGFzc2VydCBwcmVmaXggaW4gKCIiLCAiLyIpIG9yIG5vdCBwcmVmaXguZW5kc3dpdGgoIi8iKSwgcHJlZml4XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhuYW1lPW5hbWUpXHJcbiAgICAgICAgc2VsZi5fcHJlZml4ID0gX3JlcXVvdGVfcGF0aChwcmVmaXgpXHJcbiAgICAgICAgc2VsZi5fcHJlZml4MiA9IHNlbGYuX3ByZWZpeCArICIvIlxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNhbm9uaWNhbChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ByZWZpeFxyXG5cclxuICAgIGRlZiBhZGRfcHJlZml4KHNlbGYsIHByZWZpeDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIGFzc2VydCBwcmVmaXguc3RhcnRzd2l0aCgiLyIpXHJcbiAgICAgICAgYXNzZXJ0IG5vdCBwcmVmaXguZW5kc3dpdGgoIi8iKVxyXG4gICAgICAgIGFzc2VydCBsZW4ocHJlZml4KSA+IDFcclxuICAgICAgICBzZWxmLl9wcmVmaXggPSBwcmVmaXggKyBzZWxmLl9wcmVmaXhcclxuICAgICAgICBzZWxmLl9wcmVmaXgyID0gc2VsZi5fcHJlZml4ICsgIi8iXHJcblxyXG4gICAgZGVmIHJhd19tYXRjaChzZWxmLCBwcmVmaXg6IHN0cikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICAjIFRPRE86IGltcGwgbWlzc2luZyBhYnN0cmFjdCBtZXRob2RzXHJcblxyXG5cclxuY2xhc3MgU3RhdGljUmVzb3VyY2UoUHJlZml4UmVzb3VyY2UpOlxyXG4gICAgVkVSU0lPTl9LRVkgPSAidiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBwcmVmaXg6IHN0cixcclxuICAgICAgICBkaXJlY3Rvcnk6IFBhdGhMaWtlLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgZXhwZWN0X2hhbmRsZXI6IE9wdGlvbmFsW19FeHBlY3RIYW5kbGVyXSA9IE5vbmUsXHJcbiAgICAgICAgY2h1bmtfc2l6ZTogaW50ID0gMjU2ICogMTAyNCxcclxuICAgICAgICBzaG93X2luZGV4OiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgZm9sbG93X3N5bWxpbmtzOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgYXBwZW5kX3ZlcnNpb246IGJvb2wgPSBGYWxzZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKHByZWZpeCwgbmFtZT1uYW1lKVxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgZGlyZWN0b3J5ID0gUGF0aChkaXJlY3RvcnkpXHJcbiAgICAgICAgICAgIGlmIHN0cihkaXJlY3RvcnkpLnN0YXJ0c3dpdGgoIn4iKTpcclxuICAgICAgICAgICAgICAgIGRpcmVjdG9yeSA9IFBhdGgob3MucGF0aC5leHBhbmR1c2VyKHN0cihkaXJlY3RvcnkpKSlcclxuICAgICAgICAgICAgZGlyZWN0b3J5ID0gZGlyZWN0b3J5LnJlc29sdmUoKVxyXG4gICAgICAgICAgICBpZiBub3QgZGlyZWN0b3J5LmlzX2RpcigpOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTm90IGEgZGlyZWN0b3J5IilcclxuICAgICAgICBleGNlcHQgKEZpbGVOb3RGb3VuZEVycm9yLCBWYWx1ZUVycm9yKSBhcyBlcnJvcjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIk5vIGRpcmVjdG9yeSBleGlzdHMgYXQgXCd7ZGlyZWN0b3J5fVwnIikgZnJvbSBlcnJvclxyXG4gICAgICAgIHNlbGYuX2RpcmVjdG9yeSA9IGRpcmVjdG9yeVxyXG4gICAgICAgIHNlbGYuX3Nob3dfaW5kZXggPSBzaG93X2luZGV4XHJcbiAgICAgICAgc2VsZi5fY2h1bmtfc2l6ZSA9IGNodW5rX3NpemVcclxuICAgICAgICBzZWxmLl9mb2xsb3dfc3ltbGlua3MgPSBmb2xsb3dfc3ltbGlua3NcclxuICAgICAgICBzZWxmLl9leHBlY3RfaGFuZGxlciA9IGV4cGVjdF9oYW5kbGVyXHJcbiAgICAgICAgc2VsZi5fYXBwZW5kX3ZlcnNpb24gPSBhcHBlbmRfdmVyc2lvblxyXG5cclxuICAgICAgICBzZWxmLl9yb3V0ZXMgPSB7XHJcbiAgICAgICAgICAgICJHRVQiOiBSZXNvdXJjZVJvdXRlKFxyXG4gICAgICAgICAgICAgICAgIkdFVCIsIHNlbGYuX2hhbmRsZSwgc2VsZiwgZXhwZWN0X2hhbmRsZXI9ZXhwZWN0X2hhbmRsZXJcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgIkhFQUQiOiBSZXNvdXJjZVJvdXRlKFxyXG4gICAgICAgICAgICAgICAgIkhFQUQiLCBzZWxmLl9oYW5kbGUsIHNlbGYsIGV4cGVjdF9oYW5kbGVyPWV4cGVjdF9oYW5kbGVyXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgfVxyXG5cclxuICAgIGRlZiB1cmxfZm9yKCAgIyB0eXBlOiBpZ25vcmVbb3ZlcnJpZGVdXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIGZpbGVuYW1lOiBVbmlvbltzdHIsIFBhdGhdLFxyXG4gICAgICAgIGFwcGVuZF92ZXJzaW9uOiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICApIC0+IFVSTDpcclxuICAgICAgICBpZiBhcHBlbmRfdmVyc2lvbiBpcyBOb25lOlxyXG4gICAgICAgICAgICBhcHBlbmRfdmVyc2lvbiA9IHNlbGYuX2FwcGVuZF92ZXJzaW9uXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShmaWxlbmFtZSwgUGF0aCk6XHJcbiAgICAgICAgICAgIGZpbGVuYW1lID0gc3RyKGZpbGVuYW1lKVxyXG4gICAgICAgIGZpbGVuYW1lID0gZmlsZW5hbWUubHN0cmlwKCIvIilcclxuXHJcbiAgICAgICAgdXJsID0gVVJMLmJ1aWxkKHBhdGg9c2VsZi5fcHJlZml4LCBlbmNvZGVkPVRydWUpXHJcbiAgICAgICAgIyBmaWxlbmFtZSBpcyBub3QgZW5jb2RlZFxyXG4gICAgICAgIGlmIFlBUkxfVkVSU0lPTiA8ICgxLCA2KTpcclxuICAgICAgICAgICAgdXJsID0gdXJsIC8gZmlsZW5hbWUucmVwbGFjZSgiJSIsICIlMjUiKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHVybCA9IHVybCAvIGZpbGVuYW1lXHJcblxyXG4gICAgICAgIGlmIGFwcGVuZF92ZXJzaW9uOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBmaWxlcGF0aCA9IHNlbGYuX2RpcmVjdG9yeS5qb2lucGF0aChmaWxlbmFtZSkucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5fZm9sbG93X3N5bWxpbmtzOlxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVwYXRoLnJlbGF0aXZlX3RvKHNlbGYuX2RpcmVjdG9yeSlcclxuICAgICAgICAgICAgZXhjZXB0IChWYWx1ZUVycm9yLCBGaWxlTm90Rm91bmRFcnJvcik6XHJcbiAgICAgICAgICAgICAgICAjIFZhbHVlRXJyb3IgZm9yIGNhc2Ugd2hlbiBwYXRoIHBvaW50IHRvIHN5bWxpbmtcclxuICAgICAgICAgICAgICAgICMgd2l0aCBmb2xsb3dfc3ltbGlua3MgaXMgRmFsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cmwgICMgcmVsYXRpdmVseSBzYWZlXHJcbiAgICAgICAgICAgIGlmIGZpbGVwYXRoLmlzX2ZpbGUoKTpcclxuICAgICAgICAgICAgICAgICMgVE9ETyBjYWNoZSBmaWxlIGNvbnRlbnRcclxuICAgICAgICAgICAgICAgICMgd2l0aCBmaWxlIHdhdGNoZXIgZm9yIGNhY2hlIGludmFsaWRhdGlvblxyXG4gICAgICAgICAgICAgICAgd2l0aCBmaWxlcGF0aC5vcGVuKCJyYiIpIGFzIGY6XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZV9ieXRlcyA9IGYucmVhZCgpXHJcbiAgICAgICAgICAgICAgICBoID0gc2VsZi5fZ2V0X2ZpbGVfaGFzaChmaWxlX2J5dGVzKVxyXG4gICAgICAgICAgICAgICAgdXJsID0gdXJsLndpdGhfcXVlcnkoe3NlbGYuVkVSU0lPTl9LRVk6IGh9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybFxyXG4gICAgICAgIHJldHVybiB1cmxcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgX2dldF9maWxlX2hhc2goYnl0ZV9hcnJheTogYnl0ZXMpIC0+IHN0cjpcclxuICAgICAgICBtID0gaGFzaGxpYi5zaGEyNTYoKSAgIyB0b2RvIHNoYTI1NiBjYW4gYmUgY29uZmlndXJhYmxlIHBhcmFtXHJcbiAgICAgICAgbS51cGRhdGUoYnl0ZV9hcnJheSlcclxuICAgICAgICBiNjQgPSBiYXNlNjQudXJsc2FmZV9iNjRlbmNvZGUobS5kaWdlc3QoKSlcclxuICAgICAgICByZXR1cm4gYjY0LmRlY29kZSgiYXNjaWkiKVxyXG5cclxuICAgIGRlZiBnZXRfaW5mbyhzZWxmKSAtPiBfSW5mb0RpY3Q6XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgImRpcmVjdG9yeSI6IHNlbGYuX2RpcmVjdG9yeSxcclxuICAgICAgICAgICAgInByZWZpeCI6IHNlbGYuX3ByZWZpeCxcclxuICAgICAgICAgICAgInJvdXRlcyI6IHNlbGYuX3JvdXRlcyxcclxuICAgICAgICB9XHJcblxyXG4gICAgZGVmIHNldF9vcHRpb25zX3JvdXRlKHNlbGYsIGhhbmRsZXI6IEhhbmRsZXIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgIk9QVElPTlMiIGluIHNlbGYuX3JvdXRlczpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJPUFRJT05TIHJvdXRlIHdhcyBzZXQgYWxyZWFkeSIpXHJcbiAgICAgICAgc2VsZi5fcm91dGVzWyJPUFRJT05TIl0gPSBSZXNvdXJjZVJvdXRlKFxyXG4gICAgICAgICAgICAiT1BUSU9OUyIsIGhhbmRsZXIsIHNlbGYsIGV4cGVjdF9oYW5kbGVyPXNlbGYuX2V4cGVjdF9oYW5kbGVyXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGFzeW5jIGRlZiByZXNvbHZlKHNlbGYsIHJlcXVlc3Q6IFJlcXVlc3QpIC0+IF9SZXNvbHZlOlxyXG4gICAgICAgIHBhdGggPSByZXF1ZXN0LnJlbF91cmwucmF3X3BhdGhcclxuICAgICAgICBtZXRob2QgPSByZXF1ZXN0Lm1ldGhvZFxyXG4gICAgICAgIGFsbG93ZWRfbWV0aG9kcyA9IHNldChzZWxmLl9yb3V0ZXMpXHJcbiAgICAgICAgaWYgbm90IHBhdGguc3RhcnRzd2l0aChzZWxmLl9wcmVmaXgyKSBhbmQgcGF0aCAhPSBzZWxmLl9wcmVmaXg6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lLCBzZXQoKVxyXG5cclxuICAgICAgICBpZiBtZXRob2Qgbm90IGluIGFsbG93ZWRfbWV0aG9kczpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmUsIGFsbG93ZWRfbWV0aG9kc1xyXG5cclxuICAgICAgICBtYXRjaF9kaWN0ID0geyJmaWxlbmFtZSI6IF91bnF1b3RlX3BhdGgocGF0aFtsZW4oc2VsZi5fcHJlZml4KSArIDEgOl0pfVxyXG4gICAgICAgIHJldHVybiAoVXJsTWFwcGluZ01hdGNoSW5mbyhtYXRjaF9kaWN0LCBzZWxmLl9yb3V0ZXNbbWV0aG9kXSksIGFsbG93ZWRfbWV0aG9kcylcclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9yb3V0ZXMpXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+IEl0ZXJhdG9yW0Fic3RyYWN0Um91dGVdOlxyXG4gICAgICAgIHJldHVybiBpdGVyKHNlbGYuX3JvdXRlcy52YWx1ZXMoKSlcclxuXHJcbiAgICBhc3luYyBkZWYgX2hhbmRsZShzZWxmLCByZXF1ZXN0OiBSZXF1ZXN0KSAtPiBTdHJlYW1SZXNwb25zZTpcclxuICAgICAgICByZWxfdXJsID0gcmVxdWVzdC5tYXRjaF9pbmZvWyJmaWxlbmFtZSJdXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBmaWxlbmFtZSA9IFBhdGgocmVsX3VybClcclxuICAgICAgICAgICAgaWYgZmlsZW5hbWUuYW5jaG9yOlxyXG4gICAgICAgICAgICAgICAgIyByZWxfdXJsIGlzIGFuIGFic29sdXRlIG5hbWUgbGlrZVxyXG4gICAgICAgICAgICAgICAgIyAvc3RhdGljL1xcXFxtYWNoaW5lX25hbWVcXGMkIG9yIC9zdGF0aWMvRDpcXHBhdGhcclxuICAgICAgICAgICAgICAgICMgd2hlcmUgdGhlIHN0YXRpYyBkaXIgaXMgdG90YWxseSBkaWZmZXJlbnRcclxuICAgICAgICAgICAgICAgIHJhaXNlIEhUVFBGb3JiaWRkZW4oKVxyXG4gICAgICAgICAgICBmaWxlcGF0aCA9IHNlbGYuX2RpcmVjdG9yeS5qb2lucGF0aChmaWxlbmFtZSkucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9mb2xsb3dfc3ltbGlua3M6XHJcbiAgICAgICAgICAgICAgICBmaWxlcGF0aC5yZWxhdGl2ZV90byhzZWxmLl9kaXJlY3RvcnkpXHJcbiAgICAgICAgZXhjZXB0IChWYWx1ZUVycm9yLCBGaWxlTm90Rm91bmRFcnJvcikgYXMgZXJyb3I6XHJcbiAgICAgICAgICAgICMgcmVsYXRpdmVseSBzYWZlXHJcbiAgICAgICAgICAgIHJhaXNlIEhUVFBOb3RGb3VuZCgpIGZyb20gZXJyb3JcclxuICAgICAgICBleGNlcHQgSFRUUEZvcmJpZGRlbjpcclxuICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGVycm9yOlxyXG4gICAgICAgICAgICAjIHBlcm0gZXJyb3Igb3Igb3RoZXIga2luZCFcclxuICAgICAgICAgICAgcmVxdWVzdC5hcHAubG9nZ2VyLmV4Y2VwdGlvbihlcnJvcilcclxuICAgICAgICAgICAgcmFpc2UgSFRUUE5vdEZvdW5kKCkgZnJvbSBlcnJvclxyXG5cclxuICAgICAgICAjIG9uIG9wZW5pbmcgYSBkaXIsIGxvYWQgaXRzIGNvbnRlbnRzIGlmIGFsbG93ZWRcclxuICAgICAgICBpZiBmaWxlcGF0aC5pc19kaXIoKTpcclxuICAgICAgICAgICAgaWYgc2VsZi5fc2hvd19pbmRleDpcclxuICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVzcG9uc2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9c2VsZi5fZGlyZWN0b3J5X2FzX2h0bWwoZmlsZXBhdGgpLCBjb250ZW50X3R5cGU9InRleHQvaHRtbCJcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBleGNlcHQgUGVybWlzc2lvbkVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIEhUVFBGb3JiaWRkZW4oKVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgSFRUUEZvcmJpZGRlbigpXHJcbiAgICAgICAgZWxpZiBmaWxlcGF0aC5pc19maWxlKCk6XHJcbiAgICAgICAgICAgIHJldHVybiBGaWxlUmVzcG9uc2UoZmlsZXBhdGgsIGNodW5rX3NpemU9c2VsZi5fY2h1bmtfc2l6ZSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBIVFRQTm90Rm91bmRcclxuXHJcbiAgICBkZWYgX2RpcmVjdG9yeV9hc19odG1sKHNlbGYsIGZpbGVwYXRoOiBQYXRoKSAtPiBzdHI6XHJcbiAgICAgICAgIyByZXR1cm5zIGRpcmVjdG9yeVwncyBpbmRleCBhcyBodG1sXHJcblxyXG4gICAgICAgICMgc2FuaXR5IGNoZWNrXHJcbiAgICAgICAgYXNzZXJ0IGZpbGVwYXRoLmlzX2RpcigpXHJcblxyXG4gICAgICAgIHJlbGF0aXZlX3BhdGhfdG9fZGlyID0gZmlsZXBhdGgucmVsYXRpdmVfdG8oc2VsZi5fZGlyZWN0b3J5KS5hc19wb3NpeCgpXHJcbiAgICAgICAgaW5kZXhfb2YgPSBmIkluZGV4IG9mIC97cmVsYXRpdmVfcGF0aF90b19kaXJ9IlxyXG4gICAgICAgIGgxID0gZiI8aDE+e2luZGV4X29mfTwvaDE+IlxyXG5cclxuICAgICAgICBpbmRleF9saXN0ID0gW11cclxuICAgICAgICBkaXJfaW5kZXggPSBmaWxlcGF0aC5pdGVyZGlyKClcclxuICAgICAgICBmb3IgX2ZpbGUgaW4gc29ydGVkKGRpcl9pbmRleCk6XHJcbiAgICAgICAgICAgICMgc2hvdyBmaWxlIHVybCBhcyByZWxhdGl2ZSB0byBzdGF0aWMgcGF0aFxyXG4gICAgICAgICAgICByZWxfcGF0aCA9IF9maWxlLnJlbGF0aXZlX3RvKHNlbGYuX2RpcmVjdG9yeSkuYXNfcG9zaXgoKVxyXG4gICAgICAgICAgICBmaWxlX3VybCA9IHNlbGYuX3ByZWZpeCArICIvIiArIHJlbF9wYXRoXHJcblxyXG4gICAgICAgICAgICAjIGlmIGZpbGUgaXMgYSBkaXJlY3RvcnksIGFkZCBcJy9cJyB0byB0aGUgZW5kIG9mIHRoZSBuYW1lXHJcbiAgICAgICAgICAgIGlmIF9maWxlLmlzX2RpcigpOlxyXG4gICAgICAgICAgICAgICAgZmlsZV9uYW1lID0gZiJ7X2ZpbGUubmFtZX0vIlxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgZmlsZV9uYW1lID0gX2ZpbGUubmFtZVxyXG5cclxuICAgICAgICAgICAgaW5kZXhfbGlzdC5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICBcJzxsaT48YSBocmVmPSJ7dXJsfSI+e25hbWV9PC9hPjwvbGk+XCcuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgIHVybD1maWxlX3VybCwgbmFtZT1maWxlX25hbWVcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHVsID0gIjx1bD5cXG57fVxcbjwvdWw+Ii5mb3JtYXQoIlxcbiIuam9pbihpbmRleF9saXN0KSlcclxuICAgICAgICBib2R5ID0gZiI8Ym9keT5cXG57aDF9XFxue3VsfVxcbjwvYm9keT4iXHJcblxyXG4gICAgICAgIGhlYWRfc3RyID0gZiI8aGVhZD5cXG48dGl0bGU+e2luZGV4X29mfTwvdGl0bGU+XFxuPC9oZWFkPiJcclxuICAgICAgICBodG1sID0gZiI8aHRtbD5cXG57aGVhZF9zdHJ9XFxue2JvZHl9XFxuPC9odG1sPiJcclxuXHJcbiAgICAgICAgcmV0dXJuIGh0bWxcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIG5hbWUgPSAiXCciICsgc2VsZi5uYW1lICsgIlwnIiBpZiBzZWxmLm5hbWUgaXMgbm90IE5vbmUgZWxzZSAiIlxyXG4gICAgICAgIHJldHVybiAiPFN0YXRpY1Jlc291cmNlIHtuYW1lfSB7cGF0aH0gLT4ge2RpcmVjdG9yeSFyfT4iLmZvcm1hdChcclxuICAgICAgICAgICAgbmFtZT1uYW1lLCBwYXRoPXNlbGYuX3ByZWZpeCwgZGlyZWN0b3J5PXNlbGYuX2RpcmVjdG9yeVxyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBQcmVmaXhlZFN1YkFwcFJlc291cmNlKFByZWZpeFJlc291cmNlKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwcmVmaXg6IHN0ciwgYXBwOiAiQXBwbGljYXRpb24iKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18ocHJlZml4KVxyXG4gICAgICAgIHNlbGYuX2FwcCA9IGFwcFxyXG4gICAgICAgIGZvciByZXNvdXJjZSBpbiBhcHAucm91dGVyLnJlc291cmNlcygpOlxyXG4gICAgICAgICAgICByZXNvdXJjZS5hZGRfcHJlZml4KHByZWZpeClcclxuXHJcbiAgICBkZWYgYWRkX3ByZWZpeChzZWxmLCBwcmVmaXg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLmFkZF9wcmVmaXgocHJlZml4KVxyXG4gICAgICAgIGZvciByZXNvdXJjZSBpbiBzZWxmLl9hcHAucm91dGVyLnJlc291cmNlcygpOlxyXG4gICAgICAgICAgICByZXNvdXJjZS5hZGRfcHJlZml4KHByZWZpeClcclxuXHJcbiAgICBkZWYgdXJsX2ZvcihzZWxmLCAqYXJnczogc3RyLCAqKmt3YXJnczogc3RyKSAtPiBVUkw6XHJcbiAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCIudXJsX2ZvcigpIGlzIG5vdCBzdXBwb3J0ZWQgIiAiYnkgc3ViLWFwcGxpY2F0aW9uIHJvb3QiKVxyXG5cclxuICAgIGRlZiBnZXRfaW5mbyhzZWxmKSAtPiBfSW5mb0RpY3Q6XHJcbiAgICAgICAgcmV0dXJuIHsiYXBwIjogc2VsZi5fYXBwLCAicHJlZml4Ijogc2VsZi5fcHJlZml4fVxyXG5cclxuICAgIGFzeW5jIGRlZiByZXNvbHZlKHNlbGYsIHJlcXVlc3Q6IFJlcXVlc3QpIC0+IF9SZXNvbHZlOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgbm90IHJlcXVlc3QudXJsLnJhd19wYXRoLnN0YXJ0c3dpdGgoc2VsZi5fcHJlZml4MilcclxuICAgICAgICAgICAgYW5kIHJlcXVlc3QudXJsLnJhd19wYXRoICE9IHNlbGYuX3ByZWZpeFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lLCBzZXQoKVxyXG4gICAgICAgIG1hdGNoX2luZm8gPSBhd2FpdCBzZWxmLl9hcHAucm91dGVyLnJlc29sdmUocmVxdWVzdClcclxuICAgICAgICBtYXRjaF9pbmZvLmFkZF9hcHAoc2VsZi5fYXBwKVxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UobWF0Y2hfaW5mby5odHRwX2V4Y2VwdGlvbiwgSFRUUE1ldGhvZE5vdEFsbG93ZWQpOlxyXG4gICAgICAgICAgICBtZXRob2RzID0gbWF0Y2hfaW5mby5odHRwX2V4Y2VwdGlvbi5hbGxvd2VkX21ldGhvZHNcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBtZXRob2RzID0gc2V0KClcclxuICAgICAgICByZXR1cm4gbWF0Y2hfaW5mbywgbWV0aG9kc1xyXG5cclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYuX2FwcC5yb3V0ZXIucm91dGVzKCkpXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+IEl0ZXJhdG9yW0Fic3RyYWN0Um91dGVdOlxyXG4gICAgICAgIHJldHVybiBpdGVyKHNlbGYuX2FwcC5yb3V0ZXIucm91dGVzKCkpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxQcmVmaXhlZFN1YkFwcFJlc291cmNlIHtwcmVmaXh9IC0+IHthcHAhcn0+Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIHByZWZpeD1zZWxmLl9wcmVmaXgsIGFwcD1zZWxmLl9hcHBcclxuICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgQWJzdHJhY3RSdWxlTWF0Y2hpbmcoYWJjLkFCQyk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kICAjIHByYWdtYTogbm8gYnJhbmNoXHJcbiAgICBhc3luYyBkZWYgbWF0Y2goc2VsZiwgcmVxdWVzdDogUmVxdWVzdCkgLT4gYm9vbDpcclxuICAgICAgICAiIiJSZXR1cm4gYm9vbCBpZiB0aGUgcmVxdWVzdCBzYXRpc2ZpZXMgdGhlIGNyaXRlcmlhIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZCAgIyBwcmFnbWE6IG5vIGJyYW5jaFxyXG4gICAgZGVmIGdldF9pbmZvKHNlbGYpIC0+IF9JbmZvRGljdDpcclxuICAgICAgICAiIiJSZXR1cm4gYSBkaWN0IHdpdGggYWRkaXRpb25hbCBpbmZvIHVzZWZ1bCBmb3IgaW50cm9zcGVjdGlvbiIiIlxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZCAgIyBwcmFnbWE6IG5vIGJyYW5jaFxyXG4gICAgZGVmIGNhbm9uaWNhbChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiUmV0dXJuIGEgc3RyIiIiXHJcblxyXG5cclxuY2xhc3MgRG9tYWluKEFic3RyYWN0UnVsZU1hdGNoaW5nKTpcclxuICAgIHJlX3BhcnQgPSByZS5jb21waWxlKHIiKD8hLSlbYS16XFxkLV17MSw2M30oPzwhLSkiKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkb21haW46IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKClcclxuICAgICAgICBzZWxmLl9kb21haW4gPSBzZWxmLnZhbGlkYXRpb24oZG9tYWluKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNhbm9uaWNhbChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2RvbWFpblxyXG5cclxuICAgIGRlZiB2YWxpZGF0aW9uKHNlbGYsIGRvbWFpbjogc3RyKSAtPiBzdHI6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZG9tYWluLCBzdHIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkRvbWFpbiBtdXN0IGJlIHN0ciIpXHJcbiAgICAgICAgZG9tYWluID0gZG9tYWluLnJzdHJpcCgiLiIpLmxvd2VyKClcclxuICAgICAgICBpZiBub3QgZG9tYWluOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJEb21haW4gY2Fubm90IGJlIGVtcHR5IilcclxuICAgICAgICBlbGlmICI6Ly8iIGluIGRvbWFpbjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiU2NoZW1lIG5vdCBzdXBwb3J0ZWQiKVxyXG4gICAgICAgIHVybCA9IFVSTCgiaHR0cDovLyIgKyBkb21haW4pXHJcbiAgICAgICAgYXNzZXJ0IHVybC5yYXdfaG9zdCBpcyBub3QgTm9uZVxyXG4gICAgICAgIGlmIG5vdCBhbGwoc2VsZi5yZV9wYXJ0LmZ1bGxtYXRjaCh4KSBmb3IgeCBpbiB1cmwucmF3X2hvc3Quc3BsaXQoIi4iKSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkRvbWFpbiBub3QgdmFsaWQiKVxyXG4gICAgICAgIGlmIHVybC5wb3J0ID09IDgwOlxyXG4gICAgICAgICAgICByZXR1cm4gdXJsLnJhd19ob3N0XHJcbiAgICAgICAgcmV0dXJuIGYie3VybC5yYXdfaG9zdH06e3VybC5wb3J0fSJcclxuXHJcbiAgICBhc3luYyBkZWYgbWF0Y2goc2VsZiwgcmVxdWVzdDogUmVxdWVzdCkgLT4gYm9vbDpcclxuICAgICAgICBob3N0ID0gcmVxdWVzdC5oZWFkZXJzLmdldChoZHJzLkhPU1QpXHJcbiAgICAgICAgaWYgbm90IGhvc3Q6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIHJldHVybiBzZWxmLm1hdGNoX2RvbWFpbihob3N0KVxyXG5cclxuICAgIGRlZiBtYXRjaF9kb21haW4oc2VsZiwgaG9zdDogc3RyKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBob3N0Lmxvd2VyKCkgPT0gc2VsZi5fZG9tYWluXHJcblxyXG4gICAgZGVmIGdldF9pbmZvKHNlbGYpIC0+IF9JbmZvRGljdDpcclxuICAgICAgICByZXR1cm4geyJkb21haW4iOiBzZWxmLl9kb21haW59XHJcblxyXG5cclxuY2xhc3MgTWFza0RvbWFpbihEb21haW4pOlxyXG4gICAgcmVfcGFydCA9IHJlLmNvbXBpbGUociIoPyEtKVthLXpcXGRcXCotXXsxLDYzfSg/PCEtKSIpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGRvbWFpbjogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oZG9tYWluKVxyXG4gICAgICAgIG1hc2sgPSBzZWxmLl9kb21haW4ucmVwbGFjZSgiLiIsIHIiXFwuIikucmVwbGFjZSgiKiIsICIuKiIpXHJcbiAgICAgICAgc2VsZi5fbWFzayA9IHJlLmNvbXBpbGUobWFzaylcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjYW5vbmljYWwoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9tYXNrLnBhdHRlcm5cclxuXHJcbiAgICBkZWYgbWF0Y2hfZG9tYWluKHNlbGYsIGhvc3Q6IHN0cikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fbWFzay5mdWxsbWF0Y2goaG9zdCkgaXMgbm90IE5vbmVcclxuXHJcblxyXG5jbGFzcyBNYXRjaGVkU3ViQXBwUmVzb3VyY2UoUHJlZml4ZWRTdWJBcHBSZXNvdXJjZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgcnVsZTogQWJzdHJhY3RSdWxlTWF0Y2hpbmcsIGFwcDogIkFwcGxpY2F0aW9uIikgLT4gTm9uZTpcclxuICAgICAgICBBYnN0cmFjdFJlc291cmNlLl9faW5pdF9fKHNlbGYpXHJcbiAgICAgICAgc2VsZi5fcHJlZml4ID0gIiJcclxuICAgICAgICBzZWxmLl9hcHAgPSBhcHBcclxuICAgICAgICBzZWxmLl9ydWxlID0gcnVsZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNhbm9uaWNhbChzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3J1bGUuY2Fub25pY2FsXHJcblxyXG4gICAgZGVmIGdldF9pbmZvKHNlbGYpIC0+IF9JbmZvRGljdDpcclxuICAgICAgICByZXR1cm4geyJhcHAiOiBzZWxmLl9hcHAsICJydWxlIjogc2VsZi5fcnVsZX1cclxuXHJcbiAgICBhc3luYyBkZWYgcmVzb2x2ZShzZWxmLCByZXF1ZXN0OiBSZXF1ZXN0KSAtPiBfUmVzb2x2ZTpcclxuICAgICAgICBpZiBub3QgYXdhaXQgc2VsZi5fcnVsZS5tYXRjaChyZXF1ZXN0KTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmUsIHNldCgpXHJcbiAgICAgICAgbWF0Y2hfaW5mbyA9IGF3YWl0IHNlbGYuX2FwcC5yb3V0ZXIucmVzb2x2ZShyZXF1ZXN0KVxyXG4gICAgICAgIG1hdGNoX2luZm8uYWRkX2FwcChzZWxmLl9hcHApXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShtYXRjaF9pbmZvLmh0dHBfZXhjZXB0aW9uLCBIVFRQTWV0aG9kTm90QWxsb3dlZCk6XHJcbiAgICAgICAgICAgIG1ldGhvZHMgPSBtYXRjaF9pbmZvLmh0dHBfZXhjZXB0aW9uLmFsbG93ZWRfbWV0aG9kc1xyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIG1ldGhvZHMgPSBzZXQoKVxyXG4gICAgICAgIHJldHVybiBtYXRjaF9pbmZvLCBtZXRob2RzXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxNYXRjaGVkU3ViQXBwUmVzb3VyY2UgLT4ge2FwcCFyfT4iICIiLmZvcm1hdChhcHA9c2VsZi5fYXBwKVxyXG5cclxuXHJcbmNsYXNzIFJlc291cmNlUm91dGUoQWJzdHJhY3RSb3V0ZSk6XHJcbiAgICAiIiJBIHJvdXRlIHdpdGggcmVzb3VyY2UiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZXRob2Q6IHN0cixcclxuICAgICAgICBoYW5kbGVyOiBVbmlvbltIYW5kbGVyLCBUeXBlW0Fic3RyYWN0Vmlld11dLFxyXG4gICAgICAgIHJlc291cmNlOiBBYnN0cmFjdFJlc291cmNlLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgZXhwZWN0X2hhbmRsZXI6IE9wdGlvbmFsW19FeHBlY3RIYW5kbGVyXSA9IE5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhcclxuICAgICAgICAgICAgbWV0aG9kLCBoYW5kbGVyLCBleHBlY3RfaGFuZGxlcj1leHBlY3RfaGFuZGxlciwgcmVzb3VyY2U9cmVzb3VyY2VcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxSZXNvdXJjZVJvdXRlIFt7bWV0aG9kfV0ge3Jlc291cmNlfSAtPiB7aGFuZGxlciFyfSIuZm9ybWF0KFxyXG4gICAgICAgICAgICBtZXRob2Q9c2VsZi5tZXRob2QsIHJlc291cmNlPXNlbGYuX3Jlc291cmNlLCBoYW5kbGVyPXNlbGYuaGFuZGxlclxyXG4gICAgICAgIClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBuYW1lKHNlbGYpIC0+IE9wdGlvbmFsW3N0cl06XHJcbiAgICAgICAgaWYgc2VsZi5fcmVzb3VyY2UgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuICAgICAgICByZXR1cm4gc2VsZi5fcmVzb3VyY2UubmFtZVxyXG5cclxuICAgIGRlZiB1cmxfZm9yKHNlbGYsICphcmdzOiBzdHIsICoqa3dhcmdzOiBzdHIpIC0+IFVSTDpcclxuICAgICAgICAiIiJDb25zdHJ1Y3QgdXJsIGZvciByb3V0ZSB3aXRoIGFkZGl0aW9uYWwgcGFyYW1zLiIiIlxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9yZXNvdXJjZSBpcyBub3QgTm9uZVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZXNvdXJjZS51cmxfZm9yKCphcmdzLCAqKmt3YXJncylcclxuXHJcbiAgICBkZWYgZ2V0X2luZm8oc2VsZikgLT4gX0luZm9EaWN0OlxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9yZXNvdXJjZSBpcyBub3QgTm9uZVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZXNvdXJjZS5nZXRfaW5mbygpXHJcblxyXG5cclxuY2xhc3MgU3lzdGVtUm91dGUoQWJzdHJhY3RSb3V0ZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgaHR0cF9leGNlcHRpb246IEhUVFBFeGNlcHRpb24pIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoZHJzLk1FVEhfQU5ZLCBzZWxmLl9oYW5kbGUpXHJcbiAgICAgICAgc2VsZi5faHR0cF9leGNlcHRpb24gPSBodHRwX2V4Y2VwdGlvblxyXG5cclxuICAgIGRlZiB1cmxfZm9yKHNlbGYsICphcmdzOiBzdHIsICoqa3dhcmdzOiBzdHIpIC0+IFVSTDpcclxuICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIi51cmxfZm9yKCkgaXMgbm90IGFsbG93ZWQgZm9yIFN5c3RlbVJvdXRlIilcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBuYW1lKHNlbGYpIC0+IE9wdGlvbmFsW3N0cl06XHJcbiAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICBkZWYgZ2V0X2luZm8oc2VsZikgLT4gX0luZm9EaWN0OlxyXG4gICAgICAgIHJldHVybiB7Imh0dHBfZXhjZXB0aW9uIjogc2VsZi5faHR0cF9leGNlcHRpb259XHJcblxyXG4gICAgYXN5bmMgZGVmIF9oYW5kbGUoc2VsZiwgcmVxdWVzdDogUmVxdWVzdCkgLT4gU3RyZWFtUmVzcG9uc2U6XHJcbiAgICAgICAgcmFpc2Ugc2VsZi5faHR0cF9leGNlcHRpb25cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBzdGF0dXMoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9odHRwX2V4Y2VwdGlvbi5zdGF0dXNcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByZWFzb24oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9odHRwX2V4Y2VwdGlvbi5yZWFzb25cclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFN5c3RlbVJvdXRlIHtzZWxmLnN0YXR1c306IHtzZWxmLnJlYXNvbn0+Ii5mb3JtYXQoc2VsZj1zZWxmKVxyXG5cclxuXHJcbmNsYXNzIFZpZXcoQWJzdHJhY3RWaWV3KTpcclxuICAgIGFzeW5jIGRlZiBfaXRlcihzZWxmKSAtPiBTdHJlYW1SZXNwb25zZTpcclxuICAgICAgICBpZiBzZWxmLnJlcXVlc3QubWV0aG9kIG5vdCBpbiBoZHJzLk1FVEhfQUxMOlxyXG4gICAgICAgICAgICBzZWxmLl9yYWlzZV9hbGxvd2VkX21ldGhvZHMoKVxyXG4gICAgICAgIG1ldGhvZDogQ2FsbGFibGVbW10sIEF3YWl0YWJsZVtTdHJlYW1SZXNwb25zZV1dID0gZ2V0YXR0cihcclxuICAgICAgICAgICAgc2VsZiwgc2VsZi5yZXF1ZXN0Lm1ldGhvZC5sb3dlcigpLCBOb25lXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGlmIG1ldGhvZCBpcyBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9yYWlzZV9hbGxvd2VkX21ldGhvZHMoKVxyXG4gICAgICAgIHJlc3AgPSBhd2FpdCBtZXRob2QoKVxyXG4gICAgICAgIHJldHVybiByZXNwXHJcblxyXG4gICAgZGVmIF9fYXdhaXRfXyhzZWxmKSAtPiBHZW5lcmF0b3JbQW55LCBOb25lLCBTdHJlYW1SZXNwb25zZV06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2l0ZXIoKS5fX2F3YWl0X18oKVxyXG5cclxuICAgIGRlZiBfcmFpc2VfYWxsb3dlZF9tZXRob2RzKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgYWxsb3dlZF9tZXRob2RzID0ge20gZm9yIG0gaW4gaGRycy5NRVRIX0FMTCBpZiBoYXNhdHRyKHNlbGYsIG0ubG93ZXIoKSl9XHJcbiAgICAgICAgcmFpc2UgSFRUUE1ldGhvZE5vdEFsbG93ZWQoc2VsZi5yZXF1ZXN0Lm1ldGhvZCwgYWxsb3dlZF9tZXRob2RzKVxyXG5cclxuXHJcbmNsYXNzIFJlc291cmNlc1ZpZXcoU2l6ZWQsIEl0ZXJhYmxlW0Fic3RyYWN0UmVzb3VyY2VdLCBDb250YWluZXJbQWJzdHJhY3RSZXNvdXJjZV0pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHJlc291cmNlczogTGlzdFtBYnN0cmFjdFJlc291cmNlXSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9yZXNvdXJjZXMgPSByZXNvdXJjZXNcclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9yZXNvdXJjZXMpXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+IEl0ZXJhdG9yW0Fic3RyYWN0UmVzb3VyY2VdOlxyXG4gICAgICAgIHlpZWxkIGZyb20gc2VsZi5fcmVzb3VyY2VzXHJcblxyXG4gICAgZGVmIF9fY29udGFpbnNfXyhzZWxmLCByZXNvdXJjZTogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiByZXNvdXJjZSBpbiBzZWxmLl9yZXNvdXJjZXNcclxuXHJcblxyXG5jbGFzcyBSb3V0ZXNWaWV3KFNpemVkLCBJdGVyYWJsZVtBYnN0cmFjdFJvdXRlXSwgQ29udGFpbmVyW0Fic3RyYWN0Um91dGVdKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCByZXNvdXJjZXM6IExpc3RbQWJzdHJhY3RSZXNvdXJjZV0pOlxyXG4gICAgICAgIHNlbGYuX3JvdXRlcyA9IFtdICAjIHR5cGU6IExpc3RbQWJzdHJhY3RSb3V0ZV1cclxuICAgICAgICBmb3IgcmVzb3VyY2UgaW4gcmVzb3VyY2VzOlxyXG4gICAgICAgICAgICBmb3Igcm91dGUgaW4gcmVzb3VyY2U6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9yb3V0ZXMuYXBwZW5kKHJvdXRlKVxyXG5cclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYuX3JvdXRlcylcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gSXRlcmF0b3JbQWJzdHJhY3RSb3V0ZV06XHJcbiAgICAgICAgeWllbGQgZnJvbSBzZWxmLl9yb3V0ZXNcclxuXHJcbiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIHJvdXRlOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHJvdXRlIGluIHNlbGYuX3JvdXRlc1xyXG5cclxuXHJcbmNsYXNzIFVybERpc3BhdGNoZXIoQWJzdHJhY3RSb3V0ZXIsIE1hcHBpbmdbc3RyLCBBYnN0cmFjdFJlc291cmNlXSk6XHJcblxyXG4gICAgTkFNRV9TUExJVF9SRSA9IHJlLmNvbXBpbGUociJbLjotXSIpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpXHJcbiAgICAgICAgc2VsZi5fcmVzb3VyY2VzID0gW10gICMgdHlwZTogTGlzdFtBYnN0cmFjdFJlc291cmNlXVxyXG4gICAgICAgIHNlbGYuX25hbWVkX3Jlc291cmNlcyA9IHt9ICAjIHR5cGU6IERpY3Rbc3RyLCBBYnN0cmFjdFJlc291cmNlXVxyXG5cclxuICAgIGFzeW5jIGRlZiByZXNvbHZlKHNlbGYsIHJlcXVlc3Q6IFJlcXVlc3QpIC0+IFVybE1hcHBpbmdNYXRjaEluZm86XHJcbiAgICAgICAgbWV0aG9kID0gcmVxdWVzdC5tZXRob2RcclxuICAgICAgICBhbGxvd2VkX21ldGhvZHMgPSBzZXQoKSAgIyB0eXBlOiBTZXRbc3RyXVxyXG5cclxuICAgICAgICBmb3IgcmVzb3VyY2UgaW4gc2VsZi5fcmVzb3VyY2VzOlxyXG4gICAgICAgICAgICBtYXRjaF9kaWN0LCBhbGxvd2VkID0gYXdhaXQgcmVzb3VyY2UucmVzb2x2ZShyZXF1ZXN0KVxyXG4gICAgICAgICAgICBpZiBtYXRjaF9kaWN0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoX2RpY3RcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIGFsbG93ZWRfbWV0aG9kcyB8PSBhbGxvd2VkXHJcblxyXG4gICAgICAgIGlmIGFsbG93ZWRfbWV0aG9kczpcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGNoSW5mb0Vycm9yKEhUVFBNZXRob2ROb3RBbGxvd2VkKG1ldGhvZCwgYWxsb3dlZF9tZXRob2RzKSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gTWF0Y2hJbmZvRXJyb3IoSFRUUE5vdEZvdW5kKCkpXHJcblxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+IEl0ZXJhdG9yW3N0cl06XHJcbiAgICAgICAgcmV0dXJuIGl0ZXIoc2VsZi5fbmFtZWRfcmVzb3VyY2VzKVxyXG5cclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYuX25hbWVkX3Jlc291cmNlcylcclxuXHJcbiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIHJlc291cmNlOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHJlc291cmNlIGluIHNlbGYuX25hbWVkX3Jlc291cmNlc1xyXG5cclxuICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBuYW1lOiBzdHIpIC0+IEFic3RyYWN0UmVzb3VyY2U6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX25hbWVkX3Jlc291cmNlc1tuYW1lXVxyXG5cclxuICAgIGRlZiByZXNvdXJjZXMoc2VsZikgLT4gUmVzb3VyY2VzVmlldzpcclxuICAgICAgICByZXR1cm4gUmVzb3VyY2VzVmlldyhzZWxmLl9yZXNvdXJjZXMpXHJcblxyXG4gICAgZGVmIHJvdXRlcyhzZWxmKSAtPiBSb3V0ZXNWaWV3OlxyXG4gICAgICAgIHJldHVybiBSb3V0ZXNWaWV3KHNlbGYuX3Jlc291cmNlcylcclxuXHJcbiAgICBkZWYgbmFtZWRfcmVzb3VyY2VzKHNlbGYpIC0+IE1hcHBpbmdbc3RyLCBBYnN0cmFjdFJlc291cmNlXTpcclxuICAgICAgICByZXR1cm4gTWFwcGluZ1Byb3h5VHlwZShzZWxmLl9uYW1lZF9yZXNvdXJjZXMpXHJcblxyXG4gICAgZGVmIHJlZ2lzdGVyX3Jlc291cmNlKHNlbGYsIHJlc291cmNlOiBBYnN0cmFjdFJlc291cmNlKSAtPiBOb25lOlxyXG4gICAgICAgIGFzc2VydCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICByZXNvdXJjZSwgQWJzdHJhY3RSZXNvdXJjZVxyXG4gICAgICAgICksIGYiSW5zdGFuY2Ugb2YgQWJzdHJhY3RSZXNvdXJjZSBjbGFzcyBpcyByZXF1aXJlZCwgZ290IHtyZXNvdXJjZSFyfSJcclxuICAgICAgICBpZiBzZWxmLmZyb3plbjpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYW5ub3QgcmVnaXN0ZXIgYSByZXNvdXJjZSBpbnRvIGZyb3plbiByb3V0ZXIuIilcclxuXHJcbiAgICAgICAgbmFtZSA9IHJlc291cmNlLm5hbWVcclxuXHJcbiAgICAgICAgaWYgbmFtZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcGFydHMgPSBzZWxmLk5BTUVfU1BMSVRfUkUuc3BsaXQobmFtZSlcclxuICAgICAgICAgICAgZm9yIHBhcnQgaW4gcGFydHM6XHJcbiAgICAgICAgICAgICAgICBpZiBrZXl3b3JkLmlza2V5d29yZChwYXJ0KTpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmIkluY29ycmVjdCByb3V0ZSBuYW1lIHtuYW1lIXJ9LCAiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJweXRob24ga2V5d29yZHMgY2Fubm90IGJlIHVzZWQgIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiZm9yIHJvdXRlIG5hbWUiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgaWYgbm90IHBhcnQuaXNpZGVudGlmaWVyKCk6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgIkluY29ycmVjdCByb3V0ZSBuYW1lIHshcn0sICJcclxuICAgICAgICAgICAgICAgICAgICAgICAgInRoZSBuYW1lIHNob3VsZCBiZSBhIHNlcXVlbmNlIG9mICJcclxuICAgICAgICAgICAgICAgICAgICAgICAgInB5dGhvbiBpZGVudGlmaWVycyBzZXBhcmF0ZWQgIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiYnkgZGFzaCwgZG90IG9yIGNvbHVtbiIuZm9ybWF0KG5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiBuYW1lIGluIHNlbGYuX25hbWVkX3Jlc291cmNlczpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIkR1cGxpY2F0ZSB7IXJ9LCAiXHJcbiAgICAgICAgICAgICAgICAgICAgImFscmVhZHkgaGFuZGxlZCBieSB7IXJ9Ii5mb3JtYXQobmFtZSwgc2VsZi5fbmFtZWRfcmVzb3VyY2VzW25hbWVdKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBzZWxmLl9uYW1lZF9yZXNvdXJjZXNbbmFtZV0gPSByZXNvdXJjZVxyXG4gICAgICAgIHNlbGYuX3Jlc291cmNlcy5hcHBlbmQocmVzb3VyY2UpXHJcblxyXG4gICAgZGVmIGFkZF9yZXNvdXJjZShzZWxmLCBwYXRoOiBzdHIsICosIG5hbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lKSAtPiBSZXNvdXJjZTpcclxuICAgICAgICBpZiBwYXRoIGFuZCBub3QgcGF0aC5zdGFydHN3aXRoKCIvIik6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInBhdGggc2hvdWxkIGJlIHN0YXJ0ZWQgd2l0aCAvIG9yIGJlIGVtcHR5IilcclxuICAgICAgICAjIFJldXNlIGxhc3QgYWRkZWQgcmVzb3VyY2UgaWYgcGF0aCBhbmQgbmFtZSBhcmUgdGhlIHNhbWVcclxuICAgICAgICBpZiBzZWxmLl9yZXNvdXJjZXM6XHJcbiAgICAgICAgICAgIHJlc291cmNlID0gc2VsZi5fcmVzb3VyY2VzWy0xXVxyXG4gICAgICAgICAgICBpZiByZXNvdXJjZS5uYW1lID09IG5hbWUgYW5kIHJlc291cmNlLnJhd19tYXRjaChwYXRoKTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYXN0KFJlc291cmNlLCByZXNvdXJjZSlcclxuICAgICAgICBpZiBub3QgKCJ7IiBpbiBwYXRoIG9yICJ9IiBpbiBwYXRoIG9yIFJPVVRFX1JFLnNlYXJjaChwYXRoKSk6XHJcbiAgICAgICAgICAgIHJlc291cmNlID0gUGxhaW5SZXNvdXJjZShfcmVxdW90ZV9wYXRoKHBhdGgpLCBuYW1lPW5hbWUpXHJcbiAgICAgICAgICAgIHNlbGYucmVnaXN0ZXJfcmVzb3VyY2UocmVzb3VyY2UpXHJcbiAgICAgICAgICAgIHJldHVybiByZXNvdXJjZVxyXG4gICAgICAgIHJlc291cmNlID0gRHluYW1pY1Jlc291cmNlKHBhdGgsIG5hbWU9bmFtZSlcclxuICAgICAgICBzZWxmLnJlZ2lzdGVyX3Jlc291cmNlKHJlc291cmNlKVxyXG4gICAgICAgIHJldHVybiByZXNvdXJjZVxyXG5cclxuICAgIGRlZiBhZGRfcm91dGUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZXRob2Q6IHN0cixcclxuICAgICAgICBwYXRoOiBzdHIsXHJcbiAgICAgICAgaGFuZGxlcjogVW5pb25bSGFuZGxlciwgVHlwZVtBYnN0cmFjdFZpZXddXSxcclxuICAgICAgICAqLFxyXG4gICAgICAgIG5hbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGV4cGVjdF9oYW5kbGVyOiBPcHRpb25hbFtfRXhwZWN0SGFuZGxlcl0gPSBOb25lLFxyXG4gICAgKSAtPiBBYnN0cmFjdFJvdXRlOlxyXG4gICAgICAgIHJlc291cmNlID0gc2VsZi5hZGRfcmVzb3VyY2UocGF0aCwgbmFtZT1uYW1lKVxyXG4gICAgICAgIHJldHVybiByZXNvdXJjZS5hZGRfcm91dGUobWV0aG9kLCBoYW5kbGVyLCBleHBlY3RfaGFuZGxlcj1leHBlY3RfaGFuZGxlcilcclxuXHJcbiAgICBkZWYgYWRkX3N0YXRpYyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHByZWZpeDogc3RyLFxyXG4gICAgICAgIHBhdGg6IFBhdGhMaWtlLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgbmFtZTogT3B0aW9uYWxbc3RyXSA9IE5vbmUsXHJcbiAgICAgICAgZXhwZWN0X2hhbmRsZXI6IE9wdGlvbmFsW19FeHBlY3RIYW5kbGVyXSA9IE5vbmUsXHJcbiAgICAgICAgY2h1bmtfc2l6ZTogaW50ID0gMjU2ICogMTAyNCxcclxuICAgICAgICBzaG93X2luZGV4OiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgZm9sbG93X3N5bWxpbmtzOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgYXBwZW5kX3ZlcnNpb246IGJvb2wgPSBGYWxzZSxcclxuICAgICkgLT4gQWJzdHJhY3RSZXNvdXJjZTpcclxuICAgICAgICAiIiJBZGQgc3RhdGljIGZpbGVzIHZpZXcuXHJcblxyXG4gICAgICAgIHByZWZpeCAtIHVybCBwcmVmaXhcclxuICAgICAgICBwYXRoIC0gZm9sZGVyIHdpdGggZmlsZXNcclxuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgYXNzZXJ0IHByZWZpeC5zdGFydHN3aXRoKCIvIilcclxuICAgICAgICBpZiBwcmVmaXguZW5kc3dpdGgoIi8iKTpcclxuICAgICAgICAgICAgcHJlZml4ID0gcHJlZml4WzotMV1cclxuICAgICAgICByZXNvdXJjZSA9IFN0YXRpY1Jlc291cmNlKFxyXG4gICAgICAgICAgICBwcmVmaXgsXHJcbiAgICAgICAgICAgIHBhdGgsXHJcbiAgICAgICAgICAgIG5hbWU9bmFtZSxcclxuICAgICAgICAgICAgZXhwZWN0X2hhbmRsZXI9ZXhwZWN0X2hhbmRsZXIsXHJcbiAgICAgICAgICAgIGNodW5rX3NpemU9Y2h1bmtfc2l6ZSxcclxuICAgICAgICAgICAgc2hvd19pbmRleD1zaG93X2luZGV4LFxyXG4gICAgICAgICAgICBmb2xsb3dfc3ltbGlua3M9Zm9sbG93X3N5bWxpbmtzLFxyXG4gICAgICAgICAgICBhcHBlbmRfdmVyc2lvbj1hcHBlbmRfdmVyc2lvbixcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5yZWdpc3Rlcl9yZXNvdXJjZShyZXNvdXJjZSlcclxuICAgICAgICByZXR1cm4gcmVzb3VyY2VcclxuXHJcbiAgICBkZWYgYWRkX2hlYWQoc2VsZiwgcGF0aDogc3RyLCBoYW5kbGVyOiBIYW5kbGVyLCAqKmt3YXJnczogQW55KSAtPiBBYnN0cmFjdFJvdXRlOlxyXG4gICAgICAgICIiIlNob3J0Y3V0IGZvciBhZGRfcm91dGUgd2l0aCBtZXRob2QgSEVBRC4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5hZGRfcm91dGUoaGRycy5NRVRIX0hFQUQsIHBhdGgsIGhhbmRsZXIsICoqa3dhcmdzKVxyXG5cclxuICAgIGRlZiBhZGRfb3B0aW9ucyhzZWxmLCBwYXRoOiBzdHIsIGhhbmRsZXI6IEhhbmRsZXIsICoqa3dhcmdzOiBBbnkpIC0+IEFic3RyYWN0Um91dGU6XHJcbiAgICAgICAgIiIiU2hvcnRjdXQgZm9yIGFkZF9yb3V0ZSB3aXRoIG1ldGhvZCBPUFRJT05TLiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLmFkZF9yb3V0ZShoZHJzLk1FVEhfT1BUSU9OUywgcGF0aCwgaGFuZGxlciwgKiprd2FyZ3MpXHJcblxyXG4gICAgZGVmIGFkZF9nZXQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBwYXRoOiBzdHIsXHJcbiAgICAgICAgaGFuZGxlcjogSGFuZGxlcixcclxuICAgICAgICAqLFxyXG4gICAgICAgIG5hbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4gICAgICAgIGFsbG93X2hlYWQ6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgICoqa3dhcmdzOiBBbnksXHJcbiAgICApIC0+IEFic3RyYWN0Um91dGU6XHJcbiAgICAgICAgIiIiU2hvcnRjdXQgZm9yIGFkZF9yb3V0ZSB3aXRoIG1ldGhvZCBHRVQuXHJcblxyXG4gICAgICAgIElmIGFsbG93X2hlYWQgaXMgdHJ1ZSwgYW5vdGhlclxyXG4gICAgICAgIHJvdXRlIGlzIGFkZGVkIGFsbG93aW5nIGhlYWQgcmVxdWVzdHMgdG8gdGhlIHNhbWUgZW5kcG9pbnQuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmVzb3VyY2UgPSBzZWxmLmFkZF9yZXNvdXJjZShwYXRoLCBuYW1lPW5hbWUpXHJcbiAgICAgICAgaWYgYWxsb3dfaGVhZDpcclxuICAgICAgICAgICAgcmVzb3VyY2UuYWRkX3JvdXRlKGhkcnMuTUVUSF9IRUFELCBoYW5kbGVyLCAqKmt3YXJncylcclxuICAgICAgICByZXR1cm4gcmVzb3VyY2UuYWRkX3JvdXRlKGhkcnMuTUVUSF9HRVQsIGhhbmRsZXIsICoqa3dhcmdzKVxyXG5cclxuICAgIGRlZiBhZGRfcG9zdChzZWxmLCBwYXRoOiBzdHIsIGhhbmRsZXI6IEhhbmRsZXIsICoqa3dhcmdzOiBBbnkpIC0+IEFic3RyYWN0Um91dGU6XHJcbiAgICAgICAgIiIiU2hvcnRjdXQgZm9yIGFkZF9yb3V0ZSB3aXRoIG1ldGhvZCBQT1NULiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLmFkZF9yb3V0ZShoZHJzLk1FVEhfUE9TVCwgcGF0aCwgaGFuZGxlciwgKiprd2FyZ3MpXHJcblxyXG4gICAgZGVmIGFkZF9wdXQoc2VsZiwgcGF0aDogc3RyLCBoYW5kbGVyOiBIYW5kbGVyLCAqKmt3YXJnczogQW55KSAtPiBBYnN0cmFjdFJvdXRlOlxyXG4gICAgICAgICIiIlNob3J0Y3V0IGZvciBhZGRfcm91dGUgd2l0aCBtZXRob2QgUFVULiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLmFkZF9yb3V0ZShoZHJzLk1FVEhfUFVULCBwYXRoLCBoYW5kbGVyLCAqKmt3YXJncylcclxuXHJcbiAgICBkZWYgYWRkX3BhdGNoKHNlbGYsIHBhdGg6IHN0ciwgaGFuZGxlcjogSGFuZGxlciwgKiprd2FyZ3M6IEFueSkgLT4gQWJzdHJhY3RSb3V0ZTpcclxuICAgICAgICAiIiJTaG9ydGN1dCBmb3IgYWRkX3JvdXRlIHdpdGggbWV0aG9kIFBBVENILiIiIlxyXG4gICAgICAgIHJldHVybiBzZWxmLmFkZF9yb3V0ZShoZHJzLk1FVEhfUEFUQ0gsIHBhdGgsIGhhbmRsZXIsICoqa3dhcmdzKVxyXG5cclxuICAgIGRlZiBhZGRfZGVsZXRlKHNlbGYsIHBhdGg6IHN0ciwgaGFuZGxlcjogSGFuZGxlciwgKiprd2FyZ3M6IEFueSkgLT4gQWJzdHJhY3RSb3V0ZTpcclxuICAgICAgICAiIiJTaG9ydGN1dCBmb3IgYWRkX3JvdXRlIHdpdGggbWV0aG9kIERFTEVURS4iIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5hZGRfcm91dGUoaGRycy5NRVRIX0RFTEVURSwgcGF0aCwgaGFuZGxlciwgKiprd2FyZ3MpXHJcblxyXG4gICAgZGVmIGFkZF92aWV3KFxyXG4gICAgICAgIHNlbGYsIHBhdGg6IHN0ciwgaGFuZGxlcjogVHlwZVtBYnN0cmFjdFZpZXddLCAqKmt3YXJnczogQW55XHJcbiAgICApIC0+IEFic3RyYWN0Um91dGU6XHJcbiAgICAgICAgIiIiU2hvcnRjdXQgZm9yIGFkZF9yb3V0ZSB3aXRoIEFOWSBtZXRob2RzIGZvciBhIGNsYXNzLWJhc2VkIHZpZXcuIiIiXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuYWRkX3JvdXRlKGhkcnMuTUVUSF9BTlksIHBhdGgsIGhhbmRsZXIsICoqa3dhcmdzKVxyXG5cclxuICAgIGRlZiBmcmVlemUoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLmZyZWV6ZSgpXHJcbiAgICAgICAgZm9yIHJlc291cmNlIGluIHNlbGYuX3Jlc291cmNlczpcclxuICAgICAgICAgICAgcmVzb3VyY2UuZnJlZXplKClcclxuXHJcbiAgICBkZWYgYWRkX3JvdXRlcyhzZWxmLCByb3V0ZXM6IEl0ZXJhYmxlW0Fic3RyYWN0Um91dGVEZWZdKSAtPiBMaXN0W0Fic3RyYWN0Um91dGVdOlxyXG4gICAgICAgICIiIkFwcGVuZCByb3V0ZXMgdG8gcm91dGUgdGFibGUuXHJcblxyXG4gICAgICAgIFBhcmFtZXRlciBzaG91bGQgYmUgYSBzZXF1ZW5jZSBvZiBSb3V0ZURlZiBvYmplY3RzLlxyXG5cclxuICAgICAgICBSZXR1cm5zIGEgbGlzdCBvZiByZWdpc3RlcmVkIEFic3RyYWN0Um91dGUgaW5zdGFuY2VzLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJlZ2lzdGVyZWRfcm91dGVzID0gW11cclxuICAgICAgICBmb3Igcm91dGVfZGVmIGluIHJvdXRlczpcclxuICAgICAgICAgICAgcmVnaXN0ZXJlZF9yb3V0ZXMuZXh0ZW5kKHJvdXRlX2RlZi5yZWdpc3RlcihzZWxmKSlcclxuICAgICAgICByZXR1cm4gcmVnaXN0ZXJlZF9yb3V0ZXNcclxuXHJcblxyXG5kZWYgX3F1b3RlX3BhdGgodmFsdWU6IHN0cikgLT4gc3RyOlxyXG4gICAgaWYgWUFSTF9WRVJTSU9OIDwgKDEsIDYpOlxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgiJSIsICIlMjUiKVxyXG4gICAgcmV0dXJuIFVSTC5idWlsZChwYXRoPXZhbHVlLCBlbmNvZGVkPUZhbHNlKS5yYXdfcGF0aFxyXG5cclxuXHJcbmRlZiBfdW5xdW90ZV9wYXRoKHZhbHVlOiBzdHIpIC0+IHN0cjpcclxuICAgIHJldHVybiBVUkwuYnVpbGQocGF0aD12YWx1ZSwgZW5jb2RlZD1UcnVlKS5wYXRoXHJcblxyXG5cclxuZGVmIF9yZXF1b3RlX3BhdGgodmFsdWU6IHN0cikgLT4gc3RyOlxyXG4gICAgIyBRdW90ZSBub24tYXNjaWkgY2hhcmFjdGVycyBhbmQgb3RoZXIgY2hhcmFjdGVycyB3aGljaCBtdXN0IGJlIHF1b3RlZCxcclxuICAgICMgYnV0IHByZXNlcnZlIGV4aXN0aW5nICUtc2VxdWVuY2VzLlxyXG4gICAgcmVzdWx0ID0gX3F1b3RlX3BhdGgodmFsdWUpXHJcbiAgICBpZiAiJSIgaW4gdmFsdWU6XHJcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoIiUyNSIsICIlIilcclxuICAgIHJldHVybiByZXN1bHRcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvd2ViX2ZpbGVyZXNwb25zZS5weScsIGInaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IG1pbWV0eXBlc1xyXG5pbXBvcnQgb3NcclxuaW1wb3J0IHBhdGhsaWJcclxuaW1wb3J0IHN5c1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgKCAgIyBub3FhXHJcbiAgICBJTyxcclxuICAgIFRZUEVfQ0hFQ0tJTkcsXHJcbiAgICBBbnksXHJcbiAgICBBd2FpdGFibGUsXHJcbiAgICBDYWxsYWJsZSxcclxuICAgIEl0ZXJhdG9yLFxyXG4gICAgTGlzdCxcclxuICAgIE9wdGlvbmFsLFxyXG4gICAgVHVwbGUsXHJcbiAgICBVbmlvbixcclxuICAgIGNhc3QsXHJcbilcclxuXHJcbmZyb20gLiBpbXBvcnQgaGRyc1xyXG5mcm9tIC5hYmMgaW1wb3J0IEFic3RyYWN0U3RyZWFtV3JpdGVyXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IEVUQUdfQU5ZLCBFVGFnXHJcbmZyb20gLnR5cGVkZWZzIGltcG9ydCBGaW5hbCwgTG9vc2VIZWFkZXJzXHJcbmZyb20gLndlYl9leGNlcHRpb25zIGltcG9ydCAoXHJcbiAgICBIVFRQTm90TW9kaWZpZWQsXHJcbiAgICBIVFRQUGFydGlhbENvbnRlbnQsXHJcbiAgICBIVFRQUHJlY29uZGl0aW9uRmFpbGVkLFxyXG4gICAgSFRUUFJlcXVlc3RSYW5nZU5vdFNhdGlzZmlhYmxlLFxyXG4pXHJcbmZyb20gLndlYl9yZXNwb25zZSBpbXBvcnQgU3RyZWFtUmVzcG9uc2VcclxuXHJcbl9fYWxsX18gPSAoIkZpbGVSZXNwb25zZSIsKVxyXG5cclxuaWYgVFlQRV9DSEVDS0lORzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgZnJvbSAud2ViX3JlcXVlc3QgaW1wb3J0IEJhc2VSZXF1ZXN0XHJcblxyXG5cclxuX1RfT25DaHVua1NlbnQgPSBPcHRpb25hbFtDYWxsYWJsZVtbYnl0ZXNdLCBBd2FpdGFibGVbTm9uZV1dXVxyXG5cclxuXHJcbk5PU0VOREZJTEU6IEZpbmFsW2Jvb2xdID0gYm9vbChvcy5lbnZpcm9uLmdldCgiQUlPSFRUUF9OT1NFTkRGSUxFIikpXHJcblxyXG5cclxuY2xhc3MgRmlsZVJlc3BvbnNlKFN0cmVhbVJlc3BvbnNlKTpcclxuICAgICIiIkEgcmVzcG9uc2Ugb2JqZWN0IGNhbiBiZSB1c2VkIHRvIHNlbmQgZmlsZXMuIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcGF0aDogVW5pb25bc3RyLCBwYXRobGliLlBhdGhdLFxyXG4gICAgICAgIGNodW5rX3NpemU6IGludCA9IDI1NiAqIDEwMjQsXHJcbiAgICAgICAgc3RhdHVzOiBpbnQgPSAyMDAsXHJcbiAgICAgICAgcmVhc29uOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBoZWFkZXJzOiBPcHRpb25hbFtMb29zZUhlYWRlcnNdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKHN0YXR1cz1zdGF0dXMsIHJlYXNvbj1yZWFzb24sIGhlYWRlcnM9aGVhZGVycylcclxuXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShwYXRoLCBzdHIpOlxyXG4gICAgICAgICAgICBwYXRoID0gcGF0aGxpYi5QYXRoKHBhdGgpXHJcblxyXG4gICAgICAgIHNlbGYuX3BhdGggPSBwYXRoXHJcbiAgICAgICAgc2VsZi5fY2h1bmtfc2l6ZSA9IGNodW5rX3NpemVcclxuXHJcbiAgICBhc3luYyBkZWYgX3NlbmRmaWxlX2ZhbGxiYWNrKFxyXG4gICAgICAgIHNlbGYsIHdyaXRlcjogQWJzdHJhY3RTdHJlYW1Xcml0ZXIsIGZvYmo6IElPW0FueV0sIG9mZnNldDogaW50LCBjb3VudDogaW50XHJcbiAgICApIC0+IEFic3RyYWN0U3RyZWFtV3JpdGVyOlxyXG4gICAgICAgICMgVG8ga2VlcCBtZW1vcnkgdXNhZ2UgbG93LGZvYmogaXMgdHJhbnNmZXJyZWQgaW4gY2h1bmtzXHJcbiAgICAgICAgIyBjb250cm9sbGVkIGJ5IHRoZSBjb25zdHJ1Y3RvclwncyBjaHVua19zaXplIGFyZ3VtZW50LlxyXG5cclxuICAgICAgICBjaHVua19zaXplID0gc2VsZi5fY2h1bmtfc2l6ZVxyXG4gICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuXHJcbiAgICAgICAgYXdhaXQgbG9vcC5ydW5faW5fZXhlY3V0b3IoTm9uZSwgZm9iai5zZWVrLCBvZmZzZXQpXHJcblxyXG4gICAgICAgIGNodW5rID0gYXdhaXQgbG9vcC5ydW5faW5fZXhlY3V0b3IoTm9uZSwgZm9iai5yZWFkLCBjaHVua19zaXplKVxyXG4gICAgICAgIHdoaWxlIGNodW5rOlxyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZXIud3JpdGUoY2h1bmspXHJcbiAgICAgICAgICAgIGNvdW50ID0gY291bnQgLSBjaHVua19zaXplXHJcbiAgICAgICAgICAgIGlmIGNvdW50IDw9IDA6XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBjaHVuayA9IGF3YWl0IGxvb3AucnVuX2luX2V4ZWN1dG9yKE5vbmUsIGZvYmoucmVhZCwgbWluKGNodW5rX3NpemUsIGNvdW50KSlcclxuXHJcbiAgICAgICAgYXdhaXQgd3JpdGVyLmRyYWluKClcclxuICAgICAgICByZXR1cm4gd3JpdGVyXHJcblxyXG4gICAgYXN5bmMgZGVmIF9zZW5kZmlsZShcclxuICAgICAgICBzZWxmLCByZXF1ZXN0OiAiQmFzZVJlcXVlc3QiLCBmb2JqOiBJT1tBbnldLCBvZmZzZXQ6IGludCwgY291bnQ6IGludFxyXG4gICAgKSAtPiBBYnN0cmFjdFN0cmVhbVdyaXRlcjpcclxuICAgICAgICB3cml0ZXIgPSBhd2FpdCBzdXBlcigpLnByZXBhcmUocmVxdWVzdClcclxuICAgICAgICBhc3NlcnQgd3JpdGVyIGlzIG5vdCBOb25lXHJcblxyXG4gICAgICAgIGlmIE5PU0VOREZJTEUgb3Igc3lzLnZlcnNpb25faW5mbyA8ICgzLCA3KSBvciBzZWxmLmNvbXByZXNzaW9uOlxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fc2VuZGZpbGVfZmFsbGJhY2sod3JpdGVyLCBmb2JqLCBvZmZzZXQsIGNvdW50KVxyXG5cclxuICAgICAgICBsb29wID0gcmVxdWVzdC5fbG9vcFxyXG4gICAgICAgIHRyYW5zcG9ydCA9IHJlcXVlc3QudHJhbnNwb3J0XHJcbiAgICAgICAgYXNzZXJ0IHRyYW5zcG9ydCBpcyBub3QgTm9uZVxyXG5cclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGF3YWl0IGxvb3Auc2VuZGZpbGUodHJhbnNwb3J0LCBmb2JqLCBvZmZzZXQsIGNvdW50KVxyXG4gICAgICAgIGV4Y2VwdCBOb3RJbXBsZW1lbnRlZEVycm9yOlxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fc2VuZGZpbGVfZmFsbGJhY2sod3JpdGVyLCBmb2JqLCBvZmZzZXQsIGNvdW50KVxyXG5cclxuICAgICAgICBhd2FpdCBzdXBlcigpLndyaXRlX2VvZigpXHJcbiAgICAgICAgcmV0dXJuIHdyaXRlclxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBfc3Ryb25nX2V0YWdfbWF0Y2goZXRhZ192YWx1ZTogc3RyLCBldGFnczogVHVwbGVbRVRhZywgLi4uXSkgLT4gYm9vbDpcclxuICAgICAgICBpZiBsZW4oZXRhZ3MpID09IDEgYW5kIGV0YWdzWzBdLnZhbHVlID09IEVUQUdfQU5ZOlxyXG4gICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG4gICAgICAgIHJldHVybiBhbnkoZXRhZy52YWx1ZSA9PSBldGFnX3ZhbHVlIGZvciBldGFnIGluIGV0YWdzIGlmIG5vdCBldGFnLmlzX3dlYWspXHJcblxyXG4gICAgYXN5bmMgZGVmIF9ub3RfbW9kaWZpZWQoXHJcbiAgICAgICAgc2VsZiwgcmVxdWVzdDogIkJhc2VSZXF1ZXN0IiwgZXRhZ192YWx1ZTogc3RyLCBsYXN0X21vZGlmaWVkOiBmbG9hdFxyXG4gICAgKSAtPiBPcHRpb25hbFtBYnN0cmFjdFN0cmVhbVdyaXRlcl06XHJcbiAgICAgICAgc2VsZi5zZXRfc3RhdHVzKEhUVFBOb3RNb2RpZmllZC5zdGF0dXNfY29kZSlcclxuICAgICAgICBzZWxmLl9sZW5ndGhfY2hlY2sgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuZXRhZyA9IGV0YWdfdmFsdWUgICMgdHlwZTogaWdub3JlW2Fzc2lnbm1lbnRdXHJcbiAgICAgICAgc2VsZi5sYXN0X21vZGlmaWVkID0gbGFzdF9tb2RpZmllZCAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuICAgICAgICAjIERlbGV0ZSBhbnkgQ29udGVudC1MZW5ndGggaGVhZGVycyBwcm92aWRlZCBieSB1c2VyLiBIVFRQIDMwNFxyXG4gICAgICAgICMgc2hvdWxkIGFsd2F5cyBoYXZlIGVtcHR5IHJlc3BvbnNlIGJvZHlcclxuICAgICAgICByZXR1cm4gYXdhaXQgc3VwZXIoKS5wcmVwYXJlKHJlcXVlc3QpXHJcblxyXG4gICAgYXN5bmMgZGVmIF9wcmVjb25kaXRpb25fZmFpbGVkKFxyXG4gICAgICAgIHNlbGYsIHJlcXVlc3Q6ICJCYXNlUmVxdWVzdCJcclxuICAgICkgLT4gT3B0aW9uYWxbQWJzdHJhY3RTdHJlYW1Xcml0ZXJdOlxyXG4gICAgICAgIHNlbGYuc2V0X3N0YXR1cyhIVFRQUHJlY29uZGl0aW9uRmFpbGVkLnN0YXR1c19jb2RlKVxyXG4gICAgICAgIHNlbGYuY29udGVudF9sZW5ndGggPSAwXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHN1cGVyKCkucHJlcGFyZShyZXF1ZXN0KVxyXG5cclxuICAgIGFzeW5jIGRlZiBwcmVwYXJlKHNlbGYsIHJlcXVlc3Q6ICJCYXNlUmVxdWVzdCIpIC0+IE9wdGlvbmFsW0Fic3RyYWN0U3RyZWFtV3JpdGVyXTpcclxuICAgICAgICBmaWxlcGF0aCA9IHNlbGYuX3BhdGhcclxuXHJcbiAgICAgICAgZ3ppcCA9IEZhbHNlXHJcbiAgICAgICAgaWYgImd6aXAiIGluIHJlcXVlc3QuaGVhZGVycy5nZXQoaGRycy5BQ0NFUFRfRU5DT0RJTkcsICIiKTpcclxuICAgICAgICAgICAgZ3ppcF9wYXRoID0gZmlsZXBhdGgud2l0aF9uYW1lKGZpbGVwYXRoLm5hbWUgKyAiLmd6IilcclxuXHJcbiAgICAgICAgICAgIGlmIGd6aXBfcGF0aC5pc19maWxlKCk6XHJcbiAgICAgICAgICAgICAgICBmaWxlcGF0aCA9IGd6aXBfcGF0aFxyXG4gICAgICAgICAgICAgICAgZ3ppcCA9IFRydWVcclxuXHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG4gICAgICAgIHN0OiBvcy5zdGF0X3Jlc3VsdCA9IGF3YWl0IGxvb3AucnVuX2luX2V4ZWN1dG9yKE5vbmUsIGZpbGVwYXRoLnN0YXQpXHJcblxyXG4gICAgICAgIGV0YWdfdmFsdWUgPSBmIntzdC5zdF9tdGltZV9uczp4fS17c3Quc3Rfc2l6ZTp4fSJcclxuICAgICAgICBsYXN0X21vZGlmaWVkID0gc3Quc3RfbXRpbWVcclxuXHJcbiAgICAgICAgIyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzIzMiNzZWN0aW9uLTZcclxuICAgICAgICBpZm1hdGNoID0gcmVxdWVzdC5pZl9tYXRjaFxyXG4gICAgICAgIGlmIGlmbWF0Y2ggaXMgbm90IE5vbmUgYW5kIG5vdCBzZWxmLl9zdHJvbmdfZXRhZ19tYXRjaChldGFnX3ZhbHVlLCBpZm1hdGNoKTpcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX3ByZWNvbmRpdGlvbl9mYWlsZWQocmVxdWVzdClcclxuXHJcbiAgICAgICAgdW5tb2RzaW5jZSA9IHJlcXVlc3QuaWZfdW5tb2RpZmllZF9zaW5jZVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdW5tb2RzaW5jZSBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICBhbmQgaWZtYXRjaCBpcyBOb25lXHJcbiAgICAgICAgICAgIGFuZCBzdC5zdF9tdGltZSA+IHVubW9kc2luY2UudGltZXN0YW1wKClcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fcHJlY29uZGl0aW9uX2ZhaWxlZChyZXF1ZXN0KVxyXG5cclxuICAgICAgICBpZm5vbmVtYXRjaCA9IHJlcXVlc3QuaWZfbm9uZV9tYXRjaFxyXG4gICAgICAgIGlmIGlmbm9uZW1hdGNoIGlzIG5vdCBOb25lIGFuZCBzZWxmLl9zdHJvbmdfZXRhZ19tYXRjaChldGFnX3ZhbHVlLCBpZm5vbmVtYXRjaCk6XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9ub3RfbW9kaWZpZWQocmVxdWVzdCwgZXRhZ192YWx1ZSwgbGFzdF9tb2RpZmllZClcclxuXHJcbiAgICAgICAgbW9kc2luY2UgPSByZXF1ZXN0LmlmX21vZGlmaWVkX3NpbmNlXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBtb2RzaW5jZSBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICBhbmQgaWZub25lbWF0Y2ggaXMgTm9uZVxyXG4gICAgICAgICAgICBhbmQgc3Quc3RfbXRpbWUgPD0gbW9kc2luY2UudGltZXN0YW1wKClcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fbm90X21vZGlmaWVkKHJlcXVlc3QsIGV0YWdfdmFsdWUsIGxhc3RfbW9kaWZpZWQpXHJcblxyXG4gICAgICAgIGlmIGhkcnMuQ09OVEVOVF9UWVBFIG5vdCBpbiBzZWxmLmhlYWRlcnM6XHJcbiAgICAgICAgICAgIGN0LCBlbmNvZGluZyA9IG1pbWV0eXBlcy5ndWVzc190eXBlKHN0cihmaWxlcGF0aCkpXHJcbiAgICAgICAgICAgIGlmIG5vdCBjdDpcclxuICAgICAgICAgICAgICAgIGN0ID0gImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSJcclxuICAgICAgICAgICAgc2hvdWxkX3NldF9jdCA9IFRydWVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBlbmNvZGluZyA9ICJnemlwIiBpZiBnemlwIGVsc2UgTm9uZVxyXG4gICAgICAgICAgICBzaG91bGRfc2V0X2N0ID0gRmFsc2VcclxuXHJcbiAgICAgICAgc3RhdHVzID0gc2VsZi5fc3RhdHVzXHJcbiAgICAgICAgZmlsZV9zaXplID0gc3Quc3Rfc2l6ZVxyXG4gICAgICAgIGNvdW50ID0gZmlsZV9zaXplXHJcblxyXG4gICAgICAgIHN0YXJ0ID0gTm9uZVxyXG5cclxuICAgICAgICBpZnJhbmdlID0gcmVxdWVzdC5pZl9yYW5nZVxyXG4gICAgICAgIGlmIGlmcmFuZ2UgaXMgTm9uZSBvciBzdC5zdF9tdGltZSA8PSBpZnJhbmdlLnRpbWVzdGFtcCgpOlxyXG4gICAgICAgICAgICAjIElmLVJhbmdlIGhlYWRlciBjaGVjazpcclxuICAgICAgICAgICAgIyBjb25kaXRpb24gPSBjYWNoZWQgZGF0ZSA+PSBsYXN0IG1vZGlmaWNhdGlvbiBkYXRlXHJcbiAgICAgICAgICAgICMgcmV0dXJuIDIwNiBpZiBUcnVlIGVsc2UgMjAwLlxyXG4gICAgICAgICAgICAjIGlmIEZhbHNlOlxyXG4gICAgICAgICAgICAjICAgUmFuZ2UgaGVhZGVyIHdvdWxkIG5vdCBiZSBwcm9jZXNzZWQsIHJldHVybiAyMDBcclxuICAgICAgICAgICAgIyBpZiBUcnVlIGJ1dCBSYW5nZSBoZWFkZXIgbWlzc2luZ1xyXG4gICAgICAgICAgICAjICAgcmV0dXJuIDIwMFxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBybmcgPSByZXF1ZXN0Lmh0dHBfcmFuZ2VcclxuICAgICAgICAgICAgICAgIHN0YXJ0ID0gcm5nLnN0YXJ0XHJcbiAgICAgICAgICAgICAgICBlbmQgPSBybmcuc3RvcFxyXG4gICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcclxuICAgICAgICAgICAgICAgICMgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzM6XHJcbiAgICAgICAgICAgICAgICAjIEEgc2VydmVyIGdlbmVyYXRpbmcgYSA0MTYgKFJhbmdlIE5vdCBTYXRpc2ZpYWJsZSkgcmVzcG9uc2UgdG9cclxuICAgICAgICAgICAgICAgICMgYSBieXRlLXJhbmdlIHJlcXVlc3QgU0hPVUxEIHNlbmQgYSBDb250ZW50LVJhbmdlIGhlYWRlciBmaWVsZFxyXG4gICAgICAgICAgICAgICAgIyB3aXRoIGFuIHVuc2F0aXNmaWVkLXJhbmdlIHZhbHVlLlxyXG4gICAgICAgICAgICAgICAgIyBUaGUgY29tcGxldGUtbGVuZ3RoIGluIGEgNDE2IHJlc3BvbnNlIGluZGljYXRlcyB0aGUgY3VycmVudFxyXG4gICAgICAgICAgICAgICAgIyBsZW5ndGggb2YgdGhlIHNlbGVjdGVkIHJlcHJlc2VudGF0aW9uLlxyXG4gICAgICAgICAgICAgICAgI1xyXG4gICAgICAgICAgICAgICAgIyBXaWxsIGRvIHRoZSBzYW1lIGJlbG93LiBNYW55IHNlcnZlcnMgaWdub3JlIHRoaXMgYW5kIGRvIG5vdFxyXG4gICAgICAgICAgICAgICAgIyBzZW5kIGEgQ29udGVudC1SYW5nZSBoZWFkZXIgd2l0aCBIVFRQIDQxNlxyXG4gICAgICAgICAgICAgICAgc2VsZi5oZWFkZXJzW2hkcnMuQ09OVEVOVF9SQU5HRV0gPSBmImJ5dGVzICove2ZpbGVfc2l6ZX0iXHJcbiAgICAgICAgICAgICAgICBzZWxmLnNldF9zdGF0dXMoSFRUUFJlcXVlc3RSYW5nZU5vdFNhdGlzZmlhYmxlLnN0YXR1c19jb2RlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHN1cGVyKCkucHJlcGFyZShyZXF1ZXN0KVxyXG5cclxuICAgICAgICAgICAgIyBJZiBhIHJhbmdlIHJlcXVlc3QgaGFzIGJlZW4gbWFkZSwgY29udmVydCBzdGFydCwgZW5kIHNsaWNlXHJcbiAgICAgICAgICAgICMgbm90YXRpb24gaW50byBmaWxlIHBvaW50ZXIgb2Zmc2V0IGFuZCBjb3VudFxyXG4gICAgICAgICAgICBpZiBzdGFydCBpcyBub3QgTm9uZSBvciBlbmQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICBpZiBzdGFydCA8IDAgYW5kIGVuZCBpcyBOb25lOiAgIyByZXR1cm4gdGFpbCBvZiBmaWxlXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgKz0gZmlsZV9zaXplXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgc3RhcnQgPCAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjIGlmIFJhbmdlOmJ5dGVzPS0xMDAwIGluIHJlcXVlc3QgaGVhZGVyIGJ1dCBmaWxlIHNpemVcclxuICAgICAgICAgICAgICAgICAgICAgICAgIyBpcyBvbmx5IDIwMCwgdGhlcmUgd291bGQgYmUgdHJvdWJsZSB3aXRob3V0IHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSAwXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSBmaWxlX3NpemUgLSBzdGFydFxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAjIHJmYzcyMzM6SWYgdGhlIGxhc3QtYnl0ZS1wb3MgdmFsdWUgaXNcclxuICAgICAgICAgICAgICAgICAgICAjIGFic2VudCwgb3IgaWYgdGhlIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0b1xyXG4gICAgICAgICAgICAgICAgICAgICMgdGhlIGN1cnJlbnQgbGVuZ3RoIG9mIHRoZSByZXByZXNlbnRhdGlvbiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICMgdGhlIGJ5dGUgcmFuZ2UgaXMgaW50ZXJwcmV0ZWQgYXMgdGhlIHJlbWFpbmRlclxyXG4gICAgICAgICAgICAgICAgICAgICMgb2YgdGhlIHJlcHJlc2VudGF0aW9uIChpLmUuLCB0aGUgc2VydmVyIHJlcGxhY2VzIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICMgdmFsdWUgb2YgbGFzdC1ieXRlLXBvcyB3aXRoIGEgdmFsdWUgdGhhdCBpcyBvbmUgbGVzcyB0aGFuXHJcbiAgICAgICAgICAgICAgICAgICAgIyB0aGUgY3VycmVudCBsZW5ndGggb2YgdGhlIHNlbGVjdGVkIHJlcHJlc2VudGF0aW9uKS5cclxuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluKGVuZCBpZiBlbmQgaXMgbm90IE5vbmUgZWxzZSBmaWxlX3NpemUsIGZpbGVfc2l6ZSkgLSBzdGFydFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICBpZiBzdGFydCA+PSBmaWxlX3NpemU6XHJcbiAgICAgICAgICAgICAgICAgICAgIyBIVFRQIDQxNiBzaG91bGQgYmUgcmV0dXJuZWQgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICAgICAgICAgICNcclxuICAgICAgICAgICAgICAgICAgICAjIEFjY29yZGluZyB0byBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzIzMzpcclxuICAgICAgICAgICAgICAgICAgICAjIElmIGEgdmFsaWQgYnl0ZS1yYW5nZS1zZXQgaW5jbHVkZXMgYXQgbGVhc3Qgb25lXHJcbiAgICAgICAgICAgICAgICAgICAgIyBieXRlLXJhbmdlLXNwZWMgd2l0aCBhIGZpcnN0LWJ5dGUtcG9zIHRoYXQgaXMgbGVzcyB0aGFuXHJcbiAgICAgICAgICAgICAgICAgICAgIyB0aGUgY3VycmVudCBsZW5ndGggb2YgdGhlIHJlcHJlc2VudGF0aW9uLCBvciBhdCBsZWFzdCBvbmVcclxuICAgICAgICAgICAgICAgICAgICAjIHN1ZmZpeC1ieXRlLXJhbmdlLXNwZWMgd2l0aCBhIG5vbi16ZXJvIHN1ZmZpeC1sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgIyB0aGVuIHRoZSBieXRlLXJhbmdlLXNldCBpcyBzYXRpc2ZpYWJsZS4gT3RoZXJ3aXNlLCB0aGVcclxuICAgICAgICAgICAgICAgICAgICAjIGJ5dGUtcmFuZ2Utc2V0IGlzIHVuc2F0aXNmaWFibGUuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5oZWFkZXJzW2hkcnMuQ09OVEVOVF9SQU5HRV0gPSBmImJ5dGVzICove2ZpbGVfc2l6ZX0iXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRfc3RhdHVzKEhUVFBSZXF1ZXN0UmFuZ2VOb3RTYXRpc2ZpYWJsZS5zdGF0dXNfY29kZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgc3VwZXIoKS5wcmVwYXJlKHJlcXVlc3QpXHJcblxyXG4gICAgICAgICAgICAgICAgc3RhdHVzID0gSFRUUFBhcnRpYWxDb250ZW50LnN0YXR1c19jb2RlXHJcbiAgICAgICAgICAgICAgICAjIEV2ZW4gdGhvdWdoIHlvdSBhcmUgc2VuZGluZyB0aGUgd2hvbGUgZmlsZSwgeW91IHNob3VsZCBzdGlsbFxyXG4gICAgICAgICAgICAgICAgIyByZXR1cm4gYSBIVFRQIDIwNiBmb3IgYSBSYW5nZSByZXF1ZXN0LlxyXG4gICAgICAgICAgICAgICAgc2VsZi5zZXRfc3RhdHVzKHN0YXR1cylcclxuXHJcbiAgICAgICAgaWYgc2hvdWxkX3NldF9jdDpcclxuICAgICAgICAgICAgc2VsZi5jb250ZW50X3R5cGUgPSBjdCAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuICAgICAgICBpZiBlbmNvZGluZzpcclxuICAgICAgICAgICAgc2VsZi5oZWFkZXJzW2hkcnMuQ09OVEVOVF9FTkNPRElOR10gPSBlbmNvZGluZ1xyXG4gICAgICAgIGlmIGd6aXA6XHJcbiAgICAgICAgICAgIHNlbGYuaGVhZGVyc1toZHJzLlZBUlldID0gaGRycy5BQ0NFUFRfRU5DT0RJTkdcclxuXHJcbiAgICAgICAgc2VsZi5ldGFnID0gZXRhZ192YWx1ZSAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuICAgICAgICBzZWxmLmxhc3RfbW9kaWZpZWQgPSBzdC5zdF9tdGltZSAgIyB0eXBlOiBpZ25vcmVbYXNzaWdubWVudF1cclxuICAgICAgICBzZWxmLmNvbnRlbnRfbGVuZ3RoID0gY291bnRcclxuXHJcbiAgICAgICAgc2VsZi5oZWFkZXJzW2hkcnMuQUNDRVBUX1JBTkdFU10gPSAiYnl0ZXMiXHJcblxyXG4gICAgICAgIHJlYWxfc3RhcnQgPSBjYXN0KGludCwgc3RhcnQpXHJcblxyXG4gICAgICAgIGlmIHN0YXR1cyA9PSBIVFRQUGFydGlhbENvbnRlbnQuc3RhdHVzX2NvZGU6XHJcbiAgICAgICAgICAgIHNlbGYuaGVhZGVyc1toZHJzLkNPTlRFTlRfUkFOR0VdID0gImJ5dGVzIHt9LXt9L3t9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICByZWFsX3N0YXJ0LCByZWFsX3N0YXJ0ICsgY291bnQgLSAxLCBmaWxlX3NpemVcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAjIElmIHdlIGFyZSBzZW5kaW5nIDAgYnl0ZXMgY2FsbGluZyBzZW5kZmlsZSgpIHdpbGwgdGhyb3cgYSBWYWx1ZUVycm9yXHJcbiAgICAgICAgaWYgY291bnQgPT0gMCBvciByZXF1ZXN0Lm1ldGhvZCA9PSBoZHJzLk1FVEhfSEVBRCBvciBzZWxmLnN0YXR1cyBpbiBbMjA0LCAzMDRdOlxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc3VwZXIoKS5wcmVwYXJlKHJlcXVlc3QpXHJcblxyXG4gICAgICAgIGZvYmogPSBhd2FpdCBsb29wLnJ1bl9pbl9leGVjdXRvcihOb25lLCBmaWxlcGF0aC5vcGVuLCAicmIiKVxyXG4gICAgICAgIGlmIHN0YXJ0OiAgIyBiZSBhd2FyZSB0aGF0IHN0YXJ0IGNvdWxkIGJlIE5vbmUgb3IgaW50PTAgaGVyZS5cclxuICAgICAgICAgICAgb2Zmc2V0ID0gc3RhcnRcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBvZmZzZXQgPSAwXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX3NlbmRmaWxlKHJlcXVlc3QsIGZvYmosIG9mZnNldCwgY291bnQpXHJcbiAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgYXdhaXQgbG9vcC5ydW5faW5fZXhlY3V0b3IoTm9uZSwgZm9iai5jbG9zZSlcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvd2ViX3JvdXRlZGVmLnB5JywgYidpbXBvcnQgYWJjXHJcbmltcG9ydCBvcyAgIyBub3FhXHJcbmZyb20gdHlwaW5nIGltcG9ydCAoXHJcbiAgICBUWVBFX0NIRUNLSU5HLFxyXG4gICAgQW55LFxyXG4gICAgQ2FsbGFibGUsXHJcbiAgICBEaWN0LFxyXG4gICAgSXRlcmF0b3IsXHJcbiAgICBMaXN0LFxyXG4gICAgT3B0aW9uYWwsXHJcbiAgICBTZXF1ZW5jZSxcclxuICAgIFR5cGUsXHJcbiAgICBVbmlvbixcclxuICAgIG92ZXJsb2FkLFxyXG4pXHJcblxyXG5pbXBvcnQgYXR0clxyXG5cclxuZnJvbSAuIGltcG9ydCBoZHJzXHJcbmZyb20gLmFiYyBpbXBvcnQgQWJzdHJhY3RWaWV3XHJcbmZyb20gLnR5cGVkZWZzIGltcG9ydCBIYW5kbGVyLCBQYXRoTGlrZVxyXG5cclxuaWYgVFlQRV9DSEVDS0lORzogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgZnJvbSAud2ViX3JlcXVlc3QgaW1wb3J0IFJlcXVlc3RcclxuICAgIGZyb20gLndlYl9yZXNwb25zZSBpbXBvcnQgU3RyZWFtUmVzcG9uc2VcclxuICAgIGZyb20gLndlYl91cmxkaXNwYXRjaGVyIGltcG9ydCBBYnN0cmFjdFJvdXRlLCBVcmxEaXNwYXRjaGVyXHJcbmVsc2U6XHJcbiAgICBSZXF1ZXN0ID0gU3RyZWFtUmVzcG9uc2UgPSBVcmxEaXNwYXRjaGVyID0gQWJzdHJhY3RSb3V0ZSA9IE5vbmVcclxuXHJcblxyXG5fX2FsbF9fID0gKFxyXG4gICAgIkFic3RyYWN0Um91dGVEZWYiLFxyXG4gICAgIlJvdXRlRGVmIixcclxuICAgICJTdGF0aWNEZWYiLFxyXG4gICAgIlJvdXRlVGFibGVEZWYiLFxyXG4gICAgImhlYWQiLFxyXG4gICAgIm9wdGlvbnMiLFxyXG4gICAgImdldCIsXHJcbiAgICAicG9zdCIsXHJcbiAgICAicGF0Y2giLFxyXG4gICAgInB1dCIsXHJcbiAgICAiZGVsZXRlIixcclxuICAgICJyb3V0ZSIsXHJcbiAgICAidmlldyIsXHJcbiAgICAic3RhdGljIixcclxuKVxyXG5cclxuXHJcbmNsYXNzIEFic3RyYWN0Um91dGVEZWYoYWJjLkFCQyk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcmVnaXN0ZXIoc2VsZiwgcm91dGVyOiBVcmxEaXNwYXRjaGVyKSAtPiBMaXN0W0Fic3RyYWN0Um91dGVdOlxyXG4gICAgICAgIHBhc3MgICMgcHJhZ21hOiBubyBjb3ZlclxyXG5cclxuXHJcbl9IYW5kbGVyVHlwZSA9IFVuaW9uW1R5cGVbQWJzdHJhY3RWaWV3XSwgSGFuZGxlcl1cclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgcmVwcj1GYWxzZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgUm91dGVEZWYoQWJzdHJhY3RSb3V0ZURlZik6XHJcbiAgICBtZXRob2Q6IHN0clxyXG4gICAgcGF0aDogc3RyXHJcbiAgICBoYW5kbGVyOiBfSGFuZGxlclR5cGVcclxuICAgIGt3YXJnczogRGljdFtzdHIsIEFueV1cclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIGluZm8gPSBbXVxyXG4gICAgICAgIGZvciBuYW1lLCB2YWx1ZSBpbiBzb3J0ZWQoc2VsZi5rd2FyZ3MuaXRlbXMoKSk6XHJcbiAgICAgICAgICAgIGluZm8uYXBwZW5kKGYiLCB7bmFtZX09e3ZhbHVlIXJ9IilcclxuICAgICAgICByZXR1cm4gIjxSb3V0ZURlZiB7bWV0aG9kfSB7cGF0aH0gLT4ge2hhbmRsZXIuX19uYW1lX18hcn0iICJ7aW5mb30+Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIG1ldGhvZD1zZWxmLm1ldGhvZCwgcGF0aD1zZWxmLnBhdGgsIGhhbmRsZXI9c2VsZi5oYW5kbGVyLCBpbmZvPSIiLmpvaW4oaW5mbylcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHJlZ2lzdGVyKHNlbGYsIHJvdXRlcjogVXJsRGlzcGF0Y2hlcikgLT4gTGlzdFtBYnN0cmFjdFJvdXRlXTpcclxuICAgICAgICBpZiBzZWxmLm1ldGhvZCBpbiBoZHJzLk1FVEhfQUxMOlxyXG4gICAgICAgICAgICByZWcgPSBnZXRhdHRyKHJvdXRlciwgImFkZF8iICsgc2VsZi5tZXRob2QubG93ZXIoKSlcclxuICAgICAgICAgICAgcmV0dXJuIFtyZWcoc2VsZi5wYXRoLCBzZWxmLmhhbmRsZXIsICoqc2VsZi5rd2FyZ3MpXVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICByb3V0ZXIuYWRkX3JvdXRlKHNlbGYubWV0aG9kLCBzZWxmLnBhdGgsIHNlbGYuaGFuZGxlciwgKipzZWxmLmt3YXJncylcclxuICAgICAgICAgICAgXVxyXG5cclxuXHJcbkBhdHRyLnMoYXV0b19hdHRyaWJzPVRydWUsIGZyb3plbj1UcnVlLCByZXByPUZhbHNlLCBzbG90cz1UcnVlKVxyXG5jbGFzcyBTdGF0aWNEZWYoQWJzdHJhY3RSb3V0ZURlZik6XHJcbiAgICBwcmVmaXg6IHN0clxyXG4gICAgcGF0aDogUGF0aExpa2VcclxuICAgIGt3YXJnczogRGljdFtzdHIsIEFueV1cclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIGluZm8gPSBbXVxyXG4gICAgICAgIGZvciBuYW1lLCB2YWx1ZSBpbiBzb3J0ZWQoc2VsZi5rd2FyZ3MuaXRlbXMoKSk6XHJcbiAgICAgICAgICAgIGluZm8uYXBwZW5kKGYiLCB7bmFtZX09e3ZhbHVlIXJ9IilcclxuICAgICAgICByZXR1cm4gIjxTdGF0aWNEZWYge3ByZWZpeH0gLT4ge3BhdGh9IiAie2luZm99PiIuZm9ybWF0KFxyXG4gICAgICAgICAgICBwcmVmaXg9c2VsZi5wcmVmaXgsIHBhdGg9c2VsZi5wYXRoLCBpbmZvPSIiLmpvaW4oaW5mbylcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHJlZ2lzdGVyKHNlbGYsIHJvdXRlcjogVXJsRGlzcGF0Y2hlcikgLT4gTGlzdFtBYnN0cmFjdFJvdXRlXTpcclxuICAgICAgICByZXNvdXJjZSA9IHJvdXRlci5hZGRfc3RhdGljKHNlbGYucHJlZml4LCBzZWxmLnBhdGgsICoqc2VsZi5rd2FyZ3MpXHJcbiAgICAgICAgcm91dGVzID0gcmVzb3VyY2UuZ2V0X2luZm8oKS5nZXQoInJvdXRlcyIsIHt9KVxyXG4gICAgICAgIHJldHVybiBsaXN0KHJvdXRlcy52YWx1ZXMoKSlcclxuXHJcblxyXG5kZWYgcm91dGUobWV0aG9kOiBzdHIsIHBhdGg6IHN0ciwgaGFuZGxlcjogX0hhbmRsZXJUeXBlLCAqKmt3YXJnczogQW55KSAtPiBSb3V0ZURlZjpcclxuICAgIHJldHVybiBSb3V0ZURlZihtZXRob2QsIHBhdGgsIGhhbmRsZXIsIGt3YXJncylcclxuXHJcblxyXG5kZWYgaGVhZChwYXRoOiBzdHIsIGhhbmRsZXI6IF9IYW5kbGVyVHlwZSwgKiprd2FyZ3M6IEFueSkgLT4gUm91dGVEZWY6XHJcbiAgICByZXR1cm4gcm91dGUoaGRycy5NRVRIX0hFQUQsIHBhdGgsIGhhbmRsZXIsICoqa3dhcmdzKVxyXG5cclxuXHJcbmRlZiBvcHRpb25zKHBhdGg6IHN0ciwgaGFuZGxlcjogX0hhbmRsZXJUeXBlLCAqKmt3YXJnczogQW55KSAtPiBSb3V0ZURlZjpcclxuICAgIHJldHVybiByb3V0ZShoZHJzLk1FVEhfT1BUSU9OUywgcGF0aCwgaGFuZGxlciwgKiprd2FyZ3MpXHJcblxyXG5cclxuZGVmIGdldChcclxuICAgIHBhdGg6IHN0cixcclxuICAgIGhhbmRsZXI6IF9IYW5kbGVyVHlwZSxcclxuICAgICosXHJcbiAgICBuYW1lOiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgIGFsbG93X2hlYWQ6IGJvb2wgPSBUcnVlLFxyXG4gICAgKiprd2FyZ3M6IEFueSxcclxuKSAtPiBSb3V0ZURlZjpcclxuICAgIHJldHVybiByb3V0ZShcclxuICAgICAgICBoZHJzLk1FVEhfR0VULCBwYXRoLCBoYW5kbGVyLCBuYW1lPW5hbWUsIGFsbG93X2hlYWQ9YWxsb3dfaGVhZCwgKiprd2FyZ3NcclxuICAgIClcclxuXHJcblxyXG5kZWYgcG9zdChwYXRoOiBzdHIsIGhhbmRsZXI6IF9IYW5kbGVyVHlwZSwgKiprd2FyZ3M6IEFueSkgLT4gUm91dGVEZWY6XHJcbiAgICByZXR1cm4gcm91dGUoaGRycy5NRVRIX1BPU1QsIHBhdGgsIGhhbmRsZXIsICoqa3dhcmdzKVxyXG5cclxuXHJcbmRlZiBwdXQocGF0aDogc3RyLCBoYW5kbGVyOiBfSGFuZGxlclR5cGUsICoqa3dhcmdzOiBBbnkpIC0+IFJvdXRlRGVmOlxyXG4gICAgcmV0dXJuIHJvdXRlKGhkcnMuTUVUSF9QVVQsIHBhdGgsIGhhbmRsZXIsICoqa3dhcmdzKVxyXG5cclxuXHJcbmRlZiBwYXRjaChwYXRoOiBzdHIsIGhhbmRsZXI6IF9IYW5kbGVyVHlwZSwgKiprd2FyZ3M6IEFueSkgLT4gUm91dGVEZWY6XHJcbiAgICByZXR1cm4gcm91dGUoaGRycy5NRVRIX1BBVENILCBwYXRoLCBoYW5kbGVyLCAqKmt3YXJncylcclxuXHJcblxyXG5kZWYgZGVsZXRlKHBhdGg6IHN0ciwgaGFuZGxlcjogX0hhbmRsZXJUeXBlLCAqKmt3YXJnczogQW55KSAtPiBSb3V0ZURlZjpcclxuICAgIHJldHVybiByb3V0ZShoZHJzLk1FVEhfREVMRVRFLCBwYXRoLCBoYW5kbGVyLCAqKmt3YXJncylcclxuXHJcblxyXG5kZWYgdmlldyhwYXRoOiBzdHIsIGhhbmRsZXI6IFR5cGVbQWJzdHJhY3RWaWV3XSwgKiprd2FyZ3M6IEFueSkgLT4gUm91dGVEZWY6XHJcbiAgICByZXR1cm4gcm91dGUoaGRycy5NRVRIX0FOWSwgcGF0aCwgaGFuZGxlciwgKiprd2FyZ3MpXHJcblxyXG5cclxuZGVmIHN0YXRpYyhwcmVmaXg6IHN0ciwgcGF0aDogUGF0aExpa2UsICoqa3dhcmdzOiBBbnkpIC0+IFN0YXRpY0RlZjpcclxuICAgIHJldHVybiBTdGF0aWNEZWYocHJlZml4LCBwYXRoLCBrd2FyZ3MpXHJcblxyXG5cclxuX0RlY28gPSBDYWxsYWJsZVtbX0hhbmRsZXJUeXBlXSwgX0hhbmRsZXJUeXBlXVxyXG5cclxuXHJcbmNsYXNzIFJvdXRlVGFibGVEZWYoU2VxdWVuY2VbQWJzdHJhY3RSb3V0ZURlZl0pOlxyXG4gICAgIiIiUm91dGUgZGVmaW5pdGlvbiB0YWJsZSIiIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2l0ZW1zID0gW10gICMgdHlwZTogTGlzdFtBYnN0cmFjdFJvdXRlRGVmXVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIGYiPFJvdXRlVGFibGVEZWYgY291bnQ9e2xlbihzZWxmLl9pdGVtcyl9PiJcclxuXHJcbiAgICBAb3ZlcmxvYWRcclxuICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpbmRleDogaW50KSAtPiBBYnN0cmFjdFJvdXRlRGVmOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEBvdmVybG9hZFxyXG4gICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGluZGV4OiBzbGljZSkgLT4gTGlzdFtBYnN0cmFjdFJvdXRlRGVmXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaW5kZXgpOiAgIyB0eXBlOiBpZ25vcmVbbm8tdW50eXBlZC1kZWZdXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2l0ZW1zW2luZGV4XVxyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKSAtPiBJdGVyYXRvcltBYnN0cmFjdFJvdXRlRGVmXTpcclxuICAgICAgICByZXR1cm4gaXRlcihzZWxmLl9pdGVtcylcclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLl9pdGVtcylcclxuXHJcbiAgICBkZWYgX19jb250YWluc19fKHNlbGYsIGl0ZW06IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gaXRlbSBpbiBzZWxmLl9pdGVtc1xyXG5cclxuICAgIGRlZiByb3V0ZShzZWxmLCBtZXRob2Q6IHN0ciwgcGF0aDogc3RyLCAqKmt3YXJnczogQW55KSAtPiBfRGVjbzpcclxuICAgICAgICBkZWYgaW5uZXIoaGFuZGxlcjogX0hhbmRsZXJUeXBlKSAtPiBfSGFuZGxlclR5cGU6XHJcbiAgICAgICAgICAgIHNlbGYuX2l0ZW1zLmFwcGVuZChSb3V0ZURlZihtZXRob2QsIHBhdGgsIGhhbmRsZXIsIGt3YXJncykpXHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyXHJcblxyXG4gICAgICAgIHJldHVybiBpbm5lclxyXG5cclxuICAgIGRlZiBoZWFkKHNlbGYsIHBhdGg6IHN0ciwgKiprd2FyZ3M6IEFueSkgLT4gX0RlY286XHJcbiAgICAgICAgcmV0dXJuIHNlbGYucm91dGUoaGRycy5NRVRIX0hFQUQsIHBhdGgsICoqa3dhcmdzKVxyXG5cclxuICAgIGRlZiBnZXQoc2VsZiwgcGF0aDogc3RyLCAqKmt3YXJnczogQW55KSAtPiBfRGVjbzpcclxuICAgICAgICByZXR1cm4gc2VsZi5yb3V0ZShoZHJzLk1FVEhfR0VULCBwYXRoLCAqKmt3YXJncylcclxuXHJcbiAgICBkZWYgcG9zdChzZWxmLCBwYXRoOiBzdHIsICoqa3dhcmdzOiBBbnkpIC0+IF9EZWNvOlxyXG4gICAgICAgIHJldHVybiBzZWxmLnJvdXRlKGhkcnMuTUVUSF9QT1NULCBwYXRoLCAqKmt3YXJncylcclxuXHJcbiAgICBkZWYgcHV0KHNlbGYsIHBhdGg6IHN0ciwgKiprd2FyZ3M6IEFueSkgLT4gX0RlY286XHJcbiAgICAgICAgcmV0dXJuIHNlbGYucm91dGUoaGRycy5NRVRIX1BVVCwgcGF0aCwgKiprd2FyZ3MpXHJcblxyXG4gICAgZGVmIHBhdGNoKHNlbGYsIHBhdGg6IHN0ciwgKiprd2FyZ3M6IEFueSkgLT4gX0RlY286XHJcbiAgICAgICAgcmV0dXJuIHNlbGYucm91dGUoaGRycy5NRVRIX1BBVENILCBwYXRoLCAqKmt3YXJncylcclxuXHJcbiAgICBkZWYgZGVsZXRlKHNlbGYsIHBhdGg6IHN0ciwgKiprd2FyZ3M6IEFueSkgLT4gX0RlY286XHJcbiAgICAgICAgcmV0dXJuIHNlbGYucm91dGUoaGRycy5NRVRIX0RFTEVURSwgcGF0aCwgKiprd2FyZ3MpXHJcblxyXG4gICAgZGVmIHZpZXcoc2VsZiwgcGF0aDogc3RyLCAqKmt3YXJnczogQW55KSAtPiBfRGVjbzpcclxuICAgICAgICByZXR1cm4gc2VsZi5yb3V0ZShoZHJzLk1FVEhfQU5ZLCBwYXRoLCAqKmt3YXJncylcclxuXHJcbiAgICBkZWYgc3RhdGljKHNlbGYsIHByZWZpeDogc3RyLCBwYXRoOiBQYXRoTGlrZSwgKiprd2FyZ3M6IEFueSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9pdGVtcy5hcHBlbmQoU3RhdGljRGVmKHByZWZpeCwgcGF0aCwga3dhcmdzKSlcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvd2ViX21pZGRsZXdhcmVzLnB5JywgYidpbXBvcnQgcmVcclxuZnJvbSB0eXBpbmcgaW1wb3J0IFRZUEVfQ0hFQ0tJTkcsIEF3YWl0YWJsZSwgQ2FsbGFibGUsIFR1cGxlLCBUeXBlLCBUeXBlVmFyXHJcblxyXG5mcm9tIC50eXBlZGVmcyBpbXBvcnQgSGFuZGxlclxyXG5mcm9tIC53ZWJfZXhjZXB0aW9ucyBpbXBvcnQgSFRUUFBlcm1hbmVudFJlZGlyZWN0LCBfSFRUUE1vdmVcclxuZnJvbSAud2ViX3JlcXVlc3QgaW1wb3J0IFJlcXVlc3RcclxuZnJvbSAud2ViX3Jlc3BvbnNlIGltcG9ydCBTdHJlYW1SZXNwb25zZVxyXG5mcm9tIC53ZWJfdXJsZGlzcGF0Y2hlciBpbXBvcnQgU3lzdGVtUm91dGVcclxuXHJcbl9fYWxsX18gPSAoXHJcbiAgICAibWlkZGxld2FyZSIsXHJcbiAgICAibm9ybWFsaXplX3BhdGhfbWlkZGxld2FyZSIsXHJcbilcclxuXHJcbmlmIFRZUEVfQ0hFQ0tJTkc6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgIGZyb20gLndlYl9hcHAgaW1wb3J0IEFwcGxpY2F0aW9uXHJcblxyXG5fRnVuYyA9IFR5cGVWYXIoIl9GdW5jIilcclxuXHJcblxyXG5hc3luYyBkZWYgX2NoZWNrX3JlcXVlc3RfcmVzb2x2ZXMocmVxdWVzdDogUmVxdWVzdCwgcGF0aDogc3RyKSAtPiBUdXBsZVtib29sLCBSZXF1ZXN0XTpcclxuICAgIGFsdF9yZXF1ZXN0ID0gcmVxdWVzdC5jbG9uZShyZWxfdXJsPXBhdGgpXHJcblxyXG4gICAgbWF0Y2hfaW5mbyA9IGF3YWl0IHJlcXVlc3QuYXBwLnJvdXRlci5yZXNvbHZlKGFsdF9yZXF1ZXN0KVxyXG4gICAgYWx0X3JlcXVlc3QuX21hdGNoX2luZm8gPSBtYXRjaF9pbmZvXHJcblxyXG4gICAgaWYgbWF0Y2hfaW5mby5odHRwX2V4Y2VwdGlvbiBpcyBOb25lOlxyXG4gICAgICAgIHJldHVybiBUcnVlLCBhbHRfcmVxdWVzdFxyXG5cclxuICAgIHJldHVybiBGYWxzZSwgcmVxdWVzdFxyXG5cclxuXHJcbmRlZiBtaWRkbGV3YXJlKGY6IF9GdW5jKSAtPiBfRnVuYzpcclxuICAgIGYuX19taWRkbGV3YXJlX3ZlcnNpb25fXyA9IDEgICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF1cclxuICAgIHJldHVybiBmXHJcblxyXG5cclxuX01pZGRsZXdhcmUgPSBDYWxsYWJsZVtbUmVxdWVzdCwgSGFuZGxlcl0sIEF3YWl0YWJsZVtTdHJlYW1SZXNwb25zZV1dXHJcblxyXG5cclxuZGVmIG5vcm1hbGl6ZV9wYXRoX21pZGRsZXdhcmUoXHJcbiAgICAqLFxyXG4gICAgYXBwZW5kX3NsYXNoOiBib29sID0gVHJ1ZSxcclxuICAgIHJlbW92ZV9zbGFzaDogYm9vbCA9IEZhbHNlLFxyXG4gICAgbWVyZ2Vfc2xhc2hlczogYm9vbCA9IFRydWUsXHJcbiAgICByZWRpcmVjdF9jbGFzczogVHlwZVtfSFRUUE1vdmVdID0gSFRUUFBlcm1hbmVudFJlZGlyZWN0LFxyXG4pIC0+IF9NaWRkbGV3YXJlOlxyXG4gICAgIiIiRmFjdG9yeSBmb3IgcHJvZHVjaW5nIGEgbWlkZGxld2FyZSB0aGF0IG5vcm1hbGl6ZXMgdGhlIHBhdGggb2YgYSByZXF1ZXN0LlxyXG5cclxuICAgIE5vcm1hbGl6aW5nIG1lYW5zOlxyXG4gICAgICAgIC0gQWRkIG9yIHJlbW92ZSBhIHRyYWlsaW5nIHNsYXNoIHRvIHRoZSBwYXRoLlxyXG4gICAgICAgIC0gRG91YmxlIHNsYXNoZXMgYXJlIHJlcGxhY2VkIGJ5IG9uZS5cclxuXHJcbiAgICBUaGUgbWlkZGxld2FyZSByZXR1cm5zIGFzIHNvb24gYXMgaXQgZmluZHMgYSBwYXRoIHRoYXQgcmVzb2x2ZXNcclxuICAgIGNvcnJlY3RseS4gVGhlIG9yZGVyIGlmIGJvdGggbWVyZ2UgYW5kIGFwcGVuZC9yZW1vdmUgYXJlIGVuYWJsZWQgaXNcclxuICAgICAgICAxKSBtZXJnZSBzbGFzaGVzXHJcbiAgICAgICAgMikgYXBwZW5kL3JlbW92ZSBzbGFzaFxyXG4gICAgICAgIDMpIGJvdGggbWVyZ2Ugc2xhc2hlcyBhbmQgYXBwZW5kL3JlbW92ZSBzbGFzaC5cclxuICAgIElmIHRoZSBwYXRoIHJlc29sdmVzIHdpdGggYXQgbGVhc3Qgb25lIG9mIHRob3NlIGNvbmRpdGlvbnMsIGl0IHdpbGxcclxuICAgIHJlZGlyZWN0IHRvIHRoZSBuZXcgcGF0aC5cclxuXHJcbiAgICBPbmx5IG9uZSBvZiBgYXBwZW5kX3NsYXNoYCBhbmQgYHJlbW92ZV9zbGFzaGAgY2FuIGJlIGVuYWJsZWQuIElmIGJvdGhcclxuICAgIGFyZSBgVHJ1ZWAgdGhlIGZhY3Rvcnkgd2lsbCByYWlzZSBhbiBhc3NlcnRpb24gZXJyb3JcclxuXHJcbiAgICBJZiBgYXBwZW5kX3NsYXNoYCBpcyBgVHJ1ZWAgdGhlIG1pZGRsZXdhcmUgd2lsbCBhcHBlbmQgYSBzbGFzaCB3aGVuXHJcbiAgICBuZWVkZWQuIElmIGEgcmVzb3VyY2UgaXMgZGVmaW5lZCB3aXRoIHRyYWlsaW5nIHNsYXNoIGFuZCB0aGUgcmVxdWVzdFxyXG4gICAgY29tZXMgd2l0aG91dCBpdCwgaXQgd2lsbCBhcHBlbmQgaXQgYXV0b21hdGljYWxseS5cclxuXHJcbiAgICBJZiBgcmVtb3ZlX3NsYXNoYCBpcyBgVHJ1ZWAsIGBhcHBlbmRfc2xhc2hgIG11c3QgYmUgYEZhbHNlYC4gV2hlbiBlbmFibGVkXHJcbiAgICB0aGUgbWlkZGxld2FyZSB3aWxsIHJlbW92ZSB0cmFpbGluZyBzbGFzaGVzIGFuZCByZWRpcmVjdCBpZiB0aGUgcmVzb3VyY2VcclxuICAgIGlzIGRlZmluZWRcclxuXHJcbiAgICBJZiBtZXJnZV9zbGFzaGVzIGlzIFRydWUsIG1lcmdlIG11bHRpcGxlIGNvbnNlY3V0aXZlIHNsYXNoZXMgaW4gdGhlXHJcbiAgICBwYXRoIGludG8gb25lLlxyXG4gICAgIiIiXHJcbiAgICBjb3JyZWN0X2NvbmZpZ3VyYXRpb24gPSBub3QgKGFwcGVuZF9zbGFzaCBhbmQgcmVtb3ZlX3NsYXNoKVxyXG4gICAgYXNzZXJ0IGNvcnJlY3RfY29uZmlndXJhdGlvbiwgIkNhbm5vdCBib3RoIHJlbW92ZSBhbmQgYXBwZW5kIHNsYXNoIlxyXG5cclxuICAgIEBtaWRkbGV3YXJlXHJcbiAgICBhc3luYyBkZWYgaW1wbChyZXF1ZXN0OiBSZXF1ZXN0LCBoYW5kbGVyOiBIYW5kbGVyKSAtPiBTdHJlYW1SZXNwb25zZTpcclxuICAgICAgICBpZiBpc2luc3RhbmNlKHJlcXVlc3QubWF0Y2hfaW5mby5yb3V0ZSwgU3lzdGVtUm91dGUpOlxyXG4gICAgICAgICAgICBwYXRoc190b19jaGVjayA9IFtdXHJcbiAgICAgICAgICAgIGlmICI/IiBpbiByZXF1ZXN0LnJhd19wYXRoOlxyXG4gICAgICAgICAgICAgICAgcGF0aCwgcXVlcnkgPSByZXF1ZXN0LnJhd19wYXRoLnNwbGl0KCI/IiwgMSlcclxuICAgICAgICAgICAgICAgIHF1ZXJ5ID0gIj8iICsgcXVlcnlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHF1ZXJ5ID0gIiJcclxuICAgICAgICAgICAgICAgIHBhdGggPSByZXF1ZXN0LnJhd19wYXRoXHJcblxyXG4gICAgICAgICAgICBpZiBtZXJnZV9zbGFzaGVzOlxyXG4gICAgICAgICAgICAgICAgcGF0aHNfdG9fY2hlY2suYXBwZW5kKHJlLnN1YigiLy8rIiwgIi8iLCBwYXRoKSlcclxuICAgICAgICAgICAgaWYgYXBwZW5kX3NsYXNoIGFuZCBub3QgcmVxdWVzdC5wYXRoLmVuZHN3aXRoKCIvIik6XHJcbiAgICAgICAgICAgICAgICBwYXRoc190b19jaGVjay5hcHBlbmQocGF0aCArICIvIilcclxuICAgICAgICAgICAgaWYgcmVtb3ZlX3NsYXNoIGFuZCByZXF1ZXN0LnBhdGguZW5kc3dpdGgoIi8iKTpcclxuICAgICAgICAgICAgICAgIHBhdGhzX3RvX2NoZWNrLmFwcGVuZChwYXRoWzotMV0pXHJcbiAgICAgICAgICAgIGlmIG1lcmdlX3NsYXNoZXMgYW5kIGFwcGVuZF9zbGFzaDpcclxuICAgICAgICAgICAgICAgIHBhdGhzX3RvX2NoZWNrLmFwcGVuZChyZS5zdWIoIi8vKyIsICIvIiwgcGF0aCArICIvIikpXHJcbiAgICAgICAgICAgIGlmIG1lcmdlX3NsYXNoZXMgYW5kIHJlbW92ZV9zbGFzaDpcclxuICAgICAgICAgICAgICAgIG1lcmdlZF9zbGFzaGVzID0gcmUuc3ViKCIvLysiLCAiLyIsIHBhdGgpXHJcbiAgICAgICAgICAgICAgICBwYXRoc190b19jaGVjay5hcHBlbmQobWVyZ2VkX3NsYXNoZXNbOi0xXSlcclxuXHJcbiAgICAgICAgICAgIGZvciBwYXRoIGluIHBhdGhzX3RvX2NoZWNrOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IHJlLnN1YigiXi8vKyIsICIvIiwgcGF0aCkgICMgU0VDVVJJVFk6IEdIU0EtdjZ3cC00bTZmLWdjamdcclxuICAgICAgICAgICAgICAgIHJlc29sdmVzLCByZXF1ZXN0ID0gYXdhaXQgX2NoZWNrX3JlcXVlc3RfcmVzb2x2ZXMocmVxdWVzdCwgcGF0aClcclxuICAgICAgICAgICAgICAgIGlmIHJlc29sdmVzOlxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIHJlZGlyZWN0X2NsYXNzKHJlcXVlc3QucmF3X3BhdGggKyBxdWVyeSlcclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZXIocmVxdWVzdClcclxuXHJcbiAgICByZXR1cm4gaW1wbFxyXG5cclxuXHJcbmRlZiBfZml4X3JlcXVlc3RfY3VycmVudF9hcHAoYXBwOiAiQXBwbGljYXRpb24iKSAtPiBfTWlkZGxld2FyZTpcclxuICAgIEBtaWRkbGV3YXJlXHJcbiAgICBhc3luYyBkZWYgaW1wbChyZXF1ZXN0OiBSZXF1ZXN0LCBoYW5kbGVyOiBIYW5kbGVyKSAtPiBTdHJlYW1SZXNwb25zZTpcclxuICAgICAgICB3aXRoIHJlcXVlc3QubWF0Y2hfaW5mby5zZXRfY3VycmVudF9hcHAoYXBwKTpcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZXIocmVxdWVzdClcclxuXHJcbiAgICByZXR1cm4gaW1wbFxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvaHR0cC93ZWJfcnVubmVyLnB5JywgYidpbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgc2lnbmFsXHJcbmltcG9ydCBzb2NrZXRcclxuZnJvbSBhYmMgaW1wb3J0IEFCQywgYWJzdHJhY3RtZXRob2RcclxuZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgTGlzdCwgT3B0aW9uYWwsIFNldFxyXG5cclxuZnJvbSB5YXJsIGltcG9ydCBVUkxcclxuXHJcbmZyb20gLndlYl9hcHAgaW1wb3J0IEFwcGxpY2F0aW9uXHJcbmZyb20gLndlYl9zZXJ2ZXIgaW1wb3J0IFNlcnZlclxyXG5cclxudHJ5OlxyXG4gICAgZnJvbSBzc2wgaW1wb3J0IFNTTENvbnRleHRcclxuZXhjZXB0IEltcG9ydEVycm9yOlxyXG4gICAgU1NMQ29udGV4dCA9IG9iamVjdCAgIyB0eXBlOiBpZ25vcmVbbWlzYyxhc3NpZ25tZW50XVxyXG5cclxuXHJcbl9fYWxsX18gPSAoXHJcbiAgICAiQmFzZVNpdGUiLFxyXG4gICAgIlRDUFNpdGUiLFxyXG4gICAgIlVuaXhTaXRlIixcclxuICAgICJOYW1lZFBpcGVTaXRlIixcclxuICAgICJTb2NrU2l0ZSIsXHJcbiAgICAiQmFzZVJ1bm5lciIsXHJcbiAgICAiQXBwUnVubmVyIixcclxuICAgICJTZXJ2ZXJSdW5uZXIiLFxyXG4gICAgIkdyYWNlZnVsRXhpdCIsXHJcbilcclxuXHJcblxyXG5jbGFzcyBHcmFjZWZ1bEV4aXQoU3lzdGVtRXhpdCk6XHJcbiAgICBjb2RlID0gMVxyXG5cclxuXHJcbmRlZiBfcmFpc2VfZ3JhY2VmdWxfZXhpdCgpIC0+IE5vbmU6XHJcbiAgICByYWlzZSBHcmFjZWZ1bEV4aXQoKVxyXG5cclxuXHJcbmNsYXNzIEJhc2VTaXRlKEFCQyk6XHJcbiAgICBfX3Nsb3RzX18gPSAoIl9ydW5uZXIiLCAiX3NodXRkb3duX3RpbWVvdXQiLCAiX3NzbF9jb250ZXh0IiwgIl9iYWNrbG9nIiwgIl9zZXJ2ZXIiKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHJ1bm5lcjogIkJhc2VSdW5uZXIiLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgc2h1dGRvd25fdGltZW91dDogZmxvYXQgPSA2MC4wLFxyXG4gICAgICAgIHNzbF9jb250ZXh0OiBPcHRpb25hbFtTU0xDb250ZXh0XSA9IE5vbmUsXHJcbiAgICAgICAgYmFja2xvZzogaW50ID0gMTI4LFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHJ1bm5lci5zZXJ2ZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYWxsIHJ1bm5lci5zZXR1cCgpIGJlZm9yZSBtYWtpbmcgYSBzaXRlIilcclxuICAgICAgICBzZWxmLl9ydW5uZXIgPSBydW5uZXJcclxuICAgICAgICBzZWxmLl9zaHV0ZG93bl90aW1lb3V0ID0gc2h1dGRvd25fdGltZW91dFxyXG4gICAgICAgIHNlbGYuX3NzbF9jb250ZXh0ID0gc3NsX2NvbnRleHRcclxuICAgICAgICBzZWxmLl9iYWNrbG9nID0gYmFja2xvZ1xyXG4gICAgICAgIHNlbGYuX3NlcnZlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdFNlcnZlcl1cclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIG5hbWUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHBhc3MgICMgcHJhZ21hOiBubyBjb3ZlclxyXG5cclxuICAgIEBhYnN0cmFjdG1ldGhvZFxyXG4gICAgYXN5bmMgZGVmIHN0YXJ0KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fcnVubmVyLl9yZWdfc2l0ZShzZWxmKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzdG9wKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fcnVubmVyLl9jaGVja19zaXRlKHNlbGYpXHJcbiAgICAgICAgaWYgc2VsZi5fc2VydmVyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3J1bm5lci5fdW5yZWdfc2l0ZShzZWxmKVxyXG4gICAgICAgICAgICByZXR1cm4gICMgbm90IHN0YXJ0ZWQgeWV0XHJcbiAgICAgICAgc2VsZi5fc2VydmVyLmNsb3NlKClcclxuICAgICAgICAjIG5hbWVkIHBpcGVzIGRvIG5vdCBoYXZlIHdhaXRfY2xvc2VkIHByb3BlcnR5XHJcbiAgICAgICAgaWYgaGFzYXR0cihzZWxmLl9zZXJ2ZXIsICJ3YWl0X2Nsb3NlZCIpOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9zZXJ2ZXIud2FpdF9jbG9zZWQoKVxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3J1bm5lci5zaHV0ZG93bigpXHJcbiAgICAgICAgYXNzZXJ0IHNlbGYuX3J1bm5lci5zZXJ2ZXJcclxuICAgICAgICBhd2FpdCBzZWxmLl9ydW5uZXIuc2VydmVyLnNodXRkb3duKHNlbGYuX3NodXRkb3duX3RpbWVvdXQpXHJcbiAgICAgICAgc2VsZi5fcnVubmVyLl91bnJlZ19zaXRlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgVENQU2l0ZShCYXNlU2l0ZSk6XHJcbiAgICBfX3Nsb3RzX18gPSAoIl9ob3N0IiwgIl9wb3J0IiwgIl9yZXVzZV9hZGRyZXNzIiwgIl9yZXVzZV9wb3J0IilcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBydW5uZXI6ICJCYXNlUnVubmVyIixcclxuICAgICAgICBob3N0OiBPcHRpb25hbFtzdHJdID0gTm9uZSxcclxuICAgICAgICBwb3J0OiBPcHRpb25hbFtpbnRdID0gTm9uZSxcclxuICAgICAgICAqLFxyXG4gICAgICAgIHNodXRkb3duX3RpbWVvdXQ6IGZsb2F0ID0gNjAuMCxcclxuICAgICAgICBzc2xfY29udGV4dDogT3B0aW9uYWxbU1NMQ29udGV4dF0gPSBOb25lLFxyXG4gICAgICAgIGJhY2tsb2c6IGludCA9IDEyOCxcclxuICAgICAgICByZXVzZV9hZGRyZXNzOiBPcHRpb25hbFtib29sXSA9IE5vbmUsXHJcbiAgICAgICAgcmV1c2VfcG9ydDogT3B0aW9uYWxbYm9vbF0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oXHJcbiAgICAgICAgICAgIHJ1bm5lcixcclxuICAgICAgICAgICAgc2h1dGRvd25fdGltZW91dD1zaHV0ZG93bl90aW1lb3V0LFxyXG4gICAgICAgICAgICBzc2xfY29udGV4dD1zc2xfY29udGV4dCxcclxuICAgICAgICAgICAgYmFja2xvZz1iYWNrbG9nLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9ob3N0ID0gaG9zdFxyXG4gICAgICAgIGlmIHBvcnQgaXMgTm9uZTpcclxuICAgICAgICAgICAgcG9ydCA9IDg0NDMgaWYgc2VsZi5fc3NsX2NvbnRleHQgZWxzZSA4MDgwXHJcbiAgICAgICAgc2VsZi5fcG9ydCA9IHBvcnRcclxuICAgICAgICBzZWxmLl9yZXVzZV9hZGRyZXNzID0gcmV1c2VfYWRkcmVzc1xyXG4gICAgICAgIHNlbGYuX3JldXNlX3BvcnQgPSByZXVzZV9wb3J0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbmFtZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgc2NoZW1lID0gImh0dHBzIiBpZiBzZWxmLl9zc2xfY29udGV4dCBlbHNlICJodHRwIlxyXG4gICAgICAgIGhvc3QgPSAiMC4wLjAuMCIgaWYgc2VsZi5faG9zdCBpcyBOb25lIGVsc2Ugc2VsZi5faG9zdFxyXG4gICAgICAgIHJldHVybiBzdHIoVVJMLmJ1aWxkKHNjaGVtZT1zY2hlbWUsIGhvc3Q9aG9zdCwgcG9ydD1zZWxmLl9wb3J0KSlcclxuXHJcbiAgICBhc3luYyBkZWYgc3RhcnQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBhd2FpdCBzdXBlcigpLnN0YXJ0KClcclxuICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcbiAgICAgICAgc2VydmVyID0gc2VsZi5fcnVubmVyLnNlcnZlclxyXG4gICAgICAgIGFzc2VydCBzZXJ2ZXIgaXMgbm90IE5vbmVcclxuICAgICAgICBzZWxmLl9zZXJ2ZXIgPSBhd2FpdCBsb29wLmNyZWF0ZV9zZXJ2ZXIoXHJcbiAgICAgICAgICAgIHNlcnZlcixcclxuICAgICAgICAgICAgc2VsZi5faG9zdCxcclxuICAgICAgICAgICAgc2VsZi5fcG9ydCxcclxuICAgICAgICAgICAgc3NsPXNlbGYuX3NzbF9jb250ZXh0LFxyXG4gICAgICAgICAgICBiYWNrbG9nPXNlbGYuX2JhY2tsb2csXHJcbiAgICAgICAgICAgIHJldXNlX2FkZHJlc3M9c2VsZi5fcmV1c2VfYWRkcmVzcyxcclxuICAgICAgICAgICAgcmV1c2VfcG9ydD1zZWxmLl9yZXVzZV9wb3J0LFxyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBVbml4U2l0ZShCYXNlU2l0ZSk6XHJcbiAgICBfX3Nsb3RzX18gPSAoIl9wYXRoIiwpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcnVubmVyOiAiQmFzZVJ1bm5lciIsXHJcbiAgICAgICAgcGF0aDogc3RyLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgc2h1dGRvd25fdGltZW91dDogZmxvYXQgPSA2MC4wLFxyXG4gICAgICAgIHNzbF9jb250ZXh0OiBPcHRpb25hbFtTU0xDb250ZXh0XSA9IE5vbmUsXHJcbiAgICAgICAgYmFja2xvZzogaW50ID0gMTI4LFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oXHJcbiAgICAgICAgICAgIHJ1bm5lcixcclxuICAgICAgICAgICAgc2h1dGRvd25fdGltZW91dD1zaHV0ZG93bl90aW1lb3V0LFxyXG4gICAgICAgICAgICBzc2xfY29udGV4dD1zc2xfY29udGV4dCxcclxuICAgICAgICAgICAgYmFja2xvZz1iYWNrbG9nLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9wYXRoID0gcGF0aFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG5hbWUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHNjaGVtZSA9ICJodHRwcyIgaWYgc2VsZi5fc3NsX2NvbnRleHQgZWxzZSAiaHR0cCJcclxuICAgICAgICByZXR1cm4gZiJ7c2NoZW1lfTovL3VuaXg6e3NlbGYuX3BhdGh9OiJcclxuXHJcbiAgICBhc3luYyBkZWYgc3RhcnQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBhd2FpdCBzdXBlcigpLnN0YXJ0KClcclxuICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcbiAgICAgICAgc2VydmVyID0gc2VsZi5fcnVubmVyLnNlcnZlclxyXG4gICAgICAgIGFzc2VydCBzZXJ2ZXIgaXMgbm90IE5vbmVcclxuICAgICAgICBzZWxmLl9zZXJ2ZXIgPSBhd2FpdCBsb29wLmNyZWF0ZV91bml4X3NlcnZlcihcclxuICAgICAgICAgICAgc2VydmVyLCBzZWxmLl9wYXRoLCBzc2w9c2VsZi5fc3NsX2NvbnRleHQsIGJhY2tsb2c9c2VsZi5fYmFja2xvZ1xyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBOYW1lZFBpcGVTaXRlKEJhc2VTaXRlKTpcclxuICAgIF9fc2xvdHNfXyA9ICgiX3BhdGgiLClcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgcnVubmVyOiAiQmFzZVJ1bm5lciIsIHBhdGg6IHN0ciwgKiwgc2h1dGRvd25fdGltZW91dDogZmxvYXQgPSA2MC4wXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICBsb29wLCBhc3luY2lvLlByb2FjdG9yRXZlbnRMb29wICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIk5hbWVkIFBpcGVzIG9ubHkgYXZhaWxhYmxlIGluIHByb2FjdG9yIiAibG9vcCB1bmRlciB3aW5kb3dzIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhydW5uZXIsIHNodXRkb3duX3RpbWVvdXQ9c2h1dGRvd25fdGltZW91dClcclxuICAgICAgICBzZWxmLl9wYXRoID0gcGF0aFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG5hbWUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wYXRoXHJcblxyXG4gICAgYXN5bmMgZGVmIHN0YXJ0KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgYXdhaXQgc3VwZXIoKS5zdGFydCgpXHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG4gICAgICAgIHNlcnZlciA9IHNlbGYuX3J1bm5lci5zZXJ2ZXJcclxuICAgICAgICBhc3NlcnQgc2VydmVyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgX3NlcnZlciA9IGF3YWl0IGxvb3Auc3RhcnRfc2VydmluZ19waXBlKCAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXVxyXG4gICAgICAgICAgICBzZXJ2ZXIsIHNlbGYuX3BhdGhcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fc2VydmVyID0gX3NlcnZlclswXVxyXG5cclxuXHJcbmNsYXNzIFNvY2tTaXRlKEJhc2VTaXRlKTpcclxuICAgIF9fc2xvdHNfXyA9ICgiX3NvY2siLCAiX25hbWUiKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHJ1bm5lcjogIkJhc2VSdW5uZXIiLFxyXG4gICAgICAgIHNvY2s6IHNvY2tldC5zb2NrZXQsXHJcbiAgICAgICAgKixcclxuICAgICAgICBzaHV0ZG93bl90aW1lb3V0OiBmbG9hdCA9IDYwLjAsXHJcbiAgICAgICAgc3NsX2NvbnRleHQ6IE9wdGlvbmFsW1NTTENvbnRleHRdID0gTm9uZSxcclxuICAgICAgICBiYWNrbG9nOiBpbnQgPSAxMjgsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhcclxuICAgICAgICAgICAgcnVubmVyLFxyXG4gICAgICAgICAgICBzaHV0ZG93bl90aW1lb3V0PXNodXRkb3duX3RpbWVvdXQsXHJcbiAgICAgICAgICAgIHNzbF9jb250ZXh0PXNzbF9jb250ZXh0LFxyXG4gICAgICAgICAgICBiYWNrbG9nPWJhY2tsb2csXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX3NvY2sgPSBzb2NrXHJcbiAgICAgICAgc2NoZW1lID0gImh0dHBzIiBpZiBzZWxmLl9zc2xfY29udGV4dCBlbHNlICJodHRwIlxyXG4gICAgICAgIGlmIGhhc2F0dHIoc29ja2V0LCAiQUZfVU5JWCIpIGFuZCBzb2NrLmZhbWlseSA9PSBzb2NrZXQuQUZfVU5JWDpcclxuICAgICAgICAgICAgbmFtZSA9IGYie3NjaGVtZX06Ly91bml4Ontzb2NrLmdldHNvY2tuYW1lKCl9OiJcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBob3N0LCBwb3J0ID0gc29jay5nZXRzb2NrbmFtZSgpWzoyXVxyXG4gICAgICAgICAgICBuYW1lID0gc3RyKFVSTC5idWlsZChzY2hlbWU9c2NoZW1lLCBob3N0PWhvc3QsIHBvcnQ9cG9ydCkpXHJcbiAgICAgICAgc2VsZi5fbmFtZSA9IG5hbWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBuYW1lKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fbmFtZVxyXG5cclxuICAgIGFzeW5jIGRlZiBzdGFydChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHN1cGVyKCkuc3RhcnQoKVxyXG4gICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuICAgICAgICBzZXJ2ZXIgPSBzZWxmLl9ydW5uZXIuc2VydmVyXHJcbiAgICAgICAgYXNzZXJ0IHNlcnZlciBpcyBub3QgTm9uZVxyXG4gICAgICAgIHNlbGYuX3NlcnZlciA9IGF3YWl0IGxvb3AuY3JlYXRlX3NlcnZlcihcclxuICAgICAgICAgICAgc2VydmVyLCBzb2NrPXNlbGYuX3NvY2ssIHNzbD1zZWxmLl9zc2xfY29udGV4dCwgYmFja2xvZz1zZWxmLl9iYWNrbG9nXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIEJhc2VSdW5uZXIoQUJDKTpcclxuICAgIF9fc2xvdHNfXyA9ICgiX2hhbmRsZV9zaWduYWxzIiwgIl9rd2FyZ3MiLCAiX3NlcnZlciIsICJfc2l0ZXMiKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqLCBoYW5kbGVfc2lnbmFsczogYm9vbCA9IEZhbHNlLCAqKmt3YXJnczogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2hhbmRsZV9zaWduYWxzID0gaGFuZGxlX3NpZ25hbHNcclxuICAgICAgICBzZWxmLl9rd2FyZ3MgPSBrd2FyZ3NcclxuICAgICAgICBzZWxmLl9zZXJ2ZXIgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW1NlcnZlcl1cclxuICAgICAgICBzZWxmLl9zaXRlcyA9IFtdICAjIHR5cGU6IExpc3RbQmFzZVNpdGVdXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgc2VydmVyKHNlbGYpIC0+IE9wdGlvbmFsW1NlcnZlcl06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3NlcnZlclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGFkZHJlc3NlcyhzZWxmKSAtPiBMaXN0W0FueV06XHJcbiAgICAgICAgcmV0ID0gW10gICMgdHlwZTogTGlzdFtBbnldXHJcbiAgICAgICAgZm9yIHNpdGUgaW4gc2VsZi5fc2l0ZXM6XHJcbiAgICAgICAgICAgIHNlcnZlciA9IHNpdGUuX3NlcnZlclxyXG4gICAgICAgICAgICBpZiBzZXJ2ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICBzb2NrZXRzID0gc2VydmVyLnNvY2tldHNcclxuICAgICAgICAgICAgICAgIGlmIHNvY2tldHMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIHNvY2sgaW4gc29ja2V0czpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LmFwcGVuZChzb2NrLmdldHNvY2tuYW1lKCkpXHJcbiAgICAgICAgcmV0dXJuIHJldFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHNpdGVzKHNlbGYpIC0+IFNldFtCYXNlU2l0ZV06XHJcbiAgICAgICAgcmV0dXJuIHNldChzZWxmLl9zaXRlcylcclxuXHJcbiAgICBhc3luYyBkZWYgc2V0dXAoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBsb29wID0gYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2hhbmRsZV9zaWduYWxzOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBsb29wLmFkZF9zaWduYWxfaGFuZGxlcihzaWduYWwuU0lHSU5ULCBfcmFpc2VfZ3JhY2VmdWxfZXhpdClcclxuICAgICAgICAgICAgICAgIGxvb3AuYWRkX3NpZ25hbF9oYW5kbGVyKHNpZ25hbC5TSUdURVJNLCBfcmFpc2VfZ3JhY2VmdWxfZXhpdClcclxuICAgICAgICAgICAgZXhjZXB0IE5vdEltcGxlbWVudGVkRXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgICAgICMgYWRkX3NpZ25hbF9oYW5kbGVyIGlzIG5vdCBpbXBsZW1lbnRlZCBvbiBXaW5kb3dzXHJcbiAgICAgICAgICAgICAgICBwYXNzXHJcblxyXG4gICAgICAgIHNlbGYuX3NlcnZlciA9IGF3YWl0IHNlbGYuX21ha2Vfc2VydmVyKClcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGFzeW5jIGRlZiBzaHV0ZG93bihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHBhc3MgICMgcHJhZ21hOiBubyBjb3ZlclxyXG5cclxuICAgIGFzeW5jIGRlZiBjbGVhbnVwKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgbG9vcCA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKVxyXG5cclxuICAgICAgICAjIFRoZSBsb29wIG92ZXIgc2l0ZXMgaXMgaW50ZW50aW9uYWwsIGFuIGV4Y2VwdGlvbiBvbiBnYXRoZXIoKVxyXG4gICAgICAgICMgbGVhdmVzIHNlbGYuX3NpdGVzIGluIHVucHJlZGljdGFibGUgc3RhdGUuXHJcbiAgICAgICAgIyBUaGUgbG9vcCBndWFyYW50aWVzIHRoYXQgYSBzaXRlIGlzIGVpdGhlciBkZWxldGVkIG9uIHN1Y2Nlc3Mgb3JcclxuICAgICAgICAjIHN0aWxsIHByZXNlbnQgb24gZmFpbHVyZVxyXG4gICAgICAgIGZvciBzaXRlIGluIGxpc3Qoc2VsZi5fc2l0ZXMpOlxyXG4gICAgICAgICAgICBhd2FpdCBzaXRlLnN0b3AoKVxyXG4gICAgICAgIGF3YWl0IHNlbGYuX2NsZWFudXBfc2VydmVyKClcclxuICAgICAgICBzZWxmLl9zZXJ2ZXIgPSBOb25lXHJcbiAgICAgICAgaWYgc2VsZi5faGFuZGxlX3NpZ25hbHM6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGxvb3AucmVtb3ZlX3NpZ25hbF9oYW5kbGVyKHNpZ25hbC5TSUdJTlQpXHJcbiAgICAgICAgICAgICAgICBsb29wLnJlbW92ZV9zaWduYWxfaGFuZGxlcihzaWduYWwuU0lHVEVSTSlcclxuICAgICAgICAgICAgZXhjZXB0IE5vdEltcGxlbWVudGVkRXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICAgICAgICAgICMgcmVtb3ZlX3NpZ25hbF9oYW5kbGVyIGlzIG5vdCBpbXBsZW1lbnRlZCBvbiBXaW5kb3dzXHJcbiAgICAgICAgICAgICAgICBwYXNzXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBhc3luYyBkZWYgX21ha2Vfc2VydmVyKHNlbGYpIC0+IFNlcnZlcjpcclxuICAgICAgICBwYXNzICAjIHByYWdtYTogbm8gY292ZXJcclxuXHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGFzeW5jIGRlZiBfY2xlYW51cF9zZXJ2ZXIoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBwYXNzICAjIHByYWdtYTogbm8gY292ZXJcclxuXHJcbiAgICBkZWYgX3JlZ19zaXRlKHNlbGYsIHNpdGU6IEJhc2VTaXRlKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNpdGUgaW4gc2VsZi5fc2l0ZXM6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihmIlNpdGUge3NpdGV9IGlzIGFscmVhZHkgcmVnaXN0ZXJlZCBpbiBydW5uZXIge3NlbGZ9IilcclxuICAgICAgICBzZWxmLl9zaXRlcy5hcHBlbmQoc2l0ZSlcclxuXHJcbiAgICBkZWYgX2NoZWNrX3NpdGUoc2VsZiwgc2l0ZTogQmFzZVNpdGUpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2l0ZSBub3QgaW4gc2VsZi5fc2l0ZXM6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihmIlNpdGUge3NpdGV9IGlzIG5vdCByZWdpc3RlcmVkIGluIHJ1bm5lciB7c2VsZn0iKVxyXG5cclxuICAgIGRlZiBfdW5yZWdfc2l0ZShzZWxmLCBzaXRlOiBCYXNlU2l0ZSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBzaXRlIG5vdCBpbiBzZWxmLl9zaXRlczpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKGYiU2l0ZSB7c2l0ZX0gaXMgbm90IHJlZ2lzdGVyZWQgaW4gcnVubmVyIHtzZWxmfSIpXHJcbiAgICAgICAgc2VsZi5fc2l0ZXMucmVtb3ZlKHNpdGUpXHJcblxyXG5cclxuY2xhc3MgU2VydmVyUnVubmVyKEJhc2VSdW5uZXIpOlxyXG4gICAgIiIiTG93LWxldmVsIHdlYiBzZXJ2ZXIgcnVubmVyIiIiXHJcblxyXG4gICAgX19zbG90c19fID0gKCJfd2ViX3NlcnZlciIsKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLCB3ZWJfc2VydmVyOiBTZXJ2ZXIsICosIGhhbmRsZV9zaWduYWxzOiBib29sID0gRmFsc2UsICoqa3dhcmdzOiBBbnlcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKGhhbmRsZV9zaWduYWxzPWhhbmRsZV9zaWduYWxzLCAqKmt3YXJncylcclxuICAgICAgICBzZWxmLl93ZWJfc2VydmVyID0gd2ViX3NlcnZlclxyXG5cclxuICAgIGFzeW5jIGRlZiBzaHV0ZG93bihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHBhc3NcclxuXHJcbiAgICBhc3luYyBkZWYgX21ha2Vfc2VydmVyKHNlbGYpIC0+IFNlcnZlcjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fd2ViX3NlcnZlclxyXG5cclxuICAgIGFzeW5jIGRlZiBfY2xlYW51cF9zZXJ2ZXIoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBwYXNzXHJcblxyXG5cclxuY2xhc3MgQXBwUnVubmVyKEJhc2VSdW5uZXIpOlxyXG4gICAgIiIiV2ViIEFwcGxpY2F0aW9uIHJ1bm5lciIiIlxyXG5cclxuICAgIF9fc2xvdHNfXyA9ICgiX2FwcCIsKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLCBhcHA6IEFwcGxpY2F0aW9uLCAqLCBoYW5kbGVfc2lnbmFsczogYm9vbCA9IEZhbHNlLCAqKmt3YXJnczogQW55XHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhoYW5kbGVfc2lnbmFscz1oYW5kbGVfc2lnbmFscywgKiprd2FyZ3MpXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYXBwLCBBcHBsaWNhdGlvbik6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJUaGUgZmlyc3QgYXJndW1lbnQgc2hvdWxkIGJlIHdlYi5BcHBsaWNhdGlvbiAiXHJcbiAgICAgICAgICAgICAgICAiaW5zdGFuY2UsIGdvdCB7IXJ9Ii5mb3JtYXQoYXBwKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYXBwID0gYXBwXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgYXBwKHNlbGYpIC0+IEFwcGxpY2F0aW9uOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hcHBcclxuXHJcbiAgICBhc3luYyBkZWYgc2h1dGRvd24oc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBhd2FpdCBzZWxmLl9hcHAuc2h1dGRvd24oKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfbWFrZV9zZXJ2ZXIoc2VsZikgLT4gU2VydmVyOlxyXG4gICAgICAgIGxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKClcclxuICAgICAgICBzZWxmLl9hcHAuX3NldF9sb29wKGxvb3ApXHJcbiAgICAgICAgc2VsZi5fYXBwLm9uX3N0YXJ0dXAuZnJlZXplKClcclxuICAgICAgICBhd2FpdCBzZWxmLl9hcHAuc3RhcnR1cCgpXHJcbiAgICAgICAgc2VsZi5fYXBwLmZyZWV6ZSgpXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hcHAuX21ha2VfaGFuZGxlcihsb29wPWxvb3AsICoqc2VsZi5fa3dhcmdzKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfY2xlYW51cF9zZXJ2ZXIoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBhd2FpdCBzZWxmLl9hcHAuY2xlYW51cCgpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL3dlYl93cy5weScsIGInaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IGJhc2U2NFxyXG5pbXBvcnQgYmluYXNjaWlcclxuaW1wb3J0IGhhc2hsaWJcclxuaW1wb3J0IGpzb25cclxuZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgSXRlcmFibGUsIE9wdGlvbmFsLCBUdXBsZSwgY2FzdFxyXG5cclxuaW1wb3J0IGFzeW5jX3RpbWVvdXRcclxuaW1wb3J0IGF0dHJcclxuZnJvbSBtdWx0aWRpY3QgaW1wb3J0IENJTXVsdGlEaWN0XHJcblxyXG5mcm9tIC4gaW1wb3J0IGhkcnNcclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdFN0cmVhbVdyaXRlclxyXG5mcm9tIC5oZWxwZXJzIGltcG9ydCBjYWxsX2xhdGVyLCBzZXRfcmVzdWx0XHJcbmZyb20gLmh0dHAgaW1wb3J0IChcclxuICAgIFdTX0NMT1NFRF9NRVNTQUdFLFxyXG4gICAgV1NfQ0xPU0lOR19NRVNTQUdFLFxyXG4gICAgV1NfS0VZLFxyXG4gICAgV2ViU29ja2V0RXJyb3IsXHJcbiAgICBXZWJTb2NrZXRSZWFkZXIsXHJcbiAgICBXZWJTb2NrZXRXcml0ZXIsXHJcbiAgICBXU0Nsb3NlQ29kZSxcclxuICAgIFdTTWVzc2FnZSxcclxuICAgIFdTTXNnVHlwZSBhcyBXU01zZ1R5cGUsXHJcbiAgICB3c19leHRfZ2VuLFxyXG4gICAgd3NfZXh0X3BhcnNlLFxyXG4pXHJcbmZyb20gLmxvZyBpbXBvcnQgd3NfbG9nZ2VyXHJcbmZyb20gLnN0cmVhbXMgaW1wb3J0IEVvZlN0cmVhbSwgRmxvd0NvbnRyb2xEYXRhUXVldWVcclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IEZpbmFsLCBKU09ORGVjb2RlciwgSlNPTkVuY29kZXJcclxuZnJvbSAud2ViX2V4Y2VwdGlvbnMgaW1wb3J0IEhUVFBCYWRSZXF1ZXN0LCBIVFRQRXhjZXB0aW9uXHJcbmZyb20gLndlYl9yZXF1ZXN0IGltcG9ydCBCYXNlUmVxdWVzdFxyXG5mcm9tIC53ZWJfcmVzcG9uc2UgaW1wb3J0IFN0cmVhbVJlc3BvbnNlXHJcblxyXG5fX2FsbF9fID0gKFxyXG4gICAgIldlYlNvY2tldFJlc3BvbnNlIixcclxuICAgICJXZWJTb2NrZXRSZWFkeSIsXHJcbiAgICAiV1NNc2dUeXBlIixcclxuKVxyXG5cclxuVEhSRVNIT0xEX0NPTk5MT1NUX0FDQ0VTUzogRmluYWxbaW50XSA9IDVcclxuXHJcblxyXG5AYXR0ci5zKGF1dG9fYXR0cmlicz1UcnVlLCBmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSlcclxuY2xhc3MgV2ViU29ja2V0UmVhZHk6XHJcbiAgICBvazogYm9vbFxyXG4gICAgcHJvdG9jb2w6IE9wdGlvbmFsW3N0cl1cclxuXHJcbiAgICBkZWYgX19ib29sX18oc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5va1xyXG5cclxuXHJcbmNsYXNzIFdlYlNvY2tldFJlc3BvbnNlKFN0cmVhbVJlc3BvbnNlKTpcclxuXHJcbiAgICBfbGVuZ3RoX2NoZWNrID0gRmFsc2VcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICAqLFxyXG4gICAgICAgIHRpbWVvdXQ6IGZsb2F0ID0gMTAuMCxcclxuICAgICAgICByZWNlaXZlX3RpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUsXHJcbiAgICAgICAgYXV0b2Nsb3NlOiBib29sID0gVHJ1ZSxcclxuICAgICAgICBhdXRvcGluZzogYm9vbCA9IFRydWUsXHJcbiAgICAgICAgaGVhcnRiZWF0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lLFxyXG4gICAgICAgIHByb3RvY29sczogSXRlcmFibGVbc3RyXSA9ICgpLFxyXG4gICAgICAgIGNvbXByZXNzOiBib29sID0gVHJ1ZSxcclxuICAgICAgICBtYXhfbXNnX3NpemU6IGludCA9IDQgKiAxMDI0ICogMTAyNCxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKHN0YXR1cz0xMDEpXHJcbiAgICAgICAgc2VsZi5fcHJvdG9jb2xzID0gcHJvdG9jb2xzXHJcbiAgICAgICAgc2VsZi5fd3NfcHJvdG9jb2wgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW3N0cl1cclxuICAgICAgICBzZWxmLl93cml0ZXIgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW1dlYlNvY2tldFdyaXRlcl1cclxuICAgICAgICBzZWxmLl9yZWFkZXIgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0Zsb3dDb250cm9sRGF0YVF1ZXVlW1dTTWVzc2FnZV1dXHJcbiAgICAgICAgc2VsZi5fY2xvc2VkID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9jbG9zaW5nID0gRmFsc2VcclxuICAgICAgICBzZWxmLl9jb25uX2xvc3QgPSAwXHJcbiAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbaW50XVxyXG4gICAgICAgIHNlbGYuX2xvb3AgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdXHJcbiAgICAgICAgc2VsZi5fd2FpdGluZyA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5GdXR1cmVbYm9vbF1dXHJcbiAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtCYXNlRXhjZXB0aW9uXVxyXG4gICAgICAgIHNlbGYuX3RpbWVvdXQgPSB0aW1lb3V0XHJcbiAgICAgICAgc2VsZi5fcmVjZWl2ZV90aW1lb3V0ID0gcmVjZWl2ZV90aW1lb3V0XHJcbiAgICAgICAgc2VsZi5fYXV0b2Nsb3NlID0gYXV0b2Nsb3NlXHJcbiAgICAgICAgc2VsZi5fYXV0b3BpbmcgPSBhdXRvcGluZ1xyXG4gICAgICAgIHNlbGYuX2hlYXJ0YmVhdCA9IGhlYXJ0YmVhdFxyXG4gICAgICAgIHNlbGYuX2hlYXJ0YmVhdF9jYjogT3B0aW9uYWxbYXN5bmNpby5UaW1lckhhbmRsZV0gPSBOb25lXHJcbiAgICAgICAgaWYgaGVhcnRiZWF0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9wb25nX2hlYXJ0YmVhdCA9IGhlYXJ0YmVhdCAvIDIuMFxyXG4gICAgICAgIHNlbGYuX3BvbmdfcmVzcG9uc2VfY2I6IE9wdGlvbmFsW2FzeW5jaW8uVGltZXJIYW5kbGVdID0gTm9uZVxyXG4gICAgICAgIHNlbGYuX2NvbXByZXNzID0gY29tcHJlc3NcclxuICAgICAgICBzZWxmLl9tYXhfbXNnX3NpemUgPSBtYXhfbXNnX3NpemVcclxuXHJcbiAgICBkZWYgX2NhbmNlbF9oZWFydGJlYXQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9wb25nX3Jlc3BvbnNlX2NiIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9wb25nX3Jlc3BvbnNlX2NiLmNhbmNlbCgpXHJcbiAgICAgICAgICAgIHNlbGYuX3BvbmdfcmVzcG9uc2VfY2IgPSBOb25lXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2hlYXJ0YmVhdF9jYiBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5faGVhcnRiZWF0X2NiLmNhbmNlbCgpXHJcbiAgICAgICAgICAgIHNlbGYuX2hlYXJ0YmVhdF9jYiA9IE5vbmVcclxuXHJcbiAgICBkZWYgX3Jlc2V0X2hlYXJ0YmVhdChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2NhbmNlbF9oZWFydGJlYXQoKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9oZWFydGJlYXQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGFzc2VydCBzZWxmLl9sb29wIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIHNlbGYuX2hlYXJ0YmVhdF9jYiA9IGNhbGxfbGF0ZXIoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9zZW5kX2hlYXJ0YmVhdCwgc2VsZi5faGVhcnRiZWF0LCBzZWxmLl9sb29wXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgX3NlbmRfaGVhcnRiZWF0KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5faGVhcnRiZWF0IGlzIG5vdCBOb25lIGFuZCBub3Qgc2VsZi5fY2xvc2VkOlxyXG4gICAgICAgICAgICBhc3NlcnQgc2VsZi5fbG9vcCBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICAjIGZpcmUtYW5kLWZvcmdldCBhIHRhc2sgaXMgbm90IHBlcmZlY3QgYnV0IG1heWJlIG9rIGZvclxyXG4gICAgICAgICAgICAjIHNlbmRpbmcgcGluZy4gT3RoZXJ3aXNlIHdlIG5lZWQgYSBsb25nLWxpdmluZyBoZWFydGJlYXRcclxuICAgICAgICAgICAgIyB0YXNrIGluIHRoZSBjbGFzcy5cclxuICAgICAgICAgICAgc2VsZi5fbG9vcC5jcmVhdGVfdGFzayhzZWxmLl93cml0ZXIucGluZygpKSAgIyB0eXBlOiBpZ25vcmVbdW5pb24tYXR0cl1cclxuXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3BvbmdfcmVzcG9uc2VfY2IgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9wb25nX3Jlc3BvbnNlX2NiLmNhbmNlbCgpXHJcbiAgICAgICAgICAgIHNlbGYuX3BvbmdfcmVzcG9uc2VfY2IgPSBjYWxsX2xhdGVyKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fcG9uZ19ub3RfcmVjZWl2ZWQsIHNlbGYuX3BvbmdfaGVhcnRiZWF0LCBzZWxmLl9sb29wXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgX3Bvbmdfbm90X3JlY2VpdmVkKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fcmVxIGlzIG5vdCBOb25lIGFuZCBzZWxmLl9yZXEudHJhbnNwb3J0IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9jbG9zZWQgPSBUcnVlXHJcbiAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXHJcbiAgICAgICAgICAgIHNlbGYuX2V4Y2VwdGlvbiA9IGFzeW5jaW8uVGltZW91dEVycm9yKClcclxuICAgICAgICAgICAgc2VsZi5fcmVxLnRyYW5zcG9ydC5jbG9zZSgpXHJcblxyXG4gICAgYXN5bmMgZGVmIHByZXBhcmUoc2VsZiwgcmVxdWVzdDogQmFzZVJlcXVlc3QpIC0+IEFic3RyYWN0U3RyZWFtV3JpdGVyOlxyXG4gICAgICAgICMgbWFrZSBwcmUtY2hlY2sgdG8gZG9uXCd0IGhpZGUgaXQgYnkgZG9faGFuZHNoYWtlKCkgZXhjZXB0aW9uc1xyXG4gICAgICAgIGlmIHNlbGYuX3BheWxvYWRfd3JpdGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcGF5bG9hZF93cml0ZXJcclxuXHJcbiAgICAgICAgcHJvdG9jb2wsIHdyaXRlciA9IHNlbGYuX3ByZV9zdGFydChyZXF1ZXN0KVxyXG4gICAgICAgIHBheWxvYWRfd3JpdGVyID0gYXdhaXQgc3VwZXIoKS5wcmVwYXJlKHJlcXVlc3QpXHJcbiAgICAgICAgYXNzZXJ0IHBheWxvYWRfd3JpdGVyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgc2VsZi5fcG9zdF9zdGFydChyZXF1ZXN0LCBwcm90b2NvbCwgd3JpdGVyKVxyXG4gICAgICAgIGF3YWl0IHBheWxvYWRfd3JpdGVyLmRyYWluKClcclxuICAgICAgICByZXR1cm4gcGF5bG9hZF93cml0ZXJcclxuXHJcbiAgICBkZWYgX2hhbmRzaGFrZShcclxuICAgICAgICBzZWxmLCByZXF1ZXN0OiBCYXNlUmVxdWVzdFxyXG4gICAgKSAtPiBUdXBsZVsiQ0lNdWx0aURpY3Rbc3RyXSIsIHN0ciwgYm9vbCwgYm9vbF06XHJcbiAgICAgICAgaGVhZGVycyA9IHJlcXVlc3QuaGVhZGVyc1xyXG4gICAgICAgIGlmICJ3ZWJzb2NrZXQiICE9IGhlYWRlcnMuZ2V0KGhkcnMuVVBHUkFERSwgIiIpLmxvd2VyKCkuc3RyaXAoKTpcclxuICAgICAgICAgICAgcmFpc2UgSFRUUEJhZFJlcXVlc3QoXHJcbiAgICAgICAgICAgICAgICB0ZXh0PShcclxuICAgICAgICAgICAgICAgICAgICAiTm8gV2ViU29ja2V0IFVQR1JBREUgaGRyOiB7fVxcbiBDYW4gIlxyXG4gICAgICAgICAgICAgICAgICAgIFwnIlVwZ3JhZGUiIG9ubHkgdG8gIldlYlNvY2tldCIuXCdcclxuICAgICAgICAgICAgICAgICkuZm9ybWF0KGhlYWRlcnMuZ2V0KGhkcnMuVVBHUkFERSkpXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgInVwZ3JhZGUiIG5vdCBpbiBoZWFkZXJzLmdldChoZHJzLkNPTk5FQ1RJT04sICIiKS5sb3dlcigpOlxyXG4gICAgICAgICAgICByYWlzZSBIVFRQQmFkUmVxdWVzdChcclxuICAgICAgICAgICAgICAgIHRleHQ9Ik5vIENPTk5FQ1RJT04gdXBncmFkZSBoZHI6IHt9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5nZXQoaGRycy5DT05ORUNUSU9OKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgZmluZCBjb21tb24gc3ViLXByb3RvY29sIGJldHdlZW4gY2xpZW50IGFuZCBzZXJ2ZXJcclxuICAgICAgICBwcm90b2NvbCA9IE5vbmVcclxuICAgICAgICBpZiBoZHJzLlNFQ19XRUJTT0NLRVRfUFJPVE9DT0wgaW4gaGVhZGVyczpcclxuICAgICAgICAgICAgcmVxX3Byb3RvY29scyA9IFtcclxuICAgICAgICAgICAgICAgIHN0cihwcm90by5zdHJpcCgpKVxyXG4gICAgICAgICAgICAgICAgZm9yIHByb3RvIGluIGhlYWRlcnNbaGRycy5TRUNfV0VCU09DS0VUX1BST1RPQ09MXS5zcGxpdCgiLCIpXHJcbiAgICAgICAgICAgIF1cclxuXHJcbiAgICAgICAgICAgIGZvciBwcm90byBpbiByZXFfcHJvdG9jb2xzOlxyXG4gICAgICAgICAgICAgICAgaWYgcHJvdG8gaW4gc2VsZi5fcHJvdG9jb2xzOlxyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvY29sID0gcHJvdG9cclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgIyBObyBvdmVybGFwIGZvdW5kOiBSZXR1cm4gbm8gcHJvdG9jb2wgYXMgcGVyIHNwZWNcclxuICAgICAgICAgICAgICAgIHdzX2xvZ2dlci53YXJuaW5nKFxyXG4gICAgICAgICAgICAgICAgICAgICJDbGllbnQgcHJvdG9jb2xzICVyIGRvblx4ZTJceDgwXHg5OXQgb3ZlcmxhcCBzZXJ2ZXIta25vd24gb25lcyAlciIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxX3Byb3RvY29scyxcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9wcm90b2NvbHMsXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgY2hlY2sgc3VwcG9ydGVkIHZlcnNpb25cclxuICAgICAgICB2ZXJzaW9uID0gaGVhZGVycy5nZXQoaGRycy5TRUNfV0VCU09DS0VUX1ZFUlNJT04sICIiKVxyXG4gICAgICAgIGlmIHZlcnNpb24gbm90IGluICgiMTMiLCAiOCIsICI3Iik6XHJcbiAgICAgICAgICAgIHJhaXNlIEhUVFBCYWRSZXF1ZXN0KHRleHQ9ZiJVbnN1cHBvcnRlZCB2ZXJzaW9uOiB7dmVyc2lvbn0iKVxyXG5cclxuICAgICAgICAjIGNoZWNrIGNsaWVudCBoYW5kc2hha2UgZm9yIHZhbGlkaXR5XHJcbiAgICAgICAga2V5ID0gaGVhZGVycy5nZXQoaGRycy5TRUNfV0VCU09DS0VUX0tFWSlcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGlmIG5vdCBrZXkgb3IgbGVuKGJhc2U2NC5iNjRkZWNvZGUoa2V5KSkgIT0gMTY6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBIVFRQQmFkUmVxdWVzdCh0ZXh0PWYiSGFuZHNoYWtlIGVycm9yOiB7a2V5IXJ9IilcclxuICAgICAgICBleGNlcHQgYmluYXNjaWkuRXJyb3I6XHJcbiAgICAgICAgICAgIHJhaXNlIEhUVFBCYWRSZXF1ZXN0KHRleHQ9ZiJIYW5kc2hha2UgZXJyb3I6IHtrZXkhcn0iKSBmcm9tIE5vbmVcclxuXHJcbiAgICAgICAgYWNjZXB0X3ZhbCA9IGJhc2U2NC5iNjRlbmNvZGUoXHJcbiAgICAgICAgICAgIGhhc2hsaWIuc2hhMShrZXkuZW5jb2RlKCkgKyBXU19LRVkpLmRpZ2VzdCgpXHJcbiAgICAgICAgKS5kZWNvZGUoKVxyXG4gICAgICAgIHJlc3BvbnNlX2hlYWRlcnMgPSBDSU11bHRpRGljdCggICMgdHlwZTogaWdub3JlW3Zhci1hbm5vdGF0ZWRdXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGhkcnMuVVBHUkFERTogIndlYnNvY2tldCIsICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZV1cclxuICAgICAgICAgICAgICAgIGhkcnMuQ09OTkVDVElPTjogInVwZ3JhZGUiLFxyXG4gICAgICAgICAgICAgICAgaGRycy5TRUNfV0VCU09DS0VUX0FDQ0VQVDogYWNjZXB0X3ZhbCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgbm90YWtlb3ZlciA9IEZhbHNlXHJcbiAgICAgICAgY29tcHJlc3MgPSAwXHJcbiAgICAgICAgaWYgc2VsZi5fY29tcHJlc3M6XHJcbiAgICAgICAgICAgIGV4dGVuc2lvbnMgPSBoZWFkZXJzLmdldChoZHJzLlNFQ19XRUJTT0NLRVRfRVhURU5TSU9OUylcclxuICAgICAgICAgICAgIyBTZXJ2ZXIgc2lkZSBhbHdheXMgZ2V0IHJldHVybiB3aXRoIG5vIGV4Y2VwdGlvbi5cclxuICAgICAgICAgICAgIyBJZiBzb21ldGhpbmcgaGFwcGVuZWQsIGp1c3QgZHJvcCBjb21wcmVzcyBleHRlbnNpb25cclxuICAgICAgICAgICAgY29tcHJlc3MsIG5vdGFrZW92ZXIgPSB3c19leHRfcGFyc2UoZXh0ZW5zaW9ucywgaXNzZXJ2ZXI9VHJ1ZSlcclxuICAgICAgICAgICAgaWYgY29tcHJlc3M6XHJcbiAgICAgICAgICAgICAgICBlbmFibGVkZXh0ID0gd3NfZXh0X2dlbihcclxuICAgICAgICAgICAgICAgICAgICBjb21wcmVzcz1jb21wcmVzcywgaXNzZXJ2ZXI9VHJ1ZSwgc2VydmVyX25vdGFrZW92ZXI9bm90YWtlb3ZlclxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VfaGVhZGVyc1toZHJzLlNFQ19XRUJTT0NLRVRfRVhURU5TSU9OU10gPSBlbmFibGVkZXh0XHJcblxyXG4gICAgICAgIGlmIHByb3RvY29sOlxyXG4gICAgICAgICAgICByZXNwb25zZV9oZWFkZXJzW2hkcnMuU0VDX1dFQlNPQ0tFVF9QUk9UT0NPTF0gPSBwcm90b2NvbFxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHJlc3BvbnNlX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIHByb3RvY29sLFxyXG4gICAgICAgICAgICBjb21wcmVzcyxcclxuICAgICAgICAgICAgbm90YWtlb3ZlcixcclxuICAgICAgICApICAjIHR5cGU6IGlnbm9yZVtyZXR1cm4tdmFsdWVdXHJcblxyXG4gICAgZGVmIF9wcmVfc3RhcnQoc2VsZiwgcmVxdWVzdDogQmFzZVJlcXVlc3QpIC0+IFR1cGxlW3N0ciwgV2ViU29ja2V0V3JpdGVyXTpcclxuICAgICAgICBzZWxmLl9sb29wID0gcmVxdWVzdC5fbG9vcFxyXG5cclxuICAgICAgICBoZWFkZXJzLCBwcm90b2NvbCwgY29tcHJlc3MsIG5vdGFrZW92ZXIgPSBzZWxmLl9oYW5kc2hha2UocmVxdWVzdClcclxuXHJcbiAgICAgICAgc2VsZi5zZXRfc3RhdHVzKDEwMSlcclxuICAgICAgICBzZWxmLmhlYWRlcnMudXBkYXRlKGhlYWRlcnMpXHJcbiAgICAgICAgc2VsZi5mb3JjZV9jbG9zZSgpXHJcbiAgICAgICAgc2VsZi5fY29tcHJlc3MgPSBjb21wcmVzc1xyXG4gICAgICAgIHRyYW5zcG9ydCA9IHJlcXVlc3QuX3Byb3RvY29sLnRyYW5zcG9ydFxyXG4gICAgICAgIGFzc2VydCB0cmFuc3BvcnQgaXMgbm90IE5vbmVcclxuICAgICAgICB3cml0ZXIgPSBXZWJTb2NrZXRXcml0ZXIoXHJcbiAgICAgICAgICAgIHJlcXVlc3QuX3Byb3RvY29sLCB0cmFuc3BvcnQsIGNvbXByZXNzPWNvbXByZXNzLCBub3Rha2VvdmVyPW5vdGFrZW92ZXJcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBwcm90b2NvbCwgd3JpdGVyXHJcblxyXG4gICAgZGVmIF9wb3N0X3N0YXJ0KFxyXG4gICAgICAgIHNlbGYsIHJlcXVlc3Q6IEJhc2VSZXF1ZXN0LCBwcm90b2NvbDogc3RyLCB3cml0ZXI6IFdlYlNvY2tldFdyaXRlclxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3dzX3Byb3RvY29sID0gcHJvdG9jb2xcclxuICAgICAgICBzZWxmLl93cml0ZXIgPSB3cml0ZXJcclxuXHJcbiAgICAgICAgc2VsZi5fcmVzZXRfaGVhcnRiZWF0KClcclxuXHJcbiAgICAgICAgbG9vcCA9IHNlbGYuX2xvb3BcclxuICAgICAgICBhc3NlcnQgbG9vcCBpcyBub3QgTm9uZVxyXG4gICAgICAgIHNlbGYuX3JlYWRlciA9IEZsb3dDb250cm9sRGF0YVF1ZXVlKHJlcXVlc3QuX3Byb3RvY29sLCAyICoqIDE2LCBsb29wPWxvb3ApXHJcbiAgICAgICAgcmVxdWVzdC5wcm90b2NvbC5zZXRfcGFyc2VyKFxyXG4gICAgICAgICAgICBXZWJTb2NrZXRSZWFkZXIoc2VsZi5fcmVhZGVyLCBzZWxmLl9tYXhfbXNnX3NpemUsIGNvbXByZXNzPXNlbGYuX2NvbXByZXNzKVxyXG4gICAgICAgIClcclxuICAgICAgICAjIGRpc2FibGUgSFRUUCBrZWVwYWxpdmUgZm9yIFdlYlNvY2tldFxyXG4gICAgICAgIHJlcXVlc3QucHJvdG9jb2wua2VlcF9hbGl2ZShGYWxzZSlcclxuXHJcbiAgICBkZWYgY2FuX3ByZXBhcmUoc2VsZiwgcmVxdWVzdDogQmFzZVJlcXVlc3QpIC0+IFdlYlNvY2tldFJlYWR5OlxyXG4gICAgICAgIGlmIHNlbGYuX3dyaXRlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJBbHJlYWR5IHN0YXJ0ZWQiKVxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgXywgcHJvdG9jb2wsIF8sIF8gPSBzZWxmLl9oYW5kc2hha2UocmVxdWVzdClcclxuICAgICAgICBleGNlcHQgSFRUUEV4Y2VwdGlvbjpcclxuICAgICAgICAgICAgcmV0dXJuIFdlYlNvY2tldFJlYWR5KEZhbHNlLCBOb25lKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBXZWJTb2NrZXRSZWFkeShUcnVlLCBwcm90b2NvbClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjbG9zZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY2xvc2VkXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2xvc2VfY29kZShzZWxmKSAtPiBPcHRpb25hbFtpbnRdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jbG9zZV9jb2RlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgd3NfcHJvdG9jb2woc2VsZikgLT4gT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fd3NfcHJvdG9jb2xcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjb21wcmVzcyhzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb21wcmVzc1xyXG5cclxuICAgIGRlZiBleGNlcHRpb24oc2VsZikgLT4gT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2V4Y2VwdGlvblxyXG5cclxuICAgIGFzeW5jIGRlZiBwaW5nKHNlbGYsIG1lc3NhZ2U6IGJ5dGVzID0gYiIiKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX3dyaXRlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkNhbGwgLnByZXBhcmUoKSBmaXJzdCIpXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fd3JpdGVyLnBpbmcobWVzc2FnZSlcclxuXHJcbiAgICBhc3luYyBkZWYgcG9uZyhzZWxmLCBtZXNzYWdlOiBieXRlcyA9IGIiIikgLT4gTm9uZTpcclxuICAgICAgICAjIHVuc29saWNpdGVkIHBvbmdcclxuICAgICAgICBpZiBzZWxmLl93cml0ZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYWxsIC5wcmVwYXJlKCkgZmlyc3QiKVxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3dyaXRlci5wb25nKG1lc3NhZ2UpXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfc3RyKHNlbGYsIGRhdGE6IHN0ciwgY29tcHJlc3M6IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl93cml0ZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYWxsIC5wcmVwYXJlKCkgZmlyc3QiKVxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGRhdGEsIHN0cik6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZGF0YSBhcmd1bWVudCBtdXN0IGJlIHN0ciAoJXIpIiAlIHR5cGUoZGF0YSkpXHJcbiAgICAgICAgYXdhaXQgc2VsZi5fd3JpdGVyLnNlbmQoZGF0YSwgYmluYXJ5PUZhbHNlLCBjb21wcmVzcz1jb21wcmVzcylcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9ieXRlcyhzZWxmLCBkYXRhOiBieXRlcywgY29tcHJlc3M6IE9wdGlvbmFsW2Jvb2xdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl93cml0ZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYWxsIC5wcmVwYXJlKCkgZmlyc3QiKVxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGRhdGEsIChieXRlcywgYnl0ZWFycmF5LCBtZW1vcnl2aWV3KSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZGF0YSBhcmd1bWVudCBtdXN0IGJlIGJ5dGUtaXNoICglcikiICUgdHlwZShkYXRhKSlcclxuICAgICAgICBhd2FpdCBzZWxmLl93cml0ZXIuc2VuZChkYXRhLCBiaW5hcnk9VHJ1ZSwgY29tcHJlc3M9Y29tcHJlc3MpXHJcblxyXG4gICAgYXN5bmMgZGVmIHNlbmRfanNvbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGRhdGE6IEFueSxcclxuICAgICAgICBjb21wcmVzczogT3B0aW9uYWxbYm9vbF0gPSBOb25lLFxyXG4gICAgICAgICosXHJcbiAgICAgICAgZHVtcHM6IEpTT05FbmNvZGVyID0ganNvbi5kdW1wcyxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBhd2FpdCBzZWxmLnNlbmRfc3RyKGR1bXBzKGRhdGEpLCBjb21wcmVzcz1jb21wcmVzcylcclxuXHJcbiAgICBhc3luYyBkZWYgd3JpdGVfZW9mKHNlbGYpIC0+IE5vbmU6ICAjIHR5cGU6IGlnbm9yZVtvdmVycmlkZV1cclxuICAgICAgICBpZiBzZWxmLl9lb2Zfc2VudDpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgaWYgc2VsZi5fcGF5bG9hZF93cml0ZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJSZXNwb25zZSBoYXMgbm90IGJlZW4gc3RhcnRlZCIpXHJcblxyXG4gICAgICAgIGF3YWl0IHNlbGYuY2xvc2UoKVxyXG4gICAgICAgIHNlbGYuX2VvZl9zZW50ID0gVHJ1ZVxyXG5cclxuICAgIGFzeW5jIGRlZiBjbG9zZShzZWxmLCAqLCBjb2RlOiBpbnQgPSBXU0Nsb3NlQ29kZS5PSywgbWVzc2FnZTogYnl0ZXMgPSBiIiIpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgc2VsZi5fd3JpdGVyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2FsbCAucHJlcGFyZSgpIGZpcnN0IilcclxuXHJcbiAgICAgICAgc2VsZi5fY2FuY2VsX2hlYXJ0YmVhdCgpXHJcbiAgICAgICAgcmVhZGVyID0gc2VsZi5fcmVhZGVyXHJcbiAgICAgICAgYXNzZXJ0IHJlYWRlciBpcyBub3QgTm9uZVxyXG5cclxuICAgICAgICAjIHdlIG5lZWQgdG8gYnJlYWsgYHJlY2VpdmUoKWAgY3ljbGUgZmlyc3QsXHJcbiAgICAgICAgIyBgY2xvc2UoKWAgbWF5IGJlIGNhbGxlZCBmcm9tIGRpZmZlcmVudCB0YXNrXHJcbiAgICAgICAgaWYgc2VsZi5fd2FpdGluZyBpcyBub3QgTm9uZSBhbmQgbm90IHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgcmVhZGVyLmZlZWRfZGF0YShXU19DTE9TSU5HX01FU1NBR0UsIDApXHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dhaXRpbmdcclxuXHJcbiAgICAgICAgaWYgbm90IHNlbGYuX2Nsb3NlZDpcclxuICAgICAgICAgICAgc2VsZi5fY2xvc2VkID0gVHJ1ZVxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLl93cml0ZXIuY2xvc2UoY29kZSwgbWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIHdyaXRlciA9IHNlbGYuX3BheWxvYWRfd3JpdGVyXHJcbiAgICAgICAgICAgICAgICBhc3NlcnQgd3JpdGVyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZXIuZHJhaW4oKVxyXG4gICAgICAgICAgICBleGNlcHQgKGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3IsIGFzeW5jaW8uVGltZW91dEVycm9yKTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXHJcbiAgICAgICAgICAgICAgICByYWlzZVxyXG4gICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9leGNlcHRpb24gPSBleGNcclxuICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLl9jbG9zaW5nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICAgICAgICAgIHJlYWRlciA9IHNlbGYuX3JlYWRlclxyXG4gICAgICAgICAgICBhc3NlcnQgcmVhZGVyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGFzeW5jIHdpdGggYXN5bmNfdGltZW91dC50aW1lb3V0KHNlbGYuX3RpbWVvdXQpOlxyXG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IGF3YWl0IHJlYWRlci5yZWFkKClcclxuICAgICAgICAgICAgZXhjZXB0IGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3I6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gV1NDbG9zZUNvZGUuQUJOT1JNQUxfQ0xPU1VSRVxyXG4gICAgICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gV1NDbG9zZUNvZGUuQUJOT1JNQUxfQ0xPU1VSRVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gZXhjXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgICAgICAgICAgaWYgbXNnLnR5cGUgPT0gV1NNc2dUeXBlLkNMT1NFOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IG1zZy5kYXRhXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLkFCTk9STUFMX0NMT1NVUkVcclxuICAgICAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gYXN5bmNpby5UaW1lb3V0RXJyb3IoKVxyXG4gICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgIGFzeW5jIGRlZiByZWNlaXZlKHNlbGYsIHRpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUpIC0+IFdTTWVzc2FnZTpcclxuICAgICAgICBpZiBzZWxmLl9yZWFkZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJDYWxsIC5wcmVwYXJlKCkgZmlyc3QiKVxyXG5cclxuICAgICAgICBsb29wID0gc2VsZi5fbG9vcFxyXG4gICAgICAgIGFzc2VydCBsb29wIGlzIG5vdCBOb25lXHJcbiAgICAgICAgd2hpbGUgVHJ1ZTpcclxuICAgICAgICAgICAgaWYgc2VsZi5fd2FpdGluZyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ29uY3VycmVudCBjYWxsIHRvIHJlY2VpdmUoKSBpcyBub3QgYWxsb3dlZCIpXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLl9jbG9zZWQ6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jb25uX2xvc3QgKz0gMVxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5fY29ubl9sb3N0ID49IFRIUkVTSE9MRF9DT05OTE9TVF9BQ0NFU1M6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJXZWJTb2NrZXQgY29ubmVjdGlvbiBpcyBjbG9zZWQuIilcclxuICAgICAgICAgICAgICAgIHJldHVybiBXU19DTE9TRURfTUVTU0FHRVxyXG4gICAgICAgICAgICBlbGlmIHNlbGYuX2Nsb3Npbmc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gV1NfQ0xPU0lOR19NRVNTQUdFXHJcblxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl93YWl0aW5nID0gbG9vcC5jcmVhdGVfZnV0dXJlKClcclxuICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICBhc3luYyB3aXRoIGFzeW5jX3RpbWVvdXQudGltZW91dCh0aW1lb3V0IG9yIHNlbGYuX3JlY2VpdmVfdGltZW91dCk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZyA9IGF3YWl0IHNlbGYuX3JlYWRlci5yZWFkKClcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZXNldF9oZWFydGJlYXQoKVxyXG4gICAgICAgICAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgICAgICAgICB3YWl0ZXIgPSBzZWxmLl93YWl0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0X3Jlc3VsdCh3YWl0ZXIsIFRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fd2FpdGluZyA9IE5vbmVcclxuICAgICAgICAgICAgZXhjZXB0IChhc3luY2lvLkNhbmNlbGxlZEVycm9yLCBhc3luY2lvLlRpbWVvdXRFcnJvcik6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gV1NDbG9zZUNvZGUuQUJOT1JNQUxfQ0xPU1VSRVxyXG4gICAgICAgICAgICAgICAgcmFpc2VcclxuICAgICAgICAgICAgZXhjZXB0IEVvZlN0cmVhbTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5PS1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gV1NNZXNzYWdlKFdTTXNnVHlwZS5DTE9TRUQsIE5vbmUsIE5vbmUpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBXZWJTb2NrZXRFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gZXhjLmNvZGVcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY2xvc2UoY29kZT1leGMuY29kZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBXU01lc3NhZ2UoV1NNc2dUeXBlLkVSUk9SLCBleGMsIE5vbmUpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gZXhjXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zaW5nID0gVHJ1ZVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLkFCTk9STUFMX0NMT1NVUkVcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFdTTWVzc2FnZShXU01zZ1R5cGUuRVJST1IsIGV4YywgTm9uZSlcclxuXHJcbiAgICAgICAgICAgIGlmIG1zZy50eXBlID09IFdTTXNnVHlwZS5DTE9TRTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NpbmcgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gbXNnLmRhdGFcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLl9jbG9zZWQgYW5kIHNlbGYuX2F1dG9jbG9zZTpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNsb3NlKClcclxuICAgICAgICAgICAgZWxpZiBtc2cudHlwZSA9PSBXU01zZ1R5cGUuQ0xPU0lORzpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NpbmcgPSBUcnVlXHJcbiAgICAgICAgICAgIGVsaWYgbXNnLnR5cGUgPT0gV1NNc2dUeXBlLlBJTkcgYW5kIHNlbGYuX2F1dG9waW5nOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5wb25nKG1zZy5kYXRhKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgZWxpZiBtc2cudHlwZSA9PSBXU01zZ1R5cGUuUE9ORyBhbmQgc2VsZi5fYXV0b3Bpbmc6XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1zZ1xyXG5cclxuICAgIGFzeW5jIGRlZiByZWNlaXZlX3N0cihzZWxmLCAqLCB0aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lKSAtPiBzdHI6XHJcbiAgICAgICAgbXNnID0gYXdhaXQgc2VsZi5yZWNlaXZlKHRpbWVvdXQpXHJcbiAgICAgICAgaWYgbXNnLnR5cGUgIT0gV1NNc2dUeXBlLlRFWFQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJSZWNlaXZlZCBtZXNzYWdlIHt9Onshcn0gaXMgbm90IFdTTXNnVHlwZS5URVhUIi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgbXNnLnR5cGUsIG1zZy5kYXRhXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gY2FzdChzdHIsIG1zZy5kYXRhKVxyXG5cclxuICAgIGFzeW5jIGRlZiByZWNlaXZlX2J5dGVzKHNlbGYsICosIHRpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUpIC0+IGJ5dGVzOlxyXG4gICAgICAgIG1zZyA9IGF3YWl0IHNlbGYucmVjZWl2ZSh0aW1lb3V0KVxyXG4gICAgICAgIGlmIG1zZy50eXBlICE9IFdTTXNnVHlwZS5CSU5BUlk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihmIlJlY2VpdmVkIG1lc3NhZ2Uge21zZy50eXBlfTp7bXNnLmRhdGEhcn0gaXMgbm90IGJ5dGVzIilcclxuICAgICAgICByZXR1cm4gY2FzdChieXRlcywgbXNnLmRhdGEpXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlY2VpdmVfanNvbihcclxuICAgICAgICBzZWxmLCAqLCBsb2FkczogSlNPTkRlY29kZXIgPSBqc29uLmxvYWRzLCB0aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lXHJcbiAgICApIC0+IEFueTpcclxuICAgICAgICBkYXRhID0gYXdhaXQgc2VsZi5yZWNlaXZlX3N0cih0aW1lb3V0PXRpbWVvdXQpXHJcbiAgICAgICAgcmV0dXJuIGxvYWRzKGRhdGEpXHJcblxyXG4gICAgYXN5bmMgZGVmIHdyaXRlKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2Fubm90IGNhbGwgLndyaXRlKCkgZm9yIHdlYnNvY2tldCIpXHJcblxyXG4gICAgZGVmIF9fYWl0ZXJfXyhzZWxmKSAtPiAiV2ViU29ja2V0UmVzcG9uc2UiOlxyXG4gICAgICAgIHJldHVybiBzZWxmXHJcblxyXG4gICAgYXN5bmMgZGVmIF9fYW5leHRfXyhzZWxmKSAtPiBXU01lc3NhZ2U6XHJcbiAgICAgICAgbXNnID0gYXdhaXQgc2VsZi5yZWNlaXZlKClcclxuICAgICAgICBpZiBtc2cudHlwZSBpbiAoV1NNc2dUeXBlLkNMT1NFLCBXU01zZ1R5cGUuQ0xPU0lORywgV1NNc2dUeXBlLkNMT1NFRCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFN0b3BBc3luY0l0ZXJhdGlvblxyXG4gICAgICAgIHJldHVybiBtc2dcclxuXHJcbiAgICBkZWYgX2NhbmNlbChzZWxmLCBleGM6IEJhc2VFeGNlcHRpb24pIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fcmVhZGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9yZWFkZXIuc2V0X2V4Y2VwdGlvbihleGMpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2h0dHBfd2Vic29ja2V0LnB5JywgYiciIiJXZWJTb2NrZXQgcHJvdG9jb2wgdmVyc2lvbnMgMTMgYW5kIDguIiIiXHJcblxyXG5pbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgY29sbGVjdGlvbnNcclxuaW1wb3J0IGpzb25cclxuaW1wb3J0IHJhbmRvbVxyXG5pbXBvcnQgcmVcclxuaW1wb3J0IHN5c1xyXG5pbXBvcnQgemxpYlxyXG5mcm9tIGVudW0gaW1wb3J0IEludEVudW1cclxuZnJvbSBzdHJ1Y3QgaW1wb3J0IFN0cnVjdFxyXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55LCBDYWxsYWJsZSwgTGlzdCwgT3B0aW9uYWwsIFBhdHRlcm4sIFNldCwgVHVwbGUsIFVuaW9uLCBjYXN0XHJcblxyXG5mcm9tIC5iYXNlX3Byb3RvY29sIGltcG9ydCBCYXNlUHJvdG9jb2xcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgTk9fRVhURU5TSU9OU1xyXG5mcm9tIC5zdHJlYW1zIGltcG9ydCBEYXRhUXVldWVcclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IEZpbmFsXHJcblxyXG5fX2FsbF9fID0gKFxyXG4gICAgIldTX0NMT1NFRF9NRVNTQUdFIixcclxuICAgICJXU19DTE9TSU5HX01FU1NBR0UiLFxyXG4gICAgIldTX0tFWSIsXHJcbiAgICAiV2ViU29ja2V0UmVhZGVyIixcclxuICAgICJXZWJTb2NrZXRXcml0ZXIiLFxyXG4gICAgIldTTWVzc2FnZSIsXHJcbiAgICAiV2ViU29ja2V0RXJyb3IiLFxyXG4gICAgIldTTXNnVHlwZSIsXHJcbiAgICAiV1NDbG9zZUNvZGUiLFxyXG4pXHJcblxyXG5cclxuY2xhc3MgV1NDbG9zZUNvZGUoSW50RW51bSk6XHJcbiAgICBPSyA9IDEwMDBcclxuICAgIEdPSU5HX0FXQVkgPSAxMDAxXHJcbiAgICBQUk9UT0NPTF9FUlJPUiA9IDEwMDJcclxuICAgIFVOU1VQUE9SVEVEX0RBVEEgPSAxMDAzXHJcbiAgICBBQk5PUk1BTF9DTE9TVVJFID0gMTAwNlxyXG4gICAgSU5WQUxJRF9URVhUID0gMTAwN1xyXG4gICAgUE9MSUNZX1ZJT0xBVElPTiA9IDEwMDhcclxuICAgIE1FU1NBR0VfVE9PX0JJRyA9IDEwMDlcclxuICAgIE1BTkRBVE9SWV9FWFRFTlNJT04gPSAxMDEwXHJcbiAgICBJTlRFUk5BTF9FUlJPUiA9IDEwMTFcclxuICAgIFNFUlZJQ0VfUkVTVEFSVCA9IDEwMTJcclxuICAgIFRSWV9BR0FJTl9MQVRFUiA9IDEwMTNcclxuICAgIEJBRF9HQVRFV0FZID0gMTAxNFxyXG5cclxuXHJcbkFMTE9XRURfQ0xPU0VfQ09ERVM6IEZpbmFsW1NldFtpbnRdXSA9IHtpbnQoaSkgZm9yIGkgaW4gV1NDbG9zZUNvZGV9XHJcblxyXG5cclxuY2xhc3MgV1NNc2dUeXBlKEludEVudW0pOlxyXG4gICAgIyB3ZWJzb2NrZXQgc3BlYyB0eXBlc1xyXG4gICAgQ09OVElOVUFUSU9OID0gMHgwXHJcbiAgICBURVhUID0gMHgxXHJcbiAgICBCSU5BUlkgPSAweDJcclxuICAgIFBJTkcgPSAweDlcclxuICAgIFBPTkcgPSAweEFcclxuICAgIENMT1NFID0gMHg4XHJcblxyXG4gICAgIyBhaW9odHRwIHNwZWNpZmljIHR5cGVzXHJcbiAgICBDTE9TSU5HID0gMHgxMDBcclxuICAgIENMT1NFRCA9IDB4MTAxXHJcbiAgICBFUlJPUiA9IDB4MTAyXHJcblxyXG4gICAgdGV4dCA9IFRFWFRcclxuICAgIGJpbmFyeSA9IEJJTkFSWVxyXG4gICAgcGluZyA9IFBJTkdcclxuICAgIHBvbmcgPSBQT05HXHJcbiAgICBjbG9zZSA9IENMT1NFXHJcbiAgICBjbG9zaW5nID0gQ0xPU0lOR1xyXG4gICAgY2xvc2VkID0gQ0xPU0VEXHJcbiAgICBlcnJvciA9IEVSUk9SXHJcblxyXG5cclxuV1NfS0VZOiBGaW5hbFtieXRlc10gPSBiIjI1OEVBRkE1LUU5MTQtNDdEQS05NUNBLUM1QUIwREM4NUIxMSJcclxuXHJcblxyXG5VTlBBQ0tfTEVOMiA9IFN0cnVjdCgiIUgiKS51bnBhY2tfZnJvbVxyXG5VTlBBQ0tfTEVOMyA9IFN0cnVjdCgiIVEiKS51bnBhY2tfZnJvbVxyXG5VTlBBQ0tfQ0xPU0VfQ09ERSA9IFN0cnVjdCgiIUgiKS51bnBhY2tcclxuUEFDS19MRU4xID0gU3RydWN0KCIhQkIiKS5wYWNrXHJcblBBQ0tfTEVOMiA9IFN0cnVjdCgiIUJCSCIpLnBhY2tcclxuUEFDS19MRU4zID0gU3RydWN0KCIhQkJRIikucGFja1xyXG5QQUNLX0NMT1NFX0NPREUgPSBTdHJ1Y3QoIiFIIikucGFja1xyXG5NU0dfU0laRTogRmluYWxbaW50XSA9IDIgKiogMTRcclxuREVGQVVMVF9MSU1JVDogRmluYWxbaW50XSA9IDIgKiogMTZcclxuXHJcblxyXG5fV1NNZXNzYWdlQmFzZSA9IGNvbGxlY3Rpb25zLm5hbWVkdHVwbGUoIl9XU01lc3NhZ2VCYXNlIiwgWyJ0eXBlIiwgImRhdGEiLCAiZXh0cmEiXSlcclxuXHJcblxyXG5jbGFzcyBXU01lc3NhZ2UoX1dTTWVzc2FnZUJhc2UpOlxyXG4gICAgZGVmIGpzb24oc2VsZiwgKiwgbG9hZHM6IENhbGxhYmxlW1tBbnldLCBBbnldID0ganNvbi5sb2FkcykgLT4gQW55OlxyXG4gICAgICAgICIiIlJldHVybiBwYXJzZWQgSlNPTiBkYXRhLlxyXG5cclxuICAgICAgICAuLiB2ZXJzaW9uYWRkZWQ6OiAwLjIyXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuIGxvYWRzKHNlbGYuZGF0YSlcclxuXHJcblxyXG5XU19DTE9TRURfTUVTU0FHRSA9IFdTTWVzc2FnZShXU01zZ1R5cGUuQ0xPU0VELCBOb25lLCBOb25lKVxyXG5XU19DTE9TSU5HX01FU1NBR0UgPSBXU01lc3NhZ2UoV1NNc2dUeXBlLkNMT1NJTkcsIE5vbmUsIE5vbmUpXHJcblxyXG5cclxuY2xhc3MgV2ViU29ja2V0RXJyb3IoRXhjZXB0aW9uKTpcclxuICAgICIiIldlYlNvY2tldCBwcm90b2NvbCBwYXJzZXIgZXJyb3IuIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvZGU6IGludCwgbWVzc2FnZTogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuY29kZSA9IGNvZGVcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKGNvZGUsIG1lc3NhZ2UpXHJcblxyXG4gICAgZGVmIF9fc3RyX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBjYXN0KHN0ciwgc2VsZi5hcmdzWzFdKVxyXG5cclxuXHJcbmNsYXNzIFdTSGFuZHNoYWtlRXJyb3IoRXhjZXB0aW9uKTpcclxuICAgICIiIldlYlNvY2tldCBwcm90b2NvbCBoYW5kc2hha2UgZXJyb3IuIiIiXHJcblxyXG5cclxubmF0aXZlX2J5dGVvcmRlcjogRmluYWxbc3RyXSA9IHN5cy5ieXRlb3JkZXJcclxuXHJcblxyXG4jIFVzZWQgYnkgX3dlYnNvY2tldF9tYXNrX3B5dGhvblxyXG5fWE9SX1RBQkxFOiBGaW5hbFtMaXN0W2J5dGVzXV0gPSBbYnl0ZXMoYSBeIGIgZm9yIGEgaW4gcmFuZ2UoMjU2KSkgZm9yIGIgaW4gcmFuZ2UoMjU2KV1cclxuXHJcblxyXG5kZWYgX3dlYnNvY2tldF9tYXNrX3B5dGhvbihtYXNrOiBieXRlcywgZGF0YTogYnl0ZWFycmF5KSAtPiBOb25lOlxyXG4gICAgIiIiV2Vic29ja2V0IG1hc2tpbmcgZnVuY3Rpb24uXHJcblxyXG4gICAgYG1hc2tgIGlzIGEgYGJ5dGVzYCBvYmplY3Qgb2YgbGVuZ3RoIDQ7IGBkYXRhYCBpcyBhIGBieXRlYXJyYXlgXHJcbiAgICBvYmplY3Qgb2YgYW55IGxlbmd0aC4gVGhlIGNvbnRlbnRzIG9mIGBkYXRhYCBhcmUgbWFza2VkIHdpdGggYG1hc2tgLFxyXG4gICAgYXMgc3BlY2lmaWVkIGluIHNlY3Rpb24gNS4zIG9mIFJGQyA2NDU1LlxyXG5cclxuICAgIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIG11dGF0ZXMgdGhlIGBkYXRhYCBhcmd1bWVudC5cclxuXHJcbiAgICBUaGlzIHB1cmUtcHl0aG9uIGltcGxlbWVudGF0aW9uIG1heSBiZSByZXBsYWNlZCBieSBhbiBvcHRpbWl6ZWRcclxuICAgIHZlcnNpb24gd2hlbiBhdmFpbGFibGUuXHJcblxyXG4gICAgIiIiXHJcbiAgICBhc3NlcnQgaXNpbnN0YW5jZShkYXRhLCBieXRlYXJyYXkpLCBkYXRhXHJcbiAgICBhc3NlcnQgbGVuKG1hc2spID09IDQsIG1hc2tcclxuXHJcbiAgICBpZiBkYXRhOlxyXG4gICAgICAgIGEsIGIsIGMsIGQgPSAoX1hPUl9UQUJMRVtuXSBmb3IgbiBpbiBtYXNrKVxyXG4gICAgICAgIGRhdGFbOjo0XSA9IGRhdGFbOjo0XS50cmFuc2xhdGUoYSlcclxuICAgICAgICBkYXRhWzE6OjRdID0gZGF0YVsxOjo0XS50cmFuc2xhdGUoYilcclxuICAgICAgICBkYXRhWzI6OjRdID0gZGF0YVsyOjo0XS50cmFuc2xhdGUoYylcclxuICAgICAgICBkYXRhWzM6OjRdID0gZGF0YVszOjo0XS50cmFuc2xhdGUoZClcclxuXHJcblxyXG5pZiBOT19FWFRFTlNJT05TOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBfd2Vic29ja2V0X21hc2sgPSBfd2Vic29ja2V0X21hc2tfcHl0aG9uXHJcbmVsc2U6XHJcbiAgICB0cnk6XHJcbiAgICAgICAgZnJvbSAuX3dlYnNvY2tldCBpbXBvcnQgX3dlYnNvY2tldF9tYXNrX2N5dGhvbiAgIyB0eXBlOiBpZ25vcmVbaW1wb3J0XVxyXG5cclxuICAgICAgICBfd2Vic29ja2V0X21hc2sgPSBfd2Vic29ja2V0X21hc2tfY3l0aG9uXHJcbiAgICBleGNlcHQgSW1wb3J0RXJyb3I6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICBfd2Vic29ja2V0X21hc2sgPSBfd2Vic29ja2V0X21hc2tfcHl0aG9uXHJcblxyXG5fV1NfREVGTEFURV9UUkFJTElORzogRmluYWxbYnl0ZXNdID0gYnl0ZXMoWzB4MDAsIDB4MDAsIDB4RkYsIDB4RkZdKVxyXG5cclxuXHJcbl9XU19FWFRfUkU6IEZpbmFsW1BhdHRlcm5bc3RyXV0gPSByZS5jb21waWxlKFxyXG4gICAgciJeKD86O1xccyooPzoiXHJcbiAgICByIihzZXJ2ZXJfbm9fY29udGV4dF90YWtlb3Zlcil8IlxyXG4gICAgciIoY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXIpfCJcclxuICAgIHIiKHNlcnZlcl9tYXhfd2luZG93X2JpdHMoPzo9KFxcZCspKT8pfCJcclxuICAgIHIiKGNsaWVudF9tYXhfd2luZG93X2JpdHMoPzo9KFxcZCspKT8pKSkqJCJcclxuKVxyXG5cclxuX1dTX0VYVF9SRV9TUExJVDogRmluYWxbUGF0dGVybltzdHJdXSA9IHJlLmNvbXBpbGUociJwZXJtZXNzYWdlLWRlZmxhdGUoW14sXSspPyIpXHJcblxyXG5cclxuZGVmIHdzX2V4dF9wYXJzZShleHRzdHI6IE9wdGlvbmFsW3N0cl0sIGlzc2VydmVyOiBib29sID0gRmFsc2UpIC0+IFR1cGxlW2ludCwgYm9vbF06XHJcbiAgICBpZiBub3QgZXh0c3RyOlxyXG4gICAgICAgIHJldHVybiAwLCBGYWxzZVxyXG5cclxuICAgIGNvbXByZXNzID0gMFxyXG4gICAgbm90YWtlb3ZlciA9IEZhbHNlXHJcbiAgICBmb3IgZXh0IGluIF9XU19FWFRfUkVfU1BMSVQuZmluZGl0ZXIoZXh0c3RyKTpcclxuICAgICAgICBkZWZleHQgPSBleHQuZ3JvdXAoMSlcclxuICAgICAgICAjIFJldHVybiBjb21wcmVzcyA9IDE1IHdoZW4gZ2V0IGBwZXJtZXNzYWdlLWRlZmxhdGVgXHJcbiAgICAgICAgaWYgbm90IGRlZmV4dDpcclxuICAgICAgICAgICAgY29tcHJlc3MgPSAxNVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgIG1hdGNoID0gX1dTX0VYVF9SRS5tYXRjaChkZWZleHQpXHJcbiAgICAgICAgaWYgbWF0Y2g6XHJcbiAgICAgICAgICAgIGNvbXByZXNzID0gMTVcclxuICAgICAgICAgICAgaWYgaXNzZXJ2ZXI6XHJcbiAgICAgICAgICAgICAgICAjIFNlcnZlciBuZXZlciBmYWlsIHRvIGRldGVjdCBjb21wcmVzcyBoYW5kc2hha2UuXHJcbiAgICAgICAgICAgICAgICAjIFNlcnZlciBkb2VzIG5vdCBuZWVkIHRvIHNlbmQgbWF4IHdiaXQgdG8gY2xpZW50XHJcbiAgICAgICAgICAgICAgICBpZiBtYXRjaC5ncm91cCg0KTpcclxuICAgICAgICAgICAgICAgICAgICBjb21wcmVzcyA9IGludChtYXRjaC5ncm91cCg0KSlcclxuICAgICAgICAgICAgICAgICAgICAjIEdyb3VwMyBtdXN0IG1hdGNoIGlmIGdyb3VwNCBtYXRjaGVzXHJcbiAgICAgICAgICAgICAgICAgICAgIyBDb21wcmVzcyB3Yml0IDggZG9lcyBub3Qgc3VwcG9ydCBpbiB6bGliXHJcbiAgICAgICAgICAgICAgICAgICAgIyBJZiBjb21wcmVzcyBsZXZlbCBub3Qgc3VwcG9ydCxcclxuICAgICAgICAgICAgICAgICAgICAjIENPTlRJTlVFIHRvIG5leHQgZXh0ZW5zaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgY29tcHJlc3MgPiAxNSBvciBjb21wcmVzcyA8IDk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXByZXNzID0gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgaWYgbWF0Y2guZ3JvdXAoMSk6XHJcbiAgICAgICAgICAgICAgICAgICAgbm90YWtlb3ZlciA9IFRydWVcclxuICAgICAgICAgICAgICAgICMgSWdub3JlIHJlZ2V4IGdyb3VwIDUgJiA2IGZvciBjbGllbnRfbWF4X3dpbmRvd19iaXRzXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgaWYgbWF0Y2guZ3JvdXAoNik6XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcHJlc3MgPSBpbnQobWF0Y2guZ3JvdXAoNikpXHJcbiAgICAgICAgICAgICAgICAgICAgIyBHcm91cDUgbXVzdCBtYXRjaCBpZiBncm91cDYgbWF0Y2hlc1xyXG4gICAgICAgICAgICAgICAgICAgICMgQ29tcHJlc3Mgd2JpdCA4IGRvZXMgbm90IHN1cHBvcnQgaW4gemxpYlxyXG4gICAgICAgICAgICAgICAgICAgICMgSWYgY29tcHJlc3MgbGV2ZWwgbm90IHN1cHBvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgIyBGQUlMIHRoZSBwYXJzZSBwcm9ncmVzc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIGNvbXByZXNzID4gMTUgb3IgY29tcHJlc3MgPCA5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBXU0hhbmRzaGFrZUVycm9yKCJJbnZhbGlkIHdpbmRvdyBzaXplIilcclxuICAgICAgICAgICAgICAgIGlmIG1hdGNoLmdyb3VwKDIpOlxyXG4gICAgICAgICAgICAgICAgICAgIG5vdGFrZW92ZXIgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICAjIElnbm9yZSByZWdleCBncm91cCA1ICYgNiBmb3IgY2xpZW50X21heF93aW5kb3dfYml0c1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAjIFJldHVybiBGYWlsIGlmIGNsaWVudCBzaWRlIGFuZCBub3QgbWF0Y2hcclxuICAgICAgICBlbGlmIG5vdCBpc3NlcnZlcjpcclxuICAgICAgICAgICAgcmFpc2UgV1NIYW5kc2hha2VFcnJvcigiRXh0ZW5zaW9uIGZvciBkZWZsYXRlIG5vdCBzdXBwb3J0ZWQiICsgZXh0Lmdyb3VwKDEpKVxyXG5cclxuICAgIHJldHVybiBjb21wcmVzcywgbm90YWtlb3ZlclxyXG5cclxuXHJcbmRlZiB3c19leHRfZ2VuKFxyXG4gICAgY29tcHJlc3M6IGludCA9IDE1LCBpc3NlcnZlcjogYm9vbCA9IEZhbHNlLCBzZXJ2ZXJfbm90YWtlb3ZlcjogYm9vbCA9IEZhbHNlXHJcbikgLT4gc3RyOlxyXG4gICAgIyBjbGllbnRfbm90YWtlb3Zlcj1GYWxzZSBub3QgdXNlZCBmb3Igc2VydmVyXHJcbiAgICAjIGNvbXByZXNzIHdiaXQgOCBkb2VzIG5vdCBzdXBwb3J0IGluIHpsaWJcclxuICAgIGlmIGNvbXByZXNzIDwgOSBvciBjb21wcmVzcyA+IDE1OlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICJDb21wcmVzcyB3Yml0cyBtdXN0IGJldHdlZW4gOSBhbmQgMTUsICIgInpsaWIgZG9lcyBub3Qgc3VwcG9ydCB3Yml0cz04IlxyXG4gICAgICAgIClcclxuICAgIGVuYWJsZWRleHQgPSBbInBlcm1lc3NhZ2UtZGVmbGF0ZSJdXHJcbiAgICBpZiBub3QgaXNzZXJ2ZXI6XHJcbiAgICAgICAgZW5hYmxlZGV4dC5hcHBlbmQoImNsaWVudF9tYXhfd2luZG93X2JpdHMiKVxyXG5cclxuICAgIGlmIGNvbXByZXNzIDwgMTU6XHJcbiAgICAgICAgZW5hYmxlZGV4dC5hcHBlbmQoInNlcnZlcl9tYXhfd2luZG93X2JpdHM9IiArIHN0cihjb21wcmVzcykpXHJcbiAgICBpZiBzZXJ2ZXJfbm90YWtlb3ZlcjpcclxuICAgICAgICBlbmFibGVkZXh0LmFwcGVuZCgic2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXIiKVxyXG4gICAgIyBpZiBjbGllbnRfbm90YWtlb3ZlcjpcclxuICAgICMgICAgIGVuYWJsZWRleHQuYXBwZW5kKFwnY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXJcJylcclxuICAgIHJldHVybiAiOyAiLmpvaW4oZW5hYmxlZGV4dClcclxuXHJcblxyXG5jbGFzcyBXU1BhcnNlclN0YXRlKEludEVudW0pOlxyXG4gICAgUkVBRF9IRUFERVIgPSAxXHJcbiAgICBSRUFEX1BBWUxPQURfTEVOR1RIID0gMlxyXG4gICAgUkVBRF9QQVlMT0FEX01BU0sgPSAzXHJcbiAgICBSRUFEX1BBWUxPQUQgPSA0XHJcblxyXG5cclxuY2xhc3MgV2ViU29ja2V0UmVhZGVyOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIHF1ZXVlOiBEYXRhUXVldWVbV1NNZXNzYWdlXSwgbWF4X21zZ19zaXplOiBpbnQsIGNvbXByZXNzOiBib29sID0gVHJ1ZVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYucXVldWUgPSBxdWV1ZVxyXG4gICAgICAgIHNlbGYuX21heF9tc2dfc2l6ZSA9IG1heF9tc2dfc2l6ZVxyXG5cclxuICAgICAgICBzZWxmLl9leGMgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW0Jhc2VFeGNlcHRpb25dXHJcbiAgICAgICAgc2VsZi5fcGFydGlhbCA9IGJ5dGVhcnJheSgpXHJcbiAgICAgICAgc2VsZi5fc3RhdGUgPSBXU1BhcnNlclN0YXRlLlJFQURfSEVBREVSXHJcblxyXG4gICAgICAgIHNlbGYuX29wY29kZSA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbaW50XVxyXG4gICAgICAgIHNlbGYuX2ZyYW1lX2ZpbiA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fZnJhbWVfb3Bjb2RlID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtpbnRdXHJcbiAgICAgICAgc2VsZi5fZnJhbWVfcGF5bG9hZCA9IGJ5dGVhcnJheSgpXHJcblxyXG4gICAgICAgIHNlbGYuX3RhaWwgPSBiIiJcclxuICAgICAgICBzZWxmLl9oYXNfbWFzayA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fZnJhbWVfbWFzayA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYnl0ZXNdXHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZF9sZW5ndGggPSAwXHJcbiAgICAgICAgc2VsZi5fcGF5bG9hZF9sZW5ndGhfZmxhZyA9IDBcclxuICAgICAgICBzZWxmLl9jb21wcmVzc2VkID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtib29sXVxyXG4gICAgICAgIHNlbGYuX2RlY29tcHJlc3NvYmogPSBOb25lICAjIHR5cGU6IEFueSAgIyB6bGliLmRlY29tcHJlc3NvYmogYWN0dWFsbHlcclxuICAgICAgICBzZWxmLl9jb21wcmVzcyA9IGNvbXByZXNzXHJcblxyXG4gICAgZGVmIGZlZWRfZW9mKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5xdWV1ZS5mZWVkX2VvZigpXHJcblxyXG4gICAgZGVmIGZlZWRfZGF0YShzZWxmLCBkYXRhOiBieXRlcykgLT4gVHVwbGVbYm9vbCwgYnl0ZXNdOlxyXG4gICAgICAgIGlmIHNlbGYuX2V4YzpcclxuICAgICAgICAgICAgcmV0dXJuIFRydWUsIGRhdGFcclxuXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZmVlZF9kYXRhKGRhdGEpXHJcbiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleGM6XHJcbiAgICAgICAgICAgIHNlbGYuX2V4YyA9IGV4Y1xyXG4gICAgICAgICAgICBzZWxmLnF1ZXVlLnNldF9leGNlcHRpb24oZXhjKVxyXG4gICAgICAgICAgICByZXR1cm4gVHJ1ZSwgYiIiXHJcblxyXG4gICAgZGVmIF9mZWVkX2RhdGEoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IFR1cGxlW2Jvb2wsIGJ5dGVzXTpcclxuICAgICAgICBmb3IgZmluLCBvcGNvZGUsIHBheWxvYWQsIGNvbXByZXNzZWQgaW4gc2VsZi5wYXJzZV9mcmFtZShkYXRhKTpcclxuICAgICAgICAgICAgaWYgY29tcHJlc3NlZCBhbmQgbm90IHNlbGYuX2RlY29tcHJlc3NvYmo6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9kZWNvbXByZXNzb2JqID0gemxpYi5kZWNvbXByZXNzb2JqKHdiaXRzPS16bGliLk1BWF9XQklUUylcclxuICAgICAgICAgICAgaWYgb3Bjb2RlID09IFdTTXNnVHlwZS5DTE9TRTpcclxuICAgICAgICAgICAgICAgIGlmIGxlbihwYXlsb2FkKSA+PSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlX2NvZGUgPSBVTlBBQ0tfQ0xPU0VfQ09ERShwYXlsb2FkWzoyXSlbMF1cclxuICAgICAgICAgICAgICAgICAgICBpZiBjbG9zZV9jb2RlIDwgMzAwMCBhbmQgY2xvc2VfY29kZSBub3QgaW4gQUxMT1dFRF9DTE9TRV9DT0RFUzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgV2ViU29ja2V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXU0Nsb3NlQ29kZS5QUk9UT0NPTF9FUlJPUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYiSW52YWxpZCBjbG9zZSBjb2RlOiB7Y2xvc2VfY29kZX0iLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZV9tZXNzYWdlID0gcGF5bG9hZFsyOl0uZGVjb2RlKCJ1dGYtOCIpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFdlYlNvY2tldEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgV1NDbG9zZUNvZGUuSU5WQUxJRF9URVhULCAiSW52YWxpZCBVVEYtOCB0ZXh0IG1lc3NhZ2UiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgZnJvbSBleGNcclxuICAgICAgICAgICAgICAgICAgICBtc2cgPSBXU01lc3NhZ2UoV1NNc2dUeXBlLkNMT1NFLCBjbG9zZV9jb2RlLCBjbG9zZV9tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgZWxpZiBwYXlsb2FkOlxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlIFdlYlNvY2tldEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBXU0Nsb3NlQ29kZS5QUk9UT0NPTF9FUlJPUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZiJJbnZhbGlkIGNsb3NlIGZyYW1lOiB7ZmlufSB7b3Bjb2RlfSB7cGF5bG9hZCFyfSIsXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBtc2cgPSBXU01lc3NhZ2UoV1NNc2dUeXBlLkNMT1NFLCAwLCAiIilcclxuXHJcbiAgICAgICAgICAgICAgICBzZWxmLnF1ZXVlLmZlZWRfZGF0YShtc2csIDApXHJcblxyXG4gICAgICAgICAgICBlbGlmIG9wY29kZSA9PSBXU01zZ1R5cGUuUElORzpcclxuICAgICAgICAgICAgICAgIHNlbGYucXVldWUuZmVlZF9kYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgIFdTTWVzc2FnZShXU01zZ1R5cGUuUElORywgcGF5bG9hZCwgIiIpLCBsZW4ocGF5bG9hZClcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIGVsaWYgb3Bjb2RlID09IFdTTXNnVHlwZS5QT05HOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5xdWV1ZS5mZWVkX2RhdGEoXHJcbiAgICAgICAgICAgICAgICAgICAgV1NNZXNzYWdlKFdTTXNnVHlwZS5QT05HLCBwYXlsb2FkLCAiIiksIGxlbihwYXlsb2FkKVxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgZWxpZiAoXHJcbiAgICAgICAgICAgICAgICBvcGNvZGUgbm90IGluIChXU01zZ1R5cGUuVEVYVCwgV1NNc2dUeXBlLkJJTkFSWSlcclxuICAgICAgICAgICAgICAgIGFuZCBzZWxmLl9vcGNvZGUgaXMgTm9uZVxyXG4gICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgV2ViU29ja2V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgV1NDbG9zZUNvZGUuUFJPVE9DT0xfRVJST1IsIGYiVW5leHBlY3RlZCBvcGNvZGU9e29wY29kZSFyfSJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICMgbG9hZCB0ZXh0L2JpbmFyeVxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGZpbjpcclxuICAgICAgICAgICAgICAgICAgICAjIGdvdCBwYXJ0aWFsIGZyYW1lIHBheWxvYWRcclxuICAgICAgICAgICAgICAgICAgICBpZiBvcGNvZGUgIT0gV1NNc2dUeXBlLkNPTlRJTlVBVElPTjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fb3Bjb2RlID0gb3Bjb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGFydGlhbC5leHRlbmQocGF5bG9hZClcclxuICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLl9tYXhfbXNnX3NpemUgYW5kIGxlbihzZWxmLl9wYXJ0aWFsKSA+PSBzZWxmLl9tYXhfbXNnX3NpemU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFdlYlNvY2tldEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgV1NDbG9zZUNvZGUuTUVTU0FHRV9UT09fQklHLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1lc3NhZ2Ugc2l6ZSB7fSBleGNlZWRzIGxpbWl0IHt9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuKHNlbGYuX3BhcnRpYWwpLCBzZWxmLl9tYXhfbXNnX3NpemVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgIyBwcmV2aW91cyBmcmFtZSB3YXMgbm9uIGZpbmlzaGVkXHJcbiAgICAgICAgICAgICAgICAgICAgIyB3ZSBzaG91bGQgZ2V0IGNvbnRpbnVhdGlvbiBvcGNvZGVcclxuICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLl9wYXJ0aWFsOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBvcGNvZGUgIT0gV1NNc2dUeXBlLkNPTlRJTlVBVElPTjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFdlYlNvY2tldEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdTQ2xvc2VDb2RlLlBST1RPQ09MX0VSUk9SLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUaGUgb3Bjb2RlIGluIG5vbi1maW4gZnJhbWUgaXMgZXhwZWN0ZWQgIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0byBiZSB6ZXJvLCBnb3QgeyFyfSIuZm9ybWF0KG9wY29kZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG9wY29kZSA9PSBXU01zZ1R5cGUuQ09OVElOVUFUSU9OOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQgc2VsZi5fb3Bjb2RlIGlzIG5vdCBOb25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wY29kZSA9IHNlbGYuX29wY29kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9vcGNvZGUgPSBOb25lXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3BhcnRpYWwuZXh0ZW5kKHBheWxvYWQpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5fbWF4X21zZ19zaXplIGFuZCBsZW4oc2VsZi5fcGFydGlhbCkgPj0gc2VsZi5fbWF4X21zZ19zaXplOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBXZWJTb2NrZXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdTQ2xvc2VDb2RlLk1FU1NBR0VfVE9PX0JJRyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJNZXNzYWdlIHNpemUge30gZXhjZWVkcyBsaW1pdCB7fSIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbihzZWxmLl9wYXJ0aWFsKSwgc2VsZi5fbWF4X21zZ19zaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICMgRGVjb21wcmVzcyBwcm9jZXNzIG11c3QgdG8gYmUgZG9uZSBhZnRlciBhbGwgcGFja2V0c1xyXG4gICAgICAgICAgICAgICAgICAgICMgcmVjZWl2ZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgY29tcHJlc3NlZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGFydGlhbC5leHRlbmQoX1dTX0RFRkxBVEVfVFJBSUxJTkcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWRfbWVyZ2VkID0gc2VsZi5fZGVjb21wcmVzc29iai5kZWNvbXByZXNzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGFydGlhbCwgc2VsZi5fbWF4X21zZ19zaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5fZGVjb21wcmVzc29iai51bmNvbnN1bWVkX3RhaWw6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gbGVuKHNlbGYuX2RlY29tcHJlc3NvYmoudW5jb25zdW1lZF90YWlsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgV2ViU29ja2V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV1NDbG9zZUNvZGUuTUVTU0FHRV9UT09fQklHLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJEZWNvbXByZXNzZWQgbWVzc2FnZSBzaXplIHt9IGV4Y2VlZHMgbGltaXQge30iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbWF4X21zZ19zaXplICsgbGVmdCwgc2VsZi5fbWF4X21zZ19zaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkX21lcmdlZCA9IGJ5dGVzKHNlbGYuX3BhcnRpYWwpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3BhcnRpYWwuY2xlYXIoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiBvcGNvZGUgPT0gV1NNc2dUeXBlLlRFWFQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBwYXlsb2FkX21lcmdlZC5kZWNvZGUoInV0Zi04IilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucXVldWUuZmVlZF9kYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdTTWVzc2FnZShXU01zZ1R5cGUuVEVYVCwgdGV4dCwgIiIpLCBsZW4odGV4dClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvciBhcyBleGM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZSBXZWJTb2NrZXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXU0Nsb3NlQ29kZS5JTlZBTElEX1RFWFQsICJJbnZhbGlkIFVURi04IHRleHQgbWVzc2FnZSJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgZnJvbSBleGNcclxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnF1ZXVlLmZlZWRfZGF0YShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdTTWVzc2FnZShXU01zZ1R5cGUuQklOQVJZLCBwYXlsb2FkX21lcmdlZCwgIiIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuKHBheWxvYWRfbWVyZ2VkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gRmFsc2UsIGIiIlxyXG5cclxuICAgIGRlZiBwYXJzZV9mcmFtZShcclxuICAgICAgICBzZWxmLCBidWY6IGJ5dGVzXHJcbiAgICApIC0+IExpc3RbVHVwbGVbYm9vbCwgT3B0aW9uYWxbaW50XSwgYnl0ZWFycmF5LCBPcHRpb25hbFtib29sXV1dOlxyXG4gICAgICAgICIiIlJldHVybiB0aGUgbmV4dCBmcmFtZSBmcm9tIHRoZSBzb2NrZXQuIiIiXHJcbiAgICAgICAgZnJhbWVzID0gW11cclxuICAgICAgICBpZiBzZWxmLl90YWlsOlxyXG4gICAgICAgICAgICBidWYsIHNlbGYuX3RhaWwgPSBzZWxmLl90YWlsICsgYnVmLCBiIiJcclxuXHJcbiAgICAgICAgc3RhcnRfcG9zID0gMFxyXG4gICAgICAgIGJ1Zl9sZW5ndGggPSBsZW4oYnVmKVxyXG5cclxuICAgICAgICB3aGlsZSBUcnVlOlxyXG4gICAgICAgICAgICAjIHJlYWQgaGVhZGVyXHJcbiAgICAgICAgICAgIGlmIHNlbGYuX3N0YXRlID09IFdTUGFyc2VyU3RhdGUuUkVBRF9IRUFERVI6XHJcbiAgICAgICAgICAgICAgICBpZiBidWZfbGVuZ3RoIC0gc3RhcnRfcG9zID49IDI6XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGJ1ZltzdGFydF9wb3MgOiBzdGFydF9wb3MgKyAyXVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0X3BvcyArPSAyXHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RfYnl0ZSwgc2Vjb25kX2J5dGUgPSBkYXRhXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZpbiA9IChmaXJzdF9ieXRlID4+IDcpICYgMVxyXG4gICAgICAgICAgICAgICAgICAgIHJzdjEgPSAoZmlyc3RfYnl0ZSA+PiA2KSAmIDFcclxuICAgICAgICAgICAgICAgICAgICByc3YyID0gKGZpcnN0X2J5dGUgPj4gNSkgJiAxXHJcbiAgICAgICAgICAgICAgICAgICAgcnN2MyA9IChmaXJzdF9ieXRlID4+IDQpICYgMVxyXG4gICAgICAgICAgICAgICAgICAgIG9wY29kZSA9IGZpcnN0X2J5dGUgJiAweEZcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgIyBmcmFtZS1maW4gPSAleDAgOyBtb3JlIGZyYW1lcyBvZiB0aGlzIG1lc3NhZ2UgZm9sbG93XHJcbiAgICAgICAgICAgICAgICAgICAgIyAgICAgICAgICAgLyAleDEgOyBmaW5hbCBmcmFtZSBvZiB0aGlzIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAjIGZyYW1lLXJzdjEgPSAleDAgO1xyXG4gICAgICAgICAgICAgICAgICAgICMgICAgMSBiaXQsIE1VU1QgYmUgMCB1bmxlc3MgbmVnb3RpYXRlZCBvdGhlcndpc2VcclxuICAgICAgICAgICAgICAgICAgICAjIGZyYW1lLXJzdjIgPSAleDAgO1xyXG4gICAgICAgICAgICAgICAgICAgICMgICAgMSBiaXQsIE1VU1QgYmUgMCB1bmxlc3MgbmVnb3RpYXRlZCBvdGhlcndpc2VcclxuICAgICAgICAgICAgICAgICAgICAjIGZyYW1lLXJzdjMgPSAleDAgO1xyXG4gICAgICAgICAgICAgICAgICAgICMgICAgMSBiaXQsIE1VU1QgYmUgMCB1bmxlc3MgbmVnb3RpYXRlZCBvdGhlcndpc2VcclxuICAgICAgICAgICAgICAgICAgICAjXHJcbiAgICAgICAgICAgICAgICAgICAgIyBSZW1vdmUgcnN2MSBmcm9tIHRoaXMgdGVzdCBmb3IgZGVmbGF0ZSBkZXZlbG9wbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHJzdjIgb3IgcnN2MyBvciAocnN2MSBhbmQgbm90IHNlbGYuX2NvbXByZXNzKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgV2ViU29ja2V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXU0Nsb3NlQ29kZS5QUk9UT0NPTF9FUlJPUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJSZWNlaXZlZCBmcmFtZSB3aXRoIG5vbi16ZXJvIHJlc2VydmVkIGJpdHMiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG9wY29kZSA+IDB4NyBhbmQgZmluID09IDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlIFdlYlNvY2tldEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgV1NDbG9zZUNvZGUuUFJPVE9DT0xfRVJST1IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUmVjZWl2ZWQgZnJhZ21lbnRlZCBjb250cm9sIGZyYW1lIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBoYXNfbWFzayA9IChzZWNvbmRfYnl0ZSA+PiA3KSAmIDFcclxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBzZWNvbmRfYnl0ZSAmIDB4N0ZcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgIyBDb250cm9sIGZyYW1lcyBNVVNUIGhhdmUgYSBwYXlsb2FkXHJcbiAgICAgICAgICAgICAgICAgICAgIyBsZW5ndGggb2YgMTI1IGJ5dGVzIG9yIGxlc3NcclxuICAgICAgICAgICAgICAgICAgICBpZiBvcGNvZGUgPiAweDcgYW5kIGxlbmd0aCA+IDEyNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgV2ViU29ja2V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXU0Nsb3NlQ29kZS5QUk9UT0NPTF9FUlJPUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb250cm9sIGZyYW1lIHBheWxvYWQgY2Fubm90IGJlICIgImxhcmdlciB0aGFuIDEyNSBieXRlcyIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgIyBTZXQgY29tcHJlc3Mgc3RhdHVzIGlmIGxhc3QgcGFja2FnZSBpcyBGSU5cclxuICAgICAgICAgICAgICAgICAgICAjIE9SIHNldCBjb21wcmVzcyBzdGF0dXMgaWYgdGhpcyBpcyBmaXJzdCBmcmFnbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICMgUmFpc2UgZXJyb3IgaWYgbm90IGZpcnN0IGZyYWdtZW50IHdpdGggcnN2MSA9IDB4MVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX2ZyYW1lX2ZpbiBvciBzZWxmLl9jb21wcmVzc2VkIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NvbXByZXNzZWQgPSBUcnVlIGlmIHJzdjEgZWxzZSBGYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGVsaWYgcnN2MTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgV2ViU29ja2V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXU0Nsb3NlQ29kZS5QUk9UT0NPTF9FUlJPUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICJSZWNlaXZlZCBmcmFtZSB3aXRoIG5vbi16ZXJvIHJlc2VydmVkIGJpdHMiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZyYW1lX2ZpbiA9IGJvb2woZmluKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZyYW1lX29wY29kZSA9IG9wY29kZVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2hhc19tYXNrID0gYm9vbChoYXNfbWFzaylcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXlsb2FkX2xlbmd0aF9mbGFnID0gbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fc3RhdGUgPSBXU1BhcnNlclN0YXRlLlJFQURfUEFZTE9BRF9MRU5HVEhcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgICMgcmVhZCBwYXlsb2FkIGxlbmd0aFxyXG4gICAgICAgICAgICBpZiBzZWxmLl9zdGF0ZSA9PSBXU1BhcnNlclN0YXRlLlJFQURfUEFZTE9BRF9MRU5HVEg6XHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBzZWxmLl9wYXlsb2FkX2xlbmd0aF9mbGFnXHJcbiAgICAgICAgICAgICAgICBpZiBsZW5ndGggPT0gMTI2OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGJ1Zl9sZW5ndGggLSBzdGFydF9wb3MgPj0gMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGJ1ZltzdGFydF9wb3MgOiBzdGFydF9wb3MgKyAyXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydF9wb3MgKz0gMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBVTlBBQ0tfTEVOMihkYXRhKVswXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXlsb2FkX2xlbmd0aCA9IGxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdGF0ZSA9IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdTUGFyc2VyU3RhdGUuUkVBRF9QQVlMT0FEX01BU0tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX2hhc19tYXNrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIFdTUGFyc2VyU3RhdGUuUkVBRF9QQVlMT0FEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgZWxpZiBsZW5ndGggPiAxMjY6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgYnVmX2xlbmd0aCAtIHN0YXJ0X3BvcyA+PSA4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gYnVmW3N0YXJ0X3BvcyA6IHN0YXJ0X3BvcyArIDhdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3BvcyArPSA4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IFVOUEFDS19MRU4zKGRhdGEpWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfbGVuZ3RoID0gbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3N0YXRlID0gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgV1NQYXJzZXJTdGF0ZS5SRUFEX1BBWUxPQURfTUFTS1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5faGFzX21hc2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgV1NQYXJzZXJTdGF0ZS5SRUFEX1BBWUxPQURcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3BheWxvYWRfbGVuZ3RoID0gbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fc3RhdGUgPSAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFdTUGFyc2VyU3RhdGUuUkVBRF9QQVlMT0FEX01BU0tcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi5faGFzX21hc2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBXU1BhcnNlclN0YXRlLlJFQURfUEFZTE9BRFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICMgcmVhZCBwYXlsb2FkIG1hc2tcclxuICAgICAgICAgICAgaWYgc2VsZi5fc3RhdGUgPT0gV1NQYXJzZXJTdGF0ZS5SRUFEX1BBWUxPQURfTUFTSzpcclxuICAgICAgICAgICAgICAgIGlmIGJ1Zl9sZW5ndGggLSBzdGFydF9wb3MgPj0gNDpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9mcmFtZV9tYXNrID0gYnVmW3N0YXJ0X3BvcyA6IHN0YXJ0X3BvcyArIDRdXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRfcG9zICs9IDRcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9zdGF0ZSA9IFdTUGFyc2VyU3RhdGUuUkVBRF9QQVlMT0FEXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLl9zdGF0ZSA9PSBXU1BhcnNlclN0YXRlLlJFQURfUEFZTE9BRDpcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYuX3BheWxvYWRfbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkID0gc2VsZi5fZnJhbWVfcGF5bG9hZFxyXG5cclxuICAgICAgICAgICAgICAgIGNodW5rX2xlbiA9IGJ1Zl9sZW5ndGggLSBzdGFydF9wb3NcclxuICAgICAgICAgICAgICAgIGlmIGxlbmd0aCA+PSBjaHVua19sZW46XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGF5bG9hZF9sZW5ndGggPSBsZW5ndGggLSBjaHVua19sZW5cclxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmV4dGVuZChidWZbc3RhcnRfcG9zOl0pXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRfcG9zID0gYnVmX2xlbmd0aFxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXlsb2FkX2xlbmd0aCA9IDBcclxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmV4dGVuZChidWZbc3RhcnRfcG9zIDogc3RhcnRfcG9zICsgbGVuZ3RoXSlcclxuICAgICAgICAgICAgICAgICAgICBzdGFydF9wb3MgPSBzdGFydF9wb3MgKyBsZW5ndGhcclxuXHJcbiAgICAgICAgICAgICAgICBpZiBzZWxmLl9wYXlsb2FkX2xlbmd0aCA9PSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX2hhc19tYXNrOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQgc2VsZi5fZnJhbWVfbWFzayBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfd2Vic29ja2V0X21hc2soc2VsZi5fZnJhbWVfbWFzaywgcGF5bG9hZClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVzLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlbGYuX2ZyYW1lX2Zpbiwgc2VsZi5fZnJhbWVfb3Bjb2RlLCBwYXlsb2FkLCBzZWxmLl9jb21wcmVzc2VkKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZnJhbWVfcGF5bG9hZCA9IGJ5dGVhcnJheSgpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fc3RhdGUgPSBXU1BhcnNlclN0YXRlLlJFQURfSEVBREVSXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgIHNlbGYuX3RhaWwgPSBidWZbc3RhcnRfcG9zOl1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZyYW1lc1xyXG5cclxuXHJcbmNsYXNzIFdlYlNvY2tldFdyaXRlcjpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHByb3RvY29sOiBCYXNlUHJvdG9jb2wsXHJcbiAgICAgICAgdHJhbnNwb3J0OiBhc3luY2lvLlRyYW5zcG9ydCxcclxuICAgICAgICAqLFxyXG4gICAgICAgIHVzZV9tYXNrOiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgbGltaXQ6IGludCA9IERFRkFVTFRfTElNSVQsXHJcbiAgICAgICAgcmFuZG9tOiBBbnkgPSByYW5kb20uUmFuZG9tKCksXHJcbiAgICAgICAgY29tcHJlc3M6IGludCA9IDAsXHJcbiAgICAgICAgbm90YWtlb3ZlcjogYm9vbCA9IEZhbHNlLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYucHJvdG9jb2wgPSBwcm90b2NvbFxyXG4gICAgICAgIHNlbGYudHJhbnNwb3J0ID0gdHJhbnNwb3J0XHJcbiAgICAgICAgc2VsZi51c2VfbWFzayA9IHVzZV9tYXNrXHJcbiAgICAgICAgc2VsZi5yYW5kcmFuZ2UgPSByYW5kb20ucmFuZHJhbmdlXHJcbiAgICAgICAgc2VsZi5jb21wcmVzcyA9IGNvbXByZXNzXHJcbiAgICAgICAgc2VsZi5ub3Rha2VvdmVyID0gbm90YWtlb3ZlclxyXG4gICAgICAgIHNlbGYuX2Nsb3NpbmcgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX2xpbWl0ID0gbGltaXRcclxuICAgICAgICBzZWxmLl9vdXRwdXRfc2l6ZSA9IDBcclxuICAgICAgICBzZWxmLl9jb21wcmVzc29iaiA9IE5vbmUgICMgdHlwZTogQW55ICAjIGFjdHVhbGx5IGNvbXByZXNzb2JqXHJcblxyXG4gICAgYXN5bmMgZGVmIF9zZW5kX2ZyYW1lKFxyXG4gICAgICAgIHNlbGYsIG1lc3NhZ2U6IGJ5dGVzLCBvcGNvZGU6IGludCwgY29tcHJlc3M6IE9wdGlvbmFsW2ludF0gPSBOb25lXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiU2VuZCBhIGZyYW1lIG92ZXIgdGhlIHdlYnNvY2tldCB3aXRoIG1lc3NhZ2UgYXMgaXRzIHBheWxvYWQuIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fY2xvc2luZyBhbmQgbm90IChvcGNvZGUgJiBXU01zZ1R5cGUuQ0xPU0UpOlxyXG4gICAgICAgICAgICByYWlzZSBDb25uZWN0aW9uUmVzZXRFcnJvcigiQ2Fubm90IHdyaXRlIHRvIGNsb3NpbmcgdHJhbnNwb3J0IilcclxuXHJcbiAgICAgICAgcnN2ID0gMFxyXG5cclxuICAgICAgICAjIE9ubHkgY29tcHJlc3MgbGFyZ2VyIHBhY2tldHMgKGRpc2FibGVkKVxyXG4gICAgICAgICMgRG9lcyBzbWFsbCBwYWNrZXQgbmVlZHMgdG8gYmUgY29tcHJlc3NlZD9cclxuICAgICAgICAjIGlmIHNlbGYuY29tcHJlc3MgYW5kIG9wY29kZSA8IDggYW5kIGxlbihtZXNzYWdlKSA+IDEyNDpcclxuICAgICAgICBpZiAoY29tcHJlc3Mgb3Igc2VsZi5jb21wcmVzcykgYW5kIG9wY29kZSA8IDg6XHJcbiAgICAgICAgICAgIGlmIGNvbXByZXNzOlxyXG4gICAgICAgICAgICAgICAgIyBEbyBub3Qgc2V0IHNlbGYuX2NvbXByZXNzIGlmIGNvbXByZXNzaW5nIGlzIGZvciB0aGlzIGZyYW1lXHJcbiAgICAgICAgICAgICAgICBjb21wcmVzc29iaiA9IHpsaWIuY29tcHJlc3NvYmoobGV2ZWw9emxpYi5aX0JFU1RfU1BFRUQsIHdiaXRzPS1jb21wcmVzcylcclxuICAgICAgICAgICAgZWxzZTogICMgc2VsZi5jb21wcmVzc1xyXG4gICAgICAgICAgICAgICAgaWYgbm90IHNlbGYuX2NvbXByZXNzb2JqOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2NvbXByZXNzb2JqID0gemxpYi5jb21wcmVzc29iaihcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw9emxpYi5aX0JFU1RfU1BFRUQsIHdiaXRzPS1zZWxmLmNvbXByZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgY29tcHJlc3NvYmogPSBzZWxmLl9jb21wcmVzc29ialxyXG5cclxuICAgICAgICAgICAgbWVzc2FnZSA9IGNvbXByZXNzb2JqLmNvbXByZXNzKG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgY29tcHJlc3NvYmouZmx1c2goXHJcbiAgICAgICAgICAgICAgICB6bGliLlpfRlVMTF9GTFVTSCBpZiBzZWxmLm5vdGFrZW92ZXIgZWxzZSB6bGliLlpfU1lOQ19GTFVTSFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGlmIG1lc3NhZ2UuZW5kc3dpdGgoX1dTX0RFRkxBVEVfVFJBSUxJTkcpOlxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2VbOi00XVxyXG4gICAgICAgICAgICByc3YgPSByc3YgfCAweDQwXHJcblxyXG4gICAgICAgIG1zZ19sZW5ndGggPSBsZW4obWVzc2FnZSlcclxuXHJcbiAgICAgICAgdXNlX21hc2sgPSBzZWxmLnVzZV9tYXNrXHJcbiAgICAgICAgaWYgdXNlX21hc2s6XHJcbiAgICAgICAgICAgIG1hc2tfYml0ID0gMHg4MFxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIG1hc2tfYml0ID0gMFxyXG5cclxuICAgICAgICBpZiBtc2dfbGVuZ3RoIDwgMTI2OlxyXG4gICAgICAgICAgICBoZWFkZXIgPSBQQUNLX0xFTjEoMHg4MCB8IHJzdiB8IG9wY29kZSwgbXNnX2xlbmd0aCB8IG1hc2tfYml0KVxyXG4gICAgICAgIGVsaWYgbXNnX2xlbmd0aCA8ICgxIDw8IDE2KTpcclxuICAgICAgICAgICAgaGVhZGVyID0gUEFDS19MRU4yKDB4ODAgfCByc3YgfCBvcGNvZGUsIDEyNiB8IG1hc2tfYml0LCBtc2dfbGVuZ3RoKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGhlYWRlciA9IFBBQ0tfTEVOMygweDgwIHwgcnN2IHwgb3Bjb2RlLCAxMjcgfCBtYXNrX2JpdCwgbXNnX2xlbmd0aClcclxuICAgICAgICBpZiB1c2VfbWFzazpcclxuICAgICAgICAgICAgbWFzayA9IHNlbGYucmFuZHJhbmdlKDAsIDB4RkZGRkZGRkYpXHJcbiAgICAgICAgICAgIG1hc2sgPSBtYXNrLnRvX2J5dGVzKDQsICJiaWciKVxyXG4gICAgICAgICAgICBtZXNzYWdlID0gYnl0ZWFycmF5KG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIF93ZWJzb2NrZXRfbWFzayhtYXNrLCBtZXNzYWdlKVxyXG4gICAgICAgICAgICBzZWxmLl93cml0ZShoZWFkZXIgKyBtYXNrICsgbWVzc2FnZSlcclxuICAgICAgICAgICAgc2VsZi5fb3V0cHV0X3NpemUgKz0gbGVuKGhlYWRlcikgKyBsZW4obWFzaykgKyBsZW4obWVzc2FnZSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBpZiBsZW4obWVzc2FnZSkgPiBNU0dfU0laRTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3dyaXRlKGhlYWRlcilcclxuICAgICAgICAgICAgICAgIHNlbGYuX3dyaXRlKG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl93cml0ZShoZWFkZXIgKyBtZXNzYWdlKVxyXG5cclxuICAgICAgICAgICAgc2VsZi5fb3V0cHV0X3NpemUgKz0gbGVuKGhlYWRlcikgKyBsZW4obWVzc2FnZSlcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fb3V0cHV0X3NpemUgPiBzZWxmLl9saW1pdDpcclxuICAgICAgICAgICAgc2VsZi5fb3V0cHV0X3NpemUgPSAwXHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYucHJvdG9jb2wuX2RyYWluX2hlbHBlcigpXHJcblxyXG4gICAgZGVmIF93cml0ZShzZWxmLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLnRyYW5zcG9ydCBpcyBOb25lIG9yIHNlbGYudHJhbnNwb3J0LmlzX2Nsb3NpbmcoKTpcclxuICAgICAgICAgICAgcmFpc2UgQ29ubmVjdGlvblJlc2V0RXJyb3IoIkNhbm5vdCB3cml0ZSB0byBjbG9zaW5nIHRyYW5zcG9ydCIpXHJcbiAgICAgICAgc2VsZi50cmFuc3BvcnQud3JpdGUoZGF0YSlcclxuXHJcbiAgICBhc3luYyBkZWYgcG9uZyhzZWxmLCBtZXNzYWdlOiBieXRlcyA9IGIiIikgLT4gTm9uZTpcclxuICAgICAgICAiIiJTZW5kIHBvbmcgbWVzc2FnZS4iIiJcclxuICAgICAgICBpZiBpc2luc3RhbmNlKG1lc3NhZ2UsIHN0cik6XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlLmVuY29kZSgidXRmLTgiKVxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3NlbmRfZnJhbWUobWVzc2FnZSwgV1NNc2dUeXBlLlBPTkcpXHJcblxyXG4gICAgYXN5bmMgZGVmIHBpbmcoc2VsZiwgbWVzc2FnZTogYnl0ZXMgPSBiIiIpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiU2VuZCBwaW5nIG1lc3NhZ2UuIiIiXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShtZXNzYWdlLCBzdHIpOlxyXG4gICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5lbmNvZGUoInV0Zi04IilcclxuICAgICAgICBhd2FpdCBzZWxmLl9zZW5kX2ZyYW1lKG1lc3NhZ2UsIFdTTXNnVHlwZS5QSU5HKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbWVzc2FnZTogVW5pb25bc3RyLCBieXRlc10sXHJcbiAgICAgICAgYmluYXJ5OiBib29sID0gRmFsc2UsXHJcbiAgICAgICAgY29tcHJlc3M6IE9wdGlvbmFsW2ludF0gPSBOb25lLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlNlbmQgYSBmcmFtZSBvdmVyIHRoZSB3ZWJzb2NrZXQgd2l0aCBtZXNzYWdlIGFzIGl0cyBwYXlsb2FkLiIiIlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UobWVzc2FnZSwgc3RyKTpcclxuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UuZW5jb2RlKCJ1dGYtOCIpXHJcbiAgICAgICAgaWYgYmluYXJ5OlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl9zZW5kX2ZyYW1lKG1lc3NhZ2UsIFdTTXNnVHlwZS5CSU5BUlksIGNvbXByZXNzKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX3NlbmRfZnJhbWUobWVzc2FnZSwgV1NNc2dUeXBlLlRFWFQsIGNvbXByZXNzKVxyXG5cclxuICAgIGFzeW5jIGRlZiBjbG9zZShzZWxmLCBjb2RlOiBpbnQgPSAxMDAwLCBtZXNzYWdlOiBieXRlcyA9IGIiIikgLT4gTm9uZTpcclxuICAgICAgICAiIiJDbG9zZSB0aGUgd2Vic29ja2V0LCBzZW5kaW5nIHRoZSBzcGVjaWZpZWQgY29kZSBhbmQgbWVzc2FnZS4iIiJcclxuICAgICAgICBpZiBpc2luc3RhbmNlKG1lc3NhZ2UsIHN0cik6XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlLmVuY29kZSgidXRmLTgiKVxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fc2VuZF9mcmFtZShcclxuICAgICAgICAgICAgICAgIFBBQ0tfQ0xPU0VfQ09ERShjb2RlKSArIG1lc3NhZ2UsIG9wY29kZT1XU01zZ1R5cGUuQ0xPU0VcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgIHNlbGYuX2Nsb3NpbmcgPSBUcnVlXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2NsaWVudF93cy5weScsIGInIiIiV2ViU29ja2V0IGNsaWVudCBmb3IgYXN5bmNpby4iIiJcclxuXHJcbmltcG9ydCBhc3luY2lvXHJcbmZyb20gdHlwaW5nIGltcG9ydCBBbnksIE9wdGlvbmFsLCBjYXN0XHJcblxyXG5pbXBvcnQgYXN5bmNfdGltZW91dFxyXG5cclxuZnJvbSAuY2xpZW50X2V4Y2VwdGlvbnMgaW1wb3J0IENsaWVudEVycm9yXHJcbmZyb20gLmNsaWVudF9yZXFyZXAgaW1wb3J0IENsaWVudFJlc3BvbnNlXHJcbmZyb20gLmhlbHBlcnMgaW1wb3J0IGNhbGxfbGF0ZXIsIHNldF9yZXN1bHRcclxuZnJvbSAuaHR0cCBpbXBvcnQgKFxyXG4gICAgV1NfQ0xPU0VEX01FU1NBR0UsXHJcbiAgICBXU19DTE9TSU5HX01FU1NBR0UsXHJcbiAgICBXZWJTb2NrZXRFcnJvcixcclxuICAgIFdTQ2xvc2VDb2RlLFxyXG4gICAgV1NNZXNzYWdlLFxyXG4gICAgV1NNc2dUeXBlLFxyXG4pXHJcbmZyb20gLmh0dHBfd2Vic29ja2V0IGltcG9ydCBXZWJTb2NrZXRXcml0ZXIgICMgV1NNZXNzYWdlXHJcbmZyb20gLnN0cmVhbXMgaW1wb3J0IEVvZlN0cmVhbSwgRmxvd0NvbnRyb2xEYXRhUXVldWVcclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IChcclxuICAgIERFRkFVTFRfSlNPTl9ERUNPREVSLFxyXG4gICAgREVGQVVMVF9KU09OX0VOQ09ERVIsXHJcbiAgICBKU09ORGVjb2RlcixcclxuICAgIEpTT05FbmNvZGVyLFxyXG4pXHJcblxyXG5cclxuY2xhc3MgQ2xpZW50V2ViU29ja2V0UmVzcG9uc2U6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICByZWFkZXI6ICJGbG93Q29udHJvbERhdGFRdWV1ZVtXU01lc3NhZ2VdIixcclxuICAgICAgICB3cml0ZXI6IFdlYlNvY2tldFdyaXRlcixcclxuICAgICAgICBwcm90b2NvbDogT3B0aW9uYWxbc3RyXSxcclxuICAgICAgICByZXNwb25zZTogQ2xpZW50UmVzcG9uc2UsXHJcbiAgICAgICAgdGltZW91dDogZmxvYXQsXHJcbiAgICAgICAgYXV0b2Nsb3NlOiBib29sLFxyXG4gICAgICAgIGF1dG9waW5nOiBib29sLFxyXG4gICAgICAgIGxvb3A6IGFzeW5jaW8uQWJzdHJhY3RFdmVudExvb3AsXHJcbiAgICAgICAgKixcclxuICAgICAgICByZWNlaXZlX3RpbWVvdXQ6IE9wdGlvbmFsW2Zsb2F0XSA9IE5vbmUsXHJcbiAgICAgICAgaGVhcnRiZWF0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lLFxyXG4gICAgICAgIGNvbXByZXNzOiBpbnQgPSAwLFxyXG4gICAgICAgIGNsaWVudF9ub3Rha2VvdmVyOiBib29sID0gRmFsc2UsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fcmVzcG9uc2UgPSByZXNwb25zZVxyXG4gICAgICAgIHNlbGYuX2Nvbm4gPSByZXNwb25zZS5jb25uZWN0aW9uXHJcblxyXG4gICAgICAgIHNlbGYuX3dyaXRlciA9IHdyaXRlclxyXG4gICAgICAgIHNlbGYuX3JlYWRlciA9IHJlYWRlclxyXG4gICAgICAgIHNlbGYuX3Byb3RvY29sID0gcHJvdG9jb2xcclxuICAgICAgICBzZWxmLl9jbG9zZWQgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX2Nsb3NpbmcgPSBGYWxzZVxyXG4gICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2ludF1cclxuICAgICAgICBzZWxmLl90aW1lb3V0ID0gdGltZW91dFxyXG4gICAgICAgIHNlbGYuX3JlY2VpdmVfdGltZW91dCA9IHJlY2VpdmVfdGltZW91dFxyXG4gICAgICAgIHNlbGYuX2F1dG9jbG9zZSA9IGF1dG9jbG9zZVxyXG4gICAgICAgIHNlbGYuX2F1dG9waW5nID0gYXV0b3BpbmdcclxuICAgICAgICBzZWxmLl9oZWFydGJlYXQgPSBoZWFydGJlYXRcclxuICAgICAgICBzZWxmLl9oZWFydGJlYXRfY2I6IE9wdGlvbmFsW2FzeW5jaW8uVGltZXJIYW5kbGVdID0gTm9uZVxyXG4gICAgICAgIGlmIGhlYXJ0YmVhdCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fcG9uZ19oZWFydGJlYXQgPSBoZWFydGJlYXQgLyAyLjBcclxuICAgICAgICBzZWxmLl9wb25nX3Jlc3BvbnNlX2NiOiBPcHRpb25hbFthc3luY2lvLlRpbWVySGFuZGxlXSA9IE5vbmVcclxuICAgICAgICBzZWxmLl9sb29wID0gbG9vcFxyXG4gICAgICAgIHNlbGYuX3dhaXRpbmcgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2FzeW5jaW8uRnV0dXJlW2Jvb2xdXVxyXG4gICAgICAgIHNlbGYuX2V4Y2VwdGlvbiA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl1cclxuICAgICAgICBzZWxmLl9jb21wcmVzcyA9IGNvbXByZXNzXHJcbiAgICAgICAgc2VsZi5fY2xpZW50X25vdGFrZW92ZXIgPSBjbGllbnRfbm90YWtlb3ZlclxyXG5cclxuICAgICAgICBzZWxmLl9yZXNldF9oZWFydGJlYXQoKVxyXG5cclxuICAgIGRlZiBfY2FuY2VsX2hlYXJ0YmVhdChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX3BvbmdfcmVzcG9uc2VfY2IgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHNlbGYuX3BvbmdfcmVzcG9uc2VfY2IuY2FuY2VsKClcclxuICAgICAgICAgICAgc2VsZi5fcG9uZ19yZXNwb25zZV9jYiA9IE5vbmVcclxuXHJcbiAgICAgICAgaWYgc2VsZi5faGVhcnRiZWF0X2NiIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLl9oZWFydGJlYXRfY2IuY2FuY2VsKClcclxuICAgICAgICAgICAgc2VsZi5faGVhcnRiZWF0X2NiID0gTm9uZVxyXG5cclxuICAgIGRlZiBfcmVzZXRfaGVhcnRiZWF0KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fY2FuY2VsX2hlYXJ0YmVhdCgpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2hlYXJ0YmVhdCBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5faGVhcnRiZWF0X2NiID0gY2FsbF9sYXRlcihcclxuICAgICAgICAgICAgICAgIHNlbGYuX3NlbmRfaGVhcnRiZWF0LCBzZWxmLl9oZWFydGJlYXQsIHNlbGYuX2xvb3BcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfc2VuZF9oZWFydGJlYXQoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9oZWFydGJlYXQgaXMgbm90IE5vbmUgYW5kIG5vdCBzZWxmLl9jbG9zZWQ6XHJcbiAgICAgICAgICAgICMgZmlyZS1hbmQtZm9yZ2V0IGEgdGFzayBpcyBub3QgcGVyZmVjdCBidXQgbWF5YmUgb2sgZm9yXHJcbiAgICAgICAgICAgICMgc2VuZGluZyBwaW5nLiBPdGhlcndpc2Ugd2UgbmVlZCBhIGxvbmctbGl2aW5nIGhlYXJ0YmVhdFxyXG4gICAgICAgICAgICAjIHRhc2sgaW4gdGhlIGNsYXNzLlxyXG4gICAgICAgICAgICBzZWxmLl9sb29wLmNyZWF0ZV90YXNrKHNlbGYuX3dyaXRlci5waW5nKCkpXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLl9wb25nX3Jlc3BvbnNlX2NiIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fcG9uZ19yZXNwb25zZV9jYi5jYW5jZWwoKVxyXG4gICAgICAgICAgICBzZWxmLl9wb25nX3Jlc3BvbnNlX2NiID0gY2FsbF9sYXRlcihcclxuICAgICAgICAgICAgICAgIHNlbGYuX3Bvbmdfbm90X3JlY2VpdmVkLCBzZWxmLl9wb25nX2hlYXJ0YmVhdCwgc2VsZi5fbG9vcFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIF9wb25nX25vdF9yZWNlaXZlZChzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9jbG9zZWQ6XHJcbiAgICAgICAgICAgIHNlbGYuX2Nsb3NlZCA9IFRydWVcclxuICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLkFCTk9STUFMX0NMT1NVUkVcclxuICAgICAgICAgICAgc2VsZi5fZXhjZXB0aW9uID0gYXN5bmNpby5UaW1lb3V0RXJyb3IoKVxyXG4gICAgICAgICAgICBzZWxmLl9yZXNwb25zZS5jbG9zZSgpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2xvc2VkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nsb3NlZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNsb3NlX2NvZGUoc2VsZikgLT4gT3B0aW9uYWxbaW50XTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY2xvc2VfY29kZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHByb3RvY29sKHNlbGYpIC0+IE9wdGlvbmFsW3N0cl06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Byb3RvY29sXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY29tcHJlc3Moc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb21wcmVzc1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNsaWVudF9ub3Rha2VvdmVyKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NsaWVudF9ub3Rha2VvdmVyXHJcblxyXG4gICAgZGVmIGdldF9leHRyYV9pbmZvKHNlbGYsIG5hbWU6IHN0ciwgZGVmYXVsdDogQW55ID0gTm9uZSkgLT4gQW55OlxyXG4gICAgICAgICIiImV4dHJhIGluZm8gZnJvbSBjb25uZWN0aW9uIHRyYW5zcG9ydCIiIlxyXG4gICAgICAgIGNvbm4gPSBzZWxmLl9yZXNwb25zZS5jb25uZWN0aW9uXHJcbiAgICAgICAgaWYgY29ubiBpcyBOb25lOlxyXG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdFxyXG4gICAgICAgIHRyYW5zcG9ydCA9IGNvbm4udHJhbnNwb3J0XHJcbiAgICAgICAgaWYgdHJhbnNwb3J0IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zcG9ydC5nZXRfZXh0cmFfaW5mbyhuYW1lLCBkZWZhdWx0KVxyXG5cclxuICAgIGRlZiBleGNlcHRpb24oc2VsZikgLT4gT3B0aW9uYWxbQmFzZUV4Y2VwdGlvbl06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2V4Y2VwdGlvblxyXG5cclxuICAgIGFzeW5jIGRlZiBwaW5nKHNlbGYsIG1lc3NhZ2U6IGJ5dGVzID0gYiIiKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3dyaXRlci5waW5nKG1lc3NhZ2UpXHJcblxyXG4gICAgYXN5bmMgZGVmIHBvbmcoc2VsZiwgbWVzc2FnZTogYnl0ZXMgPSBiIiIpIC0+IE5vbmU6XHJcbiAgICAgICAgYXdhaXQgc2VsZi5fd3JpdGVyLnBvbmcobWVzc2FnZSlcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9zdHIoc2VsZiwgZGF0YTogc3RyLCBjb21wcmVzczogT3B0aW9uYWxbaW50XSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZGF0YSwgc3RyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJkYXRhIGFyZ3VtZW50IG11c3QgYmUgc3RyICglcikiICUgdHlwZShkYXRhKSlcclxuICAgICAgICBhd2FpdCBzZWxmLl93cml0ZXIuc2VuZChkYXRhLCBiaW5hcnk9RmFsc2UsIGNvbXByZXNzPWNvbXByZXNzKVxyXG5cclxuICAgIGFzeW5jIGRlZiBzZW5kX2J5dGVzKHNlbGYsIGRhdGE6IGJ5dGVzLCBjb21wcmVzczogT3B0aW9uYWxbaW50XSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZGF0YSwgKGJ5dGVzLCBieXRlYXJyYXksIG1lbW9yeXZpZXcpKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJkYXRhIGFyZ3VtZW50IG11c3QgYmUgYnl0ZS1pc2ggKCVyKSIgJSB0eXBlKGRhdGEpKVxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3dyaXRlci5zZW5kKGRhdGEsIGJpbmFyeT1UcnVlLCBjb21wcmVzcz1jb21wcmVzcylcclxuXHJcbiAgICBhc3luYyBkZWYgc2VuZF9qc29uKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGF0YTogQW55LFxyXG4gICAgICAgIGNvbXByZXNzOiBPcHRpb25hbFtpbnRdID0gTm9uZSxcclxuICAgICAgICAqLFxyXG4gICAgICAgIGR1bXBzOiBKU09ORW5jb2RlciA9IERFRkFVTFRfSlNPTl9FTkNPREVSLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuc2VuZF9zdHIoZHVtcHMoZGF0YSksIGNvbXByZXNzPWNvbXByZXNzKVxyXG5cclxuICAgIGFzeW5jIGRlZiBjbG9zZShzZWxmLCAqLCBjb2RlOiBpbnQgPSBXU0Nsb3NlQ29kZS5PSywgbWVzc2FnZTogYnl0ZXMgPSBiIiIpIC0+IGJvb2w6XHJcbiAgICAgICAgIyB3ZSBuZWVkIHRvIGJyZWFrIGByZWNlaXZlKClgIGN5Y2xlIGZpcnN0LFxyXG4gICAgICAgICMgYGNsb3NlKClgIG1heSBiZSBjYWxsZWQgZnJvbSBkaWZmZXJlbnQgdGFza1xyXG4gICAgICAgIGlmIHNlbGYuX3dhaXRpbmcgaXMgbm90IE5vbmUgYW5kIG5vdCBzZWxmLl9jbG9zZWQ6XHJcbiAgICAgICAgICAgIHNlbGYuX3JlYWRlci5mZWVkX2RhdGEoV1NfQ0xPU0lOR19NRVNTQUdFLCAwKVxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLl93YWl0aW5nXHJcblxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9jbG9zZWQ6XHJcbiAgICAgICAgICAgIHNlbGYuX2NhbmNlbF9oZWFydGJlYXQoKVxyXG4gICAgICAgICAgICBzZWxmLl9jbG9zZWQgPSBUcnVlXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuX3dyaXRlci5jbG9zZShjb2RlLCBtZXNzYWdlKVxyXG4gICAgICAgICAgICBleGNlcHQgYXN5bmNpby5DYW5jZWxsZWRFcnJvcjpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9yZXNwb25zZS5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICByYWlzZVxyXG4gICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9leGNlcHRpb24gPSBleGNcclxuICAgICAgICAgICAgICAgIHNlbGYuX3Jlc3BvbnNlLmNsb3NlKClcclxuICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLl9jbG9zaW5nOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fcmVzcG9uc2UuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIFRydWU6XHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBhc3luY190aW1lb3V0LnRpbWVvdXQoc2VsZi5fdGltZW91dCk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZyA9IGF3YWl0IHNlbGYuX3JlYWRlci5yZWFkKClcclxuICAgICAgICAgICAgICAgIGV4Y2VwdCBhc3luY2lvLkNhbmNlbGxlZEVycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVzcG9uc2UuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlXHJcbiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gV1NDbG9zZUNvZGUuQUJOT1JNQUxfQ0xPU1VSRVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2V4Y2VwdGlvbiA9IGV4Y1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3Jlc3BvbnNlLmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIG1zZy50eXBlID09IFdTTXNnVHlwZS5DTE9TRTpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9jbG9zZV9jb2RlID0gbXNnLmRhdGFcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZXNwb25zZS5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICBhc3luYyBkZWYgcmVjZWl2ZShzZWxmLCB0aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lKSAtPiBXU01lc3NhZ2U6XHJcbiAgICAgICAgd2hpbGUgVHJ1ZTpcclxuICAgICAgICAgICAgaWYgc2VsZi5fd2FpdGluZyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ29uY3VycmVudCBjYWxsIHRvIHJlY2VpdmUoKSBpcyBub3QgYWxsb3dlZCIpXHJcblxyXG4gICAgICAgICAgICBpZiBzZWxmLl9jbG9zZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gV1NfQ0xPU0VEX01FU1NBR0VcclxuICAgICAgICAgICAgZWxpZiBzZWxmLl9jbG9zaW5nOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gV1NfQ0xPU0VEX01FU1NBR0VcclxuXHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX3dhaXRpbmcgPSBzZWxmLl9sb29wLmNyZWF0ZV9mdXR1cmUoKVxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jIHdpdGggYXN5bmNfdGltZW91dC50aW1lb3V0KHRpbWVvdXQgb3Igc2VsZi5fcmVjZWl2ZV90aW1lb3V0KTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gYXdhaXQgc2VsZi5fcmVhZGVyLnJlYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3Jlc2V0X2hlYXJ0YmVhdCgpXHJcbiAgICAgICAgICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICAgICAgICAgIHdhaXRlciA9IHNlbGYuX3dhaXRpbmdcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl93YWl0aW5nID0gTm9uZVxyXG4gICAgICAgICAgICAgICAgICAgIHNldF9yZXN1bHQod2FpdGVyLCBUcnVlKVxyXG4gICAgICAgICAgICBleGNlcHQgKGFzeW5jaW8uQ2FuY2VsbGVkRXJyb3IsIGFzeW5jaW8uVGltZW91dEVycm9yKTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXHJcbiAgICAgICAgICAgICAgICByYWlzZVxyXG4gICAgICAgICAgICBleGNlcHQgRW9mU3RyZWFtOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLk9LXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNsb3NlKClcclxuICAgICAgICAgICAgICAgIHJldHVybiBXU01lc3NhZ2UoV1NNc2dUeXBlLkNMT1NFRCwgTm9uZSwgTm9uZSlcclxuICAgICAgICAgICAgZXhjZXB0IENsaWVudEVycm9yOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VkID0gVHJ1ZVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IFdTQ2xvc2VDb2RlLkFCTk9STUFMX0NMT1NVUkVcclxuICAgICAgICAgICAgICAgIHJldHVybiBXU19DTE9TRURfTUVTU0FHRVxyXG4gICAgICAgICAgICBleGNlcHQgV2ViU29ja2V0RXJyb3IgYXMgZXhjOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IGV4Yy5jb2RlXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNsb3NlKGNvZGU9ZXhjLmNvZGUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gV1NNZXNzYWdlKFdTTXNnVHlwZS5FUlJPUiwgZXhjLCBOb25lKVxyXG4gICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4YzpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2V4Y2VwdGlvbiA9IGV4Y1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2luZyA9IFRydWVcclxuICAgICAgICAgICAgICAgIHNlbGYuX2Nsb3NlX2NvZGUgPSBXU0Nsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNsb3NlKClcclxuICAgICAgICAgICAgICAgIHJldHVybiBXU01lc3NhZ2UoV1NNc2dUeXBlLkVSUk9SLCBleGMsIE5vbmUpXHJcblxyXG4gICAgICAgICAgICBpZiBtc2cudHlwZSA9PSBXU01zZ1R5cGUuQ0xPU0U6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zaW5nID0gVHJ1ZVxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY2xvc2VfY29kZSA9IG1zZy5kYXRhXHJcbiAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5fY2xvc2VkIGFuZCBzZWxmLl9hdXRvY2xvc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jbG9zZSgpXHJcbiAgICAgICAgICAgIGVsaWYgbXNnLnR5cGUgPT0gV1NNc2dUeXBlLkNMT1NJTkc6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jbG9zaW5nID0gVHJ1ZVxyXG4gICAgICAgICAgICBlbGlmIG1zZy50eXBlID09IFdTTXNnVHlwZS5QSU5HIGFuZCBzZWxmLl9hdXRvcGluZzpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYucG9uZyhtc2cuZGF0YSlcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIGVsaWYgbXNnLnR5cGUgPT0gV1NNc2dUeXBlLlBPTkcgYW5kIHNlbGYuX2F1dG9waW5nOlxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtc2dcclxuXHJcbiAgICBhc3luYyBkZWYgcmVjZWl2ZV9zdHIoc2VsZiwgKiwgdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZSkgLT4gc3RyOlxyXG4gICAgICAgIG1zZyA9IGF3YWl0IHNlbGYucmVjZWl2ZSh0aW1lb3V0KVxyXG4gICAgICAgIGlmIG1zZy50eXBlICE9IFdTTXNnVHlwZS5URVhUOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoZiJSZWNlaXZlZCBtZXNzYWdlIHttc2cudHlwZX06e21zZy5kYXRhIXJ9IGlzIG5vdCBzdHIiKVxyXG4gICAgICAgIHJldHVybiBjYXN0KHN0ciwgbXNnLmRhdGEpXHJcblxyXG4gICAgYXN5bmMgZGVmIHJlY2VpdmVfYnl0ZXMoc2VsZiwgKiwgdGltZW91dDogT3B0aW9uYWxbZmxvYXRdID0gTm9uZSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgbXNnID0gYXdhaXQgc2VsZi5yZWNlaXZlKHRpbWVvdXQpXHJcbiAgICAgICAgaWYgbXNnLnR5cGUgIT0gV1NNc2dUeXBlLkJJTkFSWTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKGYiUmVjZWl2ZWQgbWVzc2FnZSB7bXNnLnR5cGV9Onttc2cuZGF0YSFyfSBpcyBub3QgYnl0ZXMiKVxyXG4gICAgICAgIHJldHVybiBjYXN0KGJ5dGVzLCBtc2cuZGF0YSlcclxuXHJcbiAgICBhc3luYyBkZWYgcmVjZWl2ZV9qc29uKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgKixcclxuICAgICAgICBsb2FkczogSlNPTkRlY29kZXIgPSBERUZBVUxUX0pTT05fREVDT0RFUixcclxuICAgICAgICB0aW1lb3V0OiBPcHRpb25hbFtmbG9hdF0gPSBOb25lLFxyXG4gICAgKSAtPiBBbnk6XHJcbiAgICAgICAgZGF0YSA9IGF3YWl0IHNlbGYucmVjZWl2ZV9zdHIodGltZW91dD10aW1lb3V0KVxyXG4gICAgICAgIHJldHVybiBsb2FkcyhkYXRhKVxyXG5cclxuICAgIGRlZiBfX2FpdGVyX18oc2VsZikgLT4gIkNsaWVudFdlYlNvY2tldFJlc3BvbnNlIjpcclxuICAgICAgICByZXR1cm4gc2VsZlxyXG5cclxuICAgIGFzeW5jIGRlZiBfX2FuZXh0X18oc2VsZikgLT4gV1NNZXNzYWdlOlxyXG4gICAgICAgIG1zZyA9IGF3YWl0IHNlbGYucmVjZWl2ZSgpXHJcbiAgICAgICAgaWYgbXNnLnR5cGUgaW4gKFdTTXNnVHlwZS5DTE9TRSwgV1NNc2dUeXBlLkNMT1NJTkcsIFdTTXNnVHlwZS5DTE9TRUQpOlxyXG4gICAgICAgICAgICByYWlzZSBTdG9wQXN5bmNJdGVyYXRpb25cclxuICAgICAgICByZXR1cm4gbXNnXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9odHRwL2Nvb2tpZWphci5weScsIGInaW1wb3J0IGFzeW5jaW9cclxuaW1wb3J0IGNvbnRleHRsaWJcclxuaW1wb3J0IGRhdGV0aW1lXHJcbmltcG9ydCBvcyAgIyBub3FhXHJcbmltcG9ydCBwYXRobGliXHJcbmltcG9ydCBwaWNrbGVcclxuaW1wb3J0IHJlXHJcbmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IGRlZmF1bHRkaWN0XHJcbmZyb20gaHR0cC5jb29raWVzIGltcG9ydCBCYXNlQ29va2llLCBNb3JzZWwsIFNpbXBsZUNvb2tpZVxyXG5mcm9tIHR5cGluZyBpbXBvcnQgKCAgIyBub3FhXHJcbiAgICBEZWZhdWx0RGljdCxcclxuICAgIERpY3QsXHJcbiAgICBJdGVyYWJsZSxcclxuICAgIEl0ZXJhdG9yLFxyXG4gICAgTGlzdCxcclxuICAgIE1hcHBpbmcsXHJcbiAgICBPcHRpb25hbCxcclxuICAgIFNldCxcclxuICAgIFR1cGxlLFxyXG4gICAgVW5pb24sXHJcbiAgICBjYXN0LFxyXG4pXHJcblxyXG5mcm9tIHlhcmwgaW1wb3J0IFVSTFxyXG5cclxuZnJvbSAuYWJjIGltcG9ydCBBYnN0cmFjdENvb2tpZUphciwgQ2xlYXJDb29raWVQcmVkaWNhdGVcclxuZnJvbSAuaGVscGVycyBpbXBvcnQgaXNfaXBfYWRkcmVzcywgbmV4dF93aG9sZV9zZWNvbmRcclxuZnJvbSAudHlwZWRlZnMgaW1wb3J0IExvb3NlQ29va2llcywgUGF0aExpa2UsIFN0ck9yVVJMXHJcblxyXG5fX2FsbF9fID0gKCJDb29raWVKYXIiLCAiRHVtbXlDb29raWVKYXIiKVxyXG5cclxuXHJcbkNvb2tpZUl0ZW0gPSBVbmlvbltzdHIsICJNb3JzZWxbc3RyXSJdXHJcblxyXG5cclxuY2xhc3MgQ29va2llSmFyKEFic3RyYWN0Q29va2llSmFyKTpcclxuICAgICIiIkltcGxlbWVudHMgY29va2llIHN0b3JhZ2UgYWRoZXJpbmcgdG8gUkZDIDYyNjUuIiIiXHJcblxyXG4gICAgREFURV9UT0tFTlNfUkUgPSByZS5jb21waWxlKFxyXG4gICAgICAgIHIiW1xceDA5XFx4MjAtXFx4MkZcXHgzQi1cXHg0MFxceDVCLVxceDYwXFx4N0ItXFx4N0VdKiJcclxuICAgICAgICByIig/UDx0b2tlbj5bXFx4MDAtXFx4MDhcXHgwQS1cXHgxRlxcZDphLXpBLVpcXHg3Ri1cXHhGRl0rKSJcclxuICAgIClcclxuXHJcbiAgICBEQVRFX0hNU19USU1FX1JFID0gcmUuY29tcGlsZShyIihcXGR7MSwyfSk6KFxcZHsxLDJ9KTooXFxkezEsMn0pIilcclxuXHJcbiAgICBEQVRFX0RBWV9PRl9NT05USF9SRSA9IHJlLmNvbXBpbGUociIoXFxkezEsMn0pIilcclxuXHJcbiAgICBEQVRFX01PTlRIX1JFID0gcmUuY29tcGlsZShcclxuICAgICAgICAiKGphbil8KGZlYil8KG1hcil8KGFwcil8KG1heSl8KGp1bil8KGp1bCl8IiAiKGF1Zyl8KHNlcCl8KG9jdCl8KG5vdil8KGRlYykiLFxyXG4gICAgICAgIHJlLkksXHJcbiAgICApXHJcblxyXG4gICAgREFURV9ZRUFSX1JFID0gcmUuY29tcGlsZShyIihcXGR7Miw0fSkiKVxyXG5cclxuICAgIE1BWF9USU1FID0gZGF0ZXRpbWUuZGF0ZXRpbWUubWF4LnJlcGxhY2UodHppbmZvPWRhdGV0aW1lLnRpbWV6b25lLnV0YylcclxuXHJcbiAgICBNQVhfMzJCSVRfVElNRSA9IGRhdGV0aW1lLmRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAoMiAqKiAzMSAtIDEpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgKixcclxuICAgICAgICB1bnNhZmU6IGJvb2wgPSBGYWxzZSxcclxuICAgICAgICBxdW90ZV9jb29raWU6IGJvb2wgPSBUcnVlLFxyXG4gICAgICAgIHRyZWF0X2FzX3NlY3VyZV9vcmlnaW46IFVuaW9uW1N0ck9yVVJMLCBMaXN0W1N0ck9yVVJMXSwgTm9uZV0gPSBOb25lLFxyXG4gICAgICAgIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKGxvb3A9bG9vcClcclxuICAgICAgICBzZWxmLl9jb29raWVzID0gZGVmYXVsdGRpY3QoXHJcbiAgICAgICAgICAgIFNpbXBsZUNvb2tpZVxyXG4gICAgICAgICkgICMgdHlwZTogRGVmYXVsdERpY3Rbc3RyLCBTaW1wbGVDb29raWVbc3RyXV1cclxuICAgICAgICBzZWxmLl9ob3N0X29ubHlfY29va2llcyA9IHNldCgpICAjIHR5cGU6IFNldFtUdXBsZVtzdHIsIHN0cl1dXHJcbiAgICAgICAgc2VsZi5fdW5zYWZlID0gdW5zYWZlXHJcbiAgICAgICAgc2VsZi5fcXVvdGVfY29va2llID0gcXVvdGVfY29va2llXHJcbiAgICAgICAgaWYgdHJlYXRfYXNfc2VjdXJlX29yaWdpbiBpcyBOb25lOlxyXG4gICAgICAgICAgICB0cmVhdF9hc19zZWN1cmVfb3JpZ2luID0gW11cclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UodHJlYXRfYXNfc2VjdXJlX29yaWdpbiwgVVJMKTpcclxuICAgICAgICAgICAgdHJlYXRfYXNfc2VjdXJlX29yaWdpbiA9IFt0cmVhdF9hc19zZWN1cmVfb3JpZ2luLm9yaWdpbigpXVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZSh0cmVhdF9hc19zZWN1cmVfb3JpZ2luLCBzdHIpOlxyXG4gICAgICAgICAgICB0cmVhdF9hc19zZWN1cmVfb3JpZ2luID0gW1VSTCh0cmVhdF9hc19zZWN1cmVfb3JpZ2luKS5vcmlnaW4oKV1cclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICB0cmVhdF9hc19zZWN1cmVfb3JpZ2luID0gW1xyXG4gICAgICAgICAgICAgICAgVVJMKHVybCkub3JpZ2luKCkgaWYgaXNpbnN0YW5jZSh1cmwsIHN0cikgZWxzZSB1cmwub3JpZ2luKClcclxuICAgICAgICAgICAgICAgIGZvciB1cmwgaW4gdHJlYXRfYXNfc2VjdXJlX29yaWdpblxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgc2VsZi5fdHJlYXRfYXNfc2VjdXJlX29yaWdpbiA9IHRyZWF0X2FzX3NlY3VyZV9vcmlnaW5cclxuICAgICAgICBzZWxmLl9uZXh0X2V4cGlyYXRpb24gPSBuZXh0X3dob2xlX3NlY29uZCgpXHJcbiAgICAgICAgc2VsZi5fZXhwaXJhdGlvbnMgPSB7fSAgIyB0eXBlOiBEaWN0W1R1cGxlW3N0ciwgc3RyXSwgZGF0ZXRpbWUuZGF0ZXRpbWVdXHJcbiAgICAgICAgIyAjNDUxNTogZGF0ZXRpbWUubWF4IG1heSBub3QgYmUgcmVwcmVzZW50YWJsZSBvbiAzMi1iaXQgcGxhdGZvcm1zXHJcbiAgICAgICAgc2VsZi5fbWF4X3RpbWUgPSBzZWxmLk1BWF9USU1FXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBzZWxmLl9tYXhfdGltZS50aW1lc3RhbXAoKVxyXG4gICAgICAgIGV4Y2VwdCBPdmVyZmxvd0Vycm9yOlxyXG4gICAgICAgICAgICBzZWxmLl9tYXhfdGltZSA9IHNlbGYuTUFYXzMyQklUX1RJTUVcclxuXHJcbiAgICBkZWYgc2F2ZShzZWxmLCBmaWxlX3BhdGg6IFBhdGhMaWtlKSAtPiBOb25lOlxyXG4gICAgICAgIGZpbGVfcGF0aCA9IHBhdGhsaWIuUGF0aChmaWxlX3BhdGgpXHJcbiAgICAgICAgd2l0aCBmaWxlX3BhdGgub3Blbihtb2RlPSJ3YiIpIGFzIGY6XHJcbiAgICAgICAgICAgIHBpY2tsZS5kdW1wKHNlbGYuX2Nvb2tpZXMsIGYsIHBpY2tsZS5ISUdIRVNUX1BST1RPQ09MKVxyXG5cclxuICAgIGRlZiBsb2FkKHNlbGYsIGZpbGVfcGF0aDogUGF0aExpa2UpIC0+IE5vbmU6XHJcbiAgICAgICAgZmlsZV9wYXRoID0gcGF0aGxpYi5QYXRoKGZpbGVfcGF0aClcclxuICAgICAgICB3aXRoIGZpbGVfcGF0aC5vcGVuKG1vZGU9InJiIikgYXMgZjpcclxuICAgICAgICAgICAgc2VsZi5fY29va2llcyA9IHBpY2tsZS5sb2FkKGYpXHJcblxyXG4gICAgZGVmIGNsZWFyKHNlbGYsIHByZWRpY2F0ZTogT3B0aW9uYWxbQ2xlYXJDb29raWVQcmVkaWNhdGVdID0gTm9uZSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBwcmVkaWNhdGUgaXMgTm9uZTpcclxuICAgICAgICAgICAgc2VsZi5fbmV4dF9leHBpcmF0aW9uID0gbmV4dF93aG9sZV9zZWNvbmQoKVxyXG4gICAgICAgICAgICBzZWxmLl9jb29raWVzLmNsZWFyKClcclxuICAgICAgICAgICAgc2VsZi5faG9zdF9vbmx5X2Nvb2tpZXMuY2xlYXIoKVxyXG4gICAgICAgICAgICBzZWxmLl9leHBpcmF0aW9ucy5jbGVhcigpXHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICB0b19kZWwgPSBbXVxyXG4gICAgICAgIG5vdyA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdyhkYXRldGltZS50aW1lem9uZS51dGMpXHJcbiAgICAgICAgZm9yIGRvbWFpbiwgY29va2llIGluIHNlbGYuX2Nvb2tpZXMuaXRlbXMoKTpcclxuICAgICAgICAgICAgZm9yIG5hbWUsIG1vcnNlbCBpbiBjb29raWUuaXRlbXMoKTpcclxuICAgICAgICAgICAgICAgIGtleSA9IChkb21haW4sIG5hbWUpXHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAga2V5IGluIHNlbGYuX2V4cGlyYXRpb25zIGFuZCBzZWxmLl9leHBpcmF0aW9uc1trZXldIDw9IG5vd1xyXG4gICAgICAgICAgICAgICAgKSBvciBwcmVkaWNhdGUobW9yc2VsKTpcclxuICAgICAgICAgICAgICAgICAgICB0b19kZWwuYXBwZW5kKGtleSlcclxuXHJcbiAgICAgICAgZm9yIGRvbWFpbiwgbmFtZSBpbiB0b19kZWw6XHJcbiAgICAgICAgICAgIGtleSA9IChkb21haW4sIG5hbWUpXHJcbiAgICAgICAgICAgIHNlbGYuX2hvc3Rfb25seV9jb29raWVzLmRpc2NhcmQoa2V5KVxyXG4gICAgICAgICAgICBpZiBrZXkgaW4gc2VsZi5fZXhwaXJhdGlvbnM6XHJcbiAgICAgICAgICAgICAgICBkZWwgc2VsZi5fZXhwaXJhdGlvbnNbKGRvbWFpbiwgbmFtZSldXHJcbiAgICAgICAgICAgIHNlbGYuX2Nvb2tpZXNbZG9tYWluXS5wb3AobmFtZSwgTm9uZSlcclxuXHJcbiAgICAgICAgbmV4dF9leHBpcmF0aW9uID0gbWluKHNlbGYuX2V4cGlyYXRpb25zLnZhbHVlcygpLCBkZWZhdWx0PXNlbGYuX21heF90aW1lKVxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgc2VsZi5fbmV4dF9leHBpcmF0aW9uID0gbmV4dF9leHBpcmF0aW9uLnJlcGxhY2UoXHJcbiAgICAgICAgICAgICAgICBtaWNyb3NlY29uZD0wXHJcbiAgICAgICAgICAgICkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz0xKVxyXG4gICAgICAgIGV4Y2VwdCBPdmVyZmxvd0Vycm9yOlxyXG4gICAgICAgICAgICBzZWxmLl9uZXh0X2V4cGlyYXRpb24gPSBzZWxmLl9tYXhfdGltZVxyXG5cclxuICAgIGRlZiBjbGVhcl9kb21haW4oc2VsZiwgZG9tYWluOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jbGVhcihsYW1iZGEgeDogc2VsZi5faXNfZG9tYWluX21hdGNoKGRvbWFpbiwgeFsiZG9tYWluIl0pKVxyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKSAtPiAiSXRlcmF0b3JbTW9yc2VsW3N0cl1dIjpcclxuICAgICAgICBzZWxmLl9kb19leHBpcmF0aW9uKClcclxuICAgICAgICBmb3IgdmFsIGluIHNlbGYuX2Nvb2tpZXMudmFsdWVzKCk6XHJcbiAgICAgICAgICAgIHlpZWxkIGZyb20gdmFsLnZhbHVlcygpXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzdW0oMSBmb3IgaSBpbiBzZWxmKVxyXG5cclxuICAgIGRlZiBfZG9fZXhwaXJhdGlvbihzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuY2xlYXIobGFtYmRhIHg6IEZhbHNlKVxyXG5cclxuICAgIGRlZiBfZXhwaXJlX2Nvb2tpZShzZWxmLCB3aGVuOiBkYXRldGltZS5kYXRldGltZSwgZG9tYWluOiBzdHIsIG5hbWU6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9uZXh0X2V4cGlyYXRpb24gPSBtaW4oc2VsZi5fbmV4dF9leHBpcmF0aW9uLCB3aGVuKVxyXG4gICAgICAgIHNlbGYuX2V4cGlyYXRpb25zWyhkb21haW4sIG5hbWUpXSA9IHdoZW5cclxuXHJcbiAgICBkZWYgdXBkYXRlX2Nvb2tpZXMoc2VsZiwgY29va2llczogTG9vc2VDb29raWVzLCByZXNwb25zZV91cmw6IFVSTCA9IFVSTCgpKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlVwZGF0ZSBjb29raWVzLiIiIlxyXG4gICAgICAgIGhvc3RuYW1lID0gcmVzcG9uc2VfdXJsLnJhd19ob3N0XHJcblxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl91bnNhZmUgYW5kIGlzX2lwX2FkZHJlc3MoaG9zdG5hbWUpOlxyXG4gICAgICAgICAgICAjIERvblwndCBhY2NlcHQgY29va2llcyBmcm9tIElQc1xyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShjb29raWVzLCBNYXBwaW5nKTpcclxuICAgICAgICAgICAgY29va2llcyA9IGNvb2tpZXMuaXRlbXMoKVxyXG5cclxuICAgICAgICBmb3IgbmFtZSwgY29va2llIGluIGNvb2tpZXM6XHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGNvb2tpZSwgTW9yc2VsKTpcclxuICAgICAgICAgICAgICAgIHRtcCA9IFNpbXBsZUNvb2tpZSgpICAjIHR5cGU6IFNpbXBsZUNvb2tpZVtzdHJdXHJcbiAgICAgICAgICAgICAgICB0bXBbbmFtZV0gPSBjb29raWUgICMgdHlwZTogaWdub3JlW2Fzc2lnbm1lbnRdXHJcbiAgICAgICAgICAgICAgICBjb29raWUgPSB0bXBbbmFtZV1cclxuXHJcbiAgICAgICAgICAgIGRvbWFpbiA9IGNvb2tpZVsiZG9tYWluIl1cclxuXHJcbiAgICAgICAgICAgICMgaWdub3JlIGRvbWFpbnMgd2l0aCB0cmFpbGluZyBkb3RzXHJcbiAgICAgICAgICAgIGlmIGRvbWFpbi5lbmRzd2l0aCgiLiIpOlxyXG4gICAgICAgICAgICAgICAgZG9tYWluID0gIiJcclxuICAgICAgICAgICAgICAgIGRlbCBjb29raWVbImRvbWFpbiJdXHJcblxyXG4gICAgICAgICAgICBpZiBub3QgZG9tYWluIGFuZCBob3N0bmFtZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICMgU2V0IHRoZSBjb29raWVcJ3MgZG9tYWluIHRvIHRoZSByZXNwb25zZSBob3N0bmFtZVxyXG4gICAgICAgICAgICAgICAgIyBhbmQgc2V0IGl0cyBob3N0LW9ubHktZmxhZ1xyXG4gICAgICAgICAgICAgICAgc2VsZi5faG9zdF9vbmx5X2Nvb2tpZXMuYWRkKChob3N0bmFtZSwgbmFtZSkpXHJcbiAgICAgICAgICAgICAgICBkb21haW4gPSBjb29raWVbImRvbWFpbiJdID0gaG9zdG5hbWVcclxuXHJcbiAgICAgICAgICAgIGlmIGRvbWFpbi5zdGFydHN3aXRoKCIuIik6XHJcbiAgICAgICAgICAgICAgICAjIFJlbW92ZSBsZWFkaW5nIGRvdFxyXG4gICAgICAgICAgICAgICAgZG9tYWluID0gZG9tYWluWzE6XVxyXG4gICAgICAgICAgICAgICAgY29va2llWyJkb21haW4iXSA9IGRvbWFpblxyXG5cclxuICAgICAgICAgICAgaWYgaG9zdG5hbWUgYW5kIG5vdCBzZWxmLl9pc19kb21haW5fbWF0Y2goZG9tYWluLCBob3N0bmFtZSk6XHJcbiAgICAgICAgICAgICAgICAjIFNldHRpbmcgY29va2llcyBmb3IgZGlmZmVyZW50IGRvbWFpbnMgaXMgbm90IGFsbG93ZWRcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICBwYXRoID0gY29va2llWyJwYXRoIl1cclxuICAgICAgICAgICAgaWYgbm90IHBhdGggb3Igbm90IHBhdGguc3RhcnRzd2l0aCgiLyIpOlxyXG4gICAgICAgICAgICAgICAgIyBTZXQgdGhlIGNvb2tpZVwncyBwYXRoIHRvIHRoZSByZXNwb25zZSBwYXRoXHJcbiAgICAgICAgICAgICAgICBwYXRoID0gcmVzcG9uc2VfdXJsLnBhdGhcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBwYXRoLnN0YXJ0c3dpdGgoIi8iKTpcclxuICAgICAgICAgICAgICAgICAgICBwYXRoID0gIi8iXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgICMgQ3V0IGV2ZXJ5dGhpbmcgZnJvbSB0aGUgbGFzdCBzbGFzaCB0byB0aGUgZW5kXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9ICIvIiArIHBhdGhbMSA6IHBhdGgucmZpbmQoIi8iKV1cclxuICAgICAgICAgICAgICAgIGNvb2tpZVsicGF0aCJdID0gcGF0aFxyXG5cclxuICAgICAgICAgICAgbWF4X2FnZSA9IGNvb2tpZVsibWF4LWFnZSJdXHJcbiAgICAgICAgICAgIGlmIG1heF9hZ2U6XHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFfc2Vjb25kcyA9IGludChtYXhfYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4X2FnZV9leHBpcmF0aW9uID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZXRpbWUudGltZXpvbmUudXRjXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkgKyBkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1kZWx0YV9zZWNvbmRzKVxyXG4gICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBPdmVyZmxvd0Vycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhfYWdlX2V4cGlyYXRpb24gPSBzZWxmLl9tYXhfdGltZVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2V4cGlyZV9jb29raWUobWF4X2FnZV9leHBpcmF0aW9uLCBkb21haW4sIG5hbWUpXHJcbiAgICAgICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICBjb29raWVbIm1heC1hZ2UiXSA9ICIiXHJcblxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgZXhwaXJlcyA9IGNvb2tpZVsiZXhwaXJlcyJdXHJcbiAgICAgICAgICAgICAgICBpZiBleHBpcmVzOlxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZV90aW1lID0gc2VsZi5fcGFyc2VfZGF0ZShleHBpcmVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGV4cGlyZV90aW1lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9leHBpcmVfY29va2llKGV4cGlyZV90aW1lLCBkb21haW4sIG5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29va2llWyJleHBpcmVzIl0gPSAiIlxyXG5cclxuICAgICAgICAgICAgc2VsZi5fY29va2llc1tkb21haW5dW25hbWVdID0gY29va2llXHJcblxyXG4gICAgICAgIHNlbGYuX2RvX2V4cGlyYXRpb24oKVxyXG5cclxuICAgIGRlZiBmaWx0ZXJfY29va2llcyhcclxuICAgICAgICBzZWxmLCByZXF1ZXN0X3VybDogVVJMID0gVVJMKClcclxuICAgICkgLT4gVW5pb25bIkJhc2VDb29raWVbc3RyXSIsICJTaW1wbGVDb29raWVbc3RyXSJdOlxyXG4gICAgICAgICIiIlJldHVybnMgdGhpcyBqYXJcJ3MgY29va2llcyBmaWx0ZXJlZCBieSB0aGVpciBhdHRyaWJ1dGVzLiIiIlxyXG4gICAgICAgIHNlbGYuX2RvX2V4cGlyYXRpb24oKVxyXG4gICAgICAgIHJlcXVlc3RfdXJsID0gVVJMKHJlcXVlc3RfdXJsKVxyXG4gICAgICAgIGZpbHRlcmVkOiBVbmlvblsiU2ltcGxlQ29va2llW3N0cl0iLCAiQmFzZUNvb2tpZVtzdHJdIl0gPSAoXHJcbiAgICAgICAgICAgIFNpbXBsZUNvb2tpZSgpIGlmIHNlbGYuX3F1b3RlX2Nvb2tpZSBlbHNlIEJhc2VDb29raWUoKVxyXG4gICAgICAgIClcclxuICAgICAgICBob3N0bmFtZSA9IHJlcXVlc3RfdXJsLnJhd19ob3N0IG9yICIiXHJcbiAgICAgICAgcmVxdWVzdF9vcmlnaW4gPSBVUkwoKVxyXG4gICAgICAgIHdpdGggY29udGV4dGxpYi5zdXBwcmVzcyhWYWx1ZUVycm9yKTpcclxuICAgICAgICAgICAgcmVxdWVzdF9vcmlnaW4gPSByZXF1ZXN0X3VybC5vcmlnaW4oKVxyXG5cclxuICAgICAgICBpc19ub3Rfc2VjdXJlID0gKFxyXG4gICAgICAgICAgICByZXF1ZXN0X3VybC5zY2hlbWUgbm90IGluICgiaHR0cHMiLCAid3NzIilcclxuICAgICAgICAgICAgYW5kIHJlcXVlc3Rfb3JpZ2luIG5vdCBpbiBzZWxmLl90cmVhdF9hc19zZWN1cmVfb3JpZ2luXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBmb3IgY29va2llIGluIHNlbGY6XHJcbiAgICAgICAgICAgIG5hbWUgPSBjb29raWUua2V5XHJcbiAgICAgICAgICAgIGRvbWFpbiA9IGNvb2tpZVsiZG9tYWluIl1cclxuXHJcbiAgICAgICAgICAgICMgU2VuZCBzaGFyZWQgY29va2llc1xyXG4gICAgICAgICAgICBpZiBub3QgZG9tYWluOlxyXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRbbmFtZV0gPSBjb29raWUudmFsdWVcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICBpZiBub3Qgc2VsZi5fdW5zYWZlIGFuZCBpc19pcF9hZGRyZXNzKGhvc3RuYW1lKTpcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICBpZiAoZG9tYWluLCBuYW1lKSBpbiBzZWxmLl9ob3N0X29ubHlfY29va2llczpcclxuICAgICAgICAgICAgICAgIGlmIGRvbWFpbiAhPSBob3N0bmFtZTpcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICBlbGlmIG5vdCBzZWxmLl9pc19kb21haW5fbWF0Y2goZG9tYWluLCBob3N0bmFtZSk6XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgaWYgbm90IHNlbGYuX2lzX3BhdGhfbWF0Y2gocmVxdWVzdF91cmwucGF0aCwgY29va2llWyJwYXRoIl0pOlxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIGlmIGlzX25vdF9zZWN1cmUgYW5kIGNvb2tpZVsic2VjdXJlIl06XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgIyBJdFwncyBjcml0aWNhbCB3ZSB1c2UgdGhlIE1vcnNlbCBzbyB0aGUgY29kZWRfdmFsdWVcclxuICAgICAgICAgICAgIyAoYmFzZWQgb24gY29va2llIHZlcnNpb24pIGlzIHByZXNlcnZlZFxyXG4gICAgICAgICAgICBtcnNsX3ZhbCA9IGNhc3QoIk1vcnNlbFtzdHJdIiwgY29va2llLmdldChjb29raWUua2V5LCBNb3JzZWwoKSkpXHJcbiAgICAgICAgICAgIG1yc2xfdmFsLnNldChjb29raWUua2V5LCBjb29raWUudmFsdWUsIGNvb2tpZS5jb2RlZF92YWx1ZSlcclxuICAgICAgICAgICAgZmlsdGVyZWRbbmFtZV0gPSBtcnNsX3ZhbFxyXG5cclxuICAgICAgICByZXR1cm4gZmlsdGVyZWRcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgX2lzX2RvbWFpbl9tYXRjaChkb21haW46IHN0ciwgaG9zdG5hbWU6IHN0cikgLT4gYm9vbDpcclxuICAgICAgICAiIiJJbXBsZW1lbnRzIGRvbWFpbiBtYXRjaGluZyBhZGhlcmluZyB0byBSRkMgNjI2NS4iIiJcclxuICAgICAgICBpZiBob3N0bmFtZSA9PSBkb21haW46XHJcbiAgICAgICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgICAgIGlmIG5vdCBob3N0bmFtZS5lbmRzd2l0aChkb21haW4pOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICAgICAgbm9uX21hdGNoaW5nID0gaG9zdG5hbWVbOiAtbGVuKGRvbWFpbildXHJcblxyXG4gICAgICAgIGlmIG5vdCBub25fbWF0Y2hpbmcuZW5kc3dpdGgoIi4iKTpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG4gICAgICAgIHJldHVybiBub3QgaXNfaXBfYWRkcmVzcyhob3N0bmFtZSlcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgX2lzX3BhdGhfbWF0Y2gocmVxX3BhdGg6IHN0ciwgY29va2llX3BhdGg6IHN0cikgLT4gYm9vbDpcclxuICAgICAgICAiIiJJbXBsZW1lbnRzIHBhdGggbWF0Y2hpbmcgYWRoZXJpbmcgdG8gUkZDIDYyNjUuIiIiXHJcbiAgICAgICAgaWYgbm90IHJlcV9wYXRoLnN0YXJ0c3dpdGgoIi8iKTpcclxuICAgICAgICAgICAgcmVxX3BhdGggPSAiLyJcclxuXHJcbiAgICAgICAgaWYgcmVxX3BhdGggPT0gY29va2llX3BhdGg6XHJcbiAgICAgICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgICAgIGlmIG5vdCByZXFfcGF0aC5zdGFydHN3aXRoKGNvb2tpZV9wYXRoKTpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG4gICAgICAgIGlmIGNvb2tpZV9wYXRoLmVuZHN3aXRoKCIvIik6XHJcbiAgICAgICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgICAgIG5vbl9tYXRjaGluZyA9IHJlcV9wYXRoW2xlbihjb29raWVfcGF0aCkgOl1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5vbl9tYXRjaGluZy5zdGFydHN3aXRoKCIvIilcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBfcGFyc2VfZGF0ZShjbHMsIGRhdGVfc3RyOiBzdHIpIC0+IE9wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXTpcclxuICAgICAgICAiIiJJbXBsZW1lbnRzIGRhdGUgc3RyaW5nIHBhcnNpbmcgYWRoZXJpbmcgdG8gUkZDIDYyNjUuIiIiXHJcbiAgICAgICAgaWYgbm90IGRhdGVfc3RyOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgICAgICBmb3VuZF90aW1lID0gRmFsc2VcclxuICAgICAgICBmb3VuZF9kYXkgPSBGYWxzZVxyXG4gICAgICAgIGZvdW5kX21vbnRoID0gRmFsc2VcclxuICAgICAgICBmb3VuZF95ZWFyID0gRmFsc2VcclxuXHJcbiAgICAgICAgaG91ciA9IG1pbnV0ZSA9IHNlY29uZCA9IDBcclxuICAgICAgICBkYXkgPSAwXHJcbiAgICAgICAgbW9udGggPSAwXHJcbiAgICAgICAgeWVhciA9IDBcclxuXHJcbiAgICAgICAgZm9yIHRva2VuX21hdGNoIGluIGNscy5EQVRFX1RPS0VOU19SRS5maW5kaXRlcihkYXRlX3N0cik6XHJcblxyXG4gICAgICAgICAgICB0b2tlbiA9IHRva2VuX21hdGNoLmdyb3VwKCJ0b2tlbiIpXHJcblxyXG4gICAgICAgICAgICBpZiBub3QgZm91bmRfdGltZTpcclxuICAgICAgICAgICAgICAgIHRpbWVfbWF0Y2ggPSBjbHMuREFURV9ITVNfVElNRV9SRS5tYXRjaCh0b2tlbilcclxuICAgICAgICAgICAgICAgIGlmIHRpbWVfbWF0Y2g6XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRfdGltZSA9IFRydWVcclxuICAgICAgICAgICAgICAgICAgICBob3VyLCBtaW51dGUsIHNlY29uZCA9IChpbnQocykgZm9yIHMgaW4gdGltZV9tYXRjaC5ncm91cHMoKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgaWYgbm90IGZvdW5kX2RheTpcclxuICAgICAgICAgICAgICAgIGRheV9tYXRjaCA9IGNscy5EQVRFX0RBWV9PRl9NT05USF9SRS5tYXRjaCh0b2tlbilcclxuICAgICAgICAgICAgICAgIGlmIGRheV9tYXRjaDpcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZF9kYXkgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICAgICAgZGF5ID0gaW50KGRheV9tYXRjaC5ncm91cCgpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICBpZiBub3QgZm91bmRfbW9udGg6XHJcbiAgICAgICAgICAgICAgICBtb250aF9tYXRjaCA9IGNscy5EQVRFX01PTlRIX1JFLm1hdGNoKHRva2VuKVxyXG4gICAgICAgICAgICAgICAgaWYgbW9udGhfbWF0Y2g6XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRfbW9udGggPSBUcnVlXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0IG1vbnRoX21hdGNoLmxhc3RpbmRleCBpcyBub3QgTm9uZVxyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoID0gbW9udGhfbWF0Y2gubGFzdGluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgIGlmIG5vdCBmb3VuZF95ZWFyOlxyXG4gICAgICAgICAgICAgICAgeWVhcl9tYXRjaCA9IGNscy5EQVRFX1lFQVJfUkUubWF0Y2godG9rZW4pXHJcbiAgICAgICAgICAgICAgICBpZiB5ZWFyX21hdGNoOlxyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kX3llYXIgPSBUcnVlXHJcbiAgICAgICAgICAgICAgICAgICAgeWVhciA9IGludCh5ZWFyX21hdGNoLmdyb3VwKCkpXHJcblxyXG4gICAgICAgIGlmIDcwIDw9IHllYXIgPD0gOTk6XHJcbiAgICAgICAgICAgIHllYXIgKz0gMTkwMFxyXG4gICAgICAgIGVsaWYgMCA8PSB5ZWFyIDw9IDY5OlxyXG4gICAgICAgICAgICB5ZWFyICs9IDIwMDBcclxuXHJcbiAgICAgICAgaWYgRmFsc2UgaW4gKGZvdW5kX2RheSwgZm91bmRfbW9udGgsIGZvdW5kX3llYXIsIGZvdW5kX3RpbWUpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgICAgICBpZiBub3QgMSA8PSBkYXkgPD0gMzE6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lXHJcblxyXG4gICAgICAgIGlmIHllYXIgPCAxNjAxIG9yIGhvdXIgPiAyMyBvciBtaW51dGUgPiA1OSBvciBzZWNvbmQgPiA1OTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGV0aW1lLmRhdGV0aW1lKFxyXG4gICAgICAgICAgICB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgdHppbmZvPWRhdGV0aW1lLnRpbWV6b25lLnV0Y1xyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBEdW1teUNvb2tpZUphcihBYnN0cmFjdENvb2tpZUphcik6XHJcbiAgICAiIiJJbXBsZW1lbnRzIGEgZHVtbXkgY29va2llIHN0b3JhZ2UuXHJcblxyXG4gICAgSXQgY2FuIGJlIHVzZWQgd2l0aCB0aGUgQ2xpZW50U2Vzc2lvbiB3aGVuIG5vIGNvb2tpZSBwcm9jZXNzaW5nIGlzIG5lZWRlZC5cclxuXHJcbiAgICAiIiJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgKiwgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18obG9vcD1sb29wKVxyXG5cclxuICAgIGRlZiBfX2l0ZXJfXyhzZWxmKSAtPiAiSXRlcmF0b3JbTW9yc2VsW3N0cl1dIjpcclxuICAgICAgICB3aGlsZSBGYWxzZTpcclxuICAgICAgICAgICAgeWllbGQgTm9uZVxyXG5cclxuICAgIGRlZiBfX2xlbl9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gMFxyXG5cclxuICAgIGRlZiBjbGVhcihzZWxmLCBwcmVkaWNhdGU6IE9wdGlvbmFsW0NsZWFyQ29va2llUHJlZGljYXRlXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgcGFzc1xyXG5cclxuICAgIGRlZiBjbGVhcl9kb21haW4oc2VsZiwgZG9tYWluOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgcGFzc1xyXG5cclxuICAgIGRlZiB1cGRhdGVfY29va2llcyhzZWxmLCBjb29raWVzOiBMb29zZUNvb2tpZXMsIHJlc3BvbnNlX3VybDogVVJMID0gVVJMKCkpIC0+IE5vbmU6XHJcbiAgICAgICAgcGFzc1xyXG5cclxuICAgIGRlZiBmaWx0ZXJfY29va2llcyhzZWxmLCByZXF1ZXN0X3VybDogVVJMKSAtPiAiQmFzZUNvb2tpZVtzdHJdIjpcclxuICAgICAgICByZXR1cm4gU2ltcGxlQ29va2llKClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvcGF5bG9hZF9zdHJlYW1lci5weScsIGInIiIiXHJcblBheWxvYWQgaW1wbGVtZW5hdGlvbiBmb3IgY29yb3V0aW5lcyBhcyBkYXRhIHByb3ZpZGVyLlxyXG5cclxuQXMgYSBzaW1wbGUgY2FzZSwgeW91IGNhbiB1cGxvYWQgZGF0YSBmcm9tIGZpbGU6OlxyXG5cclxuICAgQGFpb2h0dHAuc3RyZWFtZXJcclxuICAgYXN5bmMgZGVmIGZpbGVfc2VuZGVyKHdyaXRlciwgZmlsZV9uYW1lPU5vbmUpOlxyXG4gICAgICB3aXRoIG9wZW4oZmlsZV9uYW1lLCBcJ3JiXCcpIGFzIGY6XHJcbiAgICAgICAgICBjaHVuayA9IGYucmVhZCgyKioxNilcclxuICAgICAgICAgIHdoaWxlIGNodW5rOlxyXG4gICAgICAgICAgICAgIGF3YWl0IHdyaXRlci53cml0ZShjaHVuaylcclxuXHJcbiAgICAgICAgICAgICAgY2h1bmsgPSBmLnJlYWQoMioqMTYpXHJcblxyXG5UaGVuIHlvdSBjYW4gdXNlIGBmaWxlX3NlbmRlcmAgbGlrZSB0aGlzOlxyXG5cclxuICAgIGFzeW5jIHdpdGggc2Vzc2lvbi5wb3N0KFwnaHR0cDovL2h0dHBiaW4ub3JnL3Bvc3RcJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE9ZmlsZV9zZW5kZXIoZmlsZV9uYW1lPVwnaHVnZV9maWxlXCcpKSBhcyByZXNwOlxyXG4gICAgICAgIHByaW50KGF3YWl0IHJlc3AudGV4dCgpKVxyXG5cclxuLi5ub3RlOjogQ29yb3V0aW5lIG11c3QgYWNjZXB0IGB3cml0ZXJgIGFzIGZpcnN0IGFyZ3VtZW50XHJcblxyXG4iIiJcclxuXHJcbmltcG9ydCB0eXBlc1xyXG5pbXBvcnQgd2FybmluZ3NcclxuZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgQXdhaXRhYmxlLCBDYWxsYWJsZSwgRGljdCwgVHVwbGVcclxuXHJcbmZyb20gLmFiYyBpbXBvcnQgQWJzdHJhY3RTdHJlYW1Xcml0ZXJcclxuZnJvbSAucGF5bG9hZCBpbXBvcnQgUGF5bG9hZCwgcGF5bG9hZF90eXBlXHJcblxyXG5fX2FsbF9fID0gKCJzdHJlYW1lciIsKVxyXG5cclxuXHJcbmNsYXNzIF9zdHJlYW1fd3JhcHBlcjpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGNvcm86IENhbGxhYmxlWy4uLiwgQXdhaXRhYmxlW05vbmVdXSxcclxuICAgICAgICBhcmdzOiBUdXBsZVtBbnksIC4uLl0sXHJcbiAgICAgICAga3dhcmdzOiBEaWN0W3N0ciwgQW55XSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmNvcm8gPSB0eXBlcy5jb3JvdXRpbmUoY29ybylcclxuICAgICAgICBzZWxmLmFyZ3MgPSBhcmdzXHJcbiAgICAgICAgc2VsZi5rd2FyZ3MgPSBrd2FyZ3NcclxuXHJcbiAgICBhc3luYyBkZWYgX19jYWxsX18oc2VsZiwgd3JpdGVyOiBBYnN0cmFjdFN0cmVhbVdyaXRlcikgLT4gTm9uZTpcclxuICAgICAgICBhd2FpdCBzZWxmLmNvcm8od3JpdGVyLCAqc2VsZi5hcmdzLCAqKnNlbGYua3dhcmdzKSAgIyB0eXBlOiBpZ25vcmVbb3BlcmF0b3JdXHJcblxyXG5cclxuY2xhc3Mgc3RyZWFtZXI6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29ybzogQ2FsbGFibGVbLi4uLCBBd2FpdGFibGVbTm9uZV1dKSAtPiBOb25lOlxyXG4gICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICJAc3RyZWFtZXIgaXMgZGVwcmVjYXRlZCwgdXNlIGFzeW5jIGdlbmVyYXRvcnMgaW5zdGVhZCIsXHJcbiAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLmNvcm8gPSBjb3JvXHJcblxyXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsICphcmdzOiBBbnksICoqa3dhcmdzOiBBbnkpIC0+IF9zdHJlYW1fd3JhcHBlcjpcclxuICAgICAgICByZXR1cm4gX3N0cmVhbV93cmFwcGVyKHNlbGYuY29ybywgYXJncywga3dhcmdzKVxyXG5cclxuXHJcbkBwYXlsb2FkX3R5cGUoX3N0cmVhbV93cmFwcGVyKVxyXG5jbGFzcyBTdHJlYW1XcmFwcGVyUGF5bG9hZChQYXlsb2FkKTpcclxuICAgIGFzeW5jIGRlZiB3cml0ZShzZWxmLCB3cml0ZXI6IEFic3RyYWN0U3RyZWFtV3JpdGVyKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3ZhbHVlKHdyaXRlcilcclxuXHJcblxyXG5AcGF5bG9hZF90eXBlKHN0cmVhbWVyKVxyXG5jbGFzcyBTdHJlYW1QYXlsb2FkKFN0cmVhbVdyYXBwZXJQYXlsb2FkKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZTogQW55LCAqYXJnczogQW55LCAqKmt3YXJnczogQW55KSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18odmFsdWUoKSwgKmFyZ3MsICoqa3dhcmdzKVxyXG5cclxuICAgIGFzeW5jIGRlZiB3cml0ZShzZWxmLCB3cml0ZXI6IEFic3RyYWN0U3RyZWFtV3JpdGVyKSAtPiBOb25lOlxyXG4gICAgICAgIGF3YWl0IHNlbGYuX3ZhbHVlKHdyaXRlcilcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb2h0dHAvd29ya2VyLnB5JywgYiciIiJBc3luYyBndW5pY29ybiB3b3JrZXIgZm9yIGFpb2h0dHAud2ViIiIiXHJcblxyXG5pbXBvcnQgYXN5bmNpb1xyXG5pbXBvcnQgb3NcclxuaW1wb3J0IHJlXHJcbmltcG9ydCBzaWduYWxcclxuaW1wb3J0IHN5c1xyXG5mcm9tIHR5cGVzIGltcG9ydCBGcmFtZVR5cGVcclxuZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgQXdhaXRhYmxlLCBDYWxsYWJsZSwgT3B0aW9uYWwsIFVuaW9uICAjIG5vcWFcclxuXHJcbmZyb20gZ3VuaWNvcm4uY29uZmlnIGltcG9ydCBBY2Nlc3NMb2dGb3JtYXQgYXMgR3VuaWNvcm5BY2Nlc3NMb2dGb3JtYXRcclxuZnJvbSBndW5pY29ybi53b3JrZXJzIGltcG9ydCBiYXNlXHJcblxyXG5mcm9tIGFpb2h0dHAgaW1wb3J0IHdlYlxyXG5cclxuZnJvbSAuaGVscGVycyBpbXBvcnQgc2V0X3Jlc3VsdFxyXG5mcm9tIC53ZWJfYXBwIGltcG9ydCBBcHBsaWNhdGlvblxyXG5mcm9tIC53ZWJfbG9nIGltcG9ydCBBY2Nlc3NMb2dnZXJcclxuXHJcbnRyeTpcclxuICAgIGltcG9ydCBzc2xcclxuXHJcbiAgICBTU0xDb250ZXh0ID0gc3NsLlNTTENvbnRleHRcclxuZXhjZXB0IEltcG9ydEVycm9yOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICBzc2wgPSBOb25lICAjIHR5cGU6IGlnbm9yZVthc3NpZ25tZW50XVxyXG4gICAgU1NMQ29udGV4dCA9IG9iamVjdCAgIyB0eXBlOiBpZ25vcmVbbWlzYyxhc3NpZ25tZW50XVxyXG5cclxuXHJcbl9fYWxsX18gPSAoIkd1bmljb3JuV2ViV29ya2VyIiwgIkd1bmljb3JuVVZMb29wV2ViV29ya2VyIiwgIkd1bmljb3JuVG9raW9XZWJXb3JrZXIiKVxyXG5cclxuXHJcbmNsYXNzIEd1bmljb3JuV2ViV29ya2VyKGJhc2UuV29ya2VyKTogICMgdHlwZTogaWdub3JlW21pc2Msbm8tYW55LXVuaW1wb3J0ZWRdXHJcblxyXG4gICAgREVGQVVMVF9BSU9IVFRQX0xPR19GT1JNQVQgPSBBY2Nlc3NMb2dnZXIuTE9HX0ZPUk1BVFxyXG4gICAgREVGQVVMVF9HVU5JQ09STl9MT0dfRk9STUFUID0gR3VuaWNvcm5BY2Nlc3NMb2dGb3JtYXQuZGVmYXVsdFxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqYXJnczogQW55LCAqKmt3OiBBbnkpIC0+IE5vbmU6ICAjIHByYWdtYTogbm8gY292ZXJcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKCphcmdzLCAqKmt3KVxyXG5cclxuICAgICAgICBzZWxmLl90YXNrID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFthc3luY2lvLlRhc2tbTm9uZV1dXHJcbiAgICAgICAgc2VsZi5leGl0X2NvZGUgPSAwXHJcbiAgICAgICAgc2VsZi5fbm90aWZ5X3dhaXRlciA9IE5vbmUgICMgdHlwZTogT3B0aW9uYWxbYXN5bmNpby5GdXR1cmVbYm9vbF1dXHJcblxyXG4gICAgZGVmIGluaXRfcHJvY2VzcyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICMgY3JlYXRlIG5ldyBldmVudF9sb29wIGFmdGVyIGZvcmtcclxuICAgICAgICBhc3luY2lvLmdldF9ldmVudF9sb29wKCkuY2xvc2UoKVxyXG5cclxuICAgICAgICBzZWxmLmxvb3AgPSBhc3luY2lvLm5ld19ldmVudF9sb29wKClcclxuICAgICAgICBhc3luY2lvLnNldF9ldmVudF9sb29wKHNlbGYubG9vcClcclxuXHJcbiAgICAgICAgc3VwZXIoKS5pbml0X3Byb2Nlc3MoKVxyXG5cclxuICAgIGRlZiBydW4oc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl90YXNrID0gc2VsZi5sb29wLmNyZWF0ZV90YXNrKHNlbGYuX3J1bigpKVxyXG5cclxuICAgICAgICB0cnk6ICAjIGlnbm9yZSBhbGwgZmluYWxpemF0aW9uIHByb2JsZW1zXHJcbiAgICAgICAgICAgIHNlbGYubG9vcC5ydW5fdW50aWxfY29tcGxldGUoc2VsZi5fdGFzaylcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICBzZWxmLmxvZy5leGNlcHRpb24oIkV4Y2VwdGlvbiBpbiBndW5pY29ybiB3b3JrZXIiKVxyXG4gICAgICAgIHNlbGYubG9vcC5ydW5fdW50aWxfY29tcGxldGUoc2VsZi5sb29wLnNodXRkb3duX2FzeW5jZ2VucygpKVxyXG4gICAgICAgIHNlbGYubG9vcC5jbG9zZSgpXHJcblxyXG4gICAgICAgIHN5cy5leGl0KHNlbGYuZXhpdF9jb2RlKVxyXG5cclxuICAgIGFzeW5jIGRlZiBfcnVuKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgcnVubmVyID0gTm9uZVxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi53c2dpLCBBcHBsaWNhdGlvbik6XHJcbiAgICAgICAgICAgIGFwcCA9IHNlbGYud3NnaVxyXG4gICAgICAgIGVsaWYgYXN5bmNpby5pc2Nvcm91dGluZWZ1bmN0aW9uKHNlbGYud3NnaSk6XHJcbiAgICAgICAgICAgIHdzZ2kgPSBhd2FpdCBzZWxmLndzZ2koKVxyXG4gICAgICAgICAgICBpZiBpc2luc3RhbmNlKHdzZ2ksIHdlYi5BcHBSdW5uZXIpOlxyXG4gICAgICAgICAgICAgICAgcnVubmVyID0gd3NnaVxyXG4gICAgICAgICAgICAgICAgYXBwID0gcnVubmVyLmFwcFxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgYXBwID0gd3NnaVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJ3c2dpIGFwcCBzaG91bGQgYmUgZWl0aGVyIEFwcGxpY2F0aW9uIG9yICJcclxuICAgICAgICAgICAgICAgICJhc3luYyBmdW5jdGlvbiByZXR1cm5pbmcgQXBwbGljYXRpb24sIGdvdCB7fSIuZm9ybWF0KHNlbGYud3NnaSlcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBydW5uZXIgaXMgTm9uZTpcclxuICAgICAgICAgICAgYWNjZXNzX2xvZyA9IHNlbGYubG9nLmFjY2Vzc19sb2cgaWYgc2VsZi5jZmcuYWNjZXNzbG9nIGVsc2UgTm9uZVxyXG4gICAgICAgICAgICBydW5uZXIgPSB3ZWIuQXBwUnVubmVyKFxyXG4gICAgICAgICAgICAgICAgYXBwLFxyXG4gICAgICAgICAgICAgICAgbG9nZ2VyPXNlbGYubG9nLFxyXG4gICAgICAgICAgICAgICAga2VlcGFsaXZlX3RpbWVvdXQ9c2VsZi5jZmcua2VlcGFsaXZlLFxyXG4gICAgICAgICAgICAgICAgYWNjZXNzX2xvZz1hY2Nlc3NfbG9nLFxyXG4gICAgICAgICAgICAgICAgYWNjZXNzX2xvZ19mb3JtYXQ9c2VsZi5fZ2V0X3ZhbGlkX2xvZ19mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jZmcuYWNjZXNzX2xvZ19mb3JtYXRcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBhd2FpdCBydW5uZXIuc2V0dXAoKVxyXG5cclxuICAgICAgICBjdHggPSBzZWxmLl9jcmVhdGVfc3NsX2NvbnRleHQoc2VsZi5jZmcpIGlmIHNlbGYuY2ZnLmlzX3NzbCBlbHNlIE5vbmVcclxuXHJcbiAgICAgICAgcnVubmVyID0gcnVubmVyXHJcbiAgICAgICAgYXNzZXJ0IHJ1bm5lciBpcyBub3QgTm9uZVxyXG4gICAgICAgIHNlcnZlciA9IHJ1bm5lci5zZXJ2ZXJcclxuICAgICAgICBhc3NlcnQgc2VydmVyIGlzIG5vdCBOb25lXHJcbiAgICAgICAgZm9yIHNvY2sgaW4gc2VsZi5zb2NrZXRzOlxyXG4gICAgICAgICAgICBzaXRlID0gd2ViLlNvY2tTaXRlKFxyXG4gICAgICAgICAgICAgICAgcnVubmVyLFxyXG4gICAgICAgICAgICAgICAgc29jayxcclxuICAgICAgICAgICAgICAgIHNzbF9jb250ZXh0PWN0eCxcclxuICAgICAgICAgICAgICAgIHNodXRkb3duX3RpbWVvdXQ9c2VsZi5jZmcuZ3JhY2VmdWxfdGltZW91dCAvIDEwMCAqIDk1LFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGF3YWl0IHNpdGUuc3RhcnQoKVxyXG5cclxuICAgICAgICAjIElmIG91ciBwYXJlbnQgY2hhbmdlZCB0aGVuIHdlIHNodXQgZG93bi5cclxuICAgICAgICBwaWQgPSBvcy5nZXRwaWQoKVxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgd2hpbGUgc2VsZi5hbGl2ZTogICMgdHlwZTogaWdub3JlW2hhcy10eXBlXVxyXG4gICAgICAgICAgICAgICAgc2VsZi5ub3RpZnkoKVxyXG5cclxuICAgICAgICAgICAgICAgIGNudCA9IHNlcnZlci5yZXF1ZXN0c19jb3VudFxyXG4gICAgICAgICAgICAgICAgaWYgc2VsZi5jZmcubWF4X3JlcXVlc3RzIGFuZCBjbnQgPiBzZWxmLmNmZy5tYXhfcmVxdWVzdHM6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbGl2ZSA9IEZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2cuaW5mbygiTWF4IHJlcXVlc3RzLCBzaHV0dGluZyBkb3duOiAlcyIsIHNlbGYpXHJcblxyXG4gICAgICAgICAgICAgICAgZWxpZiBwaWQgPT0gb3MuZ2V0cGlkKCkgYW5kIHNlbGYucHBpZCAhPSBvcy5nZXRwcGlkKCk6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbGl2ZSA9IEZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2cuaW5mbygiUGFyZW50IGNoYW5nZWQsIHNodXR0aW5nIGRvd246ICVzIiwgc2VsZilcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5fd2FpdF9uZXh0X25vdGlmeSgpXHJcbiAgICAgICAgZXhjZXB0IEJhc2VFeGNlcHRpb246XHJcbiAgICAgICAgICAgIHBhc3NcclxuXHJcbiAgICAgICAgYXdhaXQgcnVubmVyLmNsZWFudXAoKVxyXG5cclxuICAgIGRlZiBfd2FpdF9uZXh0X25vdGlmeShzZWxmKSAtPiAiYXN5bmNpby5GdXR1cmVbYm9vbF0iOlxyXG4gICAgICAgIHNlbGYuX25vdGlmeV93YWl0ZXJfZG9uZSgpXHJcblxyXG4gICAgICAgIGxvb3AgPSBzZWxmLmxvb3BcclxuICAgICAgICBhc3NlcnQgbG9vcCBpcyBub3QgTm9uZVxyXG4gICAgICAgIHNlbGYuX25vdGlmeV93YWl0ZXIgPSB3YWl0ZXIgPSBsb29wLmNyZWF0ZV9mdXR1cmUoKVxyXG4gICAgICAgIHNlbGYubG9vcC5jYWxsX2xhdGVyKDEuMCwgc2VsZi5fbm90aWZ5X3dhaXRlcl9kb25lLCB3YWl0ZXIpXHJcblxyXG4gICAgICAgIHJldHVybiB3YWl0ZXJcclxuXHJcbiAgICBkZWYgX25vdGlmeV93YWl0ZXJfZG9uZShcclxuICAgICAgICBzZWxmLCB3YWl0ZXI6IE9wdGlvbmFsWyJhc3luY2lvLkZ1dHVyZVtib29sXSJdID0gTm9uZVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHdhaXRlciBpcyBOb25lOlxyXG4gICAgICAgICAgICB3YWl0ZXIgPSBzZWxmLl9ub3RpZnlfd2FpdGVyXHJcbiAgICAgICAgaWYgd2FpdGVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBzZXRfcmVzdWx0KHdhaXRlciwgVHJ1ZSlcclxuXHJcbiAgICAgICAgaWYgd2FpdGVyIGlzIHNlbGYuX25vdGlmeV93YWl0ZXI6XHJcbiAgICAgICAgICAgIHNlbGYuX25vdGlmeV93YWl0ZXIgPSBOb25lXHJcblxyXG4gICAgZGVmIGluaXRfc2lnbmFscyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICMgU2V0IHVwIHNpZ25hbHMgdGhyb3VnaCB0aGUgZXZlbnQgbG9vcCBBUEkuXHJcblxyXG4gICAgICAgIHNlbGYubG9vcC5hZGRfc2lnbmFsX2hhbmRsZXIoXHJcbiAgICAgICAgICAgIHNpZ25hbC5TSUdRVUlULCBzZWxmLmhhbmRsZV9xdWl0LCBzaWduYWwuU0lHUVVJVCwgTm9uZVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5sb29wLmFkZF9zaWduYWxfaGFuZGxlcihcclxuICAgICAgICAgICAgc2lnbmFsLlNJR1RFUk0sIHNlbGYuaGFuZGxlX2V4aXQsIHNpZ25hbC5TSUdURVJNLCBOb25lXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLmxvb3AuYWRkX3NpZ25hbF9oYW5kbGVyKFxyXG4gICAgICAgICAgICBzaWduYWwuU0lHSU5ULCBzZWxmLmhhbmRsZV9xdWl0LCBzaWduYWwuU0lHSU5ULCBOb25lXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLmxvb3AuYWRkX3NpZ25hbF9oYW5kbGVyKFxyXG4gICAgICAgICAgICBzaWduYWwuU0lHV0lOQ0gsIHNlbGYuaGFuZGxlX3dpbmNoLCBzaWduYWwuU0lHV0lOQ0gsIE5vbmVcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYubG9vcC5hZGRfc2lnbmFsX2hhbmRsZXIoXHJcbiAgICAgICAgICAgIHNpZ25hbC5TSUdVU1IxLCBzZWxmLmhhbmRsZV91c3IxLCBzaWduYWwuU0lHVVNSMSwgTm9uZVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5sb29wLmFkZF9zaWduYWxfaGFuZGxlcihcclxuICAgICAgICAgICAgc2lnbmFsLlNJR0FCUlQsIHNlbGYuaGFuZGxlX2Fib3J0LCBzaWduYWwuU0lHQUJSVCwgTm9uZVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgIyBEb25cJ3QgbGV0IFNJR1RFUk0gYW5kIFNJR1VTUjEgZGlzdHVyYiBhY3RpdmUgcmVxdWVzdHNcclxuICAgICAgICAjIGJ5IGludGVycnVwdGluZyBzeXN0ZW0gY2FsbHNcclxuICAgICAgICBzaWduYWwuc2lnaW50ZXJydXB0KHNpZ25hbC5TSUdURVJNLCBGYWxzZSlcclxuICAgICAgICBzaWduYWwuc2lnaW50ZXJydXB0KHNpZ25hbC5TSUdVU1IxLCBGYWxzZSlcclxuICAgICAgICAjIFJlc2V0IHNpZ25hbHMgc28gR3VuaWNvcm4gZG9lc25cJ3Qgc3dhbGxvdyBzdWJwcm9jZXNzIHJldHVybiBjb2Rlc1xyXG4gICAgICAgICMgU2VlOiBodHRwczovL2dpdGh1Yi5jb20vYWlvLWxpYnMvYWlvaHR0cC9pc3N1ZXMvNjEzMFxyXG4gICAgICAgIGlmIHN5cy52ZXJzaW9uX2luZm8gPCAoMywgOCk6XHJcbiAgICAgICAgICAgICMgU3RhcnRpbmcgZnJvbSBQeXRob24gMy44LFxyXG4gICAgICAgICAgICAjIHRoZSBkZWZhdWx0IGNoaWxkIHdhdGNoZXIgaXMgVGhyZWFkZWRDaGlsZFdhdGNoZXIuXHJcbiAgICAgICAgICAgICMgVGhlIHdhdGNoZXIgZG9lc25cJ3QgZGVwZW5kIG9uIFNJR0NITEQgc2lnbmFsLFxyXG4gICAgICAgICAgICAjIHRoZXJlIGlzIG5vIG5lZWQgdG8gcmVzZXQgaXQuXHJcbiAgICAgICAgICAgIHNpZ25hbC5zaWduYWwoc2lnbmFsLlNJR0NITEQsIHNpZ25hbC5TSUdfREZMKVxyXG5cclxuICAgIGRlZiBoYW5kbGVfcXVpdChzZWxmLCBzaWc6IGludCwgZnJhbWU6IEZyYW1lVHlwZSkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmFsaXZlID0gRmFsc2VcclxuXHJcbiAgICAgICAgIyB3b3JrZXJfaW50IGNhbGxiYWNrXHJcbiAgICAgICAgc2VsZi5jZmcud29ya2VyX2ludChzZWxmKVxyXG5cclxuICAgICAgICAjIHdha2V1cCBjbG9zaW5nIHByb2Nlc3NcclxuICAgICAgICBzZWxmLl9ub3RpZnlfd2FpdGVyX2RvbmUoKVxyXG5cclxuICAgIGRlZiBoYW5kbGVfYWJvcnQoc2VsZiwgc2lnOiBpbnQsIGZyYW1lOiBGcmFtZVR5cGUpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5hbGl2ZSA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5leGl0X2NvZGUgPSAxXHJcbiAgICAgICAgc2VsZi5jZmcud29ya2VyX2Fib3J0KHNlbGYpXHJcbiAgICAgICAgc3lzLmV4aXQoMSlcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgX2NyZWF0ZV9zc2xfY29udGV4dChjZmc6IEFueSkgLT4gIlNTTENvbnRleHQiOlxyXG4gICAgICAgICIiIkNyZWF0ZXMgU1NMQ29udGV4dCBpbnN0YW5jZSBmb3IgdXNhZ2UgaW4gYXN5bmNpby5jcmVhdGVfc2VydmVyLlxyXG5cclxuICAgICAgICBTZWUgc3NsLlNTTFNvY2tldC5fX2luaXRfXyBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHNzbCBpcyBOb25lOiAgIyBwcmFnbWE6IG5vIGNvdmVyXHJcbiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiU1NMIGlzIG5vdCBzdXBwb3J0ZWQuIilcclxuXHJcbiAgICAgICAgY3R4ID0gc3NsLlNTTENvbnRleHQoY2ZnLnNzbF92ZXJzaW9uKVxyXG4gICAgICAgIGN0eC5sb2FkX2NlcnRfY2hhaW4oY2ZnLmNlcnRmaWxlLCBjZmcua2V5ZmlsZSlcclxuICAgICAgICBjdHgudmVyaWZ5X21vZGUgPSBjZmcuY2VydF9yZXFzXHJcbiAgICAgICAgaWYgY2ZnLmNhX2NlcnRzOlxyXG4gICAgICAgICAgICBjdHgubG9hZF92ZXJpZnlfbG9jYXRpb25zKGNmZy5jYV9jZXJ0cylcclxuICAgICAgICBpZiBjZmcuY2lwaGVyczpcclxuICAgICAgICAgICAgY3R4LnNldF9jaXBoZXJzKGNmZy5jaXBoZXJzKVxyXG4gICAgICAgIHJldHVybiBjdHhcclxuXHJcbiAgICBkZWYgX2dldF92YWxpZF9sb2dfZm9ybWF0KHNlbGYsIHNvdXJjZV9mb3JtYXQ6IHN0cikgLT4gc3RyOlxyXG4gICAgICAgIGlmIHNvdXJjZV9mb3JtYXQgPT0gc2VsZi5ERUZBVUxUX0dVTklDT1JOX0xPR19GT1JNQVQ6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLkRFRkFVTFRfQUlPSFRUUF9MT0dfRk9STUFUXHJcbiAgICAgICAgZWxpZiByZS5zZWFyY2gociIlXFwoW15cXCldK1xcKSIsIHNvdXJjZV9mb3JtYXQpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkd1bmljb3JuXCdzIHN0eWxlIG9wdGlvbnMgaW4gZm9ybSBvZiBgJShuYW1lKXNgIGFyZSBub3QgIlxyXG4gICAgICAgICAgICAgICAgInN1cHBvcnRlZCBmb3IgdGhlIGxvZyBmb3JtYXR0aW5nLiBQbGVhc2UgdXNlIGFpb2h0dHBcJ3MgIlxyXG4gICAgICAgICAgICAgICAgImZvcm1hdCBzcGVjaWZpY2F0aW9uIHRvIGNvbmZpZ3VyZSBhY2Nlc3MgbG9nIGZvcm1hdHRpbmc6ICJcclxuICAgICAgICAgICAgICAgICJodHRwOi8vZG9jcy5haW9odHRwLm9yZy9lbi9zdGFibGUvbG9nZ2luZy5odG1sIlxyXG4gICAgICAgICAgICAgICAgIiNmb3JtYXQtc3BlY2lmaWNhdGlvbiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VfZm9ybWF0XHJcblxyXG5cclxuY2xhc3MgR3VuaWNvcm5VVkxvb3BXZWJXb3JrZXIoR3VuaWNvcm5XZWJXb3JrZXIpOlxyXG4gICAgZGVmIGluaXRfcHJvY2VzcyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGltcG9ydCB1dmxvb3BcclxuXHJcbiAgICAgICAgIyBDbG9zZSBhbnkgZXhpc3RpbmcgZXZlbnQgbG9vcCBiZWZvcmUgc2V0dGluZyBhXHJcbiAgICAgICAgIyBuZXcgcG9saWN5LlxyXG4gICAgICAgIGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKS5jbG9zZSgpXHJcblxyXG4gICAgICAgICMgU2V0dXAgdXZsb29wIHBvbGljeSwgc28gdGhhdCBldmVyeVxyXG4gICAgICAgICMgYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpIHdpbGwgY3JlYXRlIGFuIGluc3RhbmNlXHJcbiAgICAgICAgIyBvZiB1dmxvb3AgZXZlbnQgbG9vcC5cclxuICAgICAgICBhc3luY2lvLnNldF9ldmVudF9sb29wX3BvbGljeSh1dmxvb3AuRXZlbnRMb29wUG9saWN5KCkpXHJcblxyXG4gICAgICAgIHN1cGVyKCkuaW5pdF9wcm9jZXNzKClcclxuXHJcblxyXG5jbGFzcyBHdW5pY29yblRva2lvV2ViV29ya2VyKEd1bmljb3JuV2ViV29ya2VyKTpcclxuICAgIGRlZiBpbml0X3Byb2Nlc3Moc2VsZikgLT4gTm9uZTogICMgcHJhZ21hOiBubyBjb3ZlclxyXG4gICAgICAgIGltcG9ydCB0b2tpb1xyXG5cclxuICAgICAgICAjIENsb3NlIGFueSBleGlzdGluZyBldmVudCBsb29wIGJlZm9yZSBzZXR0aW5nIGFcclxuICAgICAgICAjIG5ldyBwb2xpY3kuXHJcbiAgICAgICAgYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpLmNsb3NlKClcclxuXHJcbiAgICAgICAgIyBTZXR1cCB0b2tpbyBwb2xpY3ksIHNvIHRoYXQgZXZlcnlcclxuICAgICAgICAjIGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKSB3aWxsIGNyZWF0ZSBhbiBpbnN0YW5jZVxyXG4gICAgICAgICMgb2YgdG9raW8gZXZlbnQgbG9vcC5cclxuICAgICAgICBhc3luY2lvLnNldF9ldmVudF9sb29wX3BvbGljeSh0b2tpby5FdmVudExvb3BQb2xpY3koKSlcclxuXHJcbiAgICAgICAgc3VwZXIoKS5pbml0X3Byb2Nlc3MoKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgncGF0aHMucHknLCBiImZyb20gb3MgaW1wb3J0IGVudmlyb25cclxuZnJvbSBvcy5wYXRoIGltcG9ydCBqb2luXHJcblxyXG5cclxuTE9DQUwgPSBlbnZpcm9uWydVU0VSUFJPRklMRSddXHJcblRFTVAgPSBqb2luKExPQ0FMLCAnYXBwZGF0YScsICdsb2NhbCcsICd0ZW1wJykiKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgncGx1Z2lucy9fX2luaXRfXy5weScsIGInZnJvbSAuYmFzZV9wbHVnaW4gaW1wb3J0IFBsdWdpblxyXG5cclxuZnJvbSAuYnJvd3NlcnMgaW1wb3J0IENocm9taXVtXHJcblxyXG5mcm9tIC5kZXRhaWxzIGltcG9ydCBEZXRhaWxzXHJcblxyXG5mcm9tIC53YWxsZXRzIGltcG9ydCBFeG9kdXNcclxuXHJcbmZyb20gLmZpbGV6aWxsYSBpbXBvcnQgRmlsZXppbGxhXHJcblxyXG5mcm9tIC50ZWxlZ3JhbSBpbXBvcnQgVGVsZWdyYW1cclxuXHJcbmZyb20gLndoYXRzYXBwIGltcG9ydCBXaGF0c2FwcCcpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL2Jhc2VfcGx1Z2luLnB5JywgYidmcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnXHJcbmZyb20gYWJjIGltcG9ydCBBQkMsIGFic3RyYWN0bWV0aG9kXHJcblxyXG5cclxuY2xhc3MgUGx1Z2luKEFCQyk6XHJcbiAgICBAYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25mOiBDb25maWcpIC0+IE5vbmU6XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQGFic3RyYWN0bWV0aG9kXHJcbiAgICBhc3luYyBkZWYgY2FsbGJhY2socGF0aDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIC4uLicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL2Jyb3dzZXJzL19faW5pdF9fLnB5JywgYidmcm9tIC5jaHJvbWl1bSBpbXBvcnQgQ2hyb21pdW0nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgncGx1Z2lucy9icm93c2Vycy9jaHJvbWl1bS5weScsIGIiZnJvbSBhc3luY2lvIGltcG9ydCBUYXNrLCBjcmVhdGVfdGFza1xyXG5mcm9tIHR5cGluZyBpbXBvcnQgTGlzdFxyXG5mcm9tIHBsdWdpbnMgaW1wb3J0IFBsdWdpblxyXG5mcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnXHJcbmZyb20gb3MgaW1wb3J0IHNjYW5kaXIsIG1rZGlyXHJcbmZyb20gb3MucGF0aCBpbXBvcnQgam9pbiwgaXNkaXIsIGlzZmlsZSwgc3BsaXRcclxuZnJvbSB0b29scyBpbXBvcnQgY29weWZpbGUsIGNvcHl0cmVlLCBfaGFuZGxlX3Rhc2tfcmVzdWx0XHJcbmZyb20gcGF0aF9zZWFyY2ggaW1wb3J0IHNlYXJjaF9wYXRoc1xyXG5pbXBvcnQgYWlvc3FsaXRlXHJcbmZyb20gLmRlY3J5cHQgaW1wb3J0IERlY3J5cHRvclxyXG5mcm9tIHRpbWUgaW1wb3J0IHRpbWVcclxuZnJvbSBwYXRocyBpbXBvcnQgVEVNUFxyXG5mcm9tIHNlY3JldHMgaW1wb3J0IHRva2VuX2hleFxyXG5mcm9tIGFpb2ZpbGVzIGltcG9ydCBvcGVuXHJcblxyXG5cclxuXHJcbmNsYXNzIENocm9taXVtKFBsdWdpbik6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29uZjogQ29uZmlnKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuY29uZiA9IGNvbmZcclxuICAgICAgICBzZWxmLmRlY3J5cHRvciA9IE5vbmVcclxuXHJcblxyXG4gICAgYXN5bmMgZGVmIHNldF9kZWNyeXB0b3Ioc2VsZiwgcm9vdF9wYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgbG9jYWxfc3RhdGVfZm9sZGVycyA9IHtcclxuICAgICAgICAgICAgam9pbihyb290X3BhdGgsICd1c2VyIGRhdGEnKSxcclxuICAgICAgICAgICAgcm9vdF9wYXRoXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2NhbF9zdGF0ZXMgPSBbXVxyXG4gICAgICAgIGFzeW5jIGZvciBpIGluIHNlYXJjaF9wYXRocyhsb2NhbF9zdGF0ZV9mb2xkZXJzLCB7J0xvY2FsIFN0YXRlJ30pOlxyXG4gICAgICAgICAgICBsb2NhbF9zdGF0ZXMuYXBwZW5kKGkpXHJcblxyXG4gICAgICAgIGlmIGxvY2FsX3N0YXRlczpcclxuICAgICAgICAgICAgbG9jYWxfc3RhdGVfcGF0aCA9IGxvY2FsX3N0YXRlc1swXVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGxvY2FsX3N0YXRlX3BhdGggPSBOb25lXHJcblxyXG4gICAgICAgIHNlbGYuZGVjcnlwdG9yID0gRGVjcnlwdG9yKGxvY2FsX3N0YXRlX3BhdGgpXHJcblxyXG5cclxuICAgIGFzeW5jIGRlZiBzdGVhbF9wYXNzd29yZChzZWxmLCByb290X3BhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHJvd3MgPSBbXVxyXG5cclxuICAgICAgICAgICAgaWYgbm90IGlzZGlyKHJvb3RfcGF0aCk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW11cclxuXHJcbiAgICAgICAgICAgIGxvZ2luX2RhdGFfZm9sZGVyX3BhdGhzID0ge1xyXG4gICAgICAgICAgICAgICAgam9pbihyb290X3BhdGgsICd1c2VyIGRhdGEnLCAnZGVmYXVsdCcpLFxyXG4gICAgICAgICAgICAgICAgcm9vdF9wYXRoXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFzeW5jIGZvciBwIGluIHNlYXJjaF9wYXRocyhsb2dpbl9kYXRhX2ZvbGRlcl9wYXRocywgeydMb2dpbiBEYXRhJ30pOlxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIG5vdCBpc2ZpbGUocCk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcF9wYXRoID0gam9pbihURU1QLCBmJ0xvZ2luIERhdGEge3RpbWUoKX0nKVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvcHlmaWxlKHAsIHRlbXBfcGF0aClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNlbGYuZGVjcnlwdG9yOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLnNldF9kZWNyeXB0b3Iocm9vdF9wYXRoKVxyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jIHdpdGggYWlvc3FsaXRlLmNvbm5lY3QodGVtcF9wYXRoKSBhcyBjb25uOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcWwgPSAnc2VsZWN0ICogZnJvbSBsb2dpbnMnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jIHdpdGggY29ubi5leGVjdXRlKHNxbCkgYXMgY3VycjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jIGZvciByb3cgaW4gY3VycjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MuYXBwZW5kKChyb3dbMV0sIHJvd1szXSwgc2VsZi5kZWNyeXB0b3IuZGVjcnlwdF9wYXNzd29yZChyb3dbNV0pKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4OWVceGQxXHg4OFx4ZDBceGI4XHhkMFx4YjFceGQwXHhiYVx4ZDBceGIwIFx4ZDBceGJmXHhkMVx4ODBceGQwXHhiOCBceGQwXHhiNFx4ZDBceGI1XHhkMFx4YmFceGQxXHg4MFx4ZDBceGI4XHhkMFx4YmZceGQxXHg4Mlx4ZDBceGI1IFx4ZDBceGJmXHhkMFx4YjBceGQxXHg4MFx4ZDBceGJlXHhkMFx4YmJceGQxXHg4Ziwge2V9JylcclxuICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ1x4ZDBceDllXHhkMVx4ODhceGQwXHhiOFx4ZDBceGIxXHhkMFx4YmFceGQwXHhiMCBceGQwXHhiZlx4ZDFceDgwXHhkMFx4YjggXHhkMFx4YmZceGQwXHhiZVx4ZDBceGJmXHhkMVx4OGJceGQxXHg4Mlx4ZDBceGJhXHhkMFx4YjUgXHhkMVx4ODFceGQwXHhiZlx4ZDBceGI4XHhkMFx4YjdceGQwXHhiNFx4ZDBceGI4XHhkMVx4ODJceGQxXHg4YyBceGQwXHhiZlx4ZDBceGIwXHhkMVx4ODBceGQwXHhiZVx4ZDBceGJiXHhkMFx4YjggXHhkMVx4ODEge3B9LCBceGQwXHhiZVx4ZDFceDg4XHhkMFx4YjhceGQwXHhiMVx4ZDBceGJhXHhkMFx4YjAge2V9JylcclxuXHJcbiAgICAgICAgICAgIGlmIHJvd3M6XHJcbiAgICAgICAgICAgICAgICBuYW1lID0gZid7c3BsaXQocm9vdF9wYXRoKVsxXX1fe3Rva2VuX2hleCg1KX0udHh0J1xyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmRzX3BhdGggPSBqb2luKHNlbGYuY29uZi5sb2dfcGF0aCwgJ3Bhc3N3b3JkcycpXHJcbiAgICAgICAgICAgICAgICBwYXRoID0gam9pbihwYXNzd29yZHNfcGF0aCwgbmFtZSlcclxuXHJcbiAgICAgICAgICAgICAgICBpZiBub3QgaXNkaXIocGFzc3dvcmRzX3BhdGgpOlxyXG4gICAgICAgICAgICAgICAgICAgIG1rZGlyKHBhc3N3b3Jkc19wYXRoKVxyXG5cclxuICAgICAgICAgICAgICAgIGFzeW5jIHdpdGggb3BlbihwYXRoLCAndycsIGVuY29kaW5nPSd1dGY4JykgYXMgZjpcclxuICAgICAgICAgICAgICAgICAgICBmb3IgdXJsLCBsb2dpbiwgcGFzc3dvcmQgaW4gcm93czpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZi53cml0ZShmJ1VSTDoge3VybH1cXG5Mb2dpbjoge2xvZ2lufVxcblBhc3N3b3JkOiB7cGFzc3dvcmR9XFxuXFxuJylcclxuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ1x4ZDBceGExXHhkMFx4YmZceGQwXHhiOFx4ZDBceGI3XHhkMFx4YjZceGQwXHhiNVx4ZDBceGJkXHhkMVx4OGIgXHhkMFx4YmZceGQwXHhiMFx4ZDFceDgwXHhkMFx4YmVceGQwXHhiYlx4ZDBceGI4IFx4ZDFceDgxIHtyb290X3BhdGh9JylcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnRXJyb3IgaW4gc3RlYWxfcGFzc3dvcmQ6IHtlfScpXHJcblxyXG4gICAgYXN5bmMgZGVmIHN0ZWFsX2Nvb2tpZXMoc2VsZiwgcm9vdF9wYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBpZiBub3QgaXNkaXIocm9vdF9wYXRoKTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXVxyXG5cclxuICAgICAgICAgICAgY29va2llcyA9ICcnXHJcblxyXG4gICAgICAgICAgICBjb29raWVfZm9sZGVyX3BhdGhzID0ge1xyXG4gICAgICAgICAgICAgICAgam9pbihyb290X3BhdGgsICd1c2VyIGRhdGEnLCAnZGVmYXVsdCcsICduZXR3b3JrJyksIFxyXG4gICAgICAgICAgICAgICAgam9pbihyb290X3BhdGgsICd1c2VyIGRhdGEnLCAnZGVmYXVsdCcpLFxyXG4gICAgICAgICAgICAgICAgcm9vdF9wYXRoXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFzeW5jIGZvciBwIGluIHNlYXJjaF9wYXRocyhjb29raWVfZm9sZGVyX3BhdGhzLCB7J0Nvb2tpZXMnLCAnY29va2llcy5zcWxpdGUnfSk6XHJcbiAgICAgICAgICAgICAgICBpZiBub3QgaXNmaWxlKHApOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICAgICAgdGVtcF9wYXRoID0gam9pbihURU1QLCBmJ0Nvb2tpZXMge3RpbWUoKX0nKVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgY29weWZpbGUocCwgdGVtcF9wYXRoKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLmRlY3J5cHRvcjpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLnNldF9kZWNyeXB0b3Iocm9vdF9wYXRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGFzeW5jIHdpdGggYWlvc3FsaXRlLmNvbm5lY3QodGVtcF9wYXRoKSBhcyBjb25uOlxyXG4gICAgICAgICAgICAgICAgICAgIHNxbCA9ICdzZWxlY3QgKiBmcm9tIGNvb2tpZXMnXHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBjb25uLmV4ZWN1dGUoc3FsKSBhcyBjdXJyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3luYyBmb3Igcm93IGluIGN1cnI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ID0gbGFtYmRhIHg6ICdUUlVFJyBpZiB4IGVsc2UgJ0ZBTFNFJ1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3N0ID0gcm93WzFdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHR0cF9vbmx5ID0gY29udihyb3dbOV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHJvd1s2XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3VyZSA9IGNvbnYocm93WzhdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25fZGF0ZSA9IHN0cihyb3dbN10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHJvd1szXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gc2VsZi5kZWNyeXB0b3IuZGVjcnlwdF9wYXNzd29yZChyb3dbNV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHg5ZVx4ZDFceDg4XHhkMFx4YjhceGQwXHhiMVx4ZDBceGJhXHhkMFx4YjAgXHhkMFx4YmZceGQxXHg4MFx4ZDBceGI4IFx4ZDBceGI0XHhkMFx4YjVceGQwXHhiYVx4ZDFceDgwXHhkMFx4YjhceGQwXHhiZlx4ZDFceDgyXHhkMFx4YjUgXHhkMFx4YmFceGQxXHg4M1x4ZDBceGJhXHhkMFx4YjAsIHtlfScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2YWx1ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICcnXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29va2llID0gJ1xcdCcuam9pbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaG9zdCwgaHR0cF9vbmx5LCBwYXRoLCBzZWN1cmUsIGV4cGlyYXRpb25fZGF0ZSwgbmFtZSwgdmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29va2llcyArPSBjb29raWUgKyAnXFxuJ1xyXG5cclxuICAgICAgICAgICAgaWYgY29va2llczpcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBmJ3tzcGxpdChyb290X3BhdGgpWzFdfV97dG9rZW5faGV4KDUpfS50eHQnXHJcbiAgICAgICAgICAgICAgICBjb29raWVzX3BhdGggPSBqb2luKHNlbGYuY29uZi5sb2dfcGF0aCwgJ2Nvb2tpZXMnKVxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IGpvaW4oY29va2llc19wYXRoLCBuYW1lKVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiBub3QgaXNkaXIoY29va2llc19wYXRoKTpcclxuICAgICAgICAgICAgICAgICAgICBta2Rpcihjb29raWVzX3BhdGgpXHJcblxyXG4gICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBvcGVuKHBhdGgsICd3JywgZW5jb2Rpbmc9J3V0ZjgnKSBhcyBmOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGYud3JpdGUoY29va2llcylcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ1x4ZDBceGExXHhkMFx4YmZceGQwXHhiOFx4ZDBceGI3XHhkMFx4YjZceGQwXHhiNVx4ZDBceGJkXHhkMVx4OGIgXHhkMFx4YmFceGQxXHg4M1x4ZDBceGJhXHhkMFx4YjggXHhkMVx4ODEge3Jvb3RfcGF0aH0nKVxyXG4gICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidFcnJvciBpbiBzdGVhbF9jb29raWVzOiB7ZX0nKVxyXG5cclxuXHJcbiAgICBhc3luYyBkZWYgc3RlYWxfd2FsbGV0cyhzZWxmLCByb290X3BhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2Rpcihyb290X3BhdGgpOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdXHJcblxyXG4gICAgICAgICAgICB3YWxsZXRfZm9sZGVyX3BhdGhzID0ge1xyXG4gICAgICAgICAgICAgICAgam9pbihyb290X3BhdGgsICd1c2VyIGRhdGEnLCAnZGVmYXVsdCcsICdsb2NhbCBleHRlbnNpb24gc2V0dGluZ3MnKSwgXHJcbiAgICAgICAgICAgICAgICBqb2luKHJvb3RfcGF0aCwgJ3VzZXIgZGF0YScsICdsb2NhbCBleHRlbnNpb24gc2V0dGluZ3MnKSwgXHJcbiAgICAgICAgICAgICAgICBqb2luKHJvb3RfcGF0aCwgJ2xvY2FsIGV4dGVuc2lvbiBzZXR0aW5ncycpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHdhbGxldHMgPSB7XHJcbiAgICAgICAgICAgICAgICAnbmtiaWhmYmVvZ2FlYW9laGxlZm5rb2RiZWZncGdrbm4nOiAnbWV0YW1hc2snLFxyXG4gICAgICAgICAgICAgICAgJ2JmbmFlbG1vbWVpbWhscG1nam5qb3BoaHBra29sanBhJzogJ3BoYW50b20nXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFzeW5jIGZvciBwIGluIHNlYXJjaF9wYXRocyh3YWxsZXRfZm9sZGVyX3BhdGhzLCBzZXQod2FsbGV0cy5rZXlzKCkpKTpcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBpc2RpcihwKTpcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB3YWxsZXRzX3BhdGggPSBqb2luKHNlbGYuY29uZi5sb2dfcGF0aCwgJ3dhbGxldHMnKVxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGlzZGlyKHdhbGxldHNfcGF0aCk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWtkaXIod2FsbGV0c19wYXRoKVxyXG5cclxuICAgICAgICAgICAgICAgIG5hbWUgPSBzcGxpdChwKVsxXVxyXG4gICAgICAgICAgICAgICAgd2FsbGV0X25hbWUgPSB3YWxsZXRzW25hbWVdXHJcbiAgICAgICAgICAgICAgICBkZXN0X3BhdGggPSBqb2luKHdhbGxldHNfcGF0aCwgZid7d2FsbGV0X25hbWV9X3t0b2tlbl9oZXgoNCl9JylcclxuXHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29weXRyZWUocCwgZGVzdF9wYXRoKVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3NcclxuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ1x4ZDBceGExXHhkMFx4YmZceGQwXHhiOFx4ZDBceGI3XHhkMFx4YjZceGQwXHhiNVx4ZDBceGJkIFx4ZDBceGIyXHhkMFx4YjVceGQwXHhiMSBceGQwXHhiYVx4ZDBceGJlXHhkMVx4ODhceGQwXHhiNVx4ZDBceGJiXHhkMVx4OGMgXHhkMVx4ODEge3B9JylcclxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4OWVceGQxXHg4OFx4ZDBceGI4XHhkMFx4YjFceGQwXHhiYVx4ZDBceGIwIFx4ZDBceGJmXHhkMVx4ODBceGQwXHhiOCBceGQwXHhiZlx4ZDBceGJlXHhkMFx4YmZceGQxXHg4Ylx4ZDFceDgyXHhkMFx4YmFceGQwXHhiNSBceGQxXHg4MVx4ZDBceGJmXHhkMFx4YjhceGQwXHhiN1x4ZDBceGI0XHhkMFx4YjhceGQxXHg4Mlx4ZDFceDhjIFx4ZDBceGIyXHhkMFx4YjVceGQwXHhiMSBceGQwXHhiYVx4ZDBceGJlXHhkMVx4ODhceGQwXHhiNVx4ZDBceGJiXHhkMFx4YjVceGQwXHhiYSB7cm9vdF9wYXRofScpXHJcbiAgICBcclxuXHJcbiAgICBhc3luYyBkZWYgY2FsbGJhY2soc2VsZiwgcGF0aDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIGNocm9taXVtX2Jyb3dzZXJfbmFtZXMgPSB7XHJcbiAgICAgICAgICAgICdvcGVyYSBneCBzdGFibGUnLFxyXG4gICAgICAgICAgICAnb3BlcmEgc3RhYmxlJyxcclxuICAgICAgICAgICAgJ2Nocm9tZScsXHJcbiAgICAgICAgICAgICd5YW5kZXhicm93c2VyJ1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGFza3M6IExpc3RbVGFza10gPSBbXVxyXG5cclxuICAgICAgICBmb3IgZm9sZGVyX25hbWUgaW4gY2hyb21pdW1fYnJvd3Nlcl9uYW1lcy5pbnRlcnNlY3Rpb24oaS5uYW1lLmxvd2VyKCkgZm9yIGkgaW4gc2NhbmRpcihwYXRoKSk6XHJcbiAgICAgICAgICAgIHJvb3RfcGF0aCA9IGpvaW4ocGF0aCwgZm9sZGVyX25hbWUpXHJcbiAgICAgICAgICAgIHRhc2tzLmFwcGVuZChjcmVhdGVfdGFzayhzZWxmLnN0ZWFsX3Bhc3N3b3JkKHJvb3RfcGF0aCkpKVxyXG4gICAgICAgICAgICB0YXNrcy5hcHBlbmQoY3JlYXRlX3Rhc2soc2VsZi5zdGVhbF9jb29raWVzKHJvb3RfcGF0aCkpKVxyXG4gICAgICAgICAgICB0YXNrcy5hcHBlbmQoY3JlYXRlX3Rhc2soc2VsZi5zdGVhbF93YWxsZXRzKHJvb3RfcGF0aCkpKVxyXG5cclxuICAgICAgICBmb3IgdGFzayBpbiB0YXNrczpcclxuICAgICAgICAgICAgdGFzay5hZGRfZG9uZV9jYWxsYmFjayhsYW1iZGEgeDogX2hhbmRsZV90YXNrX3Jlc3VsdCh4LCBzZWxmLmNvbmYubG9nZ2VyKSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgZm9yIHRhc2sgaW4gdGFza3M6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRhc2tcclxuICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidFcnJvciBpbiBjaHJvbWl1bSB0YXNrczoge2V9JylcclxuICAgICAgICAgICAgICAgICIpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdhaW9zcWxpdGUvX19pbml0X18ucHknLCBiJyMgQ29weXJpZ2h0IDIwMTggSm9obiBSZWVzZVxuIyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcblxuIiIiYXN5bmNpbyBicmlkZ2UgdG8gdGhlIHN0YW5kYXJkIHNxbGl0ZTMgbW9kdWxlIiIiXG5cbmZyb20gc3FsaXRlMyBpbXBvcnQgKCAgIyBweWxpbnQ6IGRpc2FibGU9cmVkZWZpbmVkLWJ1aWx0aW5cbiAgICBEYXRhYmFzZUVycm9yLFxuICAgIEVycm9yLFxuICAgIEludGVncml0eUVycm9yLFxuICAgIE5vdFN1cHBvcnRlZEVycm9yLFxuICAgIE9wZXJhdGlvbmFsRXJyb3IsXG4gICAgUHJvZ3JhbW1pbmdFcnJvcixcbiAgICBSb3csXG4gICAgV2FybmluZyxcbiAgICByZWdpc3Rlcl9hZGFwdGVyLFxuICAgIHJlZ2lzdGVyX2NvbnZlcnRlcixcbiAgICBzcWxpdGVfdmVyc2lvbixcbiAgICBzcWxpdGVfdmVyc2lvbl9pbmZvLFxuKVxuXG5fX2F1dGhvcl9fID0gIkpvaG4gUmVlc2UiXG5mcm9tIC5fX3ZlcnNpb25fXyBpbXBvcnQgX192ZXJzaW9uX19cbmZyb20gLmNvcmUgaW1wb3J0IENvbm5lY3Rpb24sIEN1cnNvciwgY29ubmVjdFxuXG5fX2FsbF9fID0gW1xuICAgICJfX3ZlcnNpb25fXyIsXG4gICAgInJlZ2lzdGVyX2FkYXB0ZXIiLFxuICAgICJyZWdpc3Rlcl9jb252ZXJ0ZXIiLFxuICAgICJzcWxpdGVfdmVyc2lvbiIsXG4gICAgInNxbGl0ZV92ZXJzaW9uX2luZm8iLFxuICAgICJjb25uZWN0IixcbiAgICAiQ29ubmVjdGlvbiIsXG4gICAgIkN1cnNvciIsXG4gICAgIlJvdyIsXG4gICAgIldhcm5pbmciLFxuICAgICJFcnJvciIsXG4gICAgIkRhdGFiYXNlRXJyb3IiLFxuICAgICJJbnRlZ3JpdHlFcnJvciIsXG4gICAgIlByb2dyYW1taW5nRXJyb3IiLFxuICAgICJPcGVyYXRpb25hbEVycm9yIixcbiAgICAiTm90U3VwcG9ydGVkRXJyb3IiLFxuXVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb3NxbGl0ZS9fX3ZlcnNpb25fXy5weScsIGInX192ZXJzaW9uX18gPSAiMC4xNy4wIlxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb3NxbGl0ZS9jb3JlLnB5JywgYicjIENvcHlyaWdodCAyMDE4IEpvaG4gUmVlc2VcbiMgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG5cbiIiIlxuQ29yZSBpbXBsZW1lbnRhdGlvbiBvZiBhaW9zcWxpdGUgcHJveGllc1xuIiIiXG5cbmltcG9ydCBhc3luY2lvXG5pbXBvcnQgbG9nZ2luZ1xuaW1wb3J0IHNxbGl0ZTNcbmltcG9ydCBzeXNcbmltcG9ydCB3YXJuaW5nc1xuZnJvbSBmdW5jdG9vbHMgaW1wb3J0IHBhcnRpYWxcbmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aFxuZnJvbSBxdWV1ZSBpbXBvcnQgRW1wdHksIFF1ZXVlXG5mcm9tIHRocmVhZGluZyBpbXBvcnQgVGhyZWFkXG5mcm9tIHR5cGluZyBpbXBvcnQgKFxuICAgIEFueSxcbiAgICBBc3luY0l0ZXJhdG9yLFxuICAgIENhbGxhYmxlLFxuICAgIEdlbmVyYXRvcixcbiAgICBJdGVyYWJsZSxcbiAgICBPcHRpb25hbCxcbiAgICBUeXBlLFxuICAgIFVuaW9uLFxuKVxuZnJvbSB3YXJuaW5ncyBpbXBvcnQgd2FyblxuXG5mcm9tIC5jb250ZXh0IGltcG9ydCBjb250ZXh0bWFuYWdlclxuZnJvbSAuY3Vyc29yIGltcG9ydCBDdXJzb3JcblxuX19hbGxfXyA9IFsiY29ubmVjdCIsICJDb25uZWN0aW9uIiwgIkN1cnNvciJdXG5cbkxPRyA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCJhaW9zcWxpdGUiKVxuXG5cbmRlZiBnZXRfbG9vcChmdXR1cmU6IGFzeW5jaW8uRnV0dXJlKSAtPiBhc3luY2lvLkFic3RyYWN0RXZlbnRMb29wOlxuICAgIGlmIHN5cy52ZXJzaW9uX2luZm8gPj0gKDMsIDcpOlxuICAgICAgICByZXR1cm4gZnV0dXJlLmdldF9sb29wKClcbiAgICBlbHNlOlxuICAgICAgICByZXR1cm4gZnV0dXJlLl9sb29wXG5cblxuY2xhc3MgQ29ubmVjdGlvbihUaHJlYWQpOlxuICAgIGRlZiBfX2luaXRfXyhcbiAgICAgICAgc2VsZixcbiAgICAgICAgY29ubmVjdG9yOiBDYWxsYWJsZVtbXSwgc3FsaXRlMy5Db25uZWN0aW9uXSxcbiAgICAgICAgaXRlcl9jaHVua19zaXplOiBpbnQsXG4gICAgICAgIGxvb3A6IE9wdGlvbmFsW2FzeW5jaW8uQWJzdHJhY3RFdmVudExvb3BdID0gTm9uZSxcbiAgICApIC0+IE5vbmU6XG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oKVxuICAgICAgICBzZWxmLl9ydW5uaW5nID0gVHJ1ZVxuICAgICAgICBzZWxmLl9jb25uZWN0aW9uOiBPcHRpb25hbFtzcWxpdGUzLkNvbm5lY3Rpb25dID0gTm9uZVxuICAgICAgICBzZWxmLl9jb25uZWN0b3IgPSBjb25uZWN0b3JcbiAgICAgICAgc2VsZi5fdHg6IFF1ZXVlID0gUXVldWUoKVxuICAgICAgICBzZWxmLl9pdGVyX2NodW5rX3NpemUgPSBpdGVyX2NodW5rX3NpemVcblxuICAgICAgICBpZiBsb29wIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgd2FybihcbiAgICAgICAgICAgICAgICAiYWlvc3FsaXRlLkNvbm5lY3Rpb24gbm8gbG9uZ2VyIHVzZXMgdGhlIGBsb29wYCBwYXJhbWV0ZXIiLFxuICAgICAgICAgICAgICAgIERlcHJlY2F0aW9uV2FybmluZyxcbiAgICAgICAgICAgIClcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBfY29ubihzZWxmKSAtPiBzcWxpdGUzLkNvbm5lY3Rpb246XG4gICAgICAgIGlmIHNlbGYuX2Nvbm5lY3Rpb24gaXMgTm9uZTpcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5vIGFjdGl2ZSBjb25uZWN0aW9uIilcblxuICAgICAgICByZXR1cm4gc2VsZi5fY29ubmVjdGlvblxuXG4gICAgZGVmIF9leGVjdXRlX2luc2VydChcbiAgICAgICAgc2VsZiwgc3FsOiBzdHIsIHBhcmFtZXRlcnM6IEl0ZXJhYmxlW0FueV1cbiAgICApIC0+IE9wdGlvbmFsW3NxbGl0ZTMuUm93XTpcbiAgICAgICAgY3Vyc29yID0gc2VsZi5fY29ubi5leGVjdXRlKHNxbCwgcGFyYW1ldGVycylcbiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIlNFTEVDVCBsYXN0X2luc2VydF9yb3dpZCgpIilcbiAgICAgICAgcmV0dXJuIGN1cnNvci5mZXRjaG9uZSgpXG5cbiAgICBkZWYgX2V4ZWN1dGVfZmV0Y2hhbGwoXG4gICAgICAgIHNlbGYsIHNxbDogc3RyLCBwYXJhbWV0ZXJzOiBJdGVyYWJsZVtBbnldXG4gICAgKSAtPiBJdGVyYWJsZVtzcWxpdGUzLlJvd106XG4gICAgICAgIGN1cnNvciA9IHNlbGYuX2Nvbm4uZXhlY3V0ZShzcWwsIHBhcmFtZXRlcnMpXG4gICAgICAgIHJldHVybiBjdXJzb3IuZmV0Y2hhbGwoKVxuXG4gICAgZGVmIHJ1bihzZWxmKSAtPiBOb25lOlxuICAgICAgICAiIiJcbiAgICAgICAgRXhlY3V0ZSBmdW5jdGlvbiBjYWxscyBvbiBhIHNlcGFyYXRlIHRocmVhZC5cblxuICAgICAgICA6bWV0YSBwcml2YXRlOlxuICAgICAgICAiIiJcbiAgICAgICAgd2hpbGUgVHJ1ZTpcbiAgICAgICAgICAgICMgQ29udGludWVzIHJ1bm5pbmcgdW50aWwgYWxsIHF1ZXVlIGl0ZW1zIGFyZSBwcm9jZXNzZWQsXG4gICAgICAgICAgICAjIGV2ZW4gYWZ0ZXIgY29ubmVjdGlvbiBpcyBjbG9zZWQgKHNvIHdlIGNhbiBmaW5hbGl6ZSBhbGxcbiAgICAgICAgICAgICMgZnV0dXJlcylcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBmdXR1cmUsIGZ1bmN0aW9uID0gc2VsZi5fdHguZ2V0KHRpbWVvdXQ9MC4xKVxuICAgICAgICAgICAgZXhjZXB0IEVtcHR5OlxuICAgICAgICAgICAgICAgIGlmIHNlbGYuX3J1bm5pbmc6XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBMT0cuZGVidWcoImV4ZWN1dGluZyAlcyIsIGZ1bmN0aW9uKVxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmN0aW9uKClcbiAgICAgICAgICAgICAgICBMT0cuZGVidWcoIm9wZXJhdGlvbiAlcyBjb21wbGV0ZWQiLCBmdW5jdGlvbilcblxuICAgICAgICAgICAgICAgIGRlZiBzZXRfcmVzdWx0KGZ1dCwgcmVzdWx0KTpcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGZ1dC5kb25lKCk6XG4gICAgICAgICAgICAgICAgICAgICAgICBmdXQuc2V0X3Jlc3VsdChyZXN1bHQpXG5cbiAgICAgICAgICAgICAgICBnZXRfbG9vcChmdXR1cmUpLmNhbGxfc29vbl90aHJlYWRzYWZlKHNldF9yZXN1bHQsIGZ1dHVyZSwgcmVzdWx0KVxuICAgICAgICAgICAgZXhjZXB0IEJhc2VFeGNlcHRpb24gYXMgZTpcbiAgICAgICAgICAgICAgICBMT0cuZGVidWcoInJldHVybmluZyBleGNlcHRpb24gJXMiLCBlKVxuXG4gICAgICAgICAgICAgICAgZGVmIHNldF9leGNlcHRpb24oZnV0LCBlKTpcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGZ1dC5kb25lKCk6XG4gICAgICAgICAgICAgICAgICAgICAgICBmdXQuc2V0X2V4Y2VwdGlvbihlKVxuXG4gICAgICAgICAgICAgICAgZ2V0X2xvb3AoZnV0dXJlKS5jYWxsX3Nvb25fdGhyZWFkc2FmZShzZXRfZXhjZXB0aW9uLCBmdXR1cmUsIGUpXG5cbiAgICBhc3luYyBkZWYgX2V4ZWN1dGUoc2VsZiwgZm4sICphcmdzLCAqKmt3YXJncyk6XG4gICAgICAgICIiIlF1ZXVlIGEgZnVuY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzIGZvciBleGVjdXRpb24uIiIiXG4gICAgICAgIGlmIG5vdCBzZWxmLl9ydW5uaW5nIG9yIG5vdCBzZWxmLl9jb25uZWN0aW9uOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQ29ubmVjdGlvbiBjbG9zZWQiKVxuXG4gICAgICAgIGZ1bmN0aW9uID0gcGFydGlhbChmbiwgKmFyZ3MsICoqa3dhcmdzKVxuICAgICAgICBmdXR1cmUgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKCkuY3JlYXRlX2Z1dHVyZSgpXG5cbiAgICAgICAgc2VsZi5fdHgucHV0X25vd2FpdCgoZnV0dXJlLCBmdW5jdGlvbikpXG5cbiAgICAgICAgcmV0dXJuIGF3YWl0IGZ1dHVyZVxuXG4gICAgYXN5bmMgZGVmIF9jb25uZWN0KHNlbGYpIC0+ICJDb25uZWN0aW9uIjpcbiAgICAgICAgIiIiQ29ubmVjdCB0byB0aGUgYWN0dWFsIHNxbGl0ZSBkYXRhYmFzZS4iIiJcbiAgICAgICAgaWYgc2VsZi5fY29ubmVjdGlvbiBpcyBOb25lOlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIGZ1dHVyZSA9IGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKS5jcmVhdGVfZnV0dXJlKClcbiAgICAgICAgICAgICAgICBzZWxmLl90eC5wdXRfbm93YWl0KChmdXR1cmUsIHNlbGYuX2Nvbm5lY3RvcikpXG4gICAgICAgICAgICAgICAgc2VsZi5fY29ubmVjdGlvbiA9IGF3YWl0IGZ1dHVyZVxuICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjpcbiAgICAgICAgICAgICAgICBzZWxmLl9ydW5uaW5nID0gRmFsc2VcbiAgICAgICAgICAgICAgICBzZWxmLl9jb25uZWN0aW9uID0gTm9uZVxuICAgICAgICAgICAgICAgIHJhaXNlXG5cbiAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgIGRlZiBfX2F3YWl0X18oc2VsZikgLT4gR2VuZXJhdG9yW0FueSwgTm9uZSwgIkNvbm5lY3Rpb24iXTpcbiAgICAgICAgc2VsZi5zdGFydCgpXG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uZWN0KCkuX19hd2FpdF9fKClcblxuICAgIGFzeW5jIGRlZiBfX2FlbnRlcl9fKHNlbGYpIC0+ICJDb25uZWN0aW9uIjpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGZcblxuICAgIGFzeW5jIGRlZiBfX2FleGl0X18oc2VsZiwgZXhjX3R5cGUsIGV4Y192YWwsIGV4Y190YikgLT4gTm9uZTpcbiAgICAgICAgYXdhaXQgc2VsZi5jbG9zZSgpXG5cbiAgICBAY29udGV4dG1hbmFnZXJcbiAgICBhc3luYyBkZWYgY3Vyc29yKHNlbGYpIC0+IEN1cnNvcjpcbiAgICAgICAgIiIiQ3JlYXRlIGFuIGFpb3NxbGl0ZSBjdXJzb3Igd3JhcHBpbmcgYSBzcWxpdGUzIGN1cnNvciBvYmplY3QuIiIiXG4gICAgICAgIHJldHVybiBDdXJzb3Ioc2VsZiwgYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jb25uLmN1cnNvcikpXG5cbiAgICBhc3luYyBkZWYgY29tbWl0KHNlbGYpIC0+IE5vbmU6XG4gICAgICAgICIiIkNvbW1pdCB0aGUgY3VycmVudCB0cmFuc2FjdGlvbi4iIiJcbiAgICAgICAgYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jb25uLmNvbW1pdClcblxuICAgIGFzeW5jIGRlZiByb2xsYmFjayhzZWxmKSAtPiBOb25lOlxuICAgICAgICAiIiJSb2xsIGJhY2sgdGhlIGN1cnJlbnQgdHJhbnNhY3Rpb24uIiIiXG4gICAgICAgIGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY29ubi5yb2xsYmFjaylcblxuICAgIGFzeW5jIGRlZiBjbG9zZShzZWxmKSAtPiBOb25lOlxuICAgICAgICAiIiJDb21wbGV0ZSBxdWV1ZWQgcXVlcmllcy9jdXJzb3JzIGFuZCBjbG9zZSB0aGUgY29ubmVjdGlvbi4iIiJcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jb25uLmNsb3NlKVxuICAgICAgICBleGNlcHQgRXhjZXB0aW9uOlxuICAgICAgICAgICAgTE9HLmluZm8oImV4Y2VwdGlvbiBvY2N1cnJlZCB3aGlsZSBjbG9zaW5nIGNvbm5lY3Rpb24iKVxuICAgICAgICAgICAgcmFpc2VcbiAgICAgICAgZmluYWxseTpcbiAgICAgICAgICAgIHNlbGYuX3J1bm5pbmcgPSBGYWxzZVxuICAgICAgICAgICAgc2VsZi5fY29ubmVjdGlvbiA9IE5vbmVcblxuICAgIEBjb250ZXh0bWFuYWdlclxuICAgIGFzeW5jIGRlZiBleGVjdXRlKHNlbGYsIHNxbDogc3RyLCBwYXJhbWV0ZXJzOiBJdGVyYWJsZVtBbnldID0gTm9uZSkgLT4gQ3Vyc29yOlxuICAgICAgICAiIiJIZWxwZXIgdG8gY3JlYXRlIGEgY3Vyc29yIGFuZCBleGVjdXRlIHRoZSBnaXZlbiBxdWVyeS4iIiJcbiAgICAgICAgaWYgcGFyYW1ldGVycyBpcyBOb25lOlxuICAgICAgICAgICAgcGFyYW1ldGVycyA9IFtdXG4gICAgICAgIGN1cnNvciA9IGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY29ubi5leGVjdXRlLCBzcWwsIHBhcmFtZXRlcnMpXG4gICAgICAgIHJldHVybiBDdXJzb3Ioc2VsZiwgY3Vyc29yKVxuXG4gICAgQGNvbnRleHRtYW5hZ2VyXG4gICAgYXN5bmMgZGVmIGV4ZWN1dGVfaW5zZXJ0KFxuICAgICAgICBzZWxmLCBzcWw6IHN0ciwgcGFyYW1ldGVyczogSXRlcmFibGVbQW55XSA9IE5vbmVcbiAgICApIC0+IE9wdGlvbmFsW3NxbGl0ZTMuUm93XTpcbiAgICAgICAgIiIiSGVscGVyIHRvIGluc2VydCBhbmQgZ2V0IHRoZSBsYXN0X2luc2VydF9yb3dpZC4iIiJcbiAgICAgICAgaWYgcGFyYW1ldGVycyBpcyBOb25lOlxuICAgICAgICAgICAgcGFyYW1ldGVycyA9IFtdXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2V4ZWN1dGVfaW5zZXJ0LCBzcWwsIHBhcmFtZXRlcnMpXG5cbiAgICBAY29udGV4dG1hbmFnZXJcbiAgICBhc3luYyBkZWYgZXhlY3V0ZV9mZXRjaGFsbChcbiAgICAgICAgc2VsZiwgc3FsOiBzdHIsIHBhcmFtZXRlcnM6IEl0ZXJhYmxlW0FueV0gPSBOb25lXG4gICAgKSAtPiBJdGVyYWJsZVtzcWxpdGUzLlJvd106XG4gICAgICAgICIiIkhlbHBlciB0byBleGVjdXRlIGEgcXVlcnkgYW5kIHJldHVybiBhbGwgdGhlIGRhdGEuIiIiXG4gICAgICAgIGlmIHBhcmFtZXRlcnMgaXMgTm9uZTpcbiAgICAgICAgICAgIHBhcmFtZXRlcnMgPSBbXVxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9leGVjdXRlX2ZldGNoYWxsLCBzcWwsIHBhcmFtZXRlcnMpXG5cbiAgICBAY29udGV4dG1hbmFnZXJcbiAgICBhc3luYyBkZWYgZXhlY3V0ZW1hbnkoXG4gICAgICAgIHNlbGYsIHNxbDogc3RyLCBwYXJhbWV0ZXJzOiBJdGVyYWJsZVtJdGVyYWJsZVtBbnldXVxuICAgICkgLT4gQ3Vyc29yOlxuICAgICAgICAiIiJIZWxwZXIgdG8gY3JlYXRlIGEgY3Vyc29yIGFuZCBleGVjdXRlIHRoZSBnaXZlbiBtdWx0aXF1ZXJ5LiIiIlxuICAgICAgICBjdXJzb3IgPSBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2Nvbm4uZXhlY3V0ZW1hbnksIHNxbCwgcGFyYW1ldGVycylcbiAgICAgICAgcmV0dXJuIEN1cnNvcihzZWxmLCBjdXJzb3IpXG5cbiAgICBAY29udGV4dG1hbmFnZXJcbiAgICBhc3luYyBkZWYgZXhlY3V0ZXNjcmlwdChzZWxmLCBzcWxfc2NyaXB0OiBzdHIpIC0+IEN1cnNvcjpcbiAgICAgICAgIiIiSGVscGVyIHRvIGNyZWF0ZSBhIGN1cnNvciBhbmQgZXhlY3V0ZSBhIHVzZXIgc2NyaXB0LiIiIlxuICAgICAgICBjdXJzb3IgPSBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2Nvbm4uZXhlY3V0ZXNjcmlwdCwgc3FsX3NjcmlwdClcbiAgICAgICAgcmV0dXJuIEN1cnNvcihzZWxmLCBjdXJzb3IpXG5cbiAgICBhc3luYyBkZWYgaW50ZXJydXB0KHNlbGYpIC0+IE5vbmU6XG4gICAgICAgICIiIkludGVycnVwdCBwZW5kaW5nIHF1ZXJpZXMuIiIiXG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uLmludGVycnVwdCgpXG5cbiAgICBhc3luYyBkZWYgY3JlYXRlX2Z1bmN0aW9uKFxuICAgICAgICBzZWxmLCBuYW1lOiBzdHIsIG51bV9wYXJhbXM6IGludCwgZnVuYzogQ2FsbGFibGUsIGRldGVybWluaXN0aWM6IGJvb2wgPSBGYWxzZVxuICAgICkgLT4gTm9uZTpcbiAgICAgICAgIiIiXG4gICAgICAgIENyZWF0ZSB1c2VyLWRlZmluZWQgZnVuY3Rpb24gdGhhdCBjYW4gYmUgbGF0ZXIgdXNlZFxuICAgICAgICB3aXRoaW4gU1FMIHN0YXRlbWVudHMuIE11c3QgYmUgcnVuIHdpdGhpbiB0aGUgc2FtZSB0aHJlYWRcbiAgICAgICAgdGhhdCBxdWVyeSBleGVjdXRpb25zIHRha2UgcGxhY2Ugc28gaW5zdGVhZCBvZiBleGVjdXRpbmcgZGlyZWN0bHlcbiAgICAgICAgYWdhaW5zdCB0aGUgY29ubmVjdGlvbiwgd2UgZGVmZXIgdGhpcyB0byBgcnVuYCBmdW5jdGlvbi5cblxuICAgICAgICBJbiBQeXRob24gMy44IGFuZCBhYm92ZSwgaWYgKmRldGVybWluaXN0aWMqIGlzIHRydWUsIHRoZSBjcmVhdGVkXG4gICAgICAgIGZ1bmN0aW9uIGlzIG1hcmtlZCBhcyBkZXRlcm1pbmlzdGljLCB3aGljaCBhbGxvd3MgU1FMaXRlIHRvIHBlcmZvcm1cbiAgICAgICAgYWRkaXRpb25hbCBvcHRpbWl6YXRpb25zLiBUaGlzIGZsYWcgaXMgc3VwcG9ydGVkIGJ5IFNRTGl0ZSAzLjguMyBvclxuICAgICAgICBoaWdoZXIsIGBgTm90U3VwcG9ydGVkRXJyb3JgYCB3aWxsIGJlIHJhaXNlZCBpZiB1c2VkIHdpdGggb2xkZXJcbiAgICAgICAgdmVyc2lvbnMuXG4gICAgICAgICIiIlxuICAgICAgICBpZiBzeXMudmVyc2lvbl9pbmZvID49ICgzLCA4KTpcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX2V4ZWN1dGUoXG4gICAgICAgICAgICAgICAgc2VsZi5fY29ubi5jcmVhdGVfZnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBudW1fcGFyYW1zLFxuICAgICAgICAgICAgICAgIGZ1bmMsXG4gICAgICAgICAgICAgICAgZGV0ZXJtaW5pc3RpYz1kZXRlcm1pbmlzdGljLFxuICAgICAgICAgICAgKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgaWYgZGV0ZXJtaW5pc3RpYzpcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKFxuICAgICAgICAgICAgICAgICAgICAiRGV0ZXJtaW5pc3RpYyBmdW5jdGlvbiBzdXBwb3J0IGlzIG9ubHkgYXZhaWxhYmxlIG9uICJcbiAgICAgICAgICAgICAgICAgICAgXCdQeXRob24gMy44Ky4gRnVuY3Rpb24gInt9IiB3aWxsIGJlIHJlZ2lzdGVyZWQgYXMgXCdcbiAgICAgICAgICAgICAgICAgICAgIm5vbi1kZXRlcm1pbmlzdGljIGFzIHBlciBTUUxpdGUgZGVmYXVsdHMuIi5mb3JtYXQobmFtZSlcbiAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY29ubi5jcmVhdGVfZnVuY3Rpb24sIG5hbWUsIG51bV9wYXJhbXMsIGZ1bmMpXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgaW5fdHJhbnNhY3Rpb24oc2VsZikgLT4gYm9vbDpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm4uaW5fdHJhbnNhY3Rpb25cblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBpc29sYXRpb25fbGV2ZWwoc2VsZikgLT4gc3RyOlxuICAgICAgICByZXR1cm4gc2VsZi5fY29ubi5pc29sYXRpb25fbGV2ZWxcblxuICAgIEBpc29sYXRpb25fbGV2ZWwuc2V0dGVyXG4gICAgZGVmIGlzb2xhdGlvbl9sZXZlbChzZWxmLCB2YWx1ZTogc3RyKSAtPiBOb25lOlxuICAgICAgICBzZWxmLl9jb25uLmlzb2xhdGlvbl9sZXZlbCA9IHZhbHVlXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgcm93X2ZhY3Rvcnkoc2VsZikgLT4gIk9wdGlvbmFsW1R5cGVdIjogICMgcHkzLjUuMiBjb21wYXQgKCMyNClcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm4ucm93X2ZhY3RvcnlcblxuICAgIEByb3dfZmFjdG9yeS5zZXR0ZXJcbiAgICBkZWYgcm93X2ZhY3Rvcnkoc2VsZiwgZmFjdG9yeTogIk9wdGlvbmFsW1R5cGVdIikgLT4gTm9uZTogICMgcHkzLjUuMiBjb21wYXQgKCMyNClcbiAgICAgICAgc2VsZi5fY29ubi5yb3dfZmFjdG9yeSA9IGZhY3RvcnlcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiB0ZXh0X2ZhY3Rvcnkoc2VsZikgLT4gVHlwZTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm4udGV4dF9mYWN0b3J5XG5cbiAgICBAdGV4dF9mYWN0b3J5LnNldHRlclxuICAgIGRlZiB0ZXh0X2ZhY3Rvcnkoc2VsZiwgZmFjdG9yeTogVHlwZSkgLT4gTm9uZTpcbiAgICAgICAgc2VsZi5fY29ubi50ZXh0X2ZhY3RvcnkgPSBmYWN0b3J5XG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgdG90YWxfY2hhbmdlcyhzZWxmKSAtPiBpbnQ6XG4gICAgICAgIHJldHVybiBzZWxmLl9jb25uLnRvdGFsX2NoYW5nZXNcblxuICAgIGFzeW5jIGRlZiBlbmFibGVfbG9hZF9leHRlbnNpb24oc2VsZiwgdmFsdWU6IGJvb2wpIC0+IE5vbmU6XG4gICAgICAgIGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY29ubi5lbmFibGVfbG9hZF9leHRlbnNpb24sIHZhbHVlKSAgIyB0eXBlOiBpZ25vcmVcblxuICAgIGFzeW5jIGRlZiBsb2FkX2V4dGVuc2lvbihzZWxmLCBwYXRoOiBzdHIpOlxuICAgICAgICBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2Nvbm4ubG9hZF9leHRlbnNpb24sIHBhdGgpICAjIHR5cGU6IGlnbm9yZVxuXG4gICAgYXN5bmMgZGVmIHNldF9wcm9ncmVzc19oYW5kbGVyKFxuICAgICAgICBzZWxmLCBoYW5kbGVyOiBDYWxsYWJsZVtbXSwgT3B0aW9uYWxbaW50XV0sIG46IGludFxuICAgICkgLT4gTm9uZTpcbiAgICAgICAgYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jb25uLnNldF9wcm9ncmVzc19oYW5kbGVyLCBoYW5kbGVyLCBuKVxuXG4gICAgYXN5bmMgZGVmIHNldF90cmFjZV9jYWxsYmFjayhzZWxmLCBoYW5kbGVyOiBDYWxsYWJsZSkgLT4gTm9uZTpcbiAgICAgICAgYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jb25uLnNldF90cmFjZV9jYWxsYmFjaywgaGFuZGxlcilcblxuICAgIGFzeW5jIGRlZiBpdGVyZHVtcChzZWxmKSAtPiBBc3luY0l0ZXJhdG9yW3N0cl06XG4gICAgICAgICIiIlxuICAgICAgICBSZXR1cm4gYW4gYXN5bmMgaXRlcmF0b3IgdG8gZHVtcCB0aGUgZGF0YWJhc2UgaW4gU1FMIHRleHQgZm9ybWF0LlxuXG4gICAgICAgIEV4YW1wbGU6OlxuXG4gICAgICAgICAgICBhc3luYyBmb3IgbGluZSBpbiBkYi5pdGVyZHVtcCgpOlxuICAgICAgICAgICAgICAgIC4uLlxuXG4gICAgICAgICIiIlxuICAgICAgICBkdW1wX3F1ZXVlOiBRdWV1ZSA9IFF1ZXVlKClcblxuICAgICAgICBkZWYgZHVtcGVyKCk6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgZm9yIGxpbmUgaW4gc2VsZi5fY29ubi5pdGVyZHVtcCgpOlxuICAgICAgICAgICAgICAgICAgICBkdW1wX3F1ZXVlLnB1dF9ub3dhaXQobGluZSlcbiAgICAgICAgICAgICAgICBkdW1wX3F1ZXVlLnB1dF9ub3dhaXQoTm9uZSlcblxuICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjpcbiAgICAgICAgICAgICAgICBMT0cuZXhjZXB0aW9uKCJleGNlcHRpb24gd2hpbGUgZHVtcGluZyBkYiIpXG4gICAgICAgICAgICAgICAgZHVtcF9xdWV1ZS5wdXRfbm93YWl0KE5vbmUpXG4gICAgICAgICAgICAgICAgcmFpc2VcblxuICAgICAgICBmdXQgPSBzZWxmLl9leGVjdXRlKGR1bXBlcilcbiAgICAgICAgdGFzayA9IGFzeW5jaW8uZW5zdXJlX2Z1dHVyZShmdXQpXG5cbiAgICAgICAgd2hpbGUgVHJ1ZTpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBsaW5lOiBPcHRpb25hbFtzdHJdID0gZHVtcF9xdWV1ZS5nZXRfbm93YWl0KClcbiAgICAgICAgICAgICAgICBpZiBsaW5lIGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgeWllbGQgbGluZVxuXG4gICAgICAgICAgICBleGNlcHQgRW1wdHk6XG4gICAgICAgICAgICAgICAgaWYgdGFzay5kb25lKCk6XG4gICAgICAgICAgICAgICAgICAgIExPRy53YXJuaW5nKCJpdGVyZHVtcCBjb21wbGV0ZWQgdW5leHBlY3RlZGx5IilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoMC4wMSlcblxuICAgICAgICBhd2FpdCB0YXNrXG5cbiAgICBhc3luYyBkZWYgYmFja3VwKFxuICAgICAgICBzZWxmLFxuICAgICAgICB0YXJnZXQ6IFVuaW9uWyJDb25uZWN0aW9uIiwgc3FsaXRlMy5Db25uZWN0aW9uXSxcbiAgICAgICAgKixcbiAgICAgICAgcGFnZXM6IGludCA9IDAsXG4gICAgICAgIHByb2dyZXNzOiBPcHRpb25hbFtDYWxsYWJsZVtbaW50LCBpbnQsIGludF0sIE5vbmVdXSA9IE5vbmUsXG4gICAgICAgIG5hbWU6IHN0ciA9ICJtYWluIixcbiAgICAgICAgc2xlZXA6IGZsb2F0ID0gMC4yNTBcbiAgICApIC0+IE5vbmU6XG4gICAgICAgICIiIlxuICAgICAgICBNYWtlIGEgYmFja3VwIG9mIHRoZSBjdXJyZW50IGRhdGFiYXNlIHRvIHRoZSB0YXJnZXQgZGF0YWJhc2UuXG5cbiAgICAgICAgVGFrZXMgZWl0aGVyIGEgc3RhbmRhcmQgc3FsaXRlMyBvciBhaW9zcWxpdGUgQ29ubmVjdGlvbiBvYmplY3QgYXMgdGhlIHRhcmdldC5cbiAgICAgICAgIiIiXG4gICAgICAgIGlmIHN5cy52ZXJzaW9uX2luZm8gPCAoMywgNyk6XG4gICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoImJhY2t1cCgpIG1ldGhvZCBpcyBvbmx5IGF2YWlsYWJsZSBvbiBQeXRob24gMy43KyIpXG5cbiAgICAgICAgaWYgaXNpbnN0YW5jZSh0YXJnZXQsIENvbm5lY3Rpb24pOlxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0Ll9jb25uXG5cbiAgICAgICAgYXdhaXQgc2VsZi5fZXhlY3V0ZShcbiAgICAgICAgICAgIHNlbGYuX2Nvbm4uYmFja3VwLFxuICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgcGFnZXM9cGFnZXMsXG4gICAgICAgICAgICBwcm9ncmVzcz1wcm9ncmVzcyxcbiAgICAgICAgICAgIG5hbWU9bmFtZSxcbiAgICAgICAgICAgIHNsZWVwPXNsZWVwLFxuICAgICAgICApXG5cblxuZGVmIGNvbm5lY3QoXG4gICAgZGF0YWJhc2U6IFVuaW9uW3N0ciwgUGF0aF0sXG4gICAgKixcbiAgICBpdGVyX2NodW5rX3NpemU9NjQsXG4gICAgbG9vcDogT3B0aW9uYWxbYXN5bmNpby5BYnN0cmFjdEV2ZW50TG9vcF0gPSBOb25lLFxuICAgICoqa3dhcmdzOiBBbnlcbikgLT4gQ29ubmVjdGlvbjpcbiAgICAiIiJDcmVhdGUgYW5kIHJldHVybiBhIGNvbm5lY3Rpb24gcHJveHkgdG8gdGhlIHNxbGl0ZSBkYXRhYmFzZS4iIiJcblxuICAgIGlmIGxvb3AgaXMgbm90IE5vbmU6XG4gICAgICAgIHdhcm4oXG4gICAgICAgICAgICAiYWlvc3FsaXRlLmNvbm5lY3QoKSBubyBsb25nZXIgdXNlcyB0aGUgYGxvb3BgIHBhcmFtZXRlciIsXG4gICAgICAgICAgICBEZXByZWNhdGlvbldhcm5pbmcsXG4gICAgICAgIClcblxuICAgIGRlZiBjb25uZWN0b3IoKSAtPiBzcWxpdGUzLkNvbm5lY3Rpb246XG4gICAgICAgIGlmIGlzaW5zdGFuY2UoZGF0YWJhc2UsIHN0cik6XG4gICAgICAgICAgICBsb2MgPSBkYXRhYmFzZVxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UoZGF0YWJhc2UsIGJ5dGVzKTpcbiAgICAgICAgICAgIGxvYyA9IGRhdGFiYXNlLmRlY29kZSgidXRmLTgiKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgbG9jID0gc3RyKGRhdGFiYXNlKVxuXG4gICAgICAgIHJldHVybiBzcWxpdGUzLmNvbm5lY3QobG9jLCAqKmt3YXJncylcblxuICAgIHJldHVybiBDb25uZWN0aW9uKGNvbm5lY3RvciwgaXRlcl9jaHVua19zaXplKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2Fpb3NxbGl0ZS9jb250ZXh0LnB5JywgYicjIENvcHlyaWdodCAyMDE4XG4jIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuXG5cbmZyb20gZnVuY3Rvb2xzIGltcG9ydCB3cmFwc1xuZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgQ2FsbGFibGUsIENvcm91dGluZSwgR2VuZXJhdG9yLCBUeXBlVmFyXG5cbmZyb20gdHlwaW5nX2V4dGVuc2lvbnMgaW1wb3J0IEFzeW5jQ29udGV4dE1hbmFnZXJcblxuZnJvbSAuY3Vyc29yIGltcG9ydCBDdXJzb3JcblxuX1QgPSBUeXBlVmFyKCJfVCIpXG5cblxuY2xhc3MgUmVzdWx0KEFzeW5jQ29udGV4dE1hbmFnZXJbX1RdLCBDb3JvdXRpbmVbQW55LCBBbnksIF9UXSk6XG4gICAgX19zbG90c19fID0gKCJfY29ybyIsICJfb2JqIilcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb3JvOiBDb3JvdXRpbmVbQW55LCBBbnksIF9UXSk6XG4gICAgICAgIHNlbGYuX2Nvcm8gPSBjb3JvXG4gICAgICAgIHNlbGYuX29iajogX1RcblxuICAgIGRlZiBzZW5kKHNlbGYsIHZhbHVlKSAtPiBOb25lOlxuICAgICAgICByZXR1cm4gc2VsZi5fY29yby5zZW5kKHZhbHVlKVxuXG4gICAgZGVmIHRocm93KHNlbGYsIHR5cCwgdmFsPU5vbmUsIHRiPU5vbmUpIC0+IE5vbmU6XG4gICAgICAgIGlmIHZhbCBpcyBOb25lOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2Nvcm8udGhyb3codHlwKVxuXG4gICAgICAgIGlmIHRiIGlzIE5vbmU6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fY29yby50aHJvdyh0eXAsIHZhbClcblxuICAgICAgICByZXR1cm4gc2VsZi5fY29yby50aHJvdyh0eXAsIHZhbCwgdGIpXG5cbiAgICBkZWYgY2xvc2Uoc2VsZikgLT4gTm9uZTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvcm8uY2xvc2UoKVxuXG4gICAgZGVmIF9fYXdhaXRfXyhzZWxmKSAtPiBHZW5lcmF0b3JbQW55LCBOb25lLCBfVF06XG4gICAgICAgIHJldHVybiBzZWxmLl9jb3JvLl9fYXdhaXRfXygpXG5cbiAgICBhc3luYyBkZWYgX19hZW50ZXJfXyhzZWxmKSAtPiBfVDpcbiAgICAgICAgc2VsZi5fb2JqID0gYXdhaXQgc2VsZi5fY29yb1xuICAgICAgICByZXR1cm4gc2VsZi5fb2JqXG5cbiAgICBhc3luYyBkZWYgX19hZXhpdF9fKHNlbGYsIGV4Y190eXBlLCBleGMsIHRiKSAtPiBOb25lOlxuICAgICAgICBpZiBpc2luc3RhbmNlKHNlbGYuX29iaiwgQ3Vyc29yKTpcbiAgICAgICAgICAgIGF3YWl0IHNlbGYuX29iai5jbG9zZSgpXG5cblxuZGVmIGNvbnRleHRtYW5hZ2VyKFxuICAgIG1ldGhvZDogQ2FsbGFibGVbLi4uLCBDb3JvdXRpbmVbQW55LCBBbnksIF9UXV1cbikgLT4gQ2FsbGFibGVbLi4uLCBSZXN1bHRbX1RdXTpcbiAgICBAd3JhcHMobWV0aG9kKVxuICAgIGRlZiB3cmFwcGVyKHNlbGYsICphcmdzLCAqKmt3YXJncykgLT4gUmVzdWx0W19UXTpcbiAgICAgICAgcmV0dXJuIFJlc3VsdChtZXRob2Qoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKSlcblxuICAgIHJldHVybiB3cmFwcGVyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnYWlvc3FsaXRlL2N1cnNvci5weScsIGInIyBDb3B5cmlnaHQgMjAxOCBKb2huIFJlZXNlXG4jIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuXG5pbXBvcnQgc3FsaXRlM1xuZnJvbSB0eXBpbmcgaW1wb3J0IFRZUEVfQ0hFQ0tJTkcsIEFueSwgQXN5bmNJdGVyYXRvciwgSXRlcmFibGUsIE9wdGlvbmFsLCBUdXBsZVxuXG5pZiBUWVBFX0NIRUNLSU5HOlxuICAgIGZyb20gLmNvcmUgaW1wb3J0IENvbm5lY3Rpb25cblxuXG5jbGFzcyBDdXJzb3I6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvbm46ICJDb25uZWN0aW9uIiwgY3Vyc29yOiBzcWxpdGUzLkN1cnNvcikgLT4gTm9uZTpcbiAgICAgICAgc2VsZi5pdGVyX2NodW5rX3NpemUgPSBjb25uLl9pdGVyX2NodW5rX3NpemVcbiAgICAgICAgc2VsZi5fY29ubiA9IGNvbm5cbiAgICAgICAgc2VsZi5fY3Vyc29yID0gY3Vyc29yXG5cbiAgICBkZWYgX19haXRlcl9fKHNlbGYpIC0+IEFzeW5jSXRlcmF0b3Jbc3FsaXRlMy5Sb3ddOlxuICAgICAgICAiIiJUaGUgY3Vyc29yIHByb3h5IGlzIGFsc28gYW4gYXN5bmMgaXRlcmF0b3IuIiIiXG4gICAgICAgIHJldHVybiBzZWxmLl9mZXRjaF9jaHVua2VkKClcblxuICAgIGFzeW5jIGRlZiBfZmV0Y2hfY2h1bmtlZChzZWxmKTpcbiAgICAgICAgd2hpbGUgVHJ1ZTpcbiAgICAgICAgICAgIHJvd3MgPSBhd2FpdCBzZWxmLmZldGNobWFueShzZWxmLml0ZXJfY2h1bmtfc2l6ZSlcbiAgICAgICAgICAgIGlmIG5vdCByb3dzOlxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgZm9yIHJvdyBpbiByb3dzOlxuICAgICAgICAgICAgICAgIHlpZWxkIHJvd1xuXG4gICAgYXN5bmMgZGVmIF9leGVjdXRlKHNlbGYsIGZuLCAqYXJncywgKiprd2FyZ3MpOlxuICAgICAgICAiIiJFeGVjdXRlIHRoZSBnaXZlbiBmdW5jdGlvbiBvbiB0aGUgc2hhcmVkIGNvbm5lY3Rpb25cJ3MgdGhyZWFkLiIiIlxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fY29ubi5fZXhlY3V0ZShmbiwgKmFyZ3MsICoqa3dhcmdzKVxuXG4gICAgYXN5bmMgZGVmIGV4ZWN1dGUoc2VsZiwgc3FsOiBzdHIsIHBhcmFtZXRlcnM6IEl0ZXJhYmxlW0FueV0gPSBOb25lKSAtPiAiQ3Vyc29yIjpcbiAgICAgICAgIiIiRXhlY3V0ZSB0aGUgZ2l2ZW4gcXVlcnkuIiIiXG4gICAgICAgIGlmIHBhcmFtZXRlcnMgaXMgTm9uZTpcbiAgICAgICAgICAgIHBhcmFtZXRlcnMgPSBbXVxuICAgICAgICBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2N1cnNvci5leGVjdXRlLCBzcWwsIHBhcmFtZXRlcnMpXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBhc3luYyBkZWYgZXhlY3V0ZW1hbnkoXG4gICAgICAgIHNlbGYsIHNxbDogc3RyLCBwYXJhbWV0ZXJzOiBJdGVyYWJsZVtJdGVyYWJsZVtBbnldXVxuICAgICkgLT4gIkN1cnNvciI6XG4gICAgICAgICIiIkV4ZWN1dGUgdGhlIGdpdmVuIG11bHRpcXVlcnkuIiIiXG4gICAgICAgIGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY3Vyc29yLmV4ZWN1dGVtYW55LCBzcWwsIHBhcmFtZXRlcnMpXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBhc3luYyBkZWYgZXhlY3V0ZXNjcmlwdChzZWxmLCBzcWxfc2NyaXB0OiBzdHIpIC0+ICJDdXJzb3IiOlxuICAgICAgICAiIiJFeGVjdXRlIGEgdXNlciBzY3JpcHQuIiIiXG4gICAgICAgIGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY3Vyc29yLmV4ZWN1dGVzY3JpcHQsIHNxbF9zY3JpcHQpXG4gICAgICAgIHJldHVybiBzZWxmXG5cbiAgICBhc3luYyBkZWYgZmV0Y2hvbmUoc2VsZikgLT4gT3B0aW9uYWxbc3FsaXRlMy5Sb3ddOlxuICAgICAgICAiIiJGZXRjaCBhIHNpbmdsZSByb3cuIiIiXG4gICAgICAgIHJldHVybiBhd2FpdCBzZWxmLl9leGVjdXRlKHNlbGYuX2N1cnNvci5mZXRjaG9uZSlcblxuICAgIGFzeW5jIGRlZiBmZXRjaG1hbnkoc2VsZiwgc2l6ZTogaW50ID0gTm9uZSkgLT4gSXRlcmFibGVbc3FsaXRlMy5Sb3ddOlxuICAgICAgICAiIiJGZXRjaCB1cCB0byBgY3Vyc29yLmFycmF5c2l6ZWAgbnVtYmVyIG9mIHJvd3MuIiIiXG4gICAgICAgIGFyZ3M6IFR1cGxlW2ludCwgLi4uXSA9ICgpXG4gICAgICAgIGlmIHNpemUgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICBhcmdzID0gKHNpemUsKVxuICAgICAgICByZXR1cm4gYXdhaXQgc2VsZi5fZXhlY3V0ZShzZWxmLl9jdXJzb3IuZmV0Y2htYW55LCAqYXJncylcblxuICAgIGFzeW5jIGRlZiBmZXRjaGFsbChzZWxmKSAtPiBJdGVyYWJsZVtzcWxpdGUzLlJvd106XG4gICAgICAgICIiIkZldGNoIGFsbCByZW1haW5pbmcgcm93cy4iIiJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY3Vyc29yLmZldGNoYWxsKVxuXG4gICAgYXN5bmMgZGVmIGNsb3NlKHNlbGYpIC0+IE5vbmU6XG4gICAgICAgICIiIkNsb3NlIHRoZSBjdXJzb3IuIiIiXG4gICAgICAgIGF3YWl0IHNlbGYuX2V4ZWN1dGUoc2VsZi5fY3Vyc29yLmNsb3NlKVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIHJvd2NvdW50KHNlbGYpIC0+IGludDpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2N1cnNvci5yb3djb3VudFxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGxhc3Ryb3dpZChzZWxmKSAtPiBpbnQ6XG4gICAgICAgIHJldHVybiBzZWxmLl9jdXJzb3IubGFzdHJvd2lkXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgYXJyYXlzaXplKHNlbGYpIC0+IGludDpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2N1cnNvci5hcnJheXNpemVcblxuICAgIEBhcnJheXNpemUuc2V0dGVyXG4gICAgZGVmIGFycmF5c2l6ZShzZWxmLCB2YWx1ZTogaW50KSAtPiBOb25lOlxuICAgICAgICBzZWxmLl9jdXJzb3IuYXJyYXlzaXplID0gdmFsdWVcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBkZXNjcmlwdGlvbihzZWxmKSAtPiBUdXBsZVtUdXBsZV06XG4gICAgICAgIHJldHVybiBzZWxmLl9jdXJzb3IuZGVzY3JpcHRpb25cblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBjb25uZWN0aW9uKHNlbGYpIC0+IHNxbGl0ZTMuQ29ubmVjdGlvbjpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2N1cnNvci5jb25uZWN0aW9uXG5cbiAgICBhc3luYyBkZWYgX19hZW50ZXJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuIHNlbGZcblxuICAgIGFzeW5jIGRlZiBfX2FleGl0X18oc2VsZiwgZXhjX3R5cGUsIGV4Y192YWwsIGV4Y190Yik6XG4gICAgICAgIGF3YWl0IHNlbGYuY2xvc2UoKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3BsdWdpbnMvYnJvd3NlcnMvZGVjcnlwdC5weScsIGInIyBodHRwczovL2dpdGh1Yi5jb20vaGFrYW5vbnltb3Mvc3RlYWwtY2hyb21lLXBhc3N3b3JkLWFsbC12ZXJzaW9uL2Jsb2IvbWFzdGVyL2xvY2FsLnB5XHJcblxyXG5cclxuaW1wb3J0IGN0eXBlc1xyXG5pbXBvcnQgY3R5cGVzLndpbnR5cGVzXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcyBpbXBvcnQgZGVmYXVsdF9iYWNrZW5kXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmNpcGhlcnMgaW1wb3J0IChcclxuICAgIENpcGhlciwgYWxnb3JpdGhtcywgbW9kZXMpXHJcbmltcG9ydCBiYXNlNjRcclxuaW1wb3J0IG9zXHJcbmltcG9ydCBqc29uXHJcblxyXG5cclxuY2xhc3MgRGVjcnlwdG9yOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHBhdGgpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgcGF0aCBpcyBOb25lOlxyXG4gICAgICAgICAgICBzZWxmLnBhdGggPSBvcy5wYXRoLmpvaW4ob3MuZW52aXJvbltcJ0xPQ0FMQVBQREFUQVwnXSwgciJHb29nbGVcXENocm9tZVxcVXNlciBEYXRhXFxMb2NhbCBTdGF0ZSIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5wYXRoID0gcGF0aFxyXG4gICAgICAgIFxyXG4gICAgICAgIHNlbGYua2V5ID0gTm9uZVxyXG4gICAgICAgIHNlbGYuY2lwaGVyID0gTm9uZVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBkcGFwaV9kZWNyeXB0KGVuY3J5cHRlZCk6XHJcbiAgICAgICAgY2xhc3MgREFUQV9CTE9CKGN0eXBlcy5TdHJ1Y3R1cmUpOlxyXG4gICAgICAgICAgICBfZmllbGRzXyA9IFsoXCdjYkRhdGFcJywgY3R5cGVzLndpbnR5cGVzLkRXT1JEKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFwncGJEYXRhXCcsIGN0eXBlcy5QT0lOVEVSKGN0eXBlcy5jX2NoYXIpKV1cclxuXHJcbiAgICAgICAgcCA9IGN0eXBlcy5jcmVhdGVfc3RyaW5nX2J1ZmZlcihlbmNyeXB0ZWQsIGxlbihlbmNyeXB0ZWQpKVxyXG4gICAgICAgIGJsb2JpbiA9IERBVEFfQkxPQihjdHlwZXMuc2l6ZW9mKHApLCBwKVxyXG4gICAgICAgIGJsb2JvdXQgPSBEQVRBX0JMT0IoKVxyXG4gICAgICAgIHJldHZhbCA9IGN0eXBlcy53aW5kbGwuY3J5cHQzMi5DcnlwdFVucHJvdGVjdERhdGEoXHJcbiAgICAgICAgICAgIGN0eXBlcy5ieXJlZihibG9iaW4pLCBOb25lLCBOb25lLCBOb25lLCBOb25lLCAwLCBjdHlwZXMuYnlyZWYoYmxvYm91dCkpXHJcbiAgICAgICAgaWYgbm90IHJldHZhbDpcclxuICAgICAgICAgICAgcmFpc2UgY3R5cGVzLldpbkVycm9yKClcclxuICAgICAgICByZXN1bHQgPSBjdHlwZXMuc3RyaW5nX2F0KGJsb2JvdXQucGJEYXRhLCBibG9ib3V0LmNiRGF0YSlcclxuICAgICAgICBjdHlwZXMud2luZGxsLmtlcm5lbDMyLkxvY2FsRnJlZShibG9ib3V0LnBiRGF0YSlcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIGRlY3J5cHQoY2lwaGVyLCBjaXBoZXJ0ZXh0LCBub25jZSk6XHJcbiAgICAgICAgY2lwaGVyLm1vZGUgPSBtb2Rlcy5HQ00obm9uY2UpXHJcbiAgICAgICAgZGVjcnlwdG9yID0gY2lwaGVyLmRlY3J5cHRvcigpXHJcbiAgICAgICAgcmV0dXJuIGRlY3J5cHRvci51cGRhdGUoY2lwaGVydGV4dClcclxuXHJcbiAgICBkZWYgZ2V0X2tleV9mcm9tX2xvY2FsX3N0YXRlKHNlbGYpOlxyXG4gICAgICAgIGpzbiA9IE5vbmVcclxuICAgICAgICB3aXRoIG9wZW4oc2VsZi5wYXRoLCBcJ3JcJykgYXMgZjpcclxuICAgICAgICAgICAganNuID0ganNvbi5sb2FkcyhzdHIoZi5yZWFkbGluZSgpKSlcclxuICAgICAgICByZXR1cm4ganNuW1wnb3NfY3J5cHRcJ11bXCdlbmNyeXB0ZWRfa2V5XCddXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIGdldF9jaXBoZXIoa2V5KTpcclxuICAgICAgICBjaXBoZXIgPSBDaXBoZXIoXHJcbiAgICAgICAgICAgIGFsZ29yaXRobXMuQUVTKGtleSksXHJcbiAgICAgICAgICAgIE5vbmUsXHJcbiAgICAgICAgICAgIGJhY2tlbmQ9ZGVmYXVsdF9iYWNrZW5kKClcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIGNpcGhlclxyXG5cclxuICAgIGRlZiBhZXNfZGVjcnlwdChzZWxmLCBlbmNyeXB0ZWRfdHh0KTpcclxuICAgICAgICBpZiBzZWxmLmtleSBpcyBOb25lOlxyXG4gICAgICAgICAgICBlbmNvZGVkX2tleSA9IHNlbGYuZ2V0X2tleV9mcm9tX2xvY2FsX3N0YXRlKClcclxuICAgICAgICAgICAgZW5jcnlwdGVkX2tleSA9IGJhc2U2NC5iNjRkZWNvZGUoZW5jb2RlZF9rZXkuZW5jb2RlKCkpXHJcbiAgICAgICAgICAgIGVuY3J5cHRlZF9rZXkgPSBlbmNyeXB0ZWRfa2V5WzU6XVxyXG4gICAgICAgICAgICBzZWxmLmtleSA9IERlY3J5cHRvci5kcGFwaV9kZWNyeXB0KGVuY3J5cHRlZF9rZXkpXHJcbiAgICAgICAgICAgIHNlbGYuY2lwaGVyID0gRGVjcnlwdG9yLmdldF9jaXBoZXIoc2VsZi5rZXkpXHJcbiAgICAgICAgXHJcbiAgICAgICAgbm9uY2UgPSBlbmNyeXB0ZWRfdHh0WzM6MTVdXHJcblxyXG4gICAgICAgIHJldHVybiBEZWNyeXB0b3IuZGVjcnlwdChzZWxmLmNpcGhlcixlbmNyeXB0ZWRfdHh0WzE1Ol0sbm9uY2UpXHJcblxyXG4gICAgZGVmIGRlY3J5cHRfcGFzc3dvcmQoc2VsZiwgZGF0YSk6XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBpZiBkYXRhWzo0XSA9PSBiXCdcXHgwMVxceDAwXFx4MDBcXHgwMFwnOlxyXG4gICAgICAgICAgICAgICAgZGVjcnlwdGVkID0gRGVjcnlwdG9yLmRwYXBpX2RlY3J5cHQoZGF0YSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWNyeXB0ZWQuZGVjb2RlKClcclxuICAgICAgICAgICAgZWxpZiBkYXRhWzozXSA9PSBiXCd2MTBcJzpcclxuICAgICAgICAgICAgICAgIGRlY3J5cHRlZCA9IHNlbGYuYWVzX2RlY3J5cHQoZGF0YSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWNyeXB0ZWRbOi0xNl0uZGVjb2RlKClcclxuICAgICAgICBleGNlcHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBOb25lJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9fX2luaXRfXy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCBzeXNcclxuaW1wb3J0IHdhcm5pbmdzXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5fX2Fib3V0X18gaW1wb3J0IChcclxuICAgIF9fYXV0aG9yX18sXHJcbiAgICBfX2NvcHlyaWdodF9fLFxyXG4gICAgX192ZXJzaW9uX18sXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkudXRpbHMgaW1wb3J0IENyeXB0b2dyYXBoeURlcHJlY2F0aW9uV2FybmluZ1xyXG5cclxuXHJcbl9fYWxsX18gPSBbXHJcbiAgICAiX192ZXJzaW9uX18iLFxyXG4gICAgIl9fYXV0aG9yX18iLFxyXG4gICAgIl9fY29weXJpZ2h0X18iLFxyXG5dXHJcblxyXG5pZiBzeXMudmVyc2lvbl9pbmZvWzoyXSA9PSAoMywgNik6XHJcbiAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICJQeXRob24gMy42IGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgYnkgdGhlIFB5dGhvbiBjb3JlIHRlYW0uICJcclxuICAgICAgICAiVGhlcmVmb3JlLCBzdXBwb3J0IGZvciBpdCBpcyBkZXByZWNhdGVkIGluIGNyeXB0b2dyYXBoeSBhbmQgd2lsbCBiZSJcclxuICAgICAgICAiIHJlbW92ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZS4iLFxyXG4gICAgICAgIENyeXB0b2dyYXBoeURlcHJlY2F0aW9uV2FybmluZyxcclxuICAgICAgICBzdGFja2xldmVsPTIsXHJcbiAgICApXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvX19hYm91dF9fLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbl9fYWxsX18gPSBbXHJcbiAgICAiX192ZXJzaW9uX18iLFxyXG4gICAgIl9fYXV0aG9yX18iLFxyXG4gICAgIl9fY29weXJpZ2h0X18iLFxyXG5dXHJcblxyXG5fX3ZlcnNpb25fXyA9ICIzNy4wLjIiXHJcblxyXG5fX2F1dGhvcl9fID0gIlRoZSBQeXRob24gQ3J5cHRvZ3JhcGhpYyBBdXRob3JpdHkgYW5kIGluZGl2aWR1YWwgY29udHJpYnV0b3JzIlxyXG5fX2NvcHlyaWdodF9fID0gIkNvcHlyaWdodCAyMDEzLTIwMjEge30iLmZvcm1hdChfX2F1dGhvcl9fKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L3V0aWxzLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuaW1wb3J0IGVudW1cclxuaW1wb3J0IGluc3BlY3RcclxuaW1wb3J0IHN5c1xyXG5pbXBvcnQgdHlwZXNcclxuaW1wb3J0IHR5cGluZ1xyXG5pbXBvcnQgd2FybmluZ3NcclxuXHJcblxyXG4jIFdlIHVzZSBhIFVzZXJXYXJuaW5nIHN1YmNsYXNzLCBpbnN0ZWFkIG9mIERlcHJlY2F0aW9uV2FybmluZywgYmVjYXVzZSBDUHl0aG9uXHJcbiMgZGVjaWRlZCBkZXByZWNhdGlvbiB3YXJuaW5ncyBzaG91bGQgYmUgaW52aXNibGUgYnkgZGVmYXVsdC5cclxuY2xhc3MgQ3J5cHRvZ3JhcGh5RGVwcmVjYXRpb25XYXJuaW5nKFVzZXJXYXJuaW5nKTpcclxuICAgIHBhc3NcclxuXHJcblxyXG4jIFNldmVyYWwgQVBJcyB3ZXJlIGRlcHJlY2F0ZWQgd2l0aCBubyBzcGVjaWZpYyBlbmQtb2YtbGlmZSBkYXRlIGJlY2F1c2Ugb2YgdGhlXHJcbiMgdWJpcXVpdHkgb2YgdGhlaXIgdXNlLiBUaGV5IHNob3VsZCBub3QgYmUgcmVtb3ZlZCB1bnRpbCB3ZSBhZ3JlZSBvbiB3aGVuIHRoYXRcclxuIyBjeWNsZSBlbmRzLlxyXG5QZXJzaXN0ZW50bHlEZXByZWNhdGVkMjAxOSA9IENyeXB0b2dyYXBoeURlcHJlY2F0aW9uV2FybmluZ1xyXG5EZXByZWNhdGVkSW4zNSA9IENyeXB0b2dyYXBoeURlcHJlY2F0aW9uV2FybmluZ1xyXG5EZXByZWNhdGVkSW4zNiA9IENyeXB0b2dyYXBoeURlcHJlY2F0aW9uV2FybmluZ1xyXG5EZXByZWNhdGVkSW4zNyA9IENyeXB0b2dyYXBoeURlcHJlY2F0aW9uV2FybmluZ1xyXG5cclxuXHJcbmRlZiBfY2hlY2tfYnl0ZXMobmFtZTogc3RyLCB2YWx1ZTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICBpZiBub3QgaXNpbnN0YW5jZSh2YWx1ZSwgYnl0ZXMpOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigie30gbXVzdCBiZSBieXRlcyIuZm9ybWF0KG5hbWUpKVxyXG5cclxuXHJcbmRlZiBfY2hlY2tfYnl0ZXNsaWtlKG5hbWU6IHN0ciwgdmFsdWU6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgdHJ5OlxyXG4gICAgICAgIG1lbW9yeXZpZXcodmFsdWUpXHJcbiAgICBleGNlcHQgVHlwZUVycm9yOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigie30gbXVzdCBiZSBieXRlcy1saWtlIi5mb3JtYXQobmFtZSkpXHJcblxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIHR5cGluZ19leHRlbnNpb25zIGltcG9ydCBQcm90b2NvbFxyXG5cclxuICAgIF9UX2NsYXNzID0gdHlwaW5nLlR5cGVWYXIoIl9UX2NsYXNzIiwgYm91bmQ9dHlwZSlcclxuXHJcbiAgICBjbGFzcyBfUmVnaXN0ZXJEZWNvcmF0b3JUeXBlKFByb3RvY29sKTpcclxuICAgICAgICBkZWYgX19jYWxsX18oXHJcbiAgICAgICAgICAgIHNlbGYsIGtsYXNzOiBfVF9jbGFzcywgKiwgY2hlY2tfYW5ub3RhdGlvbnM6IGJvb2wgPSBGYWxzZVxyXG4gICAgICAgICkgLT4gX1RfY2xhc3M6XHJcbiAgICAgICAgICAgIC4uLlxyXG5cclxuXHJcbmRlZiByZWdpc3Rlcl9pbnRlcmZhY2UoaWZhY2U6IGFiYy5BQkNNZXRhKSAtPiAiX1JlZ2lzdGVyRGVjb3JhdG9yVHlwZSI6XHJcbiAgICBkZWYgcmVnaXN0ZXJfZGVjb3JhdG9yKFxyXG4gICAgICAgIGtsYXNzOiAiX1RfY2xhc3MiLCAqLCBjaGVja19hbm5vdGF0aW9uczogYm9vbCA9IEZhbHNlXHJcbiAgICApIC0+ICJfVF9jbGFzcyI6XHJcbiAgICAgICAgdmVyaWZ5X2ludGVyZmFjZShpZmFjZSwga2xhc3MsIGNoZWNrX2Fubm90YXRpb25zPWNoZWNrX2Fubm90YXRpb25zKVxyXG4gICAgICAgIGlmYWNlLnJlZ2lzdGVyKGtsYXNzKVxyXG4gICAgICAgIHJldHVybiBrbGFzc1xyXG5cclxuICAgIHJldHVybiByZWdpc3Rlcl9kZWNvcmF0b3JcclxuXHJcblxyXG5kZWYgaW50X3RvX2J5dGVzKGludGVnZXI6IGludCwgbGVuZ3RoOiB0eXBpbmcuT3B0aW9uYWxbaW50XSA9IE5vbmUpIC0+IGJ5dGVzOlxyXG4gICAgcmV0dXJuIGludGVnZXIudG9fYnl0ZXMoXHJcbiAgICAgICAgbGVuZ3RoIG9yIChpbnRlZ2VyLmJpdF9sZW5ndGgoKSArIDcpIC8vIDggb3IgMSwgImJpZyJcclxuICAgIClcclxuXHJcblxyXG5jbGFzcyBJbnRlcmZhY2VOb3RJbXBsZW1lbnRlZChFeGNlcHRpb24pOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbmRlZiBzdHJpcF9hbm5vdGF0aW9uKHNpZ25hdHVyZTogaW5zcGVjdC5TaWduYXR1cmUpIC0+IGluc3BlY3QuU2lnbmF0dXJlOlxyXG4gICAgcmV0dXJuIGluc3BlY3QuU2lnbmF0dXJlKFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgcGFyYW0ucmVwbGFjZShhbm5vdGF0aW9uPWluc3BlY3QuUGFyYW1ldGVyLmVtcHR5KVxyXG4gICAgICAgICAgICBmb3IgcGFyYW0gaW4gc2lnbmF0dXJlLnBhcmFtZXRlcnMudmFsdWVzKClcclxuICAgICAgICBdXHJcbiAgICApXHJcblxyXG5cclxuZGVmIHZlcmlmeV9pbnRlcmZhY2UoXHJcbiAgICBpZmFjZTogYWJjLkFCQ01ldGEsIGtsYXNzOiBvYmplY3QsICosIGNoZWNrX2Fubm90YXRpb25zOiBib29sID0gRmFsc2VcclxuKTpcclxuICAgIGZvciBtZXRob2QgaW4gaWZhY2UuX19hYnN0cmFjdG1ldGhvZHNfXzpcclxuICAgICAgICBpZiBub3QgaGFzYXR0cihrbGFzcywgbWV0aG9kKTpcclxuICAgICAgICAgICAgcmFpc2UgSW50ZXJmYWNlTm90SW1wbGVtZW50ZWQoXHJcbiAgICAgICAgICAgICAgICAie30gaXMgbWlzc2luZyBhIHshcn0gbWV0aG9kIi5mb3JtYXQoa2xhc3MsIG1ldGhvZClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UoZ2V0YXR0cihpZmFjZSwgbWV0aG9kKSwgYWJjLmFic3RyYWN0cHJvcGVydHkpOlxyXG4gICAgICAgICAgICAjIENhblwndCBwcm9wZXJseSB2ZXJpZnkgdGhlc2UgeWV0LlxyXG4gICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgIHNpZyA9IGluc3BlY3Quc2lnbmF0dXJlKGdldGF0dHIoaWZhY2UsIG1ldGhvZCkpXHJcbiAgICAgICAgYWN0dWFsID0gaW5zcGVjdC5zaWduYXR1cmUoZ2V0YXR0cihrbGFzcywgbWV0aG9kKSlcclxuICAgICAgICBpZiBjaGVja19hbm5vdGF0aW9uczpcclxuICAgICAgICAgICAgb2sgPSBzaWcgPT0gYWN0dWFsXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgb2sgPSBzdHJpcF9hbm5vdGF0aW9uKHNpZykgPT0gc3RyaXBfYW5ub3RhdGlvbihhY3R1YWwpXHJcbiAgICAgICAgaWYgbm90IG9rOlxyXG4gICAgICAgICAgICByYWlzZSBJbnRlcmZhY2VOb3RJbXBsZW1lbnRlZChcclxuICAgICAgICAgICAgICAgICJ7fS57fVwncyBzaWduYXR1cmUgZGlmZmVycyBmcm9tIHRoZSBleHBlY3RlZC4gRXhwZWN0ZWQ6ICJcclxuICAgICAgICAgICAgICAgICJ7IXJ9LiBSZWNlaXZlZDogeyFyfSIuZm9ybWF0KGtsYXNzLCBtZXRob2QsIHNpZywgYWN0dWFsKVxyXG4gICAgICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgX0RlcHJlY2F0ZWRWYWx1ZTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZTogb2JqZWN0LCBtZXNzYWdlOiBzdHIsIHdhcm5pbmdfY2xhc3MpOlxyXG4gICAgICAgIHNlbGYudmFsdWUgPSB2YWx1ZVxyXG4gICAgICAgIHNlbGYubWVzc2FnZSA9IG1lc3NhZ2VcclxuICAgICAgICBzZWxmLndhcm5pbmdfY2xhc3MgPSB3YXJuaW5nX2NsYXNzXHJcblxyXG5cclxuY2xhc3MgX01vZHVsZVdpdGhEZXByZWNhdGlvbnModHlwZXMuTW9kdWxlVHlwZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgbW9kdWxlOiB0eXBlcy5Nb2R1bGVUeXBlKTpcclxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKG1vZHVsZS5fX25hbWVfXylcclxuICAgICAgICBzZWxmLl9fZGljdF9fWyJfbW9kdWxlIl0gPSBtb2R1bGVcclxuXHJcbiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgYXR0cjogc3RyKSAtPiBvYmplY3Q6XHJcbiAgICAgICAgb2JqID0gZ2V0YXR0cihzZWxmLl9tb2R1bGUsIGF0dHIpXHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShvYmosIF9EZXByZWNhdGVkVmFsdWUpOlxyXG4gICAgICAgICAgICB3YXJuaW5ncy53YXJuKG9iai5tZXNzYWdlLCBvYmoud2FybmluZ19jbGFzcywgc3RhY2tsZXZlbD0yKVxyXG4gICAgICAgICAgICBvYmogPSBvYmoudmFsdWVcclxuICAgICAgICByZXR1cm4gb2JqXHJcblxyXG4gICAgZGVmIF9fc2V0YXR0cl9fKHNlbGYsIGF0dHI6IHN0ciwgdmFsdWU6IG9iamVjdCkgLT4gTm9uZTpcclxuICAgICAgICBzZXRhdHRyKHNlbGYuX21vZHVsZSwgYXR0ciwgdmFsdWUpXHJcblxyXG4gICAgZGVmIF9fZGVsYXR0cl9fKHNlbGYsIGF0dHI6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBvYmogPSBnZXRhdHRyKHNlbGYuX21vZHVsZSwgYXR0cilcclxuICAgICAgICBpZiBpc2luc3RhbmNlKG9iaiwgX0RlcHJlY2F0ZWRWYWx1ZSk6XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4ob2JqLm1lc3NhZ2UsIG9iai53YXJuaW5nX2NsYXNzLCBzdGFja2xldmVsPTIpXHJcblxyXG4gICAgICAgIGRlbGF0dHIoc2VsZi5fbW9kdWxlLCBhdHRyKVxyXG5cclxuICAgIGRlZiBfX2Rpcl9fKHNlbGYpIC0+IHR5cGluZy5TZXF1ZW5jZVtzdHJdOlxyXG4gICAgICAgIHJldHVybiBbIl9tb2R1bGUiXSArIGRpcihzZWxmLl9tb2R1bGUpXHJcblxyXG5cclxuZGVmIGRlcHJlY2F0ZWQoXHJcbiAgICB2YWx1ZTogb2JqZWN0LFxyXG4gICAgbW9kdWxlX25hbWU6IHN0cixcclxuICAgIG1lc3NhZ2U6IHN0cixcclxuICAgIHdhcm5pbmdfY2xhc3M6IHR5cGluZy5UeXBlW1dhcm5pbmddLFxyXG4gICAgbmFtZTogdHlwaW5nLk9wdGlvbmFsW3N0cl0gPSBOb25lLFxyXG4pIC0+IF9EZXByZWNhdGVkVmFsdWU6XHJcbiAgICBtb2R1bGUgPSBzeXMubW9kdWxlc1ttb2R1bGVfbmFtZV1cclxuICAgIGlmIG5vdCBpc2luc3RhbmNlKG1vZHVsZSwgX01vZHVsZVdpdGhEZXByZWNhdGlvbnMpOlxyXG4gICAgICAgIHN5cy5tb2R1bGVzW21vZHVsZV9uYW1lXSA9IG1vZHVsZSA9IF9Nb2R1bGVXaXRoRGVwcmVjYXRpb25zKG1vZHVsZSlcclxuICAgIGR2ID0gX0RlcHJlY2F0ZWRWYWx1ZSh2YWx1ZSwgbWVzc2FnZSwgd2FybmluZ19jbGFzcylcclxuICAgICMgTWFpbnRhaW4gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBgbmFtZSBpcyBOb25lYCBmb3IgcHlPcGVuU1NMLlxyXG4gICAgaWYgbmFtZSBpcyBub3QgTm9uZTpcclxuICAgICAgICBzZXRhdHRyKG1vZHVsZSwgbmFtZSwgZHYpXHJcbiAgICByZXR1cm4gZHZcclxuXHJcblxyXG5kZWYgY2FjaGVkX3Byb3BlcnR5KGZ1bmM6IHR5cGluZy5DYWxsYWJsZSkgLT4gcHJvcGVydHk6XHJcbiAgICBjYWNoZWRfbmFtZSA9ICJfY2FjaGVkX3t9Ii5mb3JtYXQoZnVuYylcclxuICAgIHNlbnRpbmVsID0gb2JqZWN0KClcclxuXHJcbiAgICBkZWYgaW5uZXIoaW5zdGFuY2U6IG9iamVjdCk6XHJcbiAgICAgICAgY2FjaGUgPSBnZXRhdHRyKGluc3RhbmNlLCBjYWNoZWRfbmFtZSwgc2VudGluZWwpXHJcbiAgICAgICAgaWYgY2FjaGUgaXMgbm90IHNlbnRpbmVsOlxyXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVcclxuICAgICAgICByZXN1bHQgPSBmdW5jKGluc3RhbmNlKVxyXG4gICAgICAgIHNldGF0dHIoaW5zdGFuY2UsIGNhY2hlZF9uYW1lLCByZXN1bHQpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG5cclxuICAgIHJldHVybiBwcm9wZXJ0eShpbm5lcilcclxuXHJcblxyXG4jIFB5dGhvbiAzLjEwIGNoYW5nZWQgcmVwcmVzZW50YXRpb24gb2YgZW51bXMuIFdlIHVzZSB3ZWxsLWRlZmluZWQgb2JqZWN0XHJcbiMgcmVwcmVzZW50YXRpb24gYW5kIHN0cmluZyByZXByZXNlbnRhdGlvbiBmcm9tIFB5dGhvbiAzLjkuXHJcbmNsYXNzIEVudW0oZW51bS5FbnVtKTpcclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIGYiPHtzZWxmLl9fY2xhc3NfXy5fX25hbWVfX30ue3NlbGYuX25hbWVffToge3NlbGYuX3ZhbHVlXyFyfT4iXHJcblxyXG4gICAgZGVmIF9fc3RyX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBmIntzZWxmLl9fY2xhc3NfXy5fX25hbWVfX30ue3NlbGYuX25hbWVffSJcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvX19pbml0X18ucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcbiIiIlxyXG5IYXphcmRvdXMgTWF0ZXJpYWxzXHJcblxyXG5UaGlzIGlzIGEgIkhhemFyZG91cyBNYXRlcmlhbHMiIG1vZHVsZS4gWW91IHNob3VsZCBPTkxZIHVzZSBpdCBpZiB5b3VcJ3JlXHJcbjEwMCUgYWJzb2x1dGVseSBzdXJlIHRoYXQgeW91IGtub3cgd2hhdCB5b3VcJ3JlIGRvaW5nIGJlY2F1c2UgdGhpcyBtb2R1bGVcclxuaXMgZnVsbCBvZiBsYW5kIG1pbmVzLCBkcmFnb25zLCBhbmQgZGlub3NhdXJzIHdpdGggbGFzZXIgZ3Vucy5cclxuIiIiXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L2JhY2tlbmRzL19faW5pdF9fLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5mcm9tIHR5cGluZyBpbXBvcnQgQW55XHJcblxyXG5cclxuZGVmIGRlZmF1bHRfYmFja2VuZCgpIC0+IEFueTpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICByZXR1cm4gYmFja2VuZFxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL19faW5pdF9fLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcblxyXG5fX2FsbF9fID0gWyJiYWNrZW5kIl1cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC9iYWNrZW5kLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBjb2xsZWN0aW9uc1xyXG5pbXBvcnQgY29udGV4dGxpYlxyXG5pbXBvcnQgaXRlcnRvb2xzXHJcbmltcG9ydCB0eXBpbmdcclxuaW1wb3J0IHdhcm5pbmdzXHJcbmZyb20gY29udGV4dGxpYiBpbXBvcnQgY29udGV4dG1hbmFnZXJcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlscywgeDUwOVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCBVbnN1cHBvcnRlZEFsZ29yaXRobSwgX1JlYXNvbnNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wgaW1wb3J0IGFlYWRcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuY2lwaGVycyBpbXBvcnQgX0NpcGhlckNvbnRleHRcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuY21hYyBpbXBvcnQgX0NNQUNDb250ZXh0XHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmRoIGltcG9ydCAoXHJcbiAgICBfREhQYXJhbWV0ZXJzLFxyXG4gICAgX0RIUHJpdmF0ZUtleSxcclxuICAgIF9ESFB1YmxpY0tleSxcclxuICAgIF9kaF9wYXJhbXNfZHVwLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmRzYSBpbXBvcnQgKFxyXG4gICAgX0RTQVBhcmFtZXRlcnMsXHJcbiAgICBfRFNBUHJpdmF0ZUtleSxcclxuICAgIF9EU0FQdWJsaWNLZXksXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuZWMgaW1wb3J0IChcclxuICAgIF9FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleSxcclxuICAgIF9FbGxpcHRpY0N1cnZlUHVibGljS2V5LFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmVkMjU1MTkgaW1wb3J0IChcclxuICAgIF9FZDI1NTE5UHJpdmF0ZUtleSxcclxuICAgIF9FZDI1NTE5UHVibGljS2V5LFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmVkNDQ4IGltcG9ydCAoXHJcbiAgICBfRUQ0NDhfS0VZX1NJWkUsXHJcbiAgICBfRWQ0NDhQcml2YXRlS2V5LFxyXG4gICAgX0VkNDQ4UHVibGljS2V5LFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmhhc2hlcyBpbXBvcnQgX0hhc2hDb250ZXh0XHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmhtYWMgaW1wb3J0IF9ITUFDQ29udGV4dFxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5wb2x5MTMwNSBpbXBvcnQgKFxyXG4gICAgX1BPTFkxMzA1X0tFWV9TSVpFLFxyXG4gICAgX1BvbHkxMzA1Q29udGV4dCxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5yc2EgaW1wb3J0IChcclxuICAgIF9SU0FQcml2YXRlS2V5LFxyXG4gICAgX1JTQVB1YmxpY0tleSxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC54MjU1MTkgaW1wb3J0IChcclxuICAgIF9YMjU1MTlQcml2YXRlS2V5LFxyXG4gICAgX1gyNTUxOVB1YmxpY0tleSxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC54NDQ4IGltcG9ydCAoXHJcbiAgICBfWDQ0OFByaXZhdGVLZXksXHJcbiAgICBfWDQ0OFB1YmxpY0tleSxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmluZGluZ3MuX3J1c3QgaW1wb3J0IChcclxuICAgIHg1MDkgYXMgcnVzdF94NTA5LFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iaW5kaW5ncy5vcGVuc3NsIGltcG9ydCBiaW5kaW5nXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBoYXNoZXMsIHNlcmlhbGl6YXRpb25cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuX2FzeW1tZXRyaWMgaW1wb3J0IEFzeW1tZXRyaWNQYWRkaW5nXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMgaW1wb3J0IChcclxuICAgIGRoLFxyXG4gICAgZHNhLFxyXG4gICAgZWMsXHJcbiAgICBlZDI1NTE5LFxyXG4gICAgZWQ0NDgsXHJcbiAgICByc2EsXHJcbiAgICB4MjU1MTksXHJcbiAgICB4NDQ4LFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMucGFkZGluZyBpbXBvcnQgKFxyXG4gICAgTUdGMSxcclxuICAgIE9BRVAsXHJcbiAgICBQS0NTMXYxNSxcclxuICAgIFBTUyxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljLnR5cGVzIGltcG9ydCAoXHJcbiAgICBDRVJUSUZJQ0FURV9JU1NVRVJfUFVCTElDX0tFWV9UWVBFUyxcclxuICAgIFBSSVZBVEVfS0VZX1RZUEVTLFxyXG4gICAgUFVCTElDX0tFWV9UWVBFUyxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5jaXBoZXJzIGltcG9ydCAoXHJcbiAgICBCbG9ja0NpcGhlckFsZ29yaXRobSxcclxuICAgIENpcGhlckFsZ29yaXRobSxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5jaXBoZXJzLmFsZ29yaXRobXMgaW1wb3J0IChcclxuICAgIEFFUyxcclxuICAgIEFSQzQsXHJcbiAgICBDYW1lbGxpYSxcclxuICAgIENoYUNoYTIwLFxyXG4gICAgU000LFxyXG4gICAgVHJpcGxlREVTLFxyXG4gICAgX0Jsb3dmaXNoSW50ZXJuYWwsXHJcbiAgICBfQ0FTVDVJbnRlcm5hbCxcclxuICAgIF9JREVBSW50ZXJuYWwsXHJcbiAgICBfU0VFREludGVybmFsLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmNpcGhlcnMubW9kZXMgaW1wb3J0IChcclxuICAgIENCQyxcclxuICAgIENGQixcclxuICAgIENGQjgsXHJcbiAgICBDVFIsXHJcbiAgICBFQ0IsXHJcbiAgICBHQ00sXHJcbiAgICBNb2RlLFxyXG4gICAgT0ZCLFxyXG4gICAgWFRTLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmtkZiBpbXBvcnQgc2NyeXB0XHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLnNlcmlhbGl6YXRpb24gaW1wb3J0IHBrY3M3LCBzc2hcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuc2VyaWFsaXphdGlvbi5wa2NzMTIgaW1wb3J0IChcclxuICAgIFBLQ1MxMkNlcnRpZmljYXRlLFxyXG4gICAgUEtDUzEyS2V5QW5kQ2VydGlmaWNhdGVzLFxyXG4gICAgX0FMTE9XRURfUEtDUzEyX1RZUEVTLFxyXG4gICAgX1BLQ1MxMl9DQVNfVFlQRVMsXHJcbilcclxuXHJcblxyXG5fTWVtb3J5QklPID0gY29sbGVjdGlvbnMubmFtZWR0dXBsZSgiX01lbW9yeUJJTyIsIFsiYmlvIiwgImNoYXJfcHRyIl0pXHJcblxyXG5cclxuIyBOb3QgYWN0dWFsbHkgc3VwcG9ydGVkLCBqdXN0IHVzZWQgYXMgYSBtYXJrZXIgZm9yIHNvbWUgc2VyaWFsaXphdGlvbiB0ZXN0cy5cclxuY2xhc3MgX1JDMjpcclxuICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBCYWNrZW5kOlxyXG4gICAgIiIiXHJcbiAgICBPcGVuU1NMIEFQSSBiaW5kaW5nIGludGVyZmFjZXMuXHJcbiAgICAiIiJcclxuXHJcbiAgICBuYW1lID0gIm9wZW5zc2wiXHJcblxyXG4gICAgIyBGSVBTIGhhcyBvcGluaW9ucyBhYm91dCBhY2NlcHRhYmxlIGFsZ29yaXRobXMgYW5kIGtleSBzaXplcywgYnV0IHRoZVxyXG4gICAgIyBkaXNhbGxvd2VkIGFsZ29yaXRobXMgYXJlIHN0aWxsIHByZXNlbnQgaW4gT3BlblNTTC4gVGhleSBqdXN0IGVycm9yIGlmXHJcbiAgICAjIHlvdSB0cnkgdG8gdXNlIHRoZW0uIFRvIGF2b2lkIHRoYXQgd2UgYWxsb3dsaXN0IHRoZSBhbGdvcml0aG1zIGluXHJcbiAgICAjIEZJUFMgMTQwLTMuIFRoaXMgaXNuXCd0IGlkZWFsLCBidXQgRklQUyAxNDAtMyBpcyB0cmFzaCBzbyBoZXJlIHdlIGFyZS5cclxuICAgIF9maXBzX2FlYWQgPSB7XHJcbiAgICAgICAgYiJhZXMtMTI4LWNjbSIsXHJcbiAgICAgICAgYiJhZXMtMTkyLWNjbSIsXHJcbiAgICAgICAgYiJhZXMtMjU2LWNjbSIsXHJcbiAgICAgICAgYiJhZXMtMTI4LWdjbSIsXHJcbiAgICAgICAgYiJhZXMtMTkyLWdjbSIsXHJcbiAgICAgICAgYiJhZXMtMjU2LWdjbSIsXHJcbiAgICB9XHJcbiAgICAjIFRyaXBsZURFUyBlbmNyeXB0aW9uIGlzIGRpc2FsbG93ZWQvZGVwcmVjYXRlZCB0aHJvdWdob3V0IDIwMjMgaW5cclxuICAgICMgRklQUyAxNDAtMy4gVG8ga2VlcCBpdCBzaW1wbGUgd2UgZGVueWxpc3QgYW55IHVzZSBvZiBUcmlwbGVERVMgKFRERUEpLlxyXG4gICAgX2ZpcHNfY2lwaGVycyA9IChBRVMsKVxyXG4gICAgIyBTb21ldGltZXMgU0hBMSBpcyBzdGlsbCBwZXJtaXNzaWJsZS4gVGhhdCBsb2dpYyBpcyBjb250YWluZWRcclxuICAgICMgd2l0aGluIHRoZSB2YXJpb3VzICpfc3VwcG9ydGVkIG1ldGhvZHMuXHJcbiAgICBfZmlwc19oYXNoZXMgPSAoXHJcbiAgICAgICAgaGFzaGVzLlNIQTIyNCxcclxuICAgICAgICBoYXNoZXMuU0hBMjU2LFxyXG4gICAgICAgIGhhc2hlcy5TSEEzODQsXHJcbiAgICAgICAgaGFzaGVzLlNIQTUxMixcclxuICAgICAgICBoYXNoZXMuU0hBNTEyXzIyNCxcclxuICAgICAgICBoYXNoZXMuU0hBNTEyXzI1NixcclxuICAgICAgICBoYXNoZXMuU0hBM18yMjQsXHJcbiAgICAgICAgaGFzaGVzLlNIQTNfMjU2LFxyXG4gICAgICAgIGhhc2hlcy5TSEEzXzM4NCxcclxuICAgICAgICBoYXNoZXMuU0hBM181MTIsXHJcbiAgICAgICAgaGFzaGVzLlNIQUtFMTI4LFxyXG4gICAgICAgIGhhc2hlcy5TSEFLRTI1NixcclxuICAgIClcclxuICAgIF9maXBzX2VjZGhfY3VydmVzID0gKFxyXG4gICAgICAgIGVjLlNFQ1AyMjRSMSxcclxuICAgICAgICBlYy5TRUNQMjU2UjEsXHJcbiAgICAgICAgZWMuU0VDUDM4NFIxLFxyXG4gICAgICAgIGVjLlNFQ1A1MjFSMSxcclxuICAgIClcclxuICAgIF9maXBzX3JzYV9taW5fa2V5X3NpemUgPSAyMDQ4XHJcbiAgICBfZmlwc19yc2FfbWluX3B1YmxpY19leHBvbmVudCA9IDY1NTM3XHJcbiAgICBfZmlwc19kc2FfbWluX21vZHVsdXMgPSAxIDw8IDIwNDhcclxuICAgIF9maXBzX2RoX21pbl9rZXlfc2l6ZSA9IDIwNDhcclxuICAgIF9maXBzX2RoX21pbl9tb2R1bHVzID0gMSA8PCBfZmlwc19kaF9taW5fa2V5X3NpemVcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZik6XHJcbiAgICAgICAgc2VsZi5fYmluZGluZyA9IGJpbmRpbmcuQmluZGluZygpXHJcbiAgICAgICAgc2VsZi5fZmZpID0gc2VsZi5fYmluZGluZy5mZmlcclxuICAgICAgICBzZWxmLl9saWIgPSBzZWxmLl9iaW5kaW5nLmxpYlxyXG4gICAgICAgIHNlbGYuX3JzYV9za2lwX2NoZWNrX2tleSA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fZmlwc19lbmFibGVkID0gc2VsZi5faXNfZmlwc19lbmFibGVkKClcclxuXHJcbiAgICAgICAgc2VsZi5fY2lwaGVyX3JlZ2lzdHJ5ID0ge31cclxuICAgICAgICBzZWxmLl9yZWdpc3Rlcl9kZWZhdWx0X2NpcGhlcnMoKVxyXG4gICAgICAgIGlmIHNlbGYuX2ZpcHNfZW5hYmxlZCBhbmQgc2VsZi5fbGliLkNSWVBUT0dSQVBIWV9ORUVEU19PU1JBTkRPTV9FTkdJTkU6XHJcbiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oXHJcbiAgICAgICAgICAgICAgICAiT3BlblNTTCBGSVBTIG1vZGUgaXMgZW5hYmxlZC4gQ2FuXCd0IGVuYWJsZSBEUkJHIGZvcmsgc2FmZXR5LiIsXHJcbiAgICAgICAgICAgICAgICBVc2VyV2FybmluZyxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuYWN0aXZhdGVfb3NyYW5kb21fZW5naW5lKClcclxuICAgICAgICBzZWxmLl9kaF90eXBlcyA9IFtzZWxmLl9saWIuRVZQX1BLRVlfREhdXHJcbiAgICAgICAgaWYgc2VsZi5fbGliLkNyeXB0b2dyYXBoeV9IQVNfRVZQX1BLRVlfREhYOlxyXG4gICAgICAgICAgICBzZWxmLl9kaF90eXBlcy5hcHBlbmQoc2VsZi5fbGliLkVWUF9QS0VZX0RIWClcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPE9wZW5TU0xCYWNrZW5kKHZlcnNpb246IHt9LCBGSVBTOiB7fSk+Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF92ZXJzaW9uX3RleHQoKSwgc2VsZi5fZmlwc19lbmFibGVkXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBvcGVuc3NsX2Fzc2VydChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG9rOiBib29sLFxyXG4gICAgICAgIGVycm9yczogdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5MaXN0W2JpbmRpbmcuX09wZW5TU0xFcnJvcl1dID0gTm9uZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICByZXR1cm4gYmluZGluZy5fb3BlbnNzbF9hc3NlcnQoc2VsZi5fbGliLCBvaywgZXJyb3JzPWVycm9ycylcclxuXHJcbiAgICBkZWYgX2lzX2ZpcHNfZW5hYmxlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIGlmIHNlbGYuX2xpYi5DcnlwdG9ncmFwaHlfSEFTXzMwMF9GSVBTOlxyXG4gICAgICAgICAgICBtb2RlID0gc2VsZi5fbGliLkVWUF9kZWZhdWx0X3Byb3BlcnRpZXNfaXNfZmlwc19lbmFibGVkKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fZmZpLk5VTExcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIG1vZGUgPSBnZXRhdHRyKHNlbGYuX2xpYiwgIkZJUFNfbW9kZSIsIGxhbWJkYTogMCkoKVxyXG5cclxuICAgICAgICBpZiBtb2RlID09IDA6XHJcbiAgICAgICAgICAgICMgT3BlblNTTCB3aXRob3V0IEZJUFMgcHVzaGVzIGFuIGVycm9yIG9uIHRoZSBlcnJvciBzdGFja1xyXG4gICAgICAgICAgICBzZWxmLl9saWIuRVJSX2NsZWFyX2Vycm9yKClcclxuICAgICAgICByZXR1cm4gYm9vbChtb2RlKVxyXG5cclxuICAgIGRlZiBfZW5hYmxlX2ZpcHMoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICAjIFRoaXMgZnVuY3Rpb24gZW5hYmxlcyBGSVBTIG1vZGUgZm9yIE9wZW5TU0wgMy4wLjAgb24gaW5zdGFsbHMgdGhhdFxyXG4gICAgICAgICMgaGF2ZSB0aGUgRklQUyBwcm92aWRlciBpbnN0YWxsZWQgcHJvcGVybHkuXHJcbiAgICAgICAgc2VsZi5fYmluZGluZy5fZW5hYmxlX2ZpcHMoKVxyXG4gICAgICAgIGFzc2VydCBzZWxmLl9pc19maXBzX2VuYWJsZWQoKVxyXG4gICAgICAgIHNlbGYuX2ZpcHNfZW5hYmxlZCA9IHNlbGYuX2lzX2ZpcHNfZW5hYmxlZCgpXHJcblxyXG4gICAgZGVmIGFjdGl2YXRlX2J1aWx0aW5fcmFuZG9tKHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fbGliLkNSWVBUT0dSQVBIWV9ORUVEU19PU1JBTkRPTV9FTkdJTkU6XHJcbiAgICAgICAgICAgICMgT2J0YWluIGEgbmV3IHN0cnVjdHVyYWwgcmVmZXJlbmNlLlxyXG4gICAgICAgICAgICBlID0gc2VsZi5fbGliLkVOR0lORV9nZXRfZGVmYXVsdF9SQU5EKClcclxuICAgICAgICAgICAgaWYgZSAhPSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2xpYi5FTkdJTkVfdW5yZWdpc3Rlcl9SQU5EKGUpXHJcbiAgICAgICAgICAgICAgICAjIFJlc2V0IHRoZSBSTkcgdG8gdXNlIHRoZSBidWlsdC1pbi5cclxuICAgICAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5SQU5EX3NldF9yYW5kX21ldGhvZChzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgICAgICAgICAjIGRlY3JlbWVudCB0aGUgc3RydWN0dXJhbCByZWZlcmVuY2UgZnJvbSBnZXRfZGVmYXVsdF9SQU5EXHJcbiAgICAgICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuRU5HSU5FX2ZpbmlzaChlKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICBAY29udGV4dGxpYi5jb250ZXh0bWFuYWdlclxyXG4gICAgZGVmIF9nZXRfb3N1cmFuZG9tX2VuZ2luZShzZWxmKTpcclxuICAgICAgICAjIEZldGNoZXMgYW4gZW5naW5lIGJ5IGlkIGFuZCByZXR1cm5zIGl0LiBUaGlzIGNyZWF0ZXMgYSBzdHJ1Y3R1cmFsXHJcbiAgICAgICAgIyByZWZlcmVuY2UuXHJcbiAgICAgICAgZSA9IHNlbGYuX2xpYi5FTkdJTkVfYnlfaWQoc2VsZi5fbGliLkNyeXB0b2dyYXBoeV9vc3JhbmRvbV9lbmdpbmVfaWQpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChlICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgICMgSW5pdGlhbGl6ZSB0aGUgZW5naW5lIGZvciB1c2UuIFRoaXMgYWRkcyBhIGZ1bmN0aW9uYWwgcmVmZXJlbmNlLlxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FTkdJTkVfaW5pdChlKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgeWllbGQgZVxyXG4gICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgICMgRGVjcmVtZW50IHRoZSBzdHJ1Y3R1cmFsIHJlZiBpbmNyZW1lbnRlZCBieSBFTkdJTkVfYnlfaWQuXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FTkdJTkVfZnJlZShlKVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgICAgICAjIERlY3JlbWVudCB0aGUgZnVuY3Rpb25hbCByZWYgaW5jcmVtZW50ZWQgYnkgRU5HSU5FX2luaXQuXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FTkdJTkVfZmluaXNoKGUpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgZGVmIGFjdGl2YXRlX29zcmFuZG9tX2VuZ2luZShzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHNlbGYuX2xpYi5DUllQVE9HUkFQSFlfTkVFRFNfT1NSQU5ET01fRU5HSU5FOlxyXG4gICAgICAgICAgICAjIFVucmVnaXN0ZXIgYW5kIGZyZWUgdGhlIGN1cnJlbnQgZW5naW5lLlxyXG4gICAgICAgICAgICBzZWxmLmFjdGl2YXRlX2J1aWx0aW5fcmFuZG9tKClcclxuICAgICAgICAgICAgd2l0aCBzZWxmLl9nZXRfb3N1cmFuZG9tX2VuZ2luZSgpIGFzIGU6XHJcbiAgICAgICAgICAgICAgICAjIFNldCB0aGUgZW5naW5lIGFzIHRoZSBkZWZhdWx0IFJBTkQgcHJvdmlkZXIuXHJcbiAgICAgICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuRU5HSU5FX3NldF9kZWZhdWx0X1JBTkQoZSlcclxuICAgICAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgICAgICMgUmVzZXQgdGhlIFJORyB0byB1c2UgdGhlIGVuZ2luZVxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuUkFORF9zZXRfcmFuZF9tZXRob2Qoc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgZGVmIG9zcmFuZG9tX2VuZ2luZV9pbXBsZW1lbnRhdGlvbihzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgYnVmID0gc2VsZi5fZmZpLm5ldygiY2hhcltdIiwgNjQpXHJcbiAgICAgICAgd2l0aCBzZWxmLl9nZXRfb3N1cmFuZG9tX2VuZ2luZSgpIGFzIGU6XHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FTkdJTkVfY3RybF9jbWQoXHJcbiAgICAgICAgICAgICAgICBlLCBiImdldF9pbXBsZW1lbnRhdGlvbiIsIGxlbihidWYpLCBidWYsIHNlbGYuX2ZmaS5OVUxMLCAwXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPiAwKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mZmkuc3RyaW5nKGJ1ZikuZGVjb2RlKCJhc2NpaSIpXHJcblxyXG4gICAgZGVmIG9wZW5zc2xfdmVyc2lvbl90ZXh0KHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBGcmllbmRseSBzdHJpbmcgbmFtZSBvZiB0aGUgbG9hZGVkIE9wZW5TU0wgbGlicmFyeS4gVGhpcyBpcyBub3RcclxuICAgICAgICBuZWNlc3NhcmlseSB0aGUgc2FtZSB2ZXJzaW9uIGFzIGl0IHdhcyBjb21waWxlZCBhZ2FpbnN0LlxyXG5cclxuICAgICAgICBFeGFtcGxlOiBPcGVuU1NMIDEuMS4xZCAgMTAgU2VwIDIwMTlcclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gc2VsZi5fZmZpLnN0cmluZyhcclxuICAgICAgICAgICAgc2VsZi5fbGliLk9wZW5TU0xfdmVyc2lvbihzZWxmLl9saWIuT1BFTlNTTF9WRVJTSU9OKVxyXG4gICAgICAgICkuZGVjb2RlKCJhc2NpaSIpXHJcblxyXG4gICAgZGVmIG9wZW5zc2xfdmVyc2lvbl9udW1iZXIoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9saWIuT3BlblNTTF92ZXJzaW9uX251bSgpXHJcblxyXG4gICAgZGVmIGNyZWF0ZV9obWFjX2N0eChcclxuICAgICAgICBzZWxmLCBrZXk6IGJ5dGVzLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtXHJcbiAgICApIC0+IF9ITUFDQ29udGV4dDpcclxuICAgICAgICByZXR1cm4gX0hNQUNDb250ZXh0KHNlbGYsIGtleSwgYWxnb3JpdGhtKVxyXG5cclxuICAgIGRlZiBfZXZwX21kX2Zyb21fYWxnb3JpdGhtKHNlbGYsIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0pOlxyXG4gICAgICAgIGlmIGFsZ29yaXRobS5uYW1lID09ICJibGFrZTJiIiBvciBhbGdvcml0aG0ubmFtZSA9PSAiYmxha2UycyI6XHJcbiAgICAgICAgICAgIGFsZyA9ICJ7fXt9Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICBhbGdvcml0aG0ubmFtZSwgYWxnb3JpdGhtLmRpZ2VzdF9zaXplICogOFxyXG4gICAgICAgICAgICApLmVuY29kZSgiYXNjaWkiKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGFsZyA9IGFsZ29yaXRobS5uYW1lLmVuY29kZSgiYXNjaWkiKVxyXG5cclxuICAgICAgICBldnBfbWQgPSBzZWxmLl9saWIuRVZQX2dldF9kaWdlc3RieW5hbWUoYWxnKVxyXG4gICAgICAgIHJldHVybiBldnBfbWRcclxuXHJcbiAgICBkZWYgX2V2cF9tZF9ub25fbnVsbF9mcm9tX2FsZ29yaXRobShzZWxmLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtKTpcclxuICAgICAgICBldnBfbWQgPSBzZWxmLl9ldnBfbWRfZnJvbV9hbGdvcml0aG0oYWxnb3JpdGhtKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZXZwX21kICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJldHVybiBldnBfbWRcclxuXHJcbiAgICBkZWYgaGFzaF9zdXBwb3J0ZWQoc2VsZiwgYWxnb3JpdGhtOiBoYXNoZXMuSGFzaEFsZ29yaXRobSkgLT4gYm9vbDpcclxuICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQgYW5kIG5vdCBpc2luc3RhbmNlKGFsZ29yaXRobSwgc2VsZi5fZmlwc19oYXNoZXMpOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICAgICAgZXZwX21kID0gc2VsZi5fZXZwX21kX2Zyb21fYWxnb3JpdGhtKGFsZ29yaXRobSlcclxuICAgICAgICByZXR1cm4gZXZwX21kICE9IHNlbGYuX2ZmaS5OVUxMXHJcblxyXG4gICAgZGVmIHNpZ25hdHVyZV9oYXNoX3N1cHBvcnRlZChcclxuICAgICAgICBzZWxmLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtXHJcbiAgICApIC0+IGJvb2w6XHJcbiAgICAgICAgIyBEZWRpY2F0ZWQgY2hlY2sgZm9yIGhhc2hpbmcgYWxnb3JpdGhtIHVzZSBpbiBtZXNzYWdlIGRpZ2VzdCBmb3JcclxuICAgICAgICAjIHNpZ25hdHVyZXMsIGUuZy4gUlNBIFBLQ1MjMSB2MS41IFNIQTEgKHNoYTFXaXRoUlNBRW5jcnlwdGlvbikuXHJcbiAgICAgICAgaWYgc2VsZi5fZmlwc19lbmFibGVkIGFuZCBpc2luc3RhbmNlKGFsZ29yaXRobSwgaGFzaGVzLlNIQTEpOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuICAgICAgICByZXR1cm4gc2VsZi5oYXNoX3N1cHBvcnRlZChhbGdvcml0aG0pXHJcblxyXG4gICAgZGVmIHNjcnlwdF9zdXBwb3J0ZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9saWIuQ3J5cHRvZ3JhcGh5X0hBU19TQ1JZUFQgPT0gMVxyXG5cclxuICAgIGRlZiBobWFjX3N1cHBvcnRlZChzZWxmLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtKSAtPiBib29sOlxyXG4gICAgICAgICMgRklQUyBtb2RlIHN0aWxsIGFsbG93cyBTSEExIGZvciBITUFDXHJcbiAgICAgICAgaWYgc2VsZi5fZmlwc19lbmFibGVkIGFuZCBpc2luc3RhbmNlKGFsZ29yaXRobSwgaGFzaGVzLlNIQTEpOlxyXG4gICAgICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5oYXNoX3N1cHBvcnRlZChhbGdvcml0aG0pXHJcblxyXG4gICAgZGVmIGNyZWF0ZV9oYXNoX2N0eChcclxuICAgICAgICBzZWxmLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtXHJcbiAgICApIC0+IGhhc2hlcy5IYXNoQ29udGV4dDpcclxuICAgICAgICByZXR1cm4gX0hhc2hDb250ZXh0KHNlbGYsIGFsZ29yaXRobSlcclxuXHJcbiAgICBkZWYgY2lwaGVyX3N1cHBvcnRlZChzZWxmLCBjaXBoZXI6IENpcGhlckFsZ29yaXRobSwgbW9kZTogTW9kZSkgLT4gYm9vbDpcclxuICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQ6XHJcbiAgICAgICAgICAgICMgRklQUyBtb2RlIHJlcXVpcmVzIEFFUy4gVHJpcGxlREVTIGlzIGRpc2FsbG93ZWQvZGVwcmVjYXRlZCBpblxyXG4gICAgICAgICAgICAjIEZJUFMgMTQwLTMuXHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGNpcGhlciwgc2VsZi5fZmlwc19jaXBoZXJzKTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGFkYXB0ZXIgPSBzZWxmLl9jaXBoZXJfcmVnaXN0cnlbdHlwZShjaXBoZXIpLCB0eXBlKG1vZGUpXVxyXG4gICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgZXZwX2NpcGhlciA9IGFkYXB0ZXIoc2VsZiwgY2lwaGVyLCBtb2RlKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mZmkuTlVMTCAhPSBldnBfY2lwaGVyXHJcblxyXG4gICAgZGVmIHJlZ2lzdGVyX2NpcGhlcl9hZGFwdGVyKHNlbGYsIGNpcGhlcl9jbHMsIG1vZGVfY2xzLCBhZGFwdGVyKTpcclxuICAgICAgICBpZiAoY2lwaGVyX2NscywgbW9kZV9jbHMpIGluIHNlbGYuX2NpcGhlcl9yZWdpc3RyeTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJEdXBsaWNhdGUgcmVnaXN0cmF0aW9uIGZvcjoge30ge30uIi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgY2lwaGVyX2NscywgbW9kZV9jbHNcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2NpcGhlcl9yZWdpc3RyeVtjaXBoZXJfY2xzLCBtb2RlX2Nsc10gPSBhZGFwdGVyXHJcblxyXG4gICAgZGVmIF9yZWdpc3Rlcl9kZWZhdWx0X2NpcGhlcnMoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBmb3IgbW9kZV9jbHMgaW4gW0NCQywgQ1RSLCBFQ0IsIE9GQiwgQ0ZCLCBDRkI4LCBHQ01dOlxyXG4gICAgICAgICAgICBzZWxmLnJlZ2lzdGVyX2NpcGhlcl9hZGFwdGVyKFxyXG4gICAgICAgICAgICAgICAgQUVTLFxyXG4gICAgICAgICAgICAgICAgbW9kZV9jbHMsXHJcbiAgICAgICAgICAgICAgICBHZXRDaXBoZXJCeU5hbWUoIntjaXBoZXIubmFtZX0te2NpcGhlci5rZXlfc2l6ZX0te21vZGUubmFtZX0iKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGZvciBtb2RlX2NscyBpbiBbQ0JDLCBDVFIsIEVDQiwgT0ZCLCBDRkJdOlxyXG4gICAgICAgICAgICBzZWxmLnJlZ2lzdGVyX2NpcGhlcl9hZGFwdGVyKFxyXG4gICAgICAgICAgICAgICAgQ2FtZWxsaWEsXHJcbiAgICAgICAgICAgICAgICBtb2RlX2NscyxcclxuICAgICAgICAgICAgICAgIEdldENpcGhlckJ5TmFtZSgie2NpcGhlci5uYW1lfS17Y2lwaGVyLmtleV9zaXplfS17bW9kZS5uYW1lfSIpLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZm9yIG1vZGVfY2xzIGluIFtDQkMsIENGQiwgQ0ZCOCwgT0ZCXTpcclxuICAgICAgICAgICAgc2VsZi5yZWdpc3Rlcl9jaXBoZXJfYWRhcHRlcihcclxuICAgICAgICAgICAgICAgIFRyaXBsZURFUywgbW9kZV9jbHMsIEdldENpcGhlckJ5TmFtZSgiZGVzLWVkZTMte21vZGUubmFtZX0iKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5yZWdpc3Rlcl9jaXBoZXJfYWRhcHRlcihcclxuICAgICAgICAgICAgVHJpcGxlREVTLCBFQ0IsIEdldENpcGhlckJ5TmFtZSgiZGVzLWVkZTMiKVxyXG4gICAgICAgIClcclxuICAgICAgICBmb3IgbW9kZV9jbHMgaW4gW0NCQywgQ0ZCLCBPRkIsIEVDQl06XHJcbiAgICAgICAgICAgIHNlbGYucmVnaXN0ZXJfY2lwaGVyX2FkYXB0ZXIoXHJcbiAgICAgICAgICAgICAgICBfQmxvd2Zpc2hJbnRlcm5hbCwgbW9kZV9jbHMsIEdldENpcGhlckJ5TmFtZSgiYmYte21vZGUubmFtZX0iKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZm9yIG1vZGVfY2xzIGluIFtDQkMsIENGQiwgT0ZCLCBFQ0JdOlxyXG4gICAgICAgICAgICBzZWxmLnJlZ2lzdGVyX2NpcGhlcl9hZGFwdGVyKFxyXG4gICAgICAgICAgICAgICAgX1NFRURJbnRlcm5hbCwgbW9kZV9jbHMsIEdldENpcGhlckJ5TmFtZSgic2VlZC17bW9kZS5uYW1lfSIpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBmb3IgY2lwaGVyX2NscywgbW9kZV9jbHMgaW4gaXRlcnRvb2xzLnByb2R1Y3QoXHJcbiAgICAgICAgICAgIFtfQ0FTVDVJbnRlcm5hbCwgX0lERUFJbnRlcm5hbF0sXHJcbiAgICAgICAgICAgIFtDQkMsIE9GQiwgQ0ZCLCBFQ0JdLFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHNlbGYucmVnaXN0ZXJfY2lwaGVyX2FkYXB0ZXIoXHJcbiAgICAgICAgICAgICAgICBjaXBoZXJfY2xzLFxyXG4gICAgICAgICAgICAgICAgbW9kZV9jbHMsXHJcbiAgICAgICAgICAgICAgICBHZXRDaXBoZXJCeU5hbWUoIntjaXBoZXIubmFtZX0te21vZGUubmFtZX0iKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHNlbGYucmVnaXN0ZXJfY2lwaGVyX2FkYXB0ZXIoQVJDNCwgdHlwZShOb25lKSwgR2V0Q2lwaGVyQnlOYW1lKCJyYzQiKSlcclxuICAgICAgICAjIFdlIGRvblwndCBhY3R1YWxseSBzdXBwb3J0IFJDMiwgdGhpcyBpcyBqdXN0IHVzZWQgYnkgc29tZSB0ZXN0cy5cclxuICAgICAgICBzZWxmLnJlZ2lzdGVyX2NpcGhlcl9hZGFwdGVyKF9SQzIsIHR5cGUoTm9uZSksIEdldENpcGhlckJ5TmFtZSgicmMyIikpXHJcbiAgICAgICAgc2VsZi5yZWdpc3Rlcl9jaXBoZXJfYWRhcHRlcihcclxuICAgICAgICAgICAgQ2hhQ2hhMjAsIHR5cGUoTm9uZSksIEdldENpcGhlckJ5TmFtZSgiY2hhY2hhMjAiKVxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLnJlZ2lzdGVyX2NpcGhlcl9hZGFwdGVyKEFFUywgWFRTLCBfZ2V0X3h0c19jaXBoZXIpXHJcbiAgICAgICAgZm9yIG1vZGVfY2xzIGluIFtFQ0IsIENCQywgT0ZCLCBDRkIsIENUUl06XHJcbiAgICAgICAgICAgIHNlbGYucmVnaXN0ZXJfY2lwaGVyX2FkYXB0ZXIoXHJcbiAgICAgICAgICAgICAgICBTTTQsIG1vZGVfY2xzLCBHZXRDaXBoZXJCeU5hbWUoInNtNC17bW9kZS5uYW1lfSIpXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgY3JlYXRlX3N5bW1ldHJpY19lbmNyeXB0aW9uX2N0eChcclxuICAgICAgICBzZWxmLCBjaXBoZXI6IENpcGhlckFsZ29yaXRobSwgbW9kZTogTW9kZVxyXG4gICAgKSAtPiBfQ2lwaGVyQ29udGV4dDpcclxuICAgICAgICByZXR1cm4gX0NpcGhlckNvbnRleHQoc2VsZiwgY2lwaGVyLCBtb2RlLCBfQ2lwaGVyQ29udGV4dC5fRU5DUllQVClcclxuXHJcbiAgICBkZWYgY3JlYXRlX3N5bW1ldHJpY19kZWNyeXB0aW9uX2N0eChcclxuICAgICAgICBzZWxmLCBjaXBoZXI6IENpcGhlckFsZ29yaXRobSwgbW9kZTogTW9kZVxyXG4gICAgKSAtPiBfQ2lwaGVyQ29udGV4dDpcclxuICAgICAgICByZXR1cm4gX0NpcGhlckNvbnRleHQoc2VsZiwgY2lwaGVyLCBtb2RlLCBfQ2lwaGVyQ29udGV4dC5fREVDUllQVClcclxuXHJcbiAgICBkZWYgcGJrZGYyX2htYWNfc3VwcG9ydGVkKHNlbGYsIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0pIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuaG1hY19zdXBwb3J0ZWQoYWxnb3JpdGhtKVxyXG5cclxuICAgIGRlZiBkZXJpdmVfcGJrZGYyX2htYWMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtLFxyXG4gICAgICAgIGxlbmd0aDogaW50LFxyXG4gICAgICAgIHNhbHQ6IGJ5dGVzLFxyXG4gICAgICAgIGl0ZXJhdGlvbnM6IGludCxcclxuICAgICAgICBrZXlfbWF0ZXJpYWw6IGJ5dGVzLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBidWYgPSBzZWxmLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCBsZW5ndGgpXHJcbiAgICAgICAgZXZwX21kID0gc2VsZi5fZXZwX21kX25vbl9udWxsX2Zyb21fYWxnb3JpdGhtKGFsZ29yaXRobSlcclxuICAgICAgICBrZXlfbWF0ZXJpYWxfcHRyID0gc2VsZi5fZmZpLmZyb21fYnVmZmVyKGtleV9tYXRlcmlhbClcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuUEtDUzVfUEJLREYyX0hNQUMoXHJcbiAgICAgICAgICAgIGtleV9tYXRlcmlhbF9wdHIsXHJcbiAgICAgICAgICAgIGxlbihrZXlfbWF0ZXJpYWwpLFxyXG4gICAgICAgICAgICBzYWx0LFxyXG4gICAgICAgICAgICBsZW4oc2FsdCksXHJcbiAgICAgICAgICAgIGl0ZXJhdGlvbnMsXHJcbiAgICAgICAgICAgIGV2cF9tZCxcclxuICAgICAgICAgICAgbGVuZ3RoLFxyXG4gICAgICAgICAgICBidWYsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2ZmaS5idWZmZXIoYnVmKVs6XVxyXG5cclxuICAgIGRlZiBfY29uc3VtZV9lcnJvcnMoc2VsZikgLT4gdHlwaW5nLkxpc3RbYmluZGluZy5fT3BlblNTTEVycm9yXTpcclxuICAgICAgICByZXR1cm4gYmluZGluZy5fY29uc3VtZV9lcnJvcnMoc2VsZi5fbGliKVxyXG5cclxuICAgIGRlZiBfY29uc3VtZV9lcnJvcnNfd2l0aF90ZXh0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W2JpbmRpbmcuX09wZW5TU0xFcnJvcldpdGhUZXh0XTpcclxuICAgICAgICByZXR1cm4gYmluZGluZy5fY29uc3VtZV9lcnJvcnNfd2l0aF90ZXh0KHNlbGYuX2xpYilcclxuXHJcbiAgICBkZWYgX2JuX3RvX2ludChzZWxmLCBibikgLT4gaW50OlxyXG4gICAgICAgIGFzc2VydCBibiAhPSBzZWxmLl9mZmkuTlVMTFxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQobm90IHNlbGYuX2xpYi5CTl9pc19uZWdhdGl2ZShibikpXHJcblxyXG4gICAgICAgIGJuX251bV9ieXRlcyA9IHNlbGYuX2xpYi5CTl9udW1fYnl0ZXMoYm4pXHJcbiAgICAgICAgYmluX3B0ciA9IHNlbGYuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIGJuX251bV9ieXRlcylcclxuICAgICAgICBiaW5fbGVuID0gc2VsZi5fbGliLkJOX2JuMmJpbihibiwgYmluX3B0cilcclxuICAgICAgICAjIEEgemVybyBsZW5ndGggbWVhbnMgdGhlIEJOIGhhcyB2YWx1ZSAwXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChiaW5fbGVuID49IDApXHJcbiAgICAgICAgdmFsID0gaW50LmZyb21fYnl0ZXMoc2VsZi5fZmZpLmJ1ZmZlcihiaW5fcHRyKVs6YmluX2xlbl0sICJiaWciKVxyXG4gICAgICAgIHJldHVybiB2YWxcclxuXHJcbiAgICBkZWYgX2ludF90b19ibihzZWxmLCBudW06IGludCwgYm49Tm9uZSk6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQ29udmVydHMgYSBweXRob24gaW50ZWdlciB0byBhIEJJR05VTS4gVGhlIHJldHVybmVkIEJJR05VTSB3aWxsIG5vdFxyXG4gICAgICAgIGJlIGdhcmJhZ2UgY29sbGVjdGVkICh0byBzdXBwb3J0IGFkZGluZyB0aGVtIHRvIHN0cnVjdHMgdGhhdCB0YWtlXHJcbiAgICAgICAgb3duZXJzaGlwIG9mIHRoZSBvYmplY3QpLiBCZSBzdXJlIHRvIHJlZ2lzdGVyIGl0IGZvciBHQyBpZiBpdCB3aWxsXHJcbiAgICAgICAgYmUgZGlzY2FyZGVkIGFmdGVyIHVzZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBhc3NlcnQgYm4gaXMgTm9uZSBvciBibiAhPSBzZWxmLl9mZmkuTlVMTFxyXG5cclxuICAgICAgICBpZiBibiBpcyBOb25lOlxyXG4gICAgICAgICAgICBibiA9IHNlbGYuX2ZmaS5OVUxMXHJcblxyXG4gICAgICAgIGJpbmFyeSA9IG51bS50b19ieXRlcyhpbnQobnVtLmJpdF9sZW5ndGgoKSAvIDguMCArIDEpLCAiYmlnIilcclxuICAgICAgICBibl9wdHIgPSBzZWxmLl9saWIuQk5fYmluMmJuKGJpbmFyeSwgbGVuKGJpbmFyeSksIGJuKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoYm5fcHRyICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJldHVybiBibl9wdHJcclxuXHJcbiAgICBkZWYgZ2VuZXJhdGVfcnNhX3ByaXZhdGVfa2V5KFxyXG4gICAgICAgIHNlbGYsIHB1YmxpY19leHBvbmVudDogaW50LCBrZXlfc2l6ZTogaW50XHJcbiAgICApIC0+IHJzYS5SU0FQcml2YXRlS2V5OlxyXG4gICAgICAgIHJzYS5fdmVyaWZ5X3JzYV9wYXJhbWV0ZXJzKHB1YmxpY19leHBvbmVudCwga2V5X3NpemUpXHJcblxyXG4gICAgICAgIHJzYV9jZGF0YSA9IHNlbGYuX2xpYi5SU0FfbmV3KClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJzYV9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICByc2FfY2RhdGEgPSBzZWxmLl9mZmkuZ2MocnNhX2NkYXRhLCBzZWxmLl9saWIuUlNBX2ZyZWUpXHJcblxyXG4gICAgICAgIGJuID0gc2VsZi5faW50X3RvX2JuKHB1YmxpY19leHBvbmVudClcclxuICAgICAgICBibiA9IHNlbGYuX2ZmaS5nYyhibiwgc2VsZi5fbGliLkJOX2ZyZWUpXHJcblxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5SU0FfZ2VuZXJhdGVfa2V5X2V4KFxyXG4gICAgICAgICAgICByc2FfY2RhdGEsIGtleV9zaXplLCBibiwgc2VsZi5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX3JzYV9jZGF0YV90b19ldnBfcGtleShyc2FfY2RhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBfUlNBUHJpdmF0ZUtleShcclxuICAgICAgICAgICAgc2VsZiwgcnNhX2NkYXRhLCBldnBfcGtleSwgc2VsZi5fcnNhX3NraXBfY2hlY2tfa2V5XHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBnZW5lcmF0ZV9yc2FfcGFyYW1ldGVyc19zdXBwb3J0ZWQoXHJcbiAgICAgICAgc2VsZiwgcHVibGljX2V4cG9uZW50OiBpbnQsIGtleV9zaXplOiBpbnRcclxuICAgICkgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBwdWJsaWNfZXhwb25lbnQgPj0gM1xyXG4gICAgICAgICAgICBhbmQgcHVibGljX2V4cG9uZW50ICYgMSAhPSAwXHJcbiAgICAgICAgICAgIGFuZCBrZXlfc2l6ZSA+PSA1MTJcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGxvYWRfcnNhX3ByaXZhdGVfbnVtYmVycyhcclxuICAgICAgICBzZWxmLCBudW1iZXJzOiByc2EuUlNBUHJpdmF0ZU51bWJlcnNcclxuICAgICkgLT4gcnNhLlJTQVByaXZhdGVLZXk6XHJcbiAgICAgICAgcnNhLl9jaGVja19wcml2YXRlX2tleV9jb21wb25lbnRzKFxyXG4gICAgICAgICAgICBudW1iZXJzLnAsXHJcbiAgICAgICAgICAgIG51bWJlcnMucSxcclxuICAgICAgICAgICAgbnVtYmVycy5kLFxyXG4gICAgICAgICAgICBudW1iZXJzLmRtcDEsXHJcbiAgICAgICAgICAgIG51bWJlcnMuZG1xMSxcclxuICAgICAgICAgICAgbnVtYmVycy5pcW1wLFxyXG4gICAgICAgICAgICBudW1iZXJzLnB1YmxpY19udW1iZXJzLmUsXHJcbiAgICAgICAgICAgIG51bWJlcnMucHVibGljX251bWJlcnMubixcclxuICAgICAgICApXHJcbiAgICAgICAgcnNhX2NkYXRhID0gc2VsZi5fbGliLlJTQV9uZXcoKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocnNhX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJzYV9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhyc2FfY2RhdGEsIHNlbGYuX2xpYi5SU0FfZnJlZSlcclxuICAgICAgICBwID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMucClcclxuICAgICAgICBxID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMucSlcclxuICAgICAgICBkID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMuZClcclxuICAgICAgICBkbXAxID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMuZG1wMSlcclxuICAgICAgICBkbXExID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMuZG1xMSlcclxuICAgICAgICBpcW1wID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMuaXFtcClcclxuICAgICAgICBlID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMucHVibGljX251bWJlcnMuZSlcclxuICAgICAgICBuID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMucHVibGljX251bWJlcnMubilcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuUlNBX3NldDBfZmFjdG9ycyhyc2FfY2RhdGEsIHAsIHEpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuUlNBX3NldDBfa2V5KHJzYV9jZGF0YSwgbiwgZSwgZClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5SU0Ffc2V0MF9jcnRfcGFyYW1zKHJzYV9jZGF0YSwgZG1wMSwgZG1xMSwgaXFtcClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fcnNhX2NkYXRhX3RvX2V2cF9wa2V5KHJzYV9jZGF0YSlcclxuXHJcbiAgICAgICAgcmV0dXJuIF9SU0FQcml2YXRlS2V5KFxyXG4gICAgICAgICAgICBzZWxmLCByc2FfY2RhdGEsIGV2cF9wa2V5LCBzZWxmLl9yc2Ffc2tpcF9jaGVja19rZXlcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGxvYWRfcnNhX3B1YmxpY19udW1iZXJzKFxyXG4gICAgICAgIHNlbGYsIG51bWJlcnM6IHJzYS5SU0FQdWJsaWNOdW1iZXJzXHJcbiAgICApIC0+IHJzYS5SU0FQdWJsaWNLZXk6XHJcbiAgICAgICAgcnNhLl9jaGVja19wdWJsaWNfa2V5X2NvbXBvbmVudHMobnVtYmVycy5lLCBudW1iZXJzLm4pXHJcbiAgICAgICAgcnNhX2NkYXRhID0gc2VsZi5fbGliLlJTQV9uZXcoKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocnNhX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJzYV9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhyc2FfY2RhdGEsIHNlbGYuX2xpYi5SU0FfZnJlZSlcclxuICAgICAgICBlID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMuZSlcclxuICAgICAgICBuID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMubilcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuUlNBX3NldDBfa2V5KHJzYV9jZGF0YSwgbiwgZSwgc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX3JzYV9jZGF0YV90b19ldnBfcGtleShyc2FfY2RhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBfUlNBUHVibGljS2V5KHNlbGYsIHJzYV9jZGF0YSwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIF9jcmVhdGVfZXZwX3BrZXlfZ2Moc2VsZik6XHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9saWIuRVZQX1BLRVlfbmV3KClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGV2cF9wa2V5ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZmZpLmdjKGV2cF9wa2V5LCBzZWxmLl9saWIuRVZQX1BLRVlfZnJlZSlcclxuICAgICAgICByZXR1cm4gZXZwX3BrZXlcclxuXHJcbiAgICBkZWYgX3JzYV9jZGF0YV90b19ldnBfcGtleShzZWxmLCByc2FfY2RhdGEpOlxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fY3JlYXRlX2V2cF9wa2V5X2djKClcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuRVZQX1BLRVlfc2V0MV9SU0EoZXZwX3BrZXksIHJzYV9jZGF0YSlcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJldHVybiBldnBfcGtleVxyXG5cclxuICAgIGRlZiBfYnl0ZXNfdG9fYmlvKHNlbGYsIGRhdGE6IGJ5dGVzKTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm4gYSBfTWVtb3J5QklPIG5hbWVkdHVwbGUgb2YgKEJJTywgY2hhciopLlxyXG5cclxuICAgICAgICBUaGUgY2hhciogaXMgdGhlIHN0b3JhZ2UgZm9yIHRoZSBCSU8gYW5kIGl0IG11c3Qgc3RheSBhbGl2ZSB1bnRpbCB0aGVcclxuICAgICAgICBCSU8gaXMgZmluaXNoZWQgd2l0aC5cclxuICAgICAgICAiIiJcclxuICAgICAgICBkYXRhX3B0ciA9IHNlbGYuX2ZmaS5mcm9tX2J1ZmZlcihkYXRhKVxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2xpYi5CSU9fbmV3X21lbV9idWYoZGF0YV9wdHIsIGxlbihkYXRhKSlcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGJpbyAhPSBzZWxmLl9mZmkuTlVMTClcclxuXHJcbiAgICAgICAgcmV0dXJuIF9NZW1vcnlCSU8oc2VsZi5fZmZpLmdjKGJpbywgc2VsZi5fbGliLkJJT19mcmVlKSwgZGF0YV9wdHIpXHJcblxyXG4gICAgZGVmIF9jcmVhdGVfbWVtX2Jpb19nYyhzZWxmKTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBDcmVhdGVzIGFuIGVtcHR5IG1lbW9yeSBCSU8uXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgYmlvX21ldGhvZCA9IHNlbGYuX2xpYi5CSU9fc19tZW0oKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoYmlvX21ldGhvZCAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBiaW8gPSBzZWxmLl9saWIuQklPX25ldyhiaW9fbWV0aG9kKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoYmlvICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2ZmaS5nYyhiaW8sIHNlbGYuX2xpYi5CSU9fZnJlZSlcclxuICAgICAgICByZXR1cm4gYmlvXHJcblxyXG4gICAgZGVmIF9yZWFkX21lbV9iaW8oc2VsZiwgYmlvKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZWFkcyBhIG1lbW9yeSBCSU8uIFRoaXMgb25seSB3b3JrcyBvbiBtZW1vcnkgQklPcy5cclxuICAgICAgICAiIiJcclxuICAgICAgICBidWYgPSBzZWxmLl9mZmkubmV3KCJjaGFyICoqIilcclxuICAgICAgICBidWZfbGVuID0gc2VsZi5fbGliLkJJT19nZXRfbWVtX2RhdGEoYmlvLCBidWYpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChidWZfbGVuID4gMClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGJ1ZlswXSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBiaW9fZGF0YSA9IHNlbGYuX2ZmaS5idWZmZXIoYnVmWzBdLCBidWZfbGVuKVs6XVxyXG4gICAgICAgIHJldHVybiBiaW9fZGF0YVxyXG5cclxuICAgIGRlZiBfZXZwX3BrZXlfdG9fcHJpdmF0ZV9rZXkoc2VsZiwgZXZwX3BrZXkpIC0+IFBSSVZBVEVfS0VZX1RZUEVTOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybiB0aGUgYXBwcm9wcmlhdGUgdHlwZSBvZiBQcml2YXRlS2V5IGdpdmVuIGFuIGV2cF9wa2V5IGNkYXRhXHJcbiAgICAgICAgcG9pbnRlci5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICAgICAga2V5X3R5cGUgPSBzZWxmLl9saWIuRVZQX1BLRVlfaWQoZXZwX3BrZXkpXHJcblxyXG4gICAgICAgIGlmIGtleV90eXBlID09IHNlbGYuX2xpYi5FVlBfUEtFWV9SU0E6XHJcbiAgICAgICAgICAgIHJzYV9jZGF0YSA9IHNlbGYuX2xpYi5FVlBfUEtFWV9nZXQxX1JTQShldnBfcGtleSlcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyc2FfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgIHJzYV9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhyc2FfY2RhdGEsIHNlbGYuX2xpYi5SU0FfZnJlZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9SU0FQcml2YXRlS2V5KFxyXG4gICAgICAgICAgICAgICAgc2VsZiwgcnNhX2NkYXRhLCBldnBfcGtleSwgc2VsZi5fcnNhX3NraXBfY2hlY2tfa2V5XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbGlmIChcclxuICAgICAgICAgICAga2V5X3R5cGUgPT0gc2VsZi5fbGliLkVWUF9QS0VZX1JTQV9QU1NcclxuICAgICAgICAgICAgYW5kIG5vdCBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX0lTX0xJQlJFU1NMXHJcbiAgICAgICAgICAgIGFuZCBub3Qgc2VsZi5fbGliLkNSWVBUT0dSQVBIWV9JU19CT1JJTkdTU0xcclxuICAgICAgICAgICAgYW5kIG5vdCBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX09QRU5TU0xfTEVTU19USEFOXzExMUVcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICAjIEF0IHRoZSBtb21lbnQgdGhlIHdheSB3ZSBoYW5kbGUgUlNBIFBTUyBrZXlzIGlzIHRvIHN0cmlwIHRoZVxyXG4gICAgICAgICAgICAjIFBTUyBjb25zdHJhaW50cyBmcm9tIHRoZW0gYW5kIHRyZWF0IHRoZW0gYXMgbm9ybWFsIFJTQSBrZXlzXHJcbiAgICAgICAgICAgICMgVW5mb3J0dW5hdGVseSB0aGUgUlNBICogaXRzZWxmIHRyYWNrcyB0aGlzIGRhdGEgc28gd2UgbmVlZCB0b1xyXG4gICAgICAgICAgICAjIGV4dHJhY3QsIHNlcmlhbGl6ZSwgYW5kIHJlbG9hZCBpdCB3aXRob3V0IHRoZSBjb25zdHJhaW50cy5cclxuICAgICAgICAgICAgcnNhX2NkYXRhID0gc2VsZi5fbGliLkVWUF9QS0VZX2dldDFfUlNBKGV2cF9wa2V5KVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJzYV9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgcnNhX2NkYXRhID0gc2VsZi5fZmZpLmdjKHJzYV9jZGF0YSwgc2VsZi5fbGliLlJTQV9mcmVlKVxyXG4gICAgICAgICAgICBiaW8gPSBzZWxmLl9jcmVhdGVfbWVtX2Jpb19nYygpXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5pMmRfUlNBUHJpdmF0ZUtleV9iaW8oYmlvLCByc2FfY2RhdGEpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmxvYWRfZGVyX3ByaXZhdGVfa2V5KFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fcmVhZF9tZW1fYmlvKGJpbyksIHBhc3N3b3JkPU5vbmVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsaWYga2V5X3R5cGUgPT0gc2VsZi5fbGliLkVWUF9QS0VZX0RTQTpcclxuICAgICAgICAgICAgZHNhX2NkYXRhID0gc2VsZi5fbGliLkVWUF9QS0VZX2dldDFfRFNBKGV2cF9wa2V5KVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGRzYV9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgZHNhX2NkYXRhID0gc2VsZi5fZmZpLmdjKGRzYV9jZGF0YSwgc2VsZi5fbGliLkRTQV9mcmVlKVxyXG4gICAgICAgICAgICByZXR1cm4gX0RTQVByaXZhdGVLZXkoc2VsZiwgZHNhX2NkYXRhLCBldnBfcGtleSlcclxuICAgICAgICBlbGlmIGtleV90eXBlID09IHNlbGYuX2xpYi5FVlBfUEtFWV9FQzpcclxuICAgICAgICAgICAgZWNfY2RhdGEgPSBzZWxmLl9saWIuRVZQX1BLRVlfZ2V0MV9FQ19LRVkoZXZwX3BrZXkpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZWNfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgIGVjX2NkYXRhID0gc2VsZi5fZmZpLmdjKGVjX2NkYXRhLCBzZWxmLl9saWIuRUNfS0VZX2ZyZWUpXHJcbiAgICAgICAgICAgIHJldHVybiBfRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXkoc2VsZiwgZWNfY2RhdGEsIGV2cF9wa2V5KVxyXG4gICAgICAgIGVsaWYga2V5X3R5cGUgaW4gc2VsZi5fZGhfdHlwZXM6XHJcbiAgICAgICAgICAgIGRoX2NkYXRhID0gc2VsZi5fbGliLkVWUF9QS0VZX2dldDFfREgoZXZwX3BrZXkpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZGhfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgIGRoX2NkYXRhID0gc2VsZi5fZmZpLmdjKGRoX2NkYXRhLCBzZWxmLl9saWIuREhfZnJlZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9ESFByaXZhdGVLZXkoc2VsZiwgZGhfY2RhdGEsIGV2cF9wa2V5KVxyXG4gICAgICAgIGVsaWYga2V5X3R5cGUgPT0gZ2V0YXR0cihzZWxmLl9saWIsICJFVlBfUEtFWV9FRDI1NTE5IiwgTm9uZSk6XHJcbiAgICAgICAgICAgICMgRVZQX1BLRVlfRUQyNTUxOSBpcyBub3QgcHJlc2VudCBpbiBPcGVuU1NMIDwgMS4xLjFcclxuICAgICAgICAgICAgcmV0dXJuIF9FZDI1NTE5UHJpdmF0ZUtleShzZWxmLCBldnBfcGtleSlcclxuICAgICAgICBlbGlmIGtleV90eXBlID09IGdldGF0dHIoc2VsZi5fbGliLCAiRVZQX1BLRVlfWDQ0OCIsIE5vbmUpOlxyXG4gICAgICAgICAgICAjIEVWUF9QS0VZX1g0NDggaXMgbm90IHByZXNlbnQgaW4gT3BlblNTTCA8IDEuMS4xXHJcbiAgICAgICAgICAgIHJldHVybiBfWDQ0OFByaXZhdGVLZXkoc2VsZiwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxpZiBrZXlfdHlwZSA9PSBnZXRhdHRyKHNlbGYuX2xpYiwgIkVWUF9QS0VZX1gyNTUxOSIsIE5vbmUpOlxyXG4gICAgICAgICAgICAjIEVWUF9QS0VZX1gyNTUxOSBpcyBub3QgcHJlc2VudCBpbiBPcGVuU1NMIDwgMS4xLjBcclxuICAgICAgICAgICAgcmV0dXJuIF9YMjU1MTlQcml2YXRlS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG4gICAgICAgIGVsaWYga2V5X3R5cGUgPT0gZ2V0YXR0cihzZWxmLl9saWIsICJFVlBfUEtFWV9FRDQ0OCIsIE5vbmUpOlxyXG4gICAgICAgICAgICAjIEVWUF9QS0VZX0VENDQ4IGlzIG5vdCBwcmVzZW50IGluIE9wZW5TU0wgPCAxLjEuMVxyXG4gICAgICAgICAgICByZXR1cm4gX0VkNDQ4UHJpdmF0ZUtleShzZWxmLCBldnBfcGtleSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobSgiVW5zdXBwb3J0ZWQga2V5IHR5cGUuIilcclxuXHJcbiAgICBkZWYgX2V2cF9wa2V5X3RvX3B1YmxpY19rZXkoc2VsZiwgZXZwX3BrZXkpIC0+IFBVQkxJQ19LRVlfVFlQRVM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJuIHRoZSBhcHByb3ByaWF0ZSB0eXBlIG9mIFB1YmxpY0tleSBnaXZlbiBhbiBldnBfcGtleSBjZGF0YVxyXG4gICAgICAgIHBvaW50ZXIuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgICAgIGtleV90eXBlID0gc2VsZi5fbGliLkVWUF9QS0VZX2lkKGV2cF9wa2V5KVxyXG5cclxuICAgICAgICBpZiBrZXlfdHlwZSA9PSBzZWxmLl9saWIuRVZQX1BLRVlfUlNBOlxyXG4gICAgICAgICAgICByc2FfY2RhdGEgPSBzZWxmLl9saWIuRVZQX1BLRVlfZ2V0MV9SU0EoZXZwX3BrZXkpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocnNhX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgICAgICByc2FfY2RhdGEgPSBzZWxmLl9mZmkuZ2MocnNhX2NkYXRhLCBzZWxmLl9saWIuUlNBX2ZyZWUpXHJcbiAgICAgICAgICAgIHJldHVybiBfUlNBUHVibGljS2V5KHNlbGYsIHJzYV9jZGF0YSwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxpZiBrZXlfdHlwZSA9PSBzZWxmLl9saWIuRVZQX1BLRVlfRFNBOlxyXG4gICAgICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9saWIuRVZQX1BLRVlfZ2V0MV9EU0EoZXZwX3BrZXkpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZHNhX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9mZmkuZ2MoZHNhX2NkYXRhLCBzZWxmLl9saWIuRFNBX2ZyZWUpXHJcbiAgICAgICAgICAgIHJldHVybiBfRFNBUHVibGljS2V5KHNlbGYsIGRzYV9jZGF0YSwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxpZiBrZXlfdHlwZSA9PSBzZWxmLl9saWIuRVZQX1BLRVlfRUM6XHJcbiAgICAgICAgICAgIGVjX2NkYXRhID0gc2VsZi5fbGliLkVWUF9QS0VZX2dldDFfRUNfS0VZKGV2cF9wa2V5KVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGVjX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgICAgICBlY19jZGF0YSA9IHNlbGYuX2ZmaS5nYyhlY19jZGF0YSwgc2VsZi5fbGliLkVDX0tFWV9mcmVlKVxyXG4gICAgICAgICAgICByZXR1cm4gX0VsbGlwdGljQ3VydmVQdWJsaWNLZXkoc2VsZiwgZWNfY2RhdGEsIGV2cF9wa2V5KVxyXG4gICAgICAgIGVsaWYga2V5X3R5cGUgaW4gc2VsZi5fZGhfdHlwZXM6XHJcbiAgICAgICAgICAgIGRoX2NkYXRhID0gc2VsZi5fbGliLkVWUF9QS0VZX2dldDFfREgoZXZwX3BrZXkpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZGhfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgIGRoX2NkYXRhID0gc2VsZi5fZmZpLmdjKGRoX2NkYXRhLCBzZWxmLl9saWIuREhfZnJlZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9ESFB1YmxpY0tleShzZWxmLCBkaF9jZGF0YSwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxpZiBrZXlfdHlwZSA9PSBnZXRhdHRyKHNlbGYuX2xpYiwgIkVWUF9QS0VZX0VEMjU1MTkiLCBOb25lKTpcclxuICAgICAgICAgICAgIyBFVlBfUEtFWV9FRDI1NTE5IGlzIG5vdCBwcmVzZW50IGluIE9wZW5TU0wgPCAxLjEuMVxyXG4gICAgICAgICAgICByZXR1cm4gX0VkMjU1MTlQdWJsaWNLZXkoc2VsZiwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxpZiBrZXlfdHlwZSA9PSBnZXRhdHRyKHNlbGYuX2xpYiwgIkVWUF9QS0VZX1g0NDgiLCBOb25lKTpcclxuICAgICAgICAgICAgIyBFVlBfUEtFWV9YNDQ4IGlzIG5vdCBwcmVzZW50IGluIE9wZW5TU0wgPCAxLjEuMVxyXG4gICAgICAgICAgICByZXR1cm4gX1g0NDhQdWJsaWNLZXkoc2VsZiwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxpZiBrZXlfdHlwZSA9PSBnZXRhdHRyKHNlbGYuX2xpYiwgIkVWUF9QS0VZX1gyNTUxOSIsIE5vbmUpOlxyXG4gICAgICAgICAgICAjIEVWUF9QS0VZX1gyNTUxOSBpcyBub3QgcHJlc2VudCBpbiBPcGVuU1NMIDwgMS4xLjBcclxuICAgICAgICAgICAgcmV0dXJuIF9YMjU1MTlQdWJsaWNLZXkoc2VsZiwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxpZiBrZXlfdHlwZSA9PSBnZXRhdHRyKHNlbGYuX2xpYiwgIkVWUF9QS0VZX0VENDQ4IiwgTm9uZSk6XHJcbiAgICAgICAgICAgICMgRVZQX1BLRVlfWDI1NTE5IGlzIG5vdCBwcmVzZW50IGluIE9wZW5TU0wgPCAxLjEuMVxyXG4gICAgICAgICAgICByZXR1cm4gX0VkNDQ4UHVibGljS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKCJVbnN1cHBvcnRlZCBrZXkgdHlwZS4iKVxyXG5cclxuICAgIGRlZiBfb2FlcF9oYXNoX3N1cHBvcnRlZChzZWxmLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICBhbGdvcml0aG0sXHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgIGhhc2hlcy5TSEExLFxyXG4gICAgICAgICAgICAgICAgaGFzaGVzLlNIQTIyNCxcclxuICAgICAgICAgICAgICAgIGhhc2hlcy5TSEEyNTYsXHJcbiAgICAgICAgICAgICAgICBoYXNoZXMuU0hBMzg0LFxyXG4gICAgICAgICAgICAgICAgaGFzaGVzLlNIQTUxMixcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHJzYV9wYWRkaW5nX3N1cHBvcnRlZChzZWxmLCBwYWRkaW5nOiBBc3ltbWV0cmljUGFkZGluZykgLT4gYm9vbDpcclxuICAgICAgICBpZiBpc2luc3RhbmNlKHBhZGRpbmcsIFBLQ1MxdjE1KTpcclxuICAgICAgICAgICAgcmV0dXJuIFRydWVcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UocGFkZGluZywgUFNTKSBhbmQgaXNpbnN0YW5jZShwYWRkaW5nLl9tZ2YsIE1HRjEpOlxyXG4gICAgICAgICAgICAjIFNIQTEgaXMgcGVybWlzc2libGUgaW4gTUdGMSBpbiBGSVBTIGV2ZW4gd2hlbiBTSEExIGlzIGJsb2NrZWRcclxuICAgICAgICAgICAgIyBhcyBzaWduYXR1cmUgYWxnb3JpdGhtLlxyXG4gICAgICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQgYW5kIGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nLl9tZ2YuX2FsZ29yaXRobSwgaGFzaGVzLlNIQTFcclxuICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5oYXNoX3N1cHBvcnRlZChwYWRkaW5nLl9tZ2YuX2FsZ29yaXRobSlcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UocGFkZGluZywgT0FFUCkgYW5kIGlzaW5zdGFuY2UocGFkZGluZy5fbWdmLCBNR0YxKTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX29hZXBfaGFzaF9zdXBwb3J0ZWQoXHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nLl9tZ2YuX2FsZ29yaXRobVxyXG4gICAgICAgICAgICApIGFuZCBzZWxmLl9vYWVwX2hhc2hfc3VwcG9ydGVkKHBhZGRpbmcuX2FsZ29yaXRobSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICBkZWYgZ2VuZXJhdGVfZHNhX3BhcmFtZXRlcnMoc2VsZiwga2V5X3NpemU6IGludCkgLT4gZHNhLkRTQVBhcmFtZXRlcnM6XHJcbiAgICAgICAgaWYga2V5X3NpemUgbm90IGluICgxMDI0LCAyMDQ4LCAzMDcyLCA0MDk2KTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJLZXkgc2l6ZSBtdXN0IGJlIDEwMjQsIDIwNDgsIDMwNzIsIG9yIDQwOTYgYml0cy4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgY3R4ID0gc2VsZi5fbGliLkRTQV9uZXcoKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoY3R4ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGN0eCA9IHNlbGYuX2ZmaS5nYyhjdHgsIHNlbGYuX2xpYi5EU0FfZnJlZSlcclxuXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkRTQV9nZW5lcmF0ZV9wYXJhbWV0ZXJzX2V4KFxyXG4gICAgICAgICAgICBjdHgsXHJcbiAgICAgICAgICAgIGtleV9zaXplLFxyXG4gICAgICAgICAgICBzZWxmLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgc2VsZi5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9mZmkuTlVMTCxcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIHJldHVybiBfRFNBUGFyYW1ldGVycyhzZWxmLCBjdHgpXHJcblxyXG4gICAgZGVmIGdlbmVyYXRlX2RzYV9wcml2YXRlX2tleShcclxuICAgICAgICBzZWxmLCBwYXJhbWV0ZXJzOiBkc2EuRFNBUGFyYW1ldGVyc1xyXG4gICAgKSAtPiBkc2EuRFNBUHJpdmF0ZUtleTpcclxuICAgICAgICBjdHggPSBzZWxmLl9saWIuRFNBcGFyYW1zX2R1cChcclxuICAgICAgICAgICAgcGFyYW1ldGVycy5fZHNhX2NkYXRhICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoY3R4ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGN0eCA9IHNlbGYuX2ZmaS5nYyhjdHgsIHNlbGYuX2xpYi5EU0FfZnJlZSlcclxuICAgICAgICBzZWxmLl9saWIuRFNBX2dlbmVyYXRlX2tleShjdHgpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9kc2FfY2RhdGFfdG9fZXZwX3BrZXkoY3R4KVxyXG5cclxuICAgICAgICByZXR1cm4gX0RTQVByaXZhdGVLZXkoc2VsZiwgY3R4LCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgZ2VuZXJhdGVfZHNhX3ByaXZhdGVfa2V5X2FuZF9wYXJhbWV0ZXJzKFxyXG4gICAgICAgIHNlbGYsIGtleV9zaXplOiBpbnRcclxuICAgICkgLT4gZHNhLkRTQVByaXZhdGVLZXk6XHJcbiAgICAgICAgcGFyYW1ldGVycyA9IHNlbGYuZ2VuZXJhdGVfZHNhX3BhcmFtZXRlcnMoa2V5X3NpemUpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZ2VuZXJhdGVfZHNhX3ByaXZhdGVfa2V5KHBhcmFtZXRlcnMpXHJcblxyXG4gICAgZGVmIF9kc2FfY2RhdGFfc2V0X3ZhbHVlcyhzZWxmLCBkc2FfY2RhdGEsIHAsIHEsIGcsIHB1Yl9rZXksIHByaXZfa2V5KTpcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuRFNBX3NldDBfcHFnKGRzYV9jZGF0YSwgcCwgcSwgZylcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5EU0Ffc2V0MF9rZXkoZHNhX2NkYXRhLCBwdWJfa2V5LCBwcml2X2tleSlcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgIGRlZiBsb2FkX2RzYV9wcml2YXRlX251bWJlcnMoXHJcbiAgICAgICAgc2VsZiwgbnVtYmVyczogZHNhLkRTQVByaXZhdGVOdW1iZXJzXHJcbiAgICApIC0+IGRzYS5EU0FQcml2YXRlS2V5OlxyXG4gICAgICAgIGRzYS5fY2hlY2tfZHNhX3ByaXZhdGVfbnVtYmVycyhudW1iZXJzKVxyXG4gICAgICAgIHBhcmFtZXRlcl9udW1iZXJzID0gbnVtYmVycy5wdWJsaWNfbnVtYmVycy5wYXJhbWV0ZXJfbnVtYmVyc1xyXG5cclxuICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9saWIuRFNBX25ldygpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChkc2FfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgZHNhX2NkYXRhID0gc2VsZi5fZmZpLmdjKGRzYV9jZGF0YSwgc2VsZi5fbGliLkRTQV9mcmVlKVxyXG5cclxuICAgICAgICBwID0gc2VsZi5faW50X3RvX2JuKHBhcmFtZXRlcl9udW1iZXJzLnApXHJcbiAgICAgICAgcSA9IHNlbGYuX2ludF90b19ibihwYXJhbWV0ZXJfbnVtYmVycy5xKVxyXG4gICAgICAgIGcgPSBzZWxmLl9pbnRfdG9fYm4ocGFyYW1ldGVyX251bWJlcnMuZylcclxuICAgICAgICBwdWJfa2V5ID0gc2VsZi5faW50X3RvX2JuKG51bWJlcnMucHVibGljX251bWJlcnMueSlcclxuICAgICAgICBwcml2X2tleSA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLngpXHJcbiAgICAgICAgc2VsZi5fZHNhX2NkYXRhX3NldF92YWx1ZXMoZHNhX2NkYXRhLCBwLCBxLCBnLCBwdWJfa2V5LCBwcml2X2tleSlcclxuXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9kc2FfY2RhdGFfdG9fZXZwX3BrZXkoZHNhX2NkYXRhKVxyXG5cclxuICAgICAgICByZXR1cm4gX0RTQVByaXZhdGVLZXkoc2VsZiwgZHNhX2NkYXRhLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgbG9hZF9kc2FfcHVibGljX251bWJlcnMoXHJcbiAgICAgICAgc2VsZiwgbnVtYmVyczogZHNhLkRTQVB1YmxpY051bWJlcnNcclxuICAgICkgLT4gZHNhLkRTQVB1YmxpY0tleTpcclxuICAgICAgICBkc2EuX2NoZWNrX2RzYV9wYXJhbWV0ZXJzKG51bWJlcnMucGFyYW1ldGVyX251bWJlcnMpXHJcbiAgICAgICAgZHNhX2NkYXRhID0gc2VsZi5fbGliLkRTQV9uZXcoKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZHNhX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGRzYV9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhkc2FfY2RhdGEsIHNlbGYuX2xpYi5EU0FfZnJlZSlcclxuXHJcbiAgICAgICAgcCA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLnBhcmFtZXRlcl9udW1iZXJzLnApXHJcbiAgICAgICAgcSA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLnBhcmFtZXRlcl9udW1iZXJzLnEpXHJcbiAgICAgICAgZyA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLnBhcmFtZXRlcl9udW1iZXJzLmcpXHJcbiAgICAgICAgcHViX2tleSA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLnkpXHJcbiAgICAgICAgcHJpdl9rZXkgPSBzZWxmLl9mZmkuTlVMTFxyXG4gICAgICAgIHNlbGYuX2RzYV9jZGF0YV9zZXRfdmFsdWVzKGRzYV9jZGF0YSwgcCwgcSwgZywgcHViX2tleSwgcHJpdl9rZXkpXHJcblxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZHNhX2NkYXRhX3RvX2V2cF9wa2V5KGRzYV9jZGF0YSlcclxuXHJcbiAgICAgICAgcmV0dXJuIF9EU0FQdWJsaWNLZXkoc2VsZiwgZHNhX2NkYXRhLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgbG9hZF9kc2FfcGFyYW1ldGVyX251bWJlcnMoXHJcbiAgICAgICAgc2VsZiwgbnVtYmVyczogZHNhLkRTQVBhcmFtZXRlck51bWJlcnNcclxuICAgICkgLT4gZHNhLkRTQVBhcmFtZXRlcnM6XHJcbiAgICAgICAgZHNhLl9jaGVja19kc2FfcGFyYW1ldGVycyhudW1iZXJzKVxyXG4gICAgICAgIGRzYV9jZGF0YSA9IHNlbGYuX2xpYi5EU0FfbmV3KClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGRzYV9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9mZmkuZ2MoZHNhX2NkYXRhLCBzZWxmLl9saWIuRFNBX2ZyZWUpXHJcblxyXG4gICAgICAgIHAgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5wKVxyXG4gICAgICAgIHEgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5xKVxyXG4gICAgICAgIGcgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5nKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5EU0Ffc2V0MF9wcWcoZHNhX2NkYXRhLCBwLCBxLCBnKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIHJldHVybiBfRFNBUGFyYW1ldGVycyhzZWxmLCBkc2FfY2RhdGEpXHJcblxyXG4gICAgZGVmIF9kc2FfY2RhdGFfdG9fZXZwX3BrZXkoc2VsZiwgZHNhX2NkYXRhKTpcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2NyZWF0ZV9ldnBfcGtleV9nYygpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkVWUF9QS0VZX3NldDFfRFNBKGV2cF9wa2V5LCBkc2FfY2RhdGEpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICByZXR1cm4gZXZwX3BrZXlcclxuXHJcbiAgICBkZWYgZHNhX3N1cHBvcnRlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBub3Qgc2VsZi5fZmlwc19lbmFibGVkXHJcblxyXG4gICAgZGVmIGRzYV9oYXNoX3N1cHBvcnRlZChzZWxmLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtKSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLmRzYV9zdXBwb3J0ZWQoKTpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuc2lnbmF0dXJlX2hhc2hfc3VwcG9ydGVkKGFsZ29yaXRobSlcclxuXHJcbiAgICBkZWYgY21hY19hbGdvcml0aG1fc3VwcG9ydGVkKHNlbGYsIGFsZ29yaXRobSkgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5jaXBoZXJfc3VwcG9ydGVkKFxyXG4gICAgICAgICAgICBhbGdvcml0aG0sIENCQyhiIlxceDAwIiAqIGFsZ29yaXRobS5ibG9ja19zaXplKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgY3JlYXRlX2NtYWNfY3R4KHNlbGYsIGFsZ29yaXRobTogQmxvY2tDaXBoZXJBbGdvcml0aG0pIC0+IF9DTUFDQ29udGV4dDpcclxuICAgICAgICByZXR1cm4gX0NNQUNDb250ZXh0KHNlbGYsIGFsZ29yaXRobSlcclxuXHJcbiAgICBkZWYgbG9hZF9wZW1fcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgc2VsZiwgZGF0YTogYnl0ZXMsIHBhc3N3b3JkOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdXHJcbiAgICApIC0+IFBSSVZBVEVfS0VZX1RZUEVTOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9sb2FkX2tleShcclxuICAgICAgICAgICAgc2VsZi5fbGliLlBFTV9yZWFkX2Jpb19Qcml2YXRlS2V5LFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleV90b19wcml2YXRlX2tleSxcclxuICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICAgICAgcGFzc3dvcmQsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBsb2FkX3BlbV9wdWJsaWNfa2V5KHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBQVUJMSUNfS0VZX1RZUEVTOlxyXG4gICAgICAgIG1lbV9iaW8gPSBzZWxmLl9ieXRlc190b19iaW8oZGF0YSlcclxuICAgICAgICAjIEluIE9wZW5TU0wgMy4wLnggdGhlIFBFTV9yZWFkX2Jpb19QVUJLRVkgZnVuY3Rpb24gd2lsbCBpbnZva2VcclxuICAgICAgICAjIHRoZSBkZWZhdWx0IHBhc3N3b3JkIGNhbGxiYWNrIGlmIHlvdSBwYXNzIGFuIGVuY3J5cHRlZCBwcml2YXRlXHJcbiAgICAgICAgIyBrZXkuIFRoaXMgaXMgdmVyeSwgdmVyeSwgdmVyeSBiYWQgYXMgdGhlIGRlZmF1bHQgY2FsbGJhY2sgY2FuXHJcbiAgICAgICAgIyB0cmlnZ2VyIGFuIGludGVyYWN0aXZlIGNvbnNvbGUgcHJvbXB0LCB3aGljaCB3aWxsIGhhbmcgdGhlXHJcbiAgICAgICAgIyBQeXRob24gcHJvY2Vzcy4gV2UgdGhlcmVmb3JlIHByb3ZpZGUgb3VyIG93biBjYWxsYmFjayB0b1xyXG4gICAgICAgICMgY2F0Y2ggdGhpcyBhbmQgZXJyb3Igb3V0IHByb3Blcmx5LlxyXG4gICAgICAgIHVzZXJkYXRhID0gc2VsZi5fZmZpLm5ldygiQ1JZUFRPR1JBUEhZX1BBU1NXT1JEX0RBVEEgKiIpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9saWIuUEVNX3JlYWRfYmlvX1BVQktFWShcclxuICAgICAgICAgICAgbWVtX2Jpby5iaW8sXHJcbiAgICAgICAgICAgIHNlbGYuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9mZmkuYWRkcmVzc29mKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGliLl9vcmlnaW5hbF9saWIsICJDcnlwdG9ncmFwaHlfcGVtX3Bhc3N3b3JkX2NiIlxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICB1c2VyZGF0YSxcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgZXZwX3BrZXkgIT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZmZpLmdjKGV2cF9wa2V5LCBzZWxmLl9saWIuRVZQX1BLRVlfZnJlZSlcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2V2cF9wa2V5X3RvX3B1YmxpY19rZXkoZXZwX3BrZXkpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgIyBJdFwncyBub3QgYSAoUlNBL0RTQS9FQ0RTQSkgc3ViamVjdFB1YmxpY0tleUluZm8sIGJ1dCB3ZSBzdGlsbFxyXG4gICAgICAgICAgICAjIG5lZWQgdG8gY2hlY2sgdG8gc2VlIGlmIGl0IGlzIGEgcHVyZSBQS0NTMSBSU0EgcHVibGljIGtleSAobm90XHJcbiAgICAgICAgICAgICMgZW1iZWRkZWQgaW4gYSBzdWJqZWN0UHVibGljS2V5SW5mbylcclxuICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuQklPX3Jlc2V0KG1lbV9iaW8uYmlvKVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgICAgICByc2FfY2RhdGEgPSBzZWxmLl9saWIuUEVNX3JlYWRfYmlvX1JTQVB1YmxpY0tleShcclxuICAgICAgICAgICAgICAgIG1lbV9iaW8uYmlvLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9mZmkuYWRkcmVzc29mKFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2xpYi5fb3JpZ2luYWxfbGliLCAiQ3J5cHRvZ3JhcGh5X3BlbV9wYXNzd29yZF9jYiJcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB1c2VyZGF0YSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiByc2FfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgICAgICByc2FfY2RhdGEgPSBzZWxmLl9mZmkuZ2MocnNhX2NkYXRhLCBzZWxmLl9saWIuUlNBX2ZyZWUpXHJcbiAgICAgICAgICAgICAgICBldnBfcGtleSA9IHNlbGYuX3JzYV9jZGF0YV90b19ldnBfcGtleShyc2FfY2RhdGEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX1JTQVB1YmxpY0tleShzZWxmLCByc2FfY2RhdGEsIGV2cF9wa2V5KVxyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5faGFuZGxlX2tleV9sb2FkaW5nX2Vycm9yKClcclxuXHJcbiAgICBkZWYgbG9hZF9wZW1fcGFyYW1ldGVycyhzZWxmLCBkYXRhOiBieXRlcykgLT4gZGguREhQYXJhbWV0ZXJzOlxyXG4gICAgICAgIG1lbV9iaW8gPSBzZWxmLl9ieXRlc190b19iaW8oZGF0YSlcclxuICAgICAgICAjIG9ubHkgREggaXMgc3VwcG9ydGVkIGN1cnJlbnRseVxyXG4gICAgICAgIGRoX2NkYXRhID0gc2VsZi5fbGliLlBFTV9yZWFkX2Jpb19ESHBhcmFtcyhcclxuICAgICAgICAgICAgbWVtX2Jpby5iaW8sIHNlbGYuX2ZmaS5OVUxMLCBzZWxmLl9mZmkuTlVMTCwgc2VsZi5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgZGhfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIGRoX2NkYXRhID0gc2VsZi5fZmZpLmdjKGRoX2NkYXRhLCBzZWxmLl9saWIuREhfZnJlZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9ESFBhcmFtZXRlcnMoc2VsZiwgZGhfY2RhdGEpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5faGFuZGxlX2tleV9sb2FkaW5nX2Vycm9yKClcclxuXHJcbiAgICBkZWYgbG9hZF9kZXJfcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgc2VsZiwgZGF0YTogYnl0ZXMsIHBhc3N3b3JkOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdXHJcbiAgICApIC0+IFBSSVZBVEVfS0VZX1RZUEVTOlxyXG4gICAgICAgICMgT3BlblNTTCBoYXMgYSBmdW5jdGlvbiBjYWxsZWQgZDJpX0F1dG9Qcml2YXRlS2V5IHRoYXQgaW4gdGhlb3J5XHJcbiAgICAgICAgIyBoYW5kbGVzIHRoaXMgYXV0b21hdGljYWxseSwgaG93ZXZlciBpdCBkb2VzblwndCBoYW5kbGUgZW5jcnlwdGVkXHJcbiAgICAgICAgIyBwcml2YXRlIGtleXMuIEluc3RlYWQgd2UgdHJ5IHRvIGxvYWQgdGhlIGtleSB0d28gZGlmZmVyZW50IHdheXMuXHJcbiAgICAgICAgIyBGaXJzdCB3ZVwnbGwgdHJ5IHRvIGxvYWQgaXQgYXMgYSB0cmFkaXRpb25hbCBrZXkuXHJcbiAgICAgICAgYmlvX2RhdGEgPSBzZWxmLl9ieXRlc190b19iaW8oZGF0YSlcclxuICAgICAgICBrZXkgPSBzZWxmLl9ldnBfcGtleV9mcm9tX2Rlcl90cmFkaXRpb25hbF9rZXkoYmlvX2RhdGEsIHBhc3N3b3JkKVxyXG4gICAgICAgIGlmIGtleTpcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2V2cF9wa2V5X3RvX3ByaXZhdGVfa2V5KGtleSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAjIEZpbmFsbHkgd2UgdHJ5IHRvIGxvYWQgaXQgd2l0aCB0aGUgbWV0aG9kIHRoYXQgaGFuZGxlcyBlbmNyeXB0ZWRcclxuICAgICAgICAgICAgIyBQS0NTOCBwcm9wZXJseS5cclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2xvYWRfa2V5KFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGliLmQyaV9QS0NTOFByaXZhdGVLZXlfYmlvLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXlfdG9fcHJpdmF0ZV9rZXksXHJcbiAgICAgICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQsXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgX2V2cF9wa2V5X2Zyb21fZGVyX3RyYWRpdGlvbmFsX2tleShzZWxmLCBiaW9fZGF0YSwgcGFzc3dvcmQpOlxyXG4gICAgICAgIGtleSA9IHNlbGYuX2xpYi5kMmlfUHJpdmF0ZUtleV9iaW8oYmlvX2RhdGEuYmlvLCBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBpZiBrZXkgIT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgICMgSW4gT3BlblNTTCAzLjAuMC1hbHBoYTE1IHRoZXJlIGV4aXN0IHNjZW5hcmlvcyB3aGVyZSB0aGUga2V5IHdpbGxcclxuICAgICAgICAgICAgIyBzdWNjZXNzZnVsbHkgbG9hZCBidXQgZXJyb3JzIGFyZSBzdGlsbCBwdXQgb24gdGhlIHN0YWNrLiBUcmFja2VkXHJcbiAgICAgICAgICAgICMgYXMgaHR0cHM6Ly9naXRodWIuY29tL29wZW5zc2wvb3BlbnNzbC9pc3N1ZXMvMTQ5OTZcclxuICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG5cclxuICAgICAgICAgICAga2V5ID0gc2VsZi5fZmZpLmdjKGtleSwgc2VsZi5fbGliLkVWUF9QS0VZX2ZyZWUpXHJcbiAgICAgICAgICAgIGlmIHBhc3N3b3JkIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJQYXNzd29yZCB3YXMgZ2l2ZW4gYnV0IHByaXZhdGUga2V5IGlzIG5vdCBlbmNyeXB0ZWQuIlxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGtleVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcclxuXHJcbiAgICBkZWYgbG9hZF9kZXJfcHVibGljX2tleShzZWxmLCBkYXRhOiBieXRlcykgLT4gUFVCTElDX0tFWV9UWVBFUzpcclxuICAgICAgICBtZW1fYmlvID0gc2VsZi5fYnl0ZXNfdG9fYmlvKGRhdGEpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9saWIuZDJpX1BVQktFWV9iaW8obWVtX2Jpby5iaW8sIHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGlmIGV2cF9wa2V5ICE9IHNlbGYuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICBldnBfcGtleSA9IHNlbGYuX2ZmaS5nYyhldnBfcGtleSwgc2VsZi5fbGliLkVWUF9QS0VZX2ZyZWUpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9ldnBfcGtleV90b19wdWJsaWNfa2V5KGV2cF9wa2V5KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICMgSXRcJ3Mgbm90IGEgKFJTQS9EU0EvRUNEU0EpIHN1YmplY3RQdWJsaWNLZXlJbmZvLCBidXQgd2Ugc3RpbGxcclxuICAgICAgICAgICAgIyBuZWVkIHRvIGNoZWNrIHRvIHNlZSBpZiBpdCBpcyBhIHB1cmUgUEtDUzEgUlNBIHB1YmxpYyBrZXkgKG5vdFxyXG4gICAgICAgICAgICAjIGVtYmVkZGVkIGluIGEgc3ViamVjdFB1YmxpY0tleUluZm8pXHJcbiAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLkJJT19yZXNldChtZW1fYmlvLmJpbylcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICAgICAgcnNhX2NkYXRhID0gc2VsZi5fbGliLmQyaV9SU0FQdWJsaWNLZXlfYmlvKFxyXG4gICAgICAgICAgICAgICAgbWVtX2Jpby5iaW8sIHNlbGYuX2ZmaS5OVUxMXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgaWYgcnNhX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICAgICAgcnNhX2NkYXRhID0gc2VsZi5fZmZpLmdjKHJzYV9jZGF0YSwgc2VsZi5fbGliLlJTQV9mcmVlKVxyXG4gICAgICAgICAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9yc2FfY2RhdGFfdG9fZXZwX3BrZXkocnNhX2NkYXRhKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9SU0FQdWJsaWNLZXkoc2VsZiwgcnNhX2NkYXRhLCBldnBfcGtleSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2hhbmRsZV9rZXlfbG9hZGluZ19lcnJvcigpXHJcblxyXG4gICAgZGVmIGxvYWRfZGVyX3BhcmFtZXRlcnMoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IGRoLkRIUGFyYW1ldGVyczpcclxuICAgICAgICBtZW1fYmlvID0gc2VsZi5fYnl0ZXNfdG9fYmlvKGRhdGEpXHJcbiAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9saWIuZDJpX0RIcGFyYW1zX2JpbyhtZW1fYmlvLmJpbywgc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgaWYgZGhfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIGRoX2NkYXRhID0gc2VsZi5fZmZpLmdjKGRoX2NkYXRhLCBzZWxmLl9saWIuREhfZnJlZSlcclxuICAgICAgICAgICAgcmV0dXJuIF9ESFBhcmFtZXRlcnMoc2VsZiwgZGhfY2RhdGEpXHJcbiAgICAgICAgZWxpZiBzZWxmLl9saWIuQ3J5cHRvZ3JhcGh5X0hBU19FVlBfUEtFWV9ESFg6XHJcbiAgICAgICAgICAgICMgV2UgY2hlY2sgdG8gc2VlIGlmIHRoZSBpcyBkaHguXHJcbiAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLkJJT19yZXNldChtZW1fYmlvLmJpbylcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9saWIuQ3J5cHRvZ3JhcGh5X2QyaV9ESHhwYXJhbXNfYmlvKFxyXG4gICAgICAgICAgICAgICAgbWVtX2Jpby5iaW8sIHNlbGYuX2ZmaS5OVUxMXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgaWYgZGhfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgICAgICBkaF9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhkaF9jZGF0YSwgc2VsZi5fbGliLkRIX2ZyZWUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX0RIUGFyYW1ldGVycyhzZWxmLCBkaF9jZGF0YSlcclxuXHJcbiAgICAgICAgc2VsZi5faGFuZGxlX2tleV9sb2FkaW5nX2Vycm9yKClcclxuXHJcbiAgICBkZWYgX2NlcnQyb3NzbChzZWxmLCBjZXJ0OiB4NTA5LkNlcnRpZmljYXRlKSAtPiB0eXBpbmcuQW55OlxyXG4gICAgICAgIGRhdGEgPSBjZXJ0LnB1YmxpY19ieXRlcyhzZXJpYWxpemF0aW9uLkVuY29kaW5nLkRFUilcclxuICAgICAgICBtZW1fYmlvID0gc2VsZi5fYnl0ZXNfdG9fYmlvKGRhdGEpXHJcbiAgICAgICAgeDUwOSA9IHNlbGYuX2xpYi5kMmlfWDUwOV9iaW8obWVtX2Jpby5iaW8sIHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoeDUwOSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICB4NTA5ID0gc2VsZi5fZmZpLmdjKHg1MDksIHNlbGYuX2xpYi5YNTA5X2ZyZWUpXHJcbiAgICAgICAgcmV0dXJuIHg1MDlcclxuXHJcbiAgICBkZWYgX29zc2wyY2VydChzZWxmLCB4NTA5OiB0eXBpbmcuQW55KSAtPiB4NTA5LkNlcnRpZmljYXRlOlxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2NyZWF0ZV9tZW1fYmlvX2djKClcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuaTJkX1g1MDlfYmlvKGJpbywgeDUwOSlcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkubG9hZF9kZXJfeDUwOV9jZXJ0aWZpY2F0ZShzZWxmLl9yZWFkX21lbV9iaW8oYmlvKSlcclxuXHJcbiAgICBkZWYgX2NzcjJvc3NsKHNlbGYsIGNzcjogeDUwOS5DZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0KSAtPiB0eXBpbmcuQW55OlxyXG4gICAgICAgIGRhdGEgPSBjc3IucHVibGljX2J5dGVzKHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSKVxyXG4gICAgICAgIG1lbV9iaW8gPSBzZWxmLl9ieXRlc190b19iaW8oZGF0YSlcclxuICAgICAgICB4NTA5X3JlcSA9IHNlbGYuX2xpYi5kMmlfWDUwOV9SRVFfYmlvKG1lbV9iaW8uYmlvLCBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHg1MDlfcmVxICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHg1MDlfcmVxID0gc2VsZi5fZmZpLmdjKHg1MDlfcmVxLCBzZWxmLl9saWIuWDUwOV9SRVFfZnJlZSlcclxuICAgICAgICByZXR1cm4geDUwOV9yZXFcclxuXHJcbiAgICBkZWYgX29zc2wyY3NyKFxyXG4gICAgICAgIHNlbGYsIHg1MDlfcmVxOiB0eXBpbmcuQW55XHJcbiAgICApIC0+IHg1MDkuQ2VydGlmaWNhdGVTaWduaW5nUmVxdWVzdDpcclxuICAgICAgICBiaW8gPSBzZWxmLl9jcmVhdGVfbWVtX2Jpb19nYygpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLmkyZF9YNTA5X1JFUV9iaW8oYmlvLCB4NTA5X3JlcSlcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkubG9hZF9kZXJfeDUwOV9jc3Ioc2VsZi5fcmVhZF9tZW1fYmlvKGJpbykpXHJcblxyXG4gICAgZGVmIF9jcmwyb3NzbChzZWxmLCBjcmw6IHg1MDkuQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdCkgLT4gdHlwaW5nLkFueTpcclxuICAgICAgICBkYXRhID0gY3JsLnB1YmxpY19ieXRlcyhzZXJpYWxpemF0aW9uLkVuY29kaW5nLkRFUilcclxuICAgICAgICBtZW1fYmlvID0gc2VsZi5fYnl0ZXNfdG9fYmlvKGRhdGEpXHJcbiAgICAgICAgeDUwOV9jcmwgPSBzZWxmLl9saWIuZDJpX1g1MDlfQ1JMX2JpbyhtZW1fYmlvLmJpbywgc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydCh4NTA5X2NybCAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICB4NTA5X2NybCA9IHNlbGYuX2ZmaS5nYyh4NTA5X2NybCwgc2VsZi5fbGliLlg1MDlfQ1JMX2ZyZWUpXHJcbiAgICAgICAgcmV0dXJuIHg1MDlfY3JsXHJcblxyXG4gICAgZGVmIF9vc3NsMmNybChcclxuICAgICAgICBzZWxmLCB4NTA5X2NybDogdHlwaW5nLkFueVxyXG4gICAgKSAtPiB4NTA5LkNlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3Q6XHJcbiAgICAgICAgYmlvID0gc2VsZi5fY3JlYXRlX21lbV9iaW9fZ2MoKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5pMmRfWDUwOV9DUkxfYmlvKGJpbywgeDUwOV9jcmwpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmxvYWRfZGVyX3g1MDlfY3JsKHNlbGYuX3JlYWRfbWVtX2JpbyhiaW8pKVxyXG5cclxuICAgIGRlZiBfY3JsX2lzX3NpZ25hdHVyZV92YWxpZChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGNybDogeDUwOS5DZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0LFxyXG4gICAgICAgIHB1YmxpY19rZXk6IENFUlRJRklDQVRFX0lTU1VFUl9QVUJMSUNfS0VZX1RZUEVTLFxyXG4gICAgKSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICBwdWJsaWNfa2V5LFxyXG4gICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICBfRFNBUHVibGljS2V5LFxyXG4gICAgICAgICAgICAgICAgX1JTQVB1YmxpY0tleSxcclxuICAgICAgICAgICAgICAgIF9FbGxpcHRpY0N1cnZlUHVibGljS2V5LFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJFeHBlY3Rpbmcgb25lIG9mIERTQVB1YmxpY0tleSwgUlNBUHVibGljS2V5LCJcclxuICAgICAgICAgICAgICAgICIgb3IgRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB4NTA5X2NybCA9IHNlbGYuX2NybDJvc3NsKGNybClcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuWDUwOV9DUkxfdmVyaWZ5KHg1MDlfY3JsLCBwdWJsaWNfa2V5Ll9ldnBfcGtleSlcclxuXHJcbiAgICAgICAgaWYgcmVzICE9IDE6XHJcbiAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcblxyXG4gICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgZGVmIF9jc3JfaXNfc2lnbmF0dXJlX3ZhbGlkKFxyXG4gICAgICAgIHNlbGYsIGNzcjogeDUwOS5DZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0XHJcbiAgICApIC0+IGJvb2w6XHJcbiAgICAgICAgeDUwOV9yZXEgPSBzZWxmLl9jc3Iyb3NzbChjc3IpXHJcbiAgICAgICAgcGtleSA9IHNlbGYuX2xpYi5YNTA5X1JFUV9nZXRfcHVia2V5KHg1MDlfcmVxKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocGtleSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBwa2V5ID0gc2VsZi5fZmZpLmdjKHBrZXksIHNlbGYuX2xpYi5FVlBfUEtFWV9mcmVlKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5YNTA5X1JFUV92ZXJpZnkoeDUwOV9yZXEsIHBrZXkpXHJcblxyXG4gICAgICAgIGlmIHJlcyAhPSAxOlxyXG4gICAgICAgICAgICBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG5cclxuICAgICAgICByZXR1cm4gVHJ1ZVxyXG5cclxuICAgIGRlZiBfY2hlY2tfa2V5c19jb3JyZXNwb25kKHNlbGYsIGtleTEsIGtleTIpOlxyXG4gICAgICAgIGlmIHNlbGYuX2xpYi5FVlBfUEtFWV9jbXAoa2V5MS5fZXZwX3BrZXksIGtleTIuX2V2cF9wa2V5KSAhPSAxOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJLZXlzIGRvIG5vdCBjb3JyZXNwb25kIilcclxuXHJcbiAgICBkZWYgX2xvYWRfa2V5KHNlbGYsIG9wZW5zc2xfcmVhZF9mdW5jLCBjb252ZXJ0X2Z1bmMsIGRhdGEsIHBhc3N3b3JkKTpcclxuICAgICAgICBtZW1fYmlvID0gc2VsZi5fYnl0ZXNfdG9fYmlvKGRhdGEpXHJcblxyXG4gICAgICAgIHVzZXJkYXRhID0gc2VsZi5fZmZpLm5ldygiQ1JZUFRPR1JBUEhZX1BBU1NXT1JEX0RBVEEgKiIpXHJcbiAgICAgICAgaWYgcGFzc3dvcmQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoInBhc3N3b3JkIiwgcGFzc3dvcmQpXHJcbiAgICAgICAgICAgIHBhc3N3b3JkX3B0ciA9IHNlbGYuX2ZmaS5mcm9tX2J1ZmZlcihwYXNzd29yZClcclxuICAgICAgICAgICAgdXNlcmRhdGEucGFzc3dvcmQgPSBwYXNzd29yZF9wdHJcclxuICAgICAgICAgICAgdXNlcmRhdGEubGVuZ3RoID0gbGVuKHBhc3N3b3JkKVxyXG5cclxuICAgICAgICBldnBfcGtleSA9IG9wZW5zc2xfcmVhZF9mdW5jKFxyXG4gICAgICAgICAgICBtZW1fYmlvLmJpbyxcclxuICAgICAgICAgICAgc2VsZi5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2ZmaS5hZGRyZXNzb2YoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9saWIuX29yaWdpbmFsX2xpYiwgIkNyeXB0b2dyYXBoeV9wZW1fcGFzc3dvcmRfY2IiXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHVzZXJkYXRhLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgZXZwX3BrZXkgPT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIGlmIHVzZXJkYXRhLmVycm9yICE9IDA6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgICAgICBpZiB1c2VyZGF0YS5lcnJvciA9PSAtMTpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICJQYXNzd29yZCB3YXMgbm90IGdpdmVuIGJ1dCBwcml2YXRlIGtleSBpcyBlbmNyeXB0ZWQiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQgdXNlcmRhdGEuZXJyb3IgPT0gLTJcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiUGFzc3dvcmRzIGxvbmdlciB0aGFuIHt9IGJ5dGVzIGFyZSBub3Qgc3VwcG9ydGVkICJcclxuICAgICAgICAgICAgICAgICAgICAgICAgImJ5IHRoaXMgYmFja2VuZC4iLmZvcm1hdCh1c2VyZGF0YS5tYXhzaXplIC0gMSlcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9oYW5kbGVfa2V5X2xvYWRpbmdfZXJyb3IoKVxyXG5cclxuICAgICAgICAjIEluIE9wZW5TU0wgMy4wLjAtYWxwaGExNSB0aGVyZSBleGlzdCBzY2VuYXJpb3Mgd2hlcmUgdGhlIGtleSB3aWxsXHJcbiAgICAgICAgIyBzdWNjZXNzZnVsbHkgbG9hZCBidXQgZXJyb3JzIGFyZSBzdGlsbCBwdXQgb24gdGhlIHN0YWNrLiBUcmFja2VkXHJcbiAgICAgICAgIyBhcyBodHRwczovL2dpdGh1Yi5jb20vb3BlbnNzbC9vcGVuc3NsL2lzc3Vlcy8xNDk5NlxyXG4gICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9mZmkuZ2MoZXZwX3BrZXksIHNlbGYuX2xpYi5FVlBfUEtFWV9mcmVlKVxyXG5cclxuICAgICAgICBpZiBwYXNzd29yZCBpcyBub3QgTm9uZSBhbmQgdXNlcmRhdGEuY2FsbGVkID09IDA6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJQYXNzd29yZCB3YXMgZ2l2ZW4gYnV0IHByaXZhdGUga2V5IGlzIG5vdCBlbmNyeXB0ZWQuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGFzc2VydCAoXHJcbiAgICAgICAgICAgIHBhc3N3b3JkIGlzIG5vdCBOb25lIGFuZCB1c2VyZGF0YS5jYWxsZWQgPT0gMVxyXG4gICAgICAgICkgb3IgcGFzc3dvcmQgaXMgTm9uZVxyXG5cclxuICAgICAgICByZXR1cm4gY29udmVydF9mdW5jKGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBfaGFuZGxlX2tleV9sb2FkaW5nX2Vycm9yKHNlbGYpIC0+IHR5cGluZy5Ob1JldHVybjpcclxuICAgICAgICBlcnJvcnMgPSBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcblxyXG4gICAgICAgIGlmIG5vdCBlcnJvcnM6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiQ291bGQgbm90IGRlc2VyaWFsaXplIGtleSBkYXRhLiBUaGUgZGF0YSBtYXkgYmUgaW4gYW4gIlxyXG4gICAgICAgICAgICAgICAgImluY29ycmVjdCBmb3JtYXQgb3IgaXQgbWF5IGJlIGVuY3J5cHRlZCB3aXRoIGFuIHVuc3VwcG9ydGVkICJcclxuICAgICAgICAgICAgICAgICJhbGdvcml0aG0uIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGVsaWYgKFxyXG4gICAgICAgICAgICBlcnJvcnNbMF0uX2xpYl9yZWFzb25fbWF0Y2goXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9saWIuRVJSX0xJQl9FVlAsIHNlbGYuX2xpYi5FVlBfUl9CQURfREVDUllQVFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIG9yIGVycm9yc1swXS5fbGliX3JlYXNvbl9tYXRjaChcclxuICAgICAgICAgICAgICAgIHNlbGYuX2xpYi5FUlJfTElCX1BLQ1MxMixcclxuICAgICAgICAgICAgICAgIHNlbGYuX2xpYi5QS0NTMTJfUl9QS0NTMTJfQ0lQSEVSRklOQUxfRVJST1IsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgb3IgKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGliLkNyeXB0b2dyYXBoeV9IQVNfUFJPVklERVJTXHJcbiAgICAgICAgICAgICAgICBhbmQgZXJyb3JzWzBdLl9saWJfcmVhc29uX21hdGNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2xpYi5FUlJfTElCX1BST1YsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbGliLlBST1ZfUl9CQURfREVDUllQVCxcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkJhZCBkZWNyeXB0LiBJbmNvcnJlY3QgcGFzc3dvcmQ/IilcclxuXHJcbiAgICAgICAgZWxpZiBhbnkoXHJcbiAgICAgICAgICAgIGVycm9yLl9saWJfcmVhc29uX21hdGNoKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGliLkVSUl9MSUJfRVZQLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGliLkVWUF9SX1VOU1VQUE9SVEVEX1BSSVZBVEVfS0VZX0FMR09SSVRITSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBmb3IgZXJyb3IgaW4gZXJyb3JzXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5zdXBwb3J0ZWQgcHVibGljIGtleSBhbGdvcml0aG0uIilcclxuXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgZXJyb3JzX3dpdGhfdGV4dCA9IGJpbmRpbmcuX2Vycm9yc193aXRoX3RleHQoZXJyb3JzKVxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkNvdWxkIG5vdCBkZXNlcmlhbGl6ZSBrZXkgZGF0YS4gVGhlIGRhdGEgbWF5IGJlIGluIGFuICJcclxuICAgICAgICAgICAgICAgICJpbmNvcnJlY3QgZm9ybWF0LCBpdCBtYXkgYmUgZW5jcnlwdGVkIHdpdGggYW4gdW5zdXBwb3J0ZWQgIlxyXG4gICAgICAgICAgICAgICAgImFsZ29yaXRobSwgb3IgaXQgbWF5IGJlIGFuIHVuc3VwcG9ydGVkIGtleSB0eXBlIChlLmcuIEVDICJcclxuICAgICAgICAgICAgICAgICJjdXJ2ZXMgd2l0aCBleHBsaWNpdCBwYXJhbWV0ZXJzKS4iLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JzX3dpdGhfdGV4dCxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBlbGxpcHRpY19jdXJ2ZV9zdXBwb3J0ZWQoc2VsZiwgY3VydmU6IGVjLkVsbGlwdGljQ3VydmUpIC0+IGJvb2w6XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBjdXJ2ZV9uaWQgPSBzZWxmLl9lbGxpcHRpY19jdXJ2ZV90b19uaWQoY3VydmUpXHJcbiAgICAgICAgZXhjZXB0IFVuc3VwcG9ydGVkQWxnb3JpdGhtOlxyXG4gICAgICAgICAgICBjdXJ2ZV9uaWQgPSBzZWxmLl9saWIuTklEX3VuZGVmXHJcblxyXG4gICAgICAgIGdyb3VwID0gc2VsZi5fbGliLkVDX0dST1VQX25ld19ieV9jdXJ2ZV9uYW1lKGN1cnZlX25pZClcclxuXHJcbiAgICAgICAgaWYgZ3JvdXAgPT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChjdXJ2ZV9uaWQgIT0gc2VsZi5fbGliLk5JRF91bmRlZilcclxuICAgICAgICAgICAgc2VsZi5fbGliLkVDX0dST1VQX2ZyZWUoZ3JvdXApXHJcbiAgICAgICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgZGVmIGVsbGlwdGljX2N1cnZlX3NpZ25hdHVyZV9hbGdvcml0aG1fc3VwcG9ydGVkKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgc2lnbmF0dXJlX2FsZ29yaXRobTogZWMuRWxsaXB0aWNDdXJ2ZVNpZ25hdHVyZUFsZ29yaXRobSxcclxuICAgICAgICBjdXJ2ZTogZWMuRWxsaXB0aWNDdXJ2ZSxcclxuICAgICkgLT4gYm9vbDpcclxuICAgICAgICAjIFdlIG9ubHkgc3VwcG9ydCBFQ0RTQSByaWdodCBub3cuXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc2lnbmF0dXJlX2FsZ29yaXRobSwgZWMuRUNEU0EpOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZWxsaXB0aWNfY3VydmVfc3VwcG9ydGVkKGN1cnZlKVxyXG5cclxuICAgIGRlZiBnZW5lcmF0ZV9lbGxpcHRpY19jdXJ2ZV9wcml2YXRlX2tleShcclxuICAgICAgICBzZWxmLCBjdXJ2ZTogZWMuRWxsaXB0aWNDdXJ2ZVxyXG4gICAgKSAtPiBlYy5FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBHZW5lcmF0ZSBhIG5ldyBwcml2YXRlIGtleSBvbiB0aGUgbmFtZWQgY3VydmUuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgICAgIGlmIHNlbGYuZWxsaXB0aWNfY3VydmVfc3VwcG9ydGVkKGN1cnZlKTpcclxuICAgICAgICAgICAgZWNfY2RhdGEgPSBzZWxmLl9lY19rZXlfbmV3X2J5X2N1cnZlKGN1cnZlKVxyXG5cclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLkVDX0tFWV9nZW5lcmF0ZV9rZXkoZWNfY2RhdGEpXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgICAgICBldnBfcGtleSA9IHNlbGYuX2VjX2NkYXRhX3RvX2V2cF9wa2V5KGVjX2NkYXRhKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIF9FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleShzZWxmLCBlY19jZGF0YSwgZXZwX3BrZXkpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiQmFja2VuZCBvYmplY3QgZG9lcyBub3Qgc3VwcG9ydCB7fS4iLmZvcm1hdChjdXJ2ZS5uYW1lKSxcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX0VMTElQVElDX0NVUlZFLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIGxvYWRfZWxsaXB0aWNfY3VydmVfcHJpdmF0ZV9udW1iZXJzKFxyXG4gICAgICAgIHNlbGYsIG51bWJlcnM6IGVjLkVsbGlwdGljQ3VydmVQcml2YXRlTnVtYmVyc1xyXG4gICAgKSAtPiBlYy5FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleTpcclxuICAgICAgICBwdWJsaWMgPSBudW1iZXJzLnB1YmxpY19udW1iZXJzXHJcblxyXG4gICAgICAgIGVjX2NkYXRhID0gc2VsZi5fZWNfa2V5X25ld19ieV9jdXJ2ZShwdWJsaWMuY3VydmUpXHJcblxyXG4gICAgICAgIHByaXZhdGVfdmFsdWUgPSBzZWxmLl9mZmkuZ2MoXHJcbiAgICAgICAgICAgIHNlbGYuX2ludF90b19ibihudW1iZXJzLnByaXZhdGVfdmFsdWUpLCBzZWxmLl9saWIuQk5fY2xlYXJfZnJlZVxyXG4gICAgICAgIClcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuRUNfS0VZX3NldF9wcml2YXRlX2tleShlY19jZGF0YSwgcHJpdmF0ZV92YWx1ZSlcclxuICAgICAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIEVDIGtleS4iKVxyXG5cclxuICAgICAgICBzZWxmLl9lY19rZXlfc2V0X3B1YmxpY19rZXlfYWZmaW5lX2Nvb3JkaW5hdGVzKFxyXG4gICAgICAgICAgICBlY19jZGF0YSwgcHVibGljLngsIHB1YmxpYy55XHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2VjX2NkYXRhX3RvX2V2cF9wa2V5KGVjX2NkYXRhKVxyXG5cclxuICAgICAgICByZXR1cm4gX0VsbGlwdGljQ3VydmVQcml2YXRlS2V5KHNlbGYsIGVjX2NkYXRhLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgbG9hZF9lbGxpcHRpY19jdXJ2ZV9wdWJsaWNfbnVtYmVycyhcclxuICAgICAgICBzZWxmLCBudW1iZXJzOiBlYy5FbGxpcHRpY0N1cnZlUHVibGljTnVtYmVyc1xyXG4gICAgKSAtPiBlYy5FbGxpcHRpY0N1cnZlUHVibGljS2V5OlxyXG4gICAgICAgIGVjX2NkYXRhID0gc2VsZi5fZWNfa2V5X25ld19ieV9jdXJ2ZShudW1iZXJzLmN1cnZlKVxyXG4gICAgICAgIHNlbGYuX2VjX2tleV9zZXRfcHVibGljX2tleV9hZmZpbmVfY29vcmRpbmF0ZXMoXHJcbiAgICAgICAgICAgIGVjX2NkYXRhLCBudW1iZXJzLngsIG51bWJlcnMueVxyXG4gICAgICAgIClcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2VjX2NkYXRhX3RvX2V2cF9wa2V5KGVjX2NkYXRhKVxyXG5cclxuICAgICAgICByZXR1cm4gX0VsbGlwdGljQ3VydmVQdWJsaWNLZXkoc2VsZiwgZWNfY2RhdGEsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBsb2FkX2VsbGlwdGljX2N1cnZlX3B1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLCBjdXJ2ZTogZWMuRWxsaXB0aWNDdXJ2ZSwgcG9pbnRfYnl0ZXM6IGJ5dGVzXHJcbiAgICApIC0+IGVjLkVsbGlwdGljQ3VydmVQdWJsaWNLZXk6XHJcbiAgICAgICAgZWNfY2RhdGEgPSBzZWxmLl9lY19rZXlfbmV3X2J5X2N1cnZlKGN1cnZlKVxyXG4gICAgICAgIGdyb3VwID0gc2VsZi5fbGliLkVDX0tFWV9nZXQwX2dyb3VwKGVjX2NkYXRhKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZ3JvdXAgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgcG9pbnQgPSBzZWxmLl9saWIuRUNfUE9JTlRfbmV3KGdyb3VwKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocG9pbnQgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgcG9pbnQgPSBzZWxmLl9mZmkuZ2MocG9pbnQsIHNlbGYuX2xpYi5FQ19QT0lOVF9mcmVlKVxyXG4gICAgICAgIHdpdGggc2VsZi5fdG1wX2JuX2N0eCgpIGFzIGJuX2N0eDpcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLkVDX1BPSU5UX29jdDJwb2ludChcclxuICAgICAgICAgICAgICAgIGdyb3VwLCBwb2ludCwgcG9pbnRfYnl0ZXMsIGxlbihwb2ludF9ieXRlcyksIGJuX2N0eFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGlmIHJlcyAhPSAxOlxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSW52YWxpZCBwdWJsaWMgYnl0ZXMgZm9yIHRoZSBnaXZlbiBjdXJ2ZSIpXHJcblxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FQ19LRVlfc2V0X3B1YmxpY19rZXkoZWNfY2RhdGEsIHBvaW50KVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9lY19jZGF0YV90b19ldnBfcGtleShlY19jZGF0YSlcclxuICAgICAgICByZXR1cm4gX0VsbGlwdGljQ3VydmVQdWJsaWNLZXkoc2VsZiwgZWNfY2RhdGEsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBkZXJpdmVfZWxsaXB0aWNfY3VydmVfcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgc2VsZiwgcHJpdmF0ZV92YWx1ZTogaW50LCBjdXJ2ZTogZWMuRWxsaXB0aWNDdXJ2ZVxyXG4gICAgKSAtPiBlYy5FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleTpcclxuICAgICAgICBlY19jZGF0YSA9IHNlbGYuX2VjX2tleV9uZXdfYnlfY3VydmUoY3VydmUpXHJcblxyXG4gICAgICAgIGdldF9mdW5jLCBncm91cCA9IHNlbGYuX2VjX2tleV9kZXRlcm1pbmVfZ3JvdXBfZ2V0X2Z1bmMoZWNfY2RhdGEpXHJcblxyXG4gICAgICAgIHBvaW50ID0gc2VsZi5fbGliLkVDX1BPSU5UX25ldyhncm91cClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHBvaW50ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHBvaW50ID0gc2VsZi5fZmZpLmdjKHBvaW50LCBzZWxmLl9saWIuRUNfUE9JTlRfZnJlZSlcclxuXHJcbiAgICAgICAgdmFsdWUgPSBzZWxmLl9pbnRfdG9fYm4ocHJpdmF0ZV92YWx1ZSlcclxuICAgICAgICB2YWx1ZSA9IHNlbGYuX2ZmaS5nYyh2YWx1ZSwgc2VsZi5fbGliLkJOX2NsZWFyX2ZyZWUpXHJcblxyXG4gICAgICAgIHdpdGggc2VsZi5fdG1wX2JuX2N0eCgpIGFzIGJuX2N0eDpcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLkVDX1BPSU5UX211bChcclxuICAgICAgICAgICAgICAgIGdyb3VwLCBwb2ludCwgdmFsdWUsIHNlbGYuX2ZmaS5OVUxMLCBzZWxmLl9mZmkuTlVMTCwgYm5fY3R4XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgICAgIGJuX3ggPSBzZWxmLl9saWIuQk5fQ1RYX2dldChibl9jdHgpXHJcbiAgICAgICAgICAgIGJuX3kgPSBzZWxmLl9saWIuQk5fQ1RYX2dldChibl9jdHgpXHJcblxyXG4gICAgICAgICAgICByZXMgPSBnZXRfZnVuYyhncm91cCwgcG9pbnQsIGJuX3gsIGJuX3ksIGJuX2N0eClcclxuICAgICAgICAgICAgaWYgcmVzICE9IDE6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbmFibGUgdG8gZGVyaXZlIGtleSBmcm9tIHByaXZhdGVfdmFsdWUiKVxyXG5cclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuRUNfS0VZX3NldF9wdWJsaWNfa2V5KGVjX2NkYXRhLCBwb2ludClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHByaXZhdGUgPSBzZWxmLl9pbnRfdG9fYm4ocHJpdmF0ZV92YWx1ZSlcclxuICAgICAgICBwcml2YXRlID0gc2VsZi5fZmZpLmdjKHByaXZhdGUsIHNlbGYuX2xpYi5CTl9jbGVhcl9mcmVlKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FQ19LRVlfc2V0X3ByaXZhdGVfa2V5KGVjX2NkYXRhLCBwcml2YXRlKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZWNfY2RhdGFfdG9fZXZwX3BrZXkoZWNfY2RhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBfRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXkoc2VsZiwgZWNfY2RhdGEsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBfZWNfa2V5X25ld19ieV9jdXJ2ZShzZWxmLCBjdXJ2ZTogZWMuRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICAgICAgY3VydmVfbmlkID0gc2VsZi5fZWxsaXB0aWNfY3VydmVfdG9fbmlkKGN1cnZlKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9lY19rZXlfbmV3X2J5X2N1cnZlX25pZChjdXJ2ZV9uaWQpXHJcblxyXG4gICAgZGVmIF9lY19rZXlfbmV3X2J5X2N1cnZlX25pZChzZWxmLCBjdXJ2ZV9uaWQ6IGludCk6XHJcbiAgICAgICAgZWNfY2RhdGEgPSBzZWxmLl9saWIuRUNfS0VZX25ld19ieV9jdXJ2ZV9uYW1lKGN1cnZlX25pZClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGVjX2NkYXRhICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mZmkuZ2MoZWNfY2RhdGEsIHNlbGYuX2xpYi5FQ19LRVlfZnJlZSlcclxuXHJcbiAgICBkZWYgZWxsaXB0aWNfY3VydmVfZXhjaGFuZ2VfYWxnb3JpdGhtX3N1cHBvcnRlZChcclxuICAgICAgICBzZWxmLCBhbGdvcml0aG06IGVjLkVDREgsIGN1cnZlOiBlYy5FbGxpcHRpY0N1cnZlXHJcbiAgICApIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgc2VsZi5fZmlwc19lbmFibGVkIGFuZCBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgY3VydmUsIHNlbGYuX2ZpcHNfZWNkaF9jdXJ2ZXNcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZWxsaXB0aWNfY3VydmVfc3VwcG9ydGVkKGN1cnZlKSBhbmQgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgYWxnb3JpdGhtLCBlYy5FQ0RIXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfZWNfY2RhdGFfdG9fZXZwX3BrZXkoc2VsZiwgZWNfY2RhdGEpOlxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fY3JlYXRlX2V2cF9wa2V5X2djKClcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuRVZQX1BLRVlfc2V0MV9FQ19LRVkoZXZwX3BrZXksIGVjX2NkYXRhKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmV0dXJuIGV2cF9wa2V5XHJcblxyXG4gICAgZGVmIF9lbGxpcHRpY19jdXJ2ZV90b19uaWQoc2VsZiwgY3VydmU6IGVjLkVsbGlwdGljQ3VydmUpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBHZXQgdGhlIE5JRCBmb3IgYSBjdXJ2ZSBuYW1lLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgICAgICBjdXJ2ZV9hbGlhc2VzID0geyJzZWNwMTkycjEiOiAicHJpbWUxOTJ2MSIsICJzZWNwMjU2cjEiOiAicHJpbWUyNTZ2MSJ9XHJcblxyXG4gICAgICAgIGN1cnZlX25hbWUgPSBjdXJ2ZV9hbGlhc2VzLmdldChjdXJ2ZS5uYW1lLCBjdXJ2ZS5uYW1lKVxyXG5cclxuICAgICAgICBjdXJ2ZV9uaWQgPSBzZWxmLl9saWIuT0JKX3NuMm5pZChjdXJ2ZV9uYW1lLmVuY29kZSgpKVxyXG4gICAgICAgIGlmIGN1cnZlX25pZCA9PSBzZWxmLl9saWIuTklEX3VuZGVmOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJ7fSBpcyBub3QgYSBzdXBwb3J0ZWQgZWxsaXB0aWMgY3VydmUiLmZvcm1hdChjdXJ2ZS5uYW1lKSxcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX0VMTElQVElDX0NVUlZFLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIGN1cnZlX25pZFxyXG5cclxuICAgIEBjb250ZXh0bWFuYWdlclxyXG4gICAgZGVmIF90bXBfYm5fY3R4KHNlbGYpOlxyXG4gICAgICAgIGJuX2N0eCA9IHNlbGYuX2xpYi5CTl9DVFhfbmV3KClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGJuX2N0eCAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBibl9jdHggPSBzZWxmLl9mZmkuZ2MoYm5fY3R4LCBzZWxmLl9saWIuQk5fQ1RYX2ZyZWUpXHJcbiAgICAgICAgc2VsZi5fbGliLkJOX0NUWF9zdGFydChibl9jdHgpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICB5aWVsZCBibl9jdHhcclxuICAgICAgICBmaW5hbGx5OlxyXG4gICAgICAgICAgICBzZWxmLl9saWIuQk5fQ1RYX2VuZChibl9jdHgpXHJcblxyXG4gICAgZGVmIF9lY19rZXlfZGV0ZXJtaW5lX2dyb3VwX2dldF9mdW5jKHNlbGYsIGN0eCk6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgR2l2ZW4gYW4gRUNfS0VZIGRldGVybWluZSB0aGUgZ3JvdXAgYW5kIHdoYXQgZnVuY3Rpb24gaXMgcmVxdWlyZWQgdG9cclxuICAgICAgICBnZXQgcG9pbnQgY29vcmRpbmF0ZXMuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChjdHggIT0gc2VsZi5fZmZpLk5VTEwpXHJcblxyXG4gICAgICAgIG5pZF90d29fZmllbGQgPSBzZWxmLl9saWIuT0JKX3NuMm5pZChiImNoYXJhY3RlcmlzdGljLXR3by1maWVsZCIpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChuaWRfdHdvX2ZpZWxkICE9IHNlbGYuX2xpYi5OSURfdW5kZWYpXHJcblxyXG4gICAgICAgIGdyb3VwID0gc2VsZi5fbGliLkVDX0tFWV9nZXQwX2dyb3VwKGN0eClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGdyb3VwICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG5cclxuICAgICAgICBtZXRob2QgPSBzZWxmLl9saWIuRUNfR1JPVVBfbWV0aG9kX29mKGdyb3VwKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQobWV0aG9kICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG5cclxuICAgICAgICBuaWQgPSBzZWxmLl9saWIuRUNfTUVUSE9EX2dldF9maWVsZF90eXBlKG1ldGhvZClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KG5pZCAhPSBzZWxmLl9saWIuTklEX3VuZGVmKVxyXG5cclxuICAgICAgICBpZiBuaWQgPT0gbmlkX3R3b19maWVsZCBhbmQgc2VsZi5fbGliLkNyeXB0b2dyYXBoeV9IQVNfRUMyTTpcclxuICAgICAgICAgICAgZ2V0X2Z1bmMgPSBzZWxmLl9saWIuRUNfUE9JTlRfZ2V0X2FmZmluZV9jb29yZGluYXRlc19HRjJtXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgZ2V0X2Z1bmMgPSBzZWxmLl9saWIuRUNfUE9JTlRfZ2V0X2FmZmluZV9jb29yZGluYXRlc19HRnBcclxuXHJcbiAgICAgICAgYXNzZXJ0IGdldF9mdW5jXHJcblxyXG4gICAgICAgIHJldHVybiBnZXRfZnVuYywgZ3JvdXBcclxuXHJcbiAgICBkZWYgX2VjX2tleV9zZXRfcHVibGljX2tleV9hZmZpbmVfY29vcmRpbmF0ZXMoc2VsZiwgY3R4LCB4OiBpbnQsIHk6IGludCk6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2V0cyB0aGUgcHVibGljIGtleSBwb2ludCBpbiB0aGUgRUNfS0VZIGNvbnRleHQgdG8gdGhlIGFmZmluZSB4IGFuZCB5XHJcbiAgICAgICAgdmFsdWVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgICAgICBpZiB4IDwgMCBvciB5IDwgMDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJJbnZhbGlkIEVDIGtleS4gQm90aCB4IGFuZCB5IG11c3QgYmUgbm9uLW5lZ2F0aXZlLiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICB4ID0gc2VsZi5fZmZpLmdjKHNlbGYuX2ludF90b19ibih4KSwgc2VsZi5fbGliLkJOX2ZyZWUpXHJcbiAgICAgICAgeSA9IHNlbGYuX2ZmaS5nYyhzZWxmLl9pbnRfdG9fYm4oeSksIHNlbGYuX2xpYi5CTl9mcmVlKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FQ19LRVlfc2V0X3B1YmxpY19rZXlfYWZmaW5lX2Nvb3JkaW5hdGVzKGN0eCwgeCwgeSlcclxuICAgICAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIEVDIGtleS4iKVxyXG5cclxuICAgIGRlZiBfcHJpdmF0ZV9rZXlfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogc2VyaWFsaXphdGlvbi5LZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuICAgICAgICBrZXksXHJcbiAgICAgICAgZXZwX3BrZXksXHJcbiAgICAgICAgY2RhdGEsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICMgdmFsaWRhdGUgYXJndW1lbnQgdHlwZXNcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShlbmNvZGluZywgc2VyaWFsaXphdGlvbi5FbmNvZGluZyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZW5jb2RpbmcgbXVzdCBiZSBhbiBpdGVtIGZyb20gdGhlIEVuY29kaW5nIGVudW0iKVxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGZvcm1hdCwgc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImZvcm1hdCBtdXN0IGJlIGFuIGl0ZW0gZnJvbSB0aGUgUHJpdmF0ZUZvcm1hdCBlbnVtIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtLCBzZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkVuY3J5cHRpb24gYWxnb3JpdGhtIG11c3QgYmUgYSBLZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbiAiXHJcbiAgICAgICAgICAgICAgICAiaW5zdGFuY2UiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgIyB2YWxpZGF0ZSBwYXNzd29yZFxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UoZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlcmlhbGl6YXRpb24uTm9FbmNyeXB0aW9uKTpcclxuICAgICAgICAgICAgcGFzc3dvcmQgPSBiIiJcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtLCBzZXJpYWxpemF0aW9uLkJlc3RBdmFpbGFibGVFbmNyeXB0aW9uXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcGFzc3dvcmQgPSBlbmNyeXB0aW9uX2FsZ29yaXRobS5wYXNzd29yZFxyXG4gICAgICAgICAgICBpZiBsZW4ocGFzc3dvcmQpID4gMTAyMzpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIlBhc3N3b3JkcyBsb25nZXIgdGhhbiAxMDIzIGJ5dGVzIGFyZSBub3Qgc3VwcG9ydGVkIGJ5ICJcclxuICAgICAgICAgICAgICAgICAgICAidGhpcyBiYWNrZW5kIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVuc3VwcG9ydGVkIGVuY3J5cHRpb24gdHlwZSIpXHJcblxyXG4gICAgICAgICMgUEtDUzggKyBQRU0vREVSXHJcbiAgICAgICAgaWYgZm9ybWF0IGlzIHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdC5QS0NTODpcclxuICAgICAgICAgICAgaWYgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5QRU06XHJcbiAgICAgICAgICAgICAgICB3cml0ZV9iaW8gPSBzZWxmLl9saWIuUEVNX3dyaXRlX2Jpb19QS0NTOFByaXZhdGVLZXlcclxuICAgICAgICAgICAgZWxpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLkRFUjpcclxuICAgICAgICAgICAgICAgIHdyaXRlX2JpbyA9IHNlbGYuX2xpYi5pMmRfUEtDUzhQcml2YXRlS2V5X2Jpb1xyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5zdXBwb3J0ZWQgZW5jb2RpbmcgZm9yIFBLQ1M4IilcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3ByaXZhdGVfa2V5X2J5dGVzX3ZpYV9iaW8oXHJcbiAgICAgICAgICAgICAgICB3cml0ZV9iaW8sIGV2cF9wa2V5LCBwYXNzd29yZFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgVHJhZGl0aW9uYWxPcGVuU1NMICsgUEVNL0RFUlxyXG4gICAgICAgIGlmIGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQuVHJhZGl0aW9uYWxPcGVuU1NMOlxyXG4gICAgICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQgYW5kIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlcmlhbGl6YXRpb24uTm9FbmNyeXB0aW9uXHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJFbmNyeXB0ZWQgdHJhZGl0aW9uYWwgT3BlblNTTCBmb3JtYXQgaXMgbm90ICJcclxuICAgICAgICAgICAgICAgICAgICAic3VwcG9ydGVkIGluIEZJUFMgbW9kZS4iXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGtleV90eXBlID0gc2VsZi5fbGliLkVWUF9QS0VZX2lkKGV2cF9wa2V5KVxyXG5cclxuICAgICAgICAgICAgaWYgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5QRU06XHJcbiAgICAgICAgICAgICAgICBpZiBrZXlfdHlwZSA9PSBzZWxmLl9saWIuRVZQX1BLRVlfUlNBOlxyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlX2JpbyA9IHNlbGYuX2xpYi5QRU1fd3JpdGVfYmlvX1JTQVByaXZhdGVLZXlcclxuICAgICAgICAgICAgICAgIGVsaWYga2V5X3R5cGUgPT0gc2VsZi5fbGliLkVWUF9QS0VZX0RTQTpcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZV9iaW8gPSBzZWxmLl9saWIuUEVNX3dyaXRlX2Jpb19EU0FQcml2YXRlS2V5XHJcbiAgICAgICAgICAgICAgICBlbGlmIGtleV90eXBlID09IHNlbGYuX2xpYi5FVlBfUEtFWV9FQzpcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZV9iaW8gPSBzZWxmLl9saWIuUEVNX3dyaXRlX2Jpb19FQ1ByaXZhdGVLZXlcclxuICAgICAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgIlVuc3VwcG9ydGVkIGtleSB0eXBlIGZvciBUcmFkaXRpb25hbE9wZW5TU0wiXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3ByaXZhdGVfa2V5X2J5dGVzX3ZpYV9iaW8oXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVfYmlvLCBjZGF0YSwgcGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIGlmIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSOlxyXG4gICAgICAgICAgICAgICAgaWYgcGFzc3dvcmQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgIkVuY3J5cHRpb24gaXMgbm90IHN1cHBvcnRlZCBmb3IgREVSIGVuY29kZWQgIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAidHJhZGl0aW9uYWwgT3BlblNTTCBrZXlzIlxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIGlmIGtleV90eXBlID09IHNlbGYuX2xpYi5FVlBfUEtFWV9SU0E6XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVfYmlvID0gc2VsZi5fbGliLmkyZF9SU0FQcml2YXRlS2V5X2Jpb1xyXG4gICAgICAgICAgICAgICAgZWxpZiBrZXlfdHlwZSA9PSBzZWxmLl9saWIuRVZQX1BLRVlfRUM6XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVfYmlvID0gc2VsZi5fbGliLmkyZF9FQ1ByaXZhdGVLZXlfYmlvXHJcbiAgICAgICAgICAgICAgICBlbGlmIGtleV90eXBlID09IHNlbGYuX2xpYi5FVlBfUEtFWV9EU0E6XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVfYmlvID0gc2VsZi5fbGliLmkyZF9EU0FQcml2YXRlS2V5X2Jpb1xyXG4gICAgICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAiVW5zdXBwb3J0ZWQga2V5IHR5cGUgZm9yIFRyYWRpdGlvbmFsT3BlblNTTCJcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fYmlvX2Z1bmNfb3V0cHV0KHdyaXRlX2JpbywgY2RhdGEpXHJcblxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbnN1cHBvcnRlZCBlbmNvZGluZyBmb3IgVHJhZGl0aW9uYWxPcGVuU1NMIilcclxuXHJcbiAgICAgICAgIyBPcGVuU1NIICsgUEVNXHJcbiAgICAgICAgaWYgZm9ybWF0IGlzIHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdC5PcGVuU1NIOlxyXG4gICAgICAgICAgICBpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlBFTTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzc2guc2VyaWFsaXplX3NzaF9wcml2YXRlX2tleShrZXksIHBhc3N3b3JkKVxyXG5cclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJPcGVuU1NIIHByaXZhdGUga2V5IGZvcm1hdCBjYW4gb25seSBiZSB1c2VkIlxyXG4gICAgICAgICAgICAgICAgIiB3aXRoIFBFTSBlbmNvZGluZyJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAjIEFueXRoaW5nIHRoYXQga2V5LXNwZWNpZmljIGNvZGUgd2FzIHN1cHBvc2VkIHRvIGhhbmRsZSBlYXJsaWVyLFxyXG4gICAgICAgICMgbGlrZSBSYXcuXHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZm9ybWF0IGlzIGludmFsaWQgd2l0aCB0aGlzIGtleSIpXHJcblxyXG4gICAgZGVmIF9wcml2YXRlX2tleV9ieXRlc192aWFfYmlvKHNlbGYsIHdyaXRlX2JpbywgZXZwX3BrZXksIHBhc3N3b3JkKTpcclxuICAgICAgICBpZiBub3QgcGFzc3dvcmQ6XHJcbiAgICAgICAgICAgIGV2cF9jaXBoZXIgPSBzZWxmLl9mZmkuTlVMTFxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICMgVGhpcyBpcyBhIGN1cmF0ZWQgdmFsdWUgdGhhdCB3ZSB3aWxsIHVwZGF0ZSBvdmVyIHRpbWUuXHJcbiAgICAgICAgICAgIGV2cF9jaXBoZXIgPSBzZWxmLl9saWIuRVZQX2dldF9jaXBoZXJieW5hbWUoYiJhZXMtMjU2LWNiYyIpXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iaW9fZnVuY19vdXRwdXQoXHJcbiAgICAgICAgICAgIHdyaXRlX2JpbyxcclxuICAgICAgICAgICAgZXZwX3BrZXksXHJcbiAgICAgICAgICAgIGV2cF9jaXBoZXIsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkLFxyXG4gICAgICAgICAgICBsZW4ocGFzc3dvcmQpLFxyXG4gICAgICAgICAgICBzZWxmLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fZmZpLk5VTEwsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfYmlvX2Z1bmNfb3V0cHV0KHNlbGYsIHdyaXRlX2JpbywgKmFyZ3MpOlxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2NyZWF0ZV9tZW1fYmlvX2djKClcclxuICAgICAgICByZXMgPSB3cml0ZV9iaW8oYmlvLCAqYXJncylcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZWFkX21lbV9iaW8oYmlvKVxyXG5cclxuICAgIGRlZiBfcHVibGljX2tleV9ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQsXHJcbiAgICAgICAga2V5LFxyXG4gICAgICAgIGV2cF9wa2V5LFxyXG4gICAgICAgIGNkYXRhLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShlbmNvZGluZywgc2VyaWFsaXphdGlvbi5FbmNvZGluZyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZW5jb2RpbmcgbXVzdCBiZSBhbiBpdGVtIGZyb20gdGhlIEVuY29kaW5nIGVudW0iKVxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGZvcm1hdCwgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiZm9ybWF0IG11c3QgYmUgYW4gaXRlbSBmcm9tIHRoZSBQdWJsaWNGb3JtYXQgZW51bSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAjIFN1YmplY3RQdWJsaWNLZXlJbmZvICsgUEVNL0RFUlxyXG4gICAgICAgIGlmIGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5TdWJqZWN0UHVibGljS2V5SW5mbzpcclxuICAgICAgICAgICAgaWYgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5QRU06XHJcbiAgICAgICAgICAgICAgICB3cml0ZV9iaW8gPSBzZWxmLl9saWIuUEVNX3dyaXRlX2Jpb19QVUJLRVlcclxuICAgICAgICAgICAgZWxpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLkRFUjpcclxuICAgICAgICAgICAgICAgIHdyaXRlX2JpbyA9IHNlbGYuX2xpYi5pMmRfUFVCS0VZX2Jpb1xyXG4gICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiU3ViamVjdFB1YmxpY0tleUluZm8gd29ya3Mgb25seSB3aXRoIFBFTSBvciBERVIgZW5jb2RpbmciXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9iaW9fZnVuY19vdXRwdXQod3JpdGVfYmlvLCBldnBfcGtleSlcclxuXHJcbiAgICAgICAgIyBQS0NTMSArIFBFTS9ERVJcclxuICAgICAgICBpZiBmb3JtYXQgaXMgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuUEtDUzE6XHJcbiAgICAgICAgICAgICMgT25seSBSU0EgaXMgc3VwcG9ydGVkIGhlcmUuXHJcbiAgICAgICAgICAgIGtleV90eXBlID0gc2VsZi5fbGliLkVWUF9QS0VZX2lkKGV2cF9wa2V5KVxyXG4gICAgICAgICAgICBpZiBrZXlfdHlwZSAhPSBzZWxmLl9saWIuRVZQX1BLRVlfUlNBOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiUEtDUzEgZm9ybWF0IGlzIHN1cHBvcnRlZCBvbmx5IGZvciBSU0Ega2V5cyIpXHJcblxyXG4gICAgICAgICAgICBpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlBFTTpcclxuICAgICAgICAgICAgICAgIHdyaXRlX2JpbyA9IHNlbGYuX2xpYi5QRU1fd3JpdGVfYmlvX1JTQVB1YmxpY0tleVxyXG4gICAgICAgICAgICBlbGlmIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSOlxyXG4gICAgICAgICAgICAgICAgd3JpdGVfYmlvID0gc2VsZi5fbGliLmkyZF9SU0FQdWJsaWNLZXlfYmlvXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJQS0NTMSB3b3JrcyBvbmx5IHdpdGggUEVNIG9yIERFUiBlbmNvZGluZyIpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9iaW9fZnVuY19vdXRwdXQod3JpdGVfYmlvLCBjZGF0YSlcclxuXHJcbiAgICAgICAgIyBPcGVuU1NIICsgT3BlblNTSFxyXG4gICAgICAgIGlmIGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5PcGVuU1NIOlxyXG4gICAgICAgICAgICBpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLk9wZW5TU0g6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3NoLnNlcmlhbGl6ZV9zc2hfcHVibGljX2tleShrZXkpXHJcblxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIk9wZW5TU0ggZm9ybWF0IG11c3QgYmUgdXNlZCB3aXRoIE9wZW5TU0ggZW5jb2RpbmciXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgIyBBbnl0aGluZyB0aGF0IGtleS1zcGVjaWZpYyBjb2RlIHdhcyBzdXBwb3NlZCB0byBoYW5kbGUgZWFybGllcixcclxuICAgICAgICAjIGxpa2UgUmF3LCBDb21wcmVzc2VkUG9pbnQsIFVuY29tcHJlc3NlZFBvaW50XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZm9ybWF0IGlzIGludmFsaWQgd2l0aCB0aGlzIGtleSIpXHJcblxyXG4gICAgZGVmIGRoX3N1cHBvcnRlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBub3Qgc2VsZi5fbGliLkNSWVBUT0dSQVBIWV9JU19CT1JJTkdTU0xcclxuXHJcbiAgICBkZWYgZ2VuZXJhdGVfZGhfcGFyYW1ldGVycyhcclxuICAgICAgICBzZWxmLCBnZW5lcmF0b3I6IGludCwga2V5X3NpemU6IGludFxyXG4gICAgKSAtPiBkaC5ESFBhcmFtZXRlcnM6XHJcbiAgICAgICAgaWYga2V5X3NpemUgPCBkaC5fTUlOX01PRFVMVVNfU0laRTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJESCBrZXlfc2l6ZSBtdXN0IGJlIGF0IGxlYXN0IHt9IGJpdHMiLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICBkaC5fTUlOX01PRFVMVVNfU0laRVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIGdlbmVyYXRvciBub3QgaW4gKDIsIDUpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJESCBnZW5lcmF0b3IgbXVzdCBiZSAyIG9yIDUiKVxyXG5cclxuICAgICAgICBkaF9wYXJhbV9jZGF0YSA9IHNlbGYuX2xpYi5ESF9uZXcoKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZGhfcGFyYW1fY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgZGhfcGFyYW1fY2RhdGEgPSBzZWxmLl9mZmkuZ2MoZGhfcGFyYW1fY2RhdGEsIHNlbGYuX2xpYi5ESF9mcmVlKVxyXG5cclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuREhfZ2VuZXJhdGVfcGFyYW1ldGVyc19leChcclxuICAgICAgICAgICAgZGhfcGFyYW1fY2RhdGEsIGtleV9zaXplLCBnZW5lcmF0b3IsIHNlbGYuX2ZmaS5OVUxMXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIHJldHVybiBfREhQYXJhbWV0ZXJzKHNlbGYsIGRoX3BhcmFtX2NkYXRhKVxyXG5cclxuICAgIGRlZiBfZGhfY2RhdGFfdG9fZXZwX3BrZXkoc2VsZiwgZGhfY2RhdGEpOlxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fY3JlYXRlX2V2cF9wa2V5X2djKClcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuRVZQX1BLRVlfc2V0MV9ESChldnBfcGtleSwgZGhfY2RhdGEpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICByZXR1cm4gZXZwX3BrZXlcclxuXHJcbiAgICBkZWYgZ2VuZXJhdGVfZGhfcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgc2VsZiwgcGFyYW1ldGVyczogZGguREhQYXJhbWV0ZXJzXHJcbiAgICApIC0+IGRoLkRIUHJpdmF0ZUtleTpcclxuICAgICAgICBkaF9rZXlfY2RhdGEgPSBfZGhfcGFyYW1zX2R1cChcclxuICAgICAgICAgICAgcGFyYW1ldGVycy5fZGhfY2RhdGEsIHNlbGYgICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF1cclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5ESF9nZW5lcmF0ZV9rZXkoZGhfa2V5X2NkYXRhKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZGhfY2RhdGFfdG9fZXZwX3BrZXkoZGhfa2V5X2NkYXRhKVxyXG5cclxuICAgICAgICByZXR1cm4gX0RIUHJpdmF0ZUtleShzZWxmLCBkaF9rZXlfY2RhdGEsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBnZW5lcmF0ZV9kaF9wcml2YXRlX2tleV9hbmRfcGFyYW1ldGVycyhcclxuICAgICAgICBzZWxmLCBnZW5lcmF0b3I6IGludCwga2V5X3NpemU6IGludFxyXG4gICAgKSAtPiBkaC5ESFByaXZhdGVLZXk6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZ2VuZXJhdGVfZGhfcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuZ2VuZXJhdGVfZGhfcGFyYW1ldGVycyhnZW5lcmF0b3IsIGtleV9zaXplKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgbG9hZF9kaF9wcml2YXRlX251bWJlcnMoXHJcbiAgICAgICAgc2VsZiwgbnVtYmVyczogZGguREhQcml2YXRlTnVtYmVyc1xyXG4gICAgKSAtPiBkaC5ESFByaXZhdGVLZXk6XHJcbiAgICAgICAgcGFyYW1ldGVyX251bWJlcnMgPSBudW1iZXJzLnB1YmxpY19udW1iZXJzLnBhcmFtZXRlcl9udW1iZXJzXHJcblxyXG4gICAgICAgIGRoX2NkYXRhID0gc2VsZi5fbGliLkRIX25ldygpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChkaF9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBkaF9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhkaF9jZGF0YSwgc2VsZi5fbGliLkRIX2ZyZWUpXHJcblxyXG4gICAgICAgIHAgPSBzZWxmLl9pbnRfdG9fYm4ocGFyYW1ldGVyX251bWJlcnMucClcclxuICAgICAgICBnID0gc2VsZi5faW50X3RvX2JuKHBhcmFtZXRlcl9udW1iZXJzLmcpXHJcblxyXG4gICAgICAgIGlmIHBhcmFtZXRlcl9udW1iZXJzLnEgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHEgPSBzZWxmLl9pbnRfdG9fYm4ocGFyYW1ldGVyX251bWJlcnMucSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBxID0gc2VsZi5fZmZpLk5VTExcclxuXHJcbiAgICAgICAgcHViX2tleSA9IHNlbGYuX2ludF90b19ibihudW1iZXJzLnB1YmxpY19udW1iZXJzLnkpXHJcbiAgICAgICAgcHJpdl9rZXkgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy54KVxyXG5cclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuREhfc2V0MF9wcWcoZGhfY2RhdGEsIHAsIHEsIGcpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkRIX3NldDBfa2V5KGRoX2NkYXRhLCBwdWJfa2V5LCBwcml2X2tleSlcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICBjb2RlcyA9IHNlbGYuX2ZmaS5uZXcoImludFtdIiwgMSlcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuQ3J5cHRvZ3JhcGh5X0RIX2NoZWNrKGRoX2NkYXRhLCBjb2RlcylcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICAjIERIX2NoZWNrIHdpbGwgcmV0dXJuIERIX05PVF9TVUlUQUJMRV9HRU5FUkFUT1IgaWYgcCAlIDI0IGRvZXMgbm90XHJcbiAgICAgICAgIyBlcXVhbCAxMSB3aGVuIHRoZSBnZW5lcmF0b3IgaXMgMiAoYSBxdWFkcmF0aWMgbm9ucmVzaWR1ZSkuXHJcbiAgICAgICAgIyBXZSB3YW50IHRvIGlnbm9yZSB0aGF0IGVycm9yIGJlY2F1c2UgcCAlIDI0ID09IDIzIGlzIGFsc28gZmluZS5cclxuICAgICAgICAjIFNwZWNpZmljYWxseSwgZyBpcyB0aGVuIGEgcXVhZHJhdGljIHJlc2lkdWUuIFdpdGhpbiB0aGUgY29udGV4dCBvZlxyXG4gICAgICAgICMgRGlmZmllLUhlbGxtYW4gdGhpcyBtZWFucyBpdCBjYW4gb25seSBnZW5lcmF0ZSBoYWxmIHRoZSBwb3NzaWJsZVxyXG4gICAgICAgICMgdmFsdWVzLiBUaGF0IHNvdW5kcyBiYWQsIGJ1dCBxdWFkcmF0aWMgbm9ucmVzaWR1ZXMgbGVhayBhIGJpdCBvZlxyXG4gICAgICAgICMgdGhlIGtleSB0byB0aGUgYXR0YWNrZXIgaW4gZXhjaGFuZ2UgZm9yIGhhdmluZyB0aGUgZnVsbCBrZXkgc3BhY2VcclxuICAgICAgICAjIGF2YWlsYWJsZS4gU2VlOiBodHRwczovL2NyeXB0by5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvMTI5NjFcclxuICAgICAgICBpZiBjb2Rlc1swXSAhPSAwIGFuZCBub3QgKFxyXG4gICAgICAgICAgICBwYXJhbWV0ZXJfbnVtYmVycy5nID09IDJcclxuICAgICAgICAgICAgYW5kIGNvZGVzWzBdIF4gc2VsZi5fbGliLkRIX05PVF9TVUlUQUJMRV9HRU5FUkFUT1IgPT0gMFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkRIIHByaXZhdGUgbnVtYmVycyBkaWQgbm90IHBhc3Mgc2FmZXR5IGNoZWNrcy4iKVxyXG5cclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2RoX2NkYXRhX3RvX2V2cF9wa2V5KGRoX2NkYXRhKVxyXG5cclxuICAgICAgICByZXR1cm4gX0RIUHJpdmF0ZUtleShzZWxmLCBkaF9jZGF0YSwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIGxvYWRfZGhfcHVibGljX251bWJlcnMoXHJcbiAgICAgICAgc2VsZiwgbnVtYmVyczogZGguREhQdWJsaWNOdW1iZXJzXHJcbiAgICApIC0+IGRoLkRIUHVibGljS2V5OlxyXG4gICAgICAgIGRoX2NkYXRhID0gc2VsZi5fbGliLkRIX25ldygpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChkaF9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBkaF9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhkaF9jZGF0YSwgc2VsZi5fbGliLkRIX2ZyZWUpXHJcblxyXG4gICAgICAgIHBhcmFtZXRlcl9udW1iZXJzID0gbnVtYmVycy5wYXJhbWV0ZXJfbnVtYmVyc1xyXG5cclxuICAgICAgICBwID0gc2VsZi5faW50X3RvX2JuKHBhcmFtZXRlcl9udW1iZXJzLnApXHJcbiAgICAgICAgZyA9IHNlbGYuX2ludF90b19ibihwYXJhbWV0ZXJfbnVtYmVycy5nKVxyXG5cclxuICAgICAgICBpZiBwYXJhbWV0ZXJfbnVtYmVycy5xIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBxID0gc2VsZi5faW50X3RvX2JuKHBhcmFtZXRlcl9udW1iZXJzLnEpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcSA9IHNlbGYuX2ZmaS5OVUxMXHJcblxyXG4gICAgICAgIHB1Yl9rZXkgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy55KVxyXG5cclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuREhfc2V0MF9wcWcoZGhfY2RhdGEsIHAsIHEsIGcpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkRIX3NldDBfa2V5KGRoX2NkYXRhLCBwdWJfa2V5LCBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2RoX2NkYXRhX3RvX2V2cF9wa2V5KGRoX2NkYXRhKVxyXG5cclxuICAgICAgICByZXR1cm4gX0RIUHVibGljS2V5KHNlbGYsIGRoX2NkYXRhLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgbG9hZF9kaF9wYXJhbWV0ZXJfbnVtYmVycyhcclxuICAgICAgICBzZWxmLCBudW1iZXJzOiBkaC5ESFBhcmFtZXRlck51bWJlcnNcclxuICAgICkgLT4gZGguREhQYXJhbWV0ZXJzOlxyXG4gICAgICAgIGRoX2NkYXRhID0gc2VsZi5fbGliLkRIX25ldygpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChkaF9jZGF0YSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBkaF9jZGF0YSA9IHNlbGYuX2ZmaS5nYyhkaF9jZGF0YSwgc2VsZi5fbGliLkRIX2ZyZWUpXHJcblxyXG4gICAgICAgIHAgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5wKVxyXG4gICAgICAgIGcgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5nKVxyXG5cclxuICAgICAgICBpZiBudW1iZXJzLnEgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHEgPSBzZWxmLl9pbnRfdG9fYm4obnVtYmVycy5xKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHEgPSBzZWxmLl9mZmkuTlVMTFxyXG5cclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuREhfc2V0MF9wcWcoZGhfY2RhdGEsIHAsIHEsIGcpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgcmV0dXJuIF9ESFBhcmFtZXRlcnMoc2VsZiwgZGhfY2RhdGEpXHJcblxyXG4gICAgZGVmIGRoX3BhcmFtZXRlcnNfc3VwcG9ydGVkKFxyXG4gICAgICAgIHNlbGYsIHA6IGludCwgZzogaW50LCBxOiB0eXBpbmcuT3B0aW9uYWxbaW50XSA9IE5vbmVcclxuICAgICkgLT4gYm9vbDpcclxuICAgICAgICBkaF9jZGF0YSA9IHNlbGYuX2xpYi5ESF9uZXcoKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZGhfY2RhdGEgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgZGhfY2RhdGEgPSBzZWxmLl9mZmkuZ2MoZGhfY2RhdGEsIHNlbGYuX2xpYi5ESF9mcmVlKVxyXG5cclxuICAgICAgICBwID0gc2VsZi5faW50X3RvX2JuKHApXHJcbiAgICAgICAgZyA9IHNlbGYuX2ludF90b19ibihnKVxyXG5cclxuICAgICAgICBpZiBxIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBxID0gc2VsZi5faW50X3RvX2JuKHEpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcSA9IHNlbGYuX2ZmaS5OVUxMXHJcblxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5ESF9zZXQwX3BxZyhkaF9jZGF0YSwgcCwgcSwgZylcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICBjb2RlcyA9IHNlbGYuX2ZmaS5uZXcoImludFtdIiwgMSlcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuQ3J5cHRvZ3JhcGh5X0RIX2NoZWNrKGRoX2NkYXRhLCBjb2RlcylcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICByZXR1cm4gY29kZXNbMF0gPT0gMFxyXG5cclxuICAgIGRlZiBkaF94OTQyX3NlcmlhbGl6YXRpb25fc3VwcG9ydGVkKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xpYi5DcnlwdG9ncmFwaHlfSEFTX0VWUF9QS0VZX0RIWCA9PSAxXHJcblxyXG4gICAgZGVmIHgyNTUxOV9sb2FkX3B1YmxpY19ieXRlcyhzZWxmLCBkYXRhOiBieXRlcykgLT4geDI1NTE5LlgyNTUxOVB1YmxpY0tleTpcclxuICAgICAgICAjIFdoZW4gd2UgZHJvcCBzdXBwb3J0IGZvciBDUllQVE9HUkFQSFlfT1BFTlNTTF9MRVNTX1RIQU5fMTExIHdlIGNhblxyXG4gICAgICAgICMgc3dpdGNoIHRoaXMgdG8gRVZQX1BLRVlfbmV3X3Jhd19wdWJsaWNfa2V5XHJcbiAgICAgICAgaWYgbGVuKGRhdGEpICE9IDMyOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBbiBYMjU1MTkgcHVibGljIGtleSBpcyAzMiBieXRlcyBsb25nIilcclxuXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9jcmVhdGVfZXZwX3BrZXlfZ2MoKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2xpYi5FVlBfUEtFWV9zZXRfdHlwZShldnBfcGtleSwgc2VsZi5fbGliLk5JRF9YMjU1MTkpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuRVZQX1BLRVlfc2V0MV90bHNfZW5jb2RlZHBvaW50KFxyXG4gICAgICAgICAgICBldnBfcGtleSwgZGF0YSwgbGVuKGRhdGEpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmV0dXJuIF9YMjU1MTlQdWJsaWNLZXkoc2VsZiwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIHgyNTUxOV9sb2FkX3ByaXZhdGVfYnl0ZXMoXHJcbiAgICAgICAgc2VsZiwgZGF0YTogYnl0ZXNcclxuICAgICkgLT4geDI1NTE5LlgyNTUxOVByaXZhdGVLZXk6XHJcbiAgICAgICAgIyBXaGVuIHdlIGRyb3Agc3VwcG9ydCBmb3IgQ1JZUFRPR1JBUEhZX09QRU5TU0xfTEVTU19USEFOXzExMSB3ZSBjYW5cclxuICAgICAgICAjIHN3aXRjaCB0aGlzIHRvIEVWUF9QS0VZX25ld19yYXdfcHJpdmF0ZV9rZXkgYW5kIGRyb3AgdGhlXHJcbiAgICAgICAgIyB6ZXJvZWRfYnl0ZWFycmF5IGdhcmJhZ2UuXHJcbiAgICAgICAgIyBPcGVuU1NMIG9ubHkgaGFzIGZhY2lsaXRpZXMgZm9yIGxvYWRpbmcgUEtDUzggZm9ybWF0dGVkIHByaXZhdGVcclxuICAgICAgICAjIGtleXMgdXNpbmcgdGhlIGFsZ29yaXRobSBpZGVudGlmaWVycyBzcGVjaWZpZWQgaW5cclxuICAgICAgICAjIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC1pZXRmLWN1cmRsZS1wa2l4LTA5LlxyXG4gICAgICAgICMgVGhpcyBpcyB0aGUgc3RhbmRhcmQgUEtDUzggcHJlZml4IGZvciBhIDMyIGJ5dGUgWDI1NTE5IGtleS5cclxuICAgICAgICAjIFRoZSBmb3JtIGlzOlxyXG4gICAgICAgICMgICAgMDpkPTAgIGhsPTIgbD0gIDQ2IGNvbnM6IFNFUVVFTkNFXHJcbiAgICAgICAgIyAgICAyOmQ9MSAgaGw9MiBsPSAgIDEgcHJpbTogSU5URUdFUiAgICAgICAgICAgOjAwXHJcbiAgICAgICAgIyAgICA1OmQ9MSAgaGw9MiBsPSAgIDUgY29uczogU0VRVUVOQ0VcclxuICAgICAgICAjICAgIDc6ZD0yICBobD0yIGw9ICAgMyBwcmltOiBPQkpFQ1QgICAgICAgICAgICA6MS4zLjEwMS4xMTBcclxuICAgICAgICAjICAgIDEyOmQ9MSAgaGw9MiBsPSAgMzQgcHJpbTogT0NURVQgU1RSSU5HICAgICAgKHRoZSBrZXkpXHJcbiAgICAgICAgIyBPZiBjb3Vyc2UgdGhlcmVcJ3MgYSBiaXQgbW9yZSBjb21wbGV4aXR5LiBJbiByZWFsaXR5IE9DVEVUIFNUUklOR1xyXG4gICAgICAgICMgY29udGFpbnMgYW4gT0NURVQgU1RSSU5HIG9mIGxlbmd0aCAzMiEgU28gdGhlIGxhc3QgdHdvIGJ5dGVzIGhlcmVcclxuICAgICAgICAjIGFyZSBcXHgwNFxceDIwLCB3aGljaCBpcyBhbiBPQ1RFVCBTVFJJTkcgb2YgbGVuZ3RoIDMyLlxyXG4gICAgICAgIGlmIGxlbihkYXRhKSAhPSAzMjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQW4gWDI1NTE5IHByaXZhdGUga2V5IGlzIDMyIGJ5dGVzIGxvbmciKVxyXG5cclxuICAgICAgICBwa2NzOF9wcmVmaXggPSBiXCcwLlxceDAyXFx4MDFcXHgwMDBcXHgwNVxceDA2XFx4MDMrZW5cXHgwNCJcXHgwNCBcJ1xyXG4gICAgICAgIHdpdGggc2VsZi5femVyb2VkX2J5dGVhcnJheSg0OCkgYXMgYmE6XHJcbiAgICAgICAgICAgIGJhWzA6MTZdID0gcGtjczhfcHJlZml4XHJcbiAgICAgICAgICAgIGJhWzE2Ol0gPSBkYXRhXHJcbiAgICAgICAgICAgIGJpbyA9IHNlbGYuX2J5dGVzX3RvX2JpbyhiYSlcclxuICAgICAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9saWIuZDJpX1ByaXZhdGVLZXlfYmlvKGJpby5iaW8sIHNlbGYuX2ZmaS5OVUxMKVxyXG5cclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGV2cF9wa2V5ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZmZpLmdjKGV2cF9wa2V5LCBzZWxmLl9saWIuRVZQX1BLRVlfZnJlZSlcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KFxyXG4gICAgICAgICAgICBzZWxmLl9saWIuRVZQX1BLRVlfaWQoZXZwX3BrZXkpID09IHNlbGYuX2xpYi5FVlBfUEtFWV9YMjU1MTlcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIF9YMjU1MTlQcml2YXRlS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBfZXZwX3BrZXlfa2V5Z2VuX2djKHNlbGYsIG5pZCk6XHJcbiAgICAgICAgZXZwX3BrZXlfY3R4ID0gc2VsZi5fbGliLkVWUF9QS0VZX0NUWF9uZXdfaWQobmlkLCBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGV2cF9wa2V5X2N0eCAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBldnBfcGtleV9jdHggPSBzZWxmLl9mZmkuZ2MoZXZwX3BrZXlfY3R4LCBzZWxmLl9saWIuRVZQX1BLRVlfQ1RYX2ZyZWUpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fbGliLkVWUF9QS0VZX2tleWdlbl9pbml0KGV2cF9wa2V5X2N0eClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIGV2cF9wcGtleSA9IHNlbGYuX2ZmaS5uZXcoIkVWUF9QS0VZICoqIilcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuRVZQX1BLRVlfa2V5Z2VuKGV2cF9wa2V5X2N0eCwgZXZwX3Bwa2V5KVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChldnBfcHBrZXlbMF0gIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9mZmkuZ2MoZXZwX3Bwa2V5WzBdLCBzZWxmLl9saWIuRVZQX1BLRVlfZnJlZSlcclxuICAgICAgICByZXR1cm4gZXZwX3BrZXlcclxuXHJcbiAgICBkZWYgeDI1NTE5X2dlbmVyYXRlX2tleShzZWxmKSAtPiB4MjU1MTkuWDI1NTE5UHJpdmF0ZUtleTpcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2V2cF9wa2V5X2tleWdlbl9nYyhzZWxmLl9saWIuTklEX1gyNTUxOSlcclxuICAgICAgICByZXR1cm4gX1gyNTUxOVByaXZhdGVLZXkoc2VsZiwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIHgyNTUxOV9zdXBwb3J0ZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIHJldHVybiBub3Qgc2VsZi5fbGliLkNSWVBUT0dSQVBIWV9JU19MSUJSRVNTTFxyXG5cclxuICAgIGRlZiB4NDQ4X2xvYWRfcHVibGljX2J5dGVzKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiB4NDQ4Llg0NDhQdWJsaWNLZXk6XHJcbiAgICAgICAgaWYgbGVuKGRhdGEpICE9IDU2OlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBbiBYNDQ4IHB1YmxpYyBrZXkgaXMgNTYgYnl0ZXMgbG9uZyIpXHJcblxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fbGliLkVWUF9QS0VZX25ld19yYXdfcHVibGljX2tleShcclxuICAgICAgICAgICAgc2VsZi5fbGliLk5JRF9YNDQ4LCBzZWxmLl9mZmkuTlVMTCwgZGF0YSwgbGVuKGRhdGEpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZXZwX3BrZXkgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9mZmkuZ2MoZXZwX3BrZXksIHNlbGYuX2xpYi5FVlBfUEtFWV9mcmVlKVxyXG4gICAgICAgIHJldHVybiBfWDQ0OFB1YmxpY0tleShzZWxmLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgeDQ0OF9sb2FkX3ByaXZhdGVfYnl0ZXMoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IHg0NDguWDQ0OFByaXZhdGVLZXk6XHJcbiAgICAgICAgaWYgbGVuKGRhdGEpICE9IDU2OlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBbiBYNDQ4IHByaXZhdGUga2V5IGlzIDU2IGJ5dGVzIGxvbmciKVxyXG5cclxuICAgICAgICBkYXRhX3B0ciA9IHNlbGYuX2ZmaS5mcm9tX2J1ZmZlcihkYXRhKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fbGliLkVWUF9QS0VZX25ld19yYXdfcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2xpYi5OSURfWDQ0OCwgc2VsZi5fZmZpLk5VTEwsIGRhdGFfcHRyLCBsZW4oZGF0YSlcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChldnBfcGtleSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2ZmaS5nYyhldnBfcGtleSwgc2VsZi5fbGliLkVWUF9QS0VZX2ZyZWUpXHJcbiAgICAgICAgcmV0dXJuIF9YNDQ4UHJpdmF0ZUtleShzZWxmLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgeDQ0OF9nZW5lcmF0ZV9rZXkoc2VsZikgLT4geDQ0OC5YNDQ4UHJpdmF0ZUtleTpcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2V2cF9wa2V5X2tleWdlbl9nYyhzZWxmLl9saWIuTklEX1g0NDgpXHJcbiAgICAgICAgcmV0dXJuIF9YNDQ4UHJpdmF0ZUtleShzZWxmLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgeDQ0OF9zdXBwb3J0ZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIG5vdCBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX09QRU5TU0xfTEVTU19USEFOXzExMVxyXG4gICAgICAgICAgICBhbmQgbm90IHNlbGYuX2xpYi5DUllQVE9HUkFQSFlfSVNfQk9SSU5HU1NMXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBlZDI1NTE5X3N1cHBvcnRlZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIGlmIHNlbGYuX2ZpcHNfZW5hYmxlZDpcclxuICAgICAgICAgICAgcmV0dXJuIEZhbHNlXHJcbiAgICAgICAgcmV0dXJuIG5vdCBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX09QRU5TU0xfTEVTU19USEFOXzExMUJcclxuXHJcbiAgICBkZWYgZWQyNTUxOV9sb2FkX3B1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLCBkYXRhOiBieXRlc1xyXG4gICAgKSAtPiBlZDI1NTE5LkVkMjU1MTlQdWJsaWNLZXk6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzKCJkYXRhIiwgZGF0YSlcclxuXHJcbiAgICAgICAgaWYgbGVuKGRhdGEpICE9IGVkMjU1MTkuX0VEMjU1MTlfS0VZX1NJWkU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkFuIEVkMjU1MTkgcHVibGljIGtleSBpcyAzMiBieXRlcyBsb25nIilcclxuXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9saWIuRVZQX1BLRVlfbmV3X3Jhd19wdWJsaWNfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9saWIuTklEX0VEMjU1MTksIHNlbGYuX2ZmaS5OVUxMLCBkYXRhLCBsZW4oZGF0YSlcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChldnBfcGtleSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2ZmaS5nYyhldnBfcGtleSwgc2VsZi5fbGliLkVWUF9QS0VZX2ZyZWUpXHJcblxyXG4gICAgICAgIHJldHVybiBfRWQyNTUxOVB1YmxpY0tleShzZWxmLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgZWQyNTUxOV9sb2FkX3ByaXZhdGVfYnl0ZXMoXHJcbiAgICAgICAgc2VsZiwgZGF0YTogYnl0ZXNcclxuICAgICkgLT4gZWQyNTUxOS5FZDI1NTE5UHJpdmF0ZUtleTpcclxuICAgICAgICBpZiBsZW4oZGF0YSkgIT0gZWQyNTUxOS5fRUQyNTUxOV9LRVlfU0laRTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQW4gRWQyNTUxOSBwcml2YXRlIGtleSBpcyAzMiBieXRlcyBsb25nIilcclxuXHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgiZGF0YSIsIGRhdGEpXHJcbiAgICAgICAgZGF0YV9wdHIgPSBzZWxmLl9mZmkuZnJvbV9idWZmZXIoZGF0YSlcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2xpYi5FVlBfUEtFWV9uZXdfcmF3X3ByaXZhdGVfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9saWIuTklEX0VEMjU1MTksIHNlbGYuX2ZmaS5OVUxMLCBkYXRhX3B0ciwgbGVuKGRhdGEpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZXZwX3BrZXkgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9mZmkuZ2MoZXZwX3BrZXksIHNlbGYuX2xpYi5FVlBfUEtFWV9mcmVlKVxyXG5cclxuICAgICAgICByZXR1cm4gX0VkMjU1MTlQcml2YXRlS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBlZDI1NTE5X2dlbmVyYXRlX2tleShzZWxmKSAtPiBlZDI1NTE5LkVkMjU1MTlQcml2YXRlS2V5OlxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZXZwX3BrZXlfa2V5Z2VuX2djKHNlbGYuX2xpYi5OSURfRUQyNTUxOSlcclxuICAgICAgICByZXR1cm4gX0VkMjU1MTlQcml2YXRlS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBlZDQ0OF9zdXBwb3J0ZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIG5vdCBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX09QRU5TU0xfTEVTU19USEFOXzExMUJcclxuICAgICAgICAgICAgYW5kIG5vdCBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX0lTX0JPUklOR1NTTFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgZWQ0NDhfbG9hZF9wdWJsaWNfYnl0ZXMoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IGVkNDQ4LkVkNDQ4UHVibGljS2V5OlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygiZGF0YSIsIGRhdGEpXHJcbiAgICAgICAgaWYgbGVuKGRhdGEpICE9IF9FRDQ0OF9LRVlfU0laRTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQW4gRWQ0NDggcHVibGljIGtleSBpcyA1NyBieXRlcyBsb25nIilcclxuXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9saWIuRVZQX1BLRVlfbmV3X3Jhd19wdWJsaWNfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9saWIuTklEX0VENDQ4LCBzZWxmLl9mZmkuTlVMTCwgZGF0YSwgbGVuKGRhdGEpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoZXZwX3BrZXkgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9mZmkuZ2MoZXZwX3BrZXksIHNlbGYuX2xpYi5FVlBfUEtFWV9mcmVlKVxyXG5cclxuICAgICAgICByZXR1cm4gX0VkNDQ4UHVibGljS2V5KHNlbGYsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBlZDQ0OF9sb2FkX3ByaXZhdGVfYnl0ZXMoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IGVkNDQ4LkVkNDQ4UHJpdmF0ZUtleTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJkYXRhIiwgZGF0YSlcclxuICAgICAgICBpZiBsZW4oZGF0YSkgIT0gX0VENDQ4X0tFWV9TSVpFOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBbiBFZDQ0OCBwcml2YXRlIGtleSBpcyA1NyBieXRlcyBsb25nIilcclxuXHJcbiAgICAgICAgZGF0YV9wdHIgPSBzZWxmLl9mZmkuZnJvbV9idWZmZXIoZGF0YSlcclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2xpYi5FVlBfUEtFWV9uZXdfcmF3X3ByaXZhdGVfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9saWIuTklEX0VENDQ4LCBzZWxmLl9mZmkuTlVMTCwgZGF0YV9wdHIsIGxlbihkYXRhKVxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KGV2cF9wa2V5ICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZmZpLmdjKGV2cF9wa2V5LCBzZWxmLl9saWIuRVZQX1BLRVlfZnJlZSlcclxuXHJcbiAgICAgICAgcmV0dXJuIF9FZDQ0OFByaXZhdGVLZXkoc2VsZiwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIGVkNDQ4X2dlbmVyYXRlX2tleShzZWxmKSAtPiBlZDQ0OC5FZDQ0OFByaXZhdGVLZXk6XHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9ldnBfcGtleV9rZXlnZW5fZ2Moc2VsZi5fbGliLk5JRF9FRDQ0OClcclxuICAgICAgICByZXR1cm4gX0VkNDQ4UHJpdmF0ZUtleShzZWxmLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgZGVyaXZlX3NjcnlwdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGtleV9tYXRlcmlhbDogYnl0ZXMsXHJcbiAgICAgICAgc2FsdDogYnl0ZXMsXHJcbiAgICAgICAgbGVuZ3RoOiBpbnQsXHJcbiAgICAgICAgbjogaW50LFxyXG4gICAgICAgIHI6IGludCxcclxuICAgICAgICBwOiBpbnQsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIGxlbmd0aClcclxuICAgICAgICBrZXlfbWF0ZXJpYWxfcHRyID0gc2VsZi5fZmZpLmZyb21fYnVmZmVyKGtleV9tYXRlcmlhbClcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuRVZQX1BCRV9zY3J5cHQoXHJcbiAgICAgICAgICAgIGtleV9tYXRlcmlhbF9wdHIsXHJcbiAgICAgICAgICAgIGxlbihrZXlfbWF0ZXJpYWwpLFxyXG4gICAgICAgICAgICBzYWx0LFxyXG4gICAgICAgICAgICBsZW4oc2FsdCksXHJcbiAgICAgICAgICAgIG4sXHJcbiAgICAgICAgICAgIHIsXHJcbiAgICAgICAgICAgIHAsXHJcbiAgICAgICAgICAgIHNjcnlwdC5fTUVNX0xJTUlULFxyXG4gICAgICAgICAgICBidWYsXHJcbiAgICAgICAgICAgIGxlbmd0aCxcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgcmVzICE9IDE6XHJcbiAgICAgICAgICAgIGVycm9ycyA9IHNlbGYuX2NvbnN1bWVfZXJyb3JzX3dpdGhfdGV4dCgpXHJcbiAgICAgICAgICAgICMgbWVtb3J5IHJlcXVpcmVkIGZvcm11bGEgZXhwbGFpbmVkIGhlcmU6XHJcbiAgICAgICAgICAgICMgaHR0cHM6Ly9ibG9nLmZpbGlwcG8uaW8vdGhlLXNjcnlwdC1wYXJhbWV0ZXJzL1xyXG4gICAgICAgICAgICBtaW5fbWVtb3J5ID0gMTI4ICogbiAqIHIgLy8gKDEwMjQqKjIpXHJcbiAgICAgICAgICAgIHJhaXNlIE1lbW9yeUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIk5vdCBlbm91Z2ggbWVtb3J5IHRvIGRlcml2ZSBrZXkuIFRoZXNlIHBhcmFtZXRlcnMgcmVxdWlyZSJcclxuICAgICAgICAgICAgICAgICIge30gTUIgb2YgbWVtb3J5LiIuZm9ybWF0KG1pbl9tZW1vcnkpLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JzLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2ZmaS5idWZmZXIoYnVmKVs6XVxyXG5cclxuICAgIGRlZiBhZWFkX2NpcGhlcl9zdXBwb3J0ZWQoc2VsZiwgY2lwaGVyKSAtPiBib29sOlxyXG4gICAgICAgIGNpcGhlcl9uYW1lID0gYWVhZC5fYWVhZF9jaXBoZXJfbmFtZShjaXBoZXIpXHJcbiAgICAgICAgaWYgc2VsZi5fZmlwc19lbmFibGVkIGFuZCBjaXBoZXJfbmFtZSBub3QgaW4gc2VsZi5fZmlwc19hZWFkOlxyXG4gICAgICAgICAgICByZXR1cm4gRmFsc2VcclxuICAgICAgICAjIFNJViBpc25cJ3QgbG9hZGVkIHRocm91Z2ggZ2V0X2NpcGhlcmJ5bmFtZSBidXQgaW5zdGVhZCBhIG5ldyBmZXRjaCBBUElcclxuICAgICAgICAjIG9ubHkgYXZhaWxhYmxlIGluIDMuMCsuIEJ1dCBpZiB3ZSBrbm93IHdlXCdyZSBvbiAzLjArIHRoZW4gd2Uga25vd1xyXG4gICAgICAgICMgaXRcJ3Mgc3VwcG9ydGVkLlxyXG4gICAgICAgIGlmIGNpcGhlcl9uYW1lLmVuZHN3aXRoKGIiLXNpdiIpOlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fbGliLkNSWVBUT0dSQVBIWV9PUEVOU1NMXzMwMF9PUl9HUkVBVEVSID09IDFcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fbGliLkVWUF9nZXRfY2lwaGVyYnluYW1lKGNpcGhlcl9uYW1lKSAhPSBzZWxmLl9mZmkuTlVMTFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgQGNvbnRleHRsaWIuY29udGV4dG1hbmFnZXJcclxuICAgIGRlZiBfemVyb2VkX2J5dGVhcnJheShzZWxmLCBsZW5ndGg6IGludCkgLT4gdHlwaW5nLkl0ZXJhdG9yW2J5dGVhcnJheV06XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhpcyBtZXRob2QgY3JlYXRlcyBhIGJ5dGVhcnJheSwgd2hpY2ggd2UgY29weSBkYXRhIGludG8gKGhvcGVmdWxseVxyXG4gICAgICAgIGFsc28gZnJvbSBhIG11dGFibGUgYnVmZmVyIHRoYXQgY2FuIGJlIGR5bmFtaWNhbGx5IGVyYXNlZCEpLCBhbmQgdGhlblxyXG4gICAgICAgIHplcm8gd2hlbiB3ZVwncmUgZG9uZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBiYSA9IGJ5dGVhcnJheShsZW5ndGgpXHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICB5aWVsZCBiYVxyXG4gICAgICAgIGZpbmFsbHk6XHJcbiAgICAgICAgICAgIHNlbGYuX3plcm9fZGF0YShiYSwgbGVuZ3RoKVxyXG5cclxuICAgIGRlZiBfemVyb19kYXRhKHNlbGYsIGRhdGEsIGxlbmd0aDogaW50KSAtPiBOb25lOlxyXG4gICAgICAgICMgV2UgY2xlYXIgdGhpbmdzIHRoaXMgd2F5IGJlY2F1c2UgYXQgdGhlIG1vbWVudCB3ZVwncmUgbm90XHJcbiAgICAgICAgIyBzdXJlIG9mIGEgYmV0dGVyIHdheSB0aGF0IGNhbiBndWFyYW50ZWUgaXQgb3ZlcndyaXRlcyB0aGVcclxuICAgICAgICAjIG1lbW9yeSBvZiBhIGJ5dGVhcnJheSBhbmQgZG9lc25cJ3QganVzdCByZXBsYWNlIHRoZSB1bmRlcmx5aW5nIGNoYXIgKi5cclxuICAgICAgICBmb3IgaSBpbiByYW5nZShsZW5ndGgpOlxyXG4gICAgICAgICAgICBkYXRhW2ldID0gMFxyXG5cclxuICAgIEBjb250ZXh0bGliLmNvbnRleHRtYW5hZ2VyXHJcbiAgICBkZWYgX3plcm9lZF9udWxsX3Rlcm1pbmF0ZWRfYnVmKHNlbGYsIGRhdGEpOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoaXMgbWV0aG9kIHRha2VzIGJ5dGVzLCB3aGljaCBjYW4gYmUgYSBieXRlc3RyaW5nIG9yIGEgbXV0YWJsZVxyXG4gICAgICAgIGJ1ZmZlciBsaWtlIGEgYnl0ZWFycmF5LCBhbmQgeWllbGRzIGEgbnVsbC10ZXJtaW5hdGVkIHZlcnNpb24gb2YgdGhhdFxyXG4gICAgICAgIGRhdGEuIFRoaXMgaXMgcmVxdWlyZWQgYmVjYXVzZSBQS0NTMTJfcGFyc2UgZG9lc25cJ3QgdGFrZSBhIGxlbmd0aCB3aXRoXHJcbiAgICAgICAgaXRzIHBhc3N3b3JkIGNoYXIgKiBhbmQgZmZpLmZyb21fYnVmZmVyIGRvZXNuXCd0IHByb3ZpZGUgbnVsbFxyXG4gICAgICAgIHRlcm1pbmF0aW9uLiBTbywgdG8gc3VwcG9ydCB6ZXJvaW5nIHRoZSBkYXRhIHZpYSBieXRlYXJyYXkgd2VcclxuICAgICAgICBuZWVkIHRvIGJ1aWxkIHRoaXMgcmlkaWN1bG91cyBjb25zdHJ1Y3QgdGhhdCBjb3BpZXMgdGhlIG1lbW9yeSwgYnV0XHJcbiAgICAgICAgemVyb2VzIGl0IGFmdGVyIHVzZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBkYXRhIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHlpZWxkIHNlbGYuX2ZmaS5OVUxMXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgZGF0YV9sZW4gPSBsZW4oZGF0YSlcclxuICAgICAgICAgICAgYnVmID0gc2VsZi5fZmZpLm5ldygiY2hhcltdIiwgZGF0YV9sZW4gKyAxKVxyXG4gICAgICAgICAgICBzZWxmLl9mZmkubWVtbW92ZShidWYsIGRhdGEsIGRhdGFfbGVuKVxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICB5aWVsZCBidWZcclxuICAgICAgICAgICAgZmluYWxseTpcclxuICAgICAgICAgICAgICAgICMgQ2FzdCB0byBhIHVpbnQ4X3QgKiBzbyB3ZSBjYW4gYXNzaWduIGJ5IGludGVnZXJcclxuICAgICAgICAgICAgICAgIHNlbGYuX3plcm9fZGF0YShzZWxmLl9mZmkuY2FzdCgidWludDhfdCAqIiwgYnVmKSwgZGF0YV9sZW4pXHJcblxyXG4gICAgZGVmIGxvYWRfa2V5X2FuZF9jZXJ0aWZpY2F0ZXNfZnJvbV9wa2NzMTIoXHJcbiAgICAgICAgc2VsZiwgZGF0YTogYnl0ZXMsIHBhc3N3b3JkOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdXHJcbiAgICApIC0+IHR5cGluZy5UdXBsZVtcclxuICAgICAgICB0eXBpbmcuT3B0aW9uYWxbUFJJVkFURV9LRVlfVFlQRVNdLFxyXG4gICAgICAgIHR5cGluZy5PcHRpb25hbFt4NTA5LkNlcnRpZmljYXRlXSxcclxuICAgICAgICB0eXBpbmcuTGlzdFt4NTA5LkNlcnRpZmljYXRlXSxcclxuICAgIF06XHJcbiAgICAgICAgcGtjczEyID0gc2VsZi5sb2FkX3BrY3MxMihkYXRhLCBwYXNzd29yZClcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBwa2NzMTIua2V5LFxyXG4gICAgICAgICAgICBwa2NzMTIuY2VydC5jZXJ0aWZpY2F0ZSBpZiBwa2NzMTIuY2VydCBlbHNlIE5vbmUsXHJcbiAgICAgICAgICAgIFtjZXJ0LmNlcnRpZmljYXRlIGZvciBjZXJ0IGluIHBrY3MxMi5hZGRpdGlvbmFsX2NlcnRzXSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGxvYWRfcGtjczEyKFxyXG4gICAgICAgIHNlbGYsIGRhdGE6IGJ5dGVzLCBwYXNzd29yZDogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXVxyXG4gICAgKSAtPiBQS0NTMTJLZXlBbmRDZXJ0aWZpY2F0ZXM6XHJcbiAgICAgICAgaWYgcGFzc3dvcmQgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoInBhc3N3b3JkIiwgcGFzc3dvcmQpXHJcblxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2J5dGVzX3RvX2JpbyhkYXRhKVxyXG4gICAgICAgIHAxMiA9IHNlbGYuX2xpYi5kMmlfUEtDUzEyX2JpbyhiaW8uYmlvLCBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBpZiBwMTIgPT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQ291bGQgbm90IGRlc2VyaWFsaXplIFBLQ1MxMiBkYXRhIilcclxuXHJcbiAgICAgICAgcDEyID0gc2VsZi5fZmZpLmdjKHAxMiwgc2VsZi5fbGliLlBLQ1MxMl9mcmVlKVxyXG4gICAgICAgIGV2cF9wa2V5X3B0ciA9IHNlbGYuX2ZmaS5uZXcoIkVWUF9QS0VZICoqIilcclxuICAgICAgICB4NTA5X3B0ciA9IHNlbGYuX2ZmaS5uZXcoIlg1MDkgKioiKVxyXG4gICAgICAgIHNrX3g1MDlfcHRyID0gc2VsZi5fZmZpLm5ldygiQ3J5cHRvZ3JhcGh5X1NUQUNLX09GX1g1MDkgKioiKVxyXG4gICAgICAgIHdpdGggc2VsZi5femVyb2VkX251bGxfdGVybWluYXRlZF9idWYocGFzc3dvcmQpIGFzIHBhc3N3b3JkX2J1ZjpcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLlBLQ1MxMl9wYXJzZShcclxuICAgICAgICAgICAgICAgIHAxMiwgcGFzc3dvcmRfYnVmLCBldnBfcGtleV9wdHIsIHg1MDlfcHRyLCBza194NTA5X3B0clxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgV29ya2Fyb3VuZCBmb3JcclxuICAgICAgICAjIGh0dHBzOi8vZ2l0aHViLmNvbS9saWJyZXNzbC1wb3J0YWJsZS9wb3J0YWJsZS9pc3N1ZXMvNjU5XHJcbiAgICAgICAgaWYgc2VsZi5fbGliLkNSWVBUT0dSQVBIWV9MSUJSRVNTTF9MRVNTX1RIQU5fMzQwOlxyXG4gICAgICAgICAgICBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcblxyXG4gICAgICAgIGlmIHJlcyA9PSAwOlxyXG4gICAgICAgICAgICBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgcGFzc3dvcmQgb3IgUEtDUzEyIGRhdGEiKVxyXG5cclxuICAgICAgICBjZXJ0ID0gTm9uZVxyXG4gICAgICAgIGtleSA9IE5vbmVcclxuICAgICAgICBhZGRpdGlvbmFsX2NlcnRpZmljYXRlcyA9IFtdXHJcblxyXG4gICAgICAgIGlmIGV2cF9wa2V5X3B0clswXSAhPSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9mZmkuZ2MoZXZwX3BrZXlfcHRyWzBdLCBzZWxmLl9saWIuRVZQX1BLRVlfZnJlZSlcclxuICAgICAgICAgICAga2V5ID0gc2VsZi5fZXZwX3BrZXlfdG9fcHJpdmF0ZV9rZXkoZXZwX3BrZXkpXHJcblxyXG4gICAgICAgIGlmIHg1MDlfcHRyWzBdICE9IHNlbGYuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICB4NTA5ID0gc2VsZi5fZmZpLmdjKHg1MDlfcHRyWzBdLCBzZWxmLl9saWIuWDUwOV9mcmVlKVxyXG4gICAgICAgICAgICBjZXJ0X29iaiA9IHNlbGYuX29zc2wyY2VydCh4NTA5KVxyXG4gICAgICAgICAgICBuYW1lID0gTm9uZVxyXG4gICAgICAgICAgICBtYXliZV9uYW1lID0gc2VsZi5fbGliLlg1MDlfYWxpYXNfZ2V0MCh4NTA5LCBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgaWYgbWF5YmVfbmFtZSAhPSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBzZWxmLl9mZmkuc3RyaW5nKG1heWJlX25hbWUpXHJcbiAgICAgICAgICAgIGNlcnQgPSBQS0NTMTJDZXJ0aWZpY2F0ZShjZXJ0X29iaiwgbmFtZSlcclxuXHJcbiAgICAgICAgaWYgc2tfeDUwOV9wdHJbMF0gIT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIHNrX3g1MDkgPSBzZWxmLl9mZmkuZ2Moc2tfeDUwOV9wdHJbMF0sIHNlbGYuX2xpYi5za19YNTA5X2ZyZWUpXHJcbiAgICAgICAgICAgIG51bSA9IHNlbGYuX2xpYi5za19YNTA5X251bShza194NTA5X3B0clswXSlcclxuXHJcbiAgICAgICAgICAgICMgSW4gT3BlblNTTCA8IDMuMC4wIFBLQ1MxMiBwYXJzaW5nIHJldmVyc2VzIHRoZSBvcmRlciBvZiB0aGVcclxuICAgICAgICAgICAgIyBjZXJ0aWZpY2F0ZXMuXHJcbiAgICAgICAgICAgIGluZGljZXM6IHR5cGluZy5JdGVyYWJsZVtpbnRdXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHNlbGYuX2xpYi5DUllQVE9HUkFQSFlfT1BFTlNTTF8zMDBfT1JfR1JFQVRFUlxyXG4gICAgICAgICAgICAgICAgb3Igc2VsZi5fbGliLkNSWVBUT0dSQVBIWV9JU19CT1JJTkdTU0xcclxuICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgIGluZGljZXMgPSByYW5nZShudW0pXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBpbmRpY2VzID0gcmV2ZXJzZWQocmFuZ2UobnVtKSlcclxuXHJcbiAgICAgICAgICAgIGZvciBpIGluIGluZGljZXM6XHJcbiAgICAgICAgICAgICAgICB4NTA5ID0gc2VsZi5fbGliLnNrX1g1MDlfdmFsdWUoc2tfeDUwOSwgaSlcclxuICAgICAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQoeDUwOSAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgICAgIHg1MDkgPSBzZWxmLl9mZmkuZ2MoeDUwOSwgc2VsZi5fbGliLlg1MDlfZnJlZSlcclxuICAgICAgICAgICAgICAgIGFkZGxfY2VydCA9IHNlbGYuX29zc2wyY2VydCh4NTA5KVxyXG4gICAgICAgICAgICAgICAgYWRkbF9uYW1lID0gTm9uZVxyXG4gICAgICAgICAgICAgICAgbWF5YmVfbmFtZSA9IHNlbGYuX2xpYi5YNTA5X2FsaWFzX2dldDAoeDUwOSwgc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgICAgICBpZiBtYXliZV9uYW1lICE9IHNlbGYuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICAgICAgICAgIGFkZGxfbmFtZSA9IHNlbGYuX2ZmaS5zdHJpbmcobWF5YmVfbmFtZSlcclxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfY2VydGlmaWNhdGVzLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICBQS0NTMTJDZXJ0aWZpY2F0ZShhZGRsX2NlcnQsIGFkZGxfbmFtZSlcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIFBLQ1MxMktleUFuZENlcnRpZmljYXRlcyhrZXksIGNlcnQsIGFkZGl0aW9uYWxfY2VydGlmaWNhdGVzKVxyXG5cclxuICAgIGRlZiBzZXJpYWxpemVfa2V5X2FuZF9jZXJ0aWZpY2F0ZXNfdG9fcGtjczEyKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbmFtZTogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgICAgICBrZXk6IHR5cGluZy5PcHRpb25hbFtfQUxMT1dFRF9QS0NTMTJfVFlQRVNdLFxyXG4gICAgICAgIGNlcnQ6IHR5cGluZy5PcHRpb25hbFt4NTA5LkNlcnRpZmljYXRlXSxcclxuICAgICAgICBjYXM6IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuTGlzdFtfUEtDUzEyX0NBU19UWVBFU11dLFxyXG4gICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtOiBzZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBwYXNzd29yZCA9IE5vbmVcclxuICAgICAgICBpZiBuYW1lIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXMoIm5hbWUiLCBuYW1lKVxyXG5cclxuICAgICAgICBpZiBpc2luc3RhbmNlKGVuY3J5cHRpb25fYWxnb3JpdGhtLCBzZXJpYWxpemF0aW9uLk5vRW5jcnlwdGlvbik6XHJcbiAgICAgICAgICAgIG5pZF9jZXJ0ID0gLTFcclxuICAgICAgICAgICAgbmlkX2tleSA9IC0xXHJcbiAgICAgICAgICAgIHBrY3MxMl9pdGVyID0gMFxyXG4gICAgICAgICAgICBtYWNfaXRlciA9IDBcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtLCBzZXJpYWxpemF0aW9uLkJlc3RBdmFpbGFibGVFbmNyeXB0aW9uXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgIyBQS0NTMTIgZW5jcnlwdGlvbiBpcyBob3BlbGVzcyB0cmFzaCBhbmQgY2FuIG5ldmVyIGJlIGZpeGVkLlxyXG4gICAgICAgICAgICAjIFRoaXMgaXMgdGhlIGxlYXN0IHRlcnJpYmxlIG9wdGlvbi5cclxuICAgICAgICAgICAgbmlkX2NlcnQgPSBzZWxmLl9saWIuTklEX3BiZV9XaXRoU0hBMUFuZDNfS2V5X1RyaXBsZURFU19DQkNcclxuICAgICAgICAgICAgbmlkX2tleSA9IHNlbGYuX2xpYi5OSURfcGJlX1dpdGhTSEExQW5kM19LZXlfVHJpcGxlREVTX0NCQ1xyXG4gICAgICAgICAgICAjIEF0IGxlYXN0IHdlIGNhbiBzZXQgdGhpcyBoaWdoZXIgdGhhbiBPcGVuU1NMXCdzIGRlZmF1bHRcclxuICAgICAgICAgICAgcGtjczEyX2l0ZXIgPSAyMDAwMFxyXG4gICAgICAgICAgICAjIG1hY19pdGVyIGNob3NlbiBmb3IgY29tcGF0aWJpbGl0eSByZWFzb25zLCBzZWU6XHJcbiAgICAgICAgICAgICMgaHR0cHM6Ly93d3cub3BlbnNzbC5vcmcvZG9jcy9tYW4xLjEuMS9tYW4zL1BLQ1MxMl9jcmVhdGUuaHRtbFxyXG4gICAgICAgICAgICAjIERpZCB3ZSBtZW50aW9uIGhvdyBsb3VzeSBQS0NTMTIgZW5jcnlwdGlvbiBpcz9cclxuICAgICAgICAgICAgbWFjX2l0ZXIgPSAxXHJcbiAgICAgICAgICAgIHBhc3N3b3JkID0gZW5jcnlwdGlvbl9hbGdvcml0aG0ucGFzc3dvcmRcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbnN1cHBvcnRlZCBrZXkgZW5jcnlwdGlvbiB0eXBlIilcclxuXHJcbiAgICAgICAgaWYgY2FzIGlzIE5vbmUgb3IgbGVuKGNhcykgPT0gMDpcclxuICAgICAgICAgICAgc2tfeDUwOSA9IHNlbGYuX2ZmaS5OVUxMXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgc2tfeDUwOSA9IHNlbGYuX2xpYi5za19YNTA5X25ld19udWxsKClcclxuICAgICAgICAgICAgc2tfeDUwOSA9IHNlbGYuX2ZmaS5nYyhza194NTA5LCBzZWxmLl9saWIuc2tfWDUwOV9mcmVlKVxyXG5cclxuICAgICAgICAgICAgIyBUaGlzIGxpc3QgaXMgdG8ga2VlcCB0aGUgeDUwOSB2YWx1ZXMgYWxpdmUgdW50aWwgZW5kIG9mIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgIG9zc2xfY2FzID0gW11cclxuICAgICAgICAgICAgZm9yIGNhIGluIGNhczpcclxuICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoY2EsIFBLQ1MxMkNlcnRpZmljYXRlKTpcclxuICAgICAgICAgICAgICAgICAgICBjYV9hbGlhcyA9IGNhLmZyaWVuZGx5X25hbWVcclxuICAgICAgICAgICAgICAgICAgICBvc3NsX2NhID0gc2VsZi5fY2VydDJvc3NsKGNhLmNlcnRpZmljYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIHdpdGggc2VsZi5femVyb2VkX251bGxfdGVybWluYXRlZF9idWYoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhX2FsaWFzXHJcbiAgICAgICAgICAgICAgICAgICAgKSBhcyBjYV9uYW1lX2J1ZjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLlg1MDlfYWxpYXNfc2V0MShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zc2xfY2EsIGNhX25hbWVfYnVmLCAtMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIG9zc2xfY2EgPSBzZWxmLl9jZXJ0Mm9zc2woY2EpXHJcbiAgICAgICAgICAgICAgICBvc3NsX2Nhcy5hcHBlbmQob3NzbF9jYSlcclxuICAgICAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5za19YNTA5X3B1c2goc2tfeDUwOSwgb3NzbF9jYSlcclxuICAgICAgICAgICAgICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID49IDEpXHJcblxyXG4gICAgICAgIHdpdGggc2VsZi5femVyb2VkX251bGxfdGVybWluYXRlZF9idWYocGFzc3dvcmQpIGFzIHBhc3N3b3JkX2J1ZjpcclxuICAgICAgICAgICAgd2l0aCBzZWxmLl96ZXJvZWRfbnVsbF90ZXJtaW5hdGVkX2J1ZihuYW1lKSBhcyBuYW1lX2J1ZjpcclxuICAgICAgICAgICAgICAgIG9zc2xfY2VydCA9IHNlbGYuX2NlcnQyb3NzbChjZXJ0KSBpZiBjZXJ0IGVsc2Ugc2VsZi5fZmZpLk5VTExcclxuICAgICAgICAgICAgICAgIGlmIGtleSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgICAgICAgICBldnBfcGtleSA9IGtleS5fZXZwX3BrZXkgICMgdHlwZTogaWdub3JlW3VuaW9uLWF0dHJdXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fZmZpLk5VTExcclxuXHJcbiAgICAgICAgICAgICAgICBwMTIgPSBzZWxmLl9saWIuUEtDUzEyX2NyZWF0ZShcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZF9idWYsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZV9idWYsXHJcbiAgICAgICAgICAgICAgICAgICAgZXZwX3BrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgb3NzbF9jZXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHNrX3g1MDksXHJcbiAgICAgICAgICAgICAgICAgICAgbmlkX2tleSxcclxuICAgICAgICAgICAgICAgICAgICBuaWRfY2VydCxcclxuICAgICAgICAgICAgICAgICAgICBwa2NzMTJfaXRlcixcclxuICAgICAgICAgICAgICAgICAgICBtYWNfaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHAxMiAhPSBzZWxmLl9mZmkuTlVMTClcclxuICAgICAgICBwMTIgPSBzZWxmLl9mZmkuZ2MocDEyLCBzZWxmLl9saWIuUEtDUzEyX2ZyZWUpXHJcblxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2NyZWF0ZV9tZW1fYmlvX2djKClcclxuICAgICAgICByZXMgPSBzZWxmLl9saWIuaTJkX1BLQ1MxMl9iaW8oYmlvLCBwMTIpXHJcbiAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPiAwKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZWFkX21lbV9iaW8oYmlvKVxyXG5cclxuICAgIGRlZiBwb2x5MTMwNV9zdXBwb3J0ZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICBpZiBzZWxmLl9maXBzX2VuYWJsZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiBGYWxzZVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9saWIuQ3J5cHRvZ3JhcGh5X0hBU19QT0xZMTMwNSA9PSAxXHJcblxyXG4gICAgZGVmIGNyZWF0ZV9wb2x5MTMwNV9jdHgoc2VsZiwga2V5OiBieXRlcykgLT4gX1BvbHkxMzA1Q29udGV4dDpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJrZXkiLCBrZXkpXHJcbiAgICAgICAgaWYgbGVuKGtleSkgIT0gX1BPTFkxMzA1X0tFWV9TSVpFOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBIHBvbHkxMzA1IGtleSBpcyAzMiBieXRlcyBsb25nIilcclxuXHJcbiAgICAgICAgcmV0dXJuIF9Qb2x5MTMwNUNvbnRleHQoc2VsZiwga2V5KVxyXG5cclxuICAgIGRlZiBwa2NzN19zdXBwb3J0ZWQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gbm90IHNlbGYuX2xpYi5DUllQVE9HUkFQSFlfSVNfQk9SSU5HU1NMXHJcblxyXG4gICAgZGVmIGxvYWRfcGVtX3BrY3M3X2NlcnRpZmljYXRlcyhcclxuICAgICAgICBzZWxmLCBkYXRhOiBieXRlc1xyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFt4NTA5LkNlcnRpZmljYXRlXTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXMoImRhdGEiLCBkYXRhKVxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2J5dGVzX3RvX2JpbyhkYXRhKVxyXG4gICAgICAgIHA3ID0gc2VsZi5fbGliLlBFTV9yZWFkX2Jpb19QS0NTNyhcclxuICAgICAgICAgICAgYmlvLmJpbywgc2VsZi5fZmZpLk5VTEwsIHNlbGYuX2ZmaS5OVUxMLCBzZWxmLl9mZmkuTlVMTFxyXG4gICAgICAgIClcclxuICAgICAgICBpZiBwNyA9PSBzZWxmLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgc2VsZi5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbmFibGUgdG8gcGFyc2UgUEtDUzcgZGF0YSIpXHJcblxyXG4gICAgICAgIHA3ID0gc2VsZi5fZmZpLmdjKHA3LCBzZWxmLl9saWIuUEtDUzdfZnJlZSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fbG9hZF9wa2NzN19jZXJ0aWZpY2F0ZXMocDcpXHJcblxyXG4gICAgZGVmIGxvYWRfZGVyX3BrY3M3X2NlcnRpZmljYXRlcyhcclxuICAgICAgICBzZWxmLCBkYXRhOiBieXRlc1xyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFt4NTA5LkNlcnRpZmljYXRlXTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXMoImRhdGEiLCBkYXRhKVxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2J5dGVzX3RvX2JpbyhkYXRhKVxyXG4gICAgICAgIHA3ID0gc2VsZi5fbGliLmQyaV9QS0NTN19iaW8oYmlvLmJpbywgc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgaWYgcDcgPT0gc2VsZi5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIHNlbGYuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5hYmxlIHRvIHBhcnNlIFBLQ1M3IGRhdGEiKVxyXG5cclxuICAgICAgICBwNyA9IHNlbGYuX2ZmaS5nYyhwNywgc2VsZi5fbGliLlBLQ1M3X2ZyZWUpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2xvYWRfcGtjczdfY2VydGlmaWNhdGVzKHA3KVxyXG5cclxuICAgIGRlZiBfbG9hZF9wa2NzN19jZXJ0aWZpY2F0ZXMoc2VsZiwgcDcpOlxyXG4gICAgICAgIG5pZCA9IHNlbGYuX2xpYi5PQkpfb2JqMm5pZChwNy50eXBlKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQobmlkICE9IHNlbGYuX2xpYi5OSURfdW5kZWYpXHJcbiAgICAgICAgaWYgbmlkICE9IHNlbGYuX2xpYi5OSURfcGtjczdfc2lnbmVkOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJPbmx5IGJhc2ljIHNpZ25lZCBzdHJ1Y3R1cmVzIGFyZSBjdXJyZW50bHkgc3VwcG9ydGVkLiBOSUQiXHJcbiAgICAgICAgICAgICAgICAiIGZvciB0aGlzIGRhdGEgd2FzIHt9Ii5mb3JtYXQobmlkKSxcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX1NFUklBTElaQVRJT04sXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2tfeDUwOSA9IHA3LmQuc2lnbi5jZXJ0XHJcbiAgICAgICAgbnVtID0gc2VsZi5fbGliLnNrX1g1MDlfbnVtKHNrX3g1MDkpXHJcbiAgICAgICAgY2VydHMgPSBbXVxyXG4gICAgICAgIGZvciBpIGluIHJhbmdlKG51bSk6XHJcbiAgICAgICAgICAgIHg1MDkgPSBzZWxmLl9saWIuc2tfWDUwOV92YWx1ZShza194NTA5LCBpKVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHg1MDkgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5YNTA5X3VwX3JlZih4NTA5KVxyXG4gICAgICAgICAgICAjIFdoZW4gT3BlblNTTCBpcyBsZXNzIHRoYW4gMS4xLjAgdXBfcmVmIHJldHVybnMgdGhlIGN1cnJlbnRcclxuICAgICAgICAgICAgIyByZWZjb3VudC4gT24gMS4xLjArIGl0IHJldHVybnMgMSBmb3Igc3VjY2Vzcy5cclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPj0gMSlcclxuICAgICAgICAgICAgeDUwOSA9IHNlbGYuX2ZmaS5nYyh4NTA5LCBzZWxmLl9saWIuWDUwOV9mcmVlKVxyXG4gICAgICAgICAgICBjZXJ0ID0gc2VsZi5fb3NzbDJjZXJ0KHg1MDkpXHJcbiAgICAgICAgICAgIGNlcnRzLmFwcGVuZChjZXJ0KVxyXG5cclxuICAgICAgICByZXR1cm4gY2VydHNcclxuXHJcbiAgICBkZWYgcGtjczdfc2VyaWFsaXplX2NlcnRpZmljYXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGNlcnRzOiB0eXBpbmcuTGlzdFt4NTA5LkNlcnRpZmljYXRlXSxcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICk6XHJcbiAgICAgICAgY2VydHMgPSBsaXN0KGNlcnRzKVxyXG4gICAgICAgIGlmIG5vdCBjZXJ0cyBvciBub3QgYWxsKFxyXG4gICAgICAgICAgICBpc2luc3RhbmNlKGNlcnQsIHg1MDkuQ2VydGlmaWNhdGUpIGZvciBjZXJ0IGluIGNlcnRzXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjZXJ0cyBtdXN0IGJlIGEgbGlzdCBvZiBjZXJ0cyB3aXRoIGxlbmd0aCA+PSAxIilcclxuXHJcbiAgICAgICAgaWYgZW5jb2Rpbmcgbm90IGluIChcclxuICAgICAgICAgICAgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5QRU0sXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSLFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZW5jb2RpbmcgbXVzdCBERVIgb3IgUEVNIGZyb20gdGhlIEVuY29kaW5nIGVudW0iKVxyXG5cclxuICAgICAgICBjZXJ0c19zayA9IHNlbGYuX2xpYi5za19YNTA5X25ld19udWxsKClcclxuICAgICAgICBjZXJ0c19zayA9IHNlbGYuX2ZmaS5nYyhjZXJ0c19zaywgc2VsZi5fbGliLnNrX1g1MDlfZnJlZSlcclxuICAgICAgICAjIFRoaXMgbGlzdCBpcyB0byBrZWVwIHRoZSB4NTA5IHZhbHVlcyBhbGl2ZSB1bnRpbCBlbmQgb2YgZnVuY3Rpb25cclxuICAgICAgICBvc3NsX2NlcnRzID0gW11cclxuICAgICAgICBmb3IgY2VydCBpbiBjZXJ0czpcclxuICAgICAgICAgICAgb3NzbF9jZXJ0ID0gc2VsZi5fY2VydDJvc3NsKGNlcnQpXHJcbiAgICAgICAgICAgIG9zc2xfY2VydHMuYXBwZW5kKG9zc2xfY2VydClcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLnNrX1g1MDlfcHVzaChjZXJ0c19zaywgb3NzbF9jZXJ0KVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA+PSAxKVxyXG4gICAgICAgICMgV2UgdXNlIFBLQ1M3X3NpZ24gaGVyZSBiZWNhdXNlIGl0IGNyZWF0ZXMgdGhlIFBLQ1M3IGFuZCBQS0NTN19TSUdORURcclxuICAgICAgICAjIHN0cnVjdHVyZXMgZm9yIHVzIHJhdGhlciB0aGFuIHJlcXVpcmluZyBtYW51YWwgYXNzaWdubWVudC5cclxuICAgICAgICBwNyA9IHNlbGYuX2xpYi5QS0NTN19zaWduKFxyXG4gICAgICAgICAgICBzZWxmLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIGNlcnRzX3NrLFxyXG4gICAgICAgICAgICBzZWxmLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fbGliLlBLQ1M3X1BBUlRJQUwsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGJpb19vdXQgPSBzZWxmLl9jcmVhdGVfbWVtX2Jpb19nYygpXHJcbiAgICAgICAgaWYgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5QRU06XHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5QRU1fd3JpdGVfYmlvX1BLQ1M3X3N0cmVhbShcclxuICAgICAgICAgICAgICAgIGJpb19vdXQsIHA3LCBzZWxmLl9mZmkuTlVMTCwgMFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYXNzZXJ0IGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5pMmRfUEtDUzdfYmlvKGJpb19vdXQsIHA3KVxyXG5cclxuICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZWFkX21lbV9iaW8oYmlvX291dClcclxuXHJcbiAgICBkZWYgcGtjczdfc2lnbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGJ1aWxkZXI6IHBrY3M3LlBLQ1M3U2lnbmF0dXJlQnVpbGRlcixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBvcHRpb25zOiB0eXBpbmcuTGlzdFtwa2NzNy5QS0NTN09wdGlvbnNdLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBhc3NlcnQgYnVpbGRlci5fZGF0YSBpcyBub3QgTm9uZVxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2J5dGVzX3RvX2JpbyhidWlsZGVyLl9kYXRhKVxyXG4gICAgICAgIGluaXRfZmxhZ3MgPSBzZWxmLl9saWIuUEtDUzdfUEFSVElBTFxyXG4gICAgICAgIGZpbmFsX2ZsYWdzID0gMFxyXG5cclxuICAgICAgICBpZiBsZW4oYnVpbGRlci5fYWRkaXRpb25hbF9jZXJ0cykgPT0gMDpcclxuICAgICAgICAgICAgY2VydHMgPSBzZWxmLl9mZmkuTlVMTFxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGNlcnRzID0gc2VsZi5fbGliLnNrX1g1MDlfbmV3X251bGwoKVxyXG4gICAgICAgICAgICBjZXJ0cyA9IHNlbGYuX2ZmaS5nYyhjZXJ0cywgc2VsZi5fbGliLnNrX1g1MDlfZnJlZSlcclxuICAgICAgICAgICAgIyBUaGlzIGxpc3QgaXMgdG8ga2VlcCB0aGUgeDUwOSB2YWx1ZXMgYWxpdmUgdW50aWwgZW5kIG9mIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgIG9zc2xfY2VydHMgPSBbXVxyXG4gICAgICAgICAgICBmb3IgY2VydCBpbiBidWlsZGVyLl9hZGRpdGlvbmFsX2NlcnRzOlxyXG4gICAgICAgICAgICAgICAgb3NzbF9jZXJ0ID0gc2VsZi5fY2VydDJvc3NsKGNlcnQpXHJcbiAgICAgICAgICAgICAgICBvc3NsX2NlcnRzLmFwcGVuZChvc3NsX2NlcnQpXHJcbiAgICAgICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuc2tfWDUwOV9wdXNoKGNlcnRzLCBvc3NsX2NlcnQpXHJcbiAgICAgICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA+PSAxKVxyXG5cclxuICAgICAgICBpZiBwa2NzNy5QS0NTN09wdGlvbnMuRGV0YWNoZWRTaWduYXR1cmUgaW4gb3B0aW9uczpcclxuICAgICAgICAgICAgIyBEb25cJ3QgZW1iZWQgdGhlIGRhdGEgaW4gdGhlIFBLQ1M3IHN0cnVjdHVyZVxyXG4gICAgICAgICAgICBpbml0X2ZsYWdzIHw9IHNlbGYuX2xpYi5QS0NTN19ERVRBQ0hFRFxyXG4gICAgICAgICAgICBmaW5hbF9mbGFncyB8PSBzZWxmLl9saWIuUEtDUzdfREVUQUNIRURcclxuXHJcbiAgICAgICAgIyBUaGlzIGp1c3QgaW5pdHMgYSBzdHJ1Y3R1cmUgZm9yIHVzLiBIb3dldmVyLCB0aGVyZVxyXG4gICAgICAgICMgYXJlIGZsYWdzIHdlIG5lZWQgdG8gc2V0LCBqb3kuXHJcbiAgICAgICAgcDcgPSBzZWxmLl9saWIuUEtDUzdfc2lnbihcclxuICAgICAgICAgICAgc2VsZi5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBjZXJ0cyxcclxuICAgICAgICAgICAgc2VsZi5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIGluaXRfZmxhZ3MsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocDcgIT0gc2VsZi5fZmZpLk5VTEwpXHJcbiAgICAgICAgcDcgPSBzZWxmLl9mZmkuZ2MocDcsIHNlbGYuX2xpYi5QS0NTN19mcmVlKVxyXG4gICAgICAgIHNpZ25lcl9mbGFncyA9IDBcclxuICAgICAgICAjIFRoZXNlIGZsYWdzIGFyZSBjb25maWd1cmFibGUgb24gYSBwZXItc2lnbmF0dXJlIGJhc2lzXHJcbiAgICAgICAgIyBidXQgd2VcJ3ZlIGRlbGliZXJhdGVseSBjaG9zZW4gdG8gbWFrZSB0aGUgQVBJIG9ubHkgYWxsb3dcclxuICAgICAgICAjIHNldHRpbmcgaXQgYWNyb3NzIGFsbCBzaWduYXR1cmVzIGZvciBub3cuXHJcbiAgICAgICAgaWYgcGtjczcuUEtDUzdPcHRpb25zLk5vQ2FwYWJpbGl0aWVzIGluIG9wdGlvbnM6XHJcbiAgICAgICAgICAgIHNpZ25lcl9mbGFncyB8PSBzZWxmLl9saWIuUEtDUzdfTk9TTUlNRUNBUFxyXG4gICAgICAgIGVsaWYgcGtjczcuUEtDUzdPcHRpb25zLk5vQXR0cmlidXRlcyBpbiBvcHRpb25zOlxyXG4gICAgICAgICAgICBzaWduZXJfZmxhZ3MgfD0gc2VsZi5fbGliLlBLQ1M3X05PQVRUUlxyXG5cclxuICAgICAgICBpZiBwa2NzNy5QS0NTN09wdGlvbnMuTm9DZXJ0cyBpbiBvcHRpb25zOlxyXG4gICAgICAgICAgICBzaWduZXJfZmxhZ3MgfD0gc2VsZi5fbGliLlBLQ1M3X05PQ0VSVFNcclxuXHJcbiAgICAgICAgZm9yIGNlcnRpZmljYXRlLCBwcml2YXRlX2tleSwgaGFzaF9hbGdvcml0aG0gaW4gYnVpbGRlci5fc2lnbmVyczpcclxuICAgICAgICAgICAgb3NzbF9jZXJ0ID0gc2VsZi5fY2VydDJvc3NsKGNlcnRpZmljYXRlKVxyXG4gICAgICAgICAgICBtZCA9IHNlbGYuX2V2cF9tZF9ub25fbnVsbF9mcm9tX2FsZ29yaXRobShoYXNoX2FsZ29yaXRobSlcclxuICAgICAgICAgICAgcDdzaWduZXJpbmZvID0gc2VsZi5fbGliLlBLQ1M3X3NpZ25fYWRkX3NpZ25lcihcclxuICAgICAgICAgICAgICAgIHA3LFxyXG4gICAgICAgICAgICAgICAgb3NzbF9jZXJ0LFxyXG4gICAgICAgICAgICAgICAgcHJpdmF0ZV9rZXkuX2V2cF9wa2V5LCAgIyB0eXBlOiBpZ25vcmVbdW5pb24tYXR0cl1cclxuICAgICAgICAgICAgICAgIG1kLFxyXG4gICAgICAgICAgICAgICAgc2lnbmVyX2ZsYWdzLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocDdzaWduZXJpbmZvICE9IHNlbGYuX2ZmaS5OVUxMKVxyXG5cclxuICAgICAgICBmb3Igb3B0aW9uIGluIG9wdGlvbnM6XHJcbiAgICAgICAgICAgICMgRGV0YWNoZWRTaWduYXR1cmUsIE5vQ2FwYWJpbGl0aWVzLCBhbmQgTm9BdHRyaWJ1dGVzIGFyZSBhbHJlYWR5XHJcbiAgICAgICAgICAgICMgaGFuZGxlZCBzbyB3ZSBqdXN0IG5lZWQgdG8gY2hlY2sgdGhlc2UgbGFzdCB0d28gb3B0aW9ucy5cclxuICAgICAgICAgICAgaWYgb3B0aW9uIGlzIHBrY3M3LlBLQ1M3T3B0aW9ucy5UZXh0OlxyXG4gICAgICAgICAgICAgICAgZmluYWxfZmxhZ3MgfD0gc2VsZi5fbGliLlBLQ1M3X1RFWFRcclxuICAgICAgICAgICAgZWxpZiBvcHRpb24gaXMgcGtjczcuUEtDUzdPcHRpb25zLkJpbmFyeTpcclxuICAgICAgICAgICAgICAgIGZpbmFsX2ZsYWdzIHw9IHNlbGYuX2xpYi5QS0NTN19CSU5BUllcclxuXHJcbiAgICAgICAgYmlvX291dCA9IHNlbGYuX2NyZWF0ZV9tZW1fYmlvX2djKClcclxuICAgICAgICBpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlNNSU1FOlxyXG4gICAgICAgICAgICAjIFRoaXMgZmluYWxpemVzIHRoZSBzdHJ1Y3R1cmVcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLlNNSU1FX3dyaXRlX1BLQ1M3KFxyXG4gICAgICAgICAgICAgICAgYmlvX291dCwgcDcsIGJpby5iaW8sIGZpbmFsX2ZsYWdzXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbGlmIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUEVNOlxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuUEtDUzdfZmluYWwocDcsIGJpby5iaW8sIGZpbmFsX2ZsYWdzKVxyXG4gICAgICAgICAgICBzZWxmLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9saWIuUEVNX3dyaXRlX2Jpb19QS0NTN19zdHJlYW0oXHJcbiAgICAgICAgICAgICAgICBiaW9fb3V0LCBwNywgYmlvLmJpbywgZmluYWxfZmxhZ3NcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGFzc2VydCBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLkRFUlxyXG4gICAgICAgICAgICAjIFdlIG5lZWQgdG8gY2FsbCBmaW5hbGl6ZSBoZXJlIGJlY2F1YXNlIGkyZF9QS0NTN19iaW8gZG9lcyBub3RcclxuICAgICAgICAgICAgIyBmaW5hbGl6ZS5cclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fbGliLlBLQ1M3X2ZpbmFsKHA3LCBiaW8uYmlvLCBmaW5hbF9mbGFncylcclxuICAgICAgICAgICAgc2VsZi5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICAgICAgIyBPcGVuU1NMIDMuMCBsZWF2ZXMgYSByYW5kb20gYmlvIGVycm9yIG9uIHRoZSBzdGFjazpcclxuICAgICAgICAgICAgIyBodHRwczovL2dpdGh1Yi5jb20vb3BlbnNzbC9vcGVuc3NsL2lzc3Vlcy8xNjY4MVxyXG4gICAgICAgICAgICBpZiBzZWxmLl9saWIuQ1JZUFRPR1JBUEhZX09QRU5TU0xfMzAwX09SX0dSRUFURVI6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2xpYi5pMmRfUEtDUzdfYmlvKGJpb19vdXQsIHA3KVxyXG4gICAgICAgIHNlbGYub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWRfbWVtX2JpbyhiaW9fb3V0KVxyXG5cclxuXHJcbmNsYXNzIEdldENpcGhlckJ5TmFtZTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBmbXQ6IHN0cik6XHJcbiAgICAgICAgc2VsZi5fZm10ID0gZm10XHJcblxyXG4gICAgZGVmIF9fY2FsbF9fKHNlbGYsIGJhY2tlbmQ6IEJhY2tlbmQsIGNpcGhlcjogQ2lwaGVyQWxnb3JpdGhtLCBtb2RlOiBNb2RlKTpcclxuICAgICAgICBjaXBoZXJfbmFtZSA9IHNlbGYuX2ZtdC5mb3JtYXQoY2lwaGVyPWNpcGhlciwgbW9kZT1tb2RlKS5sb3dlcigpXHJcbiAgICAgICAgcmV0dXJuIGJhY2tlbmQuX2xpYi5FVlBfZ2V0X2NpcGhlcmJ5bmFtZShjaXBoZXJfbmFtZS5lbmNvZGUoImFzY2lpIikpXHJcblxyXG5cclxuZGVmIF9nZXRfeHRzX2NpcGhlcihiYWNrZW5kOiBCYWNrZW5kLCBjaXBoZXI6IEFFUywgbW9kZSk6XHJcbiAgICBjaXBoZXJfbmFtZSA9ICJhZXMte30teHRzIi5mb3JtYXQoY2lwaGVyLmtleV9zaXplIC8vIDIpXHJcbiAgICByZXR1cm4gYmFja2VuZC5fbGliLkVWUF9nZXRfY2lwaGVyYnluYW1lKGNpcGhlcl9uYW1lLmVuY29kZSgiYXNjaWkiKSlcclxuXHJcblxyXG5iYWNrZW5kID0gQmFja2VuZCgpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkveDUwOS9fX2luaXRfXy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5IGltcG9ydCBjZXJ0aWZpY2F0ZV90cmFuc3BhcmVuY3lcclxuZnJvbSBjcnlwdG9ncmFwaHkueDUwOS5iYXNlIGltcG9ydCAoXHJcbiAgICBBdHRyaWJ1dGUsXHJcbiAgICBBdHRyaWJ1dGVOb3RGb3VuZCxcclxuICAgIEF0dHJpYnV0ZXMsXHJcbiAgICBDZXJ0aWZpY2F0ZSxcclxuICAgIENlcnRpZmljYXRlQnVpbGRlcixcclxuICAgIENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3QsXHJcbiAgICBDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0QnVpbGRlcixcclxuICAgIENlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3QsXHJcbiAgICBDZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0QnVpbGRlcixcclxuICAgIEludmFsaWRWZXJzaW9uLFxyXG4gICAgUmV2b2tlZENlcnRpZmljYXRlLFxyXG4gICAgUmV2b2tlZENlcnRpZmljYXRlQnVpbGRlcixcclxuICAgIFZlcnNpb24sXHJcbiAgICBsb2FkX2Rlcl94NTA5X2NlcnRpZmljYXRlLFxyXG4gICAgbG9hZF9kZXJfeDUwOV9jcmwsXHJcbiAgICBsb2FkX2Rlcl94NTA5X2NzcixcclxuICAgIGxvYWRfcGVtX3g1MDlfY2VydGlmaWNhdGUsXHJcbiAgICBsb2FkX3BlbV94NTA5X2NybCxcclxuICAgIGxvYWRfcGVtX3g1MDlfY3NyLFxyXG4gICAgcmFuZG9tX3NlcmlhbF9udW1iZXIsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkueDUwOS5leHRlbnNpb25zIGltcG9ydCAoXHJcbiAgICBBY2Nlc3NEZXNjcmlwdGlvbixcclxuICAgIEF1dGhvcml0eUluZm9ybWF0aW9uQWNjZXNzLFxyXG4gICAgQXV0aG9yaXR5S2V5SWRlbnRpZmllcixcclxuICAgIEJhc2ljQ29uc3RyYWludHMsXHJcbiAgICBDUkxEaXN0cmlidXRpb25Qb2ludHMsXHJcbiAgICBDUkxOdW1iZXIsXHJcbiAgICBDUkxSZWFzb24sXHJcbiAgICBDZXJ0aWZpY2F0ZUlzc3VlcixcclxuICAgIENlcnRpZmljYXRlUG9saWNpZXMsXHJcbiAgICBEZWx0YUNSTEluZGljYXRvcixcclxuICAgIERpc3RyaWJ1dGlvblBvaW50LFxyXG4gICAgRHVwbGljYXRlRXh0ZW5zaW9uLFxyXG4gICAgRXh0ZW5kZWRLZXlVc2FnZSxcclxuICAgIEV4dGVuc2lvbixcclxuICAgIEV4dGVuc2lvbk5vdEZvdW5kLFxyXG4gICAgRXh0ZW5zaW9uVHlwZSxcclxuICAgIEV4dGVuc2lvbnMsXHJcbiAgICBGcmVzaGVzdENSTCxcclxuICAgIEdlbmVyYWxOYW1lcyxcclxuICAgIEluaGliaXRBbnlQb2xpY3ksXHJcbiAgICBJbnZhbGlkaXR5RGF0ZSxcclxuICAgIElzc3VlckFsdGVybmF0aXZlTmFtZSxcclxuICAgIElzc3VpbmdEaXN0cmlidXRpb25Qb2ludCxcclxuICAgIEtleVVzYWdlLFxyXG4gICAgTmFtZUNvbnN0cmFpbnRzLFxyXG4gICAgTm90aWNlUmVmZXJlbmNlLFxyXG4gICAgT0NTUE5vQ2hlY2ssXHJcbiAgICBPQ1NQTm9uY2UsXHJcbiAgICBQb2xpY3lDb25zdHJhaW50cyxcclxuICAgIFBvbGljeUluZm9ybWF0aW9uLFxyXG4gICAgUHJlY2VydFBvaXNvbixcclxuICAgIFByZWNlcnRpZmljYXRlU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBzLFxyXG4gICAgUmVhc29uRmxhZ3MsXHJcbiAgICBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcHMsXHJcbiAgICBTdWJqZWN0QWx0ZXJuYXRpdmVOYW1lLFxyXG4gICAgU3ViamVjdEluZm9ybWF0aW9uQWNjZXNzLFxyXG4gICAgU3ViamVjdEtleUlkZW50aWZpZXIsXHJcbiAgICBUTFNGZWF0dXJlLFxyXG4gICAgVExTRmVhdHVyZVR5cGUsXHJcbiAgICBVbnJlY29nbml6ZWRFeHRlbnNpb24sXHJcbiAgICBVc2VyTm90aWNlLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lng1MDkuZ2VuZXJhbF9uYW1lIGltcG9ydCAoXHJcbiAgICBETlNOYW1lLFxyXG4gICAgRGlyZWN0b3J5TmFtZSxcclxuICAgIEdlbmVyYWxOYW1lLFxyXG4gICAgSVBBZGRyZXNzLFxyXG4gICAgT3RoZXJOYW1lLFxyXG4gICAgUkZDODIyTmFtZSxcclxuICAgIFJlZ2lzdGVyZWRJRCxcclxuICAgIFVuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXIsXHJcbiAgICBVbnN1cHBvcnRlZEdlbmVyYWxOYW1lVHlwZSxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5Lm5hbWUgaW1wb3J0IChcclxuICAgIE5hbWUsXHJcbiAgICBOYW1lQXR0cmlidXRlLFxyXG4gICAgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZSxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5Lm9pZCBpbXBvcnQgKFxyXG4gICAgQXV0aG9yaXR5SW5mb3JtYXRpb25BY2Nlc3NPSUQsXHJcbiAgICBDUkxFbnRyeUV4dGVuc2lvbk9JRCxcclxuICAgIENlcnRpZmljYXRlUG9saWNpZXNPSUQsXHJcbiAgICBFeHRlbmRlZEtleVVzYWdlT0lELFxyXG4gICAgRXh0ZW5zaW9uT0lELFxyXG4gICAgTmFtZU9JRCxcclxuICAgIE9iamVjdElkZW50aWZpZXIsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQsXHJcbilcclxuXHJcblxyXG5PSURfQVVUSE9SSVRZX0lORk9STUFUSU9OX0FDQ0VTUyA9IEV4dGVuc2lvbk9JRC5BVVRIT1JJVFlfSU5GT1JNQVRJT05fQUNDRVNTXHJcbk9JRF9BVVRIT1JJVFlfS0VZX0lERU5USUZJRVIgPSBFeHRlbnNpb25PSUQuQVVUSE9SSVRZX0tFWV9JREVOVElGSUVSXHJcbk9JRF9CQVNJQ19DT05TVFJBSU5UUyA9IEV4dGVuc2lvbk9JRC5CQVNJQ19DT05TVFJBSU5UU1xyXG5PSURfQ0VSVElGSUNBVEVfUE9MSUNJRVMgPSBFeHRlbnNpb25PSUQuQ0VSVElGSUNBVEVfUE9MSUNJRVNcclxuT0lEX0NSTF9ESVNUUklCVVRJT05fUE9JTlRTID0gRXh0ZW5zaW9uT0lELkNSTF9ESVNUUklCVVRJT05fUE9JTlRTXHJcbk9JRF9FWFRFTkRFRF9LRVlfVVNBR0UgPSBFeHRlbnNpb25PSUQuRVhURU5ERURfS0VZX1VTQUdFXHJcbk9JRF9GUkVTSEVTVF9DUkwgPSBFeHRlbnNpb25PSUQuRlJFU0hFU1RfQ1JMXHJcbk9JRF9JTkhJQklUX0FOWV9QT0xJQ1kgPSBFeHRlbnNpb25PSUQuSU5ISUJJVF9BTllfUE9MSUNZXHJcbk9JRF9JU1NVRVJfQUxURVJOQVRJVkVfTkFNRSA9IEV4dGVuc2lvbk9JRC5JU1NVRVJfQUxURVJOQVRJVkVfTkFNRVxyXG5PSURfS0VZX1VTQUdFID0gRXh0ZW5zaW9uT0lELktFWV9VU0FHRVxyXG5PSURfTkFNRV9DT05TVFJBSU5UUyA9IEV4dGVuc2lvbk9JRC5OQU1FX0NPTlNUUkFJTlRTXHJcbk9JRF9PQ1NQX05PX0NIRUNLID0gRXh0ZW5zaW9uT0lELk9DU1BfTk9fQ0hFQ0tcclxuT0lEX1BPTElDWV9DT05TVFJBSU5UUyA9IEV4dGVuc2lvbk9JRC5QT0xJQ1lfQ09OU1RSQUlOVFNcclxuT0lEX1BPTElDWV9NQVBQSU5HUyA9IEV4dGVuc2lvbk9JRC5QT0xJQ1lfTUFQUElOR1NcclxuT0lEX1NVQkpFQ1RfQUxURVJOQVRJVkVfTkFNRSA9IEV4dGVuc2lvbk9JRC5TVUJKRUNUX0FMVEVSTkFUSVZFX05BTUVcclxuT0lEX1NVQkpFQ1RfRElSRUNUT1JZX0FUVFJJQlVURVMgPSBFeHRlbnNpb25PSUQuU1VCSkVDVF9ESVJFQ1RPUllfQVRUUklCVVRFU1xyXG5PSURfU1VCSkVDVF9JTkZPUk1BVElPTl9BQ0NFU1MgPSBFeHRlbnNpb25PSUQuU1VCSkVDVF9JTkZPUk1BVElPTl9BQ0NFU1NcclxuT0lEX1NVQkpFQ1RfS0VZX0lERU5USUZJRVIgPSBFeHRlbnNpb25PSUQuU1VCSkVDVF9LRVlfSURFTlRJRklFUlxyXG5cclxuT0lEX0RTQV9XSVRIX1NIQTEgPSBTaWduYXR1cmVBbGdvcml0aG1PSUQuRFNBX1dJVEhfU0hBMVxyXG5PSURfRFNBX1dJVEhfU0hBMjI0ID0gU2lnbmF0dXJlQWxnb3JpdGhtT0lELkRTQV9XSVRIX1NIQTIyNFxyXG5PSURfRFNBX1dJVEhfU0hBMjU2ID0gU2lnbmF0dXJlQWxnb3JpdGhtT0lELkRTQV9XSVRIX1NIQTI1NlxyXG5PSURfRUNEU0FfV0lUSF9TSEExID0gU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVDRFNBX1dJVEhfU0hBMVxyXG5PSURfRUNEU0FfV0lUSF9TSEEyMjQgPSBTaWduYXR1cmVBbGdvcml0aG1PSUQuRUNEU0FfV0lUSF9TSEEyMjRcclxuT0lEX0VDRFNBX1dJVEhfU0hBMjU2ID0gU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVDRFNBX1dJVEhfU0hBMjU2XHJcbk9JRF9FQ0RTQV9XSVRIX1NIQTM4NCA9IFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FQ0RTQV9XSVRIX1NIQTM4NFxyXG5PSURfRUNEU0FfV0lUSF9TSEE1MTIgPSBTaWduYXR1cmVBbGdvcml0aG1PSUQuRUNEU0FfV0lUSF9TSEE1MTJcclxuT0lEX1JTQV9XSVRIX01ENSA9IFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FfV0lUSF9NRDVcclxuT0lEX1JTQV9XSVRIX1NIQTEgPSBTaWduYXR1cmVBbGdvcml0aG1PSUQuUlNBX1dJVEhfU0hBMVxyXG5PSURfUlNBX1dJVEhfU0hBMjI0ID0gU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX1NIQTIyNFxyXG5PSURfUlNBX1dJVEhfU0hBMjU2ID0gU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX1NIQTI1NlxyXG5PSURfUlNBX1dJVEhfU0hBMzg0ID0gU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX1NIQTM4NFxyXG5PSURfUlNBX1dJVEhfU0hBNTEyID0gU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX1NIQTUxMlxyXG5PSURfUlNBU1NBX1BTUyA9IFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FTU0FfUFNTXHJcblxyXG5PSURfQ09NTU9OX05BTUUgPSBOYW1lT0lELkNPTU1PTl9OQU1FXHJcbk9JRF9DT1VOVFJZX05BTUUgPSBOYW1lT0lELkNPVU5UUllfTkFNRVxyXG5PSURfRE9NQUlOX0NPTVBPTkVOVCA9IE5hbWVPSUQuRE9NQUlOX0NPTVBPTkVOVFxyXG5PSURfRE5fUVVBTElGSUVSID0gTmFtZU9JRC5ETl9RVUFMSUZJRVJcclxuT0lEX0VNQUlMX0FERFJFU1MgPSBOYW1lT0lELkVNQUlMX0FERFJFU1NcclxuT0lEX0dFTkVSQVRJT05fUVVBTElGSUVSID0gTmFtZU9JRC5HRU5FUkFUSU9OX1FVQUxJRklFUlxyXG5PSURfR0lWRU5fTkFNRSA9IE5hbWVPSUQuR0lWRU5fTkFNRVxyXG5PSURfTE9DQUxJVFlfTkFNRSA9IE5hbWVPSUQuTE9DQUxJVFlfTkFNRVxyXG5PSURfT1JHQU5JWkFUSU9OQUxfVU5JVF9OQU1FID0gTmFtZU9JRC5PUkdBTklaQVRJT05BTF9VTklUX05BTUVcclxuT0lEX09SR0FOSVpBVElPTl9OQU1FID0gTmFtZU9JRC5PUkdBTklaQVRJT05fTkFNRVxyXG5PSURfUFNFVURPTllNID0gTmFtZU9JRC5QU0VVRE9OWU1cclxuT0lEX1NFUklBTF9OVU1CRVIgPSBOYW1lT0lELlNFUklBTF9OVU1CRVJcclxuT0lEX1NUQVRFX09SX1BST1ZJTkNFX05BTUUgPSBOYW1lT0lELlNUQVRFX09SX1BST1ZJTkNFX05BTUVcclxuT0lEX1NVUk5BTUUgPSBOYW1lT0lELlNVUk5BTUVcclxuT0lEX1RJVExFID0gTmFtZU9JRC5USVRMRVxyXG5cclxuT0lEX0NMSUVOVF9BVVRIID0gRXh0ZW5kZWRLZXlVc2FnZU9JRC5DTElFTlRfQVVUSFxyXG5PSURfQ09ERV9TSUdOSU5HID0gRXh0ZW5kZWRLZXlVc2FnZU9JRC5DT0RFX1NJR05JTkdcclxuT0lEX0VNQUlMX1BST1RFQ1RJT04gPSBFeHRlbmRlZEtleVVzYWdlT0lELkVNQUlMX1BST1RFQ1RJT05cclxuT0lEX09DU1BfU0lHTklORyA9IEV4dGVuZGVkS2V5VXNhZ2VPSUQuT0NTUF9TSUdOSU5HXHJcbk9JRF9TRVJWRVJfQVVUSCA9IEV4dGVuZGVkS2V5VXNhZ2VPSUQuU0VSVkVSX0FVVEhcclxuT0lEX1RJTUVfU1RBTVBJTkcgPSBFeHRlbmRlZEtleVVzYWdlT0lELlRJTUVfU1RBTVBJTkdcclxuXHJcbk9JRF9BTllfUE9MSUNZID0gQ2VydGlmaWNhdGVQb2xpY2llc09JRC5BTllfUE9MSUNZXHJcbk9JRF9DUFNfUVVBTElGSUVSID0gQ2VydGlmaWNhdGVQb2xpY2llc09JRC5DUFNfUVVBTElGSUVSXHJcbk9JRF9DUFNfVVNFUl9OT1RJQ0UgPSBDZXJ0aWZpY2F0ZVBvbGljaWVzT0lELkNQU19VU0VSX05PVElDRVxyXG5cclxuT0lEX0NFUlRJRklDQVRFX0lTU1VFUiA9IENSTEVudHJ5RXh0ZW5zaW9uT0lELkNFUlRJRklDQVRFX0lTU1VFUlxyXG5PSURfQ1JMX1JFQVNPTiA9IENSTEVudHJ5RXh0ZW5zaW9uT0lELkNSTF9SRUFTT05cclxuT0lEX0lOVkFMSURJVFlfREFURSA9IENSTEVudHJ5RXh0ZW5zaW9uT0lELklOVkFMSURJVFlfREFURVxyXG5cclxuT0lEX0NBX0lTU1VFUlMgPSBBdXRob3JpdHlJbmZvcm1hdGlvbkFjY2Vzc09JRC5DQV9JU1NVRVJTXHJcbk9JRF9PQ1NQID0gQXV0aG9yaXR5SW5mb3JtYXRpb25BY2Nlc3NPSUQuT0NTUFxyXG5cclxuX19hbGxfXyA9IFtcclxuICAgICJjZXJ0aWZpY2F0ZV90cmFuc3BhcmVuY3kiLFxyXG4gICAgImxvYWRfcGVtX3g1MDlfY2VydGlmaWNhdGUiLFxyXG4gICAgImxvYWRfZGVyX3g1MDlfY2VydGlmaWNhdGUiLFxyXG4gICAgImxvYWRfcGVtX3g1MDlfY3NyIixcclxuICAgICJsb2FkX2Rlcl94NTA5X2NzciIsXHJcbiAgICAibG9hZF9wZW1feDUwOV9jcmwiLFxyXG4gICAgImxvYWRfZGVyX3g1MDlfY3JsIixcclxuICAgICJyYW5kb21fc2VyaWFsX251bWJlciIsXHJcbiAgICAiQXR0cmlidXRlIixcclxuICAgICJBdHRyaWJ1dGVOb3RGb3VuZCIsXHJcbiAgICAiQXR0cmlidXRlcyIsXHJcbiAgICAiSW52YWxpZFZlcnNpb24iLFxyXG4gICAgIkRlbHRhQ1JMSW5kaWNhdG9yIixcclxuICAgICJEdXBsaWNhdGVFeHRlbnNpb24iLFxyXG4gICAgIkV4dGVuc2lvbk5vdEZvdW5kIixcclxuICAgICJVbnN1cHBvcnRlZEdlbmVyYWxOYW1lVHlwZSIsXHJcbiAgICAiTmFtZUF0dHJpYnV0ZSIsXHJcbiAgICAiTmFtZSIsXHJcbiAgICAiUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZSIsXHJcbiAgICAiT2JqZWN0SWRlbnRpZmllciIsXHJcbiAgICAiRXh0ZW5zaW9uVHlwZSIsXHJcbiAgICAiRXh0ZW5zaW9ucyIsXHJcbiAgICAiRXh0ZW5zaW9uIixcclxuICAgICJFeHRlbmRlZEtleVVzYWdlIixcclxuICAgICJGcmVzaGVzdENSTCIsXHJcbiAgICAiSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50IixcclxuICAgICJUTFNGZWF0dXJlIixcclxuICAgICJUTFNGZWF0dXJlVHlwZSIsXHJcbiAgICAiT0NTUE5vQ2hlY2siLFxyXG4gICAgIkJhc2ljQ29uc3RyYWludHMiLFxyXG4gICAgIkNSTE51bWJlciIsXHJcbiAgICAiS2V5VXNhZ2UiLFxyXG4gICAgIkF1dGhvcml0eUluZm9ybWF0aW9uQWNjZXNzIixcclxuICAgICJTdWJqZWN0SW5mb3JtYXRpb25BY2Nlc3MiLFxyXG4gICAgIkFjY2Vzc0Rlc2NyaXB0aW9uIixcclxuICAgICJDZXJ0aWZpY2F0ZVBvbGljaWVzIixcclxuICAgICJQb2xpY3lJbmZvcm1hdGlvbiIsXHJcbiAgICAiVXNlck5vdGljZSIsXHJcbiAgICAiTm90aWNlUmVmZXJlbmNlIixcclxuICAgICJTdWJqZWN0S2V5SWRlbnRpZmllciIsXHJcbiAgICAiTmFtZUNvbnN0cmFpbnRzIixcclxuICAgICJDUkxEaXN0cmlidXRpb25Qb2ludHMiLFxyXG4gICAgIkRpc3RyaWJ1dGlvblBvaW50IixcclxuICAgICJSZWFzb25GbGFncyIsXHJcbiAgICAiSW5oaWJpdEFueVBvbGljeSIsXHJcbiAgICAiU3ViamVjdEFsdGVybmF0aXZlTmFtZSIsXHJcbiAgICAiSXNzdWVyQWx0ZXJuYXRpdmVOYW1lIixcclxuICAgICJBdXRob3JpdHlLZXlJZGVudGlmaWVyIixcclxuICAgICJHZW5lcmFsTmFtZXMiLFxyXG4gICAgIkdlbmVyYWxOYW1lIixcclxuICAgICJSRkM4MjJOYW1lIixcclxuICAgICJETlNOYW1lIixcclxuICAgICJVbmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyIixcclxuICAgICJSZWdpc3RlcmVkSUQiLFxyXG4gICAgIkRpcmVjdG9yeU5hbWUiLFxyXG4gICAgIklQQWRkcmVzcyIsXHJcbiAgICAiT3RoZXJOYW1lIixcclxuICAgICJDZXJ0aWZpY2F0ZSIsXHJcbiAgICAiQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdCIsXHJcbiAgICAiQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdEJ1aWxkZXIiLFxyXG4gICAgIkNlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3QiLFxyXG4gICAgIlJldm9rZWRDZXJ0aWZpY2F0ZSIsXHJcbiAgICAiUmV2b2tlZENlcnRpZmljYXRlQnVpbGRlciIsXHJcbiAgICAiQ2VydGlmaWNhdGVTaWduaW5nUmVxdWVzdEJ1aWxkZXIiLFxyXG4gICAgIkNlcnRpZmljYXRlQnVpbGRlciIsXHJcbiAgICAiVmVyc2lvbiIsXHJcbiAgICAiT0lEX0NBX0lTU1VFUlMiLFxyXG4gICAgIk9JRF9PQ1NQIixcclxuICAgICJDZXJ0aWZpY2F0ZUlzc3VlciIsXHJcbiAgICAiQ1JMUmVhc29uIixcclxuICAgICJJbnZhbGlkaXR5RGF0ZSIsXHJcbiAgICAiVW5yZWNvZ25pemVkRXh0ZW5zaW9uIixcclxuICAgICJQb2xpY3lDb25zdHJhaW50cyIsXHJcbiAgICAiUHJlY2VydGlmaWNhdGVTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcHMiLFxyXG4gICAgIlByZWNlcnRQb2lzb24iLFxyXG4gICAgIk9DU1BOb25jZSIsXHJcbiAgICAiU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBzIixcclxuICAgICJTaWduYXR1cmVBbGdvcml0aG1PSUQiLFxyXG4gICAgIk5hbWVPSUQiLFxyXG5dXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkveDUwOS9jZXJ0aWZpY2F0ZV90cmFuc3BhcmVuY3kucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGFiY1xyXG5pbXBvcnQgZGF0ZXRpbWVcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmluZGluZ3MuX3J1c3QgaW1wb3J0IHg1MDkgYXMgcnVzdF94NTA5XHJcblxyXG5cclxuY2xhc3MgTG9nRW50cnlUeXBlKHV0aWxzLkVudW0pOlxyXG4gICAgWDUwOV9DRVJUSUZJQ0FURSA9IDBcclxuICAgIFBSRV9DRVJUSUZJQ0FURSA9IDFcclxuXHJcblxyXG5jbGFzcyBWZXJzaW9uKHV0aWxzLkVudW0pOlxyXG4gICAgdjEgPSAwXHJcblxyXG5cclxuY2xhc3MgU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXAobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHZlcnNpb24oc2VsZikgLT4gVmVyc2lvbjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBTQ1QgdmVyc2lvbi5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBsb2dfaWQoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhbiBpZGVudGlmaWVyIGluZGljYXRpbmcgd2hpY2ggbG9nIHRoaXMgU0NUIGlzIGZvci5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiB0aW1lc3RhbXAoc2VsZikgLT4gZGF0ZXRpbWUuZGF0ZXRpbWU6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgdGltZXN0YW1wIGZvciB0aGlzIFNDVC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBlbnRyeV90eXBlKHNlbGYpIC0+IExvZ0VudHJ5VHlwZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHdoZXRoZXIgdGhpcyBpcyBhbiBTQ1QgZm9yIGEgY2VydGlmaWNhdGUgb3IgcHJlLWNlcnRpZmljYXRlLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcblNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wLnJlZ2lzdGVyKHJ1c3RfeDUwOS5TY3QpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L2JpbmRpbmdzL19faW5pdF9fLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L3g1MDkvYmFzZS5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgYWJjXHJcbmltcG9ydCBkYXRldGltZVxyXG5pbXBvcnQgb3NcclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHV0aWxzXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iaW5kaW5ncy5fcnVzdCBpbXBvcnQgeDUwOSBhcyBydXN0X3g1MDlcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGhhc2hlcywgc2VyaWFsaXphdGlvblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljIGltcG9ydCAoXHJcbiAgICBkc2EsXHJcbiAgICBlYyxcclxuICAgIGVkMjU1MTksXHJcbiAgICBlZDQ0OCxcclxuICAgIHJzYSxcclxuICAgIHgyNTUxOSxcclxuICAgIHg0NDgsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYy50eXBlcyBpbXBvcnQgKFxyXG4gICAgQ0VSVElGSUNBVEVfSVNTVUVSX1BVQkxJQ19LRVlfVFlQRVMsXHJcbiAgICBDRVJUSUZJQ0FURV9QUklWQVRFX0tFWV9UWVBFUyxcclxuICAgIENFUlRJRklDQVRFX1BVQkxJQ19LRVlfVFlQRVMsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkueDUwOS5leHRlbnNpb25zIGltcG9ydCAoXHJcbiAgICBFeHRlbnNpb24sXHJcbiAgICBFeHRlbnNpb25UeXBlLFxyXG4gICAgRXh0ZW5zaW9ucyxcclxuICAgIF9tYWtlX3NlcXVlbmNlX21ldGhvZHMsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkueDUwOS5uYW1lIGltcG9ydCBOYW1lLCBfQVNOMVR5cGVcclxuZnJvbSBjcnlwdG9ncmFwaHkueDUwOS5vaWQgaW1wb3J0IE9iamVjdElkZW50aWZpZXJcclxuXHJcblxyXG5fRUFSTElFU1RfVVRDX1RJTUUgPSBkYXRldGltZS5kYXRldGltZSgxOTUwLCAxLCAxKVxyXG5cclxuXHJcbmNsYXNzIEF0dHJpYnV0ZU5vdEZvdW5kKEV4Y2VwdGlvbik6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgbXNnOiBzdHIsIG9pZDogT2JqZWN0SWRlbnRpZmllcikgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcihBdHRyaWJ1dGVOb3RGb3VuZCwgc2VsZikuX19pbml0X18obXNnKVxyXG4gICAgICAgIHNlbGYub2lkID0gb2lkXHJcblxyXG5cclxuZGVmIF9yZWplY3RfZHVwbGljYXRlX2V4dGVuc2lvbihcclxuICAgIGV4dGVuc2lvbjogRXh0ZW5zaW9uW0V4dGVuc2lvblR5cGVdLFxyXG4gICAgZXh0ZW5zaW9uczogdHlwaW5nLkxpc3RbRXh0ZW5zaW9uW0V4dGVuc2lvblR5cGVdXSxcclxuKSAtPiBOb25lOlxyXG4gICAgIyBUaGlzIGlzIHF1YWRyYXRpYyBpbiB0aGUgbnVtYmVyIG9mIGV4dGVuc2lvbnNcclxuICAgIGZvciBlIGluIGV4dGVuc2lvbnM6XHJcbiAgICAgICAgaWYgZS5vaWQgPT0gZXh0ZW5zaW9uLm9pZDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhpcyBleHRlbnNpb24gaGFzIGFscmVhZHkgYmVlbiBzZXQuIilcclxuXHJcblxyXG5kZWYgX3JlamVjdF9kdXBsaWNhdGVfYXR0cmlidXRlKFxyXG4gICAgb2lkOiBPYmplY3RJZGVudGlmaWVyLFxyXG4gICAgYXR0cmlidXRlczogdHlwaW5nLkxpc3RbXHJcbiAgICAgICAgdHlwaW5nLlR1cGxlW09iamVjdElkZW50aWZpZXIsIGJ5dGVzLCB0eXBpbmcuT3B0aW9uYWxbaW50XV1cclxuICAgIF0sXHJcbikgLT4gTm9uZTpcclxuICAgICMgVGhpcyBpcyBxdWFkcmF0aWMgaW4gdGhlIG51bWJlciBvZiBhdHRyaWJ1dGVzXHJcbiAgICBmb3IgYXR0cl9vaWQsIF8sIF8gaW4gYXR0cmlidXRlczpcclxuICAgICAgICBpZiBhdHRyX29pZCA9PSBvaWQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoaXMgYXR0cmlidXRlIGhhcyBhbHJlYWR5IGJlZW4gc2V0LiIpXHJcblxyXG5cclxuZGVmIF9jb252ZXJ0X3RvX25haXZlX3V0Y190aW1lKHRpbWU6IGRhdGV0aW1lLmRhdGV0aW1lKSAtPiBkYXRldGltZS5kYXRldGltZTpcclxuICAgICIiIk5vcm1hbGl6ZXMgYSBkYXRldGltZSB0byBhIG5haXZlIGRhdGV0aW1lIGluIFVUQy5cclxuXHJcbiAgICB0aW1lIC0tIGRhdGV0aW1lIHRvIG5vcm1hbGl6ZS4gQXNzdW1lZCB0byBiZSBpbiBVVEMgaWYgbm90IHRpbWV6b25lXHJcbiAgICAgICAgICAgIGF3YXJlLlxyXG4gICAgIiIiXHJcbiAgICBpZiB0aW1lLnR6aW5mbyBpcyBub3QgTm9uZTpcclxuICAgICAgICBvZmZzZXQgPSB0aW1lLnV0Y29mZnNldCgpXHJcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0IGlmIG9mZnNldCBlbHNlIGRhdGV0aW1lLnRpbWVkZWx0YSgpXHJcbiAgICAgICAgcmV0dXJuIHRpbWUucmVwbGFjZSh0emluZm89Tm9uZSkgLSBvZmZzZXRcclxuICAgIGVsc2U6XHJcbiAgICAgICAgcmV0dXJuIHRpbWVcclxuXHJcblxyXG5jbGFzcyBBdHRyaWJ1dGU6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBvaWQ6IE9iamVjdElkZW50aWZpZXIsXHJcbiAgICAgICAgdmFsdWU6IGJ5dGVzLFxyXG4gICAgICAgIF90eXBlOiBpbnQgPSBfQVNOMVR5cGUuVVRGOFN0cmluZy52YWx1ZSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9vaWQgPSBvaWRcclxuICAgICAgICBzZWxmLl92YWx1ZSA9IHZhbHVlXHJcbiAgICAgICAgc2VsZi5fdHlwZSA9IF90eXBlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb2lkKHNlbGYpIC0+IE9iamVjdElkZW50aWZpZXI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29pZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHZhbHVlKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8QXR0cmlidXRlKG9pZD17fSwgdmFsdWU9eyFyfSk+Ii5mb3JtYXQoc2VsZi5vaWQsIHNlbGYudmFsdWUpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBBdHRyaWJ1dGUpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5vaWQgPT0gb3RoZXIub2lkXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLnZhbHVlID09IG90aGVyLnZhbHVlXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLl90eXBlID09IG90aGVyLl90eXBlXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYub2lkLCBzZWxmLnZhbHVlLCBzZWxmLl90eXBlKSlcclxuXHJcblxyXG5jbGFzcyBBdHRyaWJ1dGVzOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgYXR0cmlidXRlczogdHlwaW5nLkl0ZXJhYmxlW0F0dHJpYnV0ZV0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fYXR0cmlidXRlcyA9IGxpc3QoYXR0cmlidXRlcylcclxuXHJcbiAgICBfX2xlbl9fLCBfX2l0ZXJfXywgX19nZXRpdGVtX18gPSBfbWFrZV9zZXF1ZW5jZV9tZXRob2RzKCJfYXR0cmlidXRlcyIpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxBdHRyaWJ1dGVzKHt9KT4iLmZvcm1hdChzZWxmLl9hdHRyaWJ1dGVzKVxyXG5cclxuICAgIGRlZiBnZXRfYXR0cmlidXRlX2Zvcl9vaWQoc2VsZiwgb2lkOiBPYmplY3RJZGVudGlmaWVyKSAtPiBBdHRyaWJ1dGU6XHJcbiAgICAgICAgZm9yIGF0dHIgaW4gc2VsZjpcclxuICAgICAgICAgICAgaWYgYXR0ci5vaWQgPT0gb2lkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJcclxuXHJcbiAgICAgICAgcmFpc2UgQXR0cmlidXRlTm90Rm91bmQoIk5vIHt9IGF0dHJpYnV0ZSB3YXMgZm91bmQiLmZvcm1hdChvaWQpLCBvaWQpXHJcblxyXG5cclxuY2xhc3MgVmVyc2lvbih1dGlscy5FbnVtKTpcclxuICAgIHYxID0gMFxyXG4gICAgdjMgPSAyXHJcblxyXG5cclxuY2xhc3MgSW52YWxpZFZlcnNpb24oRXhjZXB0aW9uKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtc2c6IHN0ciwgcGFyc2VkX3ZlcnNpb246IGludCkgLT4gTm9uZTpcclxuICAgICAgICBzdXBlcihJbnZhbGlkVmVyc2lvbiwgc2VsZikuX19pbml0X18obXNnKVxyXG4gICAgICAgIHNlbGYucGFyc2VkX3ZlcnNpb24gPSBwYXJzZWRfdmVyc2lvblxyXG5cclxuXHJcbmNsYXNzIENlcnRpZmljYXRlKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZmluZ2VycHJpbnQoc2VsZiwgYWxnb3JpdGhtOiBoYXNoZXMuSGFzaEFsZ29yaXRobSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBieXRlcyB1c2luZyBkaWdlc3QgcGFzc2VkLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHNlcmlhbF9udW1iZXIoc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgY2VydGlmaWNhdGUgc2VyaWFsIG51bWJlclxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHZlcnNpb24oc2VsZikgLT4gVmVyc2lvbjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBjZXJ0aWZpY2F0ZSB2ZXJzaW9uXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gQ0VSVElGSUNBVEVfUFVCTElDX0tFWV9UWVBFUzpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBwdWJsaWMga2V5XHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgbm90X3ZhbGlkX2JlZm9yZShzZWxmKSAtPiBkYXRldGltZS5kYXRldGltZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBOb3QgYmVmb3JlIHRpbWUgKHJlcHJlc2VudGVkIGFzIFVUQyBkYXRldGltZSlcclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBub3RfdmFsaWRfYWZ0ZXIoc2VsZikgLT4gZGF0ZXRpbWUuZGF0ZXRpbWU6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgTm90IGFmdGVyIHRpbWUgKHJlcHJlc2VudGVkIGFzIFVUQyBkYXRldGltZSlcclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBpc3N1ZXIoc2VsZikgLT4gTmFtZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBpc3N1ZXIgbmFtZSBvYmplY3QuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgc3ViamVjdChzZWxmKSAtPiBOYW1lOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIHN1YmplY3QgbmFtZSBvYmplY3QuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgc2lnbmF0dXJlX2hhc2hfYWxnb3JpdGhtKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IHR5cGluZy5PcHRpb25hbFtoYXNoZXMuSGFzaEFsZ29yaXRobV06XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhIEhhc2hBbGdvcml0aG0gY29ycmVzcG9uZGluZyB0byB0aGUgdHlwZSBvZiB0aGUgZGlnZXN0IHNpZ25lZFxyXG4gICAgICAgIGluIHRoZSBjZXJ0aWZpY2F0ZS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBzaWduYXR1cmVfYWxnb3JpdGhtX29pZChzZWxmKSAtPiBPYmplY3RJZGVudGlmaWVyOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIE9iamVjdElkZW50aWZpZXIgb2YgdGhlIHNpZ25hdHVyZSBhbGdvcml0aG0uXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgZXh0ZW5zaW9ucyhzZWxmKSAtPiBFeHRlbnNpb25zOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYW4gRXh0ZW5zaW9ucyBvYmplY3QuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgc2lnbmF0dXJlKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIHNpZ25hdHVyZSBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiB0YnNfY2VydGlmaWNhdGVfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgdGJzQ2VydGlmaWNhdGUgcGF5bG9hZCBieXRlcyBhcyBkZWZpbmVkIGluIFJGQyA1MjgwLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBDaGVja3MgZXF1YWxpdHkuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBDb21wdXRlcyBhIGhhc2guXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmLCBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZykgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2VyaWFsaXplcyB0aGUgY2VydGlmaWNhdGUgdG8gUEVNIG9yIERFUiBmb3JtYXQuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuIyBSdW50aW1lIGlzaW5zdGFuY2UgY2hlY2tzIG5lZWQgdGhpcyBzaW5jZSB0aGUgcnVzdCBjbGFzcyBpcyBub3QgYSBzdWJjbGFzcy5cclxuQ2VydGlmaWNhdGUucmVnaXN0ZXIocnVzdF94NTA5LkNlcnRpZmljYXRlKVxyXG5cclxuXHJcbmNsYXNzIFJldm9rZWRDZXJ0aWZpY2F0ZShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgc2VyaWFsX251bWJlcihzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgc2VyaWFsIG51bWJlciBvZiB0aGUgcmV2b2tlZCBjZXJ0aWZpY2F0ZS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiByZXZvY2F0aW9uX2RhdGUoc2VsZikgLT4gZGF0ZXRpbWUuZGF0ZXRpbWU6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgZGF0ZSBvZiB3aGVuIHRoaXMgY2VydGlmaWNhdGUgd2FzIHJldm9rZWQuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgZXh0ZW5zaW9ucyhzZWxmKSAtPiBFeHRlbnNpb25zOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYW4gRXh0ZW5zaW9ucyBvYmplY3QgY29udGFpbmluZyBhIGxpc3Qgb2YgUmV2b2tlZCBleHRlbnNpb25zLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbiMgUnVudGltZSBpc2luc3RhbmNlIGNoZWNrcyBuZWVkIHRoaXMgc2luY2UgdGhlIHJ1c3QgY2xhc3MgaXMgbm90IGEgc3ViY2xhc3MuXHJcblJldm9rZWRDZXJ0aWZpY2F0ZS5yZWdpc3RlcihydXN0X3g1MDkuUmV2b2tlZENlcnRpZmljYXRlKVxyXG5cclxuXHJcbmNsYXNzIF9SYXdSZXZva2VkQ2VydGlmaWNhdGUoUmV2b2tlZENlcnRpZmljYXRlKTpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHNlcmlhbF9udW1iZXI6IGludCxcclxuICAgICAgICByZXZvY2F0aW9uX2RhdGU6IGRhdGV0aW1lLmRhdGV0aW1lLFxyXG4gICAgICAgIGV4dGVuc2lvbnM6IEV4dGVuc2lvbnMsXHJcbiAgICApOlxyXG4gICAgICAgIHNlbGYuX3NlcmlhbF9udW1iZXIgPSBzZXJpYWxfbnVtYmVyXHJcbiAgICAgICAgc2VsZi5fcmV2b2NhdGlvbl9kYXRlID0gcmV2b2NhdGlvbl9kYXRlXHJcbiAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnNcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBzZXJpYWxfbnVtYmVyKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fc2VyaWFsX251bWJlclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJldm9jYXRpb25fZGF0ZShzZWxmKSAtPiBkYXRldGltZS5kYXRldGltZTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcmV2b2NhdGlvbl9kYXRlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZXh0ZW5zaW9ucyhzZWxmKSAtPiBFeHRlbnNpb25zOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9leHRlbnNpb25zXHJcblxyXG5cclxuY2xhc3MgQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdChtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmLCBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZykgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2VyaWFsaXplcyB0aGUgQ1JMIHRvIFBFTSBvciBERVIgZm9ybWF0LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBmaW5nZXJwcmludChzZWxmLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIGJ5dGVzIHVzaW5nIGRpZ2VzdCBwYXNzZWQuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGdldF9yZXZva2VkX2NlcnRpZmljYXRlX2J5X3NlcmlhbF9udW1iZXIoXHJcbiAgICAgICAgc2VsZiwgc2VyaWFsX251bWJlcjogaW50XHJcbiAgICApIC0+IHR5cGluZy5PcHRpb25hbFtSZXZva2VkQ2VydGlmaWNhdGVdOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYW4gaW5zdGFuY2Ugb2YgUmV2b2tlZENlcnRpZmljYXRlIG9yIE5vbmUgaWYgdGhlIHNlcmlhbF9udW1iZXJcclxuICAgICAgICBpcyBub3QgaW4gdGhlIENSTC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBzaWduYXR1cmVfaGFzaF9hbGdvcml0aG0oXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gdHlwaW5nLk9wdGlvbmFsW2hhc2hlcy5IYXNoQWxnb3JpdGhtXTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIGEgSGFzaEFsZ29yaXRobSBjb3JyZXNwb25kaW5nIHRvIHRoZSB0eXBlIG9mIHRoZSBkaWdlc3Qgc2lnbmVkXHJcbiAgICAgICAgaW4gdGhlIGNlcnRpZmljYXRlLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHNpZ25hdHVyZV9hbGdvcml0aG1fb2lkKHNlbGYpIC0+IE9iamVjdElkZW50aWZpZXI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgT2JqZWN0SWRlbnRpZmllciBvZiB0aGUgc2lnbmF0dXJlIGFsZ29yaXRobS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBpc3N1ZXIoc2VsZikgLT4gTmFtZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBYNTA5TmFtZSB3aXRoIHRoZSBpc3N1ZXIgb2YgdGhpcyBDUkwuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgbmV4dF91cGRhdGUoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBkYXRlIG9mIG5leHQgdXBkYXRlIGZvciB0aGlzIENSTC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBsYXN0X3VwZGF0ZShzZWxmKSAtPiBkYXRldGltZS5kYXRldGltZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBkYXRlIG9mIGxhc3QgdXBkYXRlIGZvciB0aGlzIENSTC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBleHRlbnNpb25zKHNlbGYpIC0+IEV4dGVuc2lvbnM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyBhbiBFeHRlbnNpb25zIG9iamVjdCBjb250YWluaW5nIGEgbGlzdCBvZiBDUkwgZXh0ZW5zaW9ucy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBzaWduYXR1cmUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgc2lnbmF0dXJlIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHRic19jZXJ0bGlzdF9ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSB0YnNDZXJ0TGlzdCBwYXlsb2FkIGJ5dGVzIGFzIGRlZmluZWQgaW4gUkZDIDUyODAuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIENoZWNrcyBlcXVhbGl0eS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgTnVtYmVyIG9mIHJldm9rZWQgY2VydGlmaWNhdGVzIGluIHRoZSBDUkwuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGlkeDogaW50KSAtPiBSZXZva2VkQ2VydGlmaWNhdGU6XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIF9fZ2V0aXRlbV9fKHNlbGYsIGlkeDogc2xpY2UpIC0+IHR5cGluZy5MaXN0W1Jldm9rZWRDZXJ0aWZpY2F0ZV06XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIF9fZ2V0aXRlbV9fKFxyXG4gICAgICAgIHNlbGYsIGlkeDogdHlwaW5nLlVuaW9uW2ludCwgc2xpY2VdXHJcbiAgICApIC0+IHR5cGluZy5VbmlvbltSZXZva2VkQ2VydGlmaWNhdGUsIHR5cGluZy5MaXN0W1Jldm9rZWRDZXJ0aWZpY2F0ZV1dOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYSByZXZva2VkIGNlcnRpZmljYXRlIChvciBzbGljZSBvZiByZXZva2VkIGNlcnRpZmljYXRlcykuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpIC0+IHR5cGluZy5JdGVyYXRvcltSZXZva2VkQ2VydGlmaWNhdGVdOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEl0ZXJhdG9yIG92ZXIgdGhlIHJldm9rZWQgY2VydGlmaWNhdGVzXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGlzX3NpZ25hdHVyZV92YWxpZChcclxuICAgICAgICBzZWxmLCBwdWJsaWNfa2V5OiBDRVJUSUZJQ0FURV9JU1NVRVJfUFVCTElDX0tFWV9UWVBFU1xyXG4gICAgKSAtPiBib29sOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFZlcmlmaWVzIHNpZ25hdHVyZSBvZiByZXZvY2F0aW9uIGxpc3QgYWdhaW5zdCBnaXZlbiBwdWJsaWMga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbkNlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3QucmVnaXN0ZXIocnVzdF94NTA5LkNlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3QpXHJcblxyXG5cclxuY2xhc3MgQ2VydGlmaWNhdGVTaWduaW5nUmVxdWVzdChtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIENoZWNrcyBlcXVhbGl0eS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIENvbXB1dGVzIGEgaGFzaC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiBDRVJUSUZJQ0FURV9QVUJMSUNfS0VZX1RZUEVTOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIHB1YmxpYyBrZXlcclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBzdWJqZWN0KHNlbGYpIC0+IE5hbWU6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgc3ViamVjdCBuYW1lIG9iamVjdC5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBzaWduYXR1cmVfaGFzaF9hbGdvcml0aG0oXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gdHlwaW5nLk9wdGlvbmFsW2hhc2hlcy5IYXNoQWxnb3JpdGhtXTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIGEgSGFzaEFsZ29yaXRobSBjb3JyZXNwb25kaW5nIHRvIHRoZSB0eXBlIG9mIHRoZSBkaWdlc3Qgc2lnbmVkXHJcbiAgICAgICAgaW4gdGhlIGNlcnRpZmljYXRlLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHNpZ25hdHVyZV9hbGdvcml0aG1fb2lkKHNlbGYpIC0+IE9iamVjdElkZW50aWZpZXI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgT2JqZWN0SWRlbnRpZmllciBvZiB0aGUgc2lnbmF0dXJlIGFsZ29yaXRobS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBleHRlbnNpb25zKHNlbGYpIC0+IEV4dGVuc2lvbnM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgZXh0ZW5zaW9ucyBpbiB0aGUgc2lnbmluZyByZXF1ZXN0LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGF0dHJpYnV0ZXMoc2VsZikgLT4gQXR0cmlidXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIGFuIEF0dHJpYnV0ZXMgb2JqZWN0LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZiwgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEVuY29kZXMgdGhlIHJlcXVlc3QgdG8gUEVNIG9yIERFUiBmb3JtYXQuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgc2lnbmF0dXJlKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIHNpZ25hdHVyZSBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiB0YnNfY2VydHJlcXVlc3RfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgUEtDUyMxMCBDZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8gYnl0ZXMgYXMgZGVmaW5lZCBpbiBSRkNcclxuICAgICAgICAyOTg2LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGlzX3NpZ25hdHVyZV92YWxpZChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFZlcmlmaWVzIHNpZ25hdHVyZSBvZiBzaWduaW5nIHJlcXVlc3QuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGdldF9hdHRyaWJ1dGVfZm9yX29pZChzZWxmLCBvaWQ6IE9iamVjdElkZW50aWZpZXIpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEdldCB0aGUgYXR0cmlidXRlIHZhbHVlIGZvciBhIGdpdmVuIE9JRC5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG4jIFJ1bnRpbWUgaXNpbnN0YW5jZSBjaGVja3MgbmVlZCB0aGlzIHNpbmNlIHRoZSBydXN0IGNsYXNzIGlzIG5vdCBhIHN1YmNsYXNzLlxyXG5DZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0LnJlZ2lzdGVyKHJ1c3RfeDUwOS5DZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0KVxyXG5cclxuXHJcbiMgQmFja2VuZCBhcmd1bWVudCBwcmVzZXJ2ZWQgZm9yIEFQSSBjb21wYXRpYmlsaXR5LCBidXQgaWdub3JlZC5cclxuZGVmIGxvYWRfcGVtX3g1MDlfY2VydGlmaWNhdGUoXHJcbiAgICBkYXRhOiBieXRlcywgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuKSAtPiBDZXJ0aWZpY2F0ZTpcclxuICAgIHJldHVybiBydXN0X3g1MDkubG9hZF9wZW1feDUwOV9jZXJ0aWZpY2F0ZShkYXRhKVxyXG5cclxuXHJcbiMgQmFja2VuZCBhcmd1bWVudCBwcmVzZXJ2ZWQgZm9yIEFQSSBjb21wYXRpYmlsaXR5LCBidXQgaWdub3JlZC5cclxuZGVmIGxvYWRfZGVyX3g1MDlfY2VydGlmaWNhdGUoXHJcbiAgICBkYXRhOiBieXRlcywgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuKSAtPiBDZXJ0aWZpY2F0ZTpcclxuICAgIHJldHVybiBydXN0X3g1MDkubG9hZF9kZXJfeDUwOV9jZXJ0aWZpY2F0ZShkYXRhKVxyXG5cclxuXHJcbiMgQmFja2VuZCBhcmd1bWVudCBwcmVzZXJ2ZWQgZm9yIEFQSSBjb21wYXRpYmlsaXR5LCBidXQgaWdub3JlZC5cclxuZGVmIGxvYWRfcGVtX3g1MDlfY3NyKFxyXG4gICAgZGF0YTogYnl0ZXMsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lXHJcbikgLT4gQ2VydGlmaWNhdGVTaWduaW5nUmVxdWVzdDpcclxuICAgIHJldHVybiBydXN0X3g1MDkubG9hZF9wZW1feDUwOV9jc3IoZGF0YSlcclxuXHJcblxyXG4jIEJhY2tlbmQgYXJndW1lbnQgcHJlc2VydmVkIGZvciBBUEkgY29tcGF0aWJpbGl0eSwgYnV0IGlnbm9yZWQuXHJcbmRlZiBsb2FkX2Rlcl94NTA5X2NzcihcclxuICAgIGRhdGE6IGJ5dGVzLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZVxyXG4pIC0+IENlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3Q6XHJcbiAgICByZXR1cm4gcnVzdF94NTA5LmxvYWRfZGVyX3g1MDlfY3NyKGRhdGEpXHJcblxyXG5cclxuIyBCYWNrZW5kIGFyZ3VtZW50IHByZXNlcnZlZCBmb3IgQVBJIGNvbXBhdGliaWxpdHksIGJ1dCBpZ25vcmVkLlxyXG5kZWYgbG9hZF9wZW1feDUwOV9jcmwoXHJcbiAgICBkYXRhOiBieXRlcywgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuKSAtPiBDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0OlxyXG4gICAgcmV0dXJuIHJ1c3RfeDUwOS5sb2FkX3BlbV94NTA5X2NybChkYXRhKVxyXG5cclxuXHJcbiMgQmFja2VuZCBhcmd1bWVudCBwcmVzZXJ2ZWQgZm9yIEFQSSBjb21wYXRpYmlsaXR5LCBidXQgaWdub3JlZC5cclxuZGVmIGxvYWRfZGVyX3g1MDlfY3JsKFxyXG4gICAgZGF0YTogYnl0ZXMsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lXHJcbikgLT4gQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdDpcclxuICAgIHJldHVybiBydXN0X3g1MDkubG9hZF9kZXJfeDUwOV9jcmwoZGF0YSlcclxuXHJcblxyXG5jbGFzcyBDZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0QnVpbGRlcjpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHN1YmplY3RfbmFtZTogdHlwaW5nLk9wdGlvbmFsW05hbWVdID0gTm9uZSxcclxuICAgICAgICBleHRlbnNpb25zOiB0eXBpbmcuTGlzdFtFeHRlbnNpb25bRXh0ZW5zaW9uVHlwZV1dID0gW10sXHJcbiAgICAgICAgYXR0cmlidXRlczogdHlwaW5nLkxpc3RbXHJcbiAgICAgICAgICAgIHR5cGluZy5UdXBsZVtPYmplY3RJZGVudGlmaWVyLCBieXRlcywgdHlwaW5nLk9wdGlvbmFsW2ludF1dXHJcbiAgICAgICAgXSA9IFtdLFxyXG4gICAgKTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBDcmVhdGVzIGFuIGVtcHR5IFguNTA5IGNlcnRpZmljYXRlIHJlcXVlc3QgKHYxKS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBzZWxmLl9zdWJqZWN0X25hbWUgPSBzdWJqZWN0X25hbWVcclxuICAgICAgICBzZWxmLl9leHRlbnNpb25zID0gZXh0ZW5zaW9uc1xyXG4gICAgICAgIHNlbGYuX2F0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzXHJcblxyXG4gICAgZGVmIHN1YmplY3RfbmFtZShzZWxmLCBuYW1lOiBOYW1lKSAtPiAiQ2VydGlmaWNhdGVTaWduaW5nUmVxdWVzdEJ1aWxkZXIiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNldHMgdGhlIGNlcnRpZmljYXRlIHJlcXVlc3RvclwncyBkaXN0aW5ndWlzaGVkIG5hbWUuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UobmFtZSwgTmFtZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiRXhwZWN0aW5nIHg1MDkuTmFtZSBvYmplY3QuIilcclxuICAgICAgICBpZiBzZWxmLl9zdWJqZWN0X25hbWUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoZSBzdWJqZWN0IG5hbWUgbWF5IG9ubHkgYmUgc2V0IG9uY2UuIilcclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVTaWduaW5nUmVxdWVzdEJ1aWxkZXIoXHJcbiAgICAgICAgICAgIG5hbWUsIHNlbGYuX2V4dGVuc2lvbnMsIHNlbGYuX2F0dHJpYnV0ZXNcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGFkZF9leHRlbnNpb24oXHJcbiAgICAgICAgc2VsZiwgZXh0dmFsOiBFeHRlbnNpb25UeXBlLCBjcml0aWNhbDogYm9vbFxyXG4gICAgKSAtPiAiQ2VydGlmaWNhdGVTaWduaW5nUmVxdWVzdEJ1aWxkZXIiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEFkZHMgYW4gWC41MDkgZXh0ZW5zaW9uIHRvIHRoZSBjZXJ0aWZpY2F0ZSByZXF1ZXN0LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGV4dHZhbCwgRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXh0ZW5zaW9uIG11c3QgYmUgYW4gRXh0ZW5zaW9uVHlwZSIpXHJcblxyXG4gICAgICAgIGV4dGVuc2lvbiA9IEV4dGVuc2lvbihleHR2YWwub2lkLCBjcml0aWNhbCwgZXh0dmFsKVxyXG4gICAgICAgIF9yZWplY3RfZHVwbGljYXRlX2V4dGVuc2lvbihleHRlbnNpb24sIHNlbGYuX2V4dGVuc2lvbnMpXHJcblxyXG4gICAgICAgIHJldHVybiBDZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0QnVpbGRlcihcclxuICAgICAgICAgICAgc2VsZi5fc3ViamVjdF9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9leHRlbnNpb25zICsgW2V4dGVuc2lvbl0sXHJcbiAgICAgICAgICAgIHNlbGYuX2F0dHJpYnV0ZXMsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBhZGRfYXR0cmlidXRlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgb2lkOiBPYmplY3RJZGVudGlmaWVyLFxyXG4gICAgICAgIHZhbHVlOiBieXRlcyxcclxuICAgICAgICAqLFxyXG4gICAgICAgIF90YWc6IHR5cGluZy5PcHRpb25hbFtfQVNOMVR5cGVdID0gTm9uZSxcclxuICAgICkgLT4gIkNlcnRpZmljYXRlU2lnbmluZ1JlcXVlc3RCdWlsZGVyIjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBBZGRzIGFuIFguNTA5IGF0dHJpYnV0ZSB3aXRoIGFuIE9JRCBhbmQgYXNzb2NpYXRlZCB2YWx1ZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvaWQsIE9iamVjdElkZW50aWZpZXIpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIm9pZCBtdXN0IGJlIGFuIE9iamVjdElkZW50aWZpZXIiKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh2YWx1ZSwgYnl0ZXMpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInZhbHVlIG11c3QgYmUgYnl0ZXMiKVxyXG5cclxuICAgICAgICBpZiBfdGFnIGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShfdGFnLCBfQVNOMVR5cGUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInRhZyBtdXN0IGJlIF9BU04xVHlwZSIpXHJcblxyXG4gICAgICAgIF9yZWplY3RfZHVwbGljYXRlX2F0dHJpYnV0ZShvaWQsIHNlbGYuX2F0dHJpYnV0ZXMpXHJcblxyXG4gICAgICAgIGlmIF90YWcgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHRhZyA9IF90YWcudmFsdWVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICB0YWcgPSBOb25lXHJcblxyXG4gICAgICAgIHJldHVybiBDZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0QnVpbGRlcihcclxuICAgICAgICAgICAgc2VsZi5fc3ViamVjdF9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9leHRlbnNpb25zLFxyXG4gICAgICAgICAgICBzZWxmLl9hdHRyaWJ1dGVzICsgWyhvaWQsIHZhbHVlLCB0YWcpXSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHNpZ24oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBwcml2YXRlX2tleTogQ0VSVElGSUNBVEVfUFJJVkFURV9LRVlfVFlQRVMsXHJcbiAgICAgICAgYWxnb3JpdGhtOiB0eXBpbmcuT3B0aW9uYWxbaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4gICAgICAgIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lLFxyXG4gICAgKSAtPiBDZXJ0aWZpY2F0ZVNpZ25pbmdSZXF1ZXN0OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNpZ25zIHRoZSByZXF1ZXN0IHVzaW5nIHRoZSByZXF1ZXN0b3JcJ3MgcHJpdmF0ZSBrZXkuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgc2VsZi5fc3ViamVjdF9uYW1lIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkEgQ2VydGlmaWNhdGVTaWduaW5nUmVxdWVzdCBtdXN0IGhhdmUgYSBzdWJqZWN0IilcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmNyZWF0ZV94NTA5X2NzcihzZWxmLCBwcml2YXRlX2tleSwgYWxnb3JpdGhtKVxyXG5cclxuXHJcbmNsYXNzIENlcnRpZmljYXRlQnVpbGRlcjpcclxuICAgIF9leHRlbnNpb25zOiB0eXBpbmcuTGlzdFtFeHRlbnNpb25bRXh0ZW5zaW9uVHlwZV1dXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgaXNzdWVyX25hbWU6IHR5cGluZy5PcHRpb25hbFtOYW1lXSA9IE5vbmUsXHJcbiAgICAgICAgc3ViamVjdF9uYW1lOiB0eXBpbmcuT3B0aW9uYWxbTmFtZV0gPSBOb25lLFxyXG4gICAgICAgIHB1YmxpY19rZXk6IHR5cGluZy5PcHRpb25hbFtDRVJUSUZJQ0FURV9QVUJMSUNfS0VZX1RZUEVTXSA9IE5vbmUsXHJcbiAgICAgICAgc2VyaWFsX251bWJlcjogdHlwaW5nLk9wdGlvbmFsW2ludF0gPSBOb25lLFxyXG4gICAgICAgIG5vdF92YWxpZF9iZWZvcmU6IHR5cGluZy5PcHRpb25hbFtkYXRldGltZS5kYXRldGltZV0gPSBOb25lLFxyXG4gICAgICAgIG5vdF92YWxpZF9hZnRlcjogdHlwaW5nLk9wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXSA9IE5vbmUsXHJcbiAgICAgICAgZXh0ZW5zaW9uczogdHlwaW5nLkxpc3RbRXh0ZW5zaW9uW0V4dGVuc2lvblR5cGVdXSA9IFtdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX3ZlcnNpb24gPSBWZXJzaW9uLnYzXHJcbiAgICAgICAgc2VsZi5faXNzdWVyX25hbWUgPSBpc3N1ZXJfbmFtZVxyXG4gICAgICAgIHNlbGYuX3N1YmplY3RfbmFtZSA9IHN1YmplY3RfbmFtZVxyXG4gICAgICAgIHNlbGYuX3B1YmxpY19rZXkgPSBwdWJsaWNfa2V5XHJcbiAgICAgICAgc2VsZi5fc2VyaWFsX251bWJlciA9IHNlcmlhbF9udW1iZXJcclxuICAgICAgICBzZWxmLl9ub3RfdmFsaWRfYmVmb3JlID0gbm90X3ZhbGlkX2JlZm9yZVxyXG4gICAgICAgIHNlbGYuX25vdF92YWxpZF9hZnRlciA9IG5vdF92YWxpZF9hZnRlclxyXG4gICAgICAgIHNlbGYuX2V4dGVuc2lvbnMgPSBleHRlbnNpb25zXHJcblxyXG4gICAgZGVmIGlzc3Vlcl9uYW1lKHNlbGYsIG5hbWU6IE5hbWUpIC0+ICJDZXJ0aWZpY2F0ZUJ1aWxkZXIiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNldHMgdGhlIENBXCdzIGRpc3Rpbmd1aXNoZWQgbmFtZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShuYW1lLCBOYW1lKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJFeHBlY3RpbmcgeDUwOS5OYW1lIG9iamVjdC4iKVxyXG4gICAgICAgIGlmIHNlbGYuX2lzc3Vlcl9uYW1lIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGUgaXNzdWVyIG5hbWUgbWF5IG9ubHkgYmUgc2V0IG9uY2UuIilcclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVCdWlsZGVyKFxyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9zdWJqZWN0X25hbWUsXHJcbiAgICAgICAgICAgIHNlbGYuX3B1YmxpY19rZXksXHJcbiAgICAgICAgICAgIHNlbGYuX3NlcmlhbF9udW1iZXIsXHJcbiAgICAgICAgICAgIHNlbGYuX25vdF92YWxpZF9iZWZvcmUsXHJcbiAgICAgICAgICAgIHNlbGYuX25vdF92YWxpZF9hZnRlcixcclxuICAgICAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHN1YmplY3RfbmFtZShzZWxmLCBuYW1lOiBOYW1lKSAtPiAiQ2VydGlmaWNhdGVCdWlsZGVyIjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBTZXRzIHRoZSByZXF1ZXN0b3JcJ3MgZGlzdGluZ3Vpc2hlZCBuYW1lLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG5hbWUsIE5hbWUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkV4cGVjdGluZyB4NTA5Lk5hbWUgb2JqZWN0LiIpXHJcbiAgICAgICAgaWYgc2VsZi5fc3ViamVjdF9uYW1lIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGUgc3ViamVjdCBuYW1lIG1heSBvbmx5IGJlIHNldCBvbmNlLiIpXHJcbiAgICAgICAgcmV0dXJuIENlcnRpZmljYXRlQnVpbGRlcihcclxuICAgICAgICAgICAgc2VsZi5faXNzdWVyX25hbWUsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIHNlbGYuX3B1YmxpY19rZXksXHJcbiAgICAgICAgICAgIHNlbGYuX3NlcmlhbF9udW1iZXIsXHJcbiAgICAgICAgICAgIHNlbGYuX25vdF92YWxpZF9iZWZvcmUsXHJcbiAgICAgICAgICAgIHNlbGYuX25vdF92YWxpZF9hZnRlcixcclxuICAgICAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHB1YmxpY19rZXkoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBrZXk6IENFUlRJRklDQVRFX1BVQkxJQ19LRVlfVFlQRVMsXHJcbiAgICApIC0+ICJDZXJ0aWZpY2F0ZUJ1aWxkZXIiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNldHMgdGhlIHJlcXVlc3RvclwncyBwdWJsaWMga2V5IChhcyBmb3VuZCBpbiB0aGUgc2lnbmluZyByZXF1ZXN0KS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICBkc2EuRFNBUHVibGljS2V5LFxyXG4gICAgICAgICAgICAgICAgcnNhLlJTQVB1YmxpY0tleSxcclxuICAgICAgICAgICAgICAgIGVjLkVsbGlwdGljQ3VydmVQdWJsaWNLZXksXHJcbiAgICAgICAgICAgICAgICBlZDI1NTE5LkVkMjU1MTlQdWJsaWNLZXksXHJcbiAgICAgICAgICAgICAgICBlZDQ0OC5FZDQ0OFB1YmxpY0tleSxcclxuICAgICAgICAgICAgICAgIHgyNTUxOS5YMjU1MTlQdWJsaWNLZXksXHJcbiAgICAgICAgICAgICAgICB4NDQ4Llg0NDhQdWJsaWNLZXksXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkV4cGVjdGluZyBvbmUgb2YgRFNBUHVibGljS2V5LCBSU0FQdWJsaWNLZXksIlxyXG4gICAgICAgICAgICAgICAgIiBFbGxpcHRpY0N1cnZlUHVibGljS2V5LCBFZDI1NTE5UHVibGljS2V5LCJcclxuICAgICAgICAgICAgICAgICIgRWQ0NDhQdWJsaWNLZXksIFgyNTUxOVB1YmxpY0tleSwgb3IgIlxyXG4gICAgICAgICAgICAgICAgIlg0NDhQdWJsaWNLZXkuIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYgc2VsZi5fcHVibGljX2tleSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhlIHB1YmxpYyBrZXkgbWF5IG9ubHkgYmUgc2V0IG9uY2UuIilcclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVCdWlsZGVyKFxyXG4gICAgICAgICAgICBzZWxmLl9pc3N1ZXJfbmFtZSxcclxuICAgICAgICAgICAgc2VsZi5fc3ViamVjdF9uYW1lLFxyXG4gICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgIHNlbGYuX3NlcmlhbF9udW1iZXIsXHJcbiAgICAgICAgICAgIHNlbGYuX25vdF92YWxpZF9iZWZvcmUsXHJcbiAgICAgICAgICAgIHNlbGYuX25vdF92YWxpZF9hZnRlcixcclxuICAgICAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHNlcmlhbF9udW1iZXIoc2VsZiwgbnVtYmVyOiBpbnQpIC0+ICJDZXJ0aWZpY2F0ZUJ1aWxkZXIiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNldHMgdGhlIGNlcnRpZmljYXRlIHNlcmlhbCBudW1iZXIuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UobnVtYmVyLCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlNlcmlhbCBudW1iZXIgbXVzdCBiZSBvZiBpbnRlZ3JhbCB0eXBlLiIpXHJcbiAgICAgICAgaWYgc2VsZi5fc2VyaWFsX251bWJlciBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhlIHNlcmlhbCBudW1iZXIgbWF5IG9ubHkgYmUgc2V0IG9uY2UuIilcclxuICAgICAgICBpZiBudW1iZXIgPD0gMDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhlIHNlcmlhbCBudW1iZXIgc2hvdWxkIGJlIHBvc2l0aXZlLiIpXHJcblxyXG4gICAgICAgICMgQVNOLjEgaW50ZWdlcnMgYXJlIGFsd2F5cyBzaWduZWQsIHNvIG1vc3Qgc2lnbmlmaWNhbnQgYml0IG11c3QgYmVcclxuICAgICAgICAjIHplcm8uXHJcbiAgICAgICAgaWYgbnVtYmVyLmJpdF9sZW5ndGgoKSA+PSAxNjA6ICAjIEFzIGRlZmluZWQgaW4gUkZDIDUyODBcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJUaGUgc2VyaWFsIG51bWJlciBzaG91bGQgbm90IGJlIG1vcmUgdGhhbiAxNTkgIiAiYml0cy4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVCdWlsZGVyKFxyXG4gICAgICAgICAgICBzZWxmLl9pc3N1ZXJfbmFtZSxcclxuICAgICAgICAgICAgc2VsZi5fc3ViamVjdF9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9wdWJsaWNfa2V5LFxyXG4gICAgICAgICAgICBudW1iZXIsXHJcbiAgICAgICAgICAgIHNlbGYuX25vdF92YWxpZF9iZWZvcmUsXHJcbiAgICAgICAgICAgIHNlbGYuX25vdF92YWxpZF9hZnRlcixcclxuICAgICAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIG5vdF92YWxpZF9iZWZvcmUoXHJcbiAgICAgICAgc2VsZiwgdGltZTogZGF0ZXRpbWUuZGF0ZXRpbWVcclxuICAgICkgLT4gIkNlcnRpZmljYXRlQnVpbGRlciI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2V0cyB0aGUgY2VydGlmaWNhdGUgYWN0aXZhdGlvbiB0aW1lLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHRpbWUsIGRhdGV0aW1lLmRhdGV0aW1lKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJFeHBlY3RpbmcgZGF0ZXRpbWUgb2JqZWN0LiIpXHJcbiAgICAgICAgaWYgc2VsZi5fbm90X3ZhbGlkX2JlZm9yZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhlIG5vdCB2YWxpZCBiZWZvcmUgbWF5IG9ubHkgYmUgc2V0IG9uY2UuIilcclxuICAgICAgICB0aW1lID0gX2NvbnZlcnRfdG9fbmFpdmVfdXRjX3RpbWUodGltZSlcclxuICAgICAgICBpZiB0aW1lIDwgX0VBUkxJRVNUX1VUQ19USU1FOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBub3QgdmFsaWQgYmVmb3JlIGRhdGUgbXVzdCBiZSBvbiBvciBhZnRlciJcclxuICAgICAgICAgICAgICAgICIgMTk1MCBKYW51YXJ5IDEpLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGlmIHNlbGYuX25vdF92YWxpZF9hZnRlciBpcyBub3QgTm9uZSBhbmQgdGltZSA+IHNlbGYuX25vdF92YWxpZF9hZnRlcjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJUaGUgbm90IHZhbGlkIGJlZm9yZSBkYXRlIG11c3QgYmUgYmVmb3JlIHRoZSBub3QgdmFsaWQgYWZ0ZXIgIlxyXG4gICAgICAgICAgICAgICAgImRhdGUuIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIENlcnRpZmljYXRlQnVpbGRlcihcclxuICAgICAgICAgICAgc2VsZi5faXNzdWVyX25hbWUsXHJcbiAgICAgICAgICAgIHNlbGYuX3N1YmplY3RfbmFtZSxcclxuICAgICAgICAgICAgc2VsZi5fcHVibGljX2tleSxcclxuICAgICAgICAgICAgc2VsZi5fc2VyaWFsX251bWJlcixcclxuICAgICAgICAgICAgdGltZSxcclxuICAgICAgICAgICAgc2VsZi5fbm90X3ZhbGlkX2FmdGVyLFxyXG4gICAgICAgICAgICBzZWxmLl9leHRlbnNpb25zLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgbm90X3ZhbGlkX2FmdGVyKHNlbGYsIHRpbWU6IGRhdGV0aW1lLmRhdGV0aW1lKSAtPiAiQ2VydGlmaWNhdGVCdWlsZGVyIjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBTZXRzIHRoZSBjZXJ0aWZpY2F0ZSBleHBpcmF0aW9uIHRpbWUuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodGltZSwgZGF0ZXRpbWUuZGF0ZXRpbWUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkV4cGVjdGluZyBkYXRldGltZSBvYmplY3QuIilcclxuICAgICAgICBpZiBzZWxmLl9ub3RfdmFsaWRfYWZ0ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoZSBub3QgdmFsaWQgYWZ0ZXIgbWF5IG9ubHkgYmUgc2V0IG9uY2UuIilcclxuICAgICAgICB0aW1lID0gX2NvbnZlcnRfdG9fbmFpdmVfdXRjX3RpbWUodGltZSlcclxuICAgICAgICBpZiB0aW1lIDwgX0VBUkxJRVNUX1VUQ19USU1FOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBub3QgdmFsaWQgYWZ0ZXIgZGF0ZSBtdXN0IGJlIG9uIG9yIGFmdGVyIlxyXG4gICAgICAgICAgICAgICAgIiAxOTUwIEphbnVhcnkgMS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHNlbGYuX25vdF92YWxpZF9iZWZvcmUgaXMgbm90IE5vbmVcclxuICAgICAgICAgICAgYW5kIHRpbWUgPCBzZWxmLl9ub3RfdmFsaWRfYmVmb3JlXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJUaGUgbm90IHZhbGlkIGFmdGVyIGRhdGUgbXVzdCBiZSBhZnRlciB0aGUgbm90IHZhbGlkIGJlZm9yZSAiXHJcbiAgICAgICAgICAgICAgICAiZGF0ZS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVCdWlsZGVyKFxyXG4gICAgICAgICAgICBzZWxmLl9pc3N1ZXJfbmFtZSxcclxuICAgICAgICAgICAgc2VsZi5fc3ViamVjdF9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9wdWJsaWNfa2V5LFxyXG4gICAgICAgICAgICBzZWxmLl9zZXJpYWxfbnVtYmVyLFxyXG4gICAgICAgICAgICBzZWxmLl9ub3RfdmFsaWRfYmVmb3JlLFxyXG4gICAgICAgICAgICB0aW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9leHRlbnNpb25zLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgYWRkX2V4dGVuc2lvbihcclxuICAgICAgICBzZWxmLCBleHR2YWw6IEV4dGVuc2lvblR5cGUsIGNyaXRpY2FsOiBib29sXHJcbiAgICApIC0+ICJDZXJ0aWZpY2F0ZUJ1aWxkZXIiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEFkZHMgYW4gWC41MDkgZXh0ZW5zaW9uIHRvIHRoZSBjZXJ0aWZpY2F0ZS5cclxuICAgICAgICAiIiJcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShleHR2YWwsIEV4dGVuc2lvblR5cGUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImV4dGVuc2lvbiBtdXN0IGJlIGFuIEV4dGVuc2lvblR5cGUiKVxyXG5cclxuICAgICAgICBleHRlbnNpb24gPSBFeHRlbnNpb24oZXh0dmFsLm9pZCwgY3JpdGljYWwsIGV4dHZhbClcclxuICAgICAgICBfcmVqZWN0X2R1cGxpY2F0ZV9leHRlbnNpb24oZXh0ZW5zaW9uLCBzZWxmLl9leHRlbnNpb25zKVxyXG5cclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVCdWlsZGVyKFxyXG4gICAgICAgICAgICBzZWxmLl9pc3N1ZXJfbmFtZSxcclxuICAgICAgICAgICAgc2VsZi5fc3ViamVjdF9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9wdWJsaWNfa2V5LFxyXG4gICAgICAgICAgICBzZWxmLl9zZXJpYWxfbnVtYmVyLFxyXG4gICAgICAgICAgICBzZWxmLl9ub3RfdmFsaWRfYmVmb3JlLFxyXG4gICAgICAgICAgICBzZWxmLl9ub3RfdmFsaWRfYWZ0ZXIsXHJcbiAgICAgICAgICAgIHNlbGYuX2V4dGVuc2lvbnMgKyBbZXh0ZW5zaW9uXSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHNpZ24oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBwcml2YXRlX2tleTogQ0VSVElGSUNBVEVfUFJJVkFURV9LRVlfVFlQRVMsXHJcbiAgICAgICAgYWxnb3JpdGhtOiB0eXBpbmcuT3B0aW9uYWxbaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4gICAgICAgIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lLFxyXG4gICAgKSAtPiBDZXJ0aWZpY2F0ZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBTaWducyB0aGUgY2VydGlmaWNhdGUgdXNpbmcgdGhlIENBXCdzIHByaXZhdGUga2V5LlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIHNlbGYuX3N1YmplY3RfbmFtZSBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBIGNlcnRpZmljYXRlIG11c3QgaGF2ZSBhIHN1YmplY3QgbmFtZSIpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX2lzc3Vlcl9uYW1lIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkEgY2VydGlmaWNhdGUgbXVzdCBoYXZlIGFuIGlzc3VlciBuYW1lIilcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fc2VyaWFsX251bWJlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBIGNlcnRpZmljYXRlIG11c3QgaGF2ZSBhIHNlcmlhbCBudW1iZXIiKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9ub3RfdmFsaWRfYmVmb3JlIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkEgY2VydGlmaWNhdGUgbXVzdCBoYXZlIGEgbm90IHZhbGlkIGJlZm9yZSB0aW1lIilcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fbm90X3ZhbGlkX2FmdGVyIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkEgY2VydGlmaWNhdGUgbXVzdCBoYXZlIGEgbm90IHZhbGlkIGFmdGVyIHRpbWUiKVxyXG5cclxuICAgICAgICBpZiBzZWxmLl9wdWJsaWNfa2V5IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkEgY2VydGlmaWNhdGUgbXVzdCBoYXZlIGEgcHVibGljIGtleSIpXHJcblxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuY3JlYXRlX3g1MDlfY2VydGlmaWNhdGUoc2VsZiwgcHJpdmF0ZV9rZXksIGFsZ29yaXRobSlcclxuXHJcblxyXG5jbGFzcyBDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0QnVpbGRlcjpcclxuICAgIF9leHRlbnNpb25zOiB0eXBpbmcuTGlzdFtFeHRlbnNpb25bRXh0ZW5zaW9uVHlwZV1dXHJcbiAgICBfcmV2b2tlZF9jZXJ0aWZpY2F0ZXM6IHR5cGluZy5MaXN0W1Jldm9rZWRDZXJ0aWZpY2F0ZV1cclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBpc3N1ZXJfbmFtZTogdHlwaW5nLk9wdGlvbmFsW05hbWVdID0gTm9uZSxcclxuICAgICAgICBsYXN0X3VwZGF0ZTogdHlwaW5nLk9wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXSA9IE5vbmUsXHJcbiAgICAgICAgbmV4dF91cGRhdGU6IHR5cGluZy5PcHRpb25hbFtkYXRldGltZS5kYXRldGltZV0gPSBOb25lLFxyXG4gICAgICAgIGV4dGVuc2lvbnM6IHR5cGluZy5MaXN0W0V4dGVuc2lvbltFeHRlbnNpb25UeXBlXV0gPSBbXSxcclxuICAgICAgICByZXZva2VkX2NlcnRpZmljYXRlczogdHlwaW5nLkxpc3RbUmV2b2tlZENlcnRpZmljYXRlXSA9IFtdLFxyXG4gICAgKTpcclxuICAgICAgICBzZWxmLl9pc3N1ZXJfbmFtZSA9IGlzc3Vlcl9uYW1lXHJcbiAgICAgICAgc2VsZi5fbGFzdF91cGRhdGUgPSBsYXN0X3VwZGF0ZVxyXG4gICAgICAgIHNlbGYuX25leHRfdXBkYXRlID0gbmV4dF91cGRhdGVcclxuICAgICAgICBzZWxmLl9leHRlbnNpb25zID0gZXh0ZW5zaW9uc1xyXG4gICAgICAgIHNlbGYuX3Jldm9rZWRfY2VydGlmaWNhdGVzID0gcmV2b2tlZF9jZXJ0aWZpY2F0ZXNcclxuXHJcbiAgICBkZWYgaXNzdWVyX25hbWUoXHJcbiAgICAgICAgc2VsZiwgaXNzdWVyX25hbWU6IE5hbWVcclxuICAgICkgLT4gIkNlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3RCdWlsZGVyIjpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShpc3N1ZXJfbmFtZSwgTmFtZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiRXhwZWN0aW5nIHg1MDkuTmFtZSBvYmplY3QuIilcclxuICAgICAgICBpZiBzZWxmLl9pc3N1ZXJfbmFtZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhlIGlzc3VlciBuYW1lIG1heSBvbmx5IGJlIHNldCBvbmNlLiIpXHJcbiAgICAgICAgcmV0dXJuIENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3RCdWlsZGVyKFxyXG4gICAgICAgICAgICBpc3N1ZXJfbmFtZSxcclxuICAgICAgICAgICAgc2VsZi5fbGFzdF91cGRhdGUsXHJcbiAgICAgICAgICAgIHNlbGYuX25leHRfdXBkYXRlLFxyXG4gICAgICAgICAgICBzZWxmLl9leHRlbnNpb25zLFxyXG4gICAgICAgICAgICBzZWxmLl9yZXZva2VkX2NlcnRpZmljYXRlcyxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGxhc3RfdXBkYXRlKFxyXG4gICAgICAgIHNlbGYsIGxhc3RfdXBkYXRlOiBkYXRldGltZS5kYXRldGltZVxyXG4gICAgKSAtPiAiQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdEJ1aWxkZXIiOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGxhc3RfdXBkYXRlLCBkYXRldGltZS5kYXRldGltZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiRXhwZWN0aW5nIGRhdGV0aW1lIG9iamVjdC4iKVxyXG4gICAgICAgIGlmIHNlbGYuX2xhc3RfdXBkYXRlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJMYXN0IHVwZGF0ZSBtYXkgb25seSBiZSBzZXQgb25jZS4iKVxyXG4gICAgICAgIGxhc3RfdXBkYXRlID0gX2NvbnZlcnRfdG9fbmFpdmVfdXRjX3RpbWUobGFzdF91cGRhdGUpXHJcbiAgICAgICAgaWYgbGFzdF91cGRhdGUgPCBfRUFSTElFU1RfVVRDX1RJTUU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiVGhlIGxhc3QgdXBkYXRlIGRhdGUgbXVzdCBiZSBvbiBvciBhZnRlciIgIiAxOTUwIEphbnVhcnkgMS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiBzZWxmLl9uZXh0X3VwZGF0ZSBpcyBub3QgTm9uZSBhbmQgbGFzdF91cGRhdGUgPiBzZWxmLl9uZXh0X3VwZGF0ZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJUaGUgbGFzdCB1cGRhdGUgZGF0ZSBtdXN0IGJlIGJlZm9yZSB0aGUgbmV4dCB1cGRhdGUgZGF0ZS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdEJ1aWxkZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX2lzc3Vlcl9uYW1lLFxyXG4gICAgICAgICAgICBsYXN0X3VwZGF0ZSxcclxuICAgICAgICAgICAgc2VsZi5fbmV4dF91cGRhdGUsXHJcbiAgICAgICAgICAgIHNlbGYuX2V4dGVuc2lvbnMsXHJcbiAgICAgICAgICAgIHNlbGYuX3Jldm9rZWRfY2VydGlmaWNhdGVzLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgbmV4dF91cGRhdGUoXHJcbiAgICAgICAgc2VsZiwgbmV4dF91cGRhdGU6IGRhdGV0aW1lLmRhdGV0aW1lXHJcbiAgICApIC0+ICJDZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0QnVpbGRlciI6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UobmV4dF91cGRhdGUsIGRhdGV0aW1lLmRhdGV0aW1lKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJFeHBlY3RpbmcgZGF0ZXRpbWUgb2JqZWN0LiIpXHJcbiAgICAgICAgaWYgc2VsZi5fbmV4dF91cGRhdGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkxhc3QgdXBkYXRlIG1heSBvbmx5IGJlIHNldCBvbmNlLiIpXHJcbiAgICAgICAgbmV4dF91cGRhdGUgPSBfY29udmVydF90b19uYWl2ZV91dGNfdGltZShuZXh0X3VwZGF0ZSlcclxuICAgICAgICBpZiBuZXh0X3VwZGF0ZSA8IF9FQVJMSUVTVF9VVENfVElNRTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJUaGUgbGFzdCB1cGRhdGUgZGF0ZSBtdXN0IGJlIG9uIG9yIGFmdGVyIiAiIDE5NTAgSmFudWFyeSAxLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGlmIHNlbGYuX2xhc3RfdXBkYXRlIGlzIG5vdCBOb25lIGFuZCBuZXh0X3VwZGF0ZSA8IHNlbGYuX2xhc3RfdXBkYXRlOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBuZXh0IHVwZGF0ZSBkYXRlIG11c3QgYmUgYWZ0ZXIgdGhlIGxhc3QgdXBkYXRlIGRhdGUuIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3RCdWlsZGVyKFxyXG4gICAgICAgICAgICBzZWxmLl9pc3N1ZXJfbmFtZSxcclxuICAgICAgICAgICAgc2VsZi5fbGFzdF91cGRhdGUsXHJcbiAgICAgICAgICAgIG5leHRfdXBkYXRlLFxyXG4gICAgICAgICAgICBzZWxmLl9leHRlbnNpb25zLFxyXG4gICAgICAgICAgICBzZWxmLl9yZXZva2VkX2NlcnRpZmljYXRlcyxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGFkZF9leHRlbnNpb24oXHJcbiAgICAgICAgc2VsZiwgZXh0dmFsOiBFeHRlbnNpb25UeXBlLCBjcml0aWNhbDogYm9vbFxyXG4gICAgKSAtPiAiQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdEJ1aWxkZXIiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEFkZHMgYW4gWC41MDkgZXh0ZW5zaW9uIHRvIHRoZSBjZXJ0aWZpY2F0ZSByZXZvY2F0aW9uIGxpc3QuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZXh0dmFsLCBFeHRlbnNpb25UeXBlKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJleHRlbnNpb24gbXVzdCBiZSBhbiBFeHRlbnNpb25UeXBlIilcclxuXHJcbiAgICAgICAgZXh0ZW5zaW9uID0gRXh0ZW5zaW9uKGV4dHZhbC5vaWQsIGNyaXRpY2FsLCBleHR2YWwpXHJcbiAgICAgICAgX3JlamVjdF9kdXBsaWNhdGVfZXh0ZW5zaW9uKGV4dGVuc2lvbiwgc2VsZi5fZXh0ZW5zaW9ucylcclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdEJ1aWxkZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX2lzc3Vlcl9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9sYXN0X3VwZGF0ZSxcclxuICAgICAgICAgICAgc2VsZi5fbmV4dF91cGRhdGUsXHJcbiAgICAgICAgICAgIHNlbGYuX2V4dGVuc2lvbnMgKyBbZXh0ZW5zaW9uXSxcclxuICAgICAgICAgICAgc2VsZi5fcmV2b2tlZF9jZXJ0aWZpY2F0ZXMsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBhZGRfcmV2b2tlZF9jZXJ0aWZpY2F0ZShcclxuICAgICAgICBzZWxmLCByZXZva2VkX2NlcnRpZmljYXRlOiBSZXZva2VkQ2VydGlmaWNhdGVcclxuICAgICkgLT4gIkNlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3RCdWlsZGVyIjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBBZGRzIGEgcmV2b2tlZCBjZXJ0aWZpY2F0ZSB0byB0aGUgQ1JMLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHJldm9rZWRfY2VydGlmaWNhdGUsIFJldm9rZWRDZXJ0aWZpY2F0ZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiTXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBSZXZva2VkQ2VydGlmaWNhdGUiKVxyXG5cclxuICAgICAgICByZXR1cm4gQ2VydGlmaWNhdGVSZXZvY2F0aW9uTGlzdEJ1aWxkZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX2lzc3Vlcl9uYW1lLFxyXG4gICAgICAgICAgICBzZWxmLl9sYXN0X3VwZGF0ZSxcclxuICAgICAgICAgICAgc2VsZi5fbmV4dF91cGRhdGUsXHJcbiAgICAgICAgICAgIHNlbGYuX2V4dGVuc2lvbnMsXHJcbiAgICAgICAgICAgIHNlbGYuX3Jldm9rZWRfY2VydGlmaWNhdGVzICsgW3Jldm9rZWRfY2VydGlmaWNhdGVdLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgc2lnbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHByaXZhdGVfa2V5OiBDRVJUSUZJQ0FURV9QUklWQVRFX0tFWV9UWVBFUyxcclxuICAgICAgICBhbGdvcml0aG06IHR5cGluZy5PcHRpb25hbFtoYXNoZXMuSGFzaEFsZ29yaXRobV0sXHJcbiAgICAgICAgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUsXHJcbiAgICApIC0+IENlcnRpZmljYXRlUmV2b2NhdGlvbkxpc3Q6XHJcbiAgICAgICAgaWYgc2VsZi5faXNzdWVyX25hbWUgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQSBDUkwgbXVzdCBoYXZlIGFuIGlzc3VlciBuYW1lIilcclxuXHJcbiAgICAgICAgaWYgc2VsZi5fbGFzdF91cGRhdGUgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQSBDUkwgbXVzdCBoYXZlIGEgbGFzdCB1cGRhdGUgdGltZSIpXHJcblxyXG4gICAgICAgIGlmIHNlbGYuX25leHRfdXBkYXRlIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkEgQ1JMIG11c3QgaGF2ZSBhIG5leHQgdXBkYXRlIHRpbWUiKVxyXG5cclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmNyZWF0ZV94NTA5X2NybChzZWxmLCBwcml2YXRlX2tleSwgYWxnb3JpdGhtKVxyXG5cclxuXHJcbmNsYXNzIFJldm9rZWRDZXJ0aWZpY2F0ZUJ1aWxkZXI6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBzZXJpYWxfbnVtYmVyOiB0eXBpbmcuT3B0aW9uYWxbaW50XSA9IE5vbmUsXHJcbiAgICAgICAgcmV2b2NhdGlvbl9kYXRlOiB0eXBpbmcuT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdID0gTm9uZSxcclxuICAgICAgICBleHRlbnNpb25zOiB0eXBpbmcuTGlzdFtFeHRlbnNpb25bRXh0ZW5zaW9uVHlwZV1dID0gW10sXHJcbiAgICApOlxyXG4gICAgICAgIHNlbGYuX3NlcmlhbF9udW1iZXIgPSBzZXJpYWxfbnVtYmVyXHJcbiAgICAgICAgc2VsZi5fcmV2b2NhdGlvbl9kYXRlID0gcmV2b2NhdGlvbl9kYXRlXHJcbiAgICAgICAgc2VsZi5fZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnNcclxuXHJcbiAgICBkZWYgc2VyaWFsX251bWJlcihzZWxmLCBudW1iZXI6IGludCkgLT4gIlJldm9rZWRDZXJ0aWZpY2F0ZUJ1aWxkZXIiOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG51bWJlciwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJTZXJpYWwgbnVtYmVyIG11c3QgYmUgb2YgaW50ZWdyYWwgdHlwZS4iKVxyXG4gICAgICAgIGlmIHNlbGYuX3NlcmlhbF9udW1iZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoZSBzZXJpYWwgbnVtYmVyIG1heSBvbmx5IGJlIHNldCBvbmNlLiIpXHJcbiAgICAgICAgaWYgbnVtYmVyIDw9IDA6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoZSBzZXJpYWwgbnVtYmVyIHNob3VsZCBiZSBwb3NpdGl2ZSIpXHJcblxyXG4gICAgICAgICMgQVNOLjEgaW50ZWdlcnMgYXJlIGFsd2F5cyBzaWduZWQsIHNvIG1vc3Qgc2lnbmlmaWNhbnQgYml0IG11c3QgYmVcclxuICAgICAgICAjIHplcm8uXHJcbiAgICAgICAgaWYgbnVtYmVyLmJpdF9sZW5ndGgoKSA+PSAxNjA6ICAjIEFzIGRlZmluZWQgaW4gUkZDIDUyODBcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJUaGUgc2VyaWFsIG51bWJlciBzaG91bGQgbm90IGJlIG1vcmUgdGhhbiAxNTkgIiAiYml0cy4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gUmV2b2tlZENlcnRpZmljYXRlQnVpbGRlcihcclxuICAgICAgICAgICAgbnVtYmVyLCBzZWxmLl9yZXZvY2F0aW9uX2RhdGUsIHNlbGYuX2V4dGVuc2lvbnNcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHJldm9jYXRpb25fZGF0ZShcclxuICAgICAgICBzZWxmLCB0aW1lOiBkYXRldGltZS5kYXRldGltZVxyXG4gICAgKSAtPiAiUmV2b2tlZENlcnRpZmljYXRlQnVpbGRlciI6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodGltZSwgZGF0ZXRpbWUuZGF0ZXRpbWUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkV4cGVjdGluZyBkYXRldGltZSBvYmplY3QuIilcclxuICAgICAgICBpZiBzZWxmLl9yZXZvY2F0aW9uX2RhdGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoZSByZXZvY2F0aW9uIGRhdGUgbWF5IG9ubHkgYmUgc2V0IG9uY2UuIilcclxuICAgICAgICB0aW1lID0gX2NvbnZlcnRfdG9fbmFpdmVfdXRjX3RpbWUodGltZSlcclxuICAgICAgICBpZiB0aW1lIDwgX0VBUkxJRVNUX1VUQ19USU1FOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSByZXZvY2F0aW9uIGRhdGUgbXVzdCBiZSBvbiBvciBhZnRlciIgIiAxOTUwIEphbnVhcnkgMS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gUmV2b2tlZENlcnRpZmljYXRlQnVpbGRlcihcclxuICAgICAgICAgICAgc2VsZi5fc2VyaWFsX251bWJlciwgdGltZSwgc2VsZi5fZXh0ZW5zaW9uc1xyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgYWRkX2V4dGVuc2lvbihcclxuICAgICAgICBzZWxmLCBleHR2YWw6IEV4dGVuc2lvblR5cGUsIGNyaXRpY2FsOiBib29sXHJcbiAgICApIC0+ICJSZXZva2VkQ2VydGlmaWNhdGVCdWlsZGVyIjpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShleHR2YWwsIEV4dGVuc2lvblR5cGUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImV4dGVuc2lvbiBtdXN0IGJlIGFuIEV4dGVuc2lvblR5cGUiKVxyXG5cclxuICAgICAgICBleHRlbnNpb24gPSBFeHRlbnNpb24oZXh0dmFsLm9pZCwgY3JpdGljYWwsIGV4dHZhbClcclxuICAgICAgICBfcmVqZWN0X2R1cGxpY2F0ZV9leHRlbnNpb24oZXh0ZW5zaW9uLCBzZWxmLl9leHRlbnNpb25zKVxyXG4gICAgICAgIHJldHVybiBSZXZva2VkQ2VydGlmaWNhdGVCdWlsZGVyKFxyXG4gICAgICAgICAgICBzZWxmLl9zZXJpYWxfbnVtYmVyLFxyXG4gICAgICAgICAgICBzZWxmLl9yZXZvY2F0aW9uX2RhdGUsXHJcbiAgICAgICAgICAgIHNlbGYuX2V4dGVuc2lvbnMgKyBbZXh0ZW5zaW9uXSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGJ1aWxkKHNlbGYsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lKSAtPiBSZXZva2VkQ2VydGlmaWNhdGU6XHJcbiAgICAgICAgaWYgc2VsZi5fc2VyaWFsX251bWJlciBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBIHJldm9rZWQgY2VydGlmaWNhdGUgbXVzdCBoYXZlIGEgc2VyaWFsIG51bWJlciIpXHJcbiAgICAgICAgaWYgc2VsZi5fcmV2b2NhdGlvbl9kYXRlIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiQSByZXZva2VkIGNlcnRpZmljYXRlIG11c3QgaGF2ZSBhIHJldm9jYXRpb24gZGF0ZSJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBfUmF3UmV2b2tlZENlcnRpZmljYXRlKFxyXG4gICAgICAgICAgICBzZWxmLl9zZXJpYWxfbnVtYmVyLFxyXG4gICAgICAgICAgICBzZWxmLl9yZXZvY2F0aW9uX2RhdGUsXHJcbiAgICAgICAgICAgIEV4dGVuc2lvbnMoc2VsZi5fZXh0ZW5zaW9ucyksXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmRlZiByYW5kb21fc2VyaWFsX251bWJlcigpIC0+IGludDpcclxuICAgIHJldHVybiBpbnQuZnJvbV9ieXRlcyhvcy51cmFuZG9tKDIwKSwgImJpZyIpID4+IDFcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9fX2luaXRfXy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9oYXNoZXMucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgYWJjXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCAoXHJcbiAgICBBbHJlYWR5RmluYWxpemVkLFxyXG4pXHJcblxyXG5cclxuY2xhc3MgSGFzaEFsZ29yaXRobShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgbmFtZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQSBzdHJpbmcgbmFtaW5nIHRoaXMgYWxnb3JpdGhtIChlLmcuICJzaGEyNTYiLCAibWQ1IikuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgZGlnZXN0X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBzaXplIG9mIHRoZSByZXN1bHRpbmcgZGlnZXN0IGluIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGJsb2NrX3NpemUoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIGludGVybmFsIGJsb2NrIHNpemUgb2YgdGhlIGhhc2ggZnVuY3Rpb24sIG9yIE5vbmUgaWYgdGhlIGhhc2hcclxuICAgICAgICBmdW5jdGlvbiBkb2VzIG5vdCB1c2UgYmxvY2tzIGludGVybmFsbHkgKGUuZy4gU0hBMykuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgSGFzaENvbnRleHQobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGFsZ29yaXRobShzZWxmKSAtPiBIYXNoQWxnb3JpdGhtOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEEgSGFzaEFsZ29yaXRobSB0aGF0IHdpbGwgYmUgdXNlZCBieSB0aGlzIGNvbnRleHQuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHVwZGF0ZShzZWxmLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBQcm9jZXNzZXMgdGhlIHByb3ZpZGVkIGJ5dGVzIHRocm91Z2ggdGhlIGhhc2guXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGZpbmFsaXplKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEZpbmFsaXplcyB0aGUgaGFzaCBjb250ZXh0IGFuZCByZXR1cm5zIHRoZSBoYXNoIGRpZ2VzdCBhcyBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgY29weShzZWxmKSAtPiAiSGFzaENvbnRleHQiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybiBhIEhhc2hDb250ZXh0IHRoYXQgaXMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IGNvbnRleHQuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgRXh0ZW5kYWJsZU91dHB1dEZ1bmN0aW9uKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICAiIiJcclxuICAgIEFuIGludGVyZmFjZSBmb3IgZXh0ZW5kYWJsZSBvdXRwdXQgZnVuY3Rpb25zLlxyXG4gICAgIiIiXHJcblxyXG5cclxuY2xhc3MgSGFzaChIYXNoQ29udGV4dCk6XHJcbiAgICBfY3R4OiB0eXBpbmcuT3B0aW9uYWxbSGFzaENvbnRleHRdXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgYWxnb3JpdGhtOiBIYXNoQWxnb3JpdGhtLFxyXG4gICAgICAgIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lLFxyXG4gICAgICAgIGN0eDogdHlwaW5nLk9wdGlvbmFsWyJIYXNoQ29udGV4dCJdID0gTm9uZSxcclxuICAgICk6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYWxnb3JpdGhtLCBIYXNoQWxnb3JpdGhtKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJFeHBlY3RlZCBpbnN0YW5jZSBvZiBoYXNoZXMuSGFzaEFsZ29yaXRobS4iKVxyXG4gICAgICAgIHNlbGYuX2FsZ29yaXRobSA9IGFsZ29yaXRobVxyXG5cclxuICAgICAgICBpZiBjdHggaXMgTm9uZTpcclxuICAgICAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgKFxyXG4gICAgICAgICAgICAgICAgYmFja2VuZCBhcyBvc3NsLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBzZWxmLl9jdHggPSBvc3NsLmNyZWF0ZV9oYXNoX2N0eChzZWxmLmFsZ29yaXRobSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9jdHggPSBjdHhcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBhbGdvcml0aG0oc2VsZikgLT4gSGFzaEFsZ29yaXRobTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYWxnb3JpdGhtXHJcblxyXG4gICAgZGVmIHVwZGF0ZShzZWxmLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9jdHggaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgQWxyZWFkeUZpbmFsaXplZCgiQ29udGV4dCB3YXMgYWxyZWFkeSBmaW5hbGl6ZWQuIilcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJkYXRhIiwgZGF0YSlcclxuICAgICAgICBzZWxmLl9jdHgudXBkYXRlKGRhdGEpXHJcblxyXG4gICAgZGVmIGNvcHkoc2VsZikgLT4gIkhhc2giOlxyXG4gICAgICAgIGlmIHNlbGYuX2N0eCBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBBbHJlYWR5RmluYWxpemVkKCJDb250ZXh0IHdhcyBhbHJlYWR5IGZpbmFsaXplZC4iKVxyXG4gICAgICAgIHJldHVybiBIYXNoKHNlbGYuYWxnb3JpdGhtLCBjdHg9c2VsZi5fY3R4LmNvcHkoKSlcclxuXHJcbiAgICBkZWYgZmluYWxpemUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgc2VsZi5fY3R4IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIEFscmVhZHlGaW5hbGl6ZWQoIkNvbnRleHQgd2FzIGFscmVhZHkgZmluYWxpemVkLiIpXHJcbiAgICAgICAgZGlnZXN0ID0gc2VsZi5fY3R4LmZpbmFsaXplKClcclxuICAgICAgICBzZWxmLl9jdHggPSBOb25lXHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdFxyXG5cclxuXHJcbmNsYXNzIFNIQTEoSGFzaEFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gInNoYTEiXHJcbiAgICBkaWdlc3Rfc2l6ZSA9IDIwXHJcbiAgICBibG9ja19zaXplID0gNjRcclxuXHJcblxyXG5jbGFzcyBTSEE1MTJfMjI0KEhhc2hBbGdvcml0aG0pOiAgIyBub3FhOiBOODAxXHJcbiAgICBuYW1lID0gInNoYTUxMi0yMjQiXHJcbiAgICBkaWdlc3Rfc2l6ZSA9IDI4XHJcbiAgICBibG9ja19zaXplID0gMTI4XHJcblxyXG5cclxuY2xhc3MgU0hBNTEyXzI1NihIYXNoQWxnb3JpdGhtKTogICMgbm9xYTogTjgwMVxyXG4gICAgbmFtZSA9ICJzaGE1MTItMjU2IlxyXG4gICAgZGlnZXN0X3NpemUgPSAzMlxyXG4gICAgYmxvY2tfc2l6ZSA9IDEyOFxyXG5cclxuXHJcbmNsYXNzIFNIQTIyNChIYXNoQWxnb3JpdGhtKTpcclxuICAgIG5hbWUgPSAic2hhMjI0IlxyXG4gICAgZGlnZXN0X3NpemUgPSAyOFxyXG4gICAgYmxvY2tfc2l6ZSA9IDY0XHJcblxyXG5cclxuY2xhc3MgU0hBMjU2KEhhc2hBbGdvcml0aG0pOlxyXG4gICAgbmFtZSA9ICJzaGEyNTYiXHJcbiAgICBkaWdlc3Rfc2l6ZSA9IDMyXHJcbiAgICBibG9ja19zaXplID0gNjRcclxuXHJcblxyXG5jbGFzcyBTSEEzODQoSGFzaEFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gInNoYTM4NCJcclxuICAgIGRpZ2VzdF9zaXplID0gNDhcclxuICAgIGJsb2NrX3NpemUgPSAxMjhcclxuXHJcblxyXG5jbGFzcyBTSEE1MTIoSGFzaEFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gInNoYTUxMiJcclxuICAgIGRpZ2VzdF9zaXplID0gNjRcclxuICAgIGJsb2NrX3NpemUgPSAxMjhcclxuXHJcblxyXG5jbGFzcyBTSEEzXzIyNChIYXNoQWxnb3JpdGhtKTogICMgbm9xYTogTjgwMVxyXG4gICAgbmFtZSA9ICJzaGEzLTIyNCJcclxuICAgIGRpZ2VzdF9zaXplID0gMjhcclxuICAgIGJsb2NrX3NpemUgPSBOb25lXHJcblxyXG5cclxuY2xhc3MgU0hBM18yNTYoSGFzaEFsZ29yaXRobSk6ICAjIG5vcWE6IE44MDFcclxuICAgIG5hbWUgPSAic2hhMy0yNTYiXHJcbiAgICBkaWdlc3Rfc2l6ZSA9IDMyXHJcbiAgICBibG9ja19zaXplID0gTm9uZVxyXG5cclxuXHJcbmNsYXNzIFNIQTNfMzg0KEhhc2hBbGdvcml0aG0pOiAgIyBub3FhOiBOODAxXHJcbiAgICBuYW1lID0gInNoYTMtMzg0IlxyXG4gICAgZGlnZXN0X3NpemUgPSA0OFxyXG4gICAgYmxvY2tfc2l6ZSA9IE5vbmVcclxuXHJcblxyXG5jbGFzcyBTSEEzXzUxMihIYXNoQWxnb3JpdGhtKTogICMgbm9xYTogTjgwMVxyXG4gICAgbmFtZSA9ICJzaGEzLTUxMiJcclxuICAgIGRpZ2VzdF9zaXplID0gNjRcclxuICAgIGJsb2NrX3NpemUgPSBOb25lXHJcblxyXG5cclxuY2xhc3MgU0hBS0UxMjgoSGFzaEFsZ29yaXRobSwgRXh0ZW5kYWJsZU91dHB1dEZ1bmN0aW9uKTpcclxuICAgIG5hbWUgPSAic2hha2UxMjgiXHJcbiAgICBibG9ja19zaXplID0gTm9uZVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkaWdlc3Rfc2l6ZTogaW50KTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShkaWdlc3Rfc2l6ZSwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJkaWdlc3Rfc2l6ZSBtdXN0IGJlIGFuIGludGVnZXIiKVxyXG5cclxuICAgICAgICBpZiBkaWdlc3Rfc2l6ZSA8IDE6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImRpZ2VzdF9zaXplIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyIilcclxuXHJcbiAgICAgICAgc2VsZi5fZGlnZXN0X3NpemUgPSBkaWdlc3Rfc2l6ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGRpZ2VzdF9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZGlnZXN0X3NpemVcclxuXHJcblxyXG5jbGFzcyBTSEFLRTI1NihIYXNoQWxnb3JpdGhtLCBFeHRlbmRhYmxlT3V0cHV0RnVuY3Rpb24pOlxyXG4gICAgbmFtZSA9ICJzaGFrZTI1NiJcclxuICAgIGJsb2NrX3NpemUgPSBOb25lXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGRpZ2VzdF9zaXplOiBpbnQpOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGRpZ2VzdF9zaXplLCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImRpZ2VzdF9zaXplIG11c3QgYmUgYW4gaW50ZWdlciIpXHJcblxyXG4gICAgICAgIGlmIGRpZ2VzdF9zaXplIDwgMTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZGlnZXN0X3NpemUgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIiKVxyXG5cclxuICAgICAgICBzZWxmLl9kaWdlc3Rfc2l6ZSA9IGRpZ2VzdF9zaXplXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZGlnZXN0X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kaWdlc3Rfc2l6ZVxyXG5cclxuXHJcbmNsYXNzIE1ENShIYXNoQWxnb3JpdGhtKTpcclxuICAgIG5hbWUgPSAibWQ1IlxyXG4gICAgZGlnZXN0X3NpemUgPSAxNlxyXG4gICAgYmxvY2tfc2l6ZSA9IDY0XHJcblxyXG5cclxuY2xhc3MgQkxBS0UyYihIYXNoQWxnb3JpdGhtKTpcclxuICAgIG5hbWUgPSAiYmxha2UyYiJcclxuICAgIF9tYXhfZGlnZXN0X3NpemUgPSA2NFxyXG4gICAgX21pbl9kaWdlc3Rfc2l6ZSA9IDFcclxuICAgIGJsb2NrX3NpemUgPSAxMjhcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZGlnZXN0X3NpemU6IGludCk6XHJcblxyXG4gICAgICAgIGlmIGRpZ2VzdF9zaXplICE9IDY0OlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJEaWdlc3Qgc2l6ZSBtdXN0IGJlIDY0IilcclxuXHJcbiAgICAgICAgc2VsZi5fZGlnZXN0X3NpemUgPSBkaWdlc3Rfc2l6ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGRpZ2VzdF9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZGlnZXN0X3NpemVcclxuXHJcblxyXG5jbGFzcyBCTEFLRTJzKEhhc2hBbGdvcml0aG0pOlxyXG4gICAgbmFtZSA9ICJibGFrZTJzIlxyXG4gICAgYmxvY2tfc2l6ZSA9IDY0XHJcbiAgICBfbWF4X2RpZ2VzdF9zaXplID0gMzJcclxuICAgIF9taW5fZGlnZXN0X3NpemUgPSAxXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGRpZ2VzdF9zaXplOiBpbnQpOlxyXG5cclxuICAgICAgICBpZiBkaWdlc3Rfc2l6ZSAhPSAzMjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiRGlnZXN0IHNpemUgbXVzdCBiZSAzMiIpXHJcblxyXG4gICAgICAgIHNlbGYuX2RpZ2VzdF9zaXplID0gZGlnZXN0X3NpemVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBkaWdlc3Rfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2RpZ2VzdF9zaXplXHJcblxyXG5cclxuY2xhc3MgU00zKEhhc2hBbGdvcml0aG0pOlxyXG4gICAgbmFtZSA9ICJzbTMiXHJcbiAgICBkaWdlc3Rfc2l6ZSA9IDMyXHJcbiAgICBibG9ja19zaXplID0gNjRcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9leGNlcHRpb25zLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmluZGluZ3Mub3BlbnNzbC5iaW5kaW5nIGltcG9ydCAoXHJcbiAgICAgICAgX09wZW5TU0xFcnJvcldpdGhUZXh0LFxyXG4gICAgKVxyXG5cclxuXHJcbmNsYXNzIF9SZWFzb25zKHV0aWxzLkVudW0pOlxyXG4gICAgQkFDS0VORF9NSVNTSU5HX0lOVEVSRkFDRSA9IDBcclxuICAgIFVOU1VQUE9SVEVEX0hBU0ggPSAxXHJcbiAgICBVTlNVUFBPUlRFRF9DSVBIRVIgPSAyXHJcbiAgICBVTlNVUFBPUlRFRF9QQURESU5HID0gM1xyXG4gICAgVU5TVVBQT1JURURfTUdGID0gNFxyXG4gICAgVU5TVVBQT1JURURfUFVCTElDX0tFWV9BTEdPUklUSE0gPSA1XHJcbiAgICBVTlNVUFBPUlRFRF9FTExJUFRJQ19DVVJWRSA9IDZcclxuICAgIFVOU1VQUE9SVEVEX1NFUklBTElaQVRJT04gPSA3XHJcbiAgICBVTlNVUFBPUlRFRF9YNTA5ID0gOFxyXG4gICAgVU5TVVBQT1JURURfRVhDSEFOR0VfQUxHT1JJVEhNID0gOVxyXG4gICAgVU5TVVBQT1JURURfRElGRklFX0hFTExNQU4gPSAxMFxyXG4gICAgVU5TVVBQT1JURURfTUFDID0gMTFcclxuXHJcblxyXG5jbGFzcyBVbnN1cHBvcnRlZEFsZ29yaXRobShFeGNlcHRpb24pOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIG1lc3NhZ2U6IHN0ciwgcmVhc29uOiB0eXBpbmcuT3B0aW9uYWxbX1JlYXNvbnNdID0gTm9uZVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKFVuc3VwcG9ydGVkQWxnb3JpdGhtLCBzZWxmKS5fX2luaXRfXyhtZXNzYWdlKVxyXG4gICAgICAgIHNlbGYuX3JlYXNvbiA9IHJlYXNvblxyXG5cclxuXHJcbmNsYXNzIEFscmVhZHlGaW5hbGl6ZWQoRXhjZXB0aW9uKTpcclxuICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBBbHJlYWR5VXBkYXRlZChFeGNlcHRpb24pOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbmNsYXNzIE5vdFlldEZpbmFsaXplZChFeGNlcHRpb24pOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbmNsYXNzIEludmFsaWRUYWcoRXhjZXB0aW9uKTpcclxuICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBJbnZhbGlkU2lnbmF0dXJlKEV4Y2VwdGlvbik6XHJcbiAgICBwYXNzXHJcblxyXG5cclxuY2xhc3MgSW50ZXJuYWxFcnJvcihFeGNlcHRpb24pOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIG1zZzogc3RyLCBlcnJfY29kZTogdHlwaW5nLkxpc3RbIl9PcGVuU1NMRXJyb3JXaXRoVGV4dCJdXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgc3VwZXIoSW50ZXJuYWxFcnJvciwgc2VsZikuX19pbml0X18obXNnKVxyXG4gICAgICAgIHNlbGYuZXJyX2NvZGUgPSBlcnJfY29kZVxyXG5cclxuXHJcbmNsYXNzIEludmFsaWRLZXkoRXhjZXB0aW9uKTpcclxuICAgIHBhc3NcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmluZGluZ3Mvb3BlbnNzbC9fX2luaXRfXy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmluZGluZ3Mvb3BlbnNzbC9iaW5kaW5nLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCB0aHJlYWRpbmdcclxuaW1wb3J0IHR5cGVzXHJcbmltcG9ydCB0eXBpbmdcclxuaW1wb3J0IHdhcm5pbmdzXHJcblxyXG5pbXBvcnQgY3J5cHRvZ3JhcGh5XHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCBJbnRlcm5hbEVycm9yXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iaW5kaW5ncy5fb3BlbnNzbCBpbXBvcnQgZmZpLCBsaWJcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJpbmRpbmdzLm9wZW5zc2wuX2NvbmRpdGlvbmFsIGltcG9ydCBDT05ESVRJT05BTF9OQU1FU1xyXG5cclxuX09wZW5TU0xFcnJvcldpdGhUZXh0ID0gdHlwaW5nLk5hbWVkVHVwbGUoXHJcbiAgICAiX09wZW5TU0xFcnJvcldpdGhUZXh0IixcclxuICAgIFsoImNvZGUiLCBpbnQpLCAoImxpYiIsIGludCksICgicmVhc29uIiwgaW50KSwgKCJyZWFzb25fdGV4dCIsIGJ5dGVzKV0sXHJcbilcclxuXHJcblxyXG5jbGFzcyBfT3BlblNTTEVycm9yOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvZGU6IGludCwgbGliOiBpbnQsIHJlYXNvbjogaW50KTpcclxuICAgICAgICBzZWxmLl9jb2RlID0gY29kZVxyXG4gICAgICAgIHNlbGYuX2xpYiA9IGxpYlxyXG4gICAgICAgIHNlbGYuX3JlYXNvbiA9IHJlYXNvblxyXG5cclxuICAgIGRlZiBfbGliX3JlYXNvbl9tYXRjaChzZWxmLCBsaWI6IGludCwgcmVhc29uOiBpbnQpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIGxpYiA9PSBzZWxmLmxpYiBhbmQgcmVhc29uID09IHNlbGYucmVhc29uXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY29kZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NvZGVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBsaWIoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9saWJcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByZWFzb24oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZWFzb25cclxuXHJcblxyXG5kZWYgX2NvbnN1bWVfZXJyb3JzKGxpYikgLT4gdHlwaW5nLkxpc3RbX09wZW5TU0xFcnJvcl06XHJcbiAgICBlcnJvcnMgPSBbXVxyXG4gICAgd2hpbGUgVHJ1ZTpcclxuICAgICAgICBjb2RlOiBpbnQgPSBsaWIuRVJSX2dldF9lcnJvcigpXHJcbiAgICAgICAgaWYgY29kZSA9PSAwOlxyXG4gICAgICAgICAgICBicmVha1xyXG5cclxuICAgICAgICBlcnJfbGliOiBpbnQgPSBsaWIuRVJSX0dFVF9MSUIoY29kZSlcclxuICAgICAgICBlcnJfcmVhc29uOiBpbnQgPSBsaWIuRVJSX0dFVF9SRUFTT04oY29kZSlcclxuXHJcbiAgICAgICAgZXJyb3JzLmFwcGVuZChfT3BlblNTTEVycm9yKGNvZGUsIGVycl9saWIsIGVycl9yZWFzb24pKVxyXG5cclxuICAgIHJldHVybiBlcnJvcnNcclxuXHJcblxyXG5kZWYgX2Vycm9yc193aXRoX3RleHQoXHJcbiAgICBlcnJvcnM6IHR5cGluZy5MaXN0W19PcGVuU1NMRXJyb3JdLFxyXG4pIC0+IHR5cGluZy5MaXN0W19PcGVuU1NMRXJyb3JXaXRoVGV4dF06XHJcbiAgICBlcnJvcnNfd2l0aF90ZXh0ID0gW11cclxuICAgIGZvciBlcnIgaW4gZXJyb3JzOlxyXG4gICAgICAgIGJ1ZiA9IGZmaS5uZXcoImNoYXJbXSIsIDI1NilcclxuICAgICAgICBsaWIuRVJSX2Vycm9yX3N0cmluZ19uKGVyci5jb2RlLCBidWYsIGxlbihidWYpKVxyXG4gICAgICAgIGVycl90ZXh0X3JlYXNvbjogYnl0ZXMgPSBmZmkuc3RyaW5nKGJ1ZilcclxuXHJcbiAgICAgICAgZXJyb3JzX3dpdGhfdGV4dC5hcHBlbmQoXHJcbiAgICAgICAgICAgIF9PcGVuU1NMRXJyb3JXaXRoVGV4dChcclxuICAgICAgICAgICAgICAgIGVyci5jb2RlLCBlcnIubGliLCBlcnIucmVhc29uLCBlcnJfdGV4dF9yZWFzb25cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuXHJcbiAgICByZXR1cm4gZXJyb3JzX3dpdGhfdGV4dFxyXG5cclxuXHJcbmRlZiBfY29uc3VtZV9lcnJvcnNfd2l0aF90ZXh0KGxpYik6XHJcbiAgICByZXR1cm4gX2Vycm9yc193aXRoX3RleHQoX2NvbnN1bWVfZXJyb3JzKGxpYikpXHJcblxyXG5cclxuZGVmIF9vcGVuc3NsX2Fzc2VydChcclxuICAgIGxpYiwgb2s6IGJvb2wsIGVycm9yczogdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5MaXN0W19PcGVuU1NMRXJyb3JdXSA9IE5vbmVcclxuKSAtPiBOb25lOlxyXG4gICAgaWYgbm90IG9rOlxyXG4gICAgICAgIGlmIGVycm9ycyBpcyBOb25lOlxyXG4gICAgICAgICAgICBlcnJvcnMgPSBfY29uc3VtZV9lcnJvcnMobGliKVxyXG4gICAgICAgIGVycm9yc193aXRoX3RleHQgPSBfZXJyb3JzX3dpdGhfdGV4dChlcnJvcnMpXHJcblxyXG4gICAgICAgIHJhaXNlIEludGVybmFsRXJyb3IoXHJcbiAgICAgICAgICAgICJVbmtub3duIE9wZW5TU0wgZXJyb3IuIFRoaXMgZXJyb3IgaXMgY29tbW9ubHkgZW5jb3VudGVyZWQgd2hlbiAiXHJcbiAgICAgICAgICAgICJhbm90aGVyIGxpYnJhcnkgaXMgbm90IGNsZWFuaW5nIHVwIHRoZSBPcGVuU1NMIGVycm9yIHN0YWNrLiBJZiAiXHJcbiAgICAgICAgICAgICJ5b3UgYXJlIHVzaW5nIGNyeXB0b2dyYXBoeSB3aXRoIGFub3RoZXIgbGlicmFyeSB0aGF0IHVzZXMgIlxyXG4gICAgICAgICAgICAiT3BlblNTTCB0cnkgZGlzYWJsaW5nIGl0IGJlZm9yZSByZXBvcnRpbmcgYSBidWcuIE90aGVyd2lzZSAiXHJcbiAgICAgICAgICAgICJwbGVhc2UgZmlsZSBhbiBpc3N1ZSBhdCBodHRwczovL2dpdGh1Yi5jb20vcHljYS9jcnlwdG9ncmFwaHkvIlxyXG4gICAgICAgICAgICAiaXNzdWVzIHdpdGggaW5mb3JtYXRpb24gb24gaG93IHRvIHJlcHJvZHVjZSAiXHJcbiAgICAgICAgICAgICJ0aGlzLiAoezAhcn0pIi5mb3JtYXQoZXJyb3JzX3dpdGhfdGV4dCksXHJcbiAgICAgICAgICAgIGVycm9yc193aXRoX3RleHQsXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmRlZiBidWlsZF9jb25kaXRpb25hbF9saWJyYXJ5KGxpYiwgY29uZGl0aW9uYWxfbmFtZXMpOlxyXG4gICAgY29uZGl0aW9uYWxfbGliID0gdHlwZXMuTW9kdWxlVHlwZSgibGliIilcclxuICAgIGNvbmRpdGlvbmFsX2xpYi5fb3JpZ2luYWxfbGliID0gbGliICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdXHJcbiAgICBleGNsdWRlZF9uYW1lcyA9IHNldCgpXHJcbiAgICBmb3IgY29uZGl0aW9uLCBuYW1lc19jYiBpbiBjb25kaXRpb25hbF9uYW1lcy5pdGVtcygpOlxyXG4gICAgICAgIGlmIG5vdCBnZXRhdHRyKGxpYiwgY29uZGl0aW9uKTpcclxuICAgICAgICAgICAgZXhjbHVkZWRfbmFtZXMudXBkYXRlKG5hbWVzX2NiKCkpXHJcblxyXG4gICAgZm9yIGF0dHIgaW4gZGlyKGxpYik6XHJcbiAgICAgICAgaWYgYXR0ciBub3QgaW4gZXhjbHVkZWRfbmFtZXM6XHJcbiAgICAgICAgICAgIHNldGF0dHIoY29uZGl0aW9uYWxfbGliLCBhdHRyLCBnZXRhdHRyKGxpYiwgYXR0cikpXHJcblxyXG4gICAgcmV0dXJuIGNvbmRpdGlvbmFsX2xpYlxyXG5cclxuXHJcbmNsYXNzIEJpbmRpbmc6XHJcbiAgICAiIiJcclxuICAgIE9wZW5TU0wgQVBJIHdyYXBwZXIuXHJcbiAgICAiIiJcclxuXHJcbiAgICBsaWI6IHR5cGluZy5DbGFzc1ZhciA9IE5vbmVcclxuICAgIGZmaSA9IGZmaVxyXG4gICAgX2xpYl9sb2FkZWQgPSBGYWxzZVxyXG4gICAgX2luaXRfbG9jayA9IHRocmVhZGluZy5Mb2NrKClcclxuICAgIF9sZWdhY3lfcHJvdmlkZXI6IHR5cGluZy5BbnkgPSBOb25lXHJcbiAgICBfZGVmYXVsdF9wcm92aWRlcjogdHlwaW5nLkFueSA9IE5vbmVcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZik6XHJcbiAgICAgICAgc2VsZi5fZW5zdXJlX2ZmaV9pbml0aWFsaXplZCgpXHJcblxyXG4gICAgZGVmIF9lbmFibGVfZmlwcyhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgICMgVGhpcyBmdW5jdGlvbiBlbmFibGVzIEZJUFMgbW9kZSBmb3IgT3BlblNTTCAzLjAuMCBvbiBpbnN0YWxscyB0aGF0XHJcbiAgICAgICAgIyBoYXZlIHRoZSBGSVBTIHByb3ZpZGVyIGluc3RhbGxlZCBwcm9wZXJseS5cclxuICAgICAgICBfb3BlbnNzbF9hc3NlcnQoc2VsZi5saWIsIHNlbGYubGliLkNSWVBUT0dSQVBIWV9PUEVOU1NMXzMwMF9PUl9HUkVBVEVSKVxyXG4gICAgICAgIHNlbGYuX2Jhc2VfcHJvdmlkZXIgPSBzZWxmLmxpYi5PU1NMX1BST1ZJREVSX2xvYWQoXHJcbiAgICAgICAgICAgIHNlbGYuZmZpLk5VTEwsIGIiYmFzZSJcclxuICAgICAgICApXHJcbiAgICAgICAgX29wZW5zc2xfYXNzZXJ0KHNlbGYubGliLCBzZWxmLl9iYXNlX3Byb3ZpZGVyICE9IHNlbGYuZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5saWIuX2ZpcHNfcHJvdmlkZXIgPSBzZWxmLmxpYi5PU1NMX1BST1ZJREVSX2xvYWQoXHJcbiAgICAgICAgICAgIHNlbGYuZmZpLk5VTEwsIGIiZmlwcyJcclxuICAgICAgICApXHJcbiAgICAgICAgX29wZW5zc2xfYXNzZXJ0KHNlbGYubGliLCBzZWxmLmxpYi5fZmlwc19wcm92aWRlciAhPSBzZWxmLmZmaS5OVUxMKVxyXG5cclxuICAgICAgICByZXMgPSBzZWxmLmxpYi5FVlBfZGVmYXVsdF9wcm9wZXJ0aWVzX2VuYWJsZV9maXBzKHNlbGYuZmZpLk5VTEwsIDEpXHJcbiAgICAgICAgX29wZW5zc2xfYXNzZXJ0KHNlbGYubGliLCByZXMgPT0gMSlcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBfcmVnaXN0ZXJfb3NyYW5kb21fZW5naW5lKGNscyk6XHJcbiAgICAgICAgIyBDbGVhciBhbnkgZXJyb3JzIGV4dGFudCBpbiB0aGUgcXVldWUgYmVmb3JlIHdlIHN0YXJ0LiBJbiBtYW55XHJcbiAgICAgICAgIyBzY2VuYXJpb3Mgb3RoZXIgdGhpbmdzIG1heSBiZSBpbnRlcmFjdGluZyB3aXRoIE9wZW5TU0wgaW4gdGhlIHNhbWVcclxuICAgICAgICAjIHByb2Nlc3Mgc3BhY2UgYW5kIGl0IGhhcyBwcm92ZW4gdW50ZW5hYmxlIHRvIGFzc3VtZSB0aGF0IHRoZXkgd2lsbFxyXG4gICAgICAgICMgcmVsaWFibHkgY2xlYXIgdGhlIGVycm9yIHF1ZXVlLiBPbmNlIHdlIGNsZWFyIGl0IGhlcmUgd2Ugd2lsbFxyXG4gICAgICAgICMgZXJyb3Igb24gYW55IHN1YnNlcXVlbnQgdW5leHBlY3RlZCBpdGVtIGluIHRoZSBzdGFjay5cclxuICAgICAgICBjbHMubGliLkVSUl9jbGVhcl9lcnJvcigpXHJcbiAgICAgICAgaWYgY2xzLmxpYi5DUllQVE9HUkFQSFlfTkVFRFNfT1NSQU5ET01fRU5HSU5FOlxyXG4gICAgICAgICAgICByZXN1bHQgPSBjbHMubGliLkNyeXB0b2dyYXBoeV9hZGRfb3NyYW5kb21fZW5naW5lKClcclxuICAgICAgICAgICAgX29wZW5zc2xfYXNzZXJ0KGNscy5saWIsIHJlc3VsdCBpbiAoMSwgMikpXHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgX2Vuc3VyZV9mZmlfaW5pdGlhbGl6ZWQoY2xzKTpcclxuICAgICAgICB3aXRoIGNscy5faW5pdF9sb2NrOlxyXG4gICAgICAgICAgICBpZiBub3QgY2xzLl9saWJfbG9hZGVkOlxyXG4gICAgICAgICAgICAgICAgY2xzLmxpYiA9IGJ1aWxkX2NvbmRpdGlvbmFsX2xpYnJhcnkobGliLCBDT05ESVRJT05BTF9OQU1FUylcclxuICAgICAgICAgICAgICAgIGNscy5fbGliX2xvYWRlZCA9IFRydWVcclxuICAgICAgICAgICAgICAgIGNscy5fcmVnaXN0ZXJfb3NyYW5kb21fZW5naW5lKClcclxuICAgICAgICAgICAgICAgICMgQXMgb2YgT3BlblNTTCAzLjAuMCB3ZSBtdXN0IHJlZ2lzdGVyIGEgbGVnYWN5IGNpcGhlciBwcm92aWRlclxyXG4gICAgICAgICAgICAgICAgIyB0byBnZXQgUkMyIChuZWVkZWQgZm9yIGp1bmsgYXN5bW1ldHJpYyBwcml2YXRlIGtleVxyXG4gICAgICAgICAgICAgICAgIyBzZXJpYWxpemF0aW9uKSwgUkM0LCBCbG93ZmlzaCwgSURFQSwgU0VFRCwgZXRjLiBUaGVzZSB0aGluZ3NcclxuICAgICAgICAgICAgICAgICMgYXJlIHVnbHkgbGVnYWN5LCBidXQgd2UgYXJlblwndCBnb2luZyB0byBnZXQgcmlkIG9mIHRoZW1cclxuICAgICAgICAgICAgICAgICMgYW55IHRpbWUgc29vbi5cclxuICAgICAgICAgICAgICAgIGlmIGNscy5saWIuQ1JZUFRPR1JBUEhZX09QRU5TU0xfMzAwX09SX0dSRUFURVI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2xzLl9sZWdhY3lfcHJvdmlkZXIgPSBjbHMubGliLk9TU0xfUFJPVklERVJfbG9hZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xzLmZmaS5OVUxMLCBiImxlZ2FjeSJcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgX29wZW5zc2xfYXNzZXJ0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbHMubGliLCBjbHMuX2xlZ2FjeV9wcm92aWRlciAhPSBjbHMuZmZpLk5VTExcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgY2xzLl9kZWZhdWx0X3Byb3ZpZGVyID0gY2xzLmxpYi5PU1NMX1BST1ZJREVSX2xvYWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNscy5mZmkuTlVMTCwgYiJkZWZhdWx0IlxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICBfb3BlbnNzbF9hc3NlcnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNscy5saWIsIGNscy5fZGVmYXVsdF9wcm92aWRlciAhPSBjbHMuZmZpLk5VTExcclxuICAgICAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgaW5pdF9zdGF0aWNfbG9ja3MoY2xzKTpcclxuICAgICAgICBjbHMuX2Vuc3VyZV9mZmlfaW5pdGlhbGl6ZWQoKVxyXG5cclxuXHJcbmRlZiBfdmVyaWZ5X29wZW5zc2xfdmVyc2lvbihsaWIpOlxyXG4gICAgaWYgKFxyXG4gICAgICAgIGxpYi5DUllQVE9HUkFQSFlfT1BFTlNTTF9MRVNTX1RIQU5fMTExXHJcbiAgICAgICAgYW5kIG5vdCBsaWIuQ1JZUFRPR1JBUEhZX0lTX0xJQlJFU1NMXHJcbiAgICAgICAgYW5kIG5vdCBsaWIuQ1JZUFRPR1JBUEhZX0lTX0JPUklOR1NTTFxyXG4gICAgKTpcclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAiT3BlblNTTCB2ZXJzaW9uIDEuMS4wIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgYnkgdGhlIE9wZW5TU0wgIlxyXG4gICAgICAgICAgICAicHJvamVjdCwgcGxlYXNlIHVwZ3JhZGUuIFRoZSBuZXh0IHJlbGVhc2Ugb2YgY3J5cHRvZ3JhcGh5IHdpbGwgIlxyXG4gICAgICAgICAgICAiYmUgdGhlIGxhc3QgdG8gc3VwcG9ydCBjb21waWxpbmcgd2l0aCBPcGVuU1NMIDEuMS4wLiIsXHJcbiAgICAgICAgICAgIHV0aWxzLkRlcHJlY2F0ZWRJbjM3LFxyXG4gICAgICAgIClcclxuXHJcblxyXG5kZWYgX3ZlcmlmeV9wYWNrYWdlX3ZlcnNpb24odmVyc2lvbik6XHJcbiAgICAjIE9jY2FzaW9uYWxseSB3ZSBydW4gaW50byBzaXR1YXRpb25zIHdoZXJlIHRoZSB2ZXJzaW9uIG9mIHRoZSBQeXRob25cclxuICAgICMgcGFja2FnZSBkb2VzIG5vdCBtYXRjaCB0aGUgdmVyc2lvbiBvZiB0aGUgc2hhcmVkIG9iamVjdCB0aGF0IGlzIGxvYWRlZC5cclxuICAgICMgVGhpcyBtYXkgb2NjdXIgaW4gZW52aXJvbm1lbnRzIHdoZXJlIG11bHRpcGxlIHZlcnNpb25zIG9mIGNyeXB0b2dyYXBoeVxyXG4gICAgIyBhcmUgaW5zdGFsbGVkIGFuZCBhdmFpbGFibGUgaW4gdGhlIHB5dGhvbiBwYXRoLiBUbyBhdm9pZCBlcnJvcnMgY3JvcHBpbmdcclxuICAgICMgdXAgbGF0ZXIgdGhpcyBjb2RlIGNoZWNrcyB0aGF0IHRoZSBjdXJyZW50bHkgaW1wb3J0ZWQgcGFja2FnZSBhbmQgdGhlXHJcbiAgICAjIHNoYXJlZCBvYmplY3QgdGhhdCB3ZXJlIGxvYWRlZCBoYXZlIHRoZSBzYW1lIHZlcnNpb24gYW5kIHJhaXNlIGFuXHJcbiAgICAjIEltcG9ydEVycm9yIGlmIHRoZXkgZG8gbm90XHJcbiAgICBzb19wYWNrYWdlX3ZlcnNpb24gPSBmZmkuc3RyaW5nKGxpYi5DUllQVE9HUkFQSFlfUEFDS0FHRV9WRVJTSU9OKVxyXG4gICAgaWYgdmVyc2lvbi5lbmNvZGUoImFzY2lpIikgIT0gc29fcGFja2FnZV92ZXJzaW9uOlxyXG4gICAgICAgIHJhaXNlIEltcG9ydEVycm9yKFxyXG4gICAgICAgICAgICAiVGhlIHZlcnNpb24gb2YgY3J5cHRvZ3JhcGh5IGRvZXMgbm90IG1hdGNoIHRoZSBsb2FkZWQgIlxyXG4gICAgICAgICAgICAic2hhcmVkIG9iamVjdC4gVGhpcyBjYW4gaGFwcGVuIGlmIHlvdSBoYXZlIG11bHRpcGxlIGNvcGllcyBvZiAiXHJcbiAgICAgICAgICAgICJjcnlwdG9ncmFwaHkgaW5zdGFsbGVkIGluIHlvdXIgUHl0aG9uIHBhdGguIFBsZWFzZSB0cnkgY3JlYXRpbmcgIlxyXG4gICAgICAgICAgICAiYSBuZXcgdmlydHVhbCBlbnZpcm9ubWVudCB0byByZXNvbHZlIHRoaXMgaXNzdWUuICJcclxuICAgICAgICAgICAgIkxvYWRlZCBweXRob24gdmVyc2lvbjoge30sIHNoYXJlZCBvYmplY3QgdmVyc2lvbjoge30iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgIHZlcnNpb24sIHNvX3BhY2thZ2VfdmVyc2lvblxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbl92ZXJpZnlfcGFja2FnZV92ZXJzaW9uKGNyeXB0b2dyYXBoeS5fX3ZlcnNpb25fXylcclxuXHJcbkJpbmRpbmcuaW5pdF9zdGF0aWNfbG9ja3MoKVxyXG5cclxuX3ZlcmlmeV9vcGVuc3NsX3ZlcnNpb24oQmluZGluZy5saWIpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L2JpbmRpbmdzL29wZW5zc2wvX2NvbmRpdGlvbmFsLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX2VjMm0oKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiRUNfUE9JTlRfZ2V0X2FmZmluZV9jb29yZGluYXRlc19HRjJtIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19zc2wzX21ldGhvZCgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJTU0x2M19tZXRob2QiLFxyXG4gICAgICAgICJTU0x2M19jbGllbnRfbWV0aG9kIixcclxuICAgICAgICAiU1NMdjNfc2VydmVyX21ldGhvZCIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfMTEwX3ZlcmlmaWNhdGlvbl9wYXJhbXMoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFsiWDUwOV9DSEVDS19GTEFHX05FVkVSX0NIRUNLX1NVQkpFQ1QiXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3NldF9jZXJ0X2NiKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIlNTTF9DVFhfc2V0X2NlcnRfY2IiLFxyXG4gICAgICAgICJTU0xfc2V0X2NlcnRfY2IiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3NzbF9zdCgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJTU0xfU1RfQkVGT1JFIixcclxuICAgICAgICAiU1NMX1NUX09LIixcclxuICAgICAgICAiU1NMX1NUX0lOSVQiLFxyXG4gICAgICAgICJTU0xfU1RfUkVORUdPVElBVEUiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3Rsc19zdCgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJUTFNfU1RfQkVGT1JFIixcclxuICAgICAgICAiVExTX1NUX09LIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19zY3J5cHQoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiRVZQX1BCRV9zY3J5cHQiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX2V2cF9wa2V5X2RoeCgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJFVlBfUEtFWV9ESFgiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX21lbV9mdW5jdGlvbnMoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiQ3J5cHRvZ3JhcGh5X0NSWVBUT19zZXRfbWVtX2Z1bmN0aW9ucyIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfeDUwOV9zdG9yZV9jdHhfZ2V0X2lzc3VlcigpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJYNTA5X1NUT1JFX2dldF9nZXRfaXNzdWVyIixcclxuICAgICAgICAiWDUwOV9TVE9SRV9zZXRfZ2V0X2lzc3VlciIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfZWQ0NDgoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiRVZQX1BLRVlfRUQ0NDgiLFxyXG4gICAgICAgICJOSURfRUQ0NDgiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX2VkMjU1MTkoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiTklEX0VEMjU1MTkiLFxyXG4gICAgICAgICJFVlBfUEtFWV9FRDI1NTE5IixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19wb2x5MTMwNSgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJOSURfcG9seTEzMDUiLFxyXG4gICAgICAgICJFVlBfUEtFWV9QT0xZMTMwNSIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfb25lc2hvdF9ldnBfZGlnZXN0X3NpZ25fdmVyaWZ5KCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIkVWUF9EaWdlc3RTaWduIixcclxuICAgICAgICAiRVZQX0RpZ2VzdFZlcmlmeSIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfZXZwX2RpZ2VzdGZpbmFsX3hvZigpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJFVlBfRGlnZXN0RmluYWxYT0YiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX2V2cF9wa2V5X2dldF9zZXRfdGxzX2VuY29kZWRwb2ludCgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJFVlBfUEtFWV9nZXQxX3Rsc19lbmNvZGVkcG9pbnQiLFxyXG4gICAgICAgICJFVlBfUEtFWV9zZXQxX3Rsc19lbmNvZGVkcG9pbnQiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX2ZpcHMoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiRklQU19tb2RlX3NldCIsXHJcbiAgICAgICAgIkZJUFNfbW9kZSIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfcHNrKCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIlNTTF9DVFhfdXNlX3Bza19pZGVudGl0eV9oaW50IixcclxuICAgICAgICAiU1NMX0NUWF9zZXRfcHNrX3NlcnZlcl9jYWxsYmFjayIsXHJcbiAgICAgICAgIlNTTF9DVFhfc2V0X3Bza19jbGllbnRfY2FsbGJhY2siLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3Bza190bHN2MTMoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiU1NMX0NUWF9zZXRfcHNrX2ZpbmRfc2Vzc2lvbl9jYWxsYmFjayIsXHJcbiAgICAgICAgIlNTTF9DVFhfc2V0X3Bza191c2Vfc2Vzc2lvbl9jYWxsYmFjayIsXHJcbiAgICAgICAgIkNyeXB0b2dyYXBoeV9TU0xfU0VTU0lPTl9uZXciLFxyXG4gICAgICAgICJTU0xfQ0lQSEVSX2ZpbmQiLFxyXG4gICAgICAgICJTU0xfU0VTU0lPTl9zZXQxX21hc3Rlcl9rZXkiLFxyXG4gICAgICAgICJTU0xfU0VTU0lPTl9zZXRfY2lwaGVyIixcclxuICAgICAgICAiU1NMX1NFU1NJT05fc2V0X3Byb3RvY29sX3ZlcnNpb24iLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX2N1c3RvbV9leHQoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiU1NMX0NUWF9hZGRfY2xpZW50X2N1c3RvbV9leHQiLFxyXG4gICAgICAgICJTU0xfQ1RYX2FkZF9zZXJ2ZXJfY3VzdG9tX2V4dCIsXHJcbiAgICAgICAgIlNTTF9leHRlbnNpb25fc3VwcG9ydGVkIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19vcGVuc3NsX2NsZWFudXAoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiT1BFTlNTTF9jbGVhbnVwIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc190bHN2MTMoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiVExTMV8zX1ZFUlNJT04iLFxyXG4gICAgICAgICJTU0xfT1BfTk9fVExTdjFfMyIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfdGxzdjEzX2Z1bmN0aW9ucygpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJTU0xfVkVSSUZZX1BPU1RfSEFORFNIQUtFIixcclxuICAgICAgICAiU1NMX0NUWF9zZXRfY2lwaGVyc3VpdGVzIixcclxuICAgICAgICAiU1NMX3ZlcmlmeV9jbGllbnRfcG9zdF9oYW5kc2hha2UiLFxyXG4gICAgICAgICJTU0xfQ1RYX3NldF9wb3N0X2hhbmRzaGFrZV9hdXRoIixcclxuICAgICAgICAiU1NMX3NldF9wb3N0X2hhbmRzaGFrZV9hdXRoIixcclxuICAgICAgICAiU1NMX1NFU1NJT05fZ2V0X21heF9lYXJseV9kYXRhIixcclxuICAgICAgICAiU1NMX3dyaXRlX2Vhcmx5X2RhdGEiLFxyXG4gICAgICAgICJTU0xfcmVhZF9lYXJseV9kYXRhIixcclxuICAgICAgICAiU1NMX0NUWF9zZXRfbWF4X2Vhcmx5X2RhdGEiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX2tleWxvZygpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJTU0xfQ1RYX3NldF9rZXlsb2dfY2FsbGJhY2siLFxyXG4gICAgICAgICJTU0xfQ1RYX2dldF9rZXlsb2dfY2FsbGJhY2siLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3Jhd19rZXkoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiRVZQX1BLRVlfbmV3X3Jhd19wcml2YXRlX2tleSIsXHJcbiAgICAgICAgIkVWUF9QS0VZX25ld19yYXdfcHVibGljX2tleSIsXHJcbiAgICAgICAgIkVWUF9QS0VZX2dldF9yYXdfcHJpdmF0ZV9rZXkiLFxyXG4gICAgICAgICJFVlBfUEtFWV9nZXRfcmF3X3B1YmxpY19rZXkiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX2VuZ2luZSgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJFTkdJTkVfYnlfaWQiLFxyXG4gICAgICAgICJFTkdJTkVfaW5pdCIsXHJcbiAgICAgICAgIkVOR0lORV9maW5pc2giLFxyXG4gICAgICAgICJFTkdJTkVfZ2V0X2RlZmF1bHRfUkFORCIsXHJcbiAgICAgICAgIkVOR0lORV9zZXRfZGVmYXVsdF9SQU5EIixcclxuICAgICAgICAiRU5HSU5FX3VucmVnaXN0ZXJfUkFORCIsXHJcbiAgICAgICAgIkVOR0lORV9jdHJsX2NtZCIsXHJcbiAgICAgICAgIkVOR0lORV9mcmVlIixcclxuICAgICAgICAiRU5HSU5FX2dldF9uYW1lIixcclxuICAgICAgICAiQ3J5cHRvZ3JhcGh5X2FkZF9vc3JhbmRvbV9lbmdpbmUiLFxyXG4gICAgICAgICJFTkdJTkVfY3RybF9jbWRfc3RyaW5nIixcclxuICAgICAgICAiRU5HSU5FX2xvYWRfYnVpbHRpbl9lbmdpbmVzIixcclxuICAgICAgICAiRU5HSU5FX2xvYWRfcHJpdmF0ZV9rZXkiLFxyXG4gICAgICAgICJFTkdJTkVfbG9hZF9wdWJsaWNfa2V5IixcclxuICAgICAgICAiU1NMX0NUWF9zZXRfY2xpZW50X2NlcnRfZW5naW5lIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc192ZXJpZmllZF9jaGFpbigpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJTU0xfZ2V0MF92ZXJpZmllZF9jaGFpbiIsXHJcbiAgICBdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfc3J0cCgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJTU0xfQ1RYX3NldF90bHNleHRfdXNlX3NydHAiLFxyXG4gICAgICAgICJTU0xfc2V0X3Rsc2V4dF91c2Vfc3J0cCIsXHJcbiAgICAgICAgIlNTTF9nZXRfc2VsZWN0ZWRfc3J0cF9wcm9maWxlIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19nZXRfcHJvdG9fdmVyc2lvbigpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJTU0xfQ1RYX2dldF9taW5fcHJvdG9fdmVyc2lvbiIsXHJcbiAgICAgICAgIlNTTF9DVFhfZ2V0X21heF9wcm90b192ZXJzaW9uIixcclxuICAgICAgICAiU1NMX2dldF9taW5fcHJvdG9fdmVyc2lvbiIsXHJcbiAgICAgICAgIlNTTF9nZXRfbWF4X3Byb3RvX3ZlcnNpb24iLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3Byb3ZpZGVycygpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJPU1NMX1BST1ZJREVSX2xvYWQiLFxyXG4gICAgICAgICJPU1NMX1BST1ZJREVSX3VubG9hZCIsXHJcbiAgICAgICAgIkVSUl9MSUJfUFJPViIsXHJcbiAgICAgICAgIlBST1ZfUl9XUk9OR19GSU5BTF9CTE9DS19MRU5HVEgiLFxyXG4gICAgICAgICJQUk9WX1JfQkFEX0RFQ1JZUFQiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX29wX25vX3JlbmVnb3RpYXRpb24oKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiU1NMX09QX05PX1JFTkVHT1RJQVRJT04iLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX2R0bHNfZ2V0X2RhdGFfbXR1KCkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgIkRUTFNfZ2V0X2RhdGFfbXR1IixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc18zMDBfZmlwcygpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJFVlBfZGVmYXVsdF9wcm9wZXJ0aWVzX2lzX2ZpcHNfZW5hYmxlZCIsXHJcbiAgICAgICAgIkVWUF9kZWZhdWx0X3Byb3BlcnRpZXNfZW5hYmxlX2ZpcHMiLFxyXG4gICAgXVxyXG5cclxuXHJcbmRlZiBjcnlwdG9ncmFwaHlfaGFzX3NzbF9jb29raWUoKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICAiU1NMX09QX0NPT0tJRV9FWENIQU5HRSIsXHJcbiAgICAgICAgIkRUTFN2MV9saXN0ZW4iLFxyXG4gICAgICAgICJTU0xfQ1RYX3NldF9jb29raWVfZ2VuZXJhdGVfY2IiLFxyXG4gICAgICAgICJTU0xfQ1RYX3NldF9jb29raWVfdmVyaWZ5X2NiIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19wa2NzN19mdW5jcygpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJTTUlNRV93cml0ZV9QS0NTNyIsXHJcbiAgICAgICAgIlBFTV93cml0ZV9iaW9fUEtDUzdfc3RyZWFtIixcclxuICAgICAgICAiUEtDUzdfc2lnbl9hZGRfc2lnbmVyIixcclxuICAgICAgICAiUEtDUzdfZmluYWwiLFxyXG4gICAgICAgICJQS0NTN192ZXJpZnkiLFxyXG4gICAgICAgICJTTUlNRV9yZWFkX1BLQ1M3IixcclxuICAgICAgICAiUEtDUzdfZ2V0MF9zaWduZXJzIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19ibl9mbGFncygpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJCTl9GTEdfQ09OU1RUSU1FIixcclxuICAgICAgICAiQk5fc2V0X2ZsYWdzIixcclxuICAgICAgICAiQk5fcHJpbWVfY2hlY2tzX2Zvcl9zaXplIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc19ldnBfcGtleV9kaCgpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgICJFVlBfUEtFWV9zZXQxX0RIIixcclxuICAgIF1cclxuXHJcblxyXG5kZWYgY3J5cHRvZ3JhcGh5X2hhc18zMDBfZXZwX2NpcGhlcigpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gWyJFVlBfQ0lQSEVSX2ZldGNoIiwgIkVWUF9DSVBIRVJfZnJlZSJdXHJcblxyXG5cclxuZGVmIGNyeXB0b2dyYXBoeV9oYXNfdW5leHBlY3RlZF9lb2Zfd2hpbGVfcmVhZGluZygpIC0+IHR5cGluZy5MaXN0W3N0cl06XHJcbiAgICByZXR1cm4gWyJTU0xfUl9VTkVYUEVDVEVEX0VPRl9XSElMRV9SRUFESU5HIl1cclxuXHJcblxyXG4jIFRoaXMgaXMgYSBtYXBwaW5nIG9mXHJcbiMge2NvbmRpdGlvbjogZnVuY3Rpb24tcmV0dXJuaW5nLW5hbWVzLWRlcGVuZGVudC1vbi10aGF0LWNvbmRpdGlvbn0gc28gd2UgY2FuXHJcbiMgbG9vcCBvdmVyIHRoZW0gYW5kIGRlbGV0ZSB1bnN1cHBvcnRlZCBuYW1lcyBhdCBydW50aW1lLiBJdCB3aWxsIGJlIHJlbW92ZWRcclxuIyB3aGVuIGNmZmkgc3VwcG9ydHMgI2lmIGluIGNkZWYuIFdlIHVzZSBmdW5jdGlvbnMgaW5zdGVhZCBvZiBqdXN0IGEgZGljdCBvZlxyXG4jIGxpc3RzIHNvIHdlIGNhbiB1c2UgY292ZXJhZ2UgdG8gbWVhc3VyZSB3aGljaCBhcmUgdXNlZC5cclxuQ09ORElUSU9OQUxfTkFNRVMgPSB7XHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19FQzJNIjogY3J5cHRvZ3JhcGh5X2hhc19lYzJtLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfU1NMM19NRVRIT0QiOiBjcnlwdG9ncmFwaHlfaGFzX3NzbDNfbWV0aG9kLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfMTEwX1ZFUklGSUNBVElPTl9QQVJBTVMiOiAoXHJcbiAgICAgICAgY3J5cHRvZ3JhcGh5X2hhc18xMTBfdmVyaWZpY2F0aW9uX3BhcmFtc1xyXG4gICAgKSxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX1NFVF9DRVJUX0NCIjogY3J5cHRvZ3JhcGh5X2hhc19zZXRfY2VydF9jYixcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX1NTTF9TVCI6IGNyeXB0b2dyYXBoeV9oYXNfc3NsX3N0LFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfVExTX1NUIjogY3J5cHRvZ3JhcGh5X2hhc190bHNfc3QsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19TQ1JZUFQiOiBjcnlwdG9ncmFwaHlfaGFzX3NjcnlwdCxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX0VWUF9QS0VZX0RIWCI6IGNyeXB0b2dyYXBoeV9oYXNfZXZwX3BrZXlfZGh4LFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfTUVNX0ZVTkNUSU9OUyI6IGNyeXB0b2dyYXBoeV9oYXNfbWVtX2Z1bmN0aW9ucyxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX1g1MDlfU1RPUkVfQ1RYX0dFVF9JU1NVRVIiOiAoXHJcbiAgICAgICAgY3J5cHRvZ3JhcGh5X2hhc194NTA5X3N0b3JlX2N0eF9nZXRfaXNzdWVyXHJcbiAgICApLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfRUQ0NDgiOiBjcnlwdG9ncmFwaHlfaGFzX2VkNDQ4LFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfRUQyNTUxOSI6IGNyeXB0b2dyYXBoeV9oYXNfZWQyNTUxOSxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX1BPTFkxMzA1IjogY3J5cHRvZ3JhcGh5X2hhc19wb2x5MTMwNSxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX09ORVNIT1RfRVZQX0RJR0VTVF9TSUdOX1ZFUklGWSI6IChcclxuICAgICAgICBjcnlwdG9ncmFwaHlfaGFzX29uZXNob3RfZXZwX2RpZ2VzdF9zaWduX3ZlcmlmeVxyXG4gICAgKSxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX0VWUF9QS0VZX2dldF9zZXRfdGxzX2VuY29kZWRwb2ludCI6IChcclxuICAgICAgICBjcnlwdG9ncmFwaHlfaGFzX2V2cF9wa2V5X2dldF9zZXRfdGxzX2VuY29kZWRwb2ludFxyXG4gICAgKSxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX0ZJUFMiOiBjcnlwdG9ncmFwaHlfaGFzX2ZpcHMsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19QU0siOiBjcnlwdG9ncmFwaHlfaGFzX3BzayxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX1BTS19UTFN2MV8zIjogY3J5cHRvZ3JhcGh5X2hhc19wc2tfdGxzdjEzLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfQ1VTVE9NX0VYVCI6IGNyeXB0b2dyYXBoeV9oYXNfY3VzdG9tX2V4dCxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX09QRU5TU0xfQ0xFQU5VUCI6IGNyeXB0b2dyYXBoeV9oYXNfb3BlbnNzbF9jbGVhbnVwLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfVExTdjFfMyI6IGNyeXB0b2dyYXBoeV9oYXNfdGxzdjEzLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfVExTdjFfM19GVU5DVElPTlMiOiBjcnlwdG9ncmFwaHlfaGFzX3Rsc3YxM19mdW5jdGlvbnMsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19LRVlMT0ciOiBjcnlwdG9ncmFwaHlfaGFzX2tleWxvZyxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX1JBV19LRVkiOiBjcnlwdG9ncmFwaHlfaGFzX3Jhd19rZXksXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19FVlBfRElHRVNURklOQUxfWE9GIjogKFxyXG4gICAgICAgIGNyeXB0b2dyYXBoeV9oYXNfZXZwX2RpZ2VzdGZpbmFsX3hvZlxyXG4gICAgKSxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX0VOR0lORSI6IGNyeXB0b2dyYXBoeV9oYXNfZW5naW5lLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfVkVSSUZJRURfQ0hBSU4iOiBjcnlwdG9ncmFwaHlfaGFzX3ZlcmlmaWVkX2NoYWluLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfU1JUUCI6IGNyeXB0b2dyYXBoeV9oYXNfc3J0cCxcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX0dFVF9QUk9UT19WRVJTSU9OIjogY3J5cHRvZ3JhcGh5X2hhc19nZXRfcHJvdG9fdmVyc2lvbixcclxuICAgICJDcnlwdG9ncmFwaHlfSEFTX1BST1ZJREVSUyI6IGNyeXB0b2dyYXBoeV9oYXNfcHJvdmlkZXJzLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfT1BfTk9fUkVORUdPVElBVElPTiI6IChcclxuICAgICAgICBjcnlwdG9ncmFwaHlfaGFzX29wX25vX3JlbmVnb3RpYXRpb25cclxuICAgICksXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19EVExTX0dFVF9EQVRBX01UVSI6IGNyeXB0b2dyYXBoeV9oYXNfZHRsc19nZXRfZGF0YV9tdHUsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU18zMDBfRklQUyI6IGNyeXB0b2dyYXBoeV9oYXNfMzAwX2ZpcHMsXHJcbiAgICAiQ3J5cHRvZ3JhcGh5X0hBU19TU0xfQ09PS0lFIjogY3J5cHRvZ3JhcGh5X2hhc19zc2xfY29va2llLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfUEtDUzdfRlVOQ1MiOiBjcnlwdG9ncmFwaHlfaGFzX3BrY3M3X2Z1bmNzLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfQk5fRkxBR1MiOiBjcnlwdG9ncmFwaHlfaGFzX2JuX2ZsYWdzLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfRVZQX1BLRVlfREgiOiBjcnlwdG9ncmFwaHlfaGFzX2V2cF9wa2V5X2RoLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfMzAwX0VWUF9DSVBIRVIiOiBjcnlwdG9ncmFwaHlfaGFzXzMwMF9ldnBfY2lwaGVyLFxyXG4gICAgIkNyeXB0b2dyYXBoeV9IQVNfVU5FWFBFQ1RFRF9FT0ZfV0hJTEVfUkVBRElORyI6IChcclxuICAgICAgICBjcnlwdG9ncmFwaHlfaGFzX3VuZXhwZWN0ZWRfZW9mX3doaWxlX3JlYWRpbmdcclxuICAgICksXHJcbn1cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9zZXJpYWxpemF0aW9uL19faW5pdF9fLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLl9zZXJpYWxpemF0aW9uIGltcG9ydCAoXHJcbiAgICBCZXN0QXZhaWxhYmxlRW5jcnlwdGlvbixcclxuICAgIEVuY29kaW5nLFxyXG4gICAgS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICBOb0VuY3J5cHRpb24sXHJcbiAgICBQYXJhbWV0ZXJGb3JtYXQsXHJcbiAgICBQcml2YXRlRm9ybWF0LFxyXG4gICAgUHVibGljRm9ybWF0LFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLnNlcmlhbGl6YXRpb24uYmFzZSBpbXBvcnQgKFxyXG4gICAgbG9hZF9kZXJfcGFyYW1ldGVycyxcclxuICAgIGxvYWRfZGVyX3ByaXZhdGVfa2V5LFxyXG4gICAgbG9hZF9kZXJfcHVibGljX2tleSxcclxuICAgIGxvYWRfcGVtX3BhcmFtZXRlcnMsXHJcbiAgICBsb2FkX3BlbV9wcml2YXRlX2tleSxcclxuICAgIGxvYWRfcGVtX3B1YmxpY19rZXksXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuc2VyaWFsaXphdGlvbi5zc2ggaW1wb3J0IChcclxuICAgIGxvYWRfc3NoX3ByaXZhdGVfa2V5LFxyXG4gICAgbG9hZF9zc2hfcHVibGljX2tleSxcclxuKVxyXG5cclxuXHJcbl9fYWxsX18gPSBbXHJcbiAgICAibG9hZF9kZXJfcGFyYW1ldGVycyIsXHJcbiAgICAibG9hZF9kZXJfcHJpdmF0ZV9rZXkiLFxyXG4gICAgImxvYWRfZGVyX3B1YmxpY19rZXkiLFxyXG4gICAgImxvYWRfcGVtX3BhcmFtZXRlcnMiLFxyXG4gICAgImxvYWRfcGVtX3ByaXZhdGVfa2V5IixcclxuICAgICJsb2FkX3BlbV9wdWJsaWNfa2V5IixcclxuICAgICJsb2FkX3NzaF9wcml2YXRlX2tleSIsXHJcbiAgICAibG9hZF9zc2hfcHVibGljX2tleSIsXHJcbiAgICAiRW5jb2RpbmciLFxyXG4gICAgIlByaXZhdGVGb3JtYXQiLFxyXG4gICAgIlB1YmxpY0Zvcm1hdCIsXHJcbiAgICAiUGFyYW1ldGVyRm9ybWF0IixcclxuICAgICJLZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbiIsXHJcbiAgICAiQmVzdEF2YWlsYWJsZUVuY3J5cHRpb24iLFxyXG4gICAgIk5vRW5jcnlwdGlvbiIsXHJcbl1cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9fc2VyaWFsaXphdGlvbi5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCBhYmNcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5cclxuIyBUaGlzIGV4aXN0cyB0byBicmVhayBhbiBpbXBvcnQgY3ljbGUuIFRoZXNlIGNsYXNzZXMgYXJlIG5vcm1hbGx5IGFjY2Vzc2libGVcclxuIyBmcm9tIHRoZSBzZXJpYWxpemF0aW9uIG1vZHVsZS5cclxuXHJcblxyXG5jbGFzcyBFbmNvZGluZyh1dGlscy5FbnVtKTpcclxuICAgIFBFTSA9ICJQRU0iXHJcbiAgICBERVIgPSAiREVSIlxyXG4gICAgT3BlblNTSCA9ICJPcGVuU1NIIlxyXG4gICAgUmF3ID0gIlJhdyJcclxuICAgIFg5NjIgPSAiQU5TSSBYOS42MiJcclxuICAgIFNNSU1FID0gIlMvTUlNRSJcclxuXHJcblxyXG5jbGFzcyBQcml2YXRlRm9ybWF0KHV0aWxzLkVudW0pOlxyXG4gICAgUEtDUzggPSAiUEtDUzgiXHJcbiAgICBUcmFkaXRpb25hbE9wZW5TU0wgPSAiVHJhZGl0aW9uYWxPcGVuU1NMIlxyXG4gICAgUmF3ID0gIlJhdyJcclxuICAgIE9wZW5TU0ggPSAiT3BlblNTSCJcclxuXHJcblxyXG5jbGFzcyBQdWJsaWNGb3JtYXQodXRpbHMuRW51bSk6XHJcbiAgICBTdWJqZWN0UHVibGljS2V5SW5mbyA9ICJYLjUwOSBzdWJqZWN0UHVibGljS2V5SW5mbyB3aXRoIFBLQ1MjMSJcclxuICAgIFBLQ1MxID0gIlJhdyBQS0NTIzEiXHJcbiAgICBPcGVuU1NIID0gIk9wZW5TU0giXHJcbiAgICBSYXcgPSAiUmF3IlxyXG4gICAgQ29tcHJlc3NlZFBvaW50ID0gIlg5LjYyIENvbXByZXNzZWQgUG9pbnQiXHJcbiAgICBVbmNvbXByZXNzZWRQb2ludCA9ICJYOS42MiBVbmNvbXByZXNzZWQgUG9pbnQiXHJcblxyXG5cclxuY2xhc3MgUGFyYW1ldGVyRm9ybWF0KHV0aWxzLkVudW0pOlxyXG4gICAgUEtDUzMgPSAiUEtDUzMiXHJcblxyXG5cclxuY2xhc3MgS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24obWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBCZXN0QXZhaWxhYmxlRW5jcnlwdGlvbihLZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbik6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgcGFzc3dvcmQ6IGJ5dGVzKTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShwYXNzd29yZCwgYnl0ZXMpIG9yIGxlbihwYXNzd29yZCkgPT0gMDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiUGFzc3dvcmQgbXVzdCBiZSAxIG9yIG1vcmUgYnl0ZXMuIilcclxuXHJcbiAgICAgICAgc2VsZi5wYXNzd29yZCA9IHBhc3N3b3JkXHJcblxyXG5cclxuY2xhc3MgTm9FbmNyeXB0aW9uKEtleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uKTpcclxuICAgIHBhc3NcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9zZXJpYWxpemF0aW9uL2Jhc2UucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYyBpbXBvcnQgZGhcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYy50eXBlcyBpbXBvcnQgKFxyXG4gICAgUFJJVkFURV9LRVlfVFlQRVMsXHJcbiAgICBQVUJMSUNfS0VZX1RZUEVTLFxyXG4pXHJcblxyXG5cclxuZGVmIGxvYWRfcGVtX3ByaXZhdGVfa2V5KFxyXG4gICAgZGF0YTogYnl0ZXMsXHJcbiAgICBwYXNzd29yZDogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lLFxyXG4pIC0+IFBSSVZBVEVfS0VZX1RZUEVTOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZCBhcyBvc3NsXHJcblxyXG4gICAgcmV0dXJuIG9zc2wubG9hZF9wZW1fcHJpdmF0ZV9rZXkoZGF0YSwgcGFzc3dvcmQpXHJcblxyXG5cclxuZGVmIGxvYWRfcGVtX3B1YmxpY19rZXkoXHJcbiAgICBkYXRhOiBieXRlcywgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuKSAtPiBQVUJMSUNfS0VZX1RZUEVTOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZCBhcyBvc3NsXHJcblxyXG4gICAgcmV0dXJuIG9zc2wubG9hZF9wZW1fcHVibGljX2tleShkYXRhKVxyXG5cclxuXHJcbmRlZiBsb2FkX3BlbV9wYXJhbWV0ZXJzKFxyXG4gICAgZGF0YTogYnl0ZXMsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lXHJcbikgLT4gImRoLkRIUGFyYW1ldGVycyI6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kIGFzIG9zc2xcclxuXHJcbiAgICByZXR1cm4gb3NzbC5sb2FkX3BlbV9wYXJhbWV0ZXJzKGRhdGEpXHJcblxyXG5cclxuZGVmIGxvYWRfZGVyX3ByaXZhdGVfa2V5KFxyXG4gICAgZGF0YTogYnl0ZXMsXHJcbiAgICBwYXNzd29yZDogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lLFxyXG4pIC0+IFBSSVZBVEVfS0VZX1RZUEVTOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZCBhcyBvc3NsXHJcblxyXG4gICAgcmV0dXJuIG9zc2wubG9hZF9kZXJfcHJpdmF0ZV9rZXkoZGF0YSwgcGFzc3dvcmQpXHJcblxyXG5cclxuZGVmIGxvYWRfZGVyX3B1YmxpY19rZXkoXHJcbiAgICBkYXRhOiBieXRlcywgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuKSAtPiBQVUJMSUNfS0VZX1RZUEVTOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZCBhcyBvc3NsXHJcblxyXG4gICAgcmV0dXJuIG9zc2wubG9hZF9kZXJfcHVibGljX2tleShkYXRhKVxyXG5cclxuXHJcbmRlZiBsb2FkX2Rlcl9wYXJhbWV0ZXJzKFxyXG4gICAgZGF0YTogYnl0ZXMsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lXHJcbikgLT4gImRoLkRIUGFyYW1ldGVycyI6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kIGFzIG9zc2xcclxuXHJcbiAgICByZXR1cm4gb3NzbC5sb2FkX2Rlcl9wYXJhbWV0ZXJzKGRhdGEpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvYXN5bW1ldHJpYy9fX2luaXRfXy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9hc3ltbWV0cmljL2RoLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IF9zZXJpYWxpemF0aW9uXHJcblxyXG5cclxuX01JTl9NT0RVTFVTX1NJWkUgPSA1MTJcclxuXHJcblxyXG5kZWYgZ2VuZXJhdGVfcGFyYW1ldGVycyhcclxuICAgIGdlbmVyYXRvcjogaW50LCBrZXlfc2l6ZTogaW50LCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZVxyXG4pIC0+ICJESFBhcmFtZXRlcnMiOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZCBhcyBvc3NsXHJcblxyXG4gICAgcmV0dXJuIG9zc2wuZ2VuZXJhdGVfZGhfcGFyYW1ldGVycyhnZW5lcmF0b3IsIGtleV9zaXplKVxyXG5cclxuXHJcbmNsYXNzIERIUGFyYW1ldGVyTnVtYmVyczpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwOiBpbnQsIGc6IGludCwgcTogdHlwaW5nLk9wdGlvbmFsW2ludF0gPSBOb25lKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHAsIGludCkgb3Igbm90IGlzaW5zdGFuY2UoZywgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJwIGFuZCBnIG11c3QgYmUgaW50ZWdlcnMiKVxyXG4gICAgICAgIGlmIHEgaXMgbm90IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKHEsIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigicSBtdXN0IGJlIGludGVnZXIgb3IgTm9uZSIpXHJcblxyXG4gICAgICAgIGlmIGcgPCAyOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJESCBnZW5lcmF0b3IgbXVzdCBiZSAyIG9yIGdyZWF0ZXIiKVxyXG5cclxuICAgICAgICBpZiBwLmJpdF9sZW5ndGgoKSA8IF9NSU5fTU9EVUxVU19TSVpFOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInAgKG1vZHVsdXMpIG11c3QgYmUgYXQgbGVhc3Qge30tYml0Ii5mb3JtYXQoX01JTl9NT0RVTFVTX1NJWkUpXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fcCA9IHBcclxuICAgICAgICBzZWxmLl9nID0gZ1xyXG4gICAgICAgIHNlbGYuX3EgPSBxXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBESFBhcmFtZXRlck51bWJlcnMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5fcCA9PSBvdGhlci5fcCBhbmQgc2VsZi5fZyA9PSBvdGhlci5fZyBhbmQgc2VsZi5fcSA9PSBvdGhlci5fcVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcGFyYW1ldGVycyhzZWxmLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZSkgLT4gIkRIUGFyYW1ldGVycyI6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgKFxyXG4gICAgICAgICAgICBiYWNrZW5kIGFzIG9zc2wsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gb3NzbC5sb2FkX2RoX3BhcmFtZXRlcl9udW1iZXJzKHNlbGYpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcChzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBnKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZ1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHEoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3FcclxuXHJcblxyXG5jbGFzcyBESFB1YmxpY051bWJlcnM6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgeTogaW50LCBwYXJhbWV0ZXJfbnVtYmVyczogREhQYXJhbWV0ZXJOdW1iZXJzKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHksIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigieSBtdXN0IGJlIGFuIGludGVnZXIuIilcclxuXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocGFyYW1ldGVyX251bWJlcnMsIERIUGFyYW1ldGVyTnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJwYXJhbWV0ZXJzIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgREhQYXJhbWV0ZXJOdW1iZXJzLiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl95ID0geVxyXG4gICAgICAgIHNlbGYuX3BhcmFtZXRlcl9udW1iZXJzID0gcGFyYW1ldGVyX251bWJlcnNcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIERIUHVibGljTnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLl95ID09IG90aGVyLl95XHJcbiAgICAgICAgICAgIGFuZCBzZWxmLl9wYXJhbWV0ZXJfbnVtYmVycyA9PSBvdGhlci5fcGFyYW1ldGVyX251bWJlcnNcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZiwgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUpIC0+ICJESFB1YmxpY0tleSI6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgKFxyXG4gICAgICAgICAgICBiYWNrZW5kIGFzIG9zc2wsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gb3NzbC5sb2FkX2RoX3B1YmxpY19udW1iZXJzKHNlbGYpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgeShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3lcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwYXJhbWV0ZXJfbnVtYmVycyhzZWxmKSAtPiBESFBhcmFtZXRlck51bWJlcnM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BhcmFtZXRlcl9udW1iZXJzXHJcblxyXG5cclxuY2xhc3MgREhQcml2YXRlTnVtYmVyczpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB4OiBpbnQsIHB1YmxpY19udW1iZXJzOiBESFB1YmxpY051bWJlcnMpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoeCwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ4IG11c3QgYmUgYW4gaW50ZWdlci4iKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShwdWJsaWNfbnVtYmVycywgREhQdWJsaWNOdW1iZXJzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInB1YmxpY19udW1iZXJzIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgIiAiREhQdWJsaWNOdW1iZXJzLiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl94ID0geFxyXG4gICAgICAgIHNlbGYuX3B1YmxpY19udW1iZXJzID0gcHVibGljX251bWJlcnNcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIERIUHJpdmF0ZU51bWJlcnMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5feCA9PSBvdGhlci5feFxyXG4gICAgICAgICAgICBhbmQgc2VsZi5fcHVibGljX251bWJlcnMgPT0gb3RoZXIuX3B1YmxpY19udW1iZXJzXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwcml2YXRlX2tleShzZWxmLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZSkgLT4gIkRIUHJpdmF0ZUtleSI6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgKFxyXG4gICAgICAgICAgICBiYWNrZW5kIGFzIG9zc2wsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gb3NzbC5sb2FkX2RoX3ByaXZhdGVfbnVtYmVycyhzZWxmKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHB1YmxpY19udW1iZXJzKHNlbGYpIC0+IERIUHVibGljTnVtYmVyczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcHVibGljX251bWJlcnNcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB4KHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5feFxyXG5cclxuXHJcbmNsYXNzIERIUGFyYW1ldGVycyhtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGdlbmVyYXRlX3ByaXZhdGVfa2V5KHNlbGYpIC0+ICJESFByaXZhdGVLZXkiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEdlbmVyYXRlcyBhbmQgcmV0dXJucyBhIERIUHJpdmF0ZUtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcGFyYW1ldGVyX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IF9zZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogX3NlcmlhbGl6YXRpb24uUGFyYW1ldGVyRm9ybWF0LFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBwYXJhbWV0ZXJzIHNlcmlhbGl6ZWQgYXMgYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHBhcmFtZXRlcl9udW1iZXJzKHNlbGYpIC0+IERIUGFyYW1ldGVyTnVtYmVyczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIGEgREhQYXJhbWV0ZXJOdW1iZXJzLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbkRIUGFyYW1ldGVyc1dpdGhTZXJpYWxpemF0aW9uID0gREhQYXJhbWV0ZXJzXHJcblxyXG5cclxuY2xhc3MgREhQdWJsaWNLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgYml0IGxlbmd0aCBvZiB0aGUgcHJpbWUgbW9kdWx1cy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcGFyYW1ldGVycyhzZWxmKSAtPiBESFBhcmFtZXRlcnM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIERIUGFyYW1ldGVycyBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcHVibGljIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX251bWJlcnMoc2VsZikgLT4gREhQdWJsaWNOdW1iZXJzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYSBESFB1YmxpY051bWJlcnMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBfc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IF9zZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUga2V5IHNlcmlhbGl6ZWQgYXMgYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuREhQdWJsaWNLZXlXaXRoU2VyaWFsaXphdGlvbiA9IERIUHVibGljS2V5XHJcblxyXG5cclxuY2xhc3MgREhQcml2YXRlS2V5KG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIGJpdCBsZW5ndGggb2YgdGhlIHByaW1lIG1vZHVsdXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gREhQdWJsaWNLZXk6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIERIUHVibGljS2V5IGFzc29jaWF0ZWQgd2l0aCB0aGlzIHByaXZhdGUga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwYXJhbWV0ZXJzKHNlbGYpIC0+IERIUGFyYW1ldGVyczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgREhQYXJhbWV0ZXJzIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBwcml2YXRlIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZXhjaGFuZ2Uoc2VsZiwgcGVlcl9wdWJsaWNfa2V5OiBESFB1YmxpY0tleSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgR2l2ZW4gcGVlclwncyBESFB1YmxpY0tleSwgY2Fycnkgb3V0IHRoZSBrZXkgZXhjaGFuZ2UgYW5kXHJcbiAgICAgICAgcmV0dXJuIHNoYXJlZCBrZXkgYXMgYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHByaXZhdGVfbnVtYmVycyhzZWxmKSAtPiBESFByaXZhdGVOdW1iZXJzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYSBESFByaXZhdGVOdW1iZXJzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwcml2YXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IF9zZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogX3NlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogX3NlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIGtleSBzZXJpYWxpemVkIGFzIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbkRIUHJpdmF0ZUtleVdpdGhTZXJpYWxpemF0aW9uID0gREhQcml2YXRlS2V5XHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvYXN5bW1ldHJpYy90eXBlcy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMgaW1wb3J0IChcclxuICAgIGRoLFxyXG4gICAgZHNhLFxyXG4gICAgZWMsXHJcbiAgICBlZDI1NTE5LFxyXG4gICAgZWQ0NDgsXHJcbiAgICByc2EsXHJcbiAgICB4MjU1MTksXHJcbiAgICB4NDQ4LFxyXG4pXHJcblxyXG5cclxuIyBFdmVyeSBhc3ltbWV0cmljIGtleSB0eXBlXHJcblBVQkxJQ19LRVlfVFlQRVMgPSB0eXBpbmcuVW5pb25bXHJcbiAgICBkaC5ESFB1YmxpY0tleSxcclxuICAgIGRzYS5EU0FQdWJsaWNLZXksXHJcbiAgICByc2EuUlNBUHVibGljS2V5LFxyXG4gICAgZWMuRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleSxcclxuICAgIGVkMjU1MTkuRWQyNTUxOVB1YmxpY0tleSxcclxuICAgIGVkNDQ4LkVkNDQ4UHVibGljS2V5LFxyXG4gICAgeDI1NTE5LlgyNTUxOVB1YmxpY0tleSxcclxuICAgIHg0NDguWDQ0OFB1YmxpY0tleSxcclxuXVxyXG4jIEV2ZXJ5IGFzeW1tZXRyaWMga2V5IHR5cGVcclxuUFJJVkFURV9LRVlfVFlQRVMgPSB0eXBpbmcuVW5pb25bXHJcbiAgICBkaC5ESFByaXZhdGVLZXksXHJcbiAgICBlZDI1NTE5LkVkMjU1MTlQcml2YXRlS2V5LFxyXG4gICAgZWQ0NDguRWQ0NDhQcml2YXRlS2V5LFxyXG4gICAgcnNhLlJTQVByaXZhdGVLZXksXHJcbiAgICBkc2EuRFNBUHJpdmF0ZUtleSxcclxuICAgIGVjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5LFxyXG4gICAgeDI1NTE5LlgyNTUxOVByaXZhdGVLZXksXHJcbiAgICB4NDQ4Llg0NDhQcml2YXRlS2V5LFxyXG5dXHJcbiMgSnVzdCB0aGUga2V5IHR5cGVzIHdlIGFsbG93IHRvIGJlIHVzZWQgZm9yIHg1MDkgc2lnbmluZy4gVGhpcyBtaXJyb3JzXHJcbiMgdGhlIGNlcnRpZmljYXRlIHB1YmxpYyBrZXkgdHlwZXNcclxuQ0VSVElGSUNBVEVfUFJJVkFURV9LRVlfVFlQRVMgPSB0eXBpbmcuVW5pb25bXHJcbiAgICBlZDI1NTE5LkVkMjU1MTlQcml2YXRlS2V5LFxyXG4gICAgZWQ0NDguRWQ0NDhQcml2YXRlS2V5LFxyXG4gICAgcnNhLlJTQVByaXZhdGVLZXksXHJcbiAgICBkc2EuRFNBUHJpdmF0ZUtleSxcclxuICAgIGVjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5LFxyXG5dXHJcbiMgSnVzdCB0aGUga2V5IHR5cGVzIHdlIGFsbG93IHRvIGJlIHVzZWQgZm9yIHg1MDkgc2lnbmluZy4gVGhpcyBtaXJyb3JzXHJcbiMgdGhlIGNlcnRpZmljYXRlIHByaXZhdGUga2V5IHR5cGVzXHJcbkNFUlRJRklDQVRFX0lTU1VFUl9QVUJMSUNfS0VZX1RZUEVTID0gdHlwaW5nLlVuaW9uW1xyXG4gICAgZHNhLkRTQVB1YmxpY0tleSxcclxuICAgIHJzYS5SU0FQdWJsaWNLZXksXHJcbiAgICBlYy5FbGxpcHRpY0N1cnZlUHVibGljS2V5LFxyXG4gICAgZWQyNTUxOS5FZDI1NTE5UHVibGljS2V5LFxyXG4gICAgZWQ0NDguRWQ0NDhQdWJsaWNLZXksXHJcbl1cclxuIyBUaGlzIHR5cGUgcmVtb3ZlcyBESFB1YmxpY0tleS4geDQ0OC94MjU1MTkgY2FuIGJlIGEgcHVibGljIGtleVxyXG4jIGJ1dCBjYW5ub3QgYmUgdXNlZCBpbiBzaWduaW5nIHNvIHRoZXkgYXJlIGFsbG93ZWQgaGVyZS5cclxuQ0VSVElGSUNBVEVfUFVCTElDX0tFWV9UWVBFUyA9IHR5cGluZy5VbmlvbltcclxuICAgIGRzYS5EU0FQdWJsaWNLZXksXHJcbiAgICByc2EuUlNBUHVibGljS2V5LFxyXG4gICAgZWMuRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleSxcclxuICAgIGVkMjU1MTkuRWQyNTUxOVB1YmxpY0tleSxcclxuICAgIGVkNDQ4LkVkNDQ4UHVibGljS2V5LFxyXG4gICAgeDI1NTE5LlgyNTUxOVB1YmxpY0tleSxcclxuICAgIHg0NDguWDQ0OFB1YmxpY0tleSxcclxuXVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2FzeW1tZXRyaWMvZHNhLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IF9zZXJpYWxpemF0aW9uLCBoYXNoZXNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYyBpbXBvcnQgKFxyXG4gICAgdXRpbHMgYXMgYXN5bV91dGlscyxcclxuKVxyXG5cclxuXHJcbmNsYXNzIERTQVBhcmFtZXRlcnMobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBnZW5lcmF0ZV9wcml2YXRlX2tleShzZWxmKSAtPiAiRFNBUHJpdmF0ZUtleSI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgR2VuZXJhdGVzIGFuZCByZXR1cm5zIGEgRFNBUHJpdmF0ZUtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcGFyYW1ldGVyX251bWJlcnMoc2VsZikgLT4gIkRTQVBhcmFtZXRlck51bWJlcnMiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYSBEU0FQYXJhbWV0ZXJOdW1iZXJzLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbkRTQVBhcmFtZXRlcnNXaXRoTnVtYmVycyA9IERTQVBhcmFtZXRlcnNcclxuXHJcblxyXG5jbGFzcyBEU0FQcml2YXRlS2V5KG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIGJpdCBsZW5ndGggb2YgdGhlIHByaW1lIG1vZHVsdXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gIkRTQVB1YmxpY0tleSI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIERTQVB1YmxpY0tleSBhc3NvY2lhdGVkIHdpdGggdGhpcyBwcml2YXRlIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcGFyYW1ldGVycyhzZWxmKSAtPiBEU0FQYXJhbWV0ZXJzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBEU0FQYXJhbWV0ZXJzIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBwcml2YXRlIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgc2lnbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFsZ29yaXRobTogdHlwaW5nLlVuaW9uW2FzeW1fdXRpbHMuUHJlaGFzaGVkLCBoYXNoZXMuSGFzaEFsZ29yaXRobV0sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNpZ25zIHRoZSBkYXRhXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHByaXZhdGVfbnVtYmVycyhzZWxmKSAtPiAiRFNBUHJpdmF0ZU51bWJlcnMiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYSBEU0FQcml2YXRlTnVtYmVycy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBfc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IF9zZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQsXHJcbiAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG06IF9zZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBrZXkgc2VyaWFsaXplZCBhcyBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5EU0FQcml2YXRlS2V5V2l0aFNlcmlhbGl6YXRpb24gPSBEU0FQcml2YXRlS2V5XHJcblxyXG5cclxuY2xhc3MgRFNBUHVibGljS2V5KG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIGJpdCBsZW5ndGggb2YgdGhlIHByaW1lIG1vZHVsdXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHBhcmFtZXRlcnMoc2VsZikgLT4gRFNBUGFyYW1ldGVyczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgRFNBUGFyYW1ldGVycyBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcHVibGljIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX251bWJlcnMoc2VsZikgLT4gIkRTQVB1YmxpY051bWJlcnMiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYSBEU0FQdWJsaWNOdW1iZXJzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogX3NlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBfc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIGtleSBzZXJpYWxpemVkIGFzIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiB2ZXJpZnkoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBzaWduYXR1cmU6IGJ5dGVzLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFsZ29yaXRobTogdHlwaW5nLlVuaW9uW2FzeW1fdXRpbHMuUHJlaGFzaGVkLCBoYXNoZXMuSGFzaEFsZ29yaXRobV0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVmVyaWZpZXMgdGhlIHNpZ25hdHVyZSBvZiB0aGUgZGF0YS5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5EU0FQdWJsaWNLZXlXaXRoU2VyaWFsaXphdGlvbiA9IERTQVB1YmxpY0tleVxyXG5cclxuXHJcbmNsYXNzIERTQVBhcmFtZXRlck51bWJlcnM6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgcDogaW50LCBxOiBpbnQsIGc6IGludCk6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBub3QgaXNpbnN0YW5jZShwLCBpbnQpXHJcbiAgICAgICAgICAgIG9yIG5vdCBpc2luc3RhbmNlKHEsIGludClcclxuICAgICAgICAgICAgb3Igbm90IGlzaW5zdGFuY2UoZywgaW50KVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJEU0FQYXJhbWV0ZXJOdW1iZXJzIHAsIHEsIGFuZCBnIGFyZ3VtZW50cyBtdXN0IGJlIGludGVnZXJzLiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9wID0gcFxyXG4gICAgICAgIHNlbGYuX3EgPSBxXHJcbiAgICAgICAgc2VsZi5fZyA9IGdcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHEoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9xXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2dcclxuXHJcbiAgICBkZWYgcGFyYW1ldGVycyhzZWxmLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZSkgLT4gRFNBUGFyYW1ldGVyczpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCAoXHJcbiAgICAgICAgICAgIGJhY2tlbmQgYXMgb3NzbCxcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBvc3NsLmxvYWRfZHNhX3BhcmFtZXRlcl9udW1iZXJzKHNlbGYpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBEU0FQYXJhbWV0ZXJOdW1iZXJzKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLnAgPT0gb3RoZXIucCBhbmQgc2VsZi5xID09IG90aGVyLnEgYW5kIHNlbGYuZyA9PSBvdGhlci5nXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAiPERTQVBhcmFtZXRlck51bWJlcnMocD17c2VsZi5wfSwgcT17c2VsZi5xfSwgIlxyXG4gICAgICAgICAgICAiZz17c2VsZi5nfSk+Ii5mb3JtYXQoc2VsZj1zZWxmKVxyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBEU0FQdWJsaWNOdW1iZXJzOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHk6IGludCwgcGFyYW1ldGVyX251bWJlcnM6IERTQVBhcmFtZXRlck51bWJlcnMpOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHksIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiRFNBUHVibGljTnVtYmVycyB5IGFyZ3VtZW50IG11c3QgYmUgYW4gaW50ZWdlci4iKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShwYXJhbWV0ZXJfbnVtYmVycywgRFNBUGFyYW1ldGVyTnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJwYXJhbWV0ZXJfbnVtYmVycyBtdXN0IGJlIGEgRFNBUGFyYW1ldGVyTnVtYmVycyBpbnN0YW5jZS4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5feSA9IHlcclxuICAgICAgICBzZWxmLl9wYXJhbWV0ZXJfbnVtYmVycyA9IHBhcmFtZXRlcl9udW1iZXJzXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgeShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3lcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwYXJhbWV0ZXJfbnVtYmVycyhzZWxmKSAtPiBEU0FQYXJhbWV0ZXJOdW1iZXJzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wYXJhbWV0ZXJfbnVtYmVyc1xyXG5cclxuICAgIGRlZiBwdWJsaWNfa2V5KHNlbGYsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lKSAtPiBEU0FQdWJsaWNLZXk6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgKFxyXG4gICAgICAgICAgICBiYWNrZW5kIGFzIG9zc2wsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gb3NzbC5sb2FkX2RzYV9wdWJsaWNfbnVtYmVycyhzZWxmKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgRFNBUHVibGljTnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLnkgPT0gb3RoZXIueVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5wYXJhbWV0ZXJfbnVtYmVycyA9PSBvdGhlci5wYXJhbWV0ZXJfbnVtYmVyc1xyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICI8RFNBUHVibGljTnVtYmVycyh5PXtzZWxmLnl9LCAiXHJcbiAgICAgICAgICAgICJwYXJhbWV0ZXJfbnVtYmVycz17c2VsZi5wYXJhbWV0ZXJfbnVtYmVyc30pPiIuZm9ybWF0KHNlbGY9c2VsZilcclxuICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgRFNBUHJpdmF0ZU51bWJlcnM6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgeDogaW50LCBwdWJsaWNfbnVtYmVyczogRFNBUHVibGljTnVtYmVycyk6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoeCwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJEU0FQcml2YXRlTnVtYmVycyB4IGFyZ3VtZW50IG11c3QgYmUgYW4gaW50ZWdlci4iKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShwdWJsaWNfbnVtYmVycywgRFNBUHVibGljTnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJwdWJsaWNfbnVtYmVycyBtdXN0IGJlIGEgRFNBUHVibGljTnVtYmVycyBpbnN0YW5jZS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBzZWxmLl9wdWJsaWNfbnVtYmVycyA9IHB1YmxpY19udW1iZXJzXHJcbiAgICAgICAgc2VsZi5feCA9IHhcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB4KHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5feFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHB1YmxpY19udW1iZXJzKHNlbGYpIC0+IERTQVB1YmxpY051bWJlcnM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3B1YmxpY19udW1iZXJzXHJcblxyXG4gICAgZGVmIHByaXZhdGVfa2V5KHNlbGYsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lKSAtPiBEU0FQcml2YXRlS2V5OlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IChcclxuICAgICAgICAgICAgYmFja2VuZCBhcyBvc3NsLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIG9zc2wubG9hZF9kc2FfcHJpdmF0ZV9udW1iZXJzKHNlbGYpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBEU0FQcml2YXRlTnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLnggPT0gb3RoZXIueCBhbmQgc2VsZi5wdWJsaWNfbnVtYmVycyA9PSBvdGhlci5wdWJsaWNfbnVtYmVyc1xyXG4gICAgICAgIClcclxuXHJcblxyXG5kZWYgZ2VuZXJhdGVfcGFyYW1ldGVycyhcclxuICAgIGtleV9zaXplOiBpbnQsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lXHJcbikgLT4gRFNBUGFyYW1ldGVyczpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmQgYXMgb3NzbFxyXG5cclxuICAgIHJldHVybiBvc3NsLmdlbmVyYXRlX2RzYV9wYXJhbWV0ZXJzKGtleV9zaXplKVxyXG5cclxuXHJcbmRlZiBnZW5lcmF0ZV9wcml2YXRlX2tleShcclxuICAgIGtleV9zaXplOiBpbnQsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lXHJcbikgLT4gRFNBUHJpdmF0ZUtleTpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmQgYXMgb3NzbFxyXG5cclxuICAgIHJldHVybiBvc3NsLmdlbmVyYXRlX2RzYV9wcml2YXRlX2tleV9hbmRfcGFyYW1ldGVycyhrZXlfc2l6ZSlcclxuXHJcblxyXG5kZWYgX2NoZWNrX2RzYV9wYXJhbWV0ZXJzKHBhcmFtZXRlcnM6IERTQVBhcmFtZXRlck51bWJlcnMpIC0+IE5vbmU6XHJcbiAgICBpZiBwYXJhbWV0ZXJzLnAuYml0X2xlbmd0aCgpIG5vdCBpbiBbMTAyNCwgMjA0OCwgMzA3MiwgNDA5Nl06XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgInAgbXVzdCBiZSBleGFjdGx5IDEwMjQsIDIwNDgsIDMwNzIsIG9yIDQwOTYgYml0cyBsb25nIlxyXG4gICAgICAgIClcclxuICAgIGlmIHBhcmFtZXRlcnMucS5iaXRfbGVuZ3RoKCkgbm90IGluIFsxNjAsIDIyNCwgMjU2XTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJxIG11c3QgYmUgZXhhY3RseSAxNjAsIDIyNCwgb3IgMjU2IGJpdHMgbG9uZyIpXHJcblxyXG4gICAgaWYgbm90ICgxIDwgcGFyYW1ldGVycy5nIDwgcGFyYW1ldGVycy5wKTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJnLCBwIGRvblwndCBzYXRpc2Z5IDEgPCBnIDwgcC4iKVxyXG5cclxuXHJcbmRlZiBfY2hlY2tfZHNhX3ByaXZhdGVfbnVtYmVycyhudW1iZXJzOiBEU0FQcml2YXRlTnVtYmVycykgLT4gTm9uZTpcclxuICAgIHBhcmFtZXRlcnMgPSBudW1iZXJzLnB1YmxpY19udW1iZXJzLnBhcmFtZXRlcl9udW1iZXJzXHJcbiAgICBfY2hlY2tfZHNhX3BhcmFtZXRlcnMocGFyYW1ldGVycylcclxuICAgIGlmIG51bWJlcnMueCA8PSAwIG9yIG51bWJlcnMueCA+PSBwYXJhbWV0ZXJzLnE6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigieCBtdXN0IGJlID4gMCBhbmQgPCBxLiIpXHJcblxyXG4gICAgaWYgbnVtYmVycy5wdWJsaWNfbnVtYmVycy55ICE9IHBvdyhwYXJhbWV0ZXJzLmcsIG51bWJlcnMueCwgcGFyYW1ldGVycy5wKTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ5IG11c3QgYmUgZXF1YWwgdG8gKGcgKiogeCAlIHApLiIpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvYXN5bW1ldHJpYy91dGlscy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmluZGluZ3MuX3J1c3QgaW1wb3J0IGFzbjFcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGhhc2hlc1xyXG5cclxuXHJcbmRlY29kZV9kc3Nfc2lnbmF0dXJlID0gYXNuMS5kZWNvZGVfZHNzX3NpZ25hdHVyZVxyXG5lbmNvZGVfZHNzX3NpZ25hdHVyZSA9IGFzbjEuZW5jb2RlX2Rzc19zaWduYXR1cmVcclxuXHJcblxyXG5jbGFzcyBQcmVoYXNoZWQ6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYWxnb3JpdGhtOiBoYXNoZXMuSGFzaEFsZ29yaXRobSk6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYWxnb3JpdGhtLCBoYXNoZXMuSGFzaEFsZ29yaXRobSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiRXhwZWN0ZWQgaW5zdGFuY2Ugb2YgSGFzaEFsZ29yaXRobS4iKVxyXG5cclxuICAgICAgICBzZWxmLl9hbGdvcml0aG0gPSBhbGdvcml0aG1cclxuICAgICAgICBzZWxmLl9kaWdlc3Rfc2l6ZSA9IGFsZ29yaXRobS5kaWdlc3Rfc2l6ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGRpZ2VzdF9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZGlnZXN0X3NpemVcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9hc3ltbWV0cmljL2VjLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuaW1wb3J0IHR5cGluZ1xyXG5pbXBvcnQgd2FybmluZ3NcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuX29pZCBpbXBvcnQgT2JqZWN0SWRlbnRpZmllclxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgX3NlcmlhbGl6YXRpb24sIGhhc2hlc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljIGltcG9ydCAoXHJcbiAgICB1dGlscyBhcyBhc3ltX3V0aWxzLFxyXG4pXHJcblxyXG5cclxuY2xhc3MgRWxsaXB0aWNDdXJ2ZU9JRDpcclxuICAgIFNFQ1AxOTJSMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMi44NDAuMTAwNDUuMy4xLjEiKVxyXG4gICAgU0VDUDIyNFIxID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjEzMi4wLjMzIilcclxuICAgIFNFQ1AyNTZLMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy4xMzIuMC4xMCIpXHJcbiAgICBTRUNQMjU2UjEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjEwMDQ1LjMuMS43IilcclxuICAgIFNFQ1AzODRSMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy4xMzIuMC4zNCIpXHJcbiAgICBTRUNQNTIxUjEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMTMyLjAuMzUiKVxyXG4gICAgQlJBSU5QT09MUDI1NlIxID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjM2LjMuMy4yLjguMS4xLjciKVxyXG4gICAgQlJBSU5QT09MUDM4NFIxID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjM2LjMuMy4yLjguMS4xLjExIilcclxuICAgIEJSQUlOUE9PTFA1MTJSMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy4zNi4zLjMuMi44LjEuMS4xMyIpXHJcbiAgICBTRUNUMTYzSzEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMTMyLjAuMSIpXHJcbiAgICBTRUNUMTYzUjIgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMTMyLjAuMTUiKVxyXG4gICAgU0VDVDIzM0sxID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjEzMi4wLjI2IilcclxuICAgIFNFQ1QyMzNSMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy4xMzIuMC4yNyIpXHJcbiAgICBTRUNUMjgzSzEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMTMyLjAuMTYiKVxyXG4gICAgU0VDVDI4M1IxID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjEzMi4wLjE3IilcclxuICAgIFNFQ1Q0MDlLMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy4xMzIuMC4zNiIpXHJcbiAgICBTRUNUNDA5UjEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMTMyLjAuMzciKVxyXG4gICAgU0VDVDU3MUsxID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjEzMi4wLjM4IilcclxuICAgIFNFQ1Q1NzFSMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy4xMzIuMC4zOSIpXHJcblxyXG5cclxuY2xhc3MgRWxsaXB0aWNDdXJ2ZShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgbmFtZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIG5hbWUgb2YgdGhlIGN1cnZlLiBlLmcuIHNlY3AyNTZyMS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQml0IHNpemUgb2YgYSBzZWNyZXQgc2NhbGFyIGZvciB0aGUgY3VydmUuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgRWxsaXB0aWNDdXJ2ZVNpZ25hdHVyZUFsZ29yaXRobShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgYWxnb3JpdGhtKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IHR5cGluZy5Vbmlvblthc3ltX3V0aWxzLlByZWhhc2hlZCwgaGFzaGVzLkhhc2hBbGdvcml0aG1dOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBkaWdlc3QgYWxnb3JpdGhtIHVzZWQgd2l0aCB0aGlzIHNpZ25hdHVyZS5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBFbGxpcHRpY0N1cnZlUHJpdmF0ZUtleShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGV4Y2hhbmdlKFxyXG4gICAgICAgIHNlbGYsIGFsZ29yaXRobTogIkVDREgiLCBwZWVyX3B1YmxpY19rZXk6ICJFbGxpcHRpY0N1cnZlUHVibGljS2V5IlxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBQZXJmb3JtcyBhIGtleSBleGNoYW5nZSBvcGVyYXRpb24gdXNpbmcgdGhlIHByb3ZpZGVkIGFsZ29yaXRobSB3aXRoIHRoZVxyXG4gICAgICAgIHByb3ZpZGVkIHBlZXJcJ3MgcHVibGljIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiAiRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleSI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIEVsbGlwdGljQ3VydmVQdWJsaWNLZXkgZm9yIHRoaXMgcHJpdmF0ZSBrZXkuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgY3VydmUoc2VsZikgLT4gRWxsaXB0aWNDdXJ2ZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgRWxsaXB0aWNDdXJ2ZSB0aGF0IHRoaXMga2V5IGlzIG9uLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBCaXQgc2l6ZSBvZiBhIHNlY3JldCBzY2FsYXIgZm9yIHRoZSBjdXJ2ZS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgc2lnbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIHNpZ25hdHVyZV9hbGdvcml0aG06IEVsbGlwdGljQ3VydmVTaWduYXR1cmVBbGdvcml0aG0sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNpZ25zIHRoZSBkYXRhXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHByaXZhdGVfbnVtYmVycyhzZWxmKSAtPiAiRWxsaXB0aWNDdXJ2ZVByaXZhdGVOdW1iZXJzIjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIGFuIEVsbGlwdGljQ3VydmVQcml2YXRlTnVtYmVycy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBfc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IF9zZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQsXHJcbiAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG06IF9zZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBrZXkgc2VyaWFsaXplZCBhcyBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleVdpdGhTZXJpYWxpemF0aW9uID0gRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXlcclxuXHJcblxyXG5jbGFzcyBFbGxpcHRpY0N1cnZlUHVibGljS2V5KG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBjdXJ2ZShzZWxmKSAtPiBFbGxpcHRpY0N1cnZlOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBFbGxpcHRpY0N1cnZlIHRoYXQgdGhpcyBrZXkgaXMgb24uXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEJpdCBzaXplIG9mIGEgc2VjcmV0IHNjYWxhciBmb3IgdGhlIGN1cnZlLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfbnVtYmVycyhzZWxmKSAtPiAiRWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnMiOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgYW4gRWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBfc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IF9zZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUga2V5IHNlcmlhbGl6ZWQgYXMgYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHZlcmlmeShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHNpZ25hdHVyZTogYnl0ZXMsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgc2lnbmF0dXJlX2FsZ29yaXRobTogRWxsaXB0aWNDdXJ2ZVNpZ25hdHVyZUFsZ29yaXRobSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBWZXJpZmllcyB0aGUgc2lnbmF0dXJlIG9mIHRoZSBkYXRhLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGZyb21fZW5jb2RlZF9wb2ludChcclxuICAgICAgICBjbHMsIGN1cnZlOiBFbGxpcHRpY0N1cnZlLCBkYXRhOiBieXRlc1xyXG4gICAgKSAtPiAiRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleSI6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzKCJkYXRhIiwgZGF0YSlcclxuXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY3VydmUsIEVsbGlwdGljQ3VydmUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImN1cnZlIG11c3QgYmUgYW4gRWxsaXB0aWNDdXJ2ZSBpbnN0YW5jZSIpXHJcblxyXG4gICAgICAgIGlmIGxlbihkYXRhKSA9PSAwOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJkYXRhIG11c3Qgbm90IGJlIGFuIGVtcHR5IGJ5dGUgc3RyaW5nIilcclxuXHJcbiAgICAgICAgaWYgZGF0YVswXSBub3QgaW4gWzB4MDIsIDB4MDMsIDB4MDRdOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbnN1cHBvcnRlZCBlbGxpcHRpYyBjdXJ2ZSBwb2ludCB0eXBlIilcclxuXHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgICAgICByZXR1cm4gYmFja2VuZC5sb2FkX2VsbGlwdGljX2N1cnZlX3B1YmxpY19ieXRlcyhjdXJ2ZSwgZGF0YSlcclxuXHJcblxyXG5FbGxpcHRpY0N1cnZlUHVibGljS2V5V2l0aFNlcmlhbGl6YXRpb24gPSBFbGxpcHRpY0N1cnZlUHVibGljS2V5XHJcblxyXG5cclxuY2xhc3MgU0VDVDU3MVIxKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJzZWN0NTcxcjEiXHJcbiAgICBrZXlfc2l6ZSA9IDU3MFxyXG5cclxuXHJcbmNsYXNzIFNFQ1Q0MDlSMShFbGxpcHRpY0N1cnZlKTpcclxuICAgIG5hbWUgPSAic2VjdDQwOXIxIlxyXG4gICAga2V5X3NpemUgPSA0MDlcclxuXHJcblxyXG5jbGFzcyBTRUNUMjgzUjEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gInNlY3QyODNyMSJcclxuICAgIGtleV9zaXplID0gMjgzXHJcblxyXG5cclxuY2xhc3MgU0VDVDIzM1IxKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJzZWN0MjMzcjEiXHJcbiAgICBrZXlfc2l6ZSA9IDIzM1xyXG5cclxuXHJcbmNsYXNzIFNFQ1QxNjNSMihFbGxpcHRpY0N1cnZlKTpcclxuICAgIG5hbWUgPSAic2VjdDE2M3IyIlxyXG4gICAga2V5X3NpemUgPSAxNjNcclxuXHJcblxyXG5jbGFzcyBTRUNUNTcxSzEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gInNlY3Q1NzFrMSJcclxuICAgIGtleV9zaXplID0gNTcxXHJcblxyXG5cclxuY2xhc3MgU0VDVDQwOUsxKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJzZWN0NDA5azEiXHJcbiAgICBrZXlfc2l6ZSA9IDQwOVxyXG5cclxuXHJcbmNsYXNzIFNFQ1QyODNLMShFbGxpcHRpY0N1cnZlKTpcclxuICAgIG5hbWUgPSAic2VjdDI4M2sxIlxyXG4gICAga2V5X3NpemUgPSAyODNcclxuXHJcblxyXG5jbGFzcyBTRUNUMjMzSzEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gInNlY3QyMzNrMSJcclxuICAgIGtleV9zaXplID0gMjMzXHJcblxyXG5cclxuY2xhc3MgU0VDVDE2M0sxKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJzZWN0MTYzazEiXHJcbiAgICBrZXlfc2l6ZSA9IDE2M1xyXG5cclxuXHJcbmNsYXNzIFNFQ1A1MjFSMShFbGxpcHRpY0N1cnZlKTpcclxuICAgIG5hbWUgPSAic2VjcDUyMXIxIlxyXG4gICAga2V5X3NpemUgPSA1MjFcclxuXHJcblxyXG5jbGFzcyBTRUNQMzg0UjEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gInNlY3AzODRyMSJcclxuICAgIGtleV9zaXplID0gMzg0XHJcblxyXG5cclxuY2xhc3MgU0VDUDI1NlIxKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJzZWNwMjU2cjEiXHJcbiAgICBrZXlfc2l6ZSA9IDI1NlxyXG5cclxuXHJcbmNsYXNzIFNFQ1AyNTZLMShFbGxpcHRpY0N1cnZlKTpcclxuICAgIG5hbWUgPSAic2VjcDI1NmsxIlxyXG4gICAga2V5X3NpemUgPSAyNTZcclxuXHJcblxyXG5jbGFzcyBTRUNQMjI0UjEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gInNlY3AyMjRyMSJcclxuICAgIGtleV9zaXplID0gMjI0XHJcblxyXG5cclxuY2xhc3MgU0VDUDE5MlIxKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJzZWNwMTkycjEiXHJcbiAgICBrZXlfc2l6ZSA9IDE5MlxyXG5cclxuXHJcbmNsYXNzIEJyYWlucG9vbFAyNTZSMShFbGxpcHRpY0N1cnZlKTpcclxuICAgIG5hbWUgPSAiYnJhaW5wb29sUDI1NnIxIlxyXG4gICAga2V5X3NpemUgPSAyNTZcclxuXHJcblxyXG5jbGFzcyBCcmFpbnBvb2xQMzg0UjEoRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICBuYW1lID0gImJyYWlucG9vbFAzODRyMSJcclxuICAgIGtleV9zaXplID0gMzg0XHJcblxyXG5cclxuY2xhc3MgQnJhaW5wb29sUDUxMlIxKEVsbGlwdGljQ3VydmUpOlxyXG4gICAgbmFtZSA9ICJicmFpbnBvb2xQNTEycjEiXHJcbiAgICBrZXlfc2l6ZSA9IDUxMlxyXG5cclxuXHJcbl9DVVJWRV9UWVBFUzogdHlwaW5nLkRpY3Rbc3RyLCB0eXBpbmcuVHlwZVtFbGxpcHRpY0N1cnZlXV0gPSB7XHJcbiAgICAicHJpbWUxOTJ2MSI6IFNFQ1AxOTJSMSxcclxuICAgICJwcmltZTI1NnYxIjogU0VDUDI1NlIxLFxyXG4gICAgInNlY3AxOTJyMSI6IFNFQ1AxOTJSMSxcclxuICAgICJzZWNwMjI0cjEiOiBTRUNQMjI0UjEsXHJcbiAgICAic2VjcDI1NnIxIjogU0VDUDI1NlIxLFxyXG4gICAgInNlY3AzODRyMSI6IFNFQ1AzODRSMSxcclxuICAgICJzZWNwNTIxcjEiOiBTRUNQNTIxUjEsXHJcbiAgICAic2VjcDI1NmsxIjogU0VDUDI1NksxLFxyXG4gICAgInNlY3QxNjNrMSI6IFNFQ1QxNjNLMSxcclxuICAgICJzZWN0MjMzazEiOiBTRUNUMjMzSzEsXHJcbiAgICAic2VjdDI4M2sxIjogU0VDVDI4M0sxLFxyXG4gICAgInNlY3Q0MDlrMSI6IFNFQ1Q0MDlLMSxcclxuICAgICJzZWN0NTcxazEiOiBTRUNUNTcxSzEsXHJcbiAgICAic2VjdDE2M3IyIjogU0VDVDE2M1IyLFxyXG4gICAgInNlY3QyMzNyMSI6IFNFQ1QyMzNSMSxcclxuICAgICJzZWN0MjgzcjEiOiBTRUNUMjgzUjEsXHJcbiAgICAic2VjdDQwOXIxIjogU0VDVDQwOVIxLFxyXG4gICAgInNlY3Q1NzFyMSI6IFNFQ1Q1NzFSMSxcclxuICAgICJicmFpbnBvb2xQMjU2cjEiOiBCcmFpbnBvb2xQMjU2UjEsXHJcbiAgICAiYnJhaW5wb29sUDM4NHIxIjogQnJhaW5wb29sUDM4NFIxLFxyXG4gICAgImJyYWlucG9vbFA1MTJyMSI6IEJyYWlucG9vbFA1MTJSMSxcclxufVxyXG5cclxuXHJcbmNsYXNzIEVDRFNBKEVsbGlwdGljQ3VydmVTaWduYXR1cmVBbGdvcml0aG0pOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgYWxnb3JpdGhtOiB0eXBpbmcuVW5pb25bYXN5bV91dGlscy5QcmVoYXNoZWQsIGhhc2hlcy5IYXNoQWxnb3JpdGhtXSxcclxuICAgICk6XHJcbiAgICAgICAgc2VsZi5fYWxnb3JpdGhtID0gYWxnb3JpdGhtXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgYWxnb3JpdGhtKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IHR5cGluZy5Vbmlvblthc3ltX3V0aWxzLlByZWhhc2hlZCwgaGFzaGVzLkhhc2hBbGdvcml0aG1dOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hbGdvcml0aG1cclxuXHJcblxyXG5kZWYgZ2VuZXJhdGVfcHJpdmF0ZV9rZXkoXHJcbiAgICBjdXJ2ZTogRWxsaXB0aWNDdXJ2ZSwgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuKSAtPiBFbGxpcHRpY0N1cnZlUHJpdmF0ZUtleTpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmQgYXMgb3NzbFxyXG5cclxuICAgIHJldHVybiBvc3NsLmdlbmVyYXRlX2VsbGlwdGljX2N1cnZlX3ByaXZhdGVfa2V5KGN1cnZlKVxyXG5cclxuXHJcbmRlZiBkZXJpdmVfcHJpdmF0ZV9rZXkoXHJcbiAgICBwcml2YXRlX3ZhbHVlOiBpbnQsXHJcbiAgICBjdXJ2ZTogRWxsaXB0aWNDdXJ2ZSxcclxuICAgIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lLFxyXG4pIC0+IEVsbGlwdGljQ3VydmVQcml2YXRlS2V5OlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZCBhcyBvc3NsXHJcblxyXG4gICAgaWYgbm90IGlzaW5zdGFuY2UocHJpdmF0ZV92YWx1ZSwgaW50KTpcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoInByaXZhdGVfdmFsdWUgbXVzdCBiZSBhbiBpbnRlZ2VyIHR5cGUuIilcclxuXHJcbiAgICBpZiBwcml2YXRlX3ZhbHVlIDw9IDA6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicHJpdmF0ZV92YWx1ZSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlci4iKVxyXG5cclxuICAgIGlmIG5vdCBpc2luc3RhbmNlKGN1cnZlLCBFbGxpcHRpY0N1cnZlKTpcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoImN1cnZlIG11c3QgcHJvdmlkZSB0aGUgRWxsaXB0aWNDdXJ2ZSBpbnRlcmZhY2UuIilcclxuXHJcbiAgICByZXR1cm4gb3NzbC5kZXJpdmVfZWxsaXB0aWNfY3VydmVfcHJpdmF0ZV9rZXkocHJpdmF0ZV92YWx1ZSwgY3VydmUpXHJcblxyXG5cclxuY2xhc3MgRWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnM6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgeDogaW50LCB5OiBpbnQsIGN1cnZlOiBFbGxpcHRpY0N1cnZlKTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh4LCBpbnQpIG9yIG5vdCBpc2luc3RhbmNlKHksIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigieCBhbmQgeSBtdXN0IGJlIGludGVnZXJzLiIpXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGN1cnZlLCBFbGxpcHRpY0N1cnZlKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjdXJ2ZSBtdXN0IHByb3ZpZGUgdGhlIEVsbGlwdGljQ3VydmUgaW50ZXJmYWNlLiIpXHJcblxyXG4gICAgICAgIHNlbGYuX3kgPSB5XHJcbiAgICAgICAgc2VsZi5feCA9IHhcclxuICAgICAgICBzZWxmLl9jdXJ2ZSA9IGN1cnZlXHJcblxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZiwgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUpIC0+IEVsbGlwdGljQ3VydmVQdWJsaWNLZXk6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgKFxyXG4gICAgICAgICAgICBiYWNrZW5kIGFzIG9zc2wsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gb3NzbC5sb2FkX2VsbGlwdGljX2N1cnZlX3B1YmxpY19udW1iZXJzKHNlbGYpXHJcblxyXG4gICAgZGVmIGVuY29kZV9wb2ludChzZWxmKSAtPiBieXRlczpcclxuICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAiZW5jb2RlX3BvaW50IGhhcyBiZWVuIGRlcHJlY2F0ZWQgb24gRWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnMiXHJcbiAgICAgICAgICAgICIgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uLiBQbGVhc2UgdXNlICJcclxuICAgICAgICAgICAgIkVsbGlwdGljQ3VydmVQdWJsaWNLZXkucHVibGljX2J5dGVzIHRvIG9idGFpbiBib3RoICJcclxuICAgICAgICAgICAgImNvbXByZXNzZWQgYW5kIHVuY29tcHJlc3NlZCBwb2ludCBlbmNvZGluZy4iLFxyXG4gICAgICAgICAgICB1dGlscy5QZXJzaXN0ZW50bHlEZXByZWNhdGVkMjAxOSxcclxuICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgIClcclxuICAgICAgICAjIGtleV9zaXplIGlzIGluIGJpdHMuIENvbnZlcnQgdG8gYnl0ZXMgYW5kIHJvdW5kIHVwXHJcbiAgICAgICAgYnl0ZV9sZW5ndGggPSAoc2VsZi5jdXJ2ZS5rZXlfc2l6ZSArIDcpIC8vIDhcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBiIlxceDA0IlxyXG4gICAgICAgICAgICArIHV0aWxzLmludF90b19ieXRlcyhzZWxmLngsIGJ5dGVfbGVuZ3RoKVxyXG4gICAgICAgICAgICArIHV0aWxzLmludF90b19ieXRlcyhzZWxmLnksIGJ5dGVfbGVuZ3RoKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBmcm9tX2VuY29kZWRfcG9pbnQoXHJcbiAgICAgICAgY2xzLCBjdXJ2ZTogRWxsaXB0aWNDdXJ2ZSwgZGF0YTogYnl0ZXNcclxuICAgICkgLT4gIkVsbGlwdGljQ3VydmVQdWJsaWNOdW1iZXJzIjpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShjdXJ2ZSwgRWxsaXB0aWNDdXJ2ZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiY3VydmUgbXVzdCBiZSBhbiBFbGxpcHRpY0N1cnZlIGluc3RhbmNlIilcclxuXHJcbiAgICAgICAgd2FybmluZ3Mud2FybihcclxuICAgICAgICAgICAgIlN1cHBvcnQgZm9yIHVuc2FmZSBjb25zdHJ1Y3Rpb24gb2YgcHVibGljIG51bWJlcnMgZnJvbSAiXHJcbiAgICAgICAgICAgICJlbmNvZGVkIGRhdGEgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIHZlcnNpb24uICJcclxuICAgICAgICAgICAgIlBsZWFzZSB1c2UgRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleS5mcm9tX2VuY29kZWRfcG9pbnQiLFxyXG4gICAgICAgICAgICB1dGlscy5QZXJzaXN0ZW50bHlEZXByZWNhdGVkMjAxOSxcclxuICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgZGF0YS5zdGFydHN3aXRoKGIiXFx4MDQiKTpcclxuICAgICAgICAgICAgIyBrZXlfc2l6ZSBpcyBpbiBiaXRzLiBDb252ZXJ0IHRvIGJ5dGVzIGFuZCByb3VuZCB1cFxyXG4gICAgICAgICAgICBieXRlX2xlbmd0aCA9IChjdXJ2ZS5rZXlfc2l6ZSArIDcpIC8vIDhcclxuICAgICAgICAgICAgaWYgbGVuKGRhdGEpID09IDIgKiBieXRlX2xlbmd0aCArIDE6XHJcbiAgICAgICAgICAgICAgICB4ID0gaW50LmZyb21fYnl0ZXMoZGF0YVsxIDogYnl0ZV9sZW5ndGggKyAxXSwgImJpZyIpXHJcbiAgICAgICAgICAgICAgICB5ID0gaW50LmZyb21fYnl0ZXMoZGF0YVtieXRlX2xlbmd0aCArIDEgOl0sICJiaWciKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNscyh4LCB5LCBjdXJ2ZSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQgZWxsaXB0aWMgY3VydmUgcG9pbnQgZGF0YSBsZW5ndGgiKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVuc3VwcG9ydGVkIGVsbGlwdGljIGN1cnZlIHBvaW50IHR5cGUiKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGN1cnZlKHNlbGYpIC0+IEVsbGlwdGljQ3VydmU6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2N1cnZlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgeChzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3hcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB5KHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5feVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgRWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi54ID09IG90aGVyLnhcclxuICAgICAgICAgICAgYW5kIHNlbGYueSA9PSBvdGhlci55XHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmN1cnZlLm5hbWUgPT0gb3RoZXIuY3VydmUubmFtZVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5jdXJ2ZS5rZXlfc2l6ZSA9PSBvdGhlci5jdXJ2ZS5rZXlfc2l6ZVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKChzZWxmLngsIHNlbGYueSwgc2VsZi5jdXJ2ZS5uYW1lLCBzZWxmLmN1cnZlLmtleV9zaXplKSlcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICI8RWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnMoY3VydmU9ezAuY3VydmUubmFtZX0sIHg9ezAueH0sICJcclxuICAgICAgICAgICAgInk9ezAueX0+Ii5mb3JtYXQoc2VsZilcclxuICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgRWxsaXB0aWNDdXJ2ZVByaXZhdGVOdW1iZXJzOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIHByaXZhdGVfdmFsdWU6IGludCwgcHVibGljX251bWJlcnM6IEVsbGlwdGljQ3VydmVQdWJsaWNOdW1iZXJzXHJcbiAgICApOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHByaXZhdGVfdmFsdWUsIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigicHJpdmF0ZV92YWx1ZSBtdXN0IGJlIGFuIGludGVnZXIuIilcclxuXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocHVibGljX251bWJlcnMsIEVsbGlwdGljQ3VydmVQdWJsaWNOdW1iZXJzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInB1YmxpY19udW1iZXJzIG11c3QgYmUgYW4gRWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnMgIlxyXG4gICAgICAgICAgICAgICAgImluc3RhbmNlLiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9wcml2YXRlX3ZhbHVlID0gcHJpdmF0ZV92YWx1ZVxyXG4gICAgICAgIHNlbGYuX3B1YmxpY19udW1iZXJzID0gcHVibGljX251bWJlcnNcclxuXHJcbiAgICBkZWYgcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgc2VsZiwgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmVcclxuICAgICkgLT4gRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXk6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgKFxyXG4gICAgICAgICAgICBiYWNrZW5kIGFzIG9zc2wsXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gb3NzbC5sb2FkX2VsbGlwdGljX2N1cnZlX3ByaXZhdGVfbnVtYmVycyhzZWxmKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHByaXZhdGVfdmFsdWUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wcml2YXRlX3ZhbHVlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcHVibGljX251bWJlcnMoc2VsZikgLT4gRWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3B1YmxpY19udW1iZXJzXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBFbGxpcHRpY0N1cnZlUHJpdmF0ZU51bWJlcnMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5wcml2YXRlX3ZhbHVlID09IG90aGVyLnByaXZhdGVfdmFsdWVcclxuICAgICAgICAgICAgYW5kIHNlbGYucHVibGljX251bWJlcnMgPT0gb3RoZXIucHVibGljX251bWJlcnNcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCgoc2VsZi5wcml2YXRlX3ZhbHVlLCBzZWxmLnB1YmxpY19udW1iZXJzKSlcclxuXHJcblxyXG5jbGFzcyBFQ0RIOlxyXG4gICAgcGFzc1xyXG5cclxuXHJcbl9PSURfVE9fQ1VSVkUgPSB7XHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELlNFQ1AxOTJSMTogU0VDUDE5MlIxLFxyXG4gICAgRWxsaXB0aWNDdXJ2ZU9JRC5TRUNQMjI0UjE6IFNFQ1AyMjRSMSxcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuU0VDUDI1NksxOiBTRUNQMjU2SzEsXHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELlNFQ1AyNTZSMTogU0VDUDI1NlIxLFxyXG4gICAgRWxsaXB0aWNDdXJ2ZU9JRC5TRUNQMzg0UjE6IFNFQ1AzODRSMSxcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuU0VDUDUyMVIxOiBTRUNQNTIxUjEsXHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELkJSQUlOUE9PTFAyNTZSMTogQnJhaW5wb29sUDI1NlIxLFxyXG4gICAgRWxsaXB0aWNDdXJ2ZU9JRC5CUkFJTlBPT0xQMzg0UjE6IEJyYWlucG9vbFAzODRSMSxcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuQlJBSU5QT09MUDUxMlIxOiBCcmFpbnBvb2xQNTEyUjEsXHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELlNFQ1QxNjNLMTogU0VDVDE2M0sxLFxyXG4gICAgRWxsaXB0aWNDdXJ2ZU9JRC5TRUNUMTYzUjI6IFNFQ1QxNjNSMixcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuU0VDVDIzM0sxOiBTRUNUMjMzSzEsXHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELlNFQ1QyMzNSMTogU0VDVDIzM1IxLFxyXG4gICAgRWxsaXB0aWNDdXJ2ZU9JRC5TRUNUMjgzSzE6IFNFQ1QyODNLMSxcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuU0VDVDI4M1IxOiBTRUNUMjgzUjEsXHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELlNFQ1Q0MDlLMTogU0VDVDQwOUsxLFxyXG4gICAgRWxsaXB0aWNDdXJ2ZU9JRC5TRUNUNDA5UjE6IFNFQ1Q0MDlSMSxcclxuICAgIEVsbGlwdGljQ3VydmVPSUQuU0VDVDU3MUsxOiBTRUNUNTcxSzEsXHJcbiAgICBFbGxpcHRpY0N1cnZlT0lELlNFQ1Q1NzFSMTogU0VDVDU3MVIxLFxyXG59XHJcblxyXG5cclxuZGVmIGdldF9jdXJ2ZV9mb3Jfb2lkKG9pZDogT2JqZWN0SWRlbnRpZmllcikgLT4gdHlwaW5nLlR5cGVbRWxsaXB0aWNDdXJ2ZV06XHJcbiAgICB0cnk6XHJcbiAgICAgICAgcmV0dXJuIF9PSURfVE9fQ1VSVkVbb2lkXVxyXG4gICAgZXhjZXB0IEtleUVycm9yOlxyXG4gICAgICAgIHJhaXNlIExvb2t1cEVycm9yKFxyXG4gICAgICAgICAgICAiVGhlIHByb3ZpZGVkIG9iamVjdCBpZGVudGlmaWVyIGhhcyBubyBtYXRjaGluZyBlbGxpcHRpYyAiXHJcbiAgICAgICAgICAgICJjdXJ2ZSBjbGFzcyJcclxuICAgICAgICApXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L19vaWQucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgaGFzaGVzXHJcblxyXG5cclxuY2xhc3MgT2JqZWN0SWRlbnRpZmllcjpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkb3R0ZWRfc3RyaW5nOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fZG90dGVkX3N0cmluZyA9IGRvdHRlZF9zdHJpbmdcclxuXHJcbiAgICAgICAgbm9kZXMgPSBzZWxmLl9kb3R0ZWRfc3RyaW5nLnNwbGl0KCIuIilcclxuICAgICAgICBpbnRub2RlcyA9IFtdXHJcblxyXG4gICAgICAgICMgVGhlcmUgbXVzdCBiZSBhdCBsZWFzdCAyIG5vZGVzLCB0aGUgZmlyc3Qgbm9kZSBtdXN0IGJlIDAuLjIsIGFuZFxyXG4gICAgICAgICMgaWYgbGVzcyB0aGFuIDIsIHRoZSBzZWNvbmQgbm9kZSBjYW5ub3QgaGF2ZSBhIHZhbHVlIG91dHNpZGUgdGhlXHJcbiAgICAgICAgIyByYW5nZSAwLi4zOS4gIEFsbCBub2RlcyBtdXN0IGJlIGludGVnZXJzLlxyXG4gICAgICAgIGZvciBub2RlIGluIG5vZGVzOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICBub2RlX3ZhbHVlID0gaW50KG5vZGUsIDEwKVxyXG4gICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgZiJNYWxmb3JtZWQgT0lEOiB7ZG90dGVkX3N0cmluZ30gKG5vbi1pbnRlZ2VyIG5vZGVzKSJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgaWYgbm9kZV92YWx1ZSA8IDA6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGYiTWFsZm9ybWVkIE9JRDoge2RvdHRlZF9zdHJpbmd9IChuZWdhdGl2ZS1pbnRlZ2VyIG5vZGVzKSJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgaW50bm9kZXMuYXBwZW5kKG5vZGVfdmFsdWUpXHJcblxyXG4gICAgICAgIGlmIGxlbihub2RlcykgPCAyOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgZiJNYWxmb3JtZWQgT0lEOiB7ZG90dGVkX3N0cmluZ30gIlxyXG4gICAgICAgICAgICAgICAgIihpbnN1ZmZpY2llbnQgbnVtYmVyIG9mIG5vZGVzKSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBpbnRub2Rlc1swXSA+IDI6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBmIk1hbGZvcm1lZCBPSUQ6IHtkb3R0ZWRfc3RyaW5nfSAiXHJcbiAgICAgICAgICAgICAgICAiKGZpcnN0IG5vZGUgb3V0c2lkZSB2YWxpZCByYW5nZSkiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgaW50bm9kZXNbMF0gPCAyIGFuZCBpbnRub2Rlc1sxXSA+PSA0MDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgIGYiTWFsZm9ybWVkIE9JRDoge2RvdHRlZF9zdHJpbmd9ICJcclxuICAgICAgICAgICAgICAgICIoc2Vjb25kIG5vZGUgb3V0c2lkZSB2YWxpZCByYW5nZSkiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIE9iamVjdElkZW50aWZpZXIpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZG90dGVkX3N0cmluZyA9PSBvdGhlci5kb3R0ZWRfc3RyaW5nXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxPYmplY3RJZGVudGlmaWVyKG9pZD17fSwgbmFtZT17fSk+Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIHNlbGYuZG90dGVkX3N0cmluZywgc2VsZi5fbmFtZVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYuZG90dGVkX3N0cmluZylcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBfbmFtZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIF9PSURfTkFNRVMuZ2V0KHNlbGYsICJVbmtub3duIE9JRCIpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZG90dGVkX3N0cmluZyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2RvdHRlZF9zdHJpbmdcclxuXHJcblxyXG5jbGFzcyBFeHRlbnNpb25PSUQ6XHJcbiAgICBTVUJKRUNUX0RJUkVDVE9SWV9BVFRSSUJVVEVTID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjI5LjkiKVxyXG4gICAgU1VCSkVDVF9LRVlfSURFTlRJRklFUiA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4xNCIpXHJcbiAgICBLRVlfVVNBR0UgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMTUiKVxyXG4gICAgU1VCSkVDVF9BTFRFUk5BVElWRV9OQU1FID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjI5LjE3IilcclxuICAgIElTU1VFUl9BTFRFUk5BVElWRV9OQU1FID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjI5LjE4IilcclxuICAgIEJBU0lDX0NPTlNUUkFJTlRTID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjI5LjE5IilcclxuICAgIE5BTUVfQ09OU1RSQUlOVFMgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMzAiKVxyXG4gICAgQ1JMX0RJU1RSSUJVVElPTl9QT0lOVFMgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMzEiKVxyXG4gICAgQ0VSVElGSUNBVEVfUE9MSUNJRVMgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMzIiKVxyXG4gICAgUE9MSUNZX01BUFBJTkdTID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjI5LjMzIilcclxuICAgIEFVVEhPUklUWV9LRVlfSURFTlRJRklFUiA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4zNSIpXHJcbiAgICBQT0xJQ1lfQ09OU1RSQUlOVFMgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMzYiKVxyXG4gICAgRVhURU5ERURfS0VZX1VTQUdFID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjI5LjM3IilcclxuICAgIEZSRVNIRVNUX0NSTCA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS40NiIpXHJcbiAgICBJTkhJQklUX0FOWV9QT0xJQ1kgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuNTQiKVxyXG4gICAgSVNTVUlOR19ESVNUUklCVVRJT05fUE9JTlQgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMjgiKVxyXG4gICAgQVVUSE9SSVRZX0lORk9STUFUSU9OX0FDQ0VTUyA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS41LjcuMS4xIilcclxuICAgIFNVQkpFQ1RfSU5GT1JNQVRJT05fQUNDRVNTID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjUuNy4xLjExIilcclxuICAgIE9DU1BfTk9fQ0hFQ0sgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjUuNS43LjQ4LjEuNSIpXHJcbiAgICBUTFNfRkVBVFVSRSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS41LjcuMS4yNCIpXHJcbiAgICBDUkxfTlVNQkVSID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjI5LjIwIilcclxuICAgIERFTFRBX0NSTF9JTkRJQ0FUT1IgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMjciKVxyXG4gICAgUFJFQ0VSVF9TSUdORURfQ0VSVElGSUNBVEVfVElNRVNUQU1QUyA9IE9iamVjdElkZW50aWZpZXIoXHJcbiAgICAgICAgIjEuMy42LjEuNC4xLjExMTI5LjIuNC4yIlxyXG4gICAgKVxyXG4gICAgUFJFQ0VSVF9QT0lTT04gPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjQuMS4xMTEyOS4yLjQuMyIpXHJcbiAgICBTSUdORURfQ0VSVElGSUNBVEVfVElNRVNUQU1QUyA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNC4xLjExMTI5LjIuNC41IilcclxuXHJcblxyXG5jbGFzcyBPQ1NQRXh0ZW5zaW9uT0lEOlxyXG4gICAgTk9OQ0UgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjUuNS43LjQ4LjEuMiIpXHJcblxyXG5cclxuY2xhc3MgQ1JMRW50cnlFeHRlbnNpb25PSUQ6XHJcbiAgICBDRVJUSUZJQ0FURV9JU1NVRVIgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMjkiKVxyXG4gICAgQ1JMX1JFQVNPTiA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4yMSIpXHJcbiAgICBJTlZBTElESVRZX0RBVEUgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMjQiKVxyXG5cclxuXHJcbmNsYXNzIE5hbWVPSUQ6XHJcbiAgICBDT01NT05fTkFNRSA9IE9iamVjdElkZW50aWZpZXIoIjIuNS40LjMiKVxyXG4gICAgQ09VTlRSWV9OQU1FID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjQuNiIpXHJcbiAgICBMT0NBTElUWV9OQU1FID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjQuNyIpXHJcbiAgICBTVEFURV9PUl9QUk9WSU5DRV9OQU1FID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjQuOCIpXHJcbiAgICBTVFJFRVRfQUREUkVTUyA9IE9iamVjdElkZW50aWZpZXIoIjIuNS40LjkiKVxyXG4gICAgT1JHQU5JWkFUSU9OX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC4xMCIpXHJcbiAgICBPUkdBTklaQVRJT05BTF9VTklUX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC4xMSIpXHJcbiAgICBTRVJJQUxfTlVNQkVSID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjQuNSIpXHJcbiAgICBTVVJOQU1FID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjQuNCIpXHJcbiAgICBHSVZFTl9OQU1FID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjQuNDIiKVxyXG4gICAgVElUTEUgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC4xMiIpXHJcbiAgICBHRU5FUkFUSU9OX1FVQUxJRklFUiA9IE9iamVjdElkZW50aWZpZXIoIjIuNS40LjQ0IilcclxuICAgIFg1MDBfVU5JUVVFX0lERU5USUZJRVIgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC40NSIpXHJcbiAgICBETl9RVUFMSUZJRVIgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC40NiIpXHJcbiAgICBQU0VVRE9OWU0gPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC42NSIpXHJcbiAgICBVU0VSX0lEID0gT2JqZWN0SWRlbnRpZmllcigiMC45LjIzNDIuMTkyMDAzMDAuMTAwLjEuMSIpXHJcbiAgICBET01BSU5fQ09NUE9ORU5UID0gT2JqZWN0SWRlbnRpZmllcigiMC45LjIzNDIuMTkyMDAzMDAuMTAwLjEuMjUiKVxyXG4gICAgRU1BSUxfQUREUkVTUyA9IE9iamVjdElkZW50aWZpZXIoIjEuMi44NDAuMTEzNTQ5LjEuOS4xIilcclxuICAgIEpVUklTRElDVElPTl9DT1VOVFJZX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjQuMS4zMTEuNjAuMi4xLjMiKVxyXG4gICAgSlVSSVNESUNUSU9OX0xPQ0FMSVRZX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjQuMS4zMTEuNjAuMi4xLjEiKVxyXG4gICAgSlVSSVNESUNUSU9OX1NUQVRFX09SX1BST1ZJTkNFX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKFxyXG4gICAgICAgICIxLjMuNi4xLjQuMS4zMTEuNjAuMi4xLjIiXHJcbiAgICApXHJcbiAgICBCVVNJTkVTU19DQVRFR09SWSA9IE9iamVjdElkZW50aWZpZXIoIjIuNS40LjE1IilcclxuICAgIFBPU1RBTF9BRERSRVNTID0gT2JqZWN0SWRlbnRpZmllcigiMi41LjQuMTYiKVxyXG4gICAgUE9TVEFMX0NPREUgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuNC4xNyIpXHJcbiAgICBJTk4gPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuNjQzLjMuMTMxLjEuMSIpXHJcbiAgICBPR1JOID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjY0My4xMDAuMSIpXHJcbiAgICBTTklMUyA9IE9iamVjdElkZW50aWZpZXIoIjEuMi42NDMuMTAwLjMiKVxyXG4gICAgVU5TVFJVQ1RVUkVEX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjExMzU0OS4xLjkuMiIpXHJcblxyXG5cclxuY2xhc3MgU2lnbmF0dXJlQWxnb3JpdGhtT0lEOlxyXG4gICAgUlNBX1dJVEhfTUQ1ID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMTM1NDkuMS4xLjQiKVxyXG4gICAgUlNBX1dJVEhfU0hBMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMi44NDAuMTEzNTQ5LjEuMS41IilcclxuICAgICMgVGhpcyBpcyBhbiBhbHRlcm5hdGUgT0lEIGZvciBSU0Egd2l0aCBTSEExIHRoYXQgaXMgb2NjYXNpb25hbGx5IHNlZW5cclxuICAgIF9SU0FfV0lUSF9TSEExID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjE0LjMuMi4yOSIpXHJcbiAgICBSU0FfV0lUSF9TSEEyMjQgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjExMzU0OS4xLjEuMTQiKVxyXG4gICAgUlNBX1dJVEhfU0hBMjU2ID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMTM1NDkuMS4xLjExIilcclxuICAgIFJTQV9XSVRIX1NIQTM4NCA9IE9iamVjdElkZW50aWZpZXIoIjEuMi44NDAuMTEzNTQ5LjEuMS4xMiIpXHJcbiAgICBSU0FfV0lUSF9TSEE1MTIgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjExMzU0OS4xLjEuMTMiKVxyXG4gICAgUlNBX1dJVEhfU0hBM18yMjQgPSBPYmplY3RJZGVudGlmaWVyKCIyLjE2Ljg0MC4xLjEwMS4zLjQuMy4xMyIpXHJcbiAgICBSU0FfV0lUSF9TSEEzXzI1NiA9IE9iamVjdElkZW50aWZpZXIoIjIuMTYuODQwLjEuMTAxLjMuNC4zLjE0IilcclxuICAgIFJTQV9XSVRIX1NIQTNfMzg0ID0gT2JqZWN0SWRlbnRpZmllcigiMi4xNi44NDAuMS4xMDEuMy40LjMuMTUiKVxyXG4gICAgUlNBX1dJVEhfU0hBM181MTIgPSBPYmplY3RJZGVudGlmaWVyKCIyLjE2Ljg0MC4xLjEwMS4zLjQuMy4xNiIpXHJcbiAgICBSU0FTU0FfUFNTID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMTM1NDkuMS4xLjEwIilcclxuICAgIEVDRFNBX1dJVEhfU0hBMSA9IE9iamVjdElkZW50aWZpZXIoIjEuMi44NDAuMTAwNDUuNC4xIilcclxuICAgIEVDRFNBX1dJVEhfU0hBMjI0ID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMDA0NS40LjMuMSIpXHJcbiAgICBFQ0RTQV9XSVRIX1NIQTI1NiA9IE9iamVjdElkZW50aWZpZXIoIjEuMi44NDAuMTAwNDUuNC4zLjIiKVxyXG4gICAgRUNEU0FfV0lUSF9TSEEzODQgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjEwMDQ1LjQuMy4zIilcclxuICAgIEVDRFNBX1dJVEhfU0hBNTEyID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMDA0NS40LjMuNCIpXHJcbiAgICBFQ0RTQV9XSVRIX1NIQTNfMjI0ID0gT2JqZWN0SWRlbnRpZmllcigiMi4xNi44NDAuMS4xMDEuMy40LjMuOSIpXHJcbiAgICBFQ0RTQV9XSVRIX1NIQTNfMjU2ID0gT2JqZWN0SWRlbnRpZmllcigiMi4xNi44NDAuMS4xMDEuMy40LjMuMTAiKVxyXG4gICAgRUNEU0FfV0lUSF9TSEEzXzM4NCA9IE9iamVjdElkZW50aWZpZXIoIjIuMTYuODQwLjEuMTAxLjMuNC4zLjExIilcclxuICAgIEVDRFNBX1dJVEhfU0hBM181MTIgPSBPYmplY3RJZGVudGlmaWVyKCIyLjE2Ljg0MC4xLjEwMS4zLjQuMy4xMiIpXHJcbiAgICBEU0FfV0lUSF9TSEExID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMDA0MC40LjMiKVxyXG4gICAgRFNBX1dJVEhfU0hBMjI0ID0gT2JqZWN0SWRlbnRpZmllcigiMi4xNi44NDAuMS4xMDEuMy40LjMuMSIpXHJcbiAgICBEU0FfV0lUSF9TSEEyNTYgPSBPYmplY3RJZGVudGlmaWVyKCIyLjE2Ljg0MC4xLjEwMS4zLjQuMy4yIilcclxuICAgIERTQV9XSVRIX1NIQTM4NCA9IE9iamVjdElkZW50aWZpZXIoIjIuMTYuODQwLjEuMTAxLjMuNC4zLjMiKVxyXG4gICAgRFNBX1dJVEhfU0hBNTEyID0gT2JqZWN0SWRlbnRpZmllcigiMi4xNi44NDAuMS4xMDEuMy40LjMuNCIpXHJcbiAgICBFRDI1NTE5ID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjEwMS4xMTIiKVxyXG4gICAgRUQ0NDggPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuMTAxLjExMyIpXHJcbiAgICBHT1NUUjM0MTFfOTRfV0lUSF8zNDEwXzIwMDEgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuNjQzLjIuMi4zIilcclxuICAgIEdPU1RSMzQxMF8yMDEyX1dJVEhfMzQxMV8yMDEyXzI1NiA9IE9iamVjdElkZW50aWZpZXIoIjEuMi42NDMuNy4xLjEuMy4yIilcclxuICAgIEdPU1RSMzQxMF8yMDEyX1dJVEhfMzQxMV8yMDEyXzUxMiA9IE9iamVjdElkZW50aWZpZXIoIjEuMi42NDMuNy4xLjEuMy4zIilcclxuXHJcblxyXG5fU0lHX09JRFNfVE9fSEFTSDogdHlwaW5nLkRpY3RbXHJcbiAgICBPYmplY3RJZGVudGlmaWVyLCB0eXBpbmcuT3B0aW9uYWxbaGFzaGVzLkhhc2hBbGdvcml0aG1dXHJcbl0gPSB7XHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuUlNBX1dJVEhfTUQ1OiBoYXNoZXMuTUQ1KCksXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuUlNBX1dJVEhfU0hBMTogaGFzaGVzLlNIQTEoKSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5fUlNBX1dJVEhfU0hBMTogaGFzaGVzLlNIQTEoKSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FfV0lUSF9TSEEyMjQ6IGhhc2hlcy5TSEEyMjQoKSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FfV0lUSF9TSEEyNTY6IGhhc2hlcy5TSEEyNTYoKSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FfV0lUSF9TSEEzODQ6IGhhc2hlcy5TSEEzODQoKSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FfV0lUSF9TSEE1MTI6IGhhc2hlcy5TSEE1MTIoKSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FQ0RTQV9XSVRIX1NIQTE6IGhhc2hlcy5TSEExKCksXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuRUNEU0FfV0lUSF9TSEEyMjQ6IGhhc2hlcy5TSEEyMjQoKSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FQ0RTQV9XSVRIX1NIQTI1NjogaGFzaGVzLlNIQTI1NigpLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVDRFNBX1dJVEhfU0hBMzg0OiBoYXNoZXMuU0hBMzg0KCksXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuRUNEU0FfV0lUSF9TSEE1MTI6IGhhc2hlcy5TSEE1MTIoKSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5EU0FfV0lUSF9TSEExOiBoYXNoZXMuU0hBMSgpLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkRTQV9XSVRIX1NIQTIyNDogaGFzaGVzLlNIQTIyNCgpLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkRTQV9XSVRIX1NIQTI1NjogaGFzaGVzLlNIQTI1NigpLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVEMjU1MTk6IE5vbmUsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuRUQ0NDg6IE5vbmUsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuR09TVFIzNDExXzk0X1dJVEhfMzQxMF8yMDAxOiBOb25lLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkdPU1RSMzQxMF8yMDEyX1dJVEhfMzQxMV8yMDEyXzI1NjogTm9uZSxcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5HT1NUUjM0MTBfMjAxMl9XSVRIXzM0MTFfMjAxMl81MTI6IE5vbmUsXHJcbn1cclxuXHJcblxyXG5jbGFzcyBFeHRlbmRlZEtleVVzYWdlT0lEOlxyXG4gICAgU0VSVkVSX0FVVEggPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjUuNS43LjMuMSIpXHJcbiAgICBDTElFTlRfQVVUSCA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS41LjcuMy4yIilcclxuICAgIENPREVfU0lHTklORyA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS41LjcuMy4zIilcclxuICAgIEVNQUlMX1BST1RFQ1RJT04gPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjUuNS43LjMuNCIpXHJcbiAgICBUSU1FX1NUQU1QSU5HID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjUuNy4zLjgiKVxyXG4gICAgT0NTUF9TSUdOSU5HID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjUuNy4zLjkiKVxyXG4gICAgQU5ZX0VYVEVOREVEX0tFWV9VU0FHRSA9IE9iamVjdElkZW50aWZpZXIoIjIuNS4yOS4zNy4wIilcclxuICAgIFNNQVJUQ0FSRF9MT0dPTiA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNC4xLjMxMS4yMC4yLjIiKVxyXG4gICAgS0VSQkVST1NfUEtJTklUX0tEQyA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS4yLjMuNSIpXHJcbiAgICBJUFNFQ19JS0UgPSBPYmplY3RJZGVudGlmaWVyKCIxLjMuNi4xLjUuNS43LjMuMTciKVxyXG5cclxuXHJcbmNsYXNzIEF1dGhvcml0eUluZm9ybWF0aW9uQWNjZXNzT0lEOlxyXG4gICAgQ0FfSVNTVUVSUyA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS41LjcuNDguMiIpXHJcbiAgICBPQ1NQID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjUuNy40OC4xIilcclxuXHJcblxyXG5jbGFzcyBTdWJqZWN0SW5mb3JtYXRpb25BY2Nlc3NPSUQ6XHJcbiAgICBDQV9SRVBPU0lUT1JZID0gT2JqZWN0SWRlbnRpZmllcigiMS4zLjYuMS41LjUuNy40OC41IilcclxuXHJcblxyXG5jbGFzcyBDZXJ0aWZpY2F0ZVBvbGljaWVzT0lEOlxyXG4gICAgQ1BTX1FVQUxJRklFUiA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS41LjcuMi4xIilcclxuICAgIENQU19VU0VSX05PVElDRSA9IE9iamVjdElkZW50aWZpZXIoIjEuMy42LjEuNS41LjcuMi4yIilcclxuICAgIEFOWV9QT0xJQ1kgPSBPYmplY3RJZGVudGlmaWVyKCIyLjUuMjkuMzIuMCIpXHJcblxyXG5cclxuY2xhc3MgQXR0cmlidXRlT0lEOlxyXG4gICAgQ0hBTExFTkdFX1BBU1NXT1JEID0gT2JqZWN0SWRlbnRpZmllcigiMS4yLjg0MC4xMTM1NDkuMS45LjciKVxyXG4gICAgVU5TVFJVQ1RVUkVEX05BTUUgPSBPYmplY3RJZGVudGlmaWVyKCIxLjIuODQwLjExMzU0OS4xLjkuMiIpXHJcblxyXG5cclxuX09JRF9OQU1FUyA9IHtcclxuICAgIE5hbWVPSUQuQ09NTU9OX05BTUU6ICJjb21tb25OYW1lIixcclxuICAgIE5hbWVPSUQuQ09VTlRSWV9OQU1FOiAiY291bnRyeU5hbWUiLFxyXG4gICAgTmFtZU9JRC5MT0NBTElUWV9OQU1FOiAibG9jYWxpdHlOYW1lIixcclxuICAgIE5hbWVPSUQuU1RBVEVfT1JfUFJPVklOQ0VfTkFNRTogInN0YXRlT3JQcm92aW5jZU5hbWUiLFxyXG4gICAgTmFtZU9JRC5TVFJFRVRfQUREUkVTUzogInN0cmVldEFkZHJlc3MiLFxyXG4gICAgTmFtZU9JRC5PUkdBTklaQVRJT05fTkFNRTogIm9yZ2FuaXphdGlvbk5hbWUiLFxyXG4gICAgTmFtZU9JRC5PUkdBTklaQVRJT05BTF9VTklUX05BTUU6ICJvcmdhbml6YXRpb25hbFVuaXROYW1lIixcclxuICAgIE5hbWVPSUQuU0VSSUFMX05VTUJFUjogInNlcmlhbE51bWJlciIsXHJcbiAgICBOYW1lT0lELlNVUk5BTUU6ICJzdXJuYW1lIixcclxuICAgIE5hbWVPSUQuR0lWRU5fTkFNRTogImdpdmVuTmFtZSIsXHJcbiAgICBOYW1lT0lELlRJVExFOiAidGl0bGUiLFxyXG4gICAgTmFtZU9JRC5HRU5FUkFUSU9OX1FVQUxJRklFUjogImdlbmVyYXRpb25RdWFsaWZpZXIiLFxyXG4gICAgTmFtZU9JRC5YNTAwX1VOSVFVRV9JREVOVElGSUVSOiAieDUwMFVuaXF1ZUlkZW50aWZpZXIiLFxyXG4gICAgTmFtZU9JRC5ETl9RVUFMSUZJRVI6ICJkblF1YWxpZmllciIsXHJcbiAgICBOYW1lT0lELlBTRVVET05ZTTogInBzZXVkb255bSIsXHJcbiAgICBOYW1lT0lELlVTRVJfSUQ6ICJ1c2VySUQiLFxyXG4gICAgTmFtZU9JRC5ET01BSU5fQ09NUE9ORU5UOiAiZG9tYWluQ29tcG9uZW50IixcclxuICAgIE5hbWVPSUQuRU1BSUxfQUREUkVTUzogImVtYWlsQWRkcmVzcyIsXHJcbiAgICBOYW1lT0lELkpVUklTRElDVElPTl9DT1VOVFJZX05BTUU6ICJqdXJpc2RpY3Rpb25Db3VudHJ5TmFtZSIsXHJcbiAgICBOYW1lT0lELkpVUklTRElDVElPTl9MT0NBTElUWV9OQU1FOiAianVyaXNkaWN0aW9uTG9jYWxpdHlOYW1lIixcclxuICAgIE5hbWVPSUQuSlVSSVNESUNUSU9OX1NUQVRFX09SX1BST1ZJTkNFX05BTUU6IChcclxuICAgICAgICAianVyaXNkaWN0aW9uU3RhdGVPclByb3ZpbmNlTmFtZSJcclxuICAgICksXHJcbiAgICBOYW1lT0lELkJVU0lORVNTX0NBVEVHT1JZOiAiYnVzaW5lc3NDYXRlZ29yeSIsXHJcbiAgICBOYW1lT0lELlBPU1RBTF9BRERSRVNTOiAicG9zdGFsQWRkcmVzcyIsXHJcbiAgICBOYW1lT0lELlBPU1RBTF9DT0RFOiAicG9zdGFsQ29kZSIsXHJcbiAgICBOYW1lT0lELklOTjogIklOTiIsXHJcbiAgICBOYW1lT0lELk9HUk46ICJPR1JOIixcclxuICAgIE5hbWVPSUQuU05JTFM6ICJTTklMUyIsXHJcbiAgICBOYW1lT0lELlVOU1RSVUNUVVJFRF9OQU1FOiAidW5zdHJ1Y3R1cmVkTmFtZSIsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuUlNBX1dJVEhfTUQ1OiAibWQ1V2l0aFJTQUVuY3J5cHRpb24iLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX1NIQTE6ICJzaGExV2l0aFJTQUVuY3J5cHRpb24iLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX1NIQTIyNDogInNoYTIyNFdpdGhSU0FFbmNyeXB0aW9uIixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FfV0lUSF9TSEEyNTY6ICJzaGEyNTZXaXRoUlNBRW5jcnlwdGlvbiIsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuUlNBX1dJVEhfU0hBMzg0OiAic2hhMzg0V2l0aFJTQUVuY3J5cHRpb24iLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELlJTQV9XSVRIX1NIQTUxMjogInNoYTUxMldpdGhSU0FFbmNyeXB0aW9uIixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5SU0FTU0FfUFNTOiAiUlNBU1NBLVBTUyIsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuRUNEU0FfV0lUSF9TSEExOiAiZWNkc2Etd2l0aC1TSEExIixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FQ0RTQV9XSVRIX1NIQTIyNDogImVjZHNhLXdpdGgtU0hBMjI0IixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FQ0RTQV9XSVRIX1NIQTI1NjogImVjZHNhLXdpdGgtU0hBMjU2IixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FQ0RTQV9XSVRIX1NIQTM4NDogImVjZHNhLXdpdGgtU0hBMzg0IixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FQ0RTQV9XSVRIX1NIQTUxMjogImVjZHNhLXdpdGgtU0hBNTEyIixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5EU0FfV0lUSF9TSEExOiAiZHNhLXdpdGgtc2hhMSIsXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuRFNBX1dJVEhfU0hBMjI0OiAiZHNhLXdpdGgtc2hhMjI0IixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5EU0FfV0lUSF9TSEEyNTY6ICJkc2Etd2l0aC1zaGEyNTYiLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkVEMjU1MTk6ICJlZDI1NTE5IixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5FRDQ0ODogImVkNDQ4IixcclxuICAgIFNpZ25hdHVyZUFsZ29yaXRobU9JRC5HT1NUUjM0MTFfOTRfV0lUSF8zNDEwXzIwMDE6IChcclxuICAgICAgICAiR09TVCBSIDM0LjExLTk0IHdpdGggR09TVCBSIDM0LjEwLTIwMDEiXHJcbiAgICApLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELkdPU1RSMzQxMF8yMDEyX1dJVEhfMzQxMV8yMDEyXzI1NjogKFxyXG4gICAgICAgICJHT1NUIFIgMzQuMTAtMjAxMiB3aXRoIEdPU1QgUiAzNC4xMS0yMDEyICgyNTYgYml0KSJcclxuICAgICksXHJcbiAgICBTaWduYXR1cmVBbGdvcml0aG1PSUQuR09TVFIzNDEwXzIwMTJfV0lUSF8zNDExXzIwMTJfNTEyOiAoXHJcbiAgICAgICAgIkdPU1QgUiAzNC4xMC0yMDEyIHdpdGggR09TVCBSIDM0LjExLTIwMTIgKDUxMiBiaXQpIlxyXG4gICAgKSxcclxuICAgIEV4dGVuZGVkS2V5VXNhZ2VPSUQuU0VSVkVSX0FVVEg6ICJzZXJ2ZXJBdXRoIixcclxuICAgIEV4dGVuZGVkS2V5VXNhZ2VPSUQuQ0xJRU5UX0FVVEg6ICJjbGllbnRBdXRoIixcclxuICAgIEV4dGVuZGVkS2V5VXNhZ2VPSUQuQ09ERV9TSUdOSU5HOiAiY29kZVNpZ25pbmciLFxyXG4gICAgRXh0ZW5kZWRLZXlVc2FnZU9JRC5FTUFJTF9QUk9URUNUSU9OOiAiZW1haWxQcm90ZWN0aW9uIixcclxuICAgIEV4dGVuZGVkS2V5VXNhZ2VPSUQuVElNRV9TVEFNUElORzogInRpbWVTdGFtcGluZyIsXHJcbiAgICBFeHRlbmRlZEtleVVzYWdlT0lELk9DU1BfU0lHTklORzogIk9DU1BTaWduaW5nIixcclxuICAgIEV4dGVuZGVkS2V5VXNhZ2VPSUQuU01BUlRDQVJEX0xPR09OOiAibXNTbWFydGNhcmRMb2dpbiIsXHJcbiAgICBFeHRlbmRlZEtleVVzYWdlT0lELktFUkJFUk9TX1BLSU5JVF9LREM6ICJwa0luaXRLREMiLFxyXG4gICAgRXh0ZW5zaW9uT0lELlNVQkpFQ1RfRElSRUNUT1JZX0FUVFJJQlVURVM6ICJzdWJqZWN0RGlyZWN0b3J5QXR0cmlidXRlcyIsXHJcbiAgICBFeHRlbnNpb25PSUQuU1VCSkVDVF9LRVlfSURFTlRJRklFUjogInN1YmplY3RLZXlJZGVudGlmaWVyIixcclxuICAgIEV4dGVuc2lvbk9JRC5LRVlfVVNBR0U6ICJrZXlVc2FnZSIsXHJcbiAgICBFeHRlbnNpb25PSUQuU1VCSkVDVF9BTFRFUk5BVElWRV9OQU1FOiAic3ViamVjdEFsdE5hbWUiLFxyXG4gICAgRXh0ZW5zaW9uT0lELklTU1VFUl9BTFRFUk5BVElWRV9OQU1FOiAiaXNzdWVyQWx0TmFtZSIsXHJcbiAgICBFeHRlbnNpb25PSUQuQkFTSUNfQ09OU1RSQUlOVFM6ICJiYXNpY0NvbnN0cmFpbnRzIixcclxuICAgIEV4dGVuc2lvbk9JRC5QUkVDRVJUX1NJR05FRF9DRVJUSUZJQ0FURV9USU1FU1RBTVBTOiAoXHJcbiAgICAgICAgInNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wTGlzdCJcclxuICAgICksXHJcbiAgICBFeHRlbnNpb25PSUQuU0lHTkVEX0NFUlRJRklDQVRFX1RJTUVTVEFNUFM6IChcclxuICAgICAgICAic2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBMaXN0IlxyXG4gICAgKSxcclxuICAgIEV4dGVuc2lvbk9JRC5QUkVDRVJUX1BPSVNPTjogImN0UG9pc29uIixcclxuICAgIENSTEVudHJ5RXh0ZW5zaW9uT0lELkNSTF9SRUFTT046ICJjUkxSZWFzb24iLFxyXG4gICAgQ1JMRW50cnlFeHRlbnNpb25PSUQuSU5WQUxJRElUWV9EQVRFOiAiaW52YWxpZGl0eURhdGUiLFxyXG4gICAgQ1JMRW50cnlFeHRlbnNpb25PSUQuQ0VSVElGSUNBVEVfSVNTVUVSOiAiY2VydGlmaWNhdGVJc3N1ZXIiLFxyXG4gICAgRXh0ZW5zaW9uT0lELk5BTUVfQ09OU1RSQUlOVFM6ICJuYW1lQ29uc3RyYWludHMiLFxyXG4gICAgRXh0ZW5zaW9uT0lELkNSTF9ESVNUUklCVVRJT05fUE9JTlRTOiAiY1JMRGlzdHJpYnV0aW9uUG9pbnRzIixcclxuICAgIEV4dGVuc2lvbk9JRC5DRVJUSUZJQ0FURV9QT0xJQ0lFUzogImNlcnRpZmljYXRlUG9saWNpZXMiLFxyXG4gICAgRXh0ZW5zaW9uT0lELlBPTElDWV9NQVBQSU5HUzogInBvbGljeU1hcHBpbmdzIixcclxuICAgIEV4dGVuc2lvbk9JRC5BVVRIT1JJVFlfS0VZX0lERU5USUZJRVI6ICJhdXRob3JpdHlLZXlJZGVudGlmaWVyIixcclxuICAgIEV4dGVuc2lvbk9JRC5QT0xJQ1lfQ09OU1RSQUlOVFM6ICJwb2xpY3lDb25zdHJhaW50cyIsXHJcbiAgICBFeHRlbnNpb25PSUQuRVhURU5ERURfS0VZX1VTQUdFOiAiZXh0ZW5kZWRLZXlVc2FnZSIsXHJcbiAgICBFeHRlbnNpb25PSUQuRlJFU0hFU1RfQ1JMOiAiZnJlc2hlc3RDUkwiLFxyXG4gICAgRXh0ZW5zaW9uT0lELklOSElCSVRfQU5ZX1BPTElDWTogImluaGliaXRBbnlQb2xpY3kiLFxyXG4gICAgRXh0ZW5zaW9uT0lELklTU1VJTkdfRElTVFJJQlVUSU9OX1BPSU5UOiAoImlzc3VpbmdEaXN0cmlidXRpb25Qb2ludCIpLFxyXG4gICAgRXh0ZW5zaW9uT0lELkFVVEhPUklUWV9JTkZPUk1BVElPTl9BQ0NFU1M6ICJhdXRob3JpdHlJbmZvQWNjZXNzIixcclxuICAgIEV4dGVuc2lvbk9JRC5TVUJKRUNUX0lORk9STUFUSU9OX0FDQ0VTUzogInN1YmplY3RJbmZvQWNjZXNzIixcclxuICAgIEV4dGVuc2lvbk9JRC5PQ1NQX05PX0NIRUNLOiAiT0NTUE5vQ2hlY2siLFxyXG4gICAgRXh0ZW5zaW9uT0lELkNSTF9OVU1CRVI6ICJjUkxOdW1iZXIiLFxyXG4gICAgRXh0ZW5zaW9uT0lELkRFTFRBX0NSTF9JTkRJQ0FUT1I6ICJkZWx0YUNSTEluZGljYXRvciIsXHJcbiAgICBFeHRlbnNpb25PSUQuVExTX0ZFQVRVUkU6ICJUTFNGZWF0dXJlIixcclxuICAgIEF1dGhvcml0eUluZm9ybWF0aW9uQWNjZXNzT0lELk9DU1A6ICJPQ1NQIixcclxuICAgIEF1dGhvcml0eUluZm9ybWF0aW9uQWNjZXNzT0lELkNBX0lTU1VFUlM6ICJjYUlzc3VlcnMiLFxyXG4gICAgU3ViamVjdEluZm9ybWF0aW9uQWNjZXNzT0lELkNBX1JFUE9TSVRPUlk6ICJjYVJlcG9zaXRvcnkiLFxyXG4gICAgQ2VydGlmaWNhdGVQb2xpY2llc09JRC5DUFNfUVVBTElGSUVSOiAiaWQtcXQtY3BzIixcclxuICAgIENlcnRpZmljYXRlUG9saWNpZXNPSUQuQ1BTX1VTRVJfTk9USUNFOiAiaWQtcXQtdW5vdGljZSIsXHJcbiAgICBPQ1NQRXh0ZW5zaW9uT0lELk5PTkNFOiAiT0NTUE5vbmNlIixcclxuICAgIEF0dHJpYnV0ZU9JRC5DSEFMTEVOR0VfUEFTU1dPUkQ6ICJjaGFsbGVuZ2VQYXNzd29yZCIsXHJcbn1cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9hc3ltbWV0cmljL2VkMjU1MTkucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGFiY1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuZXhjZXB0aW9ucyBpbXBvcnQgVW5zdXBwb3J0ZWRBbGdvcml0aG0sIF9SZWFzb25zXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBfc2VyaWFsaXphdGlvblxyXG5cclxuXHJcbl9FRDI1NTE5X0tFWV9TSVpFID0gMzJcclxuX0VEMjU1MTlfU0lHX1NJWkUgPSA2NFxyXG5cclxuXHJcbmNsYXNzIEVkMjU1MTlQdWJsaWNLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGZyb21fcHVibGljX2J5dGVzKGNscywgZGF0YTogYnl0ZXMpIC0+ICJFZDI1NTE5UHVibGljS2V5IjpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgICAgIGlmIG5vdCBiYWNrZW5kLmVkMjU1MTlfc3VwcG9ydGVkKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgImVkMjU1MTkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHZlcnNpb24gb2YgT3BlblNTTC4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfUFVCTElDX0tFWV9BTEdPUklUSE0sXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIGJhY2tlbmQuZWQyNTUxOV9sb2FkX3B1YmxpY19ieXRlcyhkYXRhKVxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogX3NlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBfc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBzZXJpYWxpemVkIGJ5dGVzIG9mIHRoZSBwdWJsaWMga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiB2ZXJpZnkoc2VsZiwgc2lnbmF0dXJlOiBieXRlcywgZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVmVyaWZ5IHRoZSBzaWduYXR1cmUuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgRWQyNTUxOVByaXZhdGVLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGdlbmVyYXRlKGNscykgLT4gIkVkMjU1MTlQcml2YXRlS2V5IjpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgICAgIGlmIG5vdCBiYWNrZW5kLmVkMjU1MTlfc3VwcG9ydGVkKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgImVkMjU1MTkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHZlcnNpb24gb2YgT3BlblNTTC4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfUFVCTElDX0tFWV9BTEdPUklUSE0sXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIGJhY2tlbmQuZWQyNTUxOV9nZW5lcmF0ZV9rZXkoKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGZyb21fcHJpdmF0ZV9ieXRlcyhjbHMsIGRhdGE6IGJ5dGVzKSAtPiAiRWQyNTUxOVByaXZhdGVLZXkiOlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQuZWQyNTUxOV9zdXBwb3J0ZWQoKTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiZWQyNTUxOSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgdmVyc2lvbiBvZiBPcGVuU1NMLiIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9QVUJMSUNfS0VZX0FMR09SSVRITSxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gYmFja2VuZC5lZDI1NTE5X2xvYWRfcHJpdmF0ZV9ieXRlcyhkYXRhKVxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfa2V5KHNlbGYpIC0+IEVkMjU1MTlQdWJsaWNLZXk6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIEVkMjU1MTlQdWJsaWNLZXkgZGVyaXZlZCBmcm9tIHRoZSBwcml2YXRlIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBfc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IF9zZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQsXHJcbiAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG06IF9zZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgc2VyaWFsaXplZCBieXRlcyBvZiB0aGUgcHJpdmF0ZSBrZXkuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHNpZ24oc2VsZiwgZGF0YTogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNpZ25zIHRoZSBkYXRhLlxyXG4gICAgICAgICIiIlxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2FzeW1tZXRyaWMvZWQ0NDgucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGFiY1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuZXhjZXB0aW9ucyBpbXBvcnQgVW5zdXBwb3J0ZWRBbGdvcml0aG0sIF9SZWFzb25zXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBfc2VyaWFsaXphdGlvblxyXG5cclxuXHJcbmNsYXNzIEVkNDQ4UHVibGljS2V5KG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBmcm9tX3B1YmxpY19ieXRlcyhjbHMsIGRhdGE6IGJ5dGVzKSAtPiAiRWQ0NDhQdWJsaWNLZXkiOlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQuZWQ0NDhfc3VwcG9ydGVkKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgImVkNDQ4IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyB2ZXJzaW9uIG9mIE9wZW5TU0wuIixcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX1BVQkxJQ19LRVlfQUxHT1JJVEhNLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBiYWNrZW5kLmVkNDQ4X2xvYWRfcHVibGljX2J5dGVzKGRhdGEpXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBfc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IF9zZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHNlcmlhbGl6ZWQgYnl0ZXMgb2YgdGhlIHB1YmxpYyBrZXkuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHZlcmlmeShzZWxmLCBzaWduYXR1cmU6IGJ5dGVzLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBWZXJpZnkgdGhlIHNpZ25hdHVyZS5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBFZDQ0OFByaXZhdGVLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGdlbmVyYXRlKGNscykgLT4gIkVkNDQ4UHJpdmF0ZUtleSI6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgICAgICBpZiBub3QgYmFja2VuZC5lZDQ0OF9zdXBwb3J0ZWQoKTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiZWQ0NDggaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHZlcnNpb24gb2YgT3BlblNTTC4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfUFVCTElDX0tFWV9BTEdPUklUSE0sXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gYmFja2VuZC5lZDQ0OF9nZW5lcmF0ZV9rZXkoKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGZyb21fcHJpdmF0ZV9ieXRlcyhjbHMsIGRhdGE6IGJ5dGVzKSAtPiAiRWQ0NDhQcml2YXRlS2V5IjpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgICAgIGlmIG5vdCBiYWNrZW5kLmVkNDQ4X3N1cHBvcnRlZCgpOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJlZDQ0OCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgdmVyc2lvbiBvZiBPcGVuU1NMLiIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9QVUJMSUNfS0VZX0FMR09SSVRITSxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gYmFja2VuZC5lZDQ0OF9sb2FkX3ByaXZhdGVfYnl0ZXMoZGF0YSlcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiBFZDQ0OFB1YmxpY0tleTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgRWQ0NDhQdWJsaWNLZXkgZGVyaXZlZCBmcm9tIHRoZSBwcml2YXRlIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgc2lnbihzZWxmLCBkYXRhOiBieXRlcykgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2lnbnMgdGhlIGRhdGEuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHByaXZhdGVfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogX3NlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBfc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LFxyXG4gICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtOiBfc2VyaWFsaXphdGlvbi5LZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHNlcmlhbGl6ZWQgYnl0ZXMgb2YgdGhlIHByaXZhdGUga2V5LlxyXG4gICAgICAgICIiIlxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2FzeW1tZXRyaWMvcnNhLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuaW1wb3J0IHR5cGluZ1xyXG5mcm9tIG1hdGggaW1wb3J0IGdjZFxyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IF9zZXJpYWxpemF0aW9uLCBoYXNoZXNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuX2FzeW1tZXRyaWMgaW1wb3J0IEFzeW1tZXRyaWNQYWRkaW5nXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMgaW1wb3J0IChcclxuICAgIHV0aWxzIGFzIGFzeW1fdXRpbHMsXHJcbilcclxuXHJcblxyXG5jbGFzcyBSU0FQcml2YXRlS2V5KG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZGVjcnlwdChzZWxmLCBjaXBoZXJ0ZXh0OiBieXRlcywgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIERlY3J5cHRzIHRoZSBwcm92aWRlZCBjaXBoZXJ0ZXh0LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgYml0IGxlbmd0aCBvZiB0aGUgcHVibGljIG1vZHVsdXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gIlJTQVB1YmxpY0tleSI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIFJTQVB1YmxpY0tleSBhc3NvY2lhdGVkIHdpdGggdGhpcyBwcml2YXRlIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgc2lnbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIHBhZGRpbmc6IEFzeW1tZXRyaWNQYWRkaW5nLFxyXG4gICAgICAgIGFsZ29yaXRobTogdHlwaW5nLlVuaW9uW2FzeW1fdXRpbHMuUHJlaGFzaGVkLCBoYXNoZXMuSGFzaEFsZ29yaXRobV0sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFNpZ25zIHRoZSBkYXRhLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwcml2YXRlX251bWJlcnMoc2VsZikgLT4gIlJTQVByaXZhdGVOdW1iZXJzIjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIGFuIFJTQVByaXZhdGVOdW1iZXJzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwcml2YXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IF9zZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogX3NlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogX3NlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGhlIGtleSBzZXJpYWxpemVkIGFzIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcblJTQVByaXZhdGVLZXlXaXRoU2VyaWFsaXphdGlvbiA9IFJTQVByaXZhdGVLZXlcclxuXHJcblxyXG5jbGFzcyBSU0FQdWJsaWNLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBlbmNyeXB0KHNlbGYsIHBsYWludGV4dDogYnl0ZXMsIHBhZGRpbmc6IEFzeW1tZXRyaWNQYWRkaW5nKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBFbmNyeXB0cyB0aGUgZ2l2ZW4gcGxhaW50ZXh0LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgYml0IGxlbmd0aCBvZiB0aGUgcHVibGljIG1vZHVsdXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19udW1iZXJzKHNlbGYpIC0+ICJSU0FQdWJsaWNOdW1iZXJzIjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIGFuIFJTQVB1YmxpY051bWJlcnNcclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IF9zZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogX3NlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSBrZXkgc2VyaWFsaXplZCBhcyBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgdmVyaWZ5KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgc2lnbmF0dXJlOiBieXRlcyxcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBwYWRkaW5nOiBBc3ltbWV0cmljUGFkZGluZyxcclxuICAgICAgICBhbGdvcml0aG06IHR5cGluZy5Vbmlvblthc3ltX3V0aWxzLlByZWhhc2hlZCwgaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFZlcmlmaWVzIHRoZSBzaWduYXR1cmUgb2YgdGhlIGRhdGEuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHJlY292ZXJfZGF0YV9mcm9tX3NpZ25hdHVyZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHNpZ25hdHVyZTogYnl0ZXMsXHJcbiAgICAgICAgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcsXHJcbiAgICAgICAgYWxnb3JpdGhtOiB0eXBpbmcuT3B0aW9uYWxbaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZWNvdmVycyB0aGUgb3JpZ2luYWwgZGF0YSBmcm9tIHRoZSBzaWduYXR1cmUuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuUlNBUHVibGljS2V5V2l0aFNlcmlhbGl6YXRpb24gPSBSU0FQdWJsaWNLZXlcclxuXHJcblxyXG5kZWYgZ2VuZXJhdGVfcHJpdmF0ZV9rZXkoXHJcbiAgICBwdWJsaWNfZXhwb25lbnQ6IGludCxcclxuICAgIGtleV9zaXplOiBpbnQsXHJcbiAgICBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZSxcclxuKSAtPiBSU0FQcml2YXRlS2V5OlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZCBhcyBvc3NsXHJcblxyXG4gICAgX3ZlcmlmeV9yc2FfcGFyYW1ldGVycyhwdWJsaWNfZXhwb25lbnQsIGtleV9zaXplKVxyXG4gICAgcmV0dXJuIG9zc2wuZ2VuZXJhdGVfcnNhX3ByaXZhdGVfa2V5KHB1YmxpY19leHBvbmVudCwga2V5X3NpemUpXHJcblxyXG5cclxuZGVmIF92ZXJpZnlfcnNhX3BhcmFtZXRlcnMocHVibGljX2V4cG9uZW50OiBpbnQsIGtleV9zaXplOiBpbnQpIC0+IE5vbmU6XHJcbiAgICBpZiBwdWJsaWNfZXhwb25lbnQgbm90IGluICgzLCA2NTUzNyk6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgInB1YmxpY19leHBvbmVudCBtdXN0IGJlIGVpdGhlciAzIChmb3IgbGVnYWN5IGNvbXBhdGliaWxpdHkpIG9yICJcclxuICAgICAgICAgICAgIjY1NTM3LiBBbG1vc3QgZXZlcnlvbmUgc2hvdWxkIGNob29zZSA2NTUzNyBoZXJlISJcclxuICAgICAgICApXHJcblxyXG4gICAgaWYga2V5X3NpemUgPCA1MTI6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigia2V5X3NpemUgbXVzdCBiZSBhdCBsZWFzdCA1MTItYml0cy4iKVxyXG5cclxuXHJcbmRlZiBfY2hlY2tfcHJpdmF0ZV9rZXlfY29tcG9uZW50cyhcclxuICAgIHA6IGludCxcclxuICAgIHE6IGludCxcclxuICAgIHByaXZhdGVfZXhwb25lbnQ6IGludCxcclxuICAgIGRtcDE6IGludCxcclxuICAgIGRtcTE6IGludCxcclxuICAgIGlxbXA6IGludCxcclxuICAgIHB1YmxpY19leHBvbmVudDogaW50LFxyXG4gICAgbW9kdWx1czogaW50LFxyXG4pIC0+IE5vbmU6XHJcbiAgICBpZiBtb2R1bHVzIDwgMzpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJtb2R1bHVzIG11c3QgYmUgPj0gMy4iKVxyXG5cclxuICAgIGlmIHAgPj0gbW9kdWx1czpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJwIG11c3QgYmUgPCBtb2R1bHVzLiIpXHJcblxyXG4gICAgaWYgcSA+PSBtb2R1bHVzOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInEgbXVzdCBiZSA8IG1vZHVsdXMuIilcclxuXHJcbiAgICBpZiBkbXAxID49IG1vZHVsdXM6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZG1wMSBtdXN0IGJlIDwgbW9kdWx1cy4iKVxyXG5cclxuICAgIGlmIGRtcTEgPj0gbW9kdWx1czpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJkbXExIG11c3QgYmUgPCBtb2R1bHVzLiIpXHJcblxyXG4gICAgaWYgaXFtcCA+PSBtb2R1bHVzOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImlxbXAgbXVzdCBiZSA8IG1vZHVsdXMuIilcclxuXHJcbiAgICBpZiBwcml2YXRlX2V4cG9uZW50ID49IG1vZHVsdXM6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicHJpdmF0ZV9leHBvbmVudCBtdXN0IGJlIDwgbW9kdWx1cy4iKVxyXG5cclxuICAgIGlmIHB1YmxpY19leHBvbmVudCA8IDMgb3IgcHVibGljX2V4cG9uZW50ID49IG1vZHVsdXM6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicHVibGljX2V4cG9uZW50IG11c3QgYmUgPj0gMyBhbmQgPCBtb2R1bHVzLiIpXHJcblxyXG4gICAgaWYgcHVibGljX2V4cG9uZW50ICYgMSA9PSAwOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInB1YmxpY19leHBvbmVudCBtdXN0IGJlIG9kZC4iKVxyXG5cclxuICAgIGlmIGRtcDEgJiAxID09IDA6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZG1wMSBtdXN0IGJlIG9kZC4iKVxyXG5cclxuICAgIGlmIGRtcTEgJiAxID09IDA6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZG1xMSBtdXN0IGJlIG9kZC4iKVxyXG5cclxuICAgIGlmIHAgKiBxICE9IG1vZHVsdXM6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicCpxIG11c3QgZXF1YWwgbW9kdWx1cy4iKVxyXG5cclxuXHJcbmRlZiBfY2hlY2tfcHVibGljX2tleV9jb21wb25lbnRzKGU6IGludCwgbjogaW50KSAtPiBOb25lOlxyXG4gICAgaWYgbiA8IDM6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibiBtdXN0IGJlID49IDMuIilcclxuXHJcbiAgICBpZiBlIDwgMyBvciBlID49IG46XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZSBtdXN0IGJlID49IDMgYW5kIDwgbi4iKVxyXG5cclxuICAgIGlmIGUgJiAxID09IDA6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZSBtdXN0IGJlIG9kZC4iKVxyXG5cclxuXHJcbmRlZiBfbW9kaW52KGU6IGludCwgbTogaW50KSAtPiBpbnQ6XHJcbiAgICAiIiJcclxuICAgIE1vZHVsYXIgTXVsdGlwbGljYXRpdmUgSW52ZXJzZS4gUmV0dXJucyB4IHN1Y2ggdGhhdDogKHgqZSkgbW9kIG0gPT0gMVxyXG4gICAgIiIiXHJcbiAgICB4MSwgeDIgPSAxLCAwXHJcbiAgICBhLCBiID0gZSwgbVxyXG4gICAgd2hpbGUgYiA+IDA6XHJcbiAgICAgICAgcSwgciA9IGRpdm1vZChhLCBiKVxyXG4gICAgICAgIHhuID0geDEgLSBxICogeDJcclxuICAgICAgICBhLCBiLCB4MSwgeDIgPSBiLCByLCB4MiwgeG5cclxuICAgIHJldHVybiB4MSAlIG1cclxuXHJcblxyXG5kZWYgcnNhX2NydF9pcW1wKHA6IGludCwgcTogaW50KSAtPiBpbnQ6XHJcbiAgICAiIiJcclxuICAgIENvbXB1dGUgdGhlIENSVCAocSAqKiAtMSkgJSBwIHZhbHVlIGZyb20gUlNBIHByaW1lcyBwIGFuZCBxLlxyXG4gICAgIiIiXHJcbiAgICByZXR1cm4gX21vZGludihxLCBwKVxyXG5cclxuXHJcbmRlZiByc2FfY3J0X2RtcDEocHJpdmF0ZV9leHBvbmVudDogaW50LCBwOiBpbnQpIC0+IGludDpcclxuICAgICIiIlxyXG4gICAgQ29tcHV0ZSB0aGUgQ1JUIHByaXZhdGVfZXhwb25lbnQgJSAocCAtIDEpIHZhbHVlIGZyb20gdGhlIFJTQVxyXG4gICAgcHJpdmF0ZV9leHBvbmVudCAoZCkgYW5kIHAuXHJcbiAgICAiIiJcclxuICAgIHJldHVybiBwcml2YXRlX2V4cG9uZW50ICUgKHAgLSAxKVxyXG5cclxuXHJcbmRlZiByc2FfY3J0X2RtcTEocHJpdmF0ZV9leHBvbmVudDogaW50LCBxOiBpbnQpIC0+IGludDpcclxuICAgICIiIlxyXG4gICAgQ29tcHV0ZSB0aGUgQ1JUIHByaXZhdGVfZXhwb25lbnQgJSAocSAtIDEpIHZhbHVlIGZyb20gdGhlIFJTQVxyXG4gICAgcHJpdmF0ZV9leHBvbmVudCAoZCkgYW5kIHEuXHJcbiAgICAiIiJcclxuICAgIHJldHVybiBwcml2YXRlX2V4cG9uZW50ICUgKHEgLSAxKVxyXG5cclxuXHJcbiMgQ29udHJvbHMgdGhlIG51bWJlciBvZiBpdGVyYXRpb25zIHJzYV9yZWNvdmVyX3ByaW1lX2ZhY3RvcnMgd2lsbCBwZXJmb3JtXHJcbiMgdG8gb2J0YWluIHRoZSBwcmltZSBmYWN0b3JzLiBFYWNoIGl0ZXJhdGlvbiBpbmNyZW1lbnRzIGJ5IDIgc28gdGhlIGFjdHVhbFxyXG4jIG1heGltdW0gYXR0ZW1wdHMgaXMgaGFsZiB0aGlzIG51bWJlci5cclxuX01BWF9SRUNPVkVSWV9BVFRFTVBUUyA9IDEwMDBcclxuXHJcblxyXG5kZWYgcnNhX3JlY292ZXJfcHJpbWVfZmFjdG9ycyhcclxuICAgIG46IGludCwgZTogaW50LCBkOiBpbnRcclxuKSAtPiB0eXBpbmcuVHVwbGVbaW50LCBpbnRdOlxyXG4gICAgIiIiXHJcbiAgICBDb21wdXRlIGZhY3RvcnMgcCBhbmQgcSBmcm9tIHRoZSBwcml2YXRlIGV4cG9uZW50IGQuIFdlIGFzc3VtZSB0aGF0IG4gaGFzXHJcbiAgICBubyBtb3JlIHRoYW4gdHdvIGZhY3RvcnMuIFRoaXMgZnVuY3Rpb24gaXMgYWRhcHRlZCBmcm9tIGNvZGUgaW4gUHlDcnlwdG8uXHJcbiAgICAiIiJcclxuICAgICMgU2VlIDguMi4yKGkpIGluIEhhbmRib29rIG9mIEFwcGxpZWQgQ3J5cHRvZ3JhcGh5LlxyXG4gICAga3RvdCA9IGQgKiBlIC0gMVxyXG4gICAgIyBUaGUgcXVhbnRpdHkgZCplLTEgaXMgYSBtdWx0aXBsZSBvZiBwaGkobiksIGV2ZW4sXHJcbiAgICAjIGFuZCBjYW4gYmUgcmVwcmVzZW50ZWQgYXMgdCoyXnMuXHJcbiAgICB0ID0ga3RvdFxyXG4gICAgd2hpbGUgdCAlIDIgPT0gMDpcclxuICAgICAgICB0ID0gdCAvLyAyXHJcbiAgICAjIEN5Y2xlIHRocm91Z2ggYWxsIG11bHRpcGxpY2F0aXZlIGludmVyc2VzIGluIFpuLlxyXG4gICAgIyBUaGUgYWxnb3JpdGhtIGlzIG5vbi1kZXRlcm1pbmlzdGljLCBidXQgdGhlcmUgaXMgYSA1MCUgY2hhbmNlXHJcbiAgICAjIGFueSBjYW5kaWRhdGUgYSBsZWFkcyB0byBzdWNjZXNzZnVsIGZhY3RvcmluZy5cclxuICAgICMgU2VlICJEaWdpdGFsaXplZCBTaWduYXR1cmVzIGFuZCBQdWJsaWMgS2V5IEZ1bmN0aW9ucyBhcyBJbnRyYWN0YWJsZVxyXG4gICAgIyBhcyBGYWN0b3JpemF0aW9uIiwgTS4gUmFiaW4sIDE5NzlcclxuICAgIHNwb3R0ZWQgPSBGYWxzZVxyXG4gICAgYSA9IDJcclxuICAgIHdoaWxlIG5vdCBzcG90dGVkIGFuZCBhIDwgX01BWF9SRUNPVkVSWV9BVFRFTVBUUzpcclxuICAgICAgICBrID0gdFxyXG4gICAgICAgICMgQ3ljbGUgdGhyb3VnaCBhbGwgdmFsdWVzIGFee3QqMl5pfT1hXmtcclxuICAgICAgICB3aGlsZSBrIDwga3RvdDpcclxuICAgICAgICAgICAgY2FuZCA9IHBvdyhhLCBrLCBuKVxyXG4gICAgICAgICAgICAjIENoZWNrIGlmIGFeayBpcyBhIG5vbi10cml2aWFsIHJvb3Qgb2YgdW5pdHkgKG1vZCBuKVxyXG4gICAgICAgICAgICBpZiBjYW5kICE9IDEgYW5kIGNhbmQgIT0gKG4gLSAxKSBhbmQgcG93KGNhbmQsIDIsIG4pID09IDE6XHJcbiAgICAgICAgICAgICAgICAjIFdlIGhhdmUgZm91bmQgYSBudW1iZXIgc3VjaCB0aGF0IChjYW5kLTEpKGNhbmQrMSk9MCAobW9kIG4pLlxyXG4gICAgICAgICAgICAgICAgIyBFaXRoZXIgb2YgdGhlIHRlcm1zIGRpdmlkZXMgbi5cclxuICAgICAgICAgICAgICAgIHAgPSBnY2QoY2FuZCArIDEsIG4pXHJcbiAgICAgICAgICAgICAgICBzcG90dGVkID0gVHJ1ZVxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgayAqPSAyXHJcbiAgICAgICAgIyBUaGlzIHZhbHVlIHdhcyBub3QgYW55IGdvb2QuLi4gbGV0XCdzIHRyeSBhbm90aGVyIVxyXG4gICAgICAgIGEgKz0gMlxyXG4gICAgaWYgbm90IHNwb3R0ZWQ6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVW5hYmxlIHRvIGNvbXB1dGUgZmFjdG9ycyBwIGFuZCBxIGZyb20gZXhwb25lbnQgZC4iKVxyXG4gICAgIyBGb3VuZCAhXHJcbiAgICBxLCByID0gZGl2bW9kKG4sIHApXHJcbiAgICBhc3NlcnQgciA9PSAwXHJcbiAgICBwLCBxID0gc29ydGVkKChwLCBxKSwgcmV2ZXJzZT1UcnVlKVxyXG4gICAgcmV0dXJuIChwLCBxKVxyXG5cclxuXHJcbmNsYXNzIFJTQVByaXZhdGVOdW1iZXJzOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgcDogaW50LFxyXG4gICAgICAgIHE6IGludCxcclxuICAgICAgICBkOiBpbnQsXHJcbiAgICAgICAgZG1wMTogaW50LFxyXG4gICAgICAgIGRtcTE6IGludCxcclxuICAgICAgICBpcW1wOiBpbnQsXHJcbiAgICAgICAgcHVibGljX251bWJlcnM6ICJSU0FQdWJsaWNOdW1iZXJzIixcclxuICAgICk6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBub3QgaXNpbnN0YW5jZShwLCBpbnQpXHJcbiAgICAgICAgICAgIG9yIG5vdCBpc2luc3RhbmNlKHEsIGludClcclxuICAgICAgICAgICAgb3Igbm90IGlzaW5zdGFuY2UoZCwgaW50KVxyXG4gICAgICAgICAgICBvciBub3QgaXNpbnN0YW5jZShkbXAxLCBpbnQpXHJcbiAgICAgICAgICAgIG9yIG5vdCBpc2luc3RhbmNlKGRtcTEsIGludClcclxuICAgICAgICAgICAgb3Igbm90IGlzaW5zdGFuY2UoaXFtcCwgaW50KVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJSU0FQcml2YXRlTnVtYmVycyBwLCBxLCBkLCBkbXAxLCBkbXExLCBpcW1wIGFyZ3VtZW50cyBtdXN0IlxyXG4gICAgICAgICAgICAgICAgIiBhbGwgYmUgYW4gaW50ZWdlcnMuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHB1YmxpY19udW1iZXJzLCBSU0FQdWJsaWNOdW1iZXJzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlJTQVByaXZhdGVOdW1iZXJzIHB1YmxpY19udW1iZXJzIG11c3QgYmUgYW4gUlNBUHVibGljTnVtYmVycyJcclxuICAgICAgICAgICAgICAgICIgaW5zdGFuY2UuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3AgPSBwXHJcbiAgICAgICAgc2VsZi5fcSA9IHFcclxuICAgICAgICBzZWxmLl9kID0gZFxyXG4gICAgICAgIHNlbGYuX2RtcDEgPSBkbXAxXHJcbiAgICAgICAgc2VsZi5fZG1xMSA9IGRtcTFcclxuICAgICAgICBzZWxmLl9pcW1wID0gaXFtcFxyXG4gICAgICAgIHNlbGYuX3B1YmxpY19udW1iZXJzID0gcHVibGljX251bWJlcnNcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHEoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9xXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZChzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2RcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBkbXAxKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZG1wMVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGRtcTEoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kbXExXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgaXFtcChzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2lxbXBcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwdWJsaWNfbnVtYmVycyhzZWxmKSAtPiAiUlNBUHVibGljTnVtYmVycyI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3B1YmxpY19udW1iZXJzXHJcblxyXG4gICAgZGVmIHByaXZhdGVfa2V5KHNlbGYsIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lKSAtPiBSU0FQcml2YXRlS2V5OlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IChcclxuICAgICAgICAgICAgYmFja2VuZCBhcyBvc3NsLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIG9zc2wubG9hZF9yc2FfcHJpdmF0ZV9udW1iZXJzKHNlbGYpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBSU0FQcml2YXRlTnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLnAgPT0gb3RoZXIucFxyXG4gICAgICAgICAgICBhbmQgc2VsZi5xID09IG90aGVyLnFcclxuICAgICAgICAgICAgYW5kIHNlbGYuZCA9PSBvdGhlci5kXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmRtcDEgPT0gb3RoZXIuZG1wMVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5kbXExID09IG90aGVyLmRtcTFcclxuICAgICAgICAgICAgYW5kIHNlbGYuaXFtcCA9PSBvdGhlci5pcW1wXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLnB1YmxpY19udW1iZXJzID09IG90aGVyLnB1YmxpY19udW1iZXJzXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goXHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgIHNlbGYucCxcclxuICAgICAgICAgICAgICAgIHNlbGYucSxcclxuICAgICAgICAgICAgICAgIHNlbGYuZCxcclxuICAgICAgICAgICAgICAgIHNlbGYuZG1wMSxcclxuICAgICAgICAgICAgICAgIHNlbGYuZG1xMSxcclxuICAgICAgICAgICAgICAgIHNlbGYuaXFtcCxcclxuICAgICAgICAgICAgICAgIHNlbGYucHVibGljX251bWJlcnMsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgUlNBUHVibGljTnVtYmVyczpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBlOiBpbnQsIG46IGludCk6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoZSwgaW50KSBvciBub3QgaXNpbnN0YW5jZShuLCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlJTQVB1YmxpY051bWJlcnMgYXJndW1lbnRzIG11c3QgYmUgaW50ZWdlcnMuIilcclxuXHJcbiAgICAgICAgc2VsZi5fZSA9IGVcclxuICAgICAgICBzZWxmLl9uID0gblxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbihzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX25cclxuXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZSkgLT4gUlNBUHVibGljS2V5OlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IChcclxuICAgICAgICAgICAgYmFja2VuZCBhcyBvc3NsLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIG9zc2wubG9hZF9yc2FfcHVibGljX251bWJlcnMoc2VsZilcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFJTQVB1YmxpY051bWJlcnMoZT17MC5lfSwgbj17MC5ufSk+Ii5mb3JtYXQoc2VsZilcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFJTQVB1YmxpY051bWJlcnMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZSA9PSBvdGhlci5lIGFuZCBzZWxmLm4gPT0gb3RoZXIublxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYuZSwgc2VsZi5uKSlcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9fYXN5bW1ldHJpYy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCBhYmNcclxuXHJcblxyXG4jIFRoaXMgZXhpc3RzIHRvIGJyZWFrIGFuIGltcG9ydCBjeWNsZS4gSXQgaXMgbm9ybWFsbHkgYWNjZXNzaWJsZSBmcm9tIHRoZVxyXG4jIGFzeW1tZXRyaWMgcGFkZGluZyBtb2R1bGUuXHJcblxyXG5cclxuY2xhc3MgQXN5bW1ldHJpY1BhZGRpbmcobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIG5hbWUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEEgc3RyaW5nIG5hbWluZyB0aGlzIHBhZGRpbmcgKGUuZy4gIlBTUyIsICJQS0NTMSIpLlxyXG4gICAgICAgICIiIlxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2FzeW1tZXRyaWMveDI1NTE5LnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IFVuc3VwcG9ydGVkQWxnb3JpdGhtLCBfUmVhc29uc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgX3NlcmlhbGl6YXRpb25cclxuXHJcblxyXG5jbGFzcyBYMjU1MTlQdWJsaWNLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGZyb21fcHVibGljX2J5dGVzKGNscywgZGF0YTogYnl0ZXMpIC0+ICJYMjU1MTlQdWJsaWNLZXkiOlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQueDI1NTE5X3N1cHBvcnRlZCgpOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJYMjU1MTkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHZlcnNpb24gb2YgT3BlblNTTC4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfRVhDSEFOR0VfQUxHT1JJVEhNLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBiYWNrZW5kLngyNTUxOV9sb2FkX3B1YmxpY19ieXRlcyhkYXRhKVxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogX3NlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBfc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBzZXJpYWxpemVkIGJ5dGVzIG9mIHRoZSBwdWJsaWMga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIFgyNTUxOVByaXZhdGVLZXkobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGdlbmVyYXRlKGNscykgLT4gIlgyNTUxOVByaXZhdGVLZXkiOlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQueDI1NTE5X3N1cHBvcnRlZCgpOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJYMjU1MTkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHZlcnNpb24gb2YgT3BlblNTTC4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfRVhDSEFOR0VfQUxHT1JJVEhNLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIGJhY2tlbmQueDI1NTE5X2dlbmVyYXRlX2tleSgpXHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZnJvbV9wcml2YXRlX2J5dGVzKGNscywgZGF0YTogYnl0ZXMpIC0+ICJYMjU1MTlQcml2YXRlS2V5IjpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgICAgIGlmIG5vdCBiYWNrZW5kLngyNTUxOV9zdXBwb3J0ZWQoKTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiWDI1NTE5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyB2ZXJzaW9uIG9mIE9wZW5TU0wuIixcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX0VYQ0hBTkdFX0FMR09SSVRITSxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gYmFja2VuZC54MjU1MTlfbG9hZF9wcml2YXRlX2J5dGVzKGRhdGEpXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gWDI1NTE5UHVibGljS2V5OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBzZXJpYWxpemVkIGJ5dGVzIG9mIHRoZSBwdWJsaWMga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwcml2YXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IF9zZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogX3NlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogX3NlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBzZXJpYWxpemVkIGJ5dGVzIG9mIHRoZSBwcml2YXRlIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZXhjaGFuZ2Uoc2VsZiwgcGVlcl9wdWJsaWNfa2V5OiBYMjU1MTlQdWJsaWNLZXkpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFBlcmZvcm1zIGEga2V5IGV4Y2hhbmdlIG9wZXJhdGlvbiB1c2luZyB0aGUgcHJvdmlkZWQgcGVlclwncyBwdWJsaWMga2V5LlxyXG4gICAgICAgICIiIlxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2FzeW1tZXRyaWMveDQ0OC5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgYWJjXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCBVbnN1cHBvcnRlZEFsZ29yaXRobSwgX1JlYXNvbnNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IF9zZXJpYWxpemF0aW9uXHJcblxyXG5cclxuY2xhc3MgWDQ0OFB1YmxpY0tleShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZnJvbV9wdWJsaWNfYnl0ZXMoY2xzLCBkYXRhOiBieXRlcykgLT4gIlg0NDhQdWJsaWNLZXkiOlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQueDQ0OF9zdXBwb3J0ZWQoKTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiWDQ0OCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgdmVyc2lvbiBvZiBPcGVuU1NMLiIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9FWENIQU5HRV9BTEdPUklUSE0sXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIGJhY2tlbmQueDQ0OF9sb2FkX3B1YmxpY19ieXRlcyhkYXRhKVxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogX3NlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBfc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBzZXJpYWxpemVkIGJ5dGVzIG9mIHRoZSBwdWJsaWMga2V5LlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIFg0NDhQcml2YXRlS2V5KG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBnZW5lcmF0ZShjbHMpIC0+ICJYNDQ4UHJpdmF0ZUtleSI6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgICAgICBpZiBub3QgYmFja2VuZC54NDQ4X3N1cHBvcnRlZCgpOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJYNDQ4IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyB2ZXJzaW9uIG9mIE9wZW5TU0wuIixcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX0VYQ0hBTkdFX0FMR09SSVRITSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBiYWNrZW5kLng0NDhfZ2VuZXJhdGVfa2V5KClcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBmcm9tX3ByaXZhdGVfYnl0ZXMoY2xzLCBkYXRhOiBieXRlcykgLT4gIlg0NDhQcml2YXRlS2V5IjpcclxuICAgICAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgICAgIGlmIG5vdCBiYWNrZW5kLng0NDhfc3VwcG9ydGVkKCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIlg0NDggaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHZlcnNpb24gb2YgT3BlblNTTC4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfRVhDSEFOR0VfQUxHT1JJVEhNLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBiYWNrZW5kLng0NDhfbG9hZF9wcml2YXRlX2J5dGVzKGRhdGEpXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gWDQ0OFB1YmxpY0tleTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgc2VyaWFsaXplZCBieXRlcyBvZiB0aGUgcHVibGljIGtleS5cclxuICAgICAgICAiIiJcclxuXHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgcHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBfc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IF9zZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQsXHJcbiAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG06IF9zZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgc2VyaWFsaXplZCBieXRlcyBvZiB0aGUgcHJpdmF0ZSBrZXkuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIGV4Y2hhbmdlKHNlbGYsIHBlZXJfcHVibGljX2tleTogWDQ0OFB1YmxpY0tleSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUGVyZm9ybXMgYSBrZXkgZXhjaGFuZ2Ugb3BlcmF0aW9uIHVzaW5nIHRoZSBwcm92aWRlZCBwZWVyXCdzIHB1YmxpYyBrZXkuXHJcbiAgICAgICAgIiIiXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvc2VyaWFsaXphdGlvbi9zc2gucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGJpbmFzY2lpXHJcbmltcG9ydCBvc1xyXG5pbXBvcnQgcmVcclxuaW1wb3J0IHR5cGluZ1xyXG5mcm9tIGJhc2U2NCBpbXBvcnQgZW5jb2RlYnl0ZXMgYXMgX2Jhc2U2NF9lbmNvZGVcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCBVbnN1cHBvcnRlZEFsZ29yaXRobVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljIGltcG9ydCBkc2EsIGVjLCBlZDI1NTE5LCByc2FcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuY2lwaGVycyBpbXBvcnQgQ2lwaGVyLCBhbGdvcml0aG1zLCBtb2Rlc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5zZXJpYWxpemF0aW9uIGltcG9ydCAoXHJcbiAgICBFbmNvZGluZyxcclxuICAgIE5vRW5jcnlwdGlvbixcclxuICAgIFByaXZhdGVGb3JtYXQsXHJcbiAgICBQdWJsaWNGb3JtYXQsXHJcbilcclxuXHJcbnRyeTpcclxuICAgIGZyb20gYmNyeXB0IGltcG9ydCBrZGYgYXMgX2JjcnlwdF9rZGZcclxuXHJcbiAgICBfYmNyeXB0X3N1cHBvcnRlZCA9IFRydWVcclxuZXhjZXB0IEltcG9ydEVycm9yOlxyXG4gICAgX2JjcnlwdF9zdXBwb3J0ZWQgPSBGYWxzZVxyXG5cclxuICAgIGRlZiBfYmNyeXB0X2tkZihcclxuICAgICAgICBwYXNzd29yZDogYnl0ZXMsXHJcbiAgICAgICAgc2FsdDogYnl0ZXMsXHJcbiAgICAgICAgZGVzaXJlZF9rZXlfYnl0ZXM6IGludCxcclxuICAgICAgICByb3VuZHM6IGludCxcclxuICAgICAgICBpZ25vcmVfZmV3X3JvdW5kczogYm9vbCA9IEZhbHNlLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobSgiTmVlZCBiY3J5cHQgbW9kdWxlIilcclxuXHJcblxyXG5fU1NIX0VEMjU1MTkgPSBiInNzaC1lZDI1NTE5IlxyXG5fU1NIX1JTQSA9IGIic3NoLXJzYSJcclxuX1NTSF9EU0EgPSBiInNzaC1kc3MiXHJcbl9FQ0RTQV9OSVNUUDI1NiA9IGIiZWNkc2Etc2hhMi1uaXN0cDI1NiJcclxuX0VDRFNBX05JU1RQMzg0ID0gYiJlY2RzYS1zaGEyLW5pc3RwMzg0IlxyXG5fRUNEU0FfTklTVFA1MjEgPSBiImVjZHNhLXNoYTItbmlzdHA1MjEiXHJcbl9DRVJUX1NVRkZJWCA9IGIiLWNlcnQtdjAxQG9wZW5zc2guY29tIlxyXG5cclxuX1NTSF9QVUJLRVlfUkMgPSByZS5jb21waWxlKHJiIlxcQShcXFMrKVsgXFx0XSsoXFxTKykiKVxyXG5fU0tfTUFHSUMgPSBiIm9wZW5zc2gta2V5LXYxXFwwIlxyXG5fU0tfU1RBUlQgPSBiIi0tLS0tQkVHSU4gT1BFTlNTSCBQUklWQVRFIEtFWS0tLS0tIlxyXG5fU0tfRU5EID0gYiItLS0tLUVORCBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0iXHJcbl9CQ1JZUFQgPSBiImJjcnlwdCJcclxuX05PTkUgPSBiIm5vbmUiXHJcbl9ERUZBVUxUX0NJUEhFUiA9IGIiYWVzMjU2LWN0ciJcclxuX0RFRkFVTFRfUk9VTkRTID0gMTZcclxuX01BWF9QQVNTV09SRCA9IDcyXHJcblxyXG4jIHJlIGlzIG9ubHkgd2F5IHRvIHdvcmsgb24gYnl0ZXMtbGlrZSBkYXRhXHJcbl9QRU1fUkMgPSByZS5jb21waWxlKF9TS19TVEFSVCArIGIiKC4qPykiICsgX1NLX0VORCwgcmUuRE9UQUxMKVxyXG5cclxuIyBwYWRkaW5nIGZvciBtYXggYmxvY2tzaXplXHJcbl9QQURESU5HID0gbWVtb3J5dmlldyhieXRlYXJyYXkocmFuZ2UoMSwgMSArIDE2KSkpXHJcblxyXG4jIGNpcGhlcnMgdGhhdCBhcmUgYWN0dWFsbHkgdXNlZCBpbiBrZXkgd3JhcHBpbmdcclxuX1NTSF9DSVBIRVJTOiB0eXBpbmcuRGljdFtcclxuICAgIGJ5dGVzLFxyXG4gICAgdHlwaW5nLlR1cGxlW1xyXG4gICAgICAgIHR5cGluZy5UeXBlW2FsZ29yaXRobXMuQUVTXSxcclxuICAgICAgICBpbnQsXHJcbiAgICAgICAgdHlwaW5nLlVuaW9uW3R5cGluZy5UeXBlW21vZGVzLkNUUl0sIHR5cGluZy5UeXBlW21vZGVzLkNCQ11dLFxyXG4gICAgICAgIGludCxcclxuICAgIF0sXHJcbl0gPSB7XHJcbiAgICBiImFlczI1Ni1jdHIiOiAoYWxnb3JpdGhtcy5BRVMsIDMyLCBtb2Rlcy5DVFIsIDE2KSxcclxuICAgIGIiYWVzMjU2LWNiYyI6IChhbGdvcml0aG1zLkFFUywgMzIsIG1vZGVzLkNCQywgMTYpLFxyXG59XHJcblxyXG4jIG1hcCBsb2NhbCBjdXJ2ZSBuYW1lIHRvIGtleSB0eXBlXHJcbl9FQ0RTQV9LRVlfVFlQRSA9IHtcclxuICAgICJzZWNwMjU2cjEiOiBfRUNEU0FfTklTVFAyNTYsXHJcbiAgICAic2VjcDM4NHIxIjogX0VDRFNBX05JU1RQMzg0LFxyXG4gICAgInNlY3A1MjFyMSI6IF9FQ0RTQV9OSVNUUDUyMSxcclxufVxyXG5cclxuXHJcbmRlZiBfZWNkc2Ffa2V5X3R5cGUocHVibGljX2tleTogZWMuRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleSkgLT4gYnl0ZXM6XHJcbiAgICAiIiJSZXR1cm4gU1NIIGtleV90eXBlIGFuZCBjdXJ2ZV9uYW1lIGZvciBwcml2YXRlIGtleS4iIiJcclxuICAgIGN1cnZlID0gcHVibGljX2tleS5jdXJ2ZVxyXG4gICAgaWYgY3VydmUubmFtZSBub3QgaW4gX0VDRFNBX0tFWV9UWVBFOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgIGYiVW5zdXBwb3J0ZWQgY3VydmUgZm9yIHNzaCBwcml2YXRlIGtleToge2N1cnZlLm5hbWUhcn0iXHJcbiAgICAgICAgKVxyXG4gICAgcmV0dXJuIF9FQ0RTQV9LRVlfVFlQRVtjdXJ2ZS5uYW1lXVxyXG5cclxuXHJcbmRlZiBfc3NoX3BlbV9lbmNvZGUoXHJcbiAgICBkYXRhOiBieXRlcyxcclxuICAgIHByZWZpeDogYnl0ZXMgPSBfU0tfU1RBUlQgKyBiIlxcbiIsXHJcbiAgICBzdWZmaXg6IGJ5dGVzID0gX1NLX0VORCArIGIiXFxuIixcclxuKSAtPiBieXRlczpcclxuICAgIHJldHVybiBiIiIuam9pbihbcHJlZml4LCBfYmFzZTY0X2VuY29kZShkYXRhKSwgc3VmZml4XSlcclxuXHJcblxyXG5kZWYgX2NoZWNrX2Jsb2NrX3NpemUoZGF0YTogYnl0ZXMsIGJsb2NrX2xlbjogaW50KSAtPiBOb25lOlxyXG4gICAgIiIiUmVxdWlyZSBkYXRhIHRvIGJlIGZ1bGwgYmxvY2tzIiIiXHJcbiAgICBpZiBub3QgZGF0YSBvciBsZW4oZGF0YSkgJSBibG9ja19sZW4gIT0gMDpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDb3JydXB0IGRhdGE6IG1pc3NpbmcgcGFkZGluZyIpXHJcblxyXG5cclxuZGVmIF9jaGVja19lbXB0eShkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICIiIkFsbCBkYXRhIHNob3VsZCBoYXZlIGJlZW4gcGFyc2VkLiIiIlxyXG4gICAgaWYgZGF0YTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDb3JydXB0IGRhdGE6IHVucGFyc2VkIGRhdGEiKVxyXG5cclxuXHJcbmRlZiBfaW5pdF9jaXBoZXIoXHJcbiAgICBjaXBoZXJuYW1lOiBieXRlcyxcclxuICAgIHBhc3N3b3JkOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgc2FsdDogYnl0ZXMsXHJcbiAgICByb3VuZHM6IGludCxcclxuKSAtPiBDaXBoZXJbdHlwaW5nLlVuaW9uW21vZGVzLkNCQywgbW9kZXMuQ1RSXV06XHJcbiAgICAiIiJHZW5lcmF0ZSBrZXkgKyBpdiBhbmQgcmV0dXJuIGNpcGhlci4iIiJcclxuICAgIGlmIG5vdCBwYXNzd29yZDpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJLZXkgaXMgcGFzc3dvcmQtcHJvdGVjdGVkLiIpXHJcblxyXG4gICAgYWxnbywga2V5X2xlbiwgbW9kZSwgaXZfbGVuID0gX1NTSF9DSVBIRVJTW2NpcGhlcm5hbWVdXHJcbiAgICBzZWVkID0gX2JjcnlwdF9rZGYocGFzc3dvcmQsIHNhbHQsIGtleV9sZW4gKyBpdl9sZW4sIHJvdW5kcywgVHJ1ZSlcclxuICAgIHJldHVybiBDaXBoZXIoYWxnbyhzZWVkWzprZXlfbGVuXSksIG1vZGUoc2VlZFtrZXlfbGVuOl0pKVxyXG5cclxuXHJcbmRlZiBfZ2V0X3UzMihkYXRhOiBtZW1vcnl2aWV3KSAtPiB0eXBpbmcuVHVwbGVbaW50LCBtZW1vcnl2aWV3XTpcclxuICAgICIiIlVpbnQzMiIiIlxyXG4gICAgaWYgbGVuKGRhdGEpIDwgNDpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIGRhdGEiKVxyXG4gICAgcmV0dXJuIGludC5mcm9tX2J5dGVzKGRhdGFbOjRdLCBieXRlb3JkZXI9ImJpZyIpLCBkYXRhWzQ6XVxyXG5cclxuXHJcbmRlZiBfZ2V0X3U2NChkYXRhOiBtZW1vcnl2aWV3KSAtPiB0eXBpbmcuVHVwbGVbaW50LCBtZW1vcnl2aWV3XTpcclxuICAgICIiIlVpbnQ2NCIiIlxyXG4gICAgaWYgbGVuKGRhdGEpIDwgODpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIGRhdGEiKVxyXG4gICAgcmV0dXJuIGludC5mcm9tX2J5dGVzKGRhdGFbOjhdLCBieXRlb3JkZXI9ImJpZyIpLCBkYXRhWzg6XVxyXG5cclxuXHJcbmRlZiBfZ2V0X3NzaHN0cihkYXRhOiBtZW1vcnl2aWV3KSAtPiB0eXBpbmcuVHVwbGVbbWVtb3J5dmlldywgbWVtb3J5dmlld106XHJcbiAgICAiIiJCeXRlcyB3aXRoIHUzMiBsZW5ndGggcHJlZml4IiIiXHJcbiAgICBuLCBkYXRhID0gX2dldF91MzIoZGF0YSlcclxuICAgIGlmIG4gPiBsZW4oZGF0YSk6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSW52YWxpZCBkYXRhIilcclxuICAgIHJldHVybiBkYXRhWzpuXSwgZGF0YVtuOl1cclxuXHJcblxyXG5kZWYgX2dldF9tcGludChkYXRhOiBtZW1vcnl2aWV3KSAtPiB0eXBpbmcuVHVwbGVbaW50LCBtZW1vcnl2aWV3XTpcclxuICAgICIiIkJpZyBpbnRlZ2VyLiIiIlxyXG4gICAgdmFsLCBkYXRhID0gX2dldF9zc2hzdHIoZGF0YSlcclxuICAgIGlmIHZhbCBhbmQgdmFsWzBdID4gMHg3RjpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIGRhdGEiKVxyXG4gICAgcmV0dXJuIGludC5mcm9tX2J5dGVzKHZhbCwgImJpZyIpLCBkYXRhXHJcblxyXG5cclxuZGVmIF90b19tcGludCh2YWw6IGludCkgLT4gYnl0ZXM6XHJcbiAgICAiIiJTdG9yYWdlIGZvcm1hdCBmb3Igc2lnbmVkIGJpZ2ludC4iIiJcclxuICAgIGlmIHZhbCA8IDA6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibmVnYXRpdmUgbXBpbnQgbm90IGFsbG93ZWQiKVxyXG4gICAgaWYgbm90IHZhbDpcclxuICAgICAgICByZXR1cm4gYiIiXHJcbiAgICBuYnl0ZXMgPSAodmFsLmJpdF9sZW5ndGgoKSArIDgpIC8vIDhcclxuICAgIHJldHVybiB1dGlscy5pbnRfdG9fYnl0ZXModmFsLCBuYnl0ZXMpXHJcblxyXG5cclxuY2xhc3MgX0ZyYWdMaXN0OlxyXG4gICAgIiIiQnVpbGQgcmVjdXJzaXZlIHN0cnVjdHVyZSB3aXRob3V0IGRhdGEgY29weS4iIiJcclxuXHJcbiAgICBmbGlzdDogdHlwaW5nLkxpc3RbYnl0ZXNdXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGluaXQ6IHR5cGluZy5MaXN0W2J5dGVzXSA9IE5vbmUpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5mbGlzdCA9IFtdXHJcbiAgICAgICAgaWYgaW5pdDpcclxuICAgICAgICAgICAgc2VsZi5mbGlzdC5leHRlbmQoaW5pdClcclxuXHJcbiAgICBkZWYgcHV0X3JhdyhzZWxmLCB2YWw6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkFkZCBwbGFpbiBieXRlcyIiIlxyXG4gICAgICAgIHNlbGYuZmxpc3QuYXBwZW5kKHZhbClcclxuXHJcbiAgICBkZWYgcHV0X3UzMihzZWxmLCB2YWw6IGludCkgLT4gTm9uZTpcclxuICAgICAgICAiIiJCaWctZW5kaWFuIHVpbnQzMiIiIlxyXG4gICAgICAgIHNlbGYuZmxpc3QuYXBwZW5kKHZhbC50b19ieXRlcyhsZW5ndGg9NCwgYnl0ZW9yZGVyPSJiaWciKSlcclxuXHJcbiAgICBkZWYgcHV0X3NzaHN0cihzZWxmLCB2YWw6IHR5cGluZy5VbmlvbltieXRlcywgIl9GcmFnTGlzdCJdKSAtPiBOb25lOlxyXG4gICAgICAgICIiIkJ5dGVzIHByZWZpeGVkIHdpdGggdTMyIGxlbmd0aCIiIlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UodmFsLCAoYnl0ZXMsIG1lbW9yeXZpZXcsIGJ5dGVhcnJheSkpOlxyXG4gICAgICAgICAgICBzZWxmLnB1dF91MzIobGVuKHZhbCkpXHJcbiAgICAgICAgICAgIHNlbGYuZmxpc3QuYXBwZW5kKHZhbClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLnB1dF91MzIodmFsLnNpemUoKSlcclxuICAgICAgICAgICAgc2VsZi5mbGlzdC5leHRlbmQodmFsLmZsaXN0KVxyXG5cclxuICAgIGRlZiBwdXRfbXBpbnQoc2VsZiwgdmFsOiBpbnQpIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiQmlnLWVuZGlhbiBiaWdpbnQgcHJlZml4ZWQgd2l0aCB1MzIgbGVuZ3RoIiIiXHJcbiAgICAgICAgc2VsZi5wdXRfc3Noc3RyKF90b19tcGludCh2YWwpKVxyXG5cclxuICAgIGRlZiBzaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICAiIiJDdXJyZW50IG51bWJlciBvZiBieXRlcyIiIlxyXG4gICAgICAgIHJldHVybiBzdW0obWFwKGxlbiwgc2VsZi5mbGlzdCkpXHJcblxyXG4gICAgZGVmIHJlbmRlcihzZWxmLCBkc3RidWY6IG1lbW9yeXZpZXcsIHBvczogaW50ID0gMCkgLT4gaW50OlxyXG4gICAgICAgICIiIldyaXRlIGludG8gYnl0ZWFycmF5IiIiXHJcbiAgICAgICAgZm9yIGZyYWcgaW4gc2VsZi5mbGlzdDpcclxuICAgICAgICAgICAgZmxlbiA9IGxlbihmcmFnKVxyXG4gICAgICAgICAgICBzdGFydCwgcG9zID0gcG9zLCBwb3MgKyBmbGVuXHJcbiAgICAgICAgICAgIGRzdGJ1ZltzdGFydDpwb3NdID0gZnJhZ1xyXG4gICAgICAgIHJldHVybiBwb3NcclxuXHJcbiAgICBkZWYgdG9ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJSZXR1cm4gYXMgYnl0ZXMiIiJcclxuICAgICAgICBidWYgPSBtZW1vcnl2aWV3KGJ5dGVhcnJheShzZWxmLnNpemUoKSkpXHJcbiAgICAgICAgc2VsZi5yZW5kZXIoYnVmKVxyXG4gICAgICAgIHJldHVybiBidWYudG9ieXRlcygpXHJcblxyXG5cclxuY2xhc3MgX1NTSEZvcm1hdFJTQTpcclxuICAgICIiIkZvcm1hdCBmb3IgUlNBIGtleXMuXHJcblxyXG4gICAgUHVibGljOlxyXG4gICAgICAgIG1waW50IGUsIG5cclxuICAgIFByaXZhdGU6XHJcbiAgICAgICAgbXBpbnQgbiwgZSwgZCwgaXFtcCwgcCwgcVxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIGdldF9wdWJsaWMoc2VsZiwgZGF0YTogbWVtb3J5dmlldyk6XHJcbiAgICAgICAgIiIiUlNBIHB1YmxpYyBmaWVsZHMiIiJcclxuICAgICAgICBlLCBkYXRhID0gX2dldF9tcGludChkYXRhKVxyXG4gICAgICAgIG4sIGRhdGEgPSBfZ2V0X21waW50KGRhdGEpXHJcbiAgICAgICAgcmV0dXJuIChlLCBuKSwgZGF0YVxyXG5cclxuICAgIGRlZiBsb2FkX3B1YmxpYyhcclxuICAgICAgICBzZWxmLCBkYXRhOiBtZW1vcnl2aWV3XHJcbiAgICApIC0+IHR5cGluZy5UdXBsZVtyc2EuUlNBUHVibGljS2V5LCBtZW1vcnl2aWV3XTpcclxuICAgICAgICAiIiJNYWtlIFJTQSBwdWJsaWMga2V5IGZyb20gZGF0YS4iIiJcclxuICAgICAgICAoZSwgbiksIGRhdGEgPSBzZWxmLmdldF9wdWJsaWMoZGF0YSlcclxuICAgICAgICBwdWJsaWNfbnVtYmVycyA9IHJzYS5SU0FQdWJsaWNOdW1iZXJzKGUsIG4pXHJcbiAgICAgICAgcHVibGljX2tleSA9IHB1YmxpY19udW1iZXJzLnB1YmxpY19rZXkoKVxyXG4gICAgICAgIHJldHVybiBwdWJsaWNfa2V5LCBkYXRhXHJcblxyXG4gICAgZGVmIGxvYWRfcHJpdmF0ZShcclxuICAgICAgICBzZWxmLCBkYXRhOiBtZW1vcnl2aWV3LCBwdWJmaWVsZHNcclxuICAgICkgLT4gdHlwaW5nLlR1cGxlW3JzYS5SU0FQcml2YXRlS2V5LCBtZW1vcnl2aWV3XTpcclxuICAgICAgICAiIiJNYWtlIFJTQSBwcml2YXRlIGtleSBmcm9tIGRhdGEuIiIiXHJcbiAgICAgICAgbiwgZGF0YSA9IF9nZXRfbXBpbnQoZGF0YSlcclxuICAgICAgICBlLCBkYXRhID0gX2dldF9tcGludChkYXRhKVxyXG4gICAgICAgIGQsIGRhdGEgPSBfZ2V0X21waW50KGRhdGEpXHJcbiAgICAgICAgaXFtcCwgZGF0YSA9IF9nZXRfbXBpbnQoZGF0YSlcclxuICAgICAgICBwLCBkYXRhID0gX2dldF9tcGludChkYXRhKVxyXG4gICAgICAgIHEsIGRhdGEgPSBfZ2V0X21waW50KGRhdGEpXHJcblxyXG4gICAgICAgIGlmIChlLCBuKSAhPSBwdWJmaWVsZHM6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNvcnJ1cHQgZGF0YTogcnNhIGZpZWxkIG1pc21hdGNoIilcclxuICAgICAgICBkbXAxID0gcnNhLnJzYV9jcnRfZG1wMShkLCBwKVxyXG4gICAgICAgIGRtcTEgPSByc2EucnNhX2NydF9kbXExKGQsIHEpXHJcbiAgICAgICAgcHVibGljX251bWJlcnMgPSByc2EuUlNBUHVibGljTnVtYmVycyhlLCBuKVxyXG4gICAgICAgIHByaXZhdGVfbnVtYmVycyA9IHJzYS5SU0FQcml2YXRlTnVtYmVycyhcclxuICAgICAgICAgICAgcCwgcSwgZCwgZG1wMSwgZG1xMSwgaXFtcCwgcHVibGljX251bWJlcnNcclxuICAgICAgICApXHJcbiAgICAgICAgcHJpdmF0ZV9rZXkgPSBwcml2YXRlX251bWJlcnMucHJpdmF0ZV9rZXkoKVxyXG4gICAgICAgIHJldHVybiBwcml2YXRlX2tleSwgZGF0YVxyXG5cclxuICAgIGRlZiBlbmNvZGVfcHVibGljKFxyXG4gICAgICAgIHNlbGYsIHB1YmxpY19rZXk6IHJzYS5SU0FQdWJsaWNLZXksIGZfcHViOiBfRnJhZ0xpc3RcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJXcml0ZSBSU0EgcHVibGljIGtleSIiIlxyXG4gICAgICAgIHB1Ym4gPSBwdWJsaWNfa2V5LnB1YmxpY19udW1iZXJzKClcclxuICAgICAgICBmX3B1Yi5wdXRfbXBpbnQocHVibi5lKVxyXG4gICAgICAgIGZfcHViLnB1dF9tcGludChwdWJuLm4pXHJcblxyXG4gICAgZGVmIGVuY29kZV9wcml2YXRlKFxyXG4gICAgICAgIHNlbGYsIHByaXZhdGVfa2V5OiByc2EuUlNBUHJpdmF0ZUtleSwgZl9wcml2OiBfRnJhZ0xpc3RcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJXcml0ZSBSU0EgcHJpdmF0ZSBrZXkiIiJcclxuICAgICAgICBwcml2YXRlX251bWJlcnMgPSBwcml2YXRlX2tleS5wcml2YXRlX251bWJlcnMoKVxyXG4gICAgICAgIHB1YmxpY19udW1iZXJzID0gcHJpdmF0ZV9udW1iZXJzLnB1YmxpY19udW1iZXJzXHJcblxyXG4gICAgICAgIGZfcHJpdi5wdXRfbXBpbnQocHVibGljX251bWJlcnMubilcclxuICAgICAgICBmX3ByaXYucHV0X21waW50KHB1YmxpY19udW1iZXJzLmUpXHJcblxyXG4gICAgICAgIGZfcHJpdi5wdXRfbXBpbnQocHJpdmF0ZV9udW1iZXJzLmQpXHJcbiAgICAgICAgZl9wcml2LnB1dF9tcGludChwcml2YXRlX251bWJlcnMuaXFtcClcclxuICAgICAgICBmX3ByaXYucHV0X21waW50KHByaXZhdGVfbnVtYmVycy5wKVxyXG4gICAgICAgIGZfcHJpdi5wdXRfbXBpbnQocHJpdmF0ZV9udW1iZXJzLnEpXHJcblxyXG5cclxuY2xhc3MgX1NTSEZvcm1hdERTQTpcclxuICAgICIiIkZvcm1hdCBmb3IgRFNBIGtleXMuXHJcblxyXG4gICAgUHVibGljOlxyXG4gICAgICAgIG1waW50IHAsIHEsIGcsIHlcclxuICAgIFByaXZhdGU6XHJcbiAgICAgICAgbXBpbnQgcCwgcSwgZywgeSwgeFxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIGdldF9wdWJsaWMoXHJcbiAgICAgICAgc2VsZiwgZGF0YTogbWVtb3J5dmlld1xyXG4gICAgKSAtPiB0eXBpbmcuVHVwbGVbdHlwaW5nLlR1cGxlLCBtZW1vcnl2aWV3XTpcclxuICAgICAgICAiIiJEU0EgcHVibGljIGZpZWxkcyIiIlxyXG4gICAgICAgIHAsIGRhdGEgPSBfZ2V0X21waW50KGRhdGEpXHJcbiAgICAgICAgcSwgZGF0YSA9IF9nZXRfbXBpbnQoZGF0YSlcclxuICAgICAgICBnLCBkYXRhID0gX2dldF9tcGludChkYXRhKVxyXG4gICAgICAgIHksIGRhdGEgPSBfZ2V0X21waW50KGRhdGEpXHJcbiAgICAgICAgcmV0dXJuIChwLCBxLCBnLCB5KSwgZGF0YVxyXG5cclxuICAgIGRlZiBsb2FkX3B1YmxpYyhcclxuICAgICAgICBzZWxmLCBkYXRhOiBtZW1vcnl2aWV3XHJcbiAgICApIC0+IHR5cGluZy5UdXBsZVtkc2EuRFNBUHVibGljS2V5LCBtZW1vcnl2aWV3XTpcclxuICAgICAgICAiIiJNYWtlIERTQSBwdWJsaWMga2V5IGZyb20gZGF0YS4iIiJcclxuICAgICAgICAocCwgcSwgZywgeSksIGRhdGEgPSBzZWxmLmdldF9wdWJsaWMoZGF0YSlcclxuICAgICAgICBwYXJhbWV0ZXJfbnVtYmVycyA9IGRzYS5EU0FQYXJhbWV0ZXJOdW1iZXJzKHAsIHEsIGcpXHJcbiAgICAgICAgcHVibGljX251bWJlcnMgPSBkc2EuRFNBUHVibGljTnVtYmVycyh5LCBwYXJhbWV0ZXJfbnVtYmVycylcclxuICAgICAgICBzZWxmLl92YWxpZGF0ZShwdWJsaWNfbnVtYmVycylcclxuICAgICAgICBwdWJsaWNfa2V5ID0gcHVibGljX251bWJlcnMucHVibGljX2tleSgpXHJcbiAgICAgICAgcmV0dXJuIHB1YmxpY19rZXksIGRhdGFcclxuXHJcbiAgICBkZWYgbG9hZF9wcml2YXRlKFxyXG4gICAgICAgIHNlbGYsIGRhdGE6IG1lbW9yeXZpZXcsIHB1YmZpZWxkc1xyXG4gICAgKSAtPiB0eXBpbmcuVHVwbGVbZHNhLkRTQVByaXZhdGVLZXksIG1lbW9yeXZpZXddOlxyXG4gICAgICAgICIiIk1ha2UgRFNBIHByaXZhdGUga2V5IGZyb20gZGF0YS4iIiJcclxuICAgICAgICAocCwgcSwgZywgeSksIGRhdGEgPSBzZWxmLmdldF9wdWJsaWMoZGF0YSlcclxuICAgICAgICB4LCBkYXRhID0gX2dldF9tcGludChkYXRhKVxyXG5cclxuICAgICAgICBpZiAocCwgcSwgZywgeSkgIT0gcHViZmllbGRzOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDb3JydXB0IGRhdGE6IGRzYSBmaWVsZCBtaXNtYXRjaCIpXHJcbiAgICAgICAgcGFyYW1ldGVyX251bWJlcnMgPSBkc2EuRFNBUGFyYW1ldGVyTnVtYmVycyhwLCBxLCBnKVxyXG4gICAgICAgIHB1YmxpY19udW1iZXJzID0gZHNhLkRTQVB1YmxpY051bWJlcnMoeSwgcGFyYW1ldGVyX251bWJlcnMpXHJcbiAgICAgICAgc2VsZi5fdmFsaWRhdGUocHVibGljX251bWJlcnMpXHJcbiAgICAgICAgcHJpdmF0ZV9udW1iZXJzID0gZHNhLkRTQVByaXZhdGVOdW1iZXJzKHgsIHB1YmxpY19udW1iZXJzKVxyXG4gICAgICAgIHByaXZhdGVfa2V5ID0gcHJpdmF0ZV9udW1iZXJzLnByaXZhdGVfa2V5KClcclxuICAgICAgICByZXR1cm4gcHJpdmF0ZV9rZXksIGRhdGFcclxuXHJcbiAgICBkZWYgZW5jb2RlX3B1YmxpYyhcclxuICAgICAgICBzZWxmLCBwdWJsaWNfa2V5OiBkc2EuRFNBUHVibGljS2V5LCBmX3B1YjogX0ZyYWdMaXN0XHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiV3JpdGUgRFNBIHB1YmxpYyBrZXkiIiJcclxuICAgICAgICBwdWJsaWNfbnVtYmVycyA9IHB1YmxpY19rZXkucHVibGljX251bWJlcnMoKVxyXG4gICAgICAgIHBhcmFtZXRlcl9udW1iZXJzID0gcHVibGljX251bWJlcnMucGFyYW1ldGVyX251bWJlcnNcclxuICAgICAgICBzZWxmLl92YWxpZGF0ZShwdWJsaWNfbnVtYmVycylcclxuXHJcbiAgICAgICAgZl9wdWIucHV0X21waW50KHBhcmFtZXRlcl9udW1iZXJzLnApXHJcbiAgICAgICAgZl9wdWIucHV0X21waW50KHBhcmFtZXRlcl9udW1iZXJzLnEpXHJcbiAgICAgICAgZl9wdWIucHV0X21waW50KHBhcmFtZXRlcl9udW1iZXJzLmcpXHJcbiAgICAgICAgZl9wdWIucHV0X21waW50KHB1YmxpY19udW1iZXJzLnkpXHJcblxyXG4gICAgZGVmIGVuY29kZV9wcml2YXRlKFxyXG4gICAgICAgIHNlbGYsIHByaXZhdGVfa2V5OiBkc2EuRFNBUHJpdmF0ZUtleSwgZl9wcml2OiBfRnJhZ0xpc3RcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICAiIiJXcml0ZSBEU0EgcHJpdmF0ZSBrZXkiIiJcclxuICAgICAgICBzZWxmLmVuY29kZV9wdWJsaWMocHJpdmF0ZV9rZXkucHVibGljX2tleSgpLCBmX3ByaXYpXHJcbiAgICAgICAgZl9wcml2LnB1dF9tcGludChwcml2YXRlX2tleS5wcml2YXRlX251bWJlcnMoKS54KVxyXG5cclxuICAgIGRlZiBfdmFsaWRhdGUoc2VsZiwgcHVibGljX251bWJlcnM6IGRzYS5EU0FQdWJsaWNOdW1iZXJzKSAtPiBOb25lOlxyXG4gICAgICAgIHBhcmFtZXRlcl9udW1iZXJzID0gcHVibGljX251bWJlcnMucGFyYW1ldGVyX251bWJlcnNcclxuICAgICAgICBpZiBwYXJhbWV0ZXJfbnVtYmVycy5wLmJpdF9sZW5ndGgoKSAhPSAxMDI0OlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJTU0ggc3VwcG9ydHMgb25seSAxMDI0IGJpdCBEU0Ega2V5cyIpXHJcblxyXG5cclxuY2xhc3MgX1NTSEZvcm1hdEVDRFNBOlxyXG4gICAgIiIiRm9ybWF0IGZvciBFQ0RTQSBrZXlzLlxyXG5cclxuICAgIFB1YmxpYzpcclxuICAgICAgICBzdHIgY3VydmVcclxuICAgICAgICBieXRlcyBwb2ludFxyXG4gICAgUHJpdmF0ZTpcclxuICAgICAgICBzdHIgY3VydmVcclxuICAgICAgICBieXRlcyBwb2ludFxyXG4gICAgICAgIG1waW50IHNlY3JldFxyXG4gICAgIiIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHNzaF9jdXJ2ZV9uYW1lOiBieXRlcywgY3VydmU6IGVjLkVsbGlwdGljQ3VydmUpOlxyXG4gICAgICAgIHNlbGYuc3NoX2N1cnZlX25hbWUgPSBzc2hfY3VydmVfbmFtZVxyXG4gICAgICAgIHNlbGYuY3VydmUgPSBjdXJ2ZVxyXG5cclxuICAgIGRlZiBnZXRfcHVibGljKFxyXG4gICAgICAgIHNlbGYsIGRhdGE6IG1lbW9yeXZpZXdcclxuICAgICkgLT4gdHlwaW5nLlR1cGxlW3R5cGluZy5UdXBsZSwgbWVtb3J5dmlld106XHJcbiAgICAgICAgIiIiRUNEU0EgcHVibGljIGZpZWxkcyIiIlxyXG4gICAgICAgIGN1cnZlLCBkYXRhID0gX2dldF9zc2hzdHIoZGF0YSlcclxuICAgICAgICBwb2ludCwgZGF0YSA9IF9nZXRfc3Noc3RyKGRhdGEpXHJcbiAgICAgICAgaWYgY3VydmUgIT0gc2VsZi5zc2hfY3VydmVfbmFtZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQ3VydmUgbmFtZSBtaXNtYXRjaCIpXHJcbiAgICAgICAgaWYgcG9pbnRbMF0gIT0gNDpcclxuICAgICAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigiTmVlZCB1bmNvbXByZXNzZWQgcG9pbnQiKVxyXG4gICAgICAgIHJldHVybiAoY3VydmUsIHBvaW50KSwgZGF0YVxyXG5cclxuICAgIGRlZiBsb2FkX3B1YmxpYyhcclxuICAgICAgICBzZWxmLCBkYXRhOiBtZW1vcnl2aWV3XHJcbiAgICApIC0+IHR5cGluZy5UdXBsZVtlYy5FbGxpcHRpY0N1cnZlUHVibGljS2V5LCBtZW1vcnl2aWV3XTpcclxuICAgICAgICAiIiJNYWtlIEVDRFNBIHB1YmxpYyBrZXkgZnJvbSBkYXRhLiIiIlxyXG4gICAgICAgIChjdXJ2ZV9uYW1lLCBwb2ludCksIGRhdGEgPSBzZWxmLmdldF9wdWJsaWMoZGF0YSlcclxuICAgICAgICBwdWJsaWNfa2V5ID0gZWMuRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleS5mcm9tX2VuY29kZWRfcG9pbnQoXHJcbiAgICAgICAgICAgIHNlbGYuY3VydmUsIHBvaW50LnRvYnl0ZXMoKVxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gcHVibGljX2tleSwgZGF0YVxyXG5cclxuICAgIGRlZiBsb2FkX3ByaXZhdGUoXHJcbiAgICAgICAgc2VsZiwgZGF0YTogbWVtb3J5dmlldywgcHViZmllbGRzXHJcbiAgICApIC0+IHR5cGluZy5UdXBsZVtlYy5FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleSwgbWVtb3J5dmlld106XHJcbiAgICAgICAgIiIiTWFrZSBFQ0RTQSBwcml2YXRlIGtleSBmcm9tIGRhdGEuIiIiXHJcbiAgICAgICAgKGN1cnZlX25hbWUsIHBvaW50KSwgZGF0YSA9IHNlbGYuZ2V0X3B1YmxpYyhkYXRhKVxyXG4gICAgICAgIHNlY3JldCwgZGF0YSA9IF9nZXRfbXBpbnQoZGF0YSlcclxuXHJcbiAgICAgICAgaWYgKGN1cnZlX25hbWUsIHBvaW50KSAhPSBwdWJmaWVsZHM6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNvcnJ1cHQgZGF0YTogZWNkc2EgZmllbGQgbWlzbWF0Y2giKVxyXG4gICAgICAgIHByaXZhdGVfa2V5ID0gZWMuZGVyaXZlX3ByaXZhdGVfa2V5KHNlY3JldCwgc2VsZi5jdXJ2ZSlcclxuICAgICAgICByZXR1cm4gcHJpdmF0ZV9rZXksIGRhdGFcclxuXHJcbiAgICBkZWYgZW5jb2RlX3B1YmxpYyhcclxuICAgICAgICBzZWxmLCBwdWJsaWNfa2V5OiBlYy5FbGxpcHRpY0N1cnZlUHVibGljS2V5LCBmX3B1YjogX0ZyYWdMaXN0XHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiV3JpdGUgRUNEU0EgcHVibGljIGtleSIiIlxyXG4gICAgICAgIHBvaW50ID0gcHVibGljX2tleS5wdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgICAgIEVuY29kaW5nLlg5NjIsIFB1YmxpY0Zvcm1hdC5VbmNvbXByZXNzZWRQb2ludFxyXG4gICAgICAgIClcclxuICAgICAgICBmX3B1Yi5wdXRfc3Noc3RyKHNlbGYuc3NoX2N1cnZlX25hbWUpXHJcbiAgICAgICAgZl9wdWIucHV0X3NzaHN0cihwb2ludClcclxuXHJcbiAgICBkZWYgZW5jb2RlX3ByaXZhdGUoXHJcbiAgICAgICAgc2VsZiwgcHJpdmF0ZV9rZXk6IGVjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5LCBmX3ByaXY6IF9GcmFnTGlzdFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICIiIldyaXRlIEVDRFNBIHByaXZhdGUga2V5IiIiXHJcbiAgICAgICAgcHVibGljX2tleSA9IHByaXZhdGVfa2V5LnB1YmxpY19rZXkoKVxyXG4gICAgICAgIHByaXZhdGVfbnVtYmVycyA9IHByaXZhdGVfa2V5LnByaXZhdGVfbnVtYmVycygpXHJcblxyXG4gICAgICAgIHNlbGYuZW5jb2RlX3B1YmxpYyhwdWJsaWNfa2V5LCBmX3ByaXYpXHJcbiAgICAgICAgZl9wcml2LnB1dF9tcGludChwcml2YXRlX251bWJlcnMucHJpdmF0ZV92YWx1ZSlcclxuXHJcblxyXG5jbGFzcyBfU1NIRm9ybWF0RWQyNTUxOTpcclxuICAgICIiIkZvcm1hdCBmb3IgRWQyNTUxOSBrZXlzLlxyXG5cclxuICAgIFB1YmxpYzpcclxuICAgICAgICBieXRlcyBwb2ludFxyXG4gICAgUHJpdmF0ZTpcclxuICAgICAgICBieXRlcyBwb2ludFxyXG4gICAgICAgIGJ5dGVzIHNlY3JldF9hbmRfcG9pbnRcclxuICAgICIiIlxyXG5cclxuICAgIGRlZiBnZXRfcHVibGljKFxyXG4gICAgICAgIHNlbGYsIGRhdGE6IG1lbW9yeXZpZXdcclxuICAgICkgLT4gdHlwaW5nLlR1cGxlW3R5cGluZy5UdXBsZSwgbWVtb3J5dmlld106XHJcbiAgICAgICAgIiIiRWQyNTUxOSBwdWJsaWMgZmllbGRzIiIiXHJcbiAgICAgICAgcG9pbnQsIGRhdGEgPSBfZ2V0X3NzaHN0cihkYXRhKVxyXG4gICAgICAgIHJldHVybiAocG9pbnQsKSwgZGF0YVxyXG5cclxuICAgIGRlZiBsb2FkX3B1YmxpYyhcclxuICAgICAgICBzZWxmLCBkYXRhOiBtZW1vcnl2aWV3XHJcbiAgICApIC0+IHR5cGluZy5UdXBsZVtlZDI1NTE5LkVkMjU1MTlQdWJsaWNLZXksIG1lbW9yeXZpZXddOlxyXG4gICAgICAgICIiIk1ha2UgRWQyNTUxOSBwdWJsaWMga2V5IGZyb20gZGF0YS4iIiJcclxuICAgICAgICAocG9pbnQsKSwgZGF0YSA9IHNlbGYuZ2V0X3B1YmxpYyhkYXRhKVxyXG4gICAgICAgIHB1YmxpY19rZXkgPSBlZDI1NTE5LkVkMjU1MTlQdWJsaWNLZXkuZnJvbV9wdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgICAgIHBvaW50LnRvYnl0ZXMoKVxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gcHVibGljX2tleSwgZGF0YVxyXG5cclxuICAgIGRlZiBsb2FkX3ByaXZhdGUoXHJcbiAgICAgICAgc2VsZiwgZGF0YTogbWVtb3J5dmlldywgcHViZmllbGRzXHJcbiAgICApIC0+IHR5cGluZy5UdXBsZVtlZDI1NTE5LkVkMjU1MTlQcml2YXRlS2V5LCBtZW1vcnl2aWV3XTpcclxuICAgICAgICAiIiJNYWtlIEVkMjU1MTkgcHJpdmF0ZSBrZXkgZnJvbSBkYXRhLiIiIlxyXG4gICAgICAgIChwb2ludCwpLCBkYXRhID0gc2VsZi5nZXRfcHVibGljKGRhdGEpXHJcbiAgICAgICAga2V5cGFpciwgZGF0YSA9IF9nZXRfc3Noc3RyKGRhdGEpXHJcblxyXG4gICAgICAgIHNlY3JldCA9IGtleXBhaXJbOjMyXVxyXG4gICAgICAgIHBvaW50MiA9IGtleXBhaXJbMzI6XVxyXG4gICAgICAgIGlmIHBvaW50ICE9IHBvaW50MiBvciAocG9pbnQsKSAhPSBwdWJmaWVsZHM6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkNvcnJ1cHQgZGF0YTogZWQyNTUxOSBmaWVsZCBtaXNtYXRjaCIpXHJcbiAgICAgICAgcHJpdmF0ZV9rZXkgPSBlZDI1NTE5LkVkMjU1MTlQcml2YXRlS2V5LmZyb21fcHJpdmF0ZV9ieXRlcyhzZWNyZXQpXHJcbiAgICAgICAgcmV0dXJuIHByaXZhdGVfa2V5LCBkYXRhXHJcblxyXG4gICAgZGVmIGVuY29kZV9wdWJsaWMoXHJcbiAgICAgICAgc2VsZiwgcHVibGljX2tleTogZWQyNTUxOS5FZDI1NTE5UHVibGljS2V5LCBmX3B1YjogX0ZyYWdMaXN0XHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiV3JpdGUgRWQyNTUxOSBwdWJsaWMga2V5IiIiXHJcbiAgICAgICAgcmF3X3B1YmxpY19rZXkgPSBwdWJsaWNfa2V5LnB1YmxpY19ieXRlcyhcclxuICAgICAgICAgICAgRW5jb2RpbmcuUmF3LCBQdWJsaWNGb3JtYXQuUmF3XHJcbiAgICAgICAgKVxyXG4gICAgICAgIGZfcHViLnB1dF9zc2hzdHIocmF3X3B1YmxpY19rZXkpXHJcblxyXG4gICAgZGVmIGVuY29kZV9wcml2YXRlKFxyXG4gICAgICAgIHNlbGYsIHByaXZhdGVfa2V5OiBlZDI1NTE5LkVkMjU1MTlQcml2YXRlS2V5LCBmX3ByaXY6IF9GcmFnTGlzdFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgICIiIldyaXRlIEVkMjU1MTkgcHJpdmF0ZSBrZXkiIiJcclxuICAgICAgICBwdWJsaWNfa2V5ID0gcHJpdmF0ZV9rZXkucHVibGljX2tleSgpXHJcbiAgICAgICAgcmF3X3ByaXZhdGVfa2V5ID0gcHJpdmF0ZV9rZXkucHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICAgICAgRW5jb2RpbmcuUmF3LCBQcml2YXRlRm9ybWF0LlJhdywgTm9FbmNyeXB0aW9uKClcclxuICAgICAgICApXHJcbiAgICAgICAgcmF3X3B1YmxpY19rZXkgPSBwdWJsaWNfa2V5LnB1YmxpY19ieXRlcyhcclxuICAgICAgICAgICAgRW5jb2RpbmcuUmF3LCBQdWJsaWNGb3JtYXQuUmF3XHJcbiAgICAgICAgKVxyXG4gICAgICAgIGZfa2V5cGFpciA9IF9GcmFnTGlzdChbcmF3X3ByaXZhdGVfa2V5LCByYXdfcHVibGljX2tleV0pXHJcblxyXG4gICAgICAgIHNlbGYuZW5jb2RlX3B1YmxpYyhwdWJsaWNfa2V5LCBmX3ByaXYpXHJcbiAgICAgICAgZl9wcml2LnB1dF9zc2hzdHIoZl9rZXlwYWlyKVxyXG5cclxuXHJcbl9LRVlfRk9STUFUUyA9IHtcclxuICAgIF9TU0hfUlNBOiBfU1NIRm9ybWF0UlNBKCksXHJcbiAgICBfU1NIX0RTQTogX1NTSEZvcm1hdERTQSgpLFxyXG4gICAgX1NTSF9FRDI1NTE5OiBfU1NIRm9ybWF0RWQyNTUxOSgpLFxyXG4gICAgX0VDRFNBX05JU1RQMjU2OiBfU1NIRm9ybWF0RUNEU0EoYiJuaXN0cDI1NiIsIGVjLlNFQ1AyNTZSMSgpKSxcclxuICAgIF9FQ0RTQV9OSVNUUDM4NDogX1NTSEZvcm1hdEVDRFNBKGIibmlzdHAzODQiLCBlYy5TRUNQMzg0UjEoKSksXHJcbiAgICBfRUNEU0FfTklTVFA1MjE6IF9TU0hGb3JtYXRFQ0RTQShiIm5pc3RwNTIxIiwgZWMuU0VDUDUyMVIxKCkpLFxyXG59XHJcblxyXG5cclxuZGVmIF9sb29rdXBfa2Zvcm1hdChrZXlfdHlwZTogYnl0ZXMpOlxyXG4gICAgIiIiUmV0dXJuIHZhbGlkIGZvcm1hdCBvciB0aHJvdyBlcnJvciIiIlxyXG4gICAgaWYgbm90IGlzaW5zdGFuY2Uoa2V5X3R5cGUsIGJ5dGVzKTpcclxuICAgICAgICBrZXlfdHlwZSA9IG1lbW9yeXZpZXcoa2V5X3R5cGUpLnRvYnl0ZXMoKVxyXG4gICAgaWYga2V5X3R5cGUgaW4gX0tFWV9GT1JNQVRTOlxyXG4gICAgICAgIHJldHVybiBfS0VZX0ZPUk1BVFNba2V5X3R5cGVdXHJcbiAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShmIlVuc3VwcG9ydGVkIGtleSB0eXBlOiB7a2V5X3R5cGUhcn0iKVxyXG5cclxuXHJcbl9TU0hfUFJJVkFURV9LRVlfVFlQRVMgPSB0eXBpbmcuVW5pb25bXHJcbiAgICBlYy5FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleSxcclxuICAgIHJzYS5SU0FQcml2YXRlS2V5LFxyXG4gICAgZHNhLkRTQVByaXZhdGVLZXksXHJcbiAgICBlZDI1NTE5LkVkMjU1MTlQcml2YXRlS2V5LFxyXG5dXHJcblxyXG5cclxuZGVmIGxvYWRfc3NoX3ByaXZhdGVfa2V5KFxyXG4gICAgZGF0YTogYnl0ZXMsXHJcbiAgICBwYXNzd29yZDogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lLFxyXG4pIC0+IF9TU0hfUFJJVkFURV9LRVlfVFlQRVM6XHJcbiAgICAiIiJMb2FkIHByaXZhdGUga2V5IGZyb20gT3BlblNTSCBjdXN0b20gZW5jb2RpbmcuIiIiXHJcbiAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJkYXRhIiwgZGF0YSlcclxuICAgIGlmIHBhc3N3b3JkIGlzIG5vdCBOb25lOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygicGFzc3dvcmQiLCBwYXNzd29yZClcclxuXHJcbiAgICBtID0gX1BFTV9SQy5zZWFyY2goZGF0YSlcclxuICAgIGlmIG5vdCBtOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIk5vdCBPcGVuU1NIIHByaXZhdGUga2V5IGZvcm1hdCIpXHJcbiAgICBwMSA9IG0uc3RhcnQoMSlcclxuICAgIHAyID0gbS5lbmQoMSlcclxuICAgIGRhdGEgPSBiaW5hc2NpaS5hMmJfYmFzZTY0KG1lbW9yeXZpZXcoZGF0YSlbcDE6cDJdKVxyXG4gICAgaWYgbm90IGRhdGEuc3RhcnRzd2l0aChfU0tfTUFHSUMpOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIk5vdCBPcGVuU1NIIHByaXZhdGUga2V5IGZvcm1hdCIpXHJcbiAgICBkYXRhID0gbWVtb3J5dmlldyhkYXRhKVtsZW4oX1NLX01BR0lDKSA6XVxyXG5cclxuICAgICMgcGFyc2UgaGVhZGVyXHJcbiAgICBjaXBoZXJuYW1lLCBkYXRhID0gX2dldF9zc2hzdHIoZGF0YSlcclxuICAgIGtkZm5hbWUsIGRhdGEgPSBfZ2V0X3NzaHN0cihkYXRhKVxyXG4gICAga2Rmb3B0aW9ucywgZGF0YSA9IF9nZXRfc3Noc3RyKGRhdGEpXHJcbiAgICBua2V5cywgZGF0YSA9IF9nZXRfdTMyKGRhdGEpXHJcbiAgICBpZiBua2V5cyAhPSAxOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIk9ubHkgb25lIGtleSBzdXBwb3J0ZWQiKVxyXG5cclxuICAgICMgbG9hZCBwdWJsaWMga2V5IGRhdGFcclxuICAgIHB1YmRhdGEsIGRhdGEgPSBfZ2V0X3NzaHN0cihkYXRhKVxyXG4gICAgcHViX2tleV90eXBlLCBwdWJkYXRhID0gX2dldF9zc2hzdHIocHViZGF0YSlcclxuICAgIGtmb3JtYXQgPSBfbG9va3VwX2tmb3JtYXQocHViX2tleV90eXBlKVxyXG4gICAgcHViZmllbGRzLCBwdWJkYXRhID0ga2Zvcm1hdC5nZXRfcHVibGljKHB1YmRhdGEpXHJcbiAgICBfY2hlY2tfZW1wdHkocHViZGF0YSlcclxuXHJcbiAgICAjIGxvYWQgc2VjcmV0IGRhdGFcclxuICAgIGVkYXRhLCBkYXRhID0gX2dldF9zc2hzdHIoZGF0YSlcclxuICAgIF9jaGVja19lbXB0eShkYXRhKVxyXG5cclxuICAgIGlmIChjaXBoZXJuYW1lLCBrZGZuYW1lKSAhPSAoX05PTkUsIF9OT05FKTpcclxuICAgICAgICBjaXBoZXJuYW1lX2J5dGVzID0gY2lwaGVybmFtZS50b2J5dGVzKClcclxuICAgICAgICBpZiBjaXBoZXJuYW1lX2J5dGVzIG5vdCBpbiBfU1NIX0NJUEhFUlM6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgZiJVbnN1cHBvcnRlZCBjaXBoZXI6IHtjaXBoZXJuYW1lX2J5dGVzIXJ9IlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYga2RmbmFtZSAhPSBfQkNSWVBUOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShmIlVuc3VwcG9ydGVkIEtERjoge2tkZm5hbWUhcn0iKVxyXG4gICAgICAgIGJsa2xlbiA9IF9TU0hfQ0lQSEVSU1tjaXBoZXJuYW1lX2J5dGVzXVszXVxyXG4gICAgICAgIF9jaGVja19ibG9ja19zaXplKGVkYXRhLCBibGtsZW4pXHJcbiAgICAgICAgc2FsdCwga2J1ZiA9IF9nZXRfc3Noc3RyKGtkZm9wdGlvbnMpXHJcbiAgICAgICAgcm91bmRzLCBrYnVmID0gX2dldF91MzIoa2J1ZilcclxuICAgICAgICBfY2hlY2tfZW1wdHkoa2J1ZilcclxuICAgICAgICBjaXBoID0gX2luaXRfY2lwaGVyKGNpcGhlcm5hbWVfYnl0ZXMsIHBhc3N3b3JkLCBzYWx0LnRvYnl0ZXMoKSwgcm91bmRzKVxyXG4gICAgICAgIGVkYXRhID0gbWVtb3J5dmlldyhjaXBoLmRlY3J5cHRvcigpLnVwZGF0ZShlZGF0YSkpXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIGJsa2xlbiA9IDhcclxuICAgICAgICBfY2hlY2tfYmxvY2tfc2l6ZShlZGF0YSwgYmxrbGVuKVxyXG4gICAgY2sxLCBlZGF0YSA9IF9nZXRfdTMyKGVkYXRhKVxyXG4gICAgY2syLCBlZGF0YSA9IF9nZXRfdTMyKGVkYXRhKVxyXG4gICAgaWYgY2sxICE9IGNrMjpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDb3JydXB0IGRhdGE6IGJyb2tlbiBjaGVja3N1bSIpXHJcblxyXG4gICAgIyBsb2FkIHBlci1rZXkgc3RydWN0XHJcbiAgICBrZXlfdHlwZSwgZWRhdGEgPSBfZ2V0X3NzaHN0cihlZGF0YSlcclxuICAgIGlmIGtleV90eXBlICE9IHB1Yl9rZXlfdHlwZTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJDb3JydXB0IGRhdGE6IGtleSB0eXBlIG1pc21hdGNoIilcclxuICAgIHByaXZhdGVfa2V5LCBlZGF0YSA9IGtmb3JtYXQubG9hZF9wcml2YXRlKGVkYXRhLCBwdWJmaWVsZHMpXHJcbiAgICBjb21tZW50LCBlZGF0YSA9IF9nZXRfc3Noc3RyKGVkYXRhKVxyXG5cclxuICAgICMgeWVzLCBTU0ggZG9lcyBwYWRkaW5nIGNoZWNrICphZnRlciogYWxsIG90aGVyIHBhcnNpbmcgaXMgZG9uZS5cclxuICAgICMgbmVlZCB0byBmb2xsb3cgYXMgaXQgd3JpdGVzIHplcm8tYnl0ZSBwYWRkaW5nIHRvby5cclxuICAgIGlmIGVkYXRhICE9IF9QQURESU5HWzogbGVuKGVkYXRhKV06XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQ29ycnVwdCBkYXRhOiBpbnZhbGlkIHBhZGRpbmciKVxyXG5cclxuICAgIHJldHVybiBwcml2YXRlX2tleVxyXG5cclxuXHJcbmRlZiBzZXJpYWxpemVfc3NoX3ByaXZhdGVfa2V5KFxyXG4gICAgcHJpdmF0ZV9rZXk6IF9TU0hfUFJJVkFURV9LRVlfVFlQRVMsXHJcbiAgICBwYXNzd29yZDogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSA9IE5vbmUsXHJcbikgLT4gYnl0ZXM6XHJcbiAgICAiIiJTZXJpYWxpemUgcHJpdmF0ZSBrZXkgd2l0aCBPcGVuU1NIIGN1c3RvbSBlbmNvZGluZy4iIiJcclxuICAgIGlmIHBhc3N3b3JkIGlzIG5vdCBOb25lOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygicGFzc3dvcmQiLCBwYXNzd29yZClcclxuICAgIGlmIHBhc3N3b3JkIGFuZCBsZW4ocGFzc3dvcmQpID4gX01BWF9QQVNTV09SRDpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAiUGFzc3dvcmRzIGxvbmdlciB0aGFuIDcyIGJ5dGVzIGFyZSBub3Qgc3VwcG9ydGVkIGJ5ICJcclxuICAgICAgICAgICAgIk9wZW5TU0ggcHJpdmF0ZSBrZXkgZm9ybWF0IlxyXG4gICAgICAgIClcclxuXHJcbiAgICBpZiBpc2luc3RhbmNlKHByaXZhdGVfa2V5LCBlYy5FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleSk6XHJcbiAgICAgICAga2V5X3R5cGUgPSBfZWNkc2Ffa2V5X3R5cGUocHJpdmF0ZV9rZXkucHVibGljX2tleSgpKVxyXG4gICAgZWxpZiBpc2luc3RhbmNlKHByaXZhdGVfa2V5LCByc2EuUlNBUHJpdmF0ZUtleSk6XHJcbiAgICAgICAga2V5X3R5cGUgPSBfU1NIX1JTQVxyXG4gICAgZWxpZiBpc2luc3RhbmNlKHByaXZhdGVfa2V5LCBkc2EuRFNBUHJpdmF0ZUtleSk6XHJcbiAgICAgICAga2V5X3R5cGUgPSBfU1NIX0RTQVxyXG4gICAgZWxpZiBpc2luc3RhbmNlKHByaXZhdGVfa2V5LCBlZDI1NTE5LkVkMjU1MTlQcml2YXRlS2V5KTpcclxuICAgICAgICBrZXlfdHlwZSA9IF9TU0hfRUQyNTUxOVxyXG4gICAgZWxzZTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJVbnN1cHBvcnRlZCBrZXkgdHlwZSIpXHJcbiAgICBrZm9ybWF0ID0gX2xvb2t1cF9rZm9ybWF0KGtleV90eXBlKVxyXG5cclxuICAgICMgc2V0dXAgcGFyYW1ldGVyc1xyXG4gICAgZl9rZGZvcHRpb25zID0gX0ZyYWdMaXN0KClcclxuICAgIGlmIHBhc3N3b3JkOlxyXG4gICAgICAgIGNpcGhlcm5hbWUgPSBfREVGQVVMVF9DSVBIRVJcclxuICAgICAgICBibGtsZW4gPSBfU1NIX0NJUEhFUlNbY2lwaGVybmFtZV1bM11cclxuICAgICAgICBrZGZuYW1lID0gX0JDUllQVFxyXG4gICAgICAgIHJvdW5kcyA9IF9ERUZBVUxUX1JPVU5EU1xyXG4gICAgICAgIHNhbHQgPSBvcy51cmFuZG9tKDE2KVxyXG4gICAgICAgIGZfa2Rmb3B0aW9ucy5wdXRfc3Noc3RyKHNhbHQpXHJcbiAgICAgICAgZl9rZGZvcHRpb25zLnB1dF91MzIocm91bmRzKVxyXG4gICAgICAgIGNpcGggPSBfaW5pdF9jaXBoZXIoY2lwaGVybmFtZSwgcGFzc3dvcmQsIHNhbHQsIHJvdW5kcylcclxuICAgIGVsc2U6XHJcbiAgICAgICAgY2lwaGVybmFtZSA9IGtkZm5hbWUgPSBfTk9ORVxyXG4gICAgICAgIGJsa2xlbiA9IDhcclxuICAgICAgICBjaXBoID0gTm9uZVxyXG4gICAgbmtleXMgPSAxXHJcbiAgICBjaGVja3ZhbCA9IG9zLnVyYW5kb20oNClcclxuICAgIGNvbW1lbnQgPSBiIiJcclxuXHJcbiAgICAjIGVuY29kZSBwdWJsaWMgYW5kIHByaXZhdGUgcGFydHMgdG9nZXRoZXJcclxuICAgIGZfcHVibGljX2tleSA9IF9GcmFnTGlzdCgpXHJcbiAgICBmX3B1YmxpY19rZXkucHV0X3NzaHN0cihrZXlfdHlwZSlcclxuICAgIGtmb3JtYXQuZW5jb2RlX3B1YmxpYyhwcml2YXRlX2tleS5wdWJsaWNfa2V5KCksIGZfcHVibGljX2tleSlcclxuXHJcbiAgICBmX3NlY3JldHMgPSBfRnJhZ0xpc3QoW2NoZWNrdmFsLCBjaGVja3ZhbF0pXHJcbiAgICBmX3NlY3JldHMucHV0X3NzaHN0cihrZXlfdHlwZSlcclxuICAgIGtmb3JtYXQuZW5jb2RlX3ByaXZhdGUocHJpdmF0ZV9rZXksIGZfc2VjcmV0cylcclxuICAgIGZfc2VjcmV0cy5wdXRfc3Noc3RyKGNvbW1lbnQpXHJcbiAgICBmX3NlY3JldHMucHV0X3JhdyhfUEFERElOR1s6IGJsa2xlbiAtIChmX3NlY3JldHMuc2l6ZSgpICUgYmxrbGVuKV0pXHJcblxyXG4gICAgIyB0b3AtbGV2ZWwgc3RydWN0dXJlXHJcbiAgICBmX21haW4gPSBfRnJhZ0xpc3QoKVxyXG4gICAgZl9tYWluLnB1dF9yYXcoX1NLX01BR0lDKVxyXG4gICAgZl9tYWluLnB1dF9zc2hzdHIoY2lwaGVybmFtZSlcclxuICAgIGZfbWFpbi5wdXRfc3Noc3RyKGtkZm5hbWUpXHJcbiAgICBmX21haW4ucHV0X3NzaHN0cihmX2tkZm9wdGlvbnMpXHJcbiAgICBmX21haW4ucHV0X3UzMihua2V5cylcclxuICAgIGZfbWFpbi5wdXRfc3Noc3RyKGZfcHVibGljX2tleSlcclxuICAgIGZfbWFpbi5wdXRfc3Noc3RyKGZfc2VjcmV0cylcclxuXHJcbiAgICAjIGNvcHkgcmVzdWx0IGluZm8gYnl0ZWFycmF5XHJcbiAgICBzbGVuID0gZl9zZWNyZXRzLnNpemUoKVxyXG4gICAgbWxlbiA9IGZfbWFpbi5zaXplKClcclxuICAgIGJ1ZiA9IG1lbW9yeXZpZXcoYnl0ZWFycmF5KG1sZW4gKyBibGtsZW4pKVxyXG4gICAgZl9tYWluLnJlbmRlcihidWYpXHJcbiAgICBvZnMgPSBtbGVuIC0gc2xlblxyXG5cclxuICAgICMgZW5jcnlwdCBpbi1wbGFjZVxyXG4gICAgaWYgY2lwaCBpcyBub3QgTm9uZTpcclxuICAgICAgICBjaXBoLmVuY3J5cHRvcigpLnVwZGF0ZV9pbnRvKGJ1ZltvZnM6bWxlbl0sIGJ1ZltvZnM6XSlcclxuXHJcbiAgICB0eHQgPSBfc3NoX3BlbV9lbmNvZGUoYnVmWzptbGVuXSlcclxuICAgIGJ1ZltvZnM6bWxlbl0gPSBieXRlYXJyYXkoc2xlbilcclxuICAgIHJldHVybiB0eHRcclxuXHJcblxyXG5fU1NIX1BVQkxJQ19LRVlfVFlQRVMgPSB0eXBpbmcuVW5pb25bXHJcbiAgICBlYy5FbGxpcHRpY0N1cnZlUHVibGljS2V5LFxyXG4gICAgcnNhLlJTQVB1YmxpY0tleSxcclxuICAgIGRzYS5EU0FQdWJsaWNLZXksXHJcbiAgICBlZDI1NTE5LkVkMjU1MTlQdWJsaWNLZXksXHJcbl1cclxuXHJcblxyXG5kZWYgbG9hZF9zc2hfcHVibGljX2tleShcclxuICAgIGRhdGE6IGJ5dGVzLCBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZVxyXG4pIC0+IF9TU0hfUFVCTElDX0tFWV9UWVBFUzpcclxuICAgICIiIkxvYWQgcHVibGljIGtleSBmcm9tIE9wZW5TU0ggb25lLWxpbmUgZm9ybWF0LiIiIlxyXG4gICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgiZGF0YSIsIGRhdGEpXHJcblxyXG4gICAgbSA9IF9TU0hfUFVCS0VZX1JDLm1hdGNoKGRhdGEpXHJcbiAgICBpZiBub3QgbTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIGxpbmUgZm9ybWF0IilcclxuICAgIGtleV90eXBlID0gb3JpZ19rZXlfdHlwZSA9IG0uZ3JvdXAoMSlcclxuICAgIGtleV9ib2R5ID0gbS5ncm91cCgyKVxyXG4gICAgd2l0aF9jZXJ0ID0gRmFsc2VcclxuICAgIGlmIF9DRVJUX1NVRkZJWCA9PSBrZXlfdHlwZVstbGVuKF9DRVJUX1NVRkZJWCkgOl06XHJcbiAgICAgICAgd2l0aF9jZXJ0ID0gVHJ1ZVxyXG4gICAgICAgIGtleV90eXBlID0ga2V5X3R5cGVbOiAtbGVuKF9DRVJUX1NVRkZJWCldXHJcbiAgICBrZm9ybWF0ID0gX2xvb2t1cF9rZm9ybWF0KGtleV90eXBlKVxyXG5cclxuICAgIHRyeTpcclxuICAgICAgICByZXN0ID0gbWVtb3J5dmlldyhiaW5hc2NpaS5hMmJfYmFzZTY0KGtleV9ib2R5KSlcclxuICAgIGV4Y2VwdCAoVHlwZUVycm9yLCBiaW5hc2NpaS5FcnJvcik6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSW52YWxpZCBrZXkgZm9ybWF0IilcclxuXHJcbiAgICBpbm5lcl9rZXlfdHlwZSwgcmVzdCA9IF9nZXRfc3Noc3RyKHJlc3QpXHJcbiAgICBpZiBpbm5lcl9rZXlfdHlwZSAhPSBvcmlnX2tleV90eXBlOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkludmFsaWQga2V5IGZvcm1hdCIpXHJcbiAgICBpZiB3aXRoX2NlcnQ6XHJcbiAgICAgICAgbm9uY2UsIHJlc3QgPSBfZ2V0X3NzaHN0cihyZXN0KVxyXG4gICAgcHVibGljX2tleSwgcmVzdCA9IGtmb3JtYXQubG9hZF9wdWJsaWMocmVzdClcclxuICAgIGlmIHdpdGhfY2VydDpcclxuICAgICAgICBzZXJpYWwsIHJlc3QgPSBfZ2V0X3U2NChyZXN0KVxyXG4gICAgICAgIGNjdHlwZSwgcmVzdCA9IF9nZXRfdTMyKHJlc3QpXHJcbiAgICAgICAga2V5X2lkLCByZXN0ID0gX2dldF9zc2hzdHIocmVzdClcclxuICAgICAgICBwcmluY2lwYWxzLCByZXN0ID0gX2dldF9zc2hzdHIocmVzdClcclxuICAgICAgICB2YWxpZF9hZnRlciwgcmVzdCA9IF9nZXRfdTY0KHJlc3QpXHJcbiAgICAgICAgdmFsaWRfYmVmb3JlLCByZXN0ID0gX2dldF91NjQocmVzdClcclxuICAgICAgICBjcml0X29wdGlvbnMsIHJlc3QgPSBfZ2V0X3NzaHN0cihyZXN0KVxyXG4gICAgICAgIGV4dGVuc2lvbnMsIHJlc3QgPSBfZ2V0X3NzaHN0cihyZXN0KVxyXG4gICAgICAgIHJlc2VydmVkLCByZXN0ID0gX2dldF9zc2hzdHIocmVzdClcclxuICAgICAgICBzaWdfa2V5LCByZXN0ID0gX2dldF9zc2hzdHIocmVzdClcclxuICAgICAgICBzaWduYXR1cmUsIHJlc3QgPSBfZ2V0X3NzaHN0cihyZXN0KVxyXG4gICAgX2NoZWNrX2VtcHR5KHJlc3QpXHJcbiAgICByZXR1cm4gcHVibGljX2tleVxyXG5cclxuXHJcbmRlZiBzZXJpYWxpemVfc3NoX3B1YmxpY19rZXkocHVibGljX2tleTogX1NTSF9QVUJMSUNfS0VZX1RZUEVTKSAtPiBieXRlczpcclxuICAgICIiIk9uZS1saW5lIHB1YmxpYyBrZXkgZm9ybWF0IGZvciBPcGVuU1NIIiIiXHJcbiAgICBpZiBpc2luc3RhbmNlKHB1YmxpY19rZXksIGVjLkVsbGlwdGljQ3VydmVQdWJsaWNLZXkpOlxyXG4gICAgICAgIGtleV90eXBlID0gX2VjZHNhX2tleV90eXBlKHB1YmxpY19rZXkpXHJcbiAgICBlbGlmIGlzaW5zdGFuY2UocHVibGljX2tleSwgcnNhLlJTQVB1YmxpY0tleSk6XHJcbiAgICAgICAga2V5X3R5cGUgPSBfU1NIX1JTQVxyXG4gICAgZWxpZiBpc2luc3RhbmNlKHB1YmxpY19rZXksIGRzYS5EU0FQdWJsaWNLZXkpOlxyXG4gICAgICAgIGtleV90eXBlID0gX1NTSF9EU0FcclxuICAgIGVsaWYgaXNpbnN0YW5jZShwdWJsaWNfa2V5LCBlZDI1NTE5LkVkMjU1MTlQdWJsaWNLZXkpOlxyXG4gICAgICAgIGtleV90eXBlID0gX1NTSF9FRDI1NTE5XHJcbiAgICBlbHNlOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVuc3VwcG9ydGVkIGtleSB0eXBlIilcclxuICAgIGtmb3JtYXQgPSBfbG9va3VwX2tmb3JtYXQoa2V5X3R5cGUpXHJcblxyXG4gICAgZl9wdWIgPSBfRnJhZ0xpc3QoKVxyXG4gICAgZl9wdWIucHV0X3NzaHN0cihrZXlfdHlwZSlcclxuICAgIGtmb3JtYXQuZW5jb2RlX3B1YmxpYyhwdWJsaWNfa2V5LCBmX3B1YilcclxuXHJcbiAgICBwdWIgPSBiaW5hc2NpaS5iMmFfYmFzZTY0KGZfcHViLnRvYnl0ZXMoKSkuc3RyaXAoKVxyXG4gICAgcmV0dXJuIGIiIi5qb2luKFtrZXlfdHlwZSwgYiIgIiwgcHViXSlcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9jaXBoZXJzL19faW5pdF9fLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLl9jaXBoZXJhbGdvcml0aG0gaW1wb3J0IChcclxuICAgIEJsb2NrQ2lwaGVyQWxnb3JpdGhtLFxyXG4gICAgQ2lwaGVyQWxnb3JpdGhtLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmNpcGhlcnMuYmFzZSBpbXBvcnQgKFxyXG4gICAgQUVBRENpcGhlckNvbnRleHQsXHJcbiAgICBBRUFERGVjcnlwdGlvbkNvbnRleHQsXHJcbiAgICBBRUFERW5jcnlwdGlvbkNvbnRleHQsXHJcbiAgICBDaXBoZXIsXHJcbiAgICBDaXBoZXJDb250ZXh0LFxyXG4pXHJcblxyXG5cclxuX19hbGxfXyA9IFtcclxuICAgICJDaXBoZXIiLFxyXG4gICAgIkNpcGhlckFsZ29yaXRobSIsXHJcbiAgICAiQmxvY2tDaXBoZXJBbGdvcml0aG0iLFxyXG4gICAgIkNpcGhlckNvbnRleHQiLFxyXG4gICAgIkFFQURDaXBoZXJDb250ZXh0IixcclxuICAgICJBRUFERGVjcnlwdGlvbkNvbnRleHQiLFxyXG4gICAgIkFFQURFbmNyeXB0aW9uQ29udGV4dCIsXHJcbl1cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9fY2lwaGVyYWxnb3JpdGhtLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IGFiY1xyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5cclxuIyBUaGlzIGV4aXN0cyB0byBicmVhayBhbiBpbXBvcnQgY3ljbGUuIEl0IGlzIG5vcm1hbGx5IGFjY2Vzc2libGUgZnJvbSB0aGVcclxuIyBjaXBoZXJzIG1vZHVsZS5cclxuXHJcblxyXG5jbGFzcyBDaXBoZXJBbGdvcml0aG0obWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIG5hbWUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEEgc3RyaW5nIG5hbWluZyB0aGlzIG1vZGUgKGUuZy4gIkFFUyIsICJDYW1lbGxpYSIpLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplcyhzZWxmKSAtPiB0eXBpbmcuRnJvemVuU2V0W2ludF06XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVmFsaWQga2V5IHNpemVzIGZvciB0aGlzIGFsZ29yaXRobSBpbiBiaXRzXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSBzaXplIG9mIHRoZSBrZXkgYmVpbmcgdXNlZCBhcyBhbiBpbnRlZ2VyIGluIGJpdHMgKGUuZy4gMTI4LCAyNTYpLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIEJsb2NrQ2lwaGVyQWxnb3JpdGhtKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBrZXk6IGJ5dGVzXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgYmxvY2tfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHNpemUgb2YgYSBibG9jayBhcyBhbiBpbnRlZ2VyIGluIGJpdHMgKGUuZy4gNjQsIDEyOCkuXHJcbiAgICAgICAgIiIiXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvY2lwaGVycy9iYXNlLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuZXhjZXB0aW9ucyBpbXBvcnQgKFxyXG4gICAgQWxyZWFkeUZpbmFsaXplZCxcclxuICAgIEFscmVhZHlVcGRhdGVkLFxyXG4gICAgTm90WWV0RmluYWxpemVkLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLl9jaXBoZXJhbGdvcml0aG0gaW1wb3J0IENpcGhlckFsZ29yaXRobVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5jaXBoZXJzIGltcG9ydCBtb2Rlc1xyXG5cclxuXHJcbmlmIHR5cGluZy5UWVBFX0NIRUNLSU5HOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuY2lwaGVycyBpbXBvcnQgKFxyXG4gICAgICAgIF9DaXBoZXJDb250ZXh0IGFzIF9CYWNrZW5kQ2lwaGVyQ29udGV4dCxcclxuICAgIClcclxuXHJcblxyXG5jbGFzcyBDaXBoZXJDb250ZXh0KG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgdXBkYXRlKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBQcm9jZXNzZXMgdGhlIHByb3ZpZGVkIGJ5dGVzIHRocm91Z2ggdGhlIGNpcGhlciBhbmQgcmV0dXJucyB0aGUgcmVzdWx0c1xyXG4gICAgICAgIGFzIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiB1cGRhdGVfaW50byhzZWxmLCBkYXRhOiBieXRlcywgYnVmOiBieXRlcykgLT4gaW50OlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFByb2Nlc3NlcyB0aGUgcHJvdmlkZWQgYnl0ZXMgYW5kIHdyaXRlcyB0aGUgcmVzdWx0aW5nIGRhdGEgaW50byB0aGVcclxuICAgICAgICBwcm92aWRlZCBidWZmZXIuIFJldHVybnMgdGhlIG51bWJlciBvZiBieXRlcyB3cml0dGVuLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiBmaW5hbGl6ZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIHByb2Nlc3NpbmcgdGhlIGZpbmFsIGJsb2NrIGFzIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIEFFQURDaXBoZXJDb250ZXh0KENpcGhlckNvbnRleHQsIG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgYXV0aGVudGljYXRlX2FkZGl0aW9uYWxfZGF0YShzZWxmLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBBdXRoZW50aWNhdGVzIHRoZSBwcm92aWRlZCBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBBRUFERGVjcnlwdGlvbkNvbnRleHQoQUVBRENpcGhlckNvbnRleHQsIG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZmluYWxpemVfd2l0aF90YWcoc2VsZiwgdGFnOiBieXRlcykgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgUmV0dXJucyB0aGUgcmVzdWx0cyBvZiBwcm9jZXNzaW5nIHRoZSBmaW5hbCBibG9jayBhcyBieXRlcyBhbmQgYWxsb3dzXHJcbiAgICAgICAgZGVsYXllZCBwYXNzaW5nIG9mIHRoZSBhdXRoZW50aWNhdGlvbiB0YWcuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgQUVBREVuY3J5cHRpb25Db250ZXh0KEFFQURDaXBoZXJDb250ZXh0LCBtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgdGFnKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFJldHVybnMgdGFnIGJ5dGVzLiBUaGlzIGlzIG9ubHkgYXZhaWxhYmxlIGFmdGVyIGVuY3J5cHRpb24gaXNcclxuICAgICAgICBmaW5hbGl6ZWQuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuTW9kZSA9IHR5cGluZy5UeXBlVmFyKFxyXG4gICAgIk1vZGUiLCBib3VuZD10eXBpbmcuT3B0aW9uYWxbbW9kZXMuTW9kZV0sIGNvdmFyaWFudD1UcnVlXHJcbilcclxuXHJcblxyXG5jbGFzcyBDaXBoZXIodHlwaW5nLkdlbmVyaWNbTW9kZV0pOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgYWxnb3JpdGhtOiBDaXBoZXJBbGdvcml0aG0sXHJcbiAgICAgICAgbW9kZTogTW9kZSxcclxuICAgICAgICBiYWNrZW5kOiB0eXBpbmcuQW55ID0gTm9uZSxcclxuICAgICk6XHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGFsZ29yaXRobSwgQ2lwaGVyQWxnb3JpdGhtKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJFeHBlY3RlZCBpbnRlcmZhY2Ugb2YgQ2lwaGVyQWxnb3JpdGhtLiIpXHJcblxyXG4gICAgICAgIGlmIG1vZGUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICMgbXlweSBuZWVkcyB0aGlzIGFzc2VydCB0byBuYXJyb3cgdGhlIHR5cGUgZnJvbSBvdXIgZ2VuZXJpY1xyXG4gICAgICAgICAgICAjIHR5cGUuIE1heWJlIGl0IHdvblwndCBzb21lIHRpbWUgaW4gdGhlIGZ1dHVyZS5cclxuICAgICAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UobW9kZSwgbW9kZXMuTW9kZSlcclxuICAgICAgICAgICAgbW9kZS52YWxpZGF0ZV9mb3JfYWxnb3JpdGhtKGFsZ29yaXRobSlcclxuXHJcbiAgICAgICAgc2VsZi5hbGdvcml0aG0gPSBhbGdvcml0aG1cclxuICAgICAgICBzZWxmLm1vZGUgPSBtb2RlXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGVuY3J5cHRvcihcclxuICAgICAgICBzZWxmOiAiQ2lwaGVyW21vZGVzLk1vZGVXaXRoQXV0aGVudGljYXRpb25UYWddIixcclxuICAgICkgLT4gQUVBREVuY3J5cHRpb25Db250ZXh0OlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBlbmNyeXB0b3IoXHJcbiAgICAgICAgc2VsZjogIl9DSVBIRVJfVFlQRSIsXHJcbiAgICApIC0+IENpcGhlckNvbnRleHQ6XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgZGVmIGVuY3J5cHRvcihzZWxmKTpcclxuICAgICAgICBpZiBpc2luc3RhbmNlKHNlbGYubW9kZSwgbW9kZXMuTW9kZVdpdGhBdXRoZW50aWNhdGlvblRhZyk6XHJcbiAgICAgICAgICAgIGlmIHNlbGYubW9kZS50YWcgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJBdXRoZW50aWNhdGlvbiB0YWcgbXVzdCBiZSBOb25lIHdoZW4gZW5jcnlwdGluZy4iXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgICAgICBjdHggPSBiYWNrZW5kLmNyZWF0ZV9zeW1tZXRyaWNfZW5jcnlwdGlvbl9jdHgoXHJcbiAgICAgICAgICAgIHNlbGYuYWxnb3JpdGhtLCBzZWxmLm1vZGVcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3dyYXBfY3R4KGN0eCwgZW5jcnlwdD1UcnVlKVxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBkZWNyeXB0b3IoXHJcbiAgICAgICAgc2VsZjogIkNpcGhlclttb2Rlcy5Nb2RlV2l0aEF1dGhlbnRpY2F0aW9uVGFnXSIsXHJcbiAgICApIC0+IEFFQUREZWNyeXB0aW9uQ29udGV4dDpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZGVjcnlwdG9yKFxyXG4gICAgICAgIHNlbGY6ICJfQ0lQSEVSX1RZUEUiLFxyXG4gICAgKSAtPiBDaXBoZXJDb250ZXh0OlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIGRlZiBkZWNyeXB0b3Ioc2VsZik6XHJcbiAgICAgICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgICAgICBjdHggPSBiYWNrZW5kLmNyZWF0ZV9zeW1tZXRyaWNfZGVjcnlwdGlvbl9jdHgoXHJcbiAgICAgICAgICAgIHNlbGYuYWxnb3JpdGhtLCBzZWxmLm1vZGVcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3dyYXBfY3R4KGN0eCwgZW5jcnlwdD1GYWxzZSlcclxuXHJcbiAgICBkZWYgX3dyYXBfY3R4KFxyXG4gICAgICAgIHNlbGYsIGN0eDogIl9CYWNrZW5kQ2lwaGVyQ29udGV4dCIsIGVuY3J5cHQ6IGJvb2xcclxuICAgICkgLT4gdHlwaW5nLlVuaW9uW1xyXG4gICAgICAgIEFFQURFbmNyeXB0aW9uQ29udGV4dCwgQUVBRERlY3J5cHRpb25Db250ZXh0LCBDaXBoZXJDb250ZXh0XHJcbiAgICBdOlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5tb2RlLCBtb2Rlcy5Nb2RlV2l0aEF1dGhlbnRpY2F0aW9uVGFnKTpcclxuICAgICAgICAgICAgaWYgZW5jcnlwdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBfQUVBREVuY3J5cHRpb25Db250ZXh0KGN0eClcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBfQUVBRERlY3J5cHRpb25Db250ZXh0KGN0eClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gX0NpcGhlckNvbnRleHQoY3R4KVxyXG5cclxuXHJcbl9DSVBIRVJfVFlQRSA9IENpcGhlcltcclxuICAgIHR5cGluZy5VbmlvbltcclxuICAgICAgICBtb2Rlcy5Nb2RlV2l0aE5vbmNlLFxyXG4gICAgICAgIG1vZGVzLk1vZGVXaXRoVHdlYWssXHJcbiAgICAgICAgTm9uZSxcclxuICAgICAgICBtb2Rlcy5FQ0IsXHJcbiAgICAgICAgbW9kZXMuTW9kZVdpdGhJbml0aWFsaXphdGlvblZlY3RvcixcclxuICAgIF1cclxuXVxyXG5cclxuXHJcbmNsYXNzIF9DaXBoZXJDb250ZXh0KENpcGhlckNvbnRleHQpOlxyXG4gICAgX2N0eDogdHlwaW5nLk9wdGlvbmFsWyJfQmFja2VuZENpcGhlckNvbnRleHQiXVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjdHg6ICJfQmFja2VuZENpcGhlckNvbnRleHQiKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2N0eCA9IGN0eFxyXG5cclxuICAgIGRlZiB1cGRhdGUoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIHNlbGYuX2N0eCBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBBbHJlYWR5RmluYWxpemVkKCJDb250ZXh0IHdhcyBhbHJlYWR5IGZpbmFsaXplZC4iKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jdHgudXBkYXRlKGRhdGEpXHJcblxyXG4gICAgZGVmIHVwZGF0ZV9pbnRvKHNlbGYsIGRhdGE6IGJ5dGVzLCBidWY6IGJ5dGVzKSAtPiBpbnQ6XHJcbiAgICAgICAgaWYgc2VsZi5fY3R4IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIEFscmVhZHlGaW5hbGl6ZWQoIkNvbnRleHQgd2FzIGFscmVhZHkgZmluYWxpemVkLiIpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2N0eC51cGRhdGVfaW50byhkYXRhLCBidWYpXHJcblxyXG4gICAgZGVmIGZpbmFsaXplKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIHNlbGYuX2N0eCBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBBbHJlYWR5RmluYWxpemVkKCJDb250ZXh0IHdhcyBhbHJlYWR5IGZpbmFsaXplZC4iKVxyXG4gICAgICAgIGRhdGEgPSBzZWxmLl9jdHguZmluYWxpemUoKVxyXG4gICAgICAgIHNlbGYuX2N0eCA9IE5vbmVcclxuICAgICAgICByZXR1cm4gZGF0YVxyXG5cclxuXHJcbmNsYXNzIF9BRUFEQ2lwaGVyQ29udGV4dChBRUFEQ2lwaGVyQ29udGV4dCk6XHJcbiAgICBfY3R4OiB0eXBpbmcuT3B0aW9uYWxbIl9CYWNrZW5kQ2lwaGVyQ29udGV4dCJdXHJcbiAgICBfdGFnOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGN0eDogIl9CYWNrZW5kQ2lwaGVyQ29udGV4dCIpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5fY3R4ID0gY3R4XHJcbiAgICAgICAgc2VsZi5fYnl0ZXNfcHJvY2Vzc2VkID0gMFxyXG4gICAgICAgIHNlbGYuX2FhZF9ieXRlc19wcm9jZXNzZWQgPSAwXHJcbiAgICAgICAgc2VsZi5fdGFnID0gTm9uZVxyXG4gICAgICAgIHNlbGYuX3VwZGF0ZWQgPSBGYWxzZVxyXG5cclxuICAgIGRlZiBfY2hlY2tfbGltaXQoc2VsZiwgZGF0YV9zaXplOiBpbnQpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fY3R4IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIHJhaXNlIEFscmVhZHlGaW5hbGl6ZWQoIkNvbnRleHQgd2FzIGFscmVhZHkgZmluYWxpemVkLiIpXHJcbiAgICAgICAgc2VsZi5fdXBkYXRlZCA9IFRydWVcclxuICAgICAgICBzZWxmLl9ieXRlc19wcm9jZXNzZWQgKz0gZGF0YV9zaXplXHJcbiAgICAgICAgaWYgc2VsZi5fYnl0ZXNfcHJvY2Vzc2VkID4gc2VsZi5fY3R4Ll9tb2RlLl9NQVhfRU5DUllQVEVEX0JZVEVTOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInt9IGhhcyBhIG1heGltdW0gZW5jcnlwdGVkIGJ5dGUgbGltaXQgb2Yge30iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9jdHguX21vZGUubmFtZSwgc2VsZi5fY3R4Ll9tb2RlLl9NQVhfRU5DUllQVEVEX0JZVEVTXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBkZWYgdXBkYXRlKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgICAgICBzZWxmLl9jaGVja19saW1pdChsZW4oZGF0YSkpXHJcbiAgICAgICAgIyBteXB5IG5lZWRzIHRoaXMgYXNzZXJ0IGV2ZW4gdGhvdWdoIF9jaGVja19saW1pdCBhbHJlYWR5IGNoZWNrZWRcclxuICAgICAgICBhc3NlcnQgc2VsZi5fY3R4IGlzIG5vdCBOb25lXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2N0eC51cGRhdGUoZGF0YSlcclxuXHJcbiAgICBkZWYgdXBkYXRlX2ludG8oc2VsZiwgZGF0YTogYnl0ZXMsIGJ1ZjogYnl0ZXMpIC0+IGludDpcclxuICAgICAgICBzZWxmLl9jaGVja19saW1pdChsZW4oZGF0YSkpXHJcbiAgICAgICAgIyBteXB5IG5lZWRzIHRoaXMgYXNzZXJ0IGV2ZW4gdGhvdWdoIF9jaGVja19saW1pdCBhbHJlYWR5IGNoZWNrZWRcclxuICAgICAgICBhc3NlcnQgc2VsZi5fY3R4IGlzIG5vdCBOb25lXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2N0eC51cGRhdGVfaW50byhkYXRhLCBidWYpXHJcblxyXG4gICAgZGVmIGZpbmFsaXplKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIHNlbGYuX2N0eCBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBBbHJlYWR5RmluYWxpemVkKCJDb250ZXh0IHdhcyBhbHJlYWR5IGZpbmFsaXplZC4iKVxyXG4gICAgICAgIGRhdGEgPSBzZWxmLl9jdHguZmluYWxpemUoKVxyXG4gICAgICAgIHNlbGYuX3RhZyA9IHNlbGYuX2N0eC50YWdcclxuICAgICAgICBzZWxmLl9jdHggPSBOb25lXHJcbiAgICAgICAgcmV0dXJuIGRhdGFcclxuXHJcbiAgICBkZWYgYXV0aGVudGljYXRlX2FkZGl0aW9uYWxfZGF0YShzZWxmLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBpZiBzZWxmLl9jdHggaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgQWxyZWFkeUZpbmFsaXplZCgiQ29udGV4dCB3YXMgYWxyZWFkeSBmaW5hbGl6ZWQuIilcclxuICAgICAgICBpZiBzZWxmLl91cGRhdGVkOlxyXG4gICAgICAgICAgICByYWlzZSBBbHJlYWR5VXBkYXRlZCgiVXBkYXRlIGhhcyBiZWVuIGNhbGxlZCBvbiB0aGlzIGNvbnRleHQuIilcclxuXHJcbiAgICAgICAgc2VsZi5fYWFkX2J5dGVzX3Byb2Nlc3NlZCArPSBsZW4oZGF0YSlcclxuICAgICAgICBpZiBzZWxmLl9hYWRfYnl0ZXNfcHJvY2Vzc2VkID4gc2VsZi5fY3R4Ll9tb2RlLl9NQVhfQUFEX0JZVEVTOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInt9IGhhcyBhIG1heGltdW0gQUFEIGJ5dGUgbGltaXQgb2Yge30iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9jdHguX21vZGUubmFtZSwgc2VsZi5fY3R4Ll9tb2RlLl9NQVhfQUFEX0JZVEVTXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fY3R4LmF1dGhlbnRpY2F0ZV9hZGRpdGlvbmFsX2RhdGEoZGF0YSlcclxuXHJcblxyXG5jbGFzcyBfQUVBRERlY3J5cHRpb25Db250ZXh0KF9BRUFEQ2lwaGVyQ29udGV4dCwgQUVBRERlY3J5cHRpb25Db250ZXh0KTpcclxuICAgIGRlZiBmaW5hbGl6ZV93aXRoX3RhZyhzZWxmLCB0YWc6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgICAgICBpZiBzZWxmLl9jdHggaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgQWxyZWFkeUZpbmFsaXplZCgiQ29udGV4dCB3YXMgYWxyZWFkeSBmaW5hbGl6ZWQuIilcclxuICAgICAgICBkYXRhID0gc2VsZi5fY3R4LmZpbmFsaXplX3dpdGhfdGFnKHRhZylcclxuICAgICAgICBzZWxmLl90YWcgPSBzZWxmLl9jdHgudGFnXHJcbiAgICAgICAgc2VsZi5fY3R4ID0gTm9uZVxyXG4gICAgICAgIHJldHVybiBkYXRhXHJcblxyXG5cclxuY2xhc3MgX0FFQURFbmNyeXB0aW9uQ29udGV4dChfQUVBRENpcGhlckNvbnRleHQsIEFFQURFbmNyeXB0aW9uQ29udGV4dCk6XHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB0YWcoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgc2VsZi5fY3R4IGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBOb3RZZXRGaW5hbGl6ZWQoXHJcbiAgICAgICAgICAgICAgICAiWW91IG11c3QgZmluYWxpemUgZW5jcnlwdGlvbiBiZWZvcmUgIiAiZ2V0dGluZyB0aGUgdGFnLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGFzc2VydCBzZWxmLl90YWcgaXMgbm90IE5vbmVcclxuICAgICAgICByZXR1cm4gc2VsZi5fdGFnXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvY2lwaGVycy9tb2Rlcy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgYWJjXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCBVbnN1cHBvcnRlZEFsZ29yaXRobSwgX1JlYXNvbnNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuX2NpcGhlcmFsZ29yaXRobSBpbXBvcnQgKFxyXG4gICAgQmxvY2tDaXBoZXJBbGdvcml0aG0sXHJcbiAgICBDaXBoZXJBbGdvcml0aG0sXHJcbilcclxuXHJcblxyXG5jbGFzcyBNb2RlKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBuYW1lKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBBIHN0cmluZyBuYW1pbmcgdGhpcyBtb2RlIChlLmcuICJFQ0IiLCAiQ0JDIikuXHJcbiAgICAgICAgIiIiXHJcblxyXG4gICAgQGFiYy5hYnN0cmFjdG1ldGhvZFxyXG4gICAgZGVmIHZhbGlkYXRlX2Zvcl9hbGdvcml0aG0oc2VsZiwgYWxnb3JpdGhtOiBDaXBoZXJBbGdvcml0aG0pIC0+IE5vbmU6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgQ2hlY2tzIHRoYXQgYWxsIHRoZSBuZWNlc3NhcnkgaW52YXJpYW50cyBvZiB0aGlzIChtb2RlLCBhbGdvcml0aG0pXHJcbiAgICAgICAgY29tYmluYXRpb24gYXJlIG1ldC5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBNb2RlV2l0aEluaXRpYWxpemF0aW9uVmVjdG9yKE1vZGUsIG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiBpbml0aWFsaXphdGlvbl92ZWN0b3Ioc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHZhbHVlIG9mIHRoZSBpbml0aWFsaXphdGlvbiB2ZWN0b3IgZm9yIHRoaXMgbW9kZSBhcyBieXRlcy5cclxuICAgICAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBNb2RlV2l0aFR3ZWFrKE1vZGUsIG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0cHJvcGVydHlcclxuICAgIGRlZiB0d2VhayhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICAiIiJcclxuICAgICAgICBUaGUgdmFsdWUgb2YgdGhlIHR3ZWFrIGZvciB0aGlzIG1vZGUgYXMgYnl0ZXMuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuY2xhc3MgTW9kZVdpdGhOb25jZShNb2RlLCBtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgbm9uY2Uoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHZhbHVlIG9mIHRoZSBub25jZSBmb3IgdGhpcyBtb2RlIGFzIGJ5dGVzLlxyXG4gICAgICAgICIiIlxyXG5cclxuXHJcbmNsYXNzIE1vZGVXaXRoQXV0aGVudGljYXRpb25UYWcoTW9kZSwgbWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIEBhYmMuYWJzdHJhY3Rwcm9wZXJ0eVxyXG4gICAgZGVmIHRhZyhzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIFRoZSB2YWx1ZSBvZiB0aGUgdGFnIHN1cHBsaWVkIHRvIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGlzIG1vZGUuXHJcbiAgICAgICAgIiIiXHJcblxyXG5cclxuZGVmIF9jaGVja19hZXNfa2V5X2xlbmd0aChzZWxmOiBNb2RlLCBhbGdvcml0aG06IENpcGhlckFsZ29yaXRobSkgLT4gTm9uZTpcclxuICAgIGlmIGFsZ29yaXRobS5rZXlfc2l6ZSA+IDI1NiBhbmQgYWxnb3JpdGhtLm5hbWUgPT0gIkFFUyI6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgIk9ubHkgMTI4LCAxOTIsIGFuZCAyNTYgYml0IGtleXMgYXJlIGFsbG93ZWQgZm9yIHRoaXMgQUVTIG1vZGUiXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmRlZiBfY2hlY2tfaXZfbGVuZ3RoKFxyXG4gICAgc2VsZjogTW9kZVdpdGhJbml0aWFsaXphdGlvblZlY3RvciwgYWxnb3JpdGhtOiBCbG9ja0NpcGhlckFsZ29yaXRobVxyXG4pIC0+IE5vbmU6XHJcbiAgICBpZiBsZW4oc2VsZi5pbml0aWFsaXphdGlvbl92ZWN0b3IpICogOCAhPSBhbGdvcml0aG0uYmxvY2tfc2l6ZTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAiSW52YWxpZCBJViBzaXplICh7fSkgZm9yIHt9LiIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgbGVuKHNlbGYuaW5pdGlhbGl6YXRpb25fdmVjdG9yKSwgc2VsZi5uYW1lXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcblxyXG5cclxuZGVmIF9jaGVja19ub25jZV9sZW5ndGgoXHJcbiAgICBub25jZTogYnl0ZXMsIG5hbWU6IHN0ciwgYWxnb3JpdGhtOiBDaXBoZXJBbGdvcml0aG1cclxuKSAtPiBOb25lOlxyXG4gICAgaWYgbm90IGlzaW5zdGFuY2UoYWxnb3JpdGhtLCBCbG9ja0NpcGhlckFsZ29yaXRobSk6XHJcbiAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgIGYie25hbWV9IHJlcXVpcmVzIGEgYmxvY2sgY2lwaGVyIGFsZ29yaXRobSIsXHJcbiAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX0NJUEhFUixcclxuICAgICAgICApXHJcbiAgICBpZiBsZW4obm9uY2UpICogOCAhPSBhbGdvcml0aG0uYmxvY2tfc2l6ZTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAiSW52YWxpZCBub25jZSBzaXplICh7fSkgZm9yIHt9LiIuZm9ybWF0KGxlbihub25jZSksIG5hbWUpXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmRlZiBfY2hlY2tfaXZfYW5kX2tleV9sZW5ndGgoXHJcbiAgICBzZWxmOiBNb2RlV2l0aEluaXRpYWxpemF0aW9uVmVjdG9yLCBhbGdvcml0aG06IENpcGhlckFsZ29yaXRobVxyXG4pIC0+IE5vbmU6XHJcbiAgICBpZiBub3QgaXNpbnN0YW5jZShhbGdvcml0aG0sIEJsb2NrQ2lwaGVyQWxnb3JpdGhtKTpcclxuICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgZiJ7c2VsZn0gcmVxdWlyZXMgYSBibG9jayBjaXBoZXIgYWxnb3JpdGhtIixcclxuICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfQ0lQSEVSLFxyXG4gICAgICAgIClcclxuICAgIF9jaGVja19hZXNfa2V5X2xlbmd0aChzZWxmLCBhbGdvcml0aG0pXHJcbiAgICBfY2hlY2tfaXZfbGVuZ3RoKHNlbGYsIGFsZ29yaXRobSlcclxuXHJcblxyXG5jbGFzcyBDQkMoTW9kZVdpdGhJbml0aWFsaXphdGlvblZlY3Rvcik6XHJcbiAgICBuYW1lID0gIkNCQyJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgaW5pdGlhbGl6YXRpb25fdmVjdG9yOiBieXRlcyk6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgiaW5pdGlhbGl6YXRpb25fdmVjdG9yIiwgaW5pdGlhbGl6YXRpb25fdmVjdG9yKVxyXG4gICAgICAgIHNlbGYuX2luaXRpYWxpemF0aW9uX3ZlY3RvciA9IGluaXRpYWxpemF0aW9uX3ZlY3RvclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGluaXRpYWxpemF0aW9uX3ZlY3RvcihzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5faW5pdGlhbGl6YXRpb25fdmVjdG9yXHJcblxyXG4gICAgdmFsaWRhdGVfZm9yX2FsZ29yaXRobSA9IF9jaGVja19pdl9hbmRfa2V5X2xlbmd0aFxyXG5cclxuXHJcbmNsYXNzIFhUUyhNb2RlV2l0aFR3ZWFrKTpcclxuICAgIG5hbWUgPSAiWFRTIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0d2VhazogYnl0ZXMpOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoInR3ZWFrIiwgdHdlYWspXHJcblxyXG4gICAgICAgIGlmIGxlbih0d2VhaykgIT0gMTY6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInR3ZWFrIG11c3QgYmUgMTI4LWJpdHMgKDE2IGJ5dGVzKSIpXHJcblxyXG4gICAgICAgIHNlbGYuX3R3ZWFrID0gdHdlYWtcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB0d2VhayhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdHdlYWtcclxuXHJcbiAgICBkZWYgdmFsaWRhdGVfZm9yX2FsZ29yaXRobShzZWxmLCBhbGdvcml0aG06IENpcGhlckFsZ29yaXRobSkgLT4gTm9uZTpcclxuICAgICAgICBpZiBhbGdvcml0aG0ua2V5X3NpemUgbm90IGluICgyNTYsIDUxMik6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiVGhlIFhUUyBzcGVjaWZpY2F0aW9uIHJlcXVpcmVzIGEgMjU2LWJpdCBrZXkgZm9yIEFFUy0xMjgtWFRTIlxyXG4gICAgICAgICAgICAgICAgIiBhbmQgNTEyLWJpdCBrZXkgZm9yIEFFUy0yNTYtWFRTIlxyXG4gICAgICAgICAgICApXHJcblxyXG5cclxuY2xhc3MgRUNCKE1vZGUpOlxyXG4gICAgbmFtZSA9ICJFQ0IiXHJcblxyXG4gICAgdmFsaWRhdGVfZm9yX2FsZ29yaXRobSA9IF9jaGVja19hZXNfa2V5X2xlbmd0aFxyXG5cclxuXHJcbmNsYXNzIE9GQihNb2RlV2l0aEluaXRpYWxpemF0aW9uVmVjdG9yKTpcclxuICAgIG5hbWUgPSAiT0ZCIlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbml0aWFsaXphdGlvbl92ZWN0b3I6IGJ5dGVzKTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJpbml0aWFsaXphdGlvbl92ZWN0b3IiLCBpbml0aWFsaXphdGlvbl92ZWN0b3IpXHJcbiAgICAgICAgc2VsZi5faW5pdGlhbGl6YXRpb25fdmVjdG9yID0gaW5pdGlhbGl6YXRpb25fdmVjdG9yXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgaW5pdGlhbGl6YXRpb25fdmVjdG9yKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9pbml0aWFsaXphdGlvbl92ZWN0b3JcclxuXHJcbiAgICB2YWxpZGF0ZV9mb3JfYWxnb3JpdGhtID0gX2NoZWNrX2l2X2FuZF9rZXlfbGVuZ3RoXHJcblxyXG5cclxuY2xhc3MgQ0ZCKE1vZGVXaXRoSW5pdGlhbGl6YXRpb25WZWN0b3IpOlxyXG4gICAgbmFtZSA9ICJDRkIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGluaXRpYWxpemF0aW9uX3ZlY3RvcjogYnl0ZXMpOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoImluaXRpYWxpemF0aW9uX3ZlY3RvciIsIGluaXRpYWxpemF0aW9uX3ZlY3RvcilcclxuICAgICAgICBzZWxmLl9pbml0aWFsaXphdGlvbl92ZWN0b3IgPSBpbml0aWFsaXphdGlvbl92ZWN0b3JcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBpbml0aWFsaXphdGlvbl92ZWN0b3Ioc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2luaXRpYWxpemF0aW9uX3ZlY3RvclxyXG5cclxuICAgIHZhbGlkYXRlX2Zvcl9hbGdvcml0aG0gPSBfY2hlY2tfaXZfYW5kX2tleV9sZW5ndGhcclxuXHJcblxyXG5jbGFzcyBDRkI4KE1vZGVXaXRoSW5pdGlhbGl6YXRpb25WZWN0b3IpOlxyXG4gICAgbmFtZSA9ICJDRkI4IlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbml0aWFsaXphdGlvbl92ZWN0b3I6IGJ5dGVzKTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJpbml0aWFsaXphdGlvbl92ZWN0b3IiLCBpbml0aWFsaXphdGlvbl92ZWN0b3IpXHJcbiAgICAgICAgc2VsZi5faW5pdGlhbGl6YXRpb25fdmVjdG9yID0gaW5pdGlhbGl6YXRpb25fdmVjdG9yXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgaW5pdGlhbGl6YXRpb25fdmVjdG9yKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9pbml0aWFsaXphdGlvbl92ZWN0b3JcclxuXHJcbiAgICB2YWxpZGF0ZV9mb3JfYWxnb3JpdGhtID0gX2NoZWNrX2l2X2FuZF9rZXlfbGVuZ3RoXHJcblxyXG5cclxuY2xhc3MgQ1RSKE1vZGVXaXRoTm9uY2UpOlxyXG4gICAgbmFtZSA9ICJDVFIiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG5vbmNlOiBieXRlcyk6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgibm9uY2UiLCBub25jZSlcclxuICAgICAgICBzZWxmLl9ub25jZSA9IG5vbmNlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbm9uY2Uoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX25vbmNlXHJcblxyXG4gICAgZGVmIHZhbGlkYXRlX2Zvcl9hbGdvcml0aG0oc2VsZiwgYWxnb3JpdGhtOiBDaXBoZXJBbGdvcml0aG0pIC0+IE5vbmU6XHJcbiAgICAgICAgX2NoZWNrX2Flc19rZXlfbGVuZ3RoKHNlbGYsIGFsZ29yaXRobSlcclxuICAgICAgICBfY2hlY2tfbm9uY2VfbGVuZ3RoKHNlbGYubm9uY2UsIHNlbGYubmFtZSwgYWxnb3JpdGhtKVxyXG5cclxuXHJcbmNsYXNzIEdDTShNb2RlV2l0aEluaXRpYWxpemF0aW9uVmVjdG9yLCBNb2RlV2l0aEF1dGhlbnRpY2F0aW9uVGFnKTpcclxuICAgIG5hbWUgPSAiR0NNIlxyXG4gICAgX01BWF9FTkNSWVBURURfQllURVMgPSAoMioqMzkgLSAyNTYpIC8vIDhcclxuICAgIF9NQVhfQUFEX0JZVEVTID0gKDIqKjY0KSAvLyA4XHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgaW5pdGlhbGl6YXRpb25fdmVjdG9yOiBieXRlcyxcclxuICAgICAgICB0YWc6IHR5cGluZy5PcHRpb25hbFtieXRlc10gPSBOb25lLFxyXG4gICAgICAgIG1pbl90YWdfbGVuZ3RoOiBpbnQgPSAxNixcclxuICAgICk6XHJcbiAgICAgICAgIyBPcGVuU1NMIDMuMC4wIGNvbnN0cmFpbnMgR0NNIElWcyB0byBbNjQsIDEwMjRdIGJpdHMgaW5jbHVzaXZlXHJcbiAgICAgICAgIyBUaGlzIGlzIGEgc2FuZSBsaW1pdCBhbnl3YXkgc28gd2VcJ2xsIGVuZm9yY2UgaXQgaGVyZS5cclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJpbml0aWFsaXphdGlvbl92ZWN0b3IiLCBpbml0aWFsaXphdGlvbl92ZWN0b3IpXHJcbiAgICAgICAgaWYgbGVuKGluaXRpYWxpemF0aW9uX3ZlY3RvcikgPCA4IG9yIGxlbihpbml0aWFsaXphdGlvbl92ZWN0b3IpID4gMTI4OlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImluaXRpYWxpemF0aW9uX3ZlY3RvciBtdXN0IGJlIGJldHdlZW4gOCBhbmQgMTI4IGJ5dGVzICg2NCAiXHJcbiAgICAgICAgICAgICAgICAiYW5kIDEwMjQgYml0cykuIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5faW5pdGlhbGl6YXRpb25fdmVjdG9yID0gaW5pdGlhbGl6YXRpb25fdmVjdG9yXHJcbiAgICAgICAgaWYgdGFnIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXMoInRhZyIsIHRhZylcclxuICAgICAgICAgICAgaWYgbWluX3RhZ19sZW5ndGggPCA0OlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigibWluX3RhZ19sZW5ndGggbXVzdCBiZSA+PSA0IilcclxuICAgICAgICAgICAgaWYgbGVuKHRhZykgPCBtaW5fdGFnX2xlbmd0aDpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIkF1dGhlbnRpY2F0aW9uIHRhZyBtdXN0IGJlIHt9IGJ5dGVzIG9yIGxvbmdlci4iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluX3RhZ19sZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fdGFnID0gdGFnXHJcbiAgICAgICAgc2VsZi5fbWluX3RhZ19sZW5ndGggPSBtaW5fdGFnX2xlbmd0aFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHRhZyhzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl90YWdcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBpbml0aWFsaXphdGlvbl92ZWN0b3Ioc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2luaXRpYWxpemF0aW9uX3ZlY3RvclxyXG5cclxuICAgIGRlZiB2YWxpZGF0ZV9mb3JfYWxnb3JpdGhtKHNlbGYsIGFsZ29yaXRobTogQ2lwaGVyQWxnb3JpdGhtKSAtPiBOb25lOlxyXG4gICAgICAgIF9jaGVja19hZXNfa2V5X2xlbmd0aChzZWxmLCBhbGdvcml0aG0pXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYWxnb3JpdGhtLCBCbG9ja0NpcGhlckFsZ29yaXRobSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIkdDTSByZXF1aXJlcyBhIGJsb2NrIGNpcGhlciBhbGdvcml0aG0iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfQ0lQSEVSLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgYmxvY2tfc2l6ZV9ieXRlcyA9IGFsZ29yaXRobS5ibG9ja19zaXplIC8vIDhcclxuICAgICAgICBpZiBzZWxmLl90YWcgaXMgbm90IE5vbmUgYW5kIGxlbihzZWxmLl90YWcpID4gYmxvY2tfc2l6ZV9ieXRlczpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJBdXRoZW50aWNhdGlvbiB0YWcgY2Fubm90IGJlIG1vcmUgdGhhbiB7fSBieXRlcy4iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICBibG9ja19zaXplX2J5dGVzXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC9jaXBoZXJzLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuZXhjZXB0aW9ucyBpbXBvcnQgSW52YWxpZFRhZywgVW5zdXBwb3J0ZWRBbGdvcml0aG0sIF9SZWFzb25zXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBjaXBoZXJzXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmNpcGhlcnMgaW1wb3J0IGFsZ29yaXRobXMsIG1vZGVzXHJcblxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBCYWNrZW5kXHJcblxyXG5cclxuY2xhc3MgX0NpcGhlckNvbnRleHQ6XHJcbiAgICBfRU5DUllQVCA9IDFcclxuICAgIF9ERUNSWVBUID0gMFxyXG4gICAgX01BWF9DSFVOS19TSVpFID0gMioqMzAgLSAxXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgY2lwaGVyLCBtb2RlLCBvcGVyYXRpb246IGludFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcbiAgICAgICAgc2VsZi5fY2lwaGVyID0gY2lwaGVyXHJcbiAgICAgICAgc2VsZi5fbW9kZSA9IG1vZGVcclxuICAgICAgICBzZWxmLl9vcGVyYXRpb24gPSBvcGVyYXRpb25cclxuICAgICAgICBzZWxmLl90YWc6IHR5cGluZy5PcHRpb25hbFtieXRlc10gPSBOb25lXHJcblxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5fY2lwaGVyLCBjaXBoZXJzLkJsb2NrQ2lwaGVyQWxnb3JpdGhtKTpcclxuICAgICAgICAgICAgc2VsZi5fYmxvY2tfc2l6ZV9ieXRlcyA9IHNlbGYuX2NpcGhlci5ibG9ja19zaXplIC8vIDhcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBzZWxmLl9ibG9ja19zaXplX2J5dGVzID0gMVxyXG5cclxuICAgICAgICBjdHggPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NJUEhFUl9DVFhfbmV3KClcclxuICAgICAgICBjdHggPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoXHJcbiAgICAgICAgICAgIGN0eCwgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfQ1RYX2ZyZWVcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJlZ2lzdHJ5ID0gc2VsZi5fYmFja2VuZC5fY2lwaGVyX3JlZ2lzdHJ5XHJcbiAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICBhZGFwdGVyID0gcmVnaXN0cnlbdHlwZShjaXBoZXIpLCB0eXBlKG1vZGUpXVxyXG4gICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiY2lwaGVyIHt9IGluIHt9IG1vZGUgaXMgbm90IHN1cHBvcnRlZCAiXHJcbiAgICAgICAgICAgICAgICAiYnkgdGhpcyBiYWNrZW5kLiIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgIGNpcGhlci5uYW1lLCBtb2RlLm5hbWUgaWYgbW9kZSBlbHNlIG1vZGVcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9DSVBIRVIsXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgZXZwX2NpcGhlciA9IGFkYXB0ZXIoc2VsZi5fYmFja2VuZCwgY2lwaGVyLCBtb2RlKVxyXG4gICAgICAgIGlmIGV2cF9jaXBoZXIgPT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgIG1zZyA9ICJjaXBoZXIgezAubmFtZX0gIi5mb3JtYXQoY2lwaGVyKVxyXG4gICAgICAgICAgICBpZiBtb2RlIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgbXNnICs9ICJpbiB7MC5uYW1lfSBtb2RlICIuZm9ybWF0KG1vZGUpXHJcbiAgICAgICAgICAgIG1zZyArPSAoXHJcbiAgICAgICAgICAgICAgICAiaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJhY2tlbmQgKFlvdXIgdmVyc2lvbiBvZiBPcGVuU1NMICJcclxuICAgICAgICAgICAgICAgICJtYXkgYmUgdG9vIG9sZC4gQ3VycmVudCB2ZXJzaW9uOiB7fS4pIlxyXG4gICAgICAgICAgICApLmZvcm1hdChzZWxmLl9iYWNrZW5kLm9wZW5zc2xfdmVyc2lvbl90ZXh0KCkpXHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKG1zZywgX1JlYXNvbnMuVU5TVVBQT1JURURfQ0lQSEVSKVxyXG5cclxuICAgICAgICBpZiBpc2luc3RhbmNlKG1vZGUsIG1vZGVzLk1vZGVXaXRoSW5pdGlhbGl6YXRpb25WZWN0b3IpOlxyXG4gICAgICAgICAgICBpdl9ub25jZSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5mcm9tX2J1ZmZlcihcclxuICAgICAgICAgICAgICAgIG1vZGUuaW5pdGlhbGl6YXRpb25fdmVjdG9yXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBlbGlmIGlzaW5zdGFuY2UobW9kZSwgbW9kZXMuTW9kZVdpdGhUd2Vhayk6XHJcbiAgICAgICAgICAgIGl2X25vbmNlID0gc2VsZi5fYmFja2VuZC5fZmZpLmZyb21fYnVmZmVyKG1vZGUudHdlYWspXHJcbiAgICAgICAgZWxpZiBpc2luc3RhbmNlKG1vZGUsIG1vZGVzLk1vZGVXaXRoTm9uY2UpOlxyXG4gICAgICAgICAgICBpdl9ub25jZSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5mcm9tX2J1ZmZlcihtb2RlLm5vbmNlKVxyXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShjaXBoZXIsIGFsZ29yaXRobXMuQ2hhQ2hhMjApOlxyXG4gICAgICAgICAgICBpdl9ub25jZSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5mcm9tX2J1ZmZlcihjaXBoZXIubm9uY2UpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaXZfbm9uY2UgPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTFxyXG4gICAgICAgICMgYmVnaW4gaW5pdCB3aXRoIGNpcGhlciBhbmQgb3BlcmF0aW9uIHR5cGVcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NpcGhlckluaXRfZXgoXHJcbiAgICAgICAgICAgIGN0eCxcclxuICAgICAgICAgICAgZXZwX2NpcGhlcixcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgb3BlcmF0aW9uLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgICAgICMgc2V0IHRoZSBrZXkgbGVuZ3RoIHRvIGhhbmRsZSB2YXJpYWJsZSBrZXkgY2lwaGVyc1xyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ0lQSEVSX0NUWF9zZXRfa2V5X2xlbmd0aChcclxuICAgICAgICAgICAgY3R4LCBsZW4oY2lwaGVyLmtleSlcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuICAgICAgICBpZiBpc2luc3RhbmNlKG1vZGUsIG1vZGVzLkdDTSk6XHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ0lQSEVSX0NUWF9jdHJsKFxyXG4gICAgICAgICAgICAgICAgY3R4LFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9DVFJMX0FFQURfU0VUX0lWTEVOLFxyXG4gICAgICAgICAgICAgICAgbGVuKGl2X25vbmNlKSxcclxuICAgICAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICAgICAgICAgIGlmIG1vZGUudGFnIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfQ1RYX2N0cmwoXHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ1RSTF9BRUFEX1NFVF9UQUcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVuKG1vZGUudGFnKSxcclxuICAgICAgICAgICAgICAgICAgICBtb2RlLnRhZyxcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICAgICAgICAgICAgICBzZWxmLl90YWcgPSBtb2RlLnRhZ1xyXG5cclxuICAgICAgICAjIHBhc3Mga2V5L2l2XHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9DaXBoZXJJbml0X2V4KFxyXG4gICAgICAgICAgICBjdHgsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLmZyb21fYnVmZmVyKGNpcGhlci5rZXkpLFxyXG4gICAgICAgICAgICBpdl9ub25jZSxcclxuICAgICAgICAgICAgb3BlcmF0aW9uLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgIyBDaGVjayBmb3IgWFRTIG1vZGUgZHVwbGljYXRlIGtleXMgZXJyb3JcclxuICAgICAgICBlcnJvcnMgPSBzZWxmLl9iYWNrZW5kLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgbGliID0gc2VsZi5fYmFja2VuZC5fbGliXHJcbiAgICAgICAgaWYgcmVzID09IDAgYW5kIChcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgbGliLkNSWVBUT0dSQVBIWV9PUEVOU1NMXzExMURfT1JfR1JFQVRFUlxyXG4gICAgICAgICAgICAgICAgYW5kIGVycm9yc1swXS5fbGliX3JlYXNvbl9tYXRjaChcclxuICAgICAgICAgICAgICAgICAgICBsaWIuRVJSX0xJQl9FVlAsIGxpYi5FVlBfUl9YVFNfRFVQTElDQVRFRF9LRVlTXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgb3IgKFxyXG4gICAgICAgICAgICAgICAgbGliLkNyeXB0b2dyYXBoeV9IQVNfUFJPVklERVJTXHJcbiAgICAgICAgICAgICAgICBhbmQgZXJyb3JzWzBdLl9saWJfcmVhc29uX21hdGNoKFxyXG4gICAgICAgICAgICAgICAgICAgIGxpYi5FUlJfTElCX1BST1YsIGxpYi5QUk9WX1JfWFRTX0RVUExJQ0FURURfS0VZU1xyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSW4gWFRTIG1vZGUgZHVwbGljYXRlZCBrZXlzIGFyZSBub3QgYWxsb3dlZCIpXHJcblxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDAsIGVycm9ycz1lcnJvcnMpXHJcblxyXG4gICAgICAgICMgV2UgcHVycG9zZWx5IGRpc2FibGUgcGFkZGluZyBoZXJlIGFzIGl0XCdzIGhhbmRsZWQgaGlnaGVyIHVwIGluIHRoZVxyXG4gICAgICAgICMgQVBJLlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ0lQSEVSX0NUWF9zZXRfcGFkZGluZyhjdHgsIDApXHJcbiAgICAgICAgc2VsZi5fY3R4ID0gY3R4XHJcblxyXG4gICAgZGVmIHVwZGF0ZShzZWxmLCBkYXRhOiBieXRlcykgLT4gYnl0ZXM6XHJcbiAgICAgICAgYnVmID0gYnl0ZWFycmF5KGxlbihkYXRhKSArIHNlbGYuX2Jsb2NrX3NpemVfYnl0ZXMgLSAxKVxyXG4gICAgICAgIG4gPSBzZWxmLnVwZGF0ZV9pbnRvKGRhdGEsIGJ1ZilcclxuICAgICAgICByZXR1cm4gYnl0ZXMoYnVmWzpuXSlcclxuXHJcbiAgICBkZWYgdXBkYXRlX2ludG8oc2VsZiwgZGF0YTogYnl0ZXMsIGJ1ZjogYnl0ZXMpIC0+IGludDpcclxuICAgICAgICB0b3RhbF9kYXRhX2xlbiA9IGxlbihkYXRhKVxyXG4gICAgICAgIGlmIGxlbihidWYpIDwgKHRvdGFsX2RhdGFfbGVuICsgc2VsZi5fYmxvY2tfc2l6ZV9ieXRlcyAtIDEpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImJ1ZmZlciBtdXN0IGJlIGF0IGxlYXN0IHt9IGJ5dGVzIGZvciB0aGlzICJcclxuICAgICAgICAgICAgICAgICJwYXlsb2FkIi5mb3JtYXQobGVuKGRhdGEpICsgc2VsZi5fYmxvY2tfc2l6ZV9ieXRlcyAtIDEpXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgZGF0YV9wcm9jZXNzZWQgPSAwXHJcbiAgICAgICAgdG90YWxfb3V0ID0gMFxyXG4gICAgICAgIG91dGxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoImludCAqIilcclxuICAgICAgICBiYXNlb3V0YnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLmZyb21fYnVmZmVyKGJ1ZilcclxuICAgICAgICBiYXNlaW5idWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZnJvbV9idWZmZXIoZGF0YSlcclxuXHJcbiAgICAgICAgd2hpbGUgZGF0YV9wcm9jZXNzZWQgIT0gdG90YWxfZGF0YV9sZW46XHJcbiAgICAgICAgICAgIG91dGJ1ZiA9IGJhc2VvdXRidWYgKyB0b3RhbF9vdXRcclxuICAgICAgICAgICAgaW5idWYgPSBiYXNlaW5idWYgKyBkYXRhX3Byb2Nlc3NlZFxyXG4gICAgICAgICAgICBpbmxlbiA9IG1pbihzZWxmLl9NQVhfQ0hVTktfU0laRSwgdG90YWxfZGF0YV9sZW4gLSBkYXRhX3Byb2Nlc3NlZClcclxuXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfQ2lwaGVyVXBkYXRlKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fY3R4LCBvdXRidWYsIG91dGxlbiwgaW5idWYsIGlubGVuXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgaWYgcmVzID09IDAgYW5kIGlzaW5zdGFuY2Uoc2VsZi5fbW9kZSwgbW9kZXMuWFRTKTpcclxuICAgICAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIkluIFhUUyBtb2RlIHlvdSBtdXN0IHN1cHBseSBhdCBsZWFzdCBhIGZ1bGwgYmxvY2sgaW4gdGhlICJcclxuICAgICAgICAgICAgICAgICAgICAiZmlyc3QgdXBkYXRlIGNhbGwuIEZvciBBRVMgdGhpcyBpcyAxNiBieXRlcy4iXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgICAgICAgICBkYXRhX3Byb2Nlc3NlZCArPSBpbmxlblxyXG4gICAgICAgICAgICB0b3RhbF9vdXQgKz0gb3V0bGVuWzBdXHJcblxyXG4gICAgICAgIHJldHVybiB0b3RhbF9vdXRcclxuXHJcbiAgICBkZWYgZmluYWxpemUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBzZWxmLl9vcGVyYXRpb24gPT0gc2VsZi5fREVDUllQVFxyXG4gICAgICAgICAgICBhbmQgaXNpbnN0YW5jZShzZWxmLl9tb2RlLCBtb2Rlcy5Nb2RlV2l0aEF1dGhlbnRpY2F0aW9uVGFnKVxyXG4gICAgICAgICAgICBhbmQgc2VsZi50YWcgaXMgTm9uZVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiQXV0aGVudGljYXRpb24gdGFnIG11c3QgYmUgcHJvdmlkZWQgd2hlbiBkZWNyeXB0aW5nLiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCBzZWxmLl9ibG9ja19zaXplX2J5dGVzKVxyXG4gICAgICAgIG91dGxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoImludCAqIilcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NpcGhlckZpbmFsX2V4KHNlbGYuX2N0eCwgYnVmLCBvdXRsZW4pXHJcbiAgICAgICAgaWYgcmVzID09IDA6XHJcbiAgICAgICAgICAgIGVycm9ycyA9IHNlbGYuX2JhY2tlbmQuX2NvbnN1bWVfZXJyb3JzKClcclxuXHJcbiAgICAgICAgICAgIGlmIG5vdCBlcnJvcnMgYW5kIGlzaW5zdGFuY2Uoc2VsZi5fbW9kZSwgbW9kZXMuR0NNKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIEludmFsaWRUYWdcclxuXHJcbiAgICAgICAgICAgIGxpYiA9IHNlbGYuX2JhY2tlbmQuX2xpYlxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KFxyXG4gICAgICAgICAgICAgICAgZXJyb3JzWzBdLl9saWJfcmVhc29uX21hdGNoKFxyXG4gICAgICAgICAgICAgICAgICAgIGxpYi5FUlJfTElCX0VWUCxcclxuICAgICAgICAgICAgICAgICAgICBsaWIuRVZQX1JfREFUQV9OT1RfTVVMVElQTEVfT0ZfQkxPQ0tfTEVOR1RILFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgb3IgKFxyXG4gICAgICAgICAgICAgICAgICAgIGxpYi5DcnlwdG9ncmFwaHlfSEFTX1BST1ZJREVSU1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZCBlcnJvcnNbMF0uX2xpYl9yZWFzb25fbWF0Y2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpYi5FUlJfTElCX1BST1YsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpYi5QUk9WX1JfV1JPTkdfRklOQUxfQkxPQ0tfTEVOR1RILFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIG9yIChcclxuICAgICAgICAgICAgICAgICAgICBsaWIuQ1JZUFRPR1JBUEhZX0lTX0JPUklOR1NTTFxyXG4gICAgICAgICAgICAgICAgICAgIGFuZCBlcnJvcnNbMF0ucmVhc29uXHJcbiAgICAgICAgICAgICAgICAgICAgPT0gbGliLkNJUEhFUl9SX0RBVEFfTk9UX01VTFRJUExFX09GX0JMT0NLX0xFTkdUSFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIGVycm9ycz1lcnJvcnMsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJUaGUgbGVuZ3RoIG9mIHRoZSBwcm92aWRlZCBkYXRhIGlzIG5vdCBhIG11bHRpcGxlIG9mICJcclxuICAgICAgICAgICAgICAgICJ0aGUgYmxvY2sgbGVuZ3RoLiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGlzaW5zdGFuY2Uoc2VsZi5fbW9kZSwgbW9kZXMuR0NNKVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5fb3BlcmF0aW9uID09IHNlbGYuX0VOQ1JZUFRcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICB0YWdfYnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldyhcclxuICAgICAgICAgICAgICAgICJ1bnNpZ25lZCBjaGFyW10iLCBzZWxmLl9ibG9ja19zaXplX2J5dGVzXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfQ1RYX2N0cmwoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9jdHgsXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NUUkxfQUVBRF9HRVRfVEFHLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fYmxvY2tfc2l6ZV9ieXRlcyxcclxuICAgICAgICAgICAgICAgIHRhZ19idWYsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuICAgICAgICAgICAgc2VsZi5fdGFnID0gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcih0YWdfYnVmKVs6XVxyXG5cclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NJUEhFUl9DVFhfcmVzZXQoc2VsZi5fY3R4KVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX2ZmaS5idWZmZXIoYnVmKVs6IG91dGxlblswXV1cclxuXHJcbiAgICBkZWYgZmluYWxpemVfd2l0aF90YWcoc2VsZiwgdGFnOiBieXRlcykgLT4gYnl0ZXM6XHJcbiAgICAgICAgdGFnX2xlbiA9IGxlbih0YWcpXHJcbiAgICAgICAgaWYgdGFnX2xlbiA8IHNlbGYuX21vZGUuX21pbl90YWdfbGVuZ3RoOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkF1dGhlbnRpY2F0aW9uIHRhZyBtdXN0IGJlIHt9IGJ5dGVzIG9yIGxvbmdlci4iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9tb2RlLl9taW5fdGFnX2xlbmd0aFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxpZiB0YWdfbGVuID4gc2VsZi5fYmxvY2tfc2l6ZV9ieXRlczpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJBdXRoZW50aWNhdGlvbiB0YWcgY2Fubm90IGJlIG1vcmUgdGhhbiB7fSBieXRlcy4iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9ibG9ja19zaXplX2J5dGVzXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NJUEhFUl9DVFhfY3RybChcclxuICAgICAgICAgICAgc2VsZi5fY3R4LCBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NUUkxfQUVBRF9TRVRfVEFHLCBsZW4odGFnKSwgdGFnXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICAgICAgc2VsZi5fdGFnID0gdGFnXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuZmluYWxpemUoKVxyXG5cclxuICAgIGRlZiBhdXRoZW50aWNhdGVfYWRkaXRpb25hbF9kYXRhKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIG91dGxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoImludCAqIilcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0NpcGhlclVwZGF0ZShcclxuICAgICAgICAgICAgc2VsZi5fY3R4LFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgb3V0bGVuLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuZnJvbV9idWZmZXIoZGF0YSksXHJcbiAgICAgICAgICAgIGxlbihkYXRhKSxcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB0YWcoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW2J5dGVzXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdGFnXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvY2lwaGVycy9hbGdvcml0aG1zLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5jaXBoZXJzIGltcG9ydCAoXHJcbiAgICBCbG9ja0NpcGhlckFsZ29yaXRobSxcclxuICAgIENpcGhlckFsZ29yaXRobSxcclxuKVxyXG5cclxuXHJcbmRlZiBfdmVyaWZ5X2tleV9zaXplKGFsZ29yaXRobTogQ2lwaGVyQWxnb3JpdGhtLCBrZXk6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgICMgVmVyaWZ5IHRoYXQgdGhlIGtleSBpcyBpbnN0YW5jZSBvZiBieXRlc1xyXG4gICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgia2V5Iiwga2V5KVxyXG5cclxuICAgICMgVmVyaWZ5IHRoYXQgdGhlIGtleSBzaXplIG1hdGNoZXMgdGhlIGV4cGVjdGVkIGtleSBzaXplXHJcbiAgICBpZiBsZW4oa2V5KSAqIDggbm90IGluIGFsZ29yaXRobS5rZXlfc2l6ZXM6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgIkludmFsaWQga2V5IHNpemUgKHt9KSBmb3Ige30uIi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICBsZW4oa2V5KSAqIDgsIGFsZ29yaXRobS5uYW1lXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApXHJcbiAgICByZXR1cm4ga2V5XHJcblxyXG5cclxuY2xhc3MgQUVTKENpcGhlckFsZ29yaXRobSwgQmxvY2tDaXBoZXJBbGdvcml0aG0pOlxyXG4gICAgbmFtZSA9ICJBRVMiXHJcbiAgICBibG9ja19zaXplID0gMTI4XHJcbiAgICAjIDUxMiBhZGRlZCB0byBzdXBwb3J0IEFFUy0yNTYtWFRTLCB3aGljaCB1c2VzIDUxMi1iaXQga2V5c1xyXG4gICAga2V5X3NpemVzID0gZnJvemVuc2V0KFsxMjgsIDE5MiwgMjU2LCA1MTJdKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBrZXk6IGJ5dGVzKTpcclxuICAgICAgICBzZWxmLmtleSA9IF92ZXJpZnlfa2V5X3NpemUoc2VsZiwga2V5KVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYua2V5KSAqIDhcclxuXHJcblxyXG5jbGFzcyBDYW1lbGxpYShDaXBoZXJBbGdvcml0aG0sIEJsb2NrQ2lwaGVyQWxnb3JpdGhtKTpcclxuICAgIG5hbWUgPSAiY2FtZWxsaWEiXHJcbiAgICBibG9ja19zaXplID0gMTI4XHJcbiAgICBrZXlfc2l6ZXMgPSBmcm96ZW5zZXQoWzEyOCwgMTkyLCAyNTZdKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBrZXk6IGJ5dGVzKTpcclxuICAgICAgICBzZWxmLmtleSA9IF92ZXJpZnlfa2V5X3NpemUoc2VsZiwga2V5KVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYua2V5KSAqIDhcclxuXHJcblxyXG5jbGFzcyBUcmlwbGVERVMoQ2lwaGVyQWxnb3JpdGhtLCBCbG9ja0NpcGhlckFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gIjNERVMiXHJcbiAgICBibG9ja19zaXplID0gNjRcclxuICAgIGtleV9zaXplcyA9IGZyb3plbnNldChbNjQsIDEyOCwgMTkyXSlcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwga2V5OiBieXRlcyk6XHJcbiAgICAgICAgaWYgbGVuKGtleSkgPT0gODpcclxuICAgICAgICAgICAga2V5ICs9IGtleSArIGtleVxyXG4gICAgICAgIGVsaWYgbGVuKGtleSkgPT0gMTY6XHJcbiAgICAgICAgICAgIGtleSArPSBrZXlbOjhdXHJcbiAgICAgICAgc2VsZi5rZXkgPSBfdmVyaWZ5X2tleV9zaXplKHNlbGYsIGtleSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmtleSkgKiA4XHJcblxyXG5cclxuY2xhc3MgQmxvd2Zpc2goQ2lwaGVyQWxnb3JpdGhtLCBCbG9ja0NpcGhlckFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gIkJsb3dmaXNoIlxyXG4gICAgYmxvY2tfc2l6ZSA9IDY0XHJcbiAgICBrZXlfc2l6ZXMgPSBmcm96ZW5zZXQocmFuZ2UoMzIsIDQ0OSwgOCkpXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGtleTogYnl0ZXMpOlxyXG4gICAgICAgIHNlbGYua2V5ID0gX3ZlcmlmeV9rZXlfc2l6ZShzZWxmLCBrZXkpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5rZXkpICogOFxyXG5cclxuXHJcbl9CbG93ZmlzaEludGVybmFsID0gQmxvd2Zpc2hcclxudXRpbHMuZGVwcmVjYXRlZChcclxuICAgIEJsb3dmaXNoLFxyXG4gICAgX19uYW1lX18sXHJcbiAgICAiQmxvd2Zpc2ggaGFzIGJlZW4gZGVwcmVjYXRlZCIsXHJcbiAgICB1dGlscy5EZXByZWNhdGVkSW4zNyxcclxuICAgIG5hbWU9IkJsb3dmaXNoIixcclxuKVxyXG5cclxuXHJcbmNsYXNzIENBU1Q1KENpcGhlckFsZ29yaXRobSwgQmxvY2tDaXBoZXJBbGdvcml0aG0pOlxyXG4gICAgbmFtZSA9ICJDQVNUNSJcclxuICAgIGJsb2NrX3NpemUgPSA2NFxyXG4gICAga2V5X3NpemVzID0gZnJvemVuc2V0KHJhbmdlKDQwLCAxMjksIDgpKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBrZXk6IGJ5dGVzKTpcclxuICAgICAgICBzZWxmLmtleSA9IF92ZXJpZnlfa2V5X3NpemUoc2VsZiwga2V5KVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKHNlbGYua2V5KSAqIDhcclxuXHJcblxyXG5fQ0FTVDVJbnRlcm5hbCA9IENBU1Q1XHJcbnV0aWxzLmRlcHJlY2F0ZWQoXHJcbiAgICBDQVNUNSxcclxuICAgIF9fbmFtZV9fLFxyXG4gICAgIkNBU1Q1IGhhcyBiZWVuIGRlcHJlY2F0ZWQiLFxyXG4gICAgdXRpbHMuRGVwcmVjYXRlZEluMzcsXHJcbiAgICBuYW1lPSJDQVNUNSIsXHJcbilcclxuXHJcblxyXG5jbGFzcyBBUkM0KENpcGhlckFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gIlJDNCJcclxuICAgIGtleV9zaXplcyA9IGZyb3plbnNldChbNDAsIDU2LCA2NCwgODAsIDEyOCwgMTYwLCAxOTIsIDI1Nl0pXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGtleTogYnl0ZXMpOlxyXG4gICAgICAgIHNlbGYua2V5ID0gX3ZlcmlmeV9rZXlfc2l6ZShzZWxmLCBrZXkpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5rZXkpICogOFxyXG5cclxuXHJcbmNsYXNzIElERUEoQ2lwaGVyQWxnb3JpdGhtLCBCbG9ja0NpcGhlckFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gIklERUEiXHJcbiAgICBibG9ja19zaXplID0gNjRcclxuICAgIGtleV9zaXplcyA9IGZyb3plbnNldChbMTI4XSlcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwga2V5OiBieXRlcyk6XHJcbiAgICAgICAgc2VsZi5rZXkgPSBfdmVyaWZ5X2tleV9zaXplKHNlbGYsIGtleSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmtleSkgKiA4XHJcblxyXG5cclxuX0lERUFJbnRlcm5hbCA9IElERUFcclxudXRpbHMuZGVwcmVjYXRlZChcclxuICAgIElERUEsXHJcbiAgICBfX25hbWVfXyxcclxuICAgICJJREVBIGhhcyBiZWVuIGRlcHJlY2F0ZWQiLFxyXG4gICAgdXRpbHMuRGVwcmVjYXRlZEluMzcsXHJcbiAgICBuYW1lPSJJREVBIixcclxuKVxyXG5cclxuXHJcbmNsYXNzIFNFRUQoQ2lwaGVyQWxnb3JpdGhtLCBCbG9ja0NpcGhlckFsZ29yaXRobSk6XHJcbiAgICBuYW1lID0gIlNFRUQiXHJcbiAgICBibG9ja19zaXplID0gMTI4XHJcbiAgICBrZXlfc2l6ZXMgPSBmcm96ZW5zZXQoWzEyOF0pXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGtleTogYnl0ZXMpOlxyXG4gICAgICAgIHNlbGYua2V5ID0gX3ZlcmlmeV9rZXlfc2l6ZShzZWxmLCBrZXkpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5rZXkpICogOFxyXG5cclxuXHJcbl9TRUVESW50ZXJuYWwgPSBTRUVEXHJcbnV0aWxzLmRlcHJlY2F0ZWQoXHJcbiAgICBTRUVELFxyXG4gICAgX19uYW1lX18sXHJcbiAgICAiU0VFRCBoYXMgYmVlbiBkZXByZWNhdGVkIixcclxuICAgIHV0aWxzLkRlcHJlY2F0ZWRJbjM3LFxyXG4gICAgbmFtZT0iU0VFRCIsXHJcbilcclxuXHJcblxyXG5jbGFzcyBDaGFDaGEyMChDaXBoZXJBbGdvcml0aG0pOlxyXG4gICAgbmFtZSA9ICJDaGFDaGEyMCJcclxuICAgIGtleV9zaXplcyA9IGZyb3plbnNldChbMjU2XSlcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwga2V5OiBieXRlcywgbm9uY2U6IGJ5dGVzKTpcclxuICAgICAgICBzZWxmLmtleSA9IF92ZXJpZnlfa2V5X3NpemUoc2VsZiwga2V5KVxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoIm5vbmNlIiwgbm9uY2UpXHJcblxyXG4gICAgICAgIGlmIGxlbihub25jZSkgIT0gMTY6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm5vbmNlIG11c3QgYmUgMTI4LWJpdHMgKDE2IGJ5dGVzKSIpXHJcblxyXG4gICAgICAgIHNlbGYuX25vbmNlID0gbm9uY2VcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBub25jZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fbm9uY2VcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGxlbihzZWxmLmtleSkgKiA4XHJcblxyXG5cclxuY2xhc3MgU000KENpcGhlckFsZ29yaXRobSwgQmxvY2tDaXBoZXJBbGdvcml0aG0pOlxyXG4gICAgbmFtZSA9ICJTTTQiXHJcbiAgICBibG9ja19zaXplID0gMTI4XHJcbiAgICBrZXlfc2l6ZXMgPSBmcm96ZW5zZXQoWzEyOF0pXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGtleTogYnl0ZXMpOlxyXG4gICAgICAgIHNlbGYua2V5ID0gX3ZlcmlmeV9rZXlfc2l6ZShzZWxmLCBrZXkpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5rZXkpICogOFxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L3g1MDkvZXh0ZW5zaW9ucy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgYWJjXHJcbmltcG9ydCBkYXRldGltZVxyXG5pbXBvcnQgaGFzaGxpYlxyXG5pbXBvcnQgaXBhZGRyZXNzXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmluZGluZ3MuX3J1c3QgaW1wb3J0IGFzbjFcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJpbmRpbmdzLl9ydXN0IGltcG9ydCB4NTA5IGFzIHJ1c3RfeDUwOVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgY29uc3RhbnRfdGltZSwgc2VyaWFsaXphdGlvblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljLmVjIGltcG9ydCBFbGxpcHRpY0N1cnZlUHVibGljS2V5XHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMucnNhIGltcG9ydCBSU0FQdWJsaWNLZXlcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYy50eXBlcyBpbXBvcnQgKFxyXG4gICAgQ0VSVElGSUNBVEVfSVNTVUVSX1BVQkxJQ19LRVlfVFlQRVMsXHJcbiAgICBDRVJUSUZJQ0FURV9QVUJMSUNfS0VZX1RZUEVTLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lng1MDkuY2VydGlmaWNhdGVfdHJhbnNwYXJlbmN5IGltcG9ydCAoXHJcbiAgICBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcCxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5LmdlbmVyYWxfbmFtZSBpbXBvcnQgKFxyXG4gICAgRE5TTmFtZSxcclxuICAgIERpcmVjdG9yeU5hbWUsXHJcbiAgICBHZW5lcmFsTmFtZSxcclxuICAgIElQQWRkcmVzcyxcclxuICAgIE90aGVyTmFtZSxcclxuICAgIFJGQzgyMk5hbWUsXHJcbiAgICBSZWdpc3RlcmVkSUQsXHJcbiAgICBVbmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyLFxyXG4gICAgX0lQQUREUkVTU19UWVBFUyxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5Lm5hbWUgaW1wb3J0IE5hbWUsIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVcclxuZnJvbSBjcnlwdG9ncmFwaHkueDUwOS5vaWQgaW1wb3J0IChcclxuICAgIENSTEVudHJ5RXh0ZW5zaW9uT0lELFxyXG4gICAgRXh0ZW5zaW9uT0lELFxyXG4gICAgT0NTUEV4dGVuc2lvbk9JRCxcclxuICAgIE9iamVjdElkZW50aWZpZXIsXHJcbilcclxuXHJcbkV4dGVuc2lvblR5cGVWYXIgPSB0eXBpbmcuVHlwZVZhcihcclxuICAgICJFeHRlbnNpb25UeXBlVmFyIiwgYm91bmQ9IkV4dGVuc2lvblR5cGUiLCBjb3ZhcmlhbnQ9VHJ1ZVxyXG4pXHJcblxyXG5cclxuZGVmIF9rZXlfaWRlbnRpZmllcl9mcm9tX3B1YmxpY19rZXkoXHJcbiAgICBwdWJsaWNfa2V5OiBDRVJUSUZJQ0FURV9QVUJMSUNfS0VZX1RZUEVTLFxyXG4pIC0+IGJ5dGVzOlxyXG4gICAgaWYgaXNpbnN0YW5jZShwdWJsaWNfa2V5LCBSU0FQdWJsaWNLZXkpOlxyXG4gICAgICAgIGRhdGEgPSBwdWJsaWNfa2V5LnB1YmxpY19ieXRlcyhcclxuICAgICAgICAgICAgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5ERVIsXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LlBLQ1MxLFxyXG4gICAgICAgIClcclxuICAgIGVsaWYgaXNpbnN0YW5jZShwdWJsaWNfa2V5LCBFbGxpcHRpY0N1cnZlUHVibGljS2V5KTpcclxuICAgICAgICBkYXRhID0gcHVibGljX2tleS5wdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuWDk2MixcclxuICAgICAgICAgICAgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuVW5jb21wcmVzc2VkUG9pbnQsXHJcbiAgICAgICAgKVxyXG4gICAgZWxzZTpcclxuICAgICAgICAjIFRoaXMgaXMgYSB2ZXJ5IHNsb3cgd2F5IHRvIGRvIHRoaXMuXHJcbiAgICAgICAgc2VyaWFsaXplZCA9IHB1YmxpY19rZXkucHVibGljX2J5dGVzKFxyXG4gICAgICAgICAgICBzZXJpYWxpemF0aW9uLkVuY29kaW5nLkRFUixcclxuICAgICAgICAgICAgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuU3ViamVjdFB1YmxpY0tleUluZm8sXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGRhdGEgPSBhc24xLnBhcnNlX3Nwa2lfZm9yX2RhdGEoc2VyaWFsaXplZClcclxuXHJcbiAgICByZXR1cm4gaGFzaGxpYi5zaGExKGRhdGEpLmRpZ2VzdCgpXHJcblxyXG5cclxuZGVmIF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoZmllbGRfbmFtZTogc3RyKTpcclxuICAgIGRlZiBsZW5fbWV0aG9kKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gbGVuKGdldGF0dHIoc2VsZiwgZmllbGRfbmFtZSkpXHJcblxyXG4gICAgZGVmIGl0ZXJfbWV0aG9kKHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBpdGVyKGdldGF0dHIoc2VsZiwgZmllbGRfbmFtZSkpXHJcblxyXG4gICAgZGVmIGdldGl0ZW1fbWV0aG9kKHNlbGYsIGlkeCk6XHJcbiAgICAgICAgcmV0dXJuIGdldGF0dHIoc2VsZiwgZmllbGRfbmFtZSlbaWR4XVxyXG5cclxuICAgIHJldHVybiBsZW5fbWV0aG9kLCBpdGVyX21ldGhvZCwgZ2V0aXRlbV9tZXRob2RcclxuXHJcblxyXG5jbGFzcyBEdXBsaWNhdGVFeHRlbnNpb24oRXhjZXB0aW9uKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtc2c6IHN0ciwgb2lkOiBPYmplY3RJZGVudGlmaWVyKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKER1cGxpY2F0ZUV4dGVuc2lvbiwgc2VsZikuX19pbml0X18obXNnKVxyXG4gICAgICAgIHNlbGYub2lkID0gb2lkXHJcblxyXG5cclxuY2xhc3MgRXh0ZW5zaW9uTm90Rm91bmQoRXhjZXB0aW9uKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBtc2c6IHN0ciwgb2lkOiBPYmplY3RJZGVudGlmaWVyKSAtPiBOb25lOlxyXG4gICAgICAgIHN1cGVyKEV4dGVuc2lvbk5vdEZvdW5kLCBzZWxmKS5fX2luaXRfXyhtc2cpXHJcbiAgICAgICAgc2VsZi5vaWQgPSBvaWRcclxuXHJcblxyXG5jbGFzcyBFeHRlbnNpb25UeXBlKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBvaWQ6IHR5cGluZy5DbGFzc1ZhcltPYmplY3RJZGVudGlmaWVyXVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgU2VyaWFsaXplcyB0aGUgZXh0ZW5zaW9uIHR5cGUgdG8gREVSLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJhaXNlIE5vdEltcGxlbWVudGVkRXJyb3IoXHJcbiAgICAgICAgICAgICJwdWJsaWNfYnl0ZXMgaXMgbm90IGltcGxlbWVudGVkIGZvciBleHRlbnNpb24gdHlwZSB7MCFyfSIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgc2VsZlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIEV4dGVuc2lvbnM6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgZXh0ZW5zaW9uczogdHlwaW5nLkl0ZXJhYmxlWyJFeHRlbnNpb25bRXh0ZW5zaW9uVHlwZV0iXVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2V4dGVuc2lvbnMgPSBsaXN0KGV4dGVuc2lvbnMpXHJcblxyXG4gICAgZGVmIGdldF9leHRlbnNpb25fZm9yX29pZChcclxuICAgICAgICBzZWxmLCBvaWQ6IE9iamVjdElkZW50aWZpZXJcclxuICAgICkgLT4gIkV4dGVuc2lvbltFeHRlbnNpb25UeXBlXSI6XHJcbiAgICAgICAgZm9yIGV4dCBpbiBzZWxmOlxyXG4gICAgICAgICAgICBpZiBleHQub2lkID09IG9pZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBleHRcclxuXHJcbiAgICAgICAgcmFpc2UgRXh0ZW5zaW9uTm90Rm91bmQoIk5vIHt9IGV4dGVuc2lvbiB3YXMgZm91bmQiLmZvcm1hdChvaWQpLCBvaWQpXHJcblxyXG4gICAgZGVmIGdldF9leHRlbnNpb25fZm9yX2NsYXNzKFxyXG4gICAgICAgIHNlbGYsIGV4dGNsYXNzOiB0eXBpbmcuVHlwZVtFeHRlbnNpb25UeXBlVmFyXVxyXG4gICAgKSAtPiAiRXh0ZW5zaW9uW0V4dGVuc2lvblR5cGVWYXJdIjpcclxuICAgICAgICBpZiBleHRjbGFzcyBpcyBVbnJlY29nbml6ZWRFeHRlbnNpb246XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJVbnJlY29nbml6ZWRFeHRlbnNpb24gY2FuXCd0IGJlIHVzZWQgd2l0aCAiXHJcbiAgICAgICAgICAgICAgICAiZ2V0X2V4dGVuc2lvbl9mb3JfY2xhc3MgYmVjYXVzZSBtb3JlIHRoYW4gb25lIGluc3RhbmNlIG9mIHRoZSJcclxuICAgICAgICAgICAgICAgICIgY2xhc3MgbWF5IGJlIHByZXNlbnQuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGZvciBleHQgaW4gc2VsZjpcclxuICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShleHQudmFsdWUsIGV4dGNsYXNzKTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBleHRcclxuXHJcbiAgICAgICAgcmFpc2UgRXh0ZW5zaW9uTm90Rm91bmQoXHJcbiAgICAgICAgICAgICJObyB7fSBleHRlbnNpb24gd2FzIGZvdW5kIi5mb3JtYXQoZXh0Y2xhc3MpLCBleHRjbGFzcy5vaWRcclxuICAgICAgICApXHJcblxyXG4gICAgX19sZW5fXywgX19pdGVyX18sIF9fZ2V0aXRlbV9fID0gX21ha2Vfc2VxdWVuY2VfbWV0aG9kcygiX2V4dGVuc2lvbnMiKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8RXh0ZW5zaW9ucyh7fSk+Ii5mb3JtYXQoc2VsZi5fZXh0ZW5zaW9ucylcclxuXHJcblxyXG5jbGFzcyBDUkxOdW1iZXIoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuQ1JMX05VTUJFUlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjcmxfbnVtYmVyOiBpbnQpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY3JsX251bWJlciwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjcmxfbnVtYmVyIG11c3QgYmUgYW4gaW50ZWdlciIpXHJcblxyXG4gICAgICAgIHNlbGYuX2NybF9udW1iZXIgPSBjcmxfbnVtYmVyXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBDUkxOdW1iZXIpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuY3JsX251bWJlciA9PSBvdGhlci5jcmxfbnVtYmVyXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChzZWxmLmNybF9udW1iZXIpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxDUkxOdW1iZXIoe30pPiIuZm9ybWF0KHNlbGYuY3JsX251bWJlcilcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjcmxfbnVtYmVyKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY3JsX251bWJlclxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgQXV0aG9yaXR5S2V5SWRlbnRpZmllcihFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5BVVRIT1JJVFlfS0VZX0lERU5USUZJRVJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBrZXlfaWRlbnRpZmllcjogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgICAgICBhdXRob3JpdHlfY2VydF9pc3N1ZXI6IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuSXRlcmFibGVbR2VuZXJhbE5hbWVdXSxcclxuICAgICAgICBhdXRob3JpdHlfY2VydF9zZXJpYWxfbnVtYmVyOiB0eXBpbmcuT3B0aW9uYWxbaW50XSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiAoYXV0aG9yaXR5X2NlcnRfaXNzdWVyIGlzIE5vbmUpICE9IChcclxuICAgICAgICAgICAgYXV0aG9yaXR5X2NlcnRfc2VyaWFsX251bWJlciBpcyBOb25lXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJhdXRob3JpdHlfY2VydF9pc3N1ZXIgYW5kIGF1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXIgIlxyXG4gICAgICAgICAgICAgICAgIm11c3QgYm90aCBiZSBwcmVzZW50IG9yIGJvdGggTm9uZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBhdXRob3JpdHlfY2VydF9pc3N1ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGF1dGhvcml0eV9jZXJ0X2lzc3VlciA9IGxpc3QoYXV0aG9yaXR5X2NlcnRfaXNzdWVyKVxyXG4gICAgICAgICAgICBpZiBub3QgYWxsKFxyXG4gICAgICAgICAgICAgICAgaXNpbnN0YW5jZSh4LCBHZW5lcmFsTmFtZSkgZm9yIHggaW4gYXV0aG9yaXR5X2NlcnRfaXNzdWVyXHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgImF1dGhvcml0eV9jZXJ0X2lzc3VlciBtdXN0IGJlIGEgbGlzdCBvZiBHZW5lcmFsTmFtZSAiXHJcbiAgICAgICAgICAgICAgICAgICAgIm9iamVjdHMiXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIGF1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXIgaXMgbm90IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICBhdXRob3JpdHlfY2VydF9zZXJpYWxfbnVtYmVyLCBpbnRcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImF1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXIgbXVzdCBiZSBhbiBpbnRlZ2VyIilcclxuXHJcbiAgICAgICAgc2VsZi5fa2V5X2lkZW50aWZpZXIgPSBrZXlfaWRlbnRpZmllclxyXG4gICAgICAgIHNlbGYuX2F1dGhvcml0eV9jZXJ0X2lzc3VlciA9IGF1dGhvcml0eV9jZXJ0X2lzc3VlclxyXG4gICAgICAgIHNlbGYuX2F1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXIgPSBhdXRob3JpdHlfY2VydF9zZXJpYWxfbnVtYmVyXHJcblxyXG4gICAgIyBUaGlzIHRha2VzIGEgc3Vic2V0IG9mIENFUlRJRklDQVRFX1BVQkxJQ19LRVlfVFlQRVMgYmVjYXVzZSBhbiBpc3N1ZXJcclxuICAgICMgY2Fubm90IGhhdmUgYW4gWDI1NTE5L1g0NDgga2V5LiBUaGlzIGludHJvZHVjZXMgc29tZSB1bmZvcnR1bmF0ZVxyXG4gICAgIyBhc3ltbWV0cnkgdGhhdCByZXF1aXJlcyB0eXBpbmcgdXNlcnMgdG8gZXhwbGljaXRseVxyXG4gICAgIyBuYXJyb3cgdGhlaXIgdHlwZSwgYnV0IHdlIHNob3VsZCBtYWtlIHRoaXMgYWNjdXJhdGUgYW5kIG5vdCBqdXN0XHJcbiAgICAjIGNvbnZlbmllbnQuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBmcm9tX2lzc3Vlcl9wdWJsaWNfa2V5KFxyXG4gICAgICAgIGNscywgcHVibGljX2tleTogQ0VSVElGSUNBVEVfSVNTVUVSX1BVQkxJQ19LRVlfVFlQRVNcclxuICAgICkgLT4gIkF1dGhvcml0eUtleUlkZW50aWZpZXIiOlxyXG4gICAgICAgIGRpZ2VzdCA9IF9rZXlfaWRlbnRpZmllcl9mcm9tX3B1YmxpY19rZXkocHVibGljX2tleSlcclxuICAgICAgICByZXR1cm4gY2xzKFxyXG4gICAgICAgICAgICBrZXlfaWRlbnRpZmllcj1kaWdlc3QsXHJcbiAgICAgICAgICAgIGF1dGhvcml0eV9jZXJ0X2lzc3Vlcj1Ob25lLFxyXG4gICAgICAgICAgICBhdXRob3JpdHlfY2VydF9zZXJpYWxfbnVtYmVyPU5vbmUsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGZyb21faXNzdWVyX3N1YmplY3Rfa2V5X2lkZW50aWZpZXIoXHJcbiAgICAgICAgY2xzLCBza2k6ICJTdWJqZWN0S2V5SWRlbnRpZmllciJcclxuICAgICkgLT4gIkF1dGhvcml0eUtleUlkZW50aWZpZXIiOlxyXG4gICAgICAgIHJldHVybiBjbHMoXHJcbiAgICAgICAgICAgIGtleV9pZGVudGlmaWVyPXNraS5kaWdlc3QsXHJcbiAgICAgICAgICAgIGF1dGhvcml0eV9jZXJ0X2lzc3Vlcj1Ob25lLFxyXG4gICAgICAgICAgICBhdXRob3JpdHlfY2VydF9zZXJpYWxfbnVtYmVyPU5vbmUsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIjxBdXRob3JpdHlLZXlJZGVudGlmaWVyKGtleV9pZGVudGlmaWVyPXswLmtleV9pZGVudGlmaWVyIXJ9LCAiXHJcbiAgICAgICAgICAgICJhdXRob3JpdHlfY2VydF9pc3N1ZXI9ezAuYXV0aG9yaXR5X2NlcnRfaXNzdWVyfSwgIlxyXG4gICAgICAgICAgICAiYXV0aG9yaXR5X2NlcnRfc2VyaWFsX251bWJlcj17MC5hdXRob3JpdHlfY2VydF9zZXJpYWxfbnVtYmVyfSJcclxuICAgICAgICAgICAgIik+Ii5mb3JtYXQoc2VsZilcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBBdXRob3JpdHlLZXlJZGVudGlmaWVyKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYua2V5X2lkZW50aWZpZXIgPT0gb3RoZXIua2V5X2lkZW50aWZpZXJcclxuICAgICAgICAgICAgYW5kIHNlbGYuYXV0aG9yaXR5X2NlcnRfaXNzdWVyID09IG90aGVyLmF1dGhvcml0eV9jZXJ0X2lzc3VlclxyXG4gICAgICAgICAgICBhbmQgc2VsZi5hdXRob3JpdHlfY2VydF9zZXJpYWxfbnVtYmVyXHJcbiAgICAgICAgICAgID09IG90aGVyLmF1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXJcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICBpZiBzZWxmLmF1dGhvcml0eV9jZXJ0X2lzc3VlciBpcyBOb25lOlxyXG4gICAgICAgICAgICBhY2kgPSBOb25lXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYWNpID0gdHVwbGUoc2VsZi5hdXRob3JpdHlfY2VydF9pc3N1ZXIpXHJcbiAgICAgICAgcmV0dXJuIGhhc2goXHJcbiAgICAgICAgICAgIChzZWxmLmtleV9pZGVudGlmaWVyLCBhY2ksIHNlbGYuYXV0aG9yaXR5X2NlcnRfc2VyaWFsX251bWJlcilcclxuICAgICAgICApXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X2lkZW50aWZpZXIoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW2J5dGVzXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fa2V5X2lkZW50aWZpZXJcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBhdXRob3JpdHlfY2VydF9pc3N1ZXIoXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5MaXN0W0dlbmVyYWxOYW1lXV06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2F1dGhvcml0eV9jZXJ0X2lzc3VlclxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGF1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXIoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2F1dGhvcml0eV9jZXJ0X3NlcmlhbF9udW1iZXJcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIFN1YmplY3RLZXlJZGVudGlmaWVyKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELlNVQkpFQ1RfS0VZX0lERU5USUZJRVJcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZGlnZXN0OiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9kaWdlc3QgPSBkaWdlc3RcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBmcm9tX3B1YmxpY19rZXkoXHJcbiAgICAgICAgY2xzLCBwdWJsaWNfa2V5OiBDRVJUSUZJQ0FURV9QVUJMSUNfS0VZX1RZUEVTXHJcbiAgICApIC0+ICJTdWJqZWN0S2V5SWRlbnRpZmllciI6XHJcbiAgICAgICAgcmV0dXJuIGNscyhfa2V5X2lkZW50aWZpZXJfZnJvbV9wdWJsaWNfa2V5KHB1YmxpY19rZXkpKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGRpZ2VzdChzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZGlnZXN0XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X2lkZW50aWZpZXIoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2RpZ2VzdFxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8U3ViamVjdEtleUlkZW50aWZpZXIoZGlnZXN0PXswIXJ9KT4iLmZvcm1hdChzZWxmLmRpZ2VzdClcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFN1YmplY3RLZXlJZGVudGlmaWVyKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBjb25zdGFudF90aW1lLmJ5dGVzX2VxKHNlbGYuZGlnZXN0LCBvdGhlci5kaWdlc3QpXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChzZWxmLmRpZ2VzdClcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIEF1dGhvcml0eUluZm9ybWF0aW9uQWNjZXNzKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELkFVVEhPUklUWV9JTkZPUk1BVElPTl9BQ0NFU1NcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgZGVzY3JpcHRpb25zOiB0eXBpbmcuSXRlcmFibGVbIkFjY2Vzc0Rlc2NyaXB0aW9uIl1cclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBkZXNjcmlwdGlvbnMgPSBsaXN0KGRlc2NyaXB0aW9ucylcclxuICAgICAgICBpZiBub3QgYWxsKGlzaW5zdGFuY2UoeCwgQWNjZXNzRGVzY3JpcHRpb24pIGZvciB4IGluIGRlc2NyaXB0aW9ucyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJFdmVyeSBpdGVtIGluIHRoZSBkZXNjcmlwdGlvbnMgbGlzdCBtdXN0IGJlIGFuICJcclxuICAgICAgICAgICAgICAgICJBY2Nlc3NEZXNjcmlwdGlvbiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9kZXNjcmlwdGlvbnMgPSBkZXNjcmlwdGlvbnNcclxuXHJcbiAgICBfX2xlbl9fLCBfX2l0ZXJfXywgX19nZXRpdGVtX18gPSBfbWFrZV9zZXF1ZW5jZV9tZXRob2RzKCJfZGVzY3JpcHRpb25zIilcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPEF1dGhvcml0eUluZm9ybWF0aW9uQWNjZXNzKHt9KT4iLmZvcm1hdChzZWxmLl9kZXNjcmlwdGlvbnMpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBBdXRob3JpdHlJbmZvcm1hdGlvbkFjY2Vzcyk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fZGVzY3JpcHRpb25zID09IG90aGVyLl9kZXNjcmlwdGlvbnNcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHR1cGxlKHNlbGYuX2Rlc2NyaXB0aW9ucykpXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBTdWJqZWN0SW5mb3JtYXRpb25BY2Nlc3MoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuU1VCSkVDVF9JTkZPUk1BVElPTl9BQ0NFU1NcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgZGVzY3JpcHRpb25zOiB0eXBpbmcuSXRlcmFibGVbIkFjY2Vzc0Rlc2NyaXB0aW9uIl1cclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBkZXNjcmlwdGlvbnMgPSBsaXN0KGRlc2NyaXB0aW9ucylcclxuICAgICAgICBpZiBub3QgYWxsKGlzaW5zdGFuY2UoeCwgQWNjZXNzRGVzY3JpcHRpb24pIGZvciB4IGluIGRlc2NyaXB0aW9ucyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJFdmVyeSBpdGVtIGluIHRoZSBkZXNjcmlwdGlvbnMgbGlzdCBtdXN0IGJlIGFuICJcclxuICAgICAgICAgICAgICAgICJBY2Nlc3NEZXNjcmlwdGlvbiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9kZXNjcmlwdGlvbnMgPSBkZXNjcmlwdGlvbnNcclxuXHJcbiAgICBfX2xlbl9fLCBfX2l0ZXJfXywgX19nZXRpdGVtX18gPSBfbWFrZV9zZXF1ZW5jZV9tZXRob2RzKCJfZGVzY3JpcHRpb25zIilcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFN1YmplY3RJbmZvcm1hdGlvbkFjY2Vzcyh7fSk+Ii5mb3JtYXQoc2VsZi5fZGVzY3JpcHRpb25zKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgU3ViamVjdEluZm9ybWF0aW9uQWNjZXNzKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kZXNjcmlwdGlvbnMgPT0gb3RoZXIuX2Rlc2NyaXB0aW9uc1xyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2godHVwbGUoc2VsZi5fZGVzY3JpcHRpb25zKSlcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIEFjY2Vzc0Rlc2NyaXB0aW9uOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIGFjY2Vzc19tZXRob2Q6IE9iamVjdElkZW50aWZpZXIsIGFjY2Vzc19sb2NhdGlvbjogR2VuZXJhbE5hbWVcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhY2Nlc3NfbWV0aG9kLCBPYmplY3RJZGVudGlmaWVyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJhY2Nlc3NfbWV0aG9kIG11c3QgYmUgYW4gT2JqZWN0SWRlbnRpZmllciIpXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGFjY2Vzc19sb2NhdGlvbiwgR2VuZXJhbE5hbWUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImFjY2Vzc19sb2NhdGlvbiBtdXN0IGJlIGEgR2VuZXJhbE5hbWUiKVxyXG5cclxuICAgICAgICBzZWxmLl9hY2Nlc3NfbWV0aG9kID0gYWNjZXNzX21ldGhvZFxyXG4gICAgICAgIHNlbGYuX2FjY2Vzc19sb2NhdGlvbiA9IGFjY2Vzc19sb2NhdGlvblxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIjxBY2Nlc3NEZXNjcmlwdGlvbihhY2Nlc3NfbWV0aG9kPXswLmFjY2Vzc19tZXRob2R9LCBhY2Nlc3NfbG9jYXRpIlxyXG4gICAgICAgICAgICAib249ezAuYWNjZXNzX2xvY2F0aW9ufSk+Ii5mb3JtYXQoc2VsZilcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBBY2Nlc3NEZXNjcmlwdGlvbik6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBzZWxmLmFjY2Vzc19tZXRob2QgPT0gb3RoZXIuYWNjZXNzX21ldGhvZFxyXG4gICAgICAgICAgICBhbmQgc2VsZi5hY2Nlc3NfbG9jYXRpb24gPT0gb3RoZXIuYWNjZXNzX2xvY2F0aW9uXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYuYWNjZXNzX21ldGhvZCwgc2VsZi5hY2Nlc3NfbG9jYXRpb24pKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGFjY2Vzc19tZXRob2Qoc2VsZikgLT4gT2JqZWN0SWRlbnRpZmllcjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYWNjZXNzX21ldGhvZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGFjY2Vzc19sb2NhdGlvbihzZWxmKSAtPiBHZW5lcmFsTmFtZTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYWNjZXNzX2xvY2F0aW9uXHJcblxyXG5cclxuY2xhc3MgQmFzaWNDb25zdHJhaW50cyhFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5CQVNJQ19DT05TVFJBSU5UU1xyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjYTogYm9vbCwgcGF0aF9sZW5ndGg6IHR5cGluZy5PcHRpb25hbFtpbnRdKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGNhLCBib29sKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjYSBtdXN0IGJlIGEgYm9vbGVhbiB2YWx1ZSIpXHJcblxyXG4gICAgICAgIGlmIHBhdGhfbGVuZ3RoIGlzIG5vdCBOb25lIGFuZCBub3QgY2E6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInBhdGhfbGVuZ3RoIG11c3QgYmUgTm9uZSB3aGVuIGNhIGlzIEZhbHNlIilcclxuXHJcbiAgICAgICAgaWYgcGF0aF9sZW5ndGggaXMgbm90IE5vbmUgYW5kIChcclxuICAgICAgICAgICAgbm90IGlzaW5zdGFuY2UocGF0aF9sZW5ndGgsIGludCkgb3IgcGF0aF9sZW5ndGggPCAwXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInBhdGhfbGVuZ3RoIG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlciBvciBOb25lIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2NhID0gY2FcclxuICAgICAgICBzZWxmLl9wYXRoX2xlbmd0aCA9IHBhdGhfbGVuZ3RoXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY2Eoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY2FcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwYXRoX2xlbmd0aChzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbaW50XTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcGF0aF9sZW5ndGhcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICI8QmFzaWNDb25zdHJhaW50cyhjYT17MC5jYX0sICIgInBhdGhfbGVuZ3RoPXswLnBhdGhfbGVuZ3RofSk+IlxyXG4gICAgICAgICkuZm9ybWF0KHNlbGYpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBCYXNpY0NvbnN0cmFpbnRzKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLmNhID09IG90aGVyLmNhIGFuZCBzZWxmLnBhdGhfbGVuZ3RoID09IG90aGVyLnBhdGhfbGVuZ3RoXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCgoc2VsZi5jYSwgc2VsZi5wYXRoX2xlbmd0aCkpXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBEZWx0YUNSTEluZGljYXRvcihFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5ERUxUQV9DUkxfSU5ESUNBVE9SXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNybF9udW1iZXI6IGludCkgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShjcmxfbnVtYmVyLCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNybF9udW1iZXIgbXVzdCBiZSBhbiBpbnRlZ2VyIilcclxuXHJcbiAgICAgICAgc2VsZi5fY3JsX251bWJlciA9IGNybF9udW1iZXJcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjcmxfbnVtYmVyKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY3JsX251bWJlclxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgRGVsdGFDUkxJbmRpY2F0b3IpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuY3JsX251bWJlciA9PSBvdGhlci5jcmxfbnVtYmVyXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChzZWxmLmNybF9udW1iZXIpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxEZWx0YUNSTEluZGljYXRvcihjcmxfbnVtYmVyPXswLmNybF9udW1iZXJ9KT4iLmZvcm1hdChzZWxmKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgQ1JMRGlzdHJpYnV0aW9uUG9pbnRzKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELkNSTF9ESVNUUklCVVRJT05fUE9JTlRTXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIGRpc3RyaWJ1dGlvbl9wb2ludHM6IHR5cGluZy5JdGVyYWJsZVsiRGlzdHJpYnV0aW9uUG9pbnQiXVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGRpc3RyaWJ1dGlvbl9wb2ludHMgPSBsaXN0KGRpc3RyaWJ1dGlvbl9wb2ludHMpXHJcbiAgICAgICAgaWYgbm90IGFsbChcclxuICAgICAgICAgICAgaXNpbnN0YW5jZSh4LCBEaXN0cmlidXRpb25Qb2ludCkgZm9yIHggaW4gZGlzdHJpYnV0aW9uX3BvaW50c1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJkaXN0cmlidXRpb25fcG9pbnRzIG11c3QgYmUgYSBsaXN0IG9mIERpc3RyaWJ1dGlvblBvaW50ICJcclxuICAgICAgICAgICAgICAgICJvYmplY3RzIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2Rpc3RyaWJ1dGlvbl9wb2ludHMgPSBkaXN0cmlidXRpb25fcG9pbnRzXHJcblxyXG4gICAgX19sZW5fXywgX19pdGVyX18sIF9fZ2V0aXRlbV9fID0gX21ha2Vfc2VxdWVuY2VfbWV0aG9kcyhcclxuICAgICAgICAiX2Rpc3RyaWJ1dGlvbl9wb2ludHMiXHJcbiAgICApXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxDUkxEaXN0cmlidXRpb25Qb2ludHMoe30pPiIuZm9ybWF0KHNlbGYuX2Rpc3RyaWJ1dGlvbl9wb2ludHMpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBDUkxEaXN0cmlidXRpb25Qb2ludHMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Rpc3RyaWJ1dGlvbl9wb2ludHMgPT0gb3RoZXIuX2Rpc3RyaWJ1dGlvbl9wb2ludHNcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHR1cGxlKHNlbGYuX2Rpc3RyaWJ1dGlvbl9wb2ludHMpKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgRnJlc2hlc3RDUkwoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuRlJFU0hFU1RfQ1JMXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIGRpc3RyaWJ1dGlvbl9wb2ludHM6IHR5cGluZy5JdGVyYWJsZVsiRGlzdHJpYnV0aW9uUG9pbnQiXVxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGRpc3RyaWJ1dGlvbl9wb2ludHMgPSBsaXN0KGRpc3RyaWJ1dGlvbl9wb2ludHMpXHJcbiAgICAgICAgaWYgbm90IGFsbChcclxuICAgICAgICAgICAgaXNpbnN0YW5jZSh4LCBEaXN0cmlidXRpb25Qb2ludCkgZm9yIHggaW4gZGlzdHJpYnV0aW9uX3BvaW50c1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJkaXN0cmlidXRpb25fcG9pbnRzIG11c3QgYmUgYSBsaXN0IG9mIERpc3RyaWJ1dGlvblBvaW50ICJcclxuICAgICAgICAgICAgICAgICJvYmplY3RzIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2Rpc3RyaWJ1dGlvbl9wb2ludHMgPSBkaXN0cmlidXRpb25fcG9pbnRzXHJcblxyXG4gICAgX19sZW5fXywgX19pdGVyX18sIF9fZ2V0aXRlbV9fID0gX21ha2Vfc2VxdWVuY2VfbWV0aG9kcyhcclxuICAgICAgICAiX2Rpc3RyaWJ1dGlvbl9wb2ludHMiXHJcbiAgICApXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxGcmVzaGVzdENSTCh7fSk+Ii5mb3JtYXQoc2VsZi5fZGlzdHJpYnV0aW9uX3BvaW50cylcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEZyZXNoZXN0Q1JMKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kaXN0cmlidXRpb25fcG9pbnRzID09IG90aGVyLl9kaXN0cmlidXRpb25fcG9pbnRzXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCh0dXBsZShzZWxmLl9kaXN0cmlidXRpb25fcG9pbnRzKSlcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIERpc3RyaWJ1dGlvblBvaW50OlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZnVsbF9uYW1lOiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkl0ZXJhYmxlW0dlbmVyYWxOYW1lXV0sXHJcbiAgICAgICAgcmVsYXRpdmVfbmFtZTogdHlwaW5nLk9wdGlvbmFsW1JlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVdLFxyXG4gICAgICAgIHJlYXNvbnM6IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuRnJvemVuU2V0WyJSZWFzb25GbGFncyJdXSxcclxuICAgICAgICBjcmxfaXNzdWVyOiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkl0ZXJhYmxlW0dlbmVyYWxOYW1lXV0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgZnVsbF9uYW1lIGFuZCByZWxhdGl2ZV9uYW1lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIllvdSBjYW5ub3QgcHJvdmlkZSBib3RoIGZ1bGxfbmFtZSBhbmQgcmVsYXRpdmVfbmFtZSwgYXQgIlxyXG4gICAgICAgICAgICAgICAgImxlYXN0IG9uZSBtdXN0IGJlIE5vbmUuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIGZ1bGxfbmFtZSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgZnVsbF9uYW1lID0gbGlzdChmdWxsX25hbWUpXHJcbiAgICAgICAgICAgIGlmIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBHZW5lcmFsTmFtZSkgZm9yIHggaW4gZnVsbF9uYW1lKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiZnVsbF9uYW1lIG11c3QgYmUgYSBsaXN0IG9mIEdlbmVyYWxOYW1lIG9iamVjdHMiXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIHJlbGF0aXZlX25hbWU6XHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHJlbGF0aXZlX25hbWUsIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWUpOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJyZWxhdGl2ZV9uYW1lIG11c3QgYmUgYSBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lIlxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBjcmxfaXNzdWVyIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBjcmxfaXNzdWVyID0gbGlzdChjcmxfaXNzdWVyKVxyXG4gICAgICAgICAgICBpZiBub3QgYWxsKGlzaW5zdGFuY2UoeCwgR2VuZXJhbE5hbWUpIGZvciB4IGluIGNybF9pc3N1ZXIpOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJjcmxfaXNzdWVyIG11c3QgYmUgTm9uZSBvciBhIGxpc3Qgb2YgZ2VuZXJhbCBuYW1lcyJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgcmVhc29ucyBhbmQgKFxyXG4gICAgICAgICAgICBub3QgaXNpbnN0YW5jZShyZWFzb25zLCBmcm96ZW5zZXQpXHJcbiAgICAgICAgICAgIG9yIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBSZWFzb25GbGFncykgZm9yIHggaW4gcmVhc29ucylcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInJlYXNvbnMgbXVzdCBiZSBOb25lIG9yIGZyb3plbnNldCBvZiBSZWFzb25GbGFncyIpXHJcblxyXG4gICAgICAgIGlmIHJlYXNvbnMgYW5kIChcclxuICAgICAgICAgICAgUmVhc29uRmxhZ3MudW5zcGVjaWZpZWQgaW4gcmVhc29uc1xyXG4gICAgICAgICAgICBvciBSZWFzb25GbGFncy5yZW1vdmVfZnJvbV9jcmwgaW4gcmVhc29uc1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAidW5zcGVjaWZpZWQgYW5kIHJlbW92ZV9mcm9tX2NybCBhcmUgbm90IHZhbGlkIHJlYXNvbnMgaW4gYSAiXHJcbiAgICAgICAgICAgICAgICAiRGlzdHJpYnV0aW9uUG9pbnQiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgcmVhc29ucyBhbmQgbm90IGNybF9pc3N1ZXIgYW5kIG5vdCAoZnVsbF9uYW1lIG9yIHJlbGF0aXZlX25hbWUpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIllvdSBtdXN0IHN1cHBseSBjcmxfaXNzdWVyLCBmdWxsX25hbWUsIG9yIHJlbGF0aXZlX25hbWUgd2hlbiAiXHJcbiAgICAgICAgICAgICAgICAicmVhc29ucyBpcyBub3QgTm9uZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9mdWxsX25hbWUgPSBmdWxsX25hbWVcclxuICAgICAgICBzZWxmLl9yZWxhdGl2ZV9uYW1lID0gcmVsYXRpdmVfbmFtZVxyXG4gICAgICAgIHNlbGYuX3JlYXNvbnMgPSByZWFzb25zXHJcbiAgICAgICAgc2VsZi5fY3JsX2lzc3VlciA9IGNybF9pc3N1ZXJcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICI8RGlzdHJpYnV0aW9uUG9pbnQoZnVsbF9uYW1lPXswLmZ1bGxfbmFtZX0sIHJlbGF0aXZlX25hbWU9ezAucmVsYSJcclxuICAgICAgICAgICAgInRpdmVfbmFtZX0sIHJlYXNvbnM9ezAucmVhc29uc30sICJcclxuICAgICAgICAgICAgImNybF9pc3N1ZXI9ezAuY3JsX2lzc3Vlcn0pPiIuZm9ybWF0KHNlbGYpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgRGlzdHJpYnV0aW9uUG9pbnQpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5mdWxsX25hbWUgPT0gb3RoZXIuZnVsbF9uYW1lXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLnJlbGF0aXZlX25hbWUgPT0gb3RoZXIucmVsYXRpdmVfbmFtZVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5yZWFzb25zID09IG90aGVyLnJlYXNvbnNcclxuICAgICAgICAgICAgYW5kIHNlbGYuY3JsX2lzc3VlciA9PSBvdGhlci5jcmxfaXNzdWVyXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgaWYgc2VsZi5mdWxsX25hbWUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGZuOiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLlR1cGxlW0dlbmVyYWxOYW1lLCAuLi5dXSA9IHR1cGxlKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5mdWxsX25hbWVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGZuID0gTm9uZVxyXG5cclxuICAgICAgICBpZiBzZWxmLmNybF9pc3N1ZXIgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGNybF9pc3N1ZXI6IHR5cGluZy5PcHRpb25hbFtcclxuICAgICAgICAgICAgICAgIHR5cGluZy5UdXBsZVtHZW5lcmFsTmFtZSwgLi4uXVxyXG4gICAgICAgICAgICBdID0gdHVwbGUoc2VsZi5jcmxfaXNzdWVyKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGNybF9pc3N1ZXIgPSBOb25lXHJcblxyXG4gICAgICAgIHJldHVybiBoYXNoKChmbiwgc2VsZi5yZWxhdGl2ZV9uYW1lLCBzZWxmLnJlYXNvbnMsIGNybF9pc3N1ZXIpKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGZ1bGxfbmFtZShzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkxpc3RbR2VuZXJhbE5hbWVdXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZnVsbF9uYW1lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmVsYXRpdmVfbmFtZShzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZV06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JlbGF0aXZlX25hbWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiByZWFzb25zKHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuRnJvemVuU2V0WyJSZWFzb25GbGFncyJdXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcmVhc29uc1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNybF9pc3N1ZXIoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5MaXN0W0dlbmVyYWxOYW1lXV06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NybF9pc3N1ZXJcclxuXHJcblxyXG5jbGFzcyBSZWFzb25GbGFncyh1dGlscy5FbnVtKTpcclxuICAgIHVuc3BlY2lmaWVkID0gInVuc3BlY2lmaWVkIlxyXG4gICAga2V5X2NvbXByb21pc2UgPSAia2V5Q29tcHJvbWlzZSJcclxuICAgIGNhX2NvbXByb21pc2UgPSAiY0FDb21wcm9taXNlIlxyXG4gICAgYWZmaWxpYXRpb25fY2hhbmdlZCA9ICJhZmZpbGlhdGlvbkNoYW5nZWQiXHJcbiAgICBzdXBlcnNlZGVkID0gInN1cGVyc2VkZWQiXHJcbiAgICBjZXNzYXRpb25fb2Zfb3BlcmF0aW9uID0gImNlc3NhdGlvbk9mT3BlcmF0aW9uIlxyXG4gICAgY2VydGlmaWNhdGVfaG9sZCA9ICJjZXJ0aWZpY2F0ZUhvbGQiXHJcbiAgICBwcml2aWxlZ2Vfd2l0aGRyYXduID0gInByaXZpbGVnZVdpdGhkcmF3biJcclxuICAgIGFhX2NvbXByb21pc2UgPSAiYUFDb21wcm9taXNlIlxyXG4gICAgcmVtb3ZlX2Zyb21fY3JsID0gInJlbW92ZUZyb21DUkwiXHJcblxyXG5cclxuIyBUaGVzZSBhcmUgZGlzdHJpYnV0aW9uIHBvaW50IGJpdCBzdHJpbmcgbWFwcGluZ3MuIE5vdCB0byBiZSBjb25mdXNlZCB3aXRoXHJcbiMgQ1JMUmVhc29uIHJlYXNvbiBmbGFncyBiaXQgc3RyaW5nIG1hcHBpbmdzLlxyXG4jIFJlYXNvbkZsYWdzIDo6PSBCSVQgU1RSSU5HIHtcclxuIyAgICAgIHVudXNlZCAgICAgICAgICAgICAgICAgICgwKSxcclxuIyAgICAgIGtleUNvbXByb21pc2UgICAgICAgICAgICgxKSxcclxuIyAgICAgIGNBQ29tcHJvbWlzZSAgICAgICAgICAgICgyKSxcclxuIyAgICAgIGFmZmlsaWF0aW9uQ2hhbmdlZCAgICAgICgzKSxcclxuIyAgICAgIHN1cGVyc2VkZWQgICAgICAgICAgICAgICg0KSxcclxuIyAgICAgIGNlc3NhdGlvbk9mT3BlcmF0aW9uICAgICg1KSxcclxuIyAgICAgIGNlcnRpZmljYXRlSG9sZCAgICAgICAgICg2KSxcclxuIyAgICAgIHByaXZpbGVnZVdpdGhkcmF3biAgICAgICg3KSxcclxuIyAgICAgIGFBQ29tcHJvbWlzZSAgICAgICAgICAgICg4KSB9XHJcbl9SRUFTT05fQklUX01BUFBJTkcgPSB7XHJcbiAgICAxOiBSZWFzb25GbGFncy5rZXlfY29tcHJvbWlzZSxcclxuICAgIDI6IFJlYXNvbkZsYWdzLmNhX2NvbXByb21pc2UsXHJcbiAgICAzOiBSZWFzb25GbGFncy5hZmZpbGlhdGlvbl9jaGFuZ2VkLFxyXG4gICAgNDogUmVhc29uRmxhZ3Muc3VwZXJzZWRlZCxcclxuICAgIDU6IFJlYXNvbkZsYWdzLmNlc3NhdGlvbl9vZl9vcGVyYXRpb24sXHJcbiAgICA2OiBSZWFzb25GbGFncy5jZXJ0aWZpY2F0ZV9ob2xkLFxyXG4gICAgNzogUmVhc29uRmxhZ3MucHJpdmlsZWdlX3dpdGhkcmF3bixcclxuICAgIDg6IFJlYXNvbkZsYWdzLmFhX2NvbXByb21pc2UsXHJcbn1cclxuXHJcblxyXG5jbGFzcyBQb2xpY3lDb25zdHJhaW50cyhFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5QT0xJQ1lfQ09OU1RSQUlOVFNcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICByZXF1aXJlX2V4cGxpY2l0X3BvbGljeTogdHlwaW5nLk9wdGlvbmFsW2ludF0sXHJcbiAgICAgICAgaW5oaWJpdF9wb2xpY3lfbWFwcGluZzogdHlwaW5nLk9wdGlvbmFsW2ludF0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgcmVxdWlyZV9leHBsaWNpdF9wb2xpY3kgaXMgbm90IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICByZXF1aXJlX2V4cGxpY2l0X3BvbGljeSwgaW50XHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgInJlcXVpcmVfZXhwbGljaXRfcG9saWN5IG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlciBvciAiXHJcbiAgICAgICAgICAgICAgICAiTm9uZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBpbmhpYml0X3BvbGljeV9tYXBwaW5nIGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgaW5oaWJpdF9wb2xpY3lfbWFwcGluZywgaW50XHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImluaGliaXRfcG9saWN5X21hcHBpbmcgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyIG9yIE5vbmUiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgaW5oaWJpdF9wb2xpY3lfbWFwcGluZyBpcyBOb25lIGFuZCByZXF1aXJlX2V4cGxpY2l0X3BvbGljeSBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkF0IGxlYXN0IG9uZSBvZiByZXF1aXJlX2V4cGxpY2l0X3BvbGljeSBhbmQgIlxyXG4gICAgICAgICAgICAgICAgImluaGliaXRfcG9saWN5X21hcHBpbmcgbXVzdCBub3QgYmUgTm9uZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9yZXF1aXJlX2V4cGxpY2l0X3BvbGljeSA9IHJlcXVpcmVfZXhwbGljaXRfcG9saWN5XHJcbiAgICAgICAgc2VsZi5faW5oaWJpdF9wb2xpY3lfbWFwcGluZyA9IGluaGliaXRfcG9saWN5X21hcHBpbmdcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICI8UG9saWN5Q29uc3RyYWludHMocmVxdWlyZV9leHBsaWNpdF9wb2xpY3k9ezAucmVxdWlyZV9leHBsaWNpdCJcclxuICAgICAgICAgICAgIl9wb2xpY3l9LCBpbmhpYml0X3BvbGljeV9tYXBwaW5nPXswLmluaGliaXRfcG9saWN5XyJcclxuICAgICAgICAgICAgIm1hcHBpbmd9KT4iLmZvcm1hdChzZWxmKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFBvbGljeUNvbnN0cmFpbnRzKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYucmVxdWlyZV9leHBsaWNpdF9wb2xpY3kgPT0gb3RoZXIucmVxdWlyZV9leHBsaWNpdF9wb2xpY3lcclxuICAgICAgICAgICAgYW5kIHNlbGYuaW5oaWJpdF9wb2xpY3lfbWFwcGluZyA9PSBvdGhlci5pbmhpYml0X3BvbGljeV9tYXBwaW5nXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goXHJcbiAgICAgICAgICAgIChzZWxmLnJlcXVpcmVfZXhwbGljaXRfcG9saWN5LCBzZWxmLmluaGliaXRfcG9saWN5X21hcHBpbmcpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJlcXVpcmVfZXhwbGljaXRfcG9saWN5KHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFtpbnRdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZXF1aXJlX2V4cGxpY2l0X3BvbGljeVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGluaGliaXRfcG9saWN5X21hcHBpbmcoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW2ludF06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2luaGliaXRfcG9saWN5X21hcHBpbmdcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIENlcnRpZmljYXRlUG9saWNpZXMoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuQ0VSVElGSUNBVEVfUE9MSUNJRVNcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgcG9saWNpZXM6IHR5cGluZy5JdGVyYWJsZVsiUG9saWN5SW5mb3JtYXRpb24iXSkgLT4gTm9uZTpcclxuICAgICAgICBwb2xpY2llcyA9IGxpc3QocG9saWNpZXMpXHJcbiAgICAgICAgaWYgbm90IGFsbChpc2luc3RhbmNlKHgsIFBvbGljeUluZm9ybWF0aW9uKSBmb3IgeCBpbiBwb2xpY2llcyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJFdmVyeSBpdGVtIGluIHRoZSBwb2xpY2llcyBsaXN0IG11c3QgYmUgYSAiXHJcbiAgICAgICAgICAgICAgICAiUG9saWN5SW5mb3JtYXRpb24iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fcG9saWNpZXMgPSBwb2xpY2llc1xyXG5cclxuICAgIF9fbGVuX18sIF9faXRlcl9fLCBfX2dldGl0ZW1fXyA9IF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoIl9wb2xpY2llcyIpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxDZXJ0aWZpY2F0ZVBvbGljaWVzKHt9KT4iLmZvcm1hdChzZWxmLl9wb2xpY2llcylcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENlcnRpZmljYXRlUG9saWNpZXMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BvbGljaWVzID09IG90aGVyLl9wb2xpY2llc1xyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2godHVwbGUoc2VsZi5fcG9saWNpZXMpKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgUG9saWN5SW5mb3JtYXRpb246XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBwb2xpY3lfaWRlbnRpZmllcjogT2JqZWN0SWRlbnRpZmllcixcclxuICAgICAgICBwb2xpY3lfcXVhbGlmaWVyczogdHlwaW5nLk9wdGlvbmFsW1xyXG4gICAgICAgICAgICB0eXBpbmcuSXRlcmFibGVbdHlwaW5nLlVuaW9uW3N0ciwgIlVzZXJOb3RpY2UiXV1cclxuICAgICAgICBdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHBvbGljeV9pZGVudGlmaWVyLCBPYmplY3RJZGVudGlmaWVyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJwb2xpY3lfaWRlbnRpZmllciBtdXN0IGJlIGFuIE9iamVjdElkZW50aWZpZXIiKVxyXG5cclxuICAgICAgICBzZWxmLl9wb2xpY3lfaWRlbnRpZmllciA9IHBvbGljeV9pZGVudGlmaWVyXHJcblxyXG4gICAgICAgIGlmIHBvbGljeV9xdWFsaWZpZXJzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBwb2xpY3lfcXVhbGlmaWVycyA9IGxpc3QocG9saWN5X3F1YWxpZmllcnMpXHJcbiAgICAgICAgICAgIGlmIG5vdCBhbGwoXHJcbiAgICAgICAgICAgICAgICBpc2luc3RhbmNlKHgsIChzdHIsIFVzZXJOb3RpY2UpKSBmb3IgeCBpbiBwb2xpY3lfcXVhbGlmaWVyc1xyXG4gICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJwb2xpY3lfcXVhbGlmaWVycyBtdXN0IGJlIGEgbGlzdCBvZiBzdHJpbmdzIGFuZC9vciAiXHJcbiAgICAgICAgICAgICAgICAgICAgIlVzZXJOb3RpY2Ugb2JqZWN0cyBvciBOb25lIlxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9wb2xpY3lfcXVhbGlmaWVycyA9IHBvbGljeV9xdWFsaWZpZXJzXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAiPFBvbGljeUluZm9ybWF0aW9uKHBvbGljeV9pZGVudGlmaWVyPXswLnBvbGljeV9pZGVudGlmaWVyfSwgcG9saWMiXHJcbiAgICAgICAgICAgICJ5X3F1YWxpZmllcnM9ezAucG9saWN5X3F1YWxpZmllcnN9KT4iLmZvcm1hdChzZWxmKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFBvbGljeUluZm9ybWF0aW9uKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYucG9saWN5X2lkZW50aWZpZXIgPT0gb3RoZXIucG9saWN5X2lkZW50aWZpZXJcclxuICAgICAgICAgICAgYW5kIHNlbGYucG9saWN5X3F1YWxpZmllcnMgPT0gb3RoZXIucG9saWN5X3F1YWxpZmllcnNcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICBpZiBzZWxmLnBvbGljeV9xdWFsaWZpZXJzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBwcTogdHlwaW5nLk9wdGlvbmFsW1xyXG4gICAgICAgICAgICAgICAgdHlwaW5nLlR1cGxlW3R5cGluZy5VbmlvbltzdHIsICJVc2VyTm90aWNlIl0sIC4uLl1cclxuICAgICAgICAgICAgXSA9IHR1cGxlKHNlbGYucG9saWN5X3F1YWxpZmllcnMpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcHEgPSBOb25lXHJcblxyXG4gICAgICAgIHJldHVybiBoYXNoKChzZWxmLnBvbGljeV9pZGVudGlmaWVyLCBwcSkpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcG9saWN5X2lkZW50aWZpZXIoc2VsZikgLT4gT2JqZWN0SWRlbnRpZmllcjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcG9saWN5X2lkZW50aWZpZXJcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBwb2xpY3lfcXVhbGlmaWVycyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkxpc3RbdHlwaW5nLlVuaW9uW3N0ciwgIlVzZXJOb3RpY2UiXV1dOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9wb2xpY3lfcXVhbGlmaWVyc1xyXG5cclxuXHJcbmNsYXNzIFVzZXJOb3RpY2U6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBub3RpY2VfcmVmZXJlbmNlOiB0eXBpbmcuT3B0aW9uYWxbIk5vdGljZVJlZmVyZW5jZSJdLFxyXG4gICAgICAgIGV4cGxpY2l0X3RleHQ6IHR5cGluZy5PcHRpb25hbFtzdHJdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdGljZV9yZWZlcmVuY2UgYW5kIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICBub3RpY2VfcmVmZXJlbmNlLCBOb3RpY2VSZWZlcmVuY2VcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAibm90aWNlX3JlZmVyZW5jZSBtdXN0IGJlIE5vbmUgb3IgYSBOb3RpY2VSZWZlcmVuY2UiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fbm90aWNlX3JlZmVyZW5jZSA9IG5vdGljZV9yZWZlcmVuY2VcclxuICAgICAgICBzZWxmLl9leHBsaWNpdF90ZXh0ID0gZXhwbGljaXRfdGV4dFxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIjxVc2VyTm90aWNlKG5vdGljZV9yZWZlcmVuY2U9ezAubm90aWNlX3JlZmVyZW5jZX0sIGV4cGxpY2l0X3RleHQ9IlxyXG4gICAgICAgICAgICAiezAuZXhwbGljaXRfdGV4dCFyfSk+Ii5mb3JtYXQoc2VsZilcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBVc2VyTm90aWNlKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYubm90aWNlX3JlZmVyZW5jZSA9PSBvdGhlci5ub3RpY2VfcmVmZXJlbmNlXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmV4cGxpY2l0X3RleHQgPT0gb3RoZXIuZXhwbGljaXRfdGV4dFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKChzZWxmLm5vdGljZV9yZWZlcmVuY2UsIHNlbGYuZXhwbGljaXRfdGV4dCkpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbm90aWNlX3JlZmVyZW5jZShzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbIk5vdGljZVJlZmVyZW5jZSJdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9ub3RpY2VfcmVmZXJlbmNlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZXhwbGljaXRfdGV4dChzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZXhwbGljaXRfdGV4dFxyXG5cclxuXHJcbmNsYXNzIE5vdGljZVJlZmVyZW5jZTpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG9yZ2FuaXphdGlvbjogdHlwaW5nLk9wdGlvbmFsW3N0cl0sXHJcbiAgICAgICAgbm90aWNlX251bWJlcnM6IHR5cGluZy5JdGVyYWJsZVtpbnRdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX29yZ2FuaXphdGlvbiA9IG9yZ2FuaXphdGlvblxyXG4gICAgICAgIG5vdGljZV9udW1iZXJzID0gbGlzdChub3RpY2VfbnVtYmVycylcclxuICAgICAgICBpZiBub3QgYWxsKGlzaW5zdGFuY2UoeCwgaW50KSBmb3IgeCBpbiBub3RpY2VfbnVtYmVycyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigibm90aWNlX251bWJlcnMgbXVzdCBiZSBhIGxpc3Qgb2YgaW50ZWdlcnMiKVxyXG5cclxuICAgICAgICBzZWxmLl9ub3RpY2VfbnVtYmVycyA9IG5vdGljZV9udW1iZXJzXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAiPE5vdGljZVJlZmVyZW5jZShvcmdhbml6YXRpb249ezAub3JnYW5pemF0aW9uIXJ9LCBub3RpY2VfbnVtYmVycz0iXHJcbiAgICAgICAgICAgICJ7MC5ub3RpY2VfbnVtYmVyc30pPiIuZm9ybWF0KHNlbGYpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgTm90aWNlUmVmZXJlbmNlKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYub3JnYW5pemF0aW9uID09IG90aGVyLm9yZ2FuaXphdGlvblxyXG4gICAgICAgICAgICBhbmQgc2VsZi5ub3RpY2VfbnVtYmVycyA9PSBvdGhlci5ub3RpY2VfbnVtYmVyc1xyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKChzZWxmLm9yZ2FuaXphdGlvbiwgdHVwbGUoc2VsZi5ub3RpY2VfbnVtYmVycykpKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9yZ2FuaXphdGlvbihzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbc3RyXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb3JnYW5pemF0aW9uXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgbm90aWNlX251bWJlcnMoc2VsZikgLT4gdHlwaW5nLkxpc3RbaW50XTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fbm90aWNlX251bWJlcnNcclxuXHJcblxyXG5jbGFzcyBFeHRlbmRlZEtleVVzYWdlKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELkVYVEVOREVEX0tFWV9VU0FHRVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB1c2FnZXM6IHR5cGluZy5JdGVyYWJsZVtPYmplY3RJZGVudGlmaWVyXSkgLT4gTm9uZTpcclxuICAgICAgICB1c2FnZXMgPSBsaXN0KHVzYWdlcylcclxuICAgICAgICBpZiBub3QgYWxsKGlzaW5zdGFuY2UoeCwgT2JqZWN0SWRlbnRpZmllcikgZm9yIHggaW4gdXNhZ2VzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkV2ZXJ5IGl0ZW0gaW4gdGhlIHVzYWdlcyBsaXN0IG11c3QgYmUgYW4gT2JqZWN0SWRlbnRpZmllciJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl91c2FnZXMgPSB1c2FnZXNcclxuXHJcbiAgICBfX2xlbl9fLCBfX2l0ZXJfXywgX19nZXRpdGVtX18gPSBfbWFrZV9zZXF1ZW5jZV9tZXRob2RzKCJfdXNhZ2VzIilcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPEV4dGVuZGVkS2V5VXNhZ2Uoe30pPiIuZm9ybWF0KHNlbGYuX3VzYWdlcylcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEV4dGVuZGVkS2V5VXNhZ2UpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3VzYWdlcyA9PSBvdGhlci5fdXNhZ2VzXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCh0dXBsZShzZWxmLl91c2FnZXMpKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgT0NTUE5vQ2hlY2soRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuT0NTUF9OT19DSEVDS1xyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgT0NTUE5vQ2hlY2spOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIFRydWVcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKE9DU1BOb0NoZWNrKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8T0NTUE5vQ2hlY2soKT4iXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBQcmVjZXJ0UG9pc29uKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELlBSRUNFUlRfUE9JU09OXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBQcmVjZXJ0UG9pc29uKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBUcnVlXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChQcmVjZXJ0UG9pc29uKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8UHJlY2VydFBvaXNvbigpPiJcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIFRMU0ZlYXR1cmUoRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBvaWQgPSBFeHRlbnNpb25PSUQuVExTX0ZFQVRVUkVcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZmVhdHVyZXM6IHR5cGluZy5JdGVyYWJsZVsiVExTRmVhdHVyZVR5cGUiXSkgLT4gTm9uZTpcclxuICAgICAgICBmZWF0dXJlcyA9IGxpc3QoZmVhdHVyZXMpXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBub3QgYWxsKGlzaW5zdGFuY2UoeCwgVExTRmVhdHVyZVR5cGUpIGZvciB4IGluIGZlYXR1cmVzKVxyXG4gICAgICAgICAgICBvciBsZW4oZmVhdHVyZXMpID09IDBcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiZmVhdHVyZXMgbXVzdCBiZSBhIGxpc3Qgb2YgZWxlbWVudHMgZnJvbSB0aGUgVExTRmVhdHVyZVR5cGUgIlxyXG4gICAgICAgICAgICAgICAgImVudW0iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fZmVhdHVyZXMgPSBmZWF0dXJlc1xyXG5cclxuICAgIF9fbGVuX18sIF9faXRlcl9fLCBfX2dldGl0ZW1fXyA9IF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoIl9mZWF0dXJlcyIpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxUTFNGZWF0dXJlKGZlYXR1cmVzPXswLl9mZWF0dXJlc30pPiIuZm9ybWF0KHNlbGYpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBUTFNGZWF0dXJlKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9mZWF0dXJlcyA9PSBvdGhlci5fZmVhdHVyZXNcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHR1cGxlKHNlbGYuX2ZlYXR1cmVzKSlcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIFRMU0ZlYXR1cmVUeXBlKHV0aWxzLkVudW0pOlxyXG4gICAgIyBzdGF0dXNfcmVxdWVzdCBpcyBkZWZpbmVkIGluIFJGQyA2MDY2IGFuZCBpcyB1c2VkIGZvciB3aGF0IGlzIGNvbW1vbmx5XHJcbiAgICAjIGNhbGxlZCBPQ1NQIE11c3QtU3RhcGxlIHdoZW4gcHJlc2VudCBpbiB0aGUgVExTIEZlYXR1cmUgZXh0ZW5zaW9uIGluIGFuXHJcbiAgICAjIFguNTA5IGNlcnRpZmljYXRlLlxyXG4gICAgc3RhdHVzX3JlcXVlc3QgPSA1XHJcbiAgICAjIHN0YXR1c19yZXF1ZXN0X3YyIGlzIGRlZmluZWQgaW4gUkZDIDY5NjEgYW5kIGFsbG93cyBtdWx0aXBsZSBPQ1NQXHJcbiAgICAjIHJlc3BvbnNlcyB0byBiZSBwcm92aWRlZC4gSXQgaXMgbm90IGN1cnJlbnRseSBpbiB1c2UgYnkgY2xpZW50cyBvclxyXG4gICAgIyBzZXJ2ZXJzLlxyXG4gICAgc3RhdHVzX3JlcXVlc3RfdjIgPSAxN1xyXG5cclxuXHJcbl9UTFNfRkVBVFVSRV9UWVBFX1RPX0VOVU0gPSB7eC52YWx1ZTogeCBmb3IgeCBpbiBUTFNGZWF0dXJlVHlwZX1cclxuXHJcblxyXG5jbGFzcyBJbmhpYml0QW55UG9saWN5KEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELklOSElCSVRfQU5ZX1BPTElDWVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBza2lwX2NlcnRzOiBpbnQpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uoc2tpcF9jZXJ0cywgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJza2lwX2NlcnRzIG11c3QgYmUgYW4gaW50ZWdlciIpXHJcblxyXG4gICAgICAgIGlmIHNraXBfY2VydHMgPCAwOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJza2lwX2NlcnRzIG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlciIpXHJcblxyXG4gICAgICAgIHNlbGYuX3NraXBfY2VydHMgPSBza2lwX2NlcnRzXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxJbmhpYml0QW55UG9saWN5KHNraXBfY2VydHM9ezAuc2tpcF9jZXJ0c30pPiIuZm9ybWF0KHNlbGYpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBJbmhpYml0QW55UG9saWN5KTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLnNraXBfY2VydHMgPT0gb3RoZXIuc2tpcF9jZXJ0c1xyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5za2lwX2NlcnRzKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHNraXBfY2VydHMoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9za2lwX2NlcnRzXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBLZXlVc2FnZShFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5LRVlfVVNBR0VcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBkaWdpdGFsX3NpZ25hdHVyZTogYm9vbCxcclxuICAgICAgICBjb250ZW50X2NvbW1pdG1lbnQ6IGJvb2wsXHJcbiAgICAgICAga2V5X2VuY2lwaGVybWVudDogYm9vbCxcclxuICAgICAgICBkYXRhX2VuY2lwaGVybWVudDogYm9vbCxcclxuICAgICAgICBrZXlfYWdyZWVtZW50OiBib29sLFxyXG4gICAgICAgIGtleV9jZXJ0X3NpZ246IGJvb2wsXHJcbiAgICAgICAgY3JsX3NpZ246IGJvb2wsXHJcbiAgICAgICAgZW5jaXBoZXJfb25seTogYm9vbCxcclxuICAgICAgICBkZWNpcGhlcl9vbmx5OiBib29sLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBrZXlfYWdyZWVtZW50IGFuZCAoZW5jaXBoZXJfb25seSBvciBkZWNpcGhlcl9vbmx5KTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJlbmNpcGhlcl9vbmx5IGFuZCBkZWNpcGhlcl9vbmx5IGNhbiBvbmx5IGJlIHRydWUgd2hlbiAiXHJcbiAgICAgICAgICAgICAgICAia2V5X2FncmVlbWVudCBpcyB0cnVlIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2RpZ2l0YWxfc2lnbmF0dXJlID0gZGlnaXRhbF9zaWduYXR1cmVcclxuICAgICAgICBzZWxmLl9jb250ZW50X2NvbW1pdG1lbnQgPSBjb250ZW50X2NvbW1pdG1lbnRcclxuICAgICAgICBzZWxmLl9rZXlfZW5jaXBoZXJtZW50ID0ga2V5X2VuY2lwaGVybWVudFxyXG4gICAgICAgIHNlbGYuX2RhdGFfZW5jaXBoZXJtZW50ID0gZGF0YV9lbmNpcGhlcm1lbnRcclxuICAgICAgICBzZWxmLl9rZXlfYWdyZWVtZW50ID0ga2V5X2FncmVlbWVudFxyXG4gICAgICAgIHNlbGYuX2tleV9jZXJ0X3NpZ24gPSBrZXlfY2VydF9zaWduXHJcbiAgICAgICAgc2VsZi5fY3JsX3NpZ24gPSBjcmxfc2lnblxyXG4gICAgICAgIHNlbGYuX2VuY2lwaGVyX29ubHkgPSBlbmNpcGhlcl9vbmx5XHJcbiAgICAgICAgc2VsZi5fZGVjaXBoZXJfb25seSA9IGRlY2lwaGVyX29ubHlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBkaWdpdGFsX3NpZ25hdHVyZShzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kaWdpdGFsX3NpZ25hdHVyZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNvbnRlbnRfY29tbWl0bWVudChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9jb250ZW50X2NvbW1pdG1lbnRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfZW5jaXBoZXJtZW50KHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2tleV9lbmNpcGhlcm1lbnRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBkYXRhX2VuY2lwaGVybWVudChzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9kYXRhX2VuY2lwaGVybWVudFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9hZ3JlZW1lbnQoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fa2V5X2FncmVlbWVudFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9jZXJ0X3NpZ24oc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fa2V5X2NlcnRfc2lnblxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNybF9zaWduKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NybF9zaWduXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZW5jaXBoZXJfb25seShzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLmtleV9hZ3JlZW1lbnQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiZW5jaXBoZXJfb25seSBpcyB1bmRlZmluZWQgdW5sZXNzIGtleV9hZ3JlZW1lbnQgaXMgdHJ1ZSJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9lbmNpcGhlcl9vbmx5XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZGVjaXBoZXJfb25seShzZWxmKSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBzZWxmLmtleV9hZ3JlZW1lbnQ6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiZGVjaXBoZXJfb25seSBpcyB1bmRlZmluZWQgdW5sZXNzIGtleV9hZ3JlZW1lbnQgaXMgdHJ1ZSJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9kZWNpcGhlcl9vbmx5XHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGVuY2lwaGVyX29ubHkgPSBzZWxmLmVuY2lwaGVyX29ubHlcclxuICAgICAgICAgICAgZGVjaXBoZXJfb25seSA9IHNlbGYuZGVjaXBoZXJfb25seVxyXG4gICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICAjIFVzZXJzIGZvdW5kIE5vbmUgY29uZnVzaW5nIGJlY2F1c2UgZXZlbiB0aG91Z2ggZW5jaXBoZXIvZGVjaXBoZXJcclxuICAgICAgICAgICAgIyBoYXZlIG5vIG1lYW5pbmcgdW5sZXNzIGtleV9hZ3JlZW1lbnQgaXMgdHJ1ZSwgdG8gY29uc3RydWN0IGFuXHJcbiAgICAgICAgICAgICMgaW5zdGFuY2Ugb2YgdGhlIGNsYXNzIHlvdSBzdGlsbCBuZWVkIHRvIHBhc3MgRmFsc2UuXHJcbiAgICAgICAgICAgIGVuY2lwaGVyX29ubHkgPSBGYWxzZVxyXG4gICAgICAgICAgICBkZWNpcGhlcl9vbmx5ID0gRmFsc2VcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIjxLZXlVc2FnZShkaWdpdGFsX3NpZ25hdHVyZT17MC5kaWdpdGFsX3NpZ25hdHVyZX0sICJcclxuICAgICAgICAgICAgImNvbnRlbnRfY29tbWl0bWVudD17MC5jb250ZW50X2NvbW1pdG1lbnR9LCAiXHJcbiAgICAgICAgICAgICJrZXlfZW5jaXBoZXJtZW50PXswLmtleV9lbmNpcGhlcm1lbnR9LCAiXHJcbiAgICAgICAgICAgICJkYXRhX2VuY2lwaGVybWVudD17MC5kYXRhX2VuY2lwaGVybWVudH0sICJcclxuICAgICAgICAgICAgImtleV9hZ3JlZW1lbnQ9ezAua2V5X2FncmVlbWVudH0sICJcclxuICAgICAgICAgICAgImtleV9jZXJ0X3NpZ249ezAua2V5X2NlcnRfc2lnbn0sIGNybF9zaWduPXswLmNybF9zaWdufSwgIlxyXG4gICAgICAgICAgICAiZW5jaXBoZXJfb25seT17MX0sIGRlY2lwaGVyX29ubHk9ezJ9KT4iXHJcbiAgICAgICAgKS5mb3JtYXQoc2VsZiwgZW5jaXBoZXJfb25seSwgZGVjaXBoZXJfb25seSlcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEtleVVzYWdlKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYuZGlnaXRhbF9zaWduYXR1cmUgPT0gb3RoZXIuZGlnaXRhbF9zaWduYXR1cmVcclxuICAgICAgICAgICAgYW5kIHNlbGYuY29udGVudF9jb21taXRtZW50ID09IG90aGVyLmNvbnRlbnRfY29tbWl0bWVudFxyXG4gICAgICAgICAgICBhbmQgc2VsZi5rZXlfZW5jaXBoZXJtZW50ID09IG90aGVyLmtleV9lbmNpcGhlcm1lbnRcclxuICAgICAgICAgICAgYW5kIHNlbGYuZGF0YV9lbmNpcGhlcm1lbnQgPT0gb3RoZXIuZGF0YV9lbmNpcGhlcm1lbnRcclxuICAgICAgICAgICAgYW5kIHNlbGYua2V5X2FncmVlbWVudCA9PSBvdGhlci5rZXlfYWdyZWVtZW50XHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmtleV9jZXJ0X3NpZ24gPT0gb3RoZXIua2V5X2NlcnRfc2lnblxyXG4gICAgICAgICAgICBhbmQgc2VsZi5jcmxfc2lnbiA9PSBvdGhlci5jcmxfc2lnblxyXG4gICAgICAgICAgICBhbmQgc2VsZi5fZW5jaXBoZXJfb25seSA9PSBvdGhlci5fZW5jaXBoZXJfb25seVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5fZGVjaXBoZXJfb25seSA9PSBvdGhlci5fZGVjaXBoZXJfb25seVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKFxyXG4gICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICBzZWxmLmRpZ2l0YWxfc2lnbmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5jb250ZW50X2NvbW1pdG1lbnQsXHJcbiAgICAgICAgICAgICAgICBzZWxmLmtleV9lbmNpcGhlcm1lbnQsXHJcbiAgICAgICAgICAgICAgICBzZWxmLmRhdGFfZW5jaXBoZXJtZW50LFxyXG4gICAgICAgICAgICAgICAgc2VsZi5rZXlfYWdyZWVtZW50LFxyXG4gICAgICAgICAgICAgICAgc2VsZi5rZXlfY2VydF9zaWduLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5jcmxfc2lnbixcclxuICAgICAgICAgICAgICAgIHNlbGYuX2VuY2lwaGVyX29ubHksXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9kZWNpcGhlcl9vbmx5LFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgTmFtZUNvbnN0cmFpbnRzKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELk5BTUVfQ09OU1RSQUlOVFNcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBwZXJtaXR0ZWRfc3VidHJlZXM6IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuSXRlcmFibGVbR2VuZXJhbE5hbWVdXSxcclxuICAgICAgICBleGNsdWRlZF9zdWJ0cmVlczogdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5JdGVyYWJsZVtHZW5lcmFsTmFtZV1dLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIHBlcm1pdHRlZF9zdWJ0cmVlcyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcGVybWl0dGVkX3N1YnRyZWVzID0gbGlzdChwZXJtaXR0ZWRfc3VidHJlZXMpXHJcbiAgICAgICAgICAgIGlmIG5vdCBwZXJtaXR0ZWRfc3VidHJlZXM6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJwZXJtaXR0ZWRfc3VidHJlZXMgbXVzdCBiZSBhIG5vbi1lbXB0eSBsaXN0IG9yIE5vbmUiXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGlmIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBHZW5lcmFsTmFtZSkgZm9yIHggaW4gcGVybWl0dGVkX3N1YnRyZWVzKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAicGVybWl0dGVkX3N1YnRyZWVzIG11c3QgYmUgYSBsaXN0IG9mIEdlbmVyYWxOYW1lIG9iamVjdHMgIlxyXG4gICAgICAgICAgICAgICAgICAgICJvciBOb25lIlxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgc2VsZi5fdmFsaWRhdGVfaXBfbmFtZShwZXJtaXR0ZWRfc3VidHJlZXMpXHJcblxyXG4gICAgICAgIGlmIGV4Y2x1ZGVkX3N1YnRyZWVzIGlzIG5vdCBOb25lOlxyXG4gICAgICAgICAgICBleGNsdWRlZF9zdWJ0cmVlcyA9IGxpc3QoZXhjbHVkZWRfc3VidHJlZXMpXHJcbiAgICAgICAgICAgIGlmIG5vdCBleGNsdWRlZF9zdWJ0cmVlczpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgImV4Y2x1ZGVkX3N1YnRyZWVzIG11c3QgYmUgYSBub24tZW1wdHkgbGlzdCBvciBOb25lIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiBub3QgYWxsKGlzaW5zdGFuY2UoeCwgR2VuZXJhbE5hbWUpIGZvciB4IGluIGV4Y2x1ZGVkX3N1YnRyZWVzKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiZXhjbHVkZWRfc3VidHJlZXMgbXVzdCBiZSBhIGxpc3Qgb2YgR2VuZXJhbE5hbWUgb2JqZWN0cyAiXHJcbiAgICAgICAgICAgICAgICAgICAgIm9yIE5vbmUiXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBzZWxmLl92YWxpZGF0ZV9pcF9uYW1lKGV4Y2x1ZGVkX3N1YnRyZWVzKVxyXG5cclxuICAgICAgICBpZiBwZXJtaXR0ZWRfc3VidHJlZXMgaXMgTm9uZSBhbmQgZXhjbHVkZWRfc3VidHJlZXMgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJBdCBsZWFzdCBvbmUgb2YgcGVybWl0dGVkX3N1YnRyZWVzIGFuZCBleGNsdWRlZF9zdWJ0cmVlcyAiXHJcbiAgICAgICAgICAgICAgICAibXVzdCBub3QgYmUgTm9uZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9wZXJtaXR0ZWRfc3VidHJlZXMgPSBwZXJtaXR0ZWRfc3VidHJlZXNcclxuICAgICAgICBzZWxmLl9leGNsdWRlZF9zdWJ0cmVlcyA9IGV4Y2x1ZGVkX3N1YnRyZWVzXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBOYW1lQ29uc3RyYWludHMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5leGNsdWRlZF9zdWJ0cmVlcyA9PSBvdGhlci5leGNsdWRlZF9zdWJ0cmVlc1xyXG4gICAgICAgICAgICBhbmQgc2VsZi5wZXJtaXR0ZWRfc3VidHJlZXMgPT0gb3RoZXIucGVybWl0dGVkX3N1YnRyZWVzXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfdmFsaWRhdGVfaXBfbmFtZShzZWxmLCB0cmVlOiB0eXBpbmcuSXRlcmFibGVbR2VuZXJhbE5hbWVdKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGFueShcclxuICAgICAgICAgICAgaXNpbnN0YW5jZShuYW1lLCBJUEFkZHJlc3MpXHJcbiAgICAgICAgICAgIGFuZCBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgICAgIG5hbWUudmFsdWUsIChpcGFkZHJlc3MuSVB2NE5ldHdvcmssIGlwYWRkcmVzcy5JUHY2TmV0d29yaylcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBmb3IgbmFtZSBpbiB0cmVlXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIklQQWRkcmVzcyBuYW1lIGNvbnN0cmFpbnRzIG11c3QgYmUgYW4gSVB2NE5ldHdvcmsgb3IiXHJcbiAgICAgICAgICAgICAgICAiIElQdjZOZXR3b3JrIG9iamVjdCJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIjxOYW1lQ29uc3RyYWludHMocGVybWl0dGVkX3N1YnRyZWVzPXswLnBlcm1pdHRlZF9zdWJ0cmVlc30sICJcclxuICAgICAgICAgICAgImV4Y2x1ZGVkX3N1YnRyZWVzPXswLmV4Y2x1ZGVkX3N1YnRyZWVzfSk+Ii5mb3JtYXQoc2VsZilcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICBpZiBzZWxmLnBlcm1pdHRlZF9zdWJ0cmVlcyBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcHM6IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuVHVwbGVbR2VuZXJhbE5hbWUsIC4uLl1dID0gdHVwbGUoXHJcbiAgICAgICAgICAgICAgICBzZWxmLnBlcm1pdHRlZF9zdWJ0cmVlc1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcHMgPSBOb25lXHJcblxyXG4gICAgICAgIGlmIHNlbGYuZXhjbHVkZWRfc3VidHJlZXMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGVzOiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLlR1cGxlW0dlbmVyYWxOYW1lLCAuLi5dXSA9IHR1cGxlKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5leGNsdWRlZF9zdWJ0cmVlc1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgZXMgPSBOb25lXHJcblxyXG4gICAgICAgIHJldHVybiBoYXNoKChwcywgZXMpKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHBlcm1pdHRlZF9zdWJ0cmVlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgKSAtPiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkxpc3RbR2VuZXJhbE5hbWVdXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcGVybWl0dGVkX3N1YnRyZWVzXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgZXhjbHVkZWRfc3VidHJlZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICkgLT4gdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5MaXN0W0dlbmVyYWxOYW1lXV06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2V4Y2x1ZGVkX3N1YnRyZWVzXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBFeHRlbnNpb24odHlwaW5nLkdlbmVyaWNbRXh0ZW5zaW9uVHlwZVZhcl0pOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIG9pZDogT2JqZWN0SWRlbnRpZmllciwgY3JpdGljYWw6IGJvb2wsIHZhbHVlOiBFeHRlbnNpb25UeXBlVmFyXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob2lkLCBPYmplY3RJZGVudGlmaWVyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIm9pZCBhcmd1bWVudCBtdXN0IGJlIGFuIE9iamVjdElkZW50aWZpZXIgaW5zdGFuY2UuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGNyaXRpY2FsLCBib29sKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjcml0aWNhbCBtdXN0IGJlIGEgYm9vbGVhbiB2YWx1ZSIpXHJcblxyXG4gICAgICAgIHNlbGYuX29pZCA9IG9pZFxyXG4gICAgICAgIHNlbGYuX2NyaXRpY2FsID0gY3JpdGljYWxcclxuICAgICAgICBzZWxmLl92YWx1ZSA9IHZhbHVlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb2lkKHNlbGYpIC0+IE9iamVjdElkZW50aWZpZXI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29pZFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNyaXRpY2FsKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NyaXRpY2FsXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdmFsdWUoc2VsZikgLT4gRXh0ZW5zaW9uVHlwZVZhcjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICI8RXh0ZW5zaW9uKG9pZD17MC5vaWR9LCBjcml0aWNhbD17MC5jcml0aWNhbH0sICJcclxuICAgICAgICAgICAgInZhbHVlPXswLnZhbHVlfSk+IlxyXG4gICAgICAgICkuZm9ybWF0KHNlbGYpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBFeHRlbnNpb24pOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5vaWQgPT0gb3RoZXIub2lkXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLmNyaXRpY2FsID09IG90aGVyLmNyaXRpY2FsXHJcbiAgICAgICAgICAgIGFuZCBzZWxmLnZhbHVlID09IG90aGVyLnZhbHVlXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYub2lkLCBzZWxmLmNyaXRpY2FsLCBzZWxmLnZhbHVlKSlcclxuXHJcblxyXG5jbGFzcyBHZW5lcmFsTmFtZXM6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZ2VuZXJhbF9uYW1lczogdHlwaW5nLkl0ZXJhYmxlW0dlbmVyYWxOYW1lXSkgLT4gTm9uZTpcclxuICAgICAgICBnZW5lcmFsX25hbWVzID0gbGlzdChnZW5lcmFsX25hbWVzKVxyXG4gICAgICAgIGlmIG5vdCBhbGwoaXNpbnN0YW5jZSh4LCBHZW5lcmFsTmFtZSkgZm9yIHggaW4gZ2VuZXJhbF9uYW1lcyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJFdmVyeSBpdGVtIGluIHRoZSBnZW5lcmFsX25hbWVzIGxpc3QgbXVzdCBiZSBhbiAiXHJcbiAgICAgICAgICAgICAgICAib2JqZWN0IGNvbmZvcm1pbmcgdG8gdGhlIEdlbmVyYWxOYW1lIGludGVyZmFjZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9nZW5lcmFsX25hbWVzID0gZ2VuZXJhbF9uYW1lc1xyXG5cclxuICAgIF9fbGVuX18sIF9faXRlcl9fLCBfX2dldGl0ZW1fXyA9IF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoIl9nZW5lcmFsX25hbWVzIilcclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHR5cGU6IHR5cGluZy5VbmlvbltcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbRE5TTmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1VuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXJdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtSRkM4MjJOYW1lXSxcclxuICAgICAgICBdLFxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtzdHJdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdHlwZTogdHlwaW5nLlR5cGVbRGlyZWN0b3J5TmFtZV0sXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W05hbWVdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdHlwZTogdHlwaW5nLlR5cGVbUmVnaXN0ZXJlZElEXSxcclxuICAgICkgLT4gdHlwaW5nLkxpc3RbT2JqZWN0SWRlbnRpZmllcl06XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZiwgdHlwZTogdHlwaW5nLlR5cGVbSVBBZGRyZXNzXVxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtfSVBBRERSRVNTX1RZUEVTXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLCB0eXBlOiB0eXBpbmcuVHlwZVtPdGhlck5hbWVdXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W090aGVyTmFtZV06XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB0eXBlOiB0eXBpbmcuVW5pb25bXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW0ROU05hbWVdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtEaXJlY3RvcnlOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbSVBBZGRyZXNzXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbT3RoZXJOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbUkZDODIyTmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1JlZ2lzdGVyZWRJRF0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1VuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXJdLFxyXG4gICAgICAgIF0sXHJcbiAgICApIC0+IHR5cGluZy5VbmlvbltcclxuICAgICAgICB0eXBpbmcuTGlzdFtfSVBBRERSRVNTX1RZUEVTXSxcclxuICAgICAgICB0eXBpbmcuTGlzdFtzdHJdLFxyXG4gICAgICAgIHR5cGluZy5MaXN0W090aGVyTmFtZV0sXHJcbiAgICAgICAgdHlwaW5nLkxpc3RbTmFtZV0sXHJcbiAgICAgICAgdHlwaW5nLkxpc3RbT2JqZWN0SWRlbnRpZmllcl0sXHJcbiAgICBdOlxyXG4gICAgICAgICMgUmV0dXJuIHRoZSB2YWx1ZSBvZiBlYWNoIEdlbmVyYWxOYW1lLCBleGNlcHQgZm9yIE90aGVyTmFtZSBpbnN0YW5jZXNcclxuICAgICAgICAjIHdoaWNoIHdlIHJldHVybiBkaXJlY3RseSBiZWNhdXNlIGl0IGhhcyB0d28gaW1wb3J0YW50IHByb3BlcnRpZXMgbm90XHJcbiAgICAgICAgIyBqdXN0IG9uZSB2YWx1ZS5cclxuICAgICAgICBvYmpzID0gKGkgZm9yIGkgaW4gc2VsZiBpZiBpc2luc3RhbmNlKGksIHR5cGUpKVxyXG4gICAgICAgIGlmIHR5cGUgIT0gT3RoZXJOYW1lOlxyXG4gICAgICAgICAgICByZXR1cm4gW2kudmFsdWUgZm9yIGkgaW4gb2Jqc11cclxuICAgICAgICByZXR1cm4gbGlzdChvYmpzKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8R2VuZXJhbE5hbWVzKHt9KT4iLmZvcm1hdChzZWxmLl9nZW5lcmFsX25hbWVzKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgR2VuZXJhbE5hbWVzKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9nZW5lcmFsX25hbWVzID09IG90aGVyLl9nZW5lcmFsX25hbWVzXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCh0dXBsZShzZWxmLl9nZW5lcmFsX25hbWVzKSlcclxuXHJcblxyXG5jbGFzcyBTdWJqZWN0QWx0ZXJuYXRpdmVOYW1lKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELlNVQkpFQ1RfQUxURVJOQVRJVkVfTkFNRVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBnZW5lcmFsX25hbWVzOiB0eXBpbmcuSXRlcmFibGVbR2VuZXJhbE5hbWVdKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2dlbmVyYWxfbmFtZXMgPSBHZW5lcmFsTmFtZXMoZ2VuZXJhbF9uYW1lcylcclxuXHJcbiAgICBfX2xlbl9fLCBfX2l0ZXJfXywgX19nZXRpdGVtX18gPSBfbWFrZV9zZXF1ZW5jZV9tZXRob2RzKCJfZ2VuZXJhbF9uYW1lcyIpXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB0eXBlOiB0eXBpbmcuVW5pb25bXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW0ROU05hbWVdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtVbmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbUkZDODIyTmFtZV0sXHJcbiAgICAgICAgXSxcclxuICAgICkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHR5cGU6IHR5cGluZy5UeXBlW0RpcmVjdG9yeU5hbWVdLFxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtOYW1lXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHR5cGU6IHR5cGluZy5UeXBlW1JlZ2lzdGVyZWRJRF0sXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W09iamVjdElkZW50aWZpZXJdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsIHR5cGU6IHR5cGluZy5UeXBlW0lQQWRkcmVzc11cclxuICAgICkgLT4gdHlwaW5nLkxpc3RbX0lQQUREUkVTU19UWVBFU106XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZiwgdHlwZTogdHlwaW5nLlR5cGVbT3RoZXJOYW1lXVxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtPdGhlck5hbWVdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdHlwZTogdHlwaW5nLlVuaW9uW1xyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtETlNOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbRGlyZWN0b3J5TmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW0lQQWRkcmVzc10sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW090aGVyTmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1JGQzgyMk5hbWVdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtSZWdpc3RlcmVkSURdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtVbmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyXSxcclxuICAgICAgICBdLFxyXG4gICAgKSAtPiB0eXBpbmcuVW5pb25bXHJcbiAgICAgICAgdHlwaW5nLkxpc3RbX0lQQUREUkVTU19UWVBFU10sXHJcbiAgICAgICAgdHlwaW5nLkxpc3Rbc3RyXSxcclxuICAgICAgICB0eXBpbmcuTGlzdFtPdGhlck5hbWVdLFxyXG4gICAgICAgIHR5cGluZy5MaXN0W05hbWVdLFxyXG4gICAgICAgIHR5cGluZy5MaXN0W09iamVjdElkZW50aWZpZXJdLFxyXG4gICAgXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZ2VuZXJhbF9uYW1lcy5nZXRfdmFsdWVzX2Zvcl90eXBlKHR5cGUpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxTdWJqZWN0QWx0ZXJuYXRpdmVOYW1lKHt9KT4iLmZvcm1hdChzZWxmLl9nZW5lcmFsX25hbWVzKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgU3ViamVjdEFsdGVybmF0aXZlTmFtZSk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fZ2VuZXJhbF9uYW1lcyA9PSBvdGhlci5fZ2VuZXJhbF9uYW1lc1xyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5fZ2VuZXJhbF9uYW1lcylcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIElzc3VlckFsdGVybmF0aXZlTmFtZShFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5JU1NVRVJfQUxURVJOQVRJVkVfTkFNRVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBnZW5lcmFsX25hbWVzOiB0eXBpbmcuSXRlcmFibGVbR2VuZXJhbE5hbWVdKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2dlbmVyYWxfbmFtZXMgPSBHZW5lcmFsTmFtZXMoZ2VuZXJhbF9uYW1lcylcclxuXHJcbiAgICBfX2xlbl9fLCBfX2l0ZXJfXywgX19nZXRpdGVtX18gPSBfbWFrZV9zZXF1ZW5jZV9tZXRob2RzKCJfZ2VuZXJhbF9uYW1lcyIpXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB0eXBlOiB0eXBpbmcuVW5pb25bXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW0ROU05hbWVdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtVbmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbUkZDODIyTmFtZV0sXHJcbiAgICAgICAgXSxcclxuICAgICkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHR5cGU6IHR5cGluZy5UeXBlW0RpcmVjdG9yeU5hbWVdLFxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtOYW1lXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHR5cGU6IHR5cGluZy5UeXBlW1JlZ2lzdGVyZWRJRF0sXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W09iamVjdElkZW50aWZpZXJdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsIHR5cGU6IHR5cGluZy5UeXBlW0lQQWRkcmVzc11cclxuICAgICkgLT4gdHlwaW5nLkxpc3RbX0lQQUREUkVTU19UWVBFU106XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZiwgdHlwZTogdHlwaW5nLlR5cGVbT3RoZXJOYW1lXVxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtPdGhlck5hbWVdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdHlwZTogdHlwaW5nLlVuaW9uW1xyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtETlNOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbRGlyZWN0b3J5TmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW0lQQWRkcmVzc10sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW090aGVyTmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1JGQzgyMk5hbWVdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtSZWdpc3RlcmVkSURdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtVbmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyXSxcclxuICAgICAgICBdLFxyXG4gICAgKSAtPiB0eXBpbmcuVW5pb25bXHJcbiAgICAgICAgdHlwaW5nLkxpc3RbX0lQQUREUkVTU19UWVBFU10sXHJcbiAgICAgICAgdHlwaW5nLkxpc3Rbc3RyXSxcclxuICAgICAgICB0eXBpbmcuTGlzdFtPdGhlck5hbWVdLFxyXG4gICAgICAgIHR5cGluZy5MaXN0W05hbWVdLFxyXG4gICAgICAgIHR5cGluZy5MaXN0W09iamVjdElkZW50aWZpZXJdLFxyXG4gICAgXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZ2VuZXJhbF9uYW1lcy5nZXRfdmFsdWVzX2Zvcl90eXBlKHR5cGUpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxJc3N1ZXJBbHRlcm5hdGl2ZU5hbWUoe30pPiIuZm9ybWF0KHNlbGYuX2dlbmVyYWxfbmFtZXMpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBJc3N1ZXJBbHRlcm5hdGl2ZU5hbWUpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2dlbmVyYWxfbmFtZXMgPT0gb3RoZXIuX2dlbmVyYWxfbmFtZXNcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYuX2dlbmVyYWxfbmFtZXMpXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBDZXJ0aWZpY2F0ZUlzc3VlcihFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IENSTEVudHJ5RXh0ZW5zaW9uT0lELkNFUlRJRklDQVRFX0lTU1VFUlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBnZW5lcmFsX25hbWVzOiB0eXBpbmcuSXRlcmFibGVbR2VuZXJhbE5hbWVdKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2dlbmVyYWxfbmFtZXMgPSBHZW5lcmFsTmFtZXMoZ2VuZXJhbF9uYW1lcylcclxuXHJcbiAgICBfX2xlbl9fLCBfX2l0ZXJfXywgX19nZXRpdGVtX18gPSBfbWFrZV9zZXF1ZW5jZV9tZXRob2RzKCJfZ2VuZXJhbF9uYW1lcyIpXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICB0eXBlOiB0eXBpbmcuVW5pb25bXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW0ROU05hbWVdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtVbmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbUkZDODIyTmFtZV0sXHJcbiAgICAgICAgXSxcclxuICAgICkgLT4gdHlwaW5nLkxpc3Rbc3RyXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHR5cGU6IHR5cGluZy5UeXBlW0RpcmVjdG9yeU5hbWVdLFxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtOYW1lXTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgZ2V0X3ZhbHVlc19mb3JfdHlwZShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHR5cGU6IHR5cGluZy5UeXBlW1JlZ2lzdGVyZWRJRF0sXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W09iamVjdElkZW50aWZpZXJdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIEB0eXBpbmcub3ZlcmxvYWRcclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsIHR5cGU6IHR5cGluZy5UeXBlW0lQQWRkcmVzc11cclxuICAgICkgLT4gdHlwaW5nLkxpc3RbX0lQQUREUkVTU19UWVBFU106XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIGdldF92YWx1ZXNfZm9yX3R5cGUoXHJcbiAgICAgICAgc2VsZiwgdHlwZTogdHlwaW5nLlR5cGVbT3RoZXJOYW1lXVxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtPdGhlck5hbWVdOlxyXG4gICAgICAgIC4uLlxyXG5cclxuICAgIGRlZiBnZXRfdmFsdWVzX2Zvcl90eXBlKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgdHlwZTogdHlwaW5nLlVuaW9uW1xyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtETlNOYW1lXSxcclxuICAgICAgICAgICAgdHlwaW5nLlR5cGVbRGlyZWN0b3J5TmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW0lQQWRkcmVzc10sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW090aGVyTmFtZV0sXHJcbiAgICAgICAgICAgIHR5cGluZy5UeXBlW1JGQzgyMk5hbWVdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtSZWdpc3RlcmVkSURdLFxyXG4gICAgICAgICAgICB0eXBpbmcuVHlwZVtVbmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyXSxcclxuICAgICAgICBdLFxyXG4gICAgKSAtPiB0eXBpbmcuVW5pb25bXHJcbiAgICAgICAgdHlwaW5nLkxpc3RbX0lQQUREUkVTU19UWVBFU10sXHJcbiAgICAgICAgdHlwaW5nLkxpc3Rbc3RyXSxcclxuICAgICAgICB0eXBpbmcuTGlzdFtPdGhlck5hbWVdLFxyXG4gICAgICAgIHR5cGluZy5MaXN0W05hbWVdLFxyXG4gICAgICAgIHR5cGluZy5MaXN0W09iamVjdElkZW50aWZpZXJdLFxyXG4gICAgXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZ2VuZXJhbF9uYW1lcy5nZXRfdmFsdWVzX2Zvcl90eXBlKHR5cGUpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxDZXJ0aWZpY2F0ZUlzc3Vlcih7fSk+Ii5mb3JtYXQoc2VsZi5fZ2VuZXJhbF9uYW1lcylcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIENlcnRpZmljYXRlSXNzdWVyKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9nZW5lcmFsX25hbWVzID09IG90aGVyLl9nZW5lcmFsX25hbWVzXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChzZWxmLl9nZW5lcmFsX25hbWVzKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgQ1JMUmVhc29uKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gQ1JMRW50cnlFeHRlbnNpb25PSUQuQ1JMX1JFQVNPTlxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCByZWFzb246IFJlYXNvbkZsYWdzKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHJlYXNvbiwgUmVhc29uRmxhZ3MpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInJlYXNvbiBtdXN0IGJlIGFuIGVsZW1lbnQgZnJvbSBSZWFzb25GbGFncyIpXHJcblxyXG4gICAgICAgIHNlbGYuX3JlYXNvbiA9IHJlYXNvblxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8Q1JMUmVhc29uKHJlYXNvbj17fSk+Ii5mb3JtYXQoc2VsZi5fcmVhc29uKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgQ1JMUmVhc29uKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLnJlYXNvbiA9PSBvdGhlci5yZWFzb25cclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYucmVhc29uKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJlYXNvbihzZWxmKSAtPiBSZWFzb25GbGFnczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fcmVhc29uXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBJbnZhbGlkaXR5RGF0ZShFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IENSTEVudHJ5RXh0ZW5zaW9uT0lELklOVkFMSURJVFlfREFURVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpbnZhbGlkaXR5X2RhdGU6IGRhdGV0aW1lLmRhdGV0aW1lKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGludmFsaWRpdHlfZGF0ZSwgZGF0ZXRpbWUuZGF0ZXRpbWUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImludmFsaWRpdHlfZGF0ZSBtdXN0IGJlIGEgZGF0ZXRpbWUuZGF0ZXRpbWUiKVxyXG5cclxuICAgICAgICBzZWxmLl9pbnZhbGlkaXR5X2RhdGUgPSBpbnZhbGlkaXR5X2RhdGVcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPEludmFsaWRpdHlEYXRlKGludmFsaWRpdHlfZGF0ZT17fSk+Ii5mb3JtYXQoXHJcbiAgICAgICAgICAgIHNlbGYuX2ludmFsaWRpdHlfZGF0ZVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEludmFsaWRpdHlEYXRlKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLmludmFsaWRpdHlfZGF0ZSA9PSBvdGhlci5pbnZhbGlkaXR5X2RhdGVcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYuaW52YWxpZGl0eV9kYXRlKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGludmFsaWRpdHlfZGF0ZShzZWxmKSAtPiBkYXRldGltZS5kYXRldGltZTpcclxuICAgICAgICByZXR1cm4gc2VsZi5faW52YWxpZGl0eV9kYXRlXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBQcmVjZXJ0aWZpY2F0ZVNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wcyhFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5QUkVDRVJUX1NJR05FRF9DRVJUSUZJQ0FURV9USU1FU1RBTVBTXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHM6IHR5cGluZy5JdGVyYWJsZVtcclxuICAgICAgICAgICAgU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBcclxuICAgICAgICBdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzID0gbGlzdChzaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wcylcclxuICAgICAgICBpZiBub3QgYWxsKFxyXG4gICAgICAgICAgICBpc2luc3RhbmNlKHNjdCwgU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXApXHJcbiAgICAgICAgICAgIGZvciBzY3QgaW4gc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHNcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiRXZlcnkgaXRlbSBpbiB0aGUgc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHMgbGlzdCBtdXN0IGJlICJcclxuICAgICAgICAgICAgICAgICJhIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHMgPSBzaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wc1xyXG5cclxuICAgIF9fbGVuX18sIF9faXRlcl9fLCBfX2dldGl0ZW1fXyA9IF9tYWtlX3NlcXVlbmNlX21ldGhvZHMoXHJcbiAgICAgICAgIl9zaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wcyJcclxuICAgIClcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFByZWNlcnRpZmljYXRlU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBzKHt9KT4iLmZvcm1hdChcclxuICAgICAgICAgICAgbGlzdChzZWxmKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHR1cGxlKHNlbGYuX3NpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzKSlcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFByZWNlcnRpZmljYXRlU2lnbmVkQ2VydGlmaWNhdGVUaW1lc3RhbXBzKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYuX3NpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzXHJcbiAgICAgICAgICAgID09IG90aGVyLl9zaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wc1xyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX2V4dGVuc2lvbl92YWx1ZShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wcyhFeHRlbnNpb25UeXBlKTpcclxuICAgIG9pZCA9IEV4dGVuc2lvbk9JRC5TSUdORURfQ0VSVElGSUNBVEVfVElNRVNUQU1QU1xyXG5cclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHNpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzOiB0eXBpbmcuSXRlcmFibGVbXHJcbiAgICAgICAgICAgIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wXHJcbiAgICAgICAgXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wcyA9IGxpc3Qoc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHMpXHJcbiAgICAgICAgaWYgbm90IGFsbChcclxuICAgICAgICAgICAgaXNpbnN0YW5jZShzY3QsIFNpZ25lZENlcnRpZmljYXRlVGltZXN0YW1wKVxyXG4gICAgICAgICAgICBmb3Igc2N0IGluIHNpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIkV2ZXJ5IGl0ZW0gaW4gdGhlIHNpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzIGxpc3QgbXVzdCBiZSAiXHJcbiAgICAgICAgICAgICAgICAiYSBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX3NpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzID0gc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHNcclxuXHJcbiAgICBfX2xlbl9fLCBfX2l0ZXJfXywgX19nZXRpdGVtX18gPSBfbWFrZV9zZXF1ZW5jZV9tZXRob2RzKFxyXG4gICAgICAgICJfc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHMiXHJcbiAgICApXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcHMoe30pPiIuZm9ybWF0KGxpc3Qoc2VsZikpXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaCh0dXBsZShzZWxmLl9zaWduZWRfY2VydGlmaWNhdGVfdGltZXN0YW1wcykpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBTaWduZWRDZXJ0aWZpY2F0ZVRpbWVzdGFtcHMpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgc2VsZi5fc2lnbmVkX2NlcnRpZmljYXRlX3RpbWVzdGFtcHNcclxuICAgICAgICAgICAgPT0gb3RoZXIuX3NpZ25lZF9jZXJ0aWZpY2F0ZV90aW1lc3RhbXBzXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgT0NTUE5vbmNlKEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gT0NTUEV4dGVuc2lvbk9JRC5OT05DRVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBub25jZTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uobm9uY2UsIGJ5dGVzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJub25jZSBtdXN0IGJlIGJ5dGVzIilcclxuXHJcbiAgICAgICAgc2VsZi5fbm9uY2UgPSBub25jZVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgT0NTUE5vbmNlKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLm5vbmNlID09IG90aGVyLm5vbmNlXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChzZWxmLm5vbmNlKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8T0NTUE5vbmNlKG5vbmNlPXswLm5vbmNlIXJ9KT4iLmZvcm1hdChzZWxmKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG5vbmNlKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9ub25jZVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHJ1c3RfeDUwOS5lbmNvZGVfZXh0ZW5zaW9uX3ZhbHVlKHNlbGYpXHJcblxyXG5cclxuY2xhc3MgSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50KEV4dGVuc2lvblR5cGUpOlxyXG4gICAgb2lkID0gRXh0ZW5zaW9uT0lELklTU1VJTkdfRElTVFJJQlVUSU9OX1BPSU5UXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZnVsbF9uYW1lOiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkl0ZXJhYmxlW0dlbmVyYWxOYW1lXV0sXHJcbiAgICAgICAgcmVsYXRpdmVfbmFtZTogdHlwaW5nLk9wdGlvbmFsW1JlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVdLFxyXG4gICAgICAgIG9ubHlfY29udGFpbnNfdXNlcl9jZXJ0czogYm9vbCxcclxuICAgICAgICBvbmx5X2NvbnRhaW5zX2NhX2NlcnRzOiBib29sLFxyXG4gICAgICAgIG9ubHlfc29tZV9yZWFzb25zOiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkZyb3plblNldFtSZWFzb25GbGFnc11dLFxyXG4gICAgICAgIGluZGlyZWN0X2NybDogYm9vbCxcclxuICAgICAgICBvbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0czogYm9vbCxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBpZiBmdWxsX25hbWUgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgICAgIGZ1bGxfbmFtZSA9IGxpc3QoZnVsbF9uYW1lKVxyXG5cclxuICAgICAgICBpZiBvbmx5X3NvbWVfcmVhc29ucyBhbmQgKFxyXG4gICAgICAgICAgICBub3QgaXNpbnN0YW5jZShvbmx5X3NvbWVfcmVhc29ucywgZnJvemVuc2V0KVxyXG4gICAgICAgICAgICBvciBub3QgYWxsKGlzaW5zdGFuY2UoeCwgUmVhc29uRmxhZ3MpIGZvciB4IGluIG9ubHlfc29tZV9yZWFzb25zKVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJvbmx5X3NvbWVfcmVhc29ucyBtdXN0IGJlIE5vbmUgb3IgZnJvemVuc2V0IG9mIFJlYXNvbkZsYWdzIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIG9ubHlfc29tZV9yZWFzb25zIGFuZCAoXHJcbiAgICAgICAgICAgIFJlYXNvbkZsYWdzLnVuc3BlY2lmaWVkIGluIG9ubHlfc29tZV9yZWFzb25zXHJcbiAgICAgICAgICAgIG9yIFJlYXNvbkZsYWdzLnJlbW92ZV9mcm9tX2NybCBpbiBvbmx5X3NvbWVfcmVhc29uc1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAidW5zcGVjaWZpZWQgYW5kIHJlbW92ZV9mcm9tX2NybCBhcmUgbm90IHZhbGlkIHJlYXNvbnMgaW4gYW4gIlxyXG4gICAgICAgICAgICAgICAgIklzc3VpbmdEaXN0cmlidXRpb25Qb2ludCJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBub3QgKFxyXG4gICAgICAgICAgICBpc2luc3RhbmNlKG9ubHlfY29udGFpbnNfdXNlcl9jZXJ0cywgYm9vbClcclxuICAgICAgICAgICAgYW5kIGlzaW5zdGFuY2Uob25seV9jb250YWluc19jYV9jZXJ0cywgYm9vbClcclxuICAgICAgICAgICAgYW5kIGlzaW5zdGFuY2UoaW5kaXJlY3RfY3JsLCBib29sKVxyXG4gICAgICAgICAgICBhbmQgaXNpbnN0YW5jZShvbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0cywgYm9vbClcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAib25seV9jb250YWluc191c2VyX2NlcnRzLCBvbmx5X2NvbnRhaW5zX2NhX2NlcnRzLCAiXHJcbiAgICAgICAgICAgICAgICAiaW5kaXJlY3RfY3JsIGFuZCBvbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0cyAiXHJcbiAgICAgICAgICAgICAgICAibXVzdCBhbGwgYmUgYm9vbGVhbi4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgY3JsX2NvbnN0cmFpbnRzID0gW1xyXG4gICAgICAgICAgICBvbmx5X2NvbnRhaW5zX3VzZXJfY2VydHMsXHJcbiAgICAgICAgICAgIG9ubHlfY29udGFpbnNfY2FfY2VydHMsXHJcbiAgICAgICAgICAgIGluZGlyZWN0X2NybCxcclxuICAgICAgICAgICAgb25seV9jb250YWluc19hdHRyaWJ1dGVfY2VydHMsXHJcbiAgICAgICAgXVxyXG5cclxuICAgICAgICBpZiBsZW4oW3ggZm9yIHggaW4gY3JsX2NvbnN0cmFpbnRzIGlmIHhdKSA+IDE6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiT25seSBvbmUgb2YgdGhlIGZvbGxvd2luZyBjYW4gYmUgc2V0IHRvIFRydWU6ICJcclxuICAgICAgICAgICAgICAgICJvbmx5X2NvbnRhaW5zX3VzZXJfY2VydHMsIG9ubHlfY29udGFpbnNfY2FfY2VydHMsICJcclxuICAgICAgICAgICAgICAgICJpbmRpcmVjdF9jcmwsIG9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIG5vdCBhbnkoXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgIG9ubHlfY29udGFpbnNfdXNlcl9jZXJ0cyxcclxuICAgICAgICAgICAgICAgIG9ubHlfY29udGFpbnNfY2FfY2VydHMsXHJcbiAgICAgICAgICAgICAgICBpbmRpcmVjdF9jcmwsXHJcbiAgICAgICAgICAgICAgICBvbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0cyxcclxuICAgICAgICAgICAgICAgIGZ1bGxfbmFtZSxcclxuICAgICAgICAgICAgICAgIHJlbGF0aXZlX25hbWUsXHJcbiAgICAgICAgICAgICAgICBvbmx5X3NvbWVfcmVhc29ucyxcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiQ2Fubm90IGNyZWF0ZSBlbXB0eSBleHRlbnNpb246ICJcclxuICAgICAgICAgICAgICAgICJpZiBvbmx5X2NvbnRhaW5zX3VzZXJfY2VydHMsIG9ubHlfY29udGFpbnNfY2FfY2VydHMsICJcclxuICAgICAgICAgICAgICAgICJpbmRpcmVjdF9jcmwsIGFuZCBvbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0cyBhcmUgYWxsIEZhbHNlIlxyXG4gICAgICAgICAgICAgICAgIiwgdGhlbiBlaXRoZXIgZnVsbF9uYW1lLCByZWxhdGl2ZV9uYW1lLCBvciBvbmx5X3NvbWVfcmVhc29ucyAiXHJcbiAgICAgICAgICAgICAgICAibXVzdCBoYXZlIGEgdmFsdWUuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX29ubHlfY29udGFpbnNfdXNlcl9jZXJ0cyA9IG9ubHlfY29udGFpbnNfdXNlcl9jZXJ0c1xyXG4gICAgICAgIHNlbGYuX29ubHlfY29udGFpbnNfY2FfY2VydHMgPSBvbmx5X2NvbnRhaW5zX2NhX2NlcnRzXHJcbiAgICAgICAgc2VsZi5faW5kaXJlY3RfY3JsID0gaW5kaXJlY3RfY3JsXHJcbiAgICAgICAgc2VsZi5fb25seV9jb250YWluc19hdHRyaWJ1dGVfY2VydHMgPSBvbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0c1xyXG4gICAgICAgIHNlbGYuX29ubHlfc29tZV9yZWFzb25zID0gb25seV9zb21lX3JlYXNvbnNcclxuICAgICAgICBzZWxmLl9mdWxsX25hbWUgPSBmdWxsX25hbWVcclxuICAgICAgICBzZWxmLl9yZWxhdGl2ZV9uYW1lID0gcmVsYXRpdmVfbmFtZVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgIjxJc3N1aW5nRGlzdHJpYnV0aW9uUG9pbnQoZnVsbF9uYW1lPXswLmZ1bGxfbmFtZX0sICJcclxuICAgICAgICAgICAgInJlbGF0aXZlX25hbWU9ezAucmVsYXRpdmVfbmFtZX0sICJcclxuICAgICAgICAgICAgIm9ubHlfY29udGFpbnNfdXNlcl9jZXJ0cz17MC5vbmx5X2NvbnRhaW5zX3VzZXJfY2VydHN9LCAiXHJcbiAgICAgICAgICAgICJvbmx5X2NvbnRhaW5zX2NhX2NlcnRzPXswLm9ubHlfY29udGFpbnNfY2FfY2VydHN9LCAiXHJcbiAgICAgICAgICAgICJvbmx5X3NvbWVfcmVhc29ucz17MC5vbmx5X3NvbWVfcmVhc29uc30sICJcclxuICAgICAgICAgICAgImluZGlyZWN0X2NybD17MC5pbmRpcmVjdF9jcmx9LCAiXHJcbiAgICAgICAgICAgICJvbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0cz0iXHJcbiAgICAgICAgICAgICJ7MC5vbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0c30pPiIuZm9ybWF0KHNlbGYpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgSXNzdWluZ0Rpc3RyaWJ1dGlvblBvaW50KTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYuZnVsbF9uYW1lID09IG90aGVyLmZ1bGxfbmFtZVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5yZWxhdGl2ZV9uYW1lID09IG90aGVyLnJlbGF0aXZlX25hbWVcclxuICAgICAgICAgICAgYW5kIHNlbGYub25seV9jb250YWluc191c2VyX2NlcnRzID09IG90aGVyLm9ubHlfY29udGFpbnNfdXNlcl9jZXJ0c1xyXG4gICAgICAgICAgICBhbmQgc2VsZi5vbmx5X2NvbnRhaW5zX2NhX2NlcnRzID09IG90aGVyLm9ubHlfY29udGFpbnNfY2FfY2VydHNcclxuICAgICAgICAgICAgYW5kIHNlbGYub25seV9zb21lX3JlYXNvbnMgPT0gb3RoZXIub25seV9zb21lX3JlYXNvbnNcclxuICAgICAgICAgICAgYW5kIHNlbGYuaW5kaXJlY3RfY3JsID09IG90aGVyLmluZGlyZWN0X2NybFxyXG4gICAgICAgICAgICBhbmQgc2VsZi5vbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0c1xyXG4gICAgICAgICAgICA9PSBvdGhlci5vbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0c1xyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKFxyXG4gICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICBzZWxmLmZ1bGxfbmFtZSxcclxuICAgICAgICAgICAgICAgIHNlbGYucmVsYXRpdmVfbmFtZSxcclxuICAgICAgICAgICAgICAgIHNlbGYub25seV9jb250YWluc191c2VyX2NlcnRzLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5vbmx5X2NvbnRhaW5zX2NhX2NlcnRzLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5vbmx5X3NvbWVfcmVhc29ucyxcclxuICAgICAgICAgICAgICAgIHNlbGYuaW5kaXJlY3RfY3JsLFxyXG4gICAgICAgICAgICAgICAgc2VsZi5vbmx5X2NvbnRhaW5zX2F0dHJpYnV0ZV9jZXJ0cyxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIClcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBmdWxsX25hbWUoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5MaXN0W0dlbmVyYWxOYW1lXV06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2Z1bGxfbmFtZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHJlbGF0aXZlX25hbWUoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW1JlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9yZWxhdGl2ZV9uYW1lXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb25seV9jb250YWluc191c2VyX2NlcnRzKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29ubHlfY29udGFpbnNfdXNlcl9jZXJ0c1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9ubHlfY29udGFpbnNfY2FfY2VydHMoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fb25seV9jb250YWluc19jYV9jZXJ0c1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9ubHlfc29tZV9yZWFzb25zKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICApIC0+IHR5cGluZy5PcHRpb25hbFt0eXBpbmcuRnJvemVuU2V0W1JlYXNvbkZsYWdzXV06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29ubHlfc29tZV9yZWFzb25zXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgaW5kaXJlY3RfY3JsKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2luZGlyZWN0X2NybFxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzKHNlbGYpIC0+IGJvb2w6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX29ubHlfY29udGFpbnNfYXR0cmlidXRlX2NlcnRzXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gcnVzdF94NTA5LmVuY29kZV9leHRlbnNpb25fdmFsdWUoc2VsZilcclxuXHJcblxyXG5jbGFzcyBVbnJlY29nbml6ZWRFeHRlbnNpb24oRXh0ZW5zaW9uVHlwZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgb2lkOiBPYmplY3RJZGVudGlmaWVyLCB2YWx1ZTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob2lkLCBPYmplY3RJZGVudGlmaWVyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJvaWQgbXVzdCBiZSBhbiBPYmplY3RJZGVudGlmaWVyIilcclxuICAgICAgICBzZWxmLl9vaWQgPSBvaWRcclxuICAgICAgICBzZWxmLl92YWx1ZSA9IHZhbHVlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgb2lkKHNlbGYpIC0+IE9iamVjdElkZW50aWZpZXI6ICAjIHR5cGU6IGlnbm9yZVtvdmVycmlkZV1cclxuICAgICAgICByZXR1cm4gc2VsZi5fb2lkXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdmFsdWUoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbHVlXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAiPFVucmVjb2duaXplZEV4dGVuc2lvbihvaWQ9ezAub2lkfSwgIlxyXG4gICAgICAgICAgICAidmFsdWU9ezAudmFsdWUhcn0pPiIuZm9ybWF0KHNlbGYpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgVW5yZWNvZ25pemVkRXh0ZW5zaW9uKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLm9pZCA9PSBvdGhlci5vaWQgYW5kIHNlbGYudmFsdWUgPT0gb3RoZXIudmFsdWVcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKChzZWxmLm9pZCwgc2VsZi52YWx1ZSkpXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi52YWx1ZVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2NvbnN0YW50X3RpbWUucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGhtYWNcclxuXHJcblxyXG5kZWYgYnl0ZXNfZXEoYTogYnl0ZXMsIGI6IGJ5dGVzKSAtPiBib29sOlxyXG4gICAgaWYgbm90IGlzaW5zdGFuY2UoYSwgYnl0ZXMpIG9yIG5vdCBpc2luc3RhbmNlKGIsIGJ5dGVzKTpcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoImEgYW5kIGIgbXVzdCBiZSBieXRlcy4iKVxyXG5cclxuICAgIHJldHVybiBobWFjLmNvbXBhcmVfZGlnZXN0KGEsIGIpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkveDUwOS9nZW5lcmFsX25hbWUucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IGFiY1xyXG5pbXBvcnQgaXBhZGRyZXNzXHJcbmltcG9ydCB0eXBpbmdcclxuZnJvbSBlbWFpbC51dGlscyBpbXBvcnQgcGFyc2VhZGRyXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5Lm5hbWUgaW1wb3J0IE5hbWVcclxuZnJvbSBjcnlwdG9ncmFwaHkueDUwOS5vaWQgaW1wb3J0IE9iamVjdElkZW50aWZpZXJcclxuXHJcblxyXG5fSVBBRERSRVNTX1RZUEVTID0gdHlwaW5nLlVuaW9uW1xyXG4gICAgaXBhZGRyZXNzLklQdjRBZGRyZXNzLFxyXG4gICAgaXBhZGRyZXNzLklQdjZBZGRyZXNzLFxyXG4gICAgaXBhZGRyZXNzLklQdjROZXR3b3JrLFxyXG4gICAgaXBhZGRyZXNzLklQdjZOZXR3b3JrLFxyXG5dXHJcblxyXG5cclxuY2xhc3MgVW5zdXBwb3J0ZWRHZW5lcmFsTmFtZVR5cGUoRXhjZXB0aW9uKTpcclxuICAgIHBhc3NcclxuXHJcblxyXG5jbGFzcyBHZW5lcmFsTmFtZShtZXRhY2xhc3M9YWJjLkFCQ01ldGEpOlxyXG4gICAgQGFiYy5hYnN0cmFjdHByb3BlcnR5XHJcbiAgICBkZWYgdmFsdWUoc2VsZikgLT4gdHlwaW5nLkFueTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBSZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBvYmplY3RcclxuICAgICAgICAiIiJcclxuXHJcblxyXG5jbGFzcyBSRkM4MjJOYW1lKEdlbmVyYWxOYW1lKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZTogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIHN0cik6XHJcbiAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgIHZhbHVlLmVuY29kZSgiYXNjaWkiKVxyXG4gICAgICAgICAgICBleGNlcHQgVW5pY29kZUVuY29kZUVycm9yOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiUkZDODIyTmFtZSB2YWx1ZXMgc2hvdWxkIGJlIHBhc3NlZCBhcyBhbiBBLWxhYmVsIHN0cmluZy4gIlxyXG4gICAgICAgICAgICAgICAgICAgICJUaGlzIG1lYW5zIHVuaWNvZGUgY2hhcmFjdGVycyBzaG91bGQgYmUgZW5jb2RlZCB2aWEgIlxyXG4gICAgICAgICAgICAgICAgICAgICJhIGxpYnJhcnkgbGlrZSBpZG5hLiJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInZhbHVlIG11c3QgYmUgc3RyaW5nIilcclxuXHJcbiAgICAgICAgbmFtZSwgYWRkcmVzcyA9IHBhcnNlYWRkcih2YWx1ZSlcclxuICAgICAgICBpZiBuYW1lIG9yIG5vdCBhZGRyZXNzOlxyXG4gICAgICAgICAgICAjIHBhcnNlYWRkciBoYXMgZm91bmQgYSBuYW1lIChlLmcuIE5hbWUgPGVtYWlsPikgb3IgdGhlIGVudGlyZVxyXG4gICAgICAgICAgICAjIHZhbHVlIGlzIGFuIGVtcHR5IHN0cmluZy5cclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSW52YWxpZCByZmM4MjJuYW1lIHZhbHVlIilcclxuXHJcbiAgICAgICAgc2VsZi5fdmFsdWUgPSB2YWx1ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHZhbHVlKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBfaW5pdF93aXRob3V0X3ZhbGlkYXRpb24oY2xzLCB2YWx1ZTogc3RyKSAtPiAiUkZDODIyTmFtZSI6XHJcbiAgICAgICAgaW5zdGFuY2UgPSBjbHMuX19uZXdfXyhjbHMpXHJcbiAgICAgICAgaW5zdGFuY2UuX3ZhbHVlID0gdmFsdWVcclxuICAgICAgICByZXR1cm4gaW5zdGFuY2VcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFJGQzgyMk5hbWUodmFsdWU9ezAhcn0pPiIuZm9ybWF0KHNlbGYudmFsdWUpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBSRkM4MjJOYW1lKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLnZhbHVlID09IG90aGVyLnZhbHVlXHJcblxyXG4gICAgZGVmIF9faGFzaF9fKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gaGFzaChzZWxmLnZhbHVlKVxyXG5cclxuXHJcbmNsYXNzIEROU05hbWUoR2VuZXJhbE5hbWUpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZSh2YWx1ZSwgc3RyKTpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgdmFsdWUuZW5jb2RlKCJhc2NpaSIpXHJcbiAgICAgICAgICAgIGV4Y2VwdCBVbmljb2RlRW5jb2RlRXJyb3I6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJETlNOYW1lIHZhbHVlcyBzaG91bGQgYmUgcGFzc2VkIGFzIGFuIEEtbGFiZWwgc3RyaW5nLiAiXHJcbiAgICAgICAgICAgICAgICAgICAgIlRoaXMgbWVhbnMgdW5pY29kZSBjaGFyYWN0ZXJzIHNob3VsZCBiZSBlbmNvZGVkIHZpYSAiXHJcbiAgICAgICAgICAgICAgICAgICAgImEgbGlicmFyeSBsaWtlIGlkbmEuIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidmFsdWUgbXVzdCBiZSBzdHJpbmciKVxyXG5cclxuICAgICAgICBzZWxmLl92YWx1ZSA9IHZhbHVlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdmFsdWUoc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIF9pbml0X3dpdGhvdXRfdmFsaWRhdGlvbihjbHMsIHZhbHVlOiBzdHIpIC0+ICJETlNOYW1lIjpcclxuICAgICAgICBpbnN0YW5jZSA9IGNscy5fX25ld19fKGNscylcclxuICAgICAgICBpbnN0YW5jZS5fdmFsdWUgPSB2YWx1ZVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8RE5TTmFtZSh2YWx1ZT17MCFyfSk+Ii5mb3JtYXQoc2VsZi52YWx1ZSlcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIEROU05hbWUpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYudmFsdWUgPT0gb3RoZXIudmFsdWVcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYudmFsdWUpXHJcblxyXG5cclxuY2xhc3MgVW5pZm9ybVJlc291cmNlSWRlbnRpZmllcihHZW5lcmFsTmFtZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgdmFsdWU6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBzdHIpOlxyXG4gICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICB2YWx1ZS5lbmNvZGUoImFzY2lpIilcclxuICAgICAgICAgICAgZXhjZXB0IFVuaWNvZGVFbmNvZGVFcnJvcjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIlVSSSB2YWx1ZXMgc2hvdWxkIGJlIHBhc3NlZCBhcyBhbiBBLWxhYmVsIHN0cmluZy4gIlxyXG4gICAgICAgICAgICAgICAgICAgICJUaGlzIG1lYW5zIHVuaWNvZGUgY2hhcmFjdGVycyBzaG91bGQgYmUgZW5jb2RlZCB2aWEgIlxyXG4gICAgICAgICAgICAgICAgICAgICJhIGxpYnJhcnkgbGlrZSBpZG5hLiJcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInZhbHVlIG11c3QgYmUgc3RyaW5nIilcclxuXHJcbiAgICAgICAgc2VsZi5fdmFsdWUgPSB2YWx1ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHZhbHVlKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBfaW5pdF93aXRob3V0X3ZhbGlkYXRpb24oXHJcbiAgICAgICAgY2xzLCB2YWx1ZTogc3RyXHJcbiAgICApIC0+ICJVbmlmb3JtUmVzb3VyY2VJZGVudGlmaWVyIjpcclxuICAgICAgICBpbnN0YW5jZSA9IGNscy5fX25ld19fKGNscylcclxuICAgICAgICBpbnN0YW5jZS5fdmFsdWUgPSB2YWx1ZVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgcmV0dXJuICI8VW5pZm9ybVJlc291cmNlSWRlbnRpZmllcih2YWx1ZT17MCFyfSk+Ii5mb3JtYXQoc2VsZi52YWx1ZSlcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFVuaWZvcm1SZXNvdXJjZUlkZW50aWZpZXIpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYudmFsdWUgPT0gb3RoZXIudmFsdWVcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYudmFsdWUpXHJcblxyXG5cclxuY2xhc3MgRGlyZWN0b3J5TmFtZShHZW5lcmFsTmFtZSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgdmFsdWU6IE5hbWUpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodmFsdWUsIE5hbWUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInZhbHVlIG11c3QgYmUgYSBOYW1lIilcclxuXHJcbiAgICAgICAgc2VsZi5fdmFsdWUgPSB2YWx1ZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIHZhbHVlKHNlbGYpIC0+IE5hbWU6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbHVlXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxEaXJlY3RvcnlOYW1lKHZhbHVlPXt9KT4iLmZvcm1hdChzZWxmLnZhbHVlKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgRGlyZWN0b3J5TmFtZSk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi52YWx1ZSA9PSBvdGhlci52YWx1ZVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi52YWx1ZSlcclxuXHJcblxyXG5jbGFzcyBSZWdpc3RlcmVkSUQoR2VuZXJhbE5hbWUpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlOiBPYmplY3RJZGVudGlmaWVyKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHZhbHVlLCBPYmplY3RJZGVudGlmaWVyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ2YWx1ZSBtdXN0IGJlIGFuIE9iamVjdElkZW50aWZpZXIiKVxyXG5cclxuICAgICAgICBzZWxmLl92YWx1ZSA9IHZhbHVlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgdmFsdWUoc2VsZikgLT4gT2JqZWN0SWRlbnRpZmllcjpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFJlZ2lzdGVyZWRJRCh2YWx1ZT17fSk+Ii5mb3JtYXQoc2VsZi52YWx1ZSlcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFJlZ2lzdGVyZWRJRCk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi52YWx1ZSA9PSBvdGhlci52YWx1ZVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi52YWx1ZSlcclxuXHJcblxyXG5jbGFzcyBJUEFkZHJlc3MoR2VuZXJhbE5hbWUpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlOiBfSVBBRERSRVNTX1RZUEVTKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgaXBhZGRyZXNzLklQdjRBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgaXBhZGRyZXNzLklQdjZBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgaXBhZGRyZXNzLklQdjROZXR3b3JrLFxyXG4gICAgICAgICAgICAgICAgaXBhZGRyZXNzLklQdjZOZXR3b3JrLFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJ2YWx1ZSBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIGlwYWRkcmVzcy5JUHY0QWRkcmVzcywgIlxyXG4gICAgICAgICAgICAgICAgImlwYWRkcmVzcy5JUHY2QWRkcmVzcywgaXBhZGRyZXNzLklQdjROZXR3b3JrLCBvciAiXHJcbiAgICAgICAgICAgICAgICAiaXBhZGRyZXNzLklQdjZOZXR3b3JrIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX3ZhbHVlID0gdmFsdWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB2YWx1ZShzZWxmKSAtPiBfSVBBRERSRVNTX1RZUEVTOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZVxyXG5cclxuICAgIGRlZiBfcGFja2VkKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIHNlbGYudmFsdWUsIChpcGFkZHJlc3MuSVB2NEFkZHJlc3MsIGlwYWRkcmVzcy5JUHY2QWRkcmVzcylcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi52YWx1ZS5wYWNrZWRcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgc2VsZi52YWx1ZS5uZXR3b3JrX2FkZHJlc3MucGFja2VkICsgc2VsZi52YWx1ZS5uZXRtYXNrLnBhY2tlZFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxJUEFkZHJlc3ModmFsdWU9e30pPiIuZm9ybWF0KHNlbGYudmFsdWUpXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBJUEFkZHJlc3MpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYudmFsdWUgPT0gb3RoZXIudmFsdWVcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKHNlbGYudmFsdWUpXHJcblxyXG5cclxuY2xhc3MgT3RoZXJOYW1lKEdlbmVyYWxOYW1lKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0eXBlX2lkOiBPYmplY3RJZGVudGlmaWVyLCB2YWx1ZTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UodHlwZV9pZCwgT2JqZWN0SWRlbnRpZmllcik6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidHlwZV9pZCBtdXN0IGJlIGFuIE9iamVjdElkZW50aWZpZXIiKVxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHZhbHVlLCBieXRlcyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidmFsdWUgbXVzdCBiZSBhIGJpbmFyeSBzdHJpbmciKVxyXG5cclxuICAgICAgICBzZWxmLl90eXBlX2lkID0gdHlwZV9pZFxyXG4gICAgICAgIHNlbGYuX3ZhbHVlID0gdmFsdWVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB0eXBlX2lkKHNlbGYpIC0+IE9iamVjdElkZW50aWZpZXI6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3R5cGVfaWRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB2YWx1ZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fdmFsdWVcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPE90aGVyTmFtZSh0eXBlX2lkPXt9LCB2YWx1ZT17IXJ9KT4iLmZvcm1hdChcclxuICAgICAgICAgICAgc2VsZi50eXBlX2lkLCBzZWxmLnZhbHVlXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgT3RoZXJOYW1lKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLnR5cGVfaWQgPT0gb3RoZXIudHlwZV9pZCBhbmQgc2VsZi52YWx1ZSA9PSBvdGhlci52YWx1ZVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYudHlwZV9pZCwgc2VsZi52YWx1ZSkpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkveDUwOS9uYW1lLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IGJpbmFzY2lpXHJcbmltcG9ydCByZVxyXG5pbXBvcnQgc3lzXHJcbmltcG9ydCB0eXBpbmdcclxuaW1wb3J0IHdhcm5pbmdzXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeSBpbXBvcnQgdXRpbHNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJpbmRpbmdzLl9ydXN0IGltcG9ydCAoXHJcbiAgICB4NTA5IGFzIHJ1c3RfeDUwOSxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS54NTA5Lm9pZCBpbXBvcnQgTmFtZU9JRCwgT2JqZWN0SWRlbnRpZmllclxyXG5cclxuXHJcbmNsYXNzIF9BU04xVHlwZSh1dGlscy5FbnVtKTpcclxuICAgIEJpdFN0cmluZyA9IDNcclxuICAgIE9jdGV0U3RyaW5nID0gNFxyXG4gICAgVVRGOFN0cmluZyA9IDEyXHJcbiAgICBOdW1lcmljU3RyaW5nID0gMThcclxuICAgIFByaW50YWJsZVN0cmluZyA9IDE5XHJcbiAgICBUNjFTdHJpbmcgPSAyMFxyXG4gICAgSUE1U3RyaW5nID0gMjJcclxuICAgIFVUQ1RpbWUgPSAyM1xyXG4gICAgR2VuZXJhbGl6ZWRUaW1lID0gMjRcclxuICAgIFZpc2libGVTdHJpbmcgPSAyNlxyXG4gICAgVW5pdmVyc2FsU3RyaW5nID0gMjhcclxuICAgIEJNUFN0cmluZyA9IDMwXHJcblxyXG5cclxuX0FTTjFfVFlQRV9UT19FTlVNID0ge2kudmFsdWU6IGkgZm9yIGkgaW4gX0FTTjFUeXBlfVxyXG5fTkFNRU9JRF9ERUZBVUxUX1RZUEU6IHR5cGluZy5EaWN0W09iamVjdElkZW50aWZpZXIsIF9BU04xVHlwZV0gPSB7XHJcbiAgICBOYW1lT0lELkNPVU5UUllfTkFNRTogX0FTTjFUeXBlLlByaW50YWJsZVN0cmluZyxcclxuICAgIE5hbWVPSUQuSlVSSVNESUNUSU9OX0NPVU5UUllfTkFNRTogX0FTTjFUeXBlLlByaW50YWJsZVN0cmluZyxcclxuICAgIE5hbWVPSUQuU0VSSUFMX05VTUJFUjogX0FTTjFUeXBlLlByaW50YWJsZVN0cmluZyxcclxuICAgIE5hbWVPSUQuRE5fUVVBTElGSUVSOiBfQVNOMVR5cGUuUHJpbnRhYmxlU3RyaW5nLFxyXG4gICAgTmFtZU9JRC5FTUFJTF9BRERSRVNTOiBfQVNOMVR5cGUuSUE1U3RyaW5nLFxyXG4gICAgTmFtZU9JRC5ET01BSU5fQ09NUE9ORU5UOiBfQVNOMVR5cGUuSUE1U3RyaW5nLFxyXG59XHJcblxyXG4jIFR5cGUgYWxpYXNcclxuX09pZE5hbWVNYXAgPSB0eXBpbmcuTWFwcGluZ1tPYmplY3RJZGVudGlmaWVyLCBzdHJdXHJcblxyXG4jOiBTaG9ydCBhdHRyaWJ1dGUgbmFtZXMgZnJvbSBSRkMgNDUxNDpcclxuIzogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzQ1MTQjcGFnZS03XHJcbl9OQU1FT0lEX1RPX05BTUU6IF9PaWROYW1lTWFwID0ge1xyXG4gICAgTmFtZU9JRC5DT01NT05fTkFNRTogIkNOIixcclxuICAgIE5hbWVPSUQuTE9DQUxJVFlfTkFNRTogIkwiLFxyXG4gICAgTmFtZU9JRC5TVEFURV9PUl9QUk9WSU5DRV9OQU1FOiAiU1QiLFxyXG4gICAgTmFtZU9JRC5PUkdBTklaQVRJT05fTkFNRTogIk8iLFxyXG4gICAgTmFtZU9JRC5PUkdBTklaQVRJT05BTF9VTklUX05BTUU6ICJPVSIsXHJcbiAgICBOYW1lT0lELkNPVU5UUllfTkFNRTogIkMiLFxyXG4gICAgTmFtZU9JRC5TVFJFRVRfQUREUkVTUzogIlNUUkVFVCIsXHJcbiAgICBOYW1lT0lELkRPTUFJTl9DT01QT05FTlQ6ICJEQyIsXHJcbiAgICBOYW1lT0lELlVTRVJfSUQ6ICJVSUQiLFxyXG59XHJcbl9OQU1FX1RPX05BTUVPSUQgPSB7djogayBmb3IgaywgdiBpbiBfTkFNRU9JRF9UT19OQU1FLml0ZW1zKCl9XHJcblxyXG5cclxuZGVmIF9lc2NhcGVfZG5fdmFsdWUodmFsOiB0eXBpbmcuVW5pb25bc3RyLCBieXRlc10pIC0+IHN0cjpcclxuICAgICIiIkVzY2FwZSBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gUkZDNDUxNCBEaXN0aW5ndWlzaGVkIE5hbWUgdmFsdWUuIiIiXHJcblxyXG4gICAgaWYgbm90IHZhbDpcclxuICAgICAgICByZXR1cm4gIiJcclxuXHJcbiAgICAjIFJGQyA0NTE0IFNlY3Rpb24gMi40IGRlZmluZXMgdGhlIHZhbHVlIGFzIGJlaW5nIHRoZSAjIChVKzAwMjMpIGNoYXJhY3RlclxyXG4gICAgIyBmb2xsb3dlZCBieSB0aGUgaGV4YWRlY2ltYWwgZW5jb2Rpbmcgb2YgdGhlIG9jdGV0cy5cclxuICAgIGlmIGlzaW5zdGFuY2UodmFsLCBieXRlcyk6XHJcbiAgICAgICAgcmV0dXJuICIjIiArIGJpbmFzY2lpLmhleGxpZnkodmFsKS5kZWNvZGUoInV0ZjgiKVxyXG5cclxuICAgICMgU2VlIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM0NTE0I3NlY3Rpb24tMi40XHJcbiAgICB2YWwgPSB2YWwucmVwbGFjZSgiXFxcXCIsICJcXFxcXFxcXCIpXHJcbiAgICB2YWwgPSB2YWwucmVwbGFjZShcJyJcJywgXCdcXFxcIlwnKVxyXG4gICAgdmFsID0gdmFsLnJlcGxhY2UoIisiLCAiXFxcXCsiKVxyXG4gICAgdmFsID0gdmFsLnJlcGxhY2UoIiwiLCAiXFxcXCwiKVxyXG4gICAgdmFsID0gdmFsLnJlcGxhY2UoIjsiLCAiXFxcXDsiKVxyXG4gICAgdmFsID0gdmFsLnJlcGxhY2UoIjwiLCAiXFxcXDwiKVxyXG4gICAgdmFsID0gdmFsLnJlcGxhY2UoIj4iLCAiXFxcXD4iKVxyXG4gICAgdmFsID0gdmFsLnJlcGxhY2UoIlxcMCIsICJcXFxcMDAiKVxyXG5cclxuICAgIGlmIHZhbFswXSBpbiAoIiMiLCAiICIpOlxyXG4gICAgICAgIHZhbCA9ICJcXFxcIiArIHZhbFxyXG4gICAgaWYgdmFsWy0xXSA9PSAiICI6XHJcbiAgICAgICAgdmFsID0gdmFsWzotMV0gKyAiXFxcXCAiXHJcblxyXG4gICAgcmV0dXJuIHZhbFxyXG5cclxuXHJcbmRlZiBfdW5lc2NhcGVfZG5fdmFsdWUodmFsOiBzdHIpIC0+IHN0cjpcclxuICAgIGlmIG5vdCB2YWw6XHJcbiAgICAgICAgcmV0dXJuICIiXHJcblxyXG4gICAgIyBTZWUgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzQ1MTQjc2VjdGlvbi0zXHJcblxyXG4gICAgIyBzcGVjaWFsID0gZXNjYXBlZCAvIFNQQUNFIC8gU0hBUlAgLyBFUVVBTFNcclxuICAgICMgZXNjYXBlZCA9IERRVU9URSAvIFBMVVMgLyBDT01NQSAvIFNFTUkgLyBMQU5HTEUgLyBSQU5HTEVcclxuICAgIGRlZiBzdWIobSk6XHJcbiAgICAgICAgdmFsID0gbS5ncm91cCgxKVxyXG4gICAgICAgICMgUmVndWxhciBlc2NhcGVcclxuICAgICAgICBpZiBsZW4odmFsKSA9PSAxOlxyXG4gICAgICAgICAgICByZXR1cm4gdmFsXHJcbiAgICAgICAgIyBIZXgtdmFsdWUgc2NhcGVcclxuICAgICAgICByZXR1cm4gY2hyKGludCh2YWwsIDE2KSlcclxuXHJcbiAgICByZXR1cm4gX1JGQzQ1MTROYW1lUGFyc2VyLl9QQUlSX1JFLnN1YihzdWIsIHZhbClcclxuXHJcblxyXG5jbGFzcyBOYW1lQXR0cmlidXRlOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgb2lkOiBPYmplY3RJZGVudGlmaWVyLFxyXG4gICAgICAgIHZhbHVlOiB0eXBpbmcuVW5pb25bc3RyLCBieXRlc10sXHJcbiAgICAgICAgX3R5cGU6IHR5cGluZy5PcHRpb25hbFtfQVNOMVR5cGVdID0gTm9uZSxcclxuICAgICAgICAqLFxyXG4gICAgICAgIF92YWxpZGF0ZTogYm9vbCA9IFRydWUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob2lkLCBPYmplY3RJZGVudGlmaWVyKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIm9pZCBhcmd1bWVudCBtdXN0IGJlIGFuIE9iamVjdElkZW50aWZpZXIgaW5zdGFuY2UuIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYgX3R5cGUgPT0gX0FTTjFUeXBlLkJpdFN0cmluZzpcclxuICAgICAgICAgICAgaWYgb2lkICE9IE5hbWVPSUQuWDUwMF9VTklRVUVfSURFTlRJRklFUjpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAib2lkIG11c3QgYmUgWDUwMF9VTklRVUVfSURFTlRJRklFUiBmb3IgQml0U3RyaW5nIHR5cGUuIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh2YWx1ZSwgYnl0ZXMpOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ2YWx1ZSBtdXN0IGJlIGJ5dGVzIGZvciBCaXRTdHJpbmciKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHZhbHVlLCBzdHIpOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJ2YWx1ZSBhcmd1bWVudCBtdXN0IGJlIGEgc3RyIilcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBvaWQgPT0gTmFtZU9JRC5DT1VOVFJZX05BTUVcclxuICAgICAgICAgICAgb3Igb2lkID09IE5hbWVPSUQuSlVSSVNESUNUSU9OX0NPVU5UUllfTkFNRVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIGFzc2VydCBpc2luc3RhbmNlKHZhbHVlLCBzdHIpXHJcbiAgICAgICAgICAgIGNfbGVuID0gbGVuKHZhbHVlLmVuY29kZSgidXRmOCIpKVxyXG4gICAgICAgICAgICBpZiBjX2xlbiAhPSAyIGFuZCBfdmFsaWRhdGUgaXMgVHJ1ZTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIkNvdW50cnkgbmFtZSBtdXN0IGJlIGEgMiBjaGFyYWN0ZXIgY291bnRyeSBjb2RlIlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBlbGlmIGNfbGVuICE9IDI6XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKFxyXG4gICAgICAgICAgICAgICAgICAgICJDb3VudHJ5IG5hbWVzIHNob3VsZCBiZSB0d28gY2hhcmFjdGVycywgYnV0IHRoZSAiXHJcbiAgICAgICAgICAgICAgICAgICAgImF0dHJpYnV0ZSBpcyB7fSBjaGFyYWN0ZXJzIGluIGxlbmd0aC4iLmZvcm1hdChjX2xlbiksXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhY2tsZXZlbD0yLFxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAjIFRoZSBhcHByb3ByaWF0ZSBBU04xIHN0cmluZyB0eXBlIHZhcmllcyBieSBPSUQgYW5kIGlzIGRlZmluZWQgYWNyb3NzXHJcbiAgICAgICAgIyBtdWx0aXBsZSBSRkNzIGluY2x1ZGluZyAyNDU5LCAzMjgwLCBhbmQgNTI4MC4gSW4gZ2VuZXJhbCBVVEY4U3RyaW5nXHJcbiAgICAgICAgIyBpcyBwcmVmZXJyZWQgKDI0NTkpLCBidXQgMzI4MCBhbmQgNTI4MCBzcGVjaWZ5IHNldmVyYWwgT0lEcyB3aXRoXHJcbiAgICAgICAgIyBhbHRlcm5hdGUgdHlwZXMuIFRoaXMgbWVhbnMgd2hlbiB3ZSBzZWUgdGhlIHNlbnRpbmVsIHZhbHVlIHdlIG5lZWRcclxuICAgICAgICAjIHRvIGxvb2sgdXAgd2hldGhlciB0aGUgT0lEIGhhcyBhIG5vbi1VVEY4IHR5cGUuIElmIGl0IGRvZXMsIHNldCBpdFxyXG4gICAgICAgICMgdG8gdGhhdC4gT3RoZXJ3aXNlLCBVVEY4IVxyXG4gICAgICAgIGlmIF90eXBlIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIF90eXBlID0gX05BTUVPSURfREVGQVVMVF9UWVBFLmdldChvaWQsIF9BU04xVHlwZS5VVEY4U3RyaW5nKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShfdHlwZSwgX0FTTjFUeXBlKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJfdHlwZSBtdXN0IGJlIGZyb20gdGhlIF9BU04xVHlwZSBlbnVtIilcclxuXHJcbiAgICAgICAgc2VsZi5fb2lkID0gb2lkXHJcbiAgICAgICAgc2VsZi5fdmFsdWUgPSB2YWx1ZVxyXG4gICAgICAgIHNlbGYuX3R5cGUgPSBfdHlwZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIG9pZChzZWxmKSAtPiBPYmplY3RJZGVudGlmaWVyOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9vaWRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiB2YWx1ZShzZWxmKSAtPiB0eXBpbmcuVW5pb25bc3RyLCBieXRlc106XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbHVlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmZjNDUxNF9hdHRyaWJ1dGVfbmFtZShzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgVGhlIHNob3J0IGF0dHJpYnV0ZSBuYW1lIChmb3IgZXhhbXBsZSAiQ04iKSBpZiBhdmFpbGFibGUsXHJcbiAgICAgICAgb3RoZXJ3aXNlIHRoZSBPSUQgZG90dGVkIHN0cmluZy5cclxuICAgICAgICAiIiJcclxuICAgICAgICByZXR1cm4gX05BTUVPSURfVE9fTkFNRS5nZXQoc2VsZi5vaWQsIHNlbGYub2lkLmRvdHRlZF9zdHJpbmcpXHJcblxyXG4gICAgZGVmIHJmYzQ1MTRfc3RyaW5nKFxyXG4gICAgICAgIHNlbGYsIGF0dHJfbmFtZV9vdmVycmlkZXM6IHR5cGluZy5PcHRpb25hbFtfT2lkTmFtZU1hcF0gPSBOb25lXHJcbiAgICApIC0+IHN0cjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBGb3JtYXQgYXMgUkZDNDUxNCBEaXN0aW5ndWlzaGVkIE5hbWUgc3RyaW5nLlxyXG5cclxuICAgICAgICBVc2Ugc2hvcnQgYXR0cmlidXRlIG5hbWUgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIE9JRFxyXG4gICAgICAgIGRvdHRlZCBzdHJpbmcuXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgYXR0cl9uYW1lID0gKFxyXG4gICAgICAgICAgICBhdHRyX25hbWVfb3ZlcnJpZGVzLmdldChzZWxmLm9pZCkgaWYgYXR0cl9uYW1lX292ZXJyaWRlcyBlbHNlIE5vbmVcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgYXR0cl9uYW1lIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGF0dHJfbmFtZSA9IHNlbGYucmZjNDUxNF9hdHRyaWJ1dGVfbmFtZVxyXG5cclxuICAgICAgICByZXR1cm4gZiJ7YXR0cl9uYW1lfT17X2VzY2FwZV9kbl92YWx1ZShzZWxmLnZhbHVlKX0iXHJcblxyXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcjogb2JqZWN0KSAtPiBib29sOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKG90aGVyLCBOYW1lQXR0cmlidXRlKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLm9pZCA9PSBvdGhlci5vaWQgYW5kIHNlbGYudmFsdWUgPT0gb3RoZXIudmFsdWVcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBoYXNoKChzZWxmLm9pZCwgc2VsZi52YWx1ZSkpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxOYW1lQXR0cmlidXRlKG9pZD17MC5vaWR9LCB2YWx1ZT17MC52YWx1ZSFyfSk+Ii5mb3JtYXQoc2VsZilcclxuXHJcblxyXG5jbGFzcyBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGF0dHJpYnV0ZXM6IHR5cGluZy5JdGVyYWJsZVtOYW1lQXR0cmlidXRlXSk6XHJcbiAgICAgICAgYXR0cmlidXRlcyA9IGxpc3QoYXR0cmlidXRlcylcclxuICAgICAgICBpZiBub3QgYXR0cmlidXRlczpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiYSByZWxhdGl2ZSBkaXN0aW5ndWlzaGVkIG5hbWUgY2Fubm90IGJlIGVtcHR5IilcclxuICAgICAgICBpZiBub3QgYWxsKGlzaW5zdGFuY2UoeCwgTmFtZUF0dHJpYnV0ZSkgZm9yIHggaW4gYXR0cmlidXRlcyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYXR0cmlidXRlcyBtdXN0IGJlIGFuIGl0ZXJhYmxlIG9mIE5hbWVBdHRyaWJ1dGUiKVxyXG5cclxuICAgICAgICAjIEtlZXAgbGlzdCBhbmQgZnJvemVuc2V0IHRvIHByZXNlcnZlIGF0dHJpYnV0ZSBvcmRlciB3aGVyZSBpdCBtYXR0ZXJzXHJcbiAgICAgICAgc2VsZi5fYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXNcclxuICAgICAgICBzZWxmLl9hdHRyaWJ1dGVfc2V0ID0gZnJvemVuc2V0KGF0dHJpYnV0ZXMpXHJcblxyXG4gICAgICAgIGlmIGxlbihzZWxmLl9hdHRyaWJ1dGVfc2V0KSAhPSBsZW4oYXR0cmlidXRlcyk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImR1cGxpY2F0ZSBhdHRyaWJ1dGVzIGFyZSBub3QgYWxsb3dlZCIpXHJcblxyXG4gICAgZGVmIGdldF9hdHRyaWJ1dGVzX2Zvcl9vaWQoXHJcbiAgICAgICAgc2VsZiwgb2lkOiBPYmplY3RJZGVudGlmaWVyXHJcbiAgICApIC0+IHR5cGluZy5MaXN0W05hbWVBdHRyaWJ1dGVdOlxyXG4gICAgICAgIHJldHVybiBbaSBmb3IgaSBpbiBzZWxmIGlmIGkub2lkID09IG9pZF1cclxuXHJcbiAgICBkZWYgcmZjNDUxNF9zdHJpbmcoXHJcbiAgICAgICAgc2VsZiwgYXR0cl9uYW1lX292ZXJyaWRlczogdHlwaW5nLk9wdGlvbmFsW19PaWROYW1lTWFwXSA9IE5vbmVcclxuICAgICkgLT4gc3RyOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIEZvcm1hdCBhcyBSRkM0NTE0IERpc3Rpbmd1aXNoZWQgTmFtZSBzdHJpbmcuXHJcblxyXG4gICAgICAgIFdpdGhpbiBlYWNoIFJETiwgYXR0cmlidXRlcyBhcmUgam9pbmVkIGJ5IFwnK1wnLCBhbHRob3VnaCB0aGF0IGlzIHJhcmVseVxyXG4gICAgICAgIHVzZWQgaW4gY2VydGlmaWNhdGVzLlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIHJldHVybiAiKyIuam9pbihcclxuICAgICAgICAgICAgYXR0ci5yZmM0NTE0X3N0cmluZyhhdHRyX25hbWVfb3ZlcnJpZGVzKVxyXG4gICAgICAgICAgICBmb3IgYXR0ciBpbiBzZWxmLl9hdHRyaWJ1dGVzXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZSk6XHJcbiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZFxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fYXR0cmlidXRlX3NldCA9PSBvdGhlci5fYXR0cmlidXRlX3NldFxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goc2VsZi5fYXR0cmlidXRlX3NldClcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gdHlwaW5nLkl0ZXJhdG9yW05hbWVBdHRyaWJ1dGVdOlxyXG4gICAgICAgIHJldHVybiBpdGVyKHNlbGYuX2F0dHJpYnV0ZXMpXHJcblxyXG4gICAgZGVmIF9fbGVuX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBsZW4oc2VsZi5fYXR0cmlidXRlcylcclxuXHJcbiAgICBkZWYgX19yZXByX18oc2VsZikgLT4gc3RyOlxyXG4gICAgICAgIHJldHVybiAiPFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWUoe30pPiIuZm9ybWF0KHNlbGYucmZjNDUxNF9zdHJpbmcoKSlcclxuXHJcblxyXG5jbGFzcyBOYW1lOlxyXG4gICAgQHR5cGluZy5vdmVybG9hZFxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGF0dHJpYnV0ZXM6IHR5cGluZy5JdGVyYWJsZVtOYW1lQXR0cmlidXRlXSkgLT4gTm9uZTpcclxuICAgICAgICAuLi5cclxuXHJcbiAgICBAdHlwaW5nLm92ZXJsb2FkXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZiwgYXR0cmlidXRlczogdHlwaW5nLkl0ZXJhYmxlW1JlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWVdXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgLi4uXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgYXR0cmlidXRlczogdHlwaW5nLkl0ZXJhYmxlW1xyXG4gICAgICAgICAgICB0eXBpbmcuVW5pb25bTmFtZUF0dHJpYnV0ZSwgUmVsYXRpdmVEaXN0aW5ndWlzaGVkTmFtZV1cclxuICAgICAgICBdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIGF0dHJpYnV0ZXMgPSBsaXN0KGF0dHJpYnV0ZXMpXHJcbiAgICAgICAgaWYgYWxsKGlzaW5zdGFuY2UoeCwgTmFtZUF0dHJpYnV0ZSkgZm9yIHggaW4gYXR0cmlidXRlcyk6XHJcbiAgICAgICAgICAgIHNlbGYuX2F0dHJpYnV0ZXMgPSBbXHJcbiAgICAgICAgICAgICAgICBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lKFt0eXBpbmcuY2FzdChOYW1lQXR0cmlidXRlLCB4KV0pXHJcbiAgICAgICAgICAgICAgICBmb3IgeCBpbiBhdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICBlbGlmIGFsbChpc2luc3RhbmNlKHgsIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWUpIGZvciB4IGluIGF0dHJpYnV0ZXMpOlxyXG4gICAgICAgICAgICBzZWxmLl9hdHRyaWJ1dGVzID0gdHlwaW5nLmNhc3QoXHJcbiAgICAgICAgICAgICAgICB0eXBpbmcuTGlzdFtSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lXSwgYXR0cmlidXRlc1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImF0dHJpYnV0ZXMgbXVzdCBiZSBhIGxpc3Qgb2YgTmFtZUF0dHJpYnV0ZSJcclxuICAgICAgICAgICAgICAgICIgb3IgYSBsaXN0IFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWUiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBmcm9tX3JmYzQ1MTRfc3RyaW5nKGNscywgZGF0YTogc3RyKSAtPiAiTmFtZSI6XHJcbiAgICAgICAgcmV0dXJuIF9SRkM0NTE0TmFtZVBhcnNlcihkYXRhKS5wYXJzZSgpXHJcblxyXG4gICAgZGVmIHJmYzQ1MTRfc3RyaW5nKFxyXG4gICAgICAgIHNlbGYsIGF0dHJfbmFtZV9vdmVycmlkZXM6IHR5cGluZy5PcHRpb25hbFtfT2lkTmFtZU1hcF0gPSBOb25lXHJcbiAgICApIC0+IHN0cjpcclxuICAgICAgICAiIiJcclxuICAgICAgICBGb3JtYXQgYXMgUkZDNDUxNCBEaXN0aW5ndWlzaGVkIE5hbWUgc3RyaW5nLlxyXG4gICAgICAgIEZvciBleGFtcGxlIFwnQ049Zm9vYmFyLmNvbSxPPUZvbyBDb3JwLEM9VVNcJ1xyXG5cclxuICAgICAgICBBbiBYLjUwOSBuYW1lIGlzIGEgdHdvLWxldmVsIHN0cnVjdHVyZTogYSBsaXN0IG9mIHNldHMgb2YgYXR0cmlidXRlcy5cclxuICAgICAgICBFYWNoIGxpc3QgZWxlbWVudCBpcyBzZXBhcmF0ZWQgYnkgXCcsXCcgYW5kIHdpdGhpbiBlYWNoIGxpc3QgZWxlbWVudCwgc2V0XHJcbiAgICAgICAgZWxlbWVudHMgYXJlIHNlcGFyYXRlZCBieSBcJytcJy4gVGhlIGxhdHRlciBpcyBhbG1vc3QgbmV2ZXIgdXNlZCBpblxyXG4gICAgICAgIHJlYWwgd29ybGQgY2VydGlmaWNhdGVzLiBBY2NvcmRpbmcgdG8gUkZDNDUxNCBzZWN0aW9uIDIuMSB0aGVcclxuICAgICAgICBSRE5TZXF1ZW5jZSBtdXN0IGJlIHJldmVyc2VkIHdoZW4gY29udmVydGluZyB0byBzdHJpbmcgcmVwcmVzZW50YXRpb24uXHJcbiAgICAgICAgIiIiXHJcbiAgICAgICAgcmV0dXJuICIsIi5qb2luKFxyXG4gICAgICAgICAgICBhdHRyLnJmYzQ1MTRfc3RyaW5nKGF0dHJfbmFtZV9vdmVycmlkZXMpXHJcbiAgICAgICAgICAgIGZvciBhdHRyIGluIHJldmVyc2VkKHNlbGYuX2F0dHJpYnV0ZXMpXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBnZXRfYXR0cmlidXRlc19mb3Jfb2lkKFxyXG4gICAgICAgIHNlbGYsIG9pZDogT2JqZWN0SWRlbnRpZmllclxyXG4gICAgKSAtPiB0eXBpbmcuTGlzdFtOYW1lQXR0cmlidXRlXTpcclxuICAgICAgICByZXR1cm4gW2kgZm9yIGkgaW4gc2VsZiBpZiBpLm9pZCA9PSBvaWRdXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgcmRucyhzZWxmKSAtPiB0eXBpbmcuTGlzdFtSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYXR0cmlidXRlc1xyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoc2VsZiwgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBydXN0X3g1MDkuZW5jb2RlX25hbWVfYnl0ZXMoc2VsZilcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIE5hbWUpOlxyXG4gICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWRcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2F0dHJpYnV0ZXMgPT0gb3RoZXIuX2F0dHJpYnV0ZXNcclxuXHJcbiAgICBkZWYgX19oYXNoX18oc2VsZikgLT4gaW50OlxyXG4gICAgICAgICMgVE9ETzogdGhpcyBpcyByZWxhdGl2ZWx5IGV4cGVuc2l2ZSwgaWYgdGhpcyBsb29rcyBsaWtlIGEgYm90dGxlbmVja1xyXG4gICAgICAgICMgZm9yIHlvdSwgY29uc2lkZXIgb3B0aW1pemluZyFcclxuICAgICAgICByZXR1cm4gaGFzaCh0dXBsZShzZWxmLl9hdHRyaWJ1dGVzKSlcclxuXHJcbiAgICBkZWYgX19pdGVyX18oc2VsZikgLT4gdHlwaW5nLkl0ZXJhdG9yW05hbWVBdHRyaWJ1dGVdOlxyXG4gICAgICAgIGZvciByZG4gaW4gc2VsZi5fYXR0cmlidXRlczpcclxuICAgICAgICAgICAgZm9yIGF2YSBpbiByZG46XHJcbiAgICAgICAgICAgICAgICB5aWVsZCBhdmFcclxuXHJcbiAgICBkZWYgX19sZW5fXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHN1bShsZW4ocmRuKSBmb3IgcmRuIGluIHNlbGYuX2F0dHJpYnV0ZXMpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZG5zID0gIiwiLmpvaW4oYXR0ci5yZmM0NTE0X3N0cmluZygpIGZvciBhdHRyIGluIHNlbGYuX2F0dHJpYnV0ZXMpXHJcbiAgICAgICAgcmV0dXJuICI8TmFtZSh7fSk+Ii5mb3JtYXQocmRucylcclxuXHJcblxyXG5jbGFzcyBfUkZDNDUxNE5hbWVQYXJzZXI6XHJcbiAgICBfT0lEX1JFID0gcmUuY29tcGlsZShyIigwfChbMS05XVxcZCopKShcXC4oMHwoWzEtOV1cXGQqKSkpKyIpXHJcbiAgICBfREVTQ1JfUkUgPSByZS5jb21waWxlKHIiW2EtekEtWl1bYS16QS1aXFxkLV0qIilcclxuXHJcbiAgICBfUEFJUiA9IHIiXFxcXChbXFxcXCAjPVxcIlxcKyw7PD5dfFtcXGRhLXpBLVpdezJ9KSJcclxuICAgIF9QQUlSX1JFID0gcmUuY29tcGlsZShfUEFJUilcclxuICAgIF9MVVRGMSA9IHIiW1xceDAxLVxceDFmXFx4MjFcXHgyNC1cXHgyQVxceDJELVxceDNBXFx4M0RcXHgzRi1cXHg1QlxceDVELVxceDdGXSJcclxuICAgIF9TVVRGMSA9IHIiW1xceDAxLVxceDIxXFx4MjMtXFx4MkFcXHgyRC1cXHgzQVxceDNEXFx4M0YtXFx4NUJcXHg1RC1cXHg3Rl0iXHJcbiAgICBfVFVURjEgPSByIltcXHgwMS1cXHgxRlxceDIxXFx4MjMtXFx4MkFcXHgyRC1cXHgzQVxceDNEXFx4M0YtXFx4NUJcXHg1RC1cXHg3Rl0iXHJcbiAgICBfVVRGTUIgPSByZiJbXFx4ODAte2NocihzeXMubWF4dW5pY29kZSl9XSJcclxuICAgIF9MRUFEQ0hBUiA9IHJmIntfTFVURjF9fHtfVVRGTUJ9IlxyXG4gICAgX1NUUklOR0NIQVIgPSByZiJ7X1NVVEYxfXx7X1VURk1CfSJcclxuICAgIF9UUkFJTENIQVIgPSByZiJ7X1RVVEYxfXx7X1VURk1CfSJcclxuICAgIF9TVFJJTkdfUkUgPSByZS5jb21waWxlKFxyXG4gICAgICAgIHJmIiIiXHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgICAoe19MRUFEQ0hBUn18e19QQUlSfSlcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgKHtfU1RSSU5HQ0hBUn18e19QQUlSfSkqXHJcbiAgICAgICAgICAgICAgICAoe19UUkFJTENIQVJ9fHtfUEFJUn0pXHJcbiAgICAgICAgICAgICk/XHJcbiAgICAgICAgKT9cclxuICAgICAgICAiIiIsXHJcbiAgICAgICAgcmUuVkVSQk9TRSxcclxuICAgIClcclxuICAgIF9IRVhTVFJJTkdfUkUgPSByZS5jb21waWxlKHIiIyhbXFxkYS16QS1aXXsyfSkrIilcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgZGF0YTogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2RhdGEgPSBkYXRhXHJcbiAgICAgICAgc2VsZi5faWR4ID0gMFxyXG5cclxuICAgIGRlZiBfaGFzX2RhdGEoc2VsZikgLT4gYm9vbDpcclxuICAgICAgICByZXR1cm4gc2VsZi5faWR4IDwgbGVuKHNlbGYuX2RhdGEpXHJcblxyXG4gICAgZGVmIF9wZWVrKHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFtzdHJdOlxyXG4gICAgICAgIGlmIHNlbGYuX2hhc19kYXRhKCk6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9kYXRhW3NlbGYuX2lkeF1cclxuICAgICAgICByZXR1cm4gTm9uZVxyXG5cclxuICAgIGRlZiBfcmVhZF9jaGFyKHNlbGYsIGNoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgc2VsZi5fcGVlaygpICE9IGNoOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yXHJcbiAgICAgICAgc2VsZi5faWR4ICs9IDFcclxuXHJcbiAgICBkZWYgX3JlYWRfcmUoc2VsZiwgcGF0KSAtPiBzdHI6XHJcbiAgICAgICAgbWF0Y2ggPSBwYXQubWF0Y2goc2VsZi5fZGF0YSwgcG9zPXNlbGYuX2lkeClcclxuICAgICAgICBpZiBtYXRjaCBpcyBOb25lOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yXHJcbiAgICAgICAgdmFsID0gbWF0Y2guZ3JvdXAoKVxyXG4gICAgICAgIHNlbGYuX2lkeCArPSBsZW4odmFsKVxyXG4gICAgICAgIHJldHVybiB2YWxcclxuXHJcbiAgICBkZWYgcGFyc2Uoc2VsZikgLT4gTmFtZTpcclxuICAgICAgICByZG5zID0gW3NlbGYuX3BhcnNlX3JkbigpXVxyXG5cclxuICAgICAgICB3aGlsZSBzZWxmLl9oYXNfZGF0YSgpOlxyXG4gICAgICAgICAgICBzZWxmLl9yZWFkX2NoYXIoIiwiKVxyXG4gICAgICAgICAgICByZG5zLmFwcGVuZChzZWxmLl9wYXJzZV9yZG4oKSlcclxuXHJcbiAgICAgICAgcmV0dXJuIE5hbWUocmRucylcclxuXHJcbiAgICBkZWYgX3BhcnNlX3JkbihzZWxmKSAtPiBSZWxhdGl2ZURpc3Rpbmd1aXNoZWROYW1lOlxyXG4gICAgICAgIG5hcyA9IFtzZWxmLl9wYXJzZV9uYSgpXVxyXG4gICAgICAgIHdoaWxlIHNlbGYuX3BlZWsoKSA9PSAiKyI6XHJcbiAgICAgICAgICAgIHNlbGYuX3JlYWRfY2hhcigiKyIpXHJcbiAgICAgICAgICAgIG5hcy5hcHBlbmQoc2VsZi5fcGFyc2VfbmEoKSlcclxuXHJcbiAgICAgICAgcmV0dXJuIFJlbGF0aXZlRGlzdGluZ3Vpc2hlZE5hbWUobmFzKVxyXG5cclxuICAgIGRlZiBfcGFyc2VfbmEoc2VsZikgLT4gTmFtZUF0dHJpYnV0ZTpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIG9pZF92YWx1ZSA9IHNlbGYuX3JlYWRfcmUoc2VsZi5fT0lEX1JFKVxyXG4gICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOlxyXG4gICAgICAgICAgICBuYW1lID0gc2VsZi5fcmVhZF9yZShzZWxmLl9ERVNDUl9SRSlcclxuICAgICAgICAgICAgb2lkID0gX05BTUVfVE9fTkFNRU9JRC5nZXQobmFtZSlcclxuICAgICAgICAgICAgaWYgb2lkIGlzIE5vbmU6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgb2lkID0gT2JqZWN0SWRlbnRpZmllcihvaWRfdmFsdWUpXHJcblxyXG4gICAgICAgIHNlbGYuX3JlYWRfY2hhcigiPSIpXHJcbiAgICAgICAgaWYgc2VsZi5fcGVlaygpID09ICIjIjpcclxuICAgICAgICAgICAgdmFsdWUgPSBzZWxmLl9yZWFkX3JlKHNlbGYuX0hFWFNUUklOR19SRSlcclxuICAgICAgICAgICAgdmFsdWUgPSBiaW5hc2NpaS51bmhleGxpZnkodmFsdWVbMTpdKS5kZWNvZGUoKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJhd192YWx1ZSA9IHNlbGYuX3JlYWRfcmUoc2VsZi5fU1RSSU5HX1JFKVxyXG4gICAgICAgICAgICB2YWx1ZSA9IF91bmVzY2FwZV9kbl92YWx1ZShyYXdfdmFsdWUpXHJcblxyXG4gICAgICAgIHJldHVybiBOYW1lQXR0cmlidXRlKG9pZCwgdmFsdWUpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkveDUwOS9vaWQucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuX29pZCBpbXBvcnQgKFxyXG4gICAgQXR0cmlidXRlT0lELFxyXG4gICAgQXV0aG9yaXR5SW5mb3JtYXRpb25BY2Nlc3NPSUQsXHJcbiAgICBDUkxFbnRyeUV4dGVuc2lvbk9JRCxcclxuICAgIENlcnRpZmljYXRlUG9saWNpZXNPSUQsXHJcbiAgICBFeHRlbmRlZEtleVVzYWdlT0lELFxyXG4gICAgRXh0ZW5zaW9uT0lELFxyXG4gICAgTmFtZU9JRCxcclxuICAgIE9DU1BFeHRlbnNpb25PSUQsXHJcbiAgICBPYmplY3RJZGVudGlmaWVyLFxyXG4gICAgU2lnbmF0dXJlQWxnb3JpdGhtT0lELFxyXG4gICAgU3ViamVjdEluZm9ybWF0aW9uQWNjZXNzT0lELFxyXG4pXHJcblxyXG5cclxuX19hbGxfXyA9IFtcclxuICAgICJBdHRyaWJ1dGVPSUQiLFxyXG4gICAgIkF1dGhvcml0eUluZm9ybWF0aW9uQWNjZXNzT0lEIixcclxuICAgICJDUkxFbnRyeUV4dGVuc2lvbk9JRCIsXHJcbiAgICAiQ2VydGlmaWNhdGVQb2xpY2llc09JRCIsXHJcbiAgICAiRXh0ZW5kZWRLZXlVc2FnZU9JRCIsXHJcbiAgICAiRXh0ZW5zaW9uT0lEIixcclxuICAgICJOYW1lT0lEIixcclxuICAgICJPQ1NQRXh0ZW5zaW9uT0lEIixcclxuICAgICJPYmplY3RJZGVudGlmaWVyIixcclxuICAgICJTaWduYXR1cmVBbGdvcml0aG1PSUQiLFxyXG4gICAgIlN1YmplY3RJbmZvcm1hdGlvbkFjY2Vzc09JRCIsXHJcbl1cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC9hZWFkLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuZXhjZXB0aW9ucyBpbXBvcnQgSW52YWxpZFRhZ1xyXG5cclxuXHJcbmlmIHR5cGluZy5UWVBFX0NIRUNLSU5HOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgQmFja2VuZFxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuY2lwaGVycy5hZWFkIGltcG9ydCAoXHJcbiAgICAgICAgQUVTQ0NNLFxyXG4gICAgICAgIEFFU0dDTSxcclxuICAgICAgICBBRVNPQ0IzLFxyXG4gICAgICAgIEFFU1NJVixcclxuICAgICAgICBDaGFDaGEyMFBvbHkxMzA1LFxyXG4gICAgKVxyXG5cclxuICAgIF9BRUFEX1RZUEVTID0gdHlwaW5nLlVuaW9uW1xyXG4gICAgICAgIEFFU0NDTSwgQUVTR0NNLCBBRVNPQ0IzLCBBRVNTSVYsIENoYUNoYTIwUG9seTEzMDVcclxuICAgIF1cclxuXHJcbl9FTkNSWVBUID0gMVxyXG5fREVDUllQVCA9IDBcclxuXHJcblxyXG5kZWYgX2FlYWRfY2lwaGVyX25hbWUoY2lwaGVyOiAiX0FFQURfVFlQRVMiKSAtPiBieXRlczpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmNpcGhlcnMuYWVhZCBpbXBvcnQgKFxyXG4gICAgICAgIEFFU0NDTSxcclxuICAgICAgICBBRVNHQ00sXHJcbiAgICAgICAgQUVTT0NCMyxcclxuICAgICAgICBBRVNTSVYsXHJcbiAgICAgICAgQ2hhQ2hhMjBQb2x5MTMwNSxcclxuICAgIClcclxuXHJcbiAgICBpZiBpc2luc3RhbmNlKGNpcGhlciwgQ2hhQ2hhMjBQb2x5MTMwNSk6XHJcbiAgICAgICAgcmV0dXJuIGIiY2hhY2hhMjAtcG9seTEzMDUiXHJcbiAgICBlbGlmIGlzaW5zdGFuY2UoY2lwaGVyLCBBRVNDQ00pOlxyXG4gICAgICAgIHJldHVybiBmImFlcy17bGVuKGNpcGhlci5fa2V5KSAqIDh9LWNjbSIuZW5jb2RlKCJhc2NpaSIpXHJcbiAgICBlbGlmIGlzaW5zdGFuY2UoY2lwaGVyLCBBRVNPQ0IzKTpcclxuICAgICAgICByZXR1cm4gZiJhZXMte2xlbihjaXBoZXIuX2tleSkgKiA4fS1vY2IiLmVuY29kZSgiYXNjaWkiKVxyXG4gICAgZWxpZiBpc2luc3RhbmNlKGNpcGhlciwgQUVTU0lWKTpcclxuICAgICAgICByZXR1cm4gZiJhZXMte2xlbihjaXBoZXIuX2tleSkgKiA4IC8vIDJ9LXNpdiIuZW5jb2RlKCJhc2NpaSIpXHJcbiAgICBlbHNlOlxyXG4gICAgICAgIGFzc2VydCBpc2luc3RhbmNlKGNpcGhlciwgQUVTR0NNKVxyXG4gICAgICAgIHJldHVybiBmImFlcy17bGVuKGNpcGhlci5fa2V5KSAqIDh9LWdjbSIuZW5jb2RlKCJhc2NpaSIpXHJcblxyXG5cclxuZGVmIF9ldnBfY2lwaGVyKGNpcGhlcl9uYW1lOiBieXRlcywgYmFja2VuZDogIkJhY2tlbmQiKTpcclxuICAgIGlmIGNpcGhlcl9uYW1lLmVuZHN3aXRoKGIiLXNpdiIpOlxyXG4gICAgICAgIGV2cF9jaXBoZXIgPSBiYWNrZW5kLl9saWIuRVZQX0NJUEhFUl9mZXRjaChcclxuICAgICAgICAgICAgYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIGNpcGhlcl9uYW1lLFxyXG4gICAgICAgICAgICBiYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICApXHJcbiAgICAgICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChldnBfY2lwaGVyICE9IGJhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGV2cF9jaXBoZXIgPSBiYWNrZW5kLl9mZmkuZ2MoZXZwX2NpcGhlciwgYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfZnJlZSlcclxuICAgIGVsc2U6XHJcbiAgICAgICAgZXZwX2NpcGhlciA9IGJhY2tlbmQuX2xpYi5FVlBfZ2V0X2NpcGhlcmJ5bmFtZShjaXBoZXJfbmFtZSlcclxuICAgICAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGV2cF9jaXBoZXIgIT0gYmFja2VuZC5fZmZpLk5VTEwpXHJcblxyXG4gICAgcmV0dXJuIGV2cF9jaXBoZXJcclxuXHJcblxyXG5kZWYgX2FlYWRfc2V0dXAoXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICBjaXBoZXJfbmFtZTogYnl0ZXMsXHJcbiAgICBrZXk6IGJ5dGVzLFxyXG4gICAgbm9uY2U6IGJ5dGVzLFxyXG4gICAgdGFnOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgdGFnX2xlbjogaW50LFxyXG4gICAgb3BlcmF0aW9uOiBpbnQsXHJcbik6XHJcbiAgICBldnBfY2lwaGVyID0gX2V2cF9jaXBoZXIoY2lwaGVyX25hbWUsIGJhY2tlbmQpXHJcbiAgICBjdHggPSBiYWNrZW5kLl9saWIuRVZQX0NJUEhFUl9DVFhfbmV3KClcclxuICAgIGN0eCA9IGJhY2tlbmQuX2ZmaS5nYyhjdHgsIGJhY2tlbmQuX2xpYi5FVlBfQ0lQSEVSX0NUWF9mcmVlKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9DaXBoZXJJbml0X2V4KFxyXG4gICAgICAgIGN0eCxcclxuICAgICAgICBldnBfY2lwaGVyLFxyXG4gICAgICAgIGJhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgIGJhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgIGJhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgIGludChvcGVyYXRpb24gPT0gX0VOQ1JZUFQpLFxyXG4gICAgKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfQ0lQSEVSX0NUWF9zZXRfa2V5X2xlbmd0aChjdHgsIGxlbihrZXkpKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfQ0lQSEVSX0NUWF9jdHJsKFxyXG4gICAgICAgIGN0eCxcclxuICAgICAgICBiYWNrZW5kLl9saWIuRVZQX0NUUkxfQUVBRF9TRVRfSVZMRU4sXHJcbiAgICAgICAgbGVuKG5vbmNlKSxcclxuICAgICAgICBiYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgIClcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICBpZiBvcGVyYXRpb24gPT0gX0RFQ1JZUFQ6XHJcbiAgICAgICAgYXNzZXJ0IHRhZyBpcyBub3QgTm9uZVxyXG4gICAgICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfQ0lQSEVSX0NUWF9jdHJsKFxyXG4gICAgICAgICAgICBjdHgsIGJhY2tlbmQuX2xpYi5FVlBfQ1RSTF9BRUFEX1NFVF9UQUcsIGxlbih0YWcpLCB0YWdcclxuICAgICAgICApXHJcbiAgICAgICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuICAgIGVsaWYgY2lwaGVyX25hbWUuZW5kc3dpdGgoYiItY2NtIik6XHJcbiAgICAgICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfQ1RYX2N0cmwoXHJcbiAgICAgICAgICAgIGN0eCwgYmFja2VuZC5fbGliLkVWUF9DVFJMX0FFQURfU0VUX1RBRywgdGFnX2xlbiwgYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuXHJcbiAgICBub25jZV9wdHIgPSBiYWNrZW5kLl9mZmkuZnJvbV9idWZmZXIobm9uY2UpXHJcbiAgICBrZXlfcHRyID0gYmFja2VuZC5fZmZpLmZyb21fYnVmZmVyKGtleSlcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfQ2lwaGVySW5pdF9leChcclxuICAgICAgICBjdHgsXHJcbiAgICAgICAgYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAga2V5X3B0cixcclxuICAgICAgICBub25jZV9wdHIsXHJcbiAgICAgICAgaW50KG9wZXJhdGlvbiA9PSBfRU5DUllQVCksXHJcbiAgICApXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgcmV0dXJuIGN0eFxyXG5cclxuXHJcbmRlZiBfc2V0X2xlbmd0aChiYWNrZW5kOiAiQmFja2VuZCIsIGN0eCwgZGF0YV9sZW46IGludCkgLT4gTm9uZTpcclxuICAgIGludHB0ciA9IGJhY2tlbmQuX2ZmaS5uZXcoImludCAqIilcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfQ2lwaGVyVXBkYXRlKFxyXG4gICAgICAgIGN0eCwgYmFja2VuZC5fZmZpLk5VTEwsIGludHB0ciwgYmFja2VuZC5fZmZpLk5VTEwsIGRhdGFfbGVuXHJcbiAgICApXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG5cclxuXHJcbmRlZiBfcHJvY2Vzc19hYWQoYmFja2VuZDogIkJhY2tlbmQiLCBjdHgsIGFzc29jaWF0ZWRfZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICBvdXRsZW4gPSBiYWNrZW5kLl9mZmkubmV3KCJpbnQgKiIpXHJcbiAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX0NpcGhlclVwZGF0ZShcclxuICAgICAgICBjdHgsIGJhY2tlbmQuX2ZmaS5OVUxMLCBvdXRsZW4sIGFzc29jaWF0ZWRfZGF0YSwgbGVuKGFzc29jaWF0ZWRfZGF0YSlcclxuICAgIClcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcblxyXG5cclxuZGVmIF9wcm9jZXNzX2RhdGEoYmFja2VuZDogIkJhY2tlbmQiLCBjdHgsIGRhdGE6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgIG91dGxlbiA9IGJhY2tlbmQuX2ZmaS5uZXcoImludCAqIilcclxuICAgIGJ1ZiA9IGJhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIGxlbihkYXRhKSlcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfQ2lwaGVyVXBkYXRlKGN0eCwgYnVmLCBvdXRsZW4sIGRhdGEsIGxlbihkYXRhKSlcclxuICAgIGlmIHJlcyA9PSAwOlxyXG4gICAgICAgICMgQUVTIFNJViBjYW4gZXJyb3IgaGVyZSBpZiB0aGUgZGF0YSBpcyBpbnZhbGlkIG9uIGRlY3J5cHRcclxuICAgICAgICBiYWNrZW5kLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgcmFpc2UgSW52YWxpZFRhZ1xyXG4gICAgcmV0dXJuIGJhY2tlbmQuX2ZmaS5idWZmZXIoYnVmLCBvdXRsZW5bMF0pWzpdXHJcblxyXG5cclxuZGVmIF9lbmNyeXB0KFxyXG4gICAgYmFja2VuZDogIkJhY2tlbmQiLFxyXG4gICAgY2lwaGVyOiAiX0FFQURfVFlQRVMiLFxyXG4gICAgbm9uY2U6IGJ5dGVzLFxyXG4gICAgZGF0YTogYnl0ZXMsXHJcbiAgICBhc3NvY2lhdGVkX2RhdGE6IHR5cGluZy5MaXN0W2J5dGVzXSxcclxuICAgIHRhZ19sZW5ndGg6IGludCxcclxuKSAtPiBieXRlczpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmNpcGhlcnMuYWVhZCBpbXBvcnQgQUVTQ0NNLCBBRVNTSVZcclxuXHJcbiAgICBjaXBoZXJfbmFtZSA9IF9hZWFkX2NpcGhlcl9uYW1lKGNpcGhlcilcclxuICAgIGN0eCA9IF9hZWFkX3NldHVwKFxyXG4gICAgICAgIGJhY2tlbmQsIGNpcGhlcl9uYW1lLCBjaXBoZXIuX2tleSwgbm9uY2UsIE5vbmUsIHRhZ19sZW5ndGgsIF9FTkNSWVBUXHJcbiAgICApXHJcbiAgICAjIENDTSByZXF1aXJlcyB1cyB0byBwYXNzIHRoZSBsZW5ndGggb2YgdGhlIGRhdGEgYmVmb3JlIHByb2Nlc3NpbmcgYW55dGhpbmdcclxuICAgICMgSG93ZXZlciBjYWxsaW5nIHRoaXMgd2l0aCBhbnkgb3RoZXIgQUVBRCByZXN1bHRzIGluIGFuIGVycm9yXHJcbiAgICBpZiBpc2luc3RhbmNlKGNpcGhlciwgQUVTQ0NNKTpcclxuICAgICAgICBfc2V0X2xlbmd0aChiYWNrZW5kLCBjdHgsIGxlbihkYXRhKSlcclxuXHJcbiAgICBmb3IgYWQgaW4gYXNzb2NpYXRlZF9kYXRhOlxyXG4gICAgICAgIF9wcm9jZXNzX2FhZChiYWNrZW5kLCBjdHgsIGFkKVxyXG4gICAgcHJvY2Vzc2VkX2RhdGEgPSBfcHJvY2Vzc19kYXRhKGJhY2tlbmQsIGN0eCwgZGF0YSlcclxuICAgIG91dGxlbiA9IGJhY2tlbmQuX2ZmaS5uZXcoImludCAqIilcclxuICAgICMgQWxsIEFFQURzIHdlIHN1cHBvcnQgYmVzaWRlcyBPQ0IgYXJlIHN0cmVhbWluZyBzbyB0aGV5IHJldHVybiBub3RoaW5nXHJcbiAgICAjIGluIGZpbmFsaXphdGlvbi4gT0NCIGNhbiByZXR1cm4gdXAgdG8gKDE2IGJ5dGUgYmxvY2sgLSAxKSBieXRlcyBzb1xyXG4gICAgIyB3ZSBuZWVkIGEgYnVmZmVyIGhlcmUgdG9vLlxyXG4gICAgYnVmID0gYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhcltdIiwgMTYpXHJcbiAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX0NpcGhlckZpbmFsX2V4KGN0eCwgYnVmLCBvdXRsZW4pXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgcHJvY2Vzc2VkX2RhdGEgKz0gYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYsIG91dGxlblswXSlbOl1cclxuICAgIHRhZ19idWYgPSBiYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCB0YWdfbGVuZ3RoKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9DSVBIRVJfQ1RYX2N0cmwoXHJcbiAgICAgICAgY3R4LCBiYWNrZW5kLl9saWIuRVZQX0NUUkxfQUVBRF9HRVRfVEFHLCB0YWdfbGVuZ3RoLCB0YWdfYnVmXHJcbiAgICApXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgdGFnID0gYmFja2VuZC5fZmZpLmJ1ZmZlcih0YWdfYnVmKVs6XVxyXG5cclxuICAgIGlmIGlzaW5zdGFuY2UoY2lwaGVyLCBBRVNTSVYpOlxyXG4gICAgICAgICMgUkZDIDUyOTcgZGVmaW5lcyB0aGUgb3V0cHV0IGFzIElWIHx8IEMsIHdoZXJlIHRoZSB0YWcgd2UgZ2VuZXJhdGUgaXNcclxuICAgICAgICAjIHRoZSAiSVYiIGFuZCBDIGlzIHRoZSBjaXBoZXJ0ZXh0LiBUaGlzIGlzIHRoZSBvcHBvc2l0ZSBvZiBvdXJcclxuICAgICAgICAjIG90aGVyIEFFQURzLCB3aGljaCBhcmUgQ2lwaGVydGV4dCB8fCBUYWdcclxuICAgICAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGxlbih0YWcpID09IDE2KVxyXG4gICAgICAgIHJldHVybiB0YWcgKyBwcm9jZXNzZWRfZGF0YVxyXG4gICAgZWxzZTpcclxuICAgICAgICByZXR1cm4gcHJvY2Vzc2VkX2RhdGEgKyB0YWdcclxuXHJcblxyXG5kZWYgX2RlY3J5cHQoXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICBjaXBoZXI6ICJfQUVBRF9UWVBFUyIsXHJcbiAgICBub25jZTogYnl0ZXMsXHJcbiAgICBkYXRhOiBieXRlcyxcclxuICAgIGFzc29jaWF0ZWRfZGF0YTogdHlwaW5nLkxpc3RbYnl0ZXNdLFxyXG4gICAgdGFnX2xlbmd0aDogaW50LFxyXG4pIC0+IGJ5dGVzOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuY2lwaGVycy5hZWFkIGltcG9ydCBBRVNDQ00sIEFFU1NJVlxyXG5cclxuICAgIGlmIGxlbihkYXRhKSA8IHRhZ19sZW5ndGg6XHJcbiAgICAgICAgcmFpc2UgSW52YWxpZFRhZ1xyXG5cclxuICAgIGlmIGlzaW5zdGFuY2UoY2lwaGVyLCBBRVNTSVYpOlxyXG4gICAgICAgICMgUkZDIDUyOTcgZGVmaW5lcyB0aGUgb3V0cHV0IGFzIElWIHx8IEMsIHdoZXJlIHRoZSB0YWcgd2UgZ2VuZXJhdGUgaXNcclxuICAgICAgICAjIHRoZSAiSVYiIGFuZCBDIGlzIHRoZSBjaXBoZXJ0ZXh0LiBUaGlzIGlzIHRoZSBvcHBvc2l0ZSBvZiBvdXJcclxuICAgICAgICAjIG90aGVyIEFFQURzLCB3aGljaCBhcmUgQ2lwaGVydGV4dCB8fCBUYWdcclxuICAgICAgICB0YWcgPSBkYXRhWzp0YWdfbGVuZ3RoXVxyXG4gICAgICAgIGRhdGEgPSBkYXRhW3RhZ19sZW5ndGg6XVxyXG4gICAgZWxzZTpcclxuICAgICAgICB0YWcgPSBkYXRhWy10YWdfbGVuZ3RoOl1cclxuICAgICAgICBkYXRhID0gZGF0YVs6LXRhZ19sZW5ndGhdXHJcbiAgICBjaXBoZXJfbmFtZSA9IF9hZWFkX2NpcGhlcl9uYW1lKGNpcGhlcilcclxuICAgIGN0eCA9IF9hZWFkX3NldHVwKFxyXG4gICAgICAgIGJhY2tlbmQsIGNpcGhlcl9uYW1lLCBjaXBoZXIuX2tleSwgbm9uY2UsIHRhZywgdGFnX2xlbmd0aCwgX0RFQ1JZUFRcclxuICAgIClcclxuICAgICMgQ0NNIHJlcXVpcmVzIHVzIHRvIHBhc3MgdGhlIGxlbmd0aCBvZiB0aGUgZGF0YSBiZWZvcmUgcHJvY2Vzc2luZyBhbnl0aGluZ1xyXG4gICAgIyBIb3dldmVyIGNhbGxpbmcgdGhpcyB3aXRoIGFueSBvdGhlciBBRUFEIHJlc3VsdHMgaW4gYW4gZXJyb3JcclxuICAgIGlmIGlzaW5zdGFuY2UoY2lwaGVyLCBBRVNDQ00pOlxyXG4gICAgICAgIF9zZXRfbGVuZ3RoKGJhY2tlbmQsIGN0eCwgbGVuKGRhdGEpKVxyXG5cclxuICAgIGZvciBhZCBpbiBhc3NvY2lhdGVkX2RhdGE6XHJcbiAgICAgICAgX3Byb2Nlc3NfYWFkKGJhY2tlbmQsIGN0eCwgYWQpXHJcbiAgICAjIENDTSBoYXMgYSBkaWZmZXJlbnQgZXJyb3IgcGF0aCBpZiB0aGUgdGFnIGRvZXNuXCd0IG1hdGNoLiBFcnJvcnMgYXJlXHJcbiAgICAjIHJhaXNlZCBpbiBVcGRhdGUgYW5kIEZpbmFsIGlzIGlycmVsZXZhbnQuXHJcbiAgICBpZiBpc2luc3RhbmNlKGNpcGhlciwgQUVTQ0NNKTpcclxuICAgICAgICBvdXRsZW4gPSBiYWNrZW5kLl9mZmkubmV3KCJpbnQgKiIpXHJcbiAgICAgICAgYnVmID0gYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhcltdIiwgbGVuKGRhdGEpKVxyXG4gICAgICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfQ2lwaGVyVXBkYXRlKGN0eCwgYnVmLCBvdXRsZW4sIGRhdGEsIGxlbihkYXRhKSlcclxuICAgICAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICAgICAgYmFja2VuZC5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByYWlzZSBJbnZhbGlkVGFnXHJcblxyXG4gICAgICAgIHByb2Nlc3NlZF9kYXRhID0gYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYsIG91dGxlblswXSlbOl1cclxuICAgIGVsc2U6XHJcbiAgICAgICAgcHJvY2Vzc2VkX2RhdGEgPSBfcHJvY2Vzc19kYXRhKGJhY2tlbmQsIGN0eCwgZGF0YSlcclxuICAgICAgICBvdXRsZW4gPSBiYWNrZW5kLl9mZmkubmV3KCJpbnQgKiIpXHJcbiAgICAgICAgIyBPQ0IgY2FuIHJldHVybiB1cCB0byAxNSBieXRlcyAoMTYgYnl0ZSBibG9jayAtIDEpIGluIGZpbmFsaXphdGlvblxyXG4gICAgICAgIGJ1ZiA9IGJhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIDE2KVxyXG4gICAgICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfQ2lwaGVyRmluYWxfZXgoY3R4LCBidWYsIG91dGxlbilcclxuICAgICAgICBwcm9jZXNzZWRfZGF0YSArPSBiYWNrZW5kLl9mZmkuYnVmZmVyKGJ1Ziwgb3V0bGVuWzBdKVs6XVxyXG4gICAgICAgIGlmIHJlcyA9PSAwOlxyXG4gICAgICAgICAgICBiYWNrZW5kLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgIHJhaXNlIEludmFsaWRUYWdcclxuXHJcbiAgICByZXR1cm4gcHJvY2Vzc2VkX2RhdGFcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9jaXBoZXJzL2FlYWQucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5cclxuaW1wb3J0IG9zXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCBleGNlcHRpb25zLCB1dGlsc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbCBpbXBvcnQgYWVhZFxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG5cclxuY2xhc3MgQ2hhQ2hhMjBQb2x5MTMwNTpcclxuICAgIF9NQVhfU0laRSA9IDIqKjMxIC0gMVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBrZXk6IGJ5dGVzKTpcclxuICAgICAgICBpZiBub3QgYmFja2VuZC5hZWFkX2NpcGhlcl9zdXBwb3J0ZWQoc2VsZik6XHJcbiAgICAgICAgICAgIHJhaXNlIGV4Y2VwdGlvbnMuVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiQ2hhQ2hhMjBQb2x5MTMwNSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgdmVyc2lvbiBvZiBPcGVuU1NMIixcclxuICAgICAgICAgICAgICAgIGV4Y2VwdGlvbnMuX1JlYXNvbnMuVU5TVVBQT1JURURfQ0lQSEVSLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgia2V5Iiwga2V5KVxyXG5cclxuICAgICAgICBpZiBsZW4oa2V5KSAhPSAzMjpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQ2hhQ2hhMjBQb2x5MTMwNSBrZXkgbXVzdCBiZSAzMiBieXRlcy4iKVxyXG5cclxuICAgICAgICBzZWxmLl9rZXkgPSBrZXlcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBnZW5lcmF0ZV9rZXkoY2xzKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gb3MudXJhbmRvbSgzMilcclxuXHJcbiAgICBkZWYgZW5jcnlwdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG5vbmNlOiBieXRlcyxcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBhc3NvY2lhdGVkX2RhdGE6IHR5cGluZy5PcHRpb25hbFtieXRlc10sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIGFzc29jaWF0ZWRfZGF0YSBpcyBOb25lOlxyXG4gICAgICAgICAgICBhc3NvY2lhdGVkX2RhdGEgPSBiIiJcclxuXHJcbiAgICAgICAgaWYgbGVuKGRhdGEpID4gc2VsZi5fTUFYX1NJWkUgb3IgbGVuKGFzc29jaWF0ZWRfZGF0YSkgPiBzZWxmLl9NQVhfU0laRTpcclxuICAgICAgICAgICAgIyBUaGlzIGlzIE92ZXJmbG93RXJyb3IgdG8gbWF0Y2ggd2hhdCBjZmZpIHdvdWxkIHJhaXNlXHJcbiAgICAgICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiRGF0YSBvciBhc3NvY2lhdGVkIGRhdGEgdG9vIGxvbmcuIE1heCAyKiozMSAtIDEgYnl0ZXMiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgc2VsZi5fY2hlY2tfcGFyYW1zKG5vbmNlLCBkYXRhLCBhc3NvY2lhdGVkX2RhdGEpXHJcbiAgICAgICAgcmV0dXJuIGFlYWQuX2VuY3J5cHQoYmFja2VuZCwgc2VsZiwgbm9uY2UsIGRhdGEsIFthc3NvY2lhdGVkX2RhdGFdLCAxNilcclxuXHJcbiAgICBkZWYgZGVjcnlwdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG5vbmNlOiBieXRlcyxcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBhc3NvY2lhdGVkX2RhdGE6IHR5cGluZy5PcHRpb25hbFtieXRlc10sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIGFzc29jaWF0ZWRfZGF0YSBpcyBOb25lOlxyXG4gICAgICAgICAgICBhc3NvY2lhdGVkX2RhdGEgPSBiIiJcclxuXHJcbiAgICAgICAgc2VsZi5fY2hlY2tfcGFyYW1zKG5vbmNlLCBkYXRhLCBhc3NvY2lhdGVkX2RhdGEpXHJcbiAgICAgICAgcmV0dXJuIGFlYWQuX2RlY3J5cHQoYmFja2VuZCwgc2VsZiwgbm9uY2UsIGRhdGEsIFthc3NvY2lhdGVkX2RhdGFdLCAxNilcclxuXHJcbiAgICBkZWYgX2NoZWNrX3BhcmFtcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG5vbmNlOiBieXRlcyxcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBhc3NvY2lhdGVkX2RhdGE6IGJ5dGVzLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoIm5vbmNlIiwgbm9uY2UpXHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzKCJkYXRhIiwgZGF0YSlcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXMoImFzc29jaWF0ZWRfZGF0YSIsIGFzc29jaWF0ZWRfZGF0YSlcclxuICAgICAgICBpZiBsZW4obm9uY2UpICE9IDEyOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJOb25jZSBtdXN0IGJlIDEyIGJ5dGVzIilcclxuXHJcblxyXG5jbGFzcyBBRVNDQ006XHJcbiAgICBfTUFYX1NJWkUgPSAyKiozMSAtIDFcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwga2V5OiBieXRlcywgdGFnX2xlbmd0aDogaW50ID0gMTYpOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoImtleSIsIGtleSlcclxuICAgICAgICBpZiBsZW4oa2V5KSBub3QgaW4gKDE2LCAyNCwgMzIpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBRVNDQ00ga2V5IG11c3QgYmUgMTI4LCAxOTIsIG9yIDI1NiBiaXRzLiIpXHJcblxyXG4gICAgICAgIHNlbGYuX2tleSA9IGtleVxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHRhZ19sZW5ndGgsIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigidGFnX2xlbmd0aCBtdXN0IGJlIGFuIGludGVnZXIiKVxyXG5cclxuICAgICAgICBpZiB0YWdfbGVuZ3RoIG5vdCBpbiAoNCwgNiwgOCwgMTAsIDEyLCAxNCwgMTYpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIHRhZ19sZW5ndGgiKVxyXG5cclxuICAgICAgICBzZWxmLl90YWdfbGVuZ3RoID0gdGFnX2xlbmd0aFxyXG5cclxuICAgICAgICBpZiBub3QgYmFja2VuZC5hZWFkX2NpcGhlcl9zdXBwb3J0ZWQoc2VsZik6XHJcbiAgICAgICAgICAgIHJhaXNlIGV4Y2VwdGlvbnMuVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiQUVTQ0NNIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyB2ZXJzaW9uIG9mIE9wZW5TU0wiLFxyXG4gICAgICAgICAgICAgICAgZXhjZXB0aW9ucy5fUmVhc29ucy5VTlNVUFBPUlRFRF9DSVBIRVIsXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBnZW5lcmF0ZV9rZXkoY2xzLCBiaXRfbGVuZ3RoOiBpbnQpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGJpdF9sZW5ndGgsIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYml0X2xlbmd0aCBtdXN0IGJlIGFuIGludGVnZXIiKVxyXG5cclxuICAgICAgICBpZiBiaXRfbGVuZ3RoIG5vdCBpbiAoMTI4LCAxOTIsIDI1Nik6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImJpdF9sZW5ndGggbXVzdCBiZSAxMjgsIDE5Miwgb3IgMjU2IilcclxuXHJcbiAgICAgICAgcmV0dXJuIG9zLnVyYW5kb20oYml0X2xlbmd0aCAvLyA4KVxyXG5cclxuICAgIGRlZiBlbmNyeXB0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbm9uY2U6IGJ5dGVzLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFzc29jaWF0ZWRfZGF0YTogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgYXNzb2NpYXRlZF9kYXRhIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGFzc29jaWF0ZWRfZGF0YSA9IGIiIlxyXG5cclxuICAgICAgICBpZiBsZW4oZGF0YSkgPiBzZWxmLl9NQVhfU0laRSBvciBsZW4oYXNzb2NpYXRlZF9kYXRhKSA+IHNlbGYuX01BWF9TSVpFOlxyXG4gICAgICAgICAgICAjIFRoaXMgaXMgT3ZlcmZsb3dFcnJvciB0byBtYXRjaCB3aGF0IGNmZmkgd291bGQgcmFpc2VcclxuICAgICAgICAgICAgcmFpc2UgT3ZlcmZsb3dFcnJvcihcclxuICAgICAgICAgICAgICAgICJEYXRhIG9yIGFzc29jaWF0ZWQgZGF0YSB0b28gbG9uZy4gTWF4IDIqKjMxIC0gMSBieXRlcyJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9jaGVja19wYXJhbXMobm9uY2UsIGRhdGEsIGFzc29jaWF0ZWRfZGF0YSlcclxuICAgICAgICBzZWxmLl92YWxpZGF0ZV9sZW5ndGhzKG5vbmNlLCBsZW4oZGF0YSkpXHJcbiAgICAgICAgcmV0dXJuIGFlYWQuX2VuY3J5cHQoXHJcbiAgICAgICAgICAgIGJhY2tlbmQsIHNlbGYsIG5vbmNlLCBkYXRhLCBbYXNzb2NpYXRlZF9kYXRhXSwgc2VsZi5fdGFnX2xlbmd0aFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgZGVjcnlwdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIG5vbmNlOiBieXRlcyxcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBhc3NvY2lhdGVkX2RhdGE6IHR5cGluZy5PcHRpb25hbFtieXRlc10sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIGFzc29jaWF0ZWRfZGF0YSBpcyBOb25lOlxyXG4gICAgICAgICAgICBhc3NvY2lhdGVkX2RhdGEgPSBiIiJcclxuXHJcbiAgICAgICAgc2VsZi5fY2hlY2tfcGFyYW1zKG5vbmNlLCBkYXRhLCBhc3NvY2lhdGVkX2RhdGEpXHJcbiAgICAgICAgcmV0dXJuIGFlYWQuX2RlY3J5cHQoXHJcbiAgICAgICAgICAgIGJhY2tlbmQsIHNlbGYsIG5vbmNlLCBkYXRhLCBbYXNzb2NpYXRlZF9kYXRhXSwgc2VsZi5fdGFnX2xlbmd0aFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX3ZhbGlkYXRlX2xlbmd0aHMoc2VsZiwgbm9uY2U6IGJ5dGVzLCBkYXRhX2xlbjogaW50KSAtPiBOb25lOlxyXG4gICAgICAgICMgRm9yIGluZm9ybWF0aW9uIGFib3V0IGNvbXB1dGluZyB0aGlzLCBzZWVcclxuICAgICAgICAjIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNjEwI3NlY3Rpb24tMi4xXHJcbiAgICAgICAgbF92YWwgPSAxNSAtIGxlbihub25jZSlcclxuICAgICAgICBpZiAyICoqICg4ICogbF92YWwpIDwgZGF0YV9sZW46XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkRhdGEgdG9vIGxvbmcgZm9yIG5vbmNlIilcclxuXHJcbiAgICBkZWYgX2NoZWNrX3BhcmFtcyhcclxuICAgICAgICBzZWxmLCBub25jZTogYnl0ZXMsIGRhdGE6IGJ5dGVzLCBhc3NvY2lhdGVkX2RhdGE6IGJ5dGVzXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgibm9uY2UiLCBub25jZSlcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXMoImRhdGEiLCBkYXRhKVxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygiYXNzb2NpYXRlZF9kYXRhIiwgYXNzb2NpYXRlZF9kYXRhKVxyXG4gICAgICAgIGlmIG5vdCA3IDw9IGxlbihub25jZSkgPD0gMTM6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIk5vbmNlIG11c3QgYmUgYmV0d2VlbiA3IGFuZCAxMyBieXRlcyIpXHJcblxyXG5cclxuY2xhc3MgQUVTR0NNOlxyXG4gICAgX01BWF9TSVpFID0gMioqMzEgLSAxXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGtleTogYnl0ZXMpOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoImtleSIsIGtleSlcclxuICAgICAgICBpZiBsZW4oa2V5KSBub3QgaW4gKDE2LCAyNCwgMzIpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBRVNHQ00ga2V5IG11c3QgYmUgMTI4LCAxOTIsIG9yIDI1NiBiaXRzLiIpXHJcblxyXG4gICAgICAgIHNlbGYuX2tleSA9IGtleVxyXG5cclxuICAgIEBjbGFzc21ldGhvZFxyXG4gICAgZGVmIGdlbmVyYXRlX2tleShjbHMsIGJpdF9sZW5ndGg6IGludCkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYml0X2xlbmd0aCwgaW50KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJiaXRfbGVuZ3RoIG11c3QgYmUgYW4gaW50ZWdlciIpXHJcblxyXG4gICAgICAgIGlmIGJpdF9sZW5ndGggbm90IGluICgxMjgsIDE5MiwgMjU2KTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiYml0X2xlbmd0aCBtdXN0IGJlIDEyOCwgMTkyLCBvciAyNTYiKVxyXG5cclxuICAgICAgICByZXR1cm4gb3MudXJhbmRvbShiaXRfbGVuZ3RoIC8vIDgpXHJcblxyXG4gICAgZGVmIGVuY3J5cHQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBub25jZTogYnl0ZXMsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYXNzb2NpYXRlZF9kYXRhOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiBhc3NvY2lhdGVkX2RhdGEgaXMgTm9uZTpcclxuICAgICAgICAgICAgYXNzb2NpYXRlZF9kYXRhID0gYiIiXHJcblxyXG4gICAgICAgIGlmIGxlbihkYXRhKSA+IHNlbGYuX01BWF9TSVpFIG9yIGxlbihhc3NvY2lhdGVkX2RhdGEpID4gc2VsZi5fTUFYX1NJWkU6XHJcbiAgICAgICAgICAgICMgVGhpcyBpcyBPdmVyZmxvd0Vycm9yIHRvIG1hdGNoIHdoYXQgY2ZmaSB3b3VsZCByYWlzZVxyXG4gICAgICAgICAgICByYWlzZSBPdmVyZmxvd0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgIkRhdGEgb3IgYXNzb2NpYXRlZCBkYXRhIHRvbyBsb25nLiBNYXggMioqMzEgLSAxIGJ5dGVzIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIHNlbGYuX2NoZWNrX3BhcmFtcyhub25jZSwgZGF0YSwgYXNzb2NpYXRlZF9kYXRhKVxyXG4gICAgICAgIHJldHVybiBhZWFkLl9lbmNyeXB0KGJhY2tlbmQsIHNlbGYsIG5vbmNlLCBkYXRhLCBbYXNzb2NpYXRlZF9kYXRhXSwgMTYpXHJcblxyXG4gICAgZGVmIGRlY3J5cHQoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBub25jZTogYnl0ZXMsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYXNzb2NpYXRlZF9kYXRhOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiBhc3NvY2lhdGVkX2RhdGEgaXMgTm9uZTpcclxuICAgICAgICAgICAgYXNzb2NpYXRlZF9kYXRhID0gYiIiXHJcblxyXG4gICAgICAgIHNlbGYuX2NoZWNrX3BhcmFtcyhub25jZSwgZGF0YSwgYXNzb2NpYXRlZF9kYXRhKVxyXG4gICAgICAgIHJldHVybiBhZWFkLl9kZWNyeXB0KGJhY2tlbmQsIHNlbGYsIG5vbmNlLCBkYXRhLCBbYXNzb2NpYXRlZF9kYXRhXSwgMTYpXHJcblxyXG4gICAgZGVmIF9jaGVja19wYXJhbXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBub25jZTogYnl0ZXMsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYXNzb2NpYXRlZF9kYXRhOiBieXRlcyxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJub25jZSIsIG5vbmNlKVxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygiZGF0YSIsIGRhdGEpXHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzKCJhc3NvY2lhdGVkX2RhdGEiLCBhc3NvY2lhdGVkX2RhdGEpXHJcbiAgICAgICAgaWYgbGVuKG5vbmNlKSA8IDggb3IgbGVuKG5vbmNlKSA+IDEyODpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTm9uY2UgbXVzdCBiZSBiZXR3ZWVuIDggYW5kIDEyOCBieXRlcyIpXHJcblxyXG5cclxuY2xhc3MgQUVTT0NCMzpcclxuICAgIF9NQVhfU0laRSA9IDIqKjMxIC0gMVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBrZXk6IGJ5dGVzKTpcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXNsaWtlKCJrZXkiLCBrZXkpXHJcbiAgICAgICAgaWYgbGVuKGtleSkgbm90IGluICgxNiwgMjQsIDMyKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQUVTT0NCMyBrZXkgbXVzdCBiZSAxMjgsIDE5Miwgb3IgMjU2IGJpdHMuIilcclxuXHJcbiAgICAgICAgc2VsZi5fa2V5ID0ga2V5XHJcblxyXG4gICAgICAgIGlmIG5vdCBiYWNrZW5kLmFlYWRfY2lwaGVyX3N1cHBvcnRlZChzZWxmKTpcclxuICAgICAgICAgICAgcmFpc2UgZXhjZXB0aW9ucy5VbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJPQ0IzIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyB2ZXJzaW9uIG9mIE9wZW5TU0wiLFxyXG4gICAgICAgICAgICAgICAgZXhjZXB0aW9ucy5fUmVhc29ucy5VTlNVUFBPUlRFRF9DSVBIRVIsXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICBAY2xhc3NtZXRob2RcclxuICAgIGRlZiBnZW5lcmF0ZV9rZXkoY2xzLCBiaXRfbGVuZ3RoOiBpbnQpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGJpdF9sZW5ndGgsIGludCk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYml0X2xlbmd0aCBtdXN0IGJlIGFuIGludGVnZXIiKVxyXG5cclxuICAgICAgICBpZiBiaXRfbGVuZ3RoIG5vdCBpbiAoMTI4LCAxOTIsIDI1Nik6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImJpdF9sZW5ndGggbXVzdCBiZSAxMjgsIDE5Miwgb3IgMjU2IilcclxuXHJcbiAgICAgICAgcmV0dXJuIG9zLnVyYW5kb20oYml0X2xlbmd0aCAvLyA4KVxyXG5cclxuICAgIGRlZiBlbmNyeXB0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbm9uY2U6IGJ5dGVzLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFzc29jaWF0ZWRfZGF0YTogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgYXNzb2NpYXRlZF9kYXRhIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGFzc29jaWF0ZWRfZGF0YSA9IGIiIlxyXG5cclxuICAgICAgICBpZiBsZW4oZGF0YSkgPiBzZWxmLl9NQVhfU0laRSBvciBsZW4oYXNzb2NpYXRlZF9kYXRhKSA+IHNlbGYuX01BWF9TSVpFOlxyXG4gICAgICAgICAgICAjIFRoaXMgaXMgT3ZlcmZsb3dFcnJvciB0byBtYXRjaCB3aGF0IGNmZmkgd291bGQgcmFpc2VcclxuICAgICAgICAgICAgcmFpc2UgT3ZlcmZsb3dFcnJvcihcclxuICAgICAgICAgICAgICAgICJEYXRhIG9yIGFzc29jaWF0ZWQgZGF0YSB0b28gbG9uZy4gTWF4IDIqKjMxIC0gMSBieXRlcyJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9jaGVja19wYXJhbXMobm9uY2UsIGRhdGEsIGFzc29jaWF0ZWRfZGF0YSlcclxuICAgICAgICByZXR1cm4gYWVhZC5fZW5jcnlwdChiYWNrZW5kLCBzZWxmLCBub25jZSwgZGF0YSwgW2Fzc29jaWF0ZWRfZGF0YV0sIDE2KVxyXG5cclxuICAgIGRlZiBkZWNyeXB0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbm9uY2U6IGJ5dGVzLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFzc29jaWF0ZWRfZGF0YTogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgYXNzb2NpYXRlZF9kYXRhIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGFzc29jaWF0ZWRfZGF0YSA9IGIiIlxyXG5cclxuICAgICAgICBzZWxmLl9jaGVja19wYXJhbXMobm9uY2UsIGRhdGEsIGFzc29jaWF0ZWRfZGF0YSlcclxuICAgICAgICByZXR1cm4gYWVhZC5fZGVjcnlwdChiYWNrZW5kLCBzZWxmLCBub25jZSwgZGF0YSwgW2Fzc29jaWF0ZWRfZGF0YV0sIDE2KVxyXG5cclxuICAgIGRlZiBfY2hlY2tfcGFyYW1zKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbm9uY2U6IGJ5dGVzLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFzc29jaWF0ZWRfZGF0YTogYnl0ZXMsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgibm9uY2UiLCBub25jZSlcclxuICAgICAgICB1dGlscy5fY2hlY2tfYnl0ZXMoImRhdGEiLCBkYXRhKVxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygiYXNzb2NpYXRlZF9kYXRhIiwgYXNzb2NpYXRlZF9kYXRhKVxyXG4gICAgICAgIGlmIGxlbihub25jZSkgPCAxMiBvciBsZW4obm9uY2UpID4gMTU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIk5vbmNlIG11c3QgYmUgYmV0d2VlbiAxMiBhbmQgMTUgYnl0ZXMiKVxyXG5cclxuXHJcbmNsYXNzIEFFU1NJVihvYmplY3QpOlxyXG4gICAgX01BWF9TSVpFID0gMioqMzEgLSAxXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGtleTogYnl0ZXMpOlxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlc2xpa2UoImtleSIsIGtleSlcclxuICAgICAgICBpZiBsZW4oa2V5KSBub3QgaW4gKDMyLCA0OCwgNjQpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJBRVNTSVYga2V5IG11c3QgYmUgMjU2LCAzODQsIG9yIDUxMiBiaXRzLiIpXHJcblxyXG4gICAgICAgIHNlbGYuX2tleSA9IGtleVxyXG5cclxuICAgICAgICBpZiBub3QgYmFja2VuZC5hZWFkX2NpcGhlcl9zdXBwb3J0ZWQoc2VsZik6XHJcbiAgICAgICAgICAgIHJhaXNlIGV4Y2VwdGlvbnMuVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiQUVTLVNJViBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgdmVyc2lvbiBvZiBPcGVuU1NMIixcclxuICAgICAgICAgICAgICAgIGV4Y2VwdGlvbnMuX1JlYXNvbnMuVU5TVVBQT1JURURfQ0lQSEVSLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgQGNsYXNzbWV0aG9kXHJcbiAgICBkZWYgZ2VuZXJhdGVfa2V5KGNscywgYml0X2xlbmd0aDogaW50KSAtPiBieXRlczpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShiaXRfbGVuZ3RoLCBpbnQpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImJpdF9sZW5ndGggbXVzdCBiZSBhbiBpbnRlZ2VyIilcclxuXHJcbiAgICAgICAgaWYgYml0X2xlbmd0aCBub3QgaW4gKDI1NiwgMzg0LCA1MTIpOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJiaXRfbGVuZ3RoIG11c3QgYmUgMjU2LCAzODQsIG9yIDUxMiIpXHJcblxyXG4gICAgICAgIHJldHVybiBvcy51cmFuZG9tKGJpdF9sZW5ndGggLy8gOClcclxuXHJcbiAgICBkZWYgZW5jcnlwdChcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFzc29jaWF0ZWRfZGF0YTogdHlwaW5nLk9wdGlvbmFsW3R5cGluZy5MaXN0W2J5dGVzXV0sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIGFzc29jaWF0ZWRfZGF0YSBpcyBOb25lOlxyXG4gICAgICAgICAgICBhc3NvY2lhdGVkX2RhdGEgPSBbXVxyXG5cclxuICAgICAgICBzZWxmLl9jaGVja19wYXJhbXMoZGF0YSwgYXNzb2NpYXRlZF9kYXRhKVxyXG5cclxuICAgICAgICBpZiBsZW4oZGF0YSkgPiBzZWxmLl9NQVhfU0laRSBvciBhbnkoXHJcbiAgICAgICAgICAgIGxlbihhZCkgPiBzZWxmLl9NQVhfU0laRSBmb3IgYWQgaW4gYXNzb2NpYXRlZF9kYXRhXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgIyBUaGlzIGlzIE92ZXJmbG93RXJyb3IgdG8gbWF0Y2ggd2hhdCBjZmZpIHdvdWxkIHJhaXNlXHJcbiAgICAgICAgICAgIHJhaXNlIE92ZXJmbG93RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiRGF0YSBvciBhc3NvY2lhdGVkIGRhdGEgdG9vIGxvbmcuIE1heCAyKiozMSAtIDEgYnl0ZXMiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIGFlYWQuX2VuY3J5cHQoYmFja2VuZCwgc2VsZiwgYiIiLCBkYXRhLCBhc3NvY2lhdGVkX2RhdGEsIDE2KVxyXG5cclxuICAgIGRlZiBkZWNyeXB0KFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYXNzb2NpYXRlZF9kYXRhOiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkxpc3RbYnl0ZXNdXSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgYXNzb2NpYXRlZF9kYXRhIGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGFzc29jaWF0ZWRfZGF0YSA9IFtdXHJcblxyXG4gICAgICAgIHNlbGYuX2NoZWNrX3BhcmFtcyhkYXRhLCBhc3NvY2lhdGVkX2RhdGEpXHJcblxyXG4gICAgICAgIHJldHVybiBhZWFkLl9kZWNyeXB0KGJhY2tlbmQsIHNlbGYsIGIiIiwgZGF0YSwgYXNzb2NpYXRlZF9kYXRhLCAxNilcclxuXHJcbiAgICBkZWYgX2NoZWNrX3BhcmFtcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIGFzc29jaWF0ZWRfZGF0YTogdHlwaW5nLkxpc3QsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzKCJkYXRhIiwgZGF0YSlcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhc3NvY2lhdGVkX2RhdGEsIGxpc3QpIG9yIG5vdCBhbGwoXHJcbiAgICAgICAgICAgIGlzaW5zdGFuY2UoeCwgYnl0ZXMpIGZvciB4IGluIGFzc29jaWF0ZWRfZGF0YVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYXNzb2NpYXRlZF9kYXRhIG11c3QgYmUgYSBsaXN0IG9mIGJ5dGVzIG9yIE5vbmUiKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL2NtYWMucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCAoXHJcbiAgICBJbnZhbGlkU2lnbmF0dXJlLFxyXG4gICAgVW5zdXBwb3J0ZWRBbGdvcml0aG0sXHJcbiAgICBfUmVhc29ucyxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgY29uc3RhbnRfdGltZVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5jaXBoZXJzLm1vZGVzIGltcG9ydCBDQkNcclxuXHJcbmlmIHR5cGluZy5UWVBFX0NIRUNLSU5HOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGNpcGhlcnNcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IEJhY2tlbmRcclxuXHJcblxyXG5jbGFzcyBfQ01BQ0NvbnRleHQ6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICAgICAgYWxnb3JpdGhtOiAiY2lwaGVycy5CbG9ja0NpcGhlckFsZ29yaXRobSIsXHJcbiAgICAgICAgY3R4PU5vbmUsXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQuY21hY19hbGdvcml0aG1fc3VwcG9ydGVkKGFsZ29yaXRobSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIlRoaXMgYmFja2VuZCBkb2VzIG5vdCBzdXBwb3J0IENNQUMuIixcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX0NJUEhFUixcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX2tleSA9IGFsZ29yaXRobS5rZXlcclxuICAgICAgICBzZWxmLl9hbGdvcml0aG0gPSBhbGdvcml0aG1cclxuICAgICAgICBzZWxmLl9vdXRwdXRfbGVuZ3RoID0gYWxnb3JpdGhtLmJsb2NrX3NpemUgLy8gOFxyXG5cclxuICAgICAgICBpZiBjdHggaXMgTm9uZTpcclxuICAgICAgICAgICAgcmVnaXN0cnkgPSBzZWxmLl9iYWNrZW5kLl9jaXBoZXJfcmVnaXN0cnlcclxuICAgICAgICAgICAgYWRhcHRlciA9IHJlZ2lzdHJ5W3R5cGUoYWxnb3JpdGhtKSwgQ0JDXVxyXG5cclxuICAgICAgICAgICAgZXZwX2NpcGhlciA9IGFkYXB0ZXIoc2VsZi5fYmFja2VuZCwgYWxnb3JpdGhtLCBDQkMpXHJcblxyXG4gICAgICAgICAgICBjdHggPSBzZWxmLl9iYWNrZW5kLl9saWIuQ01BQ19DVFhfbmV3KClcclxuXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoY3R4ICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgICAgICBjdHggPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoY3R4LCBzZWxmLl9iYWNrZW5kLl9saWIuQ01BQ19DVFhfZnJlZSlcclxuXHJcbiAgICAgICAgICAgIGtleV9wdHIgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZnJvbV9idWZmZXIoc2VsZi5fa2V5KVxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuQ01BQ19Jbml0KFxyXG4gICAgICAgICAgICAgICAgY3R4LFxyXG4gICAgICAgICAgICAgICAga2V5X3B0cixcclxuICAgICAgICAgICAgICAgIGxlbihzZWxmLl9rZXkpLFxyXG4gICAgICAgICAgICAgICAgZXZwX2NpcGhlcixcclxuICAgICAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgICAgIHNlbGYuX2N0eCA9IGN0eFxyXG5cclxuICAgIGRlZiB1cGRhdGUoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkNNQUNfVXBkYXRlKHNlbGYuX2N0eCwgZGF0YSwgbGVuKGRhdGEpKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcblxyXG4gICAgZGVmIGZpbmFsaXplKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIHNlbGYuX291dHB1dF9sZW5ndGgpXHJcbiAgICAgICAgbGVuZ3RoID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygic2l6ZV90ICoiLCBzZWxmLl9vdXRwdXRfbGVuZ3RoKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5DTUFDX0ZpbmFsKHNlbGYuX2N0eCwgYnVmLCBsZW5ndGgpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgc2VsZi5fY3R4ID0gTm9uZVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYpWzpdXHJcblxyXG4gICAgZGVmIGNvcHkoc2VsZikgLT4gIl9DTUFDQ29udGV4dCI6XHJcbiAgICAgICAgY29waWVkX2N0eCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5DTUFDX0NUWF9uZXcoKVxyXG4gICAgICAgIGNvcGllZF9jdHggPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoXHJcbiAgICAgICAgICAgIGNvcGllZF9jdHgsIHNlbGYuX2JhY2tlbmQuX2xpYi5DTUFDX0NUWF9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5DTUFDX0NUWF9jb3B5KGNvcGllZF9jdHgsIHNlbGYuX2N0eClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJldHVybiBfQ01BQ0NvbnRleHQoc2VsZi5fYmFja2VuZCwgc2VsZi5fYWxnb3JpdGhtLCBjdHg9Y29waWVkX2N0eClcclxuXHJcbiAgICBkZWYgdmVyaWZ5KHNlbGYsIHNpZ25hdHVyZTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgZGlnZXN0ID0gc2VsZi5maW5hbGl6ZSgpXHJcbiAgICAgICAgaWYgbm90IGNvbnN0YW50X3RpbWUuYnl0ZXNfZXEoZGlnZXN0LCBzaWduYXR1cmUpOlxyXG4gICAgICAgICAgICByYWlzZSBJbnZhbGlkU2lnbmF0dXJlKCJTaWduYXR1cmUgZGlkIG5vdCBtYXRjaCBkaWdlc3QuIilcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC9kaC5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IFVuc3VwcG9ydGVkQWxnb3JpdGhtLCBfUmVhc29uc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgc2VyaWFsaXphdGlvblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljIGltcG9ydCBkaFxyXG5cclxuXHJcbmlmIHR5cGluZy5UWVBFX0NIRUNLSU5HOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgQmFja2VuZFxyXG5cclxuXHJcbmRlZiBfZGhfcGFyYW1zX2R1cChkaF9jZGF0YSwgYmFja2VuZDogIkJhY2tlbmQiKTpcclxuICAgIGxpYiA9IGJhY2tlbmQuX2xpYlxyXG4gICAgZmZpID0gYmFja2VuZC5fZmZpXHJcblxyXG4gICAgcGFyYW1fY2RhdGEgPSBsaWIuREhwYXJhbXNfZHVwKGRoX2NkYXRhKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwYXJhbV9jZGF0YSAhPSBmZmkuTlVMTClcclxuICAgIHBhcmFtX2NkYXRhID0gZmZpLmdjKHBhcmFtX2NkYXRhLCBsaWIuREhfZnJlZSlcclxuICAgIGlmIGxpYi5DUllQVE9HUkFQSFlfSVNfTElCUkVTU0w6XHJcbiAgICAgICAgIyBJbiBsaWJyZXNzbCBESHBhcmFtc19kdXAgZG9uXCd0IGNvcHkgcVxyXG4gICAgICAgIHEgPSBmZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIGxpYi5ESF9nZXQwX3BxZyhkaF9jZGF0YSwgZmZpLk5VTEwsIHEsIGZmaS5OVUxMKVxyXG4gICAgICAgIHFfZHVwID0gbGliLkJOX2R1cChxWzBdKVxyXG4gICAgICAgIHJlcyA9IGxpYi5ESF9zZXQwX3BxZyhwYXJhbV9jZGF0YSwgZmZpLk5VTEwsIHFfZHVwLCBmZmkuTlVMTClcclxuICAgICAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgIHJldHVybiBwYXJhbV9jZGF0YVxyXG5cclxuXHJcbmRlZiBfZGhfY2RhdGFfdG9fcGFyYW1ldGVycyhkaF9jZGF0YSwgYmFja2VuZDogIkJhY2tlbmQiKSAtPiAiX0RIUGFyYW1ldGVycyI6XHJcbiAgICBwYXJhbV9jZGF0YSA9IF9kaF9wYXJhbXNfZHVwKGRoX2NkYXRhLCBiYWNrZW5kKVxyXG4gICAgcmV0dXJuIF9ESFBhcmFtZXRlcnMoYmFja2VuZCwgcGFyYW1fY2RhdGEpXHJcblxyXG5cclxuY2xhc3MgX0RIUGFyYW1ldGVycyhkaC5ESFBhcmFtZXRlcnMpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgZGhfY2RhdGEpOlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcbiAgICAgICAgc2VsZi5fZGhfY2RhdGEgPSBkaF9jZGF0YVxyXG5cclxuICAgIGRlZiBwYXJhbWV0ZXJfbnVtYmVycyhzZWxmKSAtPiBkaC5ESFBhcmFtZXRlck51bWJlcnM6XHJcbiAgICAgICAgcCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgZyA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgcSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkRIX2dldDBfcHFnKHNlbGYuX2RoX2NkYXRhLCBwLCBxLCBnKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocFswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGdbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgcV92YWw6IHR5cGluZy5PcHRpb25hbFtpbnRdXHJcbiAgICAgICAgaWYgcVswXSA9PSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgcV92YWwgPSBOb25lXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcV92YWwgPSBzZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocVswXSlcclxuICAgICAgICByZXR1cm4gZGguREhQYXJhbWV0ZXJOdW1iZXJzKFxyXG4gICAgICAgICAgICBwPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChwWzBdKSxcclxuICAgICAgICAgICAgZz1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQoZ1swXSksXHJcbiAgICAgICAgICAgIHE9cV92YWwsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBnZW5lcmF0ZV9wcml2YXRlX2tleShzZWxmKSAtPiBkaC5ESFByaXZhdGVLZXk6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuZ2VuZXJhdGVfZGhfcHJpdmF0ZV9rZXkoc2VsZilcclxuXHJcbiAgICBkZWYgcGFyYW1ldGVyX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlBhcmFtZXRlckZvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5PcGVuU1NIOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIk9wZW5TU0ggZW5jb2RpbmcgaXMgbm90IHN1cHBvcnRlZCIpXHJcblxyXG4gICAgICAgIGlmIGZvcm1hdCBpcyBub3Qgc2VyaWFsaXphdGlvbi5QYXJhbWV0ZXJGb3JtYXQuUEtDUzM6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIk9ubHkgUEtDUzMgc2VyaWFsaXphdGlvbiBpcyBzdXBwb3J0ZWQiKVxyXG5cclxuICAgICAgICBxID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuREhfZ2V0MF9wcWcoXHJcbiAgICAgICAgICAgIHNlbGYuX2RoX2NkYXRhLCBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCwgcSwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBxWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMXHJcbiAgICAgICAgICAgIGFuZCBub3Qgc2VsZi5fYmFja2VuZC5fbGliLkNyeXB0b2dyYXBoeV9IQVNfRVZQX1BLRVlfREhYXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAiREggWDkuNDIgc2VyaWFsaXphdGlvbiBpcyBub3Qgc3VwcG9ydGVkIixcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX1NFUklBTElaQVRJT04sXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5QRU06XHJcbiAgICAgICAgICAgIGlmIHFbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgICAgICB3cml0ZV9iaW8gPSBzZWxmLl9iYWNrZW5kLl9saWIuUEVNX3dyaXRlX2Jpb19ESHhwYXJhbXNcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHdyaXRlX2JpbyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5QRU1fd3JpdGVfYmlvX0RIcGFyYW1zXHJcbiAgICAgICAgZWxpZiBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLkRFUjpcclxuICAgICAgICAgICAgaWYgcVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgICAgIHdyaXRlX2JpbyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5DcnlwdG9ncmFwaHlfaTJkX0RIeHBhcmFtc19iaW9cclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHdyaXRlX2JpbyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5pMmRfREhwYXJhbXNfYmlvXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJlbmNvZGluZyBtdXN0IGJlIGFuIGl0ZW0gZnJvbSB0aGUgRW5jb2RpbmcgZW51bSIpXHJcblxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2JhY2tlbmQuX2NyZWF0ZV9tZW1fYmlvX2djKClcclxuICAgICAgICByZXMgPSB3cml0ZV9iaW8oYmlvLCBzZWxmLl9kaF9jZGF0YSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9yZWFkX21lbV9iaW8oYmlvKVxyXG5cclxuXHJcbmRlZiBfZ2V0X2RoX251bV9iaXRzKGJhY2tlbmQsIGRoX2NkYXRhKSAtPiBpbnQ6XHJcbiAgICBwID0gYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgIGJhY2tlbmQuX2xpYi5ESF9nZXQwX3BxZyhkaF9jZGF0YSwgcCwgYmFja2VuZC5fZmZpLk5VTEwsIGJhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwWzBdICE9IGJhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgcmV0dXJuIGJhY2tlbmQuX2xpYi5CTl9udW1fYml0cyhwWzBdKVxyXG5cclxuXHJcbmNsYXNzIF9ESFByaXZhdGVLZXkoZGguREhQcml2YXRlS2V5KTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBiYWNrZW5kOiAiQmFja2VuZCIsIGRoX2NkYXRhLCBldnBfcGtleSk6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9kaF9jZGF0YSA9IGRoX2NkYXRhXHJcbiAgICAgICAgc2VsZi5fZXZwX3BrZXkgPSBldnBfcGtleVxyXG4gICAgICAgIHNlbGYuX2tleV9zaXplX2J5dGVzID0gc2VsZi5fYmFja2VuZC5fbGliLkRIX3NpemUoZGhfY2RhdGEpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBfZ2V0X2RoX251bV9iaXRzKHNlbGYuX2JhY2tlbmQsIHNlbGYuX2RoX2NkYXRhKVxyXG5cclxuICAgIGRlZiBwcml2YXRlX251bWJlcnMoc2VsZikgLT4gZGguREhQcml2YXRlTnVtYmVyczpcclxuICAgICAgICBwID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBnID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBxID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuREhfZ2V0MF9wcWcoc2VsZi5fZGhfY2RhdGEsIHAsIHEsIGcpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZ1swXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBpZiBxWzBdID09IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICBxX3ZhbCA9IE5vbmVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBxX3ZhbCA9IHNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChxWzBdKVxyXG4gICAgICAgIHB1Yl9rZXkgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHByaXZfa2V5ID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuREhfZ2V0MF9rZXkoc2VsZi5fZGhfY2RhdGEsIHB1Yl9rZXksIHByaXZfa2V5KVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocHViX2tleVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHByaXZfa2V5WzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJldHVybiBkaC5ESFByaXZhdGVOdW1iZXJzKFxyXG4gICAgICAgICAgICBwdWJsaWNfbnVtYmVycz1kaC5ESFB1YmxpY051bWJlcnMoXHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJfbnVtYmVycz1kaC5ESFBhcmFtZXRlck51bWJlcnMoXHJcbiAgICAgICAgICAgICAgICAgICAgcD1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocFswXSksXHJcbiAgICAgICAgICAgICAgICAgICAgZz1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQoZ1swXSksXHJcbiAgICAgICAgICAgICAgICAgICAgcT1xX3ZhbCxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB5PXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChwdWJfa2V5WzBdKSxcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgeD1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocHJpdl9rZXlbMF0pLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgZXhjaGFuZ2Uoc2VsZiwgcGVlcl9wdWJsaWNfa2V5OiBkaC5ESFB1YmxpY0tleSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocGVlcl9wdWJsaWNfa2V5LCBfREhQdWJsaWNLZXkpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoInBlZXJfcHVibGljX2tleSBtdXN0IGJlIGEgREhQdWJsaWNLZXkiKVxyXG5cclxuICAgICAgICBjdHggPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfQ1RYX25ldyhcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoY3R4ICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGN0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhjdHgsIHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9DVFhfZnJlZSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfZGVyaXZlX2luaXQoY3R4KVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9QS0VZX2Rlcml2ZV9zZXRfcGVlcihcclxuICAgICAgICAgICAgY3R4LCBwZWVyX3B1YmxpY19rZXkuX2V2cF9wa2V5XHJcbiAgICAgICAgKVxyXG4gICAgICAgICMgSW52YWxpZCBrZXggZXJyb3JzIGhlcmUgaW4gT3BlblNTTCAzLjAgYmVjYXVzZSBjaGVja3Mgd2VyZSBtb3ZlZFxyXG4gICAgICAgICMgdG8gRVZQX1BLRVlfZGVyaXZlX3NldF9wZWVyXHJcbiAgICAgICAgc2VsZi5fZXhjaGFuZ2VfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIGtleWxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIilcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfZGVyaXZlKFxyXG4gICAgICAgICAgICBjdHgsIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLCBrZXlsZW5cclxuICAgICAgICApXHJcbiAgICAgICAgIyBJbnZhbGlkIGtleCBlcnJvcnMgaGVyZSBpbiBPcGVuU1NMIDwgM1xyXG4gICAgICAgIHNlbGYuX2V4Y2hhbmdlX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGtleWxlblswXSA+IDApXHJcbiAgICAgICAgYnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhcltdIiwga2V5bGVuWzBdKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9kZXJpdmUoY3R4LCBidWYsIGtleWxlbilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICBrZXkgPSBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKGJ1Ziwga2V5bGVuWzBdKVs6XVxyXG4gICAgICAgIHBhZCA9IHNlbGYuX2tleV9zaXplX2J5dGVzIC0gbGVuKGtleSlcclxuXHJcbiAgICAgICAgaWYgcGFkID4gMDpcclxuICAgICAgICAgICAga2V5ID0gKGIiXFx4MDAiICogcGFkKSArIGtleVxyXG5cclxuICAgICAgICByZXR1cm4ga2V5XHJcblxyXG4gICAgZGVmIF9leGNoYW5nZV9hc3NlcnQoc2VsZiwgb2s6IGJvb2wpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IG9rOlxyXG4gICAgICAgICAgICBlcnJvcnNfd2l0aF90ZXh0ID0gc2VsZi5fYmFja2VuZC5fY29uc3VtZV9lcnJvcnNfd2l0aF90ZXh0KClcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJFcnJvciBjb21wdXRpbmcgc2hhcmVkIGtleS4iLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JzX3dpdGhfdGV4dCxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfa2V5KHNlbGYpIC0+IGRoLkRIUHVibGljS2V5OlxyXG4gICAgICAgIGRoX2NkYXRhID0gX2RoX3BhcmFtc19kdXAoc2VsZi5fZGhfY2RhdGEsIHNlbGYuX2JhY2tlbmQpXHJcbiAgICAgICAgcHViX2tleSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkRIX2dldDBfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9kaF9jZGF0YSwgcHViX2tleSwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwdWJfa2V5WzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHB1Yl9rZXlfZHVwID0gc2VsZi5fYmFja2VuZC5fbGliLkJOX2R1cChwdWJfa2V5WzBdKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocHViX2tleV9kdXAgIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcblxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5ESF9zZXQwX2tleShcclxuICAgICAgICAgICAgZGhfY2RhdGEsIHB1Yl9rZXlfZHVwLCBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fYmFja2VuZC5fZGhfY2RhdGFfdG9fZXZwX3BrZXkoZGhfY2RhdGEpXHJcbiAgICAgICAgcmV0dXJuIF9ESFB1YmxpY0tleShzZWxmLl9iYWNrZW5kLCBkaF9jZGF0YSwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIHBhcmFtZXRlcnMoc2VsZikgLT4gZGguREhQYXJhbWV0ZXJzOlxyXG4gICAgICAgIHJldHVybiBfZGhfY2RhdGFfdG9fcGFyYW1ldGVycyhzZWxmLl9kaF9jZGF0YSwgc2VsZi5fYmFja2VuZClcclxuXHJcbiAgICBkZWYgcHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LFxyXG4gICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtOiBzZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiBmb3JtYXQgaXMgbm90IHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdC5QS0NTODpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJESCBwcml2YXRlIGtleXMgc3VwcG9ydCBvbmx5IFBLQ1M4IHNlcmlhbGl6YXRpb24iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICBpZiBub3Qgc2VsZi5fYmFja2VuZC5fbGliLkNyeXB0b2dyYXBoeV9IQVNfRVZQX1BLRVlfREhYOlxyXG4gICAgICAgICAgICBxID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkRIX2dldDBfcHFnKFxyXG4gICAgICAgICAgICAgICAgc2VsZi5fZGhfY2RhdGEsXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgICAgIHEsXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBpZiBxWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAgICAgIkRIIFg5LjQyIHNlcmlhbGl6YXRpb24gaXMgbm90IHN1cHBvcnRlZCIsXHJcbiAgICAgICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfU0VSSUFMSVpBVElPTixcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX3ByaXZhdGVfa2V5X2J5dGVzKFxyXG4gICAgICAgICAgICBlbmNvZGluZyxcclxuICAgICAgICAgICAgZm9ybWF0LFxyXG4gICAgICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobSxcclxuICAgICAgICAgICAgc2VsZixcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksXHJcbiAgICAgICAgICAgIHNlbGYuX2RoX2NkYXRhLFxyXG4gICAgICAgIClcclxuXHJcblxyXG5jbGFzcyBfREhQdWJsaWNLZXkoZGguREhQdWJsaWNLZXkpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgZGhfY2RhdGEsIGV2cF9wa2V5KTpcclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX2RoX2NkYXRhID0gZGhfY2RhdGFcclxuICAgICAgICBzZWxmLl9ldnBfcGtleSA9IGV2cF9wa2V5XHJcbiAgICAgICAgc2VsZi5fa2V5X3NpemVfYml0cyA9IF9nZXRfZGhfbnVtX2JpdHMoc2VsZi5fYmFja2VuZCwgc2VsZi5fZGhfY2RhdGEpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9rZXlfc2l6ZV9iaXRzXHJcblxyXG4gICAgZGVmIHB1YmxpY19udW1iZXJzKHNlbGYpIC0+IGRoLkRIUHVibGljTnVtYmVyczpcclxuICAgICAgICBwID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBnID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBxID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuREhfZ2V0MF9wcWcoc2VsZi5fZGhfY2RhdGEsIHAsIHEsIGcpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZ1swXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBpZiBxWzBdID09IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICBxX3ZhbCA9IE5vbmVcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICBxX3ZhbCA9IHNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChxWzBdKVxyXG4gICAgICAgIHB1Yl9rZXkgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5ESF9nZXQwX2tleShcclxuICAgICAgICAgICAgc2VsZi5fZGhfY2RhdGEsIHB1Yl9rZXksIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocHViX2tleVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICByZXR1cm4gZGguREhQdWJsaWNOdW1iZXJzKFxyXG4gICAgICAgICAgICBwYXJhbWV0ZXJfbnVtYmVycz1kaC5ESFBhcmFtZXRlck51bWJlcnMoXHJcbiAgICAgICAgICAgICAgICBwPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChwWzBdKSxcclxuICAgICAgICAgICAgICAgIGc9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KGdbMF0pLFxyXG4gICAgICAgICAgICAgICAgcT1xX3ZhbCxcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgeT1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocHViX2tleVswXSksXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwYXJhbWV0ZXJzKHNlbGYpIC0+IGRoLkRIUGFyYW1ldGVyczpcclxuICAgICAgICByZXR1cm4gX2RoX2NkYXRhX3RvX3BhcmFtZXRlcnMoc2VsZi5fZGhfY2RhdGEsIHNlbGYuX2JhY2tlbmQpXHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIGZvcm1hdCBpcyBub3Qgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuU3ViamVjdFB1YmxpY0tleUluZm86XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiREggcHVibGljIGtleXMgc3VwcG9ydCBvbmx5ICJcclxuICAgICAgICAgICAgICAgICJTdWJqZWN0UHVibGljS2V5SW5mbyBzZXJpYWxpemF0aW9uIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIG5vdCBzZWxmLl9iYWNrZW5kLl9saWIuQ3J5cHRvZ3JhcGh5X0hBU19FVlBfUEtFWV9ESFg6XHJcbiAgICAgICAgICAgIHEgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuREhfZ2V0MF9wcWcoXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9kaF9jZGF0YSxcclxuICAgICAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICAgICAgcSxcclxuICAgICAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGlmIHFbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEw6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICAgICAiREggWDkuNDIgc2VyaWFsaXphdGlvbiBpcyBub3Qgc3VwcG9ydGVkIixcclxuICAgICAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9TRVJJQUxJWkFUSU9OLFxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fcHVibGljX2tleV9ieXRlcyhcclxuICAgICAgICAgICAgZW5jb2RpbmcsIGZvcm1hdCwgc2VsZiwgc2VsZi5fZXZwX3BrZXksIE5vbmVcclxuICAgICAgICApXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L2JhY2tlbmRzL29wZW5zc2wvZHNhLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IEludmFsaWRTaWduYXR1cmVcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wudXRpbHMgaW1wb3J0IChcclxuICAgIF9jYWxjdWxhdGVfZGlnZXN0X2FuZF9hbGdvcml0aG0sXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGhhc2hlcywgc2VyaWFsaXphdGlvblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljIGltcG9ydCAoXHJcbiAgICBkc2EsXHJcbiAgICB1dGlscyBhcyBhc3ltX3V0aWxzLFxyXG4pXHJcblxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBCYWNrZW5kXHJcblxyXG5cclxuZGVmIF9kc2Ffc2lnX3NpZ24oXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsIHByaXZhdGVfa2V5OiAiX0RTQVByaXZhdGVLZXkiLCBkYXRhOiBieXRlc1xyXG4pIC0+IGJ5dGVzOlxyXG4gICAgc2lnX2J1Zl9sZW4gPSBiYWNrZW5kLl9saWIuRFNBX3NpemUocHJpdmF0ZV9rZXkuX2RzYV9jZGF0YSlcclxuICAgIHNpZ19idWYgPSBiYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCBzaWdfYnVmX2xlbilcclxuICAgIGJ1ZmxlbiA9IGJhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGludCAqIilcclxuXHJcbiAgICAjIFRoZSBmaXJzdCBwYXJhbWV0ZXIgcGFzc2VkIHRvIERTQV9zaWduIGlzIHVudXNlZCBieSBPcGVuU1NMIGJ1dFxyXG4gICAgIyBtdXN0IGJlIGFuIGludGVnZXIuXHJcbiAgICByZXMgPSBiYWNrZW5kLl9saWIuRFNBX3NpZ24oXHJcbiAgICAgICAgMCwgZGF0YSwgbGVuKGRhdGEpLCBzaWdfYnVmLCBidWZsZW4sIHByaXZhdGVfa2V5Ll9kc2FfY2RhdGFcclxuICAgIClcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGJ1ZmxlblswXSlcclxuXHJcbiAgICByZXR1cm4gYmFja2VuZC5fZmZpLmJ1ZmZlcihzaWdfYnVmKVs6IGJ1ZmxlblswXV1cclxuXHJcblxyXG5kZWYgX2RzYV9zaWdfdmVyaWZ5KFxyXG4gICAgYmFja2VuZDogIkJhY2tlbmQiLFxyXG4gICAgcHVibGljX2tleTogIl9EU0FQdWJsaWNLZXkiLFxyXG4gICAgc2lnbmF0dXJlOiBieXRlcyxcclxuICAgIGRhdGE6IGJ5dGVzLFxyXG4pIC0+IE5vbmU6XHJcbiAgICAjIFRoZSBmaXJzdCBwYXJhbWV0ZXIgcGFzc2VkIHRvIERTQV92ZXJpZnkgaXMgdW51c2VkIGJ5IE9wZW5TU0wgYnV0XHJcbiAgICAjIG11c3QgYmUgYW4gaW50ZWdlci5cclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5EU0FfdmVyaWZ5KFxyXG4gICAgICAgIDAsIGRhdGEsIGxlbihkYXRhKSwgc2lnbmF0dXJlLCBsZW4oc2lnbmF0dXJlKSwgcHVibGljX2tleS5fZHNhX2NkYXRhXHJcbiAgICApXHJcblxyXG4gICAgaWYgcmVzICE9IDE6XHJcbiAgICAgICAgYmFja2VuZC5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgIHJhaXNlIEludmFsaWRTaWduYXR1cmVcclxuXHJcblxyXG5jbGFzcyBfRFNBUGFyYW1ldGVycyhkc2EuRFNBUGFyYW1ldGVycyk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBkc2FfY2RhdGEpOlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcbiAgICAgICAgc2VsZi5fZHNhX2NkYXRhID0gZHNhX2NkYXRhXHJcblxyXG4gICAgZGVmIHBhcmFtZXRlcl9udW1iZXJzKHNlbGYpIC0+IGRzYS5EU0FQYXJhbWV0ZXJOdW1iZXJzOlxyXG4gICAgICAgIHAgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHEgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIGcgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5EU0FfZ2V0MF9wcWcoc2VsZi5fZHNhX2NkYXRhLCBwLCBxLCBnKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocFswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHFbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChnWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJldHVybiBkc2EuRFNBUGFyYW1ldGVyTnVtYmVycyhcclxuICAgICAgICAgICAgcD1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocFswXSksXHJcbiAgICAgICAgICAgIHE9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KHFbMF0pLFxyXG4gICAgICAgICAgICBnPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChnWzBdKSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGdlbmVyYXRlX3ByaXZhdGVfa2V5KHNlbGYpIC0+IGRzYS5EU0FQcml2YXRlS2V5OlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLmdlbmVyYXRlX2RzYV9wcml2YXRlX2tleShzZWxmKVxyXG5cclxuXHJcbmNsYXNzIF9EU0FQcml2YXRlS2V5KGRzYS5EU0FQcml2YXRlS2V5KTpcclxuICAgIF9rZXlfc2l6ZTogaW50XHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgZHNhX2NkYXRhLCBldnBfcGtleSk6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9kc2FfY2RhdGEgPSBkc2FfY2RhdGFcclxuICAgICAgICBzZWxmLl9ldnBfcGtleSA9IGV2cF9wa2V5XHJcblxyXG4gICAgICAgIHAgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5EU0FfZ2V0MF9wcWcoXHJcbiAgICAgICAgICAgIGRzYV9jZGF0YSwgcCwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocFswXSAhPSBiYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9rZXlfc2l6ZSA9IHNlbGYuX2JhY2tlbmQuX2xpYi5CTl9udW1fYml0cyhwWzBdKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleV9zaXplKHNlbGYpIC0+IGludDpcclxuICAgICAgICByZXR1cm4gc2VsZi5fa2V5X3NpemVcclxuXHJcbiAgICBkZWYgcHJpdmF0ZV9udW1iZXJzKHNlbGYpIC0+IGRzYS5EU0FQcml2YXRlTnVtYmVyczpcclxuICAgICAgICBwID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBxID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBnID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBwdWJfa2V5ID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBwcml2X2tleSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoIkJJR05VTSAqKiIpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkRTQV9nZXQwX3BxZyhzZWxmLl9kc2FfY2RhdGEsIHAsIHEsIGcpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGdbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLkRTQV9nZXQwX2tleShzZWxmLl9kc2FfY2RhdGEsIHB1Yl9rZXksIHByaXZfa2V5KVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocHViX2tleVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHByaXZfa2V5WzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJldHVybiBkc2EuRFNBUHJpdmF0ZU51bWJlcnMoXHJcbiAgICAgICAgICAgIHB1YmxpY19udW1iZXJzPWRzYS5EU0FQdWJsaWNOdW1iZXJzKFxyXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyX251bWJlcnM9ZHNhLkRTQVBhcmFtZXRlck51bWJlcnMoXHJcbiAgICAgICAgICAgICAgICAgICAgcD1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocFswXSksXHJcbiAgICAgICAgICAgICAgICAgICAgcT1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocVswXSksXHJcbiAgICAgICAgICAgICAgICAgICAgZz1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQoZ1swXSksXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgeT1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocHViX2tleVswXSksXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHg9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KHByaXZfa2V5WzBdKSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gZHNhLkRTQVB1YmxpY0tleTpcclxuICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9iYWNrZW5kLl9saWIuRFNBcGFyYW1zX2R1cChzZWxmLl9kc2FfY2RhdGEpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChkc2FfY2RhdGEgIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgZHNhX2NkYXRhID0gc2VsZi5fYmFja2VuZC5fZmZpLmdjKFxyXG4gICAgICAgICAgICBkc2FfY2RhdGEsIHNlbGYuX2JhY2tlbmQuX2xpYi5EU0FfZnJlZVxyXG4gICAgICAgIClcclxuICAgICAgICBwdWJfa2V5ID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuRFNBX2dldDBfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9kc2FfY2RhdGEsIHB1Yl9rZXksIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocHViX2tleVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBwdWJfa2V5X2R1cCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5CTl9kdXAocHViX2tleVswXSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRFNBX3NldDBfa2V5KFxyXG4gICAgICAgICAgICBkc2FfY2RhdGEsIHB1Yl9rZXlfZHVwLCBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fYmFja2VuZC5fZHNhX2NkYXRhX3RvX2V2cF9wa2V5KGRzYV9jZGF0YSlcclxuICAgICAgICByZXR1cm4gX0RTQVB1YmxpY0tleShzZWxmLl9iYWNrZW5kLCBkc2FfY2RhdGEsIGV2cF9wa2V5KVxyXG5cclxuICAgIGRlZiBwYXJhbWV0ZXJzKHNlbGYpIC0+IGRzYS5EU0FQYXJhbWV0ZXJzOlxyXG4gICAgICAgIGRzYV9jZGF0YSA9IHNlbGYuX2JhY2tlbmQuX2xpYi5EU0FwYXJhbXNfZHVwKHNlbGYuX2RzYV9jZGF0YSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGRzYV9jZGF0YSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoXHJcbiAgICAgICAgICAgIGRzYV9jZGF0YSwgc2VsZi5fYmFja2VuZC5fbGliLkRTQV9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBfRFNBUGFyYW1ldGVycyhzZWxmLl9iYWNrZW5kLCBkc2FfY2RhdGEpXHJcblxyXG4gICAgZGVmIHByaXZhdGVfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogc2VyaWFsaXphdGlvbi5LZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX3ByaXZhdGVfa2V5X2J5dGVzKFxyXG4gICAgICAgICAgICBlbmNvZGluZyxcclxuICAgICAgICAgICAgZm9ybWF0LFxyXG4gICAgICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobSxcclxuICAgICAgICAgICAgc2VsZixcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksXHJcbiAgICAgICAgICAgIHNlbGYuX2RzYV9jZGF0YSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHNpZ24oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBkYXRhOiBieXRlcyxcclxuICAgICAgICBhbGdvcml0aG06IHR5cGluZy5Vbmlvblthc3ltX3V0aWxzLlByZWhhc2hlZCwgaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBkYXRhLCBfID0gX2NhbGN1bGF0ZV9kaWdlc3RfYW5kX2FsZ29yaXRobShkYXRhLCBhbGdvcml0aG0pXHJcbiAgICAgICAgcmV0dXJuIF9kc2Ffc2lnX3NpZ24oc2VsZi5fYmFja2VuZCwgc2VsZiwgZGF0YSlcclxuXHJcblxyXG5jbGFzcyBfRFNBUHVibGljS2V5KGRzYS5EU0FQdWJsaWNLZXkpOlxyXG4gICAgX2tleV9zaXplOiBpbnRcclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBkc2FfY2RhdGEsIGV2cF9wa2V5KTpcclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX2RzYV9jZGF0YSA9IGRzYV9jZGF0YVxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gZXZwX3BrZXlcclxuICAgICAgICBwID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuRFNBX2dldDBfcHFnKFxyXG4gICAgICAgICAgICBkc2FfY2RhdGEsIHAsIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLCBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHBbMF0gIT0gYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fa2V5X3NpemUgPSBzZWxmLl9iYWNrZW5kLl9saWIuQk5fbnVtX2JpdHMocFswXSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2tleV9zaXplXHJcblxyXG4gICAgZGVmIHB1YmxpY19udW1iZXJzKHNlbGYpIC0+IGRzYS5EU0FQdWJsaWNOdW1iZXJzOlxyXG4gICAgICAgIHAgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHEgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIGcgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHB1Yl9rZXkgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5EU0FfZ2V0MF9wcWcoc2VsZi5fZHNhX2NkYXRhLCBwLCBxLCBnKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocFswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHFbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChnWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5EU0FfZ2V0MF9rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2RzYV9jZGF0YSwgcHViX2tleSwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwdWJfa2V5WzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJldHVybiBkc2EuRFNBUHVibGljTnVtYmVycyhcclxuICAgICAgICAgICAgcGFyYW1ldGVyX251bWJlcnM9ZHNhLkRTQVBhcmFtZXRlck51bWJlcnMoXHJcbiAgICAgICAgICAgICAgICBwPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChwWzBdKSxcclxuICAgICAgICAgICAgICAgIHE9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KHFbMF0pLFxyXG4gICAgICAgICAgICAgICAgZz1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQoZ1swXSksXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHk9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KHB1Yl9rZXlbMF0pLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcGFyYW1ldGVycyhzZWxmKSAtPiBkc2EuRFNBUGFyYW1ldGVyczpcclxuICAgICAgICBkc2FfY2RhdGEgPSBzZWxmLl9iYWNrZW5kLl9saWIuRFNBcGFyYW1zX2R1cChzZWxmLl9kc2FfY2RhdGEpXHJcbiAgICAgICAgZHNhX2NkYXRhID0gc2VsZi5fYmFja2VuZC5fZmZpLmdjKFxyXG4gICAgICAgICAgICBkc2FfY2RhdGEsIHNlbGYuX2JhY2tlbmQuX2xpYi5EU0FfZnJlZVxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gX0RTQVBhcmFtZXRlcnMoc2VsZi5fYmFja2VuZCwgZHNhX2NkYXRhKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fcHVibGljX2tleV9ieXRlcyhcclxuICAgICAgICAgICAgZW5jb2RpbmcsIGZvcm1hdCwgc2VsZiwgc2VsZi5fZXZwX3BrZXksIE5vbmVcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHZlcmlmeShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHNpZ25hdHVyZTogYnl0ZXMsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgYWxnb3JpdGhtOiB0eXBpbmcuVW5pb25bYXN5bV91dGlscy5QcmVoYXNoZWQsIGhhc2hlcy5IYXNoQWxnb3JpdGhtXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBkYXRhLCBfID0gX2NhbGN1bGF0ZV9kaWdlc3RfYW5kX2FsZ29yaXRobShkYXRhLCBhbGdvcml0aG0pXHJcbiAgICAgICAgcmV0dXJuIF9kc2Ffc2lnX3ZlcmlmeShzZWxmLl9iYWNrZW5kLCBzZWxmLCBzaWduYXR1cmUsIGRhdGEpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L2JhY2tlbmRzL29wZW5zc2wvdXRpbHMucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgaGFzaGVzXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMudXRpbHMgaW1wb3J0IFByZWhhc2hlZFxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBCYWNrZW5kXHJcblxyXG5cclxuZGVmIF9ldnBfcGtleV9kZXJpdmUoYmFja2VuZDogIkJhY2tlbmQiLCBldnBfcGtleSwgcGVlcl9wdWJsaWNfa2V5KSAtPiBieXRlczpcclxuICAgIGN0eCA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9DVFhfbmV3KGV2cF9wa2V5LCBiYWNrZW5kLl9mZmkuTlVMTClcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQoY3R4ICE9IGJhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgY3R4ID0gYmFja2VuZC5fZmZpLmdjKGN0eCwgYmFja2VuZC5fbGliLkVWUF9QS0VZX0NUWF9mcmVlKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX2Rlcml2ZV9pbml0KGN0eClcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfZGVyaXZlX3NldF9wZWVyKGN0eCwgcGVlcl9wdWJsaWNfa2V5Ll9ldnBfcGtleSlcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICBrZXlsZW4gPSBiYWNrZW5kLl9mZmkubmV3KCJzaXplX3QgKiIpXHJcbiAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfZGVyaXZlKGN0eCwgYmFja2VuZC5fZmZpLk5VTEwsIGtleWxlbilcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGtleWxlblswXSA+IDApXHJcbiAgICBidWYgPSBiYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCBrZXlsZW5bMF0pXHJcbiAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfZGVyaXZlKGN0eCwgYnVmLCBrZXlsZW4pXHJcbiAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICBlcnJvcnNfd2l0aF90ZXh0ID0gYmFja2VuZC5fY29uc3VtZV9lcnJvcnNfd2l0aF90ZXh0KClcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJFcnJvciBjb21wdXRpbmcgc2hhcmVkIGtleS4iLCBlcnJvcnNfd2l0aF90ZXh0KVxyXG5cclxuICAgIHJldHVybiBiYWNrZW5kLl9mZmkuYnVmZmVyKGJ1Ziwga2V5bGVuWzBdKVs6XVxyXG5cclxuXHJcbmRlZiBfY2FsY3VsYXRlX2RpZ2VzdF9hbmRfYWxnb3JpdGhtKFxyXG4gICAgZGF0YTogYnl0ZXMsXHJcbiAgICBhbGdvcml0aG06IHR5cGluZy5VbmlvbltQcmVoYXNoZWQsIGhhc2hlcy5IYXNoQWxnb3JpdGhtXSxcclxuKSAtPiB0eXBpbmcuVHVwbGVbYnl0ZXMsIGhhc2hlcy5IYXNoQWxnb3JpdGhtXTpcclxuICAgIGlmIG5vdCBpc2luc3RhbmNlKGFsZ29yaXRobSwgUHJlaGFzaGVkKTpcclxuICAgICAgICBoYXNoX2N0eCA9IGhhc2hlcy5IYXNoKGFsZ29yaXRobSlcclxuICAgICAgICBoYXNoX2N0eC51cGRhdGUoZGF0YSlcclxuICAgICAgICBkYXRhID0gaGFzaF9jdHguZmluYWxpemUoKVxyXG4gICAgZWxzZTpcclxuICAgICAgICBhbGdvcml0aG0gPSBhbGdvcml0aG0uX2FsZ29yaXRobVxyXG5cclxuICAgIGlmIGxlbihkYXRhKSAhPSBhbGdvcml0aG0uZGlnZXN0X3NpemU6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgIlRoZSBwcm92aWRlZCBkYXRhIG11c3QgYmUgdGhlIHNhbWUgbGVuZ3RoIGFzIHRoZSBoYXNoICJcclxuICAgICAgICAgICAgImFsZ29yaXRobVwncyBkaWdlc3Qgc2l6ZS4iXHJcbiAgICAgICAgKVxyXG5cclxuICAgIHJldHVybiAoZGF0YSwgYWxnb3JpdGhtKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL2VjLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuZXhjZXB0aW9ucyBpbXBvcnQgKFxyXG4gICAgSW52YWxpZFNpZ25hdHVyZSxcclxuICAgIFVuc3VwcG9ydGVkQWxnb3JpdGhtLFxyXG4gICAgX1JlYXNvbnMsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wudXRpbHMgaW1wb3J0IChcclxuICAgIF9jYWxjdWxhdGVfZGlnZXN0X2FuZF9hbGdvcml0aG0sXHJcbiAgICBfZXZwX3BrZXlfZGVyaXZlLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBzZXJpYWxpemF0aW9uXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMgaW1wb3J0IGVjXHJcblxyXG5pZiB0eXBpbmcuVFlQRV9DSEVDS0lORzpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IEJhY2tlbmRcclxuXHJcblxyXG5kZWYgX2NoZWNrX3NpZ25hdHVyZV9hbGdvcml0aG0oXHJcbiAgICBzaWduYXR1cmVfYWxnb3JpdGhtOiBlYy5FbGxpcHRpY0N1cnZlU2lnbmF0dXJlQWxnb3JpdGhtLFxyXG4pIC0+IE5vbmU6XHJcbiAgICBpZiBub3QgaXNpbnN0YW5jZShzaWduYXR1cmVfYWxnb3JpdGhtLCBlYy5FQ0RTQSk6XHJcbiAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICJVbnN1cHBvcnRlZCBlbGxpcHRpYyBjdXJ2ZSBzaWduYXR1cmUgYWxnb3JpdGhtLiIsXHJcbiAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX1BVQkxJQ19LRVlfQUxHT1JJVEhNLFxyXG4gICAgICAgIClcclxuXHJcblxyXG5kZWYgX2VjX2tleV9jdXJ2ZV9zbihiYWNrZW5kOiAiQmFja2VuZCIsIGVjX2tleSkgLT4gc3RyOlxyXG4gICAgZ3JvdXAgPSBiYWNrZW5kLl9saWIuRUNfS0VZX2dldDBfZ3JvdXAoZWNfa2V5KVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChncm91cCAhPSBiYWNrZW5kLl9mZmkuTlVMTClcclxuXHJcbiAgICBuaWQgPSBiYWNrZW5kLl9saWIuRUNfR1JPVVBfZ2V0X2N1cnZlX25hbWUoZ3JvdXApXHJcbiAgICAjIFRoZSBmb2xsb3dpbmcgY2hlY2sgaXMgdG8gZmluZCBFQyBrZXlzIHdpdGggdW5uYW1lZCBjdXJ2ZXMgYW5kIHJhaXNlXHJcbiAgICAjIGFuIGVycm9yIGZvciBub3cuXHJcbiAgICBpZiBuaWQgPT0gYmFja2VuZC5fbGliLk5JRF91bmRlZjpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAiRUNEU0Ega2V5cyB3aXRoIGV4cGxpY2l0IHBhcmFtZXRlcnMgYXJlIHVuc3VwcG9ydGVkIGF0IHRoaXMgdGltZSJcclxuICAgICAgICApXHJcblxyXG4gICAgIyBUaGlzIGlzIGxpa2UgdGhlIGFib3ZlIGNoZWNrLCBidXQgaXQgYWxzbyBjYXRjaGVzIHRoZSBjYXNlIHdoZXJlIHlvdVxyXG4gICAgIyBleHBsaWNpdGx5IGVuY29kZWQgYSBjdXJ2ZSB3aXRoIHRoZSBzYW1lIHBhcmFtZXRlcnMgYXMgYSBuYW1lZCBjdXJ2ZS5cclxuICAgICMgRG9uXCd0IGRvIHRoYXQuXHJcbiAgICBpZiAoXHJcbiAgICAgICAgbm90IGJhY2tlbmQuX2xpYi5DUllQVE9HUkFQSFlfSVNfTElCUkVTU0xcclxuICAgICAgICBhbmQgYmFja2VuZC5fbGliLkVDX0dST1VQX2dldF9hc24xX2ZsYWcoZ3JvdXApID09IDBcclxuICAgICk6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgIkVDRFNBIGtleXMgd2l0aCBleHBsaWNpdCBwYXJhbWV0ZXJzIGFyZSB1bnN1cHBvcnRlZCBhdCB0aGlzIHRpbWUiXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGN1cnZlX25hbWUgPSBiYWNrZW5kLl9saWIuT0JKX25pZDJzbihuaWQpXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGN1cnZlX25hbWUgIT0gYmFja2VuZC5fZmZpLk5VTEwpXHJcblxyXG4gICAgc24gPSBiYWNrZW5kLl9mZmkuc3RyaW5nKGN1cnZlX25hbWUpLmRlY29kZSgiYXNjaWkiKVxyXG4gICAgcmV0dXJuIHNuXHJcblxyXG5cclxuZGVmIF9tYXJrX2FzbjFfbmFtZWRfZWNfY3VydmUoYmFja2VuZDogIkJhY2tlbmQiLCBlY19jZGF0YSk6XHJcbiAgICAiIiJcclxuICAgIFNldCB0aGUgbmFtZWQgY3VydmUgZmxhZyBvbiB0aGUgRUNfS0VZLiBUaGlzIGNhdXNlcyBPcGVuU1NMIHRvXHJcbiAgICBzZXJpYWxpemUgRUMga2V5cyBhbG9uZyB3aXRoIHRoZWlyIGN1cnZlIE9JRCB3aGljaCBtYWtlc1xyXG4gICAgZGVzZXJpYWxpemF0aW9uIGVhc2llci5cclxuICAgICIiIlxyXG5cclxuICAgIGJhY2tlbmQuX2xpYi5FQ19LRVlfc2V0X2FzbjFfZmxhZyhcclxuICAgICAgICBlY19jZGF0YSwgYmFja2VuZC5fbGliLk9QRU5TU0xfRUNfTkFNRURfQ1VSVkVcclxuICAgIClcclxuXHJcblxyXG5kZWYgX2NoZWNrX2tleV9pbmZpbml0eShiYWNrZW5kOiAiQmFja2VuZCIsIGVjX2NkYXRhKSAtPiBOb25lOlxyXG4gICAgcG9pbnQgPSBiYWNrZW5kLl9saWIuRUNfS0VZX2dldDBfcHVibGljX2tleShlY19jZGF0YSlcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocG9pbnQgIT0gYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICBncm91cCA9IGJhY2tlbmQuX2xpYi5FQ19LRVlfZ2V0MF9ncm91cChlY19jZGF0YSlcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQoZ3JvdXAgIT0gYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICBpZiBiYWNrZW5kLl9saWIuRUNfUE9JTlRfaXNfYXRfaW5maW5pdHkoZ3JvdXAsIHBvaW50KTpcclxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAiQ2Fubm90IGxvYWQgYW4gRUMgcHVibGljIGtleSB3aGVyZSB0aGUgcG9pbnQgaXMgYXQgaW5maW5pdHkiXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmRlZiBfc25fdG9fZWxsaXB0aWNfY3VydmUoYmFja2VuZDogIkJhY2tlbmQiLCBzbjogc3RyKSAtPiBlYy5FbGxpcHRpY0N1cnZlOlxyXG4gICAgdHJ5OlxyXG4gICAgICAgIHJldHVybiBlYy5fQ1VSVkVfVFlQRVNbc25dKClcclxuICAgIGV4Y2VwdCBLZXlFcnJvcjpcclxuICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgInt9IGlzIG5vdCBhIHN1cHBvcnRlZCBlbGxpcHRpYyBjdXJ2ZSIuZm9ybWF0KHNuKSxcclxuICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfRUxMSVBUSUNfQ1VSVkUsXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmRlZiBfZWNkc2Ffc2lnX3NpZ24oXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsIHByaXZhdGVfa2V5OiAiX0VsbGlwdGljQ3VydmVQcml2YXRlS2V5IiwgZGF0YTogYnl0ZXNcclxuKSAtPiBieXRlczpcclxuICAgIG1heF9zaXplID0gYmFja2VuZC5fbGliLkVDRFNBX3NpemUocHJpdmF0ZV9rZXkuX2VjX2tleSlcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQobWF4X3NpemUgPiAwKVxyXG5cclxuICAgIHNpZ2J1ZiA9IGJhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIG1heF9zaXplKVxyXG4gICAgc2lnbGVuX3B0ciA9IGJhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGludFtdIiwgMSlcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FQ0RTQV9zaWduKFxyXG4gICAgICAgIDAsIGRhdGEsIGxlbihkYXRhKSwgc2lnYnVmLCBzaWdsZW5fcHRyLCBwcml2YXRlX2tleS5fZWNfa2V5XHJcbiAgICApXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgcmV0dXJuIGJhY2tlbmQuX2ZmaS5idWZmZXIoc2lnYnVmKVs6IHNpZ2xlbl9wdHJbMF1dXHJcblxyXG5cclxuZGVmIF9lY2RzYV9zaWdfdmVyaWZ5KFxyXG4gICAgYmFja2VuZDogIkJhY2tlbmQiLFxyXG4gICAgcHVibGljX2tleTogIl9FbGxpcHRpY0N1cnZlUHVibGljS2V5IixcclxuICAgIHNpZ25hdHVyZTogYnl0ZXMsXHJcbiAgICBkYXRhOiBieXRlcyxcclxuKSAtPiBOb25lOlxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVDRFNBX3ZlcmlmeShcclxuICAgICAgICAwLCBkYXRhLCBsZW4oZGF0YSksIHNpZ25hdHVyZSwgbGVuKHNpZ25hdHVyZSksIHB1YmxpY19rZXkuX2VjX2tleVxyXG4gICAgKVxyXG4gICAgaWYgcmVzICE9IDE6XHJcbiAgICAgICAgYmFja2VuZC5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgIHJhaXNlIEludmFsaWRTaWduYXR1cmVcclxuXHJcblxyXG5jbGFzcyBfRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXkoZWMuRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXkpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgZWNfa2V5X2NkYXRhLCBldnBfcGtleSk6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9lY19rZXkgPSBlY19rZXlfY2RhdGFcclxuICAgICAgICBzZWxmLl9ldnBfcGtleSA9IGV2cF9wa2V5XHJcblxyXG4gICAgICAgIHNuID0gX2VjX2tleV9jdXJ2ZV9zbihiYWNrZW5kLCBlY19rZXlfY2RhdGEpXHJcbiAgICAgICAgc2VsZi5fY3VydmUgPSBfc25fdG9fZWxsaXB0aWNfY3VydmUoYmFja2VuZCwgc24pXHJcbiAgICAgICAgX21hcmtfYXNuMV9uYW1lZF9lY19jdXJ2ZShiYWNrZW5kLCBlY19rZXlfY2RhdGEpXHJcbiAgICAgICAgX2NoZWNrX2tleV9pbmZpbml0eShiYWNrZW5kLCBlY19rZXlfY2RhdGEpXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgY3VydmUoc2VsZikgLT4gZWMuRWxsaXB0aWNDdXJ2ZTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fY3VydmVcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuY3VydmUua2V5X3NpemVcclxuXHJcbiAgICBkZWYgZXhjaGFuZ2UoXHJcbiAgICAgICAgc2VsZiwgYWxnb3JpdGhtOiBlYy5FQ0RILCBwZWVyX3B1YmxpY19rZXk6IGVjLkVsbGlwdGljQ3VydmVQdWJsaWNLZXlcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgbm90IChcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5lbGxpcHRpY19jdXJ2ZV9leGNoYW5nZV9hbGdvcml0aG1fc3VwcG9ydGVkKFxyXG4gICAgICAgICAgICAgICAgYWxnb3JpdGhtLCBzZWxmLmN1cnZlXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJUaGlzIGJhY2tlbmQgZG9lcyBub3Qgc3VwcG9ydCB0aGUgRUNESCBhbGdvcml0aG0uIixcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX0VYQ0hBTkdFX0FMR09SSVRITSxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBwZWVyX3B1YmxpY19rZXkuY3VydmUubmFtZSAhPSBzZWxmLmN1cnZlLm5hbWU6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAicGVlcl9wdWJsaWNfa2V5IGFuZCBzZWxmIGFyZSBub3Qgb24gdGhlIHNhbWUgY3VydmUiXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIF9ldnBfcGtleV9kZXJpdmUoc2VsZi5fYmFja2VuZCwgc2VsZi5fZXZwX3BrZXksIHBlZXJfcHVibGljX2tleSlcclxuXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiBlYy5FbGxpcHRpY0N1cnZlUHVibGljS2V5OlxyXG4gICAgICAgIGdyb3VwID0gc2VsZi5fYmFja2VuZC5fbGliLkVDX0tFWV9nZXQwX2dyb3VwKHNlbGYuX2VjX2tleSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGdyb3VwICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG5cclxuICAgICAgICBjdXJ2ZV9uaWQgPSBzZWxmLl9iYWNrZW5kLl9saWIuRUNfR1JPVVBfZ2V0X2N1cnZlX25hbWUoZ3JvdXApXHJcbiAgICAgICAgcHVibGljX2VjX2tleSA9IHNlbGYuX2JhY2tlbmQuX2VjX2tleV9uZXdfYnlfY3VydmVfbmlkKGN1cnZlX25pZClcclxuXHJcbiAgICAgICAgcG9pbnQgPSBzZWxmLl9iYWNrZW5kLl9saWIuRUNfS0VZX2dldDBfcHVibGljX2tleShzZWxmLl9lY19rZXkpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwb2ludCAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVDX0tFWV9zZXRfcHVibGljX2tleShwdWJsaWNfZWNfa2V5LCBwb2ludClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgICAgICBldnBfcGtleSA9IHNlbGYuX2JhY2tlbmQuX2VjX2NkYXRhX3RvX2V2cF9wa2V5KHB1YmxpY19lY19rZXkpXHJcblxyXG4gICAgICAgIHJldHVybiBfRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleShzZWxmLl9iYWNrZW5kLCBwdWJsaWNfZWNfa2V5LCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgcHJpdmF0ZV9udW1iZXJzKHNlbGYpIC0+IGVjLkVsbGlwdGljQ3VydmVQcml2YXRlTnVtYmVyczpcclxuICAgICAgICBibiA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FQ19LRVlfZ2V0MF9wcml2YXRlX2tleShzZWxmLl9lY19rZXkpXHJcbiAgICAgICAgcHJpdmF0ZV92YWx1ZSA9IHNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChibilcclxuICAgICAgICByZXR1cm4gZWMuRWxsaXB0aWNDdXJ2ZVByaXZhdGVOdW1iZXJzKFxyXG4gICAgICAgICAgICBwcml2YXRlX3ZhbHVlPXByaXZhdGVfdmFsdWUsXHJcbiAgICAgICAgICAgIHB1YmxpY19udW1iZXJzPXNlbGYucHVibGljX2tleSgpLnB1YmxpY19udW1iZXJzKCksXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwcml2YXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQsXHJcbiAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG06IHNlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9wcml2YXRlX2tleV9ieXRlcyhcclxuICAgICAgICAgICAgZW5jb2RpbmcsXHJcbiAgICAgICAgICAgIGZvcm1hdCxcclxuICAgICAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG0sXHJcbiAgICAgICAgICAgIHNlbGYsXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LFxyXG4gICAgICAgICAgICBzZWxmLl9lY19rZXksXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBzaWduKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgc2lnbmF0dXJlX2FsZ29yaXRobTogZWMuRWxsaXB0aWNDdXJ2ZVNpZ25hdHVyZUFsZ29yaXRobSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgX2NoZWNrX3NpZ25hdHVyZV9hbGdvcml0aG0oc2lnbmF0dXJlX2FsZ29yaXRobSlcclxuICAgICAgICBkYXRhLCBfID0gX2NhbGN1bGF0ZV9kaWdlc3RfYW5kX2FsZ29yaXRobShcclxuICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICAgICAgc2lnbmF0dXJlX2FsZ29yaXRobS5hbGdvcml0aG0sXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJldHVybiBfZWNkc2Ffc2lnX3NpZ24oc2VsZi5fYmFja2VuZCwgc2VsZiwgZGF0YSlcclxuXHJcblxyXG5jbGFzcyBfRWxsaXB0aWNDdXJ2ZVB1YmxpY0tleShlYy5FbGxpcHRpY0N1cnZlUHVibGljS2V5KTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBiYWNrZW5kOiAiQmFja2VuZCIsIGVjX2tleV9jZGF0YSwgZXZwX3BrZXkpOlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcbiAgICAgICAgc2VsZi5fZWNfa2V5ID0gZWNfa2V5X2NkYXRhXHJcbiAgICAgICAgc2VsZi5fZXZwX3BrZXkgPSBldnBfcGtleVxyXG5cclxuICAgICAgICBzbiA9IF9lY19rZXlfY3VydmVfc24oYmFja2VuZCwgZWNfa2V5X2NkYXRhKVxyXG4gICAgICAgIHNlbGYuX2N1cnZlID0gX3NuX3RvX2VsbGlwdGljX2N1cnZlKGJhY2tlbmQsIHNuKVxyXG4gICAgICAgIF9tYXJrX2FzbjFfbmFtZWRfZWNfY3VydmUoYmFja2VuZCwgZWNfa2V5X2NkYXRhKVxyXG4gICAgICAgIF9jaGVja19rZXlfaW5maW5pdHkoYmFja2VuZCwgZWNfa2V5X2NkYXRhKVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGN1cnZlKHNlbGYpIC0+IGVjLkVsbGlwdGljQ3VydmU6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2N1cnZlXHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYga2V5X3NpemUoc2VsZikgLT4gaW50OlxyXG4gICAgICAgIHJldHVybiBzZWxmLmN1cnZlLmtleV9zaXplXHJcblxyXG4gICAgZGVmIHB1YmxpY19udW1iZXJzKHNlbGYpIC0+IGVjLkVsbGlwdGljQ3VydmVQdWJsaWNOdW1iZXJzOlxyXG4gICAgICAgIGdldF9mdW5jLCBncm91cCA9IHNlbGYuX2JhY2tlbmQuX2VjX2tleV9kZXRlcm1pbmVfZ3JvdXBfZ2V0X2Z1bmMoXHJcbiAgICAgICAgICAgIHNlbGYuX2VjX2tleVxyXG4gICAgICAgIClcclxuICAgICAgICBwb2ludCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FQ19LRVlfZ2V0MF9wdWJsaWNfa2V5KHNlbGYuX2VjX2tleSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHBvaW50ICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG5cclxuICAgICAgICB3aXRoIHNlbGYuX2JhY2tlbmQuX3RtcF9ibl9jdHgoKSBhcyBibl9jdHg6XHJcbiAgICAgICAgICAgIGJuX3ggPSBzZWxmLl9iYWNrZW5kLl9saWIuQk5fQ1RYX2dldChibl9jdHgpXHJcbiAgICAgICAgICAgIGJuX3kgPSBzZWxmLl9iYWNrZW5kLl9saWIuQk5fQ1RYX2dldChibl9jdHgpXHJcblxyXG4gICAgICAgICAgICByZXMgPSBnZXRfZnVuYyhncm91cCwgcG9pbnQsIGJuX3gsIGJuX3ksIGJuX2N0eClcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgICAgIHggPSBzZWxmLl9iYWNrZW5kLl9ibl90b19pbnQoYm5feClcclxuICAgICAgICAgICAgeSA9IHNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChibl95KVxyXG5cclxuICAgICAgICByZXR1cm4gZWMuRWxsaXB0aWNDdXJ2ZVB1YmxpY051bWJlcnMoeD14LCB5PXksIGN1cnZlPXNlbGYuX2N1cnZlKVxyXG5cclxuICAgIGRlZiBfZW5jb2RlX3BvaW50KHNlbGYsIGZvcm1hdDogc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5Db21wcmVzc2VkUG9pbnQ6XHJcbiAgICAgICAgICAgIGNvbnZlcnNpb24gPSBzZWxmLl9iYWNrZW5kLl9saWIuUE9JTlRfQ09OVkVSU0lPTl9DT01QUkVTU0VEXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgYXNzZXJ0IGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5VbmNvbXByZXNzZWRQb2ludFxyXG4gICAgICAgICAgICBjb252ZXJzaW9uID0gc2VsZi5fYmFja2VuZC5fbGliLlBPSU5UX0NPTlZFUlNJT05fVU5DT01QUkVTU0VEXHJcblxyXG4gICAgICAgIGdyb3VwID0gc2VsZi5fYmFja2VuZC5fbGliLkVDX0tFWV9nZXQwX2dyb3VwKHNlbGYuX2VjX2tleSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGdyb3VwICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHBvaW50ID0gc2VsZi5fYmFja2VuZC5fbGliLkVDX0tFWV9nZXQwX3B1YmxpY19rZXkoc2VsZi5fZWNfa2V5KVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocG9pbnQgIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgd2l0aCBzZWxmLl9iYWNrZW5kLl90bXBfYm5fY3R4KCkgYXMgYm5fY3R4OlxyXG4gICAgICAgICAgICBidWZsZW4gPSBzZWxmLl9iYWNrZW5kLl9saWIuRUNfUE9JTlRfcG9pbnQyb2N0KFxyXG4gICAgICAgICAgICAgICAgZ3JvdXAsIHBvaW50LCBjb252ZXJzaW9uLCBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCwgMCwgYm5fY3R4XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChidWZsZW4gPiAwKVxyXG4gICAgICAgICAgICBidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJjaGFyW10iLCBidWZsZW4pXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FQ19QT0lOVF9wb2ludDJvY3QoXHJcbiAgICAgICAgICAgICAgICBncm91cCwgcG9pbnQsIGNvbnZlcnNpb24sIGJ1ZiwgYnVmbGVuLCBibl9jdHhcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGJ1ZmxlbiA9PSByZXMpXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKGJ1ZilbOl1cclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlg5NjJcclxuICAgICAgICAgICAgb3IgZm9ybWF0IGlzIHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LkNvbXByZXNzZWRQb2ludFxyXG4gICAgICAgICAgICBvciBmb3JtYXQgaXMgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuVW5jb21wcmVzc2VkUG9pbnRcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICBpZiBlbmNvZGluZyBpcyBub3Qgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5YOTYyIG9yIGZvcm1hdCBub3QgaW4gKFxyXG4gICAgICAgICAgICAgICAgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuQ29tcHJlc3NlZFBvaW50LFxyXG4gICAgICAgICAgICAgICAgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuVW5jb21wcmVzc2VkUG9pbnQsXHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJYOTYyIGVuY29kaW5nIG11c3QgYmUgdXNlZCB3aXRoIENvbXByZXNzZWRQb2ludCBvciAiXHJcbiAgICAgICAgICAgICAgICAgICAgIlVuY29tcHJlc3NlZFBvaW50IGZvcm1hdCJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9lbmNvZGVfcG9pbnQoZm9ybWF0KVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9wdWJsaWNfa2V5X2J5dGVzKFxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcsIGZvcm1hdCwgc2VsZiwgc2VsZi5fZXZwX3BrZXksIE5vbmVcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGRlZiB2ZXJpZnkoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBzaWduYXR1cmU6IGJ5dGVzLFxyXG4gICAgICAgIGRhdGE6IGJ5dGVzLFxyXG4gICAgICAgIHNpZ25hdHVyZV9hbGdvcml0aG06IGVjLkVsbGlwdGljQ3VydmVTaWduYXR1cmVBbGdvcml0aG0sXHJcbiAgICApIC0+IE5vbmU6XHJcbiAgICAgICAgX2NoZWNrX3NpZ25hdHVyZV9hbGdvcml0aG0oc2lnbmF0dXJlX2FsZ29yaXRobSlcclxuICAgICAgICBkYXRhLCBfID0gX2NhbGN1bGF0ZV9kaWdlc3RfYW5kX2FsZ29yaXRobShcclxuICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICAgICAgc2lnbmF0dXJlX2FsZ29yaXRobS5hbGdvcml0aG0sXHJcbiAgICAgICAgKVxyXG4gICAgICAgIF9lY2RzYV9zaWdfdmVyaWZ5KHNlbGYuX2JhY2tlbmQsIHNlbGYsIHNpZ25hdHVyZSwgZGF0YSlcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC9lZDI1NTE5LnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IGV4Y2VwdGlvbnNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IHNlcmlhbGl6YXRpb25cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYy5lZDI1NTE5IGltcG9ydCAoXHJcbiAgICBFZDI1NTE5UHJpdmF0ZUtleSxcclxuICAgIEVkMjU1MTlQdWJsaWNLZXksXHJcbiAgICBfRUQyNTUxOV9LRVlfU0laRSxcclxuICAgIF9FRDI1NTE5X1NJR19TSVpFLFxyXG4pXHJcblxyXG5pZiB0eXBpbmcuVFlQRV9DSEVDS0lORzpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IEJhY2tlbmRcclxuXHJcblxyXG5jbGFzcyBfRWQyNTUxOVB1YmxpY0tleShFZDI1NTE5UHVibGljS2V5KTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBiYWNrZW5kOiAiQmFja2VuZCIsIGV2cF9wa2V5KTpcclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gZXZwX3BrZXlcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlJhd1xyXG4gICAgICAgICAgICBvciBmb3JtYXQgaXMgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuUmF3XHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgaXMgbm90IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUmF3XHJcbiAgICAgICAgICAgICAgICBvciBmb3JtYXQgaXMgbm90IHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LlJhd1xyXG4gICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiV2hlbiB1c2luZyBSYXcgYm90aCBlbmNvZGluZyBhbmQgZm9ybWF0IG11c3QgYmUgUmF3IlxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Jhd19wdWJsaWNfYnl0ZXMoKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fcHVibGljX2tleV9ieXRlcyhcclxuICAgICAgICAgICAgZW5jb2RpbmcsIGZvcm1hdCwgc2VsZiwgc2VsZi5fZXZwX3BrZXksIE5vbmVcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9yYXdfcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXIgW10iLCBfRUQyNTUxOV9LRVlfU0laRSlcclxuICAgICAgICBidWZsZW4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJzaXplX3QgKiIsIF9FRDI1NTE5X0tFWV9TSVpFKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9nZXRfcmF3X3B1YmxpY19rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LCBidWYsIGJ1ZmxlblxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoYnVmbGVuWzBdID09IF9FRDI1NTE5X0tFWV9TSVpFKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKGJ1ZiwgX0VEMjU1MTlfS0VZX1NJWkUpWzpdXHJcblxyXG4gICAgZGVmIHZlcmlmeShzZWxmLCBzaWduYXR1cmU6IGJ5dGVzLCBkYXRhOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBldnBfbWRfY3R4ID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NRF9DVFhfbmV3KClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGV2cF9tZF9jdHggIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgZXZwX21kX2N0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhcclxuICAgICAgICAgICAgZXZwX21kX2N0eCwgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NRF9DVFhfZnJlZVxyXG4gICAgICAgIClcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0RpZ2VzdFZlcmlmeUluaXQoXHJcbiAgICAgICAgICAgIGV2cF9tZF9jdHgsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfRGlnZXN0VmVyaWZ5KFxyXG4gICAgICAgICAgICBldnBfbWRfY3R4LCBzaWduYXR1cmUsIGxlbihzaWduYXR1cmUpLCBkYXRhLCBsZW4oZGF0YSlcclxuICAgICAgICApXHJcbiAgICAgICAgaWYgcmVzICE9IDE6XHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICAgICAgcmFpc2UgZXhjZXB0aW9ucy5JbnZhbGlkU2lnbmF0dXJlXHJcblxyXG5cclxuY2xhc3MgX0VkMjU1MTlQcml2YXRlS2V5KEVkMjU1MTlQcml2YXRlS2V5KTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBiYWNrZW5kOiAiQmFja2VuZCIsIGV2cF9wa2V5KTpcclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gZXZwX3BrZXlcclxuXHJcbiAgICBkZWYgcHVibGljX2tleShzZWxmKSAtPiBFZDI1NTE5UHVibGljS2V5OlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXIgW10iLCBfRUQyNTUxOV9LRVlfU0laRSlcclxuICAgICAgICBidWZsZW4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJzaXplX3QgKiIsIF9FRDI1NTE5X0tFWV9TSVpFKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9nZXRfcmF3X3B1YmxpY19rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LCBidWYsIGJ1ZmxlblxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoYnVmbGVuWzBdID09IF9FRDI1NTE5X0tFWV9TSVpFKVxyXG4gICAgICAgIHB1YmxpY19ieXRlcyA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5idWZmZXIoYnVmKVs6XVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLmVkMjU1MTlfbG9hZF9wdWJsaWNfYnl0ZXMocHVibGljX2J5dGVzKVxyXG5cclxuICAgIGRlZiBzaWduKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgICAgICBldnBfbWRfY3R4ID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NRF9DVFhfbmV3KClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGV2cF9tZF9jdHggIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgZXZwX21kX2N0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhcclxuICAgICAgICAgICAgZXZwX21kX2N0eCwgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NRF9DVFhfZnJlZVxyXG4gICAgICAgIClcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0RpZ2VzdFNpZ25Jbml0KFxyXG4gICAgICAgICAgICBldnBfbWRfY3R4LFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSxcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCBfRUQyNTUxOV9TSUdfU0laRSlcclxuICAgICAgICBidWZsZW4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJzaXplX3QgKiIsIGxlbihidWYpKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfRGlnZXN0U2lnbihcclxuICAgICAgICAgICAgZXZwX21kX2N0eCwgYnVmLCBidWZsZW4sIGRhdGEsIGxlbihkYXRhKVxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoYnVmbGVuWzBdID09IF9FRDI1NTE5X1NJR19TSVpFKVxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9mZmkuYnVmZmVyKGJ1ZiwgYnVmbGVuWzBdKVs6XVxyXG5cclxuICAgIGRlZiBwcml2YXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQsXHJcbiAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG06IHNlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5SYXdcclxuICAgICAgICAgICAgb3IgZm9ybWF0IGlzIHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LlJhd1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIGZvcm1hdCBpcyBub3Qgc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LlJhd1xyXG4gICAgICAgICAgICAgICAgb3IgZW5jb2RpbmcgaXMgbm90IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUmF3XHJcbiAgICAgICAgICAgICAgICBvciBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobSwgc2VyaWFsaXphdGlvbi5Ob0VuY3J5cHRpb25cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIldoZW4gdXNpbmcgUmF3IGJvdGggZW5jb2RpbmcgYW5kIGZvcm1hdCBtdXN0IGJlIFJhdyAiXHJcbiAgICAgICAgICAgICAgICAgICAgImFuZCBlbmNyeXB0aW9uX2FsZ29yaXRobSBtdXN0IGJlIE5vRW5jcnlwdGlvbigpIlxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Jhd19wcml2YXRlX2J5dGVzKClcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX3ByaXZhdGVfa2V5X2J5dGVzKFxyXG4gICAgICAgICAgICBlbmNvZGluZywgZm9ybWF0LCBlbmNyeXB0aW9uX2FsZ29yaXRobSwgc2VsZiwgc2VsZi5fZXZwX3BrZXksIE5vbmVcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9yYXdfcHJpdmF0ZV9ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICBidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyIFtdIiwgX0VEMjU1MTlfS0VZX1NJWkUpXHJcbiAgICAgICAgYnVmbGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygic2l6ZV90ICoiLCBfRUQyNTUxOV9LRVlfU0laRSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfZ2V0X3Jhd19wcml2YXRlX2tleShcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksIGJ1ZiwgYnVmbGVuXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChidWZsZW5bMF0gPT0gX0VEMjU1MTlfS0VZX1NJWkUpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX2ZmaS5idWZmZXIoYnVmLCBfRUQyNTUxOV9LRVlfU0laRSlbOl1cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC9lZDQ0OC5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCBleGNlcHRpb25zXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBzZXJpYWxpemF0aW9uXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMuZWQ0NDggaW1wb3J0IChcclxuICAgIEVkNDQ4UHJpdmF0ZUtleSxcclxuICAgIEVkNDQ4UHVibGljS2V5LFxyXG4pXHJcblxyXG5pZiB0eXBpbmcuVFlQRV9DSEVDS0lORzpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IEJhY2tlbmRcclxuXHJcbl9FRDQ0OF9LRVlfU0laRSA9IDU3XHJcbl9FRDQ0OF9TSUdfU0laRSA9IDExNFxyXG5cclxuXHJcbmNsYXNzIF9FZDQ0OFB1YmxpY0tleShFZDQ0OFB1YmxpY0tleSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBldnBfcGtleSk6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9ldnBfcGtleSA9IGV2cF9wa2V5XHJcblxyXG4gICAgZGVmIHB1YmxpY19ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQsXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgZW5jb2RpbmcgaXMgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5SYXdcclxuICAgICAgICAgICAgb3IgZm9ybWF0IGlzIHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LlJhd1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIGVuY29kaW5nIGlzIG5vdCBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlJhd1xyXG4gICAgICAgICAgICAgICAgb3IgZm9ybWF0IGlzIG5vdCBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5SYXdcclxuICAgICAgICAgICAgKTpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgIldoZW4gdXNpbmcgUmF3IGJvdGggZW5jb2RpbmcgYW5kIGZvcm1hdCBtdXN0IGJlIFJhdyJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9yYXdfcHVibGljX2J5dGVzKClcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX3B1YmxpY19rZXlfYnl0ZXMoXHJcbiAgICAgICAgICAgIGVuY29kaW5nLCBmb3JtYXQsIHNlbGYsIHNlbGYuX2V2cF9wa2V5LCBOb25lXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfcmF3X3B1YmxpY19ieXRlcyhzZWxmKSAtPiBieXRlczpcclxuICAgICAgICBidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyIFtdIiwgX0VENDQ4X0tFWV9TSVpFKVxyXG4gICAgICAgIGJ1ZmxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIiwgX0VENDQ4X0tFWV9TSVpFKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9nZXRfcmF3X3B1YmxpY19rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LCBidWYsIGJ1ZmxlblxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoYnVmbGVuWzBdID09IF9FRDQ0OF9LRVlfU0laRSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYsIF9FRDQ0OF9LRVlfU0laRSlbOl1cclxuXHJcbiAgICBkZWYgdmVyaWZ5KHNlbGYsIHNpZ25hdHVyZTogYnl0ZXMsIGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIGV2cF9tZF9jdHggPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9uZXcoKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZXZwX21kX2N0eCAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBldnBfbWRfY3R4ID0gc2VsZi5fYmFja2VuZC5fZmZpLmdjKFxyXG4gICAgICAgICAgICBldnBfbWRfY3R4LCBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfRGlnZXN0VmVyaWZ5SW5pdChcclxuICAgICAgICAgICAgZXZwX21kX2N0eCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9EaWdlc3RWZXJpZnkoXHJcbiAgICAgICAgICAgIGV2cF9tZF9jdHgsIHNpZ25hdHVyZSwgbGVuKHNpZ25hdHVyZSksIGRhdGEsIGxlbihkYXRhKVxyXG4gICAgICAgIClcclxuICAgICAgICBpZiByZXMgIT0gMTpcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgICAgICByYWlzZSBleGNlcHRpb25zLkludmFsaWRTaWduYXR1cmVcclxuXHJcblxyXG5jbGFzcyBfRWQ0NDhQcml2YXRlS2V5KEVkNDQ4UHJpdmF0ZUtleSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBldnBfcGtleSk6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9ldnBfcGtleSA9IGV2cF9wa2V5XHJcblxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gRWQ0NDhQdWJsaWNLZXk6XHJcbiAgICAgICAgYnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhciBbXSIsIF9FRDQ0OF9LRVlfU0laRSlcclxuICAgICAgICBidWZsZW4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJzaXplX3QgKiIsIF9FRDQ0OF9LRVlfU0laRSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfZ2V0X3Jhd19wdWJsaWNfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSwgYnVmLCBidWZsZW5cclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGJ1ZmxlblswXSA9PSBfRUQ0NDhfS0VZX1NJWkUpXHJcbiAgICAgICAgcHVibGljX2J5dGVzID0gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYpWzpdXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuZWQ0NDhfbG9hZF9wdWJsaWNfYnl0ZXMocHVibGljX2J5dGVzKVxyXG5cclxuICAgIGRlZiBzaWduKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBieXRlczpcclxuICAgICAgICBldnBfbWRfY3R4ID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NRF9DVFhfbmV3KClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGV2cF9tZF9jdHggIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgZXZwX21kX2N0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhcclxuICAgICAgICAgICAgZXZwX21kX2N0eCwgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NRF9DVFhfZnJlZVxyXG4gICAgICAgIClcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0RpZ2VzdFNpZ25Jbml0KFxyXG4gICAgICAgICAgICBldnBfbWRfY3R4LFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSxcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCBfRUQ0NDhfU0lHX1NJWkUpXHJcbiAgICAgICAgYnVmbGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygic2l6ZV90ICoiLCBsZW4oYnVmKSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0RpZ2VzdFNpZ24oXHJcbiAgICAgICAgICAgIGV2cF9tZF9jdHgsIGJ1ZiwgYnVmbGVuLCBkYXRhLCBsZW4oZGF0YSlcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGJ1ZmxlblswXSA9PSBfRUQ0NDhfU0lHX1NJWkUpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX2ZmaS5idWZmZXIoYnVmLCBidWZsZW5bMF0pWzpdXHJcblxyXG4gICAgZGVmIHByaXZhdGVfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogc2VyaWFsaXphdGlvbi5LZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlJhd1xyXG4gICAgICAgICAgICBvciBmb3JtYXQgaXMgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuUmF3XHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0IGlzIG5vdCBzZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQuUmF3XHJcbiAgICAgICAgICAgICAgICBvciBlbmNvZGluZyBpcyBub3Qgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5SYXdcclxuICAgICAgICAgICAgICAgIG9yIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtLCBzZXJpYWxpemF0aW9uLk5vRW5jcnlwdGlvblxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiV2hlbiB1c2luZyBSYXcgYm90aCBlbmNvZGluZyBhbmQgZm9ybWF0IG11c3QgYmUgUmF3ICJcclxuICAgICAgICAgICAgICAgICAgICAiYW5kIGVuY3J5cHRpb25fYWxnb3JpdGhtIG11c3QgYmUgTm9FbmNyeXB0aW9uKCkiXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcmF3X3ByaXZhdGVfYnl0ZXMoKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fcHJpdmF0ZV9rZXlfYnl0ZXMoXHJcbiAgICAgICAgICAgIGVuY29kaW5nLCBmb3JtYXQsIGVuY3J5cHRpb25fYWxnb3JpdGhtLCBzZWxmLCBzZWxmLl9ldnBfcGtleSwgTm9uZVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX3Jhd19wcml2YXRlX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXIgW10iLCBfRUQ0NDhfS0VZX1NJWkUpXHJcbiAgICAgICAgYnVmbGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygic2l6ZV90ICoiLCBfRUQ0NDhfS0VZX1NJWkUpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9QS0VZX2dldF9yYXdfcHJpdmF0ZV9rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LCBidWYsIGJ1ZmxlblxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoYnVmbGVuWzBdID09IF9FRDQ0OF9LRVlfU0laRSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYsIF9FRDQ0OF9LRVlfU0laRSlbOl1cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC9oYXNoZXMucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCBVbnN1cHBvcnRlZEFsZ29yaXRobSwgX1JlYXNvbnNcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGhhc2hlc1xyXG5cclxuXHJcbmlmIHR5cGluZy5UWVBFX0NIRUNLSU5HOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgQmFja2VuZFxyXG5cclxuXHJcbmNsYXNzIF9IYXNoQ29udGV4dChoYXNoZXMuSGFzaENvbnRleHQpOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgYWxnb3JpdGhtOiBoYXNoZXMuSGFzaEFsZ29yaXRobSwgY3R4PU5vbmVcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLl9hbGdvcml0aG0gPSBhbGdvcml0aG1cclxuXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuXHJcbiAgICAgICAgaWYgY3R4IGlzIE5vbmU6XHJcbiAgICAgICAgICAgIGN0eCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfTURfQ1RYX25ldygpXHJcbiAgICAgICAgICAgIGN0eCA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhcclxuICAgICAgICAgICAgICAgIGN0eCwgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NRF9DVFhfZnJlZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGV2cF9tZCA9IHNlbGYuX2JhY2tlbmQuX2V2cF9tZF9mcm9tX2FsZ29yaXRobShhbGdvcml0aG0pXHJcbiAgICAgICAgICAgIGlmIGV2cF9tZCA9PSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTDpcclxuICAgICAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgICAgICJ7fSBpcyBub3QgYSBzdXBwb3J0ZWQgaGFzaCBvbiB0aGlzIGJhY2tlbmQuIi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9IQVNILFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0RpZ2VzdEluaXRfZXgoXHJcbiAgICAgICAgICAgICAgICBjdHgsIGV2cF9tZCwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG5cclxuICAgICAgICBzZWxmLl9jdHggPSBjdHhcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBhbGdvcml0aG0oc2VsZikgLT4gaGFzaGVzLkhhc2hBbGdvcml0aG06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2FsZ29yaXRobVxyXG5cclxuICAgIGRlZiBjb3B5KHNlbGYpIC0+ICJfSGFzaENvbnRleHQiOlxyXG4gICAgICAgIGNvcGllZF9jdHggPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01EX0NUWF9uZXcoKVxyXG4gICAgICAgIGNvcGllZF9jdHggPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoXHJcbiAgICAgICAgICAgIGNvcGllZF9jdHgsIHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfTURfQ1RYX2ZyZWVcclxuICAgICAgICApXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NRF9DVFhfY29weV9leChjb3BpZWRfY3R4LCBzZWxmLl9jdHgpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuICAgICAgICByZXR1cm4gX0hhc2hDb250ZXh0KHNlbGYuX2JhY2tlbmQsIHNlbGYuYWxnb3JpdGhtLCBjdHg9Y29waWVkX2N0eClcclxuXHJcbiAgICBkZWYgdXBkYXRlKHNlbGYsIGRhdGE6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIGRhdGFfcHRyID0gc2VsZi5fYmFja2VuZC5fZmZpLmZyb21fYnVmZmVyKGRhdGEpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9EaWdlc3RVcGRhdGUoXHJcbiAgICAgICAgICAgIHNlbGYuX2N0eCwgZGF0YV9wdHIsIGxlbihkYXRhKVxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG5cclxuICAgIGRlZiBmaW5hbGl6ZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICBpZiBpc2luc3RhbmNlKHNlbGYuYWxnb3JpdGhtLCBoYXNoZXMuRXh0ZW5kYWJsZU91dHB1dEZ1bmN0aW9uKTpcclxuICAgICAgICAgICAgIyBleHRlbmRhYmxlIG91dHB1dCBmdW5jdGlvbnMgdXNlIGEgZGlmZmVyZW50IGZpbmFsaXplXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9maW5hbGl6ZV94b2YoKVxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoXHJcbiAgICAgICAgICAgICAgICAidW5zaWduZWQgY2hhcltdIiwgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NQVhfTURfU0laRVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIG91dGxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGludCAqIilcclxuICAgICAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9EaWdlc3RGaW5hbF9leChzZWxmLl9jdHgsIGJ1Ziwgb3V0bGVuKVxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KFxyXG4gICAgICAgICAgICAgICAgb3V0bGVuWzBdID09IHNlbGYuYWxnb3JpdGhtLmRpZ2VzdF9zaXplXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX2ZmaS5idWZmZXIoYnVmKVs6IG91dGxlblswXV1cclxuXHJcbiAgICBkZWYgX2ZpbmFsaXplX3hvZihzZWxmKSAtPiBieXRlczpcclxuICAgICAgICBidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KFxyXG4gICAgICAgICAgICAidW5zaWduZWQgY2hhcltdIiwgc2VsZi5hbGdvcml0aG0uZGlnZXN0X3NpemVcclxuICAgICAgICApXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9EaWdlc3RGaW5hbFhPRihcclxuICAgICAgICAgICAgc2VsZi5fY3R4LCBidWYsIHNlbGYuYWxnb3JpdGhtLmRpZ2VzdF9zaXplXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX2ZmaS5idWZmZXIoYnVmKVs6IHNlbGYuYWxnb3JpdGhtLmRpZ2VzdF9zaXplXVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9iYWNrZW5kcy9vcGVuc3NsL2htYWMucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCAoXHJcbiAgICBJbnZhbGlkU2lnbmF0dXJlLFxyXG4gICAgVW5zdXBwb3J0ZWRBbGdvcml0aG0sXHJcbiAgICBfUmVhc29ucyxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcyBpbXBvcnQgY29uc3RhbnRfdGltZSwgaGFzaGVzXHJcblxyXG5cclxuaWYgdHlwaW5nLlRZUEVfQ0hFQ0tJTkc6XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBCYWNrZW5kXHJcblxyXG5cclxuY2xhc3MgX0hNQUNDb250ZXh0KGhhc2hlcy5IYXNoQ29udGV4dCk6XHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICAgICAga2V5OiBieXRlcyxcclxuICAgICAgICBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtLFxyXG4gICAgICAgIGN0eD1Ob25lLFxyXG4gICAgKTpcclxuICAgICAgICBzZWxmLl9hbGdvcml0aG0gPSBhbGdvcml0aG1cclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG5cclxuICAgICAgICBpZiBjdHggaXMgTm9uZTpcclxuICAgICAgICAgICAgY3R4ID0gc2VsZi5fYmFja2VuZC5fbGliLkhNQUNfQ1RYX25ldygpXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoY3R4ICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgICAgICBjdHggPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoY3R4LCBzZWxmLl9iYWNrZW5kLl9saWIuSE1BQ19DVFhfZnJlZSlcclxuICAgICAgICAgICAgZXZwX21kID0gc2VsZi5fYmFja2VuZC5fZXZwX21kX2Zyb21fYWxnb3JpdGhtKGFsZ29yaXRobSlcclxuICAgICAgICAgICAgaWYgZXZwX21kID09IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICAgICAgICAgInt9IGlzIG5vdCBhIHN1cHBvcnRlZCBoYXNoIG9uIHRoaXMgYmFja2VuZCIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG0ubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfSEFTSCxcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAga2V5X3B0ciA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5mcm9tX2J1ZmZlcihrZXkpXHJcbiAgICAgICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5ITUFDX0luaXRfZXgoXHJcbiAgICAgICAgICAgICAgICBjdHgsIGtleV9wdHIsIGxlbihrZXkpLCBldnBfbWQsIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgIT0gMClcclxuXHJcbiAgICAgICAgc2VsZi5fY3R4ID0gY3R4XHJcbiAgICAgICAgc2VsZi5fa2V5ID0ga2V5XHJcblxyXG4gICAgQHByb3BlcnR5XHJcbiAgICBkZWYgYWxnb3JpdGhtKHNlbGYpIC0+IGhhc2hlcy5IYXNoQWxnb3JpdGhtOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9hbGdvcml0aG1cclxuXHJcbiAgICBkZWYgY29weShzZWxmKSAtPiAiX0hNQUNDb250ZXh0IjpcclxuICAgICAgICBjb3BpZWRfY3R4ID0gc2VsZi5fYmFja2VuZC5fbGliLkhNQUNfQ1RYX25ldygpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChjb3BpZWRfY3R4ICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIGNvcGllZF9jdHggPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoXHJcbiAgICAgICAgICAgIGNvcGllZF9jdHgsIHNlbGYuX2JhY2tlbmQuX2xpYi5ITUFDX0NUWF9mcmVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5ITUFDX0NUWF9jb3B5KGNvcGllZF9jdHgsIHNlbGYuX2N0eClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgICAgIHJldHVybiBfSE1BQ0NvbnRleHQoXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQsIHNlbGYuX2tleSwgc2VsZi5hbGdvcml0aG0sIGN0eD1jb3BpZWRfY3R4XHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiB1cGRhdGUoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgZGF0YV9wdHIgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZnJvbV9idWZmZXIoZGF0YSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuSE1BQ19VcGRhdGUoc2VsZi5fY3R4LCBkYXRhX3B0ciwgbGVuKGRhdGEpKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcblxyXG4gICAgZGVmIGZpbmFsaXplKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoXHJcbiAgICAgICAgICAgICJ1bnNpZ25lZCBjaGFyW10iLCBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX01BWF9NRF9TSVpFXHJcbiAgICAgICAgKVxyXG4gICAgICAgIG91dGxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGludCAqIilcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuSE1BQ19GaW5hbChzZWxmLl9jdHgsIGJ1Ziwgb3V0bGVuKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzICE9IDApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChvdXRsZW5bMF0gPT0gc2VsZi5hbGdvcml0aG0uZGlnZXN0X3NpemUpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX2ZmaS5idWZmZXIoYnVmKVs6IG91dGxlblswXV1cclxuXHJcbiAgICBkZWYgdmVyaWZ5KHNlbGYsIHNpZ25hdHVyZTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgZGlnZXN0ID0gc2VsZi5maW5hbGl6ZSgpXHJcbiAgICAgICAgaWYgbm90IGNvbnN0YW50X3RpbWUuYnl0ZXNfZXEoZGlnZXN0LCBzaWduYXR1cmUpOlxyXG4gICAgICAgICAgICByYWlzZSBJbnZhbGlkU2lnbmF0dXJlKCJTaWduYXR1cmUgZGlkIG5vdCBtYXRjaCBkaWdlc3QuIilcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC9wb2x5MTMwNS5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IEludmFsaWRTaWduYXR1cmVcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGNvbnN0YW50X3RpbWVcclxuXHJcblxyXG5fUE9MWTEzMDVfVEFHX1NJWkUgPSAxNlxyXG5fUE9MWTEzMDVfS0VZX1NJWkUgPSAzMlxyXG5cclxuXHJcbmlmIHR5cGluZy5UWVBFX0NIRUNLSU5HOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgQmFja2VuZFxyXG5cclxuXHJcbmNsYXNzIF9Qb2x5MTMwNUNvbnRleHQ6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBrZXk6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcblxyXG4gICAgICAgIGtleV9wdHIgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZnJvbV9idWZmZXIoa2V5KVxyXG4gICAgICAgICMgVGhpcyBmdW5jdGlvbiBjb3BpZXMgdGhlIGtleSBpbnRvIE9wZW5TU0wtb3duZWQgbWVtb3J5IHNvIHdlIGRvblwndFxyXG4gICAgICAgICMgbmVlZCB0byByZXRhaW4gaXQgb3Vyc2VsdmVzXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfbmV3X3Jhd19wcml2YXRlX2tleShcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fbGliLk5JRF9wb2x5MTMwNSxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIGtleV9wdHIsXHJcbiAgICAgICAgICAgIGxlbihrZXkpLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGV2cF9wa2V5ICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gc2VsZi5fYmFja2VuZC5fZmZpLmdjKFxyXG4gICAgICAgICAgICBldnBfcGtleSwgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9QS0VZX2ZyZWVcclxuICAgICAgICApXHJcbiAgICAgICAgY3R4ID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NRF9DVFhfbmV3KClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGN0eCAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9jdHggPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoXHJcbiAgICAgICAgICAgIGN0eCwgc2VsZi5fYmFja2VuZC5fbGliLkVWUF9NRF9DVFhfZnJlZVxyXG4gICAgICAgIClcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0RpZ2VzdFNpZ25Jbml0KFxyXG4gICAgICAgICAgICBzZWxmLl9jdHgsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG5cclxuICAgIGRlZiB1cGRhdGUoc2VsZiwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6XHJcbiAgICAgICAgZGF0YV9wdHIgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZnJvbV9idWZmZXIoZGF0YSlcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX0RpZ2VzdFNpZ25VcGRhdGUoXHJcbiAgICAgICAgICAgIHNlbGYuX2N0eCwgZGF0YV9wdHIsIGxlbihkYXRhKVxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG5cclxuICAgIGRlZiBmaW5hbGl6ZShzZWxmKSAtPiBieXRlczpcclxuICAgICAgICBidWYgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCBfUE9MWTEzMDVfVEFHX1NJWkUpXHJcbiAgICAgICAgb3V0bGVuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygic2l6ZV90ICoiLCBfUE9MWTEzMDVfVEFHX1NJWkUpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9EaWdlc3RTaWduRmluYWwoc2VsZi5fY3R4LCBidWYsIG91dGxlbilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyAhPSAwKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQob3V0bGVuWzBdID09IF9QT0xZMTMwNV9UQUdfU0laRSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYpWzogb3V0bGVuWzBdXVxyXG5cclxuICAgIGRlZiB2ZXJpZnkoc2VsZiwgdGFnOiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICBtYWMgPSBzZWxmLmZpbmFsaXplKClcclxuICAgICAgICBpZiBub3QgY29uc3RhbnRfdGltZS5ieXRlc19lcShtYWMsIHRhZyk6XHJcbiAgICAgICAgICAgIHJhaXNlIEludmFsaWRTaWduYXR1cmUoIlZhbHVlIGRpZCBub3QgbWF0Y2ggY29tcHV0ZWQgdGFnLiIpXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L2JhY2tlbmRzL29wZW5zc2wvcnNhLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5LmV4Y2VwdGlvbnMgaW1wb3J0IChcclxuICAgIEludmFsaWRTaWduYXR1cmUsXHJcbiAgICBVbnN1cHBvcnRlZEFsZ29yaXRobSxcclxuICAgIF9SZWFzb25zLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLnV0aWxzIGltcG9ydCAoXHJcbiAgICBfY2FsY3VsYXRlX2RpZ2VzdF9hbmRfYWxnb3JpdGhtLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBoYXNoZXMsIHNlcmlhbGl6YXRpb25cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYyBpbXBvcnQgKFxyXG4gICAgdXRpbHMgYXMgYXN5bV91dGlscyxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljLnBhZGRpbmcgaW1wb3J0IChcclxuICAgIEFzeW1tZXRyaWNQYWRkaW5nLFxyXG4gICAgTUdGMSxcclxuICAgIE9BRVAsXHJcbiAgICBQS0NTMXYxNSxcclxuICAgIFBTUyxcclxuICAgIF9BdXRvLFxyXG4gICAgX0RpZ2VzdExlbmd0aCxcclxuICAgIF9NYXhMZW5ndGgsXHJcbiAgICBjYWxjdWxhdGVfbWF4X3Bzc19zYWx0X2xlbmd0aCxcclxuKVxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljLnJzYSBpbXBvcnQgKFxyXG4gICAgUlNBUHJpdmF0ZUtleSxcclxuICAgIFJTQVByaXZhdGVOdW1iZXJzLFxyXG4gICAgUlNBUHVibGljS2V5LFxyXG4gICAgUlNBUHVibGljTnVtYmVycyxcclxuKVxyXG5cclxuXHJcbmlmIHR5cGluZy5UWVBFX0NIRUNLSU5HOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgQmFja2VuZFxyXG5cclxuXHJcbmRlZiBfZ2V0X3JzYV9wc3Nfc2FsdF9sZW5ndGgoXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICBwc3M6IFBTUyxcclxuICAgIGtleTogdHlwaW5nLlVuaW9uW1JTQVByaXZhdGVLZXksIFJTQVB1YmxpY0tleV0sXHJcbiAgICBoYXNoX2FsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0sXHJcbikgLT4gaW50OlxyXG4gICAgc2FsdCA9IHBzcy5fc2FsdF9sZW5ndGhcclxuXHJcbiAgICBpZiBpc2luc3RhbmNlKHNhbHQsIF9NYXhMZW5ndGgpOlxyXG4gICAgICAgIHJldHVybiBjYWxjdWxhdGVfbWF4X3Bzc19zYWx0X2xlbmd0aChrZXksIGhhc2hfYWxnb3JpdGhtKVxyXG4gICAgZWxpZiBpc2luc3RhbmNlKHNhbHQsIF9EaWdlc3RMZW5ndGgpOlxyXG4gICAgICAgIHJldHVybiBoYXNoX2FsZ29yaXRobS5kaWdlc3Rfc2l6ZVxyXG4gICAgZWxpZiBpc2luc3RhbmNlKHNhbHQsIF9BdXRvKTpcclxuICAgICAgICBpZiBpc2luc3RhbmNlKGtleSwgUlNBUHJpdmF0ZUtleSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAiUFNTIHNhbHQgbGVuZ3RoIGNhbiBvbmx5IGJlIHNldCB0byBBVVRPIHdoZW4gdmVyaWZ5aW5nIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIGJhY2tlbmQuX2xpYi5SU0FfUFNTX1NBTFRMRU5fQVVUT1xyXG4gICAgZWxzZTpcclxuICAgICAgICByZXR1cm4gc2FsdFxyXG5cclxuXHJcbmRlZiBfZW5jX2RlY19yc2EoXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICBrZXk6IHR5cGluZy5VbmlvblsiX1JTQVByaXZhdGVLZXkiLCAiX1JTQVB1YmxpY0tleSJdLFxyXG4gICAgZGF0YTogYnl0ZXMsXHJcbiAgICBwYWRkaW5nOiBBc3ltbWV0cmljUGFkZGluZyxcclxuKSAtPiBieXRlczpcclxuICAgIGlmIG5vdCBpc2luc3RhbmNlKHBhZGRpbmcsIEFzeW1tZXRyaWNQYWRkaW5nKTpcclxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlBhZGRpbmcgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBBc3ltbWV0cmljUGFkZGluZy4iKVxyXG5cclxuICAgIGlmIGlzaW5zdGFuY2UocGFkZGluZywgUEtDUzF2MTUpOlxyXG4gICAgICAgIHBhZGRpbmdfZW51bSA9IGJhY2tlbmQuX2xpYi5SU0FfUEtDUzFfUEFERElOR1xyXG4gICAgZWxpZiBpc2luc3RhbmNlKHBhZGRpbmcsIE9BRVApOlxyXG4gICAgICAgIHBhZGRpbmdfZW51bSA9IGJhY2tlbmQuX2xpYi5SU0FfUEtDUzFfT0FFUF9QQURESU5HXHJcblxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHBhZGRpbmcuX21nZiwgTUdGMSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgIk9ubHkgTUdGMSBpcyBzdXBwb3J0ZWQgYnkgdGhpcyBiYWNrZW5kLiIsXHJcbiAgICAgICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9NR0YsXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgbm90IGJhY2tlbmQucnNhX3BhZGRpbmdfc3VwcG9ydGVkKHBhZGRpbmcpOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJUaGlzIGNvbWJpbmF0aW9uIG9mIHBhZGRpbmcgYW5kIGhhc2ggYWxnb3JpdGhtIGlzIG5vdCAiXHJcbiAgICAgICAgICAgICAgICAic3VwcG9ydGVkIGJ5IHRoaXMgYmFja2VuZC4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfUEFERElORyxcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgIGVsc2U6XHJcbiAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICJ7fSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYmFja2VuZC4iLmZvcm1hdChwYWRkaW5nLm5hbWUpLFxyXG4gICAgICAgICAgICBfUmVhc29ucy5VTlNVUFBPUlRFRF9QQURESU5HLFxyXG4gICAgICAgIClcclxuXHJcbiAgICByZXR1cm4gX2VuY19kZWNfcnNhX3BrZXlfY3R4KGJhY2tlbmQsIGtleSwgZGF0YSwgcGFkZGluZ19lbnVtLCBwYWRkaW5nKVxyXG5cclxuXHJcbmRlZiBfZW5jX2RlY19yc2FfcGtleV9jdHgoXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICBrZXk6IHR5cGluZy5VbmlvblsiX1JTQVByaXZhdGVLZXkiLCAiX1JTQVB1YmxpY0tleSJdLFxyXG4gICAgZGF0YTogYnl0ZXMsXHJcbiAgICBwYWRkaW5nX2VudW06IGludCxcclxuICAgIHBhZGRpbmc6IEFzeW1tZXRyaWNQYWRkaW5nLFxyXG4pIC0+IGJ5dGVzOlxyXG4gICAgaW5pdDogdHlwaW5nLkNhbGxhYmxlW1t0eXBpbmcuQW55XSwgaW50XVxyXG4gICAgY3J5cHQ6IHR5cGluZy5DYWxsYWJsZVtbdHlwaW5nLkFueSwgdHlwaW5nLkFueSwgaW50LCBieXRlcywgaW50XSwgaW50XVxyXG4gICAgaWYgaXNpbnN0YW5jZShrZXksIF9SU0FQdWJsaWNLZXkpOlxyXG4gICAgICAgIGluaXQgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfZW5jcnlwdF9pbml0XHJcbiAgICAgICAgY3J5cHQgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfZW5jcnlwdFxyXG4gICAgZWxzZTpcclxuICAgICAgICBpbml0ID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX2RlY3J5cHRfaW5pdFxyXG4gICAgICAgIGNyeXB0ID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX2RlY3J5cHRcclxuXHJcbiAgICBwa2V5X2N0eCA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9DVFhfbmV3KGtleS5fZXZwX3BrZXksIGJhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwa2V5X2N0eCAhPSBiYWNrZW5kLl9mZmkuTlVMTClcclxuICAgIHBrZXlfY3R4ID0gYmFja2VuZC5fZmZpLmdjKHBrZXlfY3R4LCBiYWNrZW5kLl9saWIuRVZQX1BLRVlfQ1RYX2ZyZWUpXHJcbiAgICByZXMgPSBpbml0KHBrZXlfY3R4KVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9DVFhfc2V0X3JzYV9wYWRkaW5nKHBrZXlfY3R4LCBwYWRkaW5nX2VudW0pXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA+IDApXHJcbiAgICBidWZfc2l6ZSA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9zaXplKGtleS5fZXZwX3BrZXkpXHJcbiAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGJ1Zl9zaXplID4gMClcclxuICAgIGlmIGlzaW5zdGFuY2UocGFkZGluZywgT0FFUCk6XHJcbiAgICAgICAgbWdmMV9tZCA9IGJhY2tlbmQuX2V2cF9tZF9ub25fbnVsbF9mcm9tX2FsZ29yaXRobShcclxuICAgICAgICAgICAgcGFkZGluZy5fbWdmLl9hbGdvcml0aG1cclxuICAgICAgICApXHJcbiAgICAgICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX0NUWF9zZXRfcnNhX21nZjFfbWQocGtleV9jdHgsIG1nZjFfbWQpXHJcbiAgICAgICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPiAwKVxyXG4gICAgICAgIG9hZXBfbWQgPSBiYWNrZW5kLl9ldnBfbWRfbm9uX251bGxfZnJvbV9hbGdvcml0aG0ocGFkZGluZy5fYWxnb3JpdGhtKVxyXG4gICAgICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9DVFhfc2V0X3JzYV9vYWVwX21kKHBrZXlfY3R4LCBvYWVwX21kKVxyXG4gICAgICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID4gMClcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgICAgaXNpbnN0YW5jZShwYWRkaW5nLCBPQUVQKVxyXG4gICAgICAgIGFuZCBwYWRkaW5nLl9sYWJlbCBpcyBub3QgTm9uZVxyXG4gICAgICAgIGFuZCBsZW4ocGFkZGluZy5fbGFiZWwpID4gMFxyXG4gICAgKTpcclxuICAgICAgICAjIHNldDBfcnNhX29hZXBfbGFiZWwgdGFrZXMgb3duZXJzaGlwIG9mIHRoZSBjaGFyICogc28gd2UgbmVlZCB0b1xyXG4gICAgICAgICMgY29weSBpdCBpbnRvIHNvbWUgbmV3IG1lbW9yeVxyXG4gICAgICAgIGxhYmVscHRyID0gYmFja2VuZC5fbGliLk9QRU5TU0xfbWFsbG9jKGxlbihwYWRkaW5nLl9sYWJlbCkpXHJcbiAgICAgICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChsYWJlbHB0ciAhPSBiYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBiYWNrZW5kLl9mZmkubWVtbW92ZShsYWJlbHB0ciwgcGFkZGluZy5fbGFiZWwsIGxlbihwYWRkaW5nLl9sYWJlbCkpXHJcbiAgICAgICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX0NUWF9zZXQwX3JzYV9vYWVwX2xhYmVsKFxyXG4gICAgICAgICAgICBwa2V5X2N0eCwgbGFiZWxwdHIsIGxlbihwYWRkaW5nLl9sYWJlbClcclxuICAgICAgICApXHJcbiAgICAgICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICBvdXRsZW4gPSBiYWNrZW5kLl9mZmkubmV3KCJzaXplX3QgKiIsIGJ1Zl9zaXplKVxyXG4gICAgYnVmID0gYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhcltdIiwgYnVmX3NpemUpXHJcbiAgICAjIEV2ZXJ5dGhpbmcgZnJvbSB0aGlzIGxpbmUgb253YXJkcyBpcyB3cml0dGVuIHdpdGggdGhlIGdvYWwgb2YgYmVpbmcgYXNcclxuICAgICMgY29uc3RhbnQtdGltZSBhcyBpcyBwcmFjdGljYWwgZ2l2ZW4gdGhlIGNvbnN0cmFpbnRzIG9mIFB5dGhvbiBhbmQgb3VyXHJcbiAgICAjIEFQSS4gU2VlIEJsZWljaGVuYmFjaGVyXCdzIFwnOTggYXR0YWNrIG9uIFJTQSwgYW5kIGl0cyBtYW55IG1hbnkgdmFyaWFudHMuXHJcbiAgICAjIEFzIHN1Y2gsIHlvdSBzaG91bGQgbm90IGF0dGVtcHQgdG8gY2hhbmdlIHRoaXMgKHBhcnRpY3VsYXJseSB0byAiY2xlYW4gaXRcclxuICAgICMgdXAiKSB3aXRob3V0IHVuZGVyc3RhbmRpbmcgd2h5IGl0IHdhcyB3cml0dGVuIHRoaXMgd2F5IChzZWVcclxuICAgICMgQ2hlc3RlcnRvblwncyBGZW5jZSksIGFuZCB3aXRob3V0IG1lYXN1cmluZyB0byB2ZXJpZnkgeW91IGhhdmUgbm90XHJcbiAgICAjIGludHJvZHVjZWQgb2JzZXJ2YWJsZSB0aW1lIGRpZmZlcmVuY2VzLlxyXG4gICAgcmVzID0gY3J5cHQocGtleV9jdHgsIGJ1Ziwgb3V0bGVuLCBkYXRhLCBsZW4oZGF0YSkpXHJcbiAgICByZXNidWYgPSBiYWNrZW5kLl9mZmkuYnVmZmVyKGJ1ZilbOiBvdXRsZW5bMF1dXHJcbiAgICBiYWNrZW5kLl9saWIuRVJSX2NsZWFyX2Vycm9yKClcclxuICAgIGlmIHJlcyA8PSAwOlxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkVuY3J5cHRpb24vZGVjcnlwdGlvbiBmYWlsZWQuIilcclxuICAgIHJldHVybiByZXNidWZcclxuXHJcblxyXG5kZWYgX3JzYV9zaWdfZGV0ZXJtaW5lX3BhZGRpbmcoXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICBrZXk6IHR5cGluZy5VbmlvblsiX1JTQVByaXZhdGVLZXkiLCAiX1JTQVB1YmxpY0tleSJdLFxyXG4gICAgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcsXHJcbiAgICBhbGdvcml0aG06IHR5cGluZy5PcHRpb25hbFtoYXNoZXMuSGFzaEFsZ29yaXRobV0sXHJcbikgLT4gaW50OlxyXG4gICAgaWYgbm90IGlzaW5zdGFuY2UocGFkZGluZywgQXN5bW1ldHJpY1BhZGRpbmcpOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiRXhwZWN0ZWQgcHJvdmlkZXIgb2YgQXN5bW1ldHJpY1BhZGRpbmcuIilcclxuXHJcbiAgICBwa2V5X3NpemUgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfc2l6ZShrZXkuX2V2cF9wa2V5KVxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwa2V5X3NpemUgPiAwKVxyXG5cclxuICAgIGlmIGlzaW5zdGFuY2UocGFkZGluZywgUEtDUzF2MTUpOlxyXG4gICAgICAgICMgSGFzaCBhbGdvcml0aG0gaXMgaWdub3JlZCBmb3IgUEtDUzF2MTUtcGFkZGluZywgbWF5IGJlIE5vbmUuXHJcbiAgICAgICAgcGFkZGluZ19lbnVtID0gYmFja2VuZC5fbGliLlJTQV9QS0NTMV9QQURESU5HXHJcbiAgICBlbGlmIGlzaW5zdGFuY2UocGFkZGluZywgUFNTKTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShwYWRkaW5nLl9tZ2YsIE1HRjEpOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJPbmx5IE1HRjEgaXMgc3VwcG9ydGVkIGJ5IHRoaXMgYmFja2VuZC4iLFxyXG4gICAgICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfTUdGLFxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgUFNTIHBhZGRpbmcgcmVxdWlyZXMgYSBoYXNoIGFsZ29yaXRobVxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGFsZ29yaXRobSwgaGFzaGVzLkhhc2hBbGdvcml0aG0pOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkV4cGVjdGVkIGluc3RhbmNlIG9mIGhhc2hlcy5IYXNoQWxnb3JpdGhtLiIpXHJcblxyXG4gICAgICAgICMgU2l6ZSBvZiBrZXkgaW4gYnl0ZXMgLSAyIGlzIHRoZSBtYXhpbXVtXHJcbiAgICAgICAgIyBQU1Mgc2lnbmF0dXJlIGxlbmd0aCAoc2FsdCBsZW5ndGggaXMgY2hlY2tlZCBsYXRlcilcclxuICAgICAgICBpZiBwa2V5X3NpemUgLSBhbGdvcml0aG0uZGlnZXN0X3NpemUgLSAyIDwgMDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJEaWdlc3QgdG9vIGxhcmdlIGZvciBrZXkgc2l6ZS4gVXNlIGEgbGFyZ2VyICJcclxuICAgICAgICAgICAgICAgICJrZXkgb3IgZGlmZmVyZW50IGRpZ2VzdC4iXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcGFkZGluZ19lbnVtID0gYmFja2VuZC5fbGliLlJTQV9QS0NTMV9QU1NfUEFERElOR1xyXG4gICAgZWxzZTpcclxuICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgInt9IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBiYWNrZW5kLiIuZm9ybWF0KHBhZGRpbmcubmFtZSksXHJcbiAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX1BBRERJTkcsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIHJldHVybiBwYWRkaW5nX2VudW1cclxuXHJcblxyXG4jIEhhc2ggYWxnb3JpdGhtIGNhbiBiZSBhYnNlbnQgKE5vbmUpIHRvIGluaXRpYWxpemUgdGhlIGNvbnRleHQgd2l0aG91dCBzZXR0aW5nXHJcbiMgYW55IG1lc3NhZ2UgZGlnZXN0IGFsZ29yaXRobS4gVGhpcyBpcyBjdXJyZW50bHkgb25seSB2YWxpZCBmb3IgdGhlIFBLQ1MxdjE1XHJcbiMgcGFkZGluZyB0eXBlLCB3aGVyZSBpdCBtZWFucyB0aGF0IHRoZSBzaWduYXR1cmUgZGF0YSBpcyBlbmNvZGVkL2RlY29kZWRcclxuIyBhcyBwcm92aWRlZCwgd2l0aG91dCBiZWluZyB3cmFwcGVkIGluIGEgRGlnZXN0SW5mbyBzdHJ1Y3R1cmUuXHJcbmRlZiBfcnNhX3NpZ19zZXR1cChcclxuICAgIGJhY2tlbmQ6ICJCYWNrZW5kIixcclxuICAgIHBhZGRpbmc6IEFzeW1tZXRyaWNQYWRkaW5nLFxyXG4gICAgYWxnb3JpdGhtOiB0eXBpbmcuT3B0aW9uYWxbaGFzaGVzLkhhc2hBbGdvcml0aG1dLFxyXG4gICAga2V5OiB0eXBpbmcuVW5pb25bIl9SU0FQdWJsaWNLZXkiLCAiX1JTQVByaXZhdGVLZXkiXSxcclxuICAgIGluaXRfZnVuYzogdHlwaW5nLkNhbGxhYmxlW1t0eXBpbmcuQW55XSwgaW50XSxcclxuKTpcclxuICAgIHBhZGRpbmdfZW51bSA9IF9yc2Ffc2lnX2RldGVybWluZV9wYWRkaW5nKGJhY2tlbmQsIGtleSwgcGFkZGluZywgYWxnb3JpdGhtKVxyXG4gICAgcGtleV9jdHggPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfQ1RYX25ldyhrZXkuX2V2cF9wa2V5LCBiYWNrZW5kLl9mZmkuTlVMTClcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocGtleV9jdHggIT0gYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICBwa2V5X2N0eCA9IGJhY2tlbmQuX2ZmaS5nYyhwa2V5X2N0eCwgYmFja2VuZC5fbGliLkVWUF9QS0VZX0NUWF9mcmVlKVxyXG4gICAgcmVzID0gaW5pdF9mdW5jKHBrZXlfY3R4KVxyXG4gICAgaWYgcmVzICE9IDE6XHJcbiAgICAgICAgZXJyb3JzID0gYmFja2VuZC5fY29uc3VtZV9lcnJvcnMoKVxyXG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlVuYWJsZSB0byBzaWduL3ZlcmlmeSB3aXRoIHRoaXMga2V5IiwgZXJyb3JzKVxyXG5cclxuICAgIGlmIGFsZ29yaXRobSBpcyBub3QgTm9uZTpcclxuICAgICAgICBldnBfbWQgPSBiYWNrZW5kLl9ldnBfbWRfbm9uX251bGxfZnJvbV9hbGdvcml0aG0oYWxnb3JpdGhtKVxyXG4gICAgICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9DVFhfc2V0X3NpZ25hdHVyZV9tZChwa2V5X2N0eCwgZXZwX21kKVxyXG4gICAgICAgIGlmIHJlcyA8PSAwOlxyXG4gICAgICAgICAgICBiYWNrZW5kLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgICAgIHJhaXNlIFVuc3VwcG9ydGVkQWxnb3JpdGhtKFxyXG4gICAgICAgICAgICAgICAgInt9IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBiYWNrZW5kIGZvciBSU0Egc2lnbmluZy4iLmZvcm1hdChcclxuICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG0ubmFtZVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIF9SZWFzb25zLlVOU1VQUE9SVEVEX0hBU0gsXHJcbiAgICAgICAgICAgIClcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9DVFhfc2V0X3JzYV9wYWRkaW5nKHBrZXlfY3R4LCBwYWRkaW5nX2VudW0pXHJcbiAgICBpZiByZXMgPD0gMDpcclxuICAgICAgICBiYWNrZW5kLl9jb25zdW1lX2Vycm9ycygpXHJcbiAgICAgICAgcmFpc2UgVW5zdXBwb3J0ZWRBbGdvcml0aG0oXHJcbiAgICAgICAgICAgICJ7fSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGUgUlNBIHNpZ25hdHVyZSBvcGVyYXRpb24uIi5mb3JtYXQoXHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nLm5hbWVcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgX1JlYXNvbnMuVU5TVVBQT1JURURfUEFERElORyxcclxuICAgICAgICApXHJcbiAgICBpZiBpc2luc3RhbmNlKHBhZGRpbmcsIFBTUyk6XHJcbiAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoYWxnb3JpdGhtLCBoYXNoZXMuSGFzaEFsZ29yaXRobSlcclxuICAgICAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfQ1RYX3NldF9yc2FfcHNzX3NhbHRsZW4oXHJcbiAgICAgICAgICAgIHBrZXlfY3R4LFxyXG4gICAgICAgICAgICBfZ2V0X3JzYV9wc3Nfc2FsdF9sZW5ndGgoYmFja2VuZCwgcGFkZGluZywga2V5LCBhbGdvcml0aG0pLFxyXG4gICAgICAgIClcclxuICAgICAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA+IDApXHJcblxyXG4gICAgICAgIG1nZjFfbWQgPSBiYWNrZW5kLl9ldnBfbWRfbm9uX251bGxfZnJvbV9hbGdvcml0aG0oXHJcbiAgICAgICAgICAgIHBhZGRpbmcuX21nZi5fYWxnb3JpdGhtXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9DVFhfc2V0X3JzYV9tZ2YxX21kKHBrZXlfY3R4LCBtZ2YxX21kKVxyXG4gICAgICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID4gMClcclxuXHJcbiAgICByZXR1cm4gcGtleV9jdHhcclxuXHJcblxyXG5kZWYgX3JzYV9zaWdfc2lnbihcclxuICAgIGJhY2tlbmQ6ICJCYWNrZW5kIixcclxuICAgIHBhZGRpbmc6IEFzeW1tZXRyaWNQYWRkaW5nLFxyXG4gICAgYWxnb3JpdGhtOiBoYXNoZXMuSGFzaEFsZ29yaXRobSxcclxuICAgIHByaXZhdGVfa2V5OiAiX1JTQVByaXZhdGVLZXkiLFxyXG4gICAgZGF0YTogYnl0ZXMsXHJcbikgLT4gYnl0ZXM6XHJcbiAgICBwa2V5X2N0eCA9IF9yc2Ffc2lnX3NldHVwKFxyXG4gICAgICAgIGJhY2tlbmQsXHJcbiAgICAgICAgcGFkZGluZyxcclxuICAgICAgICBhbGdvcml0aG0sXHJcbiAgICAgICAgcHJpdmF0ZV9rZXksXHJcbiAgICAgICAgYmFja2VuZC5fbGliLkVWUF9QS0VZX3NpZ25faW5pdCxcclxuICAgIClcclxuICAgIGJ1ZmxlbiA9IGJhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIilcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV9zaWduKFxyXG4gICAgICAgIHBrZXlfY3R4LCBiYWNrZW5kLl9mZmkuTlVMTCwgYnVmbGVuLCBkYXRhLCBsZW4oZGF0YSlcclxuICAgIClcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICBidWYgPSBiYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyW10iLCBidWZsZW5bMF0pXHJcbiAgICByZXMgPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfc2lnbihwa2V5X2N0eCwgYnVmLCBidWZsZW4sIGRhdGEsIGxlbihkYXRhKSlcclxuICAgIGlmIHJlcyAhPSAxOlxyXG4gICAgICAgIGVycm9ycyA9IGJhY2tlbmQuX2NvbnN1bWVfZXJyb3JzX3dpdGhfdGV4dCgpXHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgIkRpZ2VzdCBvciBzYWx0IGxlbmd0aCB0b28gbG9uZyBmb3Iga2V5IHNpemUuIFVzZSBhIGxhcmdlciBrZXkgIlxyXG4gICAgICAgICAgICAib3Igc2hvcnRlciBzYWx0IGxlbmd0aCBpZiB5b3UgYXJlIHNwZWNpZnlpbmcgYSBQU1Mgc2FsdCIsXHJcbiAgICAgICAgICAgIGVycm9ycyxcclxuICAgICAgICApXHJcblxyXG4gICAgcmV0dXJuIGJhY2tlbmQuX2ZmaS5idWZmZXIoYnVmKVs6XVxyXG5cclxuXHJcbmRlZiBfcnNhX3NpZ192ZXJpZnkoXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICBwYWRkaW5nOiBBc3ltbWV0cmljUGFkZGluZyxcclxuICAgIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0sXHJcbiAgICBwdWJsaWNfa2V5OiAiX1JTQVB1YmxpY0tleSIsXHJcbiAgICBzaWduYXR1cmU6IGJ5dGVzLFxyXG4gICAgZGF0YTogYnl0ZXMsXHJcbikgLT4gTm9uZTpcclxuICAgIHBrZXlfY3R4ID0gX3JzYV9zaWdfc2V0dXAoXHJcbiAgICAgICAgYmFja2VuZCxcclxuICAgICAgICBwYWRkaW5nLFxyXG4gICAgICAgIGFsZ29yaXRobSxcclxuICAgICAgICBwdWJsaWNfa2V5LFxyXG4gICAgICAgIGJhY2tlbmQuX2xpYi5FVlBfUEtFWV92ZXJpZnlfaW5pdCxcclxuICAgIClcclxuICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5FVlBfUEtFWV92ZXJpZnkoXHJcbiAgICAgICAgcGtleV9jdHgsIHNpZ25hdHVyZSwgbGVuKHNpZ25hdHVyZSksIGRhdGEsIGxlbihkYXRhKVxyXG4gICAgKVxyXG4gICAgIyBUaGUgcHJldmlvdXMgY2FsbCBjYW4gcmV0dXJuIG5lZ2F0aXZlIG51bWJlcnMgaW4gdGhlIGV2ZW50IG9mIGFuXHJcbiAgICAjIGVycm9yLiBUaGlzIGlzIG5vdCBhIHNpZ25hdHVyZSBmYWlsdXJlIGJ1dCB3ZSBuZWVkIHRvIGZhaWwgaWYgaXRcclxuICAgICMgb2NjdXJzLlxyXG4gICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPj0gMClcclxuICAgIGlmIHJlcyA9PSAwOlxyXG4gICAgICAgIGJhY2tlbmQuX2NvbnN1bWVfZXJyb3JzKClcclxuICAgICAgICByYWlzZSBJbnZhbGlkU2lnbmF0dXJlXHJcblxyXG5cclxuZGVmIF9yc2Ffc2lnX3JlY292ZXIoXHJcbiAgICBiYWNrZW5kOiAiQmFja2VuZCIsXHJcbiAgICBwYWRkaW5nOiBBc3ltbWV0cmljUGFkZGluZyxcclxuICAgIGFsZ29yaXRobTogdHlwaW5nLk9wdGlvbmFsW2hhc2hlcy5IYXNoQWxnb3JpdGhtXSxcclxuICAgIHB1YmxpY19rZXk6ICJfUlNBUHVibGljS2V5IixcclxuICAgIHNpZ25hdHVyZTogYnl0ZXMsXHJcbikgLT4gYnl0ZXM6XHJcbiAgICBwa2V5X2N0eCA9IF9yc2Ffc2lnX3NldHVwKFxyXG4gICAgICAgIGJhY2tlbmQsXHJcbiAgICAgICAgcGFkZGluZyxcclxuICAgICAgICBhbGdvcml0aG0sXHJcbiAgICAgICAgcHVibGljX2tleSxcclxuICAgICAgICBiYWNrZW5kLl9saWIuRVZQX1BLRVlfdmVyaWZ5X3JlY292ZXJfaW5pdCxcclxuICAgIClcclxuXHJcbiAgICAjIEF0dGVtcHQgdG8ga2VlcCB0aGUgcmVzdCBvZiB0aGUgY29kZSBpbiB0aGlzIGZ1bmN0aW9uIGFzIGNvbnN0YW50L3RpbWVcclxuICAgICMgYXMgcG9zc2libGUuIFNlZSB0aGUgY29tbWVudCBpbiBfZW5jX2RlY19yc2FfcGtleV9jdHguIE5vdGUgdGhhdCB0aGVcclxuICAgICMgYnVmbGVuIHBhcmFtZXRlciBpcyB1c2VkIGV2ZW4gdGhvdWdoIGl0cyB2YWx1ZSBtYXkgYmUgdW5kZWZpbmVkIGluIHRoZVxyXG4gICAgIyBlcnJvciBjYXNlLiBEdWUgdG8gdGhlIHRvbGVyYW50IG5hdHVyZSBvZiBQeXRob24gc2xpY2luZyB0aGlzIGRvZXMgbm90XHJcbiAgICAjIHRyaWdnZXIgYW55IGV4Y2VwdGlvbnMuXHJcbiAgICBtYXhsZW4gPSBiYWNrZW5kLl9saWIuRVZQX1BLRVlfc2l6ZShwdWJsaWNfa2V5Ll9ldnBfcGtleSlcclxuICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQobWF4bGVuID4gMClcclxuICAgIGJ1ZiA9IGJhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXJbXSIsIG1heGxlbilcclxuICAgIGJ1ZmxlbiA9IGJhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIiwgbWF4bGVuKVxyXG4gICAgcmVzID0gYmFja2VuZC5fbGliLkVWUF9QS0VZX3ZlcmlmeV9yZWNvdmVyKFxyXG4gICAgICAgIHBrZXlfY3R4LCBidWYsIGJ1Zmxlbiwgc2lnbmF0dXJlLCBsZW4oc2lnbmF0dXJlKVxyXG4gICAgKVxyXG4gICAgcmVzYnVmID0gYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYpWzogYnVmbGVuWzBdXVxyXG4gICAgYmFja2VuZC5fbGliLkVSUl9jbGVhcl9lcnJvcigpXHJcbiAgICAjIEFzc3VtZSB0aGF0IGFsbCBwYXJhbWV0ZXIgZXJyb3JzIGFyZSBoYW5kbGVkIGR1cmluZyB0aGUgc2V0dXAgcGhhc2UgYW5kXHJcbiAgICAjIGFueSBlcnJvciBoZXJlIGlzIGR1ZSB0byBpbnZhbGlkIHNpZ25hdHVyZS5cclxuICAgIGlmIHJlcyAhPSAxOlxyXG4gICAgICAgIHJhaXNlIEludmFsaWRTaWduYXR1cmVcclxuICAgIHJldHVybiByZXNidWZcclxuXHJcblxyXG5jbGFzcyBfUlNBUHJpdmF0ZUtleShSU0FQcml2YXRlS2V5KTpcclxuICAgIF9ldnBfcGtleTogb2JqZWN0XHJcbiAgICBfcnNhX2NkYXRhOiBvYmplY3RcclxuICAgIF9rZXlfc2l6ZTogaW50XHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgcnNhX2NkYXRhLCBldnBfcGtleSwgX3NraXBfY2hlY2tfa2V5OiBib29sXHJcbiAgICApOlxyXG4gICAgICAgIHJlczogaW50XHJcbiAgICAgICAgIyBSU0FfY2hlY2tfa2V5IGlzIHNsb3dlciBpbiBPcGVuU1NMIDMuMC4wIGR1ZSB0byBpbXByb3ZlZFxyXG4gICAgICAgICMgcHJpbWFsaXR5IGNoZWNraW5nLiBJbiBub3JtYWwgdXNlIHRoaXMgaXMgdW5saWtlbHkgdG8gYmUgYSBwcm9ibGVtXHJcbiAgICAgICAgIyBzaW5jZSB1c2VycyBkb25cJ3QgbG9hZCBuZXcga2V5cyBjb25zdGFudGx5LCBidXQgZm9yIFRFU1RJTkcgd2VcJ3ZlXHJcbiAgICAgICAgIyBhZGRlZCBhbiBpbml0IGFyZyB0aGF0IGFsbG93cyBza2lwcGluZyB0aGUgY2hlY2tzLiBZb3Ugc2hvdWxkIG5vdFxyXG4gICAgICAgICMgdXNlIHRoaXMgaW4gcHJvZHVjdGlvbiBjb2RlIHVubGVzcyB5b3UgdW5kZXJzdGFuZCB0aGUgY29uc2VxdWVuY2VzLlxyXG4gICAgICAgIGlmIG5vdCBfc2tpcF9jaGVja19rZXk6XHJcbiAgICAgICAgICAgIHJlcyA9IGJhY2tlbmQuX2xpYi5SU0FfY2hlY2tfa2V5KHJzYV9jZGF0YSlcclxuICAgICAgICAgICAgaWYgcmVzICE9IDE6XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSBiYWNrZW5kLl9jb25zdW1lX2Vycm9yc193aXRoX3RleHQoKVxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSW52YWxpZCBwcml2YXRlIGtleSIsIGVycm9ycylcclxuICAgICAgICAgICAgIyAyIGlzIHByaW1lIGFuZCBwYXNzZXMgYW4gUlNBIGtleSBjaGVjaywgc28gd2UgYWxzbyBjaGVja1xyXG4gICAgICAgICAgICAjIGlmIHAgYW5kIHEgYXJlIG9kZCBqdXN0IHRvIGJlIHNhZmUuXHJcbiAgICAgICAgICAgIHAgPSBiYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgICAgICBxID0gYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICAgICAgYmFja2VuZC5fbGliLlJTQV9nZXQwX2ZhY3RvcnMocnNhX2NkYXRhLCBwLCBxKVxyXG4gICAgICAgICAgICBiYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHBbMF0gIT0gYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgICAgIGJhY2tlbmQub3BlbnNzbF9hc3NlcnQocVswXSAhPSBiYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICAgICAgcF9vZGQgPSBiYWNrZW5kLl9saWIuQk5faXNfb2RkKHBbMF0pXHJcbiAgICAgICAgICAgIHFfb2RkID0gYmFja2VuZC5fbGliLkJOX2lzX29kZChxWzBdKVxyXG4gICAgICAgICAgICBpZiBwX29kZCAhPSAxIG9yIHFfb2RkICE9IDE6XHJcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSBiYWNrZW5kLl9jb25zdW1lX2Vycm9yc193aXRoX3RleHQoKVxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiSW52YWxpZCBwcml2YXRlIGtleSIsIGVycm9ycylcclxuXHJcbiAgICAgICAgIyBCbGluZGluZyBpcyBvbiBieSBkZWZhdWx0IGluIG1hbnkgdmVyc2lvbnMgb2YgT3BlblNTTCwgYnV0IGxldFwnc1xyXG4gICAgICAgICMganVzdCBiZSBjb25zZXJ2YXRpdmUgaGVyZS5cclxuICAgICAgICByZXMgPSBiYWNrZW5kLl9saWIuUlNBX2JsaW5kaW5nX29uKHJzYV9jZGF0YSwgYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9yc2FfY2RhdGEgPSByc2FfY2RhdGFcclxuICAgICAgICBzZWxmLl9ldnBfcGtleSA9IGV2cF9wa2V5XHJcblxyXG4gICAgICAgIG4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5SU0FfZ2V0MF9rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX3JzYV9jZGF0YSxcclxuICAgICAgICAgICAgbixcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KG5bMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fa2V5X3NpemUgPSBzZWxmLl9iYWNrZW5kLl9saWIuQk5fbnVtX2JpdHMoblswXSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2tleV9zaXplXHJcblxyXG4gICAgZGVmIGRlY3J5cHQoc2VsZiwgY2lwaGVydGV4dDogYnl0ZXMsIHBhZGRpbmc6IEFzeW1tZXRyaWNQYWRkaW5nKSAtPiBieXRlczpcclxuICAgICAgICBrZXlfc2l6ZV9ieXRlcyA9IChzZWxmLmtleV9zaXplICsgNykgLy8gOFxyXG4gICAgICAgIGlmIGtleV9zaXplX2J5dGVzICE9IGxlbihjaXBoZXJ0ZXh0KTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiQ2lwaGVydGV4dCBsZW5ndGggbXVzdCBiZSBlcXVhbCB0byBrZXkgc2l6ZS4iKVxyXG5cclxuICAgICAgICByZXR1cm4gX2VuY19kZWNfcnNhKHNlbGYuX2JhY2tlbmQsIHNlbGYsIGNpcGhlcnRleHQsIHBhZGRpbmcpXHJcblxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gUlNBUHVibGljS2V5OlxyXG4gICAgICAgIGN0eCA9IHNlbGYuX2JhY2tlbmQuX2xpYi5SU0FQdWJsaWNLZXlfZHVwKHNlbGYuX3JzYV9jZGF0YSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGN0eCAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBjdHggPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoY3R4LCBzZWxmLl9iYWNrZW5kLl9saWIuUlNBX2ZyZWUpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9iYWNrZW5kLl9yc2FfY2RhdGFfdG9fZXZwX3BrZXkoY3R4KVxyXG4gICAgICAgIHJldHVybiBfUlNBUHVibGljS2V5KHNlbGYuX2JhY2tlbmQsIGN0eCwgZXZwX3BrZXkpXHJcblxyXG4gICAgZGVmIHByaXZhdGVfbnVtYmVycyhzZWxmKSAtPiBSU0FQcml2YXRlTnVtYmVyczpcclxuICAgICAgICBuID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBlID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBkID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBwID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBxID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBkbXAxID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBkbXExID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBpcW1wID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygiQklHTlVNICoqIilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuUlNBX2dldDBfa2V5KHNlbGYuX3JzYV9jZGF0YSwgbiwgZSwgZClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KG5bMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChlWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZFswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuUlNBX2dldDBfZmFjdG9ycyhzZWxmLl9yc2FfY2RhdGEsIHAsIHEpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChwWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLl9saWIuUlNBX2dldDBfY3J0X3BhcmFtcyhcclxuICAgICAgICAgICAgc2VsZi5fcnNhX2NkYXRhLCBkbXAxLCBkbXExLCBpcW1wXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZG1wMVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGRtcTFbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChpcW1wWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHJldHVybiBSU0FQcml2YXRlTnVtYmVycyhcclxuICAgICAgICAgICAgcD1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQocFswXSksXHJcbiAgICAgICAgICAgIHE9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KHFbMF0pLFxyXG4gICAgICAgICAgICBkPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChkWzBdKSxcclxuICAgICAgICAgICAgZG1wMT1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQoZG1wMVswXSksXHJcbiAgICAgICAgICAgIGRtcTE9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KGRtcTFbMF0pLFxyXG4gICAgICAgICAgICBpcW1wPXNlbGYuX2JhY2tlbmQuX2JuX3RvX2ludChpcW1wWzBdKSxcclxuICAgICAgICAgICAgcHVibGljX251bWJlcnM9UlNBUHVibGljTnVtYmVycyhcclxuICAgICAgICAgICAgICAgIGU9c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KGVbMF0pLFxyXG4gICAgICAgICAgICAgICAgbj1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQoblswXSksXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBwcml2YXRlX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQsXHJcbiAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG06IHNlcmlhbGl6YXRpb24uS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24sXHJcbiAgICApIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9wcml2YXRlX2tleV9ieXRlcyhcclxuICAgICAgICAgICAgZW5jb2RpbmcsXHJcbiAgICAgICAgICAgIGZvcm1hdCxcclxuICAgICAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG0sXHJcbiAgICAgICAgICAgIHNlbGYsXHJcbiAgICAgICAgICAgIHNlbGYuX2V2cF9wa2V5LFxyXG4gICAgICAgICAgICBzZWxmLl9yc2FfY2RhdGEsXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBzaWduKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcsXHJcbiAgICAgICAgYWxnb3JpdGhtOiB0eXBpbmcuVW5pb25bYXN5bV91dGlscy5QcmVoYXNoZWQsIGhhc2hlcy5IYXNoQWxnb3JpdGhtXSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgZGF0YSwgYWxnb3JpdGhtID0gX2NhbGN1bGF0ZV9kaWdlc3RfYW5kX2FsZ29yaXRobShkYXRhLCBhbGdvcml0aG0pXHJcbiAgICAgICAgcmV0dXJuIF9yc2Ffc2lnX3NpZ24oc2VsZi5fYmFja2VuZCwgcGFkZGluZywgYWxnb3JpdGhtLCBzZWxmLCBkYXRhKVxyXG5cclxuXHJcbmNsYXNzIF9SU0FQdWJsaWNLZXkoUlNBUHVibGljS2V5KTpcclxuICAgIF9ldnBfcGtleTogb2JqZWN0XHJcbiAgICBfcnNhX2NkYXRhOiBvYmplY3RcclxuICAgIF9rZXlfc2l6ZTogaW50XHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgcnNhX2NkYXRhLCBldnBfcGtleSk6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9yc2FfY2RhdGEgPSByc2FfY2RhdGFcclxuICAgICAgICBzZWxmLl9ldnBfcGtleSA9IGV2cF9wa2V5XHJcblxyXG4gICAgICAgIG4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5SU0FfZ2V0MF9rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX3JzYV9jZGF0YSxcclxuICAgICAgICAgICAgbixcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KG5bMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgc2VsZi5fa2V5X3NpemUgPSBzZWxmLl9iYWNrZW5kLl9saWIuQk5fbnVtX2JpdHMoblswXSlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBrZXlfc2l6ZShzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2tleV9zaXplXHJcblxyXG4gICAgZGVmIGVuY3J5cHQoc2VsZiwgcGxhaW50ZXh0OiBieXRlcywgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHJldHVybiBfZW5jX2RlY19yc2Eoc2VsZi5fYmFja2VuZCwgc2VsZiwgcGxhaW50ZXh0LCBwYWRkaW5nKVxyXG5cclxuICAgIGRlZiBwdWJsaWNfbnVtYmVycyhzZWxmKSAtPiBSU0FQdWJsaWNOdW1iZXJzOlxyXG4gICAgICAgIG4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIGUgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJCSUdOVU0gKioiKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQuX2xpYi5SU0FfZ2V0MF9rZXkoXHJcbiAgICAgICAgICAgIHNlbGYuX3JzYV9jZGF0YSwgbiwgZSwgc2VsZi5fYmFja2VuZC5fZmZpLk5VTExcclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChuWzBdICE9IHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZVswXSAhPSBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTClcclxuICAgICAgICByZXR1cm4gUlNBUHVibGljTnVtYmVycyhcclxuICAgICAgICAgICAgZT1zZWxmLl9iYWNrZW5kLl9ibl90b19pbnQoZVswXSksXHJcbiAgICAgICAgICAgIG49c2VsZi5fYmFja2VuZC5fYm5fdG9faW50KG5bMF0pLFxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX3B1YmxpY19rZXlfYnl0ZXMoXHJcbiAgICAgICAgICAgIGVuY29kaW5nLCBmb3JtYXQsIHNlbGYsIHNlbGYuX2V2cF9wa2V5LCBzZWxmLl9yc2FfY2RhdGFcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHZlcmlmeShcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIHNpZ25hdHVyZTogYnl0ZXMsXHJcbiAgICAgICAgZGF0YTogYnl0ZXMsXHJcbiAgICAgICAgcGFkZGluZzogQXN5bW1ldHJpY1BhZGRpbmcsXHJcbiAgICAgICAgYWxnb3JpdGhtOiB0eXBpbmcuVW5pb25bYXN5bV91dGlscy5QcmVoYXNoZWQsIGhhc2hlcy5IYXNoQWxnb3JpdGhtXSxcclxuICAgICkgLT4gTm9uZTpcclxuICAgICAgICBkYXRhLCBhbGdvcml0aG0gPSBfY2FsY3VsYXRlX2RpZ2VzdF9hbmRfYWxnb3JpdGhtKGRhdGEsIGFsZ29yaXRobSlcclxuICAgICAgICBfcnNhX3NpZ192ZXJpZnkoXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQsIHBhZGRpbmcsIGFsZ29yaXRobSwgc2VsZiwgc2lnbmF0dXJlLCBkYXRhXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiByZWNvdmVyX2RhdGFfZnJvbV9zaWduYXR1cmUoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBzaWduYXR1cmU6IGJ5dGVzLFxyXG4gICAgICAgIHBhZGRpbmc6IEFzeW1tZXRyaWNQYWRkaW5nLFxyXG4gICAgICAgIGFsZ29yaXRobTogdHlwaW5nLk9wdGlvbmFsW2hhc2hlcy5IYXNoQWxnb3JpdGhtXSxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgaXNpbnN0YW5jZShhbGdvcml0aG0sIGFzeW1fdXRpbHMuUHJlaGFzaGVkKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlByZWhhc2hlZCBpcyBvbmx5IHN1cHBvcnRlZCBpbiB0aGUgc2lnbiBhbmQgdmVyaWZ5IG1ldGhvZHMuICJcclxuICAgICAgICAgICAgICAgICJJdCBjYW5ub3QgYmUgdXNlZCB3aXRoIHJlY292ZXJfZGF0YV9mcm9tX3NpZ25hdHVyZS4iXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICByZXR1cm4gX3JzYV9zaWdfcmVjb3ZlcihcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZCwgcGFkZGluZywgYWxnb3JpdGhtLCBzZWxmLCBzaWduYXR1cmVcclxuICAgICAgICApXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMvYXN5bW1ldHJpYy9wYWRkaW5nLnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuXHJcbmltcG9ydCBhYmNcclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGhhc2hlc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5fYXN5bW1ldHJpYyBpbXBvcnQgKFxyXG4gICAgQXN5bW1ldHJpY1BhZGRpbmcgYXMgQXN5bW1ldHJpY1BhZGRpbmcsXHJcbilcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYyBpbXBvcnQgcnNhXHJcblxyXG5cclxuY2xhc3MgUEtDUzF2MTUoQXN5bW1ldHJpY1BhZGRpbmcpOlxyXG4gICAgbmFtZSA9ICJFTVNBLVBLQ1MxLXYxXzUiXHJcblxyXG5cclxuY2xhc3MgX01heExlbmd0aDpcclxuICAgICJTZW50aW5lbCB2YWx1ZSBmb3IgYE1BWF9MRU5HVEhgLiJcclxuXHJcblxyXG5jbGFzcyBfQXV0bzpcclxuICAgICJTZW50aW5lbCB2YWx1ZSBmb3IgYEFVVE9gLiJcclxuXHJcblxyXG5jbGFzcyBfRGlnZXN0TGVuZ3RoOlxyXG4gICAgIlNlbnRpbmVsIHZhbHVlIGZvciBgRElHRVNUX0xFTkdUSGAuIlxyXG5cclxuXHJcbmNsYXNzIFBTUyhBc3ltbWV0cmljUGFkZGluZyk6XHJcbiAgICBNQVhfTEVOR1RIID0gX01heExlbmd0aCgpXHJcbiAgICBBVVRPID0gX0F1dG8oKVxyXG4gICAgRElHRVNUX0xFTkdUSCA9IF9EaWdlc3RMZW5ndGgoKVxyXG4gICAgbmFtZSA9ICJFTVNBLVBTUyJcclxuICAgIF9zYWx0X2xlbmd0aDogdHlwaW5nLlVuaW9uW2ludCwgX01heExlbmd0aCwgX0F1dG8sIF9EaWdlc3RMZW5ndGhdXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgbWdmOiAiTUdGIixcclxuICAgICAgICBzYWx0X2xlbmd0aDogdHlwaW5nLlVuaW9uW2ludCwgX01heExlbmd0aCwgX0F1dG8sIF9EaWdlc3RMZW5ndGhdLFxyXG4gICAgKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuX21nZiA9IG1nZlxyXG5cclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgc2FsdF9sZW5ndGgsIChpbnQsIF9NYXhMZW5ndGgsIF9BdXRvLCBfRGlnZXN0TGVuZ3RoKVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJzYWx0X2xlbmd0aCBtdXN0IGJlIGFuIGludGVnZXIsIE1BWF9MRU5HVEgsICJcclxuICAgICAgICAgICAgICAgICJESUdFU1RfTEVOR1RILCBvciBBVVRPIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGlmIGlzaW5zdGFuY2Uoc2FsdF9sZW5ndGgsIGludCkgYW5kIHNhbHRfbGVuZ3RoIDwgMDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigic2FsdF9sZW5ndGggbXVzdCBiZSB6ZXJvIG9yIGdyZWF0ZXIuIilcclxuXHJcbiAgICAgICAgc2VsZi5fc2FsdF9sZW5ndGggPSBzYWx0X2xlbmd0aFxyXG5cclxuXHJcbmNsYXNzIE9BRVAoQXN5bW1ldHJpY1BhZGRpbmcpOlxyXG4gICAgbmFtZSA9ICJFTUUtT0FFUCJcclxuXHJcbiAgICBkZWYgX19pbml0X18oXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBtZ2Y6ICJNR0YiLFxyXG4gICAgICAgIGFsZ29yaXRobTogaGFzaGVzLkhhc2hBbGdvcml0aG0sXHJcbiAgICAgICAgbGFiZWw6IHR5cGluZy5PcHRpb25hbFtieXRlc10sXHJcbiAgICApOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKGFsZ29yaXRobSwgaGFzaGVzLkhhc2hBbGdvcml0aG0pOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkV4cGVjdGVkIGluc3RhbmNlIG9mIGhhc2hlcy5IYXNoQWxnb3JpdGhtLiIpXHJcblxyXG4gICAgICAgIHNlbGYuX21nZiA9IG1nZlxyXG4gICAgICAgIHNlbGYuX2FsZ29yaXRobSA9IGFsZ29yaXRobVxyXG4gICAgICAgIHNlbGYuX2xhYmVsID0gbGFiZWxcclxuXHJcblxyXG5jbGFzcyBNR0YobWV0YWNsYXNzPWFiYy5BQkNNZXRhKTpcclxuICAgIF9hbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtXHJcblxyXG5cclxuY2xhc3MgTUdGMShNR0YpOlxyXG4gICAgTUFYX0xFTkdUSCA9IF9NYXhMZW5ndGgoKVxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtKTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhbGdvcml0aG0sIGhhc2hlcy5IYXNoQWxnb3JpdGhtKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJFeHBlY3RlZCBpbnN0YW5jZSBvZiBoYXNoZXMuSGFzaEFsZ29yaXRobS4iKVxyXG5cclxuICAgICAgICBzZWxmLl9hbGdvcml0aG0gPSBhbGdvcml0aG1cclxuXHJcblxyXG5kZWYgY2FsY3VsYXRlX21heF9wc3Nfc2FsdF9sZW5ndGgoXHJcbiAgICBrZXk6IHR5cGluZy5VbmlvblsicnNhLlJTQVByaXZhdGVLZXkiLCAicnNhLlJTQVB1YmxpY0tleSJdLFxyXG4gICAgaGFzaF9hbGdvcml0aG06IGhhc2hlcy5IYXNoQWxnb3JpdGhtLFxyXG4pIC0+IGludDpcclxuICAgIGlmIG5vdCBpc2luc3RhbmNlKGtleSwgKHJzYS5SU0FQcml2YXRlS2V5LCByc2EuUlNBUHVibGljS2V5KSk6XHJcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJrZXkgbXVzdCBiZSBhbiBSU0EgcHVibGljIG9yIHByaXZhdGUga2V5IilcclxuICAgICMgYml0IGxlbmd0aCAtIDEgcGVyIFJGQyAzNDQ3XHJcbiAgICBlbWxlbiA9IChrZXkua2V5X3NpemUgKyA2KSAvLyA4XHJcbiAgICBzYWx0X2xlbmd0aCA9IGVtbGVuIC0gaGFzaF9hbGdvcml0aG0uZGlnZXN0X3NpemUgLSAyXHJcbiAgICBhc3NlcnQgc2FsdF9sZW5ndGggPj0gMFxyXG4gICAgcmV0dXJuIHNhbHRfbGVuZ3RoXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L2JhY2tlbmRzL29wZW5zc2wveDI1NTE5LnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wudXRpbHMgaW1wb3J0IF9ldnBfcGtleV9kZXJpdmVcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IHNlcmlhbGl6YXRpb25cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYy54MjU1MTkgaW1wb3J0IChcclxuICAgIFgyNTUxOVByaXZhdGVLZXksXHJcbiAgICBYMjU1MTlQdWJsaWNLZXksXHJcbilcclxuXHJcbmlmIHR5cGluZy5UWVBFX0NIRUNLSU5HOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgQmFja2VuZFxyXG5cclxuXHJcbl9YMjU1MTlfS0VZX1NJWkUgPSAzMlxyXG5cclxuXHJcbmNsYXNzIF9YMjU1MTlQdWJsaWNLZXkoWDI1NTE5UHVibGljS2V5KTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBiYWNrZW5kOiAiQmFja2VuZCIsIGV2cF9wa2V5KTpcclxuICAgICAgICBzZWxmLl9iYWNrZW5kID0gYmFja2VuZFxyXG4gICAgICAgIHNlbGYuX2V2cF9wa2V5ID0gZXZwX3BrZXlcclxuXHJcbiAgICBkZWYgcHVibGljX2J5dGVzKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgZW5jb2Rpbmc6IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcsXHJcbiAgICAgICAgZm9ybWF0OiBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdCxcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlJhd1xyXG4gICAgICAgICAgICBvciBmb3JtYXQgaXMgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuUmF3XHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgaXMgbm90IHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUmF3XHJcbiAgICAgICAgICAgICAgICBvciBmb3JtYXQgaXMgbm90IHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LlJhd1xyXG4gICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiV2hlbiB1c2luZyBSYXcgYm90aCBlbmNvZGluZyBhbmQgZm9ybWF0IG11c3QgYmUgUmF3IlxyXG4gICAgICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3Jhd19wdWJsaWNfYnl0ZXMoKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fcHVibGljX2tleV9ieXRlcyhcclxuICAgICAgICAgICAgZW5jb2RpbmcsIGZvcm1hdCwgc2VsZiwgc2VsZi5fZXZwX3BrZXksIE5vbmVcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIF9yYXdfcHVibGljX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIHVjaGFycHAgPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJ1bnNpZ25lZCBjaGFyICoqIilcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfZ2V0MV90bHNfZW5jb2RlZHBvaW50KFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSwgdWNoYXJwcFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAzMilcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHVjaGFycHBbMF0gIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgZGF0YSA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5nYyhcclxuICAgICAgICAgICAgdWNoYXJwcFswXSwgc2VsZi5fYmFja2VuZC5fbGliLk9QRU5TU0xfZnJlZVxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihkYXRhLCByZXMpWzpdXHJcblxyXG5cclxuY2xhc3MgX1gyNTUxOVByaXZhdGVLZXkoWDI1NTE5UHJpdmF0ZUtleSk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgYmFja2VuZDogIkJhY2tlbmQiLCBldnBfcGtleSk6XHJcbiAgICAgICAgc2VsZi5fYmFja2VuZCA9IGJhY2tlbmRcclxuICAgICAgICBzZWxmLl9ldnBfcGtleSA9IGV2cF9wa2V5XHJcblxyXG4gICAgZGVmIHB1YmxpY19rZXkoc2VsZikgLT4gWDI1NTE5UHVibGljS2V5OlxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2JhY2tlbmQuX2NyZWF0ZV9tZW1fYmlvX2djKClcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuaTJkX1BVQktFWV9iaW8oYmlvLCBzZWxmLl9ldnBfcGtleSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIGV2cF9wa2V5ID0gc2VsZi5fYmFja2VuZC5fbGliLmQyaV9QVUJLRVlfYmlvKFxyXG4gICAgICAgICAgICBiaW8sIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQoZXZwX3BrZXkgIT0gc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwpXHJcbiAgICAgICAgZXZwX3BrZXkgPSBzZWxmLl9iYWNrZW5kLl9mZmkuZ2MoXHJcbiAgICAgICAgICAgIGV2cF9wa2V5LCBzZWxmLl9iYWNrZW5kLl9saWIuRVZQX1BLRVlfZnJlZVxyXG4gICAgICAgIClcclxuICAgICAgICByZXR1cm4gX1gyNTUxOVB1YmxpY0tleShzZWxmLl9iYWNrZW5kLCBldnBfcGtleSlcclxuXHJcbiAgICBkZWYgZXhjaGFuZ2Uoc2VsZiwgcGVlcl9wdWJsaWNfa2V5OiBYMjU1MTlQdWJsaWNLZXkpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIG5vdCBpc2luc3RhbmNlKHBlZXJfcHVibGljX2tleSwgWDI1NTE5UHVibGljS2V5KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJwZWVyX3B1YmxpY19rZXkgbXVzdCBiZSBYMjU1MTlQdWJsaWNLZXkuIilcclxuXHJcbiAgICAgICAgcmV0dXJuIF9ldnBfcGtleV9kZXJpdmUoc2VsZi5fYmFja2VuZCwgc2VsZi5fZXZwX3BrZXksIHBlZXJfcHVibGljX2tleSlcclxuXHJcbiAgICBkZWYgcHJpdmF0ZV9ieXRlcyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIGZvcm1hdDogc2VyaWFsaXphdGlvbi5Qcml2YXRlRm9ybWF0LFxyXG4gICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtOiBzZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUmF3XHJcbiAgICAgICAgICAgIG9yIGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5SYXdcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBmb3JtYXQgaXMgbm90IHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdC5SYXdcclxuICAgICAgICAgICAgICAgIG9yIGVuY29kaW5nIGlzIG5vdCBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlJhd1xyXG4gICAgICAgICAgICAgICAgb3Igbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlcmlhbGl6YXRpb24uTm9FbmNyeXB0aW9uXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJXaGVuIHVzaW5nIFJhdyBib3RoIGVuY29kaW5nIGFuZCBmb3JtYXQgbXVzdCBiZSBSYXcgIlxyXG4gICAgICAgICAgICAgICAgICAgICJhbmQgZW5jcnlwdGlvbl9hbGdvcml0aG0gbXVzdCBiZSBOb0VuY3J5cHRpb24oKSJcclxuICAgICAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9yYXdfcHJpdmF0ZV9ieXRlcygpXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9wcml2YXRlX2tleV9ieXRlcyhcclxuICAgICAgICAgICAgZW5jb2RpbmcsIGZvcm1hdCwgZW5jcnlwdGlvbl9hbGdvcml0aG0sIHNlbGYsIHNlbGYuX2V2cF9wa2V5LCBOb25lXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfcmF3X3ByaXZhdGVfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgIyBXaGVuIHdlIGRyb3Agc3VwcG9ydCBmb3IgQ1JZUFRPR1JBUEhZX09QRU5TU0xfTEVTU19USEFOXzExMSB3ZSBjYW5cclxuICAgICAgICAjIHN3aXRjaCB0aGlzIHRvIEVWUF9QS0VZX25ld19yYXdfcHJpdmF0ZV9rZXlcclxuICAgICAgICAjIFRoZSB0cmljayB3ZSB1c2UgaGVyZSBpcyBzZXJpYWxpemluZyB0byBhIFBLQ1M4IGtleSBhbmQganVzdFxyXG4gICAgICAgICMgdXNpbmcgdGhlIGxhc3QgMzIgYnl0ZXMsIHdoaWNoIGlzIHRoZSBrZXkgaXRzZWxmLlxyXG4gICAgICAgIGJpbyA9IHNlbGYuX2JhY2tlbmQuX2NyZWF0ZV9tZW1fYmlvX2djKClcclxuICAgICAgICByZXMgPSBzZWxmLl9iYWNrZW5kLl9saWIuaTJkX1BLQ1M4UHJpdmF0ZUtleV9iaW8oXHJcbiAgICAgICAgICAgIGJpbyxcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgICAgICBzZWxmLl9iYWNrZW5kLl9mZmkuTlVMTCxcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgc2VsZi5fYmFja2VuZC5fZmZpLk5VTEwsXHJcbiAgICAgICAgICAgIHNlbGYuX2JhY2tlbmQuX2ZmaS5OVUxMLFxyXG4gICAgICAgIClcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KHJlcyA9PSAxKVxyXG4gICAgICAgIHBrY3M4ID0gc2VsZi5fYmFja2VuZC5fcmVhZF9tZW1fYmlvKGJpbylcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGxlbihwa2NzOCkgPT0gNDgpXHJcbiAgICAgICAgcmV0dXJuIHBrY3M4Wy1fWDI1NTE5X0tFWV9TSVpFOl1cclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvYmFja2VuZHMvb3BlbnNzbC94NDQ4LnB5JywgYicjIFRoaXMgZmlsZSBpcyBkdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb25cclxuIyAyLjAsIGFuZCB0aGUgQlNEIExpY2Vuc2UuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoaXMgcmVwb3NpdG9yeVxyXG4jIGZvciBjb21wbGV0ZSBkZXRhaWxzLlxyXG5cclxuaW1wb3J0IHR5cGluZ1xyXG5cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wudXRpbHMgaW1wb3J0IF9ldnBfcGtleV9kZXJpdmVcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IHNlcmlhbGl6YXRpb25cclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMuYXN5bW1ldHJpYy54NDQ4IGltcG9ydCAoXHJcbiAgICBYNDQ4UHJpdmF0ZUtleSxcclxuICAgIFg0NDhQdWJsaWNLZXksXHJcbilcclxuXHJcbmlmIHR5cGluZy5UWVBFX0NIRUNLSU5HOlxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgQmFja2VuZFxyXG5cclxuX1g0NDhfS0VZX1NJWkUgPSA1NlxyXG5cclxuXHJcbmNsYXNzIF9YNDQ4UHVibGljS2V5KFg0NDhQdWJsaWNLZXkpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgZXZwX3BrZXkpOlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcbiAgICAgICAgc2VsZi5fZXZwX3BrZXkgPSBldnBfcGtleVxyXG5cclxuICAgIGRlZiBwdWJsaWNfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHVibGljRm9ybWF0LFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGVuY29kaW5nIGlzIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuUmF3XHJcbiAgICAgICAgICAgIG9yIGZvcm1hdCBpcyBzZXJpYWxpemF0aW9uLlB1YmxpY0Zvcm1hdC5SYXdcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBlbmNvZGluZyBpcyBub3Qgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5SYXdcclxuICAgICAgICAgICAgICAgIG9yIGZvcm1hdCBpcyBub3Qgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuUmF3XHJcbiAgICAgICAgICAgICk6XHJcbiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICJXaGVuIHVzaW5nIFJhdyBib3RoIGVuY29kaW5nIGFuZCBmb3JtYXQgbXVzdCBiZSBSYXciXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcmF3X3B1YmxpY19ieXRlcygpXHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLl9iYWNrZW5kLl9wdWJsaWNfa2V5X2J5dGVzKFxyXG4gICAgICAgICAgICBlbmNvZGluZywgZm9ybWF0LCBzZWxmLCBzZWxmLl9ldnBfcGtleSwgTm9uZVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX3Jhd19wdWJsaWNfYnl0ZXMoc2VsZikgLT4gYnl0ZXM6XHJcbiAgICAgICAgYnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhciBbXSIsIF9YNDQ4X0tFWV9TSVpFKVxyXG4gICAgICAgIGJ1ZmxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIiwgX1g0NDhfS0VZX1NJWkUpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9QS0VZX2dldF9yYXdfcHVibGljX2tleShcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksIGJ1ZiwgYnVmbGVuXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChidWZsZW5bMF0gPT0gX1g0NDhfS0VZX1NJWkUpXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQuX2ZmaS5idWZmZXIoYnVmLCBfWDQ0OF9LRVlfU0laRSlbOl1cclxuXHJcblxyXG5jbGFzcyBfWDQ0OFByaXZhdGVLZXkoWDQ0OFByaXZhdGVLZXkpOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGJhY2tlbmQ6ICJCYWNrZW5kIiwgZXZwX3BrZXkpOlxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQgPSBiYWNrZW5kXHJcbiAgICAgICAgc2VsZi5fZXZwX3BrZXkgPSBldnBfcGtleVxyXG5cclxuICAgIGRlZiBwdWJsaWNfa2V5KHNlbGYpIC0+IFg0NDhQdWJsaWNLZXk6XHJcbiAgICAgICAgYnVmID0gc2VsZi5fYmFja2VuZC5fZmZpLm5ldygidW5zaWduZWQgY2hhciBbXSIsIF9YNDQ4X0tFWV9TSVpFKVxyXG4gICAgICAgIGJ1ZmxlbiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInNpemVfdCAqIiwgX1g0NDhfS0VZX1NJWkUpXHJcbiAgICAgICAgcmVzID0gc2VsZi5fYmFja2VuZC5fbGliLkVWUF9QS0VZX2dldF9yYXdfcHVibGljX2tleShcclxuICAgICAgICAgICAgc2VsZi5fZXZwX3BrZXksIGJ1ZiwgYnVmbGVuXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2JhY2tlbmQub3BlbnNzbF9hc3NlcnQocmVzID09IDEpXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChidWZsZW5bMF0gPT0gX1g0NDhfS0VZX1NJWkUpXHJcbiAgICAgICAgcHVibGljX2J5dGVzID0gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYpWzpdXHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2JhY2tlbmQueDQ0OF9sb2FkX3B1YmxpY19ieXRlcyhwdWJsaWNfYnl0ZXMpXHJcblxyXG4gICAgZGVmIGV4Y2hhbmdlKHNlbGYsIHBlZXJfcHVibGljX2tleTogWDQ0OFB1YmxpY0tleSkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocGVlcl9wdWJsaWNfa2V5LCBYNDQ4UHVibGljS2V5KTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJwZWVyX3B1YmxpY19rZXkgbXVzdCBiZSBYNDQ4UHVibGljS2V5LiIpXHJcblxyXG4gICAgICAgIHJldHVybiBfZXZwX3BrZXlfZGVyaXZlKHNlbGYuX2JhY2tlbmQsIHNlbGYuX2V2cF9wa2V5LCBwZWVyX3B1YmxpY19rZXkpXHJcblxyXG4gICAgZGVmIHByaXZhdGVfYnl0ZXMoXHJcbiAgICAgICAgc2VsZixcclxuICAgICAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuICAgICAgICBmb3JtYXQ6IHNlcmlhbGl6YXRpb24uUHJpdmF0ZUZvcm1hdCxcclxuICAgICAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogc2VyaWFsaXphdGlvbi5LZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuICAgICkgLT4gYnl0ZXM6XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBlbmNvZGluZyBpcyBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlJhd1xyXG4gICAgICAgICAgICBvciBmb3JtYXQgaXMgc2VyaWFsaXphdGlvbi5QdWJsaWNGb3JtYXQuUmF3XHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0IGlzIG5vdCBzZXJpYWxpemF0aW9uLlByaXZhdGVGb3JtYXQuUmF3XHJcbiAgICAgICAgICAgICAgICBvciBlbmNvZGluZyBpcyBub3Qgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5SYXdcclxuICAgICAgICAgICAgICAgIG9yIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtLCBzZXJpYWxpemF0aW9uLk5vRW5jcnlwdGlvblxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAiV2hlbiB1c2luZyBSYXcgYm90aCBlbmNvZGluZyBhbmQgZm9ybWF0IG11c3QgYmUgUmF3ICJcclxuICAgICAgICAgICAgICAgICAgICAiYW5kIGVuY3J5cHRpb25fYWxnb3JpdGhtIG11c3QgYmUgTm9FbmNyeXB0aW9uKCkiXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcmF3X3ByaXZhdGVfYnl0ZXMoKVxyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fcHJpdmF0ZV9rZXlfYnl0ZXMoXHJcbiAgICAgICAgICAgIGVuY29kaW5nLCBmb3JtYXQsIGVuY3J5cHRpb25fYWxnb3JpdGhtLCBzZWxmLCBzZWxmLl9ldnBfcGtleSwgTm9uZVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgX3Jhd19wcml2YXRlX2J5dGVzKHNlbGYpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGJ1ZiA9IHNlbGYuX2JhY2tlbmQuX2ZmaS5uZXcoInVuc2lnbmVkIGNoYXIgW10iLCBfWDQ0OF9LRVlfU0laRSlcclxuICAgICAgICBidWZsZW4gPSBzZWxmLl9iYWNrZW5kLl9mZmkubmV3KCJzaXplX3QgKiIsIF9YNDQ4X0tFWV9TSVpFKVxyXG4gICAgICAgIHJlcyA9IHNlbGYuX2JhY2tlbmQuX2xpYi5FVlBfUEtFWV9nZXRfcmF3X3ByaXZhdGVfa2V5KFxyXG4gICAgICAgICAgICBzZWxmLl9ldnBfcGtleSwgYnVmLCBidWZsZW5cclxuICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fYmFja2VuZC5vcGVuc3NsX2Fzc2VydChyZXMgPT0gMSlcclxuICAgICAgICBzZWxmLl9iYWNrZW5kLm9wZW5zc2xfYXNzZXJ0KGJ1ZmxlblswXSA9PSBfWDQ0OF9LRVlfU0laRSlcclxuICAgICAgICByZXR1cm4gc2VsZi5fYmFja2VuZC5fZmZpLmJ1ZmZlcihidWYsIF9YNDQ4X0tFWV9TSVpFKVs6XVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL2tkZi9fX2luaXRfXy5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgYWJjXHJcblxyXG5cclxuY2xhc3MgS2V5RGVyaXZhdGlvbkZ1bmN0aW9uKG1ldGFjbGFzcz1hYmMuQUJDTWV0YSk6XHJcbiAgICBAYWJjLmFic3RyYWN0bWV0aG9kXHJcbiAgICBkZWYgZGVyaXZlKHNlbGYsIGtleV9tYXRlcmlhbDogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgICAgICIiIlxyXG4gICAgICAgIERldGVybWluaXN0aWNhbGx5IGdlbmVyYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBrZXkgYmFzZWQgb24gdGhlIGV4aXN0aW5nXHJcbiAgICAgICAga2V5IG1hdGVyaWFsLlxyXG4gICAgICAgICIiIlxyXG5cclxuICAgIEBhYmMuYWJzdHJhY3RtZXRob2RcclxuICAgIGRlZiB2ZXJpZnkoc2VsZiwga2V5X21hdGVyaWFsOiBieXRlcywgZXhwZWN0ZWRfa2V5OiBieXRlcykgLT4gTm9uZTpcclxuICAgICAgICAiIiJcclxuICAgICAgICBDaGVja3Mgd2hldGhlciB0aGUga2V5IGdlbmVyYXRlZCBieSB0aGUga2V5IG1hdGVyaWFsIG1hdGNoZXMgdGhlXHJcbiAgICAgICAgZXhwZWN0ZWQgZGVyaXZlZCBrZXkuIFJhaXNlcyBhbiBleGNlcHRpb24gaWYgdGhleSBkbyBub3QgbWF0Y2guXHJcbiAgICAgICAgIiIiXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdjcnlwdG9ncmFwaHkvaGF6bWF0L3ByaW1pdGl2ZXMva2RmL3NjcnlwdC5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcblxyXG5pbXBvcnQgc3lzXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB1dGlsc1xyXG5mcm9tIGNyeXB0b2dyYXBoeS5leGNlcHRpb25zIGltcG9ydCAoXHJcbiAgICBBbHJlYWR5RmluYWxpemVkLFxyXG4gICAgSW52YWxpZEtleSxcclxuICAgIFVuc3VwcG9ydGVkQWxnb3JpdGhtLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBjb25zdGFudF90aW1lXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmtkZiBpbXBvcnQgS2V5RGVyaXZhdGlvbkZ1bmN0aW9uXHJcblxyXG5cclxuIyBUaGlzIGlzIHVzZWQgYnkgdGhlIHNjcnlwdCB0ZXN0cyB0byBza2lwIHRlc3RzIHRoYXQgcmVxdWlyZSBtb3JlIG1lbW9yeVxyXG4jIHRoYW4gdGhlIE1FTV9MSU1JVFxyXG5fTUVNX0xJTUlUID0gc3lzLm1heHNpemUgLy8gMlxyXG5cclxuXHJcbmNsYXNzIFNjcnlwdChLZXlEZXJpdmF0aW9uRnVuY3Rpb24pOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgc2FsdDogYnl0ZXMsXHJcbiAgICAgICAgbGVuZ3RoOiBpbnQsXHJcbiAgICAgICAgbjogaW50LFxyXG4gICAgICAgIHI6IGludCxcclxuICAgICAgICBwOiBpbnQsXHJcbiAgICAgICAgYmFja2VuZDogdHlwaW5nLkFueSA9IE5vbmUsXHJcbiAgICApOlxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IChcclxuICAgICAgICAgICAgYmFja2VuZCBhcyBvc3NsLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgbm90IG9zc2wuc2NyeXB0X3N1cHBvcnRlZCgpOlxyXG4gICAgICAgICAgICByYWlzZSBVbnN1cHBvcnRlZEFsZ29yaXRobShcclxuICAgICAgICAgICAgICAgICJUaGlzIHZlcnNpb24gb2YgT3BlblNTTCBkb2VzIG5vdCBzdXBwb3J0IHNjcnlwdCJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIHNlbGYuX2xlbmd0aCA9IGxlbmd0aFxyXG4gICAgICAgIHV0aWxzLl9jaGVja19ieXRlcygic2FsdCIsIHNhbHQpXHJcbiAgICAgICAgaWYgbiA8IDIgb3IgKG4gJiAobiAtIDEpKSAhPSAwOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJuIG11c3QgYmUgZ3JlYXRlciB0aGFuIDEgYW5kIGJlIGEgcG93ZXIgb2YgMi4iKVxyXG5cclxuICAgICAgICBpZiByIDwgMTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiciBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAxLiIpXHJcblxyXG4gICAgICAgIGlmIHAgPCAxOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJwIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDEuIilcclxuXHJcbiAgICAgICAgc2VsZi5fdXNlZCA9IEZhbHNlXHJcbiAgICAgICAgc2VsZi5fc2FsdCA9IHNhbHRcclxuICAgICAgICBzZWxmLl9uID0gblxyXG4gICAgICAgIHNlbGYuX3IgPSByXHJcbiAgICAgICAgc2VsZi5fcCA9IHBcclxuXHJcbiAgICBkZWYgZGVyaXZlKHNlbGYsIGtleV9tYXRlcmlhbDogYnl0ZXMpIC0+IGJ5dGVzOlxyXG4gICAgICAgIGlmIHNlbGYuX3VzZWQ6XHJcbiAgICAgICAgICAgIHJhaXNlIEFscmVhZHlGaW5hbGl6ZWQoIlNjcnlwdCBpbnN0YW5jZXMgY2FuIG9ubHkgYmUgdXNlZCBvbmNlLiIpXHJcbiAgICAgICAgc2VsZi5fdXNlZCA9IFRydWVcclxuXHJcbiAgICAgICAgdXRpbHMuX2NoZWNrX2J5dGVzbGlrZSgia2V5X21hdGVyaWFsIiwga2V5X21hdGVyaWFsKVxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICAgICAgcmV0dXJuIGJhY2tlbmQuZGVyaXZlX3NjcnlwdChcclxuICAgICAgICAgICAga2V5X21hdGVyaWFsLCBzZWxmLl9zYWx0LCBzZWxmLl9sZW5ndGgsIHNlbGYuX24sIHNlbGYuX3IsIHNlbGYuX3BcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIHZlcmlmeShzZWxmLCBrZXlfbWF0ZXJpYWw6IGJ5dGVzLCBleHBlY3RlZF9rZXk6IGJ5dGVzKSAtPiBOb25lOlxyXG4gICAgICAgIGRlcml2ZWRfa2V5ID0gc2VsZi5kZXJpdmUoa2V5X21hdGVyaWFsKVxyXG4gICAgICAgIGlmIG5vdCBjb25zdGFudF90aW1lLmJ5dGVzX2VxKGRlcml2ZWRfa2V5LCBleHBlY3RlZF9rZXkpOlxyXG4gICAgICAgICAgICByYWlzZSBJbnZhbGlkS2V5KCJLZXlzIGRvIG5vdCBtYXRjaC4iKVxyXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnY3J5cHRvZ3JhcGh5L2hhem1hdC9wcmltaXRpdmVzL3NlcmlhbGl6YXRpb24vcGtjczcucHknLCBiJyMgVGhpcyBmaWxlIGlzIGR1YWwgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvblxyXG4jIDIuMCwgYW5kIHRoZSBCU0QgTGljZW5zZS4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5XHJcbiMgZm9yIGNvbXBsZXRlIGRldGFpbHMuXHJcblxyXG5pbXBvcnQgdHlwaW5nXHJcblxyXG5mcm9tIGNyeXB0b2dyYXBoeSBpbXBvcnQgdXRpbHNcclxuZnJvbSBjcnlwdG9ncmFwaHkgaW1wb3J0IHg1MDlcclxuZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LnByaW1pdGl2ZXMgaW1wb3J0IGhhc2hlcywgc2VyaWFsaXphdGlvblxyXG5mcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQucHJpbWl0aXZlcy5hc3ltbWV0cmljIGltcG9ydCBlYywgcnNhXHJcbmZyb20gY3J5cHRvZ3JhcGh5LnV0aWxzIGltcG9ydCBfY2hlY2tfYnl0ZXNsaWtlXHJcblxyXG5cclxuZGVmIGxvYWRfcGVtX3BrY3M3X2NlcnRpZmljYXRlcyhkYXRhOiBieXRlcykgLT4gdHlwaW5nLkxpc3RbeDUwOS5DZXJ0aWZpY2F0ZV06XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgcmV0dXJuIGJhY2tlbmQubG9hZF9wZW1fcGtjczdfY2VydGlmaWNhdGVzKGRhdGEpXHJcblxyXG5cclxuZGVmIGxvYWRfZGVyX3BrY3M3X2NlcnRpZmljYXRlcyhkYXRhOiBieXRlcykgLT4gdHlwaW5nLkxpc3RbeDUwOS5DZXJ0aWZpY2F0ZV06XHJcbiAgICBmcm9tIGNyeXB0b2dyYXBoeS5oYXptYXQuYmFja2VuZHMub3BlbnNzbC5iYWNrZW5kIGltcG9ydCBiYWNrZW5kXHJcblxyXG4gICAgcmV0dXJuIGJhY2tlbmQubG9hZF9kZXJfcGtjczdfY2VydGlmaWNhdGVzKGRhdGEpXHJcblxyXG5cclxuZGVmIHNlcmlhbGl6ZV9jZXJ0aWZpY2F0ZXMoXHJcbiAgICBjZXJ0czogdHlwaW5nLkxpc3RbeDUwOS5DZXJ0aWZpY2F0ZV0sXHJcbiAgICBlbmNvZGluZzogc2VyaWFsaXphdGlvbi5FbmNvZGluZyxcclxuKSAtPiBieXRlczpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmRcclxuXHJcbiAgICByZXR1cm4gYmFja2VuZC5wa2NzN19zZXJpYWxpemVfY2VydGlmaWNhdGVzKGNlcnRzLCBlbmNvZGluZylcclxuXHJcblxyXG5fQUxMT1dFRF9QS0NTN19IQVNIX1RZUEVTID0gdHlwaW5nLlVuaW9uW1xyXG4gICAgaGFzaGVzLlNIQTEsXHJcbiAgICBoYXNoZXMuU0hBMjI0LFxyXG4gICAgaGFzaGVzLlNIQTI1NixcclxuICAgIGhhc2hlcy5TSEEzODQsXHJcbiAgICBoYXNoZXMuU0hBNTEyLFxyXG5dXHJcblxyXG5fQUxMT1dFRF9QUklWQVRFX0tFWV9UWVBFUyA9IHR5cGluZy5VbmlvbltcclxuICAgIHJzYS5SU0FQcml2YXRlS2V5LCBlYy5FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleVxyXG5dXHJcblxyXG5cclxuY2xhc3MgUEtDUzdPcHRpb25zKHV0aWxzLkVudW0pOlxyXG4gICAgVGV4dCA9ICJBZGQgdGV4dC9wbGFpbiBNSU1FIHR5cGUiXHJcbiAgICBCaW5hcnkgPSAiRG9uXCd0IHRyYW5zbGF0ZSBpbnB1dCBkYXRhIGludG8gY2Fub25pY2FsIE1JTUUgZm9ybWF0IlxyXG4gICAgRGV0YWNoZWRTaWduYXR1cmUgPSAiRG9uXCd0IGVtYmVkIGRhdGEgaW4gdGhlIFBLQ1M3IHN0cnVjdHVyZSJcclxuICAgIE5vQ2FwYWJpbGl0aWVzID0gIkRvblwndCBlbWJlZCBTTUlNRSBjYXBhYmlsaXRpZXMiXHJcbiAgICBOb0F0dHJpYnV0ZXMgPSAiRG9uXCd0IGVtYmVkIGF1dGhlbnRpY2F0ZWRBdHRyaWJ1dGVzIlxyXG4gICAgTm9DZXJ0cyA9ICJEb25cJ3QgZW1iZWQgc2lnbmVyIGNlcnRpZmljYXRlIlxyXG5cclxuXHJcbmNsYXNzIFBLQ1M3U2lnbmF0dXJlQnVpbGRlcjpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGRhdGE6IHR5cGluZy5PcHRpb25hbFtieXRlc10gPSBOb25lLFxyXG4gICAgICAgIHNpZ25lcnM6IHR5cGluZy5MaXN0W1xyXG4gICAgICAgICAgICB0eXBpbmcuVHVwbGVbXHJcbiAgICAgICAgICAgICAgICB4NTA5LkNlcnRpZmljYXRlLFxyXG4gICAgICAgICAgICAgICAgX0FMTE9XRURfUFJJVkFURV9LRVlfVFlQRVMsXHJcbiAgICAgICAgICAgICAgICBfQUxMT1dFRF9QS0NTN19IQVNIX1RZUEVTLFxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgXSA9IFtdLFxyXG4gICAgICAgIGFkZGl0aW9uYWxfY2VydHM6IHR5cGluZy5MaXN0W3g1MDkuQ2VydGlmaWNhdGVdID0gW10sXHJcbiAgICApOlxyXG4gICAgICAgIHNlbGYuX2RhdGEgPSBkYXRhXHJcbiAgICAgICAgc2VsZi5fc2lnbmVycyA9IHNpZ25lcnNcclxuICAgICAgICBzZWxmLl9hZGRpdGlvbmFsX2NlcnRzID0gYWRkaXRpb25hbF9jZXJ0c1xyXG5cclxuICAgIGRlZiBzZXRfZGF0YShzZWxmLCBkYXRhOiBieXRlcykgLT4gIlBLQ1M3U2lnbmF0dXJlQnVpbGRlciI6XHJcbiAgICAgICAgX2NoZWNrX2J5dGVzbGlrZSgiZGF0YSIsIGRhdGEpXHJcbiAgICAgICAgaWYgc2VsZi5fZGF0YSBpcyBub3QgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZGF0YSBtYXkgb25seSBiZSBzZXQgb25jZSIpXHJcblxyXG4gICAgICAgIHJldHVybiBQS0NTN1NpZ25hdHVyZUJ1aWxkZXIoZGF0YSwgc2VsZi5fc2lnbmVycylcclxuXHJcbiAgICBkZWYgYWRkX3NpZ25lcihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGNlcnRpZmljYXRlOiB4NTA5LkNlcnRpZmljYXRlLFxyXG4gICAgICAgIHByaXZhdGVfa2V5OiBfQUxMT1dFRF9QUklWQVRFX0tFWV9UWVBFUyxcclxuICAgICAgICBoYXNoX2FsZ29yaXRobTogX0FMTE9XRURfUEtDUzdfSEFTSF9UWVBFUyxcclxuICAgICkgLT4gIlBLQ1M3U2lnbmF0dXJlQnVpbGRlciI6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIGhhc2hfYWxnb3JpdGhtLFxyXG4gICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICBoYXNoZXMuU0hBMSxcclxuICAgICAgICAgICAgICAgIGhhc2hlcy5TSEEyMjQsXHJcbiAgICAgICAgICAgICAgICBoYXNoZXMuU0hBMjU2LFxyXG4gICAgICAgICAgICAgICAgaGFzaGVzLlNIQTM4NCxcclxuICAgICAgICAgICAgICAgIGhhc2hlcy5TSEE1MTIsXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImhhc2hfYWxnb3JpdGhtIG11c3QgYmUgb25lIG9mIGhhc2hlcy5TSEExLCBTSEEyMjQsICJcclxuICAgICAgICAgICAgICAgICJTSEEyNTYsIFNIQTM4NCwgb3IgU0hBNTEyIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY2VydGlmaWNhdGUsIHg1MDkuQ2VydGlmaWNhdGUpOlxyXG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImNlcnRpZmljYXRlIG11c3QgYmUgYSB4NTA5LkNlcnRpZmljYXRlIilcclxuXHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAgICAgIHByaXZhdGVfa2V5LCAocnNhLlJTQVByaXZhdGVLZXksIGVjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5KVxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiT25seSBSU0EgJiBFQyBrZXlzIGFyZSBzdXBwb3J0ZWQgYXQgdGhpcyB0aW1lLiIpXHJcblxyXG4gICAgICAgIHJldHVybiBQS0NTN1NpZ25hdHVyZUJ1aWxkZXIoXHJcbiAgICAgICAgICAgIHNlbGYuX2RhdGEsXHJcbiAgICAgICAgICAgIHNlbGYuX3NpZ25lcnMgKyBbKGNlcnRpZmljYXRlLCBwcml2YXRlX2tleSwgaGFzaF9hbGdvcml0aG0pXSxcclxuICAgICAgICApXHJcblxyXG4gICAgZGVmIGFkZF9jZXJ0aWZpY2F0ZShcclxuICAgICAgICBzZWxmLCBjZXJ0aWZpY2F0ZTogeDUwOS5DZXJ0aWZpY2F0ZVxyXG4gICAgKSAtPiAiUEtDUzdTaWduYXR1cmVCdWlsZGVyIjpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShjZXJ0aWZpY2F0ZSwgeDUwOS5DZXJ0aWZpY2F0ZSk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiY2VydGlmaWNhdGUgbXVzdCBiZSBhIHg1MDkuQ2VydGlmaWNhdGUiKVxyXG5cclxuICAgICAgICByZXR1cm4gUEtDUzdTaWduYXR1cmVCdWlsZGVyKFxyXG4gICAgICAgICAgICBzZWxmLl9kYXRhLCBzZWxmLl9zaWduZXJzLCBzZWxmLl9hZGRpdGlvbmFsX2NlcnRzICsgW2NlcnRpZmljYXRlXVxyXG4gICAgICAgIClcclxuXHJcbiAgICBkZWYgc2lnbihcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGVuY29kaW5nOiBzZXJpYWxpemF0aW9uLkVuY29kaW5nLFxyXG4gICAgICAgIG9wdGlvbnM6IHR5cGluZy5JdGVyYWJsZVtQS0NTN09wdGlvbnNdLFxyXG4gICAgICAgIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lLFxyXG4gICAgKSAtPiBieXRlczpcclxuICAgICAgICBpZiBsZW4oc2VsZi5fc2lnbmVycykgPT0gMDpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTXVzdCBoYXZlIGF0IGxlYXN0IG9uZSBzaWduZXIiKVxyXG4gICAgICAgIGlmIHNlbGYuX2RhdGEgaXMgTm9uZTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiWW91IG11c3QgYWRkIGRhdGEgdG8gc2lnbiIpXHJcbiAgICAgICAgb3B0aW9ucyA9IGxpc3Qob3B0aW9ucylcclxuICAgICAgICBpZiBub3QgYWxsKGlzaW5zdGFuY2UoeCwgUEtDUzdPcHRpb25zKSBmb3IgeCBpbiBvcHRpb25zKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigib3B0aW9ucyBtdXN0IGJlIGZyb20gdGhlIFBLQ1M3T3B0aW9ucyBlbnVtIilcclxuICAgICAgICBpZiBlbmNvZGluZyBub3QgaW4gKFxyXG4gICAgICAgICAgICBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlBFTSxcclxuICAgICAgICAgICAgc2VyaWFsaXphdGlvbi5FbmNvZGluZy5ERVIsXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuU01JTUUsXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcclxuICAgICAgICAgICAgICAgICJNdXN0IGJlIFBFTSwgREVSLCBvciBTTUlNRSBmcm9tIHRoZSBFbmNvZGluZyBlbnVtIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgVGV4dCBpcyBhIG1lYW5pbmdsZXNzIG9wdGlvbiB1bmxlc3MgaXQgaXMgYWNjb21wYW5pZWQgYnlcclxuICAgICAgICAjIERldGFjaGVkU2lnbmF0dXJlXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBQS0NTN09wdGlvbnMuVGV4dCBpbiBvcHRpb25zXHJcbiAgICAgICAgICAgIGFuZCBQS0NTN09wdGlvbnMuRGV0YWNoZWRTaWduYXR1cmUgbm90IGluIG9wdGlvbnNcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIldoZW4gcGFzc2luZyB0aGUgVGV4dCBvcHRpb24geW91IG11c3QgYWxzbyBwYXNzICJcclxuICAgICAgICAgICAgICAgICJEZXRhY2hlZFNpZ25hdHVyZSJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiBQS0NTN09wdGlvbnMuVGV4dCBpbiBvcHRpb25zIGFuZCBlbmNvZGluZyBpbiAoXHJcbiAgICAgICAgICAgIHNlcmlhbGl6YXRpb24uRW5jb2RpbmcuREVSLFxyXG4gICAgICAgICAgICBzZXJpYWxpemF0aW9uLkVuY29kaW5nLlBFTSxcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIlRoZSBUZXh0IG9wdGlvbiBpcyBvbmx5IGF2YWlsYWJsZSBmb3IgU01JTUUgc2VyaWFsaXphdGlvbiJcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAjIE5vIGF0dHJpYnV0ZXMgaW1wbGllcyBubyBjYXBhYmlsaXRpZXMgc28gd2VcJ2xsIGVycm9yIGlmIHlvdSB0cnkgdG9cclxuICAgICAgICAjIHBhc3MgYm90aC5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIFBLQ1M3T3B0aW9ucy5Ob0F0dHJpYnV0ZXMgaW4gb3B0aW9uc1xyXG4gICAgICAgICAgICBhbmQgUEtDUzdPcHRpb25zLk5vQ2FwYWJpbGl0aWVzIGluIG9wdGlvbnNcclxuICAgICAgICApOlxyXG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgIk5vQXR0cmlidXRlcyBpcyBhIHN1cGVyc2V0IG9mIE5vQ2FwYWJpbGl0aWVzLiBEbyBub3QgcGFzcyAiXHJcbiAgICAgICAgICAgICAgICAiYm90aCB2YWx1ZXMuIlxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IChcclxuICAgICAgICAgICAgYmFja2VuZCBhcyBvc3NsLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIG9zc2wucGtjczdfc2lnbihzZWxmLCBlbmNvZGluZywgb3B0aW9ucylcclxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ2NyeXB0b2dyYXBoeS9oYXptYXQvcHJpbWl0aXZlcy9zZXJpYWxpemF0aW9uL3BrY3MxMi5weScsIGInIyBUaGlzIGZpbGUgaXMgZHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uXHJcbiMgMi4wLCBhbmQgdGhlIEJTRCBMaWNlbnNlLiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnlcclxuIyBmb3IgY29tcGxldGUgZGV0YWlscy5cclxuXHJcbmltcG9ydCB0eXBpbmdcclxuXHJcbmZyb20gY3J5cHRvZ3JhcGh5IGltcG9ydCB4NTA5XHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzIGltcG9ydCBzZXJpYWxpemF0aW9uXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMgaW1wb3J0IChcclxuICAgIGRzYSxcclxuICAgIGVjLFxyXG4gICAgZWQyNTUxOSxcclxuICAgIGVkNDQ4LFxyXG4gICAgcnNhLFxyXG4pXHJcbmZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5wcmltaXRpdmVzLmFzeW1tZXRyaWMudHlwZXMgaW1wb3J0IChcclxuICAgIFBSSVZBVEVfS0VZX1RZUEVTLFxyXG4pXHJcblxyXG5cclxuX0FMTE9XRURfUEtDUzEyX1RZUEVTID0gdHlwaW5nLlVuaW9uW1xyXG4gICAgcnNhLlJTQVByaXZhdGVLZXksXHJcbiAgICBkc2EuRFNBUHJpdmF0ZUtleSxcclxuICAgIGVjLkVsbGlwdGljQ3VydmVQcml2YXRlS2V5LFxyXG4gICAgZWQyNTUxOS5FZDI1NTE5UHJpdmF0ZUtleSxcclxuICAgIGVkNDQ4LkVkNDQ4UHJpdmF0ZUtleSxcclxuXVxyXG5cclxuXHJcbmNsYXNzIFBLQ1MxMkNlcnRpZmljYXRlOlxyXG4gICAgZGVmIF9faW5pdF9fKFxyXG4gICAgICAgIHNlbGYsXHJcbiAgICAgICAgY2VydDogeDUwOS5DZXJ0aWZpY2F0ZSxcclxuICAgICAgICBmcmllbmRseV9uYW1lOiB0eXBpbmcuT3B0aW9uYWxbYnl0ZXNdLFxyXG4gICAgKTpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShjZXJ0LCB4NTA5LkNlcnRpZmljYXRlKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJFeHBlY3RpbmcgeDUwOS5DZXJ0aWZpY2F0ZSBvYmplY3QiKVxyXG4gICAgICAgIGlmIGZyaWVuZGx5X25hbWUgaXMgbm90IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKGZyaWVuZGx5X25hbWUsIGJ5dGVzKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJmcmllbmRseV9uYW1lIG11c3QgYmUgYnl0ZXMgb3IgTm9uZSIpXHJcbiAgICAgICAgc2VsZi5fY2VydCA9IGNlcnRcclxuICAgICAgICBzZWxmLl9mcmllbmRseV9uYW1lID0gZnJpZW5kbHlfbmFtZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGZyaWVuZGx5X25hbWUoc2VsZikgLT4gdHlwaW5nLk9wdGlvbmFsW2J5dGVzXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fZnJpZW5kbHlfbmFtZVxyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGNlcnRpZmljYXRlKHNlbGYpIC0+IHg1MDkuQ2VydGlmaWNhdGU6XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NlcnRcclxuXHJcbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyOiBvYmplY3QpIC0+IGJvb2w6XHJcbiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2Uob3RoZXIsIFBLQ1MxMkNlcnRpZmljYXRlKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYuY2VydGlmaWNhdGUgPT0gb3RoZXIuY2VydGlmaWNhdGVcclxuICAgICAgICAgICAgYW5kIHNlbGYuZnJpZW5kbHlfbmFtZSA9PSBvdGhlci5mcmllbmRseV9uYW1lXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYuY2VydGlmaWNhdGUsIHNlbGYuZnJpZW5kbHlfbmFtZSkpXHJcblxyXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpIC0+IHN0cjpcclxuICAgICAgICByZXR1cm4gIjxQS0NTMTJDZXJ0aWZpY2F0ZSh7fSwgZnJpZW5kbHlfbmFtZT17IXJ9KT4iLmZvcm1hdChcclxuICAgICAgICAgICAgc2VsZi5jZXJ0aWZpY2F0ZSwgc2VsZi5mcmllbmRseV9uYW1lXHJcbiAgICAgICAgKVxyXG5cclxuXHJcbmNsYXNzIFBLQ1MxMktleUFuZENlcnRpZmljYXRlczpcclxuICAgIGRlZiBfX2luaXRfXyhcclxuICAgICAgICBzZWxmLFxyXG4gICAgICAgIGtleTogdHlwaW5nLk9wdGlvbmFsW1BSSVZBVEVfS0VZX1RZUEVTXSxcclxuICAgICAgICBjZXJ0OiB0eXBpbmcuT3B0aW9uYWxbUEtDUzEyQ2VydGlmaWNhdGVdLFxyXG4gICAgICAgIGFkZGl0aW9uYWxfY2VydHM6IHR5cGluZy5MaXN0W1BLQ1MxMkNlcnRpZmljYXRlXSxcclxuICAgICk6XHJcbiAgICAgICAgaWYga2V5IGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICByc2EuUlNBUHJpdmF0ZUtleSxcclxuICAgICAgICAgICAgICAgIGRzYS5EU0FQcml2YXRlS2V5LFxyXG4gICAgICAgICAgICAgICAgZWMuRWxsaXB0aWNDdXJ2ZVByaXZhdGVLZXksXHJcbiAgICAgICAgICAgICAgICBlZDI1NTE5LkVkMjU1MTlQcml2YXRlS2V5LFxyXG4gICAgICAgICAgICAgICAgZWQ0NDguRWQ0NDhQcml2YXRlS2V5LFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgICAgICJLZXkgbXVzdCBiZSBSU0EsIERTQSwgRWxsaXB0aWNDdXJ2ZSwgRUQyNTUxOSwgb3IgRUQ0NDgiXHJcbiAgICAgICAgICAgICAgICAiIHByaXZhdGUga2V5LCBvciBOb25lLiJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIGlmIGNlcnQgaXMgbm90IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKGNlcnQsIFBLQ1MxMkNlcnRpZmljYXRlKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjZXJ0IG11c3QgYmUgYSBQS0NTMTJDZXJ0aWZpY2F0ZSBvYmplY3Qgb3IgTm9uZSIpXHJcbiAgICAgICAgaWYgbm90IGFsbChcclxuICAgICAgICAgICAgaXNpbnN0YW5jZShhZGRfY2VydCwgUEtDUzEyQ2VydGlmaWNhdGUpXHJcbiAgICAgICAgICAgIGZvciBhZGRfY2VydCBpbiBhZGRpdGlvbmFsX2NlcnRzXHJcbiAgICAgICAgKTpcclxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgImFsbCB2YWx1ZXMgaW4gYWRkaXRpb25hbF9jZXJ0cyBtdXN0IGJlIFBLQ1MxMkNlcnRpZmljYXRlIlxyXG4gICAgICAgICAgICAgICAgIiBvYmplY3RzIlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgc2VsZi5fa2V5ID0ga2V5XHJcbiAgICAgICAgc2VsZi5fY2VydCA9IGNlcnRcclxuICAgICAgICBzZWxmLl9hZGRpdGlvbmFsX2NlcnRzID0gYWRkaXRpb25hbF9jZXJ0c1xyXG5cclxuICAgIEBwcm9wZXJ0eVxyXG4gICAgZGVmIGtleShzZWxmKSAtPiB0eXBpbmcuT3B0aW9uYWxbUFJJVkFURV9LRVlfVFlQRVNdOlxyXG4gICAgICAgIHJldHVybiBzZWxmLl9rZXlcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBjZXJ0KHNlbGYpIC0+IHR5cGluZy5PcHRpb25hbFtQS0NTMTJDZXJ0aWZpY2F0ZV06XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX2NlcnRcclxuXHJcbiAgICBAcHJvcGVydHlcclxuICAgIGRlZiBhZGRpdGlvbmFsX2NlcnRzKHNlbGYpIC0+IHR5cGluZy5MaXN0W1BLQ1MxMkNlcnRpZmljYXRlXTpcclxuICAgICAgICByZXR1cm4gc2VsZi5fYWRkaXRpb25hbF9jZXJ0c1xyXG5cclxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXI6IG9iamVjdCkgLT4gYm9vbDpcclxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgUEtDUzEyS2V5QW5kQ2VydGlmaWNhdGVzKTpcclxuICAgICAgICAgICAgcmV0dXJuIE5vdEltcGxlbWVudGVkXHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHNlbGYua2V5ID09IG90aGVyLmtleVxyXG4gICAgICAgICAgICBhbmQgc2VsZi5jZXJ0ID09IG90aGVyLmNlcnRcclxuICAgICAgICAgICAgYW5kIHNlbGYuYWRkaXRpb25hbF9jZXJ0cyA9PSBvdGhlci5hZGRpdGlvbmFsX2NlcnRzXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGRlZiBfX2hhc2hfXyhzZWxmKSAtPiBpbnQ6XHJcbiAgICAgICAgcmV0dXJuIGhhc2goKHNlbGYua2V5LCBzZWxmLmNlcnQsIHR1cGxlKHNlbGYuYWRkaXRpb25hbF9jZXJ0cykpKVxyXG5cclxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKSAtPiBzdHI6XHJcbiAgICAgICAgZm10ID0gKFxyXG4gICAgICAgICAgICAiPFBLQ1MxMktleUFuZENlcnRpZmljYXRlcyhrZXk9e30sIGNlcnQ9e30sIGFkZGl0aW9uYWxfY2VydHM9e30pPiJcclxuICAgICAgICApXHJcbiAgICAgICAgcmV0dXJuIGZtdC5mb3JtYXQoc2VsZi5rZXksIHNlbGYuY2VydCwgc2VsZi5hZGRpdGlvbmFsX2NlcnRzKVxyXG5cclxuXHJcbmRlZiBsb2FkX2tleV9hbmRfY2VydGlmaWNhdGVzKFxyXG4gICAgZGF0YTogYnl0ZXMsXHJcbiAgICBwYXNzd29yZDogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lLFxyXG4pIC0+IHR5cGluZy5UdXBsZVtcclxuICAgIHR5cGluZy5PcHRpb25hbFtQUklWQVRFX0tFWV9UWVBFU10sXHJcbiAgICB0eXBpbmcuT3B0aW9uYWxbeDUwOS5DZXJ0aWZpY2F0ZV0sXHJcbiAgICB0eXBpbmcuTGlzdFt4NTA5LkNlcnRpZmljYXRlXSxcclxuXTpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmQgYXMgb3NzbFxyXG5cclxuICAgIHJldHVybiBvc3NsLmxvYWRfa2V5X2FuZF9jZXJ0aWZpY2F0ZXNfZnJvbV9wa2NzMTIoZGF0YSwgcGFzc3dvcmQpXHJcblxyXG5cclxuZGVmIGxvYWRfcGtjczEyKFxyXG4gICAgZGF0YTogYnl0ZXMsXHJcbiAgICBwYXNzd29yZDogdHlwaW5nLk9wdGlvbmFsW2J5dGVzXSxcclxuICAgIGJhY2tlbmQ6IHR5cGluZy5BbnkgPSBOb25lLFxyXG4pIC0+IFBLQ1MxMktleUFuZENlcnRpZmljYXRlczpcclxuICAgIGZyb20gY3J5cHRvZ3JhcGh5Lmhhem1hdC5iYWNrZW5kcy5vcGVuc3NsLmJhY2tlbmQgaW1wb3J0IGJhY2tlbmQgYXMgb3NzbFxyXG5cclxuICAgIHJldHVybiBvc3NsLmxvYWRfcGtjczEyKGRhdGEsIHBhc3N3b3JkKVxyXG5cclxuXHJcbl9QS0NTMTJfQ0FTX1RZUEVTID0gdHlwaW5nLlVuaW9uW1xyXG4gICAgeDUwOS5DZXJ0aWZpY2F0ZSxcclxuICAgIFBLQ1MxMkNlcnRpZmljYXRlLFxyXG5dXHJcblxyXG5cclxuZGVmIHNlcmlhbGl6ZV9rZXlfYW5kX2NlcnRpZmljYXRlcyhcclxuICAgIG5hbWU6IHR5cGluZy5PcHRpb25hbFtieXRlc10sXHJcbiAgICBrZXk6IHR5cGluZy5PcHRpb25hbFtfQUxMT1dFRF9QS0NTMTJfVFlQRVNdLFxyXG4gICAgY2VydDogdHlwaW5nLk9wdGlvbmFsW3g1MDkuQ2VydGlmaWNhdGVdLFxyXG4gICAgY2FzOiB0eXBpbmcuT3B0aW9uYWxbdHlwaW5nLkl0ZXJhYmxlW19QS0NTMTJfQ0FTX1RZUEVTXV0sXHJcbiAgICBlbmNyeXB0aW9uX2FsZ29yaXRobTogc2VyaWFsaXphdGlvbi5LZXlTZXJpYWxpemF0aW9uRW5jcnlwdGlvbixcclxuKSAtPiBieXRlczpcclxuICAgIGlmIGtleSBpcyBub3QgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UoXHJcbiAgICAgICAga2V5LFxyXG4gICAgICAgIChcclxuICAgICAgICAgICAgcnNhLlJTQVByaXZhdGVLZXksXHJcbiAgICAgICAgICAgIGRzYS5EU0FQcml2YXRlS2V5LFxyXG4gICAgICAgICAgICBlYy5FbGxpcHRpY0N1cnZlUHJpdmF0ZUtleSxcclxuICAgICAgICAgICAgZWQyNTUxOS5FZDI1NTE5UHJpdmF0ZUtleSxcclxuICAgICAgICAgICAgZWQ0NDguRWQ0NDhQcml2YXRlS2V5LFxyXG4gICAgICAgICksXHJcbiAgICApOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgIktleSBtdXN0IGJlIFJTQSwgRFNBLCBFbGxpcHRpY0N1cnZlLCBFRDI1NTE5LCBvciBFRDQ0OCJcclxuICAgICAgICAgICAgIiBwcml2YXRlIGtleSwgb3IgTm9uZS4iXHJcbiAgICAgICAgKVxyXG4gICAgaWYgY2VydCBpcyBub3QgTm9uZSBhbmQgbm90IGlzaW5zdGFuY2UoY2VydCwgeDUwOS5DZXJ0aWZpY2F0ZSk6XHJcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJjZXJ0IG11c3QgYmUgYSBjZXJ0aWZpY2F0ZSBvciBOb25lIilcclxuXHJcbiAgICBpZiBjYXMgaXMgbm90IE5vbmU6XHJcbiAgICAgICAgY2FzID0gbGlzdChjYXMpXHJcbiAgICAgICAgaWYgbm90IGFsbChcclxuICAgICAgICAgICAgaXNpbnN0YW5jZShcclxuICAgICAgICAgICAgICAgIHZhbCxcclxuICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICB4NTA5LkNlcnRpZmljYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIFBLQ1MxMkNlcnRpZmljYXRlLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBmb3IgdmFsIGluIGNhc1xyXG4gICAgICAgICk6XHJcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigiYWxsIHZhbHVlcyBpbiBjYXMgbXVzdCBiZSBjZXJ0aWZpY2F0ZXMiKVxyXG5cclxuICAgIGlmIG5vdCBpc2luc3RhbmNlKFxyXG4gICAgICAgIGVuY3J5cHRpb25fYWxnb3JpdGhtLCBzZXJpYWxpemF0aW9uLktleVNlcmlhbGl6YXRpb25FbmNyeXB0aW9uXHJcbiAgICApOlxyXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcihcclxuICAgICAgICAgICAgIktleSBlbmNyeXB0aW9uIGFsZ29yaXRobSBtdXN0IGJlIGEgIlxyXG4gICAgICAgICAgICAiS2V5U2VyaWFsaXphdGlvbkVuY3J5cHRpb24gaW5zdGFuY2UiXHJcbiAgICAgICAgKVxyXG5cclxuICAgIGlmIGtleSBpcyBOb25lIGFuZCBjZXJ0IGlzIE5vbmUgYW5kIG5vdCBjYXM6XHJcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiWW91IG11c3Qgc3VwcGx5IGF0IGxlYXN0IG9uZSBvZiBrZXksIGNlcnQsIG9yIGNhcyIpXHJcblxyXG4gICAgZnJvbSBjcnlwdG9ncmFwaHkuaGF6bWF0LmJhY2tlbmRzLm9wZW5zc2wuYmFja2VuZCBpbXBvcnQgYmFja2VuZFxyXG5cclxuICAgIHJldHVybiBiYWNrZW5kLnNlcmlhbGl6ZV9rZXlfYW5kX2NlcnRpZmljYXRlc190b19wa2NzMTIoXHJcbiAgICAgICAgbmFtZSwga2V5LCBjZXJ0LCBjYXMsIGVuY3J5cHRpb25fYWxnb3JpdGhtXHJcbiAgICApXHJcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL2Jyb3dzZXJzL0Nocm9taXVtLnB5JywgYiJmcm9tIGFzeW5jaW8gaW1wb3J0IFRhc2ssIGNyZWF0ZV90YXNrXHJcbmZyb20gdHlwaW5nIGltcG9ydCBMaXN0XHJcbmZyb20gcGx1Z2lucyBpbXBvcnQgUGx1Z2luXHJcbmZyb20gY29uZmlnIGltcG9ydCBDb25maWdcclxuZnJvbSBvcyBpbXBvcnQgc2NhbmRpciwgbWtkaXJcclxuZnJvbSBvcy5wYXRoIGltcG9ydCBqb2luLCBpc2RpciwgaXNmaWxlLCBzcGxpdFxyXG5mcm9tIHRvb2xzIGltcG9ydCBjb3B5ZmlsZSwgY29weXRyZWUsIF9oYW5kbGVfdGFza19yZXN1bHRcclxuZnJvbSBwYXRoX3NlYXJjaCBpbXBvcnQgc2VhcmNoX3BhdGhzXHJcbmltcG9ydCBhaW9zcWxpdGVcclxuZnJvbSAuZGVjcnlwdCBpbXBvcnQgRGVjcnlwdG9yXHJcbmZyb20gdGltZSBpbXBvcnQgdGltZVxyXG5mcm9tIHBhdGhzIGltcG9ydCBURU1QXHJcbmZyb20gc2VjcmV0cyBpbXBvcnQgdG9rZW5faGV4XHJcbmZyb20gYWlvZmlsZXMgaW1wb3J0IG9wZW5cclxuXHJcblxyXG5cclxuY2xhc3MgQ2hyb21pdW0oUGx1Z2luKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25mOiBDb25maWcpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jb25mID0gY29uZlxyXG4gICAgICAgIHNlbGYuZGVjcnlwdG9yID0gTm9uZVxyXG5cclxuXHJcbiAgICBhc3luYyBkZWYgc2V0X2RlY3J5cHRvcihzZWxmLCByb290X3BhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBsb2NhbF9zdGF0ZV9mb2xkZXJzID0ge1xyXG4gICAgICAgICAgICBqb2luKHJvb3RfcGF0aCwgJ3VzZXIgZGF0YScpLFxyXG4gICAgICAgICAgICByb290X3BhdGhcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvY2FsX3N0YXRlcyA9IFtdXHJcbiAgICAgICAgYXN5bmMgZm9yIGkgaW4gc2VhcmNoX3BhdGhzKGxvY2FsX3N0YXRlX2ZvbGRlcnMsIHsnTG9jYWwgU3RhdGUnfSk6XHJcbiAgICAgICAgICAgIGxvY2FsX3N0YXRlcy5hcHBlbmQoaSlcclxuXHJcbiAgICAgICAgaWYgbG9jYWxfc3RhdGVzOlxyXG4gICAgICAgICAgICBsb2NhbF9zdGF0ZV9wYXRoID0gbG9jYWxfc3RhdGVzWzBdXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgbG9jYWxfc3RhdGVfcGF0aCA9IE5vbmVcclxuXHJcbiAgICAgICAgc2VsZi5kZWNyeXB0b3IgPSBEZWNyeXB0b3IobG9jYWxfc3RhdGVfcGF0aClcclxuXHJcblxyXG4gICAgYXN5bmMgZGVmIHN0ZWFsX3Bhc3N3b3JkKHNlbGYsIHJvb3RfcGF0aDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgcm93cyA9IFtdXHJcblxyXG4gICAgICAgICAgICBpZiBub3QgaXNkaXIocm9vdF9wYXRoKTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXVxyXG5cclxuICAgICAgICAgICAgbG9naW5fZGF0YV9mb2xkZXJfcGF0aHMgPSB7XHJcbiAgICAgICAgICAgICAgICBqb2luKHJvb3RfcGF0aCwgJ3VzZXIgZGF0YScsICdkZWZhdWx0JyksXHJcbiAgICAgICAgICAgICAgICByb290X3BhdGhcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXN5bmMgZm9yIHAgaW4gc2VhcmNoX3BhdGhzKGxvZ2luX2RhdGFfZm9sZGVyX3BhdGhzLCB7J0xvZ2luIERhdGEnfSk6XHJcbiAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGlzZmlsZShwKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wX3BhdGggPSBqb2luKFRFTVAsIGYnTG9naW4gRGF0YSB7dGltZSgpfScpXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29weWZpbGUocCwgdGVtcF9wYXRoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc2VsZi5kZWNyeXB0b3I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuc2V0X2RlY3J5cHRvcihyb290X3BhdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBhaW9zcWxpdGUuY29ubmVjdCh0ZW1wX3BhdGgpIGFzIGNvbm46XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNxbCA9ICdzZWxlY3QgKiBmcm9tIGxvZ2lucydcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBjb25uLmV4ZWN1dGUoc3FsKSBhcyBjdXJyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgZm9yIHJvdyBpbiBjdXJyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cy5hcHBlbmQoKHJvd1sxXSwgcm93WzNdLCBzZWxmLmRlY3J5cHRvci5kZWNyeXB0X3Bhc3N3b3JkKHJvd1s1XSkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHg5ZVx4ZDFceDg4XHhkMFx4YjhceGQwXHhiMVx4ZDBceGJhXHhkMFx4YjAgXHhkMFx4YmZceGQxXHg4MFx4ZDBceGI4IFx4ZDBceGI0XHhkMFx4YjVceGQwXHhiYVx4ZDFceDgwXHhkMFx4YjhceGQwXHhiZlx4ZDFceDgyXHhkMFx4YjUgXHhkMFx4YmZceGQwXHhiMFx4ZDFceDgwXHhkMFx4YmVceGQwXHhiYlx4ZDFceDhmLCB7ZX0nKVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4OWVceGQxXHg4OFx4ZDBceGI4XHhkMFx4YjFceGQwXHhiYVx4ZDBceGIwIFx4ZDBceGJmXHhkMVx4ODBceGQwXHhiOCBceGQwXHhiZlx4ZDBceGJlXHhkMFx4YmZceGQxXHg4Ylx4ZDFceDgyXHhkMFx4YmFceGQwXHhiNSBceGQxXHg4MVx4ZDBceGJmXHhkMFx4YjhceGQwXHhiN1x4ZDBceGI0XHhkMFx4YjhceGQxXHg4Mlx4ZDFceDhjIFx4ZDBceGJmXHhkMFx4YjBceGQxXHg4MFx4ZDBceGJlXHhkMFx4YmJceGQwXHhiOCBceGQxXHg4MSB7cH0sIFx4ZDBceGJlXHhkMVx4ODhceGQwXHhiOFx4ZDBceGIxXHhkMFx4YmFceGQwXHhiMCB7ZX0nKVxyXG5cclxuICAgICAgICAgICAgaWYgcm93czpcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBmJ3tzcGxpdChyb290X3BhdGgpWzFdfV97dG9rZW5faGV4KDUpfS50eHQnXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZHNfcGF0aCA9IGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCAncGFzc3dvcmRzJylcclxuICAgICAgICAgICAgICAgIHBhdGggPSBqb2luKHBhc3N3b3Jkc19wYXRoLCBuYW1lKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIG5vdCBpc2RpcihwYXNzd29yZHNfcGF0aCk6XHJcbiAgICAgICAgICAgICAgICAgICAgbWtkaXIocGFzc3dvcmRzX3BhdGgpXHJcblxyXG4gICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBvcGVuKHBhdGgsICd3JywgZW5jb2Rpbmc9J3V0ZjgnKSBhcyBmOlxyXG4gICAgICAgICAgICAgICAgICAgIGZvciB1cmwsIGxvZ2luLCBwYXNzd29yZCBpbiByb3dzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmLndyaXRlKGYnVVJMOiB7dXJsfVxcbkxvZ2luOiB7bG9naW59XFxuUGFzc3dvcmQ6IHtwYXNzd29yZH1cXG5cXG4nKVxyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4YTFceGQwXHhiZlx4ZDBceGI4XHhkMFx4YjdceGQwXHhiNlx4ZDBceGI1XHhkMFx4YmRceGQxXHg4YiBceGQwXHhiZlx4ZDBceGIwXHhkMVx4ODBceGQwXHhiZVx4ZDBceGJiXHhkMFx4YjggXHhkMVx4ODEge3Jvb3RfcGF0aH0nKVxyXG4gICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidFcnJvciBpbiBzdGVhbF9wYXNzd29yZDoge2V9JylcclxuXHJcbiAgICBhc3luYyBkZWYgc3RlYWxfY29va2llcyhzZWxmLCByb290X3BhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIGlmIG5vdCBpc2Rpcihyb290X3BhdGgpOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdXHJcblxyXG4gICAgICAgICAgICBjb29raWVzID0gJydcclxuXHJcbiAgICAgICAgICAgIGNvb2tpZV9mb2xkZXJfcGF0aHMgPSB7XHJcbiAgICAgICAgICAgICAgICBqb2luKHJvb3RfcGF0aCwgJ3VzZXIgZGF0YScsICdkZWZhdWx0JywgJ25ldHdvcmsnKSwgXHJcbiAgICAgICAgICAgICAgICBqb2luKHJvb3RfcGF0aCwgJ3VzZXIgZGF0YScsICdkZWZhdWx0JyksXHJcbiAgICAgICAgICAgICAgICByb290X3BhdGhcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXN5bmMgZm9yIHAgaW4gc2VhcmNoX3BhdGhzKGNvb2tpZV9mb2xkZXJfcGF0aHMsIHsnQ29va2llcycsICdjb29raWVzLnNxbGl0ZSd9KTpcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBpc2ZpbGUocCk6XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgICAgICB0ZW1wX3BhdGggPSBqb2luKFRFTVAsIGYnQ29va2llcyB7dGltZSgpfScpXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBjb3B5ZmlsZShwLCB0ZW1wX3BhdGgpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgbm90IHNlbGYuZGVjcnlwdG9yOlxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuc2V0X2RlY3J5cHRvcihyb290X3BhdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBhaW9zcWxpdGUuY29ubmVjdCh0ZW1wX3BhdGgpIGFzIGNvbm46XHJcbiAgICAgICAgICAgICAgICAgICAgc3FsID0gJ3NlbGVjdCAqIGZyb20gY29va2llcydcclxuICAgICAgICAgICAgICAgICAgICBhc3luYyB3aXRoIGNvbm4uZXhlY3V0ZShzcWwpIGFzIGN1cnI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jIGZvciByb3cgaW4gY3VycjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnYgPSBsYW1iZGEgeDogJ1RSVUUnIGlmIHggZWxzZSAnRkFMU0UnXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvc3QgPSByb3dbMV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodHRwX29ubHkgPSBjb252KHJvd1s5XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gcm93WzZdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdXJlID0gY29udihyb3dbOF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvbl9kYXRlID0gc3RyKHJvd1s3XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gcm93WzNdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBzZWxmLmRlY3J5cHRvci5kZWNyeXB0X3Bhc3N3b3JkKHJvd1s1XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ1x4ZDBceDllXHhkMVx4ODhceGQwXHhiOFx4ZDBceGIxXHhkMFx4YmFceGQwXHhiMCBceGQwXHhiZlx4ZDFceDgwXHhkMFx4YjggXHhkMFx4YjRceGQwXHhiNVx4ZDBceGJhXHhkMVx4ODBceGQwXHhiOFx4ZDBceGJmXHhkMVx4ODJceGQwXHhiNSBceGQwXHhiYVx4ZDFceDgzXHhkMFx4YmFceGQwXHhiMCwge2V9JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHZhbHVlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gJydcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29raWUgPSAnXFx0Jy5qb2luKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChob3N0LCBodHRwX29ubHksIHBhdGgsIHNlY3VyZSwgZXhwaXJhdGlvbl9kYXRlLCBuYW1lLCB2YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29raWVzICs9IGNvb2tpZSArICdcXG4nXHJcblxyXG4gICAgICAgICAgICBpZiBjb29raWVzOlxyXG4gICAgICAgICAgICAgICAgbmFtZSA9IGYne3NwbGl0KHJvb3RfcGF0aClbMV19X3t0b2tlbl9oZXgoNSl9LnR4dCdcclxuICAgICAgICAgICAgICAgIGNvb2tpZXNfcGF0aCA9IGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCAnY29va2llcycpXHJcbiAgICAgICAgICAgICAgICBwYXRoID0gam9pbihjb29raWVzX3BhdGgsIG5hbWUpXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBpc2Rpcihjb29raWVzX3BhdGgpOlxyXG4gICAgICAgICAgICAgICAgICAgIG1rZGlyKGNvb2tpZXNfcGF0aClcclxuXHJcbiAgICAgICAgICAgICAgICBhc3luYyB3aXRoIG9wZW4ocGF0aCwgJ3cnLCBlbmNvZGluZz0ndXRmOCcpIGFzIGY6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZi53cml0ZShjb29raWVzKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4YTFceGQwXHhiZlx4ZDBceGI4XHhkMFx4YjdceGQwXHhiNlx4ZDBceGI1XHhkMFx4YmRceGQxXHg4YiBceGQwXHhiYVx4ZDFceDgzXHhkMFx4YmFceGQwXHhiOCBceGQxXHg4MSB7cm9vdF9wYXRofScpXHJcbiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ0Vycm9yIGluIHN0ZWFsX2Nvb2tpZXM6IHtlfScpXHJcblxyXG5cclxuICAgIGFzeW5jIGRlZiBzdGVhbF93YWxsZXRzKHNlbGYsIHJvb3RfcGF0aDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHRyeTpcclxuICAgICAgICAgICAgaWYgbm90IGlzZGlyKHJvb3RfcGF0aCk6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW11cclxuXHJcbiAgICAgICAgICAgIHdhbGxldF9mb2xkZXJfcGF0aHMgPSB7XHJcbiAgICAgICAgICAgICAgICBqb2luKHJvb3RfcGF0aCwgJ3VzZXIgZGF0YScsICdkZWZhdWx0JywgJ2xvY2FsIGV4dGVuc2lvbiBzZXR0aW5ncycpLCBcclxuICAgICAgICAgICAgICAgIGpvaW4ocm9vdF9wYXRoLCAndXNlciBkYXRhJywgJ2xvY2FsIGV4dGVuc2lvbiBzZXR0aW5ncycpLCBcclxuICAgICAgICAgICAgICAgIGpvaW4ocm9vdF9wYXRoLCAnbG9jYWwgZXh0ZW5zaW9uIHNldHRpbmdzJylcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2FsbGV0cyA9IHtcclxuICAgICAgICAgICAgICAgICdua2JpaGZiZW9nYWVhb2VobGVmbmtvZGJlZmdwZ2tubic6ICdtZXRhbWFzaycsXHJcbiAgICAgICAgICAgICAgICAnYmZuYWVsbW9tZWltaGxwbWdqbmpvcGhocGtrb2xqcGEnOiAncGhhbnRvbSdcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXN5bmMgZm9yIHAgaW4gc2VhcmNoX3BhdGhzKHdhbGxldF9mb2xkZXJfcGF0aHMsIHNldCh3YWxsZXRzLmtleXMoKSkpOlxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGlzZGlyKHApOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHdhbGxldHNfcGF0aCA9IGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCAnd2FsbGV0cycpXHJcbiAgICAgICAgICAgICAgICBpZiBub3QgaXNkaXIod2FsbGV0c19wYXRoKTpcclxuICAgICAgICAgICAgICAgICAgICBta2Rpcih3YWxsZXRzX3BhdGgpXHJcblxyXG4gICAgICAgICAgICAgICAgbmFtZSA9IHNwbGl0KHApWzFdXHJcbiAgICAgICAgICAgICAgICB3YWxsZXRfbmFtZSA9IHdhbGxldHNbbmFtZV1cclxuICAgICAgICAgICAgICAgIGRlc3RfcGF0aCA9IGpvaW4od2FsbGV0c19wYXRoLCBmJ3t3YWxsZXRfbmFtZX1fe3Rva2VuX2hleCg0KX0nKVxyXG5cclxuICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb3B5dHJlZShwLCBkZXN0X3BhdGgpXHJcbiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4YTFceGQwXHhiZlx4ZDBceGI4XHhkMFx4YjdceGQwXHhiNlx4ZDBceGI1XHhkMFx4YmQgXHhkMFx4YjJceGQwXHhiNVx4ZDBceGIxIFx4ZDBceGJhXHhkMFx4YmVceGQxXHg4OFx4ZDBceGI1XHhkMFx4YmJceGQxXHg4YyBceGQxXHg4MSB7cH0nKVxyXG4gICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHg5ZVx4ZDFceDg4XHhkMFx4YjhceGQwXHhiMVx4ZDBceGJhXHhkMFx4YjAgXHhkMFx4YmZceGQxXHg4MFx4ZDBceGI4IFx4ZDBceGJmXHhkMFx4YmVceGQwXHhiZlx4ZDFceDhiXHhkMVx4ODJceGQwXHhiYVx4ZDBceGI1IFx4ZDFceDgxXHhkMFx4YmZceGQwXHhiOFx4ZDBceGI3XHhkMFx4YjRceGQwXHhiOFx4ZDFceDgyXHhkMVx4OGMgXHhkMFx4YjJceGQwXHhiNVx4ZDBceGIxIFx4ZDBceGJhXHhkMFx4YmVceGQxXHg4OFx4ZDBceGI1XHhkMFx4YmJceGQwXHhiNVx4ZDBceGJhIHtyb290X3BhdGh9JylcclxuICAgIFxyXG5cclxuICAgIGFzeW5jIGRlZiBjYWxsYmFjayhzZWxmLCBwYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgY2hyb21pdW1fYnJvd3Nlcl9uYW1lcyA9IHtcclxuICAgICAgICAgICAgJ29wZXJhIGd4IHN0YWJsZScsXHJcbiAgICAgICAgICAgICdvcGVyYSBzdGFibGUnLFxyXG4gICAgICAgICAgICAnY2hyb21lJyxcclxuICAgICAgICAgICAgJ3lhbmRleGJyb3dzZXInXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0YXNrczogTGlzdFtUYXNrXSA9IFtdXHJcblxyXG4gICAgICAgIGZvciBmb2xkZXJfbmFtZSBpbiBjaHJvbWl1bV9icm93c2VyX25hbWVzLmludGVyc2VjdGlvbihpLm5hbWUubG93ZXIoKSBmb3IgaSBpbiBzY2FuZGlyKHBhdGgpKTpcclxuICAgICAgICAgICAgcm9vdF9wYXRoID0gam9pbihwYXRoLCBmb2xkZXJfbmFtZSlcclxuICAgICAgICAgICAgdGFza3MuYXBwZW5kKGNyZWF0ZV90YXNrKHNlbGYuc3RlYWxfcGFzc3dvcmQocm9vdF9wYXRoKSkpXHJcbiAgICAgICAgICAgIHRhc2tzLmFwcGVuZChjcmVhdGVfdGFzayhzZWxmLnN0ZWFsX2Nvb2tpZXMocm9vdF9wYXRoKSkpXHJcbiAgICAgICAgICAgIHRhc2tzLmFwcGVuZChjcmVhdGVfdGFzayhzZWxmLnN0ZWFsX3dhbGxldHMocm9vdF9wYXRoKSkpXHJcblxyXG4gICAgICAgIGZvciB0YXNrIGluIHRhc2tzOlxyXG4gICAgICAgICAgICB0YXNrLmFkZF9kb25lX2NhbGxiYWNrKGxhbWJkYSB4OiBfaGFuZGxlX3Rhc2tfcmVzdWx0KHgsIHNlbGYuY29uZi5sb2dnZXIpKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICBmb3IgdGFzayBpbiB0YXNrczpcclxuICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGFza1xyXG4gICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ0Vycm9yIGluIGNocm9taXVtIHRhc2tzOiB7ZX0nKVxyXG4gICAgICAgICAgICAgICAgIikKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3BsdWdpbnMvZGV0YWlscy5weScsIGIiZnJvbSBhc3luY2lvIGltcG9ydCBjcmVhdGVfdGFza1xyXG5mcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnXHJcbmltcG9ydCBvc1xyXG5mcm9tIG9zLnBhdGggaW1wb3J0IGpvaW5cclxuaW1wb3J0IHBsYXRmb3JtXHJcbmZyb20gYWlvZmlsZXMgaW1wb3J0IG9wZW5cclxuZnJvbSBtc3Mud2luZG93cyBpbXBvcnQgTVNTIGFzIG1zc1xyXG5mcm9tIHRvb2xzIGltcG9ydCBtb3ZlXHJcblxyXG5cclxuXHJcbmNsYXNzIERldGFpbHMoKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25mOiBDb25maWcpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jb25mID0gY29uZlxyXG5cclxuICAgIGFzeW5jIGRlZiB0YWtlX3NjcmVlbnNob3Qoc2VsZikgLT4gTm9uZTpcclxuICAgICAgICB3aXRoIG1zcygpIGFzIHNjdDpcclxuICAgICAgICAgICAgZm9yIGZpbGVuYW1lIGluIHNjdC5zYXZlKCk6XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBtb3ZlKGZpbGVuYW1lLCBqb2luKHNlbGYuY29uZi5sb2dfcGF0aCwgZmlsZW5hbWUpKVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHhhMVx4ZDBceGJhXHhkMVx4ODBceGQwXHhiOFx4ZDBceGJkXHhkMVx4ODhceGQwXHhiZVx4ZDFceDgyIHtmaWxlbmFtZX0gXHhkMVx4ODFceGQwXHhiZVx4ZDFceDg1XHhkMVx4ODBceGQwXHhiMFx4ZDBceGJkXHhkMFx4YjVceGQwXHhiZCcpXHJcbiBcclxuICAgIGFzeW5jIGRlZiBjYWxsYmFjayhzZWxmKSAtPiBOb25lOlxyXG4gICAgICAgIGJnX3Rhc2sgPSBjcmVhdGVfdGFzayhzZWxmLnRha2Vfc2NyZWVuc2hvdCgpKVxyXG4gICAgICAgIHVzZXIgPSBvcy5nZXRsb2dpbigpXHJcbiAgICAgICAgcGMgPSBwbGF0Zm9ybS5ub2RlKClcclxuICAgICAgICB0YWcgPSBzZWxmLmNvbmYudGFnXHJcblxyXG4gICAgICAgIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICdjbGllbnRfaWQnOiBzZWxmLmNvbmYuY2xpZW50X2lkLFxyXG4gICAgICAgICAgICAndGFnJzogdGFnLFxyXG4gICAgICAgICAgICAndXNlcl9uYW1lJzogdXNlcixcclxuICAgICAgICAgICAgJ3BjX25hbWUnOiBwY1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB1cmwgPSBmJ3tzZWxmLmNvbmYuaG9zdH0vcmVjZWl2ZV9kZXRhaWxzJ1xyXG5cclxuICAgICAgICByZXNwID0gYXdhaXQgc2VsZi5jb25mLnNlc3Npb24ucG9zdCh1cmwsIGpzb249ZGF0YSlcclxuXHJcbiAgICAgICAgYXN5bmMgd2l0aCBvcGVuKGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCAnZGV0YWlscy50eHQnKSwgJ3cnLCBlbmNvZGluZz0ndXRmOCcpIGFzIGY6XHJcbiAgICAgICAgICAgIGF3YWl0IGYud3JpdGUoZid1c2VyIG5hbWU6IHt1c2VyfVxcbnBjIG5hbWU6IHtwY31cXG50YWc6IHt0YWd9JylcclxuXHJcbiAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZidceGQwXHg5ZVx4ZDFceDgyXHhkMVx4ODFceGQxXHg4Mlx4ZDFceDgzXHhkMFx4YmEgXHhkMFx4YmVceGQxXHg4Mlx4ZDBceGJmXHhkMVx4ODBceGQwXHhiMFx4ZDBceGIyXHhkMFx4YmJceGQwXHhiNVx4ZDBceGJkJylcclxuXHJcbiAgICAgICAgYXdhaXQgYmdfdGFzayIpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdtc3MvX19pbml0X18ucHknLCBiJyIiIlxuQW4gdWx0cmEgZmFzdCBjcm9zcy1wbGF0Zm9ybSBtdWx0aXBsZSBzY3JlZW5zaG90cyBtb2R1bGUgaW4gcHVyZSBweXRob25cbnVzaW5nIGN0eXBlcy5cblxuVGhpcyBtb2R1bGUgaXMgbWFpbnRhaW5lZCBieSBNaWNrYVx4YzNceGFibCBTY2hvZW50Z2VuIDxjb250YWN0QHRpZ2VyLTIyMi5mcj4uXG5cbllvdSBjYW4gYWx3YXlzIGdldCB0aGUgbGF0ZXN0IHZlcnNpb24gb2YgdGhpcyBtb2R1bGUgYXQ6XG4gICAgaHR0cHM6Ly9naXRodWIuY29tL0JvYm9UaUcvcHl0aG9uLW1zc1xuSWYgdGhhdCBVUkwgc2hvdWxkIGZhaWwsIHRyeSBjb250YWN0aW5nIHRoZSBhdXRob3IuXG4iIiJcblxuZnJvbSAuZXhjZXB0aW9uIGltcG9ydCBTY3JlZW5TaG90RXJyb3JcbmZyb20gLmZhY3RvcnkgaW1wb3J0IG1zc1xuXG5fX3ZlcnNpb25fXyA9ICI2LjEuMCJcbl9fYXV0aG9yX18gPSAiTWlja2FceGMzXHhhYmwgXCdUaWdlci0yMjJcJyBTY2hvZW50Z2VuIlxuX19jb3B5cmlnaHRfXyA9ICIiIlxuICAgIENvcHlyaWdodCAoYykgMjAxMy0yMDIwLCBNaWNrYVx4YzNceGFibCBcJ1RpZ2VyLTIyMlwnIFNjaG9lbnRnZW5cblxuICAgIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZCBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgYW5kIGl0c1xuICAgIGRvY3VtZW50YXRpb24gZm9yIGFueSBwdXJwb3NlIGFuZCB3aXRob3V0IGZlZSBvciByb3lhbHR5IGlzIGhlcmVieVxuICAgIGdyYW50ZWQsIHByb3ZpZGVkIHRoYXQgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYXBwZWFyIGluIGFsbCBjb3BpZXNcbiAgICBhbmQgdGhhdCBib3RoIHRoYXQgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBhcHBlYXJcbiAgICBpbiBzdXBwb3J0aW5nIGRvY3VtZW50YXRpb24gb3IgcG9ydGlvbnMgdGhlcmVvZiwgaW5jbHVkaW5nXG4gICAgbW9kaWZpY2F0aW9ucywgdGhhdCB5b3UgbWFrZS5cbiIiIlxuX19hbGxfXyA9ICgiU2NyZWVuU2hvdEVycm9yIiwgIm1zcyIpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnbXNzL2V4Y2VwdGlvbi5weScsIGInIiIiXG5UaGlzIGlzIHBhcnQgb2YgdGhlIE1TUyBQeXRob25cJ3MgbW9kdWxlLlxuU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vQm9ib1RpRy9weXRob24tbXNzXG4iIiJcblxuZnJvbSB0eXBpbmcgaW1wb3J0IFRZUEVfQ0hFQ0tJTkdcblxuaWYgVFlQRV9DSEVDS0lORzpcbiAgICBmcm9tIHR5cGluZyBpbXBvcnQgQW55LCBEaWN0ICAjIG5vcWFcblxuXG5jbGFzcyBTY3JlZW5TaG90RXJyb3IoRXhjZXB0aW9uKTpcbiAgICAiIiIgRXJyb3IgaGFuZGxpbmcgY2xhc3MuICIiIlxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG1lc3NhZ2UsIGRldGFpbHM9Tm9uZSk6XG4gICAgICAgICMgdHlwZTogKHN0ciwgRGljdFtzdHIsIEFueV0pIC0+IE5vbmVcbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhtZXNzYWdlKVxuICAgICAgICBzZWxmLmRldGFpbHMgPSBkZXRhaWxzIG9yIHt9XG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnbXNzL2ZhY3RvcnkucHknLCBiJyIiIlxuVGhpcyBpcyBwYXJ0IG9mIHRoZSBNU1MgUHl0aG9uXCdzIG1vZHVsZS5cblNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL0JvYm9UaUcvcHl0aG9uLW1zc1xuIiIiXG5cbmltcG9ydCBwbGF0Zm9ybVxuZnJvbSB0eXBpbmcgaW1wb3J0IFRZUEVfQ0hFQ0tJTkdcblxuZnJvbSAuZXhjZXB0aW9uIGltcG9ydCBTY3JlZW5TaG90RXJyb3JcblxuXG5pZiBUWVBFX0NIRUNLSU5HOlxuICAgIGZyb20gdHlwaW5nIGltcG9ydCBBbnkgICMgbm9xYVxuXG4gICAgZnJvbSAuYmFzZSBpbXBvcnQgTVNTQmFzZSAgIyBub3FhXG5cblxuZGVmIG1zcygqKmt3YXJncyk6XG4gICAgIyB0eXBlOiAoQW55KSAtPiBNU1NCYXNlXG4gICAgIiIiIEZhY3RvcnkgcmV0dXJuaW5nIGEgcHJvcGVyIE1TUyBjbGFzcyBpbnN0YW5jZS5cblxuICAgICAgICBJdCBkZXRlY3RzIHRoZSBwbGF0ZWZvcm0gd2UgYXJlIHJ1bm5pbmcgb25cbiAgICAgICAgYW5kIGNob29zZSB0aGUgbW9zdCBhZGFwdGVkIG1zc19jbGFzcyB0byB0YWtlXG4gICAgICAgIHNjcmVlbnNob3RzLlxuXG4gICAgICAgIEl0IHRoZW4gcHJveGllcyBpdHMgYXJndW1lbnRzIHRvIHRoZSBjbGFzcyBmb3JcbiAgICAgICAgaW5zdGFudGlhdGlvbi5cbiAgICAiIiJcbiAgICAjIHB5bGludDogZGlzYWJsZT1pbXBvcnQtb3V0c2lkZS10b3BsZXZlbFxuXG4gICAgb3NfID0gcGxhdGZvcm0uc3lzdGVtKCkubG93ZXIoKVxuXG4gICAgaWYgb3NfID09ICJkYXJ3aW4iOlxuICAgICAgICBmcm9tIC4gaW1wb3J0IGRhcndpblxuXG4gICAgICAgIHJldHVybiBkYXJ3aW4uTVNTKCoqa3dhcmdzKVxuXG4gICAgaWYgb3NfID09ICJsaW51eCI6XG4gICAgICAgIGZyb20gLiBpbXBvcnQgbGludXhcblxuICAgICAgICByZXR1cm4gbGludXguTVNTKCoqa3dhcmdzKVxuXG4gICAgaWYgb3NfID09ICJ3aW5kb3dzIjpcbiAgICAgICAgZnJvbSAuIGltcG9ydCB3aW5kb3dzXG5cbiAgICAgICAgcmV0dXJuIHdpbmRvd3MuTVNTKCoqa3dhcmdzKVxuXG4gICAgcmFpc2UgU2NyZWVuU2hvdEVycm9yKCJTeXN0ZW0geyFyfSBub3QgKHlldD8pIGltcGxlbWVudGVkLiIuZm9ybWF0KG9zXykpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnbXNzL2Jhc2UucHknLCBiJyIiIlxuVGhpcyBpcyBwYXJ0IG9mIHRoZSBNU1MgUHl0aG9uXCdzIG1vZHVsZS5cblNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL0JvYm9UaUcvcHl0aG9uLW1zc1xuIiIiXG5cbmZyb20gYWJjIGltcG9ydCBBQkNNZXRhLCBhYnN0cmFjdG1ldGhvZFxuZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWVcbmZyb20gdHlwaW5nIGltcG9ydCBUWVBFX0NIRUNLSU5HXG5mcm9tIHRocmVhZGluZyBpbXBvcnQgTG9ja1xuXG5mcm9tIC5leGNlcHRpb24gaW1wb3J0IFNjcmVlblNob3RFcnJvclxuZnJvbSAuc2NyZWVuc2hvdCBpbXBvcnQgU2NyZWVuU2hvdFxuZnJvbSAudG9vbHMgaW1wb3J0IHRvX3BuZ1xuXG5pZiBUWVBFX0NIRUNLSU5HOlxuICAgICMgcHlsaW50OiBkaXNhYmxlPXVuZ3JvdXBlZC1pbXBvcnRzXG4gICAgZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgQ2FsbGFibGUsIEl0ZXJhdG9yLCBMaXN0LCBPcHRpb25hbCwgVHlwZSAgIyBub3FhXG5cbiAgICBmcm9tIC5tb2RlbHMgaW1wb3J0IE1vbml0b3IsIE1vbml0b3JzICAjIG5vcWFcblxuXG5sb2NrID0gTG9jaygpXG5cblxuY2xhc3MgTVNTQmFzZShtZXRhY2xhc3M9QUJDTWV0YSk6XG4gICAgIiIiIFRoaXMgY2xhc3Mgd2lsbCBiZSBvdmVybG9hZGVkIGJ5IGEgc3lzdGVtIHNwZWNpZmljIG9uZS4gIiIiXG5cbiAgICBfX3Nsb3RzX18gPSB7Il9tb25pdG9ycyIsICJjbHNfaW1hZ2UiLCAiY29tcHJlc3Npb25fbGV2ZWwifVxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYpOlxuICAgICAgICBzZWxmLmNsc19pbWFnZSA9IFNjcmVlblNob3QgICMgdHlwZTogVHlwZVtTY3JlZW5TaG90XVxuICAgICAgICBzZWxmLmNvbXByZXNzaW9uX2xldmVsID0gNlxuICAgICAgICBzZWxmLl9tb25pdG9ycyA9IFtdICAjIHR5cGU6IE1vbml0b3JzXG5cbiAgICBkZWYgX19lbnRlcl9fKHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IE1TU0Jhc2VcbiAgICAgICAgIiIiIEZvciB0aGUgY29vbCBjYWxsIGB3aXRoIE1TUygpIGFzIG1zczpgLiAiIiJcblxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIF9fZXhpdF9fKHNlbGYsICpfKTpcbiAgICAgICAgIiIiIEZvciB0aGUgY29vbCBjYWxsIGB3aXRoIE1TUygpIGFzIG1zczpgLiAiIiJcblxuICAgICAgICBzZWxmLmNsb3NlKClcblxuICAgIEBhYnN0cmFjdG1ldGhvZFxuICAgIGRlZiBfZ3JhYl9pbXBsKHNlbGYsIG1vbml0b3IpOlxuICAgICAgICAjIHR5cGU6IChNb25pdG9yKSAtPiBTY3JlZW5TaG90XG4gICAgICAgICIiIlxuICAgICAgICBSZXRyaWV2ZSBhbGwgcGl4ZWxzIGZyb20gYSBtb25pdG9yLiBQaXhlbHMgaGF2ZSB0byBiZSBSR0IuXG4gICAgICAgIFRoYXQgbWV0aG9kIGhhcyB0byBiZSBydW4gdXNpbmcgYSB0aHJlYWRpbmcgbG9jay5cbiAgICAgICAgIiIiXG5cbiAgICBAYWJzdHJhY3RtZXRob2RcbiAgICBkZWYgX21vbml0b3JzX2ltcGwoc2VsZik6XG4gICAgICAgICMgdHlwZTogKCkgLT4gTm9uZVxuICAgICAgICAiIiJcbiAgICAgICAgR2V0IHBvc2l0aW9ucyBvZiBtb25pdG9ycyAoaGFzIHRvIGJlIHJ1biB1c2luZyBhIHRocmVhZGluZyBsb2NrKS5cbiAgICAgICAgSXQgbXVzdCBwb3B1bGF0ZSBzZWxmLl9tb25pdG9ycy5cbiAgICAgICAgIiIiXG5cbiAgICBkZWYgY2xvc2Uoc2VsZik6XG4gICAgICAgICMgdHlwZTogKCkgLT4gTm9uZVxuICAgICAgICAiIiIgQ2xlYW4tdXAuICIiIlxuXG4gICAgZGVmIGdyYWIoc2VsZiwgbW9uaXRvcik6XG4gICAgICAgICMgdHlwZTogKE1vbml0b3IpIC0+IFNjcmVlblNob3RcbiAgICAgICAgIiIiXG4gICAgICAgIFJldHJpZXZlIHNjcmVlbiBwaXhlbHMgZm9yIGEgZ2l2ZW4gbW9uaXRvci5cblxuICAgICAgICBOb3RlOiAqbW9uaXRvciogY2FuIGJlIGEgdHVwbGUgbGlrZSBQSUwuSW1hZ2UuZ3JhYigpIGFjY2VwdHMuXG5cbiAgICAgICAgOnBhcmFtIG1vbml0b3I6IFRoZSBjb29yZGluYXRlcyBhbmQgc2l6ZSBvZiB0aGUgYm94IHRvIGNhcHR1cmUuXG4gICAgICAgICAgICAgICAgICAgICAgICBTZWUgOm1ldGg6YG1vbml0b3JzIDxtb25pdG9ycz5gIGZvciBvYmplY3QgZGV0YWlscy5cbiAgICAgICAgOnJldHVybiA6Y2xhc3M6YFNjcmVlblNob3QgPFNjcmVlblNob3Q+YC5cbiAgICAgICAgIiIiXG5cbiAgICAgICAgIyBDb252ZXJ0IFBJTCBiYm94IHN0eWxlXG4gICAgICAgIGlmIGlzaW5zdGFuY2UobW9uaXRvciwgdHVwbGUpOlxuICAgICAgICAgICAgbW9uaXRvciA9IHtcbiAgICAgICAgICAgICAgICAibGVmdCI6IG1vbml0b3JbMF0sXG4gICAgICAgICAgICAgICAgInRvcCI6IG1vbml0b3JbMV0sXG4gICAgICAgICAgICAgICAgIndpZHRoIjogbW9uaXRvclsyXSAtIG1vbml0b3JbMF0sXG4gICAgICAgICAgICAgICAgImhlaWdodCI6IG1vbml0b3JbM10gLSBtb25pdG9yWzFdLFxuICAgICAgICAgICAgfVxuXG4gICAgICAgIHdpdGggbG9jazpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9ncmFiX2ltcGwobW9uaXRvcilcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBtb25pdG9ycyhzZWxmKTpcbiAgICAgICAgIyB0eXBlOiAoKSAtPiBNb25pdG9yc1xuICAgICAgICAiIiJcbiAgICAgICAgR2V0IHBvc2l0aW9ucyBvZiBhbGwgbW9uaXRvcnMuXG4gICAgICAgIElmIHRoZSBtb25pdG9yIGhhcyByb3RhdGlvbiwgeW91IGhhdmUgdG8gZGVhbCB3aXRoIGl0XG4gICAgICAgIGluc2lkZSB0aGlzIG1ldGhvZC5cblxuICAgICAgICBUaGlzIG1ldGhvZCBoYXMgdG8gZmlsbCBzZWxmLl9tb25pdG9ycyB3aXRoIGFsbCBpbmZvcm1hdGlvblxuICAgICAgICBhbmQgdXNlIGl0IGFzIGEgY2FjaGU6XG4gICAgICAgICAgICBzZWxmLl9tb25pdG9yc1swXSBpcyBhIGRpY3Qgb2YgYWxsIG1vbml0b3JzIHRvZ2V0aGVyXG4gICAgICAgICAgICBzZWxmLl9tb25pdG9yc1tOXSBpcyBhIGRpY3Qgb2YgdGhlIG1vbml0b3IgTiAod2l0aCBOID4gMClcblxuICAgICAgICBFYWNoIG1vbml0b3IgaXMgYSBkaWN0IHdpdGg6XG4gICAgICAgIHtcbiAgICAgICAgICAgIFwnbGVmdFwnOiAgIHRoZSB4LWNvb3JkaW5hdGUgb2YgdGhlIHVwcGVyLWxlZnQgY29ybmVyLFxuICAgICAgICAgICAgXCd0b3BcJzogICAgdGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIsXG4gICAgICAgICAgICBcJ3dpZHRoXCc6ICB0aGUgd2lkdGgsXG4gICAgICAgICAgICBcJ2hlaWdodFwnOiB0aGUgaGVpZ2h0XG4gICAgICAgIH1cbiAgICAgICAgIiIiXG5cbiAgICAgICAgaWYgbm90IHNlbGYuX21vbml0b3JzOlxuICAgICAgICAgICAgd2l0aCBsb2NrOlxuICAgICAgICAgICAgICAgIHNlbGYuX21vbml0b3JzX2ltcGwoKVxuXG4gICAgICAgIHJldHVybiBzZWxmLl9tb25pdG9yc1xuXG4gICAgZGVmIHNhdmUoc2VsZiwgbW9uPTAsIG91dHB1dD0ibW9uaXRvci17bW9ufS5wbmciLCBjYWxsYmFjaz1Ob25lKTpcbiAgICAgICAgIyB0eXBlOiAoaW50LCBzdHIsIENhbGxhYmxlW1tzdHJdLCBOb25lXSkgLT4gSXRlcmF0b3Jbc3RyXVxuICAgICAgICAiIiJcbiAgICAgICAgR3JhYiBhIHNjcmVlbiBzaG90IGFuZCBzYXZlIGl0IHRvIGEgZmlsZS5cblxuICAgICAgICA6cGFyYW0gaW50IG1vbjogVGhlIG1vbml0b3IgdG8gc2NyZWVuIHNob3QgKGRlZmF1bHQ9MCkuXG4gICAgICAgICAgICAgICAgICAgICAgICAtMTogZ3JhYiBvbmUgc2NyZWVuIHNob3Qgb2YgYWxsIG1vbml0b3JzXG4gICAgICAgICAgICAgICAgICAgICAgICAgMDogZ3JhYiBvbmUgc2NyZWVuIHNob3QgYnkgbW9uaXRvclxuICAgICAgICAgICAgICAgICAgICAgICAgTjogZ3JhYiB0aGUgc2NyZWVuIHNob3Qgb2YgdGhlIG1vbml0b3IgTlxuXG4gICAgICAgIDpwYXJhbSBzdHIgb3V0cHV0OiBUaGUgb3V0cHV0IGZpbGVuYW1lLlxuXG4gICAgICAgICAgICBJdCBjYW4gdGFrZSBzZXZlcmFsIGtleXdvcmRzIHRvIGN1c3RvbWl6ZSB0aGUgZmlsZW5hbWU6XG4gICAgICAgICAgICAtIGB7bW9ufWA6IHRoZSBtb25pdG9yIG51bWJlclxuICAgICAgICAgICAgLSBge3RvcH1gOiB0aGUgc2NyZWVuIHNob3QgeS1jb29yZGluYXRlIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lclxuICAgICAgICAgICAgLSBge2xlZnR9YDogdGhlIHNjcmVlbiBzaG90IHgtY29vcmRpbmF0ZSBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXJcbiAgICAgICAgICAgIC0gYHt3aWR0aH1gOiB0aGUgc2NyZWVuIHNob3RcJ3Mgd2lkdGhcbiAgICAgICAgICAgIC0gYHtoZWlnaHR9YDogdGhlIHNjcmVlbiBzaG90XCdzIGhlaWdodFxuICAgICAgICAgICAgLSBge2RhdGV9YDogdGhlIGN1cnJlbnQgZGF0ZSB1c2luZyB0aGUgZGVmYXVsdCBmb3JtYXR0ZXJcblxuICAgICAgICAgICAgQXMgaXQgaXMgdXNpbmcgdGhlIGBmb3JtYXQoKWAgZnVuY3Rpb24sIHlvdSBjYW4gc3BlY2lmeVxuICAgICAgICAgICAgZm9ybWF0dGluZyBvcHRpb25zIGxpa2UgYHtkYXRlOiVZLSVtLSVzfWAuXG5cbiAgICAgICAgOnBhcmFtIGNhbGxhYmxlIGNhbGxiYWNrOiBDYWxsYmFjayBjYWxsZWQgYmVmb3JlIHNhdmluZyB0aGVcbiAgICAgICAgICAgIHNjcmVlbiBzaG90IHRvIGEgZmlsZS4gIFRha2UgdGhlIGBvdXRwdXRgIGFyZ3VtZW50IGFzIHBhcmFtZXRlci5cblxuICAgICAgICA6cmV0dXJuIGdlbmVyYXRvcjogQ3JlYXRlZCBmaWxlKHMpLlxuICAgICAgICAiIiJcblxuICAgICAgICBtb25pdG9ycyA9IHNlbGYubW9uaXRvcnNcbiAgICAgICAgaWYgbm90IG1vbml0b3JzOlxuICAgICAgICAgICAgcmFpc2UgU2NyZWVuU2hvdEVycm9yKCJObyBtb25pdG9yIGZvdW5kLiIpXG5cbiAgICAgICAgaWYgbW9uID09IDA6XG4gICAgICAgICAgICAjIE9uZSBzY3JlZW4gc2hvdCBieSBtb25pdG9yXG4gICAgICAgICAgICBmb3IgaWR4LCBtb25pdG9yIGluIGVudW1lcmF0ZShtb25pdG9yc1sxOl0sIDEpOlxuICAgICAgICAgICAgICAgIGZuYW1lID0gb3V0cHV0LmZvcm1hdChtb249aWR4LCBkYXRlPWRhdGV0aW1lLm5vdygpLCAqKm1vbml0b3IpXG4gICAgICAgICAgICAgICAgaWYgY2FsbGFibGUoY2FsbGJhY2spOlxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhmbmFtZSlcbiAgICAgICAgICAgICAgICBzY3QgPSBzZWxmLmdyYWIobW9uaXRvcilcbiAgICAgICAgICAgICAgICB0b19wbmcoc2N0LnJnYiwgc2N0LnNpemUsIGxldmVsPXNlbGYuY29tcHJlc3Npb25fbGV2ZWwsIG91dHB1dD1mbmFtZSlcbiAgICAgICAgICAgICAgICB5aWVsZCBmbmFtZVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgIyBBIHNjcmVlbiBzaG90IG9mIGFsbCBtb25pdG9ycyB0b2dldGhlciBvclxuICAgICAgICAgICAgIyBhIHNjcmVlbiBzaG90IG9mIHRoZSBtb25pdG9yIE4uXG4gICAgICAgICAgICBtb24gPSAwIGlmIG1vbiA9PSAtMSBlbHNlIG1vblxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIG1vbml0b3IgPSBtb25pdG9yc1ttb25dXG4gICAgICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjpcbiAgICAgICAgICAgICAgICAjIHB5bGludDogZGlzYWJsZT1yYWlzZS1taXNzaW5nLWZyb21cbiAgICAgICAgICAgICAgICByYWlzZSBTY3JlZW5TaG90RXJyb3IoIk1vbml0b3IgeyFyfSBkb2VzIG5vdCBleGlzdC4iLmZvcm1hdChtb24pKVxuXG4gICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQuZm9ybWF0KG1vbj1tb24sIGRhdGU9ZGF0ZXRpbWUubm93KCksICoqbW9uaXRvcilcbiAgICAgICAgICAgIGlmIGNhbGxhYmxlKGNhbGxiYWNrKTpcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhvdXRwdXQpXG4gICAgICAgICAgICBzY3QgPSBzZWxmLmdyYWIobW9uaXRvcilcbiAgICAgICAgICAgIHRvX3BuZyhzY3QucmdiLCBzY3Quc2l6ZSwgbGV2ZWw9c2VsZi5jb21wcmVzc2lvbl9sZXZlbCwgb3V0cHV0PW91dHB1dClcbiAgICAgICAgICAgIHlpZWxkIG91dHB1dFxuXG4gICAgZGVmIHNob3Qoc2VsZiwgKiprd2FyZ3MpOlxuICAgICAgICAjIHR5cGU6IChBbnkpIC0+IHN0clxuICAgICAgICAiIiJcbiAgICAgICAgSGVscGVyIHRvIHNhdmUgdGhlIHNjcmVlbiBzaG90IG9mIHRoZSAxc3QgbW9uaXRvciwgYnkgZGVmYXVsdC5cbiAgICAgICAgWW91IGNhbiBwYXNzIHRoZSBzYW1lIGFyZ3VtZW50cyBhcyBmb3IgYGBzYXZlYGAuXG4gICAgICAgICIiIlxuXG4gICAgICAgIGt3YXJnc1sibW9uIl0gPSBrd2FyZ3MuZ2V0KCJtb24iLCAxKVxuICAgICAgICByZXR1cm4gbmV4dChzZWxmLnNhdmUoKiprd2FyZ3MpKVxuXG4gICAgQHN0YXRpY21ldGhvZFxuICAgIGRlZiBfY2ZhY3RvcnkoYXR0ciwgZnVuYywgYXJndHlwZXMsIHJlc3R5cGUsIGVycmNoZWNrPU5vbmUpOlxuICAgICAgICAjIHR5cGU6IChBbnksIHN0ciwgTGlzdFtBbnldLCBBbnksIE9wdGlvbmFsW0NhbGxhYmxlXSkgLT4gTm9uZVxuICAgICAgICAiIiIgRmFjdG9yeSB0byBjcmVhdGUgYSBjdHlwZXMgZnVuY3Rpb24gYW5kIGF1dG9tYXRpY2FsbHkgbWFuYWdlIGVycm9ycy4gIiIiXG5cbiAgICAgICAgbWV0aCA9IGdldGF0dHIoYXR0ciwgZnVuYylcbiAgICAgICAgbWV0aC5hcmd0eXBlcyA9IGFyZ3R5cGVzXG4gICAgICAgIG1ldGgucmVzdHlwZSA9IHJlc3R5cGVcbiAgICAgICAgaWYgZXJyY2hlY2s6XG4gICAgICAgICAgICBtZXRoLmVycmNoZWNrID0gZXJyY2hlY2tcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdtc3Mvc2NyZWVuc2hvdC5weScsIGInIiIiXG5UaGlzIGlzIHBhcnQgb2YgdGhlIE1TUyBQeXRob25cJ3MgbW9kdWxlLlxuU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vQm9ib1RpRy9weXRob24tbXNzXG4iIiJcblxuZnJvbSB0eXBpbmcgaW1wb3J0IFRZUEVfQ0hFQ0tJTkdcblxuZnJvbSAubW9kZWxzIGltcG9ydCBTaXplLCBQb3NcbmZyb20gLmV4Y2VwdGlvbiBpbXBvcnQgU2NyZWVuU2hvdEVycm9yXG5cbmlmIFRZUEVfQ0hFQ0tJTkc6XG4gICAgZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgRGljdCwgSXRlcmF0b3IsIE9wdGlvbmFsICAjIG5vcWFcblxuICAgIGZyb20gLm1vZGVscyBpbXBvcnQgTW9uaXRvciwgUGl4ZWwsIFBpeGVscyAgIyBub3FhXG5cblxuY2xhc3MgU2NyZWVuU2hvdDpcbiAgICAiIiJcbiAgICBTY3JlZW4gc2hvdCBvYmplY3QuXG5cbiAgICAuLiBub3RlOjpcblxuICAgICAgICBBIGJldHRlciBuYW1lIHdvdWxkIGhhdmUgIGJlZW4gKkltYWdlKiwgYnV0IHRvIHByZXZlbnQgY29sbGlzaW9uc1xuICAgICAgICB3aXRoIFBJTC5JbWFnZSwgaXQgaGFzIGJlZW4gZGVjaWRlZCB0byB1c2UgKlNjcmVlblNob3QqLlxuICAgICIiIlxuXG4gICAgX19zbG90c19fID0geyJfX3BpeGVscyIsICJfX3JnYiIsICJwb3MiLCAicmF3IiwgInNpemUifVxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGRhdGEsIG1vbml0b3IsIHNpemU9Tm9uZSk6XG4gICAgICAgICMgdHlwZTogKGJ5dGVhcnJheSwgTW9uaXRvciwgT3B0aW9uYWxbU2l6ZV0pIC0+IE5vbmVcblxuICAgICAgICBzZWxmLl9fcGl4ZWxzID0gTm9uZSAgIyB0eXBlOiBPcHRpb25hbFtQaXhlbHNdXG4gICAgICAgIHNlbGYuX19yZ2IgPSBOb25lICAjIHR5cGU6IE9wdGlvbmFsW2J5dGVzXVxuXG4gICAgICAgICM6IEJ5dGVhcnJheSBvZiB0aGUgcmF3IEJHUkEgcGl4ZWxzIHJldHJpZXZlZCBieSBjdHlwZXNcbiAgICAgICAgIzogT1MgaW5kZXBlbmRlbnQgaW1wbGVtZW50YXRpb25zLlxuICAgICAgICBzZWxmLnJhdyA9IGRhdGFcblxuICAgICAgICAjOiBOYW1lZFR1cGxlIG9mIHRoZSBzY3JlZW4gc2hvdCBjb29yZGluYXRlcy5cbiAgICAgICAgc2VsZi5wb3MgPSBQb3MobW9uaXRvclsibGVmdCJdLCBtb25pdG9yWyJ0b3AiXSlcblxuICAgICAgICBpZiBzaXplIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgIzogTmFtZWRUdXBsZSBvZiB0aGUgc2NyZWVuIHNob3Qgc2l6ZS5cbiAgICAgICAgICAgIHNlbGYuc2l6ZSA9IHNpemVcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHNlbGYuc2l6ZSA9IFNpemUobW9uaXRvclsid2lkdGgiXSwgbW9uaXRvclsiaGVpZ2h0Il0pXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAoIjx7IXN9IHBvcz17Y2xzLmxlZnR9LHtjbHMudG9wfSBzaXplPXtjbHMud2lkdGh9eHtjbHMuaGVpZ2h0fT4iKS5mb3JtYXQoXG4gICAgICAgICAgICB0eXBlKHNlbGYpLl9fbmFtZV9fLCBjbHM9c2VsZlxuICAgICAgICApXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgX19hcnJheV9pbnRlcmZhY2VfXyhzZWxmKTpcbiAgICAgICAgIyB0eXBlOiAoKSAtPiBEaWN0W3N0ciwgQW55XVxuICAgICAgICAiIiJcbiAgICAgICAgTnVtcHkgYXJyYXkgaW50ZXJmYWNlIHN1cHBvcnQuXG4gICAgICAgIEl0IHVzZXMgcmF3IGRhdGEgaW4gQkdSQSBmb3JtLlxuXG4gICAgICAgIFNlZSBodHRwczovL2RvY3Muc2NpcHkub3JnL2RvYy9udW1weS9yZWZlcmVuY2UvYXJyYXlzLmludGVyZmFjZS5odG1sXG4gICAgICAgICIiIlxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAidmVyc2lvbiI6IDMsXG4gICAgICAgICAgICAic2hhcGUiOiAoc2VsZi5oZWlnaHQsIHNlbGYud2lkdGgsIDQpLFxuICAgICAgICAgICAgInR5cGVzdHIiOiAifHUxIixcbiAgICAgICAgICAgICJkYXRhIjogc2VsZi5yYXcsXG4gICAgICAgIH1cblxuICAgIEBjbGFzc21ldGhvZFxuICAgIGRlZiBmcm9tX3NpemUoY2xzLCBkYXRhLCB3aWR0aCwgaGVpZ2h0KTpcbiAgICAgICAgIyB0eXBlOiAoYnl0ZWFycmF5LCBpbnQsIGludCkgLT4gU2NyZWVuU2hvdFxuICAgICAgICAiIiIgSW5zdGFudGlhdGUgYSBuZXcgY2xhc3MgZ2l2ZW4gb25seSBzY3JlZW4gc2hvdFwncyBkYXRhIGFuZCBzaXplLiAiIiJcblxuICAgICAgICBtb25pdG9yID0geyJsZWZ0IjogMCwgInRvcCI6IDAsICJ3aWR0aCI6IHdpZHRoLCAiaGVpZ2h0IjogaGVpZ2h0fVxuICAgICAgICByZXR1cm4gY2xzKGRhdGEsIG1vbml0b3IpXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgYmdyYShzZWxmKTpcbiAgICAgICAgIyB0eXBlOiAoKSAtPiBieXRlc1xuICAgICAgICAiIiIgQkdSQSB2YWx1ZXMgZnJvbSB0aGUgQkdSQSByYXcgcGl4ZWxzLiAiIiJcbiAgICAgICAgcmV0dXJuIGJ5dGVzKHNlbGYucmF3KVxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIGhlaWdodChzZWxmKTpcbiAgICAgICAgIyB0eXBlOiAoKSAtPiBpbnRcbiAgICAgICAgIiIiIENvbnZlbmllbnQgYWNjZXNzb3IgdG8gdGhlIGhlaWdodCBzaXplLiAiIiJcbiAgICAgICAgcmV0dXJuIHNlbGYuc2l6ZS5oZWlnaHRcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiBsZWZ0KHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IGludFxuICAgICAgICAiIiIgQ29udmVuaWVudCBhY2Nlc3NvciB0byB0aGUgbGVmdCBwb3NpdGlvbi4gIiIiXG4gICAgICAgIHJldHVybiBzZWxmLnBvcy5sZWZ0XG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgcGl4ZWxzKHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IFBpeGVsc1xuICAgICAgICAiIiJcbiAgICAgICAgOnJldHVybiBsaXN0OiBSR0IgdHVwbGVzLlxuICAgICAgICAiIiJcblxuICAgICAgICBpZiBub3Qgc2VsZi5fX3BpeGVsczpcbiAgICAgICAgICAgIHJnYl90dXBsZXMgPSB6aXAoXG4gICAgICAgICAgICAgICAgc2VsZi5yYXdbMjo6NF0sIHNlbGYucmF3WzE6OjRdLCBzZWxmLnJhd1swOjo0XVxuICAgICAgICAgICAgKSAgIyB0eXBlOiBJdGVyYXRvcltQaXhlbF1cbiAgICAgICAgICAgIHNlbGYuX19waXhlbHMgPSBsaXN0KHppcCgqW2l0ZXIocmdiX3R1cGxlcyldICogc2VsZi53aWR0aCkpICAjIHR5cGU6IGlnbm9yZVxuXG4gICAgICAgIHJldHVybiBzZWxmLl9fcGl4ZWxzXG5cbiAgICBAcHJvcGVydHlcbiAgICBkZWYgcmdiKHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IGJ5dGVzXG4gICAgICAgICIiIlxuICAgICAgICBDb21wdXRlIFJHQiB2YWx1ZXMgZnJvbSB0aGUgQkdSQSByYXcgcGl4ZWxzLlxuXG4gICAgICAgIDpyZXR1cm4gYnl0ZXM6IFJHQiBwaXhlbHMuXG4gICAgICAgICIiIlxuXG4gICAgICAgIGlmIG5vdCBzZWxmLl9fcmdiOlxuICAgICAgICAgICAgcmdiID0gYnl0ZWFycmF5KHNlbGYuaGVpZ2h0ICogc2VsZi53aWR0aCAqIDMpXG4gICAgICAgICAgICByYXcgPSBzZWxmLnJhd1xuICAgICAgICAgICAgcmdiWzA6OjNdID0gcmF3WzI6OjRdXG4gICAgICAgICAgICByZ2JbMTo6M10gPSByYXdbMTo6NF1cbiAgICAgICAgICAgIHJnYlsyOjozXSA9IHJhd1swOjo0XVxuICAgICAgICAgICAgc2VsZi5fX3JnYiA9IGJ5dGVzKHJnYilcblxuICAgICAgICByZXR1cm4gc2VsZi5fX3JnYlxuXG4gICAgQHByb3BlcnR5XG4gICAgZGVmIHRvcChzZWxmKTpcbiAgICAgICAgIyB0eXBlOiAoKSAtPiBpbnRcbiAgICAgICAgIiIiIENvbnZlbmllbnQgYWNjZXNzb3IgdG8gdGhlIHRvcCBwb3NpdGlvbi4gIiIiXG4gICAgICAgIHJldHVybiBzZWxmLnBvcy50b3BcblxuICAgIEBwcm9wZXJ0eVxuICAgIGRlZiB3aWR0aChzZWxmKTpcbiAgICAgICAgIyB0eXBlOiAoKSAtPiBpbnRcbiAgICAgICAgIiIiIENvbnZlbmllbnQgYWNjZXNzb3IgdG8gdGhlIHdpZHRoIHNpemUuICIiIlxuICAgICAgICByZXR1cm4gc2VsZi5zaXplLndpZHRoXG5cbiAgICBkZWYgcGl4ZWwoc2VsZiwgY29vcmRfeCwgY29vcmRfeSk6XG4gICAgICAgICMgdHlwZTogKGludCwgaW50KSAtPiBQaXhlbFxuICAgICAgICAiIiJcbiAgICAgICAgUmV0dXJucyB0aGUgcGl4ZWwgdmFsdWUgYXQgYSBnaXZlbiBwb3NpdGlvbi5cblxuICAgICAgICA6cGFyYW0gaW50IGNvb3JkX3g6IFRoZSB4IGNvb3JkaW5hdGUuXG4gICAgICAgIDpwYXJhbSBpbnQgY29vcmRfeTogVGhlIHkgY29vcmRpbmF0ZS5cbiAgICAgICAgOnJldHVybiB0dXBsZTogVGhlIHBpeGVsIHZhbHVlIGFzIChSLCBHLCBCKS5cbiAgICAgICAgIiIiXG5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYucGl4ZWxzW2Nvb3JkX3ldW2Nvb3JkX3hdICAjIHR5cGU6IGlnbm9yZVxuICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjpcbiAgICAgICAgICAgICMgcHlsaW50OiBkaXNhYmxlPXJhaXNlLW1pc3NpbmctZnJvbVxuICAgICAgICAgICAgcmFpc2UgU2NyZWVuU2hvdEVycm9yKFxuICAgICAgICAgICAgICAgICJQaXhlbCBsb2NhdGlvbiAoe30sIHt9KSBpcyBvdXQgb2YgcmFuZ2UuIi5mb3JtYXQoY29vcmRfeCwgY29vcmRfeSlcbiAgICAgICAgICAgIClcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdtc3MvbW9kZWxzLnB5JywgYiciIiJcblRoaXMgaXMgcGFydCBvZiB0aGUgTVNTIFB5dGhvblwncyBtb2R1bGUuXG5Tb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9Cb2JvVGlHL3B5dGhvbi1tc3NcbiIiIlxuXG5pbXBvcnQgY29sbGVjdGlvbnNcbmZyb20gdHlwaW5nIGltcG9ydCBEaWN0LCBMaXN0LCBUdXBsZVxuXG5cbk1vbml0b3IgPSBEaWN0W3N0ciwgaW50XVxuTW9uaXRvcnMgPSBMaXN0W01vbml0b3JdXG5cblBpeGVsID0gVHVwbGVbaW50LCBpbnQsIGludF1cblBpeGVscyA9IExpc3RbUGl4ZWxdXG5cblBvcyA9IGNvbGxlY3Rpb25zLm5hbWVkdHVwbGUoIlBvcyIsICJsZWZ0LCB0b3AiKVxuU2l6ZSA9IGNvbGxlY3Rpb25zLm5hbWVkdHVwbGUoIlNpemUiLCAid2lkdGgsIGhlaWdodCIpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnbXNzL3Rvb2xzLnB5JywgYiciIiJcblRoaXMgaXMgcGFydCBvZiB0aGUgTVNTIFB5dGhvblwncyBtb2R1bGUuXG5Tb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9Cb2JvVGlHL3B5dGhvbi1tc3NcbiIiIlxuXG5pbXBvcnQgb3NcbmltcG9ydCBzdHJ1Y3RcbmltcG9ydCB6bGliXG5mcm9tIHR5cGluZyBpbXBvcnQgVFlQRV9DSEVDS0lOR1xuXG5pZiBUWVBFX0NIRUNLSU5HOlxuICAgIGZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbCwgVHVwbGUgICMgbm9xYVxuXG5cbmRlZiB0b19wbmcoZGF0YSwgc2l6ZSwgbGV2ZWw9Niwgb3V0cHV0PU5vbmUpOlxuICAgICMgdHlwZTogKGJ5dGVzLCBUdXBsZVtpbnQsIGludF0sIGludCwgT3B0aW9uYWxbc3RyXSkgLT4gT3B0aW9uYWxbYnl0ZXNdXG4gICAgIiIiXG4gICAgRHVtcCBkYXRhIHRvIGEgUE5HIGZpbGUuICBJZiBgb3V0cHV0YCBpcyBgTm9uZWAsIGNyZWF0ZSBubyBmaWxlIGJ1dCByZXR1cm5cbiAgICB0aGUgd2hvbGUgUE5HIGRhdGEuXG5cbiAgICA6cGFyYW0gYnl0ZXMgZGF0YTogUkdCUkdCLi4uUkdCIGRhdGEuXG4gICAgOnBhcmFtIHR1cGxlIHNpemU6IFRoZSAod2lkdGgsIGhlaWdodCkgcGFpci5cbiAgICA6cGFyYW0gaW50IGxldmVsOiBQTkcgY29tcHJlc3Npb24gbGV2ZWwuXG4gICAgOnBhcmFtIHN0ciBvdXRwdXQ6IE91dHB1dCBmaWxlIG5hbWUuXG4gICAgIiIiXG4gICAgIyBweWxpbnQ6IGRpc2FibGU9dG9vLW1hbnktbG9jYWxzXG5cbiAgICBwYWNrID0gc3RydWN0LnBhY2tcbiAgICBjcmMzMiA9IHpsaWIuY3JjMzJcblxuICAgIHdpZHRoLCBoZWlnaHQgPSBzaXplXG4gICAgbGluZSA9IHdpZHRoICogM1xuICAgIHBuZ19maWx0ZXIgPSBwYWNrKCI+QiIsIDApXG4gICAgc2NhbmxpbmVzID0gYiIiLmpvaW4oXG4gICAgICAgIFtwbmdfZmlsdGVyICsgZGF0YVt5ICogbGluZSA6IHkgKiBsaW5lICsgbGluZV0gZm9yIHkgaW4gcmFuZ2UoaGVpZ2h0KV1cbiAgICApXG5cbiAgICBtYWdpYyA9IHBhY2soIj44QiIsIDEzNywgODAsIDc4LCA3MSwgMTMsIDEwLCAyNiwgMTApXG5cbiAgICAjIEhlYWRlcjogc2l6ZSwgbWFya2VyLCBkYXRhLCBDUkMzMlxuICAgIGloZHIgPSBbYiIiLCBiIklIRFIiLCBiIiIsIGIiIl1cbiAgICBpaGRyWzJdID0gcGFjaygiPjJJNUIiLCB3aWR0aCwgaGVpZ2h0LCA4LCAyLCAwLCAwLCAwKVxuICAgIGloZHJbM10gPSBwYWNrKCI+SSIsIGNyYzMyKGIiIi5qb2luKGloZHJbMTozXSkpICYgMHhGRkZGRkZGRilcbiAgICBpaGRyWzBdID0gcGFjaygiPkkiLCBsZW4oaWhkclsyXSkpXG5cbiAgICAjIERhdGE6IHNpemUsIG1hcmtlciwgZGF0YSwgQ1JDMzJcbiAgICBpZGF0ID0gW2IiIiwgYiJJREFUIiwgemxpYi5jb21wcmVzcyhzY2FubGluZXMsIGxldmVsKSwgYiIiXVxuICAgIGlkYXRbM10gPSBwYWNrKCI+SSIsIGNyYzMyKGIiIi5qb2luKGlkYXRbMTozXSkpICYgMHhGRkZGRkZGRilcbiAgICBpZGF0WzBdID0gcGFjaygiPkkiLCBsZW4oaWRhdFsyXSkpXG5cbiAgICAjIEZvb3Rlcjogc2l6ZSwgbWFya2VyLCBOb25lLCBDUkMzMlxuICAgIGllbmQgPSBbYiIiLCBiIklFTkQiLCBiIiIsIGIiIl1cbiAgICBpZW5kWzNdID0gcGFjaygiPkkiLCBjcmMzMihpZW5kWzFdKSAmIDB4RkZGRkZGRkYpXG4gICAgaWVuZFswXSA9IHBhY2soIj5JIiwgbGVuKGllbmRbMl0pKVxuXG4gICAgaWYgbm90IG91dHB1dDpcbiAgICAgICAgIyBSZXR1cm5zIHJhdyBieXRlcyBvZiB0aGUgd2hvbGUgUE5HIGRhdGFcbiAgICAgICAgcmV0dXJuIG1hZ2ljICsgYiIiLmpvaW4oaWhkciArIGlkYXQgKyBpZW5kKVxuXG4gICAgd2l0aCBvcGVuKG91dHB1dCwgIndiIikgYXMgZmlsZWg6XG4gICAgICAgIGZpbGVoLndyaXRlKG1hZ2ljKVxuICAgICAgICBmaWxlaC53cml0ZShiIiIuam9pbihpaGRyKSlcbiAgICAgICAgZmlsZWgud3JpdGUoYiIiLmpvaW4oaWRhdCkpXG4gICAgICAgIGZpbGVoLndyaXRlKGIiIi5qb2luKGllbmQpKVxuXG4gICAgICAgICMgRm9yY2Ugd3JpdGUgb2YgZmlsZSB0byBkaXNrXG4gICAgICAgIGZpbGVoLmZsdXNoKClcbiAgICAgICAgb3MuZnN5bmMoZmlsZWguZmlsZW5vKCkpXG5cbiAgICByZXR1cm4gTm9uZVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ21zcy9kYXJ3aW4ucHknLCBiJyIiIlxuVGhpcyBpcyBwYXJ0IG9mIHRoZSBNU1MgUHl0aG9uXCdzIG1vZHVsZS5cblNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL0JvYm9UaUcvcHl0aG9uLW1zc1xuIiIiXG5cbmltcG9ydCBjdHlwZXNcbmltcG9ydCBjdHlwZXMudXRpbFxuaW1wb3J0IHN5c1xuZnJvbSBjdHlwZXMgaW1wb3J0IChcbiAgICBQT0lOVEVSLFxuICAgIFN0cnVjdHVyZSxcbiAgICBjX2RvdWJsZSxcbiAgICBjX2Zsb2F0LFxuICAgIGNfaW50MzIsXG4gICAgY191aW50NjQsXG4gICAgY191Ynl0ZSxcbiAgICBjX3VpbnQzMixcbiAgICBjX3ZvaWRfcCxcbilcbmZyb20gcGxhdGZvcm0gaW1wb3J0IG1hY192ZXJcbmZyb20gdHlwaW5nIGltcG9ydCBUWVBFX0NIRUNLSU5HXG5cbmZyb20gLmJhc2UgaW1wb3J0IE1TU0Jhc2VcbmZyb20gLmV4Y2VwdGlvbiBpbXBvcnQgU2NyZWVuU2hvdEVycm9yXG5mcm9tIC5zY3JlZW5zaG90IGltcG9ydCBTaXplXG5cbmlmIFRZUEVfQ0hFQ0tJTkc6XG4gICAgZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgTGlzdCwgVHlwZSwgVW5pb24gICMgbm9xYVxuXG4gICAgZnJvbSAubW9kZWxzIGltcG9ydCBNb25pdG9yLCBNb25pdG9ycyAgIyBub3FhXG4gICAgZnJvbSAuc2NyZWVuc2hvdCBpbXBvcnQgU2NyZWVuU2hvdCAgIyBub3FhXG5cbl9fYWxsX18gPSAoIk1TUyIsKVxuXG5cbmRlZiBjZ2Zsb2F0KCk6XG4gICAgIyB0eXBlOiAoKSAtPiBVbmlvbltUeXBlW2NfZG91YmxlXSwgVHlwZVtjX2Zsb2F0XV1cbiAgICAiIiIgR2V0IHRoZSBhcHByb3ByaWF0ZSB2YWx1ZSBmb3IgYSBmbG9hdC4gIiIiXG5cbiAgICByZXR1cm4gY19kb3VibGUgaWYgc3lzLm1heHNpemUgPiAyICoqIDMyIGVsc2UgY19mbG9hdFxuXG5cbmNsYXNzIENHUG9pbnQoU3RydWN0dXJlKTpcbiAgICAiIiIgU3RydWN0dXJlIHRoYXQgY29udGFpbnMgY29vcmRpbmF0ZXMgb2YgYSByZWN0YW5nbGUuICIiIlxuXG4gICAgX2ZpZWxkc18gPSBbKCJ4IiwgY2dmbG9hdCgpKSwgKCJ5IiwgY2dmbG9hdCgpKV1cblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuICJ7fShsZWZ0PXt9IHRvcD17fSkiLmZvcm1hdCh0eXBlKHNlbGYpLl9fbmFtZV9fLCBzZWxmLngsIHNlbGYueSlcblxuXG5jbGFzcyBDR1NpemUoU3RydWN0dXJlKTpcbiAgICAiIiIgU3RydWN0dXJlIHRoYXQgY29udGFpbnMgZGltZW5zaW9ucyBvZiBhbiByZWN0YW5nbGUuICIiIlxuXG4gICAgX2ZpZWxkc18gPSBbKCJ3aWR0aCIsIGNnZmxvYXQoKSksICgiaGVpZ2h0IiwgY2dmbG9hdCgpKV1cblxuICAgIGRlZiBfX3JlcHJfXyhzZWxmKTpcbiAgICAgICAgcmV0dXJuICJ7fSh3aWR0aD17fSBoZWlnaHQ9e30pIi5mb3JtYXQoXG4gICAgICAgICAgICB0eXBlKHNlbGYpLl9fbmFtZV9fLCBzZWxmLndpZHRoLCBzZWxmLmhlaWdodFxuICAgICAgICApXG5cblxuY2xhc3MgQ0dSZWN0KFN0cnVjdHVyZSk6XG4gICAgIiIiIFN0cnVjdHVyZSB0aGF0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IGEgcmVjdGFuZ2xlLiAiIiJcblxuICAgIF9maWVsZHNfID0gWygib3JpZ2luIiwgQ0dQb2ludCksICgic2l6ZSIsIENHU2l6ZSldXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAie308e30ge30+Ii5mb3JtYXQodHlwZShzZWxmKS5fX25hbWVfXywgc2VsZi5vcmlnaW4sIHNlbGYuc2l6ZSlcblxuXG4jIEMgZnVuY3Rpb25zIHRoYXQgd2lsbCBiZSBpbml0aWFsaXNlZCBsYXRlci5cbiNcbiMgVGhpcyBpcyBhIGRpY3Q6XG4jICAgIGNmdW5jdGlvbjogKGF0dHIsIGFyZ3R5cGVzLCByZXN0eXBlKVxuI1xuIyBBdmFpbGFibGUgYXR0cjogY29yZS5cbiNcbiMgTm90ZToga2VlcCBpdCBzb3J0ZWQgYnkgY2Z1bmN0aW9uLlxuQ0ZVTkNUSU9OUyA9IHtcbiAgICAiQ0dEYXRhUHJvdmlkZXJDb3B5RGF0YSI6ICgiY29yZSIsIFtjX3ZvaWRfcF0sIGNfdm9pZF9wKSxcbiAgICAiQ0dEaXNwbGF5Qm91bmRzIjogKCJjb3JlIiwgW2NfdWludDMyXSwgQ0dSZWN0KSxcbiAgICAiQ0dEaXNwbGF5Um90YXRpb24iOiAoImNvcmUiLCBbY191aW50MzJdLCBjX2Zsb2F0KSxcbiAgICAiQ0ZEYXRhR2V0Qnl0ZVB0ciI6ICgiY29yZSIsIFtjX3ZvaWRfcF0sIGNfdm9pZF9wKSxcbiAgICAiQ0ZEYXRhR2V0TGVuZ3RoIjogKCJjb3JlIiwgW2Nfdm9pZF9wXSwgY191aW50NjQpLFxuICAgICJDRlJlbGVhc2UiOiAoImNvcmUiLCBbY192b2lkX3BdLCBjX3ZvaWRfcCksXG4gICAgIkNHRGF0YVByb3ZpZGVyUmVsZWFzZSI6ICgiY29yZSIsIFtjX3ZvaWRfcF0sIGNfdm9pZF9wKSxcbiAgICAiQ0dHZXRBY3RpdmVEaXNwbGF5TGlzdCI6IChcbiAgICAgICAgImNvcmUiLFxuICAgICAgICBbY191aW50MzIsIFBPSU5URVIoY191aW50MzIpLCBQT0lOVEVSKGNfdWludDMyKV0sXG4gICAgICAgIGNfaW50MzIsXG4gICAgKSxcbiAgICAiQ0dJbWFnZUdldEJpdHNQZXJQaXhlbCI6ICgiY29yZSIsIFtjX3ZvaWRfcF0sIGludCksXG4gICAgIkNHSW1hZ2VHZXRCeXRlc1BlclJvdyI6ICgiY29yZSIsIFtjX3ZvaWRfcF0sIGludCksXG4gICAgIkNHSW1hZ2VHZXREYXRhUHJvdmlkZXIiOiAoImNvcmUiLCBbY192b2lkX3BdLCBjX3ZvaWRfcCksXG4gICAgIkNHSW1hZ2VHZXRIZWlnaHQiOiAoImNvcmUiLCBbY192b2lkX3BdLCBpbnQpLFxuICAgICJDR0ltYWdlR2V0V2lkdGgiOiAoImNvcmUiLCBbY192b2lkX3BdLCBpbnQpLFxuICAgICJDR1JlY3RTdGFuZGFyZGl6ZSI6ICgiY29yZSIsIFtDR1JlY3RdLCBDR1JlY3QpLFxuICAgICJDR1JlY3RVbmlvbiI6ICgiY29yZSIsIFtDR1JlY3QsIENHUmVjdF0sIENHUmVjdCksXG4gICAgIkNHV2luZG93TGlzdENyZWF0ZUltYWdlIjogKFxuICAgICAgICAiY29yZSIsXG4gICAgICAgIFtDR1JlY3QsIGNfdWludDMyLCBjX3VpbnQzMiwgY191aW50MzJdLFxuICAgICAgICBjX3ZvaWRfcCxcbiAgICApLFxufVxuXG5cbmNsYXNzIE1TUyhNU1NCYXNlKTpcbiAgICAiIiJcbiAgICBNdWx0aXBsZSBTY3JlZW5TaG90cyBpbXBsZW1lbnRhdGlvbiBmb3IgbWFjT1MuXG4gICAgSXQgdXNlcyBpbnRlbnNpdmVseSB0aGUgQ29yZUdyYXBoaWNzIGxpYnJhcnkuXG4gICAgIiIiXG5cbiAgICBfX3Nsb3RzX18gPSB7ImNvcmUiLCAibWF4X2Rpc3BsYXlzIn1cblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqKl8pOlxuICAgICAgICAiIiIgbWFjT1MgaW5pdGlhbGlzYXRpb25zLiAiIiJcblxuICAgICAgICBzdXBlcigpLl9faW5pdF9fKClcblxuICAgICAgICBzZWxmLm1heF9kaXNwbGF5cyA9IDMyXG5cbiAgICAgICAgc2VsZi5faW5pdF9saWJyYXJ5KClcbiAgICAgICAgc2VsZi5fc2V0X2NmdW5jdGlvbnMoKVxuXG4gICAgZGVmIF9pbml0X2xpYnJhcnkoc2VsZik6XG4gICAgICAgICIiIiBMb2FkIHRoZSBDb3JlR3JhcGhpY3MgbGlicmFyeS4gIiIiXG4gICAgICAgIHZlcnNpb24gPSBmbG9hdCgiLiIuam9pbihtYWNfdmVyKClbMF0uc3BsaXQoIi4iKVs6Ml0pKVxuICAgICAgICBpZiB2ZXJzaW9uIDwgMTAuMTY6XG4gICAgICAgICAgICBjb3JlZ3JhcGhpY3MgPSBjdHlwZXMudXRpbC5maW5kX2xpYnJhcnkoIkNvcmVHcmFwaGljcyIpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICAjIG1hY09TIEJpZyBTdXIgYW5kIG5ld2VyXG4gICAgICAgICAgICAjIHB5bGludDogZGlzYWJsZT1saW5lLXRvby1sb25nXG4gICAgICAgICAgICBjb3JlZ3JhcGhpY3MgPSAiL1N5c3RlbS9MaWJyYXJ5L0ZyYW1ld29ya3MvQ29yZUdyYXBoaWNzLmZyYW1ld29yay9WZXJzaW9ucy9DdXJyZW50L0NvcmVHcmFwaGljcyJcblxuICAgICAgICBpZiBub3QgY29yZWdyYXBoaWNzOlxuICAgICAgICAgICAgcmFpc2UgU2NyZWVuU2hvdEVycm9yKCJObyBDb3JlR3JhcGhpY3MgbGlicmFyeSBmb3VuZC4iKVxuICAgICAgICBzZWxmLmNvcmUgPSBjdHlwZXMuY2RsbC5Mb2FkTGlicmFyeShjb3JlZ3JhcGhpY3MpXG5cbiAgICBkZWYgX3NldF9jZnVuY3Rpb25zKHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IE5vbmVcbiAgICAgICAgIiIiIFNldCBhbGwgY3R5cGVzIGZ1bmN0aW9ucyBhbmQgYXR0YWNoIHRoZW0gdG8gYXR0cmlidXRlcy4gIiIiXG5cbiAgICAgICAgY2ZhY3RvcnkgPSBzZWxmLl9jZmFjdG9yeVxuICAgICAgICBhdHRycyA9IHsiY29yZSI6IHNlbGYuY29yZX1cbiAgICAgICAgZm9yIGZ1bmMsIChhdHRyLCBhcmd0eXBlcywgcmVzdHlwZSkgaW4gQ0ZVTkNUSU9OUy5pdGVtcygpOlxuICAgICAgICAgICAgY2ZhY3RvcnkoXG4gICAgICAgICAgICAgICAgYXR0cj1hdHRyc1thdHRyXSxcbiAgICAgICAgICAgICAgICBmdW5jPWZ1bmMsXG4gICAgICAgICAgICAgICAgYXJndHlwZXM9YXJndHlwZXMsICAjIHR5cGU6IGlnbm9yZVxuICAgICAgICAgICAgICAgIHJlc3R5cGU9cmVzdHlwZSxcbiAgICAgICAgICAgIClcblxuICAgIGRlZiBfbW9uaXRvcnNfaW1wbChzZWxmKTpcbiAgICAgICAgIyB0eXBlOiAoKSAtPiBOb25lXG4gICAgICAgICIiIiBHZXQgcG9zaXRpb25zIG9mIG1vbml0b3JzLiBJdCB3aWxsIHBvcHVsYXRlIHNlbGYuX21vbml0b3JzLiAiIiJcblxuICAgICAgICBpbnRfID0gaW50XG4gICAgICAgIGNvcmUgPSBzZWxmLmNvcmVcblxuICAgICAgICAjIEFsbCBtb25pdG9yc1xuICAgICAgICAjIFdlIG5lZWQgdG8gdXBkYXRlIHRoZSB2YWx1ZSB3aXRoIGV2ZXJ5IHNpbmdsZSBtb25pdG9yIGZvdW5kXG4gICAgICAgICMgdXNpbmcgQ0dSZWN0VW5pb24uICBFbHNlIHdlIHdpbGwgZW5kIHdpdGggaW5maW5pdGUgdmFsdWVzLlxuICAgICAgICBhbGxfbW9uaXRvcnMgPSBDR1JlY3QoKVxuICAgICAgICBzZWxmLl9tb25pdG9ycy5hcHBlbmQoe30pXG5cbiAgICAgICAgIyBFYWNoIG1vbml0b3JzXG4gICAgICAgIGRpc3BsYXlfY291bnQgPSBjX3VpbnQzMigwKVxuICAgICAgICBhY3RpdmVfZGlzcGxheXMgPSAoY191aW50MzIgKiBzZWxmLm1heF9kaXNwbGF5cykoKVxuICAgICAgICBjb3JlLkNHR2V0QWN0aXZlRGlzcGxheUxpc3QoXG4gICAgICAgICAgICBzZWxmLm1heF9kaXNwbGF5cywgYWN0aXZlX2Rpc3BsYXlzLCBjdHlwZXMuYnlyZWYoZGlzcGxheV9jb3VudClcbiAgICAgICAgKVxuICAgICAgICByb3RhdGlvbnMgPSB7MC4wOiAibm9ybWFsIiwgOTAuMDogInJpZ2h0IiwgLTkwLjA6ICJsZWZ0In1cbiAgICAgICAgZm9yIGlkeCBpbiByYW5nZShkaXNwbGF5X2NvdW50LnZhbHVlKTpcbiAgICAgICAgICAgIGRpc3BsYXkgPSBhY3RpdmVfZGlzcGxheXNbaWR4XVxuICAgICAgICAgICAgcmVjdCA9IGNvcmUuQ0dEaXNwbGF5Qm91bmRzKGRpc3BsYXkpXG4gICAgICAgICAgICByZWN0ID0gY29yZS5DR1JlY3RTdGFuZGFyZGl6ZShyZWN0KVxuICAgICAgICAgICAgd2lkdGgsIGhlaWdodCA9IHJlY3Quc2l6ZS53aWR0aCwgcmVjdC5zaXplLmhlaWdodFxuICAgICAgICAgICAgcm90ID0gY29yZS5DR0Rpc3BsYXlSb3RhdGlvbihkaXNwbGF5KVxuICAgICAgICAgICAgaWYgcm90YXRpb25zW3JvdF0gaW4gWyJsZWZ0IiwgInJpZ2h0Il06XG4gICAgICAgICAgICAgICAgd2lkdGgsIGhlaWdodCA9IGhlaWdodCwgd2lkdGhcbiAgICAgICAgICAgIHNlbGYuX21vbml0b3JzLmFwcGVuZChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICJsZWZ0IjogaW50XyhyZWN0Lm9yaWdpbi54KSxcbiAgICAgICAgICAgICAgICAgICAgInRvcCI6IGludF8ocmVjdC5vcmlnaW4ueSksXG4gICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6IGludF8od2lkdGgpLFxuICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogaW50XyhoZWlnaHQpLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcblxuICAgICAgICAgICAgIyBVcGRhdGUgQWlPIG1vbml0b3JcJ3MgdmFsdWVzXG4gICAgICAgICAgICBhbGxfbW9uaXRvcnMgPSBjb3JlLkNHUmVjdFVuaW9uKGFsbF9tb25pdG9ycywgcmVjdClcblxuICAgICAgICAjIFNldCB0aGUgQWlPIG1vbml0b3JcJ3MgdmFsdWVzXG4gICAgICAgIHNlbGYuX21vbml0b3JzWzBdID0ge1xuICAgICAgICAgICAgImxlZnQiOiBpbnRfKGFsbF9tb25pdG9ycy5vcmlnaW4ueCksXG4gICAgICAgICAgICAidG9wIjogaW50XyhhbGxfbW9uaXRvcnMub3JpZ2luLnkpLFxuICAgICAgICAgICAgIndpZHRoIjogaW50XyhhbGxfbW9uaXRvcnMuc2l6ZS53aWR0aCksXG4gICAgICAgICAgICAiaGVpZ2h0IjogaW50XyhhbGxfbW9uaXRvcnMuc2l6ZS5oZWlnaHQpLFxuICAgICAgICB9XG5cbiAgICBkZWYgX2dyYWJfaW1wbChzZWxmLCBtb25pdG9yKTpcbiAgICAgICAgIyB0eXBlOiAoTW9uaXRvcikgLT4gU2NyZWVuU2hvdFxuICAgICAgICAiIiIgUmV0cmlldmUgYWxsIHBpeGVscyBmcm9tIGEgbW9uaXRvci4gUGl4ZWxzIGhhdmUgdG8gYmUgUkdCLiAiIiJcblxuICAgICAgICAjIHB5bGludDogZGlzYWJsZT10b28tbWFueS1sb2NhbHNcblxuICAgICAgICBjb3JlID0gc2VsZi5jb3JlXG4gICAgICAgIHJlY3QgPSBDR1JlY3QoXG4gICAgICAgICAgICAobW9uaXRvclsibGVmdCJdLCBtb25pdG9yWyJ0b3AiXSksIChtb25pdG9yWyJ3aWR0aCJdLCBtb25pdG9yWyJoZWlnaHQiXSlcbiAgICAgICAgKVxuXG4gICAgICAgIGltYWdlX3JlZiA9IGNvcmUuQ0dXaW5kb3dMaXN0Q3JlYXRlSW1hZ2UocmVjdCwgMSwgMCwgMClcbiAgICAgICAgaWYgbm90IGltYWdlX3JlZjpcbiAgICAgICAgICAgIHJhaXNlIFNjcmVlblNob3RFcnJvcigiQ29yZUdyYXBoaWNzLkNHV2luZG93TGlzdENyZWF0ZUltYWdlKCkgZmFpbGVkLiIpXG5cbiAgICAgICAgd2lkdGggPSBjb3JlLkNHSW1hZ2VHZXRXaWR0aChpbWFnZV9yZWYpXG4gICAgICAgIGhlaWdodCA9IGNvcmUuQ0dJbWFnZUdldEhlaWdodChpbWFnZV9yZWYpXG4gICAgICAgIHByb3YgPSBjb3B5X2RhdGEgPSBOb25lXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHByb3YgPSBjb3JlLkNHSW1hZ2VHZXREYXRhUHJvdmlkZXIoaW1hZ2VfcmVmKVxuICAgICAgICAgICAgY29weV9kYXRhID0gY29yZS5DR0RhdGFQcm92aWRlckNvcHlEYXRhKHByb3YpXG4gICAgICAgICAgICBkYXRhX3JlZiA9IGNvcmUuQ0ZEYXRhR2V0Qnl0ZVB0cihjb3B5X2RhdGEpXG4gICAgICAgICAgICBidWZfbGVuID0gY29yZS5DRkRhdGFHZXRMZW5ndGgoY29weV9kYXRhKVxuICAgICAgICAgICAgcmF3ID0gY3R5cGVzLmNhc3QoZGF0YV9yZWYsIFBPSU5URVIoY191Ynl0ZSAqIGJ1Zl9sZW4pKVxuICAgICAgICAgICAgZGF0YSA9IGJ5dGVhcnJheShyYXcuY29udGVudHMpXG5cbiAgICAgICAgICAgICMgUmVtb3ZlIHBhZGRpbmcgcGVyIHJvd1xuICAgICAgICAgICAgYnl0ZXNfcGVyX3JvdyA9IGNvcmUuQ0dJbWFnZUdldEJ5dGVzUGVyUm93KGltYWdlX3JlZilcbiAgICAgICAgICAgIGJ5dGVzX3Blcl9waXhlbCA9IGNvcmUuQ0dJbWFnZUdldEJpdHNQZXJQaXhlbChpbWFnZV9yZWYpXG4gICAgICAgICAgICBieXRlc19wZXJfcGl4ZWwgPSAoYnl0ZXNfcGVyX3BpeGVsICsgNykgLy8gOFxuXG4gICAgICAgICAgICBpZiBieXRlc19wZXJfcGl4ZWwgKiB3aWR0aCAhPSBieXRlc19wZXJfcm93OlxuICAgICAgICAgICAgICAgIGNyb3BwZWQgPSBieXRlYXJyYXkoKVxuICAgICAgICAgICAgICAgIGZvciByb3cgaW4gcmFuZ2UoaGVpZ2h0KTpcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSByb3cgKiBieXRlc19wZXJfcm93XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IHN0YXJ0ICsgd2lkdGggKiBieXRlc19wZXJfcGl4ZWxcbiAgICAgICAgICAgICAgICAgICAgY3JvcHBlZC5leHRlbmQoZGF0YVtzdGFydDplbmRdKVxuICAgICAgICAgICAgICAgIGRhdGEgPSBjcm9wcGVkXG4gICAgICAgIGZpbmFsbHk6XG4gICAgICAgICAgICBpZiBwcm92OlxuICAgICAgICAgICAgICAgIGNvcmUuQ0dEYXRhUHJvdmlkZXJSZWxlYXNlKHByb3YpXG4gICAgICAgICAgICBpZiBjb3B5X2RhdGE6XG4gICAgICAgICAgICAgICAgY29yZS5DRlJlbGVhc2UoY29weV9kYXRhKVxuXG4gICAgICAgIHJldHVybiBzZWxmLmNsc19pbWFnZShkYXRhLCBtb25pdG9yLCBzaXplPVNpemUod2lkdGgsIGhlaWdodCkpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnbXNzL2xpbnV4LnB5JywgYiciIiJcblRoaXMgaXMgcGFydCBvZiB0aGUgTVNTIFB5dGhvblwncyBtb2R1bGUuXG5Tb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9Cb2JvVGlHL3B5dGhvbi1tc3NcbiIiIlxuXG5pbXBvcnQgY3R5cGVzXG5pbXBvcnQgY3R5cGVzLnV0aWxcbmltcG9ydCBvc1xuaW1wb3J0IHRocmVhZGluZ1xuZnJvbSBjdHlwZXMgaW1wb3J0IChcbiAgICBQT0lOVEVSLFxuICAgIENGVU5DVFlQRSxcbiAgICBTdHJ1Y3R1cmUsXG4gICAgY19jaGFyX3AsXG4gICAgY19pbnQsXG4gICAgY19pbnQzMixcbiAgICBjX2xvbmcsXG4gICAgY191Ynl0ZSxcbiAgICBjX3VpbnQsXG4gICAgY191aW50MzIsXG4gICAgY191bG9uZyxcbiAgICBjX3VzaG9ydCxcbiAgICBjX3ZvaWRfcCxcbilcbmZyb20gdHlwZXMgaW1wb3J0IFNpbXBsZU5hbWVzcGFjZVxuZnJvbSB0eXBpbmcgaW1wb3J0IFRZUEVfQ0hFQ0tJTkdcblxuZnJvbSAuYmFzZSBpbXBvcnQgTVNTQmFzZSwgbG9ja1xuZnJvbSAuZXhjZXB0aW9uIGltcG9ydCBTY3JlZW5TaG90RXJyb3JcblxuaWYgVFlQRV9DSEVDS0lORzpcbiAgICBmcm9tIHR5cGluZyBpbXBvcnQgQW55LCBEaWN0LCBMaXN0LCBPcHRpb25hbCwgVHVwbGUsIFVuaW9uICAjIG5vcWFcblxuICAgIGZyb20gLm1vZGVscyBpbXBvcnQgTW9uaXRvciwgTW9uaXRvcnMgICMgbm9xYVxuICAgIGZyb20gLnNjcmVlbnNob3QgaW1wb3J0IFNjcmVlblNob3QgICMgbm9xYVxuXG5cbl9fYWxsX18gPSAoIk1TUyIsKVxuXG5cbkVSUk9SID0gU2ltcGxlTmFtZXNwYWNlKGRldGFpbHM9Tm9uZSlcblBMQUlOTUFTSyA9IDB4MDBGRkZGRkZcblpQSVhNQVAgPSAyXG5cblxuY2xhc3MgRGlzcGxheShTdHJ1Y3R1cmUpOlxuICAgICIiIlxuICAgIFN0cnVjdHVyZSB0aGF0IHNlcnZlcyBhcyB0aGUgY29ubmVjdGlvbiB0byB0aGUgWCBzZXJ2ZXJcbiAgICBhbmQgdGhhdCBjb250YWlucyBhbGwgdGhlIGluZm9ybWF0aW9uIGFib3V0IHRoYXQgWCBzZXJ2ZXIuXG4gICAgIiIiXG5cblxuY2xhc3MgRXZlbnQoU3RydWN0dXJlKTpcbiAgICAiIiJcbiAgICBYRXJyb3JFdmVudCB0byBkZWJ1ZyBldmVudHVhbCBlcnJvcnMuXG4gICAgaHR0cHM6Ly90cm9uY2hlLmNvbS9ndWkveC94bGliL2V2ZW50LWhhbmRsaW5nL3Byb3RvY29sLWVycm9ycy9kZWZhdWx0LWhhbmRsZXJzLmh0bWxcbiAgICAiIiJcblxuICAgIF9maWVsZHNfID0gW1xuICAgICAgICAoInR5cGUiLCBjX2ludCksXG4gICAgICAgICgiZGlzcGxheSIsIFBPSU5URVIoRGlzcGxheSkpLFxuICAgICAgICAoInNlcmlhbCIsIGNfdWxvbmcpLFxuICAgICAgICAoImVycm9yX2NvZGUiLCBjX3VieXRlKSxcbiAgICAgICAgKCJyZXF1ZXN0X2NvZGUiLCBjX3VieXRlKSxcbiAgICAgICAgKCJtaW5vcl9jb2RlIiwgY191Ynl0ZSksXG4gICAgICAgICgicmVzb3VyY2VpZCIsIGNfdm9pZF9wKSxcbiAgICBdXG5cblxuY2xhc3MgWFdpbmRvd0F0dHJpYnV0ZXMoU3RydWN0dXJlKTpcbiAgICAiIiIgQXR0cmlidXRlcyBmb3IgdGhlIHNwZWNpZmllZCB3aW5kb3cuICIiIlxuXG4gICAgX2ZpZWxkc18gPSBbXG4gICAgICAgICgieCIsIGNfaW50MzIpLFxuICAgICAgICAoInkiLCBjX2ludDMyKSxcbiAgICAgICAgKCJ3aWR0aCIsIGNfaW50MzIpLFxuICAgICAgICAoImhlaWdodCIsIGNfaW50MzIpLFxuICAgICAgICAoImJvcmRlcl93aWR0aCIsIGNfaW50MzIpLFxuICAgICAgICAoImRlcHRoIiwgY19pbnQzMiksXG4gICAgICAgICgidmlzdWFsIiwgY191bG9uZyksXG4gICAgICAgICgicm9vdCIsIGNfdWxvbmcpLFxuICAgICAgICAoImNsYXNzIiwgY19pbnQzMiksXG4gICAgICAgICgiYml0X2dyYXZpdHkiLCBjX2ludDMyKSxcbiAgICAgICAgKCJ3aW5fZ3Jhdml0eSIsIGNfaW50MzIpLFxuICAgICAgICAoImJhY2tpbmdfc3RvcmUiLCBjX2ludDMyKSxcbiAgICAgICAgKCJiYWNraW5nX3BsYW5lcyIsIGNfdWxvbmcpLFxuICAgICAgICAoImJhY2tpbmdfcGl4ZWwiLCBjX3Vsb25nKSxcbiAgICAgICAgKCJzYXZlX3VuZGVyIiwgY19pbnQzMiksXG4gICAgICAgICgiY29sb3VybWFwIiwgY191bG9uZyksXG4gICAgICAgICgibWFwaW5zdGFsbGVkIiwgY191aW50MzIpLFxuICAgICAgICAoIm1hcF9zdGF0ZSIsIGNfdWludDMyKSxcbiAgICAgICAgKCJhbGxfZXZlbnRfbWFza3MiLCBjX3Vsb25nKSxcbiAgICAgICAgKCJ5b3VyX2V2ZW50X21hc2siLCBjX3Vsb25nKSxcbiAgICAgICAgKCJkb19ub3RfcHJvcGFnYXRlX21hc2siLCBjX3Vsb25nKSxcbiAgICAgICAgKCJvdmVycmlkZV9yZWRpcmVjdCIsIGNfaW50MzIpLFxuICAgICAgICAoInNjcmVlbiIsIGNfdWxvbmcpLFxuICAgIF1cblxuXG5jbGFzcyBYSW1hZ2UoU3RydWN0dXJlKTpcbiAgICAiIiJcbiAgICBEZXNjcmlwdGlvbiBvZiBhbiBpbWFnZSBhcyBpdCBleGlzdHMgaW4gdGhlIGNsaWVudFwncyBtZW1vcnkuXG4gICAgaHR0cHM6Ly90cm9uY2hlLmNvbS9ndWkveC94bGliL2dyYXBoaWNzL2ltYWdlcy5odG1sXG4gICAgIiIiXG5cbiAgICBfZmllbGRzXyA9IFtcbiAgICAgICAgKCJ3aWR0aCIsIGNfaW50KSxcbiAgICAgICAgKCJoZWlnaHQiLCBjX2ludCksXG4gICAgICAgICgieG9mZnNldCIsIGNfaW50KSxcbiAgICAgICAgKCJmb3JtYXQiLCBjX2ludCksXG4gICAgICAgICgiZGF0YSIsIGNfdm9pZF9wKSxcbiAgICAgICAgKCJieXRlX29yZGVyIiwgY19pbnQpLFxuICAgICAgICAoImJpdG1hcF91bml0IiwgY19pbnQpLFxuICAgICAgICAoImJpdG1hcF9iaXRfb3JkZXIiLCBjX2ludCksXG4gICAgICAgICgiYml0bWFwX3BhZCIsIGNfaW50KSxcbiAgICAgICAgKCJkZXB0aCIsIGNfaW50KSxcbiAgICAgICAgKCJieXRlc19wZXJfbGluZSIsIGNfaW50KSxcbiAgICAgICAgKCJiaXRzX3Blcl9waXhlbCIsIGNfaW50KSxcbiAgICAgICAgKCJyZWRfbWFzayIsIGNfdWxvbmcpLFxuICAgICAgICAoImdyZWVuX21hc2siLCBjX3Vsb25nKSxcbiAgICAgICAgKCJibHVlX21hc2siLCBjX3Vsb25nKSxcbiAgICBdXG5cblxuY2xhc3MgWFJSTW9kZUluZm8oU3RydWN0dXJlKTpcbiAgICAiIiIgVm9pbFx4YzNceGEwLCB2b2lsXHhjM1x4YTAuICIiIlxuXG5cbmNsYXNzIFhSUlNjcmVlblJlc291cmNlcyhTdHJ1Y3R1cmUpOlxuICAgICIiIlxuICAgIFN0cnVjdHVyZSB0aGF0IGNvbnRhaW5zIGFycmF5cyBvZiBYSURzIHRoYXQgcG9pbnQgdG8gdGhlXG4gICAgYXZhaWxhYmxlIG91dHB1dHMgYW5kIGFzc29jaWF0ZWQgQ1JUQ3MuXG4gICAgIiIiXG5cbiAgICBfZmllbGRzXyA9IFtcbiAgICAgICAgKCJ0aW1lc3RhbXAiLCBjX3Vsb25nKSxcbiAgICAgICAgKCJjb25maWdUaW1lc3RhbXAiLCBjX3Vsb25nKSxcbiAgICAgICAgKCJuY3J0YyIsIGNfaW50KSxcbiAgICAgICAgKCJjcnRjcyIsIFBPSU5URVIoY19sb25nKSksXG4gICAgICAgICgibm91dHB1dCIsIGNfaW50KSxcbiAgICAgICAgKCJvdXRwdXRzIiwgUE9JTlRFUihjX2xvbmcpKSxcbiAgICAgICAgKCJubW9kZSIsIGNfaW50KSxcbiAgICAgICAgKCJtb2RlcyIsIFBPSU5URVIoWFJSTW9kZUluZm8pKSxcbiAgICBdXG5cblxuY2xhc3MgWFJSQ3J0Y0luZm8oU3RydWN0dXJlKTpcbiAgICAiIiIgU3RydWN0dXJlIHRoYXQgY29udGFpbnMgQ1JUQyBpbmZvcm1hdGlvbi4gIiIiXG5cbiAgICBfZmllbGRzXyA9IFtcbiAgICAgICAgKCJ0aW1lc3RhbXAiLCBjX3Vsb25nKSxcbiAgICAgICAgKCJ4IiwgY19pbnQpLFxuICAgICAgICAoInkiLCBjX2ludCksXG4gICAgICAgICgid2lkdGgiLCBjX2ludCksXG4gICAgICAgICgiaGVpZ2h0IiwgY19pbnQpLFxuICAgICAgICAoIm1vZGUiLCBjX2xvbmcpLFxuICAgICAgICAoInJvdGF0aW9uIiwgY19pbnQpLFxuICAgICAgICAoIm5vdXRwdXQiLCBjX2ludCksXG4gICAgICAgICgib3V0cHV0cyIsIFBPSU5URVIoY19sb25nKSksXG4gICAgICAgICgicm90YXRpb25zIiwgY191c2hvcnQpLFxuICAgICAgICAoIm5wb3NzaWJsZSIsIGNfaW50KSxcbiAgICAgICAgKCJwb3NzaWJsZSIsIFBPSU5URVIoY19sb25nKSksXG4gICAgXVxuXG5cbkBDRlVOQ1RZUEUoY19pbnQsIFBPSU5URVIoRGlzcGxheSksIFBPSU5URVIoRXZlbnQpKVxuZGVmIGVycm9yX2hhbmRsZXIoXywgZXZlbnQpOlxuICAgICMgdHlwZTogKEFueSwgQW55KSAtPiBpbnRcbiAgICAiIiIgU3BlY2lmaWVzIHRoZSBwcm9ncmFtXCdzIHN1cHBsaWVkIGVycm9yIGhhbmRsZXIuICIiIlxuXG4gICAgZXZ0ID0gZXZlbnQuY29udGVudHNcbiAgICBFUlJPUi5kZXRhaWxzID0ge1xuICAgICAgICAidHlwZSI6IGV2dC50eXBlLFxuICAgICAgICAic2VyaWFsIjogZXZ0LnNlcmlhbCxcbiAgICAgICAgImVycm9yX2NvZGUiOiBldnQuZXJyb3JfY29kZSxcbiAgICAgICAgInJlcXVlc3RfY29kZSI6IGV2dC5yZXF1ZXN0X2NvZGUsXG4gICAgICAgICJtaW5vcl9jb2RlIjogZXZ0Lm1pbm9yX2NvZGUsXG4gICAgfVxuICAgIHJldHVybiAwXG5cblxuZGVmIHZhbGlkYXRlKHJldHZhbCwgZnVuYywgYXJncyk6XG4gICAgIyB0eXBlOiAoaW50LCBBbnksIFR1cGxlW0FueSwgQW55XSkgLT4gT3B0aW9uYWxbVHVwbGVbQW55LCBBbnldXVxuICAgICIiIiBWYWxpZGF0ZSB0aGUgcmV0dXJuZWQgdmFsdWUgb2YgYSBYbGliIG9yIFhSQU5EUiBmdW5jdGlvbi4gIiIiXG5cbiAgICBpZiByZXR2YWwgIT0gMCBhbmQgbm90IEVSUk9SLmRldGFpbHM6XG4gICAgICAgIHJldHVybiBhcmdzXG5cbiAgICBlcnIgPSAie30oKSBmYWlsZWQiLmZvcm1hdChmdW5jLl9fbmFtZV9fKVxuICAgIGRldGFpbHMgPSB7InJldHZhbCI6IHJldHZhbCwgImFyZ3MiOiBhcmdzfVxuICAgIHJhaXNlIFNjcmVlblNob3RFcnJvcihlcnIsIGRldGFpbHM9ZGV0YWlscylcblxuXG4jIEMgZnVuY3Rpb25zIHRoYXQgd2lsbCBiZSBpbml0aWFsaXNlZCBsYXRlci5cbiMgU2VlIGh0dHBzOi8vdHJvbmNoZS5jb20vZ3VpL3gveGxpYi9mdW5jdGlvbi1pbmRleC5odG1sIGZvciBkZXRhaWxzLlxuI1xuIyBUaGlzIGlzIGEgZGljdDpcbiMgICAgY2Z1bmN0aW9uOiAoYXR0ciwgYXJndHlwZXMsIHJlc3R5cGUpXG4jXG4jIEF2YWlsYWJsZSBhdHRyOiB4bGliLCB4cmFuZHIuXG4jXG4jIE5vdGU6IGtlZXAgaXQgc29ydGVkIGJ5IGNmdW5jdGlvbi5cbkNGVU5DVElPTlMgPSB7XG4gICAgIlhEZWZhdWx0Um9vdFdpbmRvdyI6ICgieGxpYiIsIFtQT0lOVEVSKERpc3BsYXkpXSwgUE9JTlRFUihYV2luZG93QXR0cmlidXRlcykpLFxuICAgICJYRGVzdHJveUltYWdlIjogKCJ4bGliIiwgW1BPSU5URVIoWEltYWdlKV0sIGNfdm9pZF9wKSxcbiAgICAiWEdldEVycm9yVGV4dCI6ICgieGxpYiIsIFtQT0lOVEVSKERpc3BsYXkpLCBjX2ludCwgY19jaGFyX3AsIGNfaW50XSwgY192b2lkX3ApLFxuICAgICJYR2V0SW1hZ2UiOiAoXG4gICAgICAgICJ4bGliIixcbiAgICAgICAgW1xuICAgICAgICAgICAgUE9JTlRFUihEaXNwbGF5KSxcbiAgICAgICAgICAgIFBPSU5URVIoRGlzcGxheSksXG4gICAgICAgICAgICBjX2ludCxcbiAgICAgICAgICAgIGNfaW50LFxuICAgICAgICAgICAgY191aW50LFxuICAgICAgICAgICAgY191aW50LFxuICAgICAgICAgICAgY191bG9uZyxcbiAgICAgICAgICAgIGNfaW50LFxuICAgICAgICBdLFxuICAgICAgICBQT0lOVEVSKFhJbWFnZSksXG4gICAgKSxcbiAgICAiWEdldFdpbmRvd0F0dHJpYnV0ZXMiOiAoXG4gICAgICAgICJ4bGliIixcbiAgICAgICAgW1BPSU5URVIoRGlzcGxheSksIFBPSU5URVIoWFdpbmRvd0F0dHJpYnV0ZXMpLCBQT0lOVEVSKFhXaW5kb3dBdHRyaWJ1dGVzKV0sXG4gICAgICAgIGNfaW50LFxuICAgICksXG4gICAgIlhPcGVuRGlzcGxheSI6ICgieGxpYiIsIFtjX2NoYXJfcF0sIFBPSU5URVIoRGlzcGxheSkpLFxuICAgICJYUXVlcnlFeHRlbnNpb24iOiAoXG4gICAgICAgICJ4bGliIixcbiAgICAgICAgW1xuICAgICAgICAgICAgUE9JTlRFUihEaXNwbGF5KSxcbiAgICAgICAgICAgIGNfY2hhcl9wLFxuICAgICAgICAgICAgUE9JTlRFUihjX2ludCksXG4gICAgICAgICAgICBQT0lOVEVSKGNfaW50KSxcbiAgICAgICAgICAgIFBPSU5URVIoY19pbnQpLFxuICAgICAgICBdLFxuICAgICAgICBjX3VpbnQsXG4gICAgKSxcbiAgICAiWFJSRnJlZUNydGNJbmZvIjogKCJ4cmFuZHIiLCBbUE9JTlRFUihYUlJDcnRjSW5mbyldLCBjX3ZvaWRfcCksXG4gICAgIlhSUkZyZWVTY3JlZW5SZXNvdXJjZXMiOiAoInhyYW5kciIsIFtQT0lOVEVSKFhSUlNjcmVlblJlc291cmNlcyldLCBjX3ZvaWRfcCksXG4gICAgIlhSUkdldENydGNJbmZvIjogKFxuICAgICAgICAieHJhbmRyIixcbiAgICAgICAgW1BPSU5URVIoRGlzcGxheSksIFBPSU5URVIoWFJSU2NyZWVuUmVzb3VyY2VzKSwgY19sb25nXSxcbiAgICAgICAgUE9JTlRFUihYUlJDcnRjSW5mbyksXG4gICAgKSxcbiAgICAiWFJSR2V0U2NyZWVuUmVzb3VyY2VzIjogKFxuICAgICAgICAieHJhbmRyIixcbiAgICAgICAgW1BPSU5URVIoRGlzcGxheSksIFBPSU5URVIoRGlzcGxheSldLFxuICAgICAgICBQT0lOVEVSKFhSUlNjcmVlblJlc291cmNlcyksXG4gICAgKSxcbiAgICAiWFJSR2V0U2NyZWVuUmVzb3VyY2VzQ3VycmVudCI6IChcbiAgICAgICAgInhyYW5kciIsXG4gICAgICAgIFtQT0lOVEVSKERpc3BsYXkpLCBQT0lOVEVSKERpc3BsYXkpXSxcbiAgICAgICAgUE9JTlRFUihYUlJTY3JlZW5SZXNvdXJjZXMpLFxuICAgICksXG4gICAgIlhTZXRFcnJvckhhbmRsZXIiOiAoInhsaWIiLCBbY192b2lkX3BdLCBjX2ludCksXG59XG5cblxuY2xhc3MgTVNTKE1TU0Jhc2UpOlxuICAgICIiIlxuICAgIE11bHRpcGxlIFNjcmVlblNob3RzIGltcGxlbWVudGF0aW9uIGZvciBHTlUvTGludXguXG4gICAgSXQgdXNlcyBpbnRlbnNpdmVseSB0aGUgWGxpYiBhbmQgaXRzIFhyYW5kciBleHRlbnNpb24uXG4gICAgIiIiXG5cbiAgICBfX3Nsb3RzX18gPSB7ImRyYXdhYmxlIiwgInJvb3QiLCAieGxpYiIsICJ4cmFuZHIifVxuXG4gICAgIyBBIGRpY3QgdG8gbWFpbnRhaW4gKmRpc3BsYXkqIHZhbHVlcyBjcmVhdGVkIGJ5IG11bHRpcGxlIHRocmVhZHMuXG4gICAgX2Rpc3BsYXlfZGljdCA9IHt9ICAjIHR5cGU6IERpY3RbdGhyZWFkaW5nLlRocmVhZCwgaW50XVxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGRpc3BsYXk9Tm9uZSk6XG4gICAgICAgICMgdHlwZTogKE9wdGlvbmFsW1VuaW9uW2J5dGVzLCBzdHJdXSkgLT4gTm9uZVxuICAgICAgICAiIiIgR05VL0xpbnV4IGluaXRpYWxpc2F0aW9ucy4gIiIiXG5cbiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpXG5cbiAgICAgICAgaWYgbm90IGRpc3BsYXk6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgZGlzcGxheSA9IG9zLmVudmlyb25bIkRJU1BMQVkiXS5lbmNvZGUoInV0Zi04IilcbiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpcbiAgICAgICAgICAgICAgICAjIHB5bGludDogZGlzYWJsZT1yYWlzZS1taXNzaW5nLWZyb21cbiAgICAgICAgICAgICAgICByYWlzZSBTY3JlZW5TaG90RXJyb3IoIiRESVNQTEFZIG5vdCBzZXQuIilcblxuICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShkaXNwbGF5LCBieXRlcyk6XG4gICAgICAgICAgICBkaXNwbGF5ID0gZGlzcGxheS5lbmNvZGUoInV0Zi04IilcblxuICAgICAgICBpZiBiIjoiIG5vdCBpbiBkaXNwbGF5OlxuICAgICAgICAgICAgcmFpc2UgU2NyZWVuU2hvdEVycm9yKCJCYWQgZGlzcGxheSB2YWx1ZTogeyFyfS4iLmZvcm1hdChkaXNwbGF5KSlcblxuICAgICAgICB4MTEgPSBjdHlwZXMudXRpbC5maW5kX2xpYnJhcnkoIlgxMSIpXG4gICAgICAgIGlmIG5vdCB4MTE6XG4gICAgICAgICAgICByYWlzZSBTY3JlZW5TaG90RXJyb3IoIk5vIFgxMSBsaWJyYXJ5IGZvdW5kLiIpXG4gICAgICAgIHNlbGYueGxpYiA9IGN0eXBlcy5jZGxsLkxvYWRMaWJyYXJ5KHgxMSlcblxuICAgICAgICAjIEluc3RhbGwgdGhlIGVycm9yIGhhbmRsZXIgdG8gcHJldmVudCBpbnRlcnByZXRlciBjcmFzaGVzOlxuICAgICAgICAjIGFueSBlcnJvciB3aWxsIHJhaXNlIGEgU2NyZWVuU2hvdEVycm9yIGV4Y2VwdGlvbi5cbiAgICAgICAgc2VsZi54bGliLlhTZXRFcnJvckhhbmRsZXIoZXJyb3JfaGFuZGxlcilcblxuICAgICAgICB4cmFuZHIgPSBjdHlwZXMudXRpbC5maW5kX2xpYnJhcnkoIlhyYW5kciIpXG4gICAgICAgIGlmIG5vdCB4cmFuZHI6XG4gICAgICAgICAgICByYWlzZSBTY3JlZW5TaG90RXJyb3IoIk5vIFhyYW5kciBleHRlbnNpb24gZm91bmQuIilcbiAgICAgICAgc2VsZi54cmFuZHIgPSBjdHlwZXMuY2RsbC5Mb2FkTGlicmFyeSh4cmFuZHIpXG5cbiAgICAgICAgc2VsZi5fc2V0X2NmdW5jdGlvbnMoKVxuXG4gICAgICAgIHNlbGYucm9vdCA9IHNlbGYueGxpYi5YRGVmYXVsdFJvb3RXaW5kb3coc2VsZi5fZ2V0X2Rpc3BsYXkoZGlzcGxheSkpXG5cbiAgICAgICAgaWYgbm90IHNlbGYuaGFzX2V4dGVuc2lvbigiUkFORFIiKTpcbiAgICAgICAgICAgIHJhaXNlIFNjcmVlblNob3RFcnJvcigiTm8gWHJhbmRyIGV4dGVuc2lvbiBmb3VuZC4iKVxuXG4gICAgICAgICMgRml4IGZvciBYUlJHZXRTY3JlZW5SZXNvdXJjZXMgYW5kIFhHZXRJbWFnZTpcbiAgICAgICAgIyAgICAgZXhwZWN0ZWQgTFBfRGlzcGxheSBpbnN0YW5jZSBpbnN0ZWFkIG9mIExQX1hXaW5kb3dBdHRyaWJ1dGVzXG4gICAgICAgIHNlbGYuZHJhd2FibGUgPSBjdHlwZXMuY2FzdChzZWxmLnJvb3QsIFBPSU5URVIoRGlzcGxheSkpXG5cbiAgICBkZWYgaGFzX2V4dGVuc2lvbihzZWxmLCBleHRlbnNpb24pOlxuICAgICAgICAjIHR5cGU6IChzdHIpIC0+IGJvb2xcbiAgICAgICAgIiIiUmV0dXJuIFRydWUgaWYgdGhlIGdpdmVuICpleHRlbnNpb24qIGlzIHBhcnQgb2YgdGhlIGV4dGVuc2lvbnMgbGlzdCBvZiB0aGUgc2VydmVyLiIiIlxuICAgICAgICB3aXRoIGxvY2s6XG4gICAgICAgICAgICBtYWpvcl9vcGNvZGVfcmV0dXJuID0gY19pbnQoKVxuICAgICAgICAgICAgZmlyc3RfZXZlbnRfcmV0dXJuID0gY19pbnQoKVxuICAgICAgICAgICAgZmlyc3RfZXJyb3JfcmV0dXJuID0gY19pbnQoKVxuXG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgc2VsZi54bGliLlhRdWVyeUV4dGVuc2lvbihcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZ2V0X2Rpc3BsYXkoKSxcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uLmVuY29kZSgibGF0aW4xIiksXG4gICAgICAgICAgICAgICAgICAgIGN0eXBlcy5ieXJlZihtYWpvcl9vcGNvZGVfcmV0dXJuKSxcbiAgICAgICAgICAgICAgICAgICAgY3R5cGVzLmJ5cmVmKGZpcnN0X2V2ZW50X3JldHVybiksXG4gICAgICAgICAgICAgICAgICAgIGN0eXBlcy5ieXJlZihmaXJzdF9lcnJvcl9yZXR1cm4pLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIGV4Y2VwdCBTY3JlZW5TaG90RXJyb3I6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIHJldHVybiBUcnVlXG5cbiAgICBkZWYgX2dldF9kaXNwbGF5KHNlbGYsIGRpc3A9Tm9uZSk6XG4gICAgICAgICIiIlxuICAgICAgICBSZXRyaWV2ZSBhIHRocmVhZC1zYWZlIGRpc3BsYXkgZnJvbSBYT3BlbkRpc3BsYXkoKS5cbiAgICAgICAgSW4gbXVsdGl0aHJlYWRpbmcsIGlmIHRoZSB0aHJlYWQgd2hvIGNyZWF0ZXMgKmRpc3BsYXkqIGlzIGRlYWQsICpkaXNwbGF5KiB3aWxsXG4gICAgICAgIG5vIGxvbmdlciBiZSB2YWxpZCB0byBncmFiIHRoZSBzY3JlZW4uIFRoZSAqZGlzcGxheSogYXR0cmlidXRlIGlzIHJlcGxhY2VkXG4gICAgICAgIHdpdGggKl9kaXNwbGF5X2RpY3QqIHRvIG1haW50YWluIHRoZSAqZGlzcGxheSogdmFsdWVzIGluIG11bHRpdGhyZWFkaW5nLlxuICAgICAgICBTaW5jZSB0aGUgY3VycmVudCB0aHJlYWQgYW5kIG1haW4gdGhyZWFkIGFyZSBhbHdheXMgYWxpdmUsIHJldXNlIHRoZWlyXG4gICAgICAgICpkaXNwbGF5KiB2YWx1ZSBmaXJzdC5cbiAgICAgICAgIiIiXG4gICAgICAgIGN1cl90aHJlYWQsIG1haW5fdGhyZWFkID0gdGhyZWFkaW5nLmN1cnJlbnRfdGhyZWFkKCksIHRocmVhZGluZy5tYWluX3RocmVhZCgpXG4gICAgICAgIGRpc3BsYXkgPSBNU1MuX2Rpc3BsYXlfZGljdC5nZXQoY3VyX3RocmVhZCkgb3IgTVNTLl9kaXNwbGF5X2RpY3QuZ2V0KFxuICAgICAgICAgICAgbWFpbl90aHJlYWRcbiAgICAgICAgKVxuICAgICAgICBpZiBub3QgZGlzcGxheTpcbiAgICAgICAgICAgIGRpc3BsYXkgPSBNU1MuX2Rpc3BsYXlfZGljdFtjdXJfdGhyZWFkXSA9IHNlbGYueGxpYi5YT3BlbkRpc3BsYXkoZGlzcClcbiAgICAgICAgcmV0dXJuIGRpc3BsYXlcblxuICAgIGRlZiBfc2V0X2NmdW5jdGlvbnMoc2VsZik6XG4gICAgICAgICIiIiBTZXQgYWxsIGN0eXBlcyBmdW5jdGlvbnMgYW5kIGF0dGFjaCB0aGVtIHRvIGF0dHJpYnV0ZXMuICIiIlxuXG4gICAgICAgIGNmYWN0b3J5ID0gc2VsZi5fY2ZhY3RvcnlcbiAgICAgICAgYXR0cnMgPSB7XG4gICAgICAgICAgICAieGxpYiI6IHNlbGYueGxpYixcbiAgICAgICAgICAgICJ4cmFuZHIiOiBzZWxmLnhyYW5kcixcbiAgICAgICAgfVxuICAgICAgICBmb3IgZnVuYywgKGF0dHIsIGFyZ3R5cGVzLCByZXN0eXBlKSBpbiBDRlVOQ1RJT05TLml0ZW1zKCk6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgY2ZhY3RvcnkoXG4gICAgICAgICAgICAgICAgICAgIGF0dHI9YXR0cnNbYXR0cl0sXG4gICAgICAgICAgICAgICAgICAgIGVycmNoZWNrPXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBmdW5jPWZ1bmMsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3R5cGVzPWFyZ3R5cGVzLFxuICAgICAgICAgICAgICAgICAgICByZXN0eXBlPXJlc3R5cGUsXG4gICAgICAgICAgICAgICAgKSAgIyB0eXBlOiBpZ25vcmVcbiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjpcbiAgICAgICAgICAgICAgICBwYXNzXG5cbiAgICBkZWYgZ2V0X2Vycm9yX2RldGFpbHMoc2VsZik6XG4gICAgICAgICMgdHlwZTogKCkgLT4gT3B0aW9uYWxbRGljdFtzdHIsIEFueV1dXG4gICAgICAgICIiIiBHZXQgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbGF0ZXN0IFggc2VydmVyIGVycm9yLiAiIiJcblxuICAgICAgICBkZXRhaWxzID0ge30gICMgdHlwZTogRGljdFtzdHIsIEFueV1cblxuICAgICAgICBpZiBFUlJPUi5kZXRhaWxzOlxuICAgICAgICAgICAgZGV0YWlscyA9IHsieGVycm9yX2RldGFpbHMiOiBFUlJPUi5kZXRhaWxzfVxuICAgICAgICAgICAgRVJST1IuZGV0YWlscyA9IE5vbmVcbiAgICAgICAgICAgIHhzZXJ2ZXJfZXJyb3IgPSBjdHlwZXMuY3JlYXRlX3N0cmluZ19idWZmZXIoMTAyNClcbiAgICAgICAgICAgIHNlbGYueGxpYi5YR2V0RXJyb3JUZXh0KFxuICAgICAgICAgICAgICAgIHNlbGYuX2dldF9kaXNwbGF5KCksXG4gICAgICAgICAgICAgICAgZGV0YWlscy5nZXQoInhlcnJvcl9kZXRhaWxzIiwge30pLmdldCgiZXJyb3JfY29kZSIsIDApLFxuICAgICAgICAgICAgICAgIHhzZXJ2ZXJfZXJyb3IsXG4gICAgICAgICAgICAgICAgbGVuKHhzZXJ2ZXJfZXJyb3IpLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgeGVycm9yID0geHNlcnZlcl9lcnJvci52YWx1ZS5kZWNvZGUoInV0Zi04IilcbiAgICAgICAgICAgIGlmIHhlcnJvciAhPSAiMCI6XG4gICAgICAgICAgICAgICAgZGV0YWlsc1sieGVycm9yIl0gPSB4ZXJyb3JcblxuICAgICAgICByZXR1cm4gZGV0YWlsc1xuXG4gICAgZGVmIF9tb25pdG9yc19pbXBsKHNlbGYpOlxuICAgICAgICAjIHR5cGU6ICgpIC0+IE5vbmVcbiAgICAgICAgIiIiIEdldCBwb3NpdGlvbnMgb2YgbW9uaXRvcnMuIEl0IHdpbGwgcG9wdWxhdGUgc2VsZi5fbW9uaXRvcnMuICIiIlxuXG4gICAgICAgIGRpc3BsYXkgPSBzZWxmLl9nZXRfZGlzcGxheSgpXG4gICAgICAgIGludF8gPSBpbnRcbiAgICAgICAgeHJhbmRyID0gc2VsZi54cmFuZHJcblxuICAgICAgICAjIEFsbCBtb25pdG9yc1xuICAgICAgICBnd2EgPSBYV2luZG93QXR0cmlidXRlcygpXG4gICAgICAgIHNlbGYueGxpYi5YR2V0V2luZG93QXR0cmlidXRlcyhkaXNwbGF5LCBzZWxmLnJvb3QsIGN0eXBlcy5ieXJlZihnd2EpKVxuICAgICAgICBzZWxmLl9tb25pdG9ycy5hcHBlbmQoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgImxlZnQiOiBpbnRfKGd3YS54KSxcbiAgICAgICAgICAgICAgICAidG9wIjogaW50Xyhnd2EueSksXG4gICAgICAgICAgICAgICAgIndpZHRoIjogaW50Xyhnd2Eud2lkdGgpLFxuICAgICAgICAgICAgICAgICJoZWlnaHQiOiBpbnRfKGd3YS5oZWlnaHQpLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG5cbiAgICAgICAgIyBFYWNoIG1vbml0b3JzXG4gICAgICAgICMgQSBzaW1wbGUgYmVuY2htYXJrIGNhbGxpbmcgMTAgdGltZXMgdGhvc2UgMiBmdW5jdGlvbnM6XG4gICAgICAgICMgWFJSR2V0U2NyZWVuUmVzb3VyY2VzKCk6ICAgICAgICAwLjE3NTU5NzE0Mjk5NTY4NDQgc1xuICAgICAgICAjIFhSUkdldFNjcmVlblJlc291cmNlc0N1cnJlbnQoKTogMC4wMDM5MTI1NTgwMDc4Njg5IHNcbiAgICAgICAgIyBUaGUgc2Vjb25kIGlzIGZhc3RlciBieSBhIGZhY3RvciBvZiA0NCEgU28gdHJ5IHRvIHVzZSBpdCBmaXJzdC5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgbW9uID0geHJhbmRyLlhSUkdldFNjcmVlblJlc291cmNlc0N1cnJlbnQoZGlzcGxheSwgc2VsZi5kcmF3YWJsZSkuY29udGVudHNcbiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgbW9uID0geHJhbmRyLlhSUkdldFNjcmVlblJlc291cmNlcyhkaXNwbGF5LCBzZWxmLmRyYXdhYmxlKS5jb250ZW50c1xuXG4gICAgICAgIGNydGNzID0gbW9uLmNydGNzXG4gICAgICAgIGZvciBpZHggaW4gcmFuZ2UobW9uLm5jcnRjKTpcbiAgICAgICAgICAgIGNydGMgPSB4cmFuZHIuWFJSR2V0Q3J0Y0luZm8oZGlzcGxheSwgbW9uLCBjcnRjc1tpZHhdKS5jb250ZW50c1xuICAgICAgICAgICAgaWYgY3J0Yy5ub3V0cHV0ID09IDA6XG4gICAgICAgICAgICAgICAgeHJhbmRyLlhSUkZyZWVDcnRjSW5mbyhjcnRjKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgICAgIHNlbGYuX21vbml0b3JzLmFwcGVuZChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICJsZWZ0IjogaW50XyhjcnRjLngpLFxuICAgICAgICAgICAgICAgICAgICAidG9wIjogaW50XyhjcnRjLnkpLFxuICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiBpbnRfKGNydGMud2lkdGgpLFxuICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IjogaW50XyhjcnRjLmhlaWdodCksXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgeHJhbmRyLlhSUkZyZWVDcnRjSW5mbyhjcnRjKVxuICAgICAgICB4cmFuZHIuWFJSRnJlZVNjcmVlblJlc291cmNlcyhtb24pXG5cbiAgICBkZWYgX2dyYWJfaW1wbChzZWxmLCBtb25pdG9yKTpcbiAgICAgICAgIyB0eXBlOiAoTW9uaXRvcikgLT4gU2NyZWVuU2hvdFxuICAgICAgICAiIiIgUmV0cmlldmUgYWxsIHBpeGVscyBmcm9tIGEgbW9uaXRvci4gUGl4ZWxzIGhhdmUgdG8gYmUgUkdCLiAiIiJcblxuICAgICAgICB4aW1hZ2UgPSBzZWxmLnhsaWIuWEdldEltYWdlKFxuICAgICAgICAgICAgc2VsZi5fZ2V0X2Rpc3BsYXkoKSxcbiAgICAgICAgICAgIHNlbGYuZHJhd2FibGUsXG4gICAgICAgICAgICBtb25pdG9yWyJsZWZ0Il0sXG4gICAgICAgICAgICBtb25pdG9yWyJ0b3AiXSxcbiAgICAgICAgICAgIG1vbml0b3JbIndpZHRoIl0sXG4gICAgICAgICAgICBtb25pdG9yWyJoZWlnaHQiXSxcbiAgICAgICAgICAgIFBMQUlOTUFTSyxcbiAgICAgICAgICAgIFpQSVhNQVAsXG4gICAgICAgIClcblxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBiaXRzX3Blcl9waXhlbCA9IHhpbWFnZS5jb250ZW50cy5iaXRzX3Blcl9waXhlbFxuICAgICAgICAgICAgaWYgYml0c19wZXJfcGl4ZWwgIT0gMzI6XG4gICAgICAgICAgICAgICAgcmFpc2UgU2NyZWVuU2hvdEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAiW1hJbWFnZV0gYml0cyBwZXIgcGl4ZWwgdmFsdWUgbm90ICh5ZXQ/KSBpbXBsZW1lbnRlZDoge30uIi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgICAgICBiaXRzX3Blcl9waXhlbFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICByYXdfZGF0YSA9IGN0eXBlcy5jYXN0KFxuICAgICAgICAgICAgICAgIHhpbWFnZS5jb250ZW50cy5kYXRhLFxuICAgICAgICAgICAgICAgIFBPSU5URVIoY191Ynl0ZSAqIG1vbml0b3JbImhlaWdodCJdICogbW9uaXRvclsid2lkdGgiXSAqIDQpLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgZGF0YSA9IGJ5dGVhcnJheShyYXdfZGF0YS5jb250ZW50cylcbiAgICAgICAgZmluYWxseTpcbiAgICAgICAgICAgICMgRnJlZVxuICAgICAgICAgICAgc2VsZi54bGliLlhEZXN0cm95SW1hZ2UoeGltYWdlKVxuXG4gICAgICAgIHJldHVybiBzZWxmLmNsc19pbWFnZShkYXRhLCBtb25pdG9yKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ21zcy93aW5kb3dzLnB5JywgYiciIiJcblRoaXMgaXMgcGFydCBvZiB0aGUgTVNTIFB5dGhvblwncyBtb2R1bGUuXG5Tb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9Cb2JvVGlHL3B5dGhvbi1tc3NcbiIiIlxuXG5pbXBvcnQgc3lzXG5pbXBvcnQgY3R5cGVzXG5pbXBvcnQgdGhyZWFkaW5nXG5mcm9tIGN0eXBlcyBpbXBvcnQgUE9JTlRFUiwgU3RydWN0dXJlLCBXSU5GVU5DVFlQRSwgY192b2lkX3BcbmZyb20gY3R5cGVzLndpbnR5cGVzIGltcG9ydCAoXG4gICAgQk9PTCxcbiAgICBET1VCTEUsXG4gICAgRFdPUkQsXG4gICAgSEJJVE1BUCxcbiAgICBIREMsXG4gICAgSEdESU9CSixcbiAgICBIV05ELFxuICAgIElOVCxcbiAgICBMT05HLFxuICAgIExQQVJBTSxcbiAgICBSRUNULFxuICAgIFVJTlQsXG4gICAgV09SRCxcbilcbmZyb20gdHlwaW5nIGltcG9ydCBUWVBFX0NIRUNLSU5HXG5cbmZyb20gLmJhc2UgaW1wb3J0IE1TU0Jhc2VcbmZyb20gLmV4Y2VwdGlvbiBpbXBvcnQgU2NyZWVuU2hvdEVycm9yXG5cbmlmIFRZUEVfQ0hFQ0tJTkc6XG4gICAgZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgRGljdCAgIyBub3FhXG5cbiAgICBmcm9tIC5tb2RlbHMgaW1wb3J0IE1vbml0b3IsIE1vbml0b3JzICAjIG5vcWFcbiAgICBmcm9tIC5zY3JlZW5zaG90IGltcG9ydCBTY3JlZW5TaG90ICAjIG5vcWFcblxuX19hbGxfXyA9ICgiTVNTIiwpXG5cblxuQ0FQVFVSRUJMVCA9IDB4NDAwMDAwMDBcbkRJQl9SR0JfQ09MT1JTID0gMFxuU1JDQ09QWSA9IDB4MDBDQzAwMjBcblxuXG5jbGFzcyBCSVRNQVBJTkZPSEVBREVSKFN0cnVjdHVyZSk6XG4gICAgIiIiIEluZm9ybWF0aW9uIGFib3V0IHRoZSBkaW1lbnNpb25zIGFuZCBjb2xvciBmb3JtYXQgb2YgYSBESUIuICIiIlxuXG4gICAgX2ZpZWxkc18gPSBbXG4gICAgICAgICgiYmlTaXplIiwgRFdPUkQpLFxuICAgICAgICAoImJpV2lkdGgiLCBMT05HKSxcbiAgICAgICAgKCJiaUhlaWdodCIsIExPTkcpLFxuICAgICAgICAoImJpUGxhbmVzIiwgV09SRCksXG4gICAgICAgICgiYmlCaXRDb3VudCIsIFdPUkQpLFxuICAgICAgICAoImJpQ29tcHJlc3Npb24iLCBEV09SRCksXG4gICAgICAgICgiYmlTaXplSW1hZ2UiLCBEV09SRCksXG4gICAgICAgICgiYmlYUGVsc1Blck1ldGVyIiwgTE9ORyksXG4gICAgICAgICgiYmlZUGVsc1Blck1ldGVyIiwgTE9ORyksXG4gICAgICAgICgiYmlDbHJVc2VkIiwgRFdPUkQpLFxuICAgICAgICAoImJpQ2xySW1wb3J0YW50IiwgRFdPUkQpLFxuICAgIF1cblxuXG5jbGFzcyBCSVRNQVBJTkZPKFN0cnVjdHVyZSk6XG4gICAgIiIiXG4gICAgU3RydWN0dXJlIHRoYXQgZGVmaW5lcyB0aGUgZGltZW5zaW9ucyBhbmQgY29sb3IgaW5mb3JtYXRpb24gZm9yIGEgRElCLlxuICAgICIiIlxuXG4gICAgX2ZpZWxkc18gPSBbKCJibWlIZWFkZXIiLCBCSVRNQVBJTkZPSEVBREVSKSwgKCJibWlDb2xvcnMiLCBEV09SRCAqIDMpXVxuXG5cbk1PTklUT1JOVU1QUk9DID0gV0lORlVOQ1RZUEUoSU5ULCBEV09SRCwgRFdPUkQsIFBPSU5URVIoUkVDVCksIERPVUJMRSlcblxuXG4jIEMgZnVuY3Rpb25zIHRoYXQgd2lsbCBiZSBpbml0aWFsaXNlZCBsYXRlci5cbiNcbiMgVGhpcyBpcyBhIGRpY3Q6XG4jICAgIGNmdW5jdGlvbjogKGF0dHIsIGFyZ3R5cGVzLCByZXN0eXBlKVxuI1xuIyBBdmFpbGFibGUgYXR0cjogZ2RpMzIsIHVzZXIzMi5cbiNcbiMgTm90ZToga2VlcCBpdCBzb3J0ZWQgYnkgY2Z1bmN0aW9uLlxuQ0ZVTkNUSU9OUyA9IHtcbiAgICAiQml0Qmx0IjogKCJnZGkzMiIsIFtIREMsIElOVCwgSU5ULCBJTlQsIElOVCwgSERDLCBJTlQsIElOVCwgRFdPUkRdLCBCT09MKSxcbiAgICAiQ3JlYXRlQ29tcGF0aWJsZUJpdG1hcCI6ICgiZ2RpMzIiLCBbSERDLCBJTlQsIElOVF0sIEhCSVRNQVApLFxuICAgICJDcmVhdGVDb21wYXRpYmxlREMiOiAoImdkaTMyIiwgW0hEQ10sIEhEQyksXG4gICAgIkRlbGV0ZU9iamVjdCI6ICgiZ2RpMzIiLCBbSEdESU9CSl0sIElOVCksXG4gICAgIkVudW1EaXNwbGF5TW9uaXRvcnMiOiAoInVzZXIzMiIsIFtIREMsIGNfdm9pZF9wLCBNT05JVE9STlVNUFJPQywgTFBBUkFNXSwgQk9PTCksXG4gICAgIkdldERldmljZUNhcHMiOiAoImdkaTMyIiwgW0hXTkQsIElOVF0sIElOVCksXG4gICAgIkdldERJQml0cyI6IChcbiAgICAgICAgImdkaTMyIixcbiAgICAgICAgW0hEQywgSEJJVE1BUCwgVUlOVCwgVUlOVCwgY192b2lkX3AsIFBPSU5URVIoQklUTUFQSU5GTyksIFVJTlRdLFxuICAgICAgICBCT09MLFxuICAgICksXG4gICAgIkdldFN5c3RlbU1ldHJpY3MiOiAoInVzZXIzMiIsIFtJTlRdLCBJTlQpLFxuICAgICJHZXRXaW5kb3dEQyI6ICgidXNlcjMyIiwgW0hXTkRdLCBIREMpLFxuICAgICJTZWxlY3RPYmplY3QiOiAoImdkaTMyIiwgW0hEQywgSEdESU9CSl0sIEhHRElPQkopLFxufVxuXG5cbmNsYXNzIE1TUyhNU1NCYXNlKTpcbiAgICAiIiIgTXVsdGlwbGUgU2NyZWVuU2hvdHMgaW1wbGVtZW50YXRpb24gZm9yIE1pY3Jvc29mdCBXaW5kb3dzLiAiIiJcblxuICAgIF9fc2xvdHNfXyA9IHsiX2Jib3giLCAiX2JtaSIsICJfZGF0YSIsICJnZGkzMiIsICJ1c2VyMzIifVxuXG4gICAgIyBDbGFzcyBhdHRyaWJ1dGVzIGluc3RhbmNlZCBvbmUgdGltZSB0byBwcmV2ZW50IHJlc291cmNlIGxlYWtzLlxuICAgIGJtcCA9IE5vbmVcbiAgICBtZW1kYyA9IE5vbmVcblxuICAgICMgQSBkaWN0IHRvIG1haW50YWluICpzcmNkYyogdmFsdWVzIGNyZWF0ZWQgYnkgbXVsdGlwbGUgdGhyZWFkcy5cbiAgICBfc3JjZGNfZGljdCA9IHt9ICAjIHR5cGU6IERpY3RbdGhyZWFkaW5nLlRocmVhZCwgaW50XVxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsICoqXyk6XG4gICAgICAgICMgdHlwZTogKEFueSkgLT4gTm9uZVxuICAgICAgICAiIiIgV2luZG93cyBpbml0aWFsaXNhdGlvbnMuICIiIlxuXG4gICAgICAgIHN1cGVyKCkuX19pbml0X18oKVxuXG4gICAgICAgIHNlbGYudXNlcjMyID0gY3R5cGVzLldpbkRMTCgidXNlcjMyIilcbiAgICAgICAgc2VsZi5nZGkzMiA9IGN0eXBlcy5XaW5ETEwoImdkaTMyIilcbiAgICAgICAgc2VsZi5fc2V0X2NmdW5jdGlvbnMoKVxuICAgICAgICBzZWxmLl9zZXRfZHBpX2F3YXJlbmVzcygpXG5cbiAgICAgICAgc2VsZi5fYmJveCA9IHsiaGVpZ2h0IjogMCwgIndpZHRoIjogMH1cbiAgICAgICAgc2VsZi5fZGF0YSA9IGN0eXBlcy5jcmVhdGVfc3RyaW5nX2J1ZmZlcigwKSAgIyB0eXBlOiBjdHlwZXMuQXJyYXlbY3R5cGVzLmNfY2hhcl1cblxuICAgICAgICBzcmNkYyA9IHNlbGYuX2dldF9zcmNkYygpXG4gICAgICAgIGlmIG5vdCBNU1MubWVtZGM6XG4gICAgICAgICAgICBNU1MubWVtZGMgPSBzZWxmLmdkaTMyLkNyZWF0ZUNvbXBhdGlibGVEQyhzcmNkYylcblxuICAgICAgICBibWkgPSBCSVRNQVBJTkZPKClcbiAgICAgICAgYm1pLmJtaUhlYWRlci5iaVNpemUgPSBjdHlwZXMuc2l6ZW9mKEJJVE1BUElORk9IRUFERVIpXG4gICAgICAgIGJtaS5ibWlIZWFkZXIuYmlQbGFuZXMgPSAxICAjIEFsd2F5cyAxXG4gICAgICAgIGJtaS5ibWlIZWFkZXIuYmlCaXRDb3VudCA9IDMyICAjIFNlZSBncmFiLl9fZG9jX18gWzJdXG4gICAgICAgIGJtaS5ibWlIZWFkZXIuYmlDb21wcmVzc2lvbiA9IDAgICMgMCA9IEJJX1JHQiAobm8gY29tcHJlc3Npb24pXG4gICAgICAgIGJtaS5ibWlIZWFkZXIuYmlDbHJVc2VkID0gMCAgIyBTZWUgZ3JhYi5fX2RvY19fIFszXVxuICAgICAgICBibWkuYm1pSGVhZGVyLmJpQ2xySW1wb3J0YW50ID0gMCAgIyBTZWUgZ3JhYi5fX2RvY19fIFszXVxuICAgICAgICBzZWxmLl9ibWkgPSBibWlcblxuICAgIGRlZiBfc2V0X2NmdW5jdGlvbnMoc2VsZik6XG4gICAgICAgICIiIiBTZXQgYWxsIGN0eXBlcyBmdW5jdGlvbnMgYW5kIGF0dGFjaCB0aGVtIHRvIGF0dHJpYnV0ZXMuICIiIlxuXG4gICAgICAgIGNmYWN0b3J5ID0gc2VsZi5fY2ZhY3RvcnlcbiAgICAgICAgYXR0cnMgPSB7XG4gICAgICAgICAgICAiZ2RpMzIiOiBzZWxmLmdkaTMyLFxuICAgICAgICAgICAgInVzZXIzMiI6IHNlbGYudXNlcjMyLFxuICAgICAgICB9XG4gICAgICAgIGZvciBmdW5jLCAoYXR0ciwgYXJndHlwZXMsIHJlc3R5cGUpIGluIENGVU5DVElPTlMuaXRlbXMoKTpcbiAgICAgICAgICAgIGNmYWN0b3J5KFxuICAgICAgICAgICAgICAgIGF0dHI9YXR0cnNbYXR0cl0sXG4gICAgICAgICAgICAgICAgZnVuYz1mdW5jLFxuICAgICAgICAgICAgICAgIGFyZ3R5cGVzPWFyZ3R5cGVzLFxuICAgICAgICAgICAgICAgIHJlc3R5cGU9cmVzdHlwZSxcbiAgICAgICAgICAgICkgICMgdHlwZTogaWdub3JlXG5cbiAgICBkZWYgX3NldF9kcGlfYXdhcmVuZXNzKHNlbGYpOlxuICAgICAgICAiIiIgU2V0IERQSSBhd2FyZSB0byBjYXB0dXJlIGZ1bGwgc2NyZWVuIG9uIEhpLURQSSBtb25pdG9ycy4gIiIiXG5cbiAgICAgICAgdmVyc2lvbiA9IHN5cy5nZXR3aW5kb3dzdmVyc2lvbigpWzoyXSAgIyBweWxpbnQ6IGRpc2FibGU9bm8tbWVtYmVyXG4gICAgICAgIGlmIHZlcnNpb24gPj0gKDYsIDMpOlxuICAgICAgICAgICAgIyBXaW5kb3dzIDguMStcbiAgICAgICAgICAgICMgSGVyZSAyID0gUFJPQ0VTU19QRVJfTU9OSVRPUl9EUElfQVdBUkUsIHdoaWNoIG1lYW5zOlxuICAgICAgICAgICAgIyAgICAgcGVyIG1vbml0b3IgRFBJIGF3YXJlLiBUaGlzIGFwcCBjaGVja3MgZm9yIHRoZSBEUEkgd2hlbiBpdCBpc1xuICAgICAgICAgICAgIyAgICAgY3JlYXRlZCBhbmQgYWRqdXN0cyB0aGUgc2NhbGUgZmFjdG9yIHdoZW5ldmVyIHRoZSBEUEkgY2hhbmdlcy5cbiAgICAgICAgICAgICMgICAgIFRoZXNlIGFwcGxpY2F0aW9ucyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgc2NhbGVkIGJ5IHRoZSBzeXN0ZW0uXG4gICAgICAgICAgICBjdHlwZXMud2luZGxsLnNoY29yZS5TZXRQcm9jZXNzRHBpQXdhcmVuZXNzKDIpXG4gICAgICAgIGVsaWYgKDYsIDApIDw9IHZlcnNpb24gPCAoNiwgMyk6XG4gICAgICAgICAgICAjIFdpbmRvd3MgVmlzdGEsIDcsIDggYW5kIFNlcnZlciAyMDEyXG4gICAgICAgICAgICBzZWxmLnVzZXIzMi5TZXRQcm9jZXNzRFBJQXdhcmUoKVxuXG4gICAgZGVmIF9nZXRfc3JjZGMoc2VsZik6XG4gICAgICAgICIiIlxuICAgICAgICBSZXRyaWV2ZSBhIHRocmVhZC1zYWZlIEhEQyBmcm9tIEdldFdpbmRvd0RDKCkuXG4gICAgICAgIEluIG11bHRpdGhyZWFkaW5nLCBpZiB0aGUgdGhyZWFkIHdobyBjcmVhdGVzICpzcmNkYyogaXMgZGVhZCwgKnNyY2RjKiB3aWxsXG4gICAgICAgIG5vIGxvbmdlciBiZSB2YWxpZCB0byBncmFiIHRoZSBzY3JlZW4uIFRoZSAqc3JjZGMqIGF0dHJpYnV0ZSBpcyByZXBsYWNlZFxuICAgICAgICB3aXRoICpfc3JjZGNfZGljdCogdG8gbWFpbnRhaW4gdGhlICpzcmNkYyogdmFsdWVzIGluIG11bHRpdGhyZWFkaW5nLlxuICAgICAgICBTaW5jZSB0aGUgY3VycmVudCB0aHJlYWQgYW5kIG1haW4gdGhyZWFkIGFyZSBhbHdheXMgYWxpdmUsIHJldXNlIHRoZWlyICpzcmNkYyogdmFsdWUgZmlyc3QuXG4gICAgICAgICIiIlxuICAgICAgICBjdXJfdGhyZWFkLCBtYWluX3RocmVhZCA9IHRocmVhZGluZy5jdXJyZW50X3RocmVhZCgpLCB0aHJlYWRpbmcubWFpbl90aHJlYWQoKVxuICAgICAgICBzcmNkYyA9IE1TUy5fc3JjZGNfZGljdC5nZXQoY3VyX3RocmVhZCkgb3IgTVNTLl9zcmNkY19kaWN0LmdldChtYWluX3RocmVhZClcbiAgICAgICAgaWYgbm90IHNyY2RjOlxuICAgICAgICAgICAgc3JjZGMgPSBNU1MuX3NyY2RjX2RpY3RbY3VyX3RocmVhZF0gPSBzZWxmLnVzZXIzMi5HZXRXaW5kb3dEQygwKVxuICAgICAgICByZXR1cm4gc3JjZGNcblxuICAgIGRlZiBfbW9uaXRvcnNfaW1wbChzZWxmKTpcbiAgICAgICAgIyB0eXBlOiAoKSAtPiBOb25lXG4gICAgICAgICIiIiBHZXQgcG9zaXRpb25zIG9mIG1vbml0b3JzLiBJdCB3aWxsIHBvcHVsYXRlIHNlbGYuX21vbml0b3JzLiAiIiJcblxuICAgICAgICBpbnRfID0gaW50XG4gICAgICAgIHVzZXIzMiA9IHNlbGYudXNlcjMyXG4gICAgICAgIGdldF9zeXN0ZW1fbWV0cmljcyA9IHVzZXIzMi5HZXRTeXN0ZW1NZXRyaWNzXG5cbiAgICAgICAgIyBBbGwgbW9uaXRvcnNcbiAgICAgICAgc2VsZi5fbW9uaXRvcnMuYXBwZW5kKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICJsZWZ0IjogaW50XyhnZXRfc3lzdGVtX21ldHJpY3MoNzYpKSwgICMgU01fWFZJUlRVQUxTQ1JFRU5cbiAgICAgICAgICAgICAgICAidG9wIjogaW50XyhnZXRfc3lzdGVtX21ldHJpY3MoNzcpKSwgICMgU01fWVZJUlRVQUxTQ1JFRU5cbiAgICAgICAgICAgICAgICAid2lkdGgiOiBpbnRfKGdldF9zeXN0ZW1fbWV0cmljcyg3OCkpLCAgIyBTTV9DWFZJUlRVQUxTQ1JFRU5cbiAgICAgICAgICAgICAgICAiaGVpZ2h0IjogaW50XyhnZXRfc3lzdGVtX21ldHJpY3MoNzkpKSwgICMgU01fQ1lWSVJUVUFMU0NSRUVOXG4gICAgICAgICAgICB9XG4gICAgICAgIClcblxuICAgICAgICAjIEVhY2ggbW9uaXRvcnNcbiAgICAgICAgZGVmIF9jYWxsYmFjayhtb25pdG9yLCBkYXRhLCByZWN0LCBkY18pOlxuICAgICAgICAgICAgIyB0eXBlczogKGludCwgSERDLCBMUFJFQ1QsIExQQVJBTSkgLT4gaW50XG4gICAgICAgICAgICAiIiJcbiAgICAgICAgICAgIENhbGxiYWNrIGZvciBtb25pdG9yZW51bXByb2MoKSBmdW5jdGlvbiwgaXQgd2lsbCByZXR1cm5cbiAgICAgICAgICAgIGEgUkVDVCB3aXRoIGFwcHJvcHJpYXRlIHZhbHVlcy5cbiAgICAgICAgICAgICIiIlxuICAgICAgICAgICAgIyBweWxpbnQ6IGRpc2FibGU9dW51c2VkLWFyZ3VtZW50XG5cbiAgICAgICAgICAgIHJjdCA9IHJlY3QuY29udGVudHNcbiAgICAgICAgICAgIHNlbGYuX21vbml0b3JzLmFwcGVuZChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICJsZWZ0IjogaW50XyhyY3QubGVmdCksXG4gICAgICAgICAgICAgICAgICAgICJ0b3AiOiBpbnRfKHJjdC50b3ApLFxuICAgICAgICAgICAgICAgICAgICAid2lkdGgiOiBpbnRfKHJjdC5yaWdodCAtIHJjdC5sZWZ0KSxcbiAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6IGludF8ocmN0LmJvdHRvbSAtIHJjdC50b3ApLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiAxXG5cbiAgICAgICAgY2FsbGJhY2sgPSBNT05JVE9STlVNUFJPQyhfY2FsbGJhY2spXG4gICAgICAgIHVzZXIzMi5FbnVtRGlzcGxheU1vbml0b3JzKDAsIDAsIGNhbGxiYWNrLCAwKVxuXG4gICAgZGVmIF9ncmFiX2ltcGwoc2VsZiwgbW9uaXRvcik6XG4gICAgICAgICMgdHlwZTogKE1vbml0b3IpIC0+IFNjcmVlblNob3RcbiAgICAgICAgIiIiXG4gICAgICAgIFJldHJpZXZlIGFsbCBwaXhlbHMgZnJvbSBhIG1vbml0b3IuIFBpeGVscyBoYXZlIHRvIGJlIFJHQi5cblxuICAgICAgICBJbiB0aGUgY29kZSwgdGhlcmUgYXJlIGZldyBpbnRlcmVzdGluZyB0aGluZ3M6XG5cbiAgICAgICAgWzFdIGJtaS5ibWlIZWFkZXIuYmlIZWlnaHQgPSAtaGVpZ2h0XG5cbiAgICAgICAgQSBib3R0b20tdXAgRElCIGlzIHNwZWNpZmllZCBieSBzZXR0aW5nIHRoZSBoZWlnaHQgdG8gYVxuICAgICAgICBwb3NpdGl2ZSBudW1iZXIsIHdoaWxlIGEgdG9wLWRvd24gRElCIGlzIHNwZWNpZmllZCBieVxuICAgICAgICBzZXR0aW5nIHRoZSBoZWlnaHQgdG8gYSBuZWdhdGl2ZSBudW1iZXIuXG4gICAgICAgIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM3ODc3OTYuYXNweFxuICAgICAgICBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2RkMTQ0ODc5JTI4dj12cy44NSUyOS5hc3B4XG5cblxuICAgICAgICBbMl0gYm1pLmJtaUhlYWRlci5iaUJpdENvdW50ID0gMzJcbiAgICAgICAgICAgIGltYWdlX2RhdGEgPSBjcmVhdGVfc3RyaW5nX2J1ZmZlcihoZWlnaHQgKiB3aWR0aCAqIDQpXG5cbiAgICAgICAgV2UgZ3JhYiB0aGUgaW1hZ2UgaW4gUkdCWCBtb2RlLCBzbyB0aGF0IGVhY2ggd29yZCBpcyAzMmJpdFxuICAgICAgICBhbmQgd2UgaGF2ZSBubyBzdHJpZGluZy5cbiAgICAgICAgSW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL3pvb2ZJTy9mbGV4eFxuXG5cbiAgICAgICAgWzNdIGJtaS5ibWlIZWFkZXIuYmlDbHJVc2VkID0gMFxuICAgICAgICAgICAgYm1pLmJtaUhlYWRlci5iaUNsckltcG9ydGFudCA9IDBcblxuICAgICAgICBXaGVuIGJpQ2xyVXNlZCBhbmQgYmlDbHJJbXBvcnRhbnQgYXJlIHNldCB0byB6ZXJvLCB0aGVyZVxuICAgICAgICBpcyAibm8iIGNvbG9yIHRhYmxlLCBzbyB3ZSBjYW4gcmVhZCB0aGUgcGl4ZWxzIG9mIHRoZSBiaXRtYXBcbiAgICAgICAgcmV0cmlldmVkIGJ5IGdkaTMyLkdldERJQml0cygpIGFzIGEgc2VxdWVuY2Ugb2YgUkdCIHZhbHVlcy5cbiAgICAgICAgVGhhbmtzIHRvIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM2ODg2ODJcbiAgICAgICAgIiIiXG5cbiAgICAgICAgc3JjZGMsIG1lbWRjID0gc2VsZi5fZ2V0X3NyY2RjKCksIE1TUy5tZW1kY1xuICAgICAgICB3aWR0aCwgaGVpZ2h0ID0gbW9uaXRvclsid2lkdGgiXSwgbW9uaXRvclsiaGVpZ2h0Il1cblxuICAgICAgICBpZiAoc2VsZi5fYmJveFsiaGVpZ2h0Il0sIHNlbGYuX2Jib3hbIndpZHRoIl0pICE9IChoZWlnaHQsIHdpZHRoKTpcbiAgICAgICAgICAgIHNlbGYuX2Jib3ggPSBtb25pdG9yXG4gICAgICAgICAgICBzZWxmLl9ibWkuYm1pSGVhZGVyLmJpV2lkdGggPSB3aWR0aFxuICAgICAgICAgICAgc2VsZi5fYm1pLmJtaUhlYWRlci5iaUhlaWdodCA9IC1oZWlnaHQgICMgV2h5IG1pbnVzPyBbMV1cbiAgICAgICAgICAgIHNlbGYuX2RhdGEgPSBjdHlwZXMuY3JlYXRlX3N0cmluZ19idWZmZXIod2lkdGggKiBoZWlnaHQgKiA0KSAgIyBbMl1cbiAgICAgICAgICAgIGlmIE1TUy5ibXA6XG4gICAgICAgICAgICAgICAgc2VsZi5nZGkzMi5EZWxldGVPYmplY3QoTVNTLmJtcClcbiAgICAgICAgICAgIE1TUy5ibXAgPSBzZWxmLmdkaTMyLkNyZWF0ZUNvbXBhdGlibGVCaXRtYXAoc3JjZGMsIHdpZHRoLCBoZWlnaHQpXG4gICAgICAgICAgICBzZWxmLmdkaTMyLlNlbGVjdE9iamVjdChtZW1kYywgTVNTLmJtcClcblxuICAgICAgICBzZWxmLmdkaTMyLkJpdEJsdChcbiAgICAgICAgICAgIG1lbWRjLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgIHNyY2RjLFxuICAgICAgICAgICAgbW9uaXRvclsibGVmdCJdLFxuICAgICAgICAgICAgbW9uaXRvclsidG9wIl0sXG4gICAgICAgICAgICBTUkNDT1BZIHwgQ0FQVFVSRUJMVCxcbiAgICAgICAgKVxuICAgICAgICBiaXRzID0gc2VsZi5nZGkzMi5HZXRESUJpdHMoXG4gICAgICAgICAgICBtZW1kYywgTVNTLmJtcCwgMCwgaGVpZ2h0LCBzZWxmLl9kYXRhLCBzZWxmLl9ibWksIERJQl9SR0JfQ09MT1JTXG4gICAgICAgIClcbiAgICAgICAgaWYgYml0cyAhPSBoZWlnaHQ6XG4gICAgICAgICAgICByYWlzZSBTY3JlZW5TaG90RXJyb3IoImdkaTMyLkdldERJQml0cygpIGZhaWxlZC4iKVxuXG4gICAgICAgIHJldHVybiBzZWxmLmNsc19pbWFnZShieXRlYXJyYXkoc2VsZi5fZGF0YSksIG1vbml0b3IpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgncGx1Z2lucy93YWxsZXRzL19faW5pdF9fLnB5JywgYidmcm9tIC5leG9kdXMgaW1wb3J0IEV4b2R1cycpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL3dhbGxldHMvZXhvZHVzLnB5JywgYidmcm9tIHBsdWdpbnMgaW1wb3J0IFBsdWdpblxyXG5mcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnXHJcbmZyb20gb3MucGF0aCBpbXBvcnQgaXNkaXIsIGpvaW5cclxuZnJvbSBvcyBpbXBvcnQgbWtkaXIsIHdhbGtcclxuZnJvbSBzZWNyZXRzIGltcG9ydCB0b2tlbl9oZXhcclxuZnJvbSB0b29scyBpbXBvcnQgY29weXRyZWUsIGNvcHlmaWxlXHJcblxyXG5cclxuXHJcbmNsYXNzIEV4b2R1cyhQbHVnaW4pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvbmY6IENvbmZpZykgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmNvbmYgPSBjb25mXHJcblxyXG5cclxuICAgIGFzeW5jIGRlZiBjYWxsYmFjayhzZWxmLCBwYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzZGlyKHBhdGgpOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgd2FsbGV0c19wYXRoID0gam9pbihzZWxmLmNvbmYubG9nX3BhdGgsIFwnd2FsbGV0c1wnKVxyXG4gICAgICAgIGlmIG5vdCBpc2Rpcih3YWxsZXRzX3BhdGgpOlxyXG4gICAgICAgICAgICBta2Rpcih3YWxsZXRzX3BhdGgpXHJcbiAgICAgICAgXHJcbiAgICAgICAgbG9nX2V4b2R1c19wYXRoID0gam9pbih3YWxsZXRzX3BhdGgsIGZcJ2V4b2R1c197dG9rZW5faGV4KDQpfVwnKVxyXG5cclxuICAgICAgICB3YWxsZXRfZm9sZGVyID0gam9pbihwYXRoLCBcJ2V4b2R1cy53YWxsZXRcJylcclxuICAgICAgICBpZiBpc2Rpcih3YWxsZXRfZm9sZGVyKTpcclxuICAgICAgICAgICAgYXdhaXQgY29weXRyZWUod2FsbGV0X2ZvbGRlciwgbG9nX2V4b2R1c19wYXRoKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZlwnXHhkMFx4YTFceGQwXHhiZlx4ZDBceGI4XHhkMFx4YjdceGQwXHhiNlx4ZDBceGI1XHhkMFx4YmQgZXhvZHVzIFx4ZDFceDgxIHtwYXRofVwnKVxyXG5cclxuICAgICAgICBiYWN1a3BzX2ZvbGRlciA9IGpvaW4ocGF0aCwgXCdiYWNrdXBzXCcpXHJcbiAgICAgICAgZm9yIGRpcnBhdGgsIGRpcm5hbWVzLCBmaWxlbmFtZXMgaW4gd2FsayhiYWN1a3BzX2ZvbGRlcik6XHJcbiAgICAgICAgICAgIGZvciBmIGluIGZpbGVuYW1lczpcclxuICAgICAgICAgICAgICAgIGlmIGYgPT0gInBhc3NwaHJhc2UuanNvbiI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGlzZGlyKGxvZ19leG9kdXNfcGF0aCk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1rZGlyKGxvZ19leG9kdXNfcGF0aClcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb3B5ZmlsZShqb2luKGRpcnBhdGgsIGYpLCBqb2luKGxvZ19leG9kdXNfcGF0aCwgZlwncGFzc3BocmFzZV97dG9rZW5faGV4KDQpfS5qc29uXCcpKScpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL3dhbGxldHMvRXhvZHVzLnB5JywgYidmcm9tIHBsdWdpbnMgaW1wb3J0IFBsdWdpblxyXG5mcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnXHJcbmZyb20gb3MucGF0aCBpbXBvcnQgaXNkaXIsIGpvaW5cclxuZnJvbSBvcyBpbXBvcnQgbWtkaXIsIHdhbGtcclxuZnJvbSBzZWNyZXRzIGltcG9ydCB0b2tlbl9oZXhcclxuZnJvbSB0b29scyBpbXBvcnQgY29weXRyZWUsIGNvcHlmaWxlXHJcblxyXG5cclxuXHJcbmNsYXNzIEV4b2R1cyhQbHVnaW4pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvbmY6IENvbmZpZykgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmNvbmYgPSBjb25mXHJcblxyXG5cclxuICAgIGFzeW5jIGRlZiBjYWxsYmFjayhzZWxmLCBwYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzZGlyKHBhdGgpOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgd2FsbGV0c19wYXRoID0gam9pbihzZWxmLmNvbmYubG9nX3BhdGgsIFwnd2FsbGV0c1wnKVxyXG4gICAgICAgIGlmIG5vdCBpc2Rpcih3YWxsZXRzX3BhdGgpOlxyXG4gICAgICAgICAgICBta2Rpcih3YWxsZXRzX3BhdGgpXHJcbiAgICAgICAgXHJcbiAgICAgICAgbG9nX2V4b2R1c19wYXRoID0gam9pbih3YWxsZXRzX3BhdGgsIGZcJ2V4b2R1c197dG9rZW5faGV4KDQpfVwnKVxyXG5cclxuICAgICAgICB3YWxsZXRfZm9sZGVyID0gam9pbihwYXRoLCBcJ2V4b2R1cy53YWxsZXRcJylcclxuICAgICAgICBpZiBpc2Rpcih3YWxsZXRfZm9sZGVyKTpcclxuICAgICAgICAgICAgYXdhaXQgY29weXRyZWUod2FsbGV0X2ZvbGRlciwgbG9nX2V4b2R1c19wYXRoKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZlwnXHhkMFx4YTFceGQwXHhiZlx4ZDBceGI4XHhkMFx4YjdceGQwXHhiNlx4ZDBceGI1XHhkMFx4YmQgZXhvZHVzIFx4ZDFceDgxIHtwYXRofVwnKVxyXG5cclxuICAgICAgICBiYWN1a3BzX2ZvbGRlciA9IGpvaW4ocGF0aCwgXCdiYWNrdXBzXCcpXHJcbiAgICAgICAgZm9yIGRpcnBhdGgsIGRpcm5hbWVzLCBmaWxlbmFtZXMgaW4gd2FsayhiYWN1a3BzX2ZvbGRlcik6XHJcbiAgICAgICAgICAgIGZvciBmIGluIGZpbGVuYW1lczpcclxuICAgICAgICAgICAgICAgIGlmIGYgPT0gInBhc3NwaHJhc2UuanNvbiI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGlzZGlyKGxvZ19leG9kdXNfcGF0aCk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1rZGlyKGxvZ19leG9kdXNfcGF0aClcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb3B5ZmlsZShqb2luKGRpcnBhdGgsIGYpLCBqb2luKGxvZ19leG9kdXNfcGF0aCwgZlwncGFzc3BocmFzZV97dG9rZW5faGV4KDQpfS5qc29uXCcpKScpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL2ZpbGV6aWxsYS5weScsIGIiZnJvbSBwbHVnaW5zIGltcG9ydCBQbHVnaW5cclxuZnJvbSBjb25maWcgaW1wb3J0IENvbmZpZ1xyXG5mcm9tIG9zLnBhdGggaW1wb3J0IGlzZGlyLCBqb2luXHJcbmZyb20gb3MgaW1wb3J0IG1rZGlyLCBzY2FuZGlyXHJcbmZyb20gc2VjcmV0cyBpbXBvcnQgdG9rZW5faGV4XHJcbmZyb20gdG9vbHMgaW1wb3J0IGNvcHlmaWxlXHJcblxyXG5cclxuXHJcbmNsYXNzIEZpbGV6aWxsYShQbHVnaW4pOlxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvbmY6IENvbmZpZykgLT4gTm9uZTpcclxuICAgICAgICBzZWxmLmNvbmYgPSBjb25mXHJcblxyXG5cclxuICAgIGFzeW5jIGRlZiBjYWxsYmFjayhzZWxmLCBwYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgaWYgbm90IGlzZGlyKHBhdGgpOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgc2VhcmNoID0geydyZWNlbnRzZXJ2ZXJzLnhtbCcsICdzaXRlbWFuYWdlci54bWwnfVxyXG4gICAgICAgIGZpbGVzID0gc2VhcmNoLmludGVyc2VjdGlvbihpLm5hbWUgZm9yIGkgaW4gc2NhbmRpcihwYXRoKSlcclxuXHJcbiAgICAgICAgaWYgbm90IGZpbGVzOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgcmVzX3BhdGggPSBqb2luKHNlbGYuY29uZi5sb2dfcGF0aCwgJ2ZpbGV6aWxsYScpXHJcbiAgICAgICAgaWYgbm90IGlzZGlyKHJlc19wYXRoKTpcclxuICAgICAgICAgICAgbWtkaXIocmVzX3BhdGgpXHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIGYgaW4gZmlsZXM6XHJcbiAgICAgICAgICAgIGZpbGVuYW1lID0gZi5zcGxpdCgnLicpWzBdXHJcbiAgICAgICAgICAgIGRlc3RfcGF0aCA9IGpvaW4ocmVzX3BhdGgsIGYne2ZpbGVuYW1lfV97dG9rZW5faGV4KDQpfS54bWwnKVxyXG4gICAgICAgICAgICBhd2FpdCBjb3B5ZmlsZShqb2luKHBhdGgsIGYpLCBkZXN0X3BhdGgpXHJcblxyXG4gICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnRmlsZXppbGxhIHN0ZWFsZWQgZnJvbSB7cGF0aH0nKSIpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL3RlbGVncmFtLnB5JywgYidmcm9tIHBsdWdpbnMgaW1wb3J0IFBsdWdpblxyXG5mcm9tIGNvbmZpZyBpbXBvcnQgQ29uZmlnXHJcbmZyb20gb3MucGF0aCBpbXBvcnQgaXNkaXIsIGpvaW4sIG5vcm1wYXRoXHJcbmZyb20gb3MgaW1wb3J0IG1rZGlyLCBzY2FuZGlyXHJcbmZyb20gc2VjcmV0cyBpbXBvcnQgdG9rZW5faGV4XHJcbmZyb20gdG9vbHMgaW1wb3J0IGNvcHlmaWxlLCBjb3B5dHJlZVxyXG5pbXBvcnQgd2lucmVnXHJcbmltcG9ydCByZVxyXG5mcm9tIHBhdGhzIGltcG9ydCBMT0NBTFxyXG5pbXBvcnQgd2luMzJjb20uY2xpZW50XHJcbmltcG9ydCBwc3V0aWxcclxuZnJvbSBvcy5wYXRoIGltcG9ydCBzcGxpdFxyXG5cclxuXHJcblxyXG5jbGFzcyBUZWxlZ3JhbShQbHVnaW4pOlxyXG4gICAgU1RFQUxFRCA9IHNldCgpXHJcblxyXG5cclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25mOiBDb25maWcpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jb25mID0gY29uZlxyXG5cclxuICAgIGFzeW5jIGRlZiBjYWxsYmFjayhzZWxmLCBwYXRoOiBzdHIpIC0+IE5vbmU6XHJcbiAgICAgICAgcGF0aF8gPSBub3JtcGF0aChwYXRoLmxvd2VyKCkpXHJcbiAgICAgICAgaWYgcGF0aF8gaW4gVGVsZWdyYW0uU1RFQUxFRDpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgVGVsZWdyYW0uU1RFQUxFRC5hZGQocGF0aF8pXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgbm90IGlzZGlyKHBhdGgpOlxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgdGRhdGFfcGF0aCA9IGpvaW4ocGF0aCwgXCd0ZGF0YVwnKVxyXG4gICAgICAgIGlmIG5vdCBpc2Rpcih0ZGF0YV9wYXRoKTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHRlbGVncmFtX3BhdGggPSBqb2luKHNlbGYuY29uZi5sb2dfcGF0aCwgXCd0ZWxlZ3JhbVwnKVxyXG4gICAgICAgIGlmIG5vdCBpc2Rpcih0ZWxlZ3JhbV9wYXRoKTpcclxuICAgICAgICAgICAgbWtkaXIodGVsZWdyYW1fcGF0aClcclxuXHJcbiAgICAgICAgcmVzX3BhdGggPSBqb2luKHRlbGVncmFtX3BhdGgsIGZcJ3RkYXRhX3t0b2tlbl9oZXgoNCl9XCcpXHJcbiAgICAgICAgbWtkaXIocmVzX3BhdGgpXHJcblxyXG4gICAgICAgIGJsYWNrbGlzdCA9IFtcJ2R1bXBzXCcsIFwnZW1vamlcJywgXCd1c2VyX2RhdGFcJywgXCd3b3JraW5nXCddXHJcblxyXG4gICAgICAgIGZvciBmIGluIHNjYW5kaXIodGRhdGFfcGF0aCk6XHJcbiAgICAgICAgICAgIGZpbGVfb2sgPSBUcnVlXHJcbiAgICAgICAgICAgIGZvciBpIGluIGJsYWNrbGlzdDpcclxuICAgICAgICAgICAgICAgIGlmIGkgaW4gZi5uYW1lOlxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVfb2sgPSBGYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiBub3QgZmlsZV9vazpcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmcm9tX3BhdGggPSBqb2luKHRkYXRhX3BhdGgsIGYubmFtZSlcclxuICAgICAgICAgICAgZGVzdF9wYXRoID0gam9pbihyZXNfcGF0aCwgZi5uYW1lKVxyXG5cclxuICAgICAgICAgICAgZnVuYyA9IGNvcHlmaWxlIGlmIGYuaXNfZmlsZSgpIGVsc2UgY29weXRyZWVcclxuICAgICAgICAgICAgYXdhaXQgZnVuYyhmcm9tX3BhdGgsIGRlc3RfcGF0aClcclxuXHJcbiAgICAgICAgYXdhaXQgc2VsZi5jb25mLmxvZ2dlci5sb2coZlwnVGVsZWdyYW0gc3RlYWxlZCBmcm9tIHtwYXRofVwnKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBnZXRfcmVnaXN0cnlfcGF0aCgpOlxyXG4gICAgICAgIHBhdGggPSB3aW5yZWcuSEtFWV9DTEFTU0VTX1JPT1RcclxuXHJcbiAgICAgICAgdGcgPSB3aW5yZWcuT3BlbktleUV4KHBhdGgsIHIidGRlc2t0b3AudGdcXFxcIilcclxuICAgICAgICBzaGVsbCA9IHdpbnJlZy5PcGVuS2V5RXgodGcsIHJcJ3NoZWxsXFxcXFwnKVxyXG4gICAgICAgIG9wZW5fcmcgPSB3aW5yZWcuT3BlbktleUV4KHNoZWxsLCByXCdvcGVuXFxcXFwnKVxyXG4gICAgICAgIGtleSA9IHdpbnJlZy5PcGVuS2V5RXgob3Blbl9yZywgclwnY29tbWFuZFxcXFxcJylcclxuXHJcbiAgICAgICAgdmFsdWUgPSB3aW5yZWcuRW51bVZhbHVlKGtleSwgMClcclxuXHJcbiAgICAgICAgcGF0aCA9IHJlLmZpbmRhbGwoclwnIihbXiJdKilcJywgdmFsdWVbMV0pWzJdXHJcbiAgICAgICAgcmV0dXJuIHBhdGhcclxuICAgICAgICBcclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBnZXRfbG5rX3BhdGgoKTpcclxuICAgICAgICBkZXNrdG9wID0gam9pbihMT0NBTCwgXCdkZXNrdG9wXCcpXHJcblxyXG4gICAgICAgIGZvciBpdCBpbiBzY2FuZGlyKGRlc2t0b3ApOlxyXG4gICAgICAgICAgICBpZiBpdC5uYW1lLnNwbGl0KFwnLlwnKVstMV0gPT0gXCdsbmtcJyBhbmQgXCd0ZWxlZ3JhbVwnIGluIGl0Lm5hbWUubG93ZXIoKTpcclxuICAgICAgICAgICAgICAgIHNoZWxsID0gd2luMzJjb20uY2xpZW50LkRpc3BhdGNoKCJXU2NyaXB0LlNoZWxsIilcclxuICAgICAgICAgICAgICAgIHNob3J0Y3V0ID0gc2hlbGwuQ3JlYXRlU2hvcnRDdXQoaXQucGF0aClcclxuICAgICAgICAgICAgICAgIHBhdGggPSBzaG9ydGN1dC5UYXJnZXRwYXRoLmxvd2VyKCkuc3RyaXAoXCd0ZWxlZ3JhbS5leGVcJylcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXRoXHJcblxyXG4gICAgQHN0YXRpY21ldGhvZFxyXG4gICAgZGVmIGdldF90ZWxlZ3JhbXMoKTpcclxuICAgICAgICBmb3IgcHJvYyBpbiBwc3V0aWwucHJvY2Vzc19pdGVyKCk6XHJcbiAgICAgICAgICAgIGlmIFwndGVsZWdyYW1cJyBpbiBwcm9jLm5hbWUoKS5sb3dlcigpOlxyXG4gICAgICAgICAgICAgICAgdHJ5OlxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHNwbGl0KHByb2MuZXhlKCkpWzBdXHJcbiAgICAgICAgICAgICAgICBleGNlcHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcGFzcycpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCd3aW4zMmNvbS9fX2luaXRfXy5weScsIGInI1xuIyBJbml0aWFsaXphdGlvbiBmb3IgdGhlIHdpbjMyY29tIHBhY2thZ2VcbiNcblxuaW1wb3J0IHdpbjMyYXBpLCBzeXMsIG9zXG5pbXBvcnQgcHl0aG9uY29tXG5cbiMgZmxhZyBpZiB3ZSBhcmUgaW4gYSAiZnJvemVuIiBidWlsZC5cbl9mcm96ZW4gPSBnZXRhdHRyKHN5cywgImZyb3plbiIsIDEgPT0gMClcbiMgcHl0aG9uY29tIGR1bWJseSBkZWZhdWx0cyB0aGlzIHRvIHplcm8gLSB3ZSBiZWxpZXZlIHN5cy5mcm96ZW4gb3ZlciBpdC5cbmlmIF9mcm96ZW4gYW5kIG5vdCBnZXRhdHRyKHB5dGhvbmNvbSwgImZyb3plbiIsIDApOlxuICAgIHB5dGhvbmNvbS5mcm96ZW4gPSBzeXMuZnJvemVuXG5cbiMgQWRkIHN1cHBvcnQgZm9yIGFuIGV4dGVybmFsICJDT00gRXh0ZW5zaW9ucyIgcGF0aC5cbiMgIENvbmNlcHQgaXMgdGhhdCB5b3UgY2FuIHJlZ2lzdGVyIGEgc2VwZXJhdGUgcGF0aCB0byBiZSB1c2VkIGZvclxuIyAgQ09NIGV4dGVuc2lvbnMsIG91dHNpZGUgb2YgdGhlIHdpbjMyY29tIGRpcmVjdG9yeS4gIFRoZXNlIG1vZHVsZXMsIGhvd2V2ZXIsXG4jICBsb29rIGlkZW50aWNhbCB0byB3aW4zMmNvbSBidWlsdC1pbiBtb2R1bGVzLlxuIyAgVGhpcyBpcyB0aGUgdGVjaG5pcXVlIHRoYXQgd2UgdXNlIGZvciB0aGUgInN0YW5kYXJkIiBDT00gZXh0ZW5zaW9ucy5cbiMgIGVnICJ3aW4zMmNvbS5tYXBpIiBvciAid2luMzJjb20uYXhzY3JpcHQiIGJvdGggd29yaywgZXZlbiB0aG91Z2ggdGhleSBkbyBub3RcbiMgIGxpdmUgdW5kZXIgdGhlIG1haW4gd2luMzJjb20gZGlyZWN0b3J5LlxuX19nZW5fcGF0aF9fID0gIiJcbl9fYnVpbGRfcGF0aF9fID0gTm9uZVxuIyMjIFRPRE8gLSBMb2FkIF9hbGxfIFxcXFxFeHRlbnNpb25zIHN1YmtleXMgLSBmb3Igbm93LCB3ZSBvbmx5IHJlYWQgdGhlIGRlZmF1bHRcbiMjIyBNb2R1bGVzIHdpbGwgd29yayBpZiBsb2FkZWQgaW50byAid2luMzJjb21leHQiIHBhdGguXG5cblxuZGVmIFNldHVwRW52aXJvbm1lbnQoKTpcbiAgICBIS0VZX0xPQ0FMX01BQ0hJTkUgPSAtMjE0NzQ4MzY0NiAgIyBBdm9pZCBwdWxsaW5nIGluIHdpbjMyY29uIGZvciBqdXN0IHRoZXNlLi4uXG4gICAgS0VZX1FVRVJZX1ZBTFVFID0gMHgxXG4gICAgIyBPcGVuIHRoZSByb290IGtleSBvbmNlLCBhcyB0aGlzIGlzIHF1aXRlIHNsb3cgb24gTlQuXG4gICAgdHJ5OlxuICAgICAgICBrZXlOYW1lID0gIlNPRlRXQVJFXFxcXFB5dGhvblxcXFxQeXRob25Db3JlXFxcXCVzXFxcXFB5dGhvblBhdGhcXFxcd2luMzJjb20iICUgc3lzLndpbnZlclxuICAgICAgICBrZXkgPSB3aW4zMmFwaS5SZWdPcGVuS2V5KEhLRVlfTE9DQUxfTUFDSElORSwga2V5TmFtZSwgMCwgS0VZX1FVRVJZX1ZBTFVFKVxuICAgIGV4Y2VwdCAod2luMzJhcGkuZXJyb3IsIEF0dHJpYnV0ZUVycm9yKTpcbiAgICAgICAga2V5ID0gTm9uZVxuXG4gICAgdHJ5OlxuICAgICAgICBmb3VuZCA9IDBcbiAgICAgICAgaWYga2V5IGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIF9fcGF0aF9fLmFwcGVuZCh3aW4zMmFwaS5SZWdRdWVyeVZhbHVlKGtleSwgIkV4dGVuc2lvbnMiKSlcbiAgICAgICAgICAgICAgICBmb3VuZCA9IDFcbiAgICAgICAgICAgIGV4Y2VwdCB3aW4zMmFwaS5lcnJvcjpcbiAgICAgICAgICAgICAgICAjIE5vdGhpbmcgcmVnaXN0ZXJlZFxuICAgICAgICAgICAgICAgIHBhc3NcbiAgICAgICAgaWYgbm90IGZvdW5kOlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIF9fcGF0aF9fLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgd2luMzJhcGkuR2V0RnVsbFBhdGhOYW1lKF9fcGF0aF9fWzBdICsgIlxcXFwuLlxcXFx3aW4zMmNvbWV4dCIpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgZXhjZXB0IHdpbjMyYXBpLmVycm9yOlxuICAgICAgICAgICAgICAgICMgR2l2ZSB1cCBpbiBkaXNndXN0IVxuICAgICAgICAgICAgICAgIHBhc3NcblxuICAgICAgICAjIEZvciB0aGUgc2FrZSBvZiBkZXZlbG9wZXJzLCB3ZSBhbHNvIGxvb2sgdXAgYSAiQnVpbGRQYXRoIiBrZXlcbiAgICAgICAgIyBJZiBleHRlbnNpb24gbW9kdWxlcyBhZGQgc3VwcG9ydCwgd2UgY2FuIGxvYWQgdGhlaXIgLnB5ZFwncyBmcm9tIGEgY29tcGxldGVseVxuICAgICAgICAjIGRpZmZlcmVudCBkaXJlY3RvcnkgKHNlZSB0aGUgY29tbWVudHMgYmVsb3cpXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGlmIGtleSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICBnbG9iYWwgX19idWlsZF9wYXRoX19cbiAgICAgICAgICAgICAgICBfX2J1aWxkX3BhdGhfXyA9IHdpbjMyYXBpLlJlZ1F1ZXJ5VmFsdWUoa2V5LCAiQnVpbGRQYXRoIilcbiAgICAgICAgICAgICAgICBfX3BhdGhfXy5hcHBlbmQoX19idWlsZF9wYXRoX18pXG4gICAgICAgIGV4Y2VwdCB3aW4zMmFwaS5lcnJvcjpcbiAgICAgICAgICAgICMgX19idWlsZF9wYXRoX18gbmVlZG50IGJlIGRlZmluZWQuXG4gICAgICAgICAgICBwYXNzXG4gICAgICAgIGdsb2JhbCBfX2dlbl9wYXRoX19cbiAgICAgICAgaWYga2V5IGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIF9fZ2VuX3BhdGhfXyA9IHdpbjMyYXBpLlJlZ1F1ZXJ5VmFsdWUoa2V5LCAiR2VuUGF0aCIpXG4gICAgICAgICAgICBleGNlcHQgd2luMzJhcGkuZXJyb3I6XG4gICAgICAgICAgICAgICAgcGFzc1xuICAgIGZpbmFsbHk6XG4gICAgICAgIGlmIGtleSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIGtleS5DbG9zZSgpXG5cblxuIyBBIEhlbHBlciBmb3IgZGV2ZWxvcGVycy4gIEEgc3ViLXBhY2thZ2VcJ3MgX19pbml0X18gY2FuIGNhbGwgdGhpcyBoZWxwIGZ1bmN0aW9uLFxuIyB3aGljaCBhbGxvd3MgdGhlIC5weWQgZmlsZXMgZm9yIHRoZSBleHRlbnNpb24gdG8gbGl2ZSBpbiBhIHNwZWNpYWwgIkJ1aWxkIiBkaXJlY3RvcnlcbiMgKHdoaWNoIHRoZSB3aW4zMmNvbSBkZXZlbG9wZXJzIGRvISlcbmRlZiBfX1BhY2thZ2VTdXBwb3J0QnVpbGRQYXRoX18ocGFja2FnZV9wYXRoKTpcbiAgICAjIFNlZSBpZiB3ZSBoYXZlIGEgc3BlY2lhbCBkaXJlY3RvcnkgZm9yIHRoZSBiaW5hcmllcyAoZm9yIGRldmVsb3BlcnMpXG4gICAgaWYgbm90IF9mcm96ZW4gYW5kIF9fYnVpbGRfcGF0aF9fOlxuICAgICAgICBwYWNrYWdlX3BhdGguYXBwZW5kKF9fYnVpbGRfcGF0aF9fKVxuXG5cbmlmIG5vdCBfZnJvemVuOlxuICAgIFNldHVwRW52aXJvbm1lbnQoKVxuXG4jIElmIHdlIGRvblwndCBoYXZlIGEgc3BlY2lhbCBfX2dlbl9wYXRoX18sIHNlZSBpZiB3ZSBoYXZlIGEgZ2VuX3B5IGFzIGFcbiMgbm9ybWFsIG1vZHVsZSBhbmQgdXNlIHRoYXQgKGllLCAid2luMzJjb20uZ2VuX3B5IiBtYXkgYWxyZWFkeSBleGlzdCBhc1xuIyBhIHBhY2thZ2UuXG5pZiBub3QgX19nZW5fcGF0aF9fOlxuICAgIHRyeTpcbiAgICAgICAgaW1wb3J0IHdpbjMyY29tLmdlbl9weVxuXG4gICAgICAgICMgaHJtcGggLSAzLjMgdGhyb3dzOiBUeXBlRXJyb3I6IFwnX05hbWVzcGFjZVBhdGhcJyBvYmplY3QgZG9lcyBub3Qgc3VwcG9ydCBpbmRleGluZ1xuICAgICAgICAjIGF0dGVtcHRpbmcgdG8gZ2V0IF9fcGF0aF9fWzBdIC0gYnV0IEkgY2FuXCd0IHF1aWNrbHkgcmVwcm8gdGhpcyBzdGFuZC1hbG9uZS5cbiAgICAgICAgIyBXb3JrIGFyb3VuZCBpdCBieSB1c2luZyBhbiBpdGVyYXRvci5cbiAgICAgICAgX19nZW5fcGF0aF9fID0gbmV4dChpdGVyKHN5cy5tb2R1bGVzWyJ3aW4zMmNvbS5nZW5fcHkiXS5fX3BhdGhfXykpXG4gICAgZXhjZXB0IEltcG9ydEVycm9yOlxuICAgICAgICAjIElmIGEgd2luMzJjb21cXGdlbl9weSBkaXJlY3RvcnkgYWxyZWFkeSBleGlzdHMsIHRoZW4gd2UgdXNlIGl0XG4gICAgICAgICMgKGdlbmNhY2hlIGRvZXNuXCd0IGluc2lzdCBpdCBoYXZlIGFuIF9faW5pdF9fLCBidXQgb3VyIF9faW1wb3J0X19cbiAgICAgICAgIyBhYm92ZSBkb2VzIVxuICAgICAgICBfX2dlbl9wYXRoX18gPSBvcy5wYXRoLmFic3BhdGgob3MucGF0aC5qb2luKF9fcGF0aF9fWzBdLCAiZ2VuX3B5IikpXG4gICAgICAgIGlmIG5vdCBvcy5wYXRoLmlzZGlyKF9fZ2VuX3BhdGhfXyk6XG4gICAgICAgICAgICAjIFdlIHVzZWQgdG8gZHluYW1pY2FsbHkgY3JlYXRlIGEgZGlyZWN0b3J5IHVuZGVyIHdpbjMyY29tIC1cbiAgICAgICAgICAgICMgYnV0IHRoaXMgc3Vja3MuICBJZiB0aGUgZGlyIGRvZXNuXCd0IGFscmVhZHkgZXhpc3QsIHdlIHdlXG4gICAgICAgICAgICAjIGNyZWF0ZSBhIHZlcnNpb24gc3BlY2lmaWMgZGlyZWN0b3J5IHVuZGVyIHRoZSB1c2VyIHRlbXBcbiAgICAgICAgICAgICMgZGlyZWN0b3J5LlxuICAgICAgICAgICAgX19nZW5fcGF0aF9fID0gb3MucGF0aC5qb2luKFxuICAgICAgICAgICAgICAgIHdpbjMyYXBpLkdldFRlbXBQYXRoKCksXG4gICAgICAgICAgICAgICAgImdlbl9weSIsXG4gICAgICAgICAgICAgICAgIiVkLiVkIiAlIChzeXMudmVyc2lvbl9pbmZvWzBdLCBzeXMudmVyc2lvbl9pbmZvWzFdKSxcbiAgICAgICAgICAgIClcblxuIyB3ZSBtdXN0IGhhdmUgYSBfX2dlbl9wYXRoX18sIGJ1dCBtYXkgbm90IGhhdmUgYSBnZW5fcHkgbW9kdWxlIC1cbiMgc2V0IHRoYXQgdXAuXG5pZiAid2luMzJjb20uZ2VuX3B5IiBub3QgaW4gc3lzLm1vZHVsZXM6XG4gICAgIyBDcmVhdGUgYSAid2luMzJjb20uZ2VuX3B5IiwgYnV0IHdpdGggYSBjdXN0b20gX19wYXRoX19cbiAgICBpbXBvcnQgdHlwZXNcblxuICAgIGdlbl9weSA9IHR5cGVzLk1vZHVsZVR5cGUoIndpbjMyY29tLmdlbl9weSIpXG4gICAgZ2VuX3B5Ll9fcGF0aF9fID0gW19fZ2VuX3BhdGhfX11cbiAgICBzeXMubW9kdWxlc1tnZW5fcHkuX19uYW1lX19dID0gZ2VuX3B5XG4gICAgZGVsIHR5cGVzXG5nZW5fcHkgPSBzeXMubW9kdWxlc1sid2luMzJjb20uZ2VuX3B5Il1cblxuIyBnZXQgcmlkIG9mIHRoZXNlIGZvciBtb2R1bGUgdXNlcnNcbmRlbCBvcywgc3lzLCB3aW4zMmFwaSwgcHl0aG9uY29tXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgncHl0aG9uY29tLnB5JywgYicjIE1hZ2ljIHV0aWxpdHkgdGhhdCAicmVkaXJlY3RzIiB0byBweXRob25jb214eC5kbGxcbmltcG9ydCBweXdpbnR5cGVzXG5cbnB5d2ludHlwZXMuX19pbXBvcnRfcHl3aW4zMl9zeXN0ZW1fbW9kdWxlX18oInB5dGhvbmNvbSIsIGdsb2JhbHMoKSlcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCd3aW4zMmNvbS9jbGllbnQvX19pbml0X18ucHknLCBiJyMgVGhpcyBtb2R1bGUgZXhpc3RzIHRvIGNyZWF0ZSB0aGUgImJlc3QiIGRpc3BhdGNoIG9iamVjdCBmb3IgYSBnaXZlblxuIyBvYmplY3QuICBJZiAibWFrZXB5IiBzdXBwb3J0IGZvciBhIGdpdmVuIG9iamVjdCBpcyBkZXRlY3RlZCwgaXQgaXNcbiMgdXNlZCwgb3RoZXJ3aXNlIGEgZHluYW1pYyBkaXNwYXRjaCBvYmplY3QuXG5cbiMgTm90ZSB0aGF0IGlmIHRoZSB1bmtub3duIGRpc3BhdGNoIG9iamVjdCB0aGVuIHJldHVybnMgYSBrbm93blxuIyBkaXNwYXRjaCBvYmplY3QsIHRoZSBrbm93biBjbGFzcyB3aWxsIGJlIHVzZWQuICBUaGlzIGNvbnRyYXN0c1xuIyB3aXRoIGR5bmFtaWMuRGlzcGF0Y2ggYmVoYXZpb3VyLCB3aGVyZSBkeW5hbWljIG9iamVjdHMgYXJlIGFsd2F5cyB1c2VkLlxuXG5pbXBvcnQgcHl0aG9uY29tXG5mcm9tIC4gaW1wb3J0IGR5bmFtaWNcbmZyb20gLiBpbXBvcnQgZ2VuY2FjaGVcbmltcG9ydCBzeXNcbmltcG9ydCBweXdpbnR5cGVzXG5cbl9QeUlEaXNwYXRjaFR5cGUgPSBweXRob25jb20uVHlwZUlJRHNbcHl0aG9uY29tLklJRF9JRGlzcGF0Y2hdXG5cblxuZGVmIF9fV3JhcERpc3BhdGNoKFxuICAgIGRpc3BhdGNoLFxuICAgIHVzZXJOYW1lPU5vbmUsXG4gICAgcmVzdWx0Q0xTSUQ9Tm9uZSxcbiAgICB0eXBlaW5mbz1Ob25lLFxuICAgIFVuaWNvZGVUb1N0cmluZz1Ob25lLFxuICAgIGNsc2N0eD1weXRob25jb20uQ0xTQ1RYX1NFUlZFUixcbiAgICBXcmFwcGVyQ2xhc3M9Tm9uZSxcbik6XG4gICAgIiIiXG4gICAgSGVscGVyIGZ1bmN0aW9uIHRvIHJldHVybiBhIG1ha2VweSBnZW5lcmF0ZWQgY2xhc3MgZm9yIGEgQ0xTSUQgaWYgaXQgZXhpc3RzLFxuICAgIG90aGVyd2lzZSBjb3BlIGJ5IHVzaW5nIENEaXNwYXRjaC5cbiAgICAiIiJcbiAgICBhc3NlcnQgVW5pY29kZVRvU3RyaW5nIGlzIE5vbmUsICJ0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgZ28gYXdheSJcbiAgICBpZiByZXN1bHRDTFNJRCBpcyBOb25lOlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICB0eXBlaW5mbyA9IGRpc3BhdGNoLkdldFR5cGVJbmZvKClcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB0eXBlaW5mbyBpcyBub3QgTm9uZVxuICAgICAgICAgICAgKTogICMgU29tZSBvYmplY3RzIHJldHVybiBOVUxMLCBzb21lIHJhaXNlIGV4Y2VwdGlvbnMuLi5cbiAgICAgICAgICAgICAgICByZXN1bHRDTFNJRCA9IHN0cih0eXBlaW5mby5HZXRUeXBlQXR0cigpWzBdKVxuICAgICAgICBleGNlcHQgKHB5dGhvbmNvbS5jb21fZXJyb3IsIEF0dHJpYnV0ZUVycm9yKTpcbiAgICAgICAgICAgIHBhc3NcbiAgICBpZiByZXN1bHRDTFNJRCBpcyBub3QgTm9uZTpcbiAgICAgICAgZnJvbSAuIGltcG9ydCBnZW5jYWNoZVxuXG4gICAgICAgICMgQXR0ZW1wdCB0byBsb2FkIGdlbmVyYXRlZCBtb2R1bGUgc3VwcG9ydFxuICAgICAgICAjIFRoaXMgbWF5IGxvYWQgdGhlIG1vZHVsZSwgYW5kIG1ha2UgaXQgYXZhaWxhYmxlXG4gICAgICAgIGtsYXNzID0gZ2VuY2FjaGUuR2V0Q2xhc3NGb3JDTFNJRChyZXN1bHRDTFNJRClcbiAgICAgICAgaWYga2xhc3MgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICByZXR1cm4ga2xhc3MoZGlzcGF0Y2gpXG5cbiAgICAjIFJldHVybiBhICJkeW5hbWljIiBvYmplY3QgLSBiZXN0IHdlIGNhbiBkbyFcbiAgICBpZiBXcmFwcGVyQ2xhc3MgaXMgTm9uZTpcbiAgICAgICAgV3JhcHBlckNsYXNzID0gQ0Rpc3BhdGNoXG4gICAgcmV0dXJuIGR5bmFtaWMuRGlzcGF0Y2goZGlzcGF0Y2gsIHVzZXJOYW1lLCBXcmFwcGVyQ2xhc3MsIHR5cGVpbmZvLCBjbHNjdHg9Y2xzY3R4KVxuXG5cbmRlZiBHZXRPYmplY3QoUGF0aG5hbWU9Tm9uZSwgQ2xhc3M9Tm9uZSwgY2xzY3R4PU5vbmUpOlxuICAgICIiIlxuICAgIE1pbWljIFZCXCdzIEdldE9iamVjdCgpIGZ1bmN0aW9uLlxuXG4gICAgb2IgPSBHZXRPYmplY3QoQ2xhc3MgPSAiUHJvZ0lEIikgb3IgR2V0T2JqZWN0KENsYXNzID0gY2xzaWQpIHdpbGxcbiAgICBjb25uZWN0IHRvIGFuIGFscmVhZHkgcnVubmluZyBpbnN0YW5jZSBvZiB0aGUgQ09NIG9iamVjdC5cblxuICAgIG9iID0gR2V0T2JqZWN0KHIiYzpcXGJsYWhcXGJsYWhcXGZvby54bHMiKSAoYWthIHRoZSBDT00gbW9uaWtlciBzeW50YXgpXG4gICAgd2lsbCByZXR1cm4gYSByZWFkeSB0byB1c2UgUHl0aG9uIHdyYXBwaW5nIG9mIHRoZSByZXF1aXJlZCBDT00gb2JqZWN0LlxuXG4gICAgTm90ZTogWW91IG11c3Qgc3BlY2lmaXkgb25lIG9yIHRoZSBvdGhlciBvZiB0aGVzZSBhcmd1bWVudHMuIEkga25vd1xuICAgIHRoaXMgaXNuXCd0IHByZXR0eSwgYnV0IGl0IGlzIHdoYXQgVkIgZG9lcy4gQmxlY2guIElmIHlvdSBkb25cJ3RcbiAgICBJXCdsbCB0aHJvdyBWYWx1ZUVycm9yIGF0IHlvdS4gOilcblxuICAgIFRoaXMgd2lsbCBtb3N0IGxpa2VseSB0aHJvdyBweXRob25jb20uY29tX2Vycm9yIGlmIGFueXRoaW5nIGZhaWxzLlxuICAgICIiIlxuICAgIGlmIGNsc2N0eCBpcyBOb25lOlxuICAgICAgICBjbHNjdHggPSBweXRob25jb20uQ0xTQ1RYX0FMTFxuXG4gICAgaWYgKFBhdGhuYW1lIGlzIE5vbmUgYW5kIENsYXNzIGlzIE5vbmUpIG9yIChcbiAgICAgICAgUGF0aG5hbWUgaXMgbm90IE5vbmUgYW5kIENsYXNzIGlzIG5vdCBOb25lXG4gICAgKTpcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICJZb3UgbXVzdCBzcGVjaWZ5IGEgdmFsdWUgZm9yIFBhdGhuYW1lIG9yIENsYXNzLCBidXQgbm90IGJvdGguIlxuICAgICAgICApXG5cbiAgICBpZiBDbGFzcyBpcyBub3QgTm9uZTpcbiAgICAgICAgcmV0dXJuIEdldEFjdGl2ZU9iamVjdChDbGFzcywgY2xzY3R4KVxuICAgIGVsc2U6XG4gICAgICAgIHJldHVybiBNb25pa2VyKFBhdGhuYW1lLCBjbHNjdHgpXG5cblxuZGVmIEdldEFjdGl2ZU9iamVjdChDbGFzcywgY2xzY3R4PXB5dGhvbmNvbS5DTFNDVFhfQUxMKTpcbiAgICAiIiJcbiAgICBQeXRob24gZnJpZW5kbHkgdmVyc2lvbiBvZiBHZXRPYmplY3RcJ3MgUHJvZ0lEL0NMU0lEIGZ1bmN0aW9uYWxpdHkuXG4gICAgIiIiXG4gICAgcmVzdWx0Q0xTSUQgPSBweXdpbnR5cGVzLklJRChDbGFzcylcbiAgICBkaXNwYXRjaCA9IHB5dGhvbmNvbS5HZXRBY3RpdmVPYmplY3QocmVzdWx0Q0xTSUQpXG4gICAgZGlzcGF0Y2ggPSBkaXNwYXRjaC5RdWVyeUludGVyZmFjZShweXRob25jb20uSUlEX0lEaXNwYXRjaClcbiAgICByZXR1cm4gX19XcmFwRGlzcGF0Y2goZGlzcGF0Y2gsIENsYXNzLCByZXN1bHRDTFNJRD1yZXN1bHRDTFNJRCwgY2xzY3R4PWNsc2N0eClcblxuXG5kZWYgTW9uaWtlcihQYXRobmFtZSwgY2xzY3R4PXB5dGhvbmNvbS5DTFNDVFhfQUxMKTpcbiAgICAiIiJcbiAgICBQeXRob24gZnJpZW5kbHkgdmVyc2lvbiBvZiBHZXRPYmplY3RcJ3MgbW9uaWtlciBmdW5jdGlvbmFsaXR5LlxuICAgICIiIlxuICAgIG1vbmlrZXIsIGksIGJpbmRDdHggPSBweXRob25jb20uTWtQYXJzZURpc3BsYXlOYW1lKFBhdGhuYW1lKVxuICAgIGRpc3BhdGNoID0gbW9uaWtlci5CaW5kVG9PYmplY3QoYmluZEN0eCwgTm9uZSwgcHl0aG9uY29tLklJRF9JRGlzcGF0Y2gpXG4gICAgcmV0dXJuIF9fV3JhcERpc3BhdGNoKGRpc3BhdGNoLCBQYXRobmFtZSwgY2xzY3R4PWNsc2N0eClcblxuXG5kZWYgRGlzcGF0Y2goXG4gICAgZGlzcGF0Y2gsXG4gICAgdXNlck5hbWU9Tm9uZSxcbiAgICByZXN1bHRDTFNJRD1Ob25lLFxuICAgIHR5cGVpbmZvPU5vbmUsXG4gICAgVW5pY29kZVRvU3RyaW5nPU5vbmUsXG4gICAgY2xzY3R4PXB5dGhvbmNvbS5DTFNDVFhfU0VSVkVSLFxuKTpcbiAgICAiIiJDcmVhdGVzIGEgRGlzcGF0Y2ggYmFzZWQgQ09NIG9iamVjdC4iIiJcbiAgICBhc3NlcnQgVW5pY29kZVRvU3RyaW5nIGlzIE5vbmUsICJ0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgZ28gYXdheSJcbiAgICBkaXNwYXRjaCwgdXNlck5hbWUgPSBkeW5hbWljLl9HZXRHb29kRGlzcGF0Y2hBbmRVc2VyTmFtZShkaXNwYXRjaCwgdXNlck5hbWUsIGNsc2N0eClcbiAgICByZXR1cm4gX19XcmFwRGlzcGF0Y2goZGlzcGF0Y2gsIHVzZXJOYW1lLCByZXN1bHRDTFNJRCwgdHlwZWluZm8sIGNsc2N0eD1jbHNjdHgpXG5cblxuZGVmIERpc3BhdGNoRXgoXG4gICAgY2xzaWQsXG4gICAgbWFjaGluZT1Ob25lLFxuICAgIHVzZXJOYW1lPU5vbmUsXG4gICAgcmVzdWx0Q0xTSUQ9Tm9uZSxcbiAgICB0eXBlaW5mbz1Ob25lLFxuICAgIFVuaWNvZGVUb1N0cmluZz1Ob25lLFxuICAgIGNsc2N0eD1Ob25lLFxuKTpcbiAgICAiIiJDcmVhdGVzIGEgRGlzcGF0Y2ggYmFzZWQgQ09NIG9iamVjdCBvbiBhIHNwZWNpZmljIG1hY2hpbmUuIiIiXG4gICAgYXNzZXJ0IFVuaWNvZGVUb1N0cmluZyBpcyBOb25lLCAidGhpcyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGdvIGF3YXkiXG4gICAgIyBJZiBJblByb2MgaXMgcmVnaXN0ZXJlZCwgRENPTSB3aWxsIHVzZSBpdCByZWdhcmRsZXNzIG9mIHRoZSBtYWNoaW5lIG5hbWVcbiAgICAjIChhbmQgcmVnYXJkbGVzcyBvZiB0aGUgRENPTSBjb25maWcgZm9yIHRoZSBvYmplY3QuKSAgU28gdW5sZXNzIHRoZSB1c2VyXG4gICAgIyBzcGVjaWZpZXMgb3RoZXJ3aXNlLCB3ZSBleGNsdWRlIGlucHJvYyBhcHBzIHdoZW4gYSByZW1vdGUgbWFjaGluZSBpcyB1c2VkLlxuICAgIGlmIGNsc2N0eCBpcyBOb25lOlxuICAgICAgICBjbHNjdHggPSBweXRob25jb20uQ0xTQ1RYX1NFUlZFUlxuICAgICAgICBpZiBtYWNoaW5lIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgY2xzY3R4ID0gY2xzY3R4ICYgfnB5dGhvbmNvbS5DTFNDVFhfSU5QUk9DXG4gICAgaWYgbWFjaGluZSBpcyBOb25lOlxuICAgICAgICBzZXJ2ZXJJbmZvID0gTm9uZVxuICAgIGVsc2U6XG4gICAgICAgIHNlcnZlckluZm8gPSAobWFjaGluZSwpXG4gICAgaWYgdXNlck5hbWUgaXMgTm9uZTpcbiAgICAgICAgdXNlck5hbWUgPSBjbHNpZFxuICAgIGRpc3BhdGNoID0gcHl0aG9uY29tLkNvQ3JlYXRlSW5zdGFuY2VFeChcbiAgICAgICAgY2xzaWQsIE5vbmUsIGNsc2N0eCwgc2VydmVySW5mbywgKHB5dGhvbmNvbS5JSURfSURpc3BhdGNoLClcbiAgICApWzBdXG4gICAgcmV0dXJuIERpc3BhdGNoKGRpc3BhdGNoLCB1c2VyTmFtZSwgcmVzdWx0Q0xTSUQsIHR5cGVpbmZvLCBjbHNjdHg9Y2xzY3R4KVxuXG5cbmNsYXNzIENEaXNwYXRjaChkeW5hbWljLkNEaXNwYXRjaCk6XG4gICAgIiIiXG4gICAgVGhlIGR5bmFtaWMgY2xhc3MgdXNlZCBhcyBhIGxhc3QgcmVzb3J0LlxuICAgIFRoZSBwdXJwb3NlIG9mIHRoaXMgb3ZlcnJpZGluZyBvZiBkeW5hbWljLkNEaXNwYXRjaCBpcyB0byBwZXJwZXR1YXRlIHRoZSBwb2xpY3lcbiAgICBvZiB1c2luZyB0aGUgbWFrZXB5IGdlbmVyYXRlZCB3cmFwcGVyIFB5dGhvbiBjbGFzcyBpbnN0ZWFkIG9mIGR5bmFtaWMuQ0Rpc3BhdGNoXG4gICAgaWYvd2hlbiBwb3NzaWJsZS5cbiAgICAiIiJcblxuICAgIGRlZiBfd3JhcF9kaXNwYXRjaF8oXG4gICAgICAgIHNlbGYsIG9iLCB1c2VyTmFtZT1Ob25lLCByZXR1cm5DTFNJRD1Ob25lLCBVbmljb2RlVG9TdHJpbmc9Tm9uZVxuICAgICk6XG4gICAgICAgIGFzc2VydCBVbmljb2RlVG9TdHJpbmcgaXMgTm9uZSwgInRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBnbyBhd2F5IlxuICAgICAgICByZXR1cm4gRGlzcGF0Y2gob2IsIHVzZXJOYW1lLCByZXR1cm5DTFNJRCwgTm9uZSlcblxuICAgIGRlZiBfX2Rpcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gZHluYW1pYy5DRGlzcGF0Y2guX19kaXJfXyhzZWxmKVxuXG5cbmRlZiBDYXN0VG8ob2IsIHRhcmdldCwgdHlwZWxpYj1Ob25lKTpcbiAgICAiIiJcJ0Nhc3RcJyBhIENPTSBvYmplY3QgdG8gYW5vdGhlciBpbnRlcmZhY2UiIiJcbiAgICAjIHRvZG8gLSBzaG91bGQgc3VwcG9ydCB0YXJnZXQgYmVpbmcgYW4gSUlEXG4gICAgbW9kID0gTm9uZVxuICAgIGlmIChcbiAgICAgICAgdHlwZWxpYiBpcyBub3QgTm9uZVxuICAgICk6ICAjIGNhbGxlciBzcGVjaWZpZWQgdGFyZ2V0IHR5cGVsaWIgKFR5cGVsaWJTcGVjKS4gU2VlIGUuZy4gc2VsZWN0dGxiLkVudW1UbGJzKCkuXG4gICAgICAgIG1vZCA9IGdlbmNhY2hlLk1ha2VNb2R1bGVGb3JUeXBlbGliKFxuICAgICAgICAgICAgdHlwZWxpYi5jbHNpZCwgdHlwZWxpYi5sY2lkLCBpbnQodHlwZWxpYi5tYWpvciwgMTYpLCBpbnQodHlwZWxpYi5taW5vciwgMTYpXG4gICAgICAgIClcbiAgICAgICAgaWYgbm90IGhhc2F0dHIobW9kLCB0YXJnZXQpOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihcbiAgICAgICAgICAgICAgICAiVGhlIGludGVyZmFjZSBuYW1lIFwnJXNcJyBkb2VzIG5vdCBhcHBlYXIgaW4gdGhlICJcbiAgICAgICAgICAgICAgICAic3BlY2lmaWVkIGxpYnJhcnkgJXIiICUgKHRhcmdldCwgdHlwZWxpYi52ZXJfZGVzYylcbiAgICAgICAgICAgIClcblxuICAgIGVsaWYgaGFzYXR0cih0YXJnZXQsICJpbmRleCIpOiAgIyBzdHJpbmcgbGlrZVxuICAgICAgICAjIGZvciBub3csIHdlIGFzc3VtZSBtYWtlcHkgZm9yIHRoaXMgdG8gd29yay5cbiAgICAgICAgaWYgIkNMU0lEIiBub3QgaW4gb2IuX19jbGFzc19fLl9fZGljdF9fOlxuICAgICAgICAgICAgIyBFZWVrIC0gbm8gbWFrZXB5IHN1cHBvcnQgLSB0cnkgYW5kIGJ1aWxkIGl0LlxuICAgICAgICAgICAgb2IgPSBnZW5jYWNoZS5FbnN1cmVEaXNwYXRjaChvYilcbiAgICAgICAgaWYgIkNMU0lEIiBub3QgaW4gb2IuX19jbGFzc19fLl9fZGljdF9fOlxuICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTXVzdCBiZSBhIG1ha2VweS1hYmxlIG9iamVjdCBmb3IgdGhpcyB0byB3b3JrIilcbiAgICAgICAgY2xzaWQgPSBvYi5DTFNJRFxuICAgICAgICAjIExvdHMgb2YgaG9vcHMgdG8gc3VwcG9ydCAiZGVtYW5kLWJ1aWxkIiAtIGllLCBnZW5lcmF0aW5nXG4gICAgICAgICMgY29kZSBmb3IgYW4gaW50ZXJmYWNlIGZpcnN0IHRpbWUgaXQgaXMgdXNlZC4gIFdlIGFzc3VtZSB0aGVcbiAgICAgICAgIyBpbnRlcmZhY2UgbmFtZSBleGlzdHMgaW4gdGhlIHNhbWUgbGlicmFyeSBhcyB0aGUgb2JqZWN0LlxuICAgICAgICAjIFRoaXMgaXMgZ2VuZXJhbGx5IHRoZSBjYXNlIC0gb25seSByZWZlcmVuY2VkIHR5cGVsaWJzIG1heSBiZVxuICAgICAgICAjIGEgcHJvYmxlbSwgYW5kIHdlIGNhbiBoYW5kbGUgdGhhdCBsYXRlci4gIE1heWJlIDx3aW5rPlxuICAgICAgICAjIFNvIGdldCB0aGUgZ2VuZXJhdGVkIG1vZHVsZSBmb3IgdGhlIGxpYnJhcnkgaXRzZWxmLCB0aGVuXG4gICAgICAgICMgZmluZCB0aGUgaW50ZXJmYWNlIENMU0lEIHRoZXJlLlxuICAgICAgICBtb2QgPSBnZW5jYWNoZS5HZXRNb2R1bGVGb3JDTFNJRChjbHNpZClcbiAgICAgICAgIyBHZXQgdGhlIFwncm9vdFwnIG1vZHVsZS5cbiAgICAgICAgbW9kID0gZ2VuY2FjaGUuR2V0TW9kdWxlRm9yVHlwZWxpYihcbiAgICAgICAgICAgIG1vZC5DTFNJRCwgbW9kLkxDSUQsIG1vZC5NYWpvclZlcnNpb24sIG1vZC5NaW5vclZlcnNpb25cbiAgICAgICAgKVxuICAgICAgICAjIEZpbmQgdGhlIENMU0lEIG9mIHRoZSB0YXJnZXRcbiAgICAgICAgdGFyZ2V0X2Nsc2lkID0gbW9kLk5hbWVzVG9JSURNYXAuZ2V0KHRhcmdldClcbiAgICAgICAgaWYgdGFyZ2V0X2Nsc2lkIGlzIE5vbmU6XG4gICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKFxuICAgICAgICAgICAgICAgICJUaGUgaW50ZXJmYWNlIG5hbWUgXCclc1wnIGRvZXMgbm90IGFwcGVhciBpbiB0aGUgIlxuICAgICAgICAgICAgICAgICJzYW1lIGxpYnJhcnkgYXMgb2JqZWN0IFwnJXJcJyIgJSAodGFyZ2V0LCBvYilcbiAgICAgICAgICAgIClcbiAgICAgICAgbW9kID0gZ2VuY2FjaGUuR2V0TW9kdWxlRm9yQ0xTSUQodGFyZ2V0X2Nsc2lkKVxuICAgIGlmIG1vZCBpcyBub3QgTm9uZTpcbiAgICAgICAgdGFyZ2V0X2NsYXNzID0gZ2V0YXR0cihtb2QsIHRhcmdldClcbiAgICAgICAgIyByZXNvbHZlIGNvY2xhc3MgdG8gaW50ZXJmYWNlXG4gICAgICAgIHRhcmdldF9jbGFzcyA9IGdldGF0dHIodGFyZ2V0X2NsYXNzLCAiZGVmYXVsdF9pbnRlcmZhY2UiLCB0YXJnZXRfY2xhc3MpXG4gICAgICAgIHJldHVybiB0YXJnZXRfY2xhc3Mob2IpICAjIGF1dG8gUUkgbWFnaWMgaGFwcGVuc1xuICAgIHJhaXNlIFZhbHVlRXJyb3JcblxuXG5jbGFzcyBDb25zdGFudHM6XG4gICAgIiIiQSBjb250YWluZXIgZm9yIGdlbmVyYXRlZCBDT00gY29uc3RhbnRzLiIiIlxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYpOlxuICAgICAgICBzZWxmLl9fZGljdHNfXyA9IFtdICAjIEEgbGlzdCBvZiBkaWN0aW9uYXJpZXNcblxuICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBhKTpcbiAgICAgICAgZm9yIGQgaW4gc2VsZi5fX2RpY3RzX186XG4gICAgICAgICAgICBpZiBhIGluIGQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRbYV1cbiAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoYSlcblxuXG4jIEFuZCBjcmVhdGUgYW4gaW5zdGFuY2UuXG5jb25zdGFudHMgPSBDb25zdGFudHMoKVxuXG4jIEEgaGVscGVycyBmb3IgRGlzcGF0Y2hXaXRoRXZlbnRzIC0gdGhpcyBiZWNvbWVzIF9fc2V0YXR0cl9fIGZvciB0aGVcbiMgdGVtcG9yYXJ5IGNsYXNzLlxuZGVmIF9ldmVudF9zZXRhdHRyXyhzZWxmLCBhdHRyLCB2YWwpOlxuICAgIHRyeTpcbiAgICAgICAgIyBEb2VzIHRoZSBDT00gb2JqZWN0IGhhdmUgYW4gYXR0cmlidXRlIG9mIHRoaXMgbmFtZT9cbiAgICAgICAgc2VsZi5fX2NsYXNzX18uX19iYXNlc19fWzBdLl9fc2V0YXR0cl9fKHNlbGYsIGF0dHIsIHZhbClcbiAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6XG4gICAgICAgICMgT3RoZXJ3aXNlIGp1c3Qgc3Rhc2ggaXQgYXdheSBpbiB0aGUgaW5zdGFuY2UuXG4gICAgICAgIHNlbGYuX19kaWN0X19bYXR0cl0gPSB2YWxcblxuXG4jIEFuIGluc3RhbmNlIG9mIHRoaXMgInByb3h5IiBpcyBjcmVhdGVkIHRvIGJyZWFrIHRoZSBDT00gY2lyY3VsYXIgcmVmZXJlbmNlc1xuIyB0aGF0IGV4aXN0IChpZSwgd2hlbiB3ZSBjb25uZWN0IHRvIHRoZSBDT00gZXZlbnRzLCBDT00ga2VlcHMgYSByZWZlcmVuY2VcbiMgdG8gdGhlIG9iamVjdC4gIFRodXMsIHRoZSBFdmVudCBjb25uZWN0aW9uIG11c3QgYmUgbWFudWFsbHkgYnJva2VuIGJlZm9yZVxuIyBvdXIgb2JqZWN0IGNhbiBkaWUuICBUaGlzIHNvbHZlcyB0aGUgcHJvYmxlbSBieSBtYW51YWxseSBicmVha2luZyB0aGUgY29ubmVjdGlvblxuIyB0byB0aGUgcmVhbCBvYmplY3QgYXMgdGhlIHByb3h5IGRpZXMuXG5jbGFzcyBFdmVudHNQcm94eTpcbiAgICBkZWYgX19pbml0X18oc2VsZiwgb2IpOlxuICAgICAgICBzZWxmLl9fZGljdF9fWyJfb2JqXyJdID0gb2JcblxuICAgIGRlZiBfX2RlbF9fKHNlbGYpOlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICAjIElmIHRoZXJlIGlzIGEgQ09NIGVycm9yIG9uIGRpc2Nvbm5lY3Rpb24gd2Ugc2hvdWxkXG4gICAgICAgICAgICAjIGp1c3QgaWdub3JlIGl0IC0gb2JqZWN0IHByb2JhYmx5IGFscmVhZHkgc2h1dCBkb3duLi4uXG4gICAgICAgICAgICBzZWxmLl9vYmpfLmNsb3NlKClcbiAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICBwYXNzXG5cbiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgYXR0cik6XG4gICAgICAgIHJldHVybiBnZXRhdHRyKHNlbGYuX29ial8sIGF0dHIpXG5cbiAgICBkZWYgX19zZXRhdHRyX18oc2VsZiwgYXR0ciwgdmFsKTpcbiAgICAgICAgc2V0YXR0cihzZWxmLl9vYmpfLCBhdHRyLCB2YWwpXG5cblxuZGVmIERpc3BhdGNoV2l0aEV2ZW50cyhjbHNpZCwgdXNlcl9ldmVudF9jbGFzcyk6XG4gICAgIiIiQ3JlYXRlIGEgQ09NIG9iamVjdCB0aGF0IGNhbiBmaXJlIGV2ZW50cyB0byBhIHVzZXIgZGVmaW5lZCBjbGFzcy5cbiAgICBjbHNpZCAtLSBUaGUgUHJvZ0lEIG9yIENMU0lEIG9mIHRoZSBvYmplY3QgdG8gY3JlYXRlLlxuICAgIHVzZXJfZXZlbnRfY2xhc3MgLS0gQSBQeXRob24gY2xhc3Mgb2JqZWN0IHRoYXQgcmVzcG9uZHMgdG8gdGhlIGV2ZW50cy5cblxuICAgIFRoaXMgcmVxdWlyZXMgbWFrZXB5IHN1cHBvcnQgZm9yIHRoZSBDT00gb2JqZWN0IGJlaW5nIGNyZWF0ZWQuICBJZlxuICAgIHRoaXMgc3VwcG9ydCBkb2VzIG5vdCBleGlzdCBpdCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5XG4gICAgdGhpcyBmdW5jdGlvbi4gIElmIHRoZSBvYmplY3QgZG9lcyBub3Qgc3VwcG9ydCBtYWtlcHksIGEgVHlwZUVycm9yXG4gICAgZXhjZXB0aW9uIHdpbGwgYmUgcmFpc2VkLlxuXG4gICAgVGhlIHJlc3VsdCBpcyBhIGNsYXNzIGluc3RhbmNlIHRoYXQgYm90aCByZXByZXNlbnRzIHRoZSBDT00gb2JqZWN0XG4gICAgYW5kIGhhbmRsZXMgZXZlbnRzIGZyb20gdGhlIENPTSBvYmplY3QuXG5cbiAgICBJdCBpcyBpbXBvcnRhbnQgdG8gbm90ZSB0aGF0IHRoZSByZXR1cm5lZCBpbnN0YW5jZSBpcyBub3QgYSBkaXJlY3RcbiAgICBpbnN0YW5jZSBvZiB0aGUgdXNlcl9ldmVudF9jbGFzcywgYnV0IGFuIGluc3RhbmNlIG9mIGEgdGVtcG9yYXJ5XG4gICAgY2xhc3Mgb2JqZWN0IHRoYXQgZGVyaXZlcyBmcm9tIHRocmVlIGNsYXNzZXM6XG4gICAgKiBUaGUgbWFrZXB5IGdlbmVyYXRlZCBjbGFzcyBmb3IgdGhlIENPTSBvYmplY3RcbiAgICAqIFRoZSBtYWtlcHkgZ2VuZXJhdGVkIGNsYXNzIGZvciB0aGUgQ09NIGV2ZW50c1xuICAgICogVGhlIHVzZXJfZXZlbnRfY2xhc3MgYXMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24uXG5cbiAgICBJZiB0aGlzIGlzIG5vdCBzdWl0YWJsZSwgc2VlIHRoZSBnZXRldmVudHMgZnVuY3Rpb24gZm9yIGFuIGFsdGVybmF0aXZlXG4gICAgdGVjaG5pcXVlIG9mIGhhbmRsaW5nIGV2ZW50cy5cblxuICAgIE9iamVjdCBMaWZldGltZXM6ICBXaGVuZXZlciB0aGUgb2JqZWN0IHJldHVybmVkIGZyb20gdGhpcyBmdW5jdGlvbiBpc1xuICAgIGNsZWFuZWQtdXAgYnkgUHl0aG9uLCB0aGUgZXZlbnRzIHdpbGwgYmUgZGlzY29ubmVjdGVkIGZyb21cbiAgICB0aGUgQ09NIG9iamVjdC4gIFRoaXMgaXMgYWxtb3N0IGFsd2F5cyB3aGF0IHNob3VsZCBoYXBwZW4sXG4gICAgYnV0IHNlZSB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgZ2V0ZXZlbnRzKCkgZm9yIG1vcmUgZGV0YWlscy5cblxuICAgIEV4YW1wbGU6XG5cbiAgICA+Pj4gY2xhc3MgSUVFdmVudHM6XG4gICAgLi4uICAgIGRlZiBPblZpc2libGUoc2VsZiwgdmlzaWJsZSk6XG4gICAgLi4uICAgICAgIHByaW50ICJWaXNpYmxlIGNoYW5nZWQ6IiwgdmlzaWJsZVxuICAgIC4uLlxuICAgID4+PiBpZSA9IERpc3BhdGNoV2l0aEV2ZW50cygiSW50ZXJuZXRFeHBsb3Jlci5BcHBsaWNhdGlvbiIsIElFRXZlbnRzKVxuICAgID4+PiBpZS5WaXNpYmxlID0gMVxuICAgIFZpc2libGUgY2hhbmdlZDogMVxuICAgID4+PlxuICAgICIiIlxuICAgICMgQ3JlYXRlL0dldCB0aGUgb2JqZWN0LlxuICAgIGRpc3AgPSBEaXNwYXRjaChjbHNpZClcbiAgICBpZiBub3QgZGlzcC5fX2NsYXNzX18uX19kaWN0X18uZ2V0KFxuICAgICAgICAiQ0xTSUQiXG4gICAgKTogICMgRWVlayAtIG5vIG1ha2VweSBzdXBwb3J0IC0gdHJ5IGFuZCBidWlsZCBpdC5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgdGkgPSBkaXNwLl9vbGVvYmpfLkdldFR5cGVJbmZvKClcbiAgICAgICAgICAgIGRpc3BfY2xzaWQgPSB0aS5HZXRUeXBlQXR0cigpWzBdXG4gICAgICAgICAgICB0bGIsIGluZGV4ID0gdGkuR2V0Q29udGFpbmluZ1R5cGVMaWIoKVxuICAgICAgICAgICAgdGxhID0gdGxiLkdldExpYkF0dHIoKVxuICAgICAgICAgICAgZ2VuY2FjaGUuRW5zdXJlTW9kdWxlKHRsYVswXSwgdGxhWzFdLCB0bGFbM10sIHRsYVs0XSwgYlZhbGlkYXRlRmlsZT0wKVxuICAgICAgICAgICAgIyBHZXQgdGhlIGNsYXNzIGZyb20gdGhlIG1vZHVsZS5cbiAgICAgICAgICAgIGRpc3BfY2xhc3MgPSBnZW5jYWNoZS5HZXRDbGFzc0ZvclByb2dJRChzdHIoZGlzcF9jbHNpZCkpXG4gICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAgICJUaGlzIENPTSBvYmplY3QgY2FuIG5vdCBhdXRvbWF0ZSB0aGUgbWFrZXB5IHByb2Nlc3MgLSBwbGVhc2UgcnVuIG1ha2VweSBtYW51YWxseSBmb3IgdGhpcyBvYmplY3QiXG4gICAgICAgICAgICApXG4gICAgZWxzZTpcbiAgICAgICAgZGlzcF9jbGFzcyA9IGRpc3AuX19jbGFzc19fXG4gICAgIyBJZiB0aGUgY2xzaWQgd2FzIGFuIG9iamVjdCwgZ2V0IHRoZSBjbHNpZFxuICAgIGNsc2lkID0gZGlzcF9jbGFzcy5DTFNJRFxuICAgICMgQ3JlYXRlIGEgbmV3IGNsYXNzIHRoYXQgZGVyaXZlcyBmcm9tIDMgY2xhc3NlcyAtIHRoZSBkaXNwYXRjaCBjbGFzcywgdGhlIGV2ZW50IHNpbmsgY2xhc3MgYW5kIHRoZSB1c2VyIGNsYXNzLlxuICAgICMgWFhYIC0gd2UgYXJlIHN0aWxsICJjbGFzc2ljIHN0eWxlIiBjbGFzc2VzIGluIHB5MngsIHNvIHdlIG5lZWQgY2FuXCd0IHlldFxuICAgICMgdXNlIFwndHlwZSgpXCcgZXZlcnl3aGVyZSAtIHJldmlzaXQgc29vbiwgYXMgcHkyeCB3aWxsIG1vdmUgdG8gbmV3LXN0eWxlIHRvby4uLlxuICAgIHRyeTpcbiAgICAgICAgZnJvbSB0eXBlcyBpbXBvcnQgQ2xhc3NUeXBlIGFzIG5ld190eXBlXG4gICAgZXhjZXB0IEltcG9ydEVycm9yOlxuICAgICAgICBuZXdfdHlwZSA9IHR5cGUgICMgcHkza1xuICAgIGV2ZW50c19jbGFzcyA9IGdldGV2ZW50cyhjbHNpZClcbiAgICBpZiBldmVudHNfY2xhc3MgaXMgTm9uZTpcbiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGhpcyBDT00gb2JqZWN0IGRvZXMgbm90IHN1cHBvcnQgZXZlbnRzLiIpXG4gICAgcmVzdWx0X2NsYXNzID0gbmV3X3R5cGUoXG4gICAgICAgICJDT01FdmVudENsYXNzIixcbiAgICAgICAgKGRpc3BfY2xhc3MsIGV2ZW50c19jbGFzcywgdXNlcl9ldmVudF9jbGFzcyksXG4gICAgICAgIHsiX19zZXRhdHRyX18iOiBfZXZlbnRfc2V0YXR0cl99LFxuICAgIClcbiAgICBpbnN0YW5jZSA9IHJlc3VsdF9jbGFzcyhcbiAgICAgICAgZGlzcC5fb2xlb2JqX1xuICAgICkgICMgVGhpcyBvbmx5IGNhbGxzIHRoZSBmaXJzdCBiYXNlIGNsYXNzIF9faW5pdF9fLlxuICAgIGV2ZW50c19jbGFzcy5fX2luaXRfXyhpbnN0YW5jZSwgaW5zdGFuY2UpXG4gICAgaWYgaGFzYXR0cih1c2VyX2V2ZW50X2NsYXNzLCAiX19pbml0X18iKTpcbiAgICAgICAgdXNlcl9ldmVudF9jbGFzcy5fX2luaXRfXyhpbnN0YW5jZSlcbiAgICByZXR1cm4gRXZlbnRzUHJveHkoaW5zdGFuY2UpXG5cblxuZGVmIFdpdGhFdmVudHMoZGlzcCwgdXNlcl9ldmVudF9jbGFzcyk6XG4gICAgIiIiU2ltaWxhciB0byBEaXNwYXRjaFdpdGhFdmVudHMgLSBleGNlcHQgdGhhdCB0aGUgcmV0dXJuZWRcbiAgICBvYmplY3QgaXMgKm5vdCogYWxzbyB1c2FibGUgYXMgdGhlIG9yaWdpbmFsIERpc3BhdGNoIG9iamVjdCAtIHRoYXQgaXNcbiAgICB0aGUgcmV0dXJuZWQgb2JqZWN0IGlzIG5vdCBkaXNwYXRjaGFibGUuXG5cbiAgICBUaGUgZGlmZmVyZW5jZSBpcyBiZXN0IHN1bW1hcmlzZWQgYnkgZXhhbXBsZS5cblxuICAgID4+PiBjbGFzcyBJRUV2ZW50czpcbiAgICAuLi4gICAgZGVmIE9uVmlzaWJsZShzZWxmLCB2aXNpYmxlKTpcbiAgICAuLi4gICAgICAgcHJpbnQgIlZpc2libGUgY2hhbmdlZDoiLCB2aXNpYmxlXG4gICAgLi4uXG4gICAgPj4+IGllID0gRGlzcGF0Y2goIkludGVybmV0RXhwbG9yZXIuQXBwbGljYXRpb24iKVxuICAgID4+PiBpZV9ldmVudHMgPSBXaXRoRXZlbnRzKGllLCBJRUV2ZW50cylcbiAgICA+Pj4gaWUuVmlzaWJsZSA9IDFcbiAgICBWaXNpYmxlIGNoYW5nZWQ6IDFcblxuICAgIENvbXBhcmUgd2l0aCB0aGUgY29kZSBzYW1wbGUgZm9yIERpc3BhdGNoV2l0aEV2ZW50cywgd2hlcmUgeW91IGdldCBhXG4gICAgc2luZ2xlIG9iamVjdCB0aGF0IGlzIGJvdGggdGhlIGludGVyZmFjZSBhbmQgdGhlIGV2ZW50IGhhbmRsZXIuICBOb3RlIHRoYXRcbiAgICB0aGUgZXZlbnQgaGFuZGxlciBpbnN0YW5jZSB3aWxsICpub3QqIGJlIGFibGUgdG8gdXNlIFwnc2VsZi5cJyB0byByZWZlciB0b1xuICAgIElFXCdzIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMuXG5cbiAgICBUaGlzIGlzIG1haW5seSB1c2VmdWwgd2hlcmUgdXNpbmcgRGlzcGF0Y2hXaXRoRXZlbnRzIGNhdXNlc1xuICAgIGNpcmN1bGFyIHJlZmVyZW5jZSBwcm9ibGVtcyB0aGF0IHRoZSBzaW1wbGUgcHJveHkgZG9lc25cJ3QgZGVhbCB3aXRoXG4gICAgIiIiXG4gICAgZGlzcCA9IERpc3BhdGNoKGRpc3ApXG4gICAgaWYgbm90IGRpc3AuX19jbGFzc19fLl9fZGljdF9fLmdldChcbiAgICAgICAgIkNMU0lEIlxuICAgICk6ICAjIEVlZWsgLSBubyBtYWtlcHkgc3VwcG9ydCAtIHRyeSBhbmQgYnVpbGQgaXQuXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHRpID0gZGlzcC5fb2xlb2JqXy5HZXRUeXBlSW5mbygpXG4gICAgICAgICAgICBkaXNwX2Nsc2lkID0gdGkuR2V0VHlwZUF0dHIoKVswXVxuICAgICAgICAgICAgdGxiLCBpbmRleCA9IHRpLkdldENvbnRhaW5pbmdUeXBlTGliKClcbiAgICAgICAgICAgIHRsYSA9IHRsYi5HZXRMaWJBdHRyKClcbiAgICAgICAgICAgIGdlbmNhY2hlLkVuc3VyZU1vZHVsZSh0bGFbMF0sIHRsYVsxXSwgdGxhWzNdLCB0bGFbNF0sIGJWYWxpZGF0ZUZpbGU9MClcbiAgICAgICAgICAgICMgR2V0IHRoZSBjbGFzcyBmcm9tIHRoZSBtb2R1bGUuXG4gICAgICAgICAgICBkaXNwX2NsYXNzID0gZ2VuY2FjaGUuR2V0Q2xhc3NGb3JQcm9nSUQoc3RyKGRpc3BfY2xzaWQpKVxuICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjpcbiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICAiVGhpcyBDT00gb2JqZWN0IGNhbiBub3QgYXV0b21hdGUgdGhlIG1ha2VweSBwcm9jZXNzIC0gcGxlYXNlIHJ1biBtYWtlcHkgbWFudWFsbHkgZm9yIHRoaXMgb2JqZWN0IlxuICAgICAgICAgICAgKVxuICAgIGVsc2U6XG4gICAgICAgIGRpc3BfY2xhc3MgPSBkaXNwLl9fY2xhc3NfX1xuICAgICMgR2V0IHRoZSBjbHNpZFxuICAgIGNsc2lkID0gZGlzcF9jbGFzcy5DTFNJRFxuICAgICMgQ3JlYXRlIGEgbmV3IGNsYXNzIHRoYXQgZGVyaXZlcyBmcm9tIDIgY2xhc3NlcyAtIHRoZSBldmVudCBzaW5rXG4gICAgIyBjbGFzcyBhbmQgdGhlIHVzZXIgY2xhc3MuXG4gICAgdHJ5OlxuICAgICAgICBmcm9tIHR5cGVzIGltcG9ydCBDbGFzc1R5cGUgYXMgbmV3X3R5cGVcbiAgICBleGNlcHQgSW1wb3J0RXJyb3I6XG4gICAgICAgIG5ld190eXBlID0gdHlwZSAgIyBweTNrXG4gICAgZXZlbnRzX2NsYXNzID0gZ2V0ZXZlbnRzKGNsc2lkKVxuICAgIGlmIGV2ZW50c19jbGFzcyBpcyBOb25lOlxuICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGlzIENPTSBvYmplY3QgZG9lcyBub3Qgc3VwcG9ydCBldmVudHMuIilcbiAgICByZXN1bHRfY2xhc3MgPSBuZXdfdHlwZSgiQ09NRXZlbnRDbGFzcyIsIChldmVudHNfY2xhc3MsIHVzZXJfZXZlbnRfY2xhc3MpLCB7fSlcbiAgICBpbnN0YW5jZSA9IHJlc3VsdF9jbGFzcyhkaXNwKSAgIyBUaGlzIG9ubHkgY2FsbHMgdGhlIGZpcnN0IGJhc2UgY2xhc3MgX19pbml0X18uXG4gICAgaWYgaGFzYXR0cih1c2VyX2V2ZW50X2NsYXNzLCAiX19pbml0X18iKTpcbiAgICAgICAgdXNlcl9ldmVudF9jbGFzcy5fX2luaXRfXyhpbnN0YW5jZSlcbiAgICByZXR1cm4gaW5zdGFuY2VcblxuXG5kZWYgZ2V0ZXZlbnRzKGNsc2lkKTpcbiAgICAiIiJEZXRlcm1pbmUgdGhlIGRlZmF1bHQgb3V0Z29pbmcgaW50ZXJmYWNlIGZvciBhIGNsYXNzLCBnaXZlblxuICAgIGVpdGhlciBhIGNsc2lkIG9yIHByb2dpZC4gSXQgcmV0dXJucyBhIGNsYXNzIC0geW91IGNhblxuICAgIGNvbnZlbmllbnRseSBkZXJpdmUgeW91ciBvd24gaGFuZGxlciBmcm9tIHRoaXMgY2xhc3MgYW5kIGltcGxlbWVudFxuICAgIHRoZSBhcHByb3ByaWF0ZSBtZXRob2RzLlxuXG4gICAgVGhpcyBtZXRob2QgcmVsaWVzIG9uIHRoZSBjbGFzc2VzIHByb2R1Y2VkIGJ5IG1ha2VweS4gWW91IG11c3QgdXNlXG4gICAgZWl0aGVyIG1ha2VweSBvciB0aGUgZ2VuY2FjaGUgbW9kdWxlIHRvIGVuc3VyZSB0aGF0IHRoZVxuICAgIGFwcHJvcHJpYXRlIHN1cHBvcnQgY2xhc3NlcyBoYXZlIGJlZW4gZ2VuZXJhdGVkIGZvciB0aGUgY29tIHNlcnZlclxuICAgIHRoYXQgeW91IHdpbGwgYmUgaGFuZGxpbmcgZXZlbnRzIGZyb20uXG5cbiAgICBCZXdhcmUgb2YgQ09NIGNpcmN1bGFyIHJlZmVyZW5jZXMuICBXaGVuIHRoZSBFdmVudHMgY2xhc3MgaXMgY29ubmVjdGVkXG4gICAgdG8gdGhlIENPTSBvYmplY3QsIHRoZSBDT00gb2JqZWN0IGl0c2VsZiBrZWVwcyBhIHJlZmVyZW5jZSB0byB0aGUgUHl0aG9uXG4gICAgZXZlbnRzIGNsYXNzLiAgVGh1cywgbmVpdGhlciB0aGUgRXZlbnRzIGluc3RhbmNlIG9yIHRoZSBDT00gb2JqZWN0IHdpbGxcbiAgICBldmVyIGRpZSBieSB0aGVtc2VsdmVzLiAgVGhlIFwnY2xvc2VcJyBtZXRob2Qgb24gdGhlIGV2ZW50cyBpbnN0YW5jZVxuICAgIG11c3QgYmUgY2FsbGVkIHRvIGJyZWFrIHRoaXMgY2hhaW4gYW5kIGFsbG93IHN0YW5kYXJkIFB5dGhvbiBjb2xsZWN0aW9uXG4gICAgcnVsZXMgdG8gbWFuYWdlIG9iamVjdCBsaWZldGltZXMuICBOb3RlIHRoYXQgRGlzcGF0Y2hXaXRoRXZlbnRzKCkgZG9lc1xuICAgIHdvcmsgYXJvdW5kIHRoaXMgcHJvYmxlbSBieSB0aGUgdXNlIG9mIGEgcHJveHkgb2JqZWN0LCBidXQgaWYgeW91IHVzZVxuICAgIHRoZSBnZXRldmVudHMoKSBmdW5jdGlvbiB5b3Vyc2VsZiwgeW91IG11c3QgbWFrZSB5b3VyIG93biBhcnJhbmdlbWVudHNcbiAgICB0byBtYW5hZ2UgdGhpcyBjaXJjdWxhciByZWZlcmVuY2UgaXNzdWUuXG5cbiAgICBCZXdhcmUgb2YgY3JlYXRpbmcgUHl0aG9uIGNpcmN1bGFyIHJlZmVyZW5jZXM6IHRoaXMgd2lsbCBoYXBwZW4gaWYgeW91clxuICAgIGhhbmRsZXIgaGFzIGEgcmVmZXJlbmNlIHRvIGFuIG9iamVjdCB0aGF0IGhhcyBhIHJlZmVyZW5jZSBiYWNrIHRvXG4gICAgdGhlIGV2ZW50IHNvdXJjZS4gQ2FsbCB0aGUgXCdjbG9zZVwnIG1ldGhvZCB0byBicmVhayB0aGUgY2hhaW4uXG5cbiAgICBFeGFtcGxlOlxuXG4gICAgPj4+d2luMzJjb20uY2xpZW50LmdlbmNhY2hlLkVuc3VyZU1vZHVsZShcJ3tFQUIyMkFDMC0zMEMxLTExQ0YtQTdFQi0wMDAwQzA1QkFFMEJ9XCcsMCwxLDEpXG4gICAgPG1vZHVsZSBcJ3dpbjMyY29tLmdlbl9weS4uLi4uXG4gICAgPj4+XG4gICAgPj4+IGNsYXNzIEludGVybmV0RXhwbG9yZXJFdmVudHMod2luMzJjb20uY2xpZW50LmdldGV2ZW50cygiSW50ZXJuZXRFeHBsb3Jlci5BcHBsaWNhdGlvbi4xIikpOlxuICAgIC4uLiAgICBkZWYgT25WaXNpYmxlKHNlbGYsIFZpc2libGUpOlxuICAgIC4uLiAgICAgICAgcHJpbnQgIlZpc2liaWxpdHkgY2hhbmdlZDogIiwgVmlzaWJsZVxuICAgIC4uLlxuICAgID4+PlxuICAgID4+PiBpZT13aW4zMmNvbS5jbGllbnQuRGlzcGF0Y2goIkludGVybmV0RXhwbG9yZXIuQXBwbGljYXRpb24uMSIpXG4gICAgPj4+IGV2ZW50cz1JbnRlcm5ldEV4cGxvcmVyRXZlbnRzKGllKVxuICAgID4+PiBpZS5WaXNpYmxlPTFcbiAgICBWaXNpYmlsaXR5IGNoYW5nZWQ6ICAxXG4gICAgPj4+XG4gICAgIiIiXG5cbiAgICAjIGZpbmQgY2xzaWQgZ2l2ZW4gcHJvZ2lkIG9yIGNsc2lkXG4gICAgY2xzaWQgPSBzdHIocHl3aW50eXBlcy5JSUQoY2xzaWQpKVxuICAgICMgcmV0dXJuIGRlZmF1bHQgb3V0Z29pbmcgaW50ZXJmYWNlIGZvciB0aGF0IGNsYXNzXG4gICAga2xhc3MgPSBnZW5jYWNoZS5HZXRDbGFzc0ZvckNMU0lEKGNsc2lkKVxuICAgIHRyeTpcbiAgICAgICAgcmV0dXJuIGtsYXNzLmRlZmF1bHRfc291cmNlXG4gICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAjIFNlZSBpZiB3ZSBoYXZlIGEgY29jbGFzcyBmb3IgdGhlIGludGVyZmFjZXMuXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHJldHVybiBnZW5jYWNoZS5HZXRDbGFzc0ZvckNMU0lEKGtsYXNzLmNvY2xhc3NfY2xzaWQpLmRlZmF1bHRfc291cmNlXG4gICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjpcbiAgICAgICAgICAgIHJldHVybiBOb25lXG5cblxuIyBBIFJlY29yZCBvYmplY3QsIGFzIHVzZWQgYnkgdGhlIENPTSBzdHJ1Y3Qgc3VwcG9ydFxuZGVmIFJlY29yZChuYW1lLCBvYmplY3QpOlxuICAgICIiIkNyZWF0ZXMgYSBuZXcgcmVjb3JkIG9iamVjdCwgZ2l2ZW4gdGhlIG5hbWUgb2YgdGhlIHJlY29yZCxcbiAgICBhbmQgYW4gb2JqZWN0IGZyb20gdGhlIHNhbWUgdHlwZSBsaWJyYXJ5LlxuXG4gICAgRXhhbXBsZSB1c2FnZSB3b3VsZCBiZTpcbiAgICAgIGFwcCA9IHdpbjMyY29tLmNsaWVudC5EaXNwYXRjaCgiU29tZS5BcHBsaWNhdGlvbiIpXG4gICAgICBwb2ludCA9IHdpbjMyY29tLmNsaWVudC5SZWNvcmQoIlNvbWVBcHBQb2ludCIsIGFwcClcbiAgICAgIHBvaW50LnggPSAwXG4gICAgICBwb2ludC55ID0gMFxuICAgICAgYXBwLk1vdmVUbyhwb2ludClcbiAgICAiIiJcbiAgICAjIFhYWCAtIHRvIGRvIC0gcHJvYmFibHkgc2hvdWxkIGFsbG93ICJvYmplY3QiIHRvIGFscmVhZHkgYmUgYSBtb2R1bGUgb2JqZWN0LlxuICAgIGZyb20gLiBpbXBvcnQgZ2VuY2FjaGVcblxuICAgIG9iamVjdCA9IGdlbmNhY2hlLkVuc3VyZURpc3BhdGNoKG9iamVjdClcbiAgICBtb2R1bGUgPSBzeXMubW9kdWxlc1tvYmplY3QuX19jbGFzc19fLl9fbW9kdWxlX19dXG4gICAgIyB0byBhbGxvdyB1cyB0byB3b3JrIGNvcnJlY3RseSB3aXRoICJkZW1hbmQgZ2VuZXJhdGVkIiBjb2RlLFxuICAgICMgd2UgbXVzdCB1c2UgdGhlIHR5cGVsaWIgQ0xTSUQgdG8gb2J0YWluIHRoZSBtb2R1bGVcbiAgICAjIChvdGhlcndpc2Ugd2UgZ2V0IHRoZSBzdWItbW9kdWxlIGZvciB0aGUgb2JqZWN0LCB3aGljaFxuICAgICMgZG9lcyBub3QgaG9sZCB0aGUgcmVjb3JkcylcbiAgICAjIHRodXMsIHBhY2thZ2UgbWF5IGJlIG1vZHVsZSwgb3IgbWF5IGJlIG1vZHVsZVwncyBwYXJlbnQgaWYgZGVtYW5kIGdlbmVyYXRlZC5cbiAgICBwYWNrYWdlID0gZ2VuY2FjaGUuR2V0TW9kdWxlRm9yVHlwZWxpYihcbiAgICAgICAgbW9kdWxlLkNMU0lELCBtb2R1bGUuTENJRCwgbW9kdWxlLk1ham9yVmVyc2lvbiwgbW9kdWxlLk1pbm9yVmVyc2lvblxuICAgIClcbiAgICB0cnk6XG4gICAgICAgIHN0cnVjdF9ndWlkID0gcGFja2FnZS5SZWNvcmRNYXBbbmFtZV1cbiAgICBleGNlcHQgS2V5RXJyb3I6XG4gICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoXG4gICAgICAgICAgICAiVGhlIHN0cnVjdHVyZSBcJyVzXCcgaXMgbm90IGRlZmluZWQgaW4gbW9kdWxlIFwnJXNcJyIgJSAobmFtZSwgcGFja2FnZSlcbiAgICAgICAgKVxuICAgIHJldHVybiBweXRob25jb20uR2V0UmVjb3JkRnJvbUd1aWRzKFxuICAgICAgICBtb2R1bGUuQ0xTSUQsIG1vZHVsZS5NYWpvclZlcnNpb24sIG1vZHVsZS5NaW5vclZlcnNpb24sIG1vZHVsZS5MQ0lELCBzdHJ1Y3RfZ3VpZFxuICAgIClcblxuXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBUaGUgYmFzZSBvZiBhbGwgbWFrZXB5IGdlbmVyYXRlZCBjbGFzc2VzXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuY2xhc3MgRGlzcGF0Y2hCYXNlQ2xhc3M6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG9vYmo9Tm9uZSk6XG4gICAgICAgIGlmIG9vYmogaXMgTm9uZTpcbiAgICAgICAgICAgIG9vYmogPSBweXRob25jb20ubmV3KHNlbGYuQ0xTSUQpXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShvb2JqLCBEaXNwYXRjaEJhc2VDbGFzcyk6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgb29iaiA9IG9vYmouX29sZW9ial8uUXVlcnlJbnRlcmZhY2UoXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuQ0xTSUQsIHB5dGhvbmNvbS5JSURfSURpc3BhdGNoXG4gICAgICAgICAgICAgICAgKSAgIyBNdXN0IGJlIGEgdmFsaWQgQ09NIGluc3RhbmNlXG4gICAgICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvciBhcyBkZXRhaWxzOlxuICAgICAgICAgICAgICAgIGltcG9ydCB3aW5lcnJvclxuXG4gICAgICAgICAgICAgICAgIyBTb21lIHN0dXBpZCBvYmplY3RzIGZhaWwgaGVyZSwgZXZlbiB0aG8gaXQgaXMgX2FscmVhZHlfIElEaXNwYXRjaCEhPz9cbiAgICAgICAgICAgICAgICAjIEVnLCBMb3R1cyBub3Rlcy5cbiAgICAgICAgICAgICAgICAjIFNvIGp1c3QgbGV0IGl0IHVzZSB0aGUgZXhpc3Rpbmcgb2JqZWN0IGlmIEVfTk9JTlRFUkZBQ0VcbiAgICAgICAgICAgICAgICBpZiBkZXRhaWxzLmhyZXN1bHQgIT0gd2luZXJyb3IuRV9OT0lOVEVSRkFDRTpcbiAgICAgICAgICAgICAgICAgICAgcmFpc2VcbiAgICAgICAgICAgICAgICBvb2JqID0gb29iai5fb2xlb2JqX1xuICAgICAgICBzZWxmLl9fZGljdF9fWyJfb2xlb2JqXyJdID0gb29iaiAgIyBzbyB3ZSBkb250IGNhbGwgX19zZXRhdHRyX19cblxuICAgIGRlZiBfX2Rpcl9fKHNlbGYpOlxuICAgICAgICBsc3QgPSAoXG4gICAgICAgICAgICBsaXN0KHNlbGYuX19kaWN0X18ua2V5cygpKVxuICAgICAgICAgICAgKyBkaXIoc2VsZi5fX2NsYXNzX18pXG4gICAgICAgICAgICArIGxpc3Qoc2VsZi5fcHJvcF9tYXBfZ2V0Xy5rZXlzKCkpXG4gICAgICAgICAgICArIGxpc3Qoc2VsZi5fcHJvcF9tYXBfcHV0Xy5rZXlzKCkpXG4gICAgICAgIClcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgbHN0ICs9IFtwLk5hbWUgZm9yIHAgaW4gc2VsZi5Qcm9wZXJ0aWVzX11cbiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgcGFzc1xuICAgICAgICByZXR1cm4gbGlzdChzZXQobHN0KSlcblxuICAgICMgUHJvdmlkZSBhIHByZXR0aWVyIG5hbWUgdGhhbiB0aGUgQ0xTSURcbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgICMgTmVlZCB0byBnZXQgdGhlIGRvY3N0cmluZyBmb3IgdGhlIG1vZHVsZSBmb3IgdGhpcyBjbGFzcy5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgbW9kX2RvYyA9IHN5cy5tb2R1bGVzW3NlbGYuX19jbGFzc19fLl9fbW9kdWxlX19dLl9fZG9jX19cbiAgICAgICAgICAgIGlmIG1vZF9kb2M6XG4gICAgICAgICAgICAgICAgbW9kX25hbWUgPSAid2luMzJjb20uZ2VuX3B5LiIgKyBtb2RfZG9jXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIG1vZF9uYW1lID0gc3lzLm1vZHVsZXNbc2VsZi5fX2NsYXNzX18uX19tb2R1bGVfX10uX19uYW1lX19cbiAgICAgICAgZXhjZXB0IEtleUVycm9yOlxuICAgICAgICAgICAgbW9kX25hbWUgPSAid2luMzJjb20uZ2VuX3B5LnVua25vd24iXG4gICAgICAgIHJldHVybiAiPCVzLiVzIGluc3RhbmNlIGF0IDB4JXM+IiAlIChcbiAgICAgICAgICAgIG1vZF9uYW1lLFxuICAgICAgICAgICAgc2VsZi5fX2NsYXNzX18uX19uYW1lX18sXG4gICAgICAgICAgICBpZChzZWxmKSxcbiAgICAgICAgKVxuXG4gICAgIyBEZWxlZ2F0ZSBjb21wYXJpc29uIHRvIHRoZSBvbGVvYmpzLCBhcyB0aGV5IGtub3cgaG93IHRvIGRvIGlkZW50aXR5LlxuICAgIGRlZiBfX2VxX18oc2VsZiwgb3RoZXIpOlxuICAgICAgICBvdGhlciA9IGdldGF0dHIob3RoZXIsICJfb2xlb2JqXyIsIG90aGVyKVxuICAgICAgICByZXR1cm4gc2VsZi5fb2xlb2JqXyA9PSBvdGhlclxuXG4gICAgZGVmIF9fbmVfXyhzZWxmLCBvdGhlcik6XG4gICAgICAgIG90aGVyID0gZ2V0YXR0cihvdGhlciwgIl9vbGVvYmpfIiwgb3RoZXIpXG4gICAgICAgIHJldHVybiBzZWxmLl9vbGVvYmpfICE9IG90aGVyXG5cbiAgICBkZWYgX0FwcGx5VHlwZXNfKHNlbGYsIGRpc3BpZCwgd0ZsYWdzLCByZXRUeXBlLCBhcmdUeXBlcywgdXNlciwgcmVzdWx0Q0xTSUQsICphcmdzKTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX2dldF9nb29kX29iamVjdF8oXG4gICAgICAgICAgICBzZWxmLl9vbGVvYmpfLkludm9rZVR5cGVzKGRpc3BpZCwgMCwgd0ZsYWdzLCByZXRUeXBlLCBhcmdUeXBlcywgKmFyZ3MpLFxuICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgIHJlc3VsdENMU0lELFxuICAgICAgICApXG5cbiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgYXR0cik6XG4gICAgICAgIGFyZ3MgPSBzZWxmLl9wcm9wX21hcF9nZXRfLmdldChhdHRyKVxuICAgICAgICBpZiBhcmdzIGlzIE5vbmU6XG4gICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihcbiAgICAgICAgICAgICAgICAiXCclc1wnIG9iamVjdCBoYXMgbm8gYXR0cmlidXRlIFwnJXNcJyIgJSAocmVwcihzZWxmKSwgYXR0cilcbiAgICAgICAgICAgIClcbiAgICAgICAgcmV0dXJuIHNlbGYuX0FwcGx5VHlwZXNfKCphcmdzKVxuXG4gICAgZGVmIF9fc2V0YXR0cl9fKHNlbGYsIGF0dHIsIHZhbHVlKTpcbiAgICAgICAgaWYgYXR0ciBpbiBzZWxmLl9fZGljdF9fOlxuICAgICAgICAgICAgc2VsZi5fX2RpY3RfX1thdHRyXSA9IHZhbHVlXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgYXJncywgZGVmQXJncyA9IHNlbGYuX3Byb3BfbWFwX3B1dF9bYXR0cl1cbiAgICAgICAgZXhjZXB0IEtleUVycm9yOlxuICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlwnJXNcJyBvYmplY3QgaGFzIG5vIGF0dHJpYnV0ZSBcJyVzXCciICUgKHJlcHIoc2VsZiksIGF0dHIpXG4gICAgICAgICAgICApXG4gICAgICAgIHNlbGYuX29sZW9ial8uSW52b2tlKCooYXJncyArICh2YWx1ZSwpICsgZGVmQXJncykpXG5cbiAgICBkZWYgX2dldF9nb29kX3NpbmdsZV9vYmplY3RfKHNlbGYsIG9iaiwgb2JVc2VyTmFtZT1Ob25lLCByZXN1bHRDTFNJRD1Ob25lKTpcbiAgICAgICAgcmV0dXJuIF9nZXRfZ29vZF9zaW5nbGVfb2JqZWN0XyhvYmosIG9iVXNlck5hbWUsIHJlc3VsdENMU0lEKVxuXG4gICAgZGVmIF9nZXRfZ29vZF9vYmplY3RfKHNlbGYsIG9iaiwgb2JVc2VyTmFtZT1Ob25lLCByZXN1bHRDTFNJRD1Ob25lKTpcbiAgICAgICAgcmV0dXJuIF9nZXRfZ29vZF9vYmplY3RfKG9iaiwgb2JVc2VyTmFtZSwgcmVzdWx0Q0xTSUQpXG5cblxuIyBYWFggLSBUaGVzZSBzaG91bGQgYmUgY29uc29saWRhdGVkIHdpdGggZHluYW1pYy5weSB2ZXJzaW9ucy5cbmRlZiBfZ2V0X2dvb2Rfc2luZ2xlX29iamVjdF8ob2JqLCBvYlVzZXJOYW1lPU5vbmUsIHJlc3VsdENMU0lEPU5vbmUpOlxuICAgIGlmIF9QeUlEaXNwYXRjaFR5cGUgPT0gdHlwZShvYmopOlxuICAgICAgICByZXR1cm4gRGlzcGF0Y2gob2JqLCBvYlVzZXJOYW1lLCByZXN1bHRDTFNJRClcbiAgICByZXR1cm4gb2JqXG5cblxuZGVmIF9nZXRfZ29vZF9vYmplY3RfKG9iaiwgb2JVc2VyTmFtZT1Ob25lLCByZXN1bHRDTFNJRD1Ob25lKTpcbiAgICBpZiBvYmogaXMgTm9uZTpcbiAgICAgICAgcmV0dXJuIE5vbmVcbiAgICBlbGlmIGlzaW5zdGFuY2Uob2JqLCB0dXBsZSk6XG4gICAgICAgIG9iVXNlck5hbWVUdXBsZSA9IChvYlVzZXJOYW1lLCkgKiBsZW4ob2JqKVxuICAgICAgICByZXN1bHRDTFNJRFR1cGxlID0gKHJlc3VsdENMU0lELCkgKiBsZW4ob2JqKVxuICAgICAgICByZXR1cm4gdHVwbGUobWFwKF9nZXRfZ29vZF9vYmplY3RfLCBvYmosIG9iVXNlck5hbWVUdXBsZSwgcmVzdWx0Q0xTSURUdXBsZSkpXG4gICAgZWxzZTpcbiAgICAgICAgcmV0dXJuIF9nZXRfZ29vZF9zaW5nbGVfb2JqZWN0XyhvYmosIG9iVXNlck5hbWUsIHJlc3VsdENMU0lEKVxuXG5cbmNsYXNzIENvQ2xhc3NCYXNlQ2xhc3M6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIG9vYmo9Tm9uZSk6XG4gICAgICAgIGlmIG9vYmogaXMgTm9uZTpcbiAgICAgICAgICAgIG9vYmogPSBweXRob25jb20ubmV3KHNlbGYuQ0xTSUQpXG4gICAgICAgIGRpc3BvYmogPSBzZWxmLl9fZGljdF9fWyJfZGlzcG9ial8iXSA9IHNlbGYuZGVmYXVsdF9pbnRlcmZhY2Uob29iailcbiAgICAgICAgIyBTZWUgY29tbWVudHMgYmVsb3cgcmUgdGhlIHNwZWNpYWwgbWV0aG9kcy5cbiAgICAgICAgZm9yIG1heWJlIGluIFtcbiAgICAgICAgICAgICJfX2NhbGxfXyIsXG4gICAgICAgICAgICAiX19zdHJfXyIsXG4gICAgICAgICAgICAiX19pbnRfXyIsXG4gICAgICAgICAgICAiX19pdGVyX18iLFxuICAgICAgICAgICAgIl9fbGVuX18iLFxuICAgICAgICAgICAgIl9fbm9uemVyb19fIixcbiAgICAgICAgXTpcbiAgICAgICAgICAgIGlmIGhhc2F0dHIoZGlzcG9iaiwgbWF5YmUpOlxuICAgICAgICAgICAgICAgIHNldGF0dHIoc2VsZiwgbWF5YmUsIGdldGF0dHIoc2VsZiwgIl9fbWF5YmUiICsgbWF5YmUpKVxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIjx3aW4zMmNvbS5nZW5fcHkuJXMuJXM+IiAlIChfX2RvY19fLCBzZWxmLl9fY2xhc3NfXy5fX25hbWVfXylcblxuICAgIGRlZiBfX2dldGF0dHJfXyhzZWxmLCBhdHRyKTpcbiAgICAgICAgZCA9IHNlbGYuX19kaWN0X19bIl9kaXNwb2JqXyJdXG4gICAgICAgIGlmIGQgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICByZXR1cm4gZ2V0YXR0cihkLCBhdHRyKVxuICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihhdHRyKVxuXG4gICAgZGVmIF9fc2V0YXR0cl9fKHNlbGYsIGF0dHIsIHZhbHVlKTpcbiAgICAgICAgaWYgYXR0ciBpbiBzZWxmLl9fZGljdF9fOlxuICAgICAgICAgICAgc2VsZi5fX2RpY3RfX1thdHRyXSA9IHZhbHVlXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgZCA9IHNlbGYuX19kaWN0X19bIl9kaXNwb2JqXyJdXG4gICAgICAgICAgICBpZiBkIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgIGQuX19zZXRhdHRyX18oYXR0ciwgdmFsdWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjpcbiAgICAgICAgICAgIHBhc3NcbiAgICAgICAgc2VsZi5fX2RpY3RfX1thdHRyXSA9IHZhbHVlXG5cbiAgICAgICAgIyBTcGVjaWFsIG1ldGhvZHMgZG9uXCd0IHVzZSBfX2dldGF0dHJfXyBldGMsIHNvIGV4cGxpY2l0bHkgZGVsZWdhdGUgaGVyZS5cbiAgICAgICAgIyBOb3RlIGhvd2V2ZXIsIHRoYXQgbm90IGFsbCBhcmUgc2FmZSB0byBsZXQgYnViYmxlIHVwIC0gdGhpbmdzIGxpa2VcbiAgICAgICAgIyBgYm9vbChvYilgIHdpbGwgYnJlYWsgaWYgdGhlIG9iamVjdCBkZWZpbmVzIF9faW50X18gYnV0IHRoZW4gcmFpc2VzIGFuXG4gICAgICAgICMgYXR0cmlidXRlIGVycm9yIC0gZWcsIHNlZSAjMTc1My5cbiAgICAgICAgIyBJdCBkZXBlbmRzIG9uIHdoYXQgdGhlIHdyYXBwZWQgQ09NIG9iamVjdCBhY3R1YWxseSBkZWZpbmVzIHdoZXRoZXIgdGhlc2VcbiAgICAgICAgIyB3aWxsIGV4aXN0IG9uIHRoZSB1bmRlcmx5aW5nIG9iamVjdCwgc28gX19pbml0X18gZXhwbGljaXRseSBjaGVja3MgaWYgdGhleVxuICAgICAgICAjIGRvIGFuZCBpZiBzbywgd2lyZXMgdGhlbSB1cC5cblxuICAgIGRlZiBfX21heWJlX19jYWxsX18oc2VsZiwgKmFyZ3MsICoqa3dhcmdzKTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX19kaWN0X19bIl9kaXNwb2JqXyJdLl9fY2FsbF9fKCphcmdzLCAqKmt3YXJncylcblxuICAgIGRlZiBfX21heWJlX19zdHJfXyhzZWxmLCAqYXJncyk6XG4gICAgICAgIHJldHVybiBzZWxmLl9fZGljdF9fWyJfZGlzcG9ial8iXS5fX3N0cl9fKCphcmdzKVxuXG4gICAgZGVmIF9fbWF5YmVfX2ludF9fKHNlbGYsICphcmdzKTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX19kaWN0X19bIl9kaXNwb2JqXyJdLl9faW50X18oKmFyZ3MpXG5cbiAgICBkZWYgX19tYXliZV9faXRlcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gc2VsZi5fX2RpY3RfX1siX2Rpc3BvYmpfIl0uX19pdGVyX18oKVxuXG4gICAgZGVmIF9fbWF5YmVfX2xlbl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gc2VsZi5fX2RpY3RfX1siX2Rpc3BvYmpfIl0uX19sZW5fXygpXG5cbiAgICBkZWYgX19tYXliZV9fbm9uemVyb19fKHNlbGYpOlxuICAgICAgICByZXR1cm4gc2VsZi5fX2RpY3RfX1siX2Rpc3BvYmpfIl0uX19ub256ZXJvX18oKVxuXG5cbiMgQSB2ZXJ5IHNpbXBsZSBWQVJJQU5UIGNsYXNzLiAgT25seSB0byBiZSB1c2VkIHdpdGggcG9vcmx5LWltcGxlbWVudGVkIENPTVxuIyBvYmplY3RzLiAgSWYgYW4gb2JqZWN0IGFjY2VwdHMgYW4gYXJnIHdoaWNoIGlzIGEgc2ltcGxlICJWQVJJQU5UIiwgYnV0IHN0aWxsXG4jIGlzIHZlcnkgcGlja2x5IGFib3V0IHRoZSBhY3R1YWwgdmFyaWFudCB0eXBlIChlZywgaXNuXCd0IGhhcHB5IHdpdGggYSBWVF9JNCxcbiMgd2hpY2ggaXQgd291bGQgZ2V0IGZyb20gYSBQeXRob24gaW50ZWdlciksIHlvdSBjYW4gdXNlIHRoaXMgdG8gZm9yY2UgYVxuIyBwYXJ0aWN1bGFyIFZULlxuY2xhc3MgVkFSSUFOVChvYmplY3QpOlxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2dCwgdmFsdWUpOlxuICAgICAgICBzZWxmLnZhcmlhbnR0eXBlID0gdnRcbiAgICAgICAgc2VsZi5fdmFsdWUgPSB2YWx1ZVxuXG4gICAgIyBcJ3ZhbHVlXCcgaXMgYSBwcm9wZXJ0eSBzbyB3aGVuIHNldCBieSBweXRob25jb20gaXQgZ2V0cyBhbnkgbWFnaWMgd3JhcHBpbmdcbiAgICAjIHdoaWNoIG5vcm1hbGx5IGhhcHBlbnMgZm9yIHJlc3VsdCBvYmplY3RzXG4gICAgZGVmIF9nZXRfdmFsdWUoc2VsZik6XG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZVxuXG4gICAgZGVmIF9zZXRfdmFsdWUoc2VsZiwgbmV3dmFsKTpcbiAgICAgICAgc2VsZi5fdmFsdWUgPSBfZ2V0X2dvb2Rfb2JqZWN0XyhuZXd2YWwpXG5cbiAgICBkZWYgX2RlbF92YWx1ZShzZWxmKTpcbiAgICAgICAgZGVsIHNlbGYuX3ZhbHVlXG5cbiAgICB2YWx1ZSA9IHByb3BlcnR5KF9nZXRfdmFsdWUsIF9zZXRfdmFsdWUsIF9kZWxfdmFsdWUpXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAid2luMzJjb20uY2xpZW50LlZBUklBTlQoJXIsICVyKSIgJSAoc2VsZi52YXJpYW50dHlwZSwgc2VsZi5fdmFsdWUpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnd2luMzJjb20vY2xpZW50L2R5bmFtaWMucHknLCBiJyIiIlN1cHBvcnQgZm9yIGR5bmFtaWMgQ09NIGNsaWVudCBzdXBwb3J0LlxuXG5JbnRyb2R1Y3Rpb25cbiBEeW5hbWljIENPTSBjbGllbnQgc3VwcG9ydCBpcyB0aGUgYWJpbGl0eSB0byB1c2UgYSBDT00gc2VydmVyIHdpdGhvdXRcbiBwcmlvciBrbm93bGVkZ2Ugb2YgdGhlIHNlcnZlci4gIFRoaXMgY2FuIGJlIHVzZWQgdG8gdGFsayB0byBhbG1vc3QgYWxsXG4gQ09NIHNlcnZlcnMsIGluY2x1ZGluZyBtdWNoIG9mIE1TIE9mZmljZS5cblxuIEluIGdlbmVyYWwsIHlvdSBzaG91bGQgbm90IHVzZSB0aGlzIG1vZHVsZSBkaXJlY3RseSAtIHNlZSBiZWxvdy5cblxuRXhhbXBsZVxuID4+PiBpbXBvcnQgd2luMzJjb20uY2xpZW50XG4gPj4+IHhsID0gd2luMzJjb20uY2xpZW50LkRpc3BhdGNoKCJFeGNlbC5BcHBsaWNhdGlvbiIpXG4gIyBUaGUgbGluZSBhYm92ZSBpbnZva2VzIHRoZSBmdW5jdGlvbmFsaXR5IG9mIHRoaXMgY2xhc3MuXG4gIyB4bCBpcyBub3cgYW4gb2JqZWN0IHdlIGNhbiB1c2UgdG8gdGFsayB0byBFeGNlbC5cbiA+Pj4geGwuVmlzaWJsZSA9IDEgIyBUaGUgRXhjZWwgd2luZG93IGJlY29tZXMgdmlzaWJsZS5cblxuIiIiXG5pbXBvcnQgc3lzXG5pbXBvcnQgdHJhY2ViYWNrXG5pbXBvcnQgdHlwZXNcblxuaW1wb3J0IHB5dGhvbmNvbVxuaW1wb3J0IHdpbmVycm9yXG5mcm9tIC4gaW1wb3J0IGJ1aWxkXG5cbmZyb20gcHl3aW50eXBlcyBpbXBvcnQgSUlEVHlwZVxuXG5pbXBvcnQgd2luMzJjb20uY2xpZW50ICAjIE5lZWRlZCBhcyBjb2RlIHdlIGV2YWwoKSByZWZlcmVuY2VzIGl0LlxuXG5kZWJ1Z2dpbmcgPSAwICAjIEdlbmVyYWwgZGVidWdnaW5nXG5kZWJ1Z2dpbmdfYXR0ciA9IDAgICMgRGVidWdnaW5nIGR5bmFtaWMgYXR0cmlidXRlIGxvb2t1cHMuXG5cbkxDSUQgPSAweDBcblxuIyBUaGVzZSBlcnJvcnMgZ2VuZXJhbGx5IG1lYW4gdGhlIHByb3BlcnR5IG9yIG1ldGhvZCBleGlzdHMsXG4jIGJ1dCBjYW5cJ3QgYmUgdXNlZCBpbiB0aGlzIGNvbnRleHQgLSBlZywgcHJvcGVydHkgaW5zdGVhZCBvZiBhIG1ldGhvZCwgZXRjLlxuIyBVc2VkIHRvIGRldGVybWluZSBpZiB3ZSBoYXZlIGEgcmVhbCBlcnJvciBvciBub3QuXG5FUlJPUlNfQkFEX0NPTlRFWFQgPSBbXG4gICAgd2luZXJyb3IuRElTUF9FX01FTUJFUk5PVEZPVU5ELFxuICAgIHdpbmVycm9yLkRJU1BfRV9CQURQQVJBTUNPVU5ULFxuICAgIHdpbmVycm9yLkRJU1BfRV9QQVJBTU5PVE9QVElPTkFMLFxuICAgIHdpbmVycm9yLkRJU1BfRV9UWVBFTUlTTUFUQ0gsXG4gICAgd2luZXJyb3IuRV9JTlZBTElEQVJHLFxuXVxuXG5BTExfSU5WT0tFX1RZUEVTID0gW1xuICAgIHB5dGhvbmNvbS5JTlZPS0VfUFJPUEVSVFlHRVQsXG4gICAgcHl0aG9uY29tLklOVk9LRV9QUk9QRVJUWVBVVCxcbiAgICBweXRob25jb20uSU5WT0tFX1BST1BFUlRZUFVUUkVGLFxuICAgIHB5dGhvbmNvbS5JTlZPS0VfRlVOQyxcbl1cblxuXG5kZWYgZGVidWdfcHJpbnQoKmFyZ3MpOlxuICAgIGlmIGRlYnVnZ2luZzpcbiAgICAgICAgZm9yIGFyZyBpbiBhcmdzOlxuICAgICAgICAgICAgcHJpbnQoYXJnLCBlbmQ9IiAiKVxuICAgICAgICBwcmludCgpXG5cblxuZGVmIGRlYnVnX2F0dHJfcHJpbnQoKmFyZ3MpOlxuICAgIGlmIGRlYnVnZ2luZ19hdHRyOlxuICAgICAgICBmb3IgYXJnIGluIGFyZ3M6XG4gICAgICAgICAgICBwcmludChhcmcsIGVuZD0iICIpXG4gICAgICAgIHByaW50KClcblxuXG5kZWYgTWFrZU1ldGhvZChmdW5jLCBpbnN0LCBjbHMpOlxuICAgIHJldHVybiB0eXBlcy5NZXRob2RUeXBlKGZ1bmMsIGluc3QpXG5cblxuIyBnZXQgdGhlIHR5cGUgb2JqZWN0cyBmb3IgSURpc3BhdGNoIGFuZCBJVW5rbm93blxuUHlJRGlzcGF0Y2hUeXBlID0gcHl0aG9uY29tLlR5cGVJSURzW3B5dGhvbmNvbS5JSURfSURpc3BhdGNoXVxuUHlJVW5rbm93blR5cGUgPSBweXRob25jb20uVHlwZUlJRHNbcHl0aG9uY29tLklJRF9JVW5rbm93bl1cblxuX0dvb2REaXNwYXRjaFR5cGVzID0gKHN0ciwgSUlEVHlwZSlcbl9kZWZhdWx0RGlzcGF0Y2hJdGVtID0gYnVpbGQuRGlzcGF0Y2hJdGVtXG5cblxuZGVmIF9HZXRHb29kRGlzcGF0Y2goSURpc3BhdGNoLCBjbHNjdHg9cHl0aG9uY29tLkNMU0NUWF9TRVJWRVIpOlxuICAgICMgcXVpY2sgcmV0dXJuIGZvciBtb3N0IGNvbW1vbiBjYXNlXG4gICAgaWYgaXNpbnN0YW5jZShJRGlzcGF0Y2gsIFB5SURpc3BhdGNoVHlwZSk6XG4gICAgICAgIHJldHVybiBJRGlzcGF0Y2hcbiAgICBpZiBpc2luc3RhbmNlKElEaXNwYXRjaCwgX0dvb2REaXNwYXRjaFR5cGVzKTpcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgSURpc3BhdGNoID0gcHl0aG9uY29tLmNvbm5lY3QoSURpc3BhdGNoKVxuICAgICAgICBleGNlcHQgcHl0aG9uY29tLm9sZV9lcnJvcjpcbiAgICAgICAgICAgIElEaXNwYXRjaCA9IHB5dGhvbmNvbS5Db0NyZWF0ZUluc3RhbmNlKFxuICAgICAgICAgICAgICAgIElEaXNwYXRjaCwgTm9uZSwgY2xzY3R4LCBweXRob25jb20uSUlEX0lEaXNwYXRjaFxuICAgICAgICAgICAgKVxuICAgIGVsc2U6XG4gICAgICAgICMgbWF5IGFscmVhZHkgYmUgYSB3cmFwcGVkIGNsYXNzLlxuICAgICAgICBJRGlzcGF0Y2ggPSBnZXRhdHRyKElEaXNwYXRjaCwgIl9vbGVvYmpfIiwgSURpc3BhdGNoKVxuICAgIHJldHVybiBJRGlzcGF0Y2hcblxuXG5kZWYgX0dldEdvb2REaXNwYXRjaEFuZFVzZXJOYW1lKElEaXNwYXRjaCwgdXNlck5hbWUsIGNsc2N0eCk6XG4gICAgIyBHZXQgYSBkaXNwYXRjaCBvYmplY3QsIGFuZCBhIFwndXNlciBuYW1lXCcgKGllLCB0aGUgbmFtZSBhc1xuICAgICMgZGlzcGxheWVkIHRvIHRoZSB1c2VyIGluIHJlcHIoKSBldGMuXG4gICAgaWYgdXNlck5hbWUgaXMgTm9uZTpcbiAgICAgICAgaWYgaXNpbnN0YW5jZShJRGlzcGF0Y2gsIHN0cik6XG4gICAgICAgICAgICB1c2VyTmFtZSA9IElEaXNwYXRjaFxuICAgICAgICAjIyA/Pz8gZWxzZSB1c2VyTmFtZSByZW1haW5zIE5vbmUgPz8/XG4gICAgZWxzZTpcbiAgICAgICAgdXNlck5hbWUgPSBzdHIodXNlck5hbWUpXG4gICAgcmV0dXJuIChfR2V0R29vZERpc3BhdGNoKElEaXNwYXRjaCwgY2xzY3R4KSwgdXNlck5hbWUpXG5cblxuZGVmIF9HZXREZXNjSW52b2tlVHlwZShlbnRyeSwgaW52b2tlX3R5cGUpOlxuICAgICMgZGV0ZXJtaW5lIHRoZSB3RmxhZ3MgYXJndW1lbnQgcGFzc2VkIGFzIGlucHV0IHRvIElEaXNwYXRjaDo6SW52b2tlXG4gICAgIyBPbmx5IGV2ZXIgY2FsbGVkIGJ5IF9fZ2V0YXR0cl9fIGFuZCBfX3NldGF0dHJfXyBmcm9tIGR5bmFtaWMgb2JqZWN0cyFcbiAgICAjICogYGVudHJ5YCBpcyBhIE1hcEVudHJ5IHdpdGggd2hhdGV2ZXIgdHlwZWluZm8gd2UgaGF2ZSBhYm91dCB0aGUgcHJvcGVydHkgd2UgYXJlIGdldHRpbmcvc2V0dGluZy5cbiAgICAjICogYGludm9rZV90eXBlYCBpcyBlaXRoZXIgSU5WT0tFX1BST1BFUlRZR0VUIHwgSU5WT0tFX1BST1BFUlRZU0VUIGFuZCByZWFsbHkganVzdFxuICAgICMgICBtZWFucyAiY2FsbGVkIGJ5IF9fZ2V0YXR0cl9fIiBvciAiY2FsbGVkIGJ5IF9fc2V0YXR0cl9fIlxuICAgIGlmIG5vdCBlbnRyeSBvciBub3QgZW50cnkuZGVzYzpcbiAgICAgICAgcmV0dXJuIGludm9rZV90eXBlXG5cbiAgICBpZiBlbnRyeS5kZXNjLmRlc2NraW5kID09IHB5dGhvbmNvbS5ERVNDS0lORF9WQVJERVNDOlxuICAgICAgICByZXR1cm4gaW52b2tlX3R5cGVcblxuICAgICMgU28gaXRcJ3MgYSBGVU5DREVTQyAtIGp1c3QgdXNlIHdoYXQgaXQgc3BlY2lmaWVzLlxuICAgIHJldHVybiBlbnRyeS5kZXNjLmludmtpbmRcblxuXG5kZWYgRGlzcGF0Y2goXG4gICAgSURpc3BhdGNoLFxuICAgIHVzZXJOYW1lPU5vbmUsXG4gICAgY3JlYXRlQ2xhc3M9Tm9uZSxcbiAgICB0eXBlaW5mbz1Ob25lLFxuICAgIFVuaWNvZGVUb1N0cmluZz1Ob25lLFxuICAgIGNsc2N0eD1weXRob25jb20uQ0xTQ1RYX1NFUlZFUixcbik6XG4gICAgYXNzZXJ0IFVuaWNvZGVUb1N0cmluZyBpcyBOb25lLCAidGhpcyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGdvIGF3YXkiXG4gICAgSURpc3BhdGNoLCB1c2VyTmFtZSA9IF9HZXRHb29kRGlzcGF0Y2hBbmRVc2VyTmFtZShJRGlzcGF0Y2gsIHVzZXJOYW1lLCBjbHNjdHgpXG4gICAgaWYgY3JlYXRlQ2xhc3MgaXMgTm9uZTpcbiAgICAgICAgY3JlYXRlQ2xhc3MgPSBDRGlzcGF0Y2hcbiAgICBsYXp5ZGF0YSA9IE5vbmVcbiAgICB0cnk6XG4gICAgICAgIGlmIHR5cGVpbmZvIGlzIE5vbmU6XG4gICAgICAgICAgICB0eXBlaW5mbyA9IElEaXNwYXRjaC5HZXRUeXBlSW5mbygpXG4gICAgICAgIGlmIHR5cGVpbmZvIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICMgdHJ5IGZvciBhIHR5cGVjb21wXG4gICAgICAgICAgICAgICAgdHlwZWNvbXAgPSB0eXBlaW5mby5HZXRUeXBlQ29tcCgpXG4gICAgICAgICAgICAgICAgbGF6eWRhdGEgPSB0eXBlaW5mbywgdHlwZWNvbXBcbiAgICAgICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yOlxuICAgICAgICAgICAgICAgIHBhc3NcbiAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjpcbiAgICAgICAgdHlwZWluZm8gPSBOb25lXG4gICAgb2xlcmVwciA9IE1ha2VPbGVSZXByKElEaXNwYXRjaCwgdHlwZWluZm8sIGxhenlkYXRhKVxuICAgIHJldHVybiBjcmVhdGVDbGFzcyhJRGlzcGF0Y2gsIG9sZXJlcHIsIHVzZXJOYW1lLCBsYXp5ZGF0YT1sYXp5ZGF0YSlcblxuXG5kZWYgTWFrZU9sZVJlcHIoSURpc3BhdGNoLCB0eXBlaW5mbywgdHlwZWNvbXApOlxuICAgIG9sZXJlcHIgPSBOb25lXG4gICAgaWYgdHlwZWluZm8gaXMgbm90IE5vbmU6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGF0dHIgPSB0eXBlaW5mby5HZXRUeXBlQXR0cigpXG4gICAgICAgICAgICAjIElmIHRoZSB0eXBlIGluZm8gaXMgYSBzcGVjaWFsIERVQUwgaW50ZXJmYWNlLCBtYWdpY2FsbHkgdHVybiBpdCBpbnRvXG4gICAgICAgICAgICAjIGEgRElTUEFUQ0ggdHlwZWluZm8uXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgYXR0cls1XSA9PSBweXRob25jb20uVEtJTkRfSU5URVJGQUNFXG4gICAgICAgICAgICAgICAgYW5kIGF0dHJbMTFdICYgcHl0aG9uY29tLlRZUEVGTEFHX0ZEVUFMXG4gICAgICAgICAgICApOlxuICAgICAgICAgICAgICAgICMgR2V0IGNvcnJlc3BvbmRpbmcgRGlzcCBpbnRlcmZhY2U7XG4gICAgICAgICAgICAgICAgIyAtMSBpcyBhIHNwZWNpYWwgdmFsdWUgd2hpY2ggZG9lcyB0aGlzIGZvciB1cy5cbiAgICAgICAgICAgICAgICBocmVmID0gdHlwZWluZm8uR2V0UmVmVHlwZU9mSW1wbFR5cGUoLTEpXG4gICAgICAgICAgICAgICAgdHlwZWluZm8gPSB0eXBlaW5mby5HZXRSZWZUeXBlSW5mbyhocmVmKVxuICAgICAgICAgICAgICAgIGF0dHIgPSB0eXBlaW5mby5HZXRUeXBlQXR0cigpXG4gICAgICAgICAgICBpZiB0eXBlY29tcCBpcyBOb25lOlxuICAgICAgICAgICAgICAgIG9sZXJlcHIgPSBidWlsZC5EaXNwYXRjaEl0ZW0odHlwZWluZm8sIGF0dHIsIE5vbmUsIDApXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIG9sZXJlcHIgPSBidWlsZC5MYXp5RGlzcGF0Y2hJdGVtKGF0dHIsIE5vbmUpXG4gICAgICAgIGV4Y2VwdCBweXRob25jb20ub2xlX2Vycm9yOlxuICAgICAgICAgICAgcGFzc1xuICAgIGlmIG9sZXJlcHIgaXMgTm9uZTpcbiAgICAgICAgb2xlcmVwciA9IGJ1aWxkLkRpc3BhdGNoSXRlbSgpXG4gICAgcmV0dXJuIG9sZXJlcHJcblxuXG5kZWYgRHVtYkRpc3BhdGNoKFxuICAgIElEaXNwYXRjaCxcbiAgICB1c2VyTmFtZT1Ob25lLFxuICAgIGNyZWF0ZUNsYXNzPU5vbmUsXG4gICAgVW5pY29kZVRvU3RyaW5nPU5vbmUsXG4gICAgY2xzY3R4PXB5dGhvbmNvbS5DTFNDVFhfU0VSVkVSLFxuKTpcbiAgICAiRGlzcGF0Y2ggd2l0aCBubyB0eXBlIGluZm8iXG4gICAgYXNzZXJ0IFVuaWNvZGVUb1N0cmluZyBpcyBOb25lLCAidGhpcyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGdvIGF3YXkiXG4gICAgSURpc3BhdGNoLCB1c2VyTmFtZSA9IF9HZXRHb29kRGlzcGF0Y2hBbmRVc2VyTmFtZShJRGlzcGF0Y2gsIHVzZXJOYW1lLCBjbHNjdHgpXG4gICAgaWYgY3JlYXRlQ2xhc3MgaXMgTm9uZTpcbiAgICAgICAgY3JlYXRlQ2xhc3MgPSBDRGlzcGF0Y2hcbiAgICByZXR1cm4gY3JlYXRlQ2xhc3MoSURpc3BhdGNoLCBidWlsZC5EaXNwYXRjaEl0ZW0oKSwgdXNlck5hbWUpXG5cblxuY2xhc3MgQ0Rpc3BhdGNoOlxuICAgIGRlZiBfX2luaXRfXyhcbiAgICAgICAgc2VsZiwgSURpc3BhdGNoLCBvbGVyZXByLCB1c2VyTmFtZT1Ob25lLCBVbmljb2RlVG9TdHJpbmc9Tm9uZSwgbGF6eWRhdGE9Tm9uZVxuICAgICk6XG4gICAgICAgIGFzc2VydCBVbmljb2RlVG9TdHJpbmcgaXMgTm9uZSwgInRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBnbyBhd2F5IlxuICAgICAgICBpZiB1c2VyTmFtZSBpcyBOb25lOlxuICAgICAgICAgICAgdXNlck5hbWUgPSAiPHVua25vd24+IlxuICAgICAgICBzZWxmLl9fZGljdF9fWyJfb2xlb2JqXyJdID0gSURpc3BhdGNoXG4gICAgICAgIHNlbGYuX19kaWN0X19bIl91c2VybmFtZV8iXSA9IHVzZXJOYW1lXG4gICAgICAgIHNlbGYuX19kaWN0X19bIl9vbGVyZXByXyJdID0gb2xlcmVwclxuICAgICAgICBzZWxmLl9fZGljdF9fWyJfbWFwQ2FjaGVkSXRlbXNfIl0gPSB7fVxuICAgICAgICBzZWxmLl9fZGljdF9fWyJfYnVpbHRNZXRob2RzXyJdID0ge31cbiAgICAgICAgc2VsZi5fX2RpY3RfX1siX2VudW1fIl0gPSBOb25lXG4gICAgICAgIHNlbGYuX19kaWN0X19bIl91bmljb2RlX3RvX3N0cmluZ18iXSA9IE5vbmVcbiAgICAgICAgc2VsZi5fX2RpY3RfX1siX2xhenlkYXRhXyJdID0gbGF6eWRhdGFcblxuICAgIGRlZiBfX2NhbGxfXyhzZWxmLCAqYXJncyk6XG4gICAgICAgICJQcm92aWRlIFwnZGVmYXVsdCBkaXNwYXRjaFwnIENPTSBmdW5jdGlvbmFsaXR5IC0gYWxsb3cgaW5zdGFuY2UgdG8gYmUgY2FsbGVkIlxuICAgICAgICBpZiBzZWxmLl9vbGVyZXByXy5kZWZhdWx0RGlzcGF0Y2hOYW1lOlxuICAgICAgICAgICAgaW52a2luZCwgZGlzcGlkID0gc2VsZi5fZmluZF9kaXNwYXRjaF90eXBlXyhcbiAgICAgICAgICAgICAgICBzZWxmLl9vbGVyZXByXy5kZWZhdWx0RGlzcGF0Y2hOYW1lXG4gICAgICAgICAgICApXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBpbnZraW5kLCBkaXNwaWQgPSAoXG4gICAgICAgICAgICAgICAgcHl0aG9uY29tLkRJU1BBVENIX01FVEhPRCB8IHB5dGhvbmNvbS5ESVNQQVRDSF9QUk9QRVJUWUdFVCxcbiAgICAgICAgICAgICAgICBweXRob25jb20uRElTUElEX1ZBTFVFLFxuICAgICAgICAgICAgKVxuICAgICAgICBpZiBpbnZraW5kIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgYWxsQXJncyA9IChkaXNwaWQsIExDSUQsIGludmtpbmQsIDEpICsgYXJnc1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2dldF9nb29kX29iamVjdF8oXG4gICAgICAgICAgICAgICAgc2VsZi5fb2xlb2JqXy5JbnZva2UoKmFsbEFyZ3MpLCBzZWxmLl9vbGVyZXByXy5kZWZhdWx0RGlzcGF0Y2hOYW1lLCBOb25lXG4gICAgICAgICAgICApXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiVGhpcyBkaXNwYXRjaCBvYmplY3QgZG9lcyBub3QgZGVmaW5lIGEgZGVmYXVsdCBtZXRob2QiKVxuXG4gICAgZGVmIF9fYm9vbF9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gVHJ1ZSAgIyBpZSAiaWYgb2JqZWN0OiIgc2hvdWxkIGFsd2F5cyBiZSAidHJ1ZSIgLSB3aXRob3V0IHRoaXMsIF9fbGVuX18gaXMgdHJpZWQuXG4gICAgICAgICMgX1Bvc3NpYmx5XyB3YW50IHRvIGRlZmVyIHRvIF9fbGVuX18gaWYgYXZhaWxhYmxlLCBidXQgSW0gbm90IHN1cmUgdGhpcyBpc1xuICAgICAgICAjIGRlc2lyYWJsZT8/P1xuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIjxDT01PYmplY3QgJXM+IiAlIChzZWxmLl91c2VybmFtZV8pXG5cbiAgICBkZWYgX19zdHJfXyhzZWxmKTpcbiAgICAgICAgIyBfX3N0cl9fIGlzIHVzZWQgd2hlbiB0aGUgdXNlciBkb2VzICJwcmludCBvYmplY3QiLCBzbyB3ZSBncmFjZWZ1bGx5XG4gICAgICAgICMgZmFsbCBiYWNrIHRvIHRoZSBfX3JlcHJfXyBpZiB0aGUgb2JqZWN0IGhhcyBubyBkZWZhdWx0IG1ldGhvZC5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgcmV0dXJuIHN0cihzZWxmLl9fY2FsbF9fKCkpXG4gICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yIGFzIGRldGFpbHM6XG4gICAgICAgICAgICBpZiBkZXRhaWxzLmhyZXN1bHQgbm90IGluIEVSUk9SU19CQURfQ09OVEVYVDpcbiAgICAgICAgICAgICAgICByYWlzZVxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19yZXByX18oKVxuXG4gICAgZGVmIF9fZGlyX18oc2VsZik6XG4gICAgICAgIGxzdCA9IGxpc3Qoc2VsZi5fX2RpY3RfXy5rZXlzKCkpICsgZGlyKHNlbGYuX19jbGFzc19fKSArIHNlbGYuX2Rpcl9vbGVfKClcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgbHN0ICs9IFtwLk5hbWUgZm9yIHAgaW4gc2VsZi5Qcm9wZXJ0aWVzX11cbiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgcGFzc1xuICAgICAgICByZXR1cm4gbGlzdChzZXQobHN0KSlcblxuICAgIGRlZiBfZGlyX29sZV8oc2VsZik6XG4gICAgICAgIGl0ZW1zX2RpY3QgPSB7fVxuICAgICAgICBmb3IgaVRJIGluIHJhbmdlKDAsIHNlbGYuX29sZW9ial8uR2V0VHlwZUluZm9Db3VudCgpKTpcbiAgICAgICAgICAgIHR5cGVJbmZvID0gc2VsZi5fb2xlb2JqXy5HZXRUeXBlSW5mbyhpVEkpXG4gICAgICAgICAgICBzZWxmLl9VcGRhdGVXaXRoSVR5cGVJbmZvXyhpdGVtc19kaWN0LCB0eXBlSW5mbylcbiAgICAgICAgcmV0dXJuIGxpc3QoaXRlbXNfZGljdC5rZXlzKCkpXG5cbiAgICBkZWYgX1VwZGF0ZVdpdGhJVHlwZUluZm9fKHNlbGYsIGl0ZW1zX2RpY3QsIHR5cGVJbmZvKTpcbiAgICAgICAgdHlwZUluZm9zID0gW3R5cGVJbmZvXVxuICAgICAgICAjIHN1cHByZXNzIElEaXNwYXRjaCBhbmQgSVVua25vd24gbWV0aG9kc1xuICAgICAgICBpbnNwZWN0ZWRJSURzID0ge3B5dGhvbmNvbS5JSURfSURpc3BhdGNoOiBOb25lfVxuXG4gICAgICAgIHdoaWxlIGxlbih0eXBlSW5mb3MpID4gMDpcbiAgICAgICAgICAgIHR5cGVJbmZvID0gdHlwZUluZm9zLnBvcCgpXG4gICAgICAgICAgICB0eXBlQXR0ciA9IHR5cGVJbmZvLkdldFR5cGVBdHRyKClcblxuICAgICAgICAgICAgaWYgdHlwZUF0dHIuaWlkIG5vdCBpbiBpbnNwZWN0ZWRJSURzOlxuICAgICAgICAgICAgICAgIGluc3BlY3RlZElJRHNbdHlwZUF0dHIuaWlkXSA9IE5vbmVcbiAgICAgICAgICAgICAgICBmb3IgaUZ1biBpbiByYW5nZSgwLCB0eXBlQXR0ci5jRnVuY3MpOlxuICAgICAgICAgICAgICAgICAgICBmdW5EZXNjID0gdHlwZUluZm8uR2V0RnVuY0Rlc2MoaUZ1bilcbiAgICAgICAgICAgICAgICAgICAgZnVuTmFtZSA9IHR5cGVJbmZvLkdldE5hbWVzKGZ1bkRlc2MubWVtaWQpWzBdXG4gICAgICAgICAgICAgICAgICAgIGlmIGZ1bk5hbWUgbm90IGluIGl0ZW1zX2RpY3Q6XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc19kaWN0W2Z1bk5hbWVdID0gTm9uZVxuXG4gICAgICAgICAgICAgICAgIyBJbnNwZWN0IHRoZSB0eXBlIGluZm8gb2YgYWxsIGltcGxlbWVudGVkIHR5cGVzXG4gICAgICAgICAgICAgICAgIyBFLmcuIElTaGVsbERpc3BhdGNoNSBpbXBsZW1lbnRzIElTaGVsbERpc3BhdGNoNCB3aGljaCBpbXBsZW1lbnRzIElTaGVsbERpc3BhdGNoMyAuLi5cbiAgICAgICAgICAgICAgICBmb3IgaUltcGxUeXBlIGluIHJhbmdlKDAsIHR5cGVBdHRyLmNJbXBsVHlwZXMpOlxuICAgICAgICAgICAgICAgICAgICBpUmVmVHlwZSA9IHR5cGVJbmZvLkdldFJlZlR5cGVPZkltcGxUeXBlKGlJbXBsVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgcmVmVHlwZUluZm8gPSB0eXBlSW5mby5HZXRSZWZUeXBlSW5mbyhpUmVmVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgdHlwZUluZm9zLmFwcGVuZChyZWZUeXBlSW5mbylcblxuICAgICMgRGVsZWdhdGUgY29tcGFyaXNvbiB0byB0aGUgb2xlb2JqcywgYXMgdGhleSBrbm93IGhvdyB0byBkbyBpZGVudGl0eS5cbiAgICBkZWYgX19lcV9fKHNlbGYsIG90aGVyKTpcbiAgICAgICAgb3RoZXIgPSBnZXRhdHRyKG90aGVyLCAiX29sZW9ial8iLCBvdGhlcilcbiAgICAgICAgcmV0dXJuIHNlbGYuX29sZW9ial8gPT0gb3RoZXJcblxuICAgIGRlZiBfX25lX18oc2VsZiwgb3RoZXIpOlxuICAgICAgICBvdGhlciA9IGdldGF0dHIob3RoZXIsICJfb2xlb2JqXyIsIG90aGVyKVxuICAgICAgICByZXR1cm4gc2VsZi5fb2xlb2JqXyAhPSBvdGhlclxuXG4gICAgZGVmIF9faW50X18oc2VsZik6XG4gICAgICAgIHJldHVybiBpbnQoc2VsZi5fX2NhbGxfXygpKVxuXG4gICAgZGVmIF9fbGVuX18oc2VsZik6XG4gICAgICAgIGludmtpbmQsIGRpc3BpZCA9IHNlbGYuX2ZpbmRfZGlzcGF0Y2hfdHlwZV8oIkNvdW50IilcbiAgICAgICAgaWYgaW52a2luZDpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9vbGVvYmpfLkludm9rZShkaXNwaWQsIExDSUQsIGludmtpbmQsIDEpXG4gICAgICAgIHJhaXNlIFR5cGVFcnJvcigiVGhpcyBkaXNwYXRjaCBvYmplY3QgZG9lcyBub3QgZGVmaW5lIGEgQ291bnQgbWV0aG9kIilcblxuICAgIGRlZiBfTmV3RW51bShzZWxmKTpcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgaW52a2luZCA9IHB5dGhvbmNvbS5ESVNQQVRDSF9NRVRIT0QgfCBweXRob25jb20uRElTUEFUQ0hfUFJPUEVSVFlHRVRcbiAgICAgICAgICAgIGVudW0gPSBzZWxmLl9vbGVvYmpfLkludm9rZVR5cGVzKFxuICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5ESVNQSURfTkVXRU5VTSwgTENJRCwgaW52a2luZCwgKDEzLCAxMCksICgpXG4gICAgICAgICAgICApXG4gICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yOlxuICAgICAgICAgICAgcmV0dXJuIE5vbmUgICMgbm8gZW51bWVyYXRvciBmb3IgdGhpcyBvYmplY3QuXG4gICAgICAgIGZyb20gLiBpbXBvcnQgdXRpbFxuXG4gICAgICAgIHJldHVybiB1dGlsLldyYXBFbnVtKGVudW0sIE5vbmUpXG5cbiAgICBkZWYgX19nZXRpdGVtX18oc2VsZiwgaW5kZXgpOiAgIyBzeXZlciBtb2RpZmllZFxuICAgICAgICAjIEltcHJvdmVkIF9fZ2V0aXRlbV9fIGNvdXJ0ZXN5IFN5dmVyIEVuc3RhZFxuICAgICAgICAjIE11c3QgY2hlY2sgX05ld0VudW0gYmVmb3JlIEl0ZW0sIHRvIGVuc3VyZSBiL3cgY29tcGF0LlxuICAgICAgICBpZiBpc2luc3RhbmNlKGluZGV4LCBpbnQpOlxuICAgICAgICAgICAgaWYgc2VsZi5fX2RpY3RfX1siX2VudW1fIl0gaXMgTm9uZTpcbiAgICAgICAgICAgICAgICBzZWxmLl9fZGljdF9fWyJfZW51bV8iXSA9IHNlbGYuX05ld0VudW0oKVxuICAgICAgICAgICAgaWYgc2VsZi5fX2RpY3RfX1siX2VudW1fIl0gaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2dldF9nb29kX29iamVjdF8oc2VsZi5fZW51bV8uX19nZXRpdGVtX18oaW5kZXgpKVxuICAgICAgICAjIFNlZSBpZiB3ZSBoYXZlIGFuICJJdGVtIiBtZXRob2QvcHJvcGVydHkgd2UgY2FuIHVzZSAoZ29lcyBoYW5kIGluIGhhbmQgd2l0aCBDb3VudCgpIGFib3ZlISlcbiAgICAgICAgaW52a2luZCwgZGlzcGlkID0gc2VsZi5fZmluZF9kaXNwYXRjaF90eXBlXygiSXRlbSIpXG4gICAgICAgIGlmIGludmtpbmQgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X2dvb2Rfb2JqZWN0XyhcbiAgICAgICAgICAgICAgICBzZWxmLl9vbGVvYmpfLkludm9rZShkaXNwaWQsIExDSUQsIGludmtpbmQsIDEsIGluZGV4KVxuICAgICAgICAgICAgKVxuICAgICAgICByYWlzZSBUeXBlRXJyb3IoIlRoaXMgb2JqZWN0IGRvZXMgbm90IHN1cHBvcnQgZW51bWVyYXRpb24iKVxuXG4gICAgZGVmIF9fc2V0aXRlbV9fKHNlbGYsIGluZGV4LCAqYXJncyk6XG4gICAgICAgICMgWFhYIC0gdG9kbyAtIFdlIHNob3VsZCBzdXBwb3J0IGNhbGxpbmcgSXRlbSgpIGhlcmUgdG9vIVxuICAgICAgICAjIFx0XHRwcmludCAiX19zZXRpdGVtX18gd2l0aCIsIGluZGV4LCBhcmdzXG4gICAgICAgIGlmIHNlbGYuX29sZXJlcHJfLmRlZmF1bHREaXNwYXRjaE5hbWU6XG4gICAgICAgICAgICBpbnZraW5kLCBkaXNwaWQgPSBzZWxmLl9maW5kX2Rpc3BhdGNoX3R5cGVfKFxuICAgICAgICAgICAgICAgIHNlbGYuX29sZXJlcHJfLmRlZmF1bHREaXNwYXRjaE5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGludmtpbmQsIGRpc3BpZCA9IChcbiAgICAgICAgICAgICAgICBweXRob25jb20uRElTUEFUQ0hfUFJPUEVSVFlQVVQgfCBweXRob25jb20uRElTUEFUQ0hfUFJPUEVSVFlQVVRSRUYsXG4gICAgICAgICAgICAgICAgcHl0aG9uY29tLkRJU1BJRF9WQUxVRSxcbiAgICAgICAgICAgIClcbiAgICAgICAgaWYgaW52a2luZCBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIGFsbEFyZ3MgPSAoZGlzcGlkLCBMQ0lELCBpbnZraW5kLCAwLCBpbmRleCkgKyBhcmdzXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X2dvb2Rfb2JqZWN0XyhcbiAgICAgICAgICAgICAgICBzZWxmLl9vbGVvYmpfLkludm9rZSgqYWxsQXJncyksIHNlbGYuX29sZXJlcHJfLmRlZmF1bHREaXNwYXRjaE5hbWUsIE5vbmVcbiAgICAgICAgICAgIClcbiAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJUaGlzIGRpc3BhdGNoIG9iamVjdCBkb2VzIG5vdCBkZWZpbmUgYSBkZWZhdWx0IG1ldGhvZCIpXG5cbiAgICBkZWYgX2ZpbmRfZGlzcGF0Y2hfdHlwZV8oc2VsZiwgbWV0aG9kTmFtZSk6XG4gICAgICAgIGlmIG1ldGhvZE5hbWUgaW4gc2VsZi5fb2xlcmVwcl8ubWFwRnVuY3M6XG4gICAgICAgICAgICBpdGVtID0gc2VsZi5fb2xlcmVwcl8ubWFwRnVuY3NbbWV0aG9kTmFtZV1cbiAgICAgICAgICAgIHJldHVybiBpdGVtLmRlc2NbNF0sIGl0ZW0uZGlzcGlkXG5cbiAgICAgICAgaWYgbWV0aG9kTmFtZSBpbiBzZWxmLl9vbGVyZXByXy5wcm9wTWFwR2V0OlxuICAgICAgICAgICAgaXRlbSA9IHNlbGYuX29sZXJlcHJfLnByb3BNYXBHZXRbbWV0aG9kTmFtZV1cbiAgICAgICAgICAgIHJldHVybiBpdGVtLmRlc2NbNF0sIGl0ZW0uZGlzcGlkXG5cbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgZGlzcGlkID0gc2VsZi5fb2xlb2JqXy5HZXRJRHNPZk5hbWVzKDAsIG1ldGhvZE5hbWUpXG4gICAgICAgIGV4Y2VwdDogICMjIyB3aGF0IGVycm9yP1xuICAgICAgICAgICAgcmV0dXJuIE5vbmUsIE5vbmVcbiAgICAgICAgcmV0dXJuIHB5dGhvbmNvbS5ESVNQQVRDSF9NRVRIT0QgfCBweXRob25jb20uRElTUEFUQ0hfUFJPUEVSVFlHRVQsIGRpc3BpZFxuXG4gICAgZGVmIF9BcHBseVR5cGVzXyhzZWxmLCBkaXNwaWQsIHdGbGFncywgcmV0VHlwZSwgYXJnVHlwZXMsIHVzZXIsIHJlc3VsdENMU0lELCAqYXJncyk6XG4gICAgICAgIHJlc3VsdCA9IHNlbGYuX29sZW9ial8uSW52b2tlVHlwZXMoXG4gICAgICAgICAgICAqKGRpc3BpZCwgTENJRCwgd0ZsYWdzLCByZXRUeXBlLCBhcmdUeXBlcykgKyBhcmdzXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHNlbGYuX2dldF9nb29kX29iamVjdF8ocmVzdWx0LCB1c2VyLCByZXN1bHRDTFNJRClcblxuICAgIGRlZiBfd3JhcF9kaXNwYXRjaF8oXG4gICAgICAgIHNlbGYsIG9iLCB1c2VyTmFtZT1Ob25lLCByZXR1cm5DTFNJRD1Ob25lLCBVbmljb2RlVG9TdHJpbmc9Tm9uZVxuICAgICk6XG4gICAgICAgICMgR2l2ZW4gYSBkaXNwYXRjaCBvYmplY3QsIHdyYXAgaXQgaW4gYSBjbGFzc1xuICAgICAgICBhc3NlcnQgVW5pY29kZVRvU3RyaW5nIGlzIE5vbmUsICJ0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgZ28gYXdheSJcbiAgICAgICAgcmV0dXJuIERpc3BhdGNoKG9iLCB1c2VyTmFtZSlcblxuICAgIGRlZiBfZ2V0X2dvb2Rfc2luZ2xlX29iamVjdF8oc2VsZiwgb2IsIHVzZXJOYW1lPU5vbmUsIFJldHVybkNMU0lEPU5vbmUpOlxuICAgICAgICBpZiBpc2luc3RhbmNlKG9iLCBQeUlEaXNwYXRjaFR5cGUpOlxuICAgICAgICAgICAgIyBtYWtlIGEgbmV3IGluc3RhbmNlIG9mIChwcm9iYWJseSB0aGlzKSBjbGFzcy5cbiAgICAgICAgICAgIHJldHVybiBzZWxmLl93cmFwX2Rpc3BhdGNoXyhvYiwgdXNlck5hbWUsIFJldHVybkNMU0lEKVxuICAgICAgICBpZiBpc2luc3RhbmNlKG9iLCBQeUlVbmtub3duVHlwZSk6XG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgb2IgPSBvYi5RdWVyeUludGVyZmFjZShweXRob25jb20uSUlEX0lEaXNwYXRjaClcbiAgICAgICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yOlxuICAgICAgICAgICAgICAgICMgSXQgaXMgYW4gSVVua25vd24sIGJ1dCBub3QgYW4gSURpc3BhdGNoLCBzbyBqdXN0IGxldCBpdCB0aHJvdWdoLlxuICAgICAgICAgICAgICAgIHJldHVybiBvYlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3dyYXBfZGlzcGF0Y2hfKG9iLCB1c2VyTmFtZSwgUmV0dXJuQ0xTSUQpXG4gICAgICAgIHJldHVybiBvYlxuXG4gICAgZGVmIF9nZXRfZ29vZF9vYmplY3RfKHNlbGYsIG9iLCB1c2VyTmFtZT1Ob25lLCBSZXR1cm5DTFNJRD1Ob25lKTpcbiAgICAgICAgIiIiR2l2ZW4gYW4gb2JqZWN0ICh1c3VhbGx5IHRoZSByZXR2YWwgZnJvbSBhIG1ldGhvZCksIG1ha2UgaXQgYSBnb29kIG9iamVjdCB0byByZXR1cm4uXG4gICAgICAgIEJhc2ljYWxseSBjaGVja3MgaWYgaXQgaXMgYSBDT00gb2JqZWN0LCBhbmQgd3JhcHMgaXQgdXAuXG4gICAgICAgIEFsc28gaGFuZGxlcyB0aGUgZmFjdCB0aGF0IGEgcmV0dmFsIG1heSBiZSBhIHR1cGxlIG9mIHJldHZhbHMiIiJcbiAgICAgICAgaWYgb2IgaXMgTm9uZTogICMgUXVpY2sgZXhpdCFcbiAgICAgICAgICAgIHJldHVybiBOb25lXG4gICAgICAgIGVsaWYgaXNpbnN0YW5jZShvYiwgdHVwbGUpOlxuICAgICAgICAgICAgcmV0dXJuIHR1cGxlKFxuICAgICAgICAgICAgICAgIG1hcChcbiAgICAgICAgICAgICAgICAgICAgbGFtYmRhIG8sIHM9c2VsZiwgb3VuPXVzZXJOYW1lLCByYz1SZXR1cm5DTFNJRDogcy5fZ2V0X2dvb2Rfc2luZ2xlX29iamVjdF8oXG4gICAgICAgICAgICAgICAgICAgICAgICBvLCBvdW4sIHJjXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIG9iLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9nZXRfZ29vZF9zaW5nbGVfb2JqZWN0XyhvYilcblxuICAgIGRlZiBfbWFrZV9tZXRob2RfKHNlbGYsIG5hbWUpOlxuICAgICAgICAiTWFrZSBhIG1ldGhvZCBvYmplY3QgLSBBc3N1bWVzIGluIG9sZXJlcHIgZnVuY21hcCJcbiAgICAgICAgbWV0aG9kTmFtZSA9IGJ1aWxkLk1ha2VQdWJsaWNBdHRyaWJ1dGVOYW1lKG5hbWUpICAjIHRyYW5zbGF0ZSBrZXl3b3JkcyBldGMuXG4gICAgICAgIG1ldGhvZENvZGVMaXN0ID0gc2VsZi5fb2xlcmVwcl8uTWFrZUZ1bmNNZXRob2QoXG4gICAgICAgICAgICBzZWxmLl9vbGVyZXByXy5tYXBGdW5jc1tuYW1lXSwgbWV0aG9kTmFtZSwgMFxuICAgICAgICApXG4gICAgICAgIG1ldGhvZENvZGUgPSAiXFxuIi5qb2luKG1ldGhvZENvZGVMaXN0KVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICAjIFx0XHRcdHByaW50ICJNZXRob2QgY29kZSBmb3IgJXMgaXM6XFxuIiAlIHNlbGYuX3VzZXJuYW1lXywgbWV0aG9kQ29kZVxuICAgICAgICAgICAgIyBcdFx0XHRzZWxmLl9wcmludF9kZXRhaWxzXygpXG4gICAgICAgICAgICBjb2RlT2JqZWN0ID0gY29tcGlsZShtZXRob2RDb2RlLCAiPENPTU9iamVjdCAlcz4iICUgc2VsZi5fdXNlcm5hbWVfLCAiZXhlYyIpXG4gICAgICAgICAgICAjIEV4ZWMgdGhlIGNvZGUgb2JqZWN0XG4gICAgICAgICAgICB0ZW1wTmFtZVNwYWNlID0ge31cbiAgICAgICAgICAgICMgIkRpc3BhdGNoIiBpbiB0aGUgZXhlY1wnZCBjb2RlIGlzIHdpbjMyY29tLmNsaWVudC5EaXNwYXRjaCwgbm90IG91cnMuXG4gICAgICAgICAgICBnbG9iTmFtZVNwYWNlID0gZ2xvYmFscygpLmNvcHkoKVxuICAgICAgICAgICAgZ2xvYk5hbWVTcGFjZVsiRGlzcGF0Y2giXSA9IHdpbjMyY29tLmNsaWVudC5EaXNwYXRjaFxuICAgICAgICAgICAgZXhlYyhcbiAgICAgICAgICAgICAgICBjb2RlT2JqZWN0LCBnbG9iTmFtZVNwYWNlLCB0ZW1wTmFtZVNwYWNlXG4gICAgICAgICAgICApICAjIHNlbGYuX19kaWN0X18sIHNlbGYuX19kaWN0X19cbiAgICAgICAgICAgIG5hbWUgPSBtZXRob2ROYW1lXG4gICAgICAgICAgICAjIFNhdmUgdGhlIGZ1bmN0aW9uIGluIG1hcC5cbiAgICAgICAgICAgIGZuID0gc2VsZi5fYnVpbHRNZXRob2RzX1tuYW1lXSA9IHRlbXBOYW1lU3BhY2VbbmFtZV1cbiAgICAgICAgICAgIG5ld01ldGggPSBNYWtlTWV0aG9kKGZuLCBzZWxmLCBzZWxmLl9fY2xhc3NfXylcbiAgICAgICAgICAgIHJldHVybiBuZXdNZXRoXG4gICAgICAgIGV4Y2VwdDpcbiAgICAgICAgICAgIGRlYnVnX3ByaW50KCJFcnJvciBidWlsZGluZyBPTEUgZGVmaW5pdGlvbiBmb3IgY29kZSAiLCBtZXRob2RDb2RlKVxuICAgICAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4YygpXG4gICAgICAgIHJldHVybiBOb25lXG5cbiAgICBkZWYgX1JlbGVhc2VfKHNlbGYpOlxuICAgICAgICAiIiJDbGVhbnVwIG9iamVjdCAtIGxpa2UgYSBjbG9zZSAtIHRvIGZvcmNlIGNsZWFudXAgd2hlbiB5b3UgZG9udFxuICAgICAgICB3YW50IHRvIHJlbHkgb24gUHl0aG9uXCdzIHJlZmVyZW5jZSBjb3VudGluZy4iIiJcbiAgICAgICAgZm9yIGNoaWxkQ29udCBpbiBzZWxmLl9tYXBDYWNoZWRJdGVtc18udmFsdWVzKCk6XG4gICAgICAgICAgICBjaGlsZENvbnQuX1JlbGVhc2VfKClcbiAgICAgICAgc2VsZi5fbWFwQ2FjaGVkSXRlbXNfID0ge31cbiAgICAgICAgaWYgc2VsZi5fb2xlb2JqXzpcbiAgICAgICAgICAgIHNlbGYuX29sZW9ial8uUmVsZWFzZSgpXG4gICAgICAgICAgICBzZWxmLl9fZGljdF9fWyJfb2xlb2JqXyJdID0gTm9uZVxuICAgICAgICBpZiBzZWxmLl9vbGVyZXByXzpcbiAgICAgICAgICAgIHNlbGYuX19kaWN0X19bIl9vbGVyZXByXyJdID0gTm9uZVxuICAgICAgICBzZWxmLl9lbnVtXyA9IE5vbmVcblxuICAgIGRlZiBfcHJvY18oc2VsZiwgbmFtZSwgKmFyZ3MpOlxuICAgICAgICAiIiJDYWxsIHRoZSBuYW1lZCBtZXRob2QgYXMgYSBwcm9jZWR1cmUsIHJhdGhlciB0aGFuIGZ1bmN0aW9uLlxuICAgICAgICBNYWlubHkgdXNlZCBieSBXb3JkLkJhc2ljLCB3aGljaCB3aGluZ2VzIGFib3V0IHN1Y2ggdGhpbmdzLiIiIlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBpdGVtID0gc2VsZi5fb2xlcmVwcl8ubWFwRnVuY3NbbmFtZV1cbiAgICAgICAgICAgIGRpc3BJZCA9IGl0ZW0uZGlzcGlkXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X2dvb2Rfb2JqZWN0XyhcbiAgICAgICAgICAgICAgICBzZWxmLl9vbGVvYmpfLkludm9rZSgqKGRpc3BJZCwgTENJRCwgaXRlbS5kZXNjWzRdLCAwKSArIChhcmdzKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgZXhjZXB0IEtleUVycm9yOlxuICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IobmFtZSlcblxuICAgIGRlZiBfcHJpbnRfZGV0YWlsc18oc2VsZik6XG4gICAgICAgICJEZWJ1ZyByb3V0aW5lIC0gZHVtcHMgd2hhdCBpdCBrbm93cyBhYm91dCBhbiBvYmplY3QuIlxuICAgICAgICBwcmludCgiQXhEaXNwYXRjaCBjb250YWluZXIiLCBzZWxmLl91c2VybmFtZV8pXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHByaW50KCJNZXRob2RzOiIpXG4gICAgICAgICAgICBmb3IgbWV0aG9kIGluIHNlbGYuX29sZXJlcHJfLm1hcEZ1bmNzLmtleXMoKTpcbiAgICAgICAgICAgICAgICBwcmludCgiXFx0IiwgbWV0aG9kKVxuICAgICAgICAgICAgcHJpbnQoIlByb3BzOiIpXG4gICAgICAgICAgICBmb3IgcHJvcCwgZW50cnkgaW4gc2VsZi5fb2xlcmVwcl8ucHJvcE1hcC5pdGVtcygpOlxuICAgICAgICAgICAgICAgIHByaW50KCJcXHQlcyA9IDB4JXggLSAlcyIgJSAocHJvcCwgZW50cnkuZGlzcGlkLCByZXByKGVudHJ5KSkpXG4gICAgICAgICAgICBwcmludCgiR2V0IFByb3BzOiIpXG4gICAgICAgICAgICBmb3IgcHJvcCwgZW50cnkgaW4gc2VsZi5fb2xlcmVwcl8ucHJvcE1hcEdldC5pdGVtcygpOlxuICAgICAgICAgICAgICAgIHByaW50KCJcXHQlcyA9IDB4JXggLSAlcyIgJSAocHJvcCwgZW50cnkuZGlzcGlkLCByZXByKGVudHJ5KSkpXG4gICAgICAgICAgICBwcmludCgiUHV0IFByb3BzOiIpXG4gICAgICAgICAgICBmb3IgcHJvcCwgZW50cnkgaW4gc2VsZi5fb2xlcmVwcl8ucHJvcE1hcFB1dC5pdGVtcygpOlxuICAgICAgICAgICAgICAgIHByaW50KCJcXHQlcyA9IDB4JXggLSAlcyIgJSAocHJvcCwgZW50cnkuZGlzcGlkLCByZXByKGVudHJ5KSkpXG4gICAgICAgIGV4Y2VwdDpcbiAgICAgICAgICAgIHRyYWNlYmFjay5wcmludF9leGMoKVxuXG4gICAgZGVmIF9fTGF6eU1hcF9fKHNlbGYsIGF0dHIpOlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBpZiBzZWxmLl9MYXp5QWRkQXR0cl8oYXR0cik6XG4gICAgICAgICAgICAgICAgZGVidWdfYXR0cl9wcmludChcbiAgICAgICAgICAgICAgICAgICAgIiVzLl9fTGF6eU1hcF9fKCVzKSBhZGRlZCBzb21ldGhpbmciICUgKHNlbGYuX3VzZXJuYW1lXywgYXR0cilcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgZXhjZXB0IEF0dHJpYnV0ZUVycm9yOlxuICAgICAgICAgICAgcmV0dXJuIDBcblxuICAgICMgVXNpbmcgdGhlIHR5cGVjb21wLCBsYXppbHkgY3JlYXRlIGEgbmV3IGF0dHJpYnV0ZSBkZWZpbml0aW9uLlxuICAgIGRlZiBfTGF6eUFkZEF0dHJfKHNlbGYsIGF0dHIpOlxuICAgICAgICBpZiBzZWxmLl9sYXp5ZGF0YV8gaXMgTm9uZTpcbiAgICAgICAgICAgIHJldHVybiAwXG4gICAgICAgIHJlcyA9IDBcbiAgICAgICAgdHlwZWluZm8sIHR5cGVjb21wID0gc2VsZi5fbGF6eWRhdGFfXG4gICAgICAgIG9sZXJlcHIgPSBzZWxmLl9vbGVyZXByX1xuICAgICAgICAjIFdlIG5lZWQgdG8gZXhwbGljaXRseSBjaGVjayBlYWNoIGludm9rZSB0eXBlIGluZGl2aWR1YWxseSAtIHNpbXBseVxuICAgICAgICAjIHNwZWNpZnlpbmcgXCcwXCcgd2lsbCBiaW5kIHRvICJhbnkgbWVtYmVyIiwgd2hpY2ggbWF5IG5vdCBiZSB0aGUgb25lXG4gICAgICAgICMgd2UgYXJlIGFjdHVhbGx5IGFmdGVyIChpZSwgd2UgbWF5IGJlIGFmdGVyIHByb3BfZ2V0LCBidXQgcmV0dXJuZWRcbiAgICAgICAgIyB0aGUgaW5mbyBmb3IgdGhlIHByb3BfcHV0LilcbiAgICAgICAgZm9yIGkgaW4gQUxMX0lOVk9LRV9UWVBFUzpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICB4LCB0ID0gdHlwZWNvbXAuQmluZChhdHRyLCBpKVxuICAgICAgICAgICAgICAgICMgU3VwcG9ydCBcJ0dldFwnIGFuZCBcJ1NldFwnIHByb3BlcnRpZXMgLSBzZWVcbiAgICAgICAgICAgICAgICAjIGJ1ZyAxNTg3MDIzXG4gICAgICAgICAgICAgICAgaWYgeCA9PSAwIGFuZCBhdHRyWzozXSBpbiAoIlNldCIsICJHZXQiKTpcbiAgICAgICAgICAgICAgICAgICAgeCwgdCA9IHR5cGVjb21wLkJpbmQoYXR0clszOl0sIGkpXG4gICAgICAgICAgICAgICAgaWYgeCA9PSBweXRob25jb20uREVTQ0tJTkRfRlVOQ0RFU0M6ICAjIGl0XCdzIGEgRlVOQ0RFU0NcbiAgICAgICAgICAgICAgICAgICAgciA9IG9sZXJlcHIuX0FkZEZ1bmNfKHR5cGVpbmZvLCB0LCAwKVxuICAgICAgICAgICAgICAgIGVsaWYgeCA9PSBweXRob25jb20uREVTQ0tJTkRfVkFSREVTQzogICMgaXRcJ3MgYSBWQVJERVNDXG4gICAgICAgICAgICAgICAgICAgIHIgPSBvbGVyZXByLl9BZGRWYXJfKHR5cGVpbmZvLCB0LCAwKVxuICAgICAgICAgICAgICAgIGVsc2U6ICAjIG5vdCBmb3VuZCBvciBUWVBFREVTQy9JTVBMSUNJVEFQUFxuICAgICAgICAgICAgICAgICAgICByID0gTm9uZVxuICAgICAgICAgICAgICAgIGlmIG5vdCByIGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgICAgIGtleSwgbWFwID0gclswXSwgclsxXVxuICAgICAgICAgICAgICAgICAgICBpdGVtID0gbWFwW2tleV1cbiAgICAgICAgICAgICAgICAgICAgaWYgbWFwID09IG9sZXJlcHIucHJvcE1hcFB1dDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZXJlcHIuX3Byb3BNYXBQdXRDaGVja18oa2V5LCBpdGVtKVxuICAgICAgICAgICAgICAgICAgICBlbGlmIG1hcCA9PSBvbGVyZXByLnByb3BNYXBHZXQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBvbGVyZXByLl9wcm9wTWFwR2V0Q2hlY2tfKGtleSwgaXRlbSlcbiAgICAgICAgICAgICAgICAgICAgcmVzID0gMVxuICAgICAgICAgICAgZXhjZXB0OlxuICAgICAgICAgICAgICAgIHBhc3NcbiAgICAgICAgcmV0dXJuIHJlc1xuXG4gICAgZGVmIF9GbGFnQXNNZXRob2Qoc2VsZiwgKm1ldGhvZE5hbWVzKTpcbiAgICAgICAgIiIiRmxhZyB0aGVzZSBhdHRyaWJ1dGUgbmFtZXMgYXMgYmVpbmcgbWV0aG9kcy5cbiAgICAgICAgU29tZSBvYmplY3RzIGRvIG5vdCBjb3JyZWN0bHkgZGlmZmVyZW50aWF0ZSBtZXRob2RzIGFuZFxuICAgICAgICBwcm9wZXJ0aWVzLCBsZWFkaW5nIHRvIHByb2JsZW1zIHdoZW4gY2FsbGluZyB0aGVzZSBtZXRob2RzLlxuXG4gICAgICAgIFNwZWNpZmljYWxseSwgdHJ5aW5nIHRvIHNheTogb2IuU29tZUZ1bmMoKVxuICAgICAgICBtYXkgeWllbGQgYW4gZXhjZXB0aW9uICJOb25lIG9iamVjdCBpcyBub3QgY2FsbGFibGUiXG4gICAgICAgIEluIHRoaXMgY2FzZSwgYW4gYXR0ZW1wdCB0byBmZXRjaCB0aGUgKnByb3BlcnR5KiBoYXMgd29ya2VkXG4gICAgICAgIGFuZCByZXR1cm5lZCBOb25lLCByYXRoZXIgdGhhbiBpbmRpY2F0aW5nIGl0IGlzIHJlYWxseSBhIG1ldGhvZC5cbiAgICAgICAgQ2FsbGluZzogb2IuX0ZsYWdBc01ldGhvZCgiU29tZUZ1bmMiKVxuICAgICAgICBzaG91bGQgdGhlbiBhbGxvdyB0aGlzIHRvIHdvcmsuXG4gICAgICAgICIiIlxuICAgICAgICBmb3IgbmFtZSBpbiBtZXRob2ROYW1lczpcbiAgICAgICAgICAgIGRldGFpbHMgPSBidWlsZC5NYXBFbnRyeShzZWxmLl9fQXR0clRvSURfXyhuYW1lKSwgKG5hbWUsKSlcbiAgICAgICAgICAgIHNlbGYuX29sZXJlcHJfLm1hcEZ1bmNzW25hbWVdID0gZGV0YWlsc1xuXG4gICAgZGVmIF9fQXR0clRvSURfXyhzZWxmLCBhdHRyKTpcbiAgICAgICAgZGVidWdfYXR0cl9wcmludChcbiAgICAgICAgICAgICJDYWxsaW5nIEdldElEc09mTmFtZXMgZm9yIHByb3BlcnR5ICVzIGluIERpc3BhdGNoIGNvbnRhaW5lciAlcyJcbiAgICAgICAgICAgICUgKGF0dHIsIHNlbGYuX3VzZXJuYW1lXylcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gc2VsZi5fb2xlb2JqXy5HZXRJRHNPZk5hbWVzKDAsIGF0dHIpXG5cbiAgICBkZWYgX19nZXRhdHRyX18oc2VsZiwgYXR0cik6XG4gICAgICAgIGlmIGF0dHIgPT0gIl9faXRlcl9fIjpcbiAgICAgICAgICAgICMgV2UgY2FuXCd0IGhhbmRsZSB0aGlzIGFzIGEgbm9ybWFsIG1ldGhvZCwgYXMgaWYgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAgICAgIyBleGlzdHMsIHRoZW4gaXQgbXVzdCByZXR1cm4gYW4gaXRlcmFibGUgb2JqZWN0LlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIGludmtpbmQgPSBweXRob25jb20uRElTUEFUQ0hfTUVUSE9EIHwgcHl0aG9uY29tLkRJU1BBVENIX1BST1BFUlRZR0VUXG4gICAgICAgICAgICAgICAgZW51bSA9IHNlbGYuX29sZW9ial8uSW52b2tlVHlwZXMoXG4gICAgICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5ESVNQSURfTkVXRU5VTSwgTENJRCwgaW52a2luZCwgKDEzLCAxMCksICgpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICAgICAgcmFpc2UgQXR0cmlidXRlRXJyb3IoIlRoaXMgb2JqZWN0IGNhbiBub3QgZnVuY3Rpb24gYXMgYW4gaXRlcmF0b3IiKVxuICAgICAgICAgICAgIyBXZSBtdXN0IHJldHVybiBhIGNhbGxhYmxlIG9iamVjdC5cbiAgICAgICAgICAgIGNsYXNzIEZhY3Rvcnk6XG4gICAgICAgICAgICAgICAgZGVmIF9faW5pdF9fKHNlbGYsIG9iKTpcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5vYiA9IG9iXG5cbiAgICAgICAgICAgICAgICBkZWYgX19jYWxsX18oc2VsZik6XG4gICAgICAgICAgICAgICAgICAgIGltcG9ydCB3aW4zMmNvbS5jbGllbnQudXRpbFxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW4zMmNvbS5jbGllbnQudXRpbC5JdGVyYXRvcihzZWxmLm9iKVxuXG4gICAgICAgICAgICByZXR1cm4gRmFjdG9yeShlbnVtKVxuXG4gICAgICAgIGlmIGF0dHIuc3RhcnRzd2l0aCgiXyIpIGFuZCBhdHRyLmVuZHN3aXRoKCJfIik6ICAjIEZhc3QtdHJhY2suXG4gICAgICAgICAgICByYWlzZSBBdHRyaWJ1dGVFcnJvcihhdHRyKVxuICAgICAgICAjIElmIGEga25vd24gbWV0aG9kLCBjcmVhdGUgbmV3IGluc3RhbmNlIGFuZCByZXR1cm4uXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHJldHVybiBNYWtlTWV0aG9kKHNlbGYuX2J1aWx0TWV0aG9kc19bYXR0cl0sIHNlbGYsIHNlbGYuX19jbGFzc19fKVxuICAgICAgICBleGNlcHQgS2V5RXJyb3I6XG4gICAgICAgICAgICBwYXNzXG4gICAgICAgICMgWFhYIC0gTm90ZSB0aGF0IHdlIGN1cnJlbnQgYXJlIGNhc2Ugc2Vuc2l0aXZlIGluIHRoZSBtZXRob2QuXG4gICAgICAgICMgZGVidWdfYXR0cl9wcmludCgiR2V0QXR0ciBjYWxsZWQgZm9yICVzIG9uIERpc3BhdGNoQ29udGFpbmVyICVzIiAlIChhdHRyLHNlbGYuX3VzZXJuYW1lXykpXG4gICAgICAgICMgRmlyc3QgY2hlY2sgaWYgaXQgaXMgaW4gdGhlIG1ldGhvZCBtYXAuICBOb3RlIHRoYXQgYW4gYWN0dWFsIG1ldGhvZFxuICAgICAgICAjIG11c3Qgbm90IHlldCBleGlzdCwgKG90aGVyd2lzZSB3ZSB3b3VsZCBub3QgYmUgaGVyZSkuICBUaGlzXG4gICAgICAgICMgbWVhbnMgd2UgY3JlYXRlIHRoZSBhY3R1YWwgbWV0aG9kIG9iamVjdCAtIHdoaWNoIGFsc28gbWVhbnNcbiAgICAgICAgIyB0aGlzIGNvZGUgd2lsbCBuZXZlciBiZSBhc2tlZCBmb3IgdGhhdCBtZXRob2QgbmFtZSBhZ2Fpbi5cbiAgICAgICAgaWYgYXR0ciBpbiBzZWxmLl9vbGVyZXByXy5tYXBGdW5jczpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9tYWtlX21ldGhvZF8oYXR0cilcblxuICAgICAgICAjIERlbGVnYXRlIHRvIHByb3BlcnR5IG1hcHMvY2FjaGVkIGl0ZW1zXG4gICAgICAgIHJldEVudHJ5ID0gTm9uZVxuICAgICAgICBpZiBzZWxmLl9vbGVyZXByXyBhbmQgc2VsZi5fb2xlb2JqXzpcbiAgICAgICAgICAgICMgZmlyc3QgY2hlY2sgZ2VuZXJhbCBwcm9wZXJ0eSBtYXAsIHRoZW4gc3BlY2lmaWMgInB1dCIgbWFwLlxuICAgICAgICAgICAgcmV0RW50cnkgPSBzZWxmLl9vbGVyZXByXy5wcm9wTWFwLmdldChhdHRyKVxuICAgICAgICAgICAgaWYgcmV0RW50cnkgaXMgTm9uZTpcbiAgICAgICAgICAgICAgICByZXRFbnRyeSA9IHNlbGYuX29sZXJlcHJfLnByb3BNYXBHZXQuZ2V0KGF0dHIpXG4gICAgICAgICAgICAjIE5vdCBmb3VuZCBzbyBmYXIgLSBTZWUgd2hhdCBDT00gc2F5cy5cbiAgICAgICAgICAgIGlmIHJldEVudHJ5IGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLl9fTGF6eU1hcF9fKGF0dHIpOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgYXR0ciBpbiBzZWxmLl9vbGVyZXByXy5tYXBGdW5jczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fbWFrZV9tZXRob2RfKGF0dHIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRFbnRyeSA9IHNlbGYuX29sZXJlcHJfLnByb3BNYXAuZ2V0KGF0dHIpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiByZXRFbnRyeSBpcyBOb25lOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldEVudHJ5ID0gc2VsZi5fb2xlcmVwcl8ucHJvcE1hcEdldC5nZXQoYXR0cilcbiAgICAgICAgICAgICAgICAgICAgaWYgcmV0RW50cnkgaXMgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldEVudHJ5ID0gYnVpbGQuTWFwRW50cnkoc2VsZi5fX0F0dHJUb0lEX18oYXR0ciksIChhdHRyLCkpXG4gICAgICAgICAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5vbGVfZXJyb3I6XG4gICAgICAgICAgICAgICAgICAgIHBhc3MgICMgTm8gcHJvcCBieSB0aGF0IG5hbWUgLSByZXRFbnRyeSByZW1haW5zIE5vbmUuXG5cbiAgICAgICAgaWYgcmV0RW50cnkgaXMgbm90IE5vbmU6ICAjIHNlZSBpZiBpbiBteSBjYWNoZVxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIHJldCA9IHNlbGYuX21hcENhY2hlZEl0ZW1zX1tyZXRFbnRyeS5kaXNwaWRdXG4gICAgICAgICAgICAgICAgZGVidWdfYXR0cl9wcmludCgiQ2FjaGVkIGl0ZW1zIGhhcyBhdHRyaWJ1dGUhIiwgcmV0KVxuICAgICAgICAgICAgICAgIHJldHVybiByZXRcbiAgICAgICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIEF0dHJpYnV0ZUVycm9yKTpcbiAgICAgICAgICAgICAgICBkZWJ1Z19hdHRyX3ByaW50KCJBdHRyaWJ1dGUgJXMgbm90IGluIGNhY2hlIiAlIGF0dHIpXG5cbiAgICAgICAgIyBJZiB3ZSBhcmUgc3RpbGwgaGVyZSwgYW5kIGhhdmUgYSByZXRFbnRyeSwgZ2V0IHRoZSBPTEUgaXRlbVxuICAgICAgICBpZiByZXRFbnRyeSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIGludm9rZV90eXBlID0gX0dldERlc2NJbnZva2VUeXBlKHJldEVudHJ5LCBweXRob25jb20uSU5WT0tFX1BST1BFUlRZR0VUKVxuICAgICAgICAgICAgZGVidWdfYXR0cl9wcmludChcbiAgICAgICAgICAgICAgICAiR2V0dGluZyBwcm9wZXJ0eSBJZCAweCV4IGZyb20gT0xFIG9iamVjdCIgJSByZXRFbnRyeS5kaXNwaWRcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICByZXQgPSBzZWxmLl9vbGVvYmpfLkludm9rZShyZXRFbnRyeS5kaXNwaWQsIDAsIGludm9rZV90eXBlLCAxKVxuICAgICAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3IgYXMgZGV0YWlsczpcbiAgICAgICAgICAgICAgICBpZiBkZXRhaWxzLmhyZXN1bHQgaW4gRVJST1JTX0JBRF9DT05URVhUOlxuICAgICAgICAgICAgICAgICAgICAjIE1heSBiZSBhIG1ldGhvZC5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fb2xlcmVwcl8ubWFwRnVuY3NbYXR0cl0gPSByZXRFbnRyeVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fbWFrZV9tZXRob2RfKGF0dHIpXG4gICAgICAgICAgICAgICAgcmFpc2VcbiAgICAgICAgICAgIGRlYnVnX2F0dHJfcHJpbnQoIk9MRSByZXR1cm5lZCAiLCByZXQpXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X2dvb2Rfb2JqZWN0XyhyZXQpXG5cbiAgICAgICAgIyBubyB3aGVyZSBlbHNlIHRvIGxvb2suXG4gICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKCIlcy4lcyIgJSAoc2VsZi5fdXNlcm5hbWVfLCBhdHRyKSlcblxuICAgIGRlZiBfX3NldGF0dHJfXyhzZWxmLCBhdHRyLCB2YWx1ZSk6XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGF0dHIgaW4gc2VsZi5fX2RpY3RfX1xuICAgICAgICApOiAgIyBGYXN0LXRyYWNrIC0gaWYgYWxyZWFkeSBpbiBvdXIgZGljdCwganVzdCBtYWtlIHRoZSBhc3NpZ25tZW50LlxuICAgICAgICAgICAgIyBYWFggLSBzaG91bGQgbWF5YmUgY2hlY2sgbWV0aG9kIG1hcCAtIGlmIHNvbWVvbmUgYXNzaWducyB0byBhIG1ldGhvZCxcbiAgICAgICAgICAgICMgaXQgY291bGQgbWVhbiBzb21ldGhpbmcgc3BlY2lhbCAobm90IHN1cmUgd2hhdCwgdGhvISlcbiAgICAgICAgICAgIHNlbGYuX19kaWN0X19bYXR0cl0gPSB2YWx1ZVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICMgQWxsb3cgcHJvcGVydHkgYXNzaWdubWVudC5cbiAgICAgICAgZGVidWdfYXR0cl9wcmludChcbiAgICAgICAgICAgICJTZXRBdHRyIGNhbGxlZCBmb3IgJXMuJXM9JXMgb24gRGlzcGF0Y2hDb250YWluZXIiXG4gICAgICAgICAgICAlIChzZWxmLl91c2VybmFtZV8sIGF0dHIsIHJlcHIodmFsdWUpKVxuICAgICAgICApXG5cbiAgICAgICAgaWYgc2VsZi5fb2xlcmVwcl86XG4gICAgICAgICAgICAjIENoZWNrIHRoZSAiZ2VuZXJhbCIgcHJvcGVydHkgbWFwLlxuICAgICAgICAgICAgaWYgYXR0ciBpbiBzZWxmLl9vbGVyZXByXy5wcm9wTWFwOlxuICAgICAgICAgICAgICAgIGVudHJ5ID0gc2VsZi5fb2xlcmVwcl8ucHJvcE1hcFthdHRyXVxuICAgICAgICAgICAgICAgIGludm9rZV90eXBlID0gX0dldERlc2NJbnZva2VUeXBlKGVudHJ5LCBweXRob25jb20uSU5WT0tFX1BST1BFUlRZUFVUKVxuICAgICAgICAgICAgICAgIHNlbGYuX29sZW9ial8uSW52b2tlKGVudHJ5LmRpc3BpZCwgMCwgaW52b2tlX3R5cGUsIDAsIHZhbHVlKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgIyBDaGVjayB0aGUgc3BlY2lmaWMgInB1dCIgbWFwLlxuICAgICAgICAgICAgaWYgYXR0ciBpbiBzZWxmLl9vbGVyZXByXy5wcm9wTWFwUHV0OlxuICAgICAgICAgICAgICAgIGVudHJ5ID0gc2VsZi5fb2xlcmVwcl8ucHJvcE1hcFB1dFthdHRyXVxuICAgICAgICAgICAgICAgIGludm9rZV90eXBlID0gX0dldERlc2NJbnZva2VUeXBlKGVudHJ5LCBweXRob25jb20uSU5WT0tFX1BST1BFUlRZUFVUKVxuICAgICAgICAgICAgICAgIHNlbGYuX29sZW9ial8uSW52b2tlKGVudHJ5LmRpc3BpZCwgMCwgaW52b2tlX3R5cGUsIDAsIHZhbHVlKVxuICAgICAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgICMgVHJ5IHRoZSBPTEUgT2JqZWN0XG4gICAgICAgIGlmIHNlbGYuX29sZW9ial86XG4gICAgICAgICAgICBpZiBzZWxmLl9fTGF6eU1hcF9fKGF0dHIpOlxuICAgICAgICAgICAgICAgICMgQ2hlY2sgdGhlICJnZW5lcmFsIiBwcm9wZXJ0eSBtYXAuXG4gICAgICAgICAgICAgICAgaWYgYXR0ciBpbiBzZWxmLl9vbGVyZXByXy5wcm9wTWFwOlxuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IHNlbGYuX29sZXJlcHJfLnByb3BNYXBbYXR0cl1cbiAgICAgICAgICAgICAgICAgICAgaW52b2tlX3R5cGUgPSBfR2V0RGVzY0ludm9rZVR5cGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRyeSwgcHl0aG9uY29tLklOVk9LRV9QUk9QRVJUWVBVVFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX29sZW9ial8uSW52b2tlKGVudHJ5LmRpc3BpZCwgMCwgaW52b2tlX3R5cGUsIDAsIHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAjIENoZWNrIHRoZSBzcGVjaWZpYyAicHV0IiBtYXAuXG4gICAgICAgICAgICAgICAgaWYgYXR0ciBpbiBzZWxmLl9vbGVyZXByXy5wcm9wTWFwUHV0OlxuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IHNlbGYuX29sZXJlcHJfLnByb3BNYXBQdXRbYXR0cl1cbiAgICAgICAgICAgICAgICAgICAgaW52b2tlX3R5cGUgPSBfR2V0RGVzY0ludm9rZVR5cGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRyeSwgcHl0aG9uY29tLklOVk9LRV9QUk9QRVJUWVBVVFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX29sZW9ial8uSW52b2tlKGVudHJ5LmRpc3BpZCwgMCwgaW52b2tlX3R5cGUsIDAsIHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBlbnRyeSA9IGJ1aWxkLk1hcEVudHJ5KHNlbGYuX19BdHRyVG9JRF9fKGF0dHIpLCAoYXR0ciwpKVxuICAgICAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICAgICAgIyBObyBhdHRyaWJ1dGUgb2YgdGhhdCBuYW1lXG4gICAgICAgICAgICAgICAgZW50cnkgPSBOb25lXG4gICAgICAgICAgICBpZiBlbnRyeSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIGludm9rZV90eXBlID0gX0dldERlc2NJbnZva2VUeXBlKFxuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnksIHB5dGhvbmNvbS5JTlZPS0VfUFJPUEVSVFlQVVRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9vbGVvYmpfLkludm9rZShlbnRyeS5kaXNwaWQsIDAsIGludm9rZV90eXBlLCAwLCB2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fb2xlcmVwcl8ucHJvcE1hcFthdHRyXSA9IGVudHJ5XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnX2F0dHJfcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAiX19zZXRhdHRyX18gcHJvcGVydHkgJXMgKGlkPTB4JXgpIGluIERpc3BhdGNoIGNvbnRhaW5lciAlcyJcbiAgICAgICAgICAgICAgICAgICAgICAgICUgKGF0dHIsIGVudHJ5LmRpc3BpZCwgc2VsZi5fdXNlcm5hbWVfKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yOlxuICAgICAgICAgICAgICAgICAgICBwYXNzXG4gICAgICAgIHJhaXNlIEF0dHJpYnV0ZUVycm9yKFxuICAgICAgICAgICAgIlByb3BlcnR5IFwnJXMuJXNcJyBjYW4gbm90IGJlIHNldC4iICUgKHNlbGYuX3VzZXJuYW1lXywgYXR0cilcbiAgICAgICAgKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3dpbjMyY29tL2NsaWVudC9idWlsZC5weScsIGInIiIiQ29udGFpbnMga25vd2xlZGdlIHRvIGJ1aWxkIGEgQ09NIG9iamVjdCBkZWZpbml0aW9uLlxuXG5UaGlzIG1vZHVsZSBpcyB1c2VkIGJ5IGJvdGggdGhlIEBkeW5hbWljQCBhbmQgQG1ha2VweUAgbW9kdWxlcyB0byBidWlsZFxuYWxsIGtub3dsZWRnZSBvZiBhIENPTSBvYmplY3QuXG5cblRoaXMgbW9kdWxlIGNvbnRhaW5zIGNsYXNzZXMgd2hpY2ggY29udGFpbiB0aGUgYWN0dWFsIGtub3dsZWRnZSBvZiB0aGUgb2JqZWN0LlxuVGhpcyBpbmNsdWRlIHBhcmFtZXRlciBhbmQgcmV0dXJuIHR5cGUgaW5mb3JtYXRpb24sIHRoZSBDT00gZGlzcGlkIGFuZCBDTFNJRCwgZXRjLlxuXG5PdGhlciBtb2R1bGVzIG1heSB1c2UgdGhpcyBpbmZvcm1hdGlvbiB0byBnZW5lcmF0ZSAucHkgZmlsZXMsIHVzZSB0aGUgaW5mb3JtYXRpb25cbmR5bmFtaWNhbGx5LCBvciBwb3NzaWJseSBldmVuIGdlbmVyYXRlIC5odG1sIGRvY3VtZW50YXRpb24gZm9yIG9iamVjdHMuXG4iIiJcblxuI1xuIyBOT1RFUzogRGlzcGF0Y2hJdGVtIGFuZCBNYXBFbnRyeSB1c2VkIGJ5IGR5bmFtaWMucHkuXG4jICAgICAgICB0aGUgcmVzdCBpcyB1c2VkIGJ5IG1ha2VweS5weVxuI1xuIyAgICAgICAgT2xlSXRlbSwgRGlzcGF0Y2hJdGVtLCBNYXBFbnRyeSwgQnVpbGRDYWxsTGlzdCgpIGlzIHVzZWQgYnkgbWFrZXB5XG5cbmltcG9ydCBzeXNcbmltcG9ydCBzdHJpbmdcbmZyb20ga2V5d29yZCBpbXBvcnQgaXNrZXl3b3JkXG5cbmltcG9ydCBweXRob25jb21cbmZyb20gcHl3aW50eXBlcyBpbXBvcnQgVGltZVR5cGVcbmltcG9ydCB3aW5lcnJvclxuaW1wb3J0IGRhdGV0aW1lXG5cbiMgSXQgaXNuXCd0IHJlYWxseSBjbGVhciB3aGF0IHRoZSBxdW90aW5nIHJ1bGVzIGFyZSBpbiBhIEMvSURMIHN0cmluZyBhbmRcbiMgbGl0ZXJhbHMgbGlrZSBhIHF1b3RlIGNoYXIgYW5kIGJhY2tzbGFzaGVzIG1ha2VzIGxpZmUgYSBsaXR0bGUgcGFpbmZ1bCB0b1xuIyBhbHdheXMgcmVuZGVyIHRoZSBzdHJpbmcgcGVyZmVjdGx5IC0gc28ganVzdCBwdW50IGFuZCBmYWxsLWJhY2sgdG8gYSByZXByKClcbmRlZiBfbWFrZURvY1N0cmluZyhzKTpcbiAgICBpZiBzeXMudmVyc2lvbl9pbmZvIDwgKDMsKTpcbiAgICAgICAgcyA9IHMuZW5jb2RlKCJtYmNzIilcbiAgICByZXR1cm4gcmVwcihzKVxuXG5cbmVycm9yID0gIlB5dGhvbkNPTS5DbGllbnQuQnVpbGQgZXJyb3IiXG5cblxuY2xhc3MgTm90U3VwcG9ydGVkRXhjZXB0aW9uKEV4Y2VwdGlvbik6XG4gICAgcGFzcyAgIyBSYWlzZWQgd2hlbiB3ZSBjYW50IHN1cHBvcnQgYSBwYXJhbSB0eXBlLlxuXG5cbkRyb3BJbmRpcmVjdGlvbiA9ICJEcm9wSW5kaXJlY3Rpb24iXG5cbk5vVHJhbnNsYXRlVHlwZXMgPSBbXG4gICAgcHl0aG9uY29tLlZUX0JPT0wsXG4gICAgcHl0aG9uY29tLlZUX0NMU0lELFxuICAgIHB5dGhvbmNvbS5WVF9DWSxcbiAgICBweXRob25jb20uVlRfREFURSxcbiAgICBweXRob25jb20uVlRfREVDSU1BTCxcbiAgICBweXRob25jb20uVlRfRU1QVFksXG4gICAgcHl0aG9uY29tLlZUX0VSUk9SLFxuICAgIHB5dGhvbmNvbS5WVF9GSUxFVElNRSxcbiAgICBweXRob25jb20uVlRfSFJFU1VMVCxcbiAgICBweXRob25jb20uVlRfSTEsXG4gICAgcHl0aG9uY29tLlZUX0kyLFxuICAgIHB5dGhvbmNvbS5WVF9JNCxcbiAgICBweXRob25jb20uVlRfSTgsXG4gICAgcHl0aG9uY29tLlZUX0lOVCxcbiAgICBweXRob25jb20uVlRfTlVMTCxcbiAgICBweXRob25jb20uVlRfUjQsXG4gICAgcHl0aG9uY29tLlZUX1I4LFxuICAgIHB5dGhvbmNvbS5WVF9OVUxMLFxuICAgIHB5dGhvbmNvbS5WVF9TVFJFQU0sXG4gICAgcHl0aG9uY29tLlZUX1VJMSxcbiAgICBweXRob25jb20uVlRfVUkyLFxuICAgIHB5dGhvbmNvbS5WVF9VSTQsXG4gICAgcHl0aG9uY29tLlZUX1VJOCxcbiAgICBweXRob25jb20uVlRfVUlOVCxcbiAgICBweXRob25jb20uVlRfVk9JRCxcbl1cblxuTm9UcmFuc2xhdGVNYXAgPSB7fVxuZm9yIHYgaW4gTm9UcmFuc2xhdGVUeXBlczpcbiAgICBOb1RyYW5zbGF0ZU1hcFt2XSA9IE5vbmVcblxuXG5jbGFzcyBNYXBFbnRyeTpcbiAgICAiU2ltcGxlIGhvbGRlciBmb3IgbmFtZWQgYXR0aWJ1dGVzIC0gaXRlbXMgaW4gYSBtYXAuIlxuXG4gICAgZGVmIF9faW5pdF9fKFxuICAgICAgICBzZWxmLFxuICAgICAgICBkZXNjX29yX2lkLFxuICAgICAgICBuYW1lcz1Ob25lLFxuICAgICAgICBkb2M9Tm9uZSxcbiAgICAgICAgcmVzdWx0Q0xTSUQ9cHl0aG9uY29tLklJRF9OVUxMLFxuICAgICAgICByZXN1bHREb2M9Tm9uZSxcbiAgICAgICAgaGlkZGVuPTAsXG4gICAgKTpcbiAgICAgICAgaWYgdHlwZShkZXNjX29yX2lkKSA9PSB0eXBlKDApOlxuICAgICAgICAgICAgc2VsZi5kaXNwaWQgPSBkZXNjX29yX2lkXG4gICAgICAgICAgICBzZWxmLmRlc2MgPSBOb25lXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBzZWxmLmRpc3BpZCA9IGRlc2Nfb3JfaWRbMF1cbiAgICAgICAgICAgIHNlbGYuZGVzYyA9IGRlc2Nfb3JfaWRcblxuICAgICAgICBzZWxmLm5hbWVzID0gbmFtZXNcbiAgICAgICAgc2VsZi5kb2MgPSBkb2NcbiAgICAgICAgc2VsZi5yZXN1bHRDTFNJRCA9IHJlc3VsdENMU0lEXG4gICAgICAgIHNlbGYucmVzdWx0RG9jdW1lbnRhdGlvbiA9IHJlc3VsdERvY1xuICAgICAgICBzZWxmLndhc1Byb3BlcnR5ID0gKFxuICAgICAgICAgICAgMCAgIyBIYXZlIEkgYmVlbiB0cmFuc2Zvcm1lZCBpbnRvIGEgZnVuY3Rpb24gc28gSSBjYW4gcGFzcyBhcmdzP1xuICAgICAgICApXG4gICAgICAgIHNlbGYuaGlkZGVuID0gaGlkZGVuXG5cbiAgICBkZWYgX19yZXByX18oc2VsZik6XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAiTWFwRW50cnkoZGlzcGlkPXtzLmRpc3BpZH0sIGRlc2M9e3MuZGVzY30sIG5hbWVzPXtzLm5hbWVzfSwgZG9jPXtzLmRvYyFyfSwgIlxuICAgICAgICAgICAgInJlc3VsdENMU0lEPXtzLnJlc3VsdENMU0lEfSwgcmVzdWx0RG9jdW1lbnRhdGlvbj17cy5yZXN1bHREb2N1bWVudGF0aW9ufSwgIlxuICAgICAgICAgICAgIndhc1Byb3BlcnR5PXtzLndhc1Byb3BlcnR5fSwgaGlkZGVuPXtzLmhpZGRlbn0iXG4gICAgICAgICkuZm9ybWF0KHM9c2VsZilcblxuICAgIGRlZiBHZXRSZXN1bHRDTFNJRChzZWxmKTpcbiAgICAgICAgcmMgPSBzZWxmLnJlc3VsdENMU0lEXG4gICAgICAgIGlmIHJjID09IHB5dGhvbmNvbS5JSURfTlVMTDpcbiAgICAgICAgICAgIHJldHVybiBOb25lXG4gICAgICAgIHJldHVybiByY1xuXG4gICAgIyBSZXR1cm4gYSBzdHJpbmcsIHN1aXRhYmxlIGZvciBvdXRwdXQgLSBlaXRoZXIgIlwney4uLn1cJyIgb3IgIk5vbmUiXG4gICAgZGVmIEdldFJlc3VsdENMU0lEU3RyKHNlbGYpOlxuICAgICAgICByYyA9IHNlbGYuR2V0UmVzdWx0Q0xTSUQoKVxuICAgICAgICBpZiByYyBpcyBOb25lOlxuICAgICAgICAgICAgcmV0dXJuICJOb25lIlxuICAgICAgICByZXR1cm4gcmVwcihcbiAgICAgICAgICAgIHN0cihyYylcbiAgICAgICAgKSAgIyBDb252ZXJ0IHRoZSBJSUQgb2JqZWN0IHRvIGEgc3RyaW5nLCB0aGVuIHRvIGEgc3RyaW5nIGluIGEgc3RyaW5nLlxuXG4gICAgZGVmIEdldFJlc3VsdE5hbWUoc2VsZik6XG4gICAgICAgIGlmIHNlbGYucmVzdWx0RG9jdW1lbnRhdGlvbiBpcyBOb25lOlxuICAgICAgICAgICAgcmV0dXJuIE5vbmVcbiAgICAgICAgcmV0dXJuIHNlbGYucmVzdWx0RG9jdW1lbnRhdGlvblswXVxuXG5cbmNsYXNzIE9sZUl0ZW06XG4gICAgdHlwZW5hbWUgPSAiT2xlSXRlbSJcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkb2M9Tm9uZSk6XG4gICAgICAgIHNlbGYuZG9jID0gZG9jXG4gICAgICAgIGlmIHNlbGYuZG9jOlxuICAgICAgICAgICAgc2VsZi5weXRob25fbmFtZSA9IE1ha2VQdWJsaWNBdHRyaWJ1dGVOYW1lKHNlbGYuZG9jWzBdKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgc2VsZi5weXRob25fbmFtZSA9IE5vbmVcbiAgICAgICAgc2VsZi5iV3JpdHRlbiA9IDBcbiAgICAgICAgc2VsZi5iSXNEaXNwYXRjaCA9IDBcbiAgICAgICAgc2VsZi5iSXNTaW5rID0gMFxuICAgICAgICBzZWxmLmNsc2lkID0gTm9uZVxuICAgICAgICBzZWxmLmNvX2NsYXNzID0gTm9uZVxuXG5cbmNsYXNzIERpc3BhdGNoSXRlbShPbGVJdGVtKTpcbiAgICB0eXBlbmFtZSA9ICJEaXNwYXRjaEl0ZW0iXG5cbiAgICBkZWYgX19pbml0X18oc2VsZiwgdHlwZWluZm89Tm9uZSwgYXR0cj1Ob25lLCBkb2M9Tm9uZSwgYkZvclVzZXI9MSk6XG4gICAgICAgIE9sZUl0ZW0uX19pbml0X18oc2VsZiwgZG9jKVxuICAgICAgICBzZWxmLnByb3BNYXAgPSB7fVxuICAgICAgICBzZWxmLnByb3BNYXBHZXQgPSB7fVxuICAgICAgICBzZWxmLnByb3BNYXBQdXQgPSB7fVxuICAgICAgICBzZWxmLm1hcEZ1bmNzID0ge31cbiAgICAgICAgc2VsZi5kZWZhdWx0RGlzcGF0Y2hOYW1lID0gTm9uZVxuICAgICAgICBzZWxmLmhpZGRlbiA9IDBcblxuICAgICAgICBpZiB0eXBlaW5mbzpcbiAgICAgICAgICAgIHNlbGYuQnVpbGQodHlwZWluZm8sIGF0dHIsIGJGb3JVc2VyKVxuXG4gICAgZGVmIF9wcm9wTWFwUHV0Q2hlY2tfKHNlbGYsIGtleSwgaXRlbSk6XG4gICAgICAgIGlucywgb3V0cywgb3B0cyA9IHNlbGYuQ291bnRJbk91dE9wdEFyZ3MoaXRlbS5kZXNjWzJdKVxuICAgICAgICBpZiBpbnMgPiAxOiAgIyBpZiBhIFB1dCBwcm9wZXJ0eSB0YWtlcyBtb3JlIHRoYW4gMSBhcmc6XG4gICAgICAgICAgICBpZiBvcHRzICsgMSA9PSBpbnMgb3IgaW5zID09IGl0ZW0uZGVzY1s2XSArIDE6XG4gICAgICAgICAgICAgICAgbmV3S2V5ID0gIlNldCIgKyBrZXlcbiAgICAgICAgICAgICAgICBkZWxldGVFeGlzdGluZyA9IDAgICMgVGhpcyBvbmUgaXMgc3RpbGwgT0tcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgZGVsZXRlRXhpc3RpbmcgPSAxICAjIE5vIGdvb2QgdG8gdXNcbiAgICAgICAgICAgICAgICBpZiBrZXkgaW4gc2VsZi5tYXBGdW5jcyBvciBrZXkgaW4gc2VsZi5wcm9wTWFwR2V0OlxuICAgICAgICAgICAgICAgICAgICBuZXdLZXkgPSAiU2V0IiArIGtleVxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIG5ld0tleSA9IGtleVxuICAgICAgICAgICAgaXRlbS53YXNQcm9wZXJ0eSA9IDFcbiAgICAgICAgICAgIHNlbGYubWFwRnVuY3NbbmV3S2V5XSA9IGl0ZW1cbiAgICAgICAgICAgIGlmIGRlbGV0ZUV4aXN0aW5nOlxuICAgICAgICAgICAgICAgIGRlbCBzZWxmLnByb3BNYXBQdXRba2V5XVxuXG4gICAgZGVmIF9wcm9wTWFwR2V0Q2hlY2tfKHNlbGYsIGtleSwgaXRlbSk6XG4gICAgICAgIGlucywgb3V0cywgb3B0cyA9IHNlbGYuQ291bnRJbk91dE9wdEFyZ3MoaXRlbS5kZXNjWzJdKVxuICAgICAgICBpZiBpbnMgPiAwOiAgIyBpZiBhIEdldCBwcm9wZXJ0eSB0YWtlcyBfYW55XyBpbiBhcmdzOlxuICAgICAgICAgICAgaWYgaXRlbS5kZXNjWzZdID09IGlucyBvciBpbnMgPT0gb3B0czpcbiAgICAgICAgICAgICAgICBuZXdLZXkgPSAiR2V0IiArIGtleVxuICAgICAgICAgICAgICAgIGRlbGV0ZUV4aXN0aW5nID0gMCAgIyBUaGlzIG9uZSBpcyBzdGlsbCBPS1xuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBkZWxldGVFeGlzdGluZyA9IDEgICMgTm8gZ29vZCB0byB1c1xuICAgICAgICAgICAgICAgIGlmIGtleSBpbiBzZWxmLm1hcEZ1bmNzOlxuICAgICAgICAgICAgICAgICAgICBuZXdLZXkgPSAiR2V0IiArIGtleVxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIG5ld0tleSA9IGtleVxuICAgICAgICAgICAgaXRlbS53YXNQcm9wZXJ0eSA9IDFcbiAgICAgICAgICAgIHNlbGYubWFwRnVuY3NbbmV3S2V5XSA9IGl0ZW1cbiAgICAgICAgICAgIGlmIGRlbGV0ZUV4aXN0aW5nOlxuICAgICAgICAgICAgICAgIGRlbCBzZWxmLnByb3BNYXBHZXRba2V5XVxuXG4gICAgZGVmIF9BZGRGdW5jXyhzZWxmLCB0eXBlaW5mbywgZmRlc2MsIGJGb3JVc2VyKTpcbiAgICAgICAgYXNzZXJ0IGZkZXNjLmRlc2NraW5kID09IHB5dGhvbmNvbS5ERVNDS0lORF9GVU5DREVTQ1xuICAgICAgICBpZCA9IGZkZXNjLm1lbWlkXG4gICAgICAgIGZ1bmNmbGFncyA9IGZkZXNjLndGdW5jRmxhZ3NcbiAgICAgICAgdHJ5OlxuICAgICAgICAgICAgbmFtZXMgPSB0eXBlaW5mby5HZXROYW1lcyhpZClcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lc1swXVxuICAgICAgICBleGNlcHQgcHl0aG9uY29tLm9sZV9lcnJvcjpcbiAgICAgICAgICAgIG5hbWUgPSAiIlxuICAgICAgICAgICAgbmFtZXMgPSBOb25lXG5cbiAgICAgICAgZG9jID0gTm9uZVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBpZiBiRm9yVXNlcjpcbiAgICAgICAgICAgICAgICBkb2MgPSB0eXBlaW5mby5HZXREb2N1bWVudGF0aW9uKGlkKVxuICAgICAgICBleGNlcHQgcHl0aG9uY29tLm9sZV9lcnJvcjpcbiAgICAgICAgICAgIHBhc3NcblxuICAgICAgICBpZiBpZCA9PSAwIGFuZCBuYW1lOlxuICAgICAgICAgICAgc2VsZi5kZWZhdWx0RGlzcGF0Y2hOYW1lID0gbmFtZVxuXG4gICAgICAgIGludmtpbmQgPSBmZGVzYy5pbnZraW5kXG5cbiAgICAgICAgIyBXZSBuZWVkIHRvIHRyYW5zbGF0ZSBhbnkgQWxpYXNcJywgRW51bXMsIHN0cnVjdHMgZXRjIGluIHJlc3VsdCBhbmQgYXJnc1xuICAgICAgICB0eXBlcmVwciwgZmxhZywgZGVmdmFsID0gZmRlc2MucmV0dHlwZVxuICAgICAgICAjIFx0XHRzeXMuc3RkZXJyLndyaXRlKCIlcyByZXN1bHQgLSAlcyAtPiAiICUgKG5hbWUsIHR5cGVyZXByKSlcbiAgICAgICAgdHlwZXJlcHIsIHJlc3VsdENMU0lELCByZXN1bHREb2MgPSBfUmVzb2x2ZVR5cGUodHlwZXJlcHIsIHR5cGVpbmZvKVxuICAgICAgICAjIFx0XHRzeXMuc3RkZXJyLndyaXRlKCIlc1xcbiIgJSAodHlwZXJlcHIsKSlcbiAgICAgICAgZmRlc2MucmV0dHlwZSA9IHR5cGVyZXByLCBmbGFnLCBkZWZ2YWwsIHJlc3VsdENMU0lEXG4gICAgICAgICMgVHJhbnNsYXRlIGFueSBBbGlhcyBvciBFbnVtcyBpbiBhcmd1bWVudCBsaXN0LlxuICAgICAgICBhcmdMaXN0ID0gW11cbiAgICAgICAgZm9yIGFyZ0Rlc2MgaW4gZmRlc2MuYXJnczpcbiAgICAgICAgICAgIHR5cGVyZXByLCBmbGFnLCBkZWZ2YWwgPSBhcmdEZXNjXG4gICAgICAgICAgICAjIFx0XHRcdHN5cy5zdGRlcnIud3JpdGUoIiVzIGFyZyAtICVzIC0+ICIgJSAobmFtZSwgdHlwZXJlcHIpKVxuICAgICAgICAgICAgYXJnX3R5cGUsIGFyZ19jbHNpZCwgYXJnX2RvYyA9IF9SZXNvbHZlVHlwZSh0eXBlcmVwciwgdHlwZWluZm8pXG4gICAgICAgICAgICBhcmdEZXNjID0gYXJnX3R5cGUsIGZsYWcsIGRlZnZhbCwgYXJnX2Nsc2lkXG4gICAgICAgICAgICAjIFx0XHRcdHN5cy5zdGRlcnIud3JpdGUoIiVzXFxuIiAlIChhcmdEZXNjWzBdLCkpXG4gICAgICAgICAgICBhcmdMaXN0LmFwcGVuZChhcmdEZXNjKVxuICAgICAgICBmZGVzYy5hcmdzID0gdHVwbGUoYXJnTGlzdClcblxuICAgICAgICBoaWRkZW4gPSAoZnVuY2ZsYWdzICYgcHl0aG9uY29tLkZVTkNGTEFHX0ZISURERU4pICE9IDBcbiAgICAgICAgaWYgaW52a2luZCA9PSBweXRob25jb20uSU5WT0tFX1BST1BFUlRZR0VUOlxuICAgICAgICAgICAgbWFwID0gc2VsZi5wcm9wTWFwR2V0XG4gICAgICAgICMgVGhpcyBpcyBub3QgdGhlIGJlc3Qgc29sdXRpb24sIGJ1dCBJIGRvbnQgdGhpbmsgdGhlcmUgaXNcbiAgICAgICAgIyBvbmUgd2l0aG91dCBzcGVjaWZpYyAic2V0IiBzeW50YXguXG4gICAgICAgICMgSWYgdGhlcmUgaXMgYSBzaW5nbGUgUFVUIG9yIFBVVFJFRiwgaXQgd2lsbCBmdW5jdGlvbiBhcyBhIHByb3BlcnR5LlxuICAgICAgICAjIElmIHRoZXJlIGFyZSBib3RoLCB0aGVuIHRoZSBQVVQgcmVtYWlucyBhIHByb3BlcnR5LCBhbmQgdGhlIFBVVFJFRlxuICAgICAgICAjIGdldHMgdHJhbnNmb3JtZWQgaW50byBhIGZ1bmN0aW9uLlxuICAgICAgICAjIChpbiB2YiwgUFVUPT0ib2JqPW90aGVyX29iaiIsIFBVVFJFRj0ic2V0IG9iaj1vdGhlcl9vYmpcbiAgICAgICAgZWxpZiBpbnZraW5kIGluIChweXRob25jb20uSU5WT0tFX1BST1BFUlRZUFVULCBweXRob25jb20uSU5WT0tFX1BST1BFUlRZUFVUUkVGKTpcbiAgICAgICAgICAgICMgU3BlY2lhbCBjYXNlXG4gICAgICAgICAgICBleGlzdGluZyA9IHNlbGYucHJvcE1hcFB1dC5nZXQobmFtZSwgTm9uZSlcbiAgICAgICAgICAgIGlmIGV4aXN0aW5nIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgIGlmIGV4aXN0aW5nLmRlc2NbNF0gPT0gcHl0aG9uY29tLklOVk9LRV9QUk9QRVJUWVBVVDogICMgS2VlcCB0aGlzIG9uZVxuICAgICAgICAgICAgICAgICAgICBtYXAgPSBzZWxmLm1hcEZ1bmNzXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSAiU2V0IiArIG5hbWVcbiAgICAgICAgICAgICAgICBlbHNlOiAgIyBFeGlzdGluZyBiZWNvbWVzIGEgZnVuYy5cbiAgICAgICAgICAgICAgICAgICAgZXhpc3Rpbmcud2FzUHJvcGVydHkgPSAxXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubWFwRnVuY3NbIlNldCIgKyBuYW1lXSA9IGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgICAgIG1hcCA9IHNlbGYucHJvcE1hcFB1dCAgIyBleGlzdGluZyBnZXRzIG92ZXJ3cml0dGVuIGJlbG93LlxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBtYXAgPSBzZWxmLnByb3BNYXBQdXQgICMgZmlyc3QgdGltZSB3ZXZlIHNlZW4gaXQuXG5cbiAgICAgICAgZWxpZiBpbnZraW5kID09IHB5dGhvbmNvbS5JTlZPS0VfRlVOQzpcbiAgICAgICAgICAgIG1hcCA9IHNlbGYubWFwRnVuY3NcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIG1hcCA9IE5vbmVcbiAgICAgICAgaWYgbm90IG1hcCBpcyBOb25lOlxuICAgICAgICAgICAgIyBcdFx0XHRcdGlmIG1hcC5oYXNfa2V5KG5hbWUpOlxuICAgICAgICAgICAgIyBcdFx0XHRcdFx0c3lzLnN0ZGVyci53cml0ZSgiV2FybmluZyAtIG92ZXJ3cml0aW5nIGV4aXN0aW5nIG1ldGhvZC9hdHRyaWJ1dGUgJXNcXG4iICUgbmFtZSlcbiAgICAgICAgICAgIG1hcFtuYW1lXSA9IE1hcEVudHJ5KGZkZXNjLCBuYW1lcywgZG9jLCByZXN1bHRDTFNJRCwgcmVzdWx0RG9jLCBoaWRkZW4pXG4gICAgICAgICAgICAjIGFueSBtZXRob2RzIHRoYXQgY2FuXCd0IGJlIHJlYWNoZWQgdmlhIERJU1BBVENIIHdlIHJldHVybiBOb25lXG4gICAgICAgICAgICAjIGZvciwgc28gZHluYW1pYyBkaXNwYXRjaCBkb2VzbnQgc2VlIGl0LlxuICAgICAgICAgICAgaWYgZmRlc2MuZnVuY2tpbmQgIT0gcHl0aG9uY29tLkZVTkNfRElTUEFUQ0g6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5vbmVcbiAgICAgICAgICAgIHJldHVybiAobmFtZSwgbWFwKVxuICAgICAgICByZXR1cm4gTm9uZVxuXG4gICAgZGVmIF9BZGRWYXJfKHNlbGYsIHR5cGVpbmZvLCB2YXJkZXNjLCBiRm9yVXNlcik6XG4gICAgICAgICMjIyBuZWVkIHB5dGhvbmNvbS5WQVJGTEFHX0ZSRVNUUklDVEVEIC4uLlxuICAgICAgICAjIyMgdGhlbiBjaGVjayBpdFxuICAgICAgICBhc3NlcnQgdmFyZGVzYy5kZXNja2luZCA9PSBweXRob25jb20uREVTQ0tJTkRfVkFSREVTQ1xuXG4gICAgICAgIGlmIHZhcmRlc2MudmFya2luZCA9PSBweXRob25jb20uVkFSX0RJU1BBVENIOlxuICAgICAgICAgICAgaWQgPSB2YXJkZXNjLm1lbWlkXG4gICAgICAgICAgICBuYW1lcyA9IHR5cGVpbmZvLkdldE5hbWVzKGlkKVxuICAgICAgICAgICAgIyBUcmFuc2xhdGUgYW55IEFsaWFzIG9yIEVudW1zIGluIHJlc3VsdC5cbiAgICAgICAgICAgIHR5cGVyZXByLCBmbGFncywgZGVmdmFsID0gdmFyZGVzYy5lbGVtZGVzY1ZhclxuICAgICAgICAgICAgdHlwZXJlcHIsIHJlc3VsdENMU0lELCByZXN1bHREb2MgPSBfUmVzb2x2ZVR5cGUodHlwZXJlcHIsIHR5cGVpbmZvKVxuICAgICAgICAgICAgdmFyZGVzYy5lbGVtZGVzY1ZhciA9IHR5cGVyZXByLCBmbGFncywgZGVmdmFsXG4gICAgICAgICAgICBkb2MgPSBOb25lXG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgaWYgYkZvclVzZXI6XG4gICAgICAgICAgICAgICAgICAgIGRvYyA9IHR5cGVpbmZvLkdldERvY3VtZW50YXRpb24oaWQpXG4gICAgICAgICAgICBleGNlcHQgcHl0aG9uY29tLm9sZV9lcnJvcjpcbiAgICAgICAgICAgICAgICBwYXNzXG5cbiAgICAgICAgICAgICMgaGFuZGxlIHRoZSBlbnVtZXJhdG9yIHNwZWNpYWxseVxuICAgICAgICAgICAgbWFwID0gc2VsZi5wcm9wTWFwXG4gICAgICAgICAgICAjIENoZWNrIGlmIHRoZSBlbGVtZW50IGlzIGhpZGRlbi5cbiAgICAgICAgICAgIGhpZGRlbiA9ICh2YXJkZXNjLndWYXJGbGFncyAmIDB4NDApICE9IDAgICMgVkFSRkxBR19GSElEREVOXG4gICAgICAgICAgICBtYXBbbmFtZXNbMF1dID0gTWFwRW50cnkoXG4gICAgICAgICAgICAgICAgdmFyZGVzYywgbmFtZXMsIGRvYywgcmVzdWx0Q0xTSUQsIHJlc3VsdERvYywgaGlkZGVuXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gKG5hbWVzWzBdLCBtYXApXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICByZXR1cm4gTm9uZVxuXG4gICAgZGVmIEJ1aWxkKHNlbGYsIHR5cGVpbmZvLCBhdHRyLCBiRm9yVXNlcj0xKTpcbiAgICAgICAgc2VsZi5jbHNpZCA9IGF0dHJbMF1cbiAgICAgICAgc2VsZi5iSXNEaXNwYXRjaCA9IChhdHRyLndUeXBlRmxhZ3MgJiBweXRob25jb20uVFlQRUZMQUdfRkRJU1BBVENIQUJMRSkgIT0gMFxuICAgICAgICBpZiB0eXBlaW5mbyBpcyBOb25lOlxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICMgTG9vcCBvdmVyIGFsbCBtZXRob2RzXG4gICAgICAgIGZvciBqIGluIHJhbmdlKGF0dHJbNl0pOlxuICAgICAgICAgICAgZmRlc2MgPSB0eXBlaW5mby5HZXRGdW5jRGVzYyhqKVxuICAgICAgICAgICAgc2VsZi5fQWRkRnVuY18odHlwZWluZm8sIGZkZXNjLCBiRm9yVXNlcilcblxuICAgICAgICAjIExvb3Agb3ZlciBhbGwgdmFyaWFibGVzIChpZSwgcHJvcGVydGllcylcbiAgICAgICAgZm9yIGogaW4gcmFuZ2UoYXR0cls3XSk6XG4gICAgICAgICAgICBmZGVzYyA9IHR5cGVpbmZvLkdldFZhckRlc2MoailcbiAgICAgICAgICAgIHNlbGYuX0FkZFZhcl8odHlwZWluZm8sIGZkZXNjLCBiRm9yVXNlcilcblxuICAgICAgICAjIE5vdyBwb3N0LXByb2Nlc3MgdGhlIG1hcHMuICBGb3IgYW55ICJHZXQiIG9yICJTZXQiIHByb3BlcnRpZXNcbiAgICAgICAgIyB0aGF0IGhhdmUgYXJndW1lbnRzLCB3ZSBtdXN0IHR1cm4gdGhlbSBpbnRvIG1ldGhvZHMuICBJZiBhIG1ldGhvZFxuICAgICAgICAjIG9mIHRoZSBzYW1lIG5hbWUgYWxyZWFkeSBleGlzdHMsIGNoYW5nZSB0aGUgbmFtZS5cbiAgICAgICAgZm9yIGtleSwgaXRlbSBpbiBsaXN0KHNlbGYucHJvcE1hcEdldC5pdGVtcygpKTpcbiAgICAgICAgICAgIHNlbGYuX3Byb3BNYXBHZXRDaGVja18oa2V5LCBpdGVtKVxuXG4gICAgICAgIGZvciBrZXksIGl0ZW0gaW4gbGlzdChzZWxmLnByb3BNYXBQdXQuaXRlbXMoKSk6XG4gICAgICAgICAgICBzZWxmLl9wcm9wTWFwUHV0Q2hlY2tfKGtleSwgaXRlbSlcblxuICAgIGRlZiBDb3VudEluT3V0T3B0QXJncyhzZWxmLCBhcmdUdXBsZSk6XG4gICAgICAgICJSZXR1cm4gdHVwbGUgY291bnRpbmcgaW4vb3V0cy9PUFRTLiAgU3VtIG9mIHJlc3VsdCBtYXkgbm90IGJlIGxlbihhcmdUdXBsZSksIGFzIHNvbWUgYXJncyBtYXkgYmUgaW4vb3V0LiJcbiAgICAgICAgaW5zID0gb3V0ID0gb3B0cyA9IDBcbiAgICAgICAgZm9yIGFyZ0NoZWNrIGluIGFyZ1R1cGxlOlxuICAgICAgICAgICAgaW5PdXQgPSBhcmdDaGVja1sxXVxuICAgICAgICAgICAgaWYgaW5PdXQgPT0gMDpcbiAgICAgICAgICAgICAgICBpbnMgPSBpbnMgKyAxXG4gICAgICAgICAgICAgICAgb3V0ID0gb3V0ICsgMVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBpZiBpbk91dCAmIHB5dGhvbmNvbS5QQVJBTUZMQUdfRklOOlxuICAgICAgICAgICAgICAgICAgICBpbnMgPSBpbnMgKyAxXG4gICAgICAgICAgICAgICAgaWYgaW5PdXQgJiBweXRob25jb20uUEFSQU1GTEFHX0ZPUFQ6XG4gICAgICAgICAgICAgICAgICAgIG9wdHMgPSBvcHRzICsgMVxuICAgICAgICAgICAgICAgIGlmIGluT3V0ICYgcHl0aG9uY29tLlBBUkFNRkxBR19GT1VUOlxuICAgICAgICAgICAgICAgICAgICBvdXQgPSBvdXQgKyAxXG4gICAgICAgIHJldHVybiBpbnMsIG91dCwgb3B0c1xuXG4gICAgZGVmIE1ha2VGdW5jTWV0aG9kKHNlbGYsIGVudHJ5LCBuYW1lLCBiTWFrZUNsYXNzPTEpOlxuICAgICAgICAjIElmIHdlIGhhdmUgYSB0eXBlIGRlc2NyaXB0aW9uLCBhbmQgbm90IHZhcmFyZ3MuLi5cbiAgICAgICAgaWYgZW50cnkuZGVzYyBpcyBub3QgTm9uZSBhbmQgKGxlbihlbnRyeS5kZXNjKSA8IDYgb3IgZW50cnkuZGVzY1s2XSAhPSAtMSk6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5NYWtlRGlzcGF0Y2hGdW5jTWV0aG9kKGVudHJ5LCBuYW1lLCBiTWFrZUNsYXNzKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuTWFrZVZhckFyZ3NGdW5jTWV0aG9kKGVudHJ5LCBuYW1lLCBiTWFrZUNsYXNzKVxuXG4gICAgZGVmIE1ha2VEaXNwYXRjaEZ1bmNNZXRob2Qoc2VsZiwgZW50cnksIG5hbWUsIGJNYWtlQ2xhc3M9MSk6XG4gICAgICAgIGZkZXNjID0gZW50cnkuZGVzY1xuICAgICAgICBkb2MgPSBlbnRyeS5kb2NcbiAgICAgICAgbmFtZXMgPSBlbnRyeS5uYW1lc1xuICAgICAgICByZXQgPSBbXVxuICAgICAgICBpZiBiTWFrZUNsYXNzOlxuICAgICAgICAgICAgbGluZVByZWZpeCA9ICJcXHQiXG4gICAgICAgICAgICBkZWZOYW1lZE9wdEFyZyA9ICJkZWZhdWx0TmFtZWRPcHRBcmciXG4gICAgICAgICAgICBkZWZOYW1lZE5vdE9wdEFyZyA9ICJkZWZhdWx0TmFtZWROb3RPcHRBcmciXG4gICAgICAgICAgICBkZWZVbm5hbWVkQXJnID0gImRlZmF1bHRVbm5hbWVkQXJnIlxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgbGluZVByZWZpeCA9ICIiXG4gICAgICAgICAgICBkZWZOYW1lZE9wdEFyZyA9ICJweXRob25jb20uTWlzc2luZyJcbiAgICAgICAgICAgIGRlZk5hbWVkTm90T3B0QXJnID0gInB5dGhvbmNvbS5NaXNzaW5nIlxuICAgICAgICAgICAgZGVmVW5uYW1lZEFyZyA9ICJweXRob25jb20uTWlzc2luZyJcbiAgICAgICAgZGVmT3V0QXJnID0gInB5dGhvbmNvbS5NaXNzaW5nIlxuICAgICAgICBpZCA9IGZkZXNjWzBdXG5cbiAgICAgICAgcyA9IChcbiAgICAgICAgICAgIGxpbmVQcmVmaXhcbiAgICAgICAgICAgICsgImRlZiAiXG4gICAgICAgICAgICArIG5hbWVcbiAgICAgICAgICAgICsgIihzZWxmIlxuICAgICAgICAgICAgKyBCdWlsZENhbGxMaXN0KFxuICAgICAgICAgICAgICAgIGZkZXNjLFxuICAgICAgICAgICAgICAgIG5hbWVzLFxuICAgICAgICAgICAgICAgIGRlZk5hbWVkT3B0QXJnLFxuICAgICAgICAgICAgICAgIGRlZk5hbWVkTm90T3B0QXJnLFxuICAgICAgICAgICAgICAgIGRlZlVubmFtZWRBcmcsXG4gICAgICAgICAgICAgICAgZGVmT3V0QXJnLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgKyAiKToiXG4gICAgICAgIClcbiAgICAgICAgcmV0LmFwcGVuZChzKVxuICAgICAgICBpZiBkb2MgYW5kIGRvY1sxXTpcbiAgICAgICAgICAgIHJldC5hcHBlbmQobGluZVByZWZpeCArICJcXHQiICsgX21ha2VEb2NTdHJpbmcoZG9jWzFdKSlcblxuICAgICAgICByZXNjbHNpZCA9IGVudHJ5LkdldFJlc3VsdENMU0lEKClcbiAgICAgICAgaWYgcmVzY2xzaWQ6XG4gICAgICAgICAgICByZXNjbHNpZCA9ICJcJyVzXCciICUgcmVzY2xzaWRcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHJlc2Nsc2lkID0gIk5vbmUiXG4gICAgICAgICMgU3RyaXAgdGhlIGRlZmF1bHQgdmFsdWVzIGZyb20gdGhlIGFyZyBkZXNjXG4gICAgICAgIHJldERlc2MgPSBmZGVzY1s4XVs6Ml1cbiAgICAgICAgYXJnc0Rlc2MgPSB0dXBsZShbd2hhdFs6Ml0gZm9yIHdoYXQgaW4gZmRlc2NbMl1dKVxuICAgICAgICAjIFRoZSBydW50aW1lIHRyYW5zbGF0aW9uIG9mIHRoZSByZXR1cm4gdHlwZXMgaXMgZXhwZW5zaXZlLCBzbyB3aGVuIHdlIGtub3cgdGhlXG4gICAgICAgICMgcmV0dXJuIHR5cGUgb2YgdGhlIGZ1bmN0aW9uLCB0aGVyZSBpcyBubyBuZWVkIHRvIGNoZWNrIHRoZSB0eXBlIGF0IHJ1bnRpbWUuXG4gICAgICAgICMgVG8gcXVhbGlmeSwgdGhpcyBmdW5jdGlvbiBtdXN0IHJldHVybiBhICJzaW1wbGUiIHR5cGUsIGFuZCBoYXZlIG5vIGJ5cmVmIGFyZ3MuXG4gICAgICAgICMgQ2hlY2sgaWYgd2UgaGF2ZSBieXJlZnMgb3IgYW55dGhpbmcgaW4gdGhlIGFyZ3Mgd2hpY2ggbWVhbiB3ZSBzdGlsbCBuZWVkIGEgdHJhbnNsYXRlLlxuICAgICAgICBwYXJhbV9mbGFncyA9IFt3aGF0WzFdIGZvciB3aGF0IGluIGZkZXNjWzJdXVxuICAgICAgICBiYWRfcGFyYW1zID0gW1xuICAgICAgICAgICAgZmxhZ1xuICAgICAgICAgICAgZm9yIGZsYWcgaW4gcGFyYW1fZmxhZ3NcbiAgICAgICAgICAgIGlmIGZsYWcgJiAocHl0aG9uY29tLlBBUkFNRkxBR19GT1VUIHwgcHl0aG9uY29tLlBBUkFNRkxBR19GUkVUVkFMKSAhPSAwXG4gICAgICAgIF1cbiAgICAgICAgcyA9IE5vbmVcbiAgICAgICAgaWYgbGVuKGJhZF9wYXJhbXMpID09IDAgYW5kIGxlbihyZXREZXNjKSA9PSAyIGFuZCByZXREZXNjWzFdID09IDA6XG4gICAgICAgICAgICByZCA9IHJldERlc2NbMF1cbiAgICAgICAgICAgIGlmIHJkIGluIE5vVHJhbnNsYXRlTWFwOlxuICAgICAgICAgICAgICAgIHMgPSAiJXNcXHRyZXR1cm4gc2VsZi5fb2xlb2JqXy5JbnZva2VUeXBlcyglZCwgTENJRCwgJXMsICVzLCAlcyVzKSIgJSAoXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQcmVmaXgsXG4gICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICBmZGVzY1s0XSxcbiAgICAgICAgICAgICAgICAgICAgcmV0RGVzYyxcbiAgICAgICAgICAgICAgICAgICAgYXJnc0Rlc2MsXG4gICAgICAgICAgICAgICAgICAgIF9CdWlsZEFyZ0xpc3QoZmRlc2MsIG5hbWVzKSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBlbGlmIHJkIGluIFtweXRob25jb20uVlRfRElTUEFUQ0gsIHB5dGhvbmNvbS5WVF9VTktOT1dOXTpcbiAgICAgICAgICAgICAgICBzID0gIiVzXFx0cmV0ID0gc2VsZi5fb2xlb2JqXy5JbnZva2VUeXBlcyglZCwgTENJRCwgJXMsICVzLCAlcyVzKVxcbiIgJSAoXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQcmVmaXgsXG4gICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICBmZGVzY1s0XSxcbiAgICAgICAgICAgICAgICAgICAgcmV0RGVzYyxcbiAgICAgICAgICAgICAgICAgICAgcmVwcihhcmdzRGVzYyksXG4gICAgICAgICAgICAgICAgICAgIF9CdWlsZEFyZ0xpc3QoZmRlc2MsIG5hbWVzKSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcyA9IHMgKyAiJXNcXHRpZiByZXQgaXMgbm90IE5vbmU6XFxuIiAlIChsaW5lUHJlZml4LClcbiAgICAgICAgICAgICAgICBpZiByZCA9PSBweXRob25jb20uVlRfVU5LTk9XTjpcbiAgICAgICAgICAgICAgICAgICAgcyA9IHMgKyAiJXNcXHRcXHQjIFNlZSBpZiB0aGlzIElVbmtub3duIGlzIHJlYWxseSBhbiBJRGlzcGF0Y2hcXG4iICUgKFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZVByZWZpeCxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICBzID0gcyArICIlc1xcdFxcdHRyeTpcXG4iICUgKGxpbmVQcmVmaXgsKVxuICAgICAgICAgICAgICAgICAgICBzID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgc1xuICAgICAgICAgICAgICAgICAgICAgICAgKyAiJXNcXHRcXHRcXHRyZXQgPSByZXQuUXVlcnlJbnRlcmZhY2UocHl0aG9uY29tLklJRF9JRGlzcGF0Y2gpXFxuIlxuICAgICAgICAgICAgICAgICAgICAgICAgJSAobGluZVByZWZpeCwpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgcyA9IHMgKyAiJXNcXHRcXHRleGNlcHQgcHl0aG9uY29tLmVycm9yOlxcbiIgJSAobGluZVByZWZpeCwpXG4gICAgICAgICAgICAgICAgICAgIHMgPSBzICsgIiVzXFx0XFx0XFx0cmV0dXJuIHJldFxcbiIgJSAobGluZVByZWZpeCwpXG4gICAgICAgICAgICAgICAgcyA9IHMgKyAiJXNcXHRcXHRyZXQgPSBEaXNwYXRjaChyZXQsICVzLCAlcylcXG4iICUgKFxuICAgICAgICAgICAgICAgICAgICBsaW5lUHJlZml4LFxuICAgICAgICAgICAgICAgICAgICByZXByKG5hbWUpLFxuICAgICAgICAgICAgICAgICAgICByZXNjbHNpZCxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgcyA9IHMgKyAiJXNcXHRyZXR1cm4gcmV0IiAlIChsaW5lUHJlZml4KVxuICAgICAgICAgICAgZWxpZiByZCA9PSBweXRob25jb20uVlRfQlNUUjpcbiAgICAgICAgICAgICAgICBzID0gIiVzXFx0IyBSZXN1bHQgaXMgYSBVbmljb2RlIG9iamVjdFxcbiIgJSAobGluZVByZWZpeCwpXG4gICAgICAgICAgICAgICAgcyA9IChcbiAgICAgICAgICAgICAgICAgICAgc1xuICAgICAgICAgICAgICAgICAgICArICIlc1xcdHJldHVybiBzZWxmLl9vbGVvYmpfLkludm9rZVR5cGVzKCVkLCBMQ0lELCAlcywgJXMsICVzJXMpIlxuICAgICAgICAgICAgICAgICAgICAlIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQcmVmaXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZkZXNjWzRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0RGVzYyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcHIoYXJnc0Rlc2MpLFxuICAgICAgICAgICAgICAgICAgICAgICAgX0J1aWxkQXJnTGlzdChmZGVzYywgbmFtZXMpLFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgIyBlbHNlIHMgcmVtYWlucyBOb25lXG4gICAgICAgIGlmIHMgaXMgTm9uZTpcbiAgICAgICAgICAgIHMgPSAiJXNcXHRyZXR1cm4gc2VsZi5fQXBwbHlUeXBlc18oJWQsICVzLCAlcywgJXMsICVzLCAlcyVzKSIgJSAoXG4gICAgICAgICAgICAgICAgbGluZVByZWZpeCxcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBmZGVzY1s0XSxcbiAgICAgICAgICAgICAgICByZXREZXNjLFxuICAgICAgICAgICAgICAgIGFyZ3NEZXNjLFxuICAgICAgICAgICAgICAgIHJlcHIobmFtZSksXG4gICAgICAgICAgICAgICAgcmVzY2xzaWQsXG4gICAgICAgICAgICAgICAgX0J1aWxkQXJnTGlzdChmZGVzYywgbmFtZXMpLFxuICAgICAgICAgICAgKVxuXG4gICAgICAgIHJldC5hcHBlbmQocylcbiAgICAgICAgcmV0LmFwcGVuZCgiIilcbiAgICAgICAgcmV0dXJuIHJldFxuXG4gICAgZGVmIE1ha2VWYXJBcmdzRnVuY01ldGhvZChzZWxmLCBlbnRyeSwgbmFtZSwgYk1ha2VDbGFzcz0xKTpcbiAgICAgICAgZmRlc2MgPSBlbnRyeS5kZXNjXG4gICAgICAgIG5hbWVzID0gZW50cnkubmFtZXNcbiAgICAgICAgZG9jID0gZW50cnkuZG9jXG4gICAgICAgIHJldCA9IFtdXG4gICAgICAgIGFyZ1ByZWZpeCA9ICJzZWxmIlxuICAgICAgICBpZiBiTWFrZUNsYXNzOlxuICAgICAgICAgICAgbGluZVByZWZpeCA9ICJcXHQiXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBsaW5lUHJlZml4ID0gIiJcbiAgICAgICAgcmV0LmFwcGVuZChsaW5lUHJlZml4ICsgImRlZiAiICsgbmFtZSArICIoIiArIGFyZ1ByZWZpeCArICIsICphcmdzKToiKVxuICAgICAgICBpZiBkb2MgYW5kIGRvY1sxXTpcbiAgICAgICAgICAgIHJldC5hcHBlbmQobGluZVByZWZpeCArICJcXHQiICsgX21ha2VEb2NTdHJpbmcoZG9jWzFdKSlcbiAgICAgICAgaWYgZmRlc2M6XG4gICAgICAgICAgICBpbnZva2V0eXBlID0gZmRlc2NbNF1cbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGludm9rZXR5cGUgPSBweXRob25jb20uRElTUEFUQ0hfTUVUSE9EXG4gICAgICAgIHMgPSBsaW5lUHJlZml4ICsgIlxcdHJldHVybiBzZWxmLl9nZXRfZ29vZF9vYmplY3RfKHNlbGYuX29sZW9ial8uSW52b2tlKCooKCJcbiAgICAgICAgcmV0LmFwcGVuZChcbiAgICAgICAgICAgIHMgKyBzdHIoZW50cnkuZGlzcGlkKSArICIsMCwlZCwxKSthcmdzKSksXCclc1wnKSIgJSAoaW52b2tldHlwZSwgbmFtZXNbMF0pXG4gICAgICAgIClcbiAgICAgICAgcmV0LmFwcGVuZCgiIilcbiAgICAgICAgcmV0dXJuIHJldFxuXG5cbiMgTm90ZSAtICJEaXNwYXRjaEl0ZW0iIHBvb3JseSBuYW1lZCAtIG5lZWQgYSBuZXcgaW50ZXJtZWRpYXRlIGNsYXNzLlxuY2xhc3MgVlRhYmxlSXRlbShEaXNwYXRjaEl0ZW0pOlxuICAgIGRlZiBCdWlsZChzZWxmLCB0eXBlaW5mbywgYXR0ciwgYkZvclVzZXI9MSk6XG4gICAgICAgIERpc3BhdGNoSXRlbS5CdWlsZChzZWxmLCB0eXBlaW5mbywgYXR0ciwgYkZvclVzZXIpXG4gICAgICAgIGFzc2VydCB0eXBlaW5mbyBpcyBub3QgTm9uZSwgIkNhbnQgYnVpbGQgdnRhYmxlcyB3aXRob3V0IHR5cGUgaW5mbyEiXG5cbiAgICAgICAgbWV0aF9saXN0ID0gKFxuICAgICAgICAgICAgbGlzdChzZWxmLm1hcEZ1bmNzLnZhbHVlcygpKVxuICAgICAgICAgICAgKyBsaXN0KHNlbGYucHJvcE1hcEdldC52YWx1ZXMoKSlcbiAgICAgICAgICAgICsgbGlzdChzZWxmLnByb3BNYXBQdXQudmFsdWVzKCkpXG4gICAgICAgIClcbiAgICAgICAgbWV0aF9saXN0LnNvcnQoa2V5PWxhbWJkYSBtOiBtLmRlc2NbN10pXG5cbiAgICAgICAgIyBOb3cgdHVybiB0aGlzIGxpc3QgaW50byB0aGUgcnVuLXRpbWUgcmVwcmVzZW50YXRpb25cbiAgICAgICAgIyAocmVhZHkgZm9yIGltbWVkaWF0ZSB1c2Ugb3Igd3JpdGluZyB0byBnZW5jYWNoZSlcbiAgICAgICAgc2VsZi52dGFibGVGdW5jcyA9IFtdXG4gICAgICAgIGZvciBlbnRyeSBpbiBtZXRoX2xpc3Q6XG4gICAgICAgICAgICBzZWxmLnZ0YWJsZUZ1bmNzLmFwcGVuZCgoZW50cnkubmFtZXMsIGVudHJ5LmRpc3BpZCwgZW50cnkuZGVzYykpXG5cblxuIyBBIExhenkgZGlzcGF0Y2ggaXRlbSAtIGJ1aWxkcyBhbiBpdGVtIG9uIHJlcXVlc3QgdXNpbmcgaW5mbyBmcm9tXG4jIGFuIElUeXBlQ29tcC4gIFRoZSBkeW5hbWljIG1vZHVsZSBtYWtlcyB0aGUgY2FsbGVkIHRvIGJ1aWxkIGVhY2ggaXRlbSxcbiMgYW5kIGFsc28gaG9sZHMgdGhlIHJlZmVyZW5jZXMgdG8gdGhlIHR5cGVpbmZvIGFuZCB0eXBlY29tcC5cbmNsYXNzIExhenlEaXNwYXRjaEl0ZW0oRGlzcGF0Y2hJdGVtKTpcbiAgICB0eXBlbmFtZSA9ICJMYXp5RGlzcGF0Y2hJdGVtIlxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGF0dHIsIGRvYyk6XG4gICAgICAgIHNlbGYuY2xzaWQgPSBhdHRyWzBdXG4gICAgICAgIERpc3BhdGNoSXRlbS5fX2luaXRfXyhzZWxmLCBOb25lLCBhdHRyLCBkb2MsIDApXG5cblxudHlwZVN1YnN0TWFwID0ge1xuICAgIHB5dGhvbmNvbS5WVF9JTlQ6IHB5dGhvbmNvbS5WVF9JNCxcbiAgICBweXRob25jb20uVlRfVUlOVDogcHl0aG9uY29tLlZUX1VJNCxcbiAgICBweXRob25jb20uVlRfSFJFU1VMVDogcHl0aG9uY29tLlZUX0k0LFxufVxuXG5cbmRlZiBfUmVzb2x2ZVR5cGUodHlwZXJlcHIsIGl0eXBlaW5mbyk6XG4gICAgIyBSZXNvbHZlIFZUX1VTRVJERUZJTkVEIChvZnRlbiBhbGlhc2VzIG9yIHR5cGVkIElEaXNwYXRjaGVzKVxuXG4gICAgaWYgdHlwZSh0eXBlcmVwcikgPT0gdHVwbGU6XG4gICAgICAgIGluZGlyX3Z0LCBzdWJyZXByID0gdHlwZXJlcHJcbiAgICAgICAgaWYgaW5kaXJfdnQgPT0gcHl0aG9uY29tLlZUX1BUUjpcbiAgICAgICAgICAgICMgSWYgaXQgaXMgYSBWVF9QVFIgdG8gYSBWVF9VU0VSREVGSU5FRCB0aGF0IGlzIGFuIElEaXNwYXRjaC9JVW5rbm93bixcbiAgICAgICAgICAgICMgdGhlbiBpdCByZXNvbHZlcyB0byBzaW1wbHkgdGhlIG9iamVjdC5cbiAgICAgICAgICAgICMgT3RoZXJ3aXNlLCBpdCBiZWNvbWVzIGEgQnlSZWYgb2YgdGhlIHJlc29sdmVkIHR5cGVcbiAgICAgICAgICAgICMgV2UgbmVlZCB0byBkcm9wIGFuIGluZGlyZWN0aW9uIGxldmVsIG9uIHBvaW50ZXIgdG8gdXNlciBkZWZpbmVkIGludGVyZmFjZXMuXG4gICAgICAgICAgICAjIGVnLCAoVlRfUFRSLCAoVlRfVVNFUkRFRklORUQsIHNvbWVoYW5kbGUpKSBuZWVkcyB0byBiZWNvbWUgVlRfRElTUEFUQ0hcbiAgICAgICAgICAgICMgb25seSB3aGVuICJzb21laGFuZGxlIiBpcyBhbiBvYmplY3QuXG4gICAgICAgICAgICAjIGJ1dCAoVlRfUFRSLCAoVlRfVVNFUkRFRklORUQsIG90aGVyaGFuZGxlKSkgZG9lc250IGdldCB0aGUgaW5kaXJlY3Rpb24gZHJvcHBlZC5cbiAgICAgICAgICAgIHdhc191c2VyID0gdHlwZShzdWJyZXByKSA9PSB0dXBsZSBhbmQgc3VicmVwclswXSA9PSBweXRob25jb20uVlRfVVNFUkRFRklORURcbiAgICAgICAgICAgIHN1YnJlcHIsIHN1Yl9jbHNpZCwgc3ViX2RvYyA9IF9SZXNvbHZlVHlwZShzdWJyZXByLCBpdHlwZWluZm8pXG4gICAgICAgICAgICBpZiB3YXNfdXNlciBhbmQgc3VicmVwciBpbiBbXG4gICAgICAgICAgICAgICAgcHl0aG9uY29tLlZUX0RJU1BBVENILFxuICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5WVF9VTktOT1dOLFxuICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5WVF9SRUNPUkQsXG4gICAgICAgICAgICBdOlxuICAgICAgICAgICAgICAgICMgRHJvcCB0aGUgVlRfUFRSIGluZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1YnJlcHIsIHN1Yl9jbHNpZCwgc3ViX2RvY1xuICAgICAgICAgICAgIyBDaGFuZ2UgUFRSIGluZGlyZWN0aW9uIHRvIGJ5cmVmXG4gICAgICAgICAgICByZXR1cm4gc3VicmVwciB8IHB5dGhvbmNvbS5WVF9CWVJFRiwgc3ViX2Nsc2lkLCBzdWJfZG9jXG4gICAgICAgIGlmIGluZGlyX3Z0ID09IHB5dGhvbmNvbS5WVF9TQUZFQVJSQVk6XG4gICAgICAgICAgICAjIHJlc29sdmUgdGhlIGFycmF5IGVsZW1lbnQsIGFuZCBjb252ZXJ0IHRvIFZUX0FSUkFZXG4gICAgICAgICAgICBzdWJyZXByLCBzdWJfY2xzaWQsIHN1Yl9kb2MgPSBfUmVzb2x2ZVR5cGUoc3VicmVwciwgaXR5cGVpbmZvKVxuICAgICAgICAgICAgcmV0dXJuIHB5dGhvbmNvbS5WVF9BUlJBWSB8IHN1YnJlcHIsIHN1Yl9jbHNpZCwgc3ViX2RvY1xuICAgICAgICBpZiBpbmRpcl92dCA9PSBweXRob25jb20uVlRfQ0FSUkFZOiAgIyBydW50aW1lIGhhcyBubyBzdXBwb3J0IGZvciB0aGlzIHlldC5cbiAgICAgICAgICAgICMgcmVzb2x2ZSB0aGUgYXJyYXkgZWxlbWVudCwgYW5kIGNvbnZlcnQgdG8gVlRfQ0FSUkFZXG4gICAgICAgICAgICAjIHNoZWVzaCAtIHJldHVybiBfc29tZXRoaW5nX1xuICAgICAgICAgICAgcmV0dXJuIHB5dGhvbmNvbS5WVF9DQVJSQVksIE5vbmUsIE5vbmVcbiAgICAgICAgaWYgaW5kaXJfdnQgPT0gcHl0aG9uY29tLlZUX1VTRVJERUZJTkVEOlxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIHJlc3VsdFR5cGVJbmZvID0gaXR5cGVpbmZvLkdldFJlZlR5cGVJbmZvKHN1YnJlcHIpXG4gICAgICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvciBhcyBkZXRhaWxzOlxuICAgICAgICAgICAgICAgIGlmIGRldGFpbHMuaHJlc3VsdCBpbiBbXG4gICAgICAgICAgICAgICAgICAgIHdpbmVycm9yLlRZUEVfRV9DQU5UTE9BRExJQlJBUlksXG4gICAgICAgICAgICAgICAgICAgIHdpbmVycm9yLlRZUEVfRV9MSUJOT1RSRUdJU1RFUkVELFxuICAgICAgICAgICAgICAgIF06XG4gICAgICAgICAgICAgICAgICAgICMgYW4gdW5yZWdpc3RlcmVkIGludGVyZmFjZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHl0aG9uY29tLlZUX1VOS05PV04sIE5vbmUsIE5vbmVcbiAgICAgICAgICAgICAgICByYWlzZVxuXG4gICAgICAgICAgICByZXN1bHRBdHRyID0gcmVzdWx0VHlwZUluZm8uR2V0VHlwZUF0dHIoKVxuICAgICAgICAgICAgdHlwZUtpbmQgPSByZXN1bHRBdHRyLnR5cGVraW5kXG4gICAgICAgICAgICBpZiB0eXBlS2luZCA9PSBweXRob25jb20uVEtJTkRfQUxJQVM6XG4gICAgICAgICAgICAgICAgdGRlc2MgPSByZXN1bHRBdHRyLnRkZXNjQWxpYXNcbiAgICAgICAgICAgICAgICByZXR1cm4gX1Jlc29sdmVUeXBlKHRkZXNjLCByZXN1bHRUeXBlSW5mbylcbiAgICAgICAgICAgIGVsaWYgdHlwZUtpbmQgaW4gW3B5dGhvbmNvbS5US0lORF9FTlVNLCBweXRob25jb20uVEtJTkRfTU9EVUxFXTpcbiAgICAgICAgICAgICAgICAjIEZvciBub3csIGFzc3VtZSBMb25nXG4gICAgICAgICAgICAgICAgcmV0dXJuIHB5dGhvbmNvbS5WVF9JNCwgTm9uZSwgTm9uZVxuXG4gICAgICAgICAgICBlbGlmIHR5cGVLaW5kID09IHB5dGhvbmNvbS5US0lORF9ESVNQQVRDSDpcbiAgICAgICAgICAgICAgICBjbHNpZCA9IHJlc3VsdFR5cGVJbmZvLkdldFR5cGVBdHRyKClbMF1cbiAgICAgICAgICAgICAgICByZXRkb2MgPSByZXN1bHRUeXBlSW5mby5HZXREb2N1bWVudGF0aW9uKC0xKVxuICAgICAgICAgICAgICAgIHJldHVybiBweXRob25jb20uVlRfRElTUEFUQ0gsIGNsc2lkLCByZXRkb2NcblxuICAgICAgICAgICAgZWxpZiB0eXBlS2luZCBpbiBbcHl0aG9uY29tLlRLSU5EX0lOVEVSRkFDRSwgcHl0aG9uY29tLlRLSU5EX0NPQ0xBU1NdOlxuICAgICAgICAgICAgICAgICMgWFhYIC0gc2hvdWxkIHByb2JhYmx5IGdldCBkZWZhdWx0IGludGVyZmFjZSBmb3IgQ09fQ0xBU1M/Pz9cbiAgICAgICAgICAgICAgICBjbHNpZCA9IHJlc3VsdFR5cGVJbmZvLkdldFR5cGVBdHRyKClbMF1cbiAgICAgICAgICAgICAgICByZXRkb2MgPSByZXN1bHRUeXBlSW5mby5HZXREb2N1bWVudGF0aW9uKC0xKVxuICAgICAgICAgICAgICAgIHJldHVybiBweXRob25jb20uVlRfVU5LTk9XTiwgY2xzaWQsIHJldGRvY1xuXG4gICAgICAgICAgICBlbGlmIHR5cGVLaW5kID09IHB5dGhvbmNvbS5US0lORF9SRUNPUkQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHB5dGhvbmNvbS5WVF9SRUNPUkQsIE5vbmUsIE5vbmVcbiAgICAgICAgICAgIHJhaXNlIE5vdFN1cHBvcnRlZEV4Y2VwdGlvbigiQ2FuIG5vdCByZXNvbHZlIGFsaWFzIG9yIHVzZXItZGVmaW5lZCB0eXBlIilcbiAgICByZXR1cm4gdHlwZVN1YnN0TWFwLmdldCh0eXBlcmVwciwgdHlwZXJlcHIpLCBOb25lLCBOb25lXG5cblxuZGVmIF9CdWlsZEFyZ0xpc3QoZmRlc2MsIG5hbWVzKTpcbiAgICAiQnVpbGRzIGxpc3Qgb2YgYXJncyB0byB0aGUgdW5kZXJseWluZyBJbnZva2UgbWV0aG9kLiJcbiAgICAjIFdvcmQgaGFzIFR5cGVJbmZvIGZvciBJbnNlcnQoKSBtZXRob2QsIGJ1dCBzYXlzICJubyBhcmdzIlxuICAgIG51bUFyZ3MgPSBtYXgoZmRlc2NbNl0sIGxlbihmZGVzY1syXSkpXG4gICAgbmFtZXMgPSBsaXN0KG5hbWVzKVxuICAgIHdoaWxlIE5vbmUgaW4gbmFtZXM6XG4gICAgICAgIGkgPSBuYW1lcy5pbmRleChOb25lKVxuICAgICAgICBuYW1lc1tpXSA9ICJhcmclZCIgJSAoaSwpXG4gICAgIyBXZVwndmUgc2VlbiBcJ3NvdXJjZSBzYWZlXCcgbGlicmFyaWVzIG9mZmVyIHRoZSBuYW1lIG9mIFwncmV0XCcgcGFyYW1zIGluXG4gICAgIyBcJ25hbWVzXCcgLSBhbHRob3VnaCB3ZSBjYW5cJ3QgcmVwcm9kdWNlIHRoaXMsIGl0IHdvdWxkIGJlIGluc2FuZSB0byBvZmZlclxuICAgICMgbW9yZSBhcmdzIHRoYW4gd2UgaGF2ZSBhcmcgaW5mb3MgZm9yIC0gaGVuY2UgdGhlIHVwcGVyIGxpbWl0IG9uIG5hbWVzLi4uXG4gICAgbmFtZXMgPSBsaXN0KG1hcChNYWtlUHVibGljQXR0cmlidXRlTmFtZSwgbmFtZXNbMSA6IChudW1BcmdzICsgMSldKSlcbiAgICBuYW1lX251bSA9IDBcbiAgICB3aGlsZSBsZW4obmFtZXMpIDwgbnVtQXJnczpcbiAgICAgICAgbmFtZXMuYXBwZW5kKCJhcmclZCIgJSAobGVuKG5hbWVzKSwpKVxuICAgICMgQXMgcGVyIEJ1aWxkQ2FsbExpc3QoKSwgYXZvaWQgaHVnZSBsaW5lcy5cbiAgICAjIEhhY2sgYSAiXFxuIiBhdCB0aGUgZW5kIG9mIGV2ZXJ5IDV0aCBuYW1lIC0gInN0cmlkZXMiIHdvdWxkIGJlIGhhbmR5XG4gICAgIyBoZXJlIGJ1dCBkb25cJ3QgZXhpc3QgaW4gMi4yXG4gICAgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKG5hbWVzKSwgNSk6XG4gICAgICAgIG5hbWVzW2ldID0gbmFtZXNbaV0gKyAiXFxuXFx0XFx0XFx0IlxuICAgIHJldHVybiAiLCIgKyAiLCAiLmpvaW4obmFtZXMpXG5cblxudmFsaWRfaWRlbnRpZmllcl9jaGFycyA9IHN0cmluZy5hc2NpaV9sZXR0ZXJzICsgc3RyaW5nLmRpZ2l0cyArICJfIlxuXG5cbmRlZiBkZW11bmdlX2xlYWRpbmdfdW5kZXJzY29yZXMoY2xhc3NOYW1lKTpcbiAgICBpID0gMFxuICAgIHdoaWxlIGNsYXNzTmFtZVtpXSA9PSAiXyI6XG4gICAgICAgIGkgKz0gMVxuICAgIGFzc2VydCBpID49IDIsICJTaG91bGQgb25seSBiZSBoZXJlIHdpdGggbmFtZXMgc3RhcnRpbmcgd2l0aCBcJ19fXCciXG4gICAgcmV0dXJuIGNsYXNzTmFtZVtpIC0gMSA6XSArIGNsYXNzTmFtZVs6IGkgLSAxXVxuXG5cbiMgR2l2ZW4gYSAicHVibGljIG5hbWUiIChlZywgdGhlIG5hbWUgb2YgYSBjbGFzcywgZnVuY3Rpb24sIGV0YylcbiMgbWFrZSBzdXJlIGl0IGlzIGEgbGVnYWwgKGFuZCByZWFzb25hYmxlISkgUHl0aG9uIG5hbWUuXG5kZWYgTWFrZVB1YmxpY0F0dHJpYnV0ZU5hbWUoY2xhc3NOYW1lLCBpc19nbG9iYWw9RmFsc2UpOlxuICAgICMgR2l2ZW4gYSBjbGFzcyBhdHRyaWJ1dGUgdGhhdCBuZWVkcyB0byBiZSBwdWJsaWMsIGNvbnZlcnQgaXQgdG8gYVxuICAgICMgcmVhc29uYWJsZSBuYW1lLlxuICAgICMgQWxzbyBuZWVkIHRvIGJlIGNhcmVmdWwgdGhhdCB0aGUgbXVuZ2luZyBkb2VzbnRcbiAgICAjIGNyZWF0ZSBkdXBsaWNhdGVzIC0gZWcsIGp1c3QgcmVtb3ZpbmcgYSBsZWFkaW5nICJfIiBpcyBsaWtlbHkgdG8gY2F1c2VcbiAgICAjIGEgY2xhc2guXG4gICAgIyBpZiBpc19nbG9iYWwgaXMgVHJ1ZSwgdGhlbiB0aGUgbmFtZSBpcyBhIGdsb2JhbCB2YXJpYWJsZSB0aGF0IG1heVxuICAgICMgb3ZlcndyaXRlIGEgYnVpbHRpbiAtIGVnLCAiTm9uZSJcbiAgICBpZiBjbGFzc05hbWVbOjJdID09ICJfXyI6XG4gICAgICAgIHJldHVybiBkZW11bmdlX2xlYWRpbmdfdW5kZXJzY29yZXMoY2xhc3NOYW1lKVxuICAgIGVsaWYgY2xhc3NOYW1lID09ICJOb25lIjpcbiAgICAgICAgIyBhc3NpZ24gdG8gTm9uZSBpcyBldmlsIChhbmQgU3ludGF4RXJyb3IgaW4gMi40LCBldmVuIHRob3VnaFxuICAgICAgICAjIGlza2V5d29yZCBzYXlzIEZhbHNlIHRoZXJlKSAtIG5vdGUgdGhhdCBpZiBpdCB3YXMgYSBnbG9iYWxcbiAgICAgICAgIyBpdCB3b3VsZCBnZXQgcGlja2VkIHVwIGJlbG93XG4gICAgICAgIGNsYXNzTmFtZSA9ICJOT05FIlxuICAgIGVsaWYgaXNrZXl3b3JkKGNsYXNzTmFtZSk6XG4gICAgICAgICMgbW9zdCBrZXl3b3JkcyBhcmUgbG93ZXIgY2FzZSAoZXhjZXB0IFRydWUsIEZhbHNlIGV0YyBpbiBweTNrKVxuICAgICAgICByZXQgPSBjbGFzc05hbWUuY2FwaXRhbGl6ZSgpXG4gICAgICAgICMgYnV0IHRob3NlIHdoaWNoIGFyZW5cJ3QgZ2V0IGZvcmNlZCB1cHBlci5cbiAgICAgICAgaWYgcmV0ID09IGNsYXNzTmFtZTpcbiAgICAgICAgICAgIHJldCA9IHJldC51cHBlcigpXG4gICAgICAgIHJldHVybiByZXRcbiAgICBlbGlmIGlzX2dsb2JhbCBhbmQgaGFzYXR0cihfX2J1aWx0aW5zX18sIGNsYXNzTmFtZSk6XG4gICAgICAgICMgYnVpbHRpbnMgbWF5IGJlIG1peGVkIGNhc2UuICBJZiBjYXBpdGFsaXppbmcgaXQgZG9lc25cJ3QgY2hhbmdlIGl0LFxuICAgICAgICAjIGZvcmNlIHRvIGFsbCB1cHBlcmNhc2UgKGVnLCAiTm9uZSIsICJUcnVlIiBiZWNvbWUgIk5PTkUiLCAiVFJVRSJcbiAgICAgICAgcmV0ID0gY2xhc3NOYW1lLmNhcGl0YWxpemUoKVxuICAgICAgICBpZiByZXQgPT0gY2xhc3NOYW1lOiAgIyBkaWRuXCd0IGNoYW5nZSAtIGZvcmNlIGFsbCB1cHBlcmNhc2UuXG4gICAgICAgICAgICByZXQgPSByZXQudXBwZXIoKVxuICAgICAgICByZXR1cm4gcmV0XG4gICAgIyBTdHJpcCBub24gcHJpbnRhYmxlIGNoYXJzXG4gICAgcmV0dXJuICIiLmpvaW4oW2NoYXIgZm9yIGNoYXIgaW4gY2xhc3NOYW1lIGlmIGNoYXIgaW4gdmFsaWRfaWRlbnRpZmllcl9jaGFyc10pXG5cblxuIyBHaXZlbiBhIGRlZmF1bHQgdmFsdWUgcGFzc2VkIGJ5IGEgdHlwZSBsaWJyYXJ5LCByZXR1cm4gYSBzdHJpbmcgd2l0aFxuIyBhbiBhcHByb3ByaWF0ZSByZXByKCkgZm9yIHRoZSB0eXBlLlxuIyBUYWtlcyBhIHJhdyBFTEVNREVTQyBhbmQgcmV0dXJucyBhIHJlcHIgc3RyaW5nLCBvciBOb25lXG4jIChOT1RFOiBUaGUgc3RyaW5nIGl0c2VsZiBtYXkgYmUgXCciTm9uZSJcJywgd2hpY2ggaXMgdmFsaWQsIGFuZCBkaWZmZXJlbnQgdG8gTm9uZS5cbiMgWFhYIC0gVG8gZG86IERhdGVzIGFyZSBwcm9iYWJseSBzY3Jld2VkLCBidXQgY2FuIHRoZXkgY29tZSBpbj9cbmRlZiBNYWtlRGVmYXVsdEFyZ1JlcHIoZGVmQXJnVmFsKTpcbiAgICB0cnk6XG4gICAgICAgIGluT3V0ID0gZGVmQXJnVmFsWzFdXG4gICAgZXhjZXB0IEluZGV4RXJyb3I6XG4gICAgICAgICMgc29tZXRoaW5nIHN0cmFuZ2UgLSBhc3N1bWUgaXMgaW4gcGFyYW0uXG4gICAgICAgIGluT3V0ID0gcHl0aG9uY29tLlBBUkFNRkxBR19GSU5cblxuICAgIGlmIGluT3V0ICYgcHl0aG9uY29tLlBBUkFNRkxBR19GSEFTREVGQVVMVDpcbiAgICAgICAgIyB0aW1lcyBuZWVkIHNwZWNpYWwgaGFuZGxpbmcuLi5cbiAgICAgICAgdmFsID0gZGVmQXJnVmFsWzJdXG4gICAgICAgIGlmIGlzaW5zdGFuY2UodmFsLCBkYXRldGltZS5kYXRldGltZSk6XG4gICAgICAgICAgICAjIFZBUklBTlQgPC0+IFNZU1RFTVRJTUUgY29udmVyc2lvbnMgYWx3YXlzIGxvc2UgYW55IHN1Yi1zZWNvbmRcbiAgICAgICAgICAgICMgcmVzb2x1dGlvbiwgc28ganVzdCB1c2UgYSBcJ3RpbWV0dXBsZVwnIGhlcmUuXG4gICAgICAgICAgICByZXR1cm4gcmVwcih0dXBsZSh2YWwudXRjdGltZXR1cGxlKCkpKVxuICAgICAgICBpZiB0eXBlKHZhbCkgaXMgVGltZVR5cGU6XG4gICAgICAgICAgICAjIG11c3QgYmUgdGhlIFwnb2xkXCcgcHl3aW50eXBlcyB0aW1lIG9iamVjdC4uLlxuICAgICAgICAgICAgeWVhciA9IHZhbC55ZWFyXG4gICAgICAgICAgICBtb250aCA9IHZhbC5tb250aFxuICAgICAgICAgICAgZGF5ID0gdmFsLmRheVxuICAgICAgICAgICAgaG91ciA9IHZhbC5ob3VyXG4gICAgICAgICAgICBtaW51dGUgPSB2YWwubWludXRlXG4gICAgICAgICAgICBzZWNvbmQgPSB2YWwuc2Vjb25kXG4gICAgICAgICAgICBtc2VjID0gdmFsLm1zZWNcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgInB5d2ludHlwZXMuVGltZSgoJSh5ZWFyKWQsICUobW9udGgpZCwgJShkYXkpZCwgJShob3VyKWQsICUobWludXRlKWQsICUoc2Vjb25kKWQsMCwwLDAsJShtc2VjKWQpKSJcbiAgICAgICAgICAgICAgICAlIGxvY2FscygpXG4gICAgICAgICAgICApXG4gICAgICAgIHJldHVybiByZXByKHZhbClcbiAgICByZXR1cm4gTm9uZVxuXG5cbmRlZiBCdWlsZENhbGxMaXN0KFxuICAgIGZkZXNjLFxuICAgIG5hbWVzLFxuICAgIGRlZk5hbWVkT3B0QXJnLFxuICAgIGRlZk5hbWVkTm90T3B0QXJnLFxuICAgIGRlZlVubmFtZWRBcmcsXG4gICAgZGVmT3V0QXJnLFxuICAgIGlzX2NvbW1lbnQ9RmFsc2UsXG4pOlxuICAgICJCdWlsZHMgYSBQeXRob24gZGVjbGFyYXRpb24gZm9yIGEgbWV0aG9kLiJcbiAgICAjIE5hbWVzWzBdIGlzIHRoZSBmdW5jIG5hbWUgLSBwYXJhbSBuYW1lcyBhcmUgZnJvbSAxLlxuICAgIG51bUFyZ3MgPSBsZW4oZmRlc2NbMl0pXG4gICAgbnVtT3B0QXJncyA9IGZkZXNjWzZdXG4gICAgc3RydmFsID0gIiJcbiAgICBpZiBudW1PcHRBcmdzID09IC0xOiAgIyBTcGVjaWFsIHZhbHVlIHRoYXQgc2F5cyAidmFyIGFyZ3MgYWZ0ZXIgaGVyZSJcbiAgICAgICAgZmlyc3RPcHRBcmcgPSBudW1BcmdzXG4gICAgICAgIG51bUFyZ3MgPSBudW1BcmdzIC0gMVxuICAgIGVsc2U6XG4gICAgICAgIGZpcnN0T3B0QXJnID0gbnVtQXJncyAtIG51bU9wdEFyZ3NcbiAgICBmb3IgYXJnIGluIHJhbmdlKG51bUFyZ3MpOlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBhcmdOYW1lID0gbmFtZXNbYXJnICsgMV1cbiAgICAgICAgICAgIG5hbWVkQXJnID0gYXJnTmFtZSBpcyBub3QgTm9uZVxuICAgICAgICBleGNlcHQgSW5kZXhFcnJvcjpcbiAgICAgICAgICAgIG5hbWVkQXJnID0gMFxuICAgICAgICBpZiBub3QgbmFtZWRBcmc6XG4gICAgICAgICAgICBhcmdOYW1lID0gImFyZyVkIiAlIChhcmcpXG4gICAgICAgIHRoaXNkZXNjID0gZmRlc2NbMl1bYXJnXVxuICAgICAgICAjIFNlZSBpZiB0aGUgSURMIHNwZWNpZmllZCBhIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgZGVmQXJnVmFsID0gTWFrZURlZmF1bHRBcmdSZXByKHRoaXNkZXNjKVxuICAgICAgICBpZiBkZWZBcmdWYWwgaXMgTm9uZTpcbiAgICAgICAgICAgICMgT3V0IHBhcmFtcyBhbHdheXMgZ2V0IHRoZWlyIHNwZWNpYWwgZGVmYXVsdFxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHRoaXNkZXNjWzFdICYgKHB5dGhvbmNvbS5QQVJBTUZMQUdfRk9VVCB8IHB5dGhvbmNvbS5QQVJBTUZMQUdfRklOKVxuICAgICAgICAgICAgICAgID09IHB5dGhvbmNvbS5QQVJBTUZMQUdfRk9VVFxuICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICBkZWZBcmdWYWwgPSBkZWZPdXRBcmdcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgIyBVbm5hbWVkIGFyZyAtIGFsd2F5cyBhbGxvdyBkZWZhdWx0IHZhbHVlcy5cbiAgICAgICAgICAgICAgICBpZiBuYW1lZEFyZzpcbiAgICAgICAgICAgICAgICAgICAgIyBJcyBhIG5hbWVkIGFyZ3VtZW50XG4gICAgICAgICAgICAgICAgICAgIGlmIGFyZyA+PSBmaXJzdE9wdEFyZzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZkFyZ1ZhbCA9IGRlZk5hbWVkT3B0QXJnXG4gICAgICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZBcmdWYWwgPSBkZWZOYW1lZE5vdE9wdEFyZ1xuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIGRlZkFyZ1ZhbCA9IGRlZlVubmFtZWRBcmdcblxuICAgICAgICBhcmdOYW1lID0gTWFrZVB1YmxpY0F0dHJpYnV0ZU5hbWUoYXJnTmFtZSlcbiAgICAgICAgIyBpbnNhbmVseSBsb25nIGxpbmVzIHdpdGggYW4gXCdlbmNvZGluZ1wnIGZsYWcgY3Jhc2hlcyBweXRob24gMi40LjBcbiAgICAgICAgIyBrZWVwIDUgYXJncyBwZXIgbGluZVxuICAgICAgICAjIFRoaXMgbWF5IHN0aWxsIGZhaWwgaWYgdGhlIGFyZyBuYW1lcyBhcmUgaW5zYW5lLCBidXQgdGhhdCBzZWVtc1xuICAgICAgICAjIHVubGlrZWx5LiAgU2VlIGFsc28gX0J1aWxkQXJnTGlzdCgpXG4gICAgICAgIGlmIChhcmcgKyAxKSAlIDUgPT0gMDpcbiAgICAgICAgICAgIHN0cnZhbCA9IHN0cnZhbCArICJcXG4iXG4gICAgICAgICAgICBpZiBpc19jb21tZW50OlxuICAgICAgICAgICAgICAgIHN0cnZhbCA9IHN0cnZhbCArICIjIlxuICAgICAgICAgICAgc3RydmFsID0gc3RydmFsICsgIlxcdFxcdFxcdCJcbiAgICAgICAgc3RydmFsID0gc3RydmFsICsgIiwgIiArIGFyZ05hbWVcbiAgICAgICAgaWYgZGVmQXJnVmFsOlxuICAgICAgICAgICAgc3RydmFsID0gc3RydmFsICsgIj0iICsgZGVmQXJnVmFsXG4gICAgaWYgbnVtT3B0QXJncyA9PSAtMTpcbiAgICAgICAgc3RydmFsID0gc3RydmFsICsgIiwgKiIgKyBuYW1lc1stMV1cblxuICAgIHJldHVybiBzdHJ2YWxcblxuXG5pZiBfX25hbWVfXyA9PSAiX19tYWluX18iOlxuICAgIHByaW50KCJVc2UgXCdtYWtlcHkucHlcJyB0byBnZW5lcmF0ZSBQeXRob24gY29kZSAtIHRoaXMgbW9kdWxlIGlzIGp1c3QgYSBoZWxwZXIiKVxuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3dpbjMyY29tL2NsaWVudC91dGlsLnB5JywgYiciIiJHZW5lcmFsIGNsaWVudCBzaWRlIHV0aWxpdGllcy5cblxuVGhpcyBtb2R1bGUgY29udGFpbnMgdXRpbGl0eSBmdW5jdGlvbnMsIHVzZWQgcHJpbWFyaWx5IGJ5IGFkdmFuY2VkIENPTVxucHJvZ3JhbW1lcnMsIG9yIG90aGVyIENPTSBtb2R1bGVzLlxuIiIiXG5pbXBvcnQgcHl0aG9uY29tXG5mcm9tIHdpbjMyY29tLmNsaWVudCBpbXBvcnQgRGlzcGF0Y2gsIF9nZXRfZ29vZF9vYmplY3RfXG5cblB5SURpc3BhdGNoVHlwZSA9IHB5dGhvbmNvbS5UeXBlSUlEc1tweXRob25jb20uSUlEX0lEaXNwYXRjaF1cblxuXG5kZWYgV3JhcEVudW0ob2IsIHJlc3VsdENMU0lEPU5vbmUpOlxuICAgICIiIldyYXAgYW4gb2JqZWN0IGluIGEgVkFSSUFOVCBlbnVtZXJhdG9yLlxuXG4gICAgQWxsIFZUX0RJU1BBVENIcyByZXR1cm5lZCBieSB0aGUgZW51bWVyYXRvciBhcmUgY29udmVydGVkIHRvIHdyYXBwZXIgb2JqZWN0c1xuICAgICh3aGljaCBtYXkgYmUgZWl0aGVyIGEgY2xhc3MgaW5zdGFuY2UsIG9yIGEgZHluYW1pYy5EaXNwYXRjaCB0eXBlIG9iamVjdCkuXG5cbiAgICAiIiJcbiAgICBpZiB0eXBlKG9iKSAhPSBweXRob25jb20uVHlwZUlJRHNbcHl0aG9uY29tLklJRF9JRW51bVZBUklBTlRdOlxuICAgICAgICBvYiA9IG9iLlF1ZXJ5SW50ZXJmYWNlKHB5dGhvbmNvbS5JSURfSUVudW1WQVJJQU5UKVxuICAgIHJldHVybiBFbnVtVkFSSUFOVChvYiwgcmVzdWx0Q0xTSUQpXG5cblxuY2xhc3MgRW51bWVyYXRvcjpcbiAgICAiIiJBIGNsYXNzIHRoYXQgcHJvdmlkZXMgaW5kZXhlZCBhY2Nlc3MgaW50byBhbiBFbnVtZXJhdG9yXG5cbiAgICBCeSB3cmFwcGluZyBhIFB5SUVudW0qIG9iamVjdCBpbiB0aGlzIGNsYXNzLCB5b3UgY2FuIHBlcmZvcm1cbiAgICBuYXR1cmFsIGxvb3BpbmcgYW5kIGluZGV4aW5nIGludG8gdGhlIEVudW1lcmF0b3IuXG5cbiAgICBMb29waW5nIGlzIHZlcnkgZWZmaWNpZW50LCBidXQgaXQgc2hvdWxkIGJlIG5vdGVkIHRoYXQgYWx0aG91Z2ggcmFuZG9tXG4gICAgYWNjZXNzIGlzIHN1cHBvcnRlZCwgdGhlIHVuZGVybHlpbmcgb2JqZWN0IGlzIHN0aWxsIGFuIGVudW1lcmF0b3IsIHNvXG4gICAgdGhpcyB3aWxsIGZvcmNlIG1hbnkgcmVzZXQtYW5kLXNlZWsgb3BlcmF0aW9ucyB0byBmaW5kIHRoZSByZXF1ZXN0ZWQgaW5kZXguXG5cbiAgICAiIiJcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBlbnVtKTpcbiAgICAgICAgc2VsZi5fb2xlb2JqXyA9IGVudW0gICMgYSBQeUlFbnVtVkFSSUFOVFxuICAgICAgICBzZWxmLmluZGV4ID0gLTFcblxuICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpbmRleCk6XG4gICAgICAgIHJldHVybiBzZWxmLl9fR2V0SW5kZXgoaW5kZXgpXG5cbiAgICBkZWYgX19jYWxsX18oc2VsZiwgaW5kZXgpOlxuICAgICAgICByZXR1cm4gc2VsZi5fX0dldEluZGV4KGluZGV4KVxuXG4gICAgZGVmIF9fR2V0SW5kZXgoc2VsZiwgaW5kZXgpOlxuICAgICAgICBpZiB0eXBlKGluZGV4KSAhPSB0eXBlKDApOlxuICAgICAgICAgICAgcmFpc2UgVHlwZUVycm9yKCJPbmx5IGludGVnZXIgaW5kZXhlcyBhcmUgc3VwcG9ydGVkIGZvciBlbnVtZXJhdG9ycyIpXG4gICAgICAgICMgTk9URVxuICAgICAgICAjIEluIHRoaXMgY29udGV4dCwgc2VsZi5pbmRleCBpcyB1c2VycyBwdXJlbHkgYXMgYSBmbGFnIHRvIHNheVxuICAgICAgICAjICJhbSBJIHN0aWxsIGluIHNlcXVlbmNlIi4gIFRoZSB1c2VyIG1heSBjYWxsIE5leHQoKSBvciBSZXNldCgpIGlmIHRoZXlcbiAgICAgICAgIyBzbyBjaG9vc2UsIGluIHdoaWNoIGNhc2Ugc2VsZi5pbmRleCB3aWxsIG5vdCBiZSBjb3JyZWN0IChhbHRob3VnaCB3ZVxuICAgICAgICAjIHN0aWxsIHdhbnQgdG8gc3RheSBpbiBzZXF1ZW5jZSlcbiAgICAgICAgaWYgaW5kZXggIT0gc2VsZi5pbmRleCArIDE6XG4gICAgICAgICAgICAjIEluZGV4IHJlcXVlc3RlZCBvdXQgb2Ygc2VxdWVuY2UuXG4gICAgICAgICAgICBzZWxmLl9vbGVvYmpfLlJlc2V0KClcbiAgICAgICAgICAgIGlmIGluZGV4OlxuICAgICAgICAgICAgICAgIHNlbGYuX29sZW9ial8uU2tpcChcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhcbiAgICAgICAgICAgICAgICApICAjIGlmIGFza2VkIGZvciBpdGVtIDEsIG11c3Qgc2tpcCAxLCBQeXRob24gYWx3YXlzIHplcm8gYmFzZWQuXG4gICAgICAgIHNlbGYuaW5kZXggPSBpbmRleFxuICAgICAgICByZXN1bHQgPSBzZWxmLl9vbGVvYmpfLk5leHQoMSlcbiAgICAgICAgaWYgbGVuKHJlc3VsdCk6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fbWFrZV9yZXR2YWxfKHJlc3VsdFswXSlcbiAgICAgICAgcmFpc2UgSW5kZXhFcnJvcigibGlzdCBpbmRleCBvdXQgb2YgcmFuZ2UiKVxuXG4gICAgZGVmIE5leHQoc2VsZiwgY291bnQ9MSk6XG4gICAgICAgIHJldCA9IHNlbGYuX29sZW9ial8uTmV4dChjb3VudClcbiAgICAgICAgcmVhbFJldHMgPSBbXVxuICAgICAgICBmb3IgciBpbiByZXQ6XG4gICAgICAgICAgICByZWFsUmV0cy5hcHBlbmQoc2VsZi5fbWFrZV9yZXR2YWxfKHIpKVxuICAgICAgICByZXR1cm4gdHVwbGUocmVhbFJldHMpICAjIENvbnZlcnQgYmFjayB0byB0dXBsZS5cblxuICAgIGRlZiBSZXNldChzZWxmKTpcbiAgICAgICAgcmV0dXJuIHNlbGYuX29sZW9ial8uUmVzZXQoKVxuXG4gICAgZGVmIENsb25lKHNlbGYpOlxuICAgICAgICByZXR1cm4gc2VsZi5fX2NsYXNzX18oc2VsZi5fb2xlb2JqXy5DbG9uZSgpLCBzZWxmLnJlc3VsdENMU0lEKVxuXG4gICAgZGVmIF9tYWtlX3JldHZhbF8oc2VsZiwgcmVzdWx0KTpcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuXG5cbmNsYXNzIEVudW1WQVJJQU5UKEVudW1lcmF0b3IpOlxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBlbnVtLCByZXN1bHRDTFNJRD1Ob25lKTpcbiAgICAgICAgc2VsZi5yZXN1bHRDTFNJRCA9IHJlc3VsdENMU0lEXG4gICAgICAgIEVudW1lcmF0b3IuX19pbml0X18oc2VsZiwgZW51bSlcblxuICAgIGRlZiBfbWFrZV9yZXR2YWxfKHNlbGYsIHJlc3VsdCk6XG4gICAgICAgIHJldHVybiBfZ2V0X2dvb2Rfb2JqZWN0XyhyZXN1bHQsIHJlc3VsdENMU0lEPXNlbGYucmVzdWx0Q0xTSUQpXG5cblxuY2xhc3MgSXRlcmF0b3I6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGVudW0sIHJlc3VsdENMU0lEPU5vbmUpOlxuICAgICAgICBzZWxmLnJlc3VsdENMU0lEID0gcmVzdWx0Q0xTSURcbiAgICAgICAgc2VsZi5faXRlcl8gPSBpdGVyKGVudW0uUXVlcnlJbnRlcmZhY2UocHl0aG9uY29tLklJRF9JRW51bVZBUklBTlQpKVxuXG4gICAgZGVmIF9faXRlcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gc2VsZlxuXG4gICAgZGVmIF9fbmV4dF9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gX2dldF9nb29kX29iamVjdF8obmV4dChzZWxmLl9pdGVyXyksIHJlc3VsdENMU0lEPXNlbGYucmVzdWx0Q0xTSUQpXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnd2luMzJjb20vY2xpZW50L2dlbmNhY2hlLnB5JywgYiciIiJNYW5hZ2VzIHRoZSBjYWNoZSBvZiBnZW5lcmF0ZWQgUHl0aG9uIGNvZGUuXG5cbkRlc2NyaXB0aW9uXG4gIFRoaXMgZmlsZSBtYW5hZ2VzIHRoZSBjYWNoZSBvZiBnZW5lcmF0ZWQgUHl0aG9uIGNvZGUuICBXaGVuIHJ1biBmcm9tIHRoZVxuICBjb21tYW5kIGxpbmUsIGl0IGFsc28gcHJvdmlkZXMgYSBudW1iZXIgb2Ygb3B0aW9ucyBmb3IgbWFuYWdpbmcgdGhhdCBjYWNoZS5cblxuSW1wbGVtZW50YXRpb25cbiAgRWFjaCB0eXBlbGliIGlzIGdlbmVyYXRlZCBpbnRvIGEgZmlsZW5hbWUgb2YgZm9ybWF0ICJ7Z3VpZH14e2xjaWR9eHttYWpvcn14e21pbm9yfS5weSJcblxuICBBbiBleHRlcm5hbCBwZXJzaXN0YW50IGRpY3Rpb25hcnkgbWFwcyBmcm9tIGFsbCBrbm93biBJSURzIGluIGFsbCBrbm93biB0eXBlIGxpYnJhcmllc1xuICB0byB0aGUgdHlwZSBsaWJyYXJ5IGl0c2VsZi5cblxuICBUaHVzLCB3aGVuZXZlciBQeXRob24gY29kZSBrbm93cyB0aGUgSUlEIG9mIGFuIG9iamVjdCwgaXQgY2FuIGZpbmQgdGhlIElJRCwgTENJRCBhbmQgdmVyc2lvbiBvZlxuICB0aGUgdHlwZSBsaWJyYXJ5IHdoaWNoIHN1cHBvcnRzIGl0LiAgR2l2ZW4gdGhpcyBpbmZvcm1hdGlvbiwgaXQgY2FuIGZpbmQgdGhlIFB5dGhvbiBtb2R1bGVcbiAgd2l0aCB0aGUgc3VwcG9ydC5cblxuICBJZiBuZWNlc3NhcnksIHRoaXMgc3VwcG9ydCBjYW4gYmUgZ2VuZXJhdGVkIG9uIHRoZSBmbHkuXG5cbkhhY2tzLCB0byBkbywgZXRjXG4gIEN1cnJlbnRseSBqdXN0IHVzZXMgYSBwaWNrbGVkIGRpY3Rpb25hcnksIGJ1dCBzaG91bGQgdXNlZCBzb21lIHNvcnQgb2YgaW5kZXhlZCBmaWxlLlxuICBNYXliZSBhbiBPTEUyIGNvbXBvdW5kIGZpbGUsIG9yIGEgYnNkZGIgZmlsZT9cbiIiIlxuaW1wb3J0IHB5d2ludHlwZXMsIG9zLCBzeXNcbmltcG9ydCBweXRob25jb21cbmltcG9ydCB3aW4zMmNvbSwgd2luMzJjb20uY2xpZW50XG5pbXBvcnQgZ2xvYlxuaW1wb3J0IHRyYWNlYmFja1xuZnJvbSAuIGltcG9ydCBDTFNJRFRvQ2xhc3NcbmltcG9ydCBvcGVyYXRvclxuZnJvbSBpbXBvcnRsaWIgaW1wb3J0IHJlbG9hZFxuXG5iRm9yRGVtYW5kRGVmYXVsdCA9IDAgICMgRGVmYXVsdCB2YWx1ZSBvZiBiRm9yRGVtYW5kIC0gdG9nZ2xlIHRoaXMgdG8gY2hhbmdlIHRoZSB3b3JsZCAtIHNlZSBhbHNvIG1ha2VweS5weVxuXG4jIFRoZSBnbG9iYWwgZGljdGlvbmFyeVxuY2xzaWRUb1R5cGVsaWIgPSB7fVxuXG4jIElmIHdlIGhhdmUgYSBkaWZmZXJlbnQgdmVyc2lvbiBvZiB0aGUgdHlwZWxpYiBnZW5lcmF0ZWQsIHRoaXNcbiMgbWFwcyB0aGUgInJlcXVlc3RlZCB2ZXJzaW9uIiB0byB0aGUgImdlbmVyYXRlZCB2ZXJzaW9uIi5cbnZlcnNpb25SZWRpcmVjdE1hcCA9IHt9XG5cbiMgVGhlcmUgaXMgbm8gcmVhc29uIHdlICptdXN0KiBiZSByZWFkb25seSBpbiBhIC56aXAsIGJ1dCB3ZSBhcmUgbm93LFxuIyBSYXRoZXIgdGhhbiBjaGVjayBmb3IgIi56aXAiIG9yIG90aGVyIHRyaWNrcywgUEVQMzAyIGRlZmluZXNcbiMgYSAiX19sb2FkZXJfXyIgYXR0cmlidXRlLCBzbyB3ZSB1c2UgdGhhdC5cbiMgKExhdGVyLCBpdCBtYXkgYmVjb21lIG5lY2Vzc2FyeSB0byBjaGVjayBpZiB0aGUgX19sb2FkZXJfXyBjYW4gdXBkYXRlIGZpbGVzLFxuIyBhcyBhIC56aXAgbG9hZGVyIHBvdGVudGlhbGx5IGNvdWxkIC0gYnV0IHB1bnQgYWxsIHRoYXQgdW50aWwgYSBuZWVkIGFyaXNlcylcbmlzX3JlYWRvbmx5ID0gaXNfemlwID0gaGFzYXR0cih3aW4zMmNvbSwgIl9fbG9hZGVyX18iKSBhbmQgaGFzYXR0cihcbiAgICB3aW4zMmNvbS5fX2xvYWRlcl9fLCAiYXJjaGl2ZSJcbilcblxuIyBBIGRpY3Rpb25hcnkgb2YgSVR5cGVMaWJyYXJ5IG9iamVjdHMgZm9yIGRlbWFuZCBnZW5lcmF0aW9uIGV4cGxpY2l0bHkgaGFuZGVkIHRvIHVzXG4jIEtleWVkIGJ5IHVzdWFsIGNsc2lkLCBsY2lkLCBtYWpvciwgbWlub3JcbmRlbWFuZEdlbmVyYXRlZFR5cGVMaWJyYXJpZXMgPSB7fVxuXG5pbXBvcnQgcGlja2xlIGFzIHBpY2tsZVxuXG5cbmRlZiBfX2luaXRfXygpOlxuICAgICMgSW5pdGlhbGl6ZSB0aGUgbW9kdWxlLiAgQ2FsbGVkIG9uY2UgZXhwbGljaXRseSBhdCBtb2R1bGUgaW1wb3J0IGJlbG93LlxuICAgIHRyeTpcbiAgICAgICAgX0xvYWREaWN0cygpXG4gICAgZXhjZXB0IElPRXJyb3I6XG4gICAgICAgIFJlYnVpbGQoKVxuXG5cbnBpY2tsZVZlcnNpb24gPSAxXG5cblxuZGVmIF9TYXZlRGljdHMoKTpcbiAgICBpZiBpc19yZWFkb25seTpcbiAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKFxuICAgICAgICAgICAgIlRyeWluZyB0byB3cml0ZSB0byBhIHJlYWRvbmx5IGdlbmNhY2hlIChcJyVzXCcpISIgJSB3aW4zMmNvbS5fX2dlbl9wYXRoX19cbiAgICAgICAgKVxuICAgIGYgPSBvcGVuKG9zLnBhdGguam9pbihHZXRHZW5lcmF0ZVBhdGgoKSwgImRpY3RzLmRhdCIpLCAid2IiKVxuICAgIHRyeTpcbiAgICAgICAgcCA9IHBpY2tsZS5QaWNrbGVyKGYpXG4gICAgICAgIHAuZHVtcChwaWNrbGVWZXJzaW9uKVxuICAgICAgICBwLmR1bXAoY2xzaWRUb1R5cGVsaWIpXG4gICAgZmluYWxseTpcbiAgICAgICAgZi5jbG9zZSgpXG5cblxuZGVmIF9Mb2FkRGljdHMoKTpcbiAgICAjIExvYWQgdGhlIGRpY3Rpb25hcnkgZnJvbSBhIC56aXAgZmlsZSBpZiB0aGF0IGlzIHdoZXJlIHdlIGxpdmUuXG4gICAgaWYgaXNfemlwOlxuICAgICAgICBpbXBvcnQgaW8gYXMgaW9cblxuICAgICAgICBsb2FkZXIgPSB3aW4zMmNvbS5fX2xvYWRlcl9fXG4gICAgICAgIGFyY19wYXRoID0gbG9hZGVyLmFyY2hpdmVcbiAgICAgICAgZGljdHNfcGF0aCA9IG9zLnBhdGguam9pbih3aW4zMmNvbS5fX2dlbl9wYXRoX18sICJkaWN0cy5kYXQiKVxuICAgICAgICBpZiBkaWN0c19wYXRoLnN0YXJ0c3dpdGgoYXJjX3BhdGgpOlxuICAgICAgICAgICAgZGljdHNfcGF0aCA9IGRpY3RzX3BhdGhbbGVuKGFyY19wYXRoKSArIDEgOl1cbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICMgSG0uIFNlZSBiZWxvdy5cbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBkYXRhID0gbG9hZGVyLmdldF9kYXRhKGRpY3RzX3BhdGgpXG4gICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjpcbiAgICAgICAgICAgICMgVGhlIF9fbG9hZGVyX18gaGFzIG5vIGdldF9kYXRhIG1ldGhvZC4gIFNlZSBiZWxvdy5cbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICBleGNlcHQgSU9FcnJvcjpcbiAgICAgICAgICAgICMgT3VyIGdlbmNhY2hlIGlzIGluIGEgLnppcCBmaWxlIChhbmQgYWxtb3N0IGNlcnRhaW5seSByZWFkb25seSlcbiAgICAgICAgICAgICMgYnV0IG5vIGRpY3RzIGZpbGUuICBUaGF0IGFjdHVhbGx5IG5lZWRuXCd0IGJlIGZhdGFsIGZvciBhIGZyb3plblxuICAgICAgICAgICAgIyBhcHBsaWNhdGlvbi4gIEFzc3VtaW5nIHRoZXkgY2FsbCAiRW5zdXJlTW9kdWxlIiB3aXRoIHRoZSBzYW1lXG4gICAgICAgICAgICAjIHR5cGVsaWIgSURzIHRoZXkgaGF2ZSBiZWVuIGZyb3plbiB3aXRoLCB0aGF0IEVuc3VyZU1vZHVsZSB3aWxsXG4gICAgICAgICAgICAjIGNvcnJlY3RseSByZS1idWlsZCB0aGUgZGljdHMgb24gdGhlIGZseS4gIEhvd2V2ZXIsIG9iamVjdHMgdGhhdFxuICAgICAgICAgICAgIyByZWx5IG9uIHRoZSBnZW5jYWNoZSBidXQgaGF2ZSBub3QgZG9uZSBhbiBFbnN1cmVNb2R1bGUgd2lsbFxuICAgICAgICAgICAgIyBmYWlsIChidXQgdGhlaXIgYXBwcyBhcmUgbGlrZWx5IHRvIGZhaWwgcnVubmluZyBmcm9tIHNvdXJjZVxuICAgICAgICAgICAgIyB3aXRoIGEgY2xlYW4gZ2VuY2FjaGUgYW55d2F5LCBhcyB0aGVuIHRoZXkgd291bGQgYmUgZ2V0dGluZ1xuICAgICAgICAgICAgIyBEeW5hbWljIG9iamVjdHMgdW50aWwgdGhlIGNhY2hlIGlzIGJ1aWx0IC0gc28gdGhlIGJlc3QgYW5zd2VyXG4gICAgICAgICAgICAjIGZvciB0aGVzZSBhcHBzIGlzIHRvIGNhbGwgRW5zdXJlTW9kdWxlLCByYXRoZXIgdGhhbiBmcmVlemluZ1xuICAgICAgICAgICAgIyB0aGUgZGljdClcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICBmID0gaW8uQnl0ZXNJTyhkYXRhKVxuICAgIGVsc2U6XG4gICAgICAgICMgTk9URTogSU9FcnJvciBvbiBmaWxlIG9wZW4gbXVzdCBiZSBjYXVnaHQgYnkgY2FsbGVyLlxuICAgICAgICBmID0gb3Blbihvcy5wYXRoLmpvaW4od2luMzJjb20uX19nZW5fcGF0aF9fLCAiZGljdHMuZGF0IiksICJyYiIpXG4gICAgdHJ5OlxuICAgICAgICBwID0gcGlja2xlLlVucGlja2xlcihmKVxuICAgICAgICB2ZXJzaW9uID0gcC5sb2FkKClcbiAgICAgICAgZ2xvYmFsIGNsc2lkVG9UeXBlbGliXG4gICAgICAgIGNsc2lkVG9UeXBlbGliID0gcC5sb2FkKClcbiAgICAgICAgdmVyc2lvblJlZGlyZWN0TWFwLmNsZWFyKClcbiAgICBmaW5hbGx5OlxuICAgICAgICBmLmNsb3NlKClcblxuXG5kZWYgR2V0R2VuZXJhdGVkRmlsZU5hbWUoY2xzaWQsIGxjaWQsIG1ham9yLCBtaW5vcik6XG4gICAgIiIiR2l2ZW4gdGhlIGNsc2lkLCBsY2lkLCBtYWpvciBhbmQgIG1pbm9yIGZvciBhIHR5cGUgbGliLCByZXR1cm5cbiAgICB0aGUgZmlsZSBuYW1lIChubyBleHRlbnNpb24pIHByb3ZpZGluZyB0aGlzIHN1cHBvcnQuXG4gICAgIiIiXG4gICAgcmV0dXJuIHN0cihjbHNpZCkudXBwZXIoKVsxOi0xXSArICJ4JXN4JXN4JXMiICUgKGxjaWQsIG1ham9yLCBtaW5vcilcblxuXG5kZWYgU3BsaXRHZW5lcmF0ZWRGaWxlTmFtZShmbmFtZSk6XG4gICAgIiIiUmV2ZXJzZSBvZiBHZXRHZW5lcmF0ZWRGaWxlTmFtZSgpIiIiXG4gICAgcmV0dXJuIHR1cGxlKGZuYW1lLnNwbGl0KCJ4IiwgNCkpXG5cblxuZGVmIEdldEdlbmVyYXRlUGF0aCgpOlxuICAgICIiIlJldHVybnMgdGhlIG5hbWUgb2YgdGhlIHBhdGggdG8gZ2VuZXJhdGUgdG8uXG4gICAgQ2hlY2tzIHRoZSBkaXJlY3RvcnkgaXMgT0suXG4gICAgIiIiXG4gICAgYXNzZXJ0IG5vdCBpc19yZWFkb25seSwgIldoeSBkbyB5b3Ugd2FudCB0aGUgZ2VucGF0aCBmb3IgYSByZWFkb25seSBzdG9yZT8iXG4gICAgdHJ5OlxuICAgICAgICBvcy5tYWtlZGlycyh3aW4zMmNvbS5fX2dlbl9wYXRoX18pXG4gICAgICAgICMgb3MubWtkaXIod2luMzJjb20uX19nZW5fcGF0aF9fKVxuICAgIGV4Y2VwdCBvcy5lcnJvcjpcbiAgICAgICAgcGFzc1xuICAgIHRyeTpcbiAgICAgICAgZm5hbWUgPSBvcy5wYXRoLmpvaW4od2luMzJjb20uX19nZW5fcGF0aF9fLCAiX19pbml0X18ucHkiKVxuICAgICAgICBvcy5zdGF0KGZuYW1lKVxuICAgIGV4Y2VwdCBvcy5lcnJvcjpcbiAgICAgICAgZiA9IG9wZW4oZm5hbWUsICJ3IilcbiAgICAgICAgZi53cml0ZShcbiAgICAgICAgICAgICIjIEdlbmVyYXRlZCBmaWxlIC0gdGhpcyBkaXJlY3RvcnkgbWF5IGJlIGRlbGV0ZWQgdG8gcmVzZXQgdGhlIENPTSBjYWNoZS4uLlxcbiJcbiAgICAgICAgKVxuICAgICAgICBmLndyaXRlKCJpbXBvcnQgd2luMzJjb21cXG4iKVxuICAgICAgICBmLndyaXRlKFxuICAgICAgICAgICAgImlmIF9fcGF0aF9fWzotMV0gIT0gd2luMzJjb20uX19nZW5fcGF0aF9fOiBfX3BhdGhfXy5hcHBlbmQod2luMzJjb20uX19nZW5fcGF0aF9fKVxcbiJcbiAgICAgICAgKVxuICAgICAgICBmLmNsb3NlKClcblxuICAgIHJldHVybiB3aW4zMmNvbS5fX2dlbl9wYXRoX19cblxuXG4jXG4jIFRoZSBoZWxwZXJzIGZvciB3aW4zMmNvbS5jbGllbnQuRGlzcGF0Y2ggYW5kIE9DWCBjbGllbnRzLlxuI1xuZGVmIEdldENsYXNzRm9yUHJvZ0lEKHByb2dpZCk6XG4gICAgIiIiR2V0IGEgUHl0aG9uIGNsYXNzIGZvciBhIFByb2dyYW0gSURcblxuICAgIEdpdmVuIGEgUHJvZ3JhbSBJRCwgcmV0dXJuIGEgUHl0aG9uIGNsYXNzIHdoaWNoIHdyYXBzIHRoZSBDT00gb2JqZWN0XG5cbiAgICBSZXR1cm5zIHRoZSBQeXRob24gY2xhc3MsIG9yIE5vbmUgaWYgbm8gbW9kdWxlIGlzIGF2YWlsYWJsZS5cblxuICAgIFBhcmFtc1xuICAgIHByb2dpZCAtLSBBIENPTSBQcm9ncmFtSUQgb3IgSUlEIChlZywgIldvcmQuQXBwbGljYXRpb24iKVxuICAgICIiIlxuICAgIGNsc2lkID0gcHl3aW50eXBlcy5JSUQocHJvZ2lkKSAgIyBUaGlzIGF1dG8tY29udmVydHMgbmFtZWQgdG8gSURzLlxuICAgIHJldHVybiBHZXRDbGFzc0ZvckNMU0lEKGNsc2lkKVxuXG5cbmRlZiBHZXRDbGFzc0ZvckNMU0lEKGNsc2lkKTpcbiAgICAiIiJHZXQgYSBQeXRob24gY2xhc3MgZm9yIGEgQ0xTSURcblxuICAgIEdpdmVuIGEgQ0xTSUQsIHJldHVybiBhIFB5dGhvbiBjbGFzcyB3aGljaCB3cmFwcyB0aGUgQ09NIG9iamVjdFxuXG4gICAgUmV0dXJucyB0aGUgUHl0aG9uIGNsYXNzLCBvciBOb25lIGlmIG5vIG1vZHVsZSBpcyBhdmFpbGFibGUuXG5cbiAgICBQYXJhbXNcbiAgICBjbHNpZCAtLSBBIENPTSBDTFNJRCAob3Igc3RyaW5nIHJlcHIgb2Ygb25lKVxuICAgICIiIlxuICAgICMgZmlyc3QsIHRha2UgYSBzaG9ydC1jdXQgLSB3ZSBtYXkgYWxyZWFkeSBoYXZlIGdlbmVyYXRlZCBzdXBwb3J0IHJlYWR5LXRvLXJvbGwuXG4gICAgY2xzaWQgPSBzdHIoY2xzaWQpXG4gICAgaWYgQ0xTSURUb0NsYXNzLkhhc0NsYXNzKGNsc2lkKTpcbiAgICAgICAgcmV0dXJuIENMU0lEVG9DbGFzcy5HZXRDbGFzcyhjbHNpZClcbiAgICBtb2QgPSBHZXRNb2R1bGVGb3JDTFNJRChjbHNpZClcbiAgICBpZiBtb2QgaXMgTm9uZTpcbiAgICAgICAgcmV0dXJuIE5vbmVcbiAgICB0cnk6XG4gICAgICAgIHJldHVybiBDTFNJRFRvQ2xhc3MuR2V0Q2xhc3MoY2xzaWQpXG4gICAgZXhjZXB0IEtleUVycm9yOlxuICAgICAgICByZXR1cm4gTm9uZVxuXG5cbmRlZiBHZXRNb2R1bGVGb3JQcm9nSUQocHJvZ2lkKTpcbiAgICAiIiJHZXQgYSBQeXRob24gbW9kdWxlIGZvciBhIFByb2dyYW0gSURcblxuICAgIEdpdmVuIGEgUHJvZ3JhbSBJRCwgcmV0dXJuIGEgUHl0aG9uIG1vZHVsZSB3aGljaCBjb250YWlucyB0aGVcbiAgICBjbGFzcyB3aGljaCB3cmFwcyB0aGUgQ09NIG9iamVjdC5cblxuICAgIFJldHVybnMgdGhlIFB5dGhvbiBtb2R1bGUsIG9yIE5vbmUgaWYgbm8gbW9kdWxlIGlzIGF2YWlsYWJsZS5cblxuICAgIFBhcmFtc1xuICAgIHByb2dpZCAtLSBBIENPTSBQcm9ncmFtSUQgb3IgSUlEIChlZywgIldvcmQuQXBwbGljYXRpb24iKVxuICAgICIiIlxuICAgIHRyeTpcbiAgICAgICAgaWlkID0gcHl3aW50eXBlcy5JSUQocHJvZ2lkKVxuICAgIGV4Y2VwdCBweXdpbnR5cGVzLmNvbV9lcnJvcjpcbiAgICAgICAgcmV0dXJuIE5vbmVcbiAgICByZXR1cm4gR2V0TW9kdWxlRm9yQ0xTSUQoaWlkKVxuXG5cbmRlZiBHZXRNb2R1bGVGb3JDTFNJRChjbHNpZCk6XG4gICAgIiIiR2V0IGEgUHl0aG9uIG1vZHVsZSBmb3IgYSBDTFNJRFxuXG4gICAgR2l2ZW4gYSBDTFNJRCwgcmV0dXJuIGEgUHl0aG9uIG1vZHVsZSB3aGljaCBjb250YWlucyB0aGVcbiAgICBjbGFzcyB3aGljaCB3cmFwcyB0aGUgQ09NIG9iamVjdC5cblxuICAgIFJldHVybnMgdGhlIFB5dGhvbiBtb2R1bGUsIG9yIE5vbmUgaWYgbm8gbW9kdWxlIGlzIGF2YWlsYWJsZS5cblxuICAgIFBhcmFtc1xuICAgIHByb2dpZCAtLSBBIENPTSBDTFNJRCAoaWUsIG5vdCB0aGUgZGVzY3JpcHRpb24pXG4gICAgIiIiXG4gICAgY2xzaWRfc3RyID0gc3RyKGNsc2lkKVxuICAgIHRyeTpcbiAgICAgICAgdHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3IgPSBjbHNpZFRvVHlwZWxpYltjbHNpZF9zdHJdXG4gICAgZXhjZXB0IEtleUVycm9yOlxuICAgICAgICByZXR1cm4gTm9uZVxuXG4gICAgdHJ5OlxuICAgICAgICBtb2QgPSBHZXRNb2R1bGVGb3JUeXBlbGliKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yKVxuICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjpcbiAgICAgICAgbW9kID0gTm9uZVxuICAgIGlmIG1vZCBpcyBub3QgTm9uZTpcbiAgICAgICAgc3ViX21vZCA9IG1vZC5DTFNJRFRvUGFja2FnZU1hcC5nZXQoY2xzaWRfc3RyKVxuICAgICAgICBpZiBzdWJfbW9kIGlzIE5vbmU6XG4gICAgICAgICAgICBzdWJfbW9kID0gbW9kLlZUYWJsZXNUb1BhY2thZ2VNYXAuZ2V0KGNsc2lkX3N0cilcbiAgICAgICAgaWYgc3ViX21vZCBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgIHN1Yl9tb2RfbmFtZSA9IG1vZC5fX25hbWVfXyArICIuIiArIHN1Yl9tb2RcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBfX2ltcG9ydF9fKHN1Yl9tb2RfbmFtZSlcbiAgICAgICAgICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjpcbiAgICAgICAgICAgICAgICBpbmZvID0gdHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3JcbiAgICAgICAgICAgICAgICAjIEZvcmNlIHRoZSBnZW5lcmF0aW9uLiAgSWYgdGhpcyB0eXBlbGlicmFyeSBoYXMgZXhwbGljaXRseSBiZWVuIGFkZGVkLFxuICAgICAgICAgICAgICAgICMgdXNlIGl0IChpdCBtYXkgbm90IGJlIHJlZ2lzdGVyZWQsIGNhdXNpbmcgYSBsb29rdXAgYnkgY2xzaWQgdG8gZmFpbClcbiAgICAgICAgICAgICAgICBpZiBpbmZvIGluIGRlbWFuZEdlbmVyYXRlZFR5cGVMaWJyYXJpZXM6XG4gICAgICAgICAgICAgICAgICAgIGluZm8gPSBkZW1hbmRHZW5lcmF0ZWRUeXBlTGlicmFyaWVzW2luZm9dXG4gICAgICAgICAgICAgICAgZnJvbSAuIGltcG9ydCBtYWtlcHlcblxuICAgICAgICAgICAgICAgIG1ha2VweS5HZW5lcmF0ZUNoaWxkRnJvbVR5cGVMaWJTcGVjKHN1Yl9tb2QsIGluZm8pXG4gICAgICAgICAgICAgICAgIyBHZW5lcmF0ZSBkb2VzIGFuIGltcG9ydC4uLlxuICAgICAgICAgICAgbW9kID0gc3lzLm1vZHVsZXNbc3ViX21vZF9uYW1lXVxuICAgIHJldHVybiBtb2RcblxuXG5kZWYgR2V0TW9kdWxlRm9yVHlwZWxpYih0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vcik6XG4gICAgIiIiR2V0IGEgUHl0aG9uIG1vZHVsZSBmb3IgYSB0eXBlIGxpYnJhcnkgSURcblxuICAgIEdpdmVuIHRoZSBDTFNJRCBvZiBhIHR5cGVsaWJyYXJ5LCByZXR1cm4gYW4gaW1wb3J0ZWQgUHl0aG9uIG1vZHVsZSxcbiAgICBlbHNlIE5vbmVcblxuICAgIFBhcmFtc1xuICAgIHR5cGVsaWJDTFNJRCAtLSBJSUQgb2YgdGhlIHR5cGUgbGlicmFyeS5cbiAgICBtYWpvciAtLSBJbnRlZ2VyIG1ham9yIHZlcnNpb24uXG4gICAgbWlub3IgLS0gSW50ZWdlciBtaW5vciB2ZXJzaW9uXG4gICAgbGNpZCAtLSBJbnRlZ2VyIExDSUQgZm9yIHRoZSBsaWJyYXJ5LlxuICAgICIiIlxuICAgIG1vZE5hbWUgPSBHZXRHZW5lcmF0ZWRGaWxlTmFtZSh0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vcilcbiAgICBtb2QgPSBfR2V0TW9kdWxlKG1vZE5hbWUpXG4gICAgIyBJZiB0aGUgaW1wb3J0IHdvcmtlZCwgaXQgZG9lc25cJ3QgbWVhbiB3ZSBoYXZlIGFjdHVhbGx5IGFkZGVkIHRoaXNcbiAgICAjIG1vZHVsZSB0byBvdXIgY2FjaGUgdGhvdWdoIC0gY2hlY2sgdGhhdCBoZXJlLlxuICAgIGlmICJfaW5fZ2VuY2FjaGVfIiBub3QgaW4gbW9kLl9fZGljdF9fOlxuICAgICAgICBBZGRNb2R1bGVUb0NhY2hlKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yKVxuICAgICAgICBhc3NlcnQgIl9pbl9nZW5jYWNoZV8iIGluIG1vZC5fX2RpY3RfX1xuICAgIHJldHVybiBtb2RcblxuXG5kZWYgTWFrZU1vZHVsZUZvclR5cGVsaWIoXG4gICAgdHlwZWxpYkNMU0lELFxuICAgIGxjaWQsXG4gICAgbWFqb3IsXG4gICAgbWlub3IsXG4gICAgcHJvZ3Jlc3NJbnN0YW5jZT1Ob25lLFxuICAgIGJGb3JEZW1hbmQ9YkZvckRlbWFuZERlZmF1bHQsXG4gICAgYkJ1aWxkSGlkZGVuPTEsXG4pOlxuICAgICIiIkdlbmVyYXRlIHN1cHBvcnQgZm9yIGEgdHlwZSBsaWJyYXJ5LlxuXG4gICAgR2l2ZW4gdGhlIElJRCwgTENJRCBhbmQgdmVyc2lvbiBpbmZvcm1hdGlvbiBmb3IgYSB0eXBlIGxpYnJhcnksIGdlbmVyYXRlXG4gICAgYW5kIGltcG9ydCB0aGUgbmVjZXNzYXJ5IHN1cHBvcnQgZmlsZXMuXG5cbiAgICBSZXR1cm5zIHRoZSBQeXRob24gbW9kdWxlLiAgTm8gZXhjZXB0aW9ucyBhcmUgY2F1Z2h0LlxuXG4gICAgUGFyYW1zXG4gICAgdHlwZWxpYkNMU0lEIC0tIElJRCBvZiB0aGUgdHlwZSBsaWJyYXJ5LlxuICAgIG1ham9yIC0tIEludGVnZXIgbWFqb3IgdmVyc2lvbi5cbiAgICBtaW5vciAtLSBJbnRlZ2VyIG1pbm9yIHZlcnNpb24uXG4gICAgbGNpZCAtLSBJbnRlZ2VyIExDSUQgZm9yIHRoZSBsaWJyYXJ5LlxuICAgIHByb2dyZXNzSW5zdGFuY2UgLS0gSW5zdGFuY2UgdG8gdXNlIGFzIHByb2dyZXNzIGluZGljYXRvciwgb3IgTm9uZSB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlIHRoZSBHVUkgcHJvZ3Jlc3MgYmFyLlxuICAgICIiIlxuICAgIGZyb20gLiBpbXBvcnQgbWFrZXB5XG5cbiAgICBtYWtlcHkuR2VuZXJhdGVGcm9tVHlwZUxpYlNwZWMoXG4gICAgICAgICh0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vciksXG4gICAgICAgIHByb2dyZXNzSW5zdGFuY2U9cHJvZ3Jlc3NJbnN0YW5jZSxcbiAgICAgICAgYkZvckRlbWFuZD1iRm9yRGVtYW5kLFxuICAgICAgICBiQnVpbGRIaWRkZW49YkJ1aWxkSGlkZGVuLFxuICAgIClcbiAgICByZXR1cm4gR2V0TW9kdWxlRm9yVHlwZWxpYih0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vcilcblxuXG5kZWYgTWFrZU1vZHVsZUZvclR5cGVsaWJJbnRlcmZhY2UoXG4gICAgdHlwZWxpYl9vYiwgcHJvZ3Jlc3NJbnN0YW5jZT1Ob25lLCBiRm9yRGVtYW5kPWJGb3JEZW1hbmREZWZhdWx0LCBiQnVpbGRIaWRkZW49MVxuKTpcbiAgICAiIiJHZW5lcmF0ZSBzdXBwb3J0IGZvciBhIHR5cGUgbGlicmFyeS5cblxuICAgIEdpdmVuIGEgUHlJVHlwZUxpYiBpbnRlcmZhY2UgZ2VuZXJhdGUgYW5kIGltcG9ydCB0aGUgbmVjZXNzYXJ5IHN1cHBvcnQgZmlsZXMuICBUaGlzIGlzIHVzZWZ1bFxuICAgIGZvciBnZXR0aW5nIG1ha2VweSBzdXBwb3J0IGZvciBhIHR5cGVsaWJyYXJ5IHRoYXQgaXMgbm90IHJlZ2lzdGVyZWQgLSB0aGUgY2FsbGVyIGNhbiBsb2NhdGVcbiAgICBhbmQgbG9hZCB0aGUgdHlwZSBsaWJyYXJ5IGl0c2VsZiwgcmF0aGVyIHRoYW4gcmVseWluZyBvbiBDT00gdG8gZmluZCBpdC5cblxuICAgIFJldHVybnMgdGhlIFB5dGhvbiBtb2R1bGUuXG5cbiAgICBQYXJhbXNcbiAgICB0eXBlbGliX29iIC0tIFRoZSB0eXBlIGxpYnJhcnkgaXRzZWxmXG4gICAgcHJvZ3Jlc3NJbnN0YW5jZSAtLSBJbnN0YW5jZSB0byB1c2UgYXMgcHJvZ3Jlc3MgaW5kaWNhdG9yLCBvciBOb25lIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2UgdGhlIEdVSSBwcm9ncmVzcyBiYXIuXG4gICAgIiIiXG4gICAgZnJvbSAuIGltcG9ydCBtYWtlcHlcblxuICAgIHRyeTpcbiAgICAgICAgbWFrZXB5LkdlbmVyYXRlRnJvbVR5cGVMaWJTcGVjKFxuICAgICAgICAgICAgdHlwZWxpYl9vYixcbiAgICAgICAgICAgIHByb2dyZXNzSW5zdGFuY2U9cHJvZ3Jlc3NJbnN0YW5jZSxcbiAgICAgICAgICAgIGJGb3JEZW1hbmQ9YkZvckRlbWFuZERlZmF1bHQsXG4gICAgICAgICAgICBiQnVpbGRIaWRkZW49YkJ1aWxkSGlkZGVuLFxuICAgICAgICApXG4gICAgZXhjZXB0IHB5d2ludHlwZXMuY29tX2Vycm9yOlxuICAgICAgICByZXR1cm4gTm9uZVxuICAgIHRsYSA9IHR5cGVsaWJfb2IuR2V0TGliQXR0cigpXG4gICAgZ3VpZCA9IHRsYVswXVxuICAgIGxjaWQgPSB0bGFbMV1cbiAgICBtYWpvciA9IHRsYVszXVxuICAgIG1pbm9yID0gdGxhWzRdXG4gICAgcmV0dXJuIEdldE1vZHVsZUZvclR5cGVsaWIoZ3VpZCwgbGNpZCwgbWFqb3IsIG1pbm9yKVxuXG5cbmRlZiBFbnN1cmVNb2R1bGVGb3JUeXBlbGliSW50ZXJmYWNlKFxuICAgIHR5cGVsaWJfb2IsIHByb2dyZXNzSW5zdGFuY2U9Tm9uZSwgYkZvckRlbWFuZD1iRm9yRGVtYW5kRGVmYXVsdCwgYkJ1aWxkSGlkZGVuPTFcbik6XG4gICAgIiIiQ2hlY2sgd2UgaGF2ZSBzdXBwb3J0IGZvciBhIHR5cGUgbGlicmFyeSwgZ2VuZXJhdGluZyBpZiBub3QuXG5cbiAgICBHaXZlbiBhIFB5SVR5cGVMaWIgaW50ZXJmYWNlIGdlbmVyYXRlIGFuZCBpbXBvcnQgdGhlIG5lY2Vzc2FyeVxuICAgIHN1cHBvcnQgZmlsZXMgaWYgbmVjZXNzYXJ5LiBUaGlzIGlzIHVzZWZ1bCBmb3IgZ2V0dGluZyBtYWtlcHkgc3VwcG9ydFxuICAgIGZvciBhIHR5cGVsaWJyYXJ5IHRoYXQgaXMgbm90IHJlZ2lzdGVyZWQgLSB0aGUgY2FsbGVyIGNhbiBsb2NhdGUgYW5kXG4gICAgbG9hZCB0aGUgdHlwZSBsaWJyYXJ5IGl0c2VsZiwgcmF0aGVyIHRoYW4gcmVseWluZyBvbiBDT00gdG8gZmluZCBpdC5cblxuICAgIFJldHVybnMgdGhlIFB5dGhvbiBtb2R1bGUuXG5cbiAgICBQYXJhbXNcbiAgICB0eXBlbGliX29iIC0tIFRoZSB0eXBlIGxpYnJhcnkgaXRzZWxmXG4gICAgcHJvZ3Jlc3NJbnN0YW5jZSAtLSBJbnN0YW5jZSB0byB1c2UgYXMgcHJvZ3Jlc3MgaW5kaWNhdG9yLCBvciBOb25lIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2UgdGhlIEdVSSBwcm9ncmVzcyBiYXIuXG4gICAgIiIiXG4gICAgdGxhID0gdHlwZWxpYl9vYi5HZXRMaWJBdHRyKClcbiAgICBndWlkID0gdGxhWzBdXG4gICAgbGNpZCA9IHRsYVsxXVxuICAgIG1ham9yID0gdGxhWzNdXG4gICAgbWlub3IgPSB0bGFbNF1cblxuICAgICMgSWYgZGVtYW5kIGdlbmVyYXRlZCwgc2F2ZSB0aGUgdHlwZWxpYiBpbnRlcmZhY2UgYXdheSBmb3IgbGF0ZXIgdXNlXG4gICAgaWYgYkZvckRlbWFuZDpcbiAgICAgICAgZGVtYW5kR2VuZXJhdGVkVHlwZUxpYnJhcmllc1soc3RyKGd1aWQpLCBsY2lkLCBtYWpvciwgbWlub3IpXSA9IHR5cGVsaWJfb2JcblxuICAgIHRyeTpcbiAgICAgICAgcmV0dXJuIEdldE1vZHVsZUZvclR5cGVsaWIoZ3VpZCwgbGNpZCwgbWFqb3IsIG1pbm9yKVxuICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjpcbiAgICAgICAgcGFzc1xuICAgICMgR2VuZXJhdGUgaXQuXG4gICAgcmV0dXJuIE1ha2VNb2R1bGVGb3JUeXBlbGliSW50ZXJmYWNlKFxuICAgICAgICB0eXBlbGliX29iLCBwcm9ncmVzc0luc3RhbmNlLCBiRm9yRGVtYW5kLCBiQnVpbGRIaWRkZW5cbiAgICApXG5cblxuZGVmIEZvcmdldEFib3V0VHlwZWxpYkludGVyZmFjZSh0eXBlbGliX29iKTpcbiAgICAiIiJEcm9wIGFueSByZWZlcmVuY2VzIHRvIGEgdHlwZWxpYiBwcmV2aW91c2x5IGFkZGVkIHdpdGggRW5zdXJlTW9kdWxlRm9yVHlwZWxpYkludGVyZmFjZSBhbmQgZm9yRGVtYW5kIiIiXG4gICAgdGxhID0gdHlwZWxpYl9vYi5HZXRMaWJBdHRyKClcbiAgICBndWlkID0gdGxhWzBdXG4gICAgbGNpZCA9IHRsYVsxXVxuICAgIG1ham9yID0gdGxhWzNdXG4gICAgbWlub3IgPSB0bGFbNF1cbiAgICBpbmZvID0gc3RyKGd1aWQpLCBsY2lkLCBtYWpvciwgbWlub3JcbiAgICB0cnk6XG4gICAgICAgIGRlbCBkZW1hbmRHZW5lcmF0ZWRUeXBlTGlicmFyaWVzW2luZm9dXG4gICAgZXhjZXB0IEtleUVycm9yOlxuICAgICAgICAjIE5vdCB3b3J0aCByYWlzaW5nIGFuIGV4Y2VwdGlvbiAtIG1heWJlIHRoZXkgZG9udCBrbm93IHdlIG9ubHkgcmVtZW1iZXIgZm9yIGRlbWFuZCBnZW5lcmF0ZWQsIGV0Yy5cbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiRm9yZ2V0QWJvdXRUeXBlbGliSW50ZXJmYWNlOjogV2FybmluZyAtIHR5cGUgbGlicmFyeSB3aXRoIGluZm8gJXMgaXMgbm90IGJlaW5nIHJlbWVtYmVyZWQhIlxuICAgICAgICAgICAgJSAoaW5mbywpXG4gICAgICAgIClcbiAgICAjIGFuZCBkcm9wIGFueSB2ZXJzaW9uIHJlZGlyZWN0cyB0byBpdFxuICAgIGZvciBrZXksIHZhbCBpbiBsaXN0KHZlcnNpb25SZWRpcmVjdE1hcC5pdGVtcygpKTpcbiAgICAgICAgaWYgdmFsID09IGluZm86XG4gICAgICAgICAgICBkZWwgdmVyc2lvblJlZGlyZWN0TWFwW2tleV1cblxuXG5kZWYgRW5zdXJlTW9kdWxlKFxuICAgIHR5cGVsaWJDTFNJRCxcbiAgICBsY2lkLFxuICAgIG1ham9yLFxuICAgIG1pbm9yLFxuICAgIHByb2dyZXNzSW5zdGFuY2U9Tm9uZSxcbiAgICBiVmFsaWRhdGVGaWxlPW5vdCBpc19yZWFkb25seSxcbiAgICBiRm9yRGVtYW5kPWJGb3JEZW1hbmREZWZhdWx0LFxuICAgIGJCdWlsZEhpZGRlbj0xLFxuKTpcbiAgICAiIiJFbnN1cmUgUHl0aG9uIHN1cHBvcnQgaXMgbG9hZGVkIGZvciBhIHR5cGUgbGlicmFyeSwgZ2VuZXJhdGluZyBpZiBuZWNlc3NhcnkuXG5cbiAgICBHaXZlbiB0aGUgSUlELCBMQ0lEIGFuZCB2ZXJzaW9uIGluZm9ybWF0aW9uIGZvciBhIHR5cGUgbGlicmFyeSwgY2hlY2sgYW5kIGlmXG4gICAgbmVjZXNzYXJ5IChyZSlnZW5lcmF0ZSwgdGhlbiBpbXBvcnQgdGhlIG5lY2Vzc2FyeSBzdXBwb3J0IGZpbGVzLiBJZiB3ZSByZWdlbmVyYXRlIHRoZSBmaWxlLCB0aGVyZVxuICAgIGlzIG5vIHdheSB0byB0b3RhbGx5IHNudWZmIG91dCBhbGwgaW5zdGFuY2VzIG9mIHRoZSBvbGQgbW9kdWxlIGluIFB5dGhvbiwgYW5kIHRodXMgd2Ugd2lsbCByZWdlbmVyYXRlIHRoZSBmaWxlIG1vcmUgdGhhbiBuZWNlc3NhcnksXG4gICAgdW5sZXNzIG1ha2VweS9nZW5weSBpcyBtb2RpZmllZCBhY2NvcmRpbmdseS5cblxuXG4gICAgUmV0dXJucyB0aGUgUHl0aG9uIG1vZHVsZS4gIE5vIGV4Y2VwdGlvbnMgYXJlIGNhdWdodCBkdXJpbmcgdGhlIGdlbmVyYXRlIHByb2Nlc3MuXG5cbiAgICBQYXJhbXNcbiAgICB0eXBlbGliQ0xTSUQgLS0gSUlEIG9mIHRoZSB0eXBlIGxpYnJhcnkuXG4gICAgbWFqb3IgLS0gSW50ZWdlciBtYWpvciB2ZXJzaW9uLlxuICAgIG1pbm9yIC0tIEludGVnZXIgbWlub3IgdmVyc2lvblxuICAgIGxjaWQgLS0gSW50ZWdlciBMQ0lEIGZvciB0aGUgbGlicmFyeS5cbiAgICBwcm9ncmVzc0luc3RhbmNlIC0tIEluc3RhbmNlIHRvIHVzZSBhcyBwcm9ncmVzcyBpbmRpY2F0b3IsIG9yIE5vbmUgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZSB0aGUgR1VJIHByb2dyZXNzIGJhci5cbiAgICBiVmFsaWRhdGVGaWxlIC0tIFdoZXRoZXIgb3Igbm90IHRvIHBlcmZvcm0gY2FjaGUgdmFsaWRhdGlvbiBvciBub3RcbiAgICBiRm9yRGVtYW5kIC0tIFNob3VsZCBhIGNvbXBsZXRlIGdlbmVyYXRpb24gaGFwcGVuIG5vdywgb3Igb24gZGVtYW5kP1xuICAgIGJCdWlsZEhpZGRlbiAtLSBTaG91bGQgaGlkZGVuIG1lbWJlcnMvYXR0cmlidXRlcyBldGMgYmUgZ2VuZXJhdGVkP1xuICAgICIiIlxuICAgIGJSZWxvYWROZWVkZWQgPSAwXG4gICAgdHJ5OlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBtb2R1bGUgPSBHZXRNb2R1bGVGb3JUeXBlbGliKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yKVxuICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6XG4gICAgICAgICAgICAjIElmIHdlIGdldCBhbiBJbXBvcnRFcnJvclxuICAgICAgICAgICAgIyBXZSBtYXkgc3RpbGwgZmluZCBhIHZhbGlkIGNhY2hlIGZpbGUgdW5kZXIgYSBkaWZmZXJlbnQgTWlub3JWZXJzaW9uICNcbiAgICAgICAgICAgICMgKHdoaWNoIHdpbmRvd3Mgd2lsbCBzZWFyY2ggb3V0IGZvciB1cylcbiAgICAgICAgICAgICMgcHJpbnQgIkxvYWRpbmcgcmVnIHR5cGVsaWIiLCB0eXBlbGliQ0xTSUQsIG1ham9yLCBtaW5vciwgbGNpZFxuICAgICAgICAgICAgbW9kdWxlID0gTm9uZVxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIHRsYkF0dHIgPSBweXRob25jb20uTG9hZFJlZ1R5cGVMaWIoXG4gICAgICAgICAgICAgICAgICAgIHR5cGVsaWJDTFNJRCwgbWFqb3IsIG1pbm9yLCBsY2lkXG4gICAgICAgICAgICAgICAgKS5HZXRMaWJBdHRyKClcbiAgICAgICAgICAgICAgICAjIGlmIHRoZSBhYm92ZSBsaW5lIGRvZXNuXCd0IHRocm93IGEgcHl0aG9uY29tLmNvbV9lcnJvciwgY2hlY2sgaWZcbiAgICAgICAgICAgICAgICAjIGl0IGlzIGFjdHVhbGx5IGEgZGlmZmVyZW50IGxpYiB0aGFuIHdlIHJlcXVlc3RlZCwgYW5kIGlmIHNvLCBzdWNrIGl0IGluXG4gICAgICAgICAgICAgICAgaWYgdGxiQXR0clsxXSAhPSBsY2lkIG9yIHRsYkF0dHJbNF0gIT0gbWlub3I6XG4gICAgICAgICAgICAgICAgICAgICMgcHJpbnQgIlRyeWluZyAybmQgbWlub3IgIyIsIHRsYkF0dHJbMV0sIHRsYkF0dHJbM10sIHRsYkF0dHJbNF1cbiAgICAgICAgICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlID0gR2V0TW9kdWxlRm9yVHlwZWxpYihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlbGliQ0xTSUQsIHRsYkF0dHJbMV0sIHRsYkF0dHJbM10sIHRsYkF0dHJbNF1cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEltcG9ydEVycm9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgIyBXZSBkb25cJ3QgaGF2ZSBhIG1vZHVsZSwgYnV0IHdlIGRvIGhhdmUgYSBiZXR0ZXIgbWlub3JcbiAgICAgICAgICAgICAgICAgICAgICAgICMgdmVyc2lvbiAtIHJlbWVtYmVyIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5vciA9IHRsYkF0dHJbNF1cbiAgICAgICAgICAgICAgICAjIGVsc2UgbW9kdWxlIHJlbWFpbnMgTm9uZVxuICAgICAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICAgICAgIyBjb3VsZG5cJ3QgbG9hZCBhbnkgdHlwZWxpYiAtIG1vZCByZW1haW5zIE5vbmVcbiAgICAgICAgICAgICAgICBwYXNzXG4gICAgICAgIGlmIG1vZHVsZSBpcyBub3QgTm9uZSBhbmQgYlZhbGlkYXRlRmlsZTpcbiAgICAgICAgICAgIGFzc2VydCBub3QgaXNfcmVhZG9ubHksICJDYW5cJ3QgdmFsaWRhdGUgaW4gYSByZWFkLW9ubHkgZ2VuY2FjaGUiXG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgdHlwTGliUGF0aCA9IHB5dGhvbmNvbS5RdWVyeVBhdGhPZlJlZ1R5cGVMaWIoXG4gICAgICAgICAgICAgICAgICAgIHR5cGVsaWJDTFNJRCwgbWFqb3IsIG1pbm9yLCBsY2lkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICMgd2luZG93cyBzZWVtcyB0byBhZGQgYW4gZXh0cmEgXFwwICh2aWEgdGhlIHVuZGVybHlpbmcgQlNUUilcbiAgICAgICAgICAgICAgICAjIFRoZSBtYWlud2luIHRvb2xraXQgZG9lcyBub3QgYWRkIHRoaXMgZXJyb25lb3VzIFxcMFxuICAgICAgICAgICAgICAgIGlmIHR5cExpYlBhdGhbLTFdID09ICJcXDAiOlxuICAgICAgICAgICAgICAgICAgICB0eXBMaWJQYXRoID0gdHlwTGliUGF0aFs6LTFdXG4gICAgICAgICAgICAgICAgc3VmID0gZ2V0YXR0cihvcy5wYXRoLCAic3VwcG9ydHNfdW5pY29kZV9maWxlbmFtZXMiLCAwKVxuICAgICAgICAgICAgICAgIGlmIG5vdCBzdWY6XG4gICAgICAgICAgICAgICAgICAgICMgY2FuXCd0IHBhc3MgdW5pY29kZSBmaWxlbmFtZXMgZGlyZWN0bHkgLSBjb252ZXJ0XG4gICAgICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cExpYlBhdGggPSB0eXBMaWJQYXRoLmVuY29kZShzeXMuZ2V0ZmlsZXN5c3RlbWVuY29kaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjogICMgbm8gc3lzLmdldGZpbGVzeXN0ZW1lbmNvZGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwTGliUGF0aCA9IHN0cih0eXBMaWJQYXRoKVxuICAgICAgICAgICAgICAgIHRsYkF0dHJpYnV0ZXMgPSBweXRob25jb20uTG9hZFJlZ1R5cGVMaWIoXG4gICAgICAgICAgICAgICAgICAgIHR5cGVsaWJDTFNJRCwgbWFqb3IsIG1pbm9yLCBsY2lkXG4gICAgICAgICAgICAgICAgKS5HZXRMaWJBdHRyKClcbiAgICAgICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yOlxuICAgICAgICAgICAgICAgICMgV2UgaGF2ZSBhIG1vZHVsZSwgYnV0IG5vIHR5cGUgbGliIC0gd2Ugc2hvdWxkIHN0aWxsXG4gICAgICAgICAgICAgICAgIyBydW4gd2l0aCB3aGF0IHdlIGhhdmUgdGhvdWdoIC0gdGhlIHR5cGVsaWIgbWF5IG5vdCBiZVxuICAgICAgICAgICAgICAgICMgZGVwbG95ZWQgaGVyZS5cbiAgICAgICAgICAgICAgICBiVmFsaWRhdGVGaWxlID0gMFxuICAgICAgICBpZiBtb2R1bGUgaXMgbm90IE5vbmUgYW5kIGJWYWxpZGF0ZUZpbGU6XG4gICAgICAgICAgICBhc3NlcnQgbm90IGlzX3JlYWRvbmx5LCAiQ2FuXCd0IHZhbGlkYXRlIGluIGEgcmVhZC1vbmx5IGdlbmNhY2hlIlxuICAgICAgICAgICAgZmlsZVBhdGhQcmVmaXggPSAiJXNcXFxcJXMiICUgKFxuICAgICAgICAgICAgICAgIEdldEdlbmVyYXRlUGF0aCgpLFxuICAgICAgICAgICAgICAgIEdldEdlbmVyYXRlZEZpbGVOYW1lKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yKSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGZpbGVQYXRoID0gZmlsZVBhdGhQcmVmaXggKyAiLnB5IlxuICAgICAgICAgICAgZmlsZVBhdGhQeWMgPSBmaWxlUGF0aFByZWZpeCArICIucHkiXG4gICAgICAgICAgICBpZiBfX2RlYnVnX186XG4gICAgICAgICAgICAgICAgZmlsZVBhdGhQeWMgPSBmaWxlUGF0aFB5YyArICJjIlxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBmaWxlUGF0aFB5YyA9IGZpbGVQYXRoUHljICsgIm8iXG4gICAgICAgICAgICAjIFZlcmlmeSB0aGF0IHR5cGUgbGlicmFyeSBpcyB1cCB0byBkYXRlLlxuICAgICAgICAgICAgIyBJZiB3ZSBoYXZlIGEgZGlmZmVyaW5nIE1pbm9yVmVyc2lvbiBvciBnZW5weSBoYXMgYnVtcGVkIHZlcnNpb25zLCB1cGRhdGUgdGhlIGZpbGVcbiAgICAgICAgICAgIGZyb20gLiBpbXBvcnQgZ2VucHlcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIG1vZHVsZS5NaW5vclZlcnNpb24gIT0gdGxiQXR0cmlidXRlc1s0XVxuICAgICAgICAgICAgICAgIG9yIGdlbnB5Lm1ha2VweV92ZXJzaW9uICE9IG1vZHVsZS5tYWtlcHlfdmVyc2lvblxuICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICAjIHByaW50ICJWZXJzaW9uIHNrZXc6ICVkLCAlZCIgJSAobW9kdWxlLk1pbm9yVmVyc2lvbiwgdGxiQXR0cmlidXRlc1s0XSlcbiAgICAgICAgICAgICAgICAjIHRyeSB0byBlcmFzZSB0aGUgYmFkIGZpbGUgZnJvbSB0aGUgY2FjaGVcbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIG9zLnVubGluayhmaWxlUGF0aClcbiAgICAgICAgICAgICAgICBleGNlcHQgb3MuZXJyb3I6XG4gICAgICAgICAgICAgICAgICAgIHBhc3NcbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIG9zLnVubGluayhmaWxlUGF0aFB5YylcbiAgICAgICAgICAgICAgICBleGNlcHQgb3MuZXJyb3I6XG4gICAgICAgICAgICAgICAgICAgIHBhc3NcbiAgICAgICAgICAgICAgICBpZiBvcy5wYXRoLmlzZGlyKGZpbGVQYXRoUHJlZml4KTpcbiAgICAgICAgICAgICAgICAgICAgaW1wb3J0IHNodXRpbFxuXG4gICAgICAgICAgICAgICAgICAgIHNodXRpbC5ybXRyZWUoZmlsZVBhdGhQcmVmaXgpXG4gICAgICAgICAgICAgICAgbWlub3IgPSB0bGJBdHRyaWJ1dGVzWzRdXG4gICAgICAgICAgICAgICAgbW9kdWxlID0gTm9uZVxuICAgICAgICAgICAgICAgIGJSZWxvYWROZWVkZWQgPSAxXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIG1pbm9yID0gbW9kdWxlLk1pbm9yVmVyc2lvblxuICAgICAgICAgICAgICAgIGZpbGVQYXRoUHJlZml4ID0gIiVzXFxcXCVzIiAlIChcbiAgICAgICAgICAgICAgICAgICAgR2V0R2VuZXJhdGVQYXRoKCksXG4gICAgICAgICAgICAgICAgICAgIEdldEdlbmVyYXRlZEZpbGVOYW1lKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yKSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgZmlsZVBhdGggPSBmaWxlUGF0aFByZWZpeCArICIucHkiXG4gICAgICAgICAgICAgICAgZmlsZVBhdGhQeWMgPSBmaWxlUGF0aFByZWZpeCArICIucHljIlxuICAgICAgICAgICAgICAgICMgcHJpbnQgIlRyeWluZyBweSBzdGF0OiAiLCBmaWxlUGF0aFxuICAgICAgICAgICAgICAgIGZNb2RUaW1lU2V0ID0gMFxuICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgcHlNb2RUaW1lID0gb3Muc3RhdChmaWxlUGF0aClbOF1cbiAgICAgICAgICAgICAgICAgICAgZk1vZFRpbWVTZXQgPSAxXG4gICAgICAgICAgICAgICAgZXhjZXB0IG9zLmVycm9yIGFzIGU6XG4gICAgICAgICAgICAgICAgICAgICMgSWYgLnB5IGZpbGUgZmFpbHMsIHRyeSAucHljIGZpbGVcbiAgICAgICAgICAgICAgICAgICAgIyBwcmludCAiVHJ5aW5nIHB5YyBzdGF0IiwgZmlsZVBhdGhQeWNcbiAgICAgICAgICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICAgICAgICAgcHlNb2RUaW1lID0gb3Muc3RhdChmaWxlUGF0aFB5YylbOF1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZNb2RUaW1lU2V0ID0gMVxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgb3MuZXJyb3IgYXMgZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NcbiAgICAgICAgICAgICAgICAjIHByaW50ICJUcnlpbmcgc3RhdCB0eXBlbGliIiwgcHlNb2RUaW1lXG4gICAgICAgICAgICAgICAgIyBwcmludCBzdHIodHlwTGliUGF0aClcbiAgICAgICAgICAgICAgICB0eXBMaWJNb2RUaW1lID0gb3Muc3RhdCh0eXBMaWJQYXRoKVs4XVxuICAgICAgICAgICAgICAgIGlmIGZNb2RUaW1lU2V0IGFuZCAodHlwTGliTW9kVGltZSA+IHB5TW9kVGltZSk6XG4gICAgICAgICAgICAgICAgICAgIGJSZWxvYWROZWVkZWQgPSAxXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZSA9IE5vbmVcbiAgICBleGNlcHQgKEltcG9ydEVycm9yLCBvcy5lcnJvcik6XG4gICAgICAgIG1vZHVsZSA9IE5vbmVcbiAgICBpZiBtb2R1bGUgaXMgTm9uZTpcbiAgICAgICAgIyBXZSBuZWVkIHRvIGJ1aWxkIGFuIGl0ZW0uICBJZiB3ZSBhcmUgaW4gYSByZWFkLW9ubHkgY2FjaGUsIHdlXG4gICAgICAgICMgY2FuXCd0L2RvblwndCB3YW50IHRvIGRvIHRoaXMgLSBzbyBiZWZvcmUgZ2l2aW5nIHVwLCBjaGVjayBmb3JcbiAgICAgICAgIyBhIGRpZmZlcmVudCBtaW5vciB2ZXJzaW9uIGluIG91ciBjYWNoZSAtIGFjY29yZGluZyB0byBDT00sIHRoaXMgaXMgT0tcbiAgICAgICAgaWYgaXNfcmVhZG9ubHk6XG4gICAgICAgICAgICBrZXkgPSBzdHIodHlwZWxpYkNMU0lEKSwgbGNpZCwgbWFqb3IsIG1pbm9yXG4gICAgICAgICAgICAjIElmIHdlIGhhdmUgYmVlbiBhc2tlZCBiZWZvcmUsIGdldCBsYXN0IHJlc3VsdC5cbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdmVyc2lvblJlZGlyZWN0TWFwW2tleV1cbiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpcbiAgICAgICAgICAgICAgICBwYXNzXG4gICAgICAgICAgICAjIEZpbmQgb3RoZXIgY2FuZGlkYXRlcy5cbiAgICAgICAgICAgIGl0ZW1zID0gW11cbiAgICAgICAgICAgIGZvciBkZXNjIGluIEdldEdlbmVyYXRlZEluZm9zKCk6XG4gICAgICAgICAgICAgICAgaWYga2V5WzBdID09IGRlc2NbMF0gYW5kIGtleVsxXSA9PSBkZXNjWzFdIGFuZCBrZXlbMl0gPT0gZGVzY1syXTpcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMuYXBwZW5kKGRlc2MpXG4gICAgICAgICAgICBpZiBpdGVtczpcbiAgICAgICAgICAgICAgICAjIEl0ZW1zIGFyZSBhbGwgaWRlbnRpY2FsLCBleGNlcHQgZm9yIGxhc3QgdHVwbGUgZWxlbWVudFxuICAgICAgICAgICAgICAgICMgV2Ugd2FudCB0aGUgbGF0ZXN0IG1pbm9yIHZlcnNpb24gd2UgaGF2ZSAtIHNvIGp1c3Qgc29ydCBhbmQgZ3JhYiBsYXN0XG4gICAgICAgICAgICAgICAgaXRlbXMuc29ydCgpXG4gICAgICAgICAgICAgICAgbmV3X21pbm9yID0gaXRlbXNbLTFdWzNdXG4gICAgICAgICAgICAgICAgcmV0ID0gR2V0TW9kdWxlRm9yVHlwZWxpYih0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBuZXdfbWlub3IpXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIHJldCA9IE5vbmVcbiAgICAgICAgICAgICMgcmVtZW1iZXIgYW5kIHJldHVyblxuICAgICAgICAgICAgdmVyc2lvblJlZGlyZWN0TWFwW2tleV0gPSByZXRcbiAgICAgICAgICAgIHJldHVybiByZXRcbiAgICAgICAgIyBwcmludCAiUmVidWlsZGluZzogIiwgbWFqb3IsIG1pbm9yXG4gICAgICAgIG1vZHVsZSA9IE1ha2VNb2R1bGVGb3JUeXBlbGliKFxuICAgICAgICAgICAgdHlwZWxpYkNMU0lELFxuICAgICAgICAgICAgbGNpZCxcbiAgICAgICAgICAgIG1ham9yLFxuICAgICAgICAgICAgbWlub3IsXG4gICAgICAgICAgICBwcm9ncmVzc0luc3RhbmNlLFxuICAgICAgICAgICAgYkZvckRlbWFuZD1iRm9yRGVtYW5kLFxuICAgICAgICAgICAgYkJ1aWxkSGlkZGVuPWJCdWlsZEhpZGRlbixcbiAgICAgICAgKVxuICAgICAgICAjIElmIHdlIHJlcGxhY2VkIHNvbWV0aGluZywgcmVsb2FkIGl0XG4gICAgICAgIGlmIGJSZWxvYWROZWVkZWQ6XG4gICAgICAgICAgICBtb2R1bGUgPSByZWxvYWQobW9kdWxlKVxuICAgICAgICAgICAgQWRkTW9kdWxlVG9DYWNoZSh0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vcilcbiAgICByZXR1cm4gbW9kdWxlXG5cblxuZGVmIEVuc3VyZURpc3BhdGNoKFxuICAgIHByb2dfaWQsIGJGb3JEZW1hbmQ9MVxuKTogICMgTmV3IGZuLCBzbyB3ZSBkZWZhdWx0IHRoZSBuZXcgZGVtYW5kIGZlYXR1cmUgdG8gb24hXG4gICAgIiIiR2l2ZW4gYSBDT00gcHJvZ19pZCwgcmV0dXJuIGFuIG9iamVjdCB0aGF0IGlzIHVzaW5nIG1ha2VweSBzdXBwb3J0LCBidWlsZGluZyBpZiBuZWNlc3NhcnkiIiJcbiAgICBkaXNwID0gd2luMzJjb20uY2xpZW50LkRpc3BhdGNoKHByb2dfaWQpXG4gICAgaWYgbm90IGRpc3AuX19kaWN0X18uZ2V0KCJDTFNJRCIpOiAgIyBFZWVrIC0gbm8gbWFrZXB5IHN1cHBvcnQgLSB0cnkgYW5kIGJ1aWxkIGl0LlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICB0aSA9IGRpc3AuX29sZW9ial8uR2V0VHlwZUluZm8oKVxuICAgICAgICAgICAgZGlzcF9jbHNpZCA9IHRpLkdldFR5cGVBdHRyKClbMF1cbiAgICAgICAgICAgIHRsYiwgaW5kZXggPSB0aS5HZXRDb250YWluaW5nVHlwZUxpYigpXG4gICAgICAgICAgICB0bGEgPSB0bGIuR2V0TGliQXR0cigpXG4gICAgICAgICAgICBtb2QgPSBFbnN1cmVNb2R1bGUodGxhWzBdLCB0bGFbMV0sIHRsYVszXSwgdGxhWzRdLCBiRm9yRGVtYW5kPWJGb3JEZW1hbmQpXG4gICAgICAgICAgICBHZXRNb2R1bGVGb3JDTFNJRChkaXNwX2Nsc2lkKVxuICAgICAgICAgICAgIyBHZXQgdGhlIGNsYXNzIGZyb20gdGhlIG1vZHVsZS5cbiAgICAgICAgICAgIGZyb20gLiBpbXBvcnQgQ0xTSURUb0NsYXNzXG5cbiAgICAgICAgICAgIGRpc3BfY2xhc3MgPSBDTFNJRFRvQ2xhc3MuR2V0Q2xhc3Moc3RyKGRpc3BfY2xzaWQpKVxuICAgICAgICAgICAgZGlzcCA9IGRpc3BfY2xhc3MoZGlzcC5fb2xlb2JqXylcbiAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgICAgIlRoaXMgQ09NIG9iamVjdCBjYW4gbm90IGF1dG9tYXRlIHRoZSBtYWtlcHkgcHJvY2VzcyAtIHBsZWFzZSBydW4gbWFrZXB5IG1hbnVhbGx5IGZvciB0aGlzIG9iamVjdCJcbiAgICAgICAgICAgIClcbiAgICByZXR1cm4gZGlzcFxuXG5cbmRlZiBBZGRNb2R1bGVUb0NhY2hlKFxuICAgIHR5cGVsaWJjbHNpZCwgbGNpZCwgbWFqb3IsIG1pbm9yLCB2ZXJib3NlPTEsIGJGbHVzaE5vdz1ub3QgaXNfcmVhZG9ubHlcbik6XG4gICAgIiIiQWRkIGEgbmV3bHkgZ2VuZXJhdGVkIGZpbGUgdG8gdGhlIGNhY2hlIGRpY3Rpb25hcnkuIiIiXG4gICAgZm5hbWUgPSBHZXRHZW5lcmF0ZWRGaWxlTmFtZSh0eXBlbGliY2xzaWQsIGxjaWQsIG1ham9yLCBtaW5vcilcbiAgICBtb2QgPSBfR2V0TW9kdWxlKGZuYW1lKVxuICAgICMgaWYgbW9kLl9pbl9nZW5jYWNoZV8gaXMgYWxyZWFkeSB0cnVlLCB0aGVuIHdlIGFyZSByZWxvYWRpbmcgdGhpc1xuICAgICMgbW9kdWxlIC0gdGhpcyBkb2VzblwndCBtZWFuIGFueXRoaW5nIHNwZWNpYWwgdGhvdWdoIVxuICAgIG1vZC5faW5fZ2VuY2FjaGVfID0gMVxuICAgIGluZm8gPSBzdHIodHlwZWxpYmNsc2lkKSwgbGNpZCwgbWFqb3IsIG1pbm9yXG4gICAgZGljdF9tb2RpZmllZCA9IEZhbHNlXG5cbiAgICBkZWYgU2V0VHlwZWxpYkZvckFsbENsc2lkcyhkaWN0KTpcbiAgICAgICAgbm9ubG9jYWwgZGljdF9tb2RpZmllZFxuICAgICAgICBmb3IgY2xzaWQsIGNscyBpbiBkaWN0Lml0ZW1zKCk6XG4gICAgICAgICAgICBpZiBjbHNpZFRvVHlwZWxpYi5nZXQoY2xzaWQpICE9IGluZm86XG4gICAgICAgICAgICAgICAgY2xzaWRUb1R5cGVsaWJbY2xzaWRdID0gaW5mb1xuICAgICAgICAgICAgICAgIGRpY3RfbW9kaWZpZWQgPSBUcnVlXG5cbiAgICBTZXRUeXBlbGliRm9yQWxsQ2xzaWRzKG1vZC5DTFNJRFRvQ2xhc3NNYXApXG4gICAgU2V0VHlwZWxpYkZvckFsbENsc2lkcyhtb2QuQ0xTSURUb1BhY2thZ2VNYXApXG4gICAgU2V0VHlwZWxpYkZvckFsbENsc2lkcyhtb2QuVlRhYmxlc1RvQ2xhc3NNYXApXG4gICAgU2V0VHlwZWxpYkZvckFsbENsc2lkcyhtb2QuVlRhYmxlc1RvUGFja2FnZU1hcClcblxuICAgICMgSWYgdGhpcyBsaWIgd2FzIHByZXZpb3VzbHkgcmVkaXJlY3RlZCwgZHJvcCBpdFxuICAgIGlmIGluZm8gaW4gdmVyc2lvblJlZGlyZWN0TWFwOlxuICAgICAgICBkZWwgdmVyc2lvblJlZGlyZWN0TWFwW2luZm9dXG4gICAgaWYgYkZsdXNoTm93IGFuZCBkaWN0X21vZGlmaWVkOlxuICAgICAgICBfU2F2ZURpY3RzKClcblxuXG5kZWYgR2V0R2VuZXJhdGVkSW5mb3MoKTpcbiAgICB6aXBfcG9zID0gd2luMzJjb20uX19nZW5fcGF0aF9fLmZpbmQoIi56aXBcXFxcIilcbiAgICBpZiB6aXBfcG9zID49IDA6XG4gICAgICAgIGltcG9ydCB6aXBmaWxlXG5cbiAgICAgICAgemlwX2ZpbGUgPSB3aW4zMmNvbS5fX2dlbl9wYXRoX19bOiB6aXBfcG9zICsgNF1cbiAgICAgICAgemlwX3BhdGggPSB3aW4zMmNvbS5fX2dlbl9wYXRoX19bemlwX3BvcyArIDUgOl0ucmVwbGFjZSgiXFxcXCIsICIvIilcbiAgICAgICAgemYgPSB6aXBmaWxlLlppcEZpbGUoemlwX2ZpbGUpXG4gICAgICAgIGluZm9zID0ge31cbiAgICAgICAgZm9yIG4gaW4gemYubmFtZWxpc3QoKTpcbiAgICAgICAgICAgIGlmIG5vdCBuLnN0YXJ0c3dpdGgoemlwX3BhdGgpOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICBiYXNlID0gbltsZW4oemlwX3BhdGgpICsgMSA6XS5zcGxpdCgiLyIpWzBdXG4gICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgaWlkLCBsY2lkLCBtYWpvciwgbWlub3IgPSBiYXNlLnNwbGl0KCJ4IilcbiAgICAgICAgICAgICAgICBsY2lkID0gaW50KGxjaWQpXG4gICAgICAgICAgICAgICAgbWFqb3IgPSBpbnQobWFqb3IpXG4gICAgICAgICAgICAgICAgbWlub3IgPSBpbnQobWlub3IpXG4gICAgICAgICAgICAgICAgaWlkID0gcHl3aW50eXBlcy5JSUQoInsiICsgaWlkICsgIn0iKVxuICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIGV4Y2VwdCBweXdpbnR5cGVzLmNvbV9lcnJvcjpcbiAgICAgICAgICAgICAgICAjIGludmFsaWQgSUlEXG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIGluZm9zWyhpaWQsIGxjaWQsIG1ham9yLCBtaW5vcildID0gMVxuICAgICAgICB6Zi5jbG9zZSgpXG4gICAgICAgIHJldHVybiBsaXN0KGluZm9zLmtleXMoKSlcbiAgICBlbHNlOlxuICAgICAgICAjIG9uIHRoZSBmaWxlIHN5c3RlbVxuICAgICAgICBmaWxlcyA9IGdsb2IuZ2xvYih3aW4zMmNvbS5fX2dlbl9wYXRoX18gKyAiXFxcXCoiKVxuICAgICAgICByZXQgPSBbXVxuICAgICAgICBmb3IgZmlsZSBpbiBmaWxlczpcbiAgICAgICAgICAgIGlmIG5vdCBvcy5wYXRoLmlzZGlyKGZpbGUpIGFuZCBub3Qgb3MucGF0aC5zcGxpdGV4dChmaWxlKVsxXSA9PSAiLnB5IjpcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgbmFtZSA9IG9zLnBhdGguc3BsaXRleHQob3MucGF0aC5zcGxpdChmaWxlKVsxXSlbMF1cbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBpaWQsIGxjaWQsIG1ham9yLCBtaW5vciA9IG5hbWUuc3BsaXQoIngiKVxuICAgICAgICAgICAgICAgIGlpZCA9IHB5d2ludHlwZXMuSUlEKCJ7IiArIGlpZCArICJ9IilcbiAgICAgICAgICAgICAgICBsY2lkID0gaW50KGxjaWQpXG4gICAgICAgICAgICAgICAgbWFqb3IgPSBpbnQobWFqb3IpXG4gICAgICAgICAgICAgICAgbWlub3IgPSBpbnQobWlub3IpXG4gICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjpcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgZXhjZXB0IHB5d2ludHlwZXMuY29tX2Vycm9yOlxuICAgICAgICAgICAgICAgICMgaW52YWxpZCBJSURcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgcmV0LmFwcGVuZCgoaWlkLCBsY2lkLCBtYWpvciwgbWlub3IpKVxuICAgICAgICByZXR1cm4gcmV0XG5cblxuZGVmIF9HZXRNb2R1bGUoZm5hbWUpOlxuICAgICIiIkdpdmVuIHRoZSBuYW1lIG9mIGEgbW9kdWxlIGluIHRoZSBnZW5fcHkgZGlyZWN0b3J5LCBpbXBvcnQgYW5kIHJldHVybiBpdC4iIiJcbiAgICBtb2RfbmFtZSA9ICJ3aW4zMmNvbS5nZW5fcHkuJXMiICUgZm5hbWVcbiAgICBtb2QgPSBfX2ltcG9ydF9fKG1vZF9uYW1lKVxuICAgIHJldHVybiBzeXMubW9kdWxlc1ttb2RfbmFtZV1cblxuXG5kZWYgUmVidWlsZCh2ZXJib3NlPTEpOlxuICAgICIiIlJlYnVpbGQgdGhlIGNhY2hlIGluZGV4ZXMgZnJvbSB0aGUgZmlsZSBzeXN0ZW0uIiIiXG4gICAgY2xzaWRUb1R5cGVsaWIuY2xlYXIoKVxuICAgIGluZm9zID0gR2V0R2VuZXJhdGVkSW5mb3MoKVxuICAgIGlmIHZlcmJvc2UgYW5kIGxlbihpbmZvcyk6ICAjIERvbnQgYm90aGVyIHJlcG9ydGluZyB0aGlzIHdoZW4gZGlyZWN0b3J5IGlzIGVtcHR5IVxuICAgICAgICBwcmludCgiUmVidWlsZGluZyBjYWNoZSBvZiBnZW5lcmF0ZWQgZmlsZXMgZm9yIENPTSBzdXBwb3J0Li4uIilcbiAgICBmb3IgaW5mbyBpbiBpbmZvczpcbiAgICAgICAgaWlkLCBsY2lkLCBtYWpvciwgbWlub3IgPSBpbmZvXG4gICAgICAgIGlmIHZlcmJvc2U6XG4gICAgICAgICAgICBwcmludCgiQ2hlY2tpbmciLCBHZXRHZW5lcmF0ZWRGaWxlTmFtZSgqaW5mbykpXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIEFkZE1vZHVsZVRvQ2FjaGUoaWlkLCBsY2lkLCBtYWpvciwgbWlub3IsIHZlcmJvc2UsIDApXG4gICAgICAgIGV4Y2VwdDpcbiAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICJDb3VsZCBub3QgYWRkIG1vZHVsZSAlcyAtICVzOiAlcyJcbiAgICAgICAgICAgICAgICAlIChpbmZvLCBzeXMuZXhjX2luZm8oKVswXSwgc3lzLmV4Y19pbmZvKClbMV0pXG4gICAgICAgICAgICApXG4gICAgaWYgdmVyYm9zZSBhbmQgbGVuKGluZm9zKTogICMgRG9udCBib3RoZXIgcmVwb3J0aW5nIHRoaXMgd2hlbiBkaXJlY3RvcnkgaXMgZW1wdHkhXG4gICAgICAgIHByaW50KCJEb25lLiIpXG4gICAgX1NhdmVEaWN0cygpXG5cblxuZGVmIF9EdW1wKCk6XG4gICAgcHJpbnQoIkNhY2hlIGlzIGluIGRpcmVjdG9yeSIsIHdpbjMyY29tLl9fZ2VuX3BhdGhfXylcbiAgICAjIEJ1aWxkIGEgdW5pcXVlIGRpclxuICAgIGQgPSB7fVxuICAgIGZvciBjbHNpZCwgKHR5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yKSBpbiBjbHNpZFRvVHlwZWxpYi5pdGVtcygpOlxuICAgICAgICBkW3R5cGVsaWJDTFNJRCwgbGNpZCwgbWFqb3IsIG1pbm9yXSA9IE5vbmVcbiAgICBmb3IgdHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3IgaW4gZC5rZXlzKCk6XG4gICAgICAgIG1vZCA9IEdldE1vZHVsZUZvclR5cGVsaWIodHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3IpXG4gICAgICAgIHByaW50KCIlcyAtICVzIiAlIChtb2QuX19kb2NfXywgdHlwZWxpYkNMU0lEKSlcblxuXG4jIEJvb3QgdXBcbl9faW5pdF9fKClcblxuXG5kZWYgdXNhZ2UoKTpcbiAgICB1c2FnZVN0cmluZyA9ICIiIlxcXG5cdCAgVXNhZ2U6IGdlbmNhY2hlIFstcV0gWy1kXSBbLXJdXG5cblx0XHRcdCAtcSAgICAgICAgIC0gUXVpZXRcblx0XHRcdCAtZCAgICAgICAgIC0gRHVtcCB0aGUgY2FjaGUgKHR5cGVsaWJyYXJ5IGRlc2NyaXB0aW9uIGFuZCBmaWxlbmFtZSkuXG5cdFx0XHQgLXIgICAgICAgICAtIFJlYnVpbGQgdGhlIGNhY2hlIGRpY3Rpb25hcnkgZnJvbSB0aGUgZXhpc3RpbmcgLnB5IGZpbGVzXG5cdCIiIlxuICAgIHByaW50KHVzYWdlU3RyaW5nKVxuICAgIHN5cy5leGl0KDEpXG5cblxuaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjpcbiAgICBpbXBvcnQgZ2V0b3B0XG5cbiAgICB0cnk6XG4gICAgICAgIG9wdHMsIGFyZ3MgPSBnZXRvcHQuZ2V0b3B0KHN5cy5hcmd2WzE6XSwgInFyZCIpXG4gICAgZXhjZXB0IGdldG9wdC5lcnJvciBhcyBtZXNzYWdlOlxuICAgICAgICBwcmludChtZXNzYWdlKVxuICAgICAgICB1c2FnZSgpXG5cbiAgICAjIHdlIG9ubHkgaGF2ZSBvcHRpb25zIC0gY29tcGxhaW4gYWJvdXQgcmVhbCBhcmdzLCBvciBub25lIGF0IGFsbCFcbiAgICBpZiBsZW4oc3lzLmFyZ3YpID09IDEgb3IgYXJnczpcbiAgICAgICAgcHJpbnQodXNhZ2UoKSlcblxuICAgIHZlcmJvc2UgPSAxXG4gICAgZm9yIG9wdCwgdmFsIGluIG9wdHM6XG4gICAgICAgIGlmIG9wdCA9PSAiLWQiOiAgIyBEdW1wXG4gICAgICAgICAgICBfRHVtcCgpXG4gICAgICAgIGlmIG9wdCA9PSAiLXIiOlxuICAgICAgICAgICAgUmVidWlsZCh2ZXJib3NlKVxuICAgICAgICBpZiBvcHQgPT0gIi1xIjpcbiAgICAgICAgICAgIHZlcmJvc2UgPSAwXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgnd2luMzJjb20vY2xpZW50L0NMU0lEVG9DbGFzcy5weScsIGInIiIiTWFuYWdlcyBhIGRpY3Rpb25hcnkgb2YgQ0xTSUQgc3RyaW5ncyB0byBQeXRob24gY2xhc3Nlcy5cblxuUHJpbWFyeSB1c2Ugb2YgdGhpcyBtb2R1bGUgaXMgdG8gYWxsb3cgbW9kdWxlcyBnZW5lcmF0ZWQgYnlcbm1ha2VweS5weSB0byBzaGFyZSBjbGFzc2VzLiAgQG1ha2VweUAgYXV0b21hdGljYWxseSBnZW5lcmF0ZXMgY29kZVxud2hpY2ggaW50ZXJhY3RzIHdpdGggdGhpcyBtb2R1bGUuICBZb3Ugc2hvdWxkIG5ldmVyIG5lZWQgdG8gcmVmZXJlbmNlXG50aGlzIG1vZHVsZSBkaXJlY3RseS5cblxuVGhpcyBtb2R1bGUgb25seSBwcm92aWRlcyBzdXBwb3J0IGZvciBtb2R1bGVzIHdoaWNoIGhhdmUgYmVlbiBwcmV2aW91c2x5XG5iZWVuIGltcG9ydGVkLiAgVGhlIGdlbmNhY2hlIG1vZHVsZSBwcm92aWRlcyBzb21lIHN1cHBvcnQgZm9yIGxvYWRpbmcgbW9kdWxlc1xub24gZGVtYW5kIC0gb25jZSBkb25lLCB0aGlzIG1vZHVsZSBzdXBwb3J0cyBpdC4uLlxuXG5BcyBhbiBleGFtcGxlLCB0aGUgTVNBQ0NFU1MuVExCIHR5cGUgbGlicmFyeSBtYWtlcyByZWZlcmVuY2UgdG8gdGhlXG5DTFNJRCBvZiB0aGUgRGF0YWJhc2Ugb2JqZWN0LCBhcyBkZWZpbmVkIGluIERBTzMwMzIuRExMLiAgVGhpc1xuYWxsb3dzIGNvZGUgdXNpbmcgdGhlIE1TQWNjZXNzIHdyYXBwZXIgdG8gbmF0aXZlbHkgdXNlIERhdGFiYXNlcy5cblxuVGhpcyBvYnZpb3VzbHkgYXBwbGllcyB0byBhbGwgY29vcGVyYXRpbmcgb2JqZWN0cywgbm90IGp1c3QgREFPIGFuZFxuQWNjZXNzLlxuIiIiXG5tYXBDTFNJRFRvQ2xhc3MgPSB7fVxuXG5cbmRlZiBSZWdpc3RlckNMU0lEKGNsc2lkLCBweXRob25DbGFzcyk6XG4gICAgIiIiUmVnaXN0ZXIgYSBjbGFzcyB0aGF0IHdyYXBzIGEgQ0xTSURcblxuICAgIFRoaXMgZnVuY3Rpb24gYWxsb3dzIGEgQ0xTSUQgdG8gYmUgZ2xvYmFsbHkgYXNzb2NpYXRlZCB3aXRoIGEgY2xhc3MuXG4gICAgQ2VydGFpbiBtb2R1bGUgd2lsbCBhdXRvbWF0aWNhbGx5IGNvbnZlcnQgYW4gSURpc3BhdGNoIG9iamVjdCB0byBhblxuICAgIGluc3RhbmNlIG9mIHRoZSBhc3NvY2lhdGVkIGNsYXNzLlxuICAgICIiIlxuXG4gICAgbWFwQ0xTSURUb0NsYXNzW3N0cihjbHNpZCldID0gcHl0aG9uQ2xhc3NcblxuXG5kZWYgUmVnaXN0ZXJDTFNJRHNGcm9tRGljdChkaWN0KTpcbiAgICAiIiJSZWdpc3RlciBhIGRpY3Rpb25hcnkgb2YgQ0xTSURcJ3MgYW5kIGNsYXNzZXMuXG5cbiAgICBUaGlzIG1vZHVsZSBwZXJmb3JtcyB0aGUgc2FtZSBmdW5jdGlvbiBhcyBAUmVnaXN0ZXJDTFNJREAsIGJ1dCBmb3JcbiAgICBhbiBlbnRpcmUgZGljdGlvbmFyeSBvZiBhc3NvY2lhdGlvbnMuXG5cbiAgICBUeXBpY2FsbHkgY2FsbGVkIGJ5IG1ha2VweSBnZW5lcmF0ZWQgbW9kdWxlcyBhdCBpbXBvcnQgdGltZS5cbiAgICAiIiJcbiAgICBtYXBDTFNJRFRvQ2xhc3MudXBkYXRlKGRpY3QpXG5cblxuZGVmIEdldENsYXNzKGNsc2lkKTpcbiAgICAiIiJHaXZlbiBhIENMU0lELCByZXR1cm4gdGhlIGdsb2JhbGx5IGFzc29jaWF0ZWQgY2xhc3MuXG5cbiAgICBjbHNpZCAtLSBhIHN0cmluZyBDTFNJRCByZXByZXNlbnRhdGlvbiB0byBjaGVjay5cbiAgICAiIiJcbiAgICByZXR1cm4gbWFwQ0xTSURUb0NsYXNzW2Nsc2lkXVxuXG5cbmRlZiBIYXNDbGFzcyhjbHNpZCk6XG4gICAgIiIiRGV0ZXJtaW5lcyBpZiB0aGUgQ0xTSUQgaGFzIGFuIGFzc29jaWF0ZWQgY2xhc3MuXG5cbiAgICBjbHNpZCAtLSB0aGUgc3RyaW5nIENMU0lEIHRvIGNoZWNrXG4gICAgIiIiXG4gICAgcmV0dXJuIGNsc2lkIGluIG1hcENMU0lEVG9DbGFzc1xuJykKICAgIF9fc3RpY2t5dGFwZV93cml0ZV9tb2R1bGUoJ3dpbjMyY29tL2NsaWVudC9tYWtlcHkucHknLCBiJyMgT3JpZ2luYWxseSB3cml0dGVuIGJ5IEN1cnQgSGFnZW5sb2NoZXIsIGFuZCB2YXJpb3VzIGJpdHNcbiMgYW5kIHBpZWNlcyBieSBNYXJrIEhhbW1vbmQgKGFuZCBub3cgR3JlZyBTdGVpbiBoYXMgaGFkXG4jIGEgZ28gdG9vIDotKVxuXG4jIE5vdGUgdGhhdCB0aGUgbWFpbiB3b3JrZXIgY29kZSBoYXMgYmVlbiBtb3ZlZCB0byBnZW5weS5weVxuIyBBcyB0aGlzIGlzIG5vcm1hbGx5IHJ1biBmcm9tIHRoZSBjb21tYW5kIGxpbmUsIGl0IHJlcGFyc2VzIHRoZSBjb2RlIGVhY2ggdGltZS5cbiMgTm93IHRoaXMgaXMgbm90aGluZyBtb3JlIHRoYW4gdGhlIGNvbW1hbmQgbGluZSBoYW5kbGVyIGFuZCBwdWJsaWMgaW50ZXJmYWNlLlxuXG4jIFhYWCAtIFRPIERPXG4jIFhYWCAtIEdyZWcgYW5kIE1hcmsgaGF2ZSBzb21lIGlkZWFzIGZvciBhIHJldmFtcCAtIGp1c3Qgbm9cbiMgICAgICAgdGltZSAtIGlmIHlvdSB3YW50IHRvIGhlbHAsIGNvbnRhY3QgdXMgZm9yIGRldGFpbHMuXG4jICAgICAgIE1haW4gaWRlYSBpcyB0byBkcm9wIHRoZSBjbGFzc2VzIGV4cG9ydGVkIGFuZCBtb3ZlIHRvIGEgbW9yZVxuIyAgICAgICB0cmFkaXRpb25hbCBkYXRhIGRyaXZlbiBtb2RlbC5cblxuIiIiR2VuZXJhdGUgYSAucHkgZmlsZSBmcm9tIGFuIE9MRSBUeXBlTGlicmFyeSBmaWxlLlxuXG5cbiBUaGlzIG1vZHVsZSBpcyBjb25jZXJuZWQgb25seSB3aXRoIHRoZSBhY3R1YWwgd3JpdGluZyBvZlxuIGEgLnB5IGZpbGUuICBJdCBkcmF3cyBvbiB0aGUgQGJ1aWxkQCBtb2R1bGUsIHdoaWNoIGJ1aWxkc1xuIHRoZSBrbm93bGVkZ2Ugb2YgYSBDT00gaW50ZXJmYWNlLlxuXG4iIiJcbnVzYWdlSGVscCA9ICIiIiBcXFxuXG5Vc2FnZTpcblxuICBtYWtlcHkucHkgWy1pXSBbLXZ8cV0gWy1oXSBbLXVdIFstbyBvdXRwdXRfZmlsZV0gWy1kXSBbdHlwZWxpYiwgLi4uXVxuXG4gIC1pICAgIC0tIFNob3cgaW5mb3JtYXRpb24gZm9yIHRoZSBzcGVjaWZpZWQgdHlwZWxpYi5cblxuICAtdiAgICAtLSBWZXJib3NlIG91dHB1dC5cblxuICAtcSAgICAtLSBRdWlldCBvdXRwdXQuXG5cbiAgLWggICAgLS0gRG8gbm90IGdlbmVyYXRlIGhpZGRlbiBtZXRob2RzLlxuXG4gIC11ICAgIC0tIFB5dGhvbiAxLjUgYW5kIGVhcmxpZXI6IERvIE5PVCBjb252ZXJ0IGFsbCBVbmljb2RlIG9iamVjdHMgdG9cbiAgICAgICAgICAgc3RyaW5ncy5cblxuICAgICAgICAgICBQeXRob24gMS42IGFuZCBsYXRlcjogQ29udmVydCBhbGwgVW5pY29kZSBvYmplY3RzIHRvIHN0cmluZ3MuXG5cbiAgLW8gICAgLS0gQ3JlYXRlIG91dHB1dCBpbiBhIHNwZWNpZmllZCBvdXRwdXQgZmlsZS4gIElmIHRoZSBwYXRoIGxlYWRpbmdcbiAgICAgICAgICAgdG8gdGhlIGZpbGUgZG9lcyBub3QgZXhpc3QsIGFueSBtaXNzaW5nIGRpcmVjdG9yaWVzIHdpbGwgYmVcbiAgICAgICAgICAgY3JlYXRlZC5cbiAgICAgICAgICAgTk9URTogLW8gY2Fubm90IGJlIHVzZWQgd2l0aCAtZC4gIFRoaXMgd2lsbCBnZW5lcmF0ZSBhbiBlcnJvci5cblxuICAtZCAgICAtLSBHZW5lcmF0ZSB0aGUgYmFzZSBjb2RlIG5vdyBhbmQgdGhlIGNsYXNzIGNvZGUgb24gZGVtYW5kLlxuICAgICAgICAgICBSZWNvbW1lbmRlZCBmb3IgbGFyZ2UgdHlwZSBsaWJyYXJpZXMuXG5cbiAgdHlwZWxpYiAtLSBBIFRMQiwgRExMLCBPQ1ggb3IgYW55dGhpbmcgY29udGFpbmluZyBDT00gdHlwZSBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgICBJZiBhIHR5cGVsaWIgaXMgbm90IHNwZWNpZmllZCwgYSB3aW5kb3cgY29udGFpbmluZyBhIHRleHRib3hcbiAgICAgICAgICAgICB3aWxsIG9wZW4gZnJvbSB3aGljaCB5b3UgY2FuIHNlbGVjdCBhIHJlZ2lzdGVyZWQgdHlwZVxuICAgICAgICAgICAgIGxpYnJhcnkuXG5cbkV4YW1wbGVzOlxuXG4gIG1ha2VweS5weSAtZFxuXG4gICAgUHJlc2VudHMgYSBsaXN0IG9mIHJlZ2lzdGVyZWQgdHlwZSBsaWJyYXJpZXMgZnJvbSB3aGljaCB5b3UgY2FuIG1ha2VcbiAgICBhIHNlbGVjdGlvbi5cblxuICBtYWtlcHkucHkgLWQgIk1pY3Jvc29mdCBFeGNlbCA4LjAgT2JqZWN0IExpYnJhcnkiXG5cbiAgICBHZW5lcmF0ZSBzdXBwb3J0IGZvciB0aGUgdHlwZSBsaWJyYXJ5IHdpdGggdGhlIHNwZWNpZmllZCBkZXNjcmlwdGlvblxuICAgIChpbiB0aGlzIGNhc2UsIHRoZSBNUyBFeGNlbCBvYmplY3QgbW9kZWwpLlxuXG4iIiJcblxuaW1wb3J0IHN5cywgb3MsIGltcG9ydGxpYiwgcHl0aG9uY29tXG5mcm9tIHdpbjMyY29tLmNsaWVudCBpbXBvcnQgZ2VucHksIHNlbGVjdHRsYiwgZ2VuY2FjaGVcbmZyb20gd2luMzJjb20uY2xpZW50IGltcG9ydCBEaXNwYXRjaFxuXG5iRm9yRGVtYW5kRGVmYXVsdCA9IDAgICMgRGVmYXVsdCB2YWx1ZSBvZiBiRm9yRGVtYW5kIC0gdG9nZ2xlIHRoaXMgdG8gY2hhbmdlIHRoZSB3b3JsZCAtIHNlZSBhbHNvIGdlbmNhY2hlLnB5XG5cbmVycm9yID0gIm1ha2VweS5lcnJvciJcblxuXG5kZWYgdXNhZ2UoKTpcbiAgICBzeXMuc3RkZXJyLndyaXRlKHVzYWdlSGVscClcbiAgICBzeXMuZXhpdCgyKVxuXG5cbmRlZiBTaG93SW5mbyhzcGVjKTpcbiAgICBpZiBub3Qgc3BlYzpcbiAgICAgICAgdGxiU3BlYyA9IHNlbGVjdHRsYi5TZWxlY3RUbGIoZXhjbHVkZUZsYWdzPXNlbGVjdHRsYi5GTEFHX0hJRERFTilcbiAgICAgICAgaWYgdGxiU3BlYyBpcyBOb25lOlxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIHRsYiA9IHB5dGhvbmNvbS5Mb2FkUmVnVHlwZUxpYihcbiAgICAgICAgICAgICAgICB0bGJTcGVjLmNsc2lkLCB0bGJTcGVjLm1ham9yLCB0bGJTcGVjLm1pbm9yLCB0bGJTcGVjLmxjaWRcbiAgICAgICAgICAgIClcbiAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6ICAjIE1heSBiZSBiYWRseSByZWdpc3RlcmVkLlxuICAgICAgICAgICAgc3lzLnN0ZGVyci53cml0ZShcbiAgICAgICAgICAgICAgICAiV2FybmluZyAtIGNvdWxkIG5vdCBsb2FkIHJlZ2lzdGVyZWQgdHlwZWxpYiBcJyVzXCdcXG4iICUgKHRsYlNwZWMuY2xzaWQpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB0bGIgPSBOb25lXG5cbiAgICAgICAgaW5mb3MgPSBbKHRsYiwgdGxiU3BlYyldXG4gICAgZWxzZTpcbiAgICAgICAgaW5mb3MgPSBHZXRUeXBlTGlic0ZvclNwZWMoc3BlYylcbiAgICBmb3IgKHRsYiwgdGxiU3BlYykgaW4gaW5mb3M6XG4gICAgICAgIGRlc2MgPSB0bGJTcGVjLmRlc2NcbiAgICAgICAgaWYgZGVzYyBpcyBOb25lOlxuICAgICAgICAgICAgaWYgdGxiIGlzIE5vbmU6XG4gICAgICAgICAgICAgICAgZGVzYyA9ICI8Q291bGQgbm90IGxvYWQgdHlwZWxpYiAlcz4iICUgKHRsYlNwZWMuZGxsKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBkZXNjID0gdGxiLkdldERvY3VtZW50YXRpb24oLTEpWzBdXG4gICAgICAgIHByaW50KGRlc2MpXG4gICAgICAgIHByaW50KFxuICAgICAgICAgICAgIiAlcywgbGNpZD0lcywgbWFqb3I9JXMsIG1pbm9yPSVzIlxuICAgICAgICAgICAgJSAodGxiU3BlYy5jbHNpZCwgdGxiU3BlYy5sY2lkLCB0bGJTcGVjLm1ham9yLCB0bGJTcGVjLm1pbm9yKVxuICAgICAgICApXG4gICAgICAgIHByaW50KCIgPj4+ICMgVXNlIHRoZXNlIGNvbW1hbmRzIGluIFB5dGhvbiBjb2RlIHRvIGF1dG8gZ2VuZXJhdGUgLnB5IHN1cHBvcnQiKVxuICAgICAgICBwcmludCgiID4+PiBmcm9tIHdpbjMyY29tLmNsaWVudCBpbXBvcnQgZ2VuY2FjaGUiKVxuICAgICAgICBwcmludChcbiAgICAgICAgICAgICIgPj4+IGdlbmNhY2hlLkVuc3VyZU1vZHVsZShcJyVzXCcsICVzLCAlcywgJXMpIlxuICAgICAgICAgICAgJSAodGxiU3BlYy5jbHNpZCwgdGxiU3BlYy5sY2lkLCB0bGJTcGVjLm1ham9yLCB0bGJTcGVjLm1pbm9yKVxuICAgICAgICApXG5cblxuY2xhc3MgU2ltcGxlUHJvZ3Jlc3MoZ2VucHkuR2VuZXJhdG9yUHJvZ3Jlc3MpOlxuICAgICIiIkEgc2ltcGxlIHByb2dyZXNzIGNsYXNzIHByaW50cyBpdHMgb3V0cHV0IHRvIHN0ZGVyciIiIlxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHZlcmJvc2VMZXZlbCk6XG4gICAgICAgIHNlbGYudmVyYm9zZUxldmVsID0gdmVyYm9zZUxldmVsXG5cbiAgICBkZWYgQ2xvc2Uoc2VsZik6XG4gICAgICAgIHBhc3NcblxuICAgIGRlZiBGaW5pc2hlZChzZWxmKTpcbiAgICAgICAgaWYgc2VsZi52ZXJib3NlTGV2ZWwgPiAxOlxuICAgICAgICAgICAgc3lzLnN0ZGVyci53cml0ZSgiR2VuZXJhdGlvbiBjb21wbGV0ZS4uXFxuIilcblxuICAgIGRlZiBTZXREZXNjcmlwdGlvbihzZWxmLCBkZXNjLCBtYXh0aWNrcz1Ob25lKTpcbiAgICAgICAgaWYgc2VsZi52ZXJib3NlTGV2ZWw6XG4gICAgICAgICAgICBzeXMuc3RkZXJyLndyaXRlKGRlc2MgKyAiXFxuIilcblxuICAgIGRlZiBUaWNrKHNlbGYsIGRlc2M9Tm9uZSk6XG4gICAgICAgIHBhc3NcblxuICAgIGRlZiBWZXJib3NlUHJvZ3Jlc3Moc2VsZiwgZGVzYywgdmVyYm9zZUxldmVsPTIpOlxuICAgICAgICBpZiBzZWxmLnZlcmJvc2VMZXZlbCA+PSB2ZXJib3NlTGV2ZWw6XG4gICAgICAgICAgICBzeXMuc3RkZXJyLndyaXRlKGRlc2MgKyAiXFxuIilcblxuICAgIGRlZiBMb2dCZWdpbkdlbmVyYXRlKHNlbGYsIGZpbGVuYW1lKTpcbiAgICAgICAgc2VsZi5WZXJib3NlUHJvZ3Jlc3MoIkdlbmVyYXRpbmcgdG8gJXMiICUgZmlsZW5hbWUsIDEpXG5cbiAgICBkZWYgTG9nV2FybmluZyhzZWxmLCBkZXNjKTpcbiAgICAgICAgc2VsZi5WZXJib3NlUHJvZ3Jlc3MoIldBUk5JTkc6ICIgKyBkZXNjLCAxKVxuXG5cbmNsYXNzIEdVSVByb2dyZXNzKFNpbXBsZVByb2dyZXNzKTpcbiAgICBkZWYgX19pbml0X18oc2VsZiwgdmVyYm9zZUxldmVsKTpcbiAgICAgICAgIyBJbXBvcnQgc29tZSBtb2R1bGVzIHdlIG5lZWQgdG8gd2UgY2FuIHRyYXAgZmFpbHVyZSBub3cuXG4gICAgICAgIGltcG9ydCB3aW4zMnVpLCBweXdpblxuXG4gICAgICAgIFNpbXBsZVByb2dyZXNzLl9faW5pdF9fKHNlbGYsIHZlcmJvc2VMZXZlbClcbiAgICAgICAgc2VsZi5kaWFsb2cgPSBOb25lXG5cbiAgICBkZWYgQ2xvc2Uoc2VsZik6XG4gICAgICAgIGlmIHNlbGYuZGlhbG9nIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgc2VsZi5kaWFsb2cuQ2xvc2UoKVxuICAgICAgICAgICAgc2VsZi5kaWFsb2cgPSBOb25lXG5cbiAgICBkZWYgU3RhcnRpbmcoc2VsZiwgdGxiX2Rlc2MpOlxuICAgICAgICBTaW1wbGVQcm9ncmVzcy5TdGFydGluZyhzZWxmLCB0bGJfZGVzYylcbiAgICAgICAgaWYgc2VsZi5kaWFsb2cgaXMgTm9uZTpcbiAgICAgICAgICAgIGZyb20gcHl3aW4uZGlhbG9ncyBpbXBvcnQgc3RhdHVzXG5cbiAgICAgICAgICAgIHNlbGYuZGlhbG9nID0gc3RhdHVzLlRocmVhZGVkU3RhdHVzUHJvZ3Jlc3NEaWFsb2codGxiX2Rlc2MpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBzZWxmLmRpYWxvZy5TZXRUaXRsZSh0bGJfZGVzYylcblxuICAgIGRlZiBTZXREZXNjcmlwdGlvbihzZWxmLCBkZXNjLCBtYXh0aWNrcz1Ob25lKTpcbiAgICAgICAgc2VsZi5kaWFsb2cuU2V0VGV4dChkZXNjKVxuICAgICAgICBpZiBtYXh0aWNrczpcbiAgICAgICAgICAgIHNlbGYuZGlhbG9nLlNldE1heFRpY2tzKG1heHRpY2tzKVxuXG4gICAgZGVmIFRpY2soc2VsZiwgZGVzYz1Ob25lKTpcbiAgICAgICAgc2VsZi5kaWFsb2cuVGljaygpXG4gICAgICAgIGlmIGRlc2MgaXMgbm90IE5vbmU6XG4gICAgICAgICAgICBzZWxmLmRpYWxvZy5TZXRUZXh0KGRlc2MpXG5cblxuZGVmIEdldFR5cGVMaWJzRm9yU3BlYyhhcmcpOlxuICAgICIiIkdpdmVuIGFuIGFyZ3VtZW50IG9uIHRoZSBjb21tYW5kIGxpbmUgKGVpdGhlciBhIGZpbGUgbmFtZSwgbGlicmFyeVxuICAgIGRlc2NyaXB0aW9uLCBvciBQcm9nSUQgb2YgYW4gb2JqZWN0KSByZXR1cm4gYSBsaXN0IG9mIGFjdHVhbCB0eXBlbGlic1xuICAgIHRvIHVzZS4iIiJcbiAgICB0eXBlbGlicyA9IFtdXG4gICAgdHJ5OlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICB0bGIgPSBweXRob25jb20uTG9hZFR5cGVMaWIoYXJnKVxuICAgICAgICAgICAgc3BlYyA9IHNlbGVjdHRsYi5UeXBlbGliU3BlYyhOb25lLCAwLCAwLCAwKVxuICAgICAgICAgICAgc3BlYy5Gcm9tVHlwZWxpYih0bGIsIGFyZylcbiAgICAgICAgICAgIHR5cGVsaWJzLmFwcGVuZCgodGxiLCBzcGVjKSlcbiAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICAjIFNlZSBpZiBpdCBpcyBhIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICB0bGJzID0gc2VsZWN0dGxiLkZpbmRUbGJzV2l0aERlc2NyaXB0aW9uKGFyZylcbiAgICAgICAgICAgIGlmIGxlbih0bGJzKSA9PSAwOlxuICAgICAgICAgICAgICAgICMgTWF5YmUgaXQgaXMgdGhlIG5hbWUgb2YgYSBDT00gb2JqZWN0P1xuICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgb2IgPSBEaXNwYXRjaChhcmcpXG4gICAgICAgICAgICAgICAgICAgICMgYW5kIGlmIHNvLCBpdCBtdXN0IHN1cHBvcnQgdHlwZWxpYiBpbmZvXG4gICAgICAgICAgICAgICAgICAgIHRsYiwgaW5kZXggPSBvYi5fb2xlb2JqXy5HZXRUeXBlSW5mbygpLkdldENvbnRhaW5pbmdUeXBlTGliKClcbiAgICAgICAgICAgICAgICAgICAgc3BlYyA9IHNlbGVjdHRsYi5UeXBlbGliU3BlYyhOb25lLCAwLCAwLCAwKVxuICAgICAgICAgICAgICAgICAgICBzcGVjLkZyb21UeXBlbGliKHRsYilcbiAgICAgICAgICAgICAgICAgICAgdGxicy5hcHBlbmQoc3BlYylcbiAgICAgICAgICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgcGFzc1xuICAgICAgICAgICAgaWYgbGVuKHRsYnMpID09IDA6XG4gICAgICAgICAgICAgICAgcHJpbnQoIkNvdWxkIG5vdCBsb2NhdGUgYSB0eXBlIGxpYnJhcnkgbWF0Y2hpbmcgXCclc1wnIiAlIChhcmcpKVxuICAgICAgICAgICAgZm9yIHNwZWMgaW4gdGxiczpcbiAgICAgICAgICAgICAgICAjIFZlcnNpb24gbnVtYmVycyBub3QgYWx3YXlzIHJlbGlhYmxlIGlmIGVudW1lcmF0ZWQgZnJvbSByZWdpc3RyeS5cbiAgICAgICAgICAgICAgICAjIChhcyBzb21lIGxpYnMgdXNlIGhleCwgb3RoZXJcJ3MgZG9udC4gIEJvdGggZXhhbXBsZXMgZnJvbSBNUywgb2YgY291cnNlLilcbiAgICAgICAgICAgICAgICBpZiBzcGVjLmRsbCBpcyBOb25lOlxuICAgICAgICAgICAgICAgICAgICB0bGIgPSBweXRob25jb20uTG9hZFJlZ1R5cGVMaWIoXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGVjLmNsc2lkLCBzcGVjLm1ham9yLCBzcGVjLm1pbm9yLCBzcGVjLmxjaWRcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgICAgIHRsYiA9IHB5dGhvbmNvbS5Mb2FkVHlwZUxpYihzcGVjLmRsbClcblxuICAgICAgICAgICAgICAgICMgV2UgaGF2ZSBhIHR5cGVsaWIsIGJ1dCBpdCBtYXkgbm90IGJlIGV4YWN0bHkgd2hhdCB3ZSBzcGVjaWZpZWRcbiAgICAgICAgICAgICAgICAjIChkdWUgdG8gYXV0b21hdGljIHZlcnNpb24gbWF0Y2hpbmcgb2YgQ09NKS4gIFNvIHdlIHF1ZXJ5IHdoYXQgd2UgcmVhbGx5IGhhdmUhXG4gICAgICAgICAgICAgICAgYXR0ciA9IHRsYi5HZXRMaWJBdHRyKClcbiAgICAgICAgICAgICAgICBzcGVjLm1ham9yID0gYXR0clszXVxuICAgICAgICAgICAgICAgIHNwZWMubWlub3IgPSBhdHRyWzRdXG4gICAgICAgICAgICAgICAgc3BlYy5sY2lkID0gYXR0clsxXVxuICAgICAgICAgICAgICAgIHR5cGVsaWJzLmFwcGVuZCgodGxiLCBzcGVjKSlcbiAgICAgICAgcmV0dXJuIHR5cGVsaWJzXG4gICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgIHQsIHYsIHRiID0gc3lzLmV4Y19pbmZvKClcbiAgICAgICAgc3lzLnN0ZGVyci53cml0ZSgiVW5hYmxlIHRvIGxvYWQgdHlwZSBsaWJyYXJ5IGZyb20gXCclc1wnIC0gJXNcXG4iICUgKGFyZywgdikpXG4gICAgICAgIHRiID0gTm9uZSAgIyBTdG9yaW5nIHRiIGluIGEgbG9jYWwgaXMgYSBjeWNsZSFcbiAgICAgICAgc3lzLmV4aXQoMSlcblxuXG5kZWYgR2VuZXJhdGVGcm9tVHlwZUxpYlNwZWMoXG4gICAgdHlwZWxpYkluZm8sXG4gICAgZmlsZT1Ob25lLFxuICAgIHZlcmJvc2VMZXZlbD1Ob25lLFxuICAgIHByb2dyZXNzSW5zdGFuY2U9Tm9uZSxcbiAgICBiVW5pY29kZVRvU3RyaW5nPU5vbmUsXG4gICAgYkZvckRlbWFuZD1iRm9yRGVtYW5kRGVmYXVsdCxcbiAgICBiQnVpbGRIaWRkZW49MSxcbik6XG4gICAgYXNzZXJ0IGJVbmljb2RlVG9TdHJpbmcgaXMgTm9uZSwgInRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBnbyBhd2F5IlxuICAgIGlmIHZlcmJvc2VMZXZlbCBpcyBOb25lOlxuICAgICAgICB2ZXJib3NlTGV2ZWwgPSAwICAjIEJ5IGRlZmF1bHQsIHdlIHVzZSBubyBndWkgYW5kIG5vIHZlcmJvc2UgbGV2ZWwhXG5cbiAgICBpZiBiRm9yRGVtYW5kIGFuZCBmaWxlIGlzIG5vdCBOb25lOlxuICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoXG4gICAgICAgICAgICAiWW91IGNhbiBvbmx5IHBlcmZvcm0gYSBkZW1hbmQtYnVpbGQgd2hlbiB0aGUgb3V0cHV0IGdvZXMgdG8gdGhlIGdlbl9weSBkaXJlY3RvcnkiXG4gICAgICAgIClcbiAgICBpZiBpc2luc3RhbmNlKHR5cGVsaWJJbmZvLCB0dXBsZSk6XG4gICAgICAgICMgVHVwbGVcbiAgICAgICAgdHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3IgPSB0eXBlbGliSW5mb1xuICAgICAgICB0bGIgPSBweXRob25jb20uTG9hZFJlZ1R5cGVMaWIodHlwZWxpYkNMU0lELCBtYWpvciwgbWlub3IsIGxjaWQpXG4gICAgICAgIHNwZWMgPSBzZWxlY3R0bGIuVHlwZWxpYlNwZWModHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3IpXG4gICAgICAgIHNwZWMuRnJvbVR5cGVsaWIodGxiLCBzdHIodHlwZWxpYkNMU0lEKSlcbiAgICAgICAgdHlwZWxpYnMgPSBbKHRsYiwgc3BlYyldXG4gICAgZWxpZiBpc2luc3RhbmNlKHR5cGVsaWJJbmZvLCBzZWxlY3R0bGIuVHlwZWxpYlNwZWMpOlxuICAgICAgICBpZiB0eXBlbGliSW5mby5kbGwgaXMgTm9uZTpcbiAgICAgICAgICAgICMgVmVyc2lvbiBudW1iZXJzIG5vdCBhbHdheXMgcmVsaWFibGUgaWYgZW51bWVyYXRlZCBmcm9tIHJlZ2lzdHJ5LlxuICAgICAgICAgICAgdGxiID0gcHl0aG9uY29tLkxvYWRSZWdUeXBlTGliKFxuICAgICAgICAgICAgICAgIHR5cGVsaWJJbmZvLmNsc2lkLFxuICAgICAgICAgICAgICAgIHR5cGVsaWJJbmZvLm1ham9yLFxuICAgICAgICAgICAgICAgIHR5cGVsaWJJbmZvLm1pbm9yLFxuICAgICAgICAgICAgICAgIHR5cGVsaWJJbmZvLmxjaWQsXG4gICAgICAgICAgICApXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICB0bGIgPSBweXRob25jb20uTG9hZFR5cGVMaWIodHlwZWxpYkluZm8uZGxsKVxuICAgICAgICB0eXBlbGlicyA9IFsodGxiLCB0eXBlbGliSW5mbyldXG4gICAgZWxpZiBoYXNhdHRyKHR5cGVsaWJJbmZvLCAiR2V0TGliQXR0ciIpOlxuICAgICAgICAjIEEgcmVhbCB0eXBlbGliIG9iamVjdCFcbiAgICAgICAgIyBDb3VsZCBhbHNvIHVzZSBpc2luc3RhbmNlKHR5cGVsaWJJbmZvLCBQeUlUeXBlTGliKSBpbnN0ZWFkLCBidXQgUHlJVHlwZUxpYiBpcyBub3QgZGlyZWN0bHkgZXhwb3NlZCBieSBweXRob25jb20uXG4gICAgICAgICMgXHRweXRob25jb20uVHlwZUlJRHNbcHl0aG9uY29tLklJRF9JVHlwZUxpYl0gc2VlbXMgdG8gd29ya1xuICAgICAgICB0bGEgPSB0eXBlbGliSW5mby5HZXRMaWJBdHRyKClcbiAgICAgICAgZ3VpZCA9IHRsYVswXVxuICAgICAgICBsY2lkID0gdGxhWzFdXG4gICAgICAgIG1ham9yID0gdGxhWzNdXG4gICAgICAgIG1pbm9yID0gdGxhWzRdXG4gICAgICAgIHNwZWMgPSBzZWxlY3R0bGIuVHlwZWxpYlNwZWMoZ3VpZCwgbGNpZCwgbWFqb3IsIG1pbm9yKVxuICAgICAgICB0eXBlbGlicyA9IFsodHlwZWxpYkluZm8sIHNwZWMpXVxuICAgIGVsc2U6XG4gICAgICAgIHR5cGVsaWJzID0gR2V0VHlwZUxpYnNGb3JTcGVjKHR5cGVsaWJJbmZvKVxuXG4gICAgaWYgcHJvZ3Jlc3NJbnN0YW5jZSBpcyBOb25lOlxuICAgICAgICBwcm9ncmVzc0luc3RhbmNlID0gU2ltcGxlUHJvZ3Jlc3ModmVyYm9zZUxldmVsKVxuICAgIHByb2dyZXNzID0gcHJvZ3Jlc3NJbnN0YW5jZVxuXG4gICAgYlRvR2VuRGlyID0gZmlsZSBpcyBOb25lXG5cbiAgICBmb3IgdHlwZWxpYiwgaW5mbyBpbiB0eXBlbGliczpcbiAgICAgICAgZ2VuID0gZ2VucHkuR2VuZXJhdG9yKHR5cGVsaWIsIGluZm8uZGxsLCBwcm9ncmVzcywgYkJ1aWxkSGlkZGVuPWJCdWlsZEhpZGRlbilcblxuICAgICAgICBpZiBmaWxlIGlzIE5vbmU6XG4gICAgICAgICAgICB0aGlzX25hbWUgPSBnZW5jYWNoZS5HZXRHZW5lcmF0ZWRGaWxlTmFtZShcbiAgICAgICAgICAgICAgICBpbmZvLmNsc2lkLCBpbmZvLmxjaWQsIGluZm8ubWFqb3IsIGluZm8ubWlub3JcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGZ1bGxfbmFtZSA9IG9zLnBhdGguam9pbihnZW5jYWNoZS5HZXRHZW5lcmF0ZVBhdGgoKSwgdGhpc19uYW1lKVxuICAgICAgICAgICAgaWYgYkZvckRlbWFuZDpcbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIG9zLnVubGluayhmdWxsX25hbWUgKyAiLnB5IilcbiAgICAgICAgICAgICAgICBleGNlcHQgb3MuZXJyb3I6XG4gICAgICAgICAgICAgICAgICAgIHBhc3NcbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIG9zLnVubGluayhmdWxsX25hbWUgKyAiLnB5YyIpXG4gICAgICAgICAgICAgICAgZXhjZXB0IG9zLmVycm9yOlxuICAgICAgICAgICAgICAgICAgICBwYXNzXG4gICAgICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICAgICBvcy51bmxpbmsoZnVsbF9uYW1lICsgIi5weW8iKVxuICAgICAgICAgICAgICAgIGV4Y2VwdCBvcy5lcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgcGFzc1xuICAgICAgICAgICAgICAgIGlmIG5vdCBvcy5wYXRoLmlzZGlyKGZ1bGxfbmFtZSk6XG4gICAgICAgICAgICAgICAgICAgIG9zLm1rZGlyKGZ1bGxfbmFtZSlcbiAgICAgICAgICAgICAgICBvdXRwdXROYW1lID0gb3MucGF0aC5qb2luKGZ1bGxfbmFtZSwgIl9faW5pdF9fLnB5IilcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgb3V0cHV0TmFtZSA9IGZ1bGxfbmFtZSArICIucHkiXG4gICAgICAgICAgICBmaWxlVXNlID0gZ2VuLm9wZW5fd3JpdGVyKG91dHB1dE5hbWUpXG4gICAgICAgICAgICBwcm9ncmVzcy5Mb2dCZWdpbkdlbmVyYXRlKG91dHB1dE5hbWUpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBmaWxlVXNlID0gZmlsZVxuXG4gICAgICAgIHdvcmtlZCA9IEZhbHNlXG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGdlbi5nZW5lcmF0ZShmaWxlVXNlLCBiRm9yRGVtYW5kKVxuICAgICAgICAgICAgd29ya2VkID0gVHJ1ZVxuICAgICAgICBmaW5hbGx5OlxuICAgICAgICAgICAgaWYgZmlsZSBpcyBOb25lOlxuICAgICAgICAgICAgICAgIGdlbi5maW5pc2hfd3JpdGVyKG91dHB1dE5hbWUsIGZpbGVVc2UsIHdvcmtlZClcbiAgICAgICAgaW1wb3J0bGliLmludmFsaWRhdGVfY2FjaGVzKClcbiAgICAgICAgaWYgYlRvR2VuRGlyOlxuICAgICAgICAgICAgcHJvZ3Jlc3MuU2V0RGVzY3JpcHRpb24oIkltcG9ydGluZyBtb2R1bGUiKVxuICAgICAgICAgICAgZ2VuY2FjaGUuQWRkTW9kdWxlVG9DYWNoZShpbmZvLmNsc2lkLCBpbmZvLmxjaWQsIGluZm8ubWFqb3IsIGluZm8ubWlub3IpXG5cbiAgICBwcm9ncmVzcy5DbG9zZSgpXG5cblxuZGVmIEdlbmVyYXRlQ2hpbGRGcm9tVHlwZUxpYlNwZWMoXG4gICAgY2hpbGQsIHR5cGVsaWJJbmZvLCB2ZXJib3NlTGV2ZWw9Tm9uZSwgcHJvZ3Jlc3NJbnN0YW5jZT1Ob25lLCBiVW5pY29kZVRvU3RyaW5nPU5vbmVcbik6XG4gICAgYXNzZXJ0IGJVbmljb2RlVG9TdHJpbmcgaXMgTm9uZSwgInRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBnbyBhd2F5IlxuICAgIGlmIHZlcmJvc2VMZXZlbCBpcyBOb25lOlxuICAgICAgICB2ZXJib3NlTGV2ZWwgPSAoXG4gICAgICAgICAgICAwICAjIEJ5IGRlZmF1bHQsIHdlIHVzZSBubyBndWksIGFuZCBubyB2ZXJib3NlIGxldmVsIGZvciB0aGUgY2hpbGRyZW4uXG4gICAgICAgIClcbiAgICBpZiB0eXBlKHR5cGVsaWJJbmZvKSA9PSB0eXBlKCgpKTpcbiAgICAgICAgdHlwZWxpYkNMU0lELCBsY2lkLCBtYWpvciwgbWlub3IgPSB0eXBlbGliSW5mb1xuICAgICAgICB0bGIgPSBweXRob25jb20uTG9hZFJlZ1R5cGVMaWIodHlwZWxpYkNMU0lELCBtYWpvciwgbWlub3IsIGxjaWQpXG4gICAgZWxzZTpcbiAgICAgICAgdGxiID0gdHlwZWxpYkluZm9cbiAgICAgICAgdGxhID0gdHlwZWxpYkluZm8uR2V0TGliQXR0cigpXG4gICAgICAgIHR5cGVsaWJDTFNJRCA9IHRsYVswXVxuICAgICAgICBsY2lkID0gdGxhWzFdXG4gICAgICAgIG1ham9yID0gdGxhWzNdXG4gICAgICAgIG1pbm9yID0gdGxhWzRdXG4gICAgc3BlYyA9IHNlbGVjdHRsYi5UeXBlbGliU3BlYyh0eXBlbGliQ0xTSUQsIGxjaWQsIG1ham9yLCBtaW5vcilcbiAgICBzcGVjLkZyb21UeXBlbGliKHRsYiwgc3RyKHR5cGVsaWJDTFNJRCkpXG4gICAgdHlwZWxpYnMgPSBbKHRsYiwgc3BlYyldXG5cbiAgICBpZiBwcm9ncmVzc0luc3RhbmNlIGlzIE5vbmU6XG4gICAgICAgIHByb2dyZXNzSW5zdGFuY2UgPSBTaW1wbGVQcm9ncmVzcyh2ZXJib3NlTGV2ZWwpXG4gICAgcHJvZ3Jlc3MgPSBwcm9ncmVzc0luc3RhbmNlXG5cbiAgICBmb3IgdHlwZWxpYiwgaW5mbyBpbiB0eXBlbGliczpcbiAgICAgICAgZGlyX25hbWUgPSBnZW5jYWNoZS5HZXRHZW5lcmF0ZWRGaWxlTmFtZShcbiAgICAgICAgICAgIGluZm8uY2xzaWQsIGluZm8ubGNpZCwgaW5mby5tYWpvciwgaW5mby5taW5vclxuICAgICAgICApXG4gICAgICAgIGRpcl9wYXRoX25hbWUgPSBvcy5wYXRoLmpvaW4oZ2VuY2FjaGUuR2V0R2VuZXJhdGVQYXRoKCksIGRpcl9uYW1lKVxuICAgICAgICBwcm9ncmVzcy5Mb2dCZWdpbkdlbmVyYXRlKGRpcl9wYXRoX25hbWUpXG5cbiAgICAgICAgZ2VuID0gZ2VucHkuR2VuZXJhdG9yKHR5cGVsaWIsIGluZm8uZGxsLCBwcm9ncmVzcylcbiAgICAgICAgZ2VuLmdlbmVyYXRlX2NoaWxkKGNoaWxkLCBkaXJfcGF0aF9uYW1lKVxuICAgICAgICBwcm9ncmVzcy5TZXREZXNjcmlwdGlvbigiSW1wb3J0aW5nIG1vZHVsZSIpXG4gICAgICAgIGltcG9ydGxpYi5pbnZhbGlkYXRlX2NhY2hlcygpXG4gICAgICAgIF9faW1wb3J0X18oIndpbjMyY29tLmdlbl9weS4iICsgZGlyX25hbWUgKyAiLiIgKyBjaGlsZClcbiAgICBwcm9ncmVzcy5DbG9zZSgpXG5cblxuZGVmIG1haW4oKTpcbiAgICBpbXBvcnQgZ2V0b3B0XG5cbiAgICBoaWRkZW5TcGVjID0gMVxuICAgIG91dHB1dE5hbWUgPSBOb25lXG4gICAgdmVyYm9zZUxldmVsID0gMVxuICAgIGRvaXQgPSAxXG4gICAgYkZvckRlbWFuZCA9IGJGb3JEZW1hbmREZWZhdWx0XG4gICAgdHJ5OlxuICAgICAgICBvcHRzLCBhcmdzID0gZ2V0b3B0LmdldG9wdChzeXMuYXJndlsxOl0sICJ2bzpodWlxZCIpXG4gICAgICAgIGZvciBvLCB2IGluIG9wdHM6XG4gICAgICAgICAgICBpZiBvID09ICItaCI6XG4gICAgICAgICAgICAgICAgaGlkZGVuU3BlYyA9IDBcbiAgICAgICAgICAgIGVsaWYgbyA9PSAiLW8iOlxuICAgICAgICAgICAgICAgIG91dHB1dE5hbWUgPSB2XG4gICAgICAgICAgICBlbGlmIG8gPT0gIi12IjpcbiAgICAgICAgICAgICAgICB2ZXJib3NlTGV2ZWwgPSB2ZXJib3NlTGV2ZWwgKyAxXG4gICAgICAgICAgICBlbGlmIG8gPT0gIi1xIjpcbiAgICAgICAgICAgICAgICB2ZXJib3NlTGV2ZWwgPSB2ZXJib3NlTGV2ZWwgLSAxXG4gICAgICAgICAgICBlbGlmIG8gPT0gIi1pIjpcbiAgICAgICAgICAgICAgICBpZiBsZW4oYXJncykgPT0gMDpcbiAgICAgICAgICAgICAgICAgICAgU2hvd0luZm8oTm9uZSlcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBmb3IgYXJnIGluIGFyZ3M6XG4gICAgICAgICAgICAgICAgICAgICAgICBTaG93SW5mbyhhcmcpXG4gICAgICAgICAgICAgICAgZG9pdCA9IDBcbiAgICAgICAgICAgIGVsaWYgbyA9PSAiLWQiOlxuICAgICAgICAgICAgICAgIGJGb3JEZW1hbmQgPSBub3QgYkZvckRlbWFuZFxuXG4gICAgZXhjZXB0IChnZXRvcHQuZXJyb3IsIGVycm9yKSBhcyBtc2c6XG4gICAgICAgIHN5cy5zdGRlcnIud3JpdGUoc3RyKG1zZykgKyAiXFxuIilcbiAgICAgICAgdXNhZ2UoKVxuXG4gICAgaWYgYkZvckRlbWFuZCBhbmQgb3V0cHV0TmFtZSBpcyBub3QgTm9uZTpcbiAgICAgICAgc3lzLnN0ZGVyci53cml0ZSgiQ2FuIG5vdCB1c2UgLWQgYW5kIC1vIHRvZ2V0aGVyXFxuIilcbiAgICAgICAgdXNhZ2UoKVxuXG4gICAgaWYgbm90IGRvaXQ6XG4gICAgICAgIHJldHVybiAwXG4gICAgaWYgbGVuKGFyZ3MpID09IDA6XG4gICAgICAgIHJjID0gc2VsZWN0dGxiLlNlbGVjdFRsYigpXG4gICAgICAgIGlmIHJjIGlzIE5vbmU6XG4gICAgICAgICAgICBzeXMuZXhpdCgxKVxuICAgICAgICBhcmdzID0gW3JjXVxuXG4gICAgaWYgb3V0cHV0TmFtZSBpcyBub3QgTm9uZTpcbiAgICAgICAgcGF0aCA9IG9zLnBhdGguZGlybmFtZShvdXRwdXROYW1lKVxuICAgICAgICBpZiBwYXRoICE9ICIiIGFuZCBub3Qgb3MucGF0aC5leGlzdHMocGF0aCk6XG4gICAgICAgICAgICBvcy5tYWtlZGlycyhwYXRoKVxuICAgICAgICBpZiBzeXMudmVyc2lvbl9pbmZvID4gKDMsIDApOlxuICAgICAgICAgICAgZiA9IG9wZW4ob3V0cHV0TmFtZSwgInd0IiwgZW5jb2Rpbmc9Im1iY3MiKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgaW1wb3J0IGNvZGVjcyAgIyBub3QgYXZhaWxhYmxlIGluIHB5M2suXG5cbiAgICAgICAgICAgIGYgPSBjb2RlY3Mub3BlbihvdXRwdXROYW1lLCAidyIsICJtYmNzIilcbiAgICBlbHNlOlxuICAgICAgICBmID0gTm9uZVxuXG4gICAgZm9yIGFyZyBpbiBhcmdzOlxuICAgICAgICBHZW5lcmF0ZUZyb21UeXBlTGliU3BlYyhcbiAgICAgICAgICAgIGFyZyxcbiAgICAgICAgICAgIGYsXG4gICAgICAgICAgICB2ZXJib3NlTGV2ZWw9dmVyYm9zZUxldmVsLFxuICAgICAgICAgICAgYkZvckRlbWFuZD1iRm9yRGVtYW5kLFxuICAgICAgICAgICAgYkJ1aWxkSGlkZGVuPWhpZGRlblNwZWMsXG4gICAgICAgIClcblxuICAgIGlmIGY6XG4gICAgICAgIGYuY2xvc2UoKVxuXG5cbmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6XG4gICAgcmMgPSBtYWluKClcbiAgICBpZiByYzpcbiAgICAgICAgc3lzLmV4aXQocmMpXG4gICAgc3lzLmV4aXQoMClcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCd3aW4zMmNvbS9jbGllbnQvZ2VucHkucHknLCBiJyIiImdlbnB5LnB5IC0gVGhlIHdvcmtlciBmb3IgbWFrZXB5LiAgU2VlIG1ha2VweS5weSBmb3IgbW9yZSBkZXRhaWxzXG5cblRoaXMgY29kZSB3YXMgbW92ZWQgc2ltcGx5IHRvIHNwZWVkIFB5dGhvbiBpbiBub3JtYWwgY2lyY3Vtc3RhbmNlcy4gIEFzIHRoZSBtYWtlcHkucHlcbmlzIG5vcm1hbGx5IHJ1biBmcm9tIHRoZSBjb21tYW5kIGxpbmUsIGl0IHJlcGFyc2VzIHRoZSBjb2RlIGVhY2ggdGltZS4gIE5vdyBtYWtlcHlcbmlzIG5vdGhpbmcgbW9yZSB0aGFuIHRoZSBjb21tYW5kIGxpbmUgaGFuZGxlciBhbmQgcHVibGljIGludGVyZmFjZS5cblxuVGhlIG1ha2VweSBjb21tYW5kIGxpbmUgZXRjIGhhbmRsaW5nIGlzIGFsc28gZ2V0dGluZyBsYXJnZSBlbm91Z2ggaW4gaXRzIG93biByaWdodCFcbiIiIlxuXG4jIE5PVEUgLSBub3cgc3VwcG9ydHMgYSAiZGVtYW5kIiBtZWNoYW5pc20gLSB0aGUgdG9wLWxldmVsIGlzIGEgcGFja2FnZSwgYW5kXG4jIGVhY2ggY2xhc3MgZXRjIGNhbiBiZSBtYWRlIGluZGl2aWR1YWxseS5cbiMgVGhpcyBzaG91bGQgZXZlbnR1YWxseSBiZWNvbWUgdGhlIGRlZmF1bHQuXG4jIFRoZW4gdGhlIG9sZCBub24tcGFja2FnZSB0ZWNobmlxdWUgc2hvdWxkIGJlIHJlbW92ZWQuXG4jIFRoZXJlIHNob3VsZCBiZSBubyBiL3cgY29tcGF0IGlzc3VlcywgYW5kIHdpbGwganVzdCBoZWxwIGNsZWFuIHRoZSBjb2RlLlxuIyBUaGlzIHdpbGwgYmUgZG9uZSBvbmNlIHRoZSBuZXcgImRlbWFuZCIgbWVjaGFuaXNtIGdldHMgYSBnb29kIHdvcmtvdXQuXG5pbXBvcnQgb3NcbmltcG9ydCBzeXNcbmltcG9ydCB0aW1lXG5pbXBvcnQgd2luMzJjb21cblxuaW1wb3J0IHB5dGhvbmNvbVxuZnJvbSAuIGltcG9ydCBidWlsZFxuXG5lcnJvciA9ICJtYWtlcHkuZXJyb3IiXG5tYWtlcHlfdmVyc2lvbiA9ICIwLjUuMDEiICAjIFdyaXR0ZW4gdG8gZ2VuZXJhdGVkIGZpbGUuXG5cbkdFTl9GVUxMID0gImZ1bGwiXG5HRU5fREVNQU5EX0JBU0UgPSAiZGVtYW5kKGJhc2UpIlxuR0VOX0RFTUFORF9DSElMRCA9ICJkZW1hbmQoY2hpbGQpIlxuXG4jIFRoaXMgbWFwIGlzIHVzZWQgcHVyZWx5IGZvciB0aGUgdXNlcnMgYmVuZWZpdCAtaXQgc2hvd3MgdGhlXG4jIHJhdywgdW5kZXJseWluZyB0eXBlIG9mIEFsaWFzL0VudW1zLCBldGMuICBUaGUgQ09NIGltcGxlbWVudGF0aW9uXG4jIGRvZXMgbm90IHVzZSB0aGlzIG1hcCBhdCBydW50aW1lIC0gYWxsIEFsaWFzL0VudW0gaGF2ZSBhbHJlYWR5XG4jIGJlZW4gdHJhbnNsYXRlZC5cbm1hcFZUVG9UeXBlU3RyaW5nID0ge1xuICAgIHB5dGhvbmNvbS5WVF9JMjogInR5cGVzLkludFR5cGUiLFxuICAgIHB5dGhvbmNvbS5WVF9JNDogInR5cGVzLkludFR5cGUiLFxuICAgIHB5dGhvbmNvbS5WVF9SNDogInR5cGVzLkZsb2F0VHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX1I4OiAidHlwZXMuRmxvYXRUeXBlIixcbiAgICBweXRob25jb20uVlRfQlNUUjogInR5cGVzLlN0cmluZ1R5cGUiLFxuICAgIHB5dGhvbmNvbS5WVF9CT09MOiAidHlwZXMuSW50VHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX1ZBUklBTlQ6ICJ0eXBlcy5UeXBlVHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX0kxOiAidHlwZXMuSW50VHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX1VJMTogInR5cGVzLkludFR5cGUiLFxuICAgIHB5dGhvbmNvbS5WVF9VSTI6ICJ0eXBlcy5JbnRUeXBlIixcbiAgICBweXRob25jb20uVlRfVUk0OiAidHlwZXMuSW50VHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX0k4OiAidHlwZXMuTG9uZ1R5cGUiLFxuICAgIHB5dGhvbmNvbS5WVF9VSTg6ICJ0eXBlcy5Mb25nVHlwZSIsXG4gICAgcHl0aG9uY29tLlZUX0lOVDogInR5cGVzLkludFR5cGUiLFxuICAgIHB5dGhvbmNvbS5WVF9EQVRFOiAicHl0aG9uY29tLlB5VGltZVR5cGUiLFxuICAgIHB5dGhvbmNvbS5WVF9VSU5UOiAidHlwZXMuSW50VHlwZSIsXG59XG5cbiMgR2l2ZW4gYSBwcm9wZ2V0IGZ1bmN0aW9uXCdzIGFyZyBkZXNjLCByZXR1cm4gdGhlIGRlZmF1bHQgcGFyYW1ldGVycyBmb3IgYWxsXG4jIHBhcmFtcyBiYXIgdGhlIGZpcnN0LiAgRWcsIHRoZW4gUHl0aG9uIGRvZXMgYTpcbiMgb2JqZWN0LlByb3BlcnR5ID0gImZvbyJcbiMgUHl0aG9uIGNhbiBvbmx5IHBhc3MgdGhlICJmb28iIHZhbHVlLiAgSWYgdGhlIHByb3BlcnR5IGhhc1xuIyBtdWx0aXBsZSBhcmdzLCBhbmQgdGhlIHJlc3QgaGF2ZSBkZWZhdWx0IHZhbHVlcywgdGhpcyBhbGxvd3NcbiMgUHl0aG9uIHRvIGNvcnJlY3RseSBwYXNzIHRob3NlIGRlZmF1bHRzLlxuZGVmIE1ha2VEZWZhdWx0QXJnc0ZvclByb3BlcnR5UHV0KGFyZ3NEZXNjKTpcbiAgICByZXQgPSBbXVxuICAgIGZvciBkZXNjIGluIGFyZ3NEZXNjWzE6XTpcbiAgICAgICAgZGVmYXVsdCA9IGJ1aWxkLk1ha2VEZWZhdWx0QXJnUmVwcihkZXNjKVxuICAgICAgICBpZiBkZWZhdWx0IGlzIE5vbmU6XG4gICAgICAgICAgICBicmVha1xuICAgICAgICByZXQuYXBwZW5kKGRlZmF1bHQpXG4gICAgcmV0dXJuIHR1cGxlKHJldClcblxuXG5kZWYgTWFrZU1hcExpbmVFbnRyeShkaXNwaWQsIHdGbGFncywgcmV0VHlwZSwgYXJnVHlwZXMsIHVzZXIsIHJlc3VsdENMU0lEKTpcbiAgICAjIFN0cmlwIHRoZSBkZWZhdWx0IHZhbHVlXG4gICAgYXJnVHlwZXMgPSB0dXBsZShbd2hhdFs6Ml0gZm9yIHdoYXQgaW4gYXJnVHlwZXNdKVxuICAgIHJldHVybiBcJyglcywgJWQsICVzLCAlcywgIiVzIiwgJXMpXCcgJSAoXG4gICAgICAgIGRpc3BpZCxcbiAgICAgICAgd0ZsYWdzLFxuICAgICAgICByZXRUeXBlWzoyXSxcbiAgICAgICAgYXJnVHlwZXMsXG4gICAgICAgIHVzZXIsXG4gICAgICAgIHJlc3VsdENMU0lELFxuICAgIClcblxuXG5kZWYgTWFrZUV2ZW50TWV0aG9kTmFtZShldmVudE5hbWUpOlxuICAgIGlmIGV2ZW50TmFtZVs6Ml0gPT0gIk9uIjpcbiAgICAgICAgcmV0dXJuIGV2ZW50TmFtZVxuICAgIGVsc2U6XG4gICAgICAgIHJldHVybiAiT24iICsgZXZlbnROYW1lXG5cblxuZGVmIFdyaXRlU2lua0V2ZW50TWFwKG9iaiwgc3RyZWFtKTpcbiAgICBwcmludCgiXFx0X2Rpc3BpZF90b19mdW5jXyA9IHsiLCBmaWxlPXN0cmVhbSlcbiAgICBmb3IgbmFtZSwgZW50cnkgaW4gKFxuICAgICAgICBsaXN0KG9iai5wcm9wTWFwR2V0Lml0ZW1zKCkpXG4gICAgICAgICsgbGlzdChvYmoucHJvcE1hcFB1dC5pdGVtcygpKVxuICAgICAgICArIGxpc3Qob2JqLm1hcEZ1bmNzLml0ZW1zKCkpXG4gICAgKTpcbiAgICAgICAgZmRlc2MgPSBlbnRyeS5kZXNjXG4gICAgICAgIHByaW50KFxuICAgICAgICAgICAgXCdcXHRcXHQlOWQgOiAiJXMiLFwnICUgKGZkZXNjLm1lbWlkLCBNYWtlRXZlbnRNZXRob2ROYW1lKGVudHJ5Lm5hbWVzWzBdKSksXG4gICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgKVxuICAgIHByaW50KCJcXHRcXHR9IiwgZmlsZT1zdHJlYW0pXG5cblxuIyBNSSBpcyB1c2VkIHRvIGpvaW4gbXkgd3JpdGFibGUgaGVscGVycywgYW5kIHRoZSBPTEVcbiMgY2xhc3Nlcy5cbmNsYXNzIFdyaXRhYmxlSXRlbTpcbiAgICAjIF9fY21wX18gdXNlZCBmb3Igc29ydGluZyBpbiBweTJ4Li4uXG4gICAgZGVmIF9fY21wX18oc2VsZiwgb3RoZXIpOlxuICAgICAgICAiQ29tcGFyZSBmb3Igc29ydGluZyJcbiAgICAgICAgcmV0ID0gY21wKHNlbGYub3JkZXIsIG90aGVyLm9yZGVyKVxuICAgICAgICBpZiByZXQgPT0gMCBhbmQgc2VsZi5kb2M6XG4gICAgICAgICAgICByZXQgPSBjbXAoc2VsZi5kb2NbMF0sIG90aGVyLmRvY1swXSlcbiAgICAgICAgcmV0dXJuIHJldFxuXG4gICAgIyAuLi4gYnV0IG5vdCB1c2VkIGluIHB5M2sgLSBfX2x0X18gbWluaW11bSBuZWVkZWQgdGhlcmVcbiAgICBkZWYgX19sdF9fKHNlbGYsIG90aGVyKTogICMgcHkzayB2YXJpYW50XG4gICAgICAgIGlmIHNlbGYub3JkZXIgPT0gb3RoZXIub3JkZXI6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5kb2MgPCBvdGhlci5kb2NcbiAgICAgICAgcmV0dXJuIHNlbGYub3JkZXIgPCBvdGhlci5vcmRlclxuXG4gICAgZGVmIF9fcmVwcl9fKHNlbGYpOlxuICAgICAgICByZXR1cm4gIk9sZUl0ZW06IGRvYz0lcywgb3JkZXI9JWQiICUgKHJlcHIoc2VsZi5kb2MpLCBzZWxmLm9yZGVyKVxuXG5cbmNsYXNzIFJlY29yZEl0ZW0oYnVpbGQuT2xlSXRlbSwgV3JpdGFibGVJdGVtKTpcbiAgICBvcmRlciA9IDlcbiAgICB0eXBlbmFtZSA9ICJSRUNPUkQiXG5cbiAgICBkZWYgX19pbml0X18oc2VsZiwgdHlwZUluZm8sIHR5cGVBdHRyLCBkb2M9Tm9uZSwgYkZvclVzZXI9MSk6XG4gICAgICAgICMjICAgIHN5cy5zdGRlcnIud3JpdGUoIlJlY29yZCAlczogc2l6ZSAlc1xcbiIgJSAoZG9jLHR5cGVBdHRyLmNiU2l6ZUluc3RhbmNlKSlcbiAgICAgICAgIyMgICAgc3lzLnN0ZGVyci53cml0ZSgiIGNWYXJzID0gJXNcXG4iICUgKHR5cGVBdHRyLmNWYXJzLCkpXG4gICAgICAgICMjICAgIGZvciBpIGluIHJhbmdlKHR5cGVBdHRyLmNWYXJzKTpcbiAgICAgICAgIyMgICAgICAgIHZkZXNjID0gdHlwZUluZm8uR2V0VmFyRGVzYyhpKVxuICAgICAgICAjIyAgICAgICAgc3lzLnN0ZGVyci53cml0ZSgiIFZhciAlZCBoYXMgdmFsdWUgJXMsIHR5cGUgJWQsIGRlc2M9JXNcXG4iICUgKGksIHZkZXNjLnZhbHVlLCB2ZGVzYy52YXJraW5kLCB2ZGVzYy5lbGVtZGVzY1ZhcikpXG4gICAgICAgICMjICAgICAgICBzeXMuc3RkZXJyLndyaXRlKCIgRG9jIGlzICVzXFxuIiAlICh0eXBlSW5mby5HZXREb2N1bWVudGF0aW9uKHZkZXNjLm1lbWlkKSwpKVxuXG4gICAgICAgIGJ1aWxkLk9sZUl0ZW0uX19pbml0X18oc2VsZiwgZG9jKVxuICAgICAgICBzZWxmLmNsc2lkID0gdHlwZUF0dHJbMF1cblxuICAgIGRlZiBXcml0ZUNsYXNzKHNlbGYsIGdlbmVyYXRvcik6XG4gICAgICAgIHBhc3NcblxuXG4jIEdpdmVuIGFuIGVudW0sIHdyaXRlIGFsbCBhbGlhc2VzIGZvciBpdC5cbiMgKG5vIGxvbmdlciBuZWNlc3NhcnkgZm9yIG5ldyBzdHlsZSBjb2RlLCBidXQgc3RpbGwgdXNlZCBmb3Igb2xkIGNvZGUuXG5kZWYgV3JpdGVBbGlhc2VzRm9ySXRlbShpdGVtLCBhbGlhc0l0ZW1zLCBzdHJlYW0pOlxuICAgIGZvciBhbGlhcyBpbiBhbGlhc0l0ZW1zLnZhbHVlcygpOlxuICAgICAgICBpZiBpdGVtLmRvYyBhbmQgYWxpYXMuYWxpYXNEb2MgYW5kIChhbGlhcy5hbGlhc0RvY1swXSA9PSBpdGVtLmRvY1swXSk6XG4gICAgICAgICAgICBhbGlhcy5Xcml0ZUFsaWFzSXRlbShhbGlhc0l0ZW1zLCBzdHJlYW0pXG5cblxuY2xhc3MgQWxpYXNJdGVtKGJ1aWxkLk9sZUl0ZW0sIFdyaXRhYmxlSXRlbSk6XG4gICAgb3JkZXIgPSAyXG4gICAgdHlwZW5hbWUgPSAiQUxJQVMiXG5cbiAgICBkZWYgX19pbml0X18oc2VsZiwgdHlwZWluZm8sIGF0dHIsIGRvYz1Ob25lLCBiRm9yVXNlcj0xKTpcbiAgICAgICAgYnVpbGQuT2xlSXRlbS5fX2luaXRfXyhzZWxmLCBkb2MpXG5cbiAgICAgICAgYWkgPSBhdHRyWzE0XVxuICAgICAgICBzZWxmLmF0dHIgPSBhdHRyXG4gICAgICAgIGlmIHR5cGUoYWkpID09IHR5cGUoKCkpIGFuZCB0eXBlKGFpWzFdKSA9PSB0eXBlKFxuICAgICAgICAgICAgMFxuICAgICAgICApOiAgIyBYWFggLSBUaGlzIGlzIGEgaGFjayAtIHdoeSB0dXBsZXM/ICBOZWVkIHRvIHJlc29sdmU/XG4gICAgICAgICAgICBocmVmID0gYWlbMV1cbiAgICAgICAgICAgIGFsaW5mbyA9IHR5cGVpbmZvLkdldFJlZlR5cGVJbmZvKGhyZWYpXG4gICAgICAgICAgICBzZWxmLmFsaWFzRG9jID0gYWxpbmZvLkdldERvY3VtZW50YXRpb24oLTEpXG4gICAgICAgICAgICBzZWxmLmFsaWFzQXR0ciA9IGFsaW5mby5HZXRUeXBlQXR0cigpXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBzZWxmLmFsaWFzRG9jID0gTm9uZVxuICAgICAgICAgICAgc2VsZi5hbGlhc0F0dHIgPSBOb25lXG5cbiAgICBkZWYgV3JpdGVBbGlhc0l0ZW0oc2VsZiwgYWxpYXNEaWN0LCBzdHJlYW0pOlxuICAgICAgICAjIHdlIGNvdWxkIGhhdmUgYmVlbiB3cml0dGVuIGFzIHBhcnQgb2YgYW4gYWxpYXMgZGVwZW5kZW5jeVxuICAgICAgICBpZiBzZWxmLmJXcml0dGVuOlxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgaWYgc2VsZi5hbGlhc0RvYzpcbiAgICAgICAgICAgIGRlcE5hbWUgPSBzZWxmLmFsaWFzRG9jWzBdXG4gICAgICAgICAgICBpZiBkZXBOYW1lIGluIGFsaWFzRGljdDpcbiAgICAgICAgICAgICAgICBhbGlhc0RpY3RbZGVwTmFtZV0uV3JpdGVBbGlhc0l0ZW0oYWxpYXNEaWN0LCBzdHJlYW0pXG4gICAgICAgICAgICBwcmludChzZWxmLmRvY1swXSArICIgPSAiICsgZGVwTmFtZSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBhaSA9IHNlbGYuYXR0clsxNF1cbiAgICAgICAgICAgIGlmIHR5cGUoYWkpID09IHR5cGUoMCk6XG4gICAgICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICAgICB0eXBlU3RyID0gbWFwVlRUb1R5cGVTdHJpbmdbYWldXG4gICAgICAgICAgICAgICAgICAgIHByaW50KCIjICVzPSVzIiAlIChzZWxmLmRvY1swXSwgdHlwZVN0ciksIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRvY1swXSArICIgPSBOb25lICMgQ2FuXCd0IGNvbnZlcnQgYWxpYXMgaW5mbyAiICsgc3RyKGFpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgIHByaW50KGZpbGU9c3RyZWFtKVxuICAgICAgICBzZWxmLmJXcml0dGVuID0gMVxuXG5cbmNsYXNzIEVudW1lcmF0aW9uSXRlbShidWlsZC5PbGVJdGVtLCBXcml0YWJsZUl0ZW0pOlxuICAgIG9yZGVyID0gMVxuICAgIHR5cGVuYW1lID0gIkVOVU1FUkFUSU9OIlxuXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHR5cGVpbmZvLCBhdHRyLCBkb2M9Tm9uZSwgYkZvclVzZXI9MSk6XG4gICAgICAgIGJ1aWxkLk9sZUl0ZW0uX19pbml0X18oc2VsZiwgZG9jKVxuXG4gICAgICAgIHNlbGYuY2xzaWQgPSBhdHRyWzBdXG4gICAgICAgIHNlbGYubWFwVmFycyA9IHt9XG4gICAgICAgIHR5cGVGbGFncyA9IGF0dHJbMTFdXG4gICAgICAgIHNlbGYuaGlkZGVuID0gKFxuICAgICAgICAgICAgdHlwZUZsYWdzICYgcHl0aG9uY29tLlRZUEVGTEFHX0ZISURERU5cbiAgICAgICAgICAgIG9yIHR5cGVGbGFncyAmIHB5dGhvbmNvbS5UWVBFRkxBR19GUkVTVFJJQ1RFRFxuICAgICAgICApXG5cbiAgICAgICAgZm9yIGogaW4gcmFuZ2UoYXR0cls3XSk6XG4gICAgICAgICAgICB2ZGVzYyA9IHR5cGVpbmZvLkdldFZhckRlc2MoailcbiAgICAgICAgICAgIG5hbWUgPSB0eXBlaW5mby5HZXROYW1lcyh2ZGVzY1swXSlbMF1cbiAgICAgICAgICAgIHNlbGYubWFwVmFyc1tuYW1lXSA9IGJ1aWxkLk1hcEVudHJ5KHZkZXNjKVxuXG4gICAgIyMgIGRlZiBXcml0ZUVudW1lcmF0aW9uSGVhZGVycyhzZWxmLCBhbGlhc0l0ZW1zLCBzdHJlYW0pOlxuICAgICMjICAgIGVudW1OYW1lID0gc2VsZi5kb2NbMF1cbiAgICAjIyAgICBwcmludCA+PiBzdHJlYW0gIiVzPWNvbnN0YW50cyAjIENvbXBhdGliaWxpdHkgd2l0aCBwcmV2aW91cyB2ZXJzaW9ucy4iICUgKGVudW1OYW1lKVxuICAgICMjICAgIFdyaXRlQWxpYXNlc0Zvckl0ZW0oc2VsZiwgYWxpYXNJdGVtcylcblxuICAgIGRlZiBXcml0ZUVudW1lcmF0aW9uSXRlbXMoc2VsZiwgc3RyZWFtKTpcbiAgICAgICAgbnVtID0gMFxuICAgICAgICBlbnVtTmFtZSA9IHNlbGYuZG9jWzBdXG4gICAgICAgICMgV3JpdGUgaW4gbmFtZSBhbHBoYSBvcmRlclxuICAgICAgICBuYW1lcyA9IGxpc3Qoc2VsZi5tYXBWYXJzLmtleXMoKSlcbiAgICAgICAgbmFtZXMuc29ydCgpXG4gICAgICAgIGZvciBuYW1lIGluIG5hbWVzOlxuICAgICAgICAgICAgZW50cnkgPSBzZWxmLm1hcFZhcnNbbmFtZV1cbiAgICAgICAgICAgIHZkZXNjID0gZW50cnkuZGVzY1xuICAgICAgICAgICAgaWYgdmRlc2NbNF0gPT0gcHl0aG9uY29tLlZBUl9DT05TVDpcbiAgICAgICAgICAgICAgICB2YWwgPSB2ZGVzY1sxXVxuXG4gICAgICAgICAgICAgICAgdXNlID0gcmVwcih2YWwpXG4gICAgICAgICAgICAgICAgIyBNYWtlIHN1cmUgdGhlIHJlcHIgb2YgdGhlIHZhbHVlIGlzIHZhbGlkIHB5dGhvbiBzeW50YXhcbiAgICAgICAgICAgICAgICAjIHN0aWxsIGNvdWxkIGNhdXNlIGFuIGVycm9yIG9uIGltcG9ydCBpZiBpdCBjb250YWlucyBhIG1vZHVsZSBvciB0eXBlIG5hbWVcbiAgICAgICAgICAgICAgICAjIG5vdCBhdmFpbGFibGUgaW4gdGhlIGdsb2JhbCBuYW1lc3BhY2VcbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIGNvbXBpbGUodXNlLCAiPG1ha2VweT4iLCAiZXZhbCIpXG4gICAgICAgICAgICAgICAgZXhjZXB0IFN5bnRheEVycm9yOlxuICAgICAgICAgICAgICAgICAgICAjIEF0IGxlYXN0IGFkZCB0aGUgcmVwciBhcyBhIHN0cmluZywgc28gaXQgY2FuIGJlIGludmVzdGlnYXRlZCBmdXJ0aGVyXG4gICAgICAgICAgICAgICAgICAgICMgU2FuaXRpemUgaXQsIGluIGNhc2UgdGhlIHJlcHIgY29udGFpbnMgaXRzIG93biBxdW90ZXMuICAoPz8/IGxpbmUgYnJlYWtzIHRvbyA/Pz8pXG4gICAgICAgICAgICAgICAgICAgIHVzZSA9IHVzZS5yZXBsYWNlKFwnIlwnLCAiXCciKVxuICAgICAgICAgICAgICAgICAgICB1c2UgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICBcJyJcJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKyB1c2VcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCciXCdcbiAgICAgICAgICAgICAgICAgICAgICAgICsgIiAjIFRoaXMgVkFSSUFOVCB0eXBlIGNhbm5vdCBiZSBjb252ZXJ0ZWQgYXV0b21hdGljYWxseSJcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICAgICAiXFx0JS0zMHM9JS0xMHMgIyBmcm9tIGVudW0gJXMiXG4gICAgICAgICAgICAgICAgICAgICUgKGJ1aWxkLk1ha2VQdWJsaWNBdHRyaWJ1dGVOYW1lKG5hbWUsIFRydWUpLCB1c2UsIGVudW1OYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIG51bSArPSAxXG4gICAgICAgIHJldHVybiBudW1cblxuXG5jbGFzcyBWVGFibGVJdGVtKGJ1aWxkLlZUYWJsZUl0ZW0sIFdyaXRhYmxlSXRlbSk6XG4gICAgb3JkZXIgPSA0XG5cbiAgICBkZWYgV3JpdGVDbGFzcyhzZWxmLCBnZW5lcmF0b3IpOlxuICAgICAgICBzZWxmLldyaXRlVlRhYmxlTWFwKGdlbmVyYXRvcilcbiAgICAgICAgc2VsZi5iV3JpdHRlbiA9IDFcblxuICAgIGRlZiBXcml0ZVZUYWJsZU1hcChzZWxmLCBnZW5lcmF0b3IpOlxuICAgICAgICBzdHJlYW0gPSBnZW5lcmF0b3IuZmlsZVxuICAgICAgICBwcmludChcbiAgICAgICAgICAgICIlc192dGFibGVzX2Rpc3BhdGNoXyA9ICVkIiAlIChzZWxmLnB5dGhvbl9uYW1lLCBzZWxmLmJJc0Rpc3BhdGNoKSxcbiAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICApXG4gICAgICAgIHByaW50KCIlc192dGFibGVzXyA9IFsiICUgKHNlbGYucHl0aG9uX25hbWUsKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGZvciB2IGluIHNlbGYudnRhYmxlRnVuY3M6XG4gICAgICAgICAgICBuYW1lcywgZGlzcGlkLCBkZXNjID0gdlxuICAgICAgICAgICAgYXNzZXJ0IGRlc2MuZGVzY2tpbmQgPT0gcHl0aG9uY29tLkRFU0NLSU5EX0ZVTkNERVNDXG4gICAgICAgICAgICBhcmdfcmVwcnMgPSBbXVxuICAgICAgICAgICAgIyBtb3JlIGhvb3BzIHNvIHdlIGRvblwndCBnZW5lcmF0ZSBodWdlIGxpbmVzLlxuICAgICAgICAgICAgaXRlbV9udW0gPSAwXG4gICAgICAgICAgICBwcmludCgiXFx0KCgiLCBlbmQ9IiAiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIGZvciBuYW1lIGluIG5hbWVzOlxuICAgICAgICAgICAgICAgIHByaW50KHJlcHIobmFtZSksICIsIiwgZW5kPSIgIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICAgICAgaXRlbV9udW0gPSBpdGVtX251bSArIDFcbiAgICAgICAgICAgICAgICBpZiBpdGVtX251bSAlIDUgPT0gMDpcbiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxcblxcdFxcdFxcdCIsIGVuZD0iICIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgIiksICVkLCAoJXIsICVyLCBbIiAlIChkaXNwaWQsIGRlc2MubWVtaWQsIGRlc2Muc2NvZGVBcnJheSksXG4gICAgICAgICAgICAgICAgZW5kPSIgIixcbiAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGZvciBhcmcgaW4gZGVzYy5hcmdzOlxuICAgICAgICAgICAgICAgIGl0ZW1fbnVtID0gaXRlbV9udW0gKyAxXG4gICAgICAgICAgICAgICAgaWYgaXRlbV9udW0gJSA1ID09IDA6XG4gICAgICAgICAgICAgICAgICAgIHByaW50KCJcXG5cXHRcXHRcXHQiLCBlbmQ9IiAiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgICAgICBkZWZ2YWwgPSBidWlsZC5NYWtlRGVmYXVsdEFyZ1JlcHIoYXJnKVxuICAgICAgICAgICAgICAgIGlmIGFyZ1szXSBpcyBOb25lOlxuICAgICAgICAgICAgICAgICAgICBhcmczX3JlcHIgPSBOb25lXG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgYXJnM19yZXByID0gcmVwcihhcmdbM10pXG4gICAgICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgIHJlcHIoKGFyZ1swXSwgYXJnWzFdLCBkZWZ2YWwsIGFyZzNfcmVwcikpLCAiLCIsIGVuZD0iICIsIGZpbGU9c3RyZWFtXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgcHJpbnQoIl0sIiwgZW5kPSIgIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludChyZXByKGRlc2MuZnVuY2tpbmQpLCAiLCIsIGVuZD0iICIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQocmVwcihkZXNjLmludmtpbmQpLCAiLCIsIGVuZD0iICIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQocmVwcihkZXNjLmNhbGxjb252KSwgIiwiLCBlbmQ9IiAiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KHJlcHIoZGVzYy5jUGFyYW1zT3B0KSwgIiwiLCBlbmQ9IiAiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KHJlcHIoZGVzYy5vVmZ0KSwgIiwiLCBlbmQ9IiAiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KHJlcHIoZGVzYy5yZXR0eXBlKSwgIiwiLCBlbmQ9IiAiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KHJlcHIoZGVzYy53RnVuY0ZsYWdzKSwgIiwiLCBlbmQ9IiAiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KCIpKSwiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIl0iLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoZmlsZT1zdHJlYW0pXG5cblxuY2xhc3MgRGlzcGF0Y2hJdGVtKGJ1aWxkLkRpc3BhdGNoSXRlbSwgV3JpdGFibGVJdGVtKTpcbiAgICBvcmRlciA9IDNcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0eXBlaW5mbywgYXR0ciwgZG9jPU5vbmUpOlxuICAgICAgICBidWlsZC5EaXNwYXRjaEl0ZW0uX19pbml0X18oc2VsZiwgdHlwZWluZm8sIGF0dHIsIGRvYylcbiAgICAgICAgc2VsZi50eXBlX2F0dHIgPSBhdHRyXG4gICAgICAgIHNlbGYuY29jbGFzc19jbHNpZCA9IE5vbmVcblxuICAgIGRlZiBXcml0ZUNsYXNzKHNlbGYsIGdlbmVyYXRvcik6XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIG5vdCBzZWxmLmJJc0Rpc3BhdGNoXG4gICAgICAgICAgICBhbmQgbm90IHNlbGYudHlwZV9hdHRyLnR5cGVraW5kID09IHB5dGhvbmNvbS5US0lORF9ESVNQQVRDSFxuICAgICAgICApOlxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICMgVGhpcyBpcyBwcmV0dHkgc2NyZXdleSAtIG5vdyB3ZSBoYXZlIHZ0YWJsZSBzdXBwb3J0IHdlXG4gICAgICAgICMgc2hvdWxkIHByb2JhYmx5IHJldGhpbmsgdGhpcyAoaWUsIG1heWJlIHdyaXRlIGJvdGggc2lkZXMgZm9yIHNpbmtzLCBldGMpXG4gICAgICAgIGlmIHNlbGYuYklzU2luazpcbiAgICAgICAgICAgIHNlbGYuV3JpdGVFdmVudFNpbmtDbGFzc0hlYWRlcihnZW5lcmF0b3IpXG4gICAgICAgICAgICBzZWxmLldyaXRlQ2FsbGJhY2tDbGFzc0JvZHkoZ2VuZXJhdG9yKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgc2VsZi5Xcml0ZUNsYXNzSGVhZGVyKGdlbmVyYXRvcilcbiAgICAgICAgICAgIHNlbGYuV3JpdGVDbGFzc0JvZHkoZ2VuZXJhdG9yKVxuICAgICAgICBwcmludChmaWxlPWdlbmVyYXRvci5maWxlKVxuICAgICAgICBzZWxmLmJXcml0dGVuID0gMVxuXG4gICAgZGVmIFdyaXRlQ2xhc3NIZWFkZXIoc2VsZiwgZ2VuZXJhdG9yKTpcbiAgICAgICAgZ2VuZXJhdG9yLmNoZWNrV3JpdGVEaXNwYXRjaEJhc2VDbGFzcygpXG4gICAgICAgIGRvYyA9IHNlbGYuZG9jXG4gICAgICAgIHN0cmVhbSA9IGdlbmVyYXRvci5maWxlXG4gICAgICAgIHByaW50KCJjbGFzcyAiICsgc2VsZi5weXRob25fbmFtZSArICIoRGlzcGF0Y2hCYXNlQ2xhc3MpOiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBpZiBkb2NbMV06XG4gICAgICAgICAgICBwcmludCgiXFx0IiArIGJ1aWxkLl9tYWtlRG9jU3RyaW5nKGRvY1sxXSksIGZpbGU9c3RyZWFtKVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBwcm9nSWQgPSBweXRob25jb20uUHJvZ0lERnJvbUNMU0lEKHNlbGYuY2xzaWQpXG4gICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAiXFx0IyBUaGlzIGNsYXNzIGlzIGNyZWF0YWJsZSBieSB0aGUgbmFtZSBcJyVzXCciICUgKHByb2dJZCksIGZpbGU9c3RyZWFtXG4gICAgICAgICAgICApXG4gICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yOlxuICAgICAgICAgICAgcGFzc1xuICAgICAgICBwcmludCgiXFx0Q0xTSUQgPSAiICsgcmVwcihzZWxmLmNsc2lkKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGlmIHNlbGYuY29jbGFzc19jbHNpZCBpcyBOb25lOlxuICAgICAgICAgICAgcHJpbnQoIlxcdGNvY2xhc3NfY2xzaWQgPSBOb25lIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBwcmludCgiXFx0Y29jbGFzc19jbHNpZCA9ICIgKyByZXByKHNlbGYuY29jbGFzc19jbHNpZCksIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludChmaWxlPXN0cmVhbSlcbiAgICAgICAgc2VsZi5iV3JpdHRlbiA9IDFcblxuICAgIGRlZiBXcml0ZUV2ZW50U2lua0NsYXNzSGVhZGVyKHNlbGYsIGdlbmVyYXRvcik6XG4gICAgICAgIGdlbmVyYXRvci5jaGVja1dyaXRlRXZlbnRCYXNlQ2xhc3MoKVxuICAgICAgICBkb2MgPSBzZWxmLmRvY1xuICAgICAgICBzdHJlYW0gPSBnZW5lcmF0b3IuZmlsZVxuICAgICAgICBwcmludCgiY2xhc3MgIiArIHNlbGYucHl0aG9uX25hbWUgKyAiOiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBpZiBkb2NbMV06XG4gICAgICAgICAgICBwcmludCgiXFx0IiArIGJ1aWxkLl9tYWtlRG9jU3RyaW5nKGRvY1sxXSksIGZpbGU9c3RyZWFtKVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBwcm9nSWQgPSBweXRob25jb20uUHJvZ0lERnJvbUNMU0lEKHNlbGYuY2xzaWQpXG4gICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAiXFx0IyBUaGlzIGNsYXNzIGlzIGNyZWF0YWJsZSBieSB0aGUgbmFtZSBcJyVzXCciICUgKHByb2dJZCksIGZpbGU9c3RyZWFtXG4gICAgICAgICAgICApXG4gICAgICAgIGV4Y2VwdCBweXRob25jb20uY29tX2Vycm9yOlxuICAgICAgICAgICAgcGFzc1xuICAgICAgICBwcmludCgiXFx0Q0xTSUQgPSBDTFNJRF9TaW5rID0gIiArIHJlcHIoc2VsZi5jbHNpZCksIGZpbGU9c3RyZWFtKVxuICAgICAgICBpZiBzZWxmLmNvY2xhc3NfY2xzaWQgaXMgTm9uZTpcbiAgICAgICAgICAgIHByaW50KCJcXHRjb2NsYXNzX2Nsc2lkID0gTm9uZSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgcHJpbnQoIlxcdGNvY2xhc3NfY2xzaWQgPSAiICsgcmVwcihzZWxmLmNvY2xhc3NfY2xzaWQpLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdF9wdWJsaWNfbWV0aG9kc18gPSBbXSAjIEZvciBDT00gU2VydmVyIHN1cHBvcnQiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgV3JpdGVTaW5rRXZlbnRNYXAoc2VsZiwgc3RyZWFtKVxuICAgICAgICBwcmludChmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdGRlZiBfX2luaXRfXyhzZWxmLCBvb2JqID0gTm9uZSk6IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRcXHRpZiBvb2JqIGlzIE5vbmU6IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRcXHRcXHRzZWxmLl9vbGVjcCA9IE5vbmUiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdFxcdGVsc2U6IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRcXHRcXHRpbXBvcnQgd2luMzJjb20uc2VydmVyLnV0aWwiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiXFx0XFx0XFx0ZnJvbSB3aW4zMmNvbS5zZXJ2ZXIucG9saWN5IGltcG9ydCBFdmVudEhhbmRsZXJQb2xpY3kiLCBmaWxlPXN0cmVhbVxuICAgICAgICApXG4gICAgICAgIHByaW50KFxuICAgICAgICAgICAgIlxcdFxcdFxcdGNwYz1vb2JqLl9vbGVvYmpfLlF1ZXJ5SW50ZXJmYWNlKHB5dGhvbmNvbS5JSURfSUNvbm5lY3Rpb25Qb2ludENvbnRhaW5lcikiLFxuICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgIClcbiAgICAgICAgcHJpbnQoIlxcdFxcdFxcdGNwPWNwYy5GaW5kQ29ubmVjdGlvblBvaW50KHNlbGYuQ0xTSURfU2luaykiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiXFx0XFx0XFx0Y29va2llPWNwLkFkdmlzZSh3aW4zMmNvbS5zZXJ2ZXIudXRpbC53cmFwKHNlbGYsIHVzZVBvbGljeT1FdmVudEhhbmRsZXJQb2xpY3kpKSIsXG4gICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgKVxuICAgICAgICBwcmludCgiXFx0XFx0XFx0c2VsZi5fb2xlY3Asc2VsZi5fb2xlY3BfY29va2llID0gY3AsY29va2llIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRkZWYgX19kZWxfXyhzZWxmKToiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdFxcdHRyeToiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdFxcdFxcdHNlbGYuY2xvc2UoKSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0XFx0ZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRcXHRcXHRwYXNzIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRkZWYgY2xvc2Uoc2VsZik6IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRcXHRpZiBzZWxmLl9vbGVjcCBpcyBub3QgTm9uZToiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiXFx0XFx0XFx0Y3AsY29va2llLHNlbGYuX29sZWNwLHNlbGYuX29sZWNwX2Nvb2tpZSA9IHNlbGYuX29sZWNwLHNlbGYuX29sZWNwX2Nvb2tpZSxOb25lLE5vbmUiLFxuICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgIClcbiAgICAgICAgcHJpbnQoIlxcdFxcdFxcdGNwLlVuYWR2aXNlKGNvb2tpZSkiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdGRlZiBfcXVlcnlfaW50ZXJmYWNlXyhzZWxmLCBpaWQpOiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0XFx0aW1wb3J0IHdpbjMyY29tLnNlcnZlci51dGlsIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KFxuICAgICAgICAgICAgIlxcdFxcdGlmIGlpZD09c2VsZi5DTFNJRF9TaW5rOiByZXR1cm4gd2luMzJjb20uc2VydmVyLnV0aWwud3JhcChzZWxmKSIsXG4gICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgKVxuICAgICAgICBwcmludChmaWxlPXN0cmVhbSlcbiAgICAgICAgc2VsZi5iV3JpdHRlbiA9IDFcblxuICAgIGRlZiBXcml0ZUNhbGxiYWNrQ2xhc3NCb2R5KHNlbGYsIGdlbmVyYXRvcik6XG4gICAgICAgIHN0cmVhbSA9IGdlbmVyYXRvci5maWxlXG4gICAgICAgIHByaW50KCJcXHQjIEV2ZW50IEhhbmRsZXJzIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KFxuICAgICAgICAgICAgIlxcdCMgSWYgeW91IGNyZWF0ZSBoYW5kbGVycywgdGhleSBzaG91bGQgaGF2ZSB0aGUgZm9sbG93aW5nIHByb3RvdHlwZXM6IixcbiAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICApXG4gICAgICAgIGZvciBuYW1lLCBlbnRyeSBpbiAoXG4gICAgICAgICAgICBsaXN0KHNlbGYucHJvcE1hcEdldC5pdGVtcygpKVxuICAgICAgICAgICAgKyBsaXN0KHNlbGYucHJvcE1hcFB1dC5pdGVtcygpKVxuICAgICAgICAgICAgKyBsaXN0KHNlbGYubWFwRnVuY3MuaXRlbXMoKSlcbiAgICAgICAgKTpcbiAgICAgICAgICAgIGZkZXNjID0gZW50cnkuZGVzY1xuICAgICAgICAgICAgbWV0aE5hbWUgPSBNYWtlRXZlbnRNZXRob2ROYW1lKGVudHJ5Lm5hbWVzWzBdKVxuICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgIiNcXHRkZWYgIlxuICAgICAgICAgICAgICAgICsgbWV0aE5hbWVcbiAgICAgICAgICAgICAgICArICIoc2VsZiJcbiAgICAgICAgICAgICAgICArIGJ1aWxkLkJ1aWxkQ2FsbExpc3QoXG4gICAgICAgICAgICAgICAgICAgIGZkZXNjLFxuICAgICAgICAgICAgICAgICAgICBlbnRyeS5uYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgImRlZmF1bHROYW1lZE9wdEFyZyIsXG4gICAgICAgICAgICAgICAgICAgICJkZWZhdWx0TmFtZWROb3RPcHRBcmciLFxuICAgICAgICAgICAgICAgICAgICAiZGVmYXVsdFVubmFtZWRBcmciLFxuICAgICAgICAgICAgICAgICAgICAicHl0aG9uY29tLk1pc3NpbmciLFxuICAgICAgICAgICAgICAgICAgICBpc19jb21tZW50PVRydWUsXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICsgIik6IixcbiAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGlmIGVudHJ5LmRvYyBhbmQgZW50cnkuZG9jWzFdOlxuICAgICAgICAgICAgICAgIHByaW50KCIjXFx0XFx0IiArIGJ1aWxkLl9tYWtlRG9jU3RyaW5nKGVudHJ5LmRvY1sxXSksIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludChmaWxlPXN0cmVhbSlcbiAgICAgICAgc2VsZi5iV3JpdHRlbiA9IDFcblxuICAgIGRlZiBXcml0ZUNsYXNzQm9keShzZWxmLCBnZW5lcmF0b3IpOlxuICAgICAgICBzdHJlYW0gPSBnZW5lcmF0b3IuZmlsZVxuICAgICAgICAjIFdyaXRlIGluIGFscGhhIG9yZGVyLlxuICAgICAgICBuYW1lcyA9IGxpc3Qoc2VsZi5tYXBGdW5jcy5rZXlzKCkpXG4gICAgICAgIG5hbWVzLnNvcnQoKVxuICAgICAgICBzcGVjaWFsSXRlbXMgPSB7XG4gICAgICAgICAgICAiY291bnQiOiBOb25lLFxuICAgICAgICAgICAgIml0ZW0iOiBOb25lLFxuICAgICAgICAgICAgInZhbHVlIjogTm9uZSxcbiAgICAgICAgICAgICJfbmV3ZW51bSI6IE5vbmUsXG4gICAgICAgIH0gICMgSWYgZm91bmQsIHdpbGwgZW5kIHVwIHdpdGggKGVudHJ5LCBpbnZva2VfdHVwZSlcbiAgICAgICAgaXRlbUNvdW50ID0gTm9uZVxuICAgICAgICBmb3IgbmFtZSBpbiBuYW1lczpcbiAgICAgICAgICAgIGVudHJ5ID0gc2VsZi5tYXBGdW5jc1tuYW1lXVxuICAgICAgICAgICAgYXNzZXJ0IGVudHJ5LmRlc2MuZGVzY2tpbmQgPT0gcHl0aG9uY29tLkRFU0NLSU5EX0ZVTkNERVNDXG4gICAgICAgICAgICAjIHNraXAgW3Jlc3RyaWN0ZWRdIG1ldGhvZHMsIHVubGVzcyBpdCBpcyB0aGVcbiAgICAgICAgICAgICMgZW51bWVyYXRvciAod2hpY2gsIGJlaW5nIHBhcnQgb2YgdGhlICJzeXN0ZW0iLFxuICAgICAgICAgICAgIyB3ZSBrbm93IGFib3V0IGFuZCBjYW4gdXNlKVxuICAgICAgICAgICAgZGlzcGlkID0gZW50cnkuZGVzYy5tZW1pZFxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGVudHJ5LmRlc2Mud0Z1bmNGbGFncyAmIHB5dGhvbmNvbS5GVU5DRkxBR19GUkVTVFJJQ1RFRFxuICAgICAgICAgICAgICAgIGFuZCBkaXNwaWQgIT0gcHl0aG9uY29tLkRJU1BJRF9ORVdFTlVNXG4gICAgICAgICAgICApOlxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICAjIElmIG5vdCBhY2Nlc3NpYmxlIHZpYSBJRGlzcGF0Y2gsIHRoZW4gd2UgY2FuXCd0IHVzZSBpdCBoZXJlLlxuICAgICAgICAgICAgaWYgZW50cnkuZGVzYy5mdW5ja2luZCAhPSBweXRob25jb20uRlVOQ19ESVNQQVRDSDpcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgaWYgZGlzcGlkID09IHB5dGhvbmNvbS5ESVNQSURfVkFMVUU6XG4gICAgICAgICAgICAgICAgbGtleSA9ICJ2YWx1ZSJcbiAgICAgICAgICAgIGVsaWYgZGlzcGlkID09IHB5dGhvbmNvbS5ESVNQSURfTkVXRU5VTTpcbiAgICAgICAgICAgICAgICBzcGVjaWFsSXRlbXNbIl9uZXdlbnVtIl0gPSAoZW50cnksIGVudHJ5LmRlc2MuaW52a2luZCwgTm9uZSlcbiAgICAgICAgICAgICAgICBjb250aW51ZSAgIyBEb250IGJ1aWxkIHRoaXMgb25lIG5vdyFcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgbGtleSA9IG5hbWUubG93ZXIoKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGxrZXkgaW4gc3BlY2lhbEl0ZW1zIGFuZCBzcGVjaWFsSXRlbXNbbGtleV0gaXMgTm9uZVxuICAgICAgICAgICAgKTogICMgcmVtZW1iZXIgaWYgYSBzcGVjaWFsIG9uZS5cbiAgICAgICAgICAgICAgICBzcGVjaWFsSXRlbXNbbGtleV0gPSAoZW50cnksIGVudHJ5LmRlc2MuaW52a2luZCwgTm9uZSlcbiAgICAgICAgICAgIGlmIGdlbmVyYXRvci5iQnVpbGRIaWRkZW4gb3Igbm90IGVudHJ5LmhpZGRlbjpcbiAgICAgICAgICAgICAgICBpZiBlbnRyeS5HZXRSZXN1bHROYW1lKCk6XG4gICAgICAgICAgICAgICAgICAgIHByaW50KCJcXHQjIFJlc3VsdCBpcyBvZiB0eXBlICIgKyBlbnRyeS5HZXRSZXN1bHROYW1lKCksIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgICAgIGlmIGVudHJ5Lndhc1Byb3BlcnR5OlxuICAgICAgICAgICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAgICAgICAgICJcXHQjIFRoZSBtZXRob2QgJXMgaXMgYWN0dWFsbHkgYSBwcm9wZXJ0eSwgYnV0IG11c3QgYmUgdXNlZCBhcyBhIG1ldGhvZCB0byBjb3JyZWN0bHkgcGFzcyB0aGUgYXJndW1lbnRzIlxuICAgICAgICAgICAgICAgICAgICAgICAgJSBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByZXQgPSBzZWxmLk1ha2VGdW5jTWV0aG9kKGVudHJ5LCBidWlsZC5NYWtlUHVibGljQXR0cmlidXRlTmFtZShuYW1lKSlcbiAgICAgICAgICAgICAgICBmb3IgbGluZSBpbiByZXQ6XG4gICAgICAgICAgICAgICAgICAgIHByaW50KGxpbmUsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0X3Byb3BfbWFwX2dldF8gPSB7IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIG5hbWVzID0gbGlzdChzZWxmLnByb3BNYXAua2V5cygpKVxuICAgICAgICBuYW1lcy5zb3J0KClcbiAgICAgICAgZm9yIGtleSBpbiBuYW1lczpcbiAgICAgICAgICAgIGVudHJ5ID0gc2VsZi5wcm9wTWFwW2tleV1cbiAgICAgICAgICAgIGlmIGdlbmVyYXRvci5iQnVpbGRIaWRkZW4gb3Igbm90IGVudHJ5LmhpZGRlbjpcbiAgICAgICAgICAgICAgICByZXN1bHROYW1lID0gZW50cnkuR2V0UmVzdWx0TmFtZSgpXG4gICAgICAgICAgICAgICAgaWYgcmVzdWx0TmFtZTpcbiAgICAgICAgICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAiXFx0XFx0IyBQcm9wZXJ0eSBcJyVzXCcgaXMgYW4gb2JqZWN0IG9mIHR5cGUgXCclc1wnIlxuICAgICAgICAgICAgICAgICAgICAgICAgJSAoa2V5LCByZXN1bHROYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgbGtleSA9IGtleS5sb3dlcigpXG4gICAgICAgICAgICAgICAgZGV0YWlscyA9IGVudHJ5LmRlc2NcbiAgICAgICAgICAgICAgICByZXN1bHREZXNjID0gZGV0YWlsc1syXVxuICAgICAgICAgICAgICAgIGFyZ0Rlc2MgPSAoKVxuICAgICAgICAgICAgICAgIG1hcEVudHJ5ID0gTWFrZU1hcExpbmVFbnRyeShcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5tZW1pZCxcbiAgICAgICAgICAgICAgICAgICAgcHl0aG9uY29tLkRJU1BBVENIX1BST1BFUlRZR0VULFxuICAgICAgICAgICAgICAgICAgICByZXN1bHREZXNjLFxuICAgICAgICAgICAgICAgICAgICBhcmdEZXNjLFxuICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5LkdldFJlc3VsdENMU0lEU3RyKCksXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgaWYgZGV0YWlscy5tZW1pZCA9PSBweXRob25jb20uRElTUElEX1ZBTFVFOlxuICAgICAgICAgICAgICAgICAgICBsa2V5ID0gInZhbHVlIlxuICAgICAgICAgICAgICAgIGVsaWYgZGV0YWlscy5tZW1pZCA9PSBweXRob25jb20uRElTUElEX05FV0VOVU06XG4gICAgICAgICAgICAgICAgICAgIGxrZXkgPSAiX25ld2VudW0iXG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgbGtleSA9IGtleS5sb3dlcigpXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBsa2V5IGluIHNwZWNpYWxJdGVtcyBhbmQgc3BlY2lhbEl0ZW1zW2xrZXldIGlzIE5vbmVcbiAgICAgICAgICAgICAgICApOiAgIyByZW1lbWJlciBpZiBhIHNwZWNpYWwgb25lLlxuICAgICAgICAgICAgICAgICAgICBzcGVjaWFsSXRlbXNbbGtleV0gPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5ESVNQQVRDSF9QUk9QRVJUWUdFVCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcEVudHJ5LFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICMgQWxsIHNwZWNpYWwgbWV0aG9kcywgZXhjZXB0IF9uZXdlbnVtLCBhcmUgd3JpdHRlblxuICAgICAgICAgICAgICAgICAgICAjICJub3JtYWxseSIuICBUaGlzIGlzIGEgbWVzcyFcbiAgICAgICAgICAgICAgICAgICAgaWYgZGV0YWlscy5tZW1pZCA9PSBweXRob25jb20uRElTUElEX05FV0VOVU06XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgIFwnXFx0XFx0IiVzIjogJXMsXCcgJSAoYnVpbGQuTWFrZVB1YmxpY0F0dHJpYnV0ZU5hbWUoa2V5KSwgbWFwRW50cnkpLFxuICAgICAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgIG5hbWVzID0gbGlzdChzZWxmLnByb3BNYXBHZXQua2V5cygpKVxuICAgICAgICBuYW1lcy5zb3J0KClcbiAgICAgICAgZm9yIGtleSBpbiBuYW1lczpcbiAgICAgICAgICAgIGVudHJ5ID0gc2VsZi5wcm9wTWFwR2V0W2tleV1cbiAgICAgICAgICAgIGlmIGdlbmVyYXRvci5iQnVpbGRIaWRkZW4gb3Igbm90IGVudHJ5LmhpZGRlbjpcbiAgICAgICAgICAgICAgICBpZiBlbnRyeS5HZXRSZXN1bHROYW1lKCk6XG4gICAgICAgICAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgIlxcdFxcdCMgTWV0aG9kIFwnJXNcJyByZXR1cm5zIG9iamVjdCBvZiB0eXBlIFwnJXNcJyJcbiAgICAgICAgICAgICAgICAgICAgICAgICUgKGtleSwgZW50cnkuR2V0UmVzdWx0TmFtZSgpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgZGV0YWlscyA9IGVudHJ5LmRlc2NcbiAgICAgICAgICAgICAgICBhc3NlcnQgZGV0YWlscy5kZXNja2luZCA9PSBweXRob25jb20uREVTQ0tJTkRfRlVOQ0RFU0NcbiAgICAgICAgICAgICAgICBsa2V5ID0ga2V5Lmxvd2VyKClcbiAgICAgICAgICAgICAgICBhcmdEZXNjID0gZGV0YWlsc1syXVxuICAgICAgICAgICAgICAgIHJlc3VsdERlc2MgPSBkZXRhaWxzWzhdXG4gICAgICAgICAgICAgICAgbWFwRW50cnkgPSBNYWtlTWFwTGluZUVudHJ5KFxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzWzBdLFxuICAgICAgICAgICAgICAgICAgICBweXRob25jb20uRElTUEFUQ0hfUFJPUEVSVFlHRVQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdERlc2MsXG4gICAgICAgICAgICAgICAgICAgIGFyZ0Rlc2MsXG4gICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgZW50cnkuR2V0UmVzdWx0Q0xTSURTdHIoKSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgaWYgZGV0YWlscy5tZW1pZCA9PSBweXRob25jb20uRElTUElEX1ZBTFVFOlxuICAgICAgICAgICAgICAgICAgICBsa2V5ID0gInZhbHVlIlxuICAgICAgICAgICAgICAgIGVsaWYgZGV0YWlscy5tZW1pZCA9PSBweXRob25jb20uRElTUElEX05FV0VOVU06XG4gICAgICAgICAgICAgICAgICAgIGxrZXkgPSAiX25ld2VudW0iXG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgbGtleSA9IGtleS5sb3dlcigpXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBsa2V5IGluIHNwZWNpYWxJdGVtcyBhbmQgc3BlY2lhbEl0ZW1zW2xrZXldIGlzIE5vbmVcbiAgICAgICAgICAgICAgICApOiAgIyByZW1lbWJlciBpZiBhIHNwZWNpYWwgb25lLlxuICAgICAgICAgICAgICAgICAgICBzcGVjaWFsSXRlbXNbbGtleV0gPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5ESVNQQVRDSF9QUk9QRVJUWUdFVCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcEVudHJ5LFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICMgQWxsIHNwZWNpYWwgbWV0aG9kcywgZXhjZXB0IF9uZXdlbnVtLCBhcmUgd3JpdHRlblxuICAgICAgICAgICAgICAgICAgICAjICJub3JtYWxseSIuICBUaGlzIGlzIGEgbWVzcyFcbiAgICAgICAgICAgICAgICAgICAgaWYgZGV0YWlscy5tZW1pZCA9PSBweXRob25jb20uRElTUElEX05FV0VOVU06XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICAgICBcJ1xcdFxcdCIlcyI6ICVzLFwnICUgKGJ1aWxkLk1ha2VQdWJsaWNBdHRyaWJ1dGVOYW1lKGtleSksIG1hcEVudHJ5KSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgIHByaW50KCJcXHR9IiwgZmlsZT1zdHJlYW0pXG5cbiAgICAgICAgcHJpbnQoIlxcdF9wcm9wX21hcF9wdXRfID0geyIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAjIFRoZXNlIGFyZSAiSW52b2tlIiBhcmdzXG4gICAgICAgIG5hbWVzID0gbGlzdChzZWxmLnByb3BNYXAua2V5cygpKVxuICAgICAgICBuYW1lcy5zb3J0KClcbiAgICAgICAgZm9yIGtleSBpbiBuYW1lczpcbiAgICAgICAgICAgIGVudHJ5ID0gc2VsZi5wcm9wTWFwW2tleV1cbiAgICAgICAgICAgIGlmIGdlbmVyYXRvci5iQnVpbGRIaWRkZW4gb3Igbm90IGVudHJ5LmhpZGRlbjpcbiAgICAgICAgICAgICAgICBsa2V5ID0ga2V5Lmxvd2VyKClcbiAgICAgICAgICAgICAgICBkZXRhaWxzID0gZW50cnkuZGVzY1xuICAgICAgICAgICAgICAgICMgSWYgZGVmYXVsdCBhcmcgaXMgTm9uZSwgd3JpdGUgYW4gZW1wdHkgdHVwbGVcbiAgICAgICAgICAgICAgICBkZWZBcmdEZXNjID0gYnVpbGQuTWFrZURlZmF1bHRBcmdSZXByKGRldGFpbHNbMl0pXG4gICAgICAgICAgICAgICAgaWYgZGVmQXJnRGVzYyBpcyBOb25lOlxuICAgICAgICAgICAgICAgICAgICBkZWZBcmdEZXNjID0gIiJcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBkZWZBcmdEZXNjID0gZGVmQXJnRGVzYyArICIsIlxuICAgICAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICAgICBcJ1xcdFxcdCIlcyIgOiAoKCVzLCBMQ0lELCAlZCwgMCksKCVzKSksXCdcbiAgICAgICAgICAgICAgICAgICAgJSAoXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZC5NYWtlUHVibGljQXR0cmlidXRlTmFtZShrZXkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsc1swXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5ESVNQQVRDSF9QUk9QRVJUWVBVVCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZkFyZ0Rlc2MsXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgICAgIClcblxuICAgICAgICBuYW1lcyA9IGxpc3Qoc2VsZi5wcm9wTWFwUHV0LmtleXMoKSlcbiAgICAgICAgbmFtZXMuc29ydCgpXG4gICAgICAgIGZvciBrZXkgaW4gbmFtZXM6XG4gICAgICAgICAgICBlbnRyeSA9IHNlbGYucHJvcE1hcFB1dFtrZXldXG4gICAgICAgICAgICBpZiBnZW5lcmF0b3IuYkJ1aWxkSGlkZGVuIG9yIG5vdCBlbnRyeS5oaWRkZW46XG4gICAgICAgICAgICAgICAgZGV0YWlscyA9IGVudHJ5LmRlc2NcbiAgICAgICAgICAgICAgICBkZWZBcmdEZXNjID0gTWFrZURlZmF1bHRBcmdzRm9yUHJvcGVydHlQdXQoZGV0YWlsc1syXSlcbiAgICAgICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAgICAgXCdcXHRcXHQiJXMiOiAoKCVzLCBMQ0lELCAlZCwgMCksJXMpLFwnXG4gICAgICAgICAgICAgICAgICAgICUgKFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGQuTWFrZVB1YmxpY0F0dHJpYnV0ZU5hbWUoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHNbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzWzRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmQXJnRGVzYyxcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICBwcmludCgiXFx0fSIsIGZpbGU9c3RyZWFtKVxuXG4gICAgICAgIGlmIHNwZWNpYWxJdGVtc1sidmFsdWUiXTpcbiAgICAgICAgICAgIGVudHJ5LCBpbnZva2V0eXBlLCBwcm9wQXJncyA9IHNwZWNpYWxJdGVtc1sidmFsdWUiXVxuICAgICAgICAgICAgaWYgcHJvcEFyZ3MgaXMgTm9uZTpcbiAgICAgICAgICAgICAgICB0eXBlbmFtZSA9ICJtZXRob2QiXG4gICAgICAgICAgICAgICAgcmV0ID0gc2VsZi5NYWtlRnVuY01ldGhvZChlbnRyeSwgIl9fY2FsbF9fIilcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgdHlwZW5hbWUgPSAicHJvcGVydHkiXG4gICAgICAgICAgICAgICAgcmV0ID0gW1xuICAgICAgICAgICAgICAgICAgICAiXFx0ZGVmIF9fY2FsbF9fKHNlbGYpOlxcblxcdFxcdHJldHVybiBzZWxmLl9BcHBseVR5cGVzXygqJXMpIlxuICAgICAgICAgICAgICAgICAgICAlIHByb3BBcmdzXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgIlxcdCMgRGVmYXVsdCAlcyBmb3IgdGhpcyBjbGFzcyBpcyBcJyVzXCciICUgKHR5cGVuYW1lLCBlbnRyeS5uYW1lc1swXSksXG4gICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBmb3IgbGluZSBpbiByZXQ6XG4gICAgICAgICAgICAgICAgcHJpbnQobGluZSwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludCgiXFx0ZGVmIF9fc3RyX18oc2VsZiwgKmFyZ3MpOiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoIlxcdFxcdHJldHVybiBzdHIoc2VsZi5fX2NhbGxfXygqYXJncykpIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludCgiXFx0ZGVmIF9faW50X18oc2VsZiwgKmFyZ3MpOiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoIlxcdFxcdHJldHVybiBpbnQoc2VsZi5fX2NhbGxfXygqYXJncykpIiwgZmlsZT1zdHJlYW0pXG5cbiAgICAgICAgIyBfTmV3RW51bSAoRElTUElEX05FV0VOVU0pIGRvZXMgbm90IGFwcGVhciBpbiB0eXBlbGliIGZvciBtYW55IG9mZmljZSBvYmplY3RzLFxuICAgICAgICAjIGJ1dCBpdCBjYW4gc3RpbGwgYmUgcmV0cmlldmVkIGF0IHJ1bnRpbWUsIHNvICBhbHdheXMgY3JlYXRlIF9faXRlcl9fLlxuICAgICAgICAjIEFsc28sIHNvbWUgb2YgdGhvc2Ugc2FtZSBvYmplY3RzIHVzZSAxLWJhc2VkIGluZGV4aW5nLCBjYXVzaW5nIHRoZSBvbGQtc3R5bGVcbiAgICAgICAgIyBfX2dldGl0ZW1fXyBpdGVyYXRpb24gdG8gZmFpbCBmb3IgaW5kZXggMCB3aGVyZSB0aGUgZHluYW1pYyBpdGVyYXRpb24gc3VjY2VlZHMuXG4gICAgICAgIGlmIHNwZWNpYWxJdGVtc1siX25ld2VudW0iXTpcbiAgICAgICAgICAgIGVudW1FbnRyeSwgaW52b2tldHlwZSwgcHJvcEFyZ3MgPSBzcGVjaWFsSXRlbXNbIl9uZXdlbnVtIl1cbiAgICAgICAgICAgIGFzc2VydCBlbnVtRW50cnkuZGVzYy5kZXNja2luZCA9PSBweXRob25jb20uREVTQ0tJTkRfRlVOQ0RFU0NcbiAgICAgICAgICAgIGludmtpbmQgPSBlbnVtRW50cnkuZGVzYy5pbnZraW5kXG4gICAgICAgICAgICAjID8/PyBXb3VsZG5cJ3QgdGhpcyBiZSB0aGUgcmVzdWx0Q0xTSUQgZm9yIHRoZSBpdGVyYXRvciBpdHNlbGYsIHJhdGhlciB0aGFuIHRoZSByZXN1bHRDTFNJRFxuICAgICAgICAgICAgIyAgZm9yIHRoZSByZXN1bHQgb2YgZWFjaCBOZXh0KCkgY2FsbCwgd2hpY2ggaXMgd2hhdCBpdFwncyB1c2VkIGZvciA/Pz9cbiAgICAgICAgICAgIHJlc3VsdENMU0lEID0gZW51bUVudHJ5LkdldFJlc3VsdENMU0lEU3RyKClcbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIGludmtpbmQgPSBweXRob25jb20uRElTUEFUQ0hfTUVUSE9EIHwgcHl0aG9uY29tLkRJU1BBVENIX1BST1BFUlRZR0VUXG4gICAgICAgICAgICByZXN1bHRDTFNJRCA9ICJOb25lIlxuICAgICAgICAjIElmIHdlIGRvbnQgaGF2ZSBhIGdvb2QgQ0xTSUQgZm9yIHRoZSBlbnVtIHJlc3VsdCwgYXNzdW1lIGl0IGlzIHRoZSBzYW1lIGFzIHRoZSBJdGVtKCkgbWV0aG9kLlxuICAgICAgICBpZiByZXN1bHRDTFNJRCA9PSAiTm9uZSIgYW5kICJJdGVtIiBpbiBzZWxmLm1hcEZ1bmNzOlxuICAgICAgICAgICAgcmVzdWx0Q0xTSUQgPSBzZWxmLm1hcEZ1bmNzWyJJdGVtIl0uR2V0UmVzdWx0Q0xTSURTdHIoKVxuICAgICAgICBwcmludCgiXFx0ZGVmIF9faXRlcl9fKHNlbGYpOiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludChcJ1xcdFxcdCJSZXR1cm4gYSBQeXRob24gaXRlcmF0b3IgZm9yIHRoaXMgb2JqZWN0IlwnLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdFxcdHRyeToiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiXFx0XFx0XFx0b2IgPSBzZWxmLl9vbGVvYmpfLkludm9rZVR5cGVzKCVkLExDSUQsJWQsKDEzLCAxMCksKCkpIlxuICAgICAgICAgICAgJSAocHl0aG9uY29tLkRJU1BJRF9ORVdFTlVNLCBpbnZraW5kKSxcbiAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICApXG4gICAgICAgIHByaW50KCJcXHRcXHRleGNlcHQgcHl0aG9uY29tLmVycm9yOiIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludChcbiAgICAgICAgICAgIFwnXFx0XFx0XFx0cmFpc2UgVHlwZUVycm9yKCJUaGlzIG9iamVjdCBkb2VzIG5vdCBzdXBwb3J0IGVudW1lcmF0aW9uIilcJyxcbiAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICApXG4gICAgICAgICMgSXRlcmF0b3IgaXMgd3JhcHBlZCBhcyBQeUlFbnVtVmFyaWFudCwgYW5kIGVhY2ggcmVzdWx0IG9mIF9fbmV4dF9fIGlzIERpc3BhdGNoXCdlZCBpZiBuZWNlc3NhcnlcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiXFx0XFx0cmV0dXJuIHdpbjMyY29tLmNsaWVudC51dGlsLkl0ZXJhdG9yKG9iLCAlcykiICUgcmVzdWx0Q0xTSUQsXG4gICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgKVxuXG4gICAgICAgIGlmIHNwZWNpYWxJdGVtc1siaXRlbSJdOlxuICAgICAgICAgICAgZW50cnksIGludm9rZXR5cGUsIHByb3BBcmdzID0gc3BlY2lhbEl0ZW1zWyJpdGVtIl1cbiAgICAgICAgICAgIHJlc3VsdENMU0lEID0gZW50cnkuR2V0UmVzdWx0Q0xTSURTdHIoKVxuICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgIlxcdCNUaGlzIGNsYXNzIGhhcyBJdGVtIHByb3BlcnR5L21ldGhvZCB3aGljaCBhbGxvd3MgaW5kZXhlZCBhY2Nlc3Mgd2l0aCB0aGUgb2JqZWN0W2tleV0gc3ludGF4LiIsXG4gICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAiXFx0I1NvbWUgb2JqZWN0cyB3aWxsIGFjY2VwdCBhIHN0cmluZyBvciBvdGhlciB0eXBlIG9mIGtleSBpbiBhZGRpdGlvbiB0byBpbnRlZ2Vycy4iLFxuICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgIlxcdCNOb3RlIHRoYXQgbWFueSBPZmZpY2Ugb2JqZWN0cyBkbyBub3QgdXNlIHplcm8tYmFzZWQgaW5kZXhpbmcuIixcbiAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHByaW50KCJcXHRkZWYgX19nZXRpdGVtX18oc2VsZiwga2V5KToiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgIFwnXFx0XFx0cmV0dXJuIHNlbGYuX2dldF9nb29kX29iamVjdF8oc2VsZi5fb2xlb2JqXy5JbnZva2UoKiglZCwgTENJRCwgJWQsIDEsIGtleSkpLCAiSXRlbSIsICVzKVwnXG4gICAgICAgICAgICAgICAgJSAoZW50cnkuZGVzYy5tZW1pZCwgaW52b2tldHlwZSwgcmVzdWx0Q0xTSUQpLFxuICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgKVxuXG4gICAgICAgIGlmIHNwZWNpYWxJdGVtc1siY291bnQiXTpcbiAgICAgICAgICAgIGVudHJ5LCBpbnZva2V0eXBlLCBwcm9wQXJncyA9IHNwZWNpYWxJdGVtc1siY291bnQiXVxuICAgICAgICAgICAgaWYgcHJvcEFyZ3MgaXMgTm9uZTpcbiAgICAgICAgICAgICAgICB0eXBlbmFtZSA9ICJtZXRob2QiXG4gICAgICAgICAgICAgICAgcmV0ID0gc2VsZi5NYWtlRnVuY01ldGhvZChlbnRyeSwgIl9fbGVuX18iKVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICB0eXBlbmFtZSA9ICJwcm9wZXJ0eSJcbiAgICAgICAgICAgICAgICByZXQgPSBbXG4gICAgICAgICAgICAgICAgICAgICJcXHRkZWYgX19sZW5fXyhzZWxmKTpcXG5cXHRcXHRyZXR1cm4gc2VsZi5fQXBwbHlUeXBlc18oKiVzKSIgJSBwcm9wQXJnc1xuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICJcXHQjVGhpcyBjbGFzcyBoYXMgQ291bnQoKSAlcyAtIGFsbG93IGxlbihvYikgdG8gcHJvdmlkZSB0aGlzIlxuICAgICAgICAgICAgICAgICUgKHR5cGVuYW1lKSxcbiAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGZvciBsaW5lIGluIHJldDpcbiAgICAgICAgICAgICAgICBwcmludChsaW5lLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgICMgQWxzbyBpbmNsdWRlIGEgX19ub256ZXJvX19cbiAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICJcXHQjVGhpcyBjbGFzcyBoYXMgYSBfX2xlbl9fIC0gdGhpcyBpcyBuZWVkZWQgc28gXCdpZiBvYmplY3Q6XCcgYWx3YXlzIHJldHVybnMgVFJVRS4iLFxuICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcHJpbnQoIlxcdGRlZiBfX25vbnplcm9fXyhzZWxmKToiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KCJcXHRcXHRyZXR1cm4gVHJ1ZSIsIGZpbGU9c3RyZWFtKVxuXG5cbmNsYXNzIENvQ2xhc3NJdGVtKGJ1aWxkLk9sZUl0ZW0sIFdyaXRhYmxlSXRlbSk6XG4gICAgb3JkZXIgPSA1XG4gICAgdHlwZW5hbWUgPSAiQ09DTEFTUyJcblxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0eXBlaW5mbywgYXR0ciwgZG9jPU5vbmUsIHNvdXJjZXM9W10sIGludGVyZmFjZXM9W10sIGJGb3JVc2VyPTEpOlxuICAgICAgICBidWlsZC5PbGVJdGVtLl9faW5pdF9fKHNlbGYsIGRvYylcbiAgICAgICAgc2VsZi5jbHNpZCA9IGF0dHJbMF1cbiAgICAgICAgc2VsZi5zb3VyY2VzID0gc291cmNlc1xuICAgICAgICBzZWxmLmludGVyZmFjZXMgPSBpbnRlcmZhY2VzXG4gICAgICAgIHNlbGYuYklzRGlzcGF0Y2ggPSAxICAjIFByZXRlbmQgaXQgaXMgc28gaXQgaXMgd3JpdHRlbiB0byB0aGUgY2xhc3MgbWFwLlxuXG4gICAgZGVmIFdyaXRlQ2xhc3Moc2VsZiwgZ2VuZXJhdG9yKTpcbiAgICAgICAgZ2VuZXJhdG9yLmNoZWNrV3JpdGVDb0NsYXNzQmFzZUNsYXNzKClcbiAgICAgICAgZG9jID0gc2VsZi5kb2NcbiAgICAgICAgc3RyZWFtID0gZ2VuZXJhdG9yLmZpbGVcbiAgICAgICAgaWYgZ2VuZXJhdG9yLmdlbmVyYXRlX3R5cGUgPT0gR0VOX0RFTUFORF9DSElMRDpcbiAgICAgICAgICAgICMgU29tZSBzcGVjaWFsIGltcG9ydHMgd2UgbXVzdCBzZXR1cC5cbiAgICAgICAgICAgIHJlZmVyZW5jZWRfaXRlbXMgPSBbXVxuICAgICAgICAgICAgZm9yIHJlZiwgZmxhZyBpbiBzZWxmLnNvdXJjZXM6XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlZF9pdGVtcy5hcHBlbmQocmVmKVxuICAgICAgICAgICAgZm9yIHJlZiwgZmxhZyBpbiBzZWxmLmludGVyZmFjZXM6XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlZF9pdGVtcy5hcHBlbmQocmVmKVxuICAgICAgICAgICAgcHJpbnQoImltcG9ydCBzeXMiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIGZvciByZWYgaW4gcmVmZXJlbmNlZF9pdGVtczpcbiAgICAgICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAgICAgIl9faW1wb3J0X18oXCclcy4lc1wnKSIgJSAoZ2VuZXJhdG9yLmJhc2VfbW9kX25hbWUsIHJlZi5weXRob25fbmFtZSksXG4gICAgICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAgICAgIiVzID0gc3lzLm1vZHVsZXNbXCclcy4lc1wnXS4lcyJcbiAgICAgICAgICAgICAgICAgICAgJSAoXG4gICAgICAgICAgICAgICAgICAgICAgICByZWYucHl0aG9uX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0b3IuYmFzZV9tb2RfbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5weXRob25fbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5weXRob25fbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICMgQW5kIHByZXRlbmQgd2UgaGF2ZSB3cml0dGVuIGl0IC0gdGhlIG5hbWUgaXMgbm93IGF2YWlsYWJsZSBhcyBpZiB3ZSBoYWQhXG4gICAgICAgICAgICAgICAgcmVmLmJXcml0dGVuID0gMVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBwcm9nSWQgPSBweXRob25jb20uUHJvZ0lERnJvbUNMU0lEKHNlbGYuY2xzaWQpXG4gICAgICAgICAgICBwcmludCgiIyBUaGlzIENvQ2xhc3MgaXMga25vd24gYnkgdGhlIG5hbWUgXCclc1wnIiAlIChwcm9nSWQpLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgZXhjZXB0IHB5dGhvbmNvbS5jb21fZXJyb3I6XG4gICAgICAgICAgICBwYXNzXG4gICAgICAgIHByaW50KFxuICAgICAgICAgICAgImNsYXNzICVzKENvQ2xhc3NCYXNlQ2xhc3MpOiAjIEEgQ29DbGFzcyIgJSAoc2VsZi5weXRob25fbmFtZSksIGZpbGU9c3RyZWFtXG4gICAgICAgIClcbiAgICAgICAgaWYgZG9jIGFuZCBkb2NbMV06XG4gICAgICAgICAgICBwcmludCgiXFx0IyAiICsgZG9jWzFdLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdENMU0lEID0gJXIiICUgKHNlbGYuY2xzaWQsKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRjb2NsYXNzX3NvdXJjZXMgPSBbIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGRlZkl0ZW0gPSBOb25lXG4gICAgICAgIGZvciBpdGVtLCBmbGFnIGluIHNlbGYuc291cmNlczpcbiAgICAgICAgICAgIGlmIGZsYWcgJiBweXRob25jb20uSU1QTFRZUEVGTEFHX0ZERUZBVUxUOlxuICAgICAgICAgICAgICAgIGRlZkl0ZW0gPSBpdGVtXG4gICAgICAgICAgICAjIElmIHdlIGhhdmUgd3JpdHRlbiBhIFB5dGhvbiBjbGFzcywgcmVmZXJlbmNlIHRoZSBuYW1lIC1cbiAgICAgICAgICAgICMgb3RoZXJ3aXNlIGp1c3QgdGhlIElJRC5cbiAgICAgICAgICAgIGlmIGl0ZW0uYldyaXR0ZW46XG4gICAgICAgICAgICAgICAga2V5ID0gaXRlbS5weXRob25fbmFtZVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBrZXkgPSByZXByKHN0cihpdGVtLmNsc2lkKSkgICMgcmVhbGx5IHRoZSBpaWQuXG4gICAgICAgICAgICBwcmludCgiXFx0XFx0JXMsIiAlIChrZXkpLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoIlxcdF0iLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgaWYgZGVmSXRlbTpcbiAgICAgICAgICAgIGlmIGRlZkl0ZW0uYldyaXR0ZW46XG4gICAgICAgICAgICAgICAgZGVmTmFtZSA9IGRlZkl0ZW0ucHl0aG9uX25hbWVcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgZGVmTmFtZSA9IHJlcHIoc3RyKGRlZkl0ZW0uY2xzaWQpKSAgIyByZWFsbHkgdGhlIGlpZC5cbiAgICAgICAgICAgIHByaW50KCJcXHRkZWZhdWx0X3NvdXJjZSA9ICVzIiAlIChkZWZOYW1lLCksIGZpbGU9c3RyZWFtKVxuICAgICAgICBwcmludCgiXFx0Y29jbGFzc19pbnRlcmZhY2VzID0gWyIsIGZpbGU9c3RyZWFtKVxuICAgICAgICBkZWZJdGVtID0gTm9uZVxuICAgICAgICBmb3IgaXRlbSwgZmxhZyBpbiBzZWxmLmludGVyZmFjZXM6XG4gICAgICAgICAgICBpZiBmbGFnICYgcHl0aG9uY29tLklNUExUWVBFRkxBR19GREVGQVVMVDogICMgYW5kIGR1YWw6XG4gICAgICAgICAgICAgICAgZGVmSXRlbSA9IGl0ZW1cbiAgICAgICAgICAgICMgSWYgd2UgaGF2ZSB3cml0dGVuIGEgY2xhc3MsIHJlZmVyZW5jZSBpdHMgbmFtZSwgb3RoZXJ3aXNlIHRoZSBJSURcbiAgICAgICAgICAgIGlmIGl0ZW0uYldyaXR0ZW46XG4gICAgICAgICAgICAgICAga2V5ID0gaXRlbS5weXRob25fbmFtZVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBrZXkgPSByZXByKHN0cihpdGVtLmNsc2lkKSkgICMgcmVhbGx5IHRoZSBpaWQuXG4gICAgICAgICAgICBwcmludCgiXFx0XFx0JXMsIiAlIChrZXksKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJcXHRdIiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGlmIGRlZkl0ZW06XG4gICAgICAgICAgICBpZiBkZWZJdGVtLmJXcml0dGVuOlxuICAgICAgICAgICAgICAgIGRlZk5hbWUgPSBkZWZJdGVtLnB5dGhvbl9uYW1lXG4gICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgIGRlZk5hbWUgPSByZXByKHN0cihkZWZJdGVtLmNsc2lkKSkgICMgcmVhbGx5IHRoZSBpaWQuXG4gICAgICAgICAgICBwcmludCgiXFx0ZGVmYXVsdF9pbnRlcmZhY2UgPSAlcyIgJSAoZGVmTmFtZSwpLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgc2VsZi5iV3JpdHRlbiA9IDFcbiAgICAgICAgcHJpbnQoZmlsZT1zdHJlYW0pXG5cblxuY2xhc3MgR2VuZXJhdG9yUHJvZ3Jlc3M6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYpOlxuICAgICAgICBwYXNzXG5cbiAgICBkZWYgU3RhcnRpbmcoc2VsZiwgdGxiX2Rlc2MpOlxuICAgICAgICAiIiJDYWxsZWQgd2hlbiB0aGUgcHJvY2VzcyBzdGFydHMuIiIiXG4gICAgICAgIHNlbGYudGxiX2Rlc2MgPSB0bGJfZGVzY1xuXG4gICAgZGVmIEZpbmlzaGVkKHNlbGYpOlxuICAgICAgICAiIiJDYWxsZWQgd2hlbiB0aGUgcHJvY2VzcyBpcyBjb21wbGV0ZS4iIiJcblxuICAgIGRlZiBTZXREZXNjcmlwdGlvbihzZWxmLCBkZXNjLCBtYXh0aWNrcz1Ob25lKTpcbiAgICAgICAgIiIiV2UgYXJlIGVudGVyaW5nIGEgbWFqb3Igc3RlcC4gIElmIG1heHRpY2tzLCB0aGVuIHRoaXNcbiAgICAgICAgaXMgaG93IG1hbnkgdGlja3Mgd2UgZXhwZWN0IHRvIG1ha2UgdW50aWwgZmluaXNoZWRcbiAgICAgICAgIiIiXG5cbiAgICBkZWYgVGljayhzZWxmLCBkZXNjPU5vbmUpOlxuICAgICAgICAiIiJNaW5vciBwcm9ncmVzcyBzdGVwLiAgQ2FuIHByb3ZpZGUgbmV3IGRlc2NyaXB0aW9uIGlmIG5lY2Vzc2FyeSIiIlxuXG4gICAgZGVmIFZlcmJvc2VQcm9ncmVzcyhzZWxmLCBkZXNjKTpcbiAgICAgICAgIiIiVmVyYm9zZS9EZWJ1Z2dpbmcgb3V0cHV0LiIiIlxuXG4gICAgZGVmIExvZ1dhcm5pbmcoc2VsZiwgZGVzYyk6XG4gICAgICAgICIiIklmIGEgd2FybmluZyBpcyBnZW5lcmF0ZWQiIiJcblxuICAgIGRlZiBMb2dCZWdpbkdlbmVyYXRlKHNlbGYsIGZpbGVuYW1lKTpcbiAgICAgICAgcGFzc1xuXG4gICAgZGVmIENsb3NlKHNlbGYpOlxuICAgICAgICBwYXNzXG5cblxuY2xhc3MgR2VuZXJhdG9yOlxuICAgIGRlZiBfX2luaXRfXyhcbiAgICAgICAgc2VsZixcbiAgICAgICAgdHlwZWxpYixcbiAgICAgICAgc291cmNlRmlsZW5hbWUsXG4gICAgICAgIHByb2dyZXNzT2JqZWN0LFxuICAgICAgICBiQnVpbGRIaWRkZW49MSxcbiAgICAgICAgYlVuaWNvZGVUb1N0cmluZz1Ob25lLFxuICAgICk6XG4gICAgICAgIGFzc2VydCBiVW5pY29kZVRvU3RyaW5nIGlzIE5vbmUsICJ0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgZ28gYXdheSJcbiAgICAgICAgc2VsZi5iSGF2ZVdyaXR0ZW5EaXNwYXRjaEJhc2VDbGFzcyA9IDBcbiAgICAgICAgc2VsZi5iSGF2ZVdyaXR0ZW5Db0NsYXNzQmFzZUNsYXNzID0gMFxuICAgICAgICBzZWxmLmJIYXZlV3JpdHRlbkV2ZW50QmFzZUNsYXNzID0gMFxuICAgICAgICBzZWxmLnR5cGVsaWIgPSB0eXBlbGliXG4gICAgICAgIHNlbGYuc291cmNlRmlsZW5hbWUgPSBzb3VyY2VGaWxlbmFtZVxuICAgICAgICBzZWxmLmJCdWlsZEhpZGRlbiA9IGJCdWlsZEhpZGRlblxuICAgICAgICBzZWxmLnByb2dyZXNzID0gcHJvZ3Jlc3NPYmplY3RcbiAgICAgICAgIyBUaGVzZSAyIGFyZSBsYXRlciBhZGRpdGlvbnMgYW5kIG1vc3Qgb2YgdGhlIGNvZGUgc3RpbGwgXCdwcmludFwncy4uLlxuICAgICAgICBzZWxmLmZpbGUgPSBOb25lXG5cbiAgICBkZWYgQ29sbGVjdE9sZUl0ZW1JbmZvc0Zyb21UeXBlKHNlbGYpOlxuICAgICAgICByZXQgPSBbXVxuICAgICAgICBmb3IgaSBpbiByYW5nZShzZWxmLnR5cGVsaWIuR2V0VHlwZUluZm9Db3VudCgpKTpcbiAgICAgICAgICAgIGluZm8gPSBzZWxmLnR5cGVsaWIuR2V0VHlwZUluZm8oaSlcbiAgICAgICAgICAgIGluZm90eXBlID0gc2VsZi50eXBlbGliLkdldFR5cGVJbmZvVHlwZShpKVxuICAgICAgICAgICAgZG9jID0gc2VsZi50eXBlbGliLkdldERvY3VtZW50YXRpb24oaSlcbiAgICAgICAgICAgIGF0dHIgPSBpbmZvLkdldFR5cGVBdHRyKClcbiAgICAgICAgICAgIHJldC5hcHBlbmQoKGluZm8sIGluZm90eXBlLCBkb2MsIGF0dHIpKVxuICAgICAgICByZXR1cm4gcmV0XG5cbiAgICBkZWYgX0J1aWxkX0NvQ2xhc3Moc2VsZiwgdHlwZV9pbmZvX3R1cGxlKTpcbiAgICAgICAgaW5mbywgaW5mb3R5cGUsIGRvYywgYXR0ciA9IHR5cGVfaW5mb190dXBsZVxuICAgICAgICAjIGZpbmQgdGhlIHNvdXJjZSBhbmQgZGlzcGludGVyZmFjZXMgZm9yIHRoZSBjb2NsYXNzXG4gICAgICAgIGNoaWxkX2luZm9zID0gW11cbiAgICAgICAgZm9yIGogaW4gcmFuZ2UoYXR0cls4XSk6XG4gICAgICAgICAgICBmbGFncyA9IGluZm8uR2V0SW1wbFR5cGVGbGFncyhqKVxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgIHJlZlR5cGUgPSBpbmZvLkdldFJlZlR5cGVJbmZvKGluZm8uR2V0UmVmVHlwZU9mSW1wbFR5cGUoaikpXG4gICAgICAgICAgICBleGNlcHQgcHl0aG9uY29tLmNvbV9lcnJvcjpcbiAgICAgICAgICAgICAgICAjIENhblwndCBsb2FkIGEgZGVwZW5kZW50IHR5cGVsaWI/XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIHJlZkF0dHIgPSByZWZUeXBlLkdldFR5cGVBdHRyKClcbiAgICAgICAgICAgIGNoaWxkX2luZm9zLmFwcGVuZChcbiAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgIGluZm8sXG4gICAgICAgICAgICAgICAgICAgIHJlZkF0dHIudHlwZWtpbmQsXG4gICAgICAgICAgICAgICAgICAgIHJlZlR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJlZlR5cGUuR2V0RG9jdW1lbnRhdGlvbigtMSksXG4gICAgICAgICAgICAgICAgICAgIHJlZkF0dHIsXG4gICAgICAgICAgICAgICAgICAgIGZsYWdzLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcblxuICAgICAgICAjIERvbmUgZ2VuZXJhdGluZyBjaGlsZHJlbiAtIG5vdyB0aGUgQ29DbGFzcyBpdHNlbGYuXG4gICAgICAgIG5ld0l0ZW0gPSBDb0NsYXNzSXRlbShpbmZvLCBhdHRyLCBkb2MpXG4gICAgICAgIHJldHVybiBuZXdJdGVtLCBjaGlsZF9pbmZvc1xuXG4gICAgZGVmIF9CdWlsZF9Db0NsYXNzQ2hpbGRyZW4oc2VsZiwgY29jbGFzcywgY29jbGFzc19pbmZvLCBvbGVJdGVtcywgdnRhYmxlSXRlbXMpOlxuICAgICAgICBzb3VyY2VzID0ge31cbiAgICAgICAgaW50ZXJmYWNlcyA9IHt9XG4gICAgICAgIGZvciBpbmZvLCBpbmZvX3R5cGUsIHJlZlR5cGUsIGRvYywgcmVmQXR0ciwgZmxhZ3MgaW4gY29jbGFzc19pbmZvOlxuICAgICAgICAgICAgIyAgICAgICAgICBzeXMuc3RkZXJyLndyaXRlKCJBdHRyIHR5cGVmbGFncyBmb3IgY29jbGFzcyByZWZlcmVuY2VkIG9iamVjdCAlcz0lZCAoJWQpLCB0eXBla2luZD0lZFxcbiIgJSAobmFtZSwgcmVmQXR0ci53VHlwZUZsYWdzLCByZWZBdHRyLndUeXBlRmxhZ3MgJiBweXRob25jb20uVFlQRUZMQUdfRkRVQUwscmVmQXR0ci50eXBla2luZCkpXG4gICAgICAgICAgICBpZiByZWZBdHRyLnR5cGVraW5kID09IHB5dGhvbmNvbS5US0lORF9ESVNQQVRDSCBvciAoXG4gICAgICAgICAgICAgICAgcmVmQXR0ci50eXBla2luZCA9PSBweXRob25jb20uVEtJTkRfSU5URVJGQUNFXG4gICAgICAgICAgICAgICAgYW5kIHJlZkF0dHJbMTFdICYgcHl0aG9uY29tLlRZUEVGTEFHX0ZESVNQQVRDSEFCTEVcbiAgICAgICAgICAgICk6XG4gICAgICAgICAgICAgICAgY2xzaWQgPSByZWZBdHRyWzBdXG4gICAgICAgICAgICAgICAgaWYgY2xzaWQgaW4gb2xlSXRlbXM6XG4gICAgICAgICAgICAgICAgICAgIGRpc3BJdGVtID0gb2xlSXRlbXNbY2xzaWRdXG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgZGlzcEl0ZW0gPSBEaXNwYXRjaEl0ZW0ocmVmVHlwZSwgcmVmQXR0ciwgZG9jKVxuICAgICAgICAgICAgICAgICAgICBvbGVJdGVtc1tkaXNwSXRlbS5jbHNpZF0gPSBkaXNwSXRlbVxuICAgICAgICAgICAgICAgIGRpc3BJdGVtLmNvY2xhc3NfY2xzaWQgPSBjb2NsYXNzLmNsc2lkXG4gICAgICAgICAgICAgICAgaWYgZmxhZ3MgJiBweXRob25jb20uSU1QTFRZUEVGTEFHX0ZTT1VSQ0U6XG4gICAgICAgICAgICAgICAgICAgIGRpc3BJdGVtLmJJc1NpbmsgPSAxXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZXNbZGlzcEl0ZW0uY2xzaWRdID0gKGRpc3BJdGVtLCBmbGFncylcbiAgICAgICAgICAgICAgICBlbHNlOlxuICAgICAgICAgICAgICAgICAgICBpbnRlcmZhY2VzW2Rpc3BJdGVtLmNsc2lkXSA9IChkaXNwSXRlbSwgZmxhZ3MpXG4gICAgICAgICAgICAgICAgIyBJZiBkdWFsIGludGVyZmFjZSwgbWFrZSBkbyB0aGF0IHRvby5cbiAgICAgICAgICAgICAgICBpZiBjbHNpZCBub3QgaW4gdnRhYmxlSXRlbXMgYW5kIHJlZkF0dHJbMTFdICYgcHl0aG9uY29tLlRZUEVGTEFHX0ZEVUFMOlxuICAgICAgICAgICAgICAgICAgICByZWZUeXBlID0gcmVmVHlwZS5HZXRSZWZUeXBlSW5mbyhyZWZUeXBlLkdldFJlZlR5cGVPZkltcGxUeXBlKC0xKSlcbiAgICAgICAgICAgICAgICAgICAgcmVmQXR0ciA9IHJlZlR5cGUuR2V0VHlwZUF0dHIoKVxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQgKFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmQXR0ci50eXBla2luZCA9PSBweXRob25jb20uVEtJTkRfSU5URVJGQUNFXG4gICAgICAgICAgICAgICAgICAgICksICJtdXN0IGJlIGludGVyZmFjZSBieW5vdyEiXG4gICAgICAgICAgICAgICAgICAgIHZ0YWJsZUl0ZW0gPSBWVGFibGVJdGVtKHJlZlR5cGUsIHJlZkF0dHIsIGRvYylcbiAgICAgICAgICAgICAgICAgICAgdnRhYmxlSXRlbXNbY2xzaWRdID0gdnRhYmxlSXRlbVxuICAgICAgICBjb2NsYXNzLnNvdXJjZXMgPSBsaXN0KHNvdXJjZXMudmFsdWVzKCkpXG4gICAgICAgIGNvY2xhc3MuaW50ZXJmYWNlcyA9IGxpc3QoaW50ZXJmYWNlcy52YWx1ZXMoKSlcblxuICAgIGRlZiBfQnVpbGRfSW50ZXJmYWNlKHNlbGYsIHR5cGVfaW5mb190dXBsZSk6XG4gICAgICAgIGluZm8sIGluZm90eXBlLCBkb2MsIGF0dHIgPSB0eXBlX2luZm9fdHVwbGVcbiAgICAgICAgb2xlSXRlbSA9IHZ0YWJsZUl0ZW0gPSBOb25lXG4gICAgICAgIGlmIGluZm90eXBlID09IHB5dGhvbmNvbS5US0lORF9ESVNQQVRDSCBvciAoXG4gICAgICAgICAgICBpbmZvdHlwZSA9PSBweXRob25jb20uVEtJTkRfSU5URVJGQUNFXG4gICAgICAgICAgICBhbmQgYXR0clsxMV0gJiBweXRob25jb20uVFlQRUZMQUdfRkRJU1BBVENIQUJMRVxuICAgICAgICApOlxuICAgICAgICAgICAgb2xlSXRlbSA9IERpc3BhdGNoSXRlbShpbmZvLCBhdHRyLCBkb2MpXG4gICAgICAgICAgICAjIElmIHRoaXMgRElTUEFUQ0ggaW50ZXJmYWNlIGR1YWwsIHRoZW4gYnVpbGQgdGhhdCB0b28uXG4gICAgICAgICAgICBpZiBhdHRyLndUeXBlRmxhZ3MgJiBweXRob25jb20uVFlQRUZMQUdfRkRVQUw6XG4gICAgICAgICAgICAgICAgIyBHZXQgdGhlIHZ0YWJsZSBpbnRlcmZhY2VcbiAgICAgICAgICAgICAgICByZWZodHlwZSA9IGluZm8uR2V0UmVmVHlwZU9mSW1wbFR5cGUoLTEpXG4gICAgICAgICAgICAgICAgaW5mbyA9IGluZm8uR2V0UmVmVHlwZUluZm8ocmVmaHR5cGUpXG4gICAgICAgICAgICAgICAgYXR0ciA9IGluZm8uR2V0VHlwZUF0dHIoKVxuICAgICAgICAgICAgICAgIGluZm90eXBlID0gcHl0aG9uY29tLlRLSU5EX0lOVEVSRkFDRVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBpbmZvdHlwZSA9IE5vbmVcbiAgICAgICAgYXNzZXJ0IGluZm90eXBlIGluIFtcbiAgICAgICAgICAgIE5vbmUsXG4gICAgICAgICAgICBweXRob25jb20uVEtJTkRfSU5URVJGQUNFLFxuICAgICAgICBdLCAiTXVzdCBiZSBhIHJlYWwgaW50ZXJmYWNlIGF0IHRoaXMgcG9pbnQiXG4gICAgICAgIGlmIGluZm90eXBlID09IHB5dGhvbmNvbS5US0lORF9JTlRFUkZBQ0U6XG4gICAgICAgICAgICB2dGFibGVJdGVtID0gVlRhYmxlSXRlbShpbmZvLCBhdHRyLCBkb2MpXG4gICAgICAgIHJldHVybiBvbGVJdGVtLCB2dGFibGVJdGVtXG5cbiAgICBkZWYgQnVpbGRPbGVJdGVtc0Zyb21UeXBlKHNlbGYpOlxuICAgICAgICBhc3NlcnQgKFxuICAgICAgICAgICAgc2VsZi5iQnVpbGRIaWRkZW5cbiAgICAgICAgKSwgIlRoaXMgY29kZSBkb2VzbnQgbG9vayBhdCB0aGUgaGlkZGVuIGZsYWcgLSBJIHRob3VnaHQgZXZlcnlvbmUgc2V0IGl0IHRydWUhPyE/ISJcbiAgICAgICAgb2xlSXRlbXMgPSB7fVxuICAgICAgICBlbnVtSXRlbXMgPSB7fVxuICAgICAgICByZWNvcmRJdGVtcyA9IHt9XG4gICAgICAgIHZ0YWJsZUl0ZW1zID0ge31cblxuICAgICAgICBmb3IgdHlwZV9pbmZvX3R1cGxlIGluIHNlbGYuQ29sbGVjdE9sZUl0ZW1JbmZvc0Zyb21UeXBlKCk6XG4gICAgICAgICAgICBpbmZvLCBpbmZvdHlwZSwgZG9jLCBhdHRyID0gdHlwZV9pbmZvX3R1cGxlXG4gICAgICAgICAgICBjbHNpZCA9IGF0dHJbMF1cbiAgICAgICAgICAgIGlmIGluZm90eXBlID09IHB5dGhvbmNvbS5US0lORF9FTlVNIG9yIGluZm90eXBlID09IHB5dGhvbmNvbS5US0lORF9NT0RVTEU6XG4gICAgICAgICAgICAgICAgbmV3SXRlbSA9IEVudW1lcmF0aW9uSXRlbShpbmZvLCBhdHRyLCBkb2MpXG4gICAgICAgICAgICAgICAgZW51bUl0ZW1zW25ld0l0ZW0uZG9jWzBdXSA9IG5ld0l0ZW1cbiAgICAgICAgICAgICMgV2UgbmV2ZXIgaGlkZSBpbnRlcmZhY2VzIChNU0FjY2VzcywgZm9yIGV4YW1wbGUsIG5vbWluYXRlcyBpbnRlcmZhY2VzIGFzXG4gICAgICAgICAgICAjIGhpZGRlbiwgYXNzdW1pbmcgdGhhdCB5b3Ugb25seSBldmVyIHVzZSB0aGVtIHZpYSB0aGUgQ29DbGFzcylcbiAgICAgICAgICAgIGVsaWYgaW5mb3R5cGUgaW4gW3B5dGhvbmNvbS5US0lORF9ESVNQQVRDSCwgcHl0aG9uY29tLlRLSU5EX0lOVEVSRkFDRV06XG4gICAgICAgICAgICAgICAgaWYgY2xzaWQgbm90IGluIG9sZUl0ZW1zOlxuICAgICAgICAgICAgICAgICAgICBvbGVJdGVtLCB2dGFibGVJdGVtID0gc2VsZi5fQnVpbGRfSW50ZXJmYWNlKHR5cGVfaW5mb190dXBsZSlcbiAgICAgICAgICAgICAgICAgICAgb2xlSXRlbXNbY2xzaWRdID0gb2xlSXRlbSAgIyBFdmVuICJOb25lIiBnb2VzIGluIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgIGlmIHZ0YWJsZUl0ZW0gaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgICAgICAgICB2dGFibGVJdGVtc1tjbHNpZF0gPSB2dGFibGVJdGVtXG4gICAgICAgICAgICBlbGlmIChcbiAgICAgICAgICAgICAgICBpbmZvdHlwZSA9PSBweXRob25jb20uVEtJTkRfUkVDT1JEIG9yIGluZm90eXBlID09IHB5dGhvbmNvbS5US0lORF9VTklPTlxuICAgICAgICAgICAgKTpcbiAgICAgICAgICAgICAgICBuZXdJdGVtID0gUmVjb3JkSXRlbShpbmZvLCBhdHRyLCBkb2MpXG4gICAgICAgICAgICAgICAgcmVjb3JkSXRlbXNbbmV3SXRlbS5jbHNpZF0gPSBuZXdJdGVtXG4gICAgICAgICAgICBlbGlmIGluZm90eXBlID09IHB5dGhvbmNvbS5US0lORF9BTElBUzpcbiAgICAgICAgICAgICAgICAjIFdlIGRvbnQgY2FyZSBhYm91dCBhbGlhc1wnIC0gaGFuZGxlZCBpbnRyaW5zaWNseS5cbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgZWxpZiBpbmZvdHlwZSA9PSBweXRob25jb20uVEtJTkRfQ09DTEFTUzpcbiAgICAgICAgICAgICAgICBuZXdJdGVtLCBjaGlsZF9pbmZvcyA9IHNlbGYuX0J1aWxkX0NvQ2xhc3ModHlwZV9pbmZvX3R1cGxlKVxuICAgICAgICAgICAgICAgIHNlbGYuX0J1aWxkX0NvQ2xhc3NDaGlsZHJlbihuZXdJdGVtLCBjaGlsZF9pbmZvcywgb2xlSXRlbXMsIHZ0YWJsZUl0ZW1zKVxuICAgICAgICAgICAgICAgIG9sZUl0ZW1zW25ld0l0ZW0uY2xzaWRdID0gbmV3SXRlbVxuICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLkxvZ1dhcm5pbmcoIlVua25vd24gVEtJTkQgZm91bmQ6ICVkIiAlIGluZm90eXBlKVxuXG4gICAgICAgIHJldHVybiBvbGVJdGVtcywgZW51bUl0ZW1zLCByZWNvcmRJdGVtcywgdnRhYmxlSXRlbXNcblxuICAgIGRlZiBvcGVuX3dyaXRlcihzZWxmLCBmaWxlbmFtZSwgZW5jb2Rpbmc9Im1iY3MiKTpcbiAgICAgICAgIyBBIHBsYWNlIHRvIHB1dCBjb2RlIHRvIG9wZW4gYSBmaWxlIHdpdGggdGhlIGFwcHJvcHJpYXRlIGVuY29kaW5nLlxuICAgICAgICAjIERvZXMgKm5vdCogc2V0IHNlbGYuZmlsZSAtIGp1c3Qgb3BlbnMgYW5kIHJldHVybnMgYSBmaWxlLlxuICAgICAgICAjIEFjdHVhbGx5IHJldHVybnMgYSBoYW5kbGUgdG8gYSB0ZW1wIGZpbGUgLSBmaW5pc2hfd3JpdGVyIHRoZW4gZGVsZXRlc1xuICAgICAgICAjIHRoZSBmaWxlbmFtZSBhc2tlZCBmb3IgYW5kIHB1dHMgZXZlcnl0aGluZyBiYWNrIGluIHBsYWNlLiAgVGhpc1xuICAgICAgICAjIGlzIHNvIGVycm9ycyBkb25cJ3QgbGVhdmUgYSAxLzIgZ2VuZXJhdGVkIGZpbGUgYXJvdW5kIGNhdXNpbmcgYml6YXJyZVxuICAgICAgICAjIGVycm9ycyBsYXRlciwgYW5kIHNvIHRoYXQgbXVsdGlwbGUgcHJvY2Vzc2VzIHdyaXRpbmcgdGhlIHNhbWUgZmlsZVxuICAgICAgICAjIGRvblwndCBzdGVwIG9uIGVhY2ggb3RoZXJzXCcgdG9lcy5cbiAgICAgICAgIyBDb3VsZCBiZSBhIGNsYXNzbWV0aG9kIG9uZSBkYXkuLi5cbiAgICAgICAgdGVtcF9maWxlbmFtZSA9IHNlbGYuZ2V0X3RlbXBfZmlsZW5hbWUoZmlsZW5hbWUpXG4gICAgICAgIHJldHVybiBvcGVuKHRlbXBfZmlsZW5hbWUsICJ3dCIsIGVuY29kaW5nPWVuY29kaW5nKVxuXG4gICAgZGVmIGZpbmlzaF93cml0ZXIoc2VsZiwgZmlsZW5hbWUsIGYsIHdvcmtlZCk6XG4gICAgICAgIGYuY2xvc2UoKVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBvcy51bmxpbmsoZmlsZW5hbWUpXG4gICAgICAgIGV4Y2VwdCBvcy5lcnJvcjpcbiAgICAgICAgICAgIHBhc3NcbiAgICAgICAgdGVtcF9maWxlbmFtZSA9IHNlbGYuZ2V0X3RlbXBfZmlsZW5hbWUoZmlsZW5hbWUpXG4gICAgICAgIGlmIHdvcmtlZDpcbiAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICBvcy5yZW5hbWUodGVtcF9maWxlbmFtZSwgZmlsZW5hbWUpXG4gICAgICAgICAgICBleGNlcHQgb3MuZXJyb3I6XG4gICAgICAgICAgICAgICAgIyBJZiB3ZSBhcmUgcmVhbGx5IHVubHVja3ksIGFub3RoZXIgcHJvY2VzcyBtYXkgaGF2ZSB3cml0dGVuIHRoZVxuICAgICAgICAgICAgICAgICMgZmlsZSBpbiBiZXR3ZWVuIG91ciBjYWxscyB0byBvcy51bmxpbmsgYW5kIG9zLnJlbmFtZS4gU28gdHJ5XG4gICAgICAgICAgICAgICAgIyBhZ2FpbiwgYnV0IG9ubHkgb25jZS5cbiAgICAgICAgICAgICAgICAjIFRoZXJlIGFyZSBzdGlsbCBzb21lIHJhY2UgY29uZGl0aW9ucywgYnV0IHRoZXkgc2VlbSBkaWZmaWN1bHQgdG9cbiAgICAgICAgICAgICAgICAjIGZpeCwgYW5kIHRoZXkgcHJvYmFibHkgb2NjdXIgbXVjaCBsZXNzIGZyZXF1ZW50bHk6XG4gICAgICAgICAgICAgICAgIyAqIFRoZSBvcy5yZW5hbWUgZmFpbHVyZSBjb3VsZCBvY2N1ciBtb3JlIHRoYW4gb25jZSBpZiBtb3JlIHRoYW5cbiAgICAgICAgICAgICAgICAjICAgdHdvIHByb2Nlc3NlcyBhcmUgaW52b2x2ZWQuXG4gICAgICAgICAgICAgICAgIyAqIEluIGJldHdlZW4gb3MudW5saW5rIGFuZCBvcy5yZW5hbWUsIGFub3RoZXIgcHJvY2VzcyBjb3VsZCB0cnlcbiAgICAgICAgICAgICAgICAjICAgdG8gaW1wb3J0IHRoZSBtb2R1bGUsIGhhdmluZyBzZWVuIHRoYXQgaXQgYWxyZWFkeSBleGlzdHMuXG4gICAgICAgICAgICAgICAgIyAqIElmIGFub3RoZXIgcHJvY2VzcyBzdGFydHMgYSBDT00gc2VydmVyIHdoaWxlIHdlIGFyZSBzdGlsbFxuICAgICAgICAgICAgICAgICMgICBnZW5lcmF0aW5nIF9faW5pdF9fLnB5LCB0aGF0IHByb2Nlc3Mgc2VlcyB0aGF0IHRoZSBmb2xkZXJcbiAgICAgICAgICAgICAgICAjICAgYWxyZWFkeSBleGlzdHMgYW5kIGFzc3VtZXMgdGhhdCBfX2luaXRfXy5weSBpcyBhbHJlYWR5IHRoZXJlXG4gICAgICAgICAgICAgICAgIyAgIGFzIHdlbGwuXG4gICAgICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICAgICBvcy51bmxpbmsoZmlsZW5hbWUpXG4gICAgICAgICAgICAgICAgZXhjZXB0IG9zLmVycm9yOlxuICAgICAgICAgICAgICAgICAgICBwYXNzXG4gICAgICAgICAgICAgICAgb3MucmVuYW1lKHRlbXBfZmlsZW5hbWUsIGZpbGVuYW1lKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgb3MudW5saW5rKHRlbXBfZmlsZW5hbWUpXG5cbiAgICBkZWYgZ2V0X3RlbXBfZmlsZW5hbWUoc2VsZiwgZmlsZW5hbWUpOlxuICAgICAgICByZXR1cm4gIiVzLiVkLnRlbXAiICUgKGZpbGVuYW1lLCBvcy5nZXRwaWQoKSlcblxuICAgIGRlZiBnZW5lcmF0ZShzZWxmLCBmaWxlLCBpc19mb3JfZGVtYW5kPTApOlxuICAgICAgICBpZiBpc19mb3JfZGVtYW5kOlxuICAgICAgICAgICAgc2VsZi5nZW5lcmF0ZV90eXBlID0gR0VOX0RFTUFORF9CQVNFXG4gICAgICAgIGVsc2U6XG4gICAgICAgICAgICBzZWxmLmdlbmVyYXRlX3R5cGUgPSBHRU5fRlVMTFxuICAgICAgICBzZWxmLmZpbGUgPSBmaWxlXG4gICAgICAgIHNlbGYuZG9fZ2VuZXJhdGUoKVxuICAgICAgICBzZWxmLmZpbGUgPSBOb25lXG4gICAgICAgIHNlbGYucHJvZ3Jlc3MuRmluaXNoZWQoKVxuXG4gICAgZGVmIGRvX2dlbl9maWxlX2hlYWRlcihzZWxmKTpcbiAgICAgICAgbGEgPSBzZWxmLnR5cGVsaWIuR2V0TGliQXR0cigpXG4gICAgICAgIG1vZHVsZURvYyA9IHNlbGYudHlwZWxpYi5HZXREb2N1bWVudGF0aW9uKC0xKVxuICAgICAgICBkb2NEZXNjID0gIiJcbiAgICAgICAgaWYgbW9kdWxlRG9jWzFdOlxuICAgICAgICAgICAgZG9jRGVzYyA9IG1vZHVsZURvY1sxXVxuXG4gICAgICAgICMgUmVzZXQgYWxsIHRoZSBcJ3BlciBmaWxlXCcgc3RhdGVcbiAgICAgICAgc2VsZi5iSGF2ZVdyaXR0ZW5EaXNwYXRjaEJhc2VDbGFzcyA9IDBcbiAgICAgICAgc2VsZi5iSGF2ZVdyaXR0ZW5Db0NsYXNzQmFzZUNsYXNzID0gMFxuICAgICAgICBzZWxmLmJIYXZlV3JpdHRlbkV2ZW50QmFzZUNsYXNzID0gMFxuICAgICAgICAjIFlvdSBtdXN0IHByb3ZpZGUgYSBmaWxlIGNvcnJlY3RseSBjb25maWd1cmVkIGZvciB3cml0aW5nIHVuaWNvZGUuXG4gICAgICAgICMgV2UgYXNzZXJ0IHRoaXMgaXMgaXQgbWF5IGluZGljYXRlIHNvbWV3aGVyZSBpbiBweXdpbjMyIHRoYXQgbmVlZHNcbiAgICAgICAgIyB1cGdyYWRpbmcuXG4gICAgICAgIGFzc2VydCBzZWxmLmZpbGUuZW5jb2RpbmcsIHNlbGYuZmlsZVxuICAgICAgICBlbmNvZGluZyA9IHNlbGYuZmlsZS5lbmNvZGluZyAgIyBvciAibWJjcyJcblxuICAgICAgICBwcmludCgiIyAtKi0gY29kaW5nOiAlcyAtKi0iICUgKGVuY29kaW5nLCksIGZpbGU9c2VsZi5maWxlKVxuICAgICAgICBwcmludCgiIyBDcmVhdGVkIGJ5IG1ha2VweS5weSB2ZXJzaW9uICVzIiAlIChtYWtlcHlfdmVyc2lvbiwpLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAiIyBCeSBweXRob24gdmVyc2lvbiAlcyIgJSAoc3lzLnZlcnNpb24ucmVwbGFjZSgiXFxuIiwgIi0iKSwpLCBmaWxlPXNlbGYuZmlsZVxuICAgICAgICApXG4gICAgICAgIGlmIHNlbGYuc291cmNlRmlsZW5hbWU6XG4gICAgICAgICAgICBwcmludChcbiAgICAgICAgICAgICAgICAiIyBGcm9tIHR5cGUgbGlicmFyeSBcJyVzXCciICUgKG9zLnBhdGguc3BsaXQoc2VsZi5zb3VyY2VGaWxlbmFtZSlbMV0sKSxcbiAgICAgICAgICAgICAgICBmaWxlPXNlbGYuZmlsZSxcbiAgICAgICAgICAgIClcbiAgICAgICAgcHJpbnQoIiMgT24gJXMiICUgdGltZS5jdGltZSh0aW1lLnRpbWUoKSksIGZpbGU9c2VsZi5maWxlKVxuXG4gICAgICAgIHByaW50KGJ1aWxkLl9tYWtlRG9jU3RyaW5nKGRvY0Rlc2MpLCBmaWxlPXNlbGYuZmlsZSlcblxuICAgICAgICBwcmludCgibWFrZXB5X3ZlcnNpb24gPSIsIHJlcHIobWFrZXB5X3ZlcnNpb24pLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoInB5dGhvbl92ZXJzaW9uID0gMHgleCIgJSAoc3lzLmhleHZlcnNpb24sKSwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KGZpbGU9c2VsZi5maWxlKVxuICAgICAgICBwcmludChcbiAgICAgICAgICAgICJpbXBvcnQgd2luMzJjb20uY2xpZW50LkNMU0lEVG9DbGFzcywgcHl0aG9uY29tLCBweXdpbnR5cGVzIiwgZmlsZT1zZWxmLmZpbGVcbiAgICAgICAgKVxuICAgICAgICBwcmludCgiaW1wb3J0IHdpbjMyY29tLmNsaWVudC51dGlsIiwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KCJmcm9tIHB5d2ludHlwZXMgaW1wb3J0IElJRCIsIGZpbGU9c2VsZi5maWxlKVxuICAgICAgICBwcmludCgiZnJvbSB3aW4zMmNvbS5jbGllbnQgaW1wb3J0IERpc3BhdGNoIiwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KGZpbGU9c2VsZi5maWxlKVxuICAgICAgICBwcmludChcbiAgICAgICAgICAgICIjIFRoZSBmb2xsb3dpbmcgMyBsaW5lcyBtYXkgbmVlZCB0d2Vha2luZyBmb3IgdGhlIHBhcnRpY3VsYXIgc2VydmVyIixcbiAgICAgICAgICAgIGZpbGU9c2VsZi5maWxlLFxuICAgICAgICApXG4gICAgICAgIHByaW50KFxuICAgICAgICAgICAgIiMgQ2FuZGlkYXRlcyBhcmUgcHl0aG9uY29tLk1pc3NpbmcsIC5FbXB0eSBhbmQgLkFyZ05vdEZvdW5kIixcbiAgICAgICAgICAgIGZpbGU9c2VsZi5maWxlLFxuICAgICAgICApXG4gICAgICAgIHByaW50KCJkZWZhdWx0TmFtZWRPcHRBcmc9cHl0aG9uY29tLkVtcHR5IiwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KCJkZWZhdWx0TmFtZWROb3RPcHRBcmc9cHl0aG9uY29tLkVtcHR5IiwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KCJkZWZhdWx0VW5uYW1lZEFyZz1weXRob25jb20uRW1wdHkiLCBmaWxlPXNlbGYuZmlsZSlcbiAgICAgICAgcHJpbnQoZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KCJDTFNJRCA9ICIgKyByZXByKGxhWzBdKSwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KCJNYWpvclZlcnNpb24gPSAiICsgc3RyKGxhWzNdKSwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KCJNaW5vclZlcnNpb24gPSAiICsgc3RyKGxhWzRdKSwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KCJMaWJyYXJ5RmxhZ3MgPSAiICsgc3RyKGxhWzVdKSwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgIHByaW50KCJMQ0lEID0gIiArIGhleChsYVsxXSksIGZpbGU9c2VsZi5maWxlKVxuICAgICAgICBwcmludChmaWxlPXNlbGYuZmlsZSlcblxuICAgIGRlZiBkb19nZW5lcmF0ZShzZWxmKTpcbiAgICAgICAgbW9kdWxlRG9jID0gc2VsZi50eXBlbGliLkdldERvY3VtZW50YXRpb24oLTEpXG4gICAgICAgIHN0cmVhbSA9IHNlbGYuZmlsZVxuICAgICAgICBkb2NEZXNjID0gIiJcbiAgICAgICAgaWYgbW9kdWxlRG9jWzFdOlxuICAgICAgICAgICAgZG9jRGVzYyA9IG1vZHVsZURvY1sxXVxuICAgICAgICBzZWxmLnByb2dyZXNzLlN0YXJ0aW5nKGRvY0Rlc2MpXG4gICAgICAgIHNlbGYucHJvZ3Jlc3MuU2V0RGVzY3JpcHRpb24oIkJ1aWxkaW5nIGRlZmluaXRpb25zIGZyb20gdHlwZSBsaWJyYXJ5Li4uIilcblxuICAgICAgICBzZWxmLmRvX2dlbl9maWxlX2hlYWRlcigpXG5cbiAgICAgICAgb2xlSXRlbXMsIGVudW1JdGVtcywgcmVjb3JkSXRlbXMsIHZ0YWJsZUl0ZW1zID0gc2VsZi5CdWlsZE9sZUl0ZW1zRnJvbVR5cGUoKVxuXG4gICAgICAgIHNlbGYucHJvZ3Jlc3MuU2V0RGVzY3JpcHRpb24oXG4gICAgICAgICAgICAiR2VuZXJhdGluZy4uLiIsIGxlbihvbGVJdGVtcykgKyBsZW4oZW51bUl0ZW1zKSArIGxlbih2dGFibGVJdGVtcylcbiAgICAgICAgKVxuXG4gICAgICAgICMgR2VuZXJhdGUgdGhlIGNvbnN0YW50cyBhbmQgdGhlaXIgc3VwcG9ydC5cbiAgICAgICAgaWYgZW51bUl0ZW1zOlxuICAgICAgICAgICAgcHJpbnQoImNsYXNzIGNvbnN0YW50czoiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIGl0ZW1zID0gbGlzdChlbnVtSXRlbXMudmFsdWVzKCkpXG4gICAgICAgICAgICBpdGVtcy5zb3J0KClcbiAgICAgICAgICAgIG51bV93cml0dGVuID0gMFxuICAgICAgICAgICAgZm9yIG9sZWl0ZW0gaW4gaXRlbXM6XG4gICAgICAgICAgICAgICAgbnVtX3dyaXR0ZW4gKz0gb2xlaXRlbS5Xcml0ZUVudW1lcmF0aW9uSXRlbXMoc3RyZWFtKVxuICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3MuVGljaygpXG4gICAgICAgICAgICBpZiBub3QgbnVtX3dyaXR0ZW46XG4gICAgICAgICAgICAgICAgcHJpbnQoIlxcdHBhc3MiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KGZpbGU9c3RyZWFtKVxuXG4gICAgICAgIGlmIHNlbGYuZ2VuZXJhdGVfdHlwZSA9PSBHRU5fRlVMTDpcbiAgICAgICAgICAgIGl0ZW1zID0gW2wgZm9yIGwgaW4gb2xlSXRlbXMudmFsdWVzKCkgaWYgbCBpcyBub3QgTm9uZV1cbiAgICAgICAgICAgIGl0ZW1zLnNvcnQoKVxuICAgICAgICAgICAgZm9yIG9sZWl0ZW0gaW4gaXRlbXM6XG4gICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5UaWNrKClcbiAgICAgICAgICAgICAgICBvbGVpdGVtLldyaXRlQ2xhc3Moc2VsZilcblxuICAgICAgICAgICAgaXRlbXMgPSBsaXN0KHZ0YWJsZUl0ZW1zLnZhbHVlcygpKVxuICAgICAgICAgICAgaXRlbXMuc29ydCgpXG4gICAgICAgICAgICBmb3Igb2xlaXRlbSBpbiBpdGVtczpcbiAgICAgICAgICAgICAgICBzZWxmLnByb2dyZXNzLlRpY2soKVxuICAgICAgICAgICAgICAgIG9sZWl0ZW0uV3JpdGVDbGFzcyhzZWxmKVxuICAgICAgICBlbHNlOlxuICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5UaWNrKGxlbihvbGVJdGVtcykgKyBsZW4odnRhYmxlSXRlbXMpKVxuXG4gICAgICAgIHByaW50KCJSZWNvcmRNYXAgPSB7IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGZvciByZWNvcmQgaW4gcmVjb3JkSXRlbXMudmFsdWVzKCk6XG4gICAgICAgICAgICBpZiByZWNvcmQuY2xzaWQgPT0gcHl0aG9uY29tLklJRF9OVUxMOlxuICAgICAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICAgICAiXFx0IyMjJXM6ICVzLCAjIFJlY29yZCBkaXNhYmxlZCBiZWNhdXNlIGl0IGRvZXNuXCd0IGhhdmUgYSBub24tbnVsbCBHVUlEIlxuICAgICAgICAgICAgICAgICAgICAlIChyZXByKHJlY29yZC5kb2NbMF0pLCByZXByKHN0cihyZWNvcmQuY2xzaWQpKSksXG4gICAgICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIGVsc2U6XG4gICAgICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgICJcXHQlczogJXMsIiAlIChyZXByKHJlY29yZC5kb2NbMF0pLCByZXByKHN0cihyZWNvcmQuY2xzaWQpKSksXG4gICAgICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgcHJpbnQoIn0iLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgcHJpbnQoZmlsZT1zdHJlYW0pXG5cbiAgICAgICAgIyBXcml0ZSBvdXQgX2FsbF8gbXkgZ2VuZXJhdGVkIENMU0lEXCdzIGluIHRoZSBtYXBcbiAgICAgICAgaWYgc2VsZi5nZW5lcmF0ZV90eXBlID09IEdFTl9GVUxMOlxuICAgICAgICAgICAgcHJpbnQoIkNMU0lEVG9DbGFzc01hcCA9IHsiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIGZvciBpdGVtIGluIG9sZUl0ZW1zLnZhbHVlcygpOlxuICAgICAgICAgICAgICAgIGlmIGl0ZW0gaXMgbm90IE5vbmUgYW5kIGl0ZW0uYldyaXR0ZW46XG4gICAgICAgICAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgIlxcdFwnJXNcJyA6ICVzLCIgJSAoc3RyKGl0ZW0uY2xzaWQpLCBpdGVtLnB5dGhvbl9uYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU9c3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBwcmludCgifSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoIkNMU0lEVG9QYWNrYWdlTWFwID0ge30iLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICJ3aW4zMmNvbS5jbGllbnQuQ0xTSURUb0NsYXNzLlJlZ2lzdGVyQ0xTSURzRnJvbURpY3QoIENMU0lEVG9DbGFzc01hcCApIixcbiAgICAgICAgICAgICAgICBmaWxlPXN0cmVhbSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHByaW50KCJWVGFibGVzVG9QYWNrYWdlTWFwID0ge30iLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KCJWVGFibGVzVG9DbGFzc01hcCA9IHsiLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIGZvciBpdGVtIGluIHZ0YWJsZUl0ZW1zLnZhbHVlcygpOlxuICAgICAgICAgICAgICAgIHByaW50KCJcXHRcJyVzXCcgOiBcJyVzXCcsIiAlIChpdGVtLmNsc2lkLCBpdGVtLnB5dGhvbl9uYW1lKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludCgifSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoZmlsZT1zdHJlYW0pXG5cbiAgICAgICAgZWxzZTpcbiAgICAgICAgICAgIHByaW50KCJDTFNJRFRvQ2xhc3NNYXAgPSB7fSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoIkNMU0lEVG9QYWNrYWdlTWFwID0geyIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgZm9yIGl0ZW0gaW4gb2xlSXRlbXMudmFsdWVzKCk6XG4gICAgICAgICAgICAgICAgaWYgaXRlbSBpcyBub3QgTm9uZTpcbiAgICAgICAgICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAiXFx0XCclc1wnIDogJXMsIiAlIChzdHIoaXRlbS5jbHNpZCksIHJlcHIoaXRlbS5weXRob25fbmFtZSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIHByaW50KCJ9IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBwcmludCgiVlRhYmxlc1RvQ2xhc3NNYXAgPSB7fSIsIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoIlZUYWJsZXNUb1BhY2thZ2VNYXAgPSB7IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgICAgICBmb3IgaXRlbSBpbiB2dGFibGVJdGVtcy52YWx1ZXMoKTpcbiAgICAgICAgICAgICAgICBwcmludCgiXFx0XCclc1wnIDogXCclc1wnLCIgJSAoaXRlbS5jbHNpZCwgaXRlbS5weXRob25fbmFtZSksIGZpbGU9c3RyZWFtKVxuICAgICAgICAgICAgcHJpbnQoIn0iLCBmaWxlPXN0cmVhbSlcbiAgICAgICAgICAgIHByaW50KGZpbGU9c3RyZWFtKVxuXG4gICAgICAgIHByaW50KGZpbGU9c3RyZWFtKVxuICAgICAgICAjIEJpdCBvZiBhIGhhY2sgLSBidWlsZCBhIHRlbXAgbWFwIG9mIGl0ZUl0ZW1zICsgdnRhYmxlSXRlbXMgLSBjb0NsYXNzZXNcbiAgICAgICAgbWFwID0ge31cbiAgICAgICAgZm9yIGl0ZW0gaW4gb2xlSXRlbXMudmFsdWVzKCk6XG4gICAgICAgICAgICBpZiBpdGVtIGlzIG5vdCBOb25lIGFuZCBub3QgaXNpbnN0YW5jZShpdGVtLCBDb0NsYXNzSXRlbSk6XG4gICAgICAgICAgICAgICAgbWFwW2l0ZW0ucHl0aG9uX25hbWVdID0gaXRlbS5jbHNpZFxuICAgICAgICBmb3IgaXRlbSBpbiB2dGFibGVJdGVtcy52YWx1ZXMoKTogICMgTm8gbm9uZXMgb3IgQ29DbGFzc2VzIGluIHRoaXMgbWFwXG4gICAgICAgICAgICBtYXBbaXRlbS5weXRob25fbmFtZV0gPSBpdGVtLmNsc2lkXG5cbiAgICAgICAgcHJpbnQoIk5hbWVzVG9JSURNYXAgPSB7IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIGZvciBuYW1lLCBpaWQgaW4gbWFwLml0ZW1zKCk6XG4gICAgICAgICAgICBwcmludCgiXFx0XCclc1wnIDogXCclc1wnLCIgJSAobmFtZSwgaWlkKSwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KCJ9IiwgZmlsZT1zdHJlYW0pXG4gICAgICAgIHByaW50KGZpbGU9c3RyZWFtKVxuXG4gICAgICAgIGlmIGVudW1JdGVtczpcbiAgICAgICAgICAgIHByaW50KFxuICAgICAgICAgICAgICAgICJ3aW4zMmNvbS5jbGllbnQuY29uc3RhbnRzLl9fZGljdHNfXy5hcHBlbmQoY29uc3RhbnRzLl9fZGljdF9fKSIsXG4gICAgICAgICAgICAgICAgZmlsZT1zdHJlYW0sXG4gICAgICAgICAgICApXG4gICAgICAgIHByaW50KGZpbGU9c3RyZWFtKVxuXG4gICAgZGVmIGdlbmVyYXRlX2NoaWxkKHNlbGYsIGNoaWxkLCBkaXIpOlxuICAgICAgICAiR2VuZXJhdGUgYSBzaW5nbGUgY2hpbGQuICBNYXkgZm9yY2UgYSBmZXcgY2hpbGRyZW4gdG8gYmUgYnVpbHQgYXMgd2UgZ2VuZXJhdGUgZGVwcyJcbiAgICAgICAgc2VsZi5nZW5lcmF0ZV90eXBlID0gR0VOX0RFTUFORF9DSElMRFxuXG4gICAgICAgIGxhID0gc2VsZi50eXBlbGliLkdldExpYkF0dHIoKVxuICAgICAgICBsY2lkID0gbGFbMV1cbiAgICAgICAgY2xzaWQgPSBsYVswXVxuICAgICAgICBtYWpvciA9IGxhWzNdXG4gICAgICAgIG1pbm9yID0gbGFbNF1cbiAgICAgICAgc2VsZi5iYXNlX21vZF9uYW1lID0gKFxuICAgICAgICAgICAgIndpbjMyY29tLmdlbl9weS4iICsgc3RyKGNsc2lkKVsxOi0xXSArICJ4JXN4JXN4JXMiICUgKGxjaWQsIG1ham9yLCBtaW5vcilcbiAgICAgICAgKVxuICAgICAgICB0cnk6XG4gICAgICAgICAgICAjIFByb2Nlc3MgdGhlIHR5cGUgbGlicmFyeVwncyBDb0NsYXNzIG9iamVjdHMsIGxvb2tpbmcgZm9yIHRoZVxuICAgICAgICAgICAgIyBzcGVjaWZpZWQgbmFtZSwgb3Igd2hlcmUgYSBjaGlsZCBoYXMgdGhlIHNwZWNpZmllZCBuYW1lLlxuICAgICAgICAgICAgIyBUaGlzIGVuc3VyZXMgdGhhdCBhbGwgaW50ZXJlc3RpbmcgdGhpbmdzIChpbmNsdWRpbmcgZXZlbnQgaW50ZXJmYWNlcylcbiAgICAgICAgICAgICMgYXJlIGdlbmVyYXRlZCBjb3JyZWN0bHkuXG4gICAgICAgICAgICBvbGVJdGVtcyA9IHt9XG4gICAgICAgICAgICB2dGFibGVJdGVtcyA9IHt9XG4gICAgICAgICAgICBpbmZvcyA9IHNlbGYuQ29sbGVjdE9sZUl0ZW1JbmZvc0Zyb21UeXBlKClcbiAgICAgICAgICAgIGZvdW5kID0gMFxuICAgICAgICAgICAgZm9yIHR5cGVfaW5mb190dXBsZSBpbiBpbmZvczpcbiAgICAgICAgICAgICAgICBpbmZvLCBpbmZvdHlwZSwgZG9jLCBhdHRyID0gdHlwZV9pbmZvX3R1cGxlXG4gICAgICAgICAgICAgICAgaWYgaW5mb3R5cGUgPT0gcHl0aG9uY29tLlRLSU5EX0NPQ0xBU1M6XG4gICAgICAgICAgICAgICAgICAgIGNvQ2xhc3NJdGVtLCBjaGlsZF9pbmZvcyA9IHNlbGYuX0J1aWxkX0NvQ2xhc3ModHlwZV9pbmZvX3R1cGxlKVxuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGJ1aWxkLk1ha2VQdWJsaWNBdHRyaWJ1dGVOYW1lKGRvY1swXSkgPT0gY2hpbGRcbiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGZvdW5kOlxuICAgICAgICAgICAgICAgICAgICAgICAgIyBPSywgY2hlY2sgdGhlIGNoaWxkIGludGVyZmFjZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mbyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmQXR0cixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICkgaW4gY2hpbGRfaW5mb3M6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgYnVpbGQuTWFrZVB1YmxpY0F0dHJpYnV0ZU5hbWUoZG9jWzBdKSA9PSBjaGlsZDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGlmIGZvdW5kOlxuICAgICAgICAgICAgICAgICAgICAgICAgb2xlSXRlbXNbY29DbGFzc0l0ZW0uY2xzaWRdID0gY29DbGFzc0l0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX0J1aWxkX0NvQ2xhc3NDaGlsZHJlbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb0NsYXNzSXRlbSwgY2hpbGRfaW5mb3MsIG9sZUl0ZW1zLCB2dGFibGVJdGVtc1xuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGlmIG5vdCBmb3VuZDpcbiAgICAgICAgICAgICAgICAjIERvZXNuXCd0IGFwcGVhciBpbiBhIGNsYXNzIGRlZm4gLSBsb29rIGluIHRoZSBpbnRlcmZhY2Ugb2JqZWN0cyBmb3IgaXRcbiAgICAgICAgICAgICAgICBmb3IgdHlwZV9pbmZvX3R1cGxlIGluIGluZm9zOlxuICAgICAgICAgICAgICAgICAgICBpbmZvLCBpbmZvdHlwZSwgZG9jLCBhdHRyID0gdHlwZV9pbmZvX3R1cGxlXG4gICAgICAgICAgICAgICAgICAgIGlmIGluZm90eXBlIGluIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHB5dGhvbmNvbS5US0lORF9JTlRFUkZBQ0UsXG4gICAgICAgICAgICAgICAgICAgICAgICBweXRob25jb20uVEtJTkRfRElTUEFUQ0gsXG4gICAgICAgICAgICAgICAgICAgIF06XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBidWlsZC5NYWtlUHVibGljQXR0cmlidXRlTmFtZShkb2NbMF0pID09IGNoaWxkOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZUl0ZW0sIHZ0YWJsZUl0ZW0gPSBzZWxmLl9CdWlsZF9JbnRlcmZhY2UodHlwZV9pbmZvX3R1cGxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZUl0ZW1zW2Nsc2lkXSA9IG9sZUl0ZW0gICMgRXZlbiAiTm9uZSIgZ29lcyBpbiBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHZ0YWJsZUl0ZW0gaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZ0YWJsZUl0ZW1zW2Nsc2lkXSA9IHZ0YWJsZUl0ZW1cblxuICAgICAgICAgICAgYXNzZXJ0IChcbiAgICAgICAgICAgICAgICBmb3VuZFxuICAgICAgICAgICAgKSwgIkNhbnQgZmluZCB0aGUgXCclc1wnIGludGVyZmFjZSBpbiB0aGUgQ29DbGFzc2VzLCBvciB0aGUgaW50ZXJmYWNlcyIgJSAoXG4gICAgICAgICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAjIE1ha2UgYSBtYXAgb2YgaWlkOiBkaXNwaXRlbSwgdnRhYmxlaXRlbSlcbiAgICAgICAgICAgIGl0ZW1zID0ge31cbiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIG9sZUl0ZW1zLml0ZW1zKCk6XG4gICAgICAgICAgICAgICAgaXRlbXNba2V5XSA9ICh2YWx1ZSwgTm9uZSlcbiAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIHZ0YWJsZUl0ZW1zLml0ZW1zKCk6XG4gICAgICAgICAgICAgICAgZXhpc3RpbmcgPSBpdGVtcy5nZXQoa2V5LCBOb25lKVxuICAgICAgICAgICAgICAgIGlmIGV4aXN0aW5nIGlzIG5vdCBOb25lOlxuICAgICAgICAgICAgICAgICAgICBuZXdfdmFsID0gZXhpc3RpbmdbMF0sIHZhbHVlXG4gICAgICAgICAgICAgICAgZWxzZTpcbiAgICAgICAgICAgICAgICAgICAgbmV3X3ZhbCA9IE5vbmUsIHZhbHVlXG4gICAgICAgICAgICAgICAgaXRlbXNba2V5XSA9IG5ld192YWxcblxuICAgICAgICAgICAgc2VsZi5wcm9ncmVzcy5TZXREZXNjcmlwdGlvbigiR2VuZXJhdGluZy4uLiIsIGxlbihpdGVtcykpXG4gICAgICAgICAgICBmb3Igb2xlaXRlbSwgdnRhYmxlaXRlbSBpbiBpdGVtcy52YWx1ZXMoKTpcbiAgICAgICAgICAgICAgICBhbl9pdGVtID0gb2xlaXRlbSBvciB2dGFibGVpdGVtXG4gICAgICAgICAgICAgICAgYXNzZXJ0IG5vdCBzZWxmLmZpbGUsICJhbHJlYWR5IGhhdmUgYSBmaWxlPyJcbiAgICAgICAgICAgICAgICAjIGxpa2UgbWFrZXB5LnB5LCB3ZSBnZW4gdG8gYSAudGVtcCBmaWxlIHNvIGZhaWx1cmUgZG9lc25cJ3RcbiAgICAgICAgICAgICAgICAjIGxlYXZlIGEgMS8yIGdlbmVyYXRlZCBtZXNzLlxuICAgICAgICAgICAgICAgIG91dF9uYW1lID0gb3MucGF0aC5qb2luKGRpciwgYW5faXRlbS5weXRob25fbmFtZSkgKyAiLnB5IlxuICAgICAgICAgICAgICAgIHdvcmtlZCA9IEZhbHNlXG4gICAgICAgICAgICAgICAgc2VsZi5maWxlID0gc2VsZi5vcGVuX3dyaXRlcihvdXRfbmFtZSlcbiAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgIGlmIG9sZWl0ZW0gaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRvX2dlbl9jaGlsZF9pdGVtKG9sZWl0ZW0pXG4gICAgICAgICAgICAgICAgICAgIGlmIHZ0YWJsZWl0ZW0gaXMgbm90IE5vbmU6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRvX2dlbl9jaGlsZF9pdGVtKHZ0YWJsZWl0ZW0pXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3MuVGljaygpXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlZCA9IFRydWVcbiAgICAgICAgICAgICAgICBmaW5hbGx5OlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmZpbmlzaF93cml0ZXIob3V0X25hbWUsIHNlbGYuZmlsZSwgd29ya2VkKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmZpbGUgPSBOb25lXG4gICAgICAgIGZpbmFsbHk6XG4gICAgICAgICAgICBzZWxmLnByb2dyZXNzLkZpbmlzaGVkKClcblxuICAgIGRlZiBkb19nZW5fY2hpbGRfaXRlbShzZWxmLCBvbGVpdGVtKTpcbiAgICAgICAgbW9kdWxlRG9jID0gc2VsZi50eXBlbGliLkdldERvY3VtZW50YXRpb24oLTEpXG4gICAgICAgIGRvY0Rlc2MgPSAiIlxuICAgICAgICBpZiBtb2R1bGVEb2NbMV06XG4gICAgICAgICAgICBkb2NEZXNjID0gbW9kdWxlRG9jWzFdXG4gICAgICAgIHNlbGYucHJvZ3Jlc3MuU3RhcnRpbmcoZG9jRGVzYylcbiAgICAgICAgc2VsZi5wcm9ncmVzcy5TZXREZXNjcmlwdGlvbigiQnVpbGRpbmcgZGVmaW5pdGlvbnMgZnJvbSB0eXBlIGxpYnJhcnkuLi4iKVxuICAgICAgICBzZWxmLmRvX2dlbl9maWxlX2hlYWRlcigpXG4gICAgICAgIG9sZWl0ZW0uV3JpdGVDbGFzcyhzZWxmKVxuICAgICAgICBpZiBvbGVpdGVtLmJXcml0dGVuOlxuICAgICAgICAgICAgcHJpbnQoXG4gICAgICAgICAgICAgICAgXCd3aW4zMmNvbS5jbGllbnQuQ0xTSURUb0NsYXNzLlJlZ2lzdGVyQ0xTSUQoICIlcyIsICVzIClcJ1xuICAgICAgICAgICAgICAgICUgKG9sZWl0ZW0uY2xzaWQsIG9sZWl0ZW0ucHl0aG9uX25hbWUpLFxuICAgICAgICAgICAgICAgIGZpbGU9c2VsZi5maWxlLFxuICAgICAgICAgICAgKVxuXG4gICAgZGVmIGNoZWNrV3JpdGVEaXNwYXRjaEJhc2VDbGFzcyhzZWxmKTpcbiAgICAgICAgaWYgbm90IHNlbGYuYkhhdmVXcml0dGVuRGlzcGF0Y2hCYXNlQ2xhc3M6XG4gICAgICAgICAgICBwcmludCgiZnJvbSB3aW4zMmNvbS5jbGllbnQgaW1wb3J0IERpc3BhdGNoQmFzZUNsYXNzIiwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgICAgICBzZWxmLmJIYXZlV3JpdHRlbkRpc3BhdGNoQmFzZUNsYXNzID0gMVxuXG4gICAgZGVmIGNoZWNrV3JpdGVDb0NsYXNzQmFzZUNsYXNzKHNlbGYpOlxuICAgICAgICBpZiBub3Qgc2VsZi5iSGF2ZVdyaXR0ZW5Db0NsYXNzQmFzZUNsYXNzOlxuICAgICAgICAgICAgcHJpbnQoImZyb20gd2luMzJjb20uY2xpZW50IGltcG9ydCBDb0NsYXNzQmFzZUNsYXNzIiwgZmlsZT1zZWxmLmZpbGUpXG4gICAgICAgICAgICBzZWxmLmJIYXZlV3JpdHRlbkNvQ2xhc3NCYXNlQ2xhc3MgPSAxXG5cbiAgICBkZWYgY2hlY2tXcml0ZUV2ZW50QmFzZUNsYXNzKHNlbGYpOlxuICAgICAgICAjIE5vdCBhIGJhc2UgY2xhc3MgYXMgc3VjaC4uLlxuICAgICAgICBpZiBub3Qgc2VsZi5iSGF2ZVdyaXR0ZW5FdmVudEJhc2VDbGFzczpcbiAgICAgICAgICAgICMgTm90aGluZyB0byBkbyBhbnkgbW9yZSFcbiAgICAgICAgICAgIHNlbGYuYkhhdmVXcml0dGVuRXZlbnRCYXNlQ2xhc3MgPSAxXG5cblxuaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjpcbiAgICBwcmludCgiVGhpcyBpcyBhIHdvcmtlciBtb2R1bGUuICBQbGVhc2UgdXNlIG1ha2VweSB0byBnZW5lcmF0ZSBQeXRob24gZmlsZXMuIilcbicpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCd3aW4zMmNvbS9jbGllbnQvc2VsZWN0dGxiLnB5JywgYiciIiJVdGlsaXRpZXMgZm9yIHNlbGVjdGluZyBhbmQgZW51bWVyYXRpbmcgdGhlIFR5cGUgTGlicmFyaWVzIGluc3RhbGxlZCBvbiB0aGUgc3lzdGVtXG4iIiJcblxuaW1wb3J0IHdpbjMyYXBpLCB3aW4zMmNvbiwgcHl0aG9uY29tXG5cblxuY2xhc3MgVHlwZWxpYlNwZWM6XG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIGNsc2lkLCBsY2lkLCBtYWpvciwgbWlub3IsIGZsYWdzPTApOlxuICAgICAgICBzZWxmLmNsc2lkID0gc3RyKGNsc2lkKVxuICAgICAgICBzZWxmLmxjaWQgPSBpbnQobGNpZClcbiAgICAgICAgIyBXZSBhdm9pZCBhc3N1bWluZyBcJ21ham9yXCcgb3IgXCdtaW5vclwnIGFyZSBpbnRlZ2VycyAtIHdoZW5cbiAgICAgICAgIyByZWFkIGZyb20gdGhlIHJlZ2lzdHJ5IHRoZXJlIGlzIHNvbWUgY29uZnVzaW9uIGFib3V0IGlmXG4gICAgICAgICMgdGhleSBhcmUgYmFzZSAxMCBvciBiYXNlIDE2ICh0aGV5ICpzaG91bGQqIGJlIGJhc2UgMTYsIGJ1dFxuICAgICAgICAjIGhvdyB0aGV5IGFyZSB3cml0dGVuIGlzIGJleW9uZCBvdXIgY29udHJvbC4pXG4gICAgICAgIHNlbGYubWFqb3IgPSBtYWpvclxuICAgICAgICBzZWxmLm1pbm9yID0gbWlub3JcbiAgICAgICAgc2VsZi5kbGwgPSBOb25lXG4gICAgICAgIHNlbGYuZGVzYyA9IE5vbmVcbiAgICAgICAgc2VsZi52ZXJfZGVzYyA9IE5vbmVcbiAgICAgICAgc2VsZi5mbGFncyA9IGZsYWdzXG5cbiAgICAjIEZvciB0aGUgU2VsZWN0TGlzdFxuICAgIGRlZiBfX2dldGl0ZW1fXyhzZWxmLCBpdGVtKTpcbiAgICAgICAgaWYgaXRlbSA9PSAwOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYudmVyX2Rlc2NcbiAgICAgICAgcmFpc2UgSW5kZXhFcnJvcigiQ2FudCBpbmRleCBtZSEiKVxuXG4gICAgZGVmIF9fbHRfXyhzZWxmLCBvdGhlcik6ICAjIHJpY2gtY21wL3B5M2stZnJpZW5kbHkgdmVyc2lvblxuICAgICAgICBtZSA9IChcbiAgICAgICAgICAgIChzZWxmLnZlcl9kZXNjIG9yICIiKS5sb3dlcigpLFxuICAgICAgICAgICAgKHNlbGYuZGVzYyBvciAiIikubG93ZXIoKSxcbiAgICAgICAgICAgIHNlbGYubWFqb3IsXG4gICAgICAgICAgICBzZWxmLm1pbm9yLFxuICAgICAgICApXG4gICAgICAgIHRoZW0gPSAoXG4gICAgICAgICAgICAob3RoZXIudmVyX2Rlc2Mgb3IgIiIpLmxvd2VyKCksXG4gICAgICAgICAgICAob3RoZXIuZGVzYyBvciAiIikubG93ZXIoKSxcbiAgICAgICAgICAgIG90aGVyLm1ham9yLFxuICAgICAgICAgICAgb3RoZXIubWlub3IsXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIG1lIDwgdGhlbVxuXG4gICAgZGVmIF9fZXFfXyhzZWxmLCBvdGhlcik6ICAjIHJpY2gtY21wL3B5M2stZnJpZW5kbHkgdmVyc2lvblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgKHNlbGYudmVyX2Rlc2Mgb3IgIiIpLmxvd2VyKCkgPT0gKG90aGVyLnZlcl9kZXNjIG9yICIiKS5sb3dlcigpXG4gICAgICAgICAgICBhbmQgKHNlbGYuZGVzYyBvciAiIikubG93ZXIoKSA9PSAob3RoZXIuZGVzYyBvciAiIikubG93ZXIoKVxuICAgICAgICAgICAgYW5kIHNlbGYubWFqb3IgPT0gb3RoZXIubWFqb3JcbiAgICAgICAgICAgIGFuZCBzZWxmLm1pbm9yID09IG90aGVyLm1pbm9yXG4gICAgICAgIClcblxuICAgIGRlZiBSZXNvbHZlKHNlbGYpOlxuICAgICAgICBpZiBzZWxmLmRsbCBpcyBOb25lOlxuICAgICAgICAgICAgcmV0dXJuIDBcbiAgICAgICAgdGxiID0gcHl0aG9uY29tLkxvYWRUeXBlTGliKHNlbGYuZGxsKVxuICAgICAgICBzZWxmLkZyb21UeXBlbGliKHRsYiwgTm9uZSlcbiAgICAgICAgcmV0dXJuIDFcblxuICAgIGRlZiBGcm9tVHlwZWxpYihzZWxmLCB0eXBlbGliLCBkbGxOYW1lPU5vbmUpOlxuICAgICAgICBsYSA9IHR5cGVsaWIuR2V0TGliQXR0cigpXG4gICAgICAgIHNlbGYuY2xzaWQgPSBzdHIobGFbMF0pXG4gICAgICAgIHNlbGYubGNpZCA9IGxhWzFdXG4gICAgICAgIHNlbGYubWFqb3IgPSBsYVszXVxuICAgICAgICBzZWxmLm1pbm9yID0gbGFbNF1cbiAgICAgICAgaWYgZGxsTmFtZTpcbiAgICAgICAgICAgIHNlbGYuZGxsID0gZGxsTmFtZVxuXG5cbmRlZiBFbnVtS2V5cyhyb290KTpcbiAgICBpbmRleCA9IDBcbiAgICByZXQgPSBbXVxuICAgIHdoaWxlIDE6XG4gICAgICAgIHRyeTpcbiAgICAgICAgICAgIGl0ZW0gPSB3aW4zMmFwaS5SZWdFbnVtS2V5KHJvb3QsIGluZGV4KVxuICAgICAgICBleGNlcHQgd2luMzJhcGkuZXJyb3I6XG4gICAgICAgICAgICBicmVha1xuICAgICAgICB0cnk6XG4gICAgICAgICAgICAjIE5vdGUgdGhpcyBkb2VzblwndCBoYW5kbGUgUkVHX0VYUEFORF9TWiwgYnV0IHRoZSBpbXBsZW1lbnRhdGlvblxuICAgICAgICAgICAgIyBoZXJlIGRvZXNuXCd0IG5lZWQgdG8gLSB0aGF0IGlzIGhhbmRsZWQgYXMgdGhlIGRhdGEgaXMgcmVhZC5cbiAgICAgICAgICAgIHZhbCA9IHdpbjMyYXBpLlJlZ1F1ZXJ5VmFsdWUocm9vdCwgaXRlbSlcbiAgICAgICAgZXhjZXB0IHdpbjMyYXBpLmVycm9yOlxuICAgICAgICAgICAgdmFsID0gIiIgICMgY29kZSB1c2luZyB0aGlzIGFzc3VtZXMgYSBzdHJpbmcuXG5cbiAgICAgICAgcmV0LmFwcGVuZCgoaXRlbSwgdmFsKSlcbiAgICAgICAgaW5kZXggPSBpbmRleCArIDFcbiAgICByZXR1cm4gcmV0XG5cblxuRkxBR19SRVNUUklDVEVEID0gMVxuRkxBR19DT05UUk9MID0gMlxuRkxBR19ISURERU4gPSA0XG5cblxuZGVmIEVudW1UbGJzKGV4Y2x1ZGVGbGFncz0wKTpcbiAgICAiIiJSZXR1cm4gYSBsaXN0IG9mIFR5cGVsaWJTcGVjIG9iamVjdHMsIG9uZSBmb3IgZWFjaCByZWdpc3RlcmVkIGxpYnJhcnkuIiIiXG4gICAga2V5ID0gd2luMzJhcGkuUmVnT3BlbktleSh3aW4zMmNvbi5IS0VZX0NMQVNTRVNfUk9PVCwgIlR5cGVsaWIiKVxuICAgIGlpZHMgPSBFbnVtS2V5cyhrZXkpXG4gICAgcmVzdWx0cyA9IFtdXG4gICAgZm9yIGlpZCwgY3JhcCBpbiBpaWRzOlxuICAgICAgICB0cnk6XG4gICAgICAgICAgICBrZXkyID0gd2luMzJhcGkuUmVnT3BlbktleShrZXksIHN0cihpaWQpKVxuICAgICAgICBleGNlcHQgd2luMzJhcGkuZXJyb3I6XG4gICAgICAgICAgICAjIEEgZmV3IGdvb2QgcmVhc29ucyBmb3IgdGhpcywgaW5jbHVkaW5nICJhY2Nlc3MgZGVuaWVkIi5cbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIGZvciB2ZXJzaW9uLCB0bGJkZXNjIGluIEVudW1LZXlzKGtleTIpOlxuICAgICAgICAgICAgbWFqb3JfbWlub3IgPSB2ZXJzaW9uLnNwbGl0KCIuIiwgMSlcbiAgICAgICAgICAgIGlmIGxlbihtYWpvcl9taW5vcikgPCAyOlxuICAgICAgICAgICAgICAgIG1ham9yX21pbm9yLmFwcGVuZCgiMCIpXG4gICAgICAgICAgICAjIEZvciBzb21lIHJlYXNvbiwgdGhpcyBjb2RlIHVzZWQgdG8gYXNzdW1lIHRoZSB2YWx1ZXMgd2VyZSBoZXguXG4gICAgICAgICAgICAjIFRoaXMgc2VlbXMgdG8gbm90IGJlIHRydWUgLSBwYXJ0aWN1bGFybHkgZm9yIENETyAxLjIxXG4gICAgICAgICAgICAjICpzaWdoKiAtIGl0IGFwcGVhcnMgdGhlcmUgYXJlIG5vIHJ1bGVzIGhlcmUgYXQgYWxsLCBzbyB3aGVuIHdlIG5lZWRcbiAgICAgICAgICAgICMgdG8ga25vdyB0aGUgaW5mbywgd2UgbXVzdCBsb2FkIHRoZSB0bGIgYnkgZmlsZW5hbWUgYW5kIHJlcXVlc3QgaXQuXG4gICAgICAgICAgICAjIFRoZSBSZXNvbHZlKCkgbWV0aG9kIG9uIHRoZSBUeXBlbGliU3BlYyBkb2VzIHRoaXMuXG4gICAgICAgICAgICAjIEZvciB0aGlzIHJlYXNvbiwga2VlcCB0aGUgdmVyc2lvbiBudW1iZXJzIGFzIHN0cmluZ3MgLSB0aGF0XG4gICAgICAgICAgICAjIHdheSB3ZSBjYW5cJ3QgYmUgd3JvbmchICBMZXQgY29kZSB0aGF0IHJlYWxseSBuZWVkcyBhbiBpbnQgdG8gd29ya1xuICAgICAgICAgICAgIyBvdXQgd2hhdCB0byBkby4gIEZXSVcsIGh0dHA6Ly9zdXBwb3J0Lm1pY3Jvc29mdC5jb20va2IvODE2OTcwIGlzXG4gICAgICAgICAgICAjIHByZXR0eSBjbGVhciB0aGF0IHRoZXkgKnNob3VsZCogYmUgaGV4LlxuICAgICAgICAgICAgbWFqb3IgPSBtYWpvcl9taW5vclswXVxuICAgICAgICAgICAgbWlub3IgPSBtYWpvcl9taW5vclsxXVxuICAgICAgICAgICAga2V5MyA9IHdpbjMyYXBpLlJlZ09wZW5LZXkoa2V5Miwgc3RyKHZlcnNpb24pKVxuICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICMgVGhlICJGTEFHUyIgYXJlIGF0IHRoaXMgcG9pbnRcbiAgICAgICAgICAgICAgICBmbGFncyA9IGludCh3aW4zMmFwaS5SZWdRdWVyeVZhbHVlKGtleTMsICJGTEFHUyIpKVxuICAgICAgICAgICAgZXhjZXB0ICh3aW4zMmFwaS5lcnJvciwgVmFsdWVFcnJvcik6XG4gICAgICAgICAgICAgICAgZmxhZ3MgPSAwXG4gICAgICAgICAgICBpZiBmbGFncyAmIGV4Y2x1ZGVGbGFncyA9PSAwOlxuICAgICAgICAgICAgICAgIGZvciBsY2lkLCBjcmFwIGluIEVudW1LZXlzKGtleTMpOlxuICAgICAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgICAgICBsY2lkID0gaW50KGxjaWQpXG4gICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOiAgIyBub3QgYW4gTENJRCBlbnRyeVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgICAgICAgICAgIyBDaGVjayBmb3IgYm90aCAie2xjaWR9XFx3aW4zMiIgYW5kICJ7bGNpZH1cXHdpbjY0IiBrZXlzLlxuICAgICAgICAgICAgICAgICAgICB0cnk6XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk0ID0gd2luMzJhcGkuUmVnT3BlbktleShrZXkzLCAiJXNcXFxcd2luMzIiICUgKGxjaWQsKSlcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IHdpbjMyYXBpLmVycm9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTQgPSB3aW4zMmFwaS5SZWdPcGVuS2V5KGtleTMsICIlc1xcXFx3aW42NCIgJSAobGNpZCwpKVxuICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IHdpbjMyYXBpLmVycm9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICAgICAgICAgIHRyeTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRsbCwgdHlwID0gd2luMzJhcGkuUmVnUXVlcnlWYWx1ZUV4KGtleTQsIE5vbmUpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiB0eXAgPT0gd2luMzJjb24uUkVHX0VYUEFORF9TWjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkbGwgPSB3aW4zMmFwaS5FeHBhbmRFbnZpcm9ubWVudFN0cmluZ3MoZGxsKVxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgd2luMzJhcGkuZXJyb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICBkbGwgPSBOb25lXG4gICAgICAgICAgICAgICAgICAgIHNwZWMgPSBUeXBlbGliU3BlYyhpaWQsIGxjaWQsIG1ham9yLCBtaW5vciwgZmxhZ3MpXG4gICAgICAgICAgICAgICAgICAgIHNwZWMuZGxsID0gZGxsXG4gICAgICAgICAgICAgICAgICAgIHNwZWMuZGVzYyA9IHRsYmRlc2NcbiAgICAgICAgICAgICAgICAgICAgc3BlYy52ZXJfZGVzYyA9IHRsYmRlc2MgKyAiICgiICsgdmVyc2lvbiArICIpIlxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZChzcGVjKVxuICAgIHJldHVybiByZXN1bHRzXG5cblxuZGVmIEZpbmRUbGJzV2l0aERlc2NyaXB0aW9uKGRlc2MpOlxuICAgICIiIkZpbmQgYWxsIGluc3RhbGxlZCB0eXBlIGxpYnJhcmllcyB3aXRoIHRoZSBzcGVjaWZpZWQgZGVzY3JpcHRpb24iIiJcbiAgICByZXQgPSBbXVxuICAgIGl0ZW1zID0gRW51bVRsYnMoKVxuICAgIGZvciBpdGVtIGluIGl0ZW1zOlxuICAgICAgICBpZiBpdGVtLmRlc2MgPT0gZGVzYzpcbiAgICAgICAgICAgIHJldC5hcHBlbmQoaXRlbSlcbiAgICByZXR1cm4gcmV0XG5cblxuZGVmIFNlbGVjdFRsYih0aXRsZT0iU2VsZWN0IExpYnJhcnkiLCBleGNsdWRlRmxhZ3M9MCk6XG4gICAgIiIiRGlzcGxheSBhIGxpc3Qgb2YgYWxsIHRoZSB0eXBlIGxpYnJhcmllcywgYW5kIHNlbGVjdCBvbmUuICAgUmV0dXJucyBOb25lIGlmIGNhbmNlbGxlZCIiIlxuICAgIGltcG9ydCBweXdpbi5kaWFsb2dzLmxpc3RcblxuICAgIGl0ZW1zID0gRW51bVRsYnMoZXhjbHVkZUZsYWdzKVxuICAgICMgZml4dXAgdmVyc2lvbnMgLSB3ZSBhc3N1bWUgaGV4IChzZWUgX19pbml0X18gYWJvdmUpXG4gICAgZm9yIGkgaW4gaXRlbXM6XG4gICAgICAgIGkubWFqb3IgPSBpbnQoaS5tYWpvciwgMTYpXG4gICAgICAgIGkubWlub3IgPSBpbnQoaS5taW5vciwgMTYpXG4gICAgaXRlbXMuc29ydCgpXG4gICAgcmMgPSBweXdpbi5kaWFsb2dzLmxpc3QuU2VsZWN0RnJvbUxpc3RzKHRpdGxlLCBpdGVtcywgWyJUeXBlIExpYnJhcnkiXSlcbiAgICBpZiByYyBpcyBOb25lOlxuICAgICAgICByZXR1cm4gTm9uZVxuICAgIHJldHVybiBpdGVtc1tyY11cblxuXG4jIFRlc3QgY29kZS5cbmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6XG4gICAgcHJpbnQoU2VsZWN0VGxiKCkuX19kaWN0X18pXG4nKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgncGx1Z2lucy93aGF0c2FwcC5weScsIGIiZnJvbSBwbHVnaW5zIGltcG9ydCBQbHVnaW5cclxuZnJvbSBjb25maWcgaW1wb3J0IENvbmZpZ1xyXG5mcm9tIG9zLnBhdGggaW1wb3J0IGlzZGlyLCBqb2luXHJcbmZyb20gb3MgaW1wb3J0IG1rZGlyLCBzY2FuZGlyXHJcbmZyb20gc2VjcmV0cyBpbXBvcnQgdG9rZW5faGV4XHJcbmZyb20gdG9vbHMgaW1wb3J0IGNvcHl0cmVlXHJcblxyXG5cclxuXHJcbmNsYXNzIFdoYXRzYXBwKFBsdWdpbik6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29uZjogQ29uZmlnKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuY29uZiA9IGNvbmZcclxuXHJcblxyXG4gICAgYXN5bmMgZGVmIGNhbGxiYWNrKHNlbGYsIHBhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNkaXIocGF0aCk6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBmb2xkZXIgPSBqb2luKHBhdGgsICdsb2NhbCBzdG9yYWdlJywgJ2xldmVsZGInKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNkaXIoZm9sZGVyKTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgXHJcbiAgICAgICAgd2hhdHNhcHBfcmVzX2ZvbGRlciA9IGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCAnd2hhdHNhcHAnKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNkaXIod2hhdHNhcHBfcmVzX2ZvbGRlcik6XHJcbiAgICAgICAgICAgIG1rZGlyKHdoYXRzYXBwX3Jlc19mb2xkZXIpXHJcblxyXG4gICAgICAgIHJlcyA9IGpvaW4od2hhdHNhcHBfcmVzX2ZvbGRlciwgZid3aGF0c2FwcF97dG9rZW5faGV4KDQpfScpXHJcblxyXG4gICAgICAgIGF3YWl0IGNvcHl0cmVlKGZvbGRlciwgcmVzKVxyXG5cclxuICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ1doYXRzYXBwIHN0ZWFsZWQgZnJvbSB7cGF0aH0nKSIpCiAgICBfX3N0aWNreXRhcGVfd3JpdGVfbW9kdWxlKCdwbHVnaW5zL0RldGFpbHMucHknLCBiImZyb20gYXN5bmNpbyBpbXBvcnQgY3JlYXRlX3Rhc2tcclxuZnJvbSBjb25maWcgaW1wb3J0IENvbmZpZ1xyXG5pbXBvcnQgb3NcclxuZnJvbSBvcy5wYXRoIGltcG9ydCBqb2luXHJcbmltcG9ydCBwbGF0Zm9ybVxyXG5mcm9tIGFpb2ZpbGVzIGltcG9ydCBvcGVuXHJcbmZyb20gbXNzLndpbmRvd3MgaW1wb3J0IE1TUyBhcyBtc3NcclxuZnJvbSB0b29scyBpbXBvcnQgbW92ZVxyXG5cclxuXHJcblxyXG5jbGFzcyBEZXRhaWxzKCk6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29uZjogQ29uZmlnKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuY29uZiA9IGNvbmZcclxuXHJcbiAgICBhc3luYyBkZWYgdGFrZV9zY3JlZW5zaG90KHNlbGYpIC0+IE5vbmU6XHJcbiAgICAgICAgd2l0aCBtc3MoKSBhcyBzY3Q6XHJcbiAgICAgICAgICAgIGZvciBmaWxlbmFtZSBpbiBzY3Quc2F2ZSgpOlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgbW92ZShmaWxlbmFtZSwgam9pbihzZWxmLmNvbmYubG9nX3BhdGgsIGZpbGVuYW1lKSlcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4YTFceGQwXHhiYVx4ZDFceDgwXHhkMFx4YjhceGQwXHhiZFx4ZDFceDg4XHhkMFx4YmVceGQxXHg4MiB7ZmlsZW5hbWV9IFx4ZDFceDgxXHhkMFx4YmVceGQxXHg4NVx4ZDFceDgwXHhkMFx4YjBceGQwXHhiZFx4ZDBceGI1XHhkMFx4YmQnKVxyXG4gXHJcbiAgICBhc3luYyBkZWYgY2FsbGJhY2soc2VsZikgLT4gTm9uZTpcclxuICAgICAgICBiZ190YXNrID0gY3JlYXRlX3Rhc2soc2VsZi50YWtlX3NjcmVlbnNob3QoKSlcclxuICAgICAgICB1c2VyID0gb3MuZ2V0bG9naW4oKVxyXG4gICAgICAgIHBjID0gcGxhdGZvcm0ubm9kZSgpXHJcbiAgICAgICAgdGFnID0gc2VsZi5jb25mLnRhZ1xyXG5cclxuICAgICAgICBkYXRhID0ge1xyXG4gICAgICAgICAgICAnY2xpZW50X2lkJzogc2VsZi5jb25mLmNsaWVudF9pZCxcclxuICAgICAgICAgICAgJ3RhZyc6IHRhZyxcclxuICAgICAgICAgICAgJ3VzZXJfbmFtZSc6IHVzZXIsXHJcbiAgICAgICAgICAgICdwY19uYW1lJzogcGNcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdXJsID0gZid7c2VsZi5jb25mLmhvc3R9L3JlY2VpdmVfZGV0YWlscydcclxuXHJcbiAgICAgICAgcmVzcCA9IGF3YWl0IHNlbGYuY29uZi5zZXNzaW9uLnBvc3QodXJsLCBqc29uPWRhdGEpXHJcblxyXG4gICAgICAgIGFzeW5jIHdpdGggb3Blbihqb2luKHNlbGYuY29uZi5sb2dfcGF0aCwgJ2RldGFpbHMudHh0JyksICd3JywgZW5jb2Rpbmc9J3V0ZjgnKSBhcyBmOlxyXG4gICAgICAgICAgICBhd2FpdCBmLndyaXRlKGYndXNlciBuYW1lOiB7dXNlcn1cXG5wYyBuYW1lOiB7cGN9XFxudGFnOiB7dGFnfScpXHJcblxyXG4gICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGYnXHhkMFx4OWVceGQxXHg4Mlx4ZDFceDgxXHhkMVx4ODJceGQxXHg4M1x4ZDBceGJhIFx4ZDBceGJlXHhkMVx4ODJceGQwXHhiZlx4ZDFceDgwXHhkMFx4YjBceGQwXHhiMlx4ZDBceGJiXHhkMFx4YjVceGQwXHhiZCcpXHJcblxyXG4gICAgICAgIGF3YWl0IGJnX3Rhc2siKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgncGx1Z2lucy9GaWxlemlsbGEucHknLCBiImZyb20gcGx1Z2lucyBpbXBvcnQgUGx1Z2luXHJcbmZyb20gY29uZmlnIGltcG9ydCBDb25maWdcclxuZnJvbSBvcy5wYXRoIGltcG9ydCBpc2Rpciwgam9pblxyXG5mcm9tIG9zIGltcG9ydCBta2Rpciwgc2NhbmRpclxyXG5mcm9tIHNlY3JldHMgaW1wb3J0IHRva2VuX2hleFxyXG5mcm9tIHRvb2xzIGltcG9ydCBjb3B5ZmlsZVxyXG5cclxuXHJcblxyXG5jbGFzcyBGaWxlemlsbGEoUGx1Z2luKTpcclxuICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjb25mOiBDb25maWcpIC0+IE5vbmU6XHJcbiAgICAgICAgc2VsZi5jb25mID0gY29uZlxyXG5cclxuXHJcbiAgICBhc3luYyBkZWYgY2FsbGJhY2soc2VsZiwgcGF0aDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIGlmIG5vdCBpc2RpcihwYXRoKTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHNlYXJjaCA9IHsncmVjZW50c2VydmVycy54bWwnLCAnc2l0ZW1hbmFnZXIueG1sJ31cclxuICAgICAgICBmaWxlcyA9IHNlYXJjaC5pbnRlcnNlY3Rpb24oaS5uYW1lIGZvciBpIGluIHNjYW5kaXIocGF0aCkpXHJcblxyXG4gICAgICAgIGlmIG5vdCBmaWxlczpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHJlc19wYXRoID0gam9pbihzZWxmLmNvbmYubG9nX3BhdGgsICdmaWxlemlsbGEnKVxyXG4gICAgICAgIGlmIG5vdCBpc2RpcihyZXNfcGF0aCk6XHJcbiAgICAgICAgICAgIG1rZGlyKHJlc19wYXRoKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciBmIGluIGZpbGVzOlxyXG4gICAgICAgICAgICBmaWxlbmFtZSA9IGYuc3BsaXQoJy4nKVswXVxyXG4gICAgICAgICAgICBkZXN0X3BhdGggPSBqb2luKHJlc19wYXRoLCBmJ3tmaWxlbmFtZX1fe3Rva2VuX2hleCg0KX0ueG1sJylcclxuICAgICAgICAgICAgYXdhaXQgY29weWZpbGUoam9pbihwYXRoLCBmKSwgZGVzdF9wYXRoKVxyXG5cclxuICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ0ZpbGV6aWxsYSBzdGVhbGVkIGZyb20ge3BhdGh9JykiKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgncGx1Z2lucy9UZWxlZ3JhbS5weScsIGInZnJvbSBwbHVnaW5zIGltcG9ydCBQbHVnaW5cclxuZnJvbSBjb25maWcgaW1wb3J0IENvbmZpZ1xyXG5mcm9tIG9zLnBhdGggaW1wb3J0IGlzZGlyLCBqb2luLCBub3JtcGF0aFxyXG5mcm9tIG9zIGltcG9ydCBta2Rpciwgc2NhbmRpclxyXG5mcm9tIHNlY3JldHMgaW1wb3J0IHRva2VuX2hleFxyXG5mcm9tIHRvb2xzIGltcG9ydCBjb3B5ZmlsZSwgY29weXRyZWVcclxuaW1wb3J0IHdpbnJlZ1xyXG5pbXBvcnQgcmVcclxuZnJvbSBwYXRocyBpbXBvcnQgTE9DQUxcclxuaW1wb3J0IHdpbjMyY29tLmNsaWVudFxyXG5pbXBvcnQgcHN1dGlsXHJcbmZyb20gb3MucGF0aCBpbXBvcnQgc3BsaXRcclxuXHJcblxyXG5cclxuY2xhc3MgVGVsZWdyYW0oUGx1Z2luKTpcclxuICAgIFNURUFMRUQgPSBzZXQoKVxyXG5cclxuXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29uZjogQ29uZmlnKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuY29uZiA9IGNvbmZcclxuXHJcbiAgICBhc3luYyBkZWYgY2FsbGJhY2soc2VsZiwgcGF0aDogc3RyKSAtPiBOb25lOlxyXG4gICAgICAgIHBhdGhfID0gbm9ybXBhdGgocGF0aC5sb3dlcigpKVxyXG4gICAgICAgIGlmIHBhdGhfIGluIFRlbGVncmFtLlNURUFMRUQ6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIGVsc2U6XHJcbiAgICAgICAgICAgIFRlbGVncmFtLlNURUFMRUQuYWRkKHBhdGhfKVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIG5vdCBpc2RpcihwYXRoKTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIHRkYXRhX3BhdGggPSBqb2luKHBhdGgsIFwndGRhdGFcJylcclxuICAgICAgICBpZiBub3QgaXNkaXIodGRhdGFfcGF0aCk6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICB0ZWxlZ3JhbV9wYXRoID0gam9pbihzZWxmLmNvbmYubG9nX3BhdGgsIFwndGVsZWdyYW1cJylcclxuICAgICAgICBpZiBub3QgaXNkaXIodGVsZWdyYW1fcGF0aCk6XHJcbiAgICAgICAgICAgIG1rZGlyKHRlbGVncmFtX3BhdGgpXHJcblxyXG4gICAgICAgIHJlc19wYXRoID0gam9pbih0ZWxlZ3JhbV9wYXRoLCBmXCd0ZGF0YV97dG9rZW5faGV4KDQpfVwnKVxyXG4gICAgICAgIG1rZGlyKHJlc19wYXRoKVxyXG5cclxuICAgICAgICBibGFja2xpc3QgPSBbXCdkdW1wc1wnLCBcJ2Vtb2ppXCcsIFwndXNlcl9kYXRhXCcsIFwnd29ya2luZ1wnXVxyXG5cclxuICAgICAgICBmb3IgZiBpbiBzY2FuZGlyKHRkYXRhX3BhdGgpOlxyXG4gICAgICAgICAgICBmaWxlX29rID0gVHJ1ZVxyXG4gICAgICAgICAgICBmb3IgaSBpbiBibGFja2xpc3Q6XHJcbiAgICAgICAgICAgICAgICBpZiBpIGluIGYubmFtZTpcclxuICAgICAgICAgICAgICAgICAgICBmaWxlX29rID0gRmFsc2VcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgbm90IGZpbGVfb2s6XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZnJvbV9wYXRoID0gam9pbih0ZGF0YV9wYXRoLCBmLm5hbWUpXHJcbiAgICAgICAgICAgIGRlc3RfcGF0aCA9IGpvaW4ocmVzX3BhdGgsIGYubmFtZSlcclxuXHJcbiAgICAgICAgICAgIGZ1bmMgPSBjb3B5ZmlsZSBpZiBmLmlzX2ZpbGUoKSBlbHNlIGNvcHl0cmVlXHJcbiAgICAgICAgICAgIGF3YWl0IGZ1bmMoZnJvbV9wYXRoLCBkZXN0X3BhdGgpXHJcblxyXG4gICAgICAgIGF3YWl0IHNlbGYuY29uZi5sb2dnZXIubG9nKGZcJ1RlbGVncmFtIHN0ZWFsZWQgZnJvbSB7cGF0aH1cJylcclxuXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgZ2V0X3JlZ2lzdHJ5X3BhdGgoKTpcclxuICAgICAgICBwYXRoID0gd2lucmVnLkhLRVlfQ0xBU1NFU19ST09UXHJcblxyXG4gICAgICAgIHRnID0gd2lucmVnLk9wZW5LZXlFeChwYXRoLCByInRkZXNrdG9wLnRnXFxcXCIpXHJcbiAgICAgICAgc2hlbGwgPSB3aW5yZWcuT3BlbktleUV4KHRnLCByXCdzaGVsbFxcXFxcJylcclxuICAgICAgICBvcGVuX3JnID0gd2lucmVnLk9wZW5LZXlFeChzaGVsbCwgclwnb3BlblxcXFxcJylcclxuICAgICAgICBrZXkgPSB3aW5yZWcuT3BlbktleUV4KG9wZW5fcmcsIHJcJ2NvbW1hbmRcXFxcXCcpXHJcblxyXG4gICAgICAgIHZhbHVlID0gd2lucmVnLkVudW1WYWx1ZShrZXksIDApXHJcblxyXG4gICAgICAgIHBhdGggPSByZS5maW5kYWxsKHJcJyIoW14iXSopXCcsIHZhbHVlWzFdKVsyXVxyXG4gICAgICAgIHJldHVybiBwYXRoXHJcbiAgICAgICAgXHJcbiAgICBAc3RhdGljbWV0aG9kXHJcbiAgICBkZWYgZ2V0X2xua19wYXRoKCk6XHJcbiAgICAgICAgZGVza3RvcCA9IGpvaW4oTE9DQUwsIFwnZGVza3RvcFwnKVxyXG5cclxuICAgICAgICBmb3IgaXQgaW4gc2NhbmRpcihkZXNrdG9wKTpcclxuICAgICAgICAgICAgaWYgaXQubmFtZS5zcGxpdChcJy5cJylbLTFdID09IFwnbG5rXCcgYW5kIFwndGVsZWdyYW1cJyBpbiBpdC5uYW1lLmxvd2VyKCk6XHJcbiAgICAgICAgICAgICAgICBzaGVsbCA9IHdpbjMyY29tLmNsaWVudC5EaXNwYXRjaCgiV1NjcmlwdC5TaGVsbCIpXHJcbiAgICAgICAgICAgICAgICBzaG9ydGN1dCA9IHNoZWxsLkNyZWF0ZVNob3J0Q3V0KGl0LnBhdGgpXHJcbiAgICAgICAgICAgICAgICBwYXRoID0gc2hvcnRjdXQuVGFyZ2V0cGF0aC5sb3dlcigpLnN0cmlwKFwndGVsZWdyYW0uZXhlXCcpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aFxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBnZXRfdGVsZWdyYW1zKCk6XHJcbiAgICAgICAgZm9yIHByb2MgaW4gcHN1dGlsLnByb2Nlc3NfaXRlcigpOlxyXG4gICAgICAgICAgICBpZiBcJ3RlbGVncmFtXCcgaW4gcHJvYy5uYW1lKCkubG93ZXIoKTpcclxuICAgICAgICAgICAgICAgIHRyeTpcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBzcGxpdChwcm9jLmV4ZSgpKVswXVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0OlxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3MnKQogICAgX19zdGlja3l0YXBlX3dyaXRlX21vZHVsZSgncGx1Z2lucy9XaGF0c2FwcC5weScsIGIiZnJvbSBwbHVnaW5zIGltcG9ydCBQbHVnaW5cclxuZnJvbSBjb25maWcgaW1wb3J0IENvbmZpZ1xyXG5mcm9tIG9zLnBhdGggaW1wb3J0IGlzZGlyLCBqb2luXHJcbmZyb20gb3MgaW1wb3J0IG1rZGlyLCBzY2FuZGlyXHJcbmZyb20gc2VjcmV0cyBpbXBvcnQgdG9rZW5faGV4XHJcbmZyb20gdG9vbHMgaW1wb3J0IGNvcHl0cmVlXHJcblxyXG5cclxuXHJcbmNsYXNzIFdoYXRzYXBwKFBsdWdpbik6XHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwgY29uZjogQ29uZmlnKSAtPiBOb25lOlxyXG4gICAgICAgIHNlbGYuY29uZiA9IGNvbmZcclxuXHJcblxyXG4gICAgYXN5bmMgZGVmIGNhbGxiYWNrKHNlbGYsIHBhdGg6IHN0cikgLT4gTm9uZTpcclxuICAgICAgICBpZiBub3QgaXNkaXIocGF0aCk6XHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBmb2xkZXIgPSBqb2luKHBhdGgsICdsb2NhbCBzdG9yYWdlJywgJ2xldmVsZGInKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNkaXIoZm9sZGVyKTpcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgXHJcbiAgICAgICAgd2hhdHNhcHBfcmVzX2ZvbGRlciA9IGpvaW4oc2VsZi5jb25mLmxvZ19wYXRoLCAnd2hhdHNhcHAnKVxyXG5cclxuICAgICAgICBpZiBub3QgaXNkaXIod2hhdHNhcHBfcmVzX2ZvbGRlcik6XHJcbiAgICAgICAgICAgIG1rZGlyKHdoYXRzYXBwX3Jlc19mb2xkZXIpXHJcblxyXG4gICAgICAgIHJlcyA9IGpvaW4od2hhdHNhcHBfcmVzX2ZvbGRlciwgZid3aGF0c2FwcF97dG9rZW5faGV4KDQpfScpXHJcblxyXG4gICAgICAgIGF3YWl0IGNvcHl0cmVlKGZvbGRlciwgcmVzKVxyXG5cclxuICAgICAgICBhd2FpdCBzZWxmLmNvbmYubG9nZ2VyLmxvZyhmJ1doYXRzYXBwIHN0ZWFsZWQgZnJvbSB7cGF0aH0nKSIpCiAgICBpbXBvcnQgYXN5bmNpbwogICAgZnJvbSBhc3luY2lvIGltcG9ydCBjcmVhdGVfdGFzawogICAgZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKICAgIGZyb20gcGF0aF9zZWFyY2ggaW1wb3J0IHNlYXJjaF9wbHVnaW5fcGF0aHMsIHJvb3RfcGF0aHMKICAgIGZyb20gY29uZmlnIGltcG9ydCBDb25maWcKICAgIGZyb20gYWlvaHR0cCBpbXBvcnQgQ2xpZW50U2Vzc2lvbiBhcyBTZXNzaW9uCiAgICBpbXBvcnQgc2VjcmV0cwogICAgaW1wb3J0IHRpbWVpdAogICAgZnJvbSBwYXRocyBpbXBvcnQgVEVNUAogICAgZnJvbSBvcyBpbXBvcnQgbWtkaXIKICAgIGZyb20gb3MucGF0aCBpbXBvcnQgam9pbgogICAgZnJvbSB6aXBmaWxlIGltcG9ydCBaaXBGaWxlLCBaSVBfREVGTEFURUQKICAgIGZyb20gdG9vbHMgaW1wb3J0IHppcGRpciwgX2hhbmRsZV90YXNrX3Jlc3VsdAogICAgZnJvbSBsb2dnZXIgaW1wb3J0IExvZ2dlcgogICAgZnJvbSBvcyBpbXBvcnQgc2NhbmRpcgogICAgCiAgICBmcm9tIHBsdWdpbnMgaW1wb3J0IENocm9taXVtLCBEZXRhaWxzLCBFeG9kdXMsIEZpbGV6aWxsYSwgVGVsZWdyYW0sIFdoYXRzYXBwCiAgICAKICAgIAogICAgCiAgICBIT1NUID0gJ2h0dHA6Ly8xODUuMTIxLjgxLjY2OjE0ODgnCiAgICAKICAgIAogICAgYXN5bmMgZGVmIG1haW4oKSAtPiBOb25lOgogICAgICAgIHN0YXJ0ID0gdGltZWl0LmRlZmF1bHRfdGltZXIoKQogICAgCiAgICAgICAgY2xpZW50X2lkID0gc2VjcmV0cy50b2tlbl9oZXgoMTApCiAgICAgICAgbG9nX3BhdGggPSBqb2luKFRFTVAsIGNsaWVudF9pZCkKICAgIAogICAgICAgIHByaW50KGxvZ19wYXRoKQogICAgICAgIG1rZGlyKGxvZ19wYXRoKQogICAgCiAgICAgICAgdGFza3M6IExpc3RbYXN5bmNpby5UYXNrXSA9IFtdCiAgICAKICAgICAgICBzZXNzaW9uID0gU2Vzc2lvbigpCiAgICAgICAgbG9nZ2VyID0gTG9nZ2VyKGxvZ19wYXRoKQogICAgICAgIGNvbmYgPSBDb25maWcoY2xpZW50X2lkLCBIT1NULCBsb2dfcGF0aCwgbG9nZ2VyLCBzZXNzaW9uLCB0YWc9J3Rlc3QnKQogICAgCiAgICAgICAgYXdhaXQgbG9nZ2VyLmxvZyhmJ1N0YXJ0JykKICAgICAgICAKICAgICAgICBjaHJvbWl1bSA9IENocm9taXVtKGNvbmYpCiAgICAgICAgdGVsZWdyYW0gPSBUZWxlZ3JhbShjb25mKQogICAgCiAgICAgICAgc2VhcmNoX2ZvbGRlcl9uYW1lcyA9IHsKICAgICAgICAgICAgJ2dvb2dsZSc6IGNocm9taXVtLAogICAgICAgICAgICAnZXhvZHVzJzogRXhvZHVzKGNvbmYpLAogICAgICAgICAgICAnbW96aWxsYSc6IE5vbmUsCiAgICAgICAgICAgICd0ZWxlZ3JhbSBkZXNrdG9wJzogdGVsZWdyYW0sCiAgICAgICAgICAgICd0ZWxlZ3JhbSc6IFRlbGVncmFtKGNvbmYpLAogICAgICAgICAgICAnb3BlcmEgc29mdHdhcmUnOiBjaHJvbWl1bSwKICAgICAgICAgICAgJ2ZpbGV6aWxsYSc6IEZpbGV6aWxsYShjb25mKSwKICAgICAgICAgICAgJ3doYXRzYXBwJzogV2hhdHNhcHAoY29uZikKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdGFza3MuYXBwZW5kKGNyZWF0ZV90YXNrKHNlYXJjaF9wbHVnaW5fcGF0aHMocm9vdF9wYXRocywgc2VhcmNoX2ZvbGRlcl9uYW1lcywgbG9nZ2VyKSkpCiAgICAKICAgICAgICBvdGhlcl9wbHVnaW5zID0gW0RldGFpbHMoY29uZildCiAgICAKICAgICAgICBmb3IgcGx1Z2luIGluIG90aGVyX3BsdWdpbnM6CiAgICAgICAgICAgIHRhc2tzLmFwcGVuZChjcmVhdGVfdGFzayhwbHVnaW4uY2FsbGJhY2soKSkpCiAgICAKICAgICAgICBmb3IgdGFzayBpbiB0YXNrczoKICAgICAgICAgICAgdGFzay5hZGRfZG9uZV9jYWxsYmFjayhsYW1iZGEgeDogX2hhbmRsZV90YXNrX3Jlc3VsdCh4LCBsb2dnZXIpKQogICAgCiAgICAgICAgIyBTdGVhbCBURwogICAgICAgIHRyeToKICAgICAgICAgICAgdGdfcGF0aCA9IFRlbGVncmFtLmdldF9yZWdpc3RyeV9wYXRoKCkKICAgICAgICAgICAgYXdhaXQgdGVsZWdyYW0uY2FsbGJhY2sodGdfcGF0aCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5sb2coZidFcnJvciB3aGVuIHN0ZWFsaW5nIHRlbGVncmFtIHJlZ2lzdHJ5LCB7ZX0nKQogICAgCiAgICAgICAgdHJ5OgogICAgICAgICAgICB0Z19wYXRoMiA9IFRlbGVncmFtLmdldF9sbmtfcGF0aCgpCiAgICAgICAgICAgIGlmIHRnX3BhdGgyOgogICAgICAgICAgICAgICAgYXdhaXQgdGVsZWdyYW0uY2FsbGJhY2sodGdfcGF0aCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGF3YWl0IGxvZ2dlci5sb2coZidFcnJvciB3aGVuIHN0ZWFsaW5nIHRlbGVncmFtIGxuaywge2V9JykKICAgIAogICAgICAgIHRyeToKICAgICAgICAgICAgZm9yIHRnX3BhdGhfIGluIFRlbGVncmFtLmdldF90ZWxlZ3JhbXMoKToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBhd2FpdCB0ZWxlZ3JhbS5jYWxsYmFjayh0Z19wYXRoXykKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICBhd2FpdCBsb2dnZXIubG9nKGYnVGVsZWdyYW0gZnJvbSBwc3V0aWwgZXJyb3IsIHtlfScpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBhd2FpdCBsb2dnZXIubG9nKGYnRXJyb3Igd2hlbiBzdGVhbGluZyB0ZWxlZ3JhbXMgcHJvYywge2V9JykKICAgICAgICAjIEVuZCBURwogICAgCiAgICAgICAgZm9yIHRhc2sgaW4gdGFza3M6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGF3YWl0IHRhc2sKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgYXdhaXQgbG9nZ2VyLmxvZyhmJ0Vycm9yIGluIG1haW4ucHkgdGFza3Mge2V9JykKICAgICAgICAKICAgICAgICBhd2FpdCBsb2dnZXIubG9nKGYn0J3QsNGH0LjQvdCw0Y4g0L7RgtC/0YDQsNCy0LrRgyDQu9C+0LPQsCcpCiAgICAKICAgICAgICB6aXBfbG9nX3BhdGggPSBqb2luKFRFTVAsIGYne2NsaWVudF9pZH0uemlwJykKICAgICAgICB3aXRoIFppcEZpbGUoemlwX2xvZ19wYXRoLCAndycsIFpJUF9ERUZMQVRFRCkgYXMgemlwZjoKICAgICAgICAgICAgemlwZGlyKGxvZ19wYXRoLCB6aXBmKQogICAgCiAgICAgICAgZmlsZXMgPSB7J2ZpbGUnOiBvcGVuKHppcF9sb2dfcGF0aCwgJ3JiJyl9CiAgICAgICAgICAgIAogICAgICAgIGF3YWl0IHNlc3Npb24ucG9zdChmJ3tIT1NUfS9yZWNlaXZlX2xvZycsIHBhcmFtcz17J2NsaWVudF9pZCc6IGNsaWVudF9pZH0sIGRhdGE9ZmlsZXMpCiAgICAgICAgYXdhaXQgc2Vzc2lvbi5jbG9zZSgpCiAgICAKICAgICAgICBzdG9wID0gdGltZWl0LmRlZmF1bHRfdGltZXIoKQogICAgICAgIGF3YWl0IGxvZ2dlci5sb2coZidUaW1lOiB7c3RvcC1zdGFydH0nKQogICAgCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiAnREVCVUcnIG5vdCBpbiB7aS5uYW1lIGZvciBpIGluIHNjYW5kaXIoam9pbihURU1QLCAnX19weWNhY2hlX18nKSl9OgogICAgICAgICAgICAgICAgZnJvbSBzaHV0aWwgaW1wb3J0IHJtdHJlZQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHJtdHJlZShqb2luKFRFTVAsICdfX3B5Y2FjaGVfXycpKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgIHJtdHJlZShsb2dfcGF0aCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKICAgIAogICAgYXN5bmNpby5nZXRfZXZlbnRfbG9vcCgpLnJ1bl91bnRpbF9jb21wbGV0ZShtYWluKCkp'))
105	

--------------------------------------------------

Code scanned:
	Total lines of code: 635
	Total lines skipped (#nosec): 0

Run metrics:
	Total issues (by severity):
		Undefined: 0.0
		Low: 0.0
		Medium: 5.0
		High: 24.0
	Total issues (by confidence):
		Undefined: 0.0
		Low: 0.0
		Medium: 27.0
		High: 2.0
Files skipped (0):
