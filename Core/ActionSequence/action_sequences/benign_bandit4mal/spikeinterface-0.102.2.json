[
  {
    "metadata": {
      "package_name": "spikeinterface-0.102.2",
      "total_matches": 1,
      "processing_date": "2025-05-18 01:49:40"
    }
  },
  {
    "pyfile": "core_tools.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/spikeinterface-0.102.2/spikeinterface-0.102.2/src/spikeinterface/core/core_tools.py",
    "line_number": "729",
    "type_description": "B838:process",
    "severity": "High",
    "confidence": "Medium",
    "original_snippet": "728\t    if measure_in_process:\n729\t        process = psutil.Process()\n730\t        memory = process.memory_info().rss",
    "code_snippet": "def measure_memory_allocation(measure_in_process: bool = True) -> float:\n    \"\"\"\n    A local utility to measure memory allocation at a specific point in time.\n    Can measure either the process resident memory or system wide memory available\n\n    Uses psutil package.\n\n    Parameters\n    ----------\n    measure_in_process : bool, True by default\n        Mesure memory allocation in the current process only, if false then measures at the system\n        level.\n    \"\"\"\n    import psutil\n\n    if measure_in_process:\n        process = psutil.Process()\n        memory = process.memory_info().rss\n    else:\n        mem_info = psutil.virtual_memory()\n        memory = mem_info.total - mem_info.available\n\n    return memory",
    "pattern_analysis": {
      "api_sequence": [
        "psutil.Process",
        "psutil.Process.memory_info",
        "psutil.virtual_memory"
      ],
      "api_sequence_with_args": [
        "psutil.Process()",
        "psutil.Process.memory_info()",
        "psutil.virtual_memory()"
      ],
      "mapped_sequence": [
        {
          "api_name": "psutil.Process",
          "id": "get_process_info",
          "description": "Retrieves process information as dictionary",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_information"
        },
        {
          "api_name": "psutil.Process.memory_info",
          "id": "get_virtual_memory",
          "description": "Retrieves system virtual memory statistics",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "hardware_information"
        },
        {
          "api_name": "psutil.virtual_memory",
          "id": "get_virtual_memory",
          "description": "Retrieves system virtual memory statistics",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "hardware_information"
        }
      ],
      "contextual_code": "import psutil\n\nif measure_in_process:\n    process = psutil.Process()\n    memory = process.memory_info().rss\nelse:\n    mem_info = psutil.virtual_memory()\n    memory = mem_info.total - mem_info.available"
    }
  }
]