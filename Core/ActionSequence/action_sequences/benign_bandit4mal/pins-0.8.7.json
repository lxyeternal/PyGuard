[
  {
    "metadata": {
      "package_name": "pins-0.8.7",
      "total_matches": 1,
      "processing_date": "2025-05-18 01:49:39"
    }
  },
  {
    "pyfile": "test_boards.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/pins-0.8.7/pins-0.8.7/pins/tests/test_boards.py",
    "line_number": "613",
    "type_description": "B815:write",
    "severity": "High",
    "confidence": "Medium",
    "original_snippet": "612\n613\t    board.pin_write(df, \"some_df\", type=\"csv\")\n614\t    meta = board.pin_meta(\"some_df\")",
    "code_snippet": "def test_board_base_pin_meta_cache_touch(tmp_path: Path, df):\n    cache = fsspec.filesystem(\n        \"pinscache\",\n        target_protocol=\"file\",\n        same_names=True,\n        hash_prefix=str(tmp_path),\n    )\n    board = BaseBoard(str(tmp_path), fs=cache)\n\n    board.pin_write(df, \"some_df\", type=\"csv\")\n    meta = board.pin_meta(\"some_df\")\n    v = meta.version.version\n\n    p_cache_version = board._get_cache_path(meta.name, v)\n    p_cache_meta = Path(p_cache_version) / \"data.txt\"\n\n    orig_access = p_cache_meta.stat().st_atime\n\n    sleep(0.3)\n\n    board.pin_meta(\"some_df\")\n\n    new_access = p_cache_meta.stat().st_atime\n\n    assert orig_access < new_access",
    "pattern_analysis": {
      "api_sequence": [
        "fsspec.filesystem",
        "BaseBoard",
        "BaseBoard.pin_write",
        "BaseBoard.pin_meta",
        "BaseBoard._get_cache_path",
        "Path.stat",
        "sleep",
        "BaseBoard.pin_meta",
        "Path.stat"
      ],
      "api_sequence_with_args": [
        "fsspec.filesystem(\"pinscache\", target_protocol=\"file\", same_names=True, hash_prefix=str(tmp_path))",
        "BaseBoard(str(tmp_path), fs=cache)",
        "BaseBoard.pin_write(df, \"some_df\", type=\"csv\")",
        "BaseBoard.pin_meta(\"some_df\")",
        "BaseBoard._get_cache_path(meta.name, v)",
        "Path.stat()",
        "sleep(0.3)",
        "BaseBoard.pin_meta(\"some_df\")",
        "Path.stat()"
      ],
      "mapped_sequence": [
        {
          "api_name": "fsspec.filesystem",
          "id": "import_dynamic",
          "description": "Dynamically imports specified module",
          "first_id": "code_execution",
          "second_id": "module_management",
          "third_id": "module_importing"
        },
        {
          "api_name": "BaseBoard",
          "id": "init_parent_class",
          "description": "Initializes parent class with provided arguments",
          "first_id": "code_execution",
          "second_id": "object_initialization",
          "third_id": "class_initialization"
        },
        {
          "api_name": "BaseBoard.pin_write",
          "id": "basic_file_writing",
          "description": "Writing data to files (strings or bytes)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_writing"
        },
        {
          "api_name": "BaseBoard.pin_meta",
          "id": "basic_file_reading",
          "description": "Reading content from files (by lines or entire content)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_reading"
        },
        {
          "api_name": "BaseBoard._get_cache_path",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "Path.stat",
          "id": "path_object_operations",
          "description": "Path object and status operations (creating Path objects, retrieving file status)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "sleep",
          "id": "suspend_execution",
          "description": "Suspends execution for specified seconds",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "time_operations"
        },
        {
          "api_name": "BaseBoard.pin_meta",
          "id": "basic_file_reading",
          "description": "Reading content from files (by lines or entire content)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_reading"
        },
        {
          "api_name": "Path.stat",
          "id": "path_object_operations",
          "description": "Path object and status operations (creating Path objects, retrieving file status)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        }
      ],
      "contextual_code": "def test_board_base_pin_meta_cache_touch(tmp_path: Path, df):\n    cache = fsspec.filesystem(\n        \"pinscache\",\n        target_protocol=\"file\",\n        same_names=True,\n        hash_prefix=str(tmp_path),\n    )\n    board = BaseBoard(str(tmp_path), fs=cache)\n\n    board.pin_write(df, \"some_df\", type=\"csv\")\n    meta = board.pin_meta(\"some_df\")\n    v = meta.version.version\n\n    p_cache_version = board._get_cache_path(meta.name, v)\n    p_cache_meta = Path(p_cache_version) / \"data.txt\"\n\n    orig_access = p_cache_meta.stat().st_atime\n\n    sleep(0.3)\n\n    board.pin_meta(\"some_df\")\n\n    new_access = p_cache_meta.stat().st_atime"
    }
  }
]