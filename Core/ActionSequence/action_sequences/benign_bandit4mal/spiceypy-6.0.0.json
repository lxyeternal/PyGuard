[
  {
    "metadata": {
      "package_name": "spiceypy-6.0.0",
      "total_matches": 1,
      "processing_date": "2025-05-18 01:49:39"
    }
  },
  {
    "pyfile": "test_wrapper.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/spiceypy-6.0.0/spiceypy-6.0.0/src/spiceypy/tests/test_wrapper.py",
    "line_number": "4671",
    "type_description": "B815:write",
    "severity": "High",
    "confidence": "Medium",
    "original_snippet": "4670\t        kernelFile.write(\"FRAME_10100000_SEC_TARGET     = 'EARTH'\\n\")\n4671\t        kernelFile.write(\"FRAME_10100000_SEC_ABCORR     = 'NONE'\\n\")\n4672\t        kernelFile.write(\"FRAME_10100000_SEC_FRAME      = 'J2000'\\n\")",
    "code_snippet": "def test_gfsntc():\n    kernel = os.path.join(cwd, \"gfnstc_test.tf\")\n    cleanup_kernel(kernel)\n    with open(kernel, \"w\") as kernelFile:\n        kernelFile.write(\"\\\\begindata\\n\")\n        kernelFile.write(\"FRAME_SEM                     =  10100000\\n\")\n        kernelFile.write(\"FRAME_10100000_NAME           = 'SEM'\\n\")\n        kernelFile.write(\"FRAME_10100000_CLASS          =  5\\n\")\n        kernelFile.write(\"FRAME_10100000_CLASS_ID       =  10100000\\n\")\n        kernelFile.write(\"FRAME_10100000_CENTER         =  10\\n\")\n        kernelFile.write(\"FRAME_10100000_RELATIVE       = 'J2000'\\n\")\n        kernelFile.write(\"FRAME_10100000_DEF_STYLE      = 'PARAMETERIZED'\\n\")\n        kernelFile.write(\"FRAME_10100000_FAMILY         = 'TWO-VECTOR'\\n\")\n        kernelFile.write(\"FRAME_10100000_PRI_AXIS       = 'X'\\n\")\n        kernelFile.write(\"FRAME_10100000_PRI_VECTOR_DEF = 'OBSERVER_TARGET_POSITION'\\n\")\n        kernelFile.write(\"FRAME_10100000_PRI_OBSERVER   = 'SUN'\\n\")\n        kernelFile.write(\"FRAME_10100000_PRI_TARGET     = 'EARTH'\\n\")\n        kernelFile.write(\"FRAME_10100000_PRI_ABCORR     = 'NONE'\\n\")\n        kernelFile.write(\"FRAME_10100000_SEC_AXIS       = 'Y'\\n\")\n        kernelFile.write(\"FRAME_10100000_SEC_VECTOR_DEF = 'OBSERVER_TARGET_VELOCITY'\\n\")\n        kernelFile.write(\"FRAME_10100000_SEC_OBSERVER   = 'SUN'\\n\")\n        kernelFile.write(\"FRAME_10100000_SEC_TARGET     = 'EARTH'\\n\")\n        kernelFile.write(\"FRAME_10100000_SEC_ABCORR     = 'NONE'\\n\")\n        kernelFile.write(\"FRAME_10100000_SEC_FRAME      = 'J2000'\\n\")\n        kernelFile.close()\n    spice.furnsh(CoreKernels.testMetaKernel)\n    spice.furnsh(kernel)\n    et0 = spice.str2et(\"2007 JAN 01\")\n    et1 = spice.str2et(\"2008 JAN 01\")\n    cnfine = spice.cell_double(2)\n    spice.wninsd(et0, et1, cnfine)\n    result = spice.cell_double(2000)\n    spice.gfsntc(\n        \"EARTH\",\n        \"IAU_EARTH\",\n        \"Ellipsoid\",\n        \"NONE\",\n        \"SUN\",\n        \"SEM\",\n        [1.0, 0.0, 0.0],\n        \"LATITUDINAL\",\n        \"LATITUDE\",\n        \"=\",\n        0.0,\n        0.0,\n        90.0 * spice.spd(),\n        1000,\n        cnfine,\n        result,\n    )\n    count = spice.wncard(result)\n    assert count > 0\n    beg, end = spice.wnfetd(result, 0)\n    begstr = spice.timout(beg, \"YYYY-MON-DD HR:MN:SC.###### (TDB) ::TDB ::RND\", 80)\n    endstr = spice.timout(end, \"YYYY-MON-DD HR:MN:SC.###### (TDB) ::TDB ::RND\", 80)\n    assert begstr == \"2007-MAR-21 00:01:25.527303 (TDB)\"\n    assert endstr == \"2007-MAR-21 00:01:25.527303 (TDB)\"\n    beg, end = spice.wnfetd(result, 1)\n    begstr = spice.timout(beg, \"YYYY-MON-DD HR:MN:SC.###### (TDB) ::TDB ::RND\", 80)\n    endstr = spice.timout(end, \"YYYY-MON-DD HR:MN:SC.###### (TDB) ::TDB ::RND\", 80)\n    # uncertainty below is due to difference on arm vs x86 IEEE floating point issues\n    assert begstr == \"2007-SEP-23 09:46:39.606982 (TDB)\" or begstr == \"2007-SEP-23 09:46:39.606981 (TDB)\"\n    assert endstr == \"2007-SEP-23 09:46:39.606982 (TDB)\" or endstr == \"2007-SEP-23 09:46:39.606981 (TDB)\"\n    cleanup_kernel(kernel)",
    "pattern_analysis": {
      "api_sequence": [
        "os.path.join",
        "open",
        "cleanup_kernel",
        "spice.furnsh",
        "spice.furnsh",
        "spice.str2et",
        "spice.str2et",
        "spice.cell_double",
        "spice.wninsd",
        "spice.cell_double",
        "spice.gfsntc",
        "spice.wncard",
        "spice.wnfetd",
        "spice.timout",
        "spice.timout",
        "spice.wnfetd",
        "spice.timout",
        "spice.timout",
        "cleanup_kernel"
      ],
      "api_sequence_with_args": [
        "os.path.join(cwd, \"gfnstc_test.tf\")",
        "open(kernel, \"w\")",
        "cleanup_kernel(kernel)",
        "spice.furnsh(CoreKernels.testMetaKernel)",
        "spice.furnsh(kernel)",
        "spice.str2et(\"2007 JAN 01\")",
        "spice.str2et(\"2008 JAN 01\")",
        "spice.cell_double(2)",
        "spice.wninsd(et0, et1, cnfine)",
        "spice.cell_double(2000)",
        "spice.gfsntc(\"EARTH\", \"IAU_EARTH\", \"Ellipsoid\", \"NONE\", \"SUN\", \"SEM\", [1.0, 0.0, 0.0], \"LATITUDINAL\", \"LATITUDE\", \"=\", 0.0, 0.0, 90.0 * spice.spd(), 1000, cnfine, result)",
        "spice.wncard(result)",
        "spice.wnfetd(result, 0)",
        "spice.timout(beg, \"YYYY-MON-DD HR:MN:SC.###### (TDB) ::TDB ::RND\", 80)",
        "spice.timout(end, \"YYYY-MON-DD HR:MN:SC.###### (TDB) ::TDB ::RND\", 80)",
        "spice.wnfetd(result, 1)",
        "spice.timout(beg, \"YYYY-MON-DD HR:MN:SC.###### (TDB) ::TDB ::RND\", 80)",
        "spice.timout(end, \"YYYY-MON-DD HR:MN:SC.###### (TDB) ::TDB ::RND\", 80)",
        "cleanup_kernel(kernel)"
      ],
      "mapped_sequence": [
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "open",
          "id": "basic_write_operations",
          "description": "Basic file opening operations for writing (normal writing, binary writing)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "cleanup_kernel",
          "id": "delete_file",
          "description": "Deletes specified file from filesystem",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_transfer"
        }
      ],
      "contextual_code": "def test_gfsntc():\n    kernel = os.path.join(cwd, \"gfnstc_test.tf\")\n    cleanup_kernel(kernel)\n    with open(kernel, \"w\") as kernelFile:\n        # ... file writing ...\n        kernelFile.close()\n    # ... rest of function ...\n    cleanup_kernel(kernel)"
    }
  }
]