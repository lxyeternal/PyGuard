[
  {
    "metadata": {
      "package_name": "allennlp-2.10.1",
      "total_matches": 1,
      "processing_date": "2025-05-18 01:49:40"
    }
  },
  {
    "pyfile": "train_fixtures.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/allennlp-2.10.1/allennlp-2.10.1/scripts/train_fixtures.py",
    "line_number": "27",
    "type_description": "B836:rmtree",
    "severity": "High",
    "confidence": "Medium",
    "original_snippet": "26\t    if os.path.exists(serialization_dir):\n27\t        shutil.rmtree(serialization_dir)\n28",
    "code_snippet": "import glob\nimport logging\nimport os\nimport re\nimport shutil\nimport sys\nimport tempfile\n\nsys.path.insert(0, os.path.dirname(os.path.abspath(os.path.join(__file__, os.pardir))))\nfrom allennlp.commands.test_install import _get_module_root\nfrom allennlp.commands.train import train_model_from_file, train_model\nfrom allennlp.common import Params\nfrom allennlp.common.util import pushd\n\n\ndef train_fixture(config_prefix: str, config_filename: str = \"experiment.json\") -> None:\n    config_file = config_prefix + config_filename\n    serialization_dir = config_prefix + \"serialization\"\n    # Train model doesn't like it if we have incomplete serialization\n    # directories, so remove them if they exist.\n    if os.path.exists(serialization_dir):\n        shutil.rmtree(serialization_dir)\n\n    # train the model\n    train_model_from_file(config_file, serialization_dir)\n\n    # remove unnecessary files\n    shutil.rmtree(os.path.join(serialization_dir, \"log\"))\n\n    for filename in glob.glob(os.path.join(serialization_dir, \"*\")):\n        if (\n            filename.endswith(\".log\")\n            or filename.endswith(\".json\")\n            or re.search(r\"epoch_[0-9]+\\.th$\", filename)\n        ):\n            os.remove(filename)\n",
    "pattern_analysis": {
      "api_sequence": [
        "os.path.abspath",
        "os.path.join",
        "os.pardir",
        "os.path.dirname",
        "sys.path.insert",
        "os.path.exists",
        "shutil.rmtree",
        "train_model_from_file",
        "shutil.rmtree",
        "os.path.join",
        "glob.glob",
        "str.endswith",
        "str.endswith",
        "re.search",
        "os.remove"
      ],
      "api_sequence_with_args": [
        "os.path.abspath(os.path.join(__file__, os.pardir))",
        "os.path.join(__file__, os.pardir)",
        "os.pardir",
        "os.path.dirname(os.path.abspath(os.path.join(__file__, os.pardir)))",
        "sys.path.insert(0, os.path.dirname(os.path.abspath(os.path.join(__file__, os.pardir))))",
        "os.path.exists(serialization_dir)",
        "shutil.rmtree(serialization_dir)",
        "train_model_from_file(config_file, serialization_dir)",
        "shutil.rmtree(os.path.join(serialization_dir, \"log\"))",
        "os.path.join(serialization_dir, \"*\")",
        "glob.glob(os.path.join(serialization_dir, \"*\"))",
        "filename.endswith(\".log\")",
        "filename.endswith(\".json\")",
        "re.search(r\"epoch_[0-9]+\\.th$\", filename)",
        "os.remove(filename)"
      ],
      "mapped_sequence": [
        {
          "api_name": "os.path.abspath",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.pardir",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.dirname",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "sys.path.insert",
          "id": "insert_module_path",
          "description": "Inserts directory at start of module search path",
          "first_id": "code_execution",
          "second_id": "module_management",
          "third_id": "module_importing"
        },
        {
          "api_name": "os.path.exists",
          "id": "check_path_exists",
          "description": "Checks if specified path exists in filesystem",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_checking"
        },
        {
          "api_name": "shutil.rmtree",
          "id": "delete_directory",
          "description": "Recursively deletes directory and its contents",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "directory_operations"
        },
        {
          "api_name": "train_model_from_file",
          "id": "import_dynamic",
          "description": "Dynamically imports specified module",
          "first_id": "code_execution",
          "second_id": "module_management",
          "third_id": "module_importing"
        },
        {
          "api_name": "shutil.rmtree",
          "id": "delete_directory",
          "description": "Recursively deletes directory and its contents",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "directory_operations"
        },
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "glob.glob",
          "id": "list_files_directories",
          "description": "Lists files and directories in specified path",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "directory_operations"
        },
        {
          "api_name": "str.endswith",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "str.endswith",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "re.search",
          "id": "compile_regex",
          "description": "Compiles regular expression pattern",
          "first_id": "code_execution",
          "second_id": "code_evaluation_execution",
          "third_id": "code_compilation"
        },
        {
          "api_name": "os.remove",
          "id": "delete_file",
          "description": "Deletes specified file from filesystem",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_transfer"
        }
      ],
      "contextual_code": "import os\nimport shutil\nimport sys\nimport glob\nimport re\n\ndef train_fixture(config_prefix: str, config_filename: str = \"experiment.json\") -> None:\n    config_file = config_prefix + config_filename\n    serialization_dir = config_prefix + \"serialization\"\n    if os.path.exists(serialization_dir):\n        shutil.rmtree(serialization_dir)\n    train_model_from_file(config_file, serialization_dir)\n    shutil.rmtree(os.path.join(serialization_dir, \"log\"))\n    for filename in glob.glob(os.path.join(serialization_dir, \"*\")):\n        if (\n            filename.endswith(\".log\")\n            or filename.endswith(\".json\")\n            or re.search(r\"epoch_[0-9]+\\.th$\", filename)\n        ):\n            os.remove(filename)"
    }
  }
]