[
  {
    "metadata": {
      "package_name": "jupyter_packaging-0.12.3",
      "total_matches": 1,
      "processing_date": "2025-05-18 01:49:39"
    }
  },
  {
    "pyfile": "test_deprecated.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/jupyter_packaging-0.12.3/jupyter_packaging-0.12.3/tests/test_deprecated.py",
    "line_number": "54",
    "type_description": "B815:write",
    "severity": "High",
    "confidence": "Medium",
    "original_snippet": "53\t    for d in (sub_a1, sub_a2):\n54\t        d.join(\"__init__.py\").write(\"\")\n55",
    "code_snippet": "def test_finds_only_direct_subpackages(tmpdir):\n    a = tmpdir.mkdir(\"packageA\")\n    sub_a1 = a.mkdir(\"sub1\")\n    sub_a2 = a.mkdir(\"sub2\")\n    # No __init__.py in packageA:\n    for d in (sub_a1, sub_a2):\n        d.join(\"__init__.py\").write(\"\")\n\n    expected = []\n    with pytest.warns(DeprecationWarning):\n        assert expected == pkg.find_packages(str(tmpdir))\n",
    "pattern_analysis": {
      "api_sequence": [
        "tmpdir.mkdir",
        "tmpdir.mkdir",
        "tmpdir.mkdir",
        "sub_a1.join",
        "sub_a1.join.write",
        "sub_a2.join",
        "sub_a2.join.write",
        "pytest.warns",
        "pkg.find_packages"
      ],
      "api_sequence_with_args": [
        "tmpdir.mkdir(\"packageA\")",
        "a.mkdir(\"sub1\")",
        "a.mkdir(\"sub2\")",
        "sub_a1.join(\"__init__.py\")",
        "sub_a1.join(\"__init__.py\").write(\"\")",
        "sub_a2.join(\"__init__.py\")",
        "sub_a2.join(\"__init__.py\").write(\"\")",
        "pytest.warns(DeprecationWarning)",
        "pkg.find_packages(str(tmpdir))"
      ],
      "mapped_sequence": [
        {
          "api_name": "tmpdir.mkdir",
          "id": "create_directory",
          "description": "Creates directory, ignoring if it already exists",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "directory_operations"
        },
        {
          "api_name": "a.mkdir",
          "id": "create_directory",
          "description": "Creates directory, ignoring if it already exists",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "directory_operations"
        },
        {
          "api_name": "a.mkdir",
          "id": "create_directory",
          "description": "Creates directory, ignoring if it already exists",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "directory_operations"
        },
        {
          "api_name": "sub_a1.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "sub_a1.join.write",
          "id": "basic_file_writing",
          "description": "Writing data to files (strings or bytes)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_writing"
        },
        {
          "api_name": "sub_a2.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "sub_a2.join.write",
          "id": "basic_file_writing",
          "description": "Writing data to files (strings or bytes)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_writing"
        },
        {
          "api_name": "pytest.warns",
          "id": "error_handling_operations",
          "description": "File opening operations with error handling (ignore errors, custom error handling, etc.)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "pkg.find_packages",
          "id": "find_packages",
          "description": "Finds all packages in current directory",
          "first_id": "code_execution",
          "second_id": "module_management",
          "third_id": "package_configuration"
        }
      ],
      "contextual_code": "def test_finds_only_direct_subpackages(tmpdir):\n    a = tmpdir.mkdir(\"packageA\")\n    sub_a1 = a.mkdir(\"sub1\")\n    sub_a2 = a.mkdir(\"sub2\")\n    # No __init__.py in packageA:\n    for d in (sub_a1, sub_a2):\n        d.join(\"__init__.py\").write(\"\")\n\n    expected = []\n    with pytest.warns(DeprecationWarning):\n        assert expected == pkg.find_packages(str(tmpdir))"
    }
  }
]