[
  {
    "metadata": {
      "package_name": "scikit_fuzzy-0.5.0",
      "total_matches": 1,
      "processing_date": "2025-05-18 01:49:39"
    }
  },
  {
    "pyfile": "plot_directive.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/scikit_fuzzy-0.5.0/scikit_fuzzy-0.5.0/docs/ext/plot_directive.py",
    "line_number": "505",
    "type_description": "B800:exec_used",
    "severity": "Medium",
    "confidence": "High",
    "original_snippet": "504\t                if setup.config.plot_pre_code is None:\n505\t                    exec('import numpy as np\\n'\n506\t                         'from matplotlib import pyplot as plt\\n', ns)\n507\t                else:",
    "code_snippet": "def run_code(code, code_path, ns=None, function_name=None):\n    \"\"\"\n    Import a Python module from a path, and run the function given by\n    name, if function_name is not None.\n    \"\"\"\n\n    # Change the working directory to the directory of the example, so\n    # it can get at its data files, if any.  Add its path to sys.path\n    # so it can import any helper modules sitting beside it.\n    pwd = os.getcwd()\n    if setup.config.plot_working_directory is not None:\n        try:\n            os.chdir(setup.config.plot_working_directory)\n        except OSError as err:\n            raise OSError(str(err) + '\\n`plot_working_directory` option in'\n                          'Sphinx configuration file must be a valid '\n                          'directory path')\n        except TypeError as err:\n            raise TypeError(str(err) + '\\n`plot_working_directory` option in '\n                            'Sphinx configuration file must be a string or '\n                            'None')\n    elif code_path is not None:\n        dirname = os.path.abspath(os.path.dirname(code_path))\n        os.chdir(dirname)\n\n    with cbook._setattr_cm(\n            sys, argv=[code_path], path=[os.getcwd(), *sys.path]), \\\n            contextlib.redirect_stdout(StringIO()):\n        try:\n            code = unescape_doctest(code)\n            if ns is None:\n                ns = {}\n            if not ns:\n                if setup.config.plot_pre_code is None:\n                    exec('import numpy as np\\n'\n                         'from matplotlib import pyplot as plt\\n', ns)\n                else:\n                    exec(str(setup.config.plot_pre_code), ns)\n            if \"__main__\" in code:\n                ns['__name__'] = '__main__'\n\n            # Patch out non-interactive show() to avoid triggering a warning.\n            with cbook._setattr_cm(FigureManagerBase, show=lambda self: None):\n                exec(code, ns)\n                if function_name is not None:\n                    exec(function_name + \"()\", ns)\n\n        except (Exception, SystemExit):\n            raise PlotError(traceback.format_exc())\n        finally:\n            os.chdir(pwd)\n    return ns",
    "pattern_analysis": {
      "api_sequence": [
        "os.getcwd",
        "setup.config.plot_working_directory",
        "os.chdir",
        "os.path.abspath",
        "os.path.dirname",
        "os.chdir",
        "sys.path",
        "sys.argv",
        "os.getcwd",
        "sys.path",
        "cbook._setattr_cm",
        "contextlib.redirect_stdout",
        "unescape_doctest",
        "setup.config.plot_pre_code",
        "exec",
        "exec",
        "cbook._setattr_cm",
        "exec",
        "exec",
        "traceback.format_exc",
        "os.chdir"
      ],
      "api_sequence_with_args": [
        "os.getcwd()",
        "setup.config.plot_working_directory",
        "os.chdir(setup.config.plot_working_directory)",
        "os.path.abspath(os.path.dirname(code_path))",
        "os.path.dirname(code_path)",
        "os.chdir(dirname)",
        "sys.path",
        "sys.argv",
        "os.getcwd()",
        "sys.path",
        "cbook._setattr_cm(sys, argv=[code_path], path=[os.getcwd(), *sys.path])",
        "contextlib.redirect_stdout(StringIO())",
        "unescape_doctest(code)",
        "setup.config.plot_pre_code",
        "exec('import numpy as np\\nfrom matplotlib import pyplot as plt\\n', ns)",
        "exec(str(setup.config.plot_pre_code), ns)",
        "cbook._setattr_cm(FigureManagerBase, show=lambda self: None)",
        "exec(code, ns)",
        "exec(function_name + \"()\", ns)",
        "traceback.format_exc()",
        "os.chdir(pwd)"
      ],
      "mapped_sequence": [
        {
          "api_name": "os.getcwd",
          "id": "get_working_dir",
          "description": "Returns current working directory",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "setup.config.plot_working_directory",
          "id": "get_env_var",
          "description": "Retrieves value of environment variable",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "os.chdir",
          "id": "change_working_dir",
          "description": "Changes current working directory",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "os.path.abspath",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.dirname",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.chdir",
          "id": "change_working_dir",
          "description": "Changes current working directory",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "sys.path",
          "id": "get_cmd_args",
          "description": "Retrieves command-line arguments passed to script",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "sys.argv",
          "id": "get_cmd_args",
          "description": "Retrieves command-line arguments passed to script",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "os.getcwd",
          "id": "get_working_dir",
          "description": "Returns current working directory",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "sys.path",
          "id": "get_cmd_args",
          "description": "Retrieves command-line arguments passed to script",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "cbook._setattr_cm",
          "id": "set_builtin_attr",
          "description": "Sets attribute on builtins object",
          "first_id": "persistence_stealth",
          "second_id": "stealth_techniques",
          "third_id": "warning_disabling"
        },
        {
          "api_name": "contextlib.redirect_stdout",
          "id": "get_stdout_stream",
          "description": "Retrieves standard output stream object",
          "first_id": "persistence_stealth",
          "second_id": "user_interaction",
          "third_id": "interface_control"
        },
        {
          "api_name": "unescape_doctest",
          "id": "deserialize_from_bytes",
          "description": "Deserializes Python object from bytes",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "specific_format_encoding"
        },
        {
          "api_name": "setup.config.plot_pre_code",
          "id": "get_env_var",
          "description": "Retrieves value of environment variable",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "exec",
          "id": "exec_python_code",
          "description": "Dynamically executes Python code string",
          "first_id": "code_execution",
          "second_id": "code_evaluation_execution",
          "third_id": "string_execution"
        },
        {
          "api_name": "exec",
          "id": "exec_python_code",
          "description": "Dynamically executes Python code string",
          "first_id": "code_execution",
          "second_id": "code_evaluation_execution",
          "third_id": "string_execution"
        },
        {
          "api_name": "cbook._setattr_cm",
          "id": "set_builtin_attr",
          "description": "Sets attribute on builtins object",
          "first_id": "persistence_stealth",
          "second_id": "stealth_techniques",
          "third_id": "warning_disabling"
        },
        {
          "api_name": "exec",
          "id": "exec_python_code",
          "description": "Dynamically executes Python code string",
          "first_id": "code_execution",
          "second_id": "code_evaluation_execution",
          "third_id": "string_execution"
        },
        {
          "api_name": "exec",
          "id": "exec_python_code",
          "description": "Dynamically executes Python code string",
          "first_id": "code_execution",
          "second_id": "code_evaluation_execution",
          "third_id": "string_execution"
        },
        {
          "api_name": "traceback.format_exc",
          "id": "get_exception_info",
          "description": "Retrieves exception information from current stack frame",
          "first_id": "data_transformation_processing",
          "second_id": "collection_operations",
          "third_id": "iterator_operations"
        },
        {
          "api_name": "os.chdir",
          "id": "change_working_dir",
          "description": "Changes current working directory",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        }
      ],
      "contextual_code": "def run_code(code, code_path, ns=None, function_name=None):\n    pwd = os.getcwd()\n    if setup.config.plot_working_directory is not None:\n        try:\n            os.chdir(setup.config.plot_working_directory)\n        except OSError as err:\n            raise OSError(str(err) + '\\n`plot_working_directory` option in'\n                          'Sphinx configuration file must be a valid '\n                          'directory path')\n        except TypeError as err:\n            raise TypeError(str(err) + '\\n`plot_working_directory` option in '\n                            'Sphinx configuration file must be a string or '\n                            'None')\n    elif code_path is not None:\n        dirname = os.path.abspath(os.path.dirname(code_path))\n        os.chdir(dirname)\n\n    with cbook._setattr_cm(\n            sys, argv=[code_path], path=[os.getcwd(), *sys.path]), \\\n            contextlib.redirect_stdout(StringIO()):\n        try:\n            code = unescape_doctest(code)\n            if ns is None:\n                ns = {}\n            if not ns:\n                if setup.config.plot_pre_code is None:\n                    exec('import numpy as np\\n'\n                         'from matplotlib import pyplot as plt\\n', ns)\n                else:\n                    exec(str(setup.config.plot_pre_code), ns)\n            if \"__main__\" in code:\n                ns['__name__'] = '__main__'\n\n            with cbook._setattr_cm(FigureManagerBase, show=lambda self: None):\n                exec(code, ns)\n                if function_name is not None:\n                    exec(function_name + \"()\", ns)\n\n        except (Exception, SystemExit):\n            raise PlotError(traceback.format_exc())\n        finally:\n            os.chdir(pwd)"
    }
  }
]