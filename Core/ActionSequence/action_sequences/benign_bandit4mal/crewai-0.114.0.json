[
  {
    "metadata": {
      "package_name": "crewai-0.114.0",
      "total_matches": 1,
      "processing_date": "2025-05-18 01:49:40"
    }
  },
  {
    "pyfile": "plus_api.py",
    "full_path": "/home2/blue/Documents/PyPIAgent/Dataset/study/unzip_benign/crewai-0.114.0/crewai-0.114.0/src/crewai/cli/plus_api.py",
    "line_number": "66",
    "type_description": "B822:request",
    "severity": "High",
    "confidence": "Medium",
    "original_snippet": "65\t    def crew_status_by_name(self, project_name: str) -> requests.Response:\n66\t        return self._make_request(\n67\t            \"GET\", f\"{self.CREWS_RESOURCE}/by-name/{project_name}/status\"\n68\t        )",
    "code_snippet": "class PlusAPI:\n    \"\"\"\n    This class exposes methods for working with the CrewAI+ API.\n    \"\"\"\n\n    TOOLS_RESOURCE = \"/crewai_plus/api/v1/tools\"\n    CREWS_RESOURCE = \"/crewai_plus/api/v1/crews\"\n\n    def __init__(self, api_key: str) -> None:\n        self.api_key = api_key\n        self.headers = {\n            \"Authorization\": f\"Bearer {api_key}\",\n            \"Content-Type\": \"application/json\",\n            \"User-Agent\": f\"CrewAI-CLI/{get_crewai_version()}\",\n            \"X-Crewai-Version\": get_crewai_version(),\n        }\n        self.base_url = getenv(\"CREWAI_BASE_URL\", \"https://app.crewai.com\")\n\n    def _make_request(self, method: str, endpoint: str, **kwargs) -> requests.Response:\n        url = urljoin(self.base_url, endpoint)\n        session = requests.Session()\n        session.trust_env = False\n        return session.request(method, url, headers=self.headers, **kwargs)\n\n    def crew_status_by_name(self, project_name: str) -> requests.Response:\n        return self._make_request(\n            \"GET\", f\"{self.CREWS_RESOURCE}/by-name/{project_name}/status\"\n        )",
    "pattern_analysis": {
      "api_sequence": [
        "get_crewai_version",
        "get_crewai_version",
        "getenv",
        "urljoin",
        "requests.Session",
        "requests.Session.request"
      ],
      "api_sequence_with_args": [
        "get_crewai_version()",
        "get_crewai_version()",
        "getenv(\"CREWAI_BASE_URL\", \"https://app.crewai.com\")",
        "urljoin(self.base_url, endpoint)",
        "requests.Session()",
        "requests.Session.request(method, url, headers=self.headers, **kwargs)"
      ],
      "mapped_sequence": [
        {
          "api_name": "get_crewai_version",
          "id": "get_python_version",
          "description": "Retrieves Python interpreter version",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "get_crewai_version",
          "id": "get_python_version",
          "description": "Retrieves Python interpreter version",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "getenv",
          "id": "get_env_var",
          "description": "Retrieves value of environment variable",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "urljoin",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "requests.Session",
          "id": "create_http_session",
          "description": "Creates HTTP session for making asynchronous requests",
          "first_id": "basic_network_operations",
          "second_id": "http_requests",
          "third_id": "request_creation"
        },
        {
          "api_name": "requests.Session.request",
          "id": "send_http_custom",
          "description": "Sends HTTP request with specified method and parameters",
          "first_id": "basic_network_operations",
          "second_id": "http_requests",
          "third_id": "request_sending"
        }
      ],
      "contextual_code": "def __init__(self, api_key: str) -> None:\n    self.api_key = api_key\n    self.headers = {\n        \"Authorization\": f\"Bearer {api_key}\",\n        \"Content-Type\": \"application/json\",\n        \"User-Agent\": f\"CrewAI-CLI/{get_crewai_version()}\",\n        \"X-Crewai-Version\": get_crewai_version(),\n    }\n    self.base_url = getenv(\"CREWAI_BASE_URL\", \"https://app.crewai.com\")\n\ndef _make_request(self, method: str, endpoint: str, **kwargs) -> requests.Response:\n    url = urljoin(self.base_url, endpoint)\n    session = requests.Session()\n    session.trust_env = False\n    return session.request(method, url, headers=self.headers, **kwargs)\n\ndef crew_status_by_name(self, project_name: str) -> requests.Response:\n    return self._make_request(\n        \"GET\", f\"{self.CREWS_RESOURCE}/by-name/{project_name}/status\"\n    )"
    }
  }
]