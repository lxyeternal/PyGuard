[
  {
    "pyfile": "setup.py",
    "code_snippet": "# Relevant imports\nfrom io import open\nimport os\nimport sys\nfrom setuptools import setup\n\n# Variable declarations and assignments\nVERSIONFILE = \"arpeggio/__init__.py\"\nVERSION = None\nfor line in open(VERSIONFILE, \"r\", encoding='utf8').readlines():\n    if line.startswith('__version__'):\n        VERSION = line.split('\"')[1]\n\nif not VERSION:\n    raise RuntimeError('No version defined in arpeggio/__init__.py')\n\n# Immediate block containing the flagged line (Line 30)\nif sys.argv[-1].startswith('publish'):\n    if os.system(\"pip list | grep wheel\"):\n        print(\"wheel not installed.\\nUse `pip install wheel`.\\nExiting.\")\n        sys.exit()\n    if os.system(\"pip list | grep twine\"):\n        print(\"twine not installed.\\nUse `pip install twine`.\\nExiting.\")\n        sys.exit()\n    os.system(\"python setup.py sdist bdist_wheel\")\n    if sys.argv[-1] == 'publishtest':\n        os.system(\"twine upload -r test dist/*\")\n    else:\n        os.system(\"twine upload dist/*\")\n        print(\"You probably want to also tag the version now:\")\n        print(\"  git tag -a {0} -m 'version {0}'\".format(VERSION))\n        print(\"  git push --tags\")\n    sys.exit()\n\n# Data dependencies:\n# - os: imported at top\n# - sys: imported at top\n# - VERSION: assigned above\n# - sys.argv: used directly\n# - os.system: used directly\n# - print, sys.exit: built-ins\n\n# The rest of the file (for completeness)\nsetup(version=VERSION)\n",
    "pattern_analysis": {
      "api_sequence": [
        "open",
        "open.readlines",
        "os.system",
        "sys.exit",
        "os.system",
        "sys.exit",
        "os.system",
        "os.system",
        "os.system",
        "sys.exit"
      ],
      "api_sequence_with_args": [
        "open(VERSIONFILE, \"r\", encoding='utf8')",
        "open(VERSIONFILE, \"r\", encoding='utf8').readlines()",
        "os.system(\"pip list | grep wheel\")",
        "sys.exit()",
        "os.system(\"pip list | grep twine\")",
        "sys.exit()",
        "os.system(\"python setup.py sdist bdist_wheel\")",
        "os.system(\"twine upload -r test dist/*\")",
        "os.system(\"twine upload dist/*\")",
        "sys.exit()"
      ],
      "mapped_sequence": [
        {
          "api_name": "open",
          "id": "basic_read_operations",
          "description": "ic file opening operations for reading (normal reading, binary reading)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "open.readlines",
          "id": "basic_file_reading",
          "description": "Reading content from files (by lines or entire content)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_reading"
        },
        {
          "api_name": "os.system",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        },
        {
          "api_name": "sys.exit",
          "id": "exit_program",
          "description": "Exits program with specified status code",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_control"
        },
        {
          "api_name": "os.system",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        },
        {
          "api_name": "sys.exit",
          "id": "exit_program",
          "description": "Exits program with specified status code",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_control"
        },
        {
          "api_name": "os.system",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        },
        {
          "api_name": "os.system",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        },
        {
          "api_name": "os.system",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        },
        {
          "api_name": "sys.exit",
          "id": "exit_program",
          "description": "Exits program with specified status code",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_control"
        }
      ],
      "contextual_code": "# Variable declarations and assignments\nVERSIONFILE = \"arpeggio/__init__.py\"\nVERSION = None\nfor line in open(VERSIONFILE, \"r\", encoding='utf8').readlines():\n    if line.startswith('__version__'):\n        VERSION = line.split('\"')[1]\n\nif not VERSION:\n    raise RuntimeError('No version defined in arpeggio/__init__.py')\n\nif sys.argv[-1].startswith('publish'):\n    if os.system(\"pip list | grep wheel\"):\n        print(\"wheel not installed.\\nUse `pip install wheel`.\\nExiting.\")\n        sys.exit()\n    if os.system(\"pip list | grep twine\"):\n        print(\"twine not installed.\\nUse `pip install twine`.\\nExiting.\")\n        sys.exit()\n    os.system(\"python setup.py sdist bdist_wheel\")\n    if sys.argv[-1] == 'publishtest':\n        os.system(\"twine upload -r test dist/*\")\n    else:\n        os.system(\"twine upload dist/*\")\n        print(\"You probably want to also tag the version now:\")\n        print(\"  git tag -a {0} -m 'version {0}'\".format(VERSION))\n        print(\"  git push --tags\")\n    sys.exit()"
    }
  },
  {
    "metadata": {
      "package_name": "arpeggio-2.0.2",
      "total_matches": 1
    }
  }
]