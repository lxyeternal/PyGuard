[
  {
    "pyfile": "setup.py",
    "code_snippet": "import logging\nimport os\nimport shutil\nimport subprocess\nimport sys\n\ndef check_output(cmd):\n    return subprocess.check_output(cmd).decode('utf')\n\n# ...\n\ngdal_output = [None for i in range(4)]\n\nif 'clean' not in sys.argv:\n    try:\n        gdal_config = os.environ.get('GDAL_CONFIG', 'gdal-config')\n        for i, flag in enumerate(\n                [\"--cflags\", \"--libs\", \"--datadir\", \"--version\"]):\n            gdal_output[i] = check_output([gdal_config, flag]).strip()\n        for item in gdal_output[0].split():\n            if item.startswith(\"-I\"):\n                include_dirs.extend(item[2:].split(\":\"))\n        for item in gdal_output[1].split():\n            if item.startswith(\"-L\"):\n                library_dirs.extend(item[2:].split(\":\"))\n            elif item.startswith(\"-l\"):\n                libraries.append(item[2:])\n            else:\n                # e.g. -framework GDAL\n                extra_link_args.append(item)\n        gdalversion = gdal_output[3]\n        if gdalversion:\n            logging.info(\"GDAL API version obtained from gdal-config: %s\",\n                         gdalversion)\n\n    except Exception as e:\n        if os.name == \"nt\":\n            logging.info(\"Building on Windows requires extra options to\"\n                         \" setup.py to locate needed GDAL files.\\nMore\"\n                         \" information is available in the README.\")\n        else:\n            logging.warning(\"Failed to get options via gdal-config: %s\", str(e))\n",
    "pattern_analysis": {
      "api_sequence": [
        "sys.argv",
        "os.environ.get",
        "subprocess.check_output",
        "subprocess.check_output.decode",
        "logging.info",
        "os.name",
        "logging.info",
        "logging.warning"
      ],
      "api_sequence_with_args": [
        "sys.argv",
        "os.environ.get('GDAL_CONFIG', 'gdal-config')",
        "subprocess.check_output([gdal_config, flag])",
        "subprocess.check_output([gdal_config, flag]).decode('utf')",
        "logging.info(\"GDAL API version obtained from gdal-config: %s\", gdalversion)",
        "os.name",
        "logging.info(\"Building on Windows requires extra options to setup.py to locate needed GDAL files.\\nMore information is available in the README.\")",
        "logging.warning(\"Failed to get options via gdal-config: %s\", str(e))"
      ],
      "mapped_sequence": [
        {
          "api_name": "sys.argv",
          "id": "get_cmd_args",
          "description": "Retrieves command-line arguments passed to script",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "os.environ.get",
          "id": "get_env_var",
          "description": "Retrieves value of environment variable",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "subprocess.check_output",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        },
        {
          "api_name": "subprocess.check_output.decode",
          "id": "decode_bytes_codec",
          "description": "Decodes bytes using specified codec",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "byte_encoding"
        },
        {
          "api_name": "logging.info",
          "id": "log_info",
          "description": "Logs informational message",
          "first_id": "data_exfiltration",
          "second_id": "data_collection_operations",
          "third_id": "data_acquisition"
        },
        {
          "api_name": "os.name",
          "id": "get_os_id",
          "description": "Retrieves operating system identifier",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "os_information"
        },
        {
          "api_name": "logging.info",
          "id": "log_info",
          "description": "Logs informational message",
          "first_id": "data_exfiltration",
          "second_id": "data_collection_operations",
          "third_id": "data_acquisition"
        },
        {
          "api_name": "logging.warning",
          "id": "log_error",
          "description": "Logs error message",
          "first_id": "data_exfiltration",
          "second_id": "data_collection_operations",
          "third_id": "data_acquisition"
        }
      ],
      "contextual_code": "import logging\nimport os\nimport subprocess\nimport sys\n\ndef check_output(cmd):\n    return subprocess.check_output(cmd).decode('utf')\n\n# ...\n\ngdal_output = [None for i in range(4)]\n\nif 'clean' not in sys.argv:\n    try:\n        gdal_config = os.environ.get('GDAL_CONFIG', 'gdal-config')\n        for i, flag in enumerate([\"--cflags\", \"--libs\", \"--datadir\", \"--version\"]):\n            gdal_output[i] = check_output([gdal_config, flag]).strip()\n        gdalversion = gdal_output[3]\n        if gdalversion:\n            logging.info(\"GDAL API version obtained from gdal-config: %s\", gdalversion)\n    except Exception as e:\n        if os.name == \"nt\":\n            logging.info(\"Building on Windows requires extra options to setup.py to locate needed GDAL files.\\nMore information is available in the README.\")\n        else:\n            logging.warning(\"Failed to get options via gdal-config: %s\", str(e))"
    }
  },
  {
    "metadata": {
      "package_name": "fiona-1.10.1",
      "total_matches": 2
    }
  }
]