[
  {
    "pyfile": "setup.py",
    "code_snippet": "import os\nimport io\n\nfrom setuptools import setup\nfrom distutils import log\n\nimport subprocess\n\nclass PredistBuild(object):\n    \"\"\"\n    Mixin class to build translation files\n    \"\"\"\n    def build_trans(self):\n        log.info('building translation files')\n\n        # we need to use buildout, call the following commands in the specified\n        # order, and reverse if an issue is raised\n        cmds = [[os.path.join('bin', 'build')],\n                [os.path.join('bin', 'buildout'), 'parts=build'],\n                ['python', 'bootstrap.py']]\n        cmd = 0\n\n        try:\n            from subprocess import DEVNULL\n        except ImportError:\n            DEVNULL = open(os.devnull, 'wb')\n\n        while True:\n            try:\n                log.info('    - calling \"%s\"' % ' '.join(cmds[cmd]))\n                if subprocess.Popen(cmds[cmd], stderr=DEVNULL,\n                                    stdout=DEVNULL).wait():\n                    raise OSError\n                if not cmd:\n                    break\n                else:\n                    cmd -= 1\n            except OSError:\n                cmd += 1\n                if cmd > 2:\n                    if os.path.exists(os.path.join(os.path.dirname(__file__),\n                                                   'l18n', '__maps.py')):\n                        break\n                    else:\n                        raise RuntimeError('Could not build translation files')\n\n        log.info('translation files built successfully')",
    "pattern_analysis": {
      "api_sequence": [
        "os.path.join",
        "os.path.join",
        "os.path.join",
        "os.devnull",
        "open",
        "os.path.dirname",
        "os.path.join",
        "os.path.exists",
        "subprocess.Popen",
        "subprocess.Popen.wait"
      ],
      "api_sequence_with_args": [
        "os.path.join('bin', 'build')",
        "os.path.join('bin', 'buildout')",
        "os.path.join('bin', 'buildout'), 'parts=build'",
        "os.devnull",
        "open(os.devnull, 'wb')",
        "os.path.dirname(__file__)",
        "os.path.join(os.path.dirname(__file__), 'l18n', '__maps.py')",
        "os.path.exists(os.path.join(os.path.dirname(__file__), 'l18n', '__maps.py'))",
        "subprocess.Popen(cmds[cmd], stderr=DEVNULL, stdout=DEVNULL)",
        "subprocess.Popen(cmds[cmd], stderr=DEVNULL, stdout=DEVNULL).wait()"
      ],
      "mapped_sequence": [
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.devnull",
          "id": "get_os_null_device",
          "description": "Retrieves operating system null device path",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "os_information"
        },
        {
          "api_name": "open",
          "id": "open_null_device",
          "description": "Opens null device for writing",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "os.path.dirname",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.exists",
          "id": "check_path_exists",
          "description": "Checks if specified path exists in filesystem",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_checking"
        },
        {
          "api_name": "subprocess.Popen",
          "id": "spawn_process_no_shell",
          "description": "Spawns new process to execute command without shell access",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_creation"
        },
        {
          "api_name": "subprocess.Popen.wait",
          "id": "wait_process_completion",
          "description": "Waits for process to complete execution",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_control"
        }
      ],
      "contextual_code": "import os\nimport subprocess\n\nclass PredistBuild(object):\n    def build_trans(self):\n        cmds = [[os.path.join('bin', 'build')],\n                [os.path.join('bin', 'buildout'), 'parts=build'],\n                ['python', 'bootstrap.py']]\n        cmd = 0\n        try:\n            from subprocess import DEVNULL\n        except ImportError:\n            DEVNULL = open(os.devnull, 'wb')\n        while True:\n            try:\n                if subprocess.Popen(cmds[cmd], stderr=DEVNULL, stdout=DEVNULL).wait():\n                    raise OSError\n                if not cmd:\n                    break\n                else:\n                    cmd -= 1\n            except OSError:\n                cmd += 1\n                if cmd > 2:\n                    if os.path.exists(os.path.join(os.path.dirname(__file__), 'l18n', '__maps.py')):\n                        break\n                    else:\n                        raise RuntimeError('Could not build translation files')"
    }
  },
  {
    "metadata": {
      "package_name": "l18n-2021.3",
      "total_matches": 1
    }
  }
]