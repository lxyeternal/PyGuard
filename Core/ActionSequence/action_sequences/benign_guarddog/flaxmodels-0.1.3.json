[
  {
    "pyfile": "file_utils.py",
    "code_snippet": "import os\nimport json\nimport requests\n\ndef define_sagemaker_information():\n    try:\n        instance_data = requests.get(os.environ[\"ECS_CONTAINER_METADATA_URI\"]).json()\n        dlc_container_used = instance_data[\"Image\"]\n        dlc_tag = instance_data[\"Image\"].split(\":\")[1]\n    except Exception:\n        dlc_container_used = None\n        dlc_tag = None\n\n    sagemaker_params = json.loads(os.getenv(\"SM_FRAMEWORK_PARAMS\", \"{}\"))\n    runs_distributed_training = True if \"sagemaker_distributed_dataparallel_enabled\" in sagemaker_params else False\n    account_id = os.getenv(\"TRAINING_JOB_ARN\").split(\":\")[4] if \"TRAINING_JOB_ARN\" in os.environ else None\n\n    sagemaker_object = {\n        \"sm_framework\": os.getenv(\"SM_FRAMEWORK_MODULE\", None),\n        \"sm_region\": os.getenv(\"AWS_REGION\", None),\n        \"sm_number_gpu\": os.getenv(\"SM_NUM_GPUS\", 0),\n        \"sm_number_cpu\": os.getenv(\"SM_NUM_CPUS\", 0),\n        \"sm_distributed_training\": runs_distributed_training,\n        \"sm_deep_learning_container\": dlc_container_used,\n        \"sm_deep_learning_container_tag\": dlc_tag,\n        \"sm_account_id\": account_id,\n    }\n    return sagemaker_object\n",
    "pattern_analysis": {
      "api_sequence": [
        "os.environ",
        "os.environ.__getitem__",
        "requests.get",
        "requests.get.json",
        "json.loads",
        "os.getenv",
        "os.getenv",
        "os.getenv",
        "os.getenv",
        "os.getenv"
      ],
      "api_sequence_with_args": [
        "os.environ",
        "os.environ[\"ECS_CONTAINER_METADATA_URI\"]",
        "requests.get(os.environ[\"ECS_CONTAINER_METADATA_URI\"])",
        "requests.get(os.environ[\"ECS_CONTAINER_METADATA_URI\"]).json()",
        "json.loads(os.getenv(\"SM_FRAMEWORK_PARAMS\", \"{}\"))",
        "os.getenv(\"TRAINING_JOB_ARN\")",
        "os.getenv(\"SM_FRAMEWORK_MODULE\", None)",
        "os.getenv(\"AWS_REGION\", None)",
        "os.getenv(\"SM_NUM_GPUS\", 0)",
        "os.getenv(\"SM_NUM_CPUS\", 0)"
      ],
      "mapped_sequence": [
        {
          "api_name": "os.environ",
          "id": "get_env_vars",
          "description": "Retrieves environment variables mapping",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "os.environ.__getitem__",
          "id": "get_env_var",
          "description": "Retrieves value of environment variable",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "requests.get",
          "id": "send_http_get",
          "description": "Sends HTTP GET request with parameters and timeout",
          "first_id": "basic_network_operations",
          "second_id": "http_requests",
          "third_id": "request_sending"
        },
        {
          "api_name": "requests.get.json",
          "id": "deserialize_json_response",
          "description": "Deserializes JSON response body to Python object",
          "first_id": "basic_network_operations",
          "second_id": "http_requests",
          "third_id": "response_processing"
        },
        {
          "api_name": "json.loads",
          "id": "deserialize_from_json",
          "description": "Deserializes JSON string to Python object",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "specific_format_encoding"
        },
        {
          "api_name": "os.getenv",
          "id": "get_env_var",
          "description": "Retrieves value of environment variable",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "os.getenv",
          "id": "get_env_var",
          "description": "Retrieves value of environment variable",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "os.getenv",
          "id": "get_env_var",
          "description": "Retrieves value of environment variable",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "os.getenv",
          "id": "get_env_var",
          "description": "Retrieves value of environment variable",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "os.getenv",
          "id": "get_env_var",
          "description": "Retrieves value of environment variable",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        }
      ],
      "contextual_code": "import os\nimport json\nimport requests\n\ndef define_sagemaker_information():\n    try:\n        instance_data = requests.get(os.environ[\"ECS_CONTAINER_METADATA_URI\"]).json()\n        dlc_container_used = instance_data[\"Image\"]\n        dlc_tag = instance_data[\"Image\"].split(\":\")[1]\n    except Exception:\n        dlc_container_used = None\n        dlc_tag = None\n\n    sagemaker_params = json.loads(os.getenv(\"SM_FRAMEWORK_PARAMS\", \"{}\"))\n    runs_distributed_training = True if \"sagemaker_distributed_dataparallel_enabled\" in sagemaker_params else False\n    account_id = os.getenv(\"TRAINING_JOB_ARN\").split(\":\")[4] if \"TRAINING_JOB_ARN\" in os.environ else None\n\n    sagemaker_object = {\n        \"sm_framework\": os.getenv(\"SM_FRAMEWORK_MODULE\", None),\n        \"sm_region\": os.getenv(\"AWS_REGION\", None),\n        \"sm_number_gpu\": os.getenv(\"SM_NUM_GPUS\", 0),\n        \"sm_number_cpu\": os.getenv(\"SM_NUM_CPUS\", 0),\n        \"sm_distributed_training\": runs_distributed_training,\n        \"sm_deep_learning_container\": dlc_container_used,\n        \"sm_deep_learning_container_tag\": dlc_tag,\n        \"sm_account_id\": account_id,\n    }\n    return sagemaker_object"
    }
  },
  {
    "metadata": {
      "package_name": "flaxmodels-0.1.3",
      "total_matches": 1
    }
  }
]