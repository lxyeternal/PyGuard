[
  {
    "pyfile": "setup.py",
    "code_snippet": "import os, re, shutil, subprocess, sys, glob\n\ndef check_call(args):\n    try:\n        subprocess.check_call(args)\n    except subprocess.CalledProcessError:\n        executable = args[0]\n        command = [a for a in args if not a.startswith('-')][-1]\n        raise RuntimeError(command + ' failed for ' + executable)\n\nclass PLinkPipInstall(Command):\n    user_options = []\n    def initialize_options(self):\n        pass\n    def finalize_options(self):\n        pass\n    def run(self):\n        python = sys.executable\n        check_call([python, 'setup.py', 'bdist_wheel'])\n        egginfo = 'plink.egg-info'\n        if os.path.exists(egginfo):\n            shutil.rmtree(egginfo)\n        wheels = glob.glob('dist' + os.sep + '*.whl')\n        new_wheel = max(wheels, key=os.path.getmtime)\n        check_call([python, '-m', 'pip', 'uninstall', '-y', 'plink'])\n        check_call([python, '-m', 'pip', 'install',\n                    '--upgrade-strategy', 'only-if-needed',\n                    new_wheel])",
    "pattern_analysis": {
      "api_sequence": [
        "subprocess.check_call",
        "os.path.exists",
        "shutil.rmtree",
        "glob.glob",
        "os.path.getmtime",
        "max",
        "subprocess.check_call",
        "subprocess.check_call"
      ],
      "api_sequence_with_args": [
        "subprocess.check_call([python, 'setup.py', 'bdist_wheel'])",
        "os.path.exists(egginfo)",
        "shutil.rmtree(egginfo)",
        "glob.glob('dist' + os.sep + '*.whl')",
        "os.path.getmtime(wheel)",
        "max(wheels, key=os.path.getmtime)",
        "subprocess.check_call([python, '-m', 'pip', 'uninstall', '-y', 'plink'])",
        "subprocess.check_call([python, '-m', 'pip', 'install', '--upgrade-strategy', 'only-if-needed', new_wheel])"
      ],
      "mapped_sequence": [
        {
          "api_name": "subprocess.check_call",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        },
        {
          "api_name": "os.path.exists",
          "id": "check_path_exists",
          "description": "Checks if specified path exists in filesystem",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_checking"
        },
        {
          "api_name": "shutil.rmtree",
          "id": "delete_directory",
          "description": "Recursively deletes directory and its contents",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "directory_operations"
        },
        {
          "api_name": "glob.glob",
          "id": "list_files_directories",
          "description": "Lists files and directories in specified path",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "directory_operations"
        },
        {
          "api_name": "os.path.getmtime",
          "id": "path_object_operations",
          "description": "Path object and status operations (creating Path objects, retrieving file status)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "max",
          "id": "basic_read_operations",
          "description": "ic file opening operations for reading (normal reading, binary reading)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "subprocess.check_call",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        },
        {
          "api_name": "subprocess.check_call",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        }
      ],
      "contextual_code": "def check_call(args):\n    try:\n        subprocess.check_call(args)\n    except subprocess.CalledProcessError:\n        executable = args[0]\n        command = [a for a in args if not a.startswith('-')][-1]\n        raise RuntimeError(command + ' failed for ' + executable)\n\nclass PLinkPipInstall(Command):\n    def run(self):\n        python = sys.executable\n        check_call([python, 'setup.py', 'bdist_wheel'])\n        egginfo = 'plink.egg-info'\n        if os.path.exists(egginfo):\n            shutil.rmtree(egginfo)\n        wheels = glob.glob('dist' + os.sep + '*.whl')\n        new_wheel = max(wheels, key=os.path.getmtime)\n        check_call([python, '-m', 'pip', 'uninstall', '-y', 'plink'])\n        check_call([python, '-m', 'pip', 'install',\n                    '--upgrade-strategy', 'only-if-needed',\n                    new_wheel])"
    }
  },
  {
    "metadata": {
      "package_name": "plink-2.4.6",
      "total_matches": 3
    }
  }
]