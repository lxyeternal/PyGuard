[
  {
    "pyfile": "setup.py",
    "code_snippet": "import os\nimport sys\nimport codecs\nimport shlex\nimport subprocess\nimport time\n\nfrom pathlib import Path\n\nfrom setuptools import setup\nfrom setuptools import find_packages\nfrom setuptools.command.develop import develop\nfrom setuptools.command.install import install\nfrom setuptools.command.install_scripts import install_scripts\n\nfrom package_info import __version__\nfrom package_info import __package_name__\nfrom package_info import __contact_names__\nfrom package_info import __contact_emails__\nfrom package_info import __repository_url__\nfrom package_info import __download_url__\nfrom package_info import __description__\nfrom package_info import __license__\nfrom package_info import __keywords__\n\nfrom edit_pip_configuration import create_pip_config_file\nfrom edit_pip_configuration import maybe_edit_pip_config_file\n\nfrom nvidia_pyindex.utils import get_configuration_files\nfrom nvidia_pyindex.utils import get_configuration_files_by_priority\n\nSUPPORTED_PLATFORMS = [\n    \"linux\",\n    \"win32\",  # Windows\n    \"darwin\",  # Mac OS X\n]\n\n\ndef _install_nvidia_pypi_index():\n    try:\n        subprocess.call(\n            shlex.split(\"nvidia_pyindex uninstall\"),\n            shell=True,\n            stdout=subprocess.DEVNULL,\n            stderr=subprocess.DEVNULL\n        )\n    except:\n        pass\n\n    debug_mode = bool(os.environ.get(\"DEBUG_MODE\", False))\n\n    config_filedict = get_configuration_files()\n    config_filelist = get_configuration_files_by_priority()\n\n    print(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\")\n    print(\"Setting User Pip Configuration ...\")\n    print(\"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\")\n    print(\"\\n######################\\n\")\n\n    pre_existing_configfile = None\n    for config_file in config_filelist:\n        try:\n            if os.path.isfile(config_file):\n                print(\"Editing pip conf file: %s ...\" % config_file)\n                maybe_edit_pip_config_file(\n                    config_file,\n                    config_filedict=config_filedict,\n                    debug_mode=debug_mode\n                )\n                pre_existing_configfile = config_file\n                break\n        except (FileNotFoundError, PermissionError) as e:\n            print(\"Error: {}: {}\".format(e.__class__.__name__, str(e)))\n            pass\n\n    if pre_existing_configfile is None:\n        for config_file in config_filelist:\n            print(\"\\nProcessing pip conf file: %s ...\" % config_file)\n            try:\n                if not os.path.exists(config_file):\n                    print(\"Creating pip conf file: %s ...\" % config_file)\n                    create_pip_config_file(\n                        filepath=config_file,\n                        config_filedict=config_filedict\n                    )\n            except (FileNotFoundError, PermissionError) as e:\n                print(\"Error: {}: {}\".format(e.__class__.__name__, str(e)))\n                pass\n    else:\n        with open(pre_existing_configfile, 'r') as _file:\n            original_content = _file.readlines()\n\n        for config_file in config_filelist:\n            print(\"\\nProcessing pip conf file: %s ...\" % config_file)\n            try:\n\n                try:\n                    with open(config_file, 'r') as _file:\n                        backup_content = _file.readlines()\n                except:\n                    pass\n\n                try:\n                    os.remove(config_file)\n                    os.remove(config_file.old)\n                    with open(\"%s.old\" % config_file, 'w') as _file:\n                        _file.writelines(backup_content)\n                except:\n                    pass\n\n                with open(config_file, 'w') as _file:\n                    _file.writelines(original_content)\n\n            except (FileNotFoundError, PermissionError) as e:\n                print(\"Error: {}: {}\".format(e.__class__.__name__, str(e)))\n                pass\n\n    print(\"\\n######################\\n\")\n\n    time.sleep(2)  # allow readable logs in verbose logs. Please do not delete.\n\n\nif __name__ == \"__main__\":\n\n    # ┍━━━━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━━━━━━┑\n    # │ System              │ `sys.platform` Value │\n    # ┝━━━━━━━━━━━━━━━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━┥\n    # │ Linux               │ linux                │\n    # │ Windows             │ win32                │\n    # │ Windows/Cygwin      │ cygwin               │\n    # │ Windows/MSYS2       │ msys                 │\n    # │ Mac OS X            │ darwin               │\n    # │ OS/2                │ os2                  │\n    # │ OS/2 EMX            │ os2emx               │\n    # │ RiscOS              │ riscos               │\n    # │ AtheOS              │ atheos               │\n    # │ FreeBSD 7           │ freebsd7             │\n    # │ FreeBSD 8           │ freebsd8             │\n    # │ FreeBSD N           │ freebsdN             │\n    # │ OpenBSD 6           │ openbsd6             │\n    # ┕━━━━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━━━━━━┙\n    if sys.platform not in SUPPORTED_PLATFORMS:\n        raise OSError(\"Your operating system is not supported by \"\n                      \"`nvidia-pyindex`: {}.\\nOnly these systems are \"\n                      \"supported: `{}`.\".format(\n                        sys.platform, SUPPORTED_PLATFORMS\n                      )\n        )\n\n    # Get the long description\n    BASE_DIR = os.path.abspath(os.path.dirname(__file__))\n    with codecs.open(os.path.join(BASE_DIR, 'README.rst'), encoding='utf-8') as f:\n        long_description = f.read()\n\n    setup(\n        name=__package_name__,\n        version=__version__,\n        description=__description__,\n        long_description=long_description,\n        url=__repository_url__,\n        download_url=__download_url__,\n        author=__contact_names__,\n        author_email=__contact_emails__,\n        maintainer=__contact_names__,\n        maintainer_email=__contact_emails__,\n        license=__license__,\n        classifiers=[\n            'Development Status :: 3 - Alpha',\n            'Intended Audience :: Developers',\n            'Intended Audience :: Science/Research',\n            'Intended Audience :: Information Technology',\n            'Topic :: Scientific/Engineering',\n            'Topic :: Scientific/Engineering :: Image Recognition',\n            'Topic :: Scientific/Engineering :: Artificial Intelligence',\n            'Topic :: Software Development :: Libraries',\n            'Topic :: Utilities',\n            'License :: OSI Approved :: Apache Software License',\n            'Programming Language :: Python :: 3',\n            'Programming Language :: Python :: 3.6',\n            'Programming Language :: Python :: 3.7',\n            'Programming Language :: Python :: 3.8',\n            'Environment :: Console',\n            'Natural Language :: English',\n            'Operating System :: OS Independent',\n        ],\n        keywords=__keywords__,\n        setup_requires=[\n            'appdirs>=1.4,<1.5',\n        ],\n        cmdclass={\n            'install': InstallCommand,\n            'develop': DevelopCommand\n        },\n        entry_points={\n            'console_scripts': [\n                'nvidia_pyindex=nvidia_pyindex.cmdline:main',\n            ],\n        },\n        platforms=[\"Linux\"],\n        include_package_data=True,\n        packages=find_packages(),\n    )\n",
    "pattern_analysis": {
      "api_sequence": [
        "subprocess.call",
        "shlex.split",
        "os.environ.get",
        "get_configuration_files",
        "get_configuration_files_by_priority",
        "os.path.isfile",
        "maybe_edit_pip_config_file",
        "os.path.exists",
        "create_pip_config_file",
        "open",
        "open",
        "os.remove",
        "os.remove",
        "open",
        "open",
        "open",
        "time.sleep",
        "os.path.abspath",
        "os.path.dirname",
        "codecs.open",
        "os.path.join",
        "find_packages",
        "setup"
      ],
      "api_sequence_with_args": [
        "subprocess.call(shlex.split(\"nvidia_pyindex uninstall\"), shell=True, stdout=subprocess.DEVNULL, stderr=subprocess.DEVNULL)",
        "shlex.split(\"nvidia_pyindex uninstall\")",
        "os.environ.get(\"DEBUG_MODE\", False)",
        "get_configuration_files()",
        "get_configuration_files_by_priority()",
        "os.path.isfile(config_file)",
        "maybe_edit_pip_config_file(config_file, config_filedict=config_filedict, debug_mode=debug_mode)",
        "os.path.exists(config_file)",
        "create_pip_config_file(filepath=config_file, config_filedict=config_filedict)",
        "open(pre_existing_configfile, 'r')",
        "open(config_file, 'r')",
        "os.remove(config_file)",
        "os.remove(config_file.old)",
        "open(\"%s.old\" % config_file, 'w')",
        "open(config_file, 'w')",
        "open(config_file, 'r')",
        "time.sleep(2)",
        "os.path.abspath(os.path.dirname(__file__))",
        "os.path.dirname(__file__)",
        "codecs.open(os.path.join(BASE_DIR, 'README.rst'), encoding='utf-8')",
        "os.path.join(BASE_DIR, 'README.rst')",
        "find_packages()",
        "setup(...)"
      ],
      "mapped_sequence": [
        {
          "api_name": "subprocess.call",
          "id": "spawn_process_no_shell",
          "description": "Spawns new process to execute command without shell access",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_creation"
        },
        {
          "api_name": "shlex.split",
          "id": "apply_lambda_elements",
          "description": "Applies lambda to elements of two lists",
          "first_id": "data_transformation_processing",
          "second_id": "function_application",
          "third_id": "lambda_application"
        },
        {
          "api_name": "os.environ.get",
          "id": "get_env_var",
          "description": "Retrieves value of environment variable",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "get_configuration_files",
          "id": "init_config_class",
          "description": "Initializes Config class with provided arguments",
          "first_id": "code_execution",
          "second_id": "object_initialization",
          "third_id": "class_initialization"
        },
        {
          "api_name": "get_configuration_files_by_priority",
          "id": "init_config_class",
          "description": "Initializes Config class with provided arguments",
          "first_id": "code_execution",
          "second_id": "object_initialization",
          "third_id": "class_initialization"
        },
        {
          "api_name": "os.path.isfile",
          "id": "check_file_is_file",
          "description": "Checks if specified path exists and is a file",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_checking"
        },
        {
          "api_name": "maybe_edit_pip_config_file",
          "id": "configure_package_install",
          "description": "Configures and initiates Python package installation",
          "first_id": "code_execution",
          "second_id": "module_management",
          "third_id": "package_configuration"
        },
        {
          "api_name": "os.path.exists",
          "id": "check_path_exists",
          "description": "Checks if specified path exists in filesystem",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_checking"
        },
        {
          "api_name": "create_pip_config_file",
          "id": "configure_package_install",
          "description": "Configures and initiates Python package installation",
          "first_id": "code_execution",
          "second_id": "module_management",
          "third_id": "package_configuration"
        },
        {
          "api_name": "open",
          "id": "basic_read_operations",
          "description": "ic file opening operations for reading (normal reading, binary reading)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "open",
          "id": "basic_read_operations",
          "description": "ic file opening operations for reading (normal reading, binary reading)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "os.remove",
          "id": "delete_file",
          "description": "Deletes specified file from filesystem",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_transfer"
        },
        {
          "api_name": "os.remove",
          "id": "delete_file",
          "description": "Deletes specified file from filesystem",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_transfer"
        },
        {
          "api_name": "open",
          "id": "basic_write_operations",
          "description": "Writing data to files (strings or bytes)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "open",
          "id": "basic_write_operations",
          "description": "Writing data to files (strings or bytes)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "open",
          "id": "basic_read_operations",
          "description": "ic file opening operations for reading (normal reading, binary reading)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "time.sleep",
          "id": "suspend_execution",
          "description": "Suspends execution for specified seconds",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "time_operations"
        },
        {
          "api_name": "os.path.abspath",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.dirname",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "codecs.open",
          "id": "basic_read_operations",
          "description": "ic file opening operations for reading (normal reading, binary reading)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "find_packages",
          "id": "find_packages",
          "description": "Finds all packages in current directory",
          "first_id": "code_execution",
          "second_id": "module_management",
          "third_id": "package_configuration"
        },
        {
          "api_name": "setup",
          "id": "exec_setuptools_install",
          "description": "Executes setuptools installation procedure",
          "first_id": "code_execution",
          "second_id": "module_management",
          "third_id": "package_configuration"
        }
      ],
      "contextual_code": "def _install_nvidia_pypi_index():\n    try:\n        subprocess.call(\n            shlex.split(\"nvidia_pyindex uninstall\"),\n            shell=True,\n            stdout=subprocess.DEVNULL,\n            stderr=subprocess.DEVNULL\n        )\n    except:\n        pass\n\n    debug_mode = bool(os.environ.get(\"DEBUG_MODE\", False))\n\n    config_filedict = get_configuration_files()\n    config_filelist = get_configuration_files_by_priority()\n\n    pre_existing_configfile = None\n    for config_file in config_filelist:\n        try:\n            if os.path.isfile(config_file):\n                maybe_edit_pip_config_file(\n                    config_file,\n                    config_filedict=config_filedict,\n                    debug_mode=debug_mode\n                )\n                pre_existing_configfile = config_file\n                break\n        except (FileNotFoundError, PermissionError) as e:\n            pass\n\n    if pre_existing_configfile is None:\n        for config_file in config_filelist:\n            try:\n                if not os.path.exists(config_file):\n                    create_pip_config_file(\n                        filepath=config_file,\n                        config_filedict=config_filedict\n                    )\n            except (FileNotFoundError, PermissionError) as e:\n                pass\n    else:\n        with open(pre_existing_configfile, 'r') as _file:\n            original_content = _file.readlines()\n\n        for config_file in config_filelist:\n            try:\n                try:\n                    with open(config_file, 'r') as _file:\n                        backup_content = _file.readlines()\n                except:\n                    pass\n                try:\n                    os.remove(config_file)\n                    os.remove(config_file.old)\n                    with open(\"%s.old\" % config_file, 'w') as _file:\n                        _file.writelines(backup_content)\n                except:\n                    pass\n                with open(config_file, 'w') as _file:\n                    _file.writelines(original_content)\n            except (FileNotFoundError, PermissionError) as e:\n                pass\n    time.sleep(2)\n\nif __name__ == \"__main__\":\n    if sys.platform not in SUPPORTED_PLATFORMS:\n        raise OSError(...)\n    BASE_DIR = os.path.abspath(os.path.dirname(__file__))\n    with codecs.open(os.path.join(BASE_DIR, 'README.rst'), encoding='utf-8') as f:\n        long_description = f.read()\n    setup(\n        ...,\n        packages=find_packages(),\n    )"
    }
  },
  {
    "metadata": {
      "package_name": "nvidia-pyindex-1.0.9",
      "total_matches": 2
    }
  }
]