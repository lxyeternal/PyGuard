[
  {
    "pyfile": "core.py",
    "code_snippet": "import ast\nimport builtins\nfrom contextlib import suppress\nfrom pure_eval.utils import has_ast_name\n\ndef is_expression_interesting(node: ast.expr, value: Any) -> bool:\n    \"\"\"\n    Determines if an expression is potentially interesting, at least in my opinion.\n    Returns False for the following expressions whose value is generally obvious:\n        - Literals (e.g. 123, 'abc', [1, 2, 3], {'a': (), 'b': ([1, 2], [3])})\n        - Variables or attributes whose name is equal to the value's __name__.\n            For example, a function `def foo(): ...` is not interesting when referred to\n            as `foo` as it usually would, but `bar` can be interesting if `bar is foo`.\n            Similarly the method `self.foo` is not interesting.\n        - Builtins (e.g. `len`) referred to by their usual name.\n\n    This is a low level API, typically you will use `interesting_expressions_grouped`.\n\n    :param node: an AST expression\n    :param value: the value of the node\n    :return: a boolean: True if the expression is interesting, False otherwise\n    \"\"\"\n\n    with suppress(ValueError):\n        ast.literal_eval(node)\n        return False\n\n    # TODO exclude inner modules, e.g. numpy.random.__name__ == 'numpy.random' != 'random'\n    # TODO exclude common module abbreviations, e.g. numpy as np, pandas as pd\n    if has_ast_name(value, node):\n        return False\n\n    if (\n            isinstance(node, ast.Name)\n            and getattr(builtins, node.id, object()) is value\n    ):\n        return False\n\n    return True",
    "pattern_analysis": {
      "api_sequence": [],
      "api_sequence_with_args": [],
      "mapped_sequence": [],
      "contextual_code": "import ast\nimport builtins\nfrom contextlib import suppress\nfrom pure_eval.utils import has_ast_name\n\ndef is_expression_interesting(node: ast.expr, value: Any) -> bool:\n    with suppress(ValueError):\n        ast.literal_eval(node)\n        return False\n    if has_ast_name(value, node):\n        return False\n    if (\n            isinstance(node, ast.Name)\n            and getattr(builtins, node.id, object()) is value\n    ):\n        return False\n    return True"
    }
  },
  {
    "metadata": {
      "package_name": "pure_eval-0.2.3",
      "total_matches": 1
    }
  }
]