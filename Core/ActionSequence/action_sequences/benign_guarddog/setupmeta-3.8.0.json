[
  {
    "pyfile": "setup.py",
    "code_snippet": "import os\nimport subprocess  # nosec\nimport sys\n\nHERE = os.path.dirname(os.path.abspath(__file__))\nEGG = os.path.join(HERE, \"setupmeta.egg-info\")\n\ndef decode(text):\n    if isinstance(text, bytes):\n        return text.decode(\"utf-8\")\n\n    return text\n\ndef run_bootstrap(message):\n    sys.stderr.write(\"--- Bootstrapping %s\\n\" % message)\n    p = subprocess.Popen([sys.executable, \"setup.py\", \"egg_info\"], stdout=subprocess.PIPE, stderr=subprocess.PIPE)  # nosec\n    output, error = p.communicate()\n    if p.returncode:\n        print(decode(output))\n        sys.stderr.write(\"%s\\n\" % decode(error))\n        sys.exit(p.returncode)\n\n    if not os.path.isdir(EGG):\n        sys.exit(\"Could not bootstrap egg-info\")\n",
    "pattern_analysis": {
      "api_sequence": [
        "os.path.abspath",
        "os.path.dirname",
        "os.path.join",
        "os.path.isdir",
        "subprocess.Popen",
        "subprocess.Popen.communicate",
        "subprocess.Popen.returncode",
        "sys.stderr.write",
        "decode",
        "print",
        "decode",
        "sys.stderr.write",
        "sys.exit",
        "sys.exit"
      ],
      "api_sequence_with_args": [
        "os.path.abspath(__file__)",
        "os.path.dirname(os.path.abspath(__file__))",
        "os.path.join(HERE, \"setupmeta.egg-info\")",
        "os.path.isdir(EGG)",
        "subprocess.Popen([sys.executable, \"setup.py\", \"egg_info\"], stdout=subprocess.PIPE, stderr=subprocess.PIPE)",
        "subprocess.Popen.communicate()",
        "subprocess.Popen.returncode",
        "sys.stderr.write(\"--- Bootstrapping %s\\n\" % message)",
        "decode(output)",
        "print(decode(output))",
        "decode(error)",
        "sys.stderr.write(\"%s\\n\" % decode(error))",
        "sys.exit(p.returncode)",
        "sys.exit(\"Could not bootstrap egg-info\")"
      ],
      "mapped_sequence": [
        {
          "api_name": "os.path.abspath",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.dirname",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.isdir",
          "id": "check_directory_exists",
          "description": "Checks if specified path exists and is a directory",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_checking"
        },
        {
          "api_name": "subprocess.Popen",
          "id": "spawn_process_no_shell",
          "description": "Spawns new process to execute command without shell access",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_creation"
        },
        {
          "api_name": "subprocess.Popen.communicate",
          "id": "read_process_stdout",
          "description": "Reads all bytes from process standard output",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_information"
        },
        {
          "api_name": "subprocess.Popen.returncode",
          "id": "wait_process_completion",
          "description": "Waits for process to complete execution",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_control"
        },
        {
          "api_name": "sys.stderr.write",
          "id": "basic_file_writing",
          "description": "Writing data to files (strings or bytes)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_writing"
        },
        {
          "api_name": "decode",
          "id": "decode_bytes_codec",
          "description": "Decodes bytes using specified codec",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "byte_encoding"
        },
        {
          "api_name": "print",
          "id": "basic_file_writing",
          "description": "Writing data to files (strings or bytes)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_writing"
        },
        {
          "api_name": "decode",
          "id": "decode_bytes_codec",
          "description": "Decodes bytes using specified codec",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "byte_encoding"
        },
        {
          "api_name": "sys.stderr.write",
          "id": "basic_file_writing",
          "description": "Writing data to files (strings or bytes)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_writing"
        },
        {
          "api_name": "sys.exit",
          "id": "exit_program",
          "description": "Exits program with specified status code",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_control"
        },
        {
          "api_name": "sys.exit",
          "id": "exit_program",
          "description": "Exits program with specified status code",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_control"
        }
      ],
      "contextual_code": "import os\nimport subprocess  # nosec\nimport sys\n\nHERE = os.path.dirname(os.path.abspath(__file__))\nEGG = os.path.join(HERE, \"setupmeta.egg-info\")\n\ndef decode(text):\n    if isinstance(text, bytes):\n        return text.decode(\"utf-8\")\n    return text\n\ndef run_bootstrap(message):\n    sys.stderr.write(\"--- Bootstrapping %s\\n\" % message)\n    p = subprocess.Popen([sys.executable, \"setup.py\", \"egg_info\"], stdout=subprocess.PIPE, stderr=subprocess.PIPE)  # nosec\n    output, error = p.communicate()\n    if p.returncode:\n        print(decode(output))\n        sys.stderr.write(\"%s\\n\" % decode(error))\n        sys.exit(p.returncode)\n\n    if not os.path.isdir(EGG):\n        sys.exit(\"Could not bootstrap egg-info\")"
    }
  },
  {
    "metadata": {
      "package_name": "setupmeta-3.8.0",
      "total_matches": 1
    }
  }
]