[
  {
    "pyfile": "numpy_engine.py",
    "code_snippet": "import builtins\nimport numpy as np\nfrom typing import Any, Dict, List, Union\nfrom pandera import dtypes\n\ndef _build_number_equivalents(\n    builtin_name: str, pandera_name: str, sizes: List[int]\n) -> Dict[int, List[Union[type, str, np.dtype, dtypes.DataType]]]:\n    \"\"\"Return a dict of equivalent builtin, numpy, pandera dtypes\n    indexed by size in bit_width.\"\"\"\n    builtin_type = getattr(builtins, builtin_name, None)\n    default_np_dtype = np.dtype(builtin_name)\n    default_size = int(default_np_dtype.name.replace(builtin_name, \"\"))\n\n    default_equivalents = [\n        # e.g.: np.int64\n        np.dtype(builtin_name).type,\n        # e.g: pandera.dtypes.Int\n        getattr(dtypes, pandera_name),\n    ]\n    if builtin_type:\n        default_equivalents.append(builtin_type)\n\n    return {\n        bit_width: list(\n            {\n                # e.g.: numpy.int64\n                getattr(np, f\"{builtin_name}{bit_width}\"),\n                # e.g.: pandera.dtypes.Int64\n                getattr(dtypes, f\"{pandera_name}{bit_width}\"),\n                getattr(dtypes, f\"{pandera_name}{bit_width}\")(),\n                # e.g.: pandera.dtypes.Int(64)\n                getattr(dtypes, pandera_name)(),\n            }\n            | set(default_equivalents if bit_width == default_size else [])\n        )\n        for bit_width in sizes\n    }\n",
    "pattern_analysis": {
      "api_sequence": [
        "builtins.getattr",
        "numpy.dtype",
        "numpy.dtype.name",
        "builtins.getattr",
        "builtins.getattr",
        "builtins.getattr",
        "builtins.getattr"
      ],
      "api_sequence_with_args": [
        "builtins.getattr(builtins, builtin_name, None)",
        "numpy.dtype(builtin_name)",
        "numpy.dtype(builtin_name).name",
        "builtins.getattr(numpy, f\"{builtin_name}{bit_width}\")",
        "builtins.getattr(pandera.dtypes, f\"{pandera_name}{bit_width}\")",
        "builtins.getattr(pandera.dtypes, f\"{pandera_name}{bit_width}\")()",
        "builtins.getattr(pandera.dtypes, pandera_name)()"
      ],
      "mapped_sequence": [
        {
          "api_name": "builtins.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "numpy.dtype",
          "id": "path_object_operations",
          "description": "Path object and status operations (creating Path objects, retrieving file status)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "numpy.dtype.name",
          "id": "path_object_operations",
          "description": "Path object and status operations (creating Path objects, retrieving file status)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "builtins.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "builtins.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "builtins.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "builtins.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        }
      ],
      "contextual_code": "import builtins\nimport numpy as np\nfrom pandera import dtypes\n\ndef _build_number_equivalents(\n    builtin_name: str, pandera_name: str, sizes: List[int]\n) -> Dict[int, List[Union[type, str, np.dtype, dtypes.DataType]]]:\n    builtin_type = getattr(builtins, builtin_name, None)\n    default_np_dtype = np.dtype(builtin_name)\n    default_size = int(default_np_dtype.name.replace(builtin_name, \"\"))\n\n    default_equivalents = [\n        np.dtype(builtin_name).type,\n        getattr(dtypes, pandera_name),\n    ]\n    if builtin_type:\n        default_equivalents.append(builtin_type)\n\n    return {\n        bit_width: list(\n            {\n                getattr(np, f\"{builtin_name}{bit_width}\"),\n                getattr(dtypes, f\"{pandera_name}{bit_width}\"),\n                getattr(dtypes, f\"{pandera_name}{bit_width}\")(),\n                getattr(dtypes, pandera_name)(),\n            }\n            | set(default_equivalents if bit_width == default_size else [])\n        )\n        for bit_width in sizes\n    }"
    }
  },
  {
    "pyfile": "pandas_engine.py",
    "code_snippet": "import builtins\nimport numpy as np\nimport pandas as pd\nfrom pandera import dtypes\nfrom pandera.engines import numpy_engine\n\n\ndef _register_numpy_numbers(\n    builtin_name: str, pandera_name: str, sizes: List[int]\n) -> None:\n    \"\"\"Register pandera.engines.numpy_engine DataTypes\n    with the pandas engine.\"\"\"\n\n    builtin_type = getattr(builtins, builtin_name, None)  # uint doesn't exist\n\n    # default to int64 regardless of OS\n    default_pd_dtype = {\n        \"int\": np.dtype(\"int64\"),\n        \"uint\": np.dtype(\"uint64\"),\n    }.get(builtin_name, pd.Series([1], dtype=builtin_name).dtype)\n\n    for bit_width in sizes:\n        # e.g.: numpy.int64\n        np_dtype = getattr(np, f\"{builtin_name}{bit_width}\")\n\n        equivalents = {\n            np_dtype,\n            # e.g.: pandera.dtypes.Int64\n            getattr(dtypes, f\"{pandera_name}{bit_width}\"),\n            getattr(dtypes, f\"{pandera_name}{bit_width}\")(),\n        }\n\n        if np_dtype == default_pd_dtype:\n            equivalents |= {\n                default_pd_dtype,\n                builtin_name,\n                getattr(dtypes, pandera_name),\n                getattr(dtypes, pandera_name)(),\n            }\n            if builtin_type:\n                equivalents.add(builtin_type)\n\n            # results from pd.api.types.infer_dtype\n            if builtin_type is float:\n                equivalents.add(\"floating\")\n                equivalents.add(\"mixed-integer-float\")\n            elif builtin_type is int:\n                equivalents.add(\"integer\")\n\n        numpy_data_type = getattr(numpy_engine, f\"{pandera_name}{bit_width}\")\n        Engine.register_dtype(numpy_data_type, equivalents=list(equivalents))",
    "pattern_analysis": {
      "api_sequence": [
        "builtins.getattr",
        "numpy.dtype",
        "pandas.Series",
        "pandas.Series.dtype",
        "numpy.getattr",
        "pandera.dtypes.getattr",
        "pandera.dtypes.getattr",
        "pandera.dtypes.getattr",
        "pandera.dtypes.getattr",
        "pandera.dtypes.getattr",
        "numpy_engine.getattr",
        "Engine.register_dtype"
      ],
      "api_sequence_with_args": [
        "builtins.getattr(builtins, builtin_name, None)",
        "numpy.dtype(\"int64\") or numpy.dtype(\"uint64\")",
        "pandas.Series([1], dtype=builtin_name)",
        "pandas.Series([1], dtype=builtin_name).dtype",
        "numpy.getattr(np, f\"{builtin_name}{bit_width}\")",
        "pandera.dtypes.getattr(dtypes, f\"{pandera_name}{bit_width}\")",
        "pandera.dtypes.getattr(dtypes, f\"{pandera_name}{bit_width}\")()",
        "pandera.dtypes.getattr(dtypes, pandera_name)",
        "pandera.dtypes.getattr(dtypes, pandera_name)()",
        "pandera.dtypes.getattr(dtypes, f\"{pandera_name}{bit_width}\")",
        "numpy_engine.getattr(numpy_engine, f\"{pandera_name}{bit_width}\")",
        "Engine.register_dtype(numpy_data_type, equivalents=list(equivalents))"
      ],
      "mapped_sequence": [
        {
          "api_name": "builtins.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "numpy.dtype",
          "id": "path_object_operations",
          "description": "Path object and status operations (creating Path objects, retrieving file status)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "pandas.Series",
          "id": "path_object_operations",
          "description": "Path object and status operations (creating Path objects, retrieving file status)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "pandas.Series.dtype",
          "id": "path_object_operations",
          "description": "Path object and status operations (creating Path objects, retrieving file status)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "numpy.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "pandera.dtypes.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "pandera.dtypes.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "pandera.dtypes.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "pandera.dtypes.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "pandera.dtypes.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "numpy_engine.getattr",
          "id": "get_global_symbols",
          "description": "Retrieves global symbol table as dictionary",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "Engine.register_dtype",
          "id": "set_builtin_attr",
          "description": "Sets attribute on builtins object",
          "first_id": "persistence_stealth",
          "second_id": "stealth_techniques",
          "third_id": "warning_disabling"
        }
      ],
      "contextual_code": "def _register_numpy_numbers(\n    builtin_name: str, pandera_name: str, sizes: List[int]\n) -> None:\n    builtin_type = getattr(builtins, builtin_name, None)\n    default_pd_dtype = {\n        \"int\": np.dtype(\"int64\"),\n        \"uint\": np.dtype(\"uint64\"),\n    }.get(builtin_name, pd.Series([1], dtype=builtin_name).dtype)\n    for bit_width in sizes:\n        np_dtype = getattr(np, f\"{builtin_name}{bit_width}\")\n        equivalents = {\n            np_dtype,\n            getattr(dtypes, f\"{pandera_name}{bit_width}\"),\n            getattr(dtypes, f\"{pandera_name}{bit_width}\")(),\n        }\n        if np_dtype == default_pd_dtype:\n            equivalents |= {\n                default_pd_dtype,\n                builtin_name,\n                getattr(dtypes, pandera_name),\n                getattr(dtypes, pandera_name)(),\n            }\n            if builtin_type:\n                equivalents.add(builtin_type)\n            if builtin_type is float:\n                equivalents.add(\"floating\")\n                equivalents.add(\"mixed-integer-float\")\n            elif builtin_type is int:\n                equivalents.add(\"integer\")\n        numpy_data_type = getattr(numpy_engine, f\"{pandera_name}{bit_width}\")\n        Engine.register_dtype(numpy_data_type, equivalents=list(equivalents))"
    }
  },
  {
    "metadata": {
      "package_name": "pandera-0.23.1",
      "total_matches": 2
    }
  }
]