[
  {
    "pyfile": "setup.py",
    "code_snippet": "import os\nimport sys\nfrom glob import glob\nfrom pathlib import Path\n\nfrom setuptools.command.build_ext import build_ext\nfrom setuptools import setup\nfrom setuptools import find_packages\nfrom setuptools import Extension\n\nclass gdal_config_error(Exception):\n    pass\n\ndef fetch_config(option, gdal_config='gdal-config'):\n    command = gdal_config + \" --%s\" % option\n\n    import subprocess\n    command, args = command.split()[0], command.split()[1]\n    try:\n        p = subprocess.Popen([command, args], stdout=subprocess.PIPE)\n    except OSError:\n        e = sys.exc_info()[1]\n        raise gdal_config_error(e)\n    r = p.stdout.readline().decode('ascii').strip()\n    p.stdout.close()\n    p.wait()\n\n    return r\n",
    "pattern_analysis": {
      "api_sequence": [
        "subprocess.Popen",
        "subprocess.Popen.stdout.readline",
        "subprocess.Popen.stdout.close",
        "subprocess.Popen.wait"
      ],
      "api_sequence_with_args": [
        "subprocess.Popen([command, args], stdout=subprocess.PIPE)",
        "subprocess.Popen.stdout.readline()",
        "subprocess.Popen.stdout.close()",
        "subprocess.Popen.wait()"
      ],
      "mapped_sequence": [
        {
          "api_name": "subprocess.Popen",
          "id": "spawn_process_no_shell",
          "description": "Spawns new process to execute command without shell access",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_creation"
        },
        {
          "api_name": "subprocess.Popen.stdout.readline",
          "id": "read_process_stdout",
          "description": "Reads all bytes from process standard output",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_information"
        },
        {
          "api_name": "subprocess.Popen.stdout.close",
          "id": "close_file",
          "description": "Closes the opened file",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_closing"
        },
        {
          "api_name": "subprocess.Popen.wait",
          "id": "wait_process_completion",
          "description": "Waits for process to complete execution",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_control"
        }
      ],
      "contextual_code": "def fetch_config(option, gdal_config='gdal-config'):\n    command = gdal_config + \" --%s\" % option\n\n    import subprocess\n    command, args = command.split()[0], command.split()[1]\n    try:\n        p = subprocess.Popen([command, args], stdout=subprocess.PIPE)\n    except OSError:\n        e = sys.exc_info()[1]\n        raise gdal_config_error(e)\n    r = p.stdout.readline().decode('ascii').strip()\n    p.stdout.close()\n    p.wait()\n\n    return r"
    }
  },
  {
    "metadata": {
      "package_name": "gdal-3.10.3",
      "total_matches": 1
    }
  }
]