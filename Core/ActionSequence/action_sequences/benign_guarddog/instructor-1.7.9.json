[
  {
    "pyfile": "together.py",
    "code_snippet": "import os\nimport openai\nfrom pydantic import BaseModel\nimport instructor\n\nclient = openai.OpenAI(\n    base_url=\"https://api.together.xyz/v1\",\n    api_key=os.environ[\"TOGETHER_API_KEY\"],\n)\n\n# By default, the patch function will patch the ChatCompletion.create and ChatCompletion.acreate methods. to support response_model parameter\nclient = instructor.from_openai(client, mode=instructor.Mode.TOOLS)\n\n# Now, we can use the response_model parameter using only a base model\n# rather than having to use the OpenAISchema class\nclass UserExtract(BaseModel):\n    name: str\n    age: int\n\nuser: UserExtract = client.chat.completions.create(\n    model=\"mistralai/Mixtral-8x7B-Instruct-v0.1\",\n    response_model=UserExtract,\n    messages=[\n        {\"role\": \"user\", \"content\": \"Extract jason is 25 years old\"},\n    ],\n)  # type: ignore\n\nprint(user.model_dump_json(indent=2))\n{\n    \"name\": \"Jason\",\n    \"age\": 25,\n}\n",
    "pattern_analysis": {
      "api_sequence": [
        "os.environ",
        "openai.OpenAI",
        "instructor.from_openai",
        "client.chat.completions.create",
        "user.model_dump_json"
      ],
      "api_sequence_with_args": [
        "os.environ[\"TOGETHER_API_KEY\"]",
        "openai.OpenAI(base_url=\"https://api.together.xyz/v1\", api_key=os.environ[\"TOGETHER_API_KEY\"])",
        "instructor.from_openai(client, mode=instructor.Mode.TOOLS)",
        "client.chat.completions.create(model=\"mistralai/Mixtral-8x7B-Instruct-v0.1\", response_model=UserExtract, messages=[{\"role\": \"user\", \"content\": \"Extract jason is 25 years old\"}])",
        "user.model_dump_json(indent=2)"
      ],
      "mapped_sequence": [
        {
          "api_name": "os.environ",
          "id": "get_env_vars",
          "description": "Retrieves environment variables mapping",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "openai.OpenAI",
          "id": "create_http_connection",
          "description": "Creates HTTP connection to specified host",
          "first_id": "basic_network_operations",
          "second_id": "http_requests",
          "third_id": "request_creation"
        },
        {
          "api_name": "instructor.from_openai",
          "id": "import_dynamic",
          "description": "Dynamically imports specified module",
          "first_id": "code_execution",
          "second_id": "module_management",
          "third_id": "module_importing"
        },
        {
          "api_name": "client.chat.completions.create",
          "id": "send_http_post",
          "description": "Sends HTTP POST request with data and parameters",
          "first_id": "basic_network_operations",
          "second_id": "http_requests",
          "third_id": "request_sending"
        },
        {
          "api_name": "user.model_dump_json",
          "id": "serialize_to_json",
          "description": "Serializes Python object to JSON string",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "specific_format_encoding"
        }
      ],
      "contextual_code": "import os\nimport openai\nfrom pydantic import BaseModel\nimport instructor\n\nclient = openai.OpenAI(\n    base_url=\"https://api.together.xyz/v1\",\n    api_key=os.environ[\"TOGETHER_API_KEY\"],\n)\n\nclient = instructor.from_openai(client, mode=instructor.Mode.TOOLS)\n\nclass UserExtract(BaseModel):\n    name: str\n    age: int\n\nuser: UserExtract = client.chat.completions.create(\n    model=\"mistralai/Mixtral-8x7B-Instruct-v0.1\",\n    response_model=UserExtract,\n    messages=[\n        {\"role\": \"user\", \"content\": \"Extract jason is 25 years old\"},\n    ],\n)  # type: ignore\n\nprint(user.model_dump_json(indent=2))"
    }
  },
  {
    "metadata": {
      "package_name": "instructor-1.7.9",
      "total_matches": 1
    }
  }
]