[
  {
    "pyfile": "commentjson.py",
    "code_snippet": "def detect_encoding(b):\n    '''\n    Taken from `json` package in CPython 3.7.\n\n    Source can be found at https://bit.ly/2OHqCIK.\n    '''\n\n    bstartswith = b.startswith\n    if bstartswith((codecs.BOM_UTF32_BE, codecs.BOM_UTF32_LE)):\n        return 'utf-32'\n    if bstartswith((codecs.BOM_UTF16_BE, codecs.BOM_UTF16_LE)):\n        return 'utf-16'\n    if bstartswith(codecs.BOM_UTF8):\n        return 'utf-8-sig'\n\n    if len(b) >= 4:\n        if not b[0]:\n            # 00 00 -- -- - utf-32-be\n            # 00 XX -- -- - utf-16-be\n            return 'utf-16-be' if b[1] else 'utf-32-be'\n        if not b[1]:\n            # XX 00 00 00 - utf-32-le\n            # XX 00 00 XX - utf-16-le\n            # XX 00 XX -- - utf-16-le\n            return 'utf-16-le' if b[2] or b[3] else 'utf-32-le'\n    elif len(b) == 2:\n        if not b[0]:\n            # 00 XX - utf-16-be\n            return 'utf-16-be'\n        if not b[1]:\n            # XX 00 - utf-16-le\n            return 'utf-16-le'\n    # default\n    return 'utf-8'\n\nimport codecs\n\n# codecs is used for BOM constants in detect_encoding\n",
    "pattern_analysis": {
      "api_sequence": [
        "codecs.BOM_UTF32_BE",
        "codecs.BOM_UTF32_LE",
        "codecs.BOM_UTF16_BE",
        "codecs.BOM_UTF16_LE",
        "codecs.BOM_UTF8"
      ],
      "api_sequence_with_args": [
        "codecs.BOM_UTF32_BE",
        "codecs.BOM_UTF32_LE",
        "codecs.BOM_UTF16_BE",
        "codecs.BOM_UTF16_LE",
        "codecs.BOM_UTF8"
      ],
      "mapped_sequence": [
        {
          "api_name": "codecs.BOM_UTF32_BE",
          "id": "create_bytes_encoded",
          "description": "Creates bytes object from encoded string",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "byte_encoding"
        },
        {
          "api_name": "codecs.BOM_UTF32_LE",
          "id": "create_bytes_encoded",
          "description": "Creates bytes object from encoded string",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "byte_encoding"
        },
        {
          "api_name": "codecs.BOM_UTF16_BE",
          "id": "create_bytes_encoded",
          "description": "Creates bytes object from encoded string",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "byte_encoding"
        },
        {
          "api_name": "codecs.BOM_UTF16_LE",
          "id": "create_bytes_encoded",
          "description": "Creates bytes object from encoded string",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "byte_encoding"
        },
        {
          "api_name": "codecs.BOM_UTF8",
          "id": "create_bytes_encoded",
          "description": "Creates bytes object from encoded string",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "byte_encoding"
        }
      ],
      "contextual_code": "import codecs\n\ndef detect_encoding(b):\n    bstartswith = b.startswith\n    if bstartswith((codecs.BOM_UTF32_BE, codecs.BOM_UTF32_LE)):\n        return 'utf-32'\n    if bstartswith((codecs.BOM_UTF16_BE, codecs.BOM_UTF16_LE)):\n        return 'utf-16'\n    if bstartswith(codecs.BOM_UTF8):\n        return 'utf-8-sig'"
    }
  },
  {
    "metadata": {
      "package_name": "commentjson-0.9.0",
      "total_matches": 1
    }
  }
]