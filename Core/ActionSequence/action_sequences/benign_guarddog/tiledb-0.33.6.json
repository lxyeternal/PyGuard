[
  {
    "pyfile": "setup.py",
    "code_snippet": "import argparse\nimport os\nimport subprocess\n\n\ndef main():\n    parser = argparse.ArgumentParser()\n    parser.add_argument(\"command\", choices=[\"install\", \"develop\"])\n    parser.add_argument(\"--tiledb\", type=str, required=False)\n    parser.add_argument(\"--debug\", action=\"store_true\")\n    parser.add_argument(\"--enable-deprecations\", action=\"store_true\", required=False)\n    parser.add_argument(\"--enable-serialization\", action=\"store_true\", required=False)\n    parser.add_argument(\"-v\", action=\"store_true\")\n    args = parser.parse_args()\n\n    os.getcwd()\n\n    cmd = [\n        \"pip\",\n        \"install\",\n    ]\n\n    if args.command == \"develop\":\n        cmd.append(\"-e\")\n\n    cmd.append(os.getcwd())\n\n    if args.tiledb:\n        cmd.append(f\"-Cskbuild.cmake.define.TILEDB_PATH={args.tiledb}\")\n\n    if args.debug:\n        cmd.append(f\"-Cskbuild.cmake.build-type=Debug\")\n\n    if args.enable_deprecations:\n        cmd.append(f\"-Cskbuild.cmake.define.TILEDB_REMOVE_DEPRECATIONS=OFF\")\n\n    if args.enable_serialization:\n        cmd.append(f\"-Cskbuild.cmake.define.TILEDB_SERIALIZATION=ON\")\n\n    if args.v:\n        cmd.append(\"-v\")\n\n    print(\n        \"Note: 'setup.py' is deprecated in the Python ecosystem. Limited backward compatibility is currently provided for 'install' and 'develop' commands as passthrough to 'pip'.\"\n    )\n    print(\"    running: \", f\"`{' '.join(cmd)}`\")\n\n    subprocess.run(cmd)\n\n\nif __name__ == \"__main__\":\n    main()\n",
    "pattern_analysis": {
      "api_sequence": [
        "os.getcwd",
        "subprocess.run"
      ],
      "api_sequence_with_args": [
        "os.getcwd()",
        "subprocess.run(cmd)"
      ],
      "mapped_sequence": [
        {
          "api_name": "os.getcwd",
          "id": "get_working_dir",
          "description": "Returns current working directory",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "subprocess.run",
          "id": "spawn_process_no_shell",
          "description": "Spawns new process to execute command without shell access",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_creation"
        }
      ],
      "contextual_code": "import os\nimport subprocess\n\ndef main():\n    ...\n    os.getcwd()\n    ...\n    subprocess.run(cmd)\n"
    }
  },
  {
    "metadata": {
      "package_name": "tiledb-0.33.6",
      "total_matches": 1
    }
  }
]