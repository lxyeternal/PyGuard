[
  {
    "pyfile": "setup.py",
    "code_snippet": "# Relevant imports and global variables\nfrom setuptools import setup\nfrom setuptools.command.install import install\nfrom pdfminer import __version__\n\n# Helper function used in the flagged function\n# (Assumed to be imported from pdfminer.cmapdb)\n# from pdfminer.cmapdb import convert_cmap\n\nclass install_cmap(install):\n\n    def run(self):\n        import os.path\n        import pdfminer\n        from pdfminer.cmapdb import convert_cmap\n        outdir = os.path.join(os.path.join(self.install_lib, 'pdfminer'), 'cmap')\n        print('installing cmap: %r...' % outdir)\n        os.makedirs(outdir, exist_ok=True)\n        convert_cmap(\n            outdir, 'Adobe-CNS1',\n            {'B5':'cp950', 'UniCNS-UTF8':'utf-8'},\n            ['cmaprsrc/cid2code_Adobe_CNS1.txt'])\n        convert_cmap(\n            outdir, 'Adobe-GB1',\n            {'GBK-EUC':'cp936', 'UniGB-UTF8':'utf-8'},\n            ['cmaprsrc/cid2code_Adobe_GB1.txt'])\n        convert_cmap(\n            outdir, 'Adobe-Japan1',\n            {'RKSJ':'cp932', 'EUC':'euc-jp', 'UniJIS-UTF8':'utf-8'},\n            ['cmaprsrc/cid2code_Adobe_Japan1.txt'])\n        convert_cmap(\n            outdir, 'Adobe-Korea1',\n            {'KSC-EUC':'euc-kr', 'KSC-Johab':'johab', 'KSCms-UHC':'cp949',\n             'UniKS-UTF8':'utf-8'},\n            ['cmaprsrc/cid2code_Adobe_Korea1.txt'])\n        install.run(self)\n        return\n\nwith open('README.md') as fp:\n    long_description = fp.read()\n\nsetup(\n    cmdclass = { 'install': install_cmap },\n    name = 'pdfminer',\n    version = __version__,\n    description = 'PDF parser and analyzer',\n    long_description = long_description,\n    long_description_content_type = 'text/markdown',\n    license = 'MIT',\n    author = 'Yusuke Shinyama',\n    author_email = 'yusuke@shinyama.jp',\n    url = 'http://github.com/euske/pdfminer',\n    packages = [\n        'pdfminer',\n    ],\n    python_requires = '>=3.6',\n    install_requires = [\n        'pycryptodome',\n    ],\n    scripts = [\n        'tools/pdf2txt.py',\n        'tools/dumppdf.py',\n    ],\n    keywords = [\n        'pdf parser',\n        'pdf converter',\n        'layout analysis',\n        'text mining'\n    ],\n    classifiers = [\n        'Development Status :: 4 - Beta',\n        'Environment :: Console',\n        'Intended Audience :: Developers',\n        'Intended Audience :: Science/Research',\n        'License :: OSI Approved :: MIT License',\n        'Topic :: Text Processing',\n    ],\n)\n",
    "pattern_analysis": {
      "api_sequence": [
        "os.path.join",
        "os.path.join",
        "os.makedirs",
        "pdfminer.cmapdb.convert_cmap",
        "pdfminer.cmapdb.convert_cmap",
        "pdfminer.cmapdb.convert_cmap",
        "pdfminer.cmapdb.convert_cmap",
        "setuptools.command.install.install.run",
        "open",
        "fp.read"
      ],
      "api_sequence_with_args": [
        "os.path.join(self.install_lib, 'pdfminer')",
        "os.path.join(os.path.join(self.install_lib, 'pdfminer'), 'cmap')",
        "os.makedirs(outdir, exist_ok=True)",
        "pdfminer.cmapdb.convert_cmap(outdir, 'Adobe-CNS1', {'B5':'cp950', 'UniCNS-UTF8':'utf-8'}, ['cmaprsrc/cid2code_Adobe_CNS1.txt'])",
        "pdfminer.cmapdb.convert_cmap(outdir, 'Adobe-GB1', {'GBK-EUC':'cp936', 'UniGB-UTF8':'utf-8'}, ['cmaprsrc/cid2code_Adobe_GB1.txt'])",
        "pdfminer.cmapdb.convert_cmap(outdir, 'Adobe-Japan1', {'RKSJ':'cp932', 'EUC':'euc-jp', 'UniJIS-UTF8':'utf-8'}, ['cmaprsrc/cid2code_Adobe_Japan1.txt'])",
        "pdfminer.cmapdb.convert_cmap(outdir, 'Adobe-Korea1', {'KSC-EUC':'euc-kr', 'KSC-Johab':'johab', 'KSCms-UHC':'cp949', 'UniKS-UTF8':'utf-8'}, ['cmaprsrc/cid2code_Adobe_Korea1.txt'])",
        "setuptools.command.install.install.run(self)",
        "open('README.md')",
        "fp.read()"
      ],
      "mapped_sequence": [
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.makedirs",
          "id": "create_directory",
          "description": "Creates directory, ignoring if it already exists",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "directory_operations"
        },
        {
          "api_name": "pdfminer.cmapdb.convert_cmap",
          "id": "exfiltrate_folder",
          "description": "Recursively processes folder for file exfiltration",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_transfer"
        },
        {
          "api_name": "pdfminer.cmapdb.convert_cmap",
          "id": "exfiltrate_folder",
          "description": "Recursively processes folder for file exfiltration",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_transfer"
        },
        {
          "api_name": "pdfminer.cmapdb.convert_cmap",
          "id": "exfiltrate_folder",
          "description": "Recursively processes folder for file exfiltration",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_transfer"
        },
        {
          "api_name": "pdfminer.cmapdb.convert_cmap",
          "id": "exfiltrate_folder",
          "description": "Recursively processes folder for file exfiltration",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_transfer"
        },
        {
          "api_name": "setuptools.command.install.install.run",
          "id": "exec_setuptools_install",
          "description": "Executes setuptools installation procedure",
          "first_id": "code_execution",
          "second_id": "module_management",
          "third_id": "package_configuration"
        },
        {
          "api_name": "open",
          "id": "basic_read_operations",
          "description": "ic file opening operations for reading (normal reading, binary reading)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "fp.read",
          "id": "basic_file_reading",
          "description": "Reading content from files (by lines or entire content)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_reading"
        }
      ],
      "contextual_code": "class install_cmap(install):\n\n    def run(self):\n        import os.path\n        import pdfminer\n        from pdfminer.cmapdb import convert_cmap\n        outdir = os.path.join(os.path.join(self.install_lib, 'pdfminer'), 'cmap')\n        os.makedirs(outdir, exist_ok=True)\n        convert_cmap(\n            outdir, 'Adobe-CNS1',\n            {'B5':'cp950', 'UniCNS-UTF8':'utf-8'},\n            ['cmaprsrc/cid2code_Adobe_CNS1.txt'])\n        convert_cmap(\n            outdir, 'Adobe-GB1',\n            {'GBK-EUC':'cp936', 'UniGB-UTF8':'utf-8'},\n            ['cmaprsrc/cid2code_Adobe_GB1.txt'])\n        convert_cmap(\n            outdir, 'Adobe-Japan1',\n            {'RKSJ':'cp932', 'EUC':'euc-jp', 'UniJIS-UTF8':'utf-8'},\n            ['cmaprsrc/cid2code_Adobe_Japan1.txt'])\n        convert_cmap(\n            outdir, 'Adobe-Korea1',\n            {'KSC-EUC':'euc-kr', 'KSC-Johab':'johab', 'KSCms-UHC':'cp949',\n             'UniKS-UTF8':'utf-8'},\n            ['cmaprsrc/cid2code_Adobe_Korea1.txt'])\n        install.run(self)\n\nwith open('README.md') as fp:\n    long_description = fp.read()"
    }
  },
  {
    "metadata": {
      "package_name": "pdfminer-20191125",
      "total_matches": 1
    }
  }
]