[
  {
    "pyfile": "setup.py",
    "code_snippet": "import datetime\nimport locale\nimport platform\nimport sys\nfrom os import getenv\nfrom subprocess import call\n\nclass BuildDocsCommand(setuptools.command.build_py.build_py):\n    apidoc_command = (\n        'sphinx-apidoc', '-f', '-o', 'docs', '--no-toc', 'coalib'\n    )\n    doc_command = ('make', '-C', 'docs', 'html', 'SPHINXOPTS=-W')\n\n    def run(self):\n        errOne = call(self.apidoc_command)\n        errTwo = call(self.doc_command)\n        sys.exit(errOne or errTwo)\n\n# Generate API documentation only if we are running on readthedocs.io\non_rtd = getenv('READTHEDOCS', None) is not None\nif on_rtd:\n    call(BuildDocsCommand.apidoc_command)\n    if 'dev' in VERSION:\n        current_version = datetime.datetime.now().strftime('%Y%m%d%H%M%S')\n        call(['python3', '.misc/adjust_version_number.py', 'coalib/VERSION',\n              '-b {}'.format(current_version)])\n        VERSION = get_version()\n",
    "pattern_analysis": {
      "api_sequence": [
        "os.getenv",
        "subprocess.call",
        "subprocess.call",
        "sys.exit",
        "subprocess.call",
        "datetime.datetime.now",
        "datetime.datetime.strftime",
        "subprocess.call"
      ],
      "api_sequence_with_args": [
        "os.getenv('READTHEDOCS', None)",
        "subprocess.call(self.apidoc_command)",
        "subprocess.call(self.doc_command)",
        "sys.exit(errOne or errTwo)",
        "subprocess.call(BuildDocsCommand.apidoc_command)",
        "datetime.datetime.now()",
        "datetime.datetime.strftime('%Y%m%d%H%M%S')",
        "subprocess.call(['python3', '.misc/adjust_version_number.py', 'coalib/VERSION', '-b {}'.format(current_version)])"
      ],
      "mapped_sequence": [
        {
          "api_name": "os.getenv",
          "id": "get_env_var",
          "description": "Retrieves value of environment variable",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "environment_information"
        },
        {
          "api_name": "subprocess.call",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        },
        {
          "api_name": "subprocess.call",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        },
        {
          "api_name": "sys.exit",
          "id": "exit_program",
          "description": "Exits program with specified status code",
          "first_id": "system_operations",
          "second_id": "process_management",
          "third_id": "process_control"
        },
        {
          "api_name": "subprocess.call",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        },
        {
          "api_name": "datetime.datetime.now",
          "id": "get_current_time",
          "description": "Returns current time in seconds since epoch",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "time_operations"
        },
        {
          "api_name": "datetime.datetime.strftime",
          "id": "format_local_time",
          "description": "Formats local time tuple as string",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "time_operations"
        },
        {
          "api_name": "subprocess.call",
          "id": "execute_shell_command",
          "description": "Executes shell command",
          "first_id": "command_control_communications",
          "second_id": "command_execution",
          "third_id": "command_sending"
        }
      ],
      "contextual_code": "from os import getenv\nfrom subprocess import call\nimport sys\nimport datetime\n\nclass BuildDocsCommand(setuptools.command.build_py.build_py):\n    apidoc_command = (\n        'sphinx-apidoc', '-f', '-o', 'docs', '--no-toc', 'coalib'\n    )\n    doc_command = ('make', '-C', 'docs', 'html', 'SPHINXOPTS=-W')\n\n    def run(self):\n        errOne = call(self.apidoc_command)\n        errTwo = call(self.doc_command)\n        sys.exit(errOne or errTwo)\n\non_rtd = getenv('READTHEDOCS', None) is not None\nif on_rtd:\n    call(BuildDocsCommand.apidoc_command)\n    if 'dev' in VERSION:\n        current_version = datetime.datetime.now().strftime('%Y%m%d%H%M%S')\n        call(['python3', '.misc/adjust_version_number.py', 'coalib/VERSION', '-b {}'.format(current_version)])"
    }
  },
  {
    "metadata": {
      "package_name": "coala-0.12.0.dev20180101025653",
      "total_matches": 4
    }
  }
]