[
  {
    "pyfile": "m.py",
    "code_snippet": "import os\nimport json\nimport requests\nfrom flask import jsonify\n\nclass m:\n    def send_telegram_message(self, invoking_function_name, message, preset_name):\n\n        # Set the config path to ~/.rgwfuncsrc\n        config_path = os.path.expanduser(\"~/.rgwfuncsrc\")\n\n        def load_config():\n            \"\"\"Load the configuration from the .rgwfuncsrc file.\"\"\"\n            with open(config_path, 'r') as file:\n                return json.load(file)\n\n        def get_telegram_preset(config, preset_name):\n            presets = config.get(\"telegram_bot_presets\", [])\n            for preset in presets:\n                if preset.get(\"name\") == preset_name:\n                    return preset\n            return None\n\n        def get_telegram_bot_details(config, preset_name):\n            preset = get_telegram_preset(config, preset_name)\n            if not preset:\n                raise RuntimeError(f\"Telegram bot preset '{preset_name}' not found in the configuration file\")\n\n            bot_token = preset.get(\"bot_token\")\n            chat_id = preset.get(\"chat_id\")\n\n            if not bot_token or not chat_id:\n                raise RuntimeError(\n                    f\"Telegram bot token or chat ID for '{preset_name}' not found in the configuration file\"\n                )\n\n            return bot_token, chat_id\n\n        config = load_config()\n        bot_token, chat_id = get_telegram_bot_details(config, preset_name)\n        url = f\"https://api.telegram.org/bot{bot_token}/sendMessage\"\n        payload = {\"chat_id\": chat_id, \"text\": message}\n\n        response = requests.post(url, json=payload)\n        response.raise_for_status()\n",
    "pattern_analysis": {
      "api_sequence": [
        "os.path.expanduser",
        "open",
        "json.load",
        "dict.get",
        "dict.get",
        "dict.get",
        "dict.get",
        "dict.get",
        "requests.post",
        "requests.models.Response.raise_for_status"
      ],
      "api_sequence_with_args": [
        "os.path.expanduser(\"~/.rgwfuncsrc\")",
        "open(config_path, 'r')",
        "json.load(file)",
        "config.get(\"telegram_bot_presets\", [])",
        "preset.get(\"name\")",
        "preset.get(\"bot_token\")",
        "preset.get(\"chat_id\")",
        "preset.get(\"bot_token\") or preset.get(\"chat_id\")",
        "requests.post(url, json=payload)",
        "requests.models.Response.raise_for_status()"
      ],
      "mapped_sequence": [
        {
          "api_name": "os.path.expanduser",
          "id": "path_special_operations",
          "description": "Special path operations (home directory expansion, temporary directory path, executable path, directory tree generation)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "open",
          "id": "basic_read_operations",
          "description": "ic file opening operations for reading (normal reading, binary reading)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "json.load",
          "id": "deserialize_from_json",
          "description": "Deserializes JSON string to Python object",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "specific_format_encoding"
        },
        {
          "api_name": "dict.get",
          "id": "deserialize_from_json",
          "description": "Deserializes JSON string to Python object",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "specific_format_encoding"
        },
        {
          "api_name": "dict.get",
          "id": "deserialize_from_json",
          "description": "Deserializes JSON string to Python object",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "specific_format_encoding"
        },
        {
          "api_name": "dict.get",
          "id": "deserialize_from_json",
          "description": "Deserializes JSON string to Python object",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "specific_format_encoding"
        },
        {
          "api_name": "dict.get",
          "id": "deserialize_from_json",
          "description": "Deserializes JSON string to Python object",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "specific_format_encoding"
        },
        {
          "api_name": "dict.get",
          "id": "deserialize_from_json",
          "description": "Deserializes JSON string to Python object",
          "first_id": "data_transformation_processing",
          "second_id": "data_encoding",
          "third_id": "specific_format_encoding"
        },
        {
          "api_name": "requests.post",
          "id": "send_http_post",
          "description": "Sends HTTP POST request with data and parameters",
          "first_id": "basic_network_operations",
          "second_id": "http_requests",
          "third_id": "request_sending"
        },
        {
          "api_name": "requests.models.Response.raise_for_status",
          "id": "raise_http_error",
          "description": "Raises HTTPError if response status code indicates error",
          "first_id": "basic_network_operations",
          "second_id": "http_requests",
          "third_id": "response_processing"
        }
      ],
      "contextual_code": "import os\nimport json\nimport requests\n\nclass m:\n    def send_telegram_message(self, invoking_function_name, message, preset_name):\n        config_path = os.path.expanduser(\"~/.rgwfuncsrc\")\n\n        def load_config():\n            with open(config_path, 'r') as file:\n                return json.load(file)\n\n        def get_telegram_preset(config, preset_name):\n            presets = config.get(\"telegram_bot_presets\", [])\n            for preset in presets:\n                if preset.get(\"name\") == preset_name:\n                    return preset\n            return None\n\n        def get_telegram_bot_details(config, preset_name):\n            preset = get_telegram_preset(config, preset_name)\n            if not preset:\n                raise RuntimeError(f\"Telegram bot preset '{preset_name}' not found in the configuration file\")\n\n            bot_token = preset.get(\"bot_token\")\n            chat_id = preset.get(\"chat_id\")\n\n            if not bot_token or not chat_id:\n                raise RuntimeError(\n                    f\"Telegram bot token or chat ID for '{preset_name}' not found in the configuration file\"\n                )\n\n            return bot_token, chat_id\n\n        config = load_config()\n        bot_token, chat_id = get_telegram_bot_details(config, preset_name)\n        url = f\"https://api.telegram.org/bot{bot_token}/sendMessage\"\n        payload = {\"chat_id\": chat_id, \"text\": message}\n\n        response = requests.post(url, json=payload)\n        response.raise_for_status()"
    }
  },
  {
    "metadata": {
      "package_name": "rgwml-0.0.346",
      "total_matches": 1
    }
  }
]